!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=56)}([function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(2),o=n(3);e.root="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this;var a=e.root.angular||{};function s(t,e){return-1!==t.indexOf(e)}function u(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),t}function c(t,e){return t.push(e),e}function l(t,e){var n={};for(var r in t)-1!==e.indexOf(r)&&(n[r]=t[r]);return n}function f(t,n,i){return i=i||(r.isArray(t)?[]:{}),e.forEach(t,function(t,e){return i[e]=n(t,e)}),i}function h(t,e){return t.push(e),t}function p(t,e){return void 0===e&&(e="assert failure"),function(n){var i=t(n);if(!i)throw new Error(r.isFunction(e)?e(n):e);return i}}function d(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return[];for(var n=t.reduce(function(t,e){return Math.min(e.length,t)},9007199254740991),r=[],i=function(e){switch(t.length){case 1:r.push([t[0][e]]);break;case 2:r.push([t[0][e],t[1][e]]);break;case 3:r.push([t[0][e],t[1][e],t[2][e]]);break;case 4:r.push([t[0][e],t[1][e],t[2][e],t[3][e]]);break;default:r.push(t.map(function(t){return t[e]}))}},o=0;o<n;o++)i(o);return r}function v(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r=Object.keys(n),i=0;i<r.length;i++)t[r[i]]=n[r[i]]}return t}function $(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n=typeof t;if(n!==typeof e||"object"!==n)return!1;var o,a,s=[t,e];if(i.all(r.isArray)(s))return a=e,(o=t).length===a.length&&d(o,a).reduce(function(t,e){return t&&$(e[0],e[1])},!0);if(i.all(r.isDate)(s))return t.getTime()===e.getTime();if(i.all(r.isRegExp)(s))return t.toString()===e.toString();if(i.all(r.isFunction)(s))return!0;if([r.isFunction,r.isArray,r.isDate,r.isRegExp].map(i.any).reduce(function(t,e){return t||!!e(s)},!1))return!1;var u={};for(var c in t){if(!$(t[c],e[c]))return!1;u[c]=!0}for(var c in e)if(!u[c])return!1;return!0}e.fromJson=a.fromJson||JSON.parse.bind(JSON),e.toJson=a.toJson||JSON.stringify.bind(JSON),e.forEach=a.forEach||function(t,e,n){if(r.isArray(t))return t.forEach(e,n);Object.keys(t).forEach(function(n){return e(t[n],n)})},e.extend=Object.assign||v,e.equals=a.equals||$,e.identity=function(t){return t},e.noop=function(){},e.createProxyFunctions=function(t,e,n,r,i){void 0===i&&(i=!1);var o=function(e){return t()[e].bind(n())};return(r=r||Object.keys(t())).reduce(function(t,n){var r;return t[n]=i?(r=n,function(){return e[r]=o(r),e[r].apply(null,arguments)}):o(n),t},e)},e.inherit=function(t,n){return e.extend(Object.create(t),n)},e.inArray=i.curry(s),e._inArray=s,e.removeFrom=i.curry(u),e._removeFrom=u,e.pushTo=i.curry(c),e._pushTo=c,e.deregAll=function(t){return t.slice().forEach(function(n){"function"==typeof n&&n(),e.removeFrom(t,n)})},e.defaults=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n.concat({}).reverse(),o=e.extend.apply(null,i);return e.extend({},o,l(t||{},Object.keys(o)))},e.mergeR=function(t,n){return e.extend(t,n)},e.ancestors=function(t,e){var n=[];for(var r in t.path){if(t.path[r]!==e.path[r])break;n.push(t.path[r])}return n},e.pick=l,e.omit=function(t,n){return Object.keys(t).filter(i.not(e.inArray(n))).reduce(function(e,n){return e[n]=t[n],e},{})},e.pluck=function(t,e){return f(t,i.prop(e))},e.filter=function(t,n){var i=r.isArray(t),o=i?[]:{},a=i?function(t){return o.push(t)}:function(t,e){return o[e]=t};return e.forEach(t,function(t,e){n(t,e)&&a(t,e)}),o},e.find=function(t,n){var r;return e.forEach(t,function(t,e){r||n(t,e)&&(r=t)}),r},e.mapObj=f,e.map=f,e.values=function(t){return Object.keys(t).map(function(e){return t[e]})},e.allTrueR=function(t,e){return t&&e},e.anyTrueR=function(t,e){return t||e},e.unnestR=function(t,e){return t.concat(e)},e.flattenR=function(t,n){return r.isArray(n)?t.concat(n.reduce(e.flattenR,[])):h(t,n)},e.pushR=h,e.uniqR=function(t,n){return e.inArray(t,n)?t:h(t,n)},e.unnest=function(t){return t.reduce(e.unnestR,[])},e.flatten=function(t){return t.reduce(e.flattenR,[])},e.assertPredicate=p,e.assertMap=p,e.assertFn=p,e.pairs=function(t){return Object.keys(t).map(function(e){return[e,t[e]]})},e.arrayTuples=d,e.applyPairs=function(t,e){var n,i;if(r.isArray(e)&&(n=e[0],i=e[1]),!r.isString(n))throw new Error("invalid parameters to applyPairs");return t[n]=i,t},e.tail=function(t){return t.length&&t[t.length-1]||void 0},e.copy=function(t,n){return n&&Object.keys(n).forEach(function(t){return delete n[t]}),n||(n={}),e.extend(n,t)},e._extend=v,e.silenceUncaughtInPromise=function(t){return t.catch(function(t){return 0})&&t},e.silentRejection=function(t){return e.silenceUncaughtInPromise(o.services.$q.reject(t))}}).call(e,n(61))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(18),o=Object.prototype.toString,a=function(t){return function(e){return typeof e===t}};e.isUndefined=a("undefined"),e.isDefined=r.not(e.isUndefined),e.isNull=function(t){return null===t},e.isNullOrUndefined=r.or(e.isNull,e.isUndefined),e.isFunction=a("function"),e.isNumber=a("number"),e.isString=a("string"),e.isObject=function(t){return null!==t&&"object"==typeof t},e.isArray=Array.isArray,e.isDate=function(t){return"[object Date]"===o.call(t)},e.isRegExp=function(t){return"[object RegExp]"===o.call(t)},e.isState=i.StateObject.isState,e.isInjectable=function(t){if(e.isArray(t)&&t.length){var n=t.slice(0,-1),i=t.slice(-1);return!(n.filter(r.not(e.isString)).length||i.filter(r.not(e.isFunction)).length)}return e.isFunction(t)},e.isPromise=r.and(e.isObject,r.pipe(r.prop("then"),e.isFunction))},function(t,e,n){"use strict";function r(t){var e=[].slice.apply(arguments,[1]),n=t.length;return function e(r){return r.length>=n?t.apply(null,r):function(){return e(r.concat([].slice.apply(arguments)))}}(e)}function i(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(null,[].slice.call(arguments).reverse())}Object.defineProperty(e,"__esModule",{value:!0}),e.curry=r,e.compose=i,e.pipe=o,e.prop=function(t){return function(e){return e&&e[t]}},e.propEq=r(function(t,e,n){return n&&n[t]===e}),e.parse=function(t){return o.apply(null,t.split(".").map(e.prop))},e.not=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}},e.and=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(null,n)&&e.apply(null,n)}},e.or=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(null,n)||e.apply(null,n)}},e.all=function(t){return function(e){return e.reduce(function(e,n){return e&&!!t(n)},!0)}},e.any=function(t){return function(e){return e.reduce(function(e,n){return e||!!t(n)},!1)}},e.is=function(t){return function(e){return null!=e&&e.constructor===t||e instanceof t}},e.eq=function(t){return function(e){return t===e}},e.val=function(t){return function(){return t}},e.invoke=function(t,e){return function(n){return n[t].apply(n,e)}},e.pattern=function(t){return function(e){for(var n=0;n<t.length;n++)if(t[n][0](e))return t[n][1](e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notImplemented=function(t){return function(){throw new Error(t+"(): No coreservices implementation for UI-Router is loaded.")}};var r={$q:void 0,$injector:void 0};e.services=r},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(0)),r(n(3)),r(n(19)),r(n(2)),r(n(1)),r(n(20)),r(n(5)),r(n(6))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(7),o=n(0),a=n(2),s=n(13),u=n(12);function c(t){var e=l(t),n=e.match(/^(function [^ ]+\([^)]*\))/),r=n?n[1]:e,i=t.name||"";return i&&r.match(/function \(/)?"function "+i+r.substr(9):r}function l(t){var e=r.isArray(t)?t.slice(-1)[0]:t;return e&&e.toString()||"undefined"}e.maxLength=function(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."},e.padString=function(t,e){for(;e.length<t;)e+=" ";return e},e.kebobString=function(t){return t.replace(/^([A-Z])/,function(t){return t.toLowerCase()}).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},e.functionToString=c,e.fnToString=l;var f=null,h=function(t){var e=i.Rejection.isRejectionPromise;return(f=f||a.pattern([[a.not(r.isDefined),a.val("undefined")],[r.isNull,a.val("null")],[r.isPromise,a.val("[Promise]")],[e,function(t){return t._transitionRejection.toString()}],[a.is(i.Rejection),a.invoke("toString")],[a.is(s.Transition),a.invoke("toString")],[a.is(u.Resolvable),a.invoke("toString")],[r.isInjectable,c],[a.val(!0),o.identity]]))(t)};e.stringify=function(t){var e=[];return JSON.stringify(t,function(t,n){return function(t){if(r.isObject(t)){if(-1!==e.indexOf(t))return"[circular ref]";e.push(t)}return h(t)}(n)}).replace(/\\"/g,'"')},e.beforeAfterSubstr=function(t){return function(e){if(!e)return["",""];var n=e.indexOf(t);return-1===n?[e,""]:[e.substr(0,n),e.substr(n+1)]}},e.hostRegex=new RegExp("^(?:[a-z]+:)?//[^/]+/"),e.stripLastPathElement=function(t){return t.replace(/\/[^/]*$/,"")},e.splitHash=e.beforeAfterSubstr("#"),e.splitQuery=e.beforeAfterSubstr("?"),e.splitEqual=e.beforeAfterSubstr("="),e.trimHashVal=function(t){return t?t.replace(/^#/,""):""},e.splitOnDelim=function(t){var e=new RegExp("("+t+")","g");return function(t){return t.split(e).filter(o.identity)}},e.joinNeighborsR=function(t,e){return r.isString(o.tail(t))&&r.isString(e)?t.slice(0,-1).concat(o.tail(t)+e):o.pushR(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(1),o=n(5);function a(t){if(!t)return"ui-view (defunct)";var e=t.creationContext?t.creationContext.name||"(root)":"(none)";return"[ui-view#"+t.id+" "+t.$type+":"+t.fqn+" ("+t.name+"@"+e+")]"}function s(t){return i.isNumber(t)?u[t]:u[u[t]]}var u,c=Function.prototype.bind.call(console.log,console),l=i.isFunction(console.table)?console.table.bind(console):c.bind(console);!function(t){t[t.RESOLVE=0]="RESOLVE",t[t.TRANSITION=1]="TRANSITION",t[t.HOOK=2]="HOOK",t[t.UIVIEW=3]="UIVIEW",t[t.VIEWCONFIG=4]="VIEWCONFIG"}(u||(u={})),e.Category=u;var f=r.parse("$id"),h=r.parse("router.$id"),p=function(t){return"Transition #"+f(t)+"-"+h(t)},d=function(){function t(){this._enabled={},this.approximateDigests=0}return t.prototype._set=function(t,e){var n=this;e.length||(e=Object.keys(u).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)}).map(function(t){return u[t]})),e.map(s).forEach(function(e){return n._enabled[e]=t})},t.prototype.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!0,t)},t.prototype.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!1,t)},t.prototype.enabled=function(t){return!!this._enabled[s(t)]},t.prototype.traceTransitionStart=function(t){this.enabled(u.TRANSITION)&&console.log(p(t)+": Started  -> "+o.stringify(t))},t.prototype.traceTransitionIgnored=function(t){this.enabled(u.TRANSITION)&&console.log(p(t)+": Ignored  <> "+o.stringify(t))},t.prototype.traceHookInvocation=function(t,e,n){if(this.enabled(u.HOOK)){var i=r.parse("traceData.hookType")(n)||"internal",a=r.parse("traceData.context.state.name")(n)||r.parse("traceData.context")(n)||"unknown",s=o.functionToString(t.registeredHook.callback);console.log(p(e)+":   Hook -> "+i+" context: "+a+", "+o.maxLength(200,s))}},t.prototype.traceHookResult=function(t,e,n){this.enabled(u.HOOK)&&console.log(p(e)+":   <- Hook returned: "+o.maxLength(200,o.stringify(t)))},t.prototype.traceResolvePath=function(t,e,n){this.enabled(u.RESOLVE)&&console.log(p(n)+":         Resolving "+t+" ("+e+")")},t.prototype.traceResolvableResolved=function(t,e){this.enabled(u.RESOLVE)&&console.log(p(e)+":               <- Resolved  "+t+" to: "+o.maxLength(200,o.stringify(t.data)))},t.prototype.traceError=function(t,e){this.enabled(u.TRANSITION)&&console.log(p(e)+": <- Rejected "+o.stringify(e)+", reason: "+t)},t.prototype.traceSuccess=function(t,e){this.enabled(u.TRANSITION)&&console.log(p(e)+": <- Success  "+o.stringify(e)+", final state: "+t.name)},t.prototype.traceUIViewEvent=function(t,e,n){void 0===n&&(n=""),this.enabled(u.UIVIEW)&&console.log("ui-view: "+o.padString(30,t)+" "+a(e)+n)},t.prototype.traceUIViewConfigUpdated=function(t,e){this.enabled(u.UIVIEW)&&this.traceUIViewEvent("Updating",t," with ViewConfig from context='"+e+"'")},t.prototype.traceUIViewFill=function(t,e){this.enabled(u.UIVIEW)&&this.traceUIViewEvent("Fill",t," with: "+o.maxLength(200,e))},t.prototype.traceViewSync=function(t){if(this.enabled(u.VIEWCONFIG)){var e="uiview component fqn",n=t.map(function(t){var n,r=t.uiView,i=t.viewConfig,o=r&&r.fqn,a=i&&i.viewDecl.$context.name+": ("+i.viewDecl.$name+")";return(n={})[e]=o,n["view config state (view name)"]=a,n}).sort(function(t,n){return(t[e]||"").localeCompare(n[e]||"")});l(n)}},t.prototype.traceViewServiceEvent=function(t,e){this.enabled(u.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+function(t){var e=t.viewDecl,n=e.$context.name||"(root)";return"[View#"+t.$id+" from '"+n+"' state]: target ui-view: '"+e.$uiViewName+"@"+e.$uiViewContextAnchor+"'"}(e))},t.prototype.traceViewServiceUIViewEvent=function(t,e){this.enabled(u.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+a(e))},t}();e.Trace=d;var v=new d;e.trace=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(5),a=n(2);!function(t){t[t.SUPERSEDED=2]="SUPERSEDED",t[t.ABORTED=3]="ABORTED",t[t.INVALID=4]="INVALID",t[t.IGNORED=5]="IGNORED",t[t.ERROR=6]="ERROR"}(r||(r={})),e.RejectType=r;var s=0,u=function(){function t(t,e,n){this.$id=s++,this.type=t,this.message=e,this.detail=n}return t.isRejectionPromise=function(e){return e&&"function"==typeof e.then&&a.is(t)(e._transitionRejection)},t.superseded=function(e,n){var i=new t(r.SUPERSEDED,"The transition has been superseded by a different transition",e);return n&&n.redirected&&(i.redirected=!0),i},t.redirected=function(e){return t.superseded(e,{redirected:!0})},t.invalid=function(e){return new t(r.INVALID,"This transition is invalid",e)},t.ignored=function(e){return new t(r.IGNORED,"The transition was ignored",e)},t.aborted=function(e){return new t(r.ABORTED,"The transition has been aborted",e)},t.errored=function(e){return new t(r.ERROR,"The transition errored",e)},t.normalize=function(e){return a.is(t)(e)?e:t.errored(e)},t.prototype.toString=function(){var t,e=(t=this.detail)&&t.toString!==Object.prototype.toString?t.toString():o.stringify(t);return"Transition Rejection($id: "+this.$id+" type: "+this.type+", message: "+this.message+", detail: "+e+")"},t.prototype.toPromise=function(){return i.extend(i.silentRejection(this),{_transitionRejection:this})},t}();e.Rejection=u},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.CREATE=0]="CREATE",t[t.BEFORE=1]="BEFORE",t[t.RUN=2]="RUN",t[t.SUCCESS=3]="SUCCESS",t[t.ERROR=4]="ERROR"}(r||(r={})),e.TransitionHookPhase=r,function(t){t[t.TRANSITION=0]="TRANSITION",t[t.STATE=1]="STATE"}(i||(i={})),e.TransitionHookScope=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(5),o=n(4),a=function(){function t(t,e,n,r){this._stateRegistry=t,this._identifier=e,this._identifier=e,this._params=o.extend({},n||{}),this._options=o.extend({},r||{}),this._definition=t.matcher.find(e,this._options.relative)}return t.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},t.prototype.identifier=function(){return this._identifier},t.prototype.params=function(){return this._params},t.prototype.$state=function(){return this._definition},t.prototype.state=function(){return this._definition&&this._definition.self},t.prototype.options=function(){return this._options},t.prototype.exists=function(){return!(!this._definition||!this._definition.self)},t.prototype.valid=function(){return!this.error()},t.prototype.error=function(){var t=this.options().relative;if(!this._definition&&t){var e=t.name?t.name:t;return"Could not resolve '"+this.name()+"' from state '"+e+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},t.prototype.toString=function(){return"'"+this.name()+"'"+i.stringify(this.params())},t.prototype.withState=function(e){return new t(this._stateRegistry,e,this._params,this._options)},t.prototype.withParams=function(e,n){void 0===n&&(n=!1);var r=n?e:o.extend({},this._params,e);return new t(this._stateRegistry,this._identifier,r,this._options)},t.prototype.withOptions=function(e,n){void 0===n&&(n=!1);var r=n?e:o.extend({},this._options,e);return new t(this._stateRegistry,this._identifier,this._params,r)},t.isDef=function(t){return t&&t.state&&(r.isString(t.state)||r.isString(t.state.name))},t}();e.TargetState=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(2),a=n(1),s=n(3),u=n(23),c=Object.prototype.hasOwnProperty,l=function(t){return 0===["value","type","squash","array","dynamic"].filter(c.bind(t||{})).length};!function(t){t[t.PATH=0]="PATH",t[t.SEARCH=1]="SEARCH",t[t.CONFIG=2]="CONFIG"}(r||(r={})),e.DefType=r;var f=function(){function t(t,e,n,s,c){e=function(t,e,n,i,o){if(t.type&&e&&"string"!==e.name)throw new Error("Param '"+i+"' has two type configurations.");if(t.type&&e&&"string"===e.name&&o.type(t.type))return o.type(t.type);if(e)return e;if(!t.type){var a=n===r.CONFIG?"any":n===r.PATH?"path":n===r.SEARCH?"query":"string";return o.type(a)}return t.type instanceof u.ParamType?t.type:o.type(t.type)}(n=function(t){function e(){return t.value}return t=l(t)&&{value:t}||t,e.__cacheable=!0,i.extend(t,{$$fn:a.isInjectable(t.value)?t.value:e})}(n),e,s,t,c.paramTypes);var f,h,p=(f={array:s===r.SEARCH&&"auto"},h=t.match(/\[\]$/)?{array:!0}:{},i.extend(f,h,n).array);e=p?e.$asArray(p,s===r.SEARCH):e;var d=void 0!==n.value||s===r.SEARCH,v=a.isDefined(n.dynamic)?!!n.dynamic:!!e.dynamic,$=a.isDefined(n.raw)?!!n.raw:!!e.raw,m=function(t,e,n){var r=t.squash;if(!e||!1===r)return!1;if(!a.isDefined(r)||null==r)return n;if(!0===r||a.isString(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}(n,d,c.defaultSquashPolicy()),g=function(t,e,n,r){var s=[{from:"",to:n||e?void 0:""},{from:null,to:n||e?void 0:""}],u=a.isArray(t.replace)?t.replace:[];a.isString(r)&&u.push({from:r,to:void 0});var c=i.map(u,o.prop("from"));return i.filter(s,function(t){return-1===c.indexOf(t.from)}).concat(u)}(n,p,d,m),y=a.isDefined(n.inherit)?!!n.inherit:!!e.inherit;i.extend(this,{id:t,type:e,location:s,isOptional:d,dynamic:v,raw:$,squash:m,replace:g,inherit:y,array:p,config:n})}return t.values=function(t,e){void 0===e&&(e={});for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];n[o.id]=o.value(e[o.id])}return n},t.changed=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),t.filter(function(t){return!t.type.equals(e[t.id],n[t.id])})},t.equals=function(e,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),0===t.changed(e,n,r).length},t.validates=function(t,e){return void 0===e&&(e={}),t.map(function(t){return t.validates(e[t.id])}).reduce(i.allTrueR,!0)},t.prototype.isDefaultValue=function(t){return this.isOptional&&this.type.equals(this.value(),t)},t.prototype.value=function(t){var e=this;return t=function(t){for(var n=0,r=e.replace;n<r.length;n++){var i=r[n];if(i.from===t)return i.to}return t}(t),a.isUndefined(t)?function(){if(e._defaultValueCache)return e._defaultValueCache.defaultValue;if(!s.services.$injector)throw new Error("Injectable functions cannot be called at configuration time");var t=s.services.$injector.invoke(e.config.$$fn);if(null!==t&&void 0!==t&&!e.type.is(t))throw new Error("Default value ("+t+") for parameter '"+e.id+"' is not an instance of ParamType ("+e.type.name+")");return e.config.$$fn.__cacheable&&(e._defaultValueCache={defaultValue:t}),t}():this.type.$normalize(t)},t.prototype.isSearch=function(){return this.location===r.SEARCH},t.prototype.validates=function(t){if((a.isUndefined(t)||null===t)&&this.isOptional)return!0;var e=this.type.$normalize(t);if(!this.type.is(e))return!1;var n=this.type.encode(e);return!(a.isString(n)&&!this.type.pattern.exec(n))},t.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},t}();e.Param=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(0),o=n(5),a=n(1),s=n(2),u=n(6),c=n(3),l=n(7),f=n(9),h={current:i.noop,transition:null,traceData:{},bind:null},p=function(){function t(t,e,n,o){var a=this;this.transition=t,this.stateContext=e,this.registeredHook=n,this.options=o,this.isSuperseded=function(){return a.type.hookPhase===r.TransitionHookPhase.RUN&&!a.options.transition.isActive()},this.options=i.defaults(o,h),this.type=n.eventType}return t.chain=function(t,e){return t.reduce(function(t,e){return t.then(function(){return e.invokeHook()})},e||c.services.$q.when())},t.invokeHooks=function(e,n){for(var r=0;r<e.length;r++){var i=e[r].invokeHook();if(a.isPromise(i)){var o=e.slice(r+1);return t.chain(o,i).then(n)}}return n()},t.runAllHooks=function(t){t.forEach(function(t){return t.invokeHook()})},t.prototype.logError=function(t){this.transition.router.stateService.defaultErrorHandler()(t)},t.prototype.invokeHook=function(){var t=this,e=this.registeredHook;if(!e._deregistered){var n=this.getNotCurrentRejection();if(n)return n;var r=this.options;u.trace.traceHookInvocation(this,this.transition,r);var i=function(n){return e.eventType.getErrorHandler(t)(n)},o=function(n){return e.eventType.getResultHandler(t)(n)};try{var s=e.callback.call(r.bind,t.transition,t.stateContext);return!this.type.synchronous&&a.isPromise(s)?s.catch(function(t){return l.Rejection.normalize(t).toPromise()}).then(o,i):o(s)}catch(t){return i(l.Rejection.normalize(t))}finally{e.invokeLimit&&++e.invokeCount>=e.invokeLimit&&e.deregister()}}},t.prototype.handleHookResult=function(t){var e=this,n=this.getNotCurrentRejection();return n||(a.isPromise(t)?t.then(function(t){return e.handleHookResult(t)}):(u.trace.traceHookResult(t,this.transition,this.options),!1===t?l.Rejection.aborted("Hook aborted transition").toPromise():s.is(f.TargetState)(t)?l.Rejection.redirected(t).toPromise():void 0))},t.prototype.getNotCurrentRejection=function(){var t=this.transition.router;return t._disposed?l.Rejection.aborted("UIRouter instance #"+t.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?l.Rejection.aborted().toPromise():this.isSuperseded()?l.Rejection.superseded(this.options.current()).toPromise():void 0},t.prototype.toString=function(){var t=this.options,e=this.registeredHook,n=s.parse("traceData.hookType")(t)||"internal",r=s.parse("traceData.context.state.name")(t)||s.parse("traceData.context")(t)||"unknown",i=o.fnToString(e.callback);return n+" context: "+r+", "+o.maxLength(200,i)},t.HANDLE_RESULT=function(t){return function(e){return t.handleHookResult(e)}},t.LOG_REJECTED_RESULT=function(t){return function(e){a.isPromise(e)&&e.catch(function(e){return t.logError(l.Rejection.normalize(e))})}},t.LOG_ERROR=function(t){return function(e){return t.logError(e)}},t.REJECT_ERROR=function(t){return function(t){return i.silentRejection(t)}},t.THROW_ERROR=function(t){return function(t){throw t}},t}();e.TransitionHook=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3),o=n(6),a=n(5),s=n(1),u=n(1);e.defaultResolvePolicy={when:"LAZY",async:"WAIT"};var c=function(){function t(e,n,o,a,c){if(this.resolved=!1,this.promise=void 0,e instanceof t)r.extend(this,e);else if(s.isFunction(n)){if(u.isNullOrUndefined(e))throw new Error("new Resolvable(): token argument is required");if(!s.isFunction(n))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=e,this.policy=a,this.resolveFn=n,this.deps=o||[],this.data=c,this.resolved=void 0!==c,this.promise=this.resolved?i.services.$q.when(this.data):void 0}else if(s.isObject(e)&&e.token&&(e.hasOwnProperty("resolveFn")||e.hasOwnProperty("data"))){var l=e;return new t(l.token,l.resolveFn,l.deps,l.policy,l.data)}}return t.prototype.getPolicy=function(t){var n=this.policy||{},r=t&&t.resolvePolicy||{};return{when:n.when||r.when||e.defaultResolvePolicy.when,async:n.async||r.async||e.defaultResolvePolicy.async}},t.prototype.resolve=function(t,e){var n=this,a=i.services.$q,s=t.findNode(this),u=s&&s.state,c="RXWAIT"===this.getPolicy(u).async?function(t){var e=t.cache(1);return e.take(1).toPromise().then(function(){return e})}:r.identity;return this.promise=a.when().then(function(){return a.all(t.getDependencies(n).map(function(n){return n.get(t,e)}))}).then(function(t){return n.resolveFn.apply(null,t)}).then(c).then(function(t){return n.data=t,n.resolved=!0,n.resolveFn=null,o.trace.traceResolvableResolved(n,e),n.data})},t.prototype.get=function(t,e){return this.promise||this.resolve(t,e)},t.prototype.toString=function(){return"Resolvable(token: "+a.stringify(this.token)+", requires: ["+this.deps.map(a.stringify)+"])"},t.prototype.clone=function(){return new t(this)},t.fromData=function(e,n){return new t(e,function(){return n},null,null,n)},t}();e.Resolvable=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(3),o=n(5),a=n(0),s=n(1),u=n(2),c=n(8),l=n(11),f=n(21),h=n(27),p=n(14),d=n(10),v=n(12),$=n(15),m=n(7),g=u.prop("self"),y=function(){function t(t,e,n){var r=this;if(this._deferred=i.services.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new h.HookBuilder(this),this.isActive=function(){return r.router.globals.transition===r},this.router=n,this._targetState=e,!e.valid())throw new Error(e.error());this._options=a.extend({current:u.val(this)},e.options()),this.$id=n.transitionService._transitionCount++;var o=p.PathUtils.buildToPath(t,e);this._treeChanges=p.PathUtils.treeChanges(t,o,this._options.reloadState),this.createTransitionHookRegFns();var s=this._hookBuilder.buildHooksForPhase(c.TransitionHookPhase.CREATE);l.TransitionHook.invokeHooks(s,function(){return null}),this.applyViewConfigs(n)}return t.prototype.onBefore=function(t,e,n){},t.prototype.onStart=function(t,e,n){},t.prototype.onExit=function(t,e,n){},t.prototype.onRetain=function(t,e,n){},t.prototype.onEnter=function(t,e,n){},t.prototype.onFinish=function(t,e,n){},t.prototype.onSuccess=function(t,e,n){},t.prototype.onError=function(t,e,n){},t.prototype.createTransitionHookRegFns=function(){var t=this;this.router.transitionService._pluginapi._getEvents().filter(function(t){return t.hookPhase!==c.TransitionHookPhase.CREATE}).forEach(function(e){return f.makeEvent(t,t.router.transitionService,e)})},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype.applyViewConfigs=function(t){var e=this._treeChanges.entering.map(function(t){return t.state});p.PathUtils.applyViewConfigs(t.transitionService.$view,this._treeChanges.to,e)},t.prototype.$from=function(){return a.tail(this._treeChanges.from).state},t.prototype.$to=function(){return a.tail(this._treeChanges.to).state},t.prototype.from=function(){return this.$from().self},t.prototype.to=function(){return this.$to().self},t.prototype.targetState=function(){return this._targetState},t.prototype.is=function(e){return e instanceof t?this.is({to:e.$to().name,from:e.$from().name}):!(e.to&&!f.matchState(this.$to(),e.to)||e.from&&!f.matchState(this.$from(),e.from))},t.prototype.params=function(t){return void 0===t&&(t="to"),Object.freeze(this._treeChanges[t].map(u.prop("paramValues")).reduce(a.mergeR,{}))},t.prototype.injector=function(t,e){void 0===e&&(e="to");var n=this._treeChanges[e];return t&&(n=p.PathUtils.subPath(n,function(e){return e.state===t||e.state.name===t})),new $.ResolveContext(n).injector()},t.prototype.getResolveTokens=function(t){return void 0===t&&(t="to"),new $.ResolveContext(this._treeChanges[t]).getTokens()},t.prototype.addResolvable=function(t,e){void 0===e&&(e=""),t=u.is(v.Resolvable)(t)?t:new v.Resolvable(t);var n="string"==typeof e?e:e.name,r=this._treeChanges.to,i=a.find(r,function(t){return t.state.name===n});new $.ResolveContext(r).addResolvables([t],i.state)},t.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},t.prototype.originalTransition=function(){var t=this.redirectedFrom();return t&&t.originalTransition()||this},t.prototype.options=function(){return this._options},t.prototype.entering=function(){return a.map(this._treeChanges.entering,u.prop("state")).map(g)},t.prototype.exiting=function(){return a.map(this._treeChanges.exiting,u.prop("state")).map(g).reverse()},t.prototype.retained=function(){return a.map(this._treeChanges.retained,u.prop("state")).map(g)},t.prototype.views=function(t,e){void 0===t&&(t="entering");var n=this._treeChanges[t];return(n=e?n.filter(u.propEq("state",e)):n).map(u.prop("views")).filter(a.identity).reduce(a.unnestR,[])},t.prototype.treeChanges=function(t){return t?this._treeChanges[t]:this._treeChanges},t.prototype.redirect=function(t){for(var e=1,n=this;null!=(n=n.redirectedFrom());)if(++e>20)throw new Error("Too many consecutive Transition redirects (20+)");var r={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==t.options().location&&(r.location="replace");var i=a.extend({},this.options(),t.options(),r);t=t.withOptions(i,!0);var o,s=this.router.transitionService.create(this._treeChanges.from,t),c=this._treeChanges.entering,l=s._treeChanges.entering;return p.PathUtils.matching(l,c,p.PathUtils.nonDynamicParams).filter(u.not((o=t.options().reloadState,function(t){return o&&t.state.includes[o.name]}))).forEach(function(t,e){t.resolvables=c[e].resolvables}),s},t.prototype._changedParams=function(){var t=this._treeChanges;if(!this._options.reload&&(!t.exiting.length&&!t.entering.length&&t.to.length===t.from.length&&!a.arrayTuples(t.to,t.from).map(function(t){return t[0].state!==t[1].state}).reduce(a.anyTrueR,!1))){var e=t.to.map(function(t){return t.paramSchema}),n=[t.to,t.from].map(function(t){return t.map(function(t){return t.paramValues})}),r=n[0],i=n[1];return a.arrayTuples(e,r,i).map(function(t){var e=t[0],n=t[1],r=t[2];return d.Param.changed(e,n,r)}).reduce(a.unnestR,[])}},t.prototype.dynamic=function(){var t=this._changedParams();return!!t&&t.map(function(t){return t.dynamic}).reduce(a.anyTrueR,!1)},t.prototype.ignored=function(){return!!this._ignoredReason()},t.prototype._ignoredReason=function(){var t=this.router.globals.transition,e=this._options.reloadState,n=function(t,n){if(t.length!==n.length)return!1;var r=p.PathUtils.matching(t,n);return t.length===r.filter(function(t){return!e||!t.state.includes[e.name]}).length},r=this.treeChanges(),i=t&&t.treeChanges();return i&&n(i.to,r.to)&&n(i.exiting,r.exiting)?"SameAsPending":0===r.exiting.length&&0===r.entering.length&&n(r.from,r.to)?"SameAsCurrent":void 0},t.prototype.run=function(){var t=this,e=l.TransitionHook.runAllHooks,n=function(e){return t._hookBuilder.buildHooksForPhase(e)},o=n(c.TransitionHookPhase.BEFORE);return l.TransitionHook.invokeHooks(o,function(){var e=t.router.globals;return e.lastStartedTransitionId=t.$id,e.transition=t,e.transitionHistory.enqueue(t),r.trace.traceTransitionStart(t),i.services.$q.when(void 0)}).then(function(){var t=n(c.TransitionHookPhase.RUN);return l.TransitionHook.invokeHooks(t,function(){return i.services.$q.when(void 0)})}).then(function(){r.trace.traceSuccess(t.$to(),t),t.success=!0,t._deferred.resolve(t.to()),e(n(c.TransitionHookPhase.SUCCESS))},function(i){r.trace.traceError(i,t),t.success=!1,t._deferred.reject(i),t._error=i,e(n(c.TransitionHookPhase.ERROR))}),this.promise},t.prototype.valid=function(){return!this.error()||void 0!==this.success},t.prototype.abort=function(){s.isUndefined(this.success)&&(this._aborted=!0)},t.prototype.error=function(){var t=this.$to();if(t.self.abstract)return m.Rejection.invalid("Cannot transition to abstract state '"+t.name+"'");var e=t.parameters(),n=this.params(),r=e.filter(function(t){return!t.validates(n[t.id])});if(r.length){var i=r.map(function(t){return"["+t.id+":"+o.stringify(n[t.id])+"]"}).join(", "),a="The following parameter values are not valid for state '"+t.name+"': "+i;return m.Rejection.invalid(a)}return!1===this.success?this._error:void 0},t.prototype.toString=function(){var t=this.from(),e=this.to(),n=function(t){return null!==t["#"]&&void 0!==t["#"]?t:a.omit(t,["#"])};return"Transition#"+this.$id+"( '"+(s.isObject(t)?t.name:t)+"'"+o.stringify(n(this._treeChanges.from.map(u.prop("paramValues")).reduce(a.mergeR,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(s.isObject(e)?e.name:e)+"'"+o.stringify(n(this.params()))+" )"},t.diToken=t,t}();e.Transition=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(9),a=n(22),s=function(){function t(){}return t.makeTargetState=function(t,e){var n=r.tail(e).state;return new o.TargetState(t,n,e.map(i.prop("paramValues")).reduce(r.mergeR,{}),{})},t.buildPath=function(t){var e=t.params();return t.$state().path.map(function(t){return new a.PathNode(t).applyRawParams(e)})},t.buildToPath=function(e,n){var r=t.buildPath(n);return n.options().inherit?t.inheritParams(e,r,Object.keys(n.params())):r},t.applyViewConfigs=function(e,n,i){n.filter(function(t){return r.inArray(i,t.state)}).forEach(function(i){var o=r.values(i.state.views||{}),a=t.subPath(n,function(t){return t===i}),s=o.map(function(t){return e.createViewConfig(a,t)});i.views=s.reduce(r.unnestR,[])})},t.inheritParams=function(t,e,n){void 0===n&&(n=[]);var o=t.map(function(t){return t.paramSchema}).reduce(r.unnestR,[]).filter(function(t){return!t.inherit}).map(i.prop("id"));return e.map(function(e){var s=r.extend({},e&&e.paramValues),u=r.pick(s,n);s=r.omit(s,n);var c,l,f,h=r.omit((c=t,l=e.state,f=r.find(c,i.propEq("state",l)),r.extend({},f&&f.paramValues)||{}),o),p=r.extend(s,h,u);return new a.PathNode(e.state).applyRawParams(p)})},t.treeChanges=function(e,n,r){for(var i,o,a,s,u,c,l=Math.min(e.length,n.length),f=0;f<l&&e[f].state!==r&&(i=e[f],o=n[f],i.equals(o,t.nonDynamicParams));)f++;s=(a=e).slice(0,f),u=a.slice(f);var h=s.map(function(t,e){var r=t.clone();return r.paramValues=n[e].paramValues,r});return c=n.slice(f),{from:a,to:h.concat(c),retained:s,retainedWithToParams:h,exiting:u,entering:c}},t.matching=function(t,e,n){var i=!1;return r.arrayTuples(t,e).reduce(function(t,e){var r=e[0],o=e[1];return(i=i||!r.equals(o,n))?t:t.concat(r)},[])},t.equals=function(e,n,r){return e.length===n.length&&t.matching(e,n,r).length===e.length},t.subPath=function(t,e){var n=r.find(t,e),i=t.indexOf(n);return-1===i?void 0:t.slice(0,i+1)},t.nonDynamicParams=function(t){return t.state.parameters({inherit:!1}).filter(function(t){return!t.dynamic})},t.paramValues=function(t){return t.reduce(function(t,e){return r.extend(t,e.paramValues)},{})},t}();e.PathUtils=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(6),a=n(3),s=n(28),u=n(12),c=n(14),l=n(5),f=n(4),h=s.resolvePolicies.when,p=[h.EAGER,h.LAZY],d=[h.EAGER];e.NATIVE_INJECTOR_TOKEN="Native Injector";var v=function(){function t(t){this._path=t}return t.prototype.getTokens=function(){return this._path.reduce(function(t,e){return t.concat(e.resolvables.map(function(t){return t.token}))},[]).reduce(r.uniqR,[])},t.prototype.getResolvable=function(t){var e=this._path.map(function(t){return t.resolvables}).reduce(r.unnestR,[]).filter(function(e){return e.token===t});return r.tail(e)},t.prototype.getPolicy=function(t){var e=this.findNode(t);return t.getPolicy(e.state)},t.prototype.subContext=function(e){return new t(c.PathUtils.subPath(this._path,function(t){return t.state===e}))},t.prototype.addResolvables=function(t,e){var n=r.find(this._path,i.propEq("state",e)),o=t.map(function(t){return t.token});n.resolvables=n.resolvables.filter(function(t){return-1===o.indexOf(t.token)}).concat(t)},t.prototype.resolvePath=function(t,e){var n=this;void 0===t&&(t="LAZY");var u=(r.inArray(p,t)?t:"LAZY")===s.resolvePolicies.when.EAGER?d:p;o.trace.traceResolvePath(this._path,t,e);var c=function(t,e){return function(i){return r.inArray(t,n.getPolicy(i)[e])}},l=this._path.reduce(function(t,r){var o=r.resolvables.filter(c(u,"when")),a=o.filter(c(["NOWAIT"],"async")),s=o.filter(i.not(c(["NOWAIT"],"async"))),l=n.subContext(r.state),f=function(t){return t.get(l,e).then(function(e){return{token:t.token,value:e}})};return a.forEach(f),t.concat(s.map(f))},[]);return a.services.$q.all(l)},t.prototype.injector=function(){return this._injector||(this._injector=new $(this))},t.prototype.findNode=function(t){return r.find(this._path,function(e){return r.inArray(e.resolvables,t)})},t.prototype.getDependencies=function(t){var e=this,n=this.findNode(t),i=(c.PathUtils.subPath(this._path,function(t){return t===n})||this._path).reduce(function(t,e){return t.concat(e.resolvables)},[]).filter(function(e){return e!==t});return t.deps.map(function(t){var n=i.filter(function(e){return e.token===t});if(n.length)return r.tail(n);var o=e.injector().getNative(t);if(f.isUndefined(o))throw new Error("Could not find Dependency Injection token: "+l.stringify(t));return new u.Resolvable(t,function(){return o},[],o)})},t}();e.ResolveContext=v;var $=function(){function t(t){this.context=t,this.native=this.get(e.NATIVE_INJECTOR_TOKEN)||a.services.$injector}return t.prototype.get=function(t){var e=this.context.getResolvable(t);if(e){if("NOWAIT"===this.context.getPolicy(e).async)return e.get(this.context);if(!e.resolved)throw new Error("Resolvable async .get() not complete:"+l.stringify(e.token));return e.data}return this.getNative(t)},t.prototype.getAsync=function(t){var e=this.context.getResolvable(t);return e?e.get(this.context):a.services.$q.when(this.native.get(t))},t.prototype.getNative=function(t){return this.native&&this.native.get(t)},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(1),a=n(10),s=n(5);function u(t,e){var n=["",""],r=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return r;switch(e.squash){case!1:n=["(",")"+(e.isOptional?"?":"")];break;case!0:r=r.replace(/\/$/,""),n=["(?:/(",")|/)?"];break;default:n=["("+e.squash+"|",")?"]}return r+n[0]+e.type.pattern.source+n[1]}var c=s.splitOnDelim("/"),l=function(){function t(e,n,o,a){var s=this;this.config=a,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=e,this.config=r.defaults(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:r.identity});for(var c,l,f,h=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,p=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,d=[],v=0,$=function(n){if(!t.nameValidator.test(n))throw new Error("Invalid parameter name '"+n+"' in pattern '"+e+"'");if(r.find(s._params,i.propEq("id",n)))throw new Error("Duplicate parameter name '"+n+"' in pattern '"+e+"'")},m=function(t,i){var o,a=t[2]||t[3],u=i?t[4]:t[4]||("*"===t[1]?"[\\s\\S]*":null);return{id:a,regexp:u,cfg:s.config.params[a],segment:e.substring(v,t.index),type:u?n.type(u)||(o=u,r.inherit(n.type(i?"query":"path"),{pattern:new RegExp(o,s.config.caseInsensitive?"i":void 0)})):null}};(c=h.exec(e))&&!((l=m(c,!1)).segment.indexOf("?")>=0);)$(l.id),this._params.push(o.fromPath(l.id,l.type,this.config.paramMap(l.cfg,!1))),this._segments.push(l.segment),d.push([l.segment,r.tail(this._params)]),v=h.lastIndex;var g=(f=e.substring(v)).indexOf("?");if(g>=0){var y=f.substring(g);if(f=f.substring(0,g),y.length>0)for(v=0;c=p.exec(y);)$((l=m(c,!0)).id),this._params.push(o.fromSearch(l.id,l.type,this.config.paramMap(l.cfg,!0))),v=h.lastIndex}this._segments.push(f),this._compiled=d.map(function(t){return u.apply(null,t)}).concat(u(f))}return t.encodeDashes=function(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})},t.pathSegmentsAndParams=function(t){var e=t._segments,n=t._params.filter(function(t){return t.location===a.DefType.PATH});return r.arrayTuples(e,n.concat(void 0)).reduce(r.unnestR,[]).filter(function(t){return""!==t&&o.isDefined(t)})},t.queryParams=function(t){return t._params.filter(function(t){return t.location===a.DefType.SEARCH})},t.compare=function(e,n){var i=function(e){return e._cache.weights=e._cache.weights||function(e){return e._cache.segments=e._cache.segments||e._cache.path.map(t.pathSegmentsAndParams).reduce(r.unnestR,[]).reduce(s.joinNeighborsR,[]).map(function(t){return o.isString(t)?c(t):t}).reduce(r.unnestR,[])}(e).map(function(t){return"/"===t?1:o.isString(t)?2:t instanceof a.Param?3:void 0})},u=i(e),l=i(n);!function(t,e,n){for(var r=Math.max(t.length,e.length);t.length<r;)t.push(n);for(;e.length<r;)e.push(n)}(u,l,0);var f,h,p=r.arrayTuples(u,l);for(h=0;h<p.length;h++)if(0!==(f=p[h][0]-p[h][1]))return f;return 0},t.prototype.append=function(t){return this._children.push(t),t._cache={path:this._cache.path.concat(t),parent:this,pattern:null},t},t.prototype.isRoot=function(){return this._cache.path[0]===this},t.prototype.toString=function(){return this.pattern},t.prototype.exec=function(t,e,n,a){var s=this;void 0===e&&(e={}),void 0===a&&(a={});var u,c,l,f=(u=this._cache,c="pattern",l=function(){return new RegExp(["^",r.unnest(s._cache.path.map(i.prop("_compiled"))).join(""),!1===s.config.strict?"/?":"","$"].join(""),s.config.caseInsensitive?"i":void 0)},u[c]=u[c]||l()).exec(t);if(!f)return null;var h,p,d,v=this.parameters(),$=v.filter(function(t){return!t.isSearch()}),m=v.filter(function(t){return t.isSearch()}),g=this._cache.path.map(function(t){return t._segments.length-1}).reduce(function(t,e){return t+e}),y={};if(g!==f.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var b=0;b<g;b++){for(var w=$[b],E=f[b+1],S=0;S<w.replace.length;S++)w.replace[S].from===E&&(E=w.replace[S].to);E&&!0===w.array&&(void 0,void 0,void 0,p=(h=function(t){return t.split("").reverse().join("")})(E).split(/-(?!\\)/),d=r.map(p,h),E=r.map(d,function(t){return t.replace(/\\-/g,"-")}).reverse()),o.isDefined(E)&&(E=w.type.decode(E)),y[w.id]=w.value(E)}return m.forEach(function(t){for(var n=e[t.id],r=0;r<t.replace.length;r++)t.replace[r].from===n&&(n=t.replace[r].to);o.isDefined(n)&&(n=t.type.decode(n)),y[t.id]=t.value(n)}),n&&(y["#"]=n),y},t.prototype.parameters=function(t){return void 0===t&&(t={}),!1===t.inherit?this._params:r.unnest(this._cache.path.map(function(t){return t._params}))},t.prototype.parameter=function(t,e){var n=this;void 0===e&&(e={});var r=this._cache.parent;return function(){for(var e=0,r=n._params;e<r.length;e++){var i=r[e];if(i.id===t)return i}}()||!1!==e.inherit&&r&&r.parameter(t,e)||null},t.prototype.validates=function(t){return t=t||{},this.parameters().filter(function(e){return t.hasOwnProperty(e.id)}).map(function(e){return n=e,r=t[e.id],!n||n.validates(r);var n,r}).reduce(r.allTrueR,!0)},t.prototype.format=function(e){void 0===e&&(e={});var n=this._cache.path,i=n.map(t.pathSegmentsAndParams).reduce(r.unnestR,[]).map(function(t){return o.isString(t)?t:s(t)}),a=n.map(t.queryParams).reduce(r.unnestR,[]).map(s);if(i.concat(a).filter(function(t){return!1===t.isValid}).length)return null;function s(t){var n=t.value(e[t.id]),r=t.validates(n),i=t.isDefaultValue(n);return{param:t,value:n,isValid:r,isDefaultValue:i,squash:!!i&&t.squash,encoded:t.type.encode(n)}}var u=i.reduce(function(e,n){if(o.isString(n))return e+n;var i=n.squash,a=n.encoded,s=n.param;return!0===i?e.match(/\/$/)?e.slice(0,-1):e:o.isString(i)?e+i:!1!==i?e:null==a?e:o.isArray(a)?e+r.map(a,t.encodeDashes).join("-"):s.raw?e+a:e+encodeURIComponent(a)},""),c=a.map(function(t){var e=t.param,n=t.squash,i=t.encoded,a=t.isDefaultValue;if(!(null==i||a&&!1!==n)&&(o.isArray(i)||(i=[i]),0!==i.length))return e.raw||(i=r.map(i,encodeURIComponent)),i.map(function(t){return e.id+"="+t})}).filter(r.identity).reduce(r.unnestR,[]).join("&");return u+(c?"?"+c:"")+(e["#"]?"#"+e["#"]:"")},t.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,t}();e.UrlMatcher=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(25),o=function(){function t(t,e){var n=this;this.fireAfterUpdate=e,this._listeners=[],this._listener=function(t){return n._listeners.forEach(function(e){return e(t)})},this.hash=function(){return i.parseUrl(n._get()).hash},this.path=function(){return i.parseUrl(n._get()).path},this.search=function(){return i.getParams(i.parseUrl(n._get()).search)},this._location=r.root.location,this._history=r.root.history}return t.prototype.url=function(t,e){return void 0===e&&(e=!0),r.isDefined(t)&&t!==this._get()&&(this._set(null,null,t,e),this.fireAfterUpdate&&this._listeners.forEach(function(e){return e({url:t})})),i.buildUrl(this)},t.prototype.onChange=function(t){var e=this;return this._listeners.push(t),function(){return r.removeFrom(e._listeners,t)}},t.prototype.dispose=function(t){r.deregAll(this._listeners)},t}();e.BaseLocationServices=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(19),a=n(1),s=function(){function t(e){return t.create(e||{})}return t.create=function(e){e=t.isStateClass(e)?new e:e;var n=r.inherit(r.inherit(e,t.prototype));return e.$$state=function(){return n},n.self=e,n.__stateObjectCache={nameGlob:o.Glob.fromString(n.name)},n},t.prototype.is=function(t){return this===t||this.self===t||this.fqn()===t},t.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var t=this.parent.fqn();return t?t+"."+this.name:this.name},t.prototype.root=function(){return this.parent&&this.parent.root()||this},t.prototype.parameters=function(t){return((t=r.defaults(t,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(r.values(this.params)).filter(function(e){return!t.matchingKeys||t.matchingKeys.hasOwnProperty(e.id)})},t.prototype.parameter=function(t,e){return void 0===e&&(e={}),this.url&&this.url.parameter(t,e)||r.find(r.values(this.params),i.propEq("id",t))||e.inherit&&this.parent&&this.parent.parameter(t)},t.prototype.toString=function(){return this.fqn()},t.isStateClass=function(t){return a.isFunction(t)&&!0===t.__uiRouterState},t.isState=function(t){return a.isObject(t.__stateObjectCache)},t}();e.StateObject=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.text=t,this.glob=t.split(".");var e=this.text.split(".").map(function(t){return"**"===t?"(?:|(?:\\.[^.]*)*)":"*"===t?"\\.[^.]*":"\\."+t}).join("");this.regexp=new RegExp("^"+e+"$")}return t.is=function(t){return!!/[!,*]+/.exec(t)},t.fromString=function(e){return t.is(e)?new t(e):null},t.prototype.matches=function(t){return this.regexp.test("."+t)},t}();e.Glob=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=null),this._items=t,this._limit=e,this._evictListeners=[],this.onEvict=r.pushTo(this._evictListeners)}return t.prototype.enqueue=function(t){var e=this._items;return e.push(t),this._limit&&e.length>this._limit&&this.evict(),t},t.prototype.evict=function(){var t=this._items.shift();return this._evictListeners.forEach(function(e){return e(t)}),t},t.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},t.prototype.clear=function(){var t=this._items;return this._items=[],t},t.prototype.size=function(){return this._items.length},t.prototype.remove=function(t){var e=this._items.indexOf(t);return e>-1&&this._items.splice(e,1)[0]},t.prototype.peekTail=function(){return this._items[this._items.length-1]},t.prototype.peekHead=function(){if(this.size())return this._items[0]},t}();e.Queue=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(8);function o(t,e){var n=r.isString(e)?[e]:e;return!!(r.isFunction(n)?n:function(t){for(var e=n,i=0;i<e.length;i++){var o=new r.Glob(e[i]);if(o&&o.matches(t.name)||!o&&e[i]===t.name)return!0}return!1})(t)}e.matchState=o;var a=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.tranSvc=t,this.eventType=e,this.callback=n,this.matchCriteria=r,this.removeHookFromRegistry=i,this.invokeCount=0,this._deregistered=!1,this.priority=o.priority||0,this.bind=o.bind||null,this.invokeLimit=o.invokeLimit}return t.prototype._matchingNodes=function(t,e){if(!0===e)return t;var n=t.filter(function(t){return o(t.state,e)});return n.length?n:null},t.prototype._getDefaultMatchCriteria=function(){return r.mapObj(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},t.prototype._getMatchingNodes=function(t){var e=this,n=r.extend(this._getDefaultMatchCriteria(),this.matchCriteria);return r.values(this.tranSvc._pluginapi._getPathTypes()).reduce(function(o,a){var s=a.scope===i.TransitionHookScope.STATE,u=t[a.name]||[],c=s?u:[r.tail(u)];return o[a.name]=e._matchingNodes(c,n[a.name]),o},{})},t.prototype.matches=function(t){var e=this._getMatchingNodes(t);return r.values(e).every(r.identity)?e:null},t.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},t}();e.RegisteredHook=a,e.makeEvent=function(t,e,n){var i=(t._registeredHooks=t._registeredHooks||{})[n.name]=[],o=r.removeFrom(i);function s(t,r,s){void 0===s&&(s={});var u=new a(e,n,r,t,o,s);return i.push(u),u.deregister.bind(u)}return t[n.name]=s,s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(10),a=function(){function t(e){if(e instanceof t){var n=e;this.state=n.state,this.paramSchema=n.paramSchema.slice(),this.paramValues=r.extend({},n.paramValues),this.resolvables=n.resolvables.slice(),this.views=n.views&&n.views.slice()}else{var i=e;this.state=i,this.paramSchema=i.parameters({inherit:!1}),this.paramValues={},this.resolvables=i.resolvables.map(function(t){return t.clone()})}}return t.prototype.clone=function(){return new t(this)},t.prototype.applyRawParams=function(t){return this.paramValues=this.paramSchema.reduce(function(e,n){return r.applyPairs(e,[(i=n).id,i.value(t[i.id])]);var i},{}),this},t.prototype.parameter=function(t){return r.find(this.paramSchema,i.propEq("id",t))},t.prototype.equals=function(t,e){var n=this.diff(t,e);return n&&0===n.length},t.prototype.diff=function(t,e){if(this.state!==t.state)return!1;var n=e?e(this):this.paramSchema;return o.Param.changed(n,this.paramValues,t.paramValues)},t.clone=function(t){return t.clone()},t}();e.PathNode=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=function(){function t(t){this.pattern=/.*/,this.inherit=!0,r.extend(this,t)}return t.prototype.is=function(t,e){return!0},t.prototype.encode=function(t,e){return t},t.prototype.decode=function(t,e){return t},t.prototype.equals=function(t,e){return t==e},t.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},t.prototype.toString=function(){return"{ParamType:"+this.name+"}"},t.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},t.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new function(t,e){var n=this;function o(t){return i.isArray(t)?t:i.isDefined(t)?[t]:[]}function a(t,n){return function(a){if(i.isArray(a)&&0===a.length)return a;var s=o(a),u=r.map(s,t);return!0===n?0===r.filter(u,function(t){return!t}).length:function(t){switch(t.length){case 0:return;case 1:return"auto"===e?t[0]:t;default:return t}}(u)}}function s(t){return function(e,n){var r=o(e),i=o(n);if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(!t(r[a],i[a]))return!1;return!0}}["encode","decode","equals","$normalize"].forEach(function(e){var r=t[e].bind(t),i="equals"===e?s:a;n[e]=i(r)}),r.extend(this,{dynamic:t.dynamic,name:t.name,pattern:t.pattern,inherit:t.inherit,is:a(t.is.bind(t),!0),$arrayMode:e})}(this,t)},t}();e.ParamType=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(13),o=n(21),a=n(65),s=n(66),u=n(67),c=n(68),l=n(69),f=n(70),h=n(71),p=n(44),d=n(45),v=n(11),$=n(1),m=n(0),g=n(2),y=n(72),b=n(73);e.defaultTransOpts={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"};var w=function(){function t(t){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=t,this.$view=t.viewService,this._deregisterHookFns={},this._pluginapi=m.createProxyFunctions(g.val(this),{},g.val(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks(),t.globals.successfulTransitions.onEvict(a.treeChangesCleanup)}return t.prototype.onCreate=function(t,e,n){},t.prototype.onBefore=function(t,e,n){},t.prototype.onStart=function(t,e,n){},t.prototype.onExit=function(t,e,n){},t.prototype.onRetain=function(t,e,n){},t.prototype.onEnter=function(t,e,n){},t.prototype.onFinish=function(t,e,n){},t.prototype.onSuccess=function(t,e,n){},t.prototype.onError=function(t,e,n){},t.prototype.dispose=function(t){m.values(this._registeredHooks).forEach(function(t){return t.forEach(function(e){e._deregistered=!0,m.removeFrom(t,e)})})},t.prototype.create=function(t,e){return new i.Transition(t,e,this._router)},t.prototype._defineCoreEvents=function(){var t=r.TransitionHookPhase,e=v.TransitionHook,n=this._criteriaPaths;this._defineEvent("onCreate",t.CREATE,0,n.to,!1,e.LOG_REJECTED_RESULT,e.THROW_ERROR,!0),this._defineEvent("onBefore",t.BEFORE,0,n.to),this._defineEvent("onStart",t.RUN,0,n.to),this._defineEvent("onExit",t.RUN,100,n.exiting,!0),this._defineEvent("onRetain",t.RUN,200,n.retained),this._defineEvent("onEnter",t.RUN,300,n.entering),this._defineEvent("onFinish",t.RUN,400,n.to),this._defineEvent("onSuccess",t.SUCCESS,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0),this._defineEvent("onError",t.ERROR,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0)},t.prototype._defineCorePaths=function(){var t=r.TransitionHookScope.STATE,e=r.TransitionHookScope.TRANSITION;this._definePathType("to",e),this._definePathType("from",e),this._definePathType("exiting",t),this._definePathType("retained",t),this._definePathType("entering",t)},t.prototype._defineEvent=function(t,e,n,r,i,a,s,u){void 0===i&&(i=!1),void 0===a&&(a=v.TransitionHook.HANDLE_RESULT),void 0===s&&(s=v.TransitionHook.REJECT_ERROR),void 0===u&&(u=!1);var c=new d.TransitionEventType(t,e,n,r,i,a,s,u);this._eventTypes.push(c),o.makeEvent(this,this,c)},t.prototype._getEvents=function(t){return($.isDefined(t)?this._eventTypes.filter(function(e){return e.hookPhase===t}):this._eventTypes.slice()).sort(function(t,e){var n=t.hookPhase-e.hookPhase;return 0===n?t.hookOrder-e.hookOrder:n})},t.prototype._definePathType=function(t,e){this._criteriaPaths[t]={name:t,scope:e}},t.prototype._getPathTypes=function(){return this._criteriaPaths},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype._registerCoreTransitionHooks=function(){var t=this._deregisterHookFns;t.addCoreResolves=a.registerAddCoreResolvables(this),t.ignored=y.registerIgnoredTransitionHook(this),t.invalid=b.registerInvalidTransitionHook(this),t.redirectTo=s.registerRedirectToHook(this),t.onExit=u.registerOnExitHook(this),t.onRetain=u.registerOnRetainHook(this),t.onEnter=u.registerOnEnterHook(this),t.eagerResolve=c.registerEagerResolvePath(this),t.lazyResolve=c.registerLazyResolveState(this),t.resolveAll=c.registerResolveRemaining(this),t.loadViews=l.registerLoadEnteringViews(this),t.activateViews=l.registerActivateViews(this),t.updateGlobals=f.registerUpdateGlobalState(this),t.updateUrl=h.registerUpdateUrl(this),t.lazyLoad=p.registerLazyLoadHook(this)},t}();e.TransitionService=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4);e.keyValsToObjectR=function(t,e){var n=e[0],i=e[1];return t.hasOwnProperty(n)?r.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]:t[n]=i,t},e.getParams=function(t){return t.split("&").filter(r.identity).map(r.splitEqual).reduce(e.keyValsToObjectR,{})},e.parseUrl=function(t){var e=function(t){return t||""},n=r.splitHash(t).map(e),i=n[0],o=n[1],a=r.splitQuery(i).map(e);return{path:a[0],search:a[1],hash:o,url:t}},e.buildUrl=function(t){var e=t.path(),n=t.search(),i=t.hash(),o=Object.keys(n).map(function(t){var e=n[t];return(r.isArray(e)?e:[e]).map(function(e){return t+"="+e})}).reduce(r.unnestR,[]).join("&");return e+(o?"?"+o:"")+(i?"#"+i:"")},e.locationPluginFactory=function(t,e,n,r){return function(i){var o=i.locationService=new n(i),a=i.locationConfig=new r(i,e);return{name:t,service:o,configuration:a,dispose:function(t){t.dispose(o),t.dispose(a)}}}}},function(t,e,n){n(57),t.exports=angular},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(8),a=n(11),s=function(){function t(t){this.transition=t}return t.prototype.buildHooksForPhase=function(t){var e=this;return this.transition.router.transitionService._pluginapi._getEvents(t).map(function(t){return e.buildHooks(t)}).reduce(r.unnestR,[]).filter(r.identity)},t.prototype.buildHooks=function(t){var e=this.transition,n=e.treeChanges(),i=this.getMatchingHooks(t,n);if(!i)return[];var s={transition:e,current:e.options().current};return i.map(function(i){return i.matches(n)[t.criteriaMatchPath.name].map(function(n){var u=r.extend({bind:i.bind,traceData:{hookType:t.name,context:n}},s),c=t.criteriaMatchPath.scope===o.TransitionHookScope.STATE?n.state.self:null,l=new a.TransitionHook(e,c,i,u);return{hook:i,node:n,transitionHook:l}})}).reduce(r.unnestR,[]).sort(function(t){void 0===t&&(t=!1);return function(e,n){var r=t?-1:1,i=(e.node.state.path.length-n.node.state.path.length)*r;return 0!==i?i:n.hook.priority-e.hook.priority}}(t.reverseSort)).map(function(t){return t.transitionHook})},t.prototype.getMatchingHooks=function(t,e){var n=t.hookPhase===o.TransitionHookPhase.CREATE,a=this.transition.router.transitionService;return(n?[a]:[this.transition,a]).map(function(e){return e.getHooks(t.name)}).filter(r.assertPredicate(i.isArray,"broken event named: "+t.name)).reduce(r.unnestR,[]).filter(function(t){return t.matches(e)})},t}();e.HookBuilder=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolvePolicies={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(1),a=n(2),s=n(3),u=n(23),c=function(){function t(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=i.pick(t.prototype,["hash","string","query","path","int","bool","date","json","any"]);this.types=i.inherit(i.map(this.defaultTypes,function(t,e){return new u.ParamType(i.extend({name:e},t))}),{})}return t.prototype.dispose=function(){this.types={}},t.prototype.type=function(t,e,n){if(!o.isDefined(e))return this.types[t];if(this.types.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return this.types[t]=new u.ParamType(i.extend({name:t},e)),n&&(this.typeQueue.push({name:t,def:n}),this.enqueue||this._flushTypeQueue()),this},t.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var t=this.typeQueue.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");i.extend(this.types[t.name],s.services.$injector.invoke(t.def))}},t}();e.ParamTypes=c,r=function(t){var e=function(t){return null!=t?t.toString():t},n={encode:e,decode:e,is:a.is(String),pattern:/.*/,equals:function(t,e){return t==e}};return i.extend({},n,t)},i.extend(c.prototype,{string:r({}),path:r({pattern:/[^/]*/}),query:r({}),hash:r({inherit:!1}),int:r({decode:function(t){return parseInt(t,10)},is:function(t){return!o.isNullOrUndefined(t)&&this.decode(t.toString())===t},pattern:/-?\d+/}),bool:r({encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:a.is(Boolean),pattern:/0|1/}),date:r({encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):void 0},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):void 0},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return["getFullYear","getMonth","getDate"].reduce(function(n,r){return n&&t[r]()===e[r]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:r({encode:i.toJson,decode:i.fromJson,is:a.is(Object),equals:i.equals,pattern:/[^/]*/}),any:r({encode:i.identity,decode:i.identity,is:function(){return!0},equals:i.equals})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t){void 0===t&&(t={}),r.extend(this,t)}return t.prototype.$inherit=function(t,e,n){var i,o=r.ancestors(e,n),a={},s=[];for(var u in o)if(o[u]&&o[u].params&&(i=Object.keys(o[u].params)).length)for(var c in i)s.indexOf(i[c])>=0||(s.push(i[c]),a[i[c]]=this[i[c]]);return r.extend({},a,t)},t}();e.StateParams=i},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(28)),r(n(12)),r(n(15))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(5),a=n(2),s=n(12),u=n(3);function c(t){return t.name}function l(t){return t.self.$$state=function(){return t},t.self}function f(t){return t.parent&&t.parent.data&&(t.data=t.self.data=r.inherit(t.parent.data,t.data)),t.data}var h=function(t,e){return function(n){var o=n;o&&o.url&&o.name&&o.name.match(/\.\*\*$/)&&(o.url+="{remainder:any}");var a=function(t){if(!i.isString(t))return!1;var e="^"===t.charAt(0);return{val:e?t.substring(1):t,root:e}}(o.url),s=n.parent,u=a?t.compile(a.val,{params:n.params||{},paramMap:function(t,e){return!1===o.reloadOnSearch&&e&&(t=r.extend(t||{},{dynamic:!0})),t}}):o.url;if(!u)return null;if(!t.isMatcher(u))throw new Error("Invalid url '"+u+"' in state '"+n+"'");return a&&a.root?u:(s&&s.navigable||e()).url.append(u)}},p=function(t){return function(e){return!t(e)&&e.url?e:e.parent?e.parent.navigable:null}},d=function(t){return function(e){var n=e.url&&e.url.parameters({inherit:!1})||[],i=r.values(r.mapObj(r.omit(e.params||{},n.map(a.prop("id"))),function(e,n){return t.fromConfig(n,null,e)}));return n.concat(i).map(function(t){return[t.id,t]}).reduce(r.applyPairs,{})}};function v(t){return t.parent?t.parent.path.concat(t):[t]}function $(t){var e=t.parent?r.extend({},t.parent.includes):{};return e[t.name]=!0,e}function m(t){var e,n,c=function(t){return t.provide||t.token},l=a.pattern([[a.prop("resolveFn"),function(t){return new s.Resolvable(c(t),t.resolveFn,t.deps,t.policy)}],[a.prop("useFactory"),function(t){return new s.Resolvable(c(t),t.useFactory,t.deps||t.dependencies,t.policy)}],[a.prop("useClass"),function(t){return new s.Resolvable(c(t),function(){return new t.useClass},[],t.policy)}],[a.prop("useValue"),function(t){return new s.Resolvable(c(t),function(){return t.useValue},[],t.policy,t.useValue)}],[a.prop("useExisting"),function(t){return new s.Resolvable(c(t),r.identity,[t.useExisting],t.policy)}]]),f=a.pattern([[a.pipe(a.prop("val"),i.isString),function(t){return new s.Resolvable(t.token,r.identity,[t.val],t.policy)}],[a.pipe(a.prop("val"),i.isArray),function(t){return new s.Resolvable(t.token,r.tail(t.val),t.val.slice(0,-1),t.policy)}],[a.pipe(a.prop("val"),i.isFunction),function(t){return new s.Resolvable(t.token,t.val,(e=t.val,n=u.services.$injector,e.$inject||n&&n.annotate(e,n.strictDi)||"deferred"),t.policy);var e,n}]]),h=a.pattern([[a.is(s.Resolvable),function(t){return t}],[function(t){return!(!t.token||!t.resolveFn)},l],[function(t){return!(!t.provide&&!t.token||!(t.useValue||t.useFactory||t.useExisting||t.useClass))},l],[function(t){return!!(t&&t.val&&(i.isString(t.val)||i.isArray(t.val)||i.isFunction(t.val)))},f],[a.val(!0),function(t){throw new Error("Invalid resolve value: "+o.stringify(t))}]]),p=t.resolve;return(i.isArray(p)?p:(e=p,n=t.resolvePolicy||{},Object.keys(e||{}).map(function(t){return{token:t,val:e[t],deps:void 0,policy:n[t]}}))).map(h)}e.resolvablesBuilder=m;var g=function(){function t(t,e){this.matcher=t;var n=this,r=function(){return t.find("")},i=function(t){return""===t.name};this.builders={name:[c],self:[l],parent:[function(e){return i(e)?null:t.find(n.parentName(e))||r()}],data:[f],url:[h(e,r)],navigable:[p(i)],params:[d(e.paramFactory)],views:[],path:[v],includes:[$],resolvables:[m]}}return t.prototype.builder=function(t,e){var n=this.builders,r=n[t]||[];return i.isString(t)&&!i.isDefined(e)?r.length>1?r:r[0]:i.isString(t)&&i.isFunction(e)?(n[t]=r,n[t].push(e),function(){return n[t].splice(n[t].indexOf(e,1))&&null}):void 0},t.prototype.build=function(t){var e=this.matcher,n=this.builders,i=this.parentName(t);if(i&&!e.find(i,void 0,!1))return null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o].reduce(function(t,e){return function(n){return e(n,t)}},r.noop);t[o]=a(t)}return t},t.prototype.parentName=function(t){var e=t.name||"",n=e.split(".");if("**"===n.pop()&&n.pop(),n.length){if(t.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+e+")");return n.join(".")}return t.parent?i.isString(t.parent)?t.parent:t.parent.name:""},t.prototype.name=function(t){var e=t.name;if(-1!==e.indexOf(".")||!t.parent)return e;var n=i.isString(t.parent)?t.parent:t.parent.name;return n?n+"."+e:e},t}();e.StateBuilder=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(0),o=function(){function t(t){this._states=t}return t.prototype.isRelative=function(t){return 0===(t=t||"").indexOf(".")||0===t.indexOf("^")},t.prototype.find=function(t,e,n){if(void 0===n&&(n=!0),t||""===t){var o=r.isString(t),a=o?t:t.name;this.isRelative(a)&&(a=this.resolvePath(a,e));var s=this._states[a];if(s&&(o||!(o||s!==t&&s.self!==t)))return s;if(o&&n){var u=i.values(this._states).filter(function(t){return t.__stateObjectCache.nameGlob&&t.__stateObjectCache.nameGlob.matches(a)});return u.length>1&&console.log("stateMatcher.find: Found multiple matches for "+a+" using glob: ",u.map(function(t){return t.name})),u[0]}}},t.prototype.resolvePath=function(t,e){if(!e)throw new Error("No reference point given for path '"+t+"'");for(var n=this.find(e),r=t.split("."),i=r.length,o=0,a=n;o<i;o++)if(""!==r[o]||0!==o){if("^"!==r[o])break;if(!a.parent)throw new Error("Path '"+t+"' not valid for state '"+n.name+"'");a=a.parent}else a=n;var s=r.slice(o).join(".");return a.name+(a.name&&s?".":"")+s},t}();e.StateMatcher=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(18),a=n(2),s=function(){function t(t,e,n,r,i){this.$registry=t,this.$urlRouter=e,this.states=n,this.builder=r,this.listeners=i,this.queue=[],this.matcher=t.matcher}return t.prototype.dispose=function(){this.queue=[]},t.prototype.register=function(t){var e=this.queue,n=o.StateObject.create(t),s=n.name;if(!i.isString(s))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(s)||r.inArray(e.map(a.prop("name")),s))throw new Error("State '"+s+"' is already defined");return e.push(n),this.flush(),n},t.prototype.flush=function(){for(var t=this,e=this.queue,n=this.states,r=this.builder,i=[],o=[],a={},s=function(e){return t.states.hasOwnProperty(e)&&t.states[e]},u=function(){i.length&&t.listeners.forEach(function(t){return t("registered",i.map(function(t){return t.self}))})};e.length>0;){var c=e.shift(),l=c.name,f=r.build(c),h=o.indexOf(c);if(f){var p=s(l);if(p&&p.name===l)throw new Error("State '"+l+"' is already defined");var d=s(l+".**");d&&this.$registry.deregister(d),n[l]=c,this.attachRoute(c),h>=0&&o.splice(h,1),i.push(c)}else{var v=a[l];if(a[l]=e.length,h>=0&&v===e.length)return e.push(c),u(),n;h<0&&o.push(c),e.push(c)}}return u(),n},t.prototype.attachRoute=function(t){!t.abstract&&t.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(t))},t}();e.StateQueueManager=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(33),i=n(32),o=n(34),a=n(0),s=n(2),u=function(){function t(t){this._router=t,this.states={},this.listeners=[],this.matcher=new r.StateMatcher(this.states),this.builder=new i.StateBuilder(this.matcher,t.urlMatcherFactory),this.stateQueue=new o.StateQueueManager(this,t.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return t.prototype._registerRoot=function(){(this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0})).navigable=null},t.prototype.dispose=function(){var t=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(e){return t.get(e)&&t.deregister(e)})},t.prototype.onStatesChanged=function(t){return this.listeners.push(t),function(){a.removeFrom(this.listeners)(t)}.bind(this)},t.prototype.root=function(){return this._root},t.prototype.register=function(t){return this.stateQueue.register(t)},t.prototype._deregisterTree=function(t){var e=this,n=this.get().map(function(t){return t.$$state()}),r=function(t){var e=n.filter(function(e){return-1!==t.indexOf(e.parent)});return 0===e.length?e:e.concat(r(e))},i=r([t]),o=[t].concat(i).reverse();return o.forEach(function(t){var n=e._router.urlRouter;n.rules().filter(s.propEq("state",t)).forEach(n.removeRule.bind(n)),delete e.states[t.name]}),o},t.prototype.deregister=function(t){var e=this.get(t);if(!e)throw new Error("Can't deregister state; not found: "+t);var n=this._deregisterTree(e.$$state());return this.listeners.forEach(function(t){return t("deregistered",n.map(function(t){return t.self}))}),n},t.prototype.get=function(t,e){var n=this;if(0===arguments.length)return Object.keys(this.states).map(function(t){return n.states[t].self});var r=this.matcher.find(t,e);return r&&r.self||null},t.prototype.decorator=function(t,e){return this.builder.builder(t,e)},t}();e.StateRegistry=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(20),a=n(3),s=n(14),u=n(22),c=n(24),l=n(7),f=n(9),h=n(10),p=n(19),d=n(15),v=n(44),$=n(2),m=function(){function t(e){this.router=e,this.invalidCallbacks=[],this._defaultErrorHandler=function(t){t instanceof Error&&t.stack?(console.error(t),console.error(t.stack)):t instanceof l.Rejection?(console.error(t.toString()),t.detail&&t.detail.stack&&console.error(t.detail.stack)):console.error(t)};var n=Object.keys(t.prototype).filter($.not(r.inArray(["current","$current","params","transition"])));r.createProxyFunctions($.val(t.prototype),this,$.val(this),n)}return Object.defineProperty(t.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.defaultErrorHandler(r.noop),this.invalidCallbacks=[]},t.prototype._handleInvalidTargetState=function(t,e){var n=this,r=s.PathUtils.makeTargetState(this.router.stateRegistry,t),i=this.router.globals,u=function(){return i.transitionHistory.peekTail()},c=u(),h=new o.Queue(this.invalidCallbacks.slice()),p=new d.ResolveContext(t).injector(),v=function(t){if(t instanceof f.TargetState){var e=t;return(e=n.target(e.identifier(),e.params(),e.options())).valid()?u()!==c?l.Rejection.superseded().toPromise():n.transitionTo(e.identifier(),e.params(),e.options()):l.Rejection.invalid(e.error()).toPromise()}};return function t(){var n=h.dequeue();return void 0===n?l.Rejection.invalid(e.error()).toPromise():a.services.$q.when(n(e,r,p)).then(v).then(function(e){return e||t()})}()},t.prototype.onInvalid=function(t){return this.invalidCallbacks.push(t),function(){r.removeFrom(this.invalidCallbacks)(t)}.bind(this)},t.prototype.reload=function(t){return this.transitionTo(this.current,this.params,{reload:!i.isDefined(t)||t,inherit:!1,notify:!1})},t.prototype.go=function(t,e,n){var i={relative:this.$current,inherit:!0},o=r.defaults(n,i,c.defaultTransOpts);return this.transitionTo(t,e,o)},t.prototype.target=function(t,e,n){if(void 0===n&&(n={}),i.isObject(n.reload)&&!n.reload.name)throw new Error("Invalid reload state object");var r=this.router.stateRegistry;if(n.reloadState=!0===n.reload?r.root():r.matcher.find(n.reload,n.relative),n.reload&&!n.reloadState)throw new Error("No such reload state '"+(i.isString(n.reload)?n.reload:n.reload.name)+"'");return new f.TargetState(this.router.stateRegistry,t,e,n)},t.prototype.getCurrentPath=function(){var t=this,e=this.router.globals.successfulTransitions.peekTail();return e?e.treeChanges().to:[new u.PathNode(t.router.stateRegistry.root())]},t.prototype.transitionTo=function(t,e,n){var i=this;void 0===e&&(e={}),void 0===n&&(n={});var o=this.router,s=o.globals;n=r.defaults(n,c.defaultTransOpts);n=r.extend(n,{current:function(){return s.transition}});var u=this.target(t,e,n),h=this.getCurrentPath();if(!u.exists())return this._handleInvalidTargetState(h,u);if(!u.valid())return r.silentRejection(u.error());var p=function(t){return function(e){if(e instanceof l.Rejection){var n=o.globals.lastStartedTransitionId===t.$id;if(e.type===l.RejectType.IGNORED)return n&&o.urlRouter.update(),a.services.$q.when(s.current);var r=e.detail;if(e.type===l.RejectType.SUPERSEDED&&e.redirected&&r instanceof f.TargetState){var u=t.redirect(r);return u.run().catch(p(u))}if(e.type===l.RejectType.ABORTED)return n&&o.urlRouter.update(),a.services.$q.reject(e)}return i.defaultErrorHandler()(e),a.services.$q.reject(e)}},d=this.router.transitionService.create(h,u),v=d.run().catch(p(d));return r.silenceUncaughtInPromise(v),r.extend(v,{transition:d})},t.prototype.is=function(t,e,n){n=r.defaults(n,{relative:this.$current});var o=this.router.stateRegistry.matcher.find(t,n.relative);if(i.isDefined(o)){if(this.$current!==o)return!1;if(!e)return!0;var a=o.parameters({inherit:!0,matchingKeys:e});return h.Param.equals(a,h.Param.values(a,e),this.params)}},t.prototype.includes=function(t,e,n){n=r.defaults(n,{relative:this.$current});var o=i.isString(t)&&p.Glob.fromString(t);if(o){if(!o.matches(this.$current.name))return!1;t=this.$current.name}var a=this.router.stateRegistry.matcher.find(t,n.relative),s=this.$current.includes;if(i.isDefined(a)){if(!i.isDefined(s[a.name]))return!1;if(!e)return!0;var u=a.parameters({inherit:!0,matchingKeys:e});return h.Param.equals(u,h.Param.values(u,e),this.params)}},t.prototype.href=function(t,e,n){var o={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};n=r.defaults(n,o),e=e||{};var a=this.router.stateRegistry.matcher.find(t,n.relative);if(!i.isDefined(a))return null;n.inherit&&(e=this.params.$inherit(e,this.$current,a));var s=a&&n.lossy?a.navigable:a;return s&&void 0!==s.url&&null!==s.url?this.router.urlRouter.href(s.url,e,{absolute:n.absolute}):null},t.prototype.defaultErrorHandler=function(t){return this._defaultErrorHandler=t||this._defaultErrorHandler},t.prototype.get=function(t,e){var n=this.router.stateRegistry;return 0===arguments.length?n.get():n.get(t,e||this.$current)},t.prototype.lazyLoad=function(t,e){var n=this.get(t);if(!n||!n.lazyLoad)throw new Error("Can not lazy load "+t);var r=this.getCurrentPath(),i=s.PathUtils.makeTargetState(this.router.stateRegistry,r);return e=e||this.router.transitionService.create(r,i),v.lazyLoadState(e,n)},t}();e.StateService=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(38),i=n(39),o=n(24),a=n(41),s=n(35),u=n(36),c=n(42),l=n(0),f=n(1),h=n(43),p=n(6),d=0,v=function(){function t(t,e){void 0===t&&(t=h.UrlService.locationServiceStub),void 0===e&&(e=h.UrlService.locationConfigStub),this.locationService=t,this.locationConfig=e,this.$id=d++,this._disposed=!1,this._disposables=[],this.trace=p.trace,this.viewService=new a.ViewService,this.globals=new c.UIRouterGlobals,this.transitionService=new o.TransitionService(this),this.urlMatcherFactory=new r.UrlMatcherFactory,this.urlRouter=new i.UrlRouter(this),this.stateRegistry=new s.StateRegistry(this),this.stateService=new u.StateService(this),this.urlService=new h.UrlService(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(t),this.disposable(e)}return t.prototype.disposable=function(t){this._disposables.push(t)},t.prototype.dispose=function(t){var e=this;t&&f.isFunction(t.dispose)?t.dispose(this):(this._disposed=!0,this._disposables.slice().forEach(function(t){try{"function"==typeof t.dispose&&t.dispose(e),l.removeFrom(e._disposables,t)}catch(t){}}))},t.prototype.plugin=function(t,e){void 0===e&&(e={});var n=new t(this,e);if(!n.name)throw new Error("Required property `name` missing on plugin: "+n);return this._disposables.push(n),this._plugins[n.name]=n},t.prototype.getPlugin=function(t){return t?this._plugins[t]:l.values(this._plugins)},t}();e.UIRouter=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(16),a=n(10),s=n(29),u=function(){function t(){var t=this;this.paramTypes=new s.ParamTypes,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this.paramFactory={fromConfig:function(e,n,r){return new a.Param(e,n,r,a.DefType.CONFIG,t)},fromPath:function(e,n,r){return new a.Param(e,n,r,a.DefType.PATH,t)},fromSearch:function(e,n,r){return new a.Param(e,n,r,a.DefType.SEARCH,t)}},this._getConfig=function(e){return r.extend({strict:t._isStrictMode,caseInsensitive:t._isCaseInsensitive},e)},r.extend(this,{UrlMatcher:o.UrlMatcher,Param:a.Param})}return t.prototype.caseInsensitive=function(t){return this._isCaseInsensitive=i.isDefined(t)?t:this._isCaseInsensitive},t.prototype.strictMode=function(t){return this._isStrictMode=i.isDefined(t)?t:this._isStrictMode},t.prototype.defaultSquashPolicy=function(t){if(i.isDefined(t)&&!0!==t&&!1!==t&&!i.isString(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=i.isDefined(t)?t:this._defaultSquashPolicy},t.prototype.compile=function(t,e){return new o.UrlMatcher(t,this.paramTypes,this.paramFactory,this._getConfig(e))},t.prototype.isMatcher=function(t){if(!i.isObject(t))return!1;var e=!0;return r.forEach(o.UrlMatcher.prototype,function(n,r){i.isFunction(n)&&(e=e&&i.isDefined(t[r])&&i.isFunction(t[r]))}),e},t.prototype.type=function(t,e,n){var r=this.paramTypes.type(t,e,n);return i.isDefined(e)?this:r},t.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},t.prototype.dispose=function(){this.paramTypes.dispose()},t}();e.UrlMatcherFactory=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(16),a=n(2),s=n(40),u=n(9),c=n(4);var l;l=function(t,e){var n=function(t,e){return(e.priority||0)-(t.priority||0)}(t,e);return 0!==n?n:0!==(n=function(t,e){var n={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1};return(n[t.type]||0)-(n[e.type]||0)}(t,e))?n:0!==(n=function(t,e){return t.urlMatcher&&e.urlMatcher?o.UrlMatcher.compare(t.urlMatcher,e.urlMatcher):0}(t,e))?n:function(t,e){var n={STATE:!0,URLMATCHER:!0};return n[t.type]&&n[e.type]?0:(t.$id||0)-(e.$id||0)}(t,e)};var f=function(){function t(e){this._sortFn=l,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=e,this.urlRuleFactory=new s.UrlRuleFactory(e),r.createProxyFunctions(a.val(t.prototype),this,a.val(this))}return t.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},t.prototype.sort=function(t){this._rules=this.stableSort(this._rules,this._sortFn=t||this._sortFn),this._sorted=!0},t.prototype.ensureSorted=function(){this._sorted||this.sort()},t.prototype.stableSort=function(t,e){var n=t.map(function(t,e){return{elem:t,idx:e}});return n.sort(function(t,n){var r=e(t.elem,n.elem);return 0===r?t.idx-n.idx:r}),n.map(function(t){return t.elem})},t.prototype.match=function(t){var e=this;this.ensureSorted(),t=r.extend({path:"",search:{},hash:""},t);var n=this.rules();this._otherwiseFn&&n.push(this._otherwiseFn);for(var i,o,a,s=0;s<n.length&&(!i||0===this._sortFn(n[s],i.rule));s++){var u=(o=n[s],void 0,(a=o.match(t,e._router))&&{match:a,rule:o,weight:o.matchPriority(a)});i=!i||u&&u.weight>i.weight?u:i}return i},t.prototype.sync=function(t){if(!t||!t.defaultPrevented){var e=this._router,n=e.urlService,r=e.stateService,o={path:n.path(),search:n.search(),hash:n.hash()},s=this.match(o);a.pattern([[i.isString,function(t){return n.url(t,!0)}],[u.TargetState.isDef,function(t){return r.go(t.state,t.params,t.options)}],[a.is(u.TargetState),function(t){return r.go(t.state(),t.params(),t.options())}]])(s&&s.rule.handler(s.match,o,e))}},t.prototype.listen=function(t){var e=this;if(!1!==t)return this._stopFn=this._stopFn||this._router.urlService.onChange(function(t){return e.sync(t)});this._stopFn&&this._stopFn(),delete this._stopFn},t.prototype.update=function(t){var e=this._router.locationService;t?this.location=e.url():e.url()!==this.location&&e.url(this.location,!0)},t.prototype.push=function(t,e,n){var r=n&&!!n.replace;this._router.urlService.url(t.format(e||{}),r)},t.prototype.href=function(t,e,n){var r=t.format(e);if(null==r)return null;n=n||{absolute:!1};var i=this._router.urlService.config,o=i.html5Mode();if(o||null===r||(r="#"+i.hashPrefix()+r),r=function(t,e,n,r){return"/"===r?t:e?c.stripLastPathElement(r)+t:n?r.slice(1)+t:t}(r,o,n.absolute,i.baseHref()),!n.absolute||!r)return r;var a=!o&&r?"/":"",s=i.port(),u=80===s||443===s?"":":"+s;return[i.protocol(),"://",i.host(),u,a,r].join("")},t.prototype.rule=function(t){var e=this;if(!s.UrlRuleFactory.isUrlRule(t))throw new Error("invalid rule");return t.$id=this._id++,t.priority=t.priority||0,this._rules.push(t),this._sorted=!1,function(){return e.removeRule(t)}},t.prototype.removeRule=function(t){r.removeFrom(this._rules,t)},t.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},t.prototype.otherwise=function(t){var e=h(t);this._otherwiseFn=this.urlRuleFactory.create(a.val(!0),e),this._sorted=!1},t.prototype.initial=function(t){var e=h(t);this.rule(this.urlRuleFactory.create(function(t,e){return 0===e.globals.transitionHistory.size()&&!!/^\/?$/.exec(t.path)},e))},t.prototype.when=function(t,e,n){var r=this.urlRuleFactory.create(t,e);return i.isDefined(n&&n.priority)&&(r.priority=n.priority),this.rule(r),r},t.prototype.deferIntercept=function(t){void 0===t&&(t=!0),this.interceptDeferred=t},t}();function h(t){if(!(i.isFunction(t)||i.isString(t)||a.is(u.TargetState)(t)||u.TargetState.isDef(t)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return i.isFunction(t)?t:a.val(t)}e.UrlRouter=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=n(1),o=n(0),a=n(2),s=function(){function t(t){this.router=t}return t.prototype.compile=function(t){return this.router.urlMatcherFactory.compile(t)},t.prototype.create=function(t,e){var n=this,o=a.pattern([[i.isString,function(t){return o(n.compile(t))}],[a.is(r.UrlMatcher),function(t){return n.fromUrlMatcher(t,e)}],[i.isState,function(t){return n.fromState(t,n.router)}],[a.is(RegExp),function(t){return n.fromRegExp(t,e)}],[i.isFunction,function(t){return new u(t,e)}]]),s=o(t);if(!s)throw new Error("invalid 'what' in when()");return s},t.prototype.fromUrlMatcher=function(t,e){var n=e;i.isString(e)&&(e=this.router.urlMatcherFactory.compile(e)),a.is(r.UrlMatcher)(e)&&(n=function(t){return e.format(t)});var s={urlMatcher:t,matchPriority:function(e){var n=t.parameters().filter(function(t){return t.isOptional});return n.length?n.filter(function(t){return e[t.id]}).length/n.length:1e-6},type:"URLMATCHER"};return o.extend(new u(function(e){var n=t.exec(e.path,e.search,e.hash);return t.validates(n)&&n},n),s)},t.prototype.fromState=function(t,e){var n={state:t,type:"STATE"};return o.extend(this.fromUrlMatcher(t.url,function(n){var r=e.stateService,i=e.globals;r.href(t,n)!==r.href(i.current,i.params)&&r.transitionTo(t,n,{inherit:!0,source:"url"})}),n)},t.prototype.fromRegExp=function(t,e){if(t.global||t.sticky)throw new Error("Rule RegExp must not be global or sticky");var n=i.isString(e)?function(t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}:e,r={regexp:t,type:"REGEXP"};return o.extend(new u(function(e){return t.exec(e.path)},n),r)},t.isUrlRule=function(t){return t&&["type","match","handler"].every(function(e){return i.isDefined(t[e])})},t}();e.UrlRuleFactory=s;var u=function(){return function(t,e){var n=this;this.match=t,this.type="RAW",this.matchPriority=function(t){return 0-n.$id},this.handler=e||o.identity}}();e.BaseUrlRule=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(1),a=n(6),s=function(){function t(){var t=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._listeners=[],this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return t._uiViews},_activeViewConfigs:function(){return t._viewConfigs},_onSync:function(e){return t._listeners.push(e),function(){return r.removeFrom(t._listeners,e)}}}}return t.normalizeUIViewTarget=function(t,e){void 0===e&&(e="");var n=e.split("@"),r=n[0]||"$default",i=o.isString(n[1])?n[1]:"^",a=/^(\^(?:\.\^)*)\.(.*$)/.exec(r);a&&(i=a[1],r=a[2]),"!"===r.charAt(0)&&(r=r.substr(1),i="");/^(\^(?:\.\^)*)$/.exec(i)?i=i.split(".").reduce(function(t,e){return t.parent},t).name:"."===i&&(i=t.name);return{uiViewName:r,uiViewContextAnchor:i}},t.prototype._rootViewContext=function(t){return this._rootContext=t||this._rootContext},t.prototype._viewConfigFactory=function(t,e){this._viewConfigFactories[t]=e},t.prototype.createViewConfig=function(t,e){var n=this._viewConfigFactories[e.$type];if(!n)throw new Error("ViewService: No view config factory registered for type "+e.$type);var r=n(t,e);return o.isArray(r)?r:[r]},t.prototype.deactivateViewConfig=function(t){a.trace.traceViewServiceEvent("<- Removing",t),r.removeFrom(this._viewConfigs,t)},t.prototype.activateViewConfig=function(t){a.trace.traceViewServiceEvent("-> Registering",t),this._viewConfigs.push(t)},t.prototype.sync=function(){var e=this,n=this._uiViews.map(function(t){return[t.fqn,t]}).reduce(r.applyPairs,{});function o(t){for(var e=t.viewDecl.$context,n=0;++n&&e.parent;)e=e.parent;return n}var s=i.curry(function(t,e,n,r){return e*(t(n)-t(r))}),u=this._uiViews.sort(s(function(t){var e=function(t){return t&&t.parent?e(t.parent)+1:1};return 1e4*t.fqn.split(".").length+e(t.creationContext)},1)).map(function(r){var i=e._viewConfigs.filter(t.matches(n,r));return i.length>1&&i.sort(s(o,-1)),{uiView:r,viewConfig:i[0]}}),c=u.map(function(t){return t.viewConfig}),l=this._viewConfigs.filter(function(t){return!r.inArray(c,t)}).map(function(t){return{uiView:void 0,viewConfig:t}});u.forEach(function(t){-1!==e._uiViews.indexOf(t.uiView)&&t.uiView.configUpdated(t.viewConfig)});var f=u.concat(l);this._listeners.forEach(function(t){return t(f)}),a.trace.traceViewSync(f)},t.prototype.registerUIView=function(t){a.trace.traceViewServiceUIViewEvent("-> Registering",t);var e=this._uiViews;return e.filter(function(e){return e.fqn===t.fqn&&e.$type===t.$type}).length&&a.trace.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",t),e.push(t),this.sync(),function(){-1!==e.indexOf(t)?(a.trace.traceViewServiceUIViewEvent("<- Deregistering",t),r.removeFrom(e)(t)):a.trace.traceViewServiceUIViewEvent("Tried removing non-registered uiView",t)}},t.prototype.available=function(){return this._uiViews.map(i.prop("fqn"))},t.prototype.active=function(){return this._uiViews.filter(i.prop("$config")).map(i.prop("name"))},t.matches=function(t,e){return function(n){if(e.$type!==n.viewDecl.$type)return!1;var i=n.viewDecl,o=i.$uiViewName.split("."),a=e.fqn.split(".");if(!r.equals(o,a.slice(0-o.length)))return!1;var s=1-o.length||void 0,u=a.slice(0,s).join("."),c=t[u].creationContext;return i.$uiViewContextAnchor===(c&&c.name)}},t}();e.ViewService=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),i=n(20),o=function(){function t(){this.params=new r.StateParams,this.lastStartedTransitionId=-1,this.transitionHistory=new i.Queue([],1),this.successfulTransitions=new i.Queue([],1)}return t.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},t}();e.UIRouterGlobals=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(0),o=function(t){return t.reduce(function(t,e){return t[e]=r.notImplemented(e),t},{dispose:i.noop})},a=["url","path","search","hash","onChange"],s=["port","protocol","host","baseHref","html5Mode","hashPrefix"],u=["type","caseInsensitive","strictMode","defaultSquashPolicy"],c=["sort","when","initial","otherwise","rules","rule","removeRule"],l=["deferIntercept","listen","sync","match"],f=function(){function t(t,e){void 0===e&&(e=!0),this.router=t,this.rules={},this.config={};var n=function(){return t.locationService};i.createProxyFunctions(n,this,n,a,e);var r=function(){return t.locationConfig};i.createProxyFunctions(r,this.config,r,s,e);var o=function(){return t.urlMatcherFactory};i.createProxyFunctions(o,this.config,o,u);var f=function(){return t.urlRouter};i.createProxyFunctions(f,this.rules,f,c),i.createProxyFunctions(f,this,f,l)}return t.prototype.url=function(t,e,n){},t.prototype.path=function(){},t.prototype.search=function(){},t.prototype.hash=function(){},t.prototype.onChange=function(t){},t.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},t.prototype.dispose=function(){},t.prototype.sync=function(t){},t.prototype.listen=function(t){},t.prototype.deferIntercept=function(t){},t.prototype.match=function(t){},t.locationServiceStub=o(a),t.locationConfigStub=o(s),t}();e.UrlService=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(t){var e=t.router;var n=t.entering().filter(function(t){return!!t.$$state().lazyLoad}).map(function(e){return o(t,e)});return r.services.$q.all(n).then(function(){if("url"!==t.originalTransition().options().source){var n=t.targetState();return e.stateService.target(n.identifier(),n.params(),n.options())}var r=e.urlService,i=r.match(r.parts()),o=i&&i.rule;if(o&&"STATE"===o.type){var a=o.state,s=i.match;return e.stateService.target(a,s,t.options())}e.urlService.sync()})};function o(t,e){var n=e.$$state().lazyLoad,i=n._promise;if(!i){i=n._promise=r.services.$q.when(n(t,e)).then(function(e){e&&Array.isArray(e.states)&&e.states.forEach(function(e){return t.router.stateRegistry.register(e)});return e}).then(function(t){return delete e.lazyLoad,delete e.$$state().lazyLoad,delete n._promise,t},function(t){return delete n._promise,r.services.$q.reject(t)})}return i}e.registerLazyLoadHook=function(t){return t.onBefore({entering:function(t){return!!t.lazyLoad}},i)},e.lazyLoadState=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=function(){return function(t,e,n,i,o,a,s,u){void 0===o&&(o=!1),void 0===a&&(a=r.TransitionHook.HANDLE_RESULT),void 0===s&&(s=r.TransitionHook.REJECT_ERROR),void 0===u&&(u=!1),this.name=t,this.hookPhase=e,this.hookOrder=n,this.criteriaMatchPath=i,this.reverseSort=o,this.getResultHandler=a,this.getErrorHandler=s,this.synchronous=u}}();e.TransitionEventType=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4);e.$q={when:function(t){return new Promise(function(e,n){return e(t)})},reject:function(t){return new Promise(function(e,n){n(t)})},defer:function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},all:function(t){if(r.isArray(t))return Promise.all(t);if(r.isObject(t)){var n=Object.keys(t).map(function(e){return t[e].then(function(t){return{key:e,val:t}})});return e.$q.all(n).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.val,t},{})})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i={},o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,a=/([^\s,]+)/g;e.$injector={get:function(t){return i[t]},has:function(t){return null!=e.$injector.get(t)},invoke:function(t,n,o){var a=r.extend({},i,o||{}),s=e.$injector.annotate(t),u=r.assertPredicate(function(t){return a.hasOwnProperty(t)},function(t){return"DI can't find injectable: '"+t+"'"}),c=s.filter(u).map(function(t){return a[t]});return r.isFunction(t)?t.apply(n,c):t.slice(-1)[0].apply(n,c)},annotate:function(t){if(!r.isInjectable(t))throw new Error("Not an injectable function: "+t);if(t&&t.$inject)return t.$inject;if(r.isArray(t))return t.slice(0,-1);var e=t.toString().replace(o,"");return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(a)||[]}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),a=function(t){function e(e){var n=t.call(this,e,!1)||this;return o.root.addEventListener("hashchange",n._listener,!1),n}return i(e,t),e.prototype._get=function(){return o.trimHashVal(this._location.hash)},e.prototype._set=function(t,e,n,r){this._location.hash=n},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),o.root.removeEventListener("hashchange",this._listener)},e}(n(17).BaseLocationServices);e.HashLocationService=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){return t.call(this,e,!0)||this}return i(e,t),e.prototype._get=function(){return this._url},e.prototype._set=function(t,e,n,r){this._url=n},e}(n(17).BaseLocationServices);e.MemoryLocationService=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(17),a=n(4),s=function(t){function e(e){var n=t.call(this,e,!0)||this;return n._config=e.urlService.config,a.root.addEventListener("popstate",n._listener,!1),n}return i(e,t),e.prototype._getBasePrefix=function(){return a.stripLastPathElement(this._config.baseHref())},e.prototype._get=function(){var t=this._location,e=t.pathname,n=t.hash,r=t.search;r=a.splitQuery(r)[1],n=a.splitHash(n)[1];var i=this._getBasePrefix(),o=e===this._config.baseHref(),s=e.substr(0,i.length)===i;return(e=o?"/":s?e.substring(i.length):e)+(r?"?"+r:"")+(n?"#"+n:"")},e.prototype._set=function(t,e,n,r){var i=this._getBasePrefix(),o=n&&"/"!==n[0]?"/":"",a=""===n||"/"===n?this._config.baseHref():i+o+n;r?this._history.replaceState(t,e,a):this._history.pushState(t,e,a)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),a.root.removeEventListener("popstate",this._listener)},e}(o.BaseLocationServices);e.PushStateLocationService=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(0),o=function(){return function(){var t=this;this.dispose=i.noop,this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return t._port},this.protocol=function(){return t._protocol},this.host=function(){return t._host},this.baseHref=function(){return t._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(e){return r.isDefined(e)?t._hashPrefix=e:t._hashPrefix}}}();e.MemoryLocationConfig=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(){function t(t,e){void 0===e&&(e=!1),this._isHtml5=e,this._baseHref=void 0,this._hashPrefix=""}return t.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},t.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},t.prototype.host=function(){return location.hostname},t.prototype.html5Mode=function(){return this._isHtml5},t.prototype.hashPrefix=function(t){return r.isDefined(t)?this._hashPrefix=t:this._hashPrefix},t.prototype.baseHref=function(t){return r.isDefined(t)?this._baseHref=t:r.isDefined(this._baseHref)?this._baseHref:this.applyDocumentBaseHref()},t.prototype.applyDocumentBaseHref=function(){var t=document.getElementsByTagName("base")[0];return this._baseHref=t?t.href.substr(location.origin.length):location.pathname||"/"},t.prototype.dispose=function(){},t}();e.BrowserLocationConfig=i},,,,function(t,e,n){"use strict";n(26),n(58),n(59),n(!function(){var t=new Error('Cannot find module "../src/module/main.module.spec.js"');throw t.code="MODULE_NOT_FOUND",t}()),angular.module("app",[]).constant("config",{url:"foourl"})},function(t,e){
/**
 * @license AngularJS v1.7.0
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t){"use strict";var e={objectMaxDepth:5};function n(t){if(!F(t))return e;N(t.objectMaxDepth)&&(e.objectMaxDepth=r(t.objectMaxDepth)?t.objectMaxDepth:NaN)}function r(t){return L(t)&&t>0}function i(t,n){n=n||Error;var r="https://errors.angularjs.org/1.7.0/",i=r.replace(".","\\.")+"[\\s\\S]*",o=new RegExp(i,"g");return function(){var i,a,s=arguments[0],u=arguments[1],c="["+(t?t+":":"")+s+"] ",l=ht(arguments,2).map(function(t){return Jt(t,e.objectMaxDepth)});for(c+=u.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1);return e<l.length?l[e].replace(o,""):t}),c+="\n"+r+(t?t+"/":"")+s,a=0,i="?";a<l.length;a++,i="&")c+=i+"p"+a+"="+encodeURIComponent(l[a]);return new n(c)}}var o,a,s,u,c=/^\/(.+)\/([a-z]*)$/,l="validity",f=Object.prototype.hasOwnProperty,h=function(t){return q(t)?t.toLowerCase():t},p=function(t){return q(t)?t.toUpperCase():t},d=[].slice,v=[].splice,$=[].push,m=Object.prototype.toString,g=Object.getPrototypeOf,y=i("ng"),b=t.angular||(t.angular={}),w=0;function E(t){if(null==t||K(t))return!1;if(z(t)||q(t)||a&&t instanceof a)return!0;var e="length"in Object(t)&&t.length;return L(e)&&(e>=0&&e-1 in t||"function"==typeof t.item)}function S(t,e,n){var r,i;if(t)if(G(t))for(r in t)"prototype"!==r&&"length"!==r&&"name"!==r&&t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else if(z(t)||E(t)){var o="object"!=typeof t;for(r=0,i=t.length;r<i;r++)(o||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==S)t.forEach(e,n,t);else if(H(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)f.call(t,r)&&e.call(n,t[r],r,t);return t}function x(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function _(t){return function(e,n){t(n,e)}}function C(){return++w}function k(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function O(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;i<o;++i){var a=e[i];if(F(a)||G(a))for(var s=Object.keys(a),u=0,c=s.length;u<c;u++){var l=s[u],f=a[l];n&&F(f)?B(f)?t[l]=new Date(f.valueOf()):J(f)?t[l]=new RegExp(f):f.nodeName?t[l]=f.cloneNode(!0):nt(f)?t[l]=f.clone():(F(t[l])||(t[l]=z(f)?[]:{}),O(t[l],[f],!0)):t[l]=f}}return k(t,r),t}function R(t){return O(t,d.call(arguments,1),!1)}function T(t){return O(t,d.call(arguments,1),!0)}function P(t){return parseInt(t,10)}o=t.document.documentMode;var A=Number.isNaN||function(t){return t!=t};function j(t,e){return R(Object.create(t),e)}function M(){}function V(t){return t}function I(t){return function(){return t}}function D(t){return G(t.toString)&&t.toString!==m}function U(t){return void 0===t}function N(t){return void 0!==t}function F(t){return null!==t&&"object"==typeof t}function H(t){return null!==t&&"object"==typeof t&&!g(t)}function q(t){return"string"==typeof t}function L(t){return"number"==typeof t}function B(t){return"[object Date]"===m.call(t)}function z(t){return Array.isArray(t)||t instanceof Array}function W(t){switch(m.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function G(t){return"function"==typeof t}function J(t){return"[object RegExp]"===m.call(t)}function K(t){return t&&t.window===t}function Y(t){return t&&t.$evalAsync&&t.$watch}function Z(t){return"boolean"==typeof t}function Q(t){return t&&G(t.then)}M.$inject=[],V.$inject=[];var X=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var tt=function(t){return q(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function nt(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function rt(t){return h(t.nodeName||t[0]&&t[0].nodeName)}function it(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function ot(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function at(t,e,n){var i,o,a=[],s=[];if(n=r(n)?n:NaN,e){if((o=e)&&L(o.length)&&X.test(m.call(o))||(i=e,"[object ArrayBuffer]"===m.call(i)))throw y("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw y("cpi","Can't copy! Source and destination are identical.");return z(e)?e.length=0:S(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),a.push(t),s.push(e),u(t,e,n)}return c(t,n);function u(t,e,n){if(--n<0)return"...";var r,i=e.$$hashKey;if(z(t))for(var o=0,a=t.length;o<a;o++)e.push(c(t[o],n));else if(H(t))for(r in t)e[r]=c(t[r],n);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=c(t[r],n));else for(r in t)f.call(t,r)&&(e[r]=c(t[r],n));return k(e,i),e}function c(t,e){if(!F(t))return t;var n=a.indexOf(t);if(-1!==n)return s[n];if(K(t)||Y(t))throw y("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=function(t){switch(m.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(c(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(G(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===i&&(i=z(t)?[]:Object.create(g(t)),r=!0),a.push(t),s.push(i),r?u(t,i,e):i}}function st(t,e){return t===e||t!=t&&e!=e}function ut(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,o=typeof t;if(o===typeof e&&"object"===o){if(!z(t)){if(B(t))return!!B(e)&&st(t.getTime(),e.getTime());if(J(t))return!!J(e)&&t.toString()===e.toString();if(Y(t)||Y(e)||K(t)||K(e)||z(e)||B(e)||J(e))return!1;for(r in i=Ft(),t)if("$"!==r.charAt(0)&&!G(t[r])){if(!ut(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!(r in i)&&"$"!==r.charAt(0)&&N(e[r])&&!G(e[r]))return!1;return!0}if(!z(e))return!1;if((n=t.length)===e.length){for(r=0;r<n;r++)if(!ut(t[r],e[r]))return!1;return!0}}return!1}var ct=function(){if(!N(ct.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ct.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ct.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ct.rules},lt=function(){if(N(lt.name_))return lt.name_;var e,n,r,i,o=kt.length;for(n=0;n<o;++n)if(r=kt[n],e=t.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return lt.name_=i};function ft(t,e,n){return t.concat(d.call(e,n))}function ht(t,e){return d.call(t,e||0)}function pt(t,e){var n=arguments.length>2?ht(arguments,2):[];return!G(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,ft(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function dt(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:K(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":Y(n)&&(r="$SCOPE"),r}function vt(t,e){if(!U(t))return L(e)||(e=e?2:null),JSON.stringify(t,dt,e)}function $t(t){return q(t)?JSON.parse(t):t}var mt=/:/g;function gt(t,e){t=t.replace(mt,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return A(n)?e:n}function yt(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function bt(t,e,n){n=n?-1:1;var r=t.getTimezoneOffset();return yt(t,n*(gt(e,r)-r))}function wt(t){t=a(t).clone().empty();var e=a("<div></div>").append(t).html();try{return t[0].nodeType===Lt?h(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+h(e)})}catch(t){return h(e)}}function Et(t){try{return decodeURIComponent(t)}catch(t){}}function St(t){var e={};return S((t||"").split("&"),function(t){var n,r,i;t&&(r=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(r=t.substring(0,n),i=t.substring(n+1)),N(r=Et(r))&&(i=!N(i)||Et(i),f.call(e,r)?z(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i))}),e}function xt(t){var e=[];return S(t,function(t,n){z(t)?S(t,function(t){e.push(Ct(n,!0)+(!0===t?"":"="+Ct(t,!0)))}):e.push(Ct(n,!0)+(!0===t?"":"="+Ct(t,!0)))}),e.length?e.join("&"):""}function _t(t){return Ct(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ct(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var kt=["ng-","data-ng-","ng:","x-ng-"];var Ot=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every(function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(t.document);function Rt(e,n){var r,i,o={};if(S(kt,function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,i=e.getAttribute(n))}),S(kt,function(t){var n,o=t+"app";!r&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(o))}),r){if(!Ot)return void t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,r,i=kt.length;for(r=0;r<i;++r)if(n=kt[r]+e,q(n=t.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,i?[i]:[],o)}}function Tt(e,n,r){F(r)||(r={});r=R({strictDi:!1},r);var i=function(){if((e=a(e)).injector()){var i=e[0]===t.document?"document":wt(e);throw y("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Qe(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!s.test(t.name))return i();t.name=t.name.replace(s,""),b.resumeBootstrap=function(t){return S(t,function(t){n.push(t)}),i()},G(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function Pt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function At(t){var e=b.element(t).injector();if(!e)throw y("test","no injector found for element argument to getTestability");return e.get("$$testability")}var jt=/[A-Z]/g;function Mt(t,e){return e=e||"_",t.replace(jt,function(t,n){return(n?e:"")+t.toLowerCase()})}var Vt=!1;function It(t,e,n){if(!t)throw y("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function Dt(t,e,n){return n&&z(t)&&(t=t[t.length-1]),It(G(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Ut(t,e){if("hasOwnProperty"===t)throw y("badname","hasOwnProperty is not a valid {0} name",e)}function Nt(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=a(d.call(t,0,i))),e.push(n));return e||t}function Ft(){return Object.create(null)}function Ht(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!D(t)||z(t)||B(t)?vt(t):t.toString()}return t}var qt=1,Lt=3,Bt=8,zt=9,Wt=11;function Gt(t,e){if(z(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(F(t))for(var i in e=e||{},t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i]);return e||t}function Jt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):U(t)?"undefined":"string"!=typeof t?function(t,e){var n=[];return r(e)&&(t=b.copy(t,null,e)),JSON.stringify(t,function(t,e){if(F(e=dt(t,e))){if(n.indexOf(e)>=0)return"...";n.push(e)}return e})}(t,e):t}var Kt={full:"1.7.0",major:1,minor:7,dot:0,codeName:"nonexistent-physiology"};pe.expando="ng339";var Yt=pe.cache={},Zt=1;pe._data=function(t){return this.cache[t[this.expando]]||{}};var Qt=/-([a-z])/g,Xt=/^-ms-/,te={mouseleave:"mouseout",mouseenter:"mouseover"},ee=i("jqLite");function ne(t,e){return e.toUpperCase()}function re(t){return t.replace(Qt,ne)}var ie=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,oe=/<|&#?\w+;/,ae=/<([\w:-]+)/,se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ue={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ce(t){return!oe.test(t)}function le(t){var e=t.nodeType;return e===qt||!e||e===zt}function fe(t,e){var n,r,i,o,a=e.createDocumentFragment(),s=[];if(ce(t))s.push(e.createTextNode(t));else{for(n=a.appendChild(e.createElement("div")),r=(ae.exec(t)||["",""])[1].toLowerCase(),i=ue[r]||ue._default,n.innerHTML=i[1]+t.replace(se,"<$1></$2>")+i[2],o=i[0];o--;)n=n.lastChild;s=ft(s,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",S(s,function(t){a.appendChild(t)}),a}ue.optgroup=ue.option,ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead,ue.th=ue.td;var he=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function pe(e){if(e instanceof pe)return e;var n,r,i,o;if(q(e)&&(e=tt(e),n=!0),!(this instanceof pe)){if(n&&"<"!==e.charAt(0))throw ee("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new pe(e)}n?_e(this,(r=e,i=i||t.document,(o=ie.exec(r))?[i.createElement(o[1])]:(o=fe(r,i))?o.childNodes:[])):G(e)?Te(e):_e(this,e)}function de(t){return t.cloneNode(!0)}function ve(t,e){!e&&le(t)&&a.cleanData([t]),t.querySelectorAll&&a.cleanData(t.querySelectorAll("*"))}function $e(t){var e;for(e in t)return!1;return!0}function me(t){var e=t.ng339,n=e&&Yt[e],r=n&&n.events,i=n&&n.data;i&&!$e(i)||r&&!$e(r)||(delete Yt[e],t.ng339=void 0)}function ge(t,e,n,r){if(N(r))throw ee("offargs","jqLite#off() does not support the `selector` argument");var i=be(t),o=i&&i.events,a=i&&i.handle;if(a){if(e){var s=function(e){var r=o[e];N(n)&&ot(r||[],n),N(n)&&r&&r.length>0||(t.removeEventListener(e,a),delete o[e])};S(e.split(" "),function(t){s(t),te[t]&&s(te[t])})}else for(e in o)"$destroy"!==e&&t.removeEventListener(e,a),delete o[e];me(t)}}function ye(t,e){var n=t.ng339,r=n&&Yt[n];r&&(e?delete r.data[e]:r.data={},me(t))}function be(t,e){var n=t.ng339,r=n&&Yt[n];return e&&!r&&(t.ng339=n=++Zt,r=Yt[n]={events:{},data:{},handle:void 0}),r}function we(t,e,n){if(le(t)){var r,i=N(n),o=!i&&e&&!F(e),a=!e,s=be(t,!o),u=s&&s.data;if(i)u[re(e)]=n;else{if(a)return u;if(o)return u&&u[re(e)];for(r in e)u[re(r)]=e[r]}}}function Ee(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function Se(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;S(e.split(" "),function(t){t=tt(t),r=r.replace(" "+t+" "," ")}),r!==n&&t.setAttribute("class",tt(r))}}function xe(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;S(e.split(" "),function(t){t=tt(t),-1===r.indexOf(" "+t+" ")&&(r+=t+" ")}),r!==n&&t.setAttribute("class",tt(r))}}function _e(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function Ce(t,e){return ke(t,"$"+(e||"ngController")+"Controller")}function ke(t,e,n){t.nodeType===zt&&(t=t.documentElement);for(var r=z(e)?e:[e];t;){for(var i=0,o=r.length;i<o;i++)if(N(n=a.data(t,r[i])))return n;t=t.parentNode||t.nodeType===Wt&&t.host}}function Oe(t){for(ve(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Re(t,e){e||ve(t);var n=t.parentNode;n&&n.removeChild(t)}function Te(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var Pe=pe.prototype={ready:Te,toString:function(){var t=[];return S(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return a(t>=0?this[t]:this[this.length+t])},length:0,push:$,sort:[].sort,splice:[].splice},Ae={};S("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Ae[h(t)]=t});var je={};S("input,select,option,textarea,button,form,details".split(","),function(t){je[t]=!0});var Me={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Ve(t,e){var n=Ae[e.toLowerCase()];return n&&je[rt(t)]&&n}function Ie(t,e,n){n.call(t,e)}function De(t,e,n){var r=e.relatedTarget;r&&(r===t||he.call(t,r))||n.call(t,e)}function Ue(){this.$get=function(){return R(pe,{hasClass:function(t,e){return t.attr&&(t=t[0]),Ee(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),xe(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Se(t,e)}})}}function Ne(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"===r||"object"===r&&null!==t?t.$$hashKey=r+":"+(e||C)():r+":"+t}S({data:we,removeData:ye,hasData:function(t){for(var e in Yt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)ye(t[e]),ge(t[e])}},function(t,e){pe[e]=t}),S({data:we,inheritedData:ke,scope:function(t){return a.data(t,"$scope")||ke(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return a.data(t,"$isolateScope")||a.data(t,"$isolateScopeNoTemplate")},controller:Ce,injector:function(t){return ke(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Ee,css:function(t,e,n){if(e=function(t){return re(t.replace(Xt,"ms-"))}(e),!N(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var r,i=t.nodeType;if(i!==Lt&&2!==i&&i!==Bt&&t.getAttribute){var o=h(e),a=Ae[o];if(!N(n))return r=t.getAttribute(e),a&&null!==r&&(r=o),null===r?void 0:r;null===n||!1===n&&a?t.removeAttribute(e):t.setAttribute(e,a?o:n)}},prop:function(t,e,n){if(!N(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(U(e)){var n=t.nodeType;return n===qt||n===Lt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(U(e)){if(t.multiple&&"select"===rt(t)){var n=[];return S(t.options,function(t){t.selected&&n.push(t.value||t.text)}),n}return t.value}t.value=e},html:function(t,e){if(U(e))return t.innerHTML;ve(t,!0),t.innerHTML=e},empty:Oe},function(t,e){pe.prototype[e]=function(e,n){var r,i,o=this.length;if(t!==Oe&&U(2===t.length&&t!==Ee&&t!==Ce?e:n)){if(F(e)){for(r=0;r<o;r++)if(t===we)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(var a=t.$dv,s=U(a)?Math.min(o,1):o,u=0;u<s;u++){var c=t(this[u],e,n);a=a?a+c:c}return a}for(r=0;r<o;r++)t(this[r],e,n);return this}}),S({removeData:ye,on:function(t,e,n,r){if(N(r))throw ee("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(le(t)){var i=be(t,!0),o=i.events,a=i.handle;a||(a=i.handle=function(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if(U(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||Ie;o>1&&(i=Gt(i));for(var u=0;u<o;u++)n.isImmediatePropagationStopped()||s(t,n,i[u])}};return n.elem=t,n}(t,o));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],u=s.length,c=function(e,r,i){var s=o[e];s||((s=o[e]=[]).specialHandlerWrapper=r,"$destroy"===e||i||t.addEventListener(e,a)),s.push(n)};u--;)e=s[u],te[e]?(c(te[e],De),c(e,void 0,!0)):c(e)}},off:ge,one:function(t,e,n){(t=a(t)).on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;ve(t),S(new pe(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return S(t.childNodes,function(t){t.nodeType===qt&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===qt||n===Wt)for(var r=0,i=(e=new pe(e)).length;r<i;r++){var o=e[r];t.appendChild(o)}},prepend:function(t,e){if(t.nodeType===qt){var n=t.firstChild;S(new pe(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){var n,r,i;n=t,r=a(e).eq(0).clone()[0],(i=n.parentNode)&&i.replaceChild(r,n),r.appendChild(n)},remove:Re,detach:function(t){Re(t,!0)},after:function(t,e){var n=t,r=t.parentNode;if(r)for(var i=0,o=(e=new pe(e)).length;i<o;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:xe,removeClass:Se,toggleClass:function(t,e,n){e&&S(e.split(" "),function(e){var r=n;U(r)&&(r=!Ee(t,e)),(r?xe:Se)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Wt?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:de,triggerHandler:function(t,e,n){var r,i,o,a=e.type||e,s=be(t),u=s&&s.events,c=u&&u[a];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:M,type:a,target:t},e.type&&(r=R(r,e)),i=Gt(c),o=n?[r].concat(n):[r],S(i,function(e){r.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(t,e){pe.prototype[e]=function(e,n,r){for(var i,o=0,s=this.length;o<s;o++)U(i)?N(i=t(this[o],e,n,r))&&(i=a(i)):_e(i,t(this[o],e,n,r));return N(i)?i:this}}),pe.prototype.bind=pe.prototype.on,pe.prototype.unbind=pe.prototype.off;var Fe=Object.create(null);function He(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}He.prototype={_idx:function(t){return t===this._lastKey?this._lastIndex:(this._lastKey=t,this._lastIndex=this._keys.indexOf(t),this._lastIndex)},_transformKey:function(t){return A(t)?Fe:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var qe=He,Le=[function(){this.$get=[function(){return qe}]}],Be=/^([^(]+?)=>/,ze=/^[^(]*\(\s*([^)]*)\)/m,We=/,/,Ge=/^\s*(_?)(\S+?)\1\s*$/,Je=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ke=i("$injector");function Ye(t){return Function.prototype.toString.call(t)}function Ze(t){var e=Ye(t).replace(Je,"");return e.match(Be)||e.match(ze)}function Qe(t,e){e=!0===e;var n={},r="Provider",i=[],a=new qe,s={$provide:{provider:d(v),factory:d($),service:d(function(t,e){return $(t,["$injector",function(t){return t.instantiate(e)}])}),value:d(function(t,e){return $(t,I(e),!1)}),constant:d(function(t,e){Ut(t,"constant"),s[t]=e,l[t]=e}),decorator:function(t,e){var n=c.get(t+r),i=n.$get;n.$get=function(){var t=h.invoke(i,n);return h.invoke(e,null,{$delegate:t})}}}},c=s.$injector=g(s,function(t,e){throw b.isString(e)&&i.push(e),Ke("unpr","Unknown provider: {0}",i.join(" <- "))}),l={},f=g(l,function(t,e){var n=c.get(t+r,e);return h.invoke(n.$get,n,void 0,t)}),h=f;s["$injector"+r]={$get:I(f)},h.modules=c.modules=Ft();var p=m(t);return(h=f.get("$injector")).strictDi=e,S(p,function(t){t&&h.invoke(t)}),h.loadNewModules=function(t){S(m(t),function(t){t&&h.invoke(t)})},h;function d(t){return function(e,n){if(!F(e))return t(e,n);S(e,_(t))}}function v(t,e){if(Ut(t,"service"),(G(e)||z(e))&&(e=c.instantiate(e)),!e.$get)throw Ke("pget","Provider '{0}' must define $get factory method.",t);return s[t+r]=e}function $(t,e,n){return v(t,{$get:!1!==n?function(t,e){return function(){var n=h.invoke(e,this);if(U(n))throw Ke("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}(t,e):e})}function m(t){It(U(t)||z(t),"modulesToLoad","not an array");var e,n=[];return S(t,function(t){if(!a.get(t)){a.set(t,!0);try{q(t)?(e=u(t),h.modules[t]=e,n=n.concat(m(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):G(t)?n.push(c.invoke(t)):z(t)?n.push(c.invoke(t)):Dt(t,"module")}catch(e){throw z(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ke("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=c.get(r[0]);i[r[1]].apply(i,r[2])}}}),n}function g(t,a){function u(e,r){if(t.hasOwnProperty(e)){if(t[e]===n)throw Ke("cdep","Circular dependency found: {0}",e+" <- "+i.join(" <- "));return t[e]}try{return i.unshift(e),t[e]=n,t[e]=a(e,r),t[e]}catch(r){throw t[e]===n&&delete t[e],r}finally{i.shift()}}function c(t,n,r){for(var i=[],o=Qe.$$annotate(t,e,r),a=0,s=o.length;a<s;a++){var c=o[a];if("string"!=typeof c)throw Ke("itkn","Incorrect injection token! Expected service name as string, got {0}",c);i.push(n&&n.hasOwnProperty(c)?n[c]:u(c,r))}return i}return{invoke:function(t,e,n,r){"string"==typeof n&&(r=n,n=null);var i=c(t,n,r);return z(t)&&(t=t[t.length-1]),function(t){if(o||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return Z(e)||(e=t.$$ngIsClass=/^class\b/.test(Ye(t))),e}(t)?(i.unshift(null),new(Function.prototype.bind.apply(t,i))):t.apply(e,i)},instantiate:function(t,e,n){var r=z(t)?t[t.length-1]:t,i=c(t,e,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:u,annotate:Qe.$$annotate,has:function(e){return s.hasOwnProperty(e+r)||t.hasOwnProperty(e)}}}}function Xe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var o=n.document;function s(t){if(t){t.scrollIntoView();var e=function(){var t=u.yOffset;if(G(t))t=t();else if(nt(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else L(t)||(t=0);return t}();if(e){var r=t.getBoundingClientRect().top;n.scrollBy(0,r-e)}}else n.scrollTo(0,0)}function u(t){var e,n,i;(t=q(t)?t:L(t)?t.toString():r.hash())?(e=o.getElementById(t))?s(e):(n=o.getElementsByName(t),i=null,Array.prototype.some.call(n,function(t){if("a"===rt(t))return i=t,!0}),(e=i)?s(e):"top"===t&&s(null)):s(null)}return e&&i.$watch(function(){return r.hash()},function(e,n){var r,o;e===n&&""===e||(r=function(){i.$evalAsync(u)},"complete"===(o=o||t).document.readyState?o.setTimeout(r):a(o).on("load",r))}),u}]}Qe.$$annotate=function(t,e,n){var r,i;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw q(n)&&n||(n=t.name||function(t){var e=Ze(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Ke("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);S(Ze(t)[1].split(We),function(t){t.replace(Ge,function(t,e,n){r.push(n)})})}t.$inject=r}}else z(t)?(Dt(t[i=t.length-1],"fn"),r=t.slice(0,i)):Dt(t,"fn",!0);return r};var tn=i("$animate"),en=1;function nn(t,e){return t||e?t?e?(z(t)&&(t=t.join(" ")),z(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function rn(t){return F(t)?t:{}}var on=function(){this.$get=M},an=function(){var t=new qe,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:M,on:M,off:M,pin:M,push:function(a,s,u,c){c&&c(),(u=u||{}).from&&a.css(u.from),u.to&&a.css(u.to),(u.addClass||u.removeClass)&&function(n,a,s){var u=t.get(n)||{},c=i(u,a,!0),l=i(u,s,!1);(c||l)&&(t.set(n,u),e.push(n),1===e.length&&r.$$postDigest(o))}(a,u.addClass,u.removeClass);var l=new n;return l.complete(),l}};function i(t,e,n){var r=!1;return e&&S(e=q(e)?e.split(" "):z(e)?e:[],function(e){e&&(r=!0,t[e]=n)}),r}function o(){S(e,function(e){var n=t.get(e);if(n){var r=function(t){q(t)&&(t=t.split(" "));var e=Ft();return S(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),i="",o="";S(n,function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:o+=(o.length?" ":"")+e)}),S(e,function(t){i&&xe(t,i),o&&Se(t,o)}),t.delete(e)}}),e.length=0}}]},sn=["$provide",function(t){var e=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw tn("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.customFilter=function(t){return 1===arguments.length&&(r=G(t)?t:null),r},this.classNameFilter=function(t){if(1===arguments.length&&((n=t instanceof RegExp?t:null)&&new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]").test(n.toString())))throw n=null,tn("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===en)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(n,r,i,o){return r=r&&a(r),i=i&&a(i),e(n,r=r||i.parent(),i),t.push(n,"enter",rn(o))},move:function(n,r,i,o){return r=r&&a(r),i=i&&a(i),e(n,r=r||i.parent(),i),t.push(n,"move",rn(o))},leave:function(e,n){return t.push(e,"leave",rn(n),function(){e.remove()})},addClass:function(e,n,r){return(r=rn(r)).addClass=nn(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return(r=rn(r)).removeClass=nn(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return(i=rn(i)).addClass=nn(i.addClass,n),i.removeClass=nn(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return(o=rn(o)).from=o.from?R(o.from,n):n,o.to=o.to?R(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=nn(o.tempClasses,i),t.push(e,"animate",o)}}}]}],un=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t(function(){for(var t=0;t<e.length;t++)e[t]();e=[]})}return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]},cn=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){r()?function(t){i(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function r(){if(n===t.length)return void e(!0);t[n](function(t){!1!==t?(n++,r()):e(!1)})}()},o.all=function(t,e){var n=0,r=!0;function i(i){r=r&&i,++n===t.length&&e(r)}S(t,function(t){t.done(i)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:M,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(S(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},ln=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){var i=r||{};i.$$prepared||(i=at(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(e.css(i.from),i.from=null);var o,a=new n;return{start:s,end:s};function s(){return t(function(){!function(){i.addClass&&(e.addClass(i.addClass),i.addClass=null);i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null);i.to&&(e.css(i.to),i.to=null)}(),o||a.complete(),o=!0}),a}}}]};function fn(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new function(t,e,n,r){var i=this,o=t.location,s=t.history,u=t.setTimeout,c=t.clearTimeout,l={};i.isMock=!1;var f=0,h=[];function p(t){try{t.apply(null,ht(arguments,1))}finally{if(0==--f)for(;h.length;)try{h.pop()()}catch(t){n.error(t)}}}i.$$completeOutstandingRequest=p,i.$$incOutstandingRequestCount=function(){f++},i.notifyWhenNoOutstandingRequests=function(t){0===f?t():h.push(t)};var d,v,$=o.href,m=e.find("base"),g=null,y=r.history?function(){try{return s.state}catch(t){}}:M;_(),i.url=function(e,n,a){if(U(a)&&(a=null),o!==t.location&&(o=t.location),s!==t.history&&(s=t.history),e){var u=v===a;if($===e&&(!r.history||u))return i;var c=$&&sr($)===sr(e);return $=e,v=a,!r.history||c&&u?(c||(g=e),n?o.replace(e):c?o.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):o.href=e,o.href!==e&&(g=e)):(s[n?"replaceState":"pushState"](a,"",e),_()),g&&(g=e),i}return g||o.href},i.state=function(){return d};var b=[],w=!1;function E(){g=null,C()}var x=null;function _(){ut(d=U(d=y())?null:d,x)&&(d=x),x=d,v=d}function C(){var t=v;_(),$===i.url()&&t===d||($=i.url(),v=d,S(b,function(t){t(i.url(),d)}))}i.onUrlChange=function(e){return w||(r.history&&a(t).on("popstate",E),a(t).on("hashchange",E),w=!0),b.push(e),e},i.$$applicationDestroyed=function(){a(t).off("hashchange popstate",E)},i.$$checkUrlChange=C,i.baseHref=function(){var t=m.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},i.defer=function(t,e){var n;return f++,n=u(function(){delete l[n],p(t)},e||0),l[n]=!0,n},i.defer.cancel=function(t){return!!l[t]&&(delete l[t],c(t),p(M),!0)}}(t,r,e,n)}]}function hn(){this.$get=function(){var t={};function e(e,n){if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var r=0,o=R({},n,{id:e}),a=Ft(),s=n&&n.capacity||Number.MAX_VALUE,u=Ft(),c=null,l=null;return t[e]={put:function(t,e){if(!U(e)){if(s<Number.MAX_VALUE)f(u[t]||(u[t]={key:t}));return t in a||r++,a[t]=e,r>s&&this.remove(l.key),e}},get:function(t){if(s<Number.MAX_VALUE){var e=u[t];if(!e)return;f(e)}return a[t]},remove:function(t){if(s<Number.MAX_VALUE){var e=u[t];if(!e)return;e===c&&(c=e.p),e===l&&(l=e.n),h(e.n,e.p),delete u[t]}t in a&&(delete a[t],r--)},removeAll:function(){a=Ft(),r=0,u=Ft(),c=l=null},destroy:function(){a=null,o=null,u=null,delete t[e]},info:function(){return R({},o,{size:r})}};function f(t){t!==c&&(l?l===t&&(l=t.n):l=t,h(t.n,t.p),h(t,c),(c=t).n=null)}function h(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return S(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function pn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var dn=i("$compile");var vn=new function(){};function $n(e,n){var r={},i="Directive",s=/^\s*directive:\s*([\w-]+)\s+(.*)$/,u=/(([\w-]+)(?::([^;]+))?;?)/,c=function(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,p=/^(on[a-z]+|formaction)$/,d=Ft();function v(t,e,n){var r=/^([@&<]|=(\*?))(\??)\s*([\w$]*)$/,i=Ft();return S(t,function(t,o){if((t=t.trim())in d)i[o]=d[t];else{var a=t.match(r);if(!a)throw dn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(d[t]=i[o])}}),i}function $(t,e){var n={isolateScope:null,bindToController:null};if(F(t.scope)&&(!0===t.bindToController?(n.bindToController=v(t.scope,e,!0),n.isolateScope={}):n.isolateScope=v(t.scope,e,!1)),F(t.bindToController)&&(n.bindToController=v(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw dn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,o){return It(n,"name"),Ut(n,"directive"),q(n)?(!function(t){var e=t.charAt(0);if(!e||e!==h(e))throw dn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw dn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),It(o,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],e.factory(n+i,["$injector","$exceptionHandler",function(t,e){var i=[];return S(r[n],function(r,o){try{var a=t.invoke(r);G(a)?a={compile:I(a)}:!a.compile&&a.link&&(a.compile=I(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=function(t){var e=t.require||t.controller&&t.name;return!z(e)&&F(e)&&S(e,function(t,n){var r=t.match(l);t.substring(r[0].length)||(e[n]=r[0]+n)}),e}(a),a.restrict=function(t,e){if(t&&(!q(t)||!/[EACM]/.test(t)))throw dn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(a.restrict,n),a.$$moduleName=r.$$moduleName,i.push(a)}catch(t){e(t)}}),i}])),r[n].push(o)):S(n,_(t)),this},this.component=function t(e,n){if(!q(e))return S(e,_(pt(this,t))),this;var r=n.controller||function(){};function i(t){function e(e){return G(e)||z(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var i=n.template||n.templateUrl?n.template:"",o={controller:r,controllerAs:function(t,e){if(e&&q(e))return e;if(q(t)){var n=xn.exec(t);if(n)return n[3]}}(n.controller)||n.controllerAs||"$ctrl",template:e(i),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return S(n,function(t,e){"$"===e.charAt(0)&&(o[e]=t)}),o}return S(n,function(t,e){"$"===e.charAt(0)&&(i[e]=t,G(r)&&(r[e]=t))}),i.$inject=["$injector"],this.directive(e,i)},this.aHrefSanitizationWhitelist=function(t){return N(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return N(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var g=!0;this.debugInfoEnabled=function(t){return N(t)?(g=t,this):g};var y=!1;this.strictComponentBindingsEnabled=function(t){return N(t)?(y=t,this):y};var b=10;this.onChangesTtl=function(t){return arguments.length?(b=t,this):b};var w=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(w=t,this):w};var E=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(E=t,this):E},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,n,d,v,x,_,C,k,O){var T,P=/^\w/,A=t.document.createElement("div"),I=w,D=E,N=b;function H(){try{if(!--N)throw T=void 0,dn("infchng","{0} $onChanges() iterations reached. Aborting!\n",b);C.$apply(function(){for(var t=0,e=T.length;t<e;++t)try{T[t]()}catch(t){d(t)}T=void 0})}finally{N++}}function L(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;n<r;n++)this[i=o[n]]=e[i]}else this.$attr={};this.$$element=t}function B(t,e){try{t.addClass(e)}catch(t){}}L.prototype={$normalize:bn,$addClass:function(t){t&&t.length>0&&O.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&O.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=wn(t,e);n&&n.length&&O.addClass(this.$$element,n);var r=wn(e,t);r&&r.length&&O.removeClass(this.$$element,r)},$set:function(t,e,n,r){var i=Ve(this.$$element[0],t),o=Me[t],a=t;if(i?(this.$$element.prop(t,e),r=i):o&&(this[o]=e,a=o),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=Mt(t,"-")),"img"===rt(this.$$element)&&"srcset"===t&&e){if(!q(e))throw dn("srcset","Can't pass trusted values to `$set('srcset', value)`: \"{0}\"",e.toString());for(var s="",u=tt(e),c=/\s/.test(u)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,l=u.split(c),f=Math.floor(l.length/2),h=0;h<f;h++){var p=2*h;s+=k.getTrustedMediaUrl(tt(l[p])),s+=" "+tt(l[p+1])}var v=tt(l[2*h]).split(/\s/);s+=k.getTrustedMediaUrl(tt(v[0])),2===v.length&&(s+=" "+tt(v[1])),this[t]=e=s}!1!==n&&(null===e||U(e)?this.$$element.removeAttr(r):P.test(r)?this.$$element.attr(r,e):function(t,e,n){A.innerHTML="<span "+e+">";var r=A.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,t.attributes.setNamedItem(i)}(this.$$element[0],r,e));var $=this.$$observers;$&&S($[a],function(t){try{t(e)}catch(t){d(t)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=Ft()),i=r[t]||(r[t]=[]);return i.push(e),C.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(t)||U(n[t])||e(n[t])}),function(){ot(i,e)}}};var J=n.startSymbol(),K=n.endSymbol(),Q="{{"===J&&"}}"===K?V:function(t){return t.replace(/\{\{/g,J).replace(/}}/g,K)},X=/^ngAttr[A-Z]/,et=/^(.+)Start$/;return nt.$$addBindingInfo=g?function(t,e){var n=t.data("$binding")||[];z(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:M,nt.$$addBindingClass=g?function(t){B(t,"ng-binding")}:M,nt.$$addScopeInfo=g?function(t,e,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:M,nt.$$addScopeClass=g?function(t,e){B(t,e?"ng-isolate-scope":"ng-scope")}:M,nt.$$createComment=function(e,n){var r="";return g&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},nt;function nt(t,e,n,r,i){t instanceof a||(t=a(t));var o=it(t,e,t,n,r,i);nt.$$addScopeClass(t);var s=null;return function(e,n,r){if(!t)throw dn("multilink","This element has already been linked.");It(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new());var u,c,l,f=(r=r||{}).parentBoundTranscludeFn,h=r.transcludeControllers,p=r.futureParentElement;if(f&&f.$$boundTransclude&&(f=f.$$boundTransclude),s||(c=(u=p)&&u[0],s=c&&"foreignobject"!==rt(c)&&m.call(c).match(/SVG/)?"svg":"html"),l="html"!==s?a(Ct(s,a("<div></div>").append(t).html())):n?Pe.clone.call(t):t,h)for(var d in h)l.data("$"+d+"Controller",h[d].instance);return nt.$$addScopeInfo(l,e),n&&n(l,e),o&&o(e,l,l,f),n||(t=o=null),l}}function it(t,e,n,r,i,s){for(var u,c,l,f,h,p,d,v=[],$=z(t)||t instanceof a,m=0;m<t.length;m++)u=new L,11===o&&at(t,m,$),(l=(c=lt(t[m],[],u,0===m?r:void 0,i)).length?$t(c,t[m],u,e,n,null,[],[],s):null)&&l.scope&&nt.$$addScopeClass(u.$$element),h=l&&l.terminal||!(f=t[m].childNodes)||!f.length?null:it(f,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:e),(l||h)&&(v.push(m,l,h),p=!0,d=d||l),s=null;return p?function(t,n,r,i){var o,s,u,c,l,f,h,p,$;if(d){var m=n.length;for($=new Array(m),l=0;l<v.length;l+=3)h=v[l],$[h]=n[h]}else $=n;for(l=0,f=v.length;l<f;)u=$[v[l++]],o=v[l++],s=v[l++],o?(o.scope?(c=t.$new(),nt.$$addScopeInfo(a(u),c)):c=t,p=o.transcludeOnThisElement?ct(t,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&e?ct(t,e):null,o(s,c,u,r,p)):s&&s(t,u.childNodes,void 0,i)}:null}function at(t,e,n){var r,i=t[e],o=i.parentNode;if(i.nodeType===Lt)for(;(r=o?i.nextSibling:t[e+1])&&r.nodeType===Lt;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===t[e+1]&&t.splice(e+1,1)}function ct(t,e,n){function r(r,i,o,a,s){return r||((r=t.$new(!1,s)).$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=Ft();for(var o in e.$$slots)e.$$slots[o]?i[o]=ct(t,e.$$slots[o],n):i[o]=null;return r}function lt(t,e,r,i,o){var a,c,l,f=t.nodeType,h=r.$attr;switch(f){case qt:yt(e,bn(c=rt(t)),"E",i,o);for(var p,d,v,$,m,g,y=t.attributes,b=0,w=y&&y.length;b<w;b++){var E=!1,S=!1;d=(p=y[b]).name,m=p.value,$=bn(d),(g=X.test($))&&(d=d.replace(gn,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var x=$.match(et);x&&bt(x[1])&&(E=d,S=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),h[v=bn(d.toLowerCase())]=d,!g&&r.hasOwnProperty(v)||(r[v]=m,Ve(t,v)&&(r[v]=!0)),kt(t,e,m,v,g),yt(e,v,"A",i,o,E,S)}if("input"===c&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!D)break;if(F(l=t.className)&&(l=l.animVal),q(l)&&""!==l)for(;a=u.exec(l);)yt(e,v=bn(a[2]),"C",i,o)&&(r[v]=tt(a[3])),l=l.substr(a.index+a[0].length);break;case Lt:!function(t,e){var r=n(e,!0);r&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&nt.$$addBindingClass(e),function(t,e){var i=e.parent();n||nt.$$addBindingClass(i),nt.$$addBindingInfo(i,r.expressions),t.$watch(r,function(t){e[0].nodeValue=t})}}})}(e,t.nodeValue);break;case Bt:if(!I)break;!function(t,e,n,r,i){try{var o=s.exec(t.nodeValue);if(o){var a=bn(o[1]);yt(e,a,"M",r,i)&&(n[a]=tt(o[2]))}}catch(t){}}(t,e,r,i,o)}return e.sort(xt),e}function ft(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw dn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType===qt&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0);else r.push(t);return a(r)}function dt(t,e,n){return function(r,i,o,a,s){return i=ft(i[0],e,n),t(r,i,o,a,s)}}function vt(t,e,n,r,i,o){var a;return t?nt(e,n,r,i,o):function(){return a||(a=nt(e,n,r,i,o),e=n=o=null),a.apply(this,arguments)}}function $t(t,e,n,r,i,o,s,u,c){c=c||{};for(var l,f,h,p,v,$=-Number.MAX_VALUE,m=c.newScopeDirective,g=c.controllerDirectives,y=c.newIsolateScopeDirective,b=c.templateDirective,w=c.nonTlbTranscludeDirective,E=!1,x=!1,C=c.hasElementTranscludeDirective,k=n.$$element=a(e),O=o,T=r,P=!1,A=!1,j=0,M=t.length;j<M;j++){var V=(l=t[j]).$$start,I=l.$$end;if(V&&(k=ft(e,V,I)),h=void 0,$>l.priority)break;if((v=l.scope)&&(l.templateUrl||(F(v)?(_t("new/isolated scope",y||m,l,k),y=l):_t("new/isolated scope",y,l,k)),m=m||l),f=l.name,!P&&(l.replace&&(l.templateUrl||l.template)||l.transclude&&!l.$$tlb)){for(var D,N=j+1;D=t[N++];)if(D.transclude&&!D.$$tlb||D.replace&&(D.templateUrl||D.template)){A=!0;break}P=!0}if(!l.templateUrl&&l.controller&&(g=g||Ft(),_t("'"+f+"' controller",g[f],l,k),g[f]=l),v=l.transclude)if(E=!0,l.$$tlb||(_t("transclusion",w,l,k),w=l),"element"===v)C=!0,$=l.priority,h=k,k=n.$$element=a(nt.$$createComment(f,n[f])),e=k[0],Ot(i,ht(h),e),T=vt(A,h,r,$,O&&O.name,{nonTlbTranscludeDirective:w});else{var H=Ft();if(F(v)){h=[];var q=Ft(),B=Ft();for(var W in S(v,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,q[t]=e,H[e]=null,B[e]=n}),S(k.contents(),function(t){var e=q[bn(rt(t))];e?(B[e]=!0,H[e]=H[e]||[],H[e].push(t)):h.push(t)}),S(B,function(t,e){if(!t)throw dn("reqslot","Required transclusion slot `{0}` was not filled.",e)}),H)H[W]&&(H[W]=vt(A,H[W],r))}else h=a(de(e)).contents();k.empty(),(T=vt(A,h,r,void 0,void 0,{needsNewScope:l.$$isolateScope||l.$$newScope})).$$slots=H}if(l.template)if(x=!0,_t("template",b,l,k),b=l,v=G(l.template)?l.template(k,n):l.template,v=Q(v),l.replace){if(O=l,h=ce(v)?[]:En(Ct(l.templateNamespace,tt(v))),e=h[0],1!==h.length||e.nodeType!==qt)throw dn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f,"");Ot(i,k,e);var J={$attr:{}},K=lt(e,[],J),Z=t.splice(j+1,t.length-(j+1));(y||m)&&gt(K,y,m),t=t.concat(K).concat(Z),Et(n,J),M=t.length}else k.html(v);if(l.templateUrl)x=!0,_t("template",b,l,k),b=l,l.replace&&(O=l),it=St(t.splice(j,t.length-j),k,n,i,E&&T,s,u,{controllerDirectives:g,newScopeDirective:m!==l&&m,newIsolateScopeDirective:y,templateDirective:b,nonTlbTranscludeDirective:w}),M=t.length;else if(l.compile)try{p=l.compile(k,n,T);var X=l.$$originalDirective||l;G(p)?et(null,pt(X,p),V,I):p&&et(pt(X,p.pre),pt(X,p.post),V,I)}catch(t){d(t,wt(k))}l.terminal&&(it.terminal=!0,$=Math.max($,l.priority))}return it.scope=m&&!0===m.scope,it.transcludeOnThisElement=E,it.templateOnThisElement=x,it.transclude=T,c.hasElementTranscludeDirective=C,it;function et(t,e,n,r){t&&(n&&(t=dt(t,n,r)),t.require=l.require,t.directiveName=f,(y===l||l.$$isolateScope)&&(t=Rt(t,{isolateScope:!0})),s.push(t)),e&&(n&&(e=dt(e,n,r)),e.require=l.require,e.directiveName=f,(y===l||l.$$isolateScope)&&(e=Rt(e,{isolateScope:!0})),u.push(e))}function it(t,r,i,o,c){var l,f,h,p,v,$,w,E,x,k;for(var O in e===i?(x=n,E=n.$$element):x=new L(E=a(i),n),v=r,y?p=r.$new(!0):m&&(v=r.$parent),c&&((w=function(t,e,n,r){var i;Y(t)||(r=n,n=e,e=t,t=void 0);C&&(i=$);n||(n=C?E.parent():E);if(!r)return c(t,e,i,n,j);var o=c.$$slots[r];if(o)return o(t,e,i,n,j);if(U(o))throw dn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,wt(E))}).$$boundTransclude=c,w.isSlotFilled=function(t){return!!c.$$slots[t]}),g&&($=function(t,e,n,r,i,o,a){var s=Ft();for(var u in r){var c=r[u],l={$scope:c===a||c.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},f=c.controller;"@"===f&&(f=e[c.name]);var h=_(f,l,!0,c.controllerAs);s[c.name]=h,t.data("$"+c.name+"Controller",h.instance)}return s}(E,x,w,g,p,r,y)),y&&(nt.$$addScopeInfo(E,p,!0,!(b&&(b===y||b===y.$$originalDirective))),nt.$$addScopeClass(E,!0),p.$$isolateBindings=y.$$isolateBindings,(k=At(r,x,p,p.$$isolateBindings,y)).removeWatches&&p.$on("$destroy",k.removeWatches)),$){var T=g[O],P=$[O],A=T.$$bindings.bindToController;P.instance=P(),E.data("$"+T.name+"Controller",P.instance),P.bindingInfo=At(v,x,P.instance,A,T)}for(S(g,function(t,e){var n=t.require;t.bindToController&&!z(n)&&F(n)&&R($[e].instance,mt(e,n,E,$))}),S($,function(t){var e=t.instance;if(G(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){d(t)}if(G(e.$onInit))try{e.$onInit()}catch(t){d(t)}G(e.$doCheck)&&(v.$watch(function(){e.$doCheck()}),e.$doCheck()),G(e.$onDestroy)&&v.$on("$destroy",function(){e.$onDestroy()})}),l=0,f=s.length;l<f;l++)Tt(h=s[l],h.isolateScope?p:r,E,x,h.require&&mt(h.directiveName,h.require,E,$),w);var j=r;for(y&&(y.template||null===y.templateUrl)&&(j=p),t&&t(j,i.childNodes,void 0,c),l=u.length-1;l>=0;l--)Tt(h=u[l],h.isolateScope?p:r,E,x,h.require&&mt(h.directiveName,h.require,E,$),w);S($,function(t){var e=t.instance;G(e.$postLink)&&e.$postLink()})}}function mt(t,e,n,r){var i;if(q(e)){var o=e.match(l),a=e.substring(o[0].length),s=o[1]||o[3],u="?"===o[2];if("^^"===s?n=n.parent():i=(i=r&&r[a])&&i.instance,!i){var c="$"+a+"Controller";i=s?n.inheritedData(c):n.data(c)}if(!i&&!u)throw dn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(z(e)){i=[];for(var f=0,h=e.length;f<h;f++)i[f]=mt(t,e[f],n,r)}else F(e)&&(i={},S(e,function(e,o){i[o]=mt(t,e,n,r)}));return i||null}function gt(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=j(t[r],{$$isolateScope:e,$$newScope:n})}function yt(t,n,o,a,s,u,c){if(n===s)return null;var l=null;if(r.hasOwnProperty(n))for(var f,h=e.get(n+i),p=0,d=h.length;p<d;p++)if(f=h[p],(U(a)||a>f.priority)&&-1!==f.restrict.indexOf(o)){if(u&&(f=j(f,{$$start:u,$$end:c})),!f.$$bindings){var v=f.$$bindings=$(f,f.name);F(v.isolateScope)&&(f.$$isolateBindings=v.isolateScope)}t.push(f),l=f}return l}function bt(t){if(r.hasOwnProperty(t))for(var n=e.get(t+i),o=0,a=n.length;o<a;o++)if(n[o].multiElement)return!0;return!1}function Et(t,e){var n=e.$attr,r=t.$attr;S(t,function(r,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==r&&(r.length?r+=("style"===i?";":" ")+e[i]:r=e[i]),t.$set(i,r,!0,n[i]))}),S(e,function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function St(t,e,n,r,i,o,s,u){var c,l,f=[],h=e[0],p=t.shift(),$=j(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),m=G(p.templateUrl)?p.templateUrl(e,n):p.templateUrl,g=p.templateNamespace;return e.empty(),v(m).then(function(d){var v,y,b,w;if(d=Q(d),p.replace){if(b=ce(d)?[]:En(Ct(g,tt(d))),v=b[0],1!==b.length||v.nodeType!==qt)throw dn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,m);y={$attr:{}},Ot(r,e,v);var E=lt(v,[],y);F(p.scope)&&gt(E,!0),t=E.concat(t),Et(n,y)}else v=h,e.html(d);for(t.unshift($),c=$t(t,v,n,i,e,p,o,s,u),S(r,function(t,n){t===v&&(r[n]=e[0])}),l=it(e[0].childNodes,i);f.length;){var x=f.shift(),_=f.shift(),C=f.shift(),k=f.shift(),O=e[0];if(!x.$$destroyed){if(_!==h){var R=_.className;u.hasElementTranscludeDirective&&p.replace||(O=de(v)),Ot(C,a(_),O),B(a(O),R)}w=c.transcludeOnThisElement?ct(x,c.transclude,k):k,c(l,x,O,r,w)}}f=null}).catch(function(t){W(t)&&d(t)}),function(t,e,n,r,i){var o=i;e.$$destroyed||(f?f.push(e,n,r,o):(c.transcludeOnThisElement&&(o=ct(e,c.transclude,i)),c(l,e,n,r,o)))}}function xt(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function _t(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw dn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,wt(r))}function Ct(e,n){switch(e=h(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function kt(t,e,r,i,o){var a=function(t,e){if("srcdoc"===e)return k.HTML;var n=rt(t);return"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(n)?k.RESOURCE_URL:k.MEDIA_URL:"xlinkHref"===e?"image"===n?k.MEDIA_URL:"a"===n?k.URL:k.RESOURCE_URL:"form"===n&&"action"===e||"base"===n&&"href"===e||"link"===n&&"href"===e?k.RESOURCE_URL:"a"!==n||"href"!==e&&"ngHref"!==e?void 0:k.URL}(t,i),s=!o,u=c[i]||o,l=n(r,s,a,u);if(l){if("multiple"===i&&"select"===rt(t))throw dn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",wt(t));if(p.test(i))throw dn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var s=o.$$observers||(o.$$observers=Ft()),c=o[i];c!==r&&(l=c&&n(c,!0,a,u),r=c),l&&(o[i]=l(t),(s[i]||(s[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||t).$watch(l,function(t,e){"class"===i&&t!==e?o.$updateClass(t,e):o.$set(i,t)}))}}}})}}function Ot(e,n,r){var i,o,s=n[0],u=n.length,c=s.parentNode;if(e)for(i=0,o=e.length;i<o;i++)if(e[i]===s){e[i++]=r;for(var l=i,f=l+u-1,h=e.length;l<h;l++,f++)f<h?e[l]=e[f]:delete e[l];e.length-=u-1,e.context===s&&(e.context=r);break}c&&c.replaceChild(r,s);var p=t.document.createDocumentFragment();for(i=0;i<u;i++)p.appendChild(n[i]);for(a.hasData(s)&&(a.data(r,a.data(s)),a(s).off("$destroy")),a.cleanData(p.querySelectorAll("*")),i=1;i<u;i++)delete n[i];n[0]=r,n.length=1}function Rt(t,e){return R(function(){return t.apply(null,arguments)},t,e)}function Tt(t,e,n,r,i,o){try{t(e,n,r,i,o)}catch(t){d(t,wt(n))}}function Pt(t,e){if(y)throw dn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function At(t,e,r,i,o){var a,s=[],u={};function c(e,n,i){G(r.$onChanges)&&!st(n,i)&&(T||(t.$$postDigest(H),T=[]),a||(a={},T.push(l)),a[e]&&(i=a[e].previousValue),a[e]=new mn(i,n))}function l(){r.$onChanges(a),a=void 0}return S(i,function(i,a){var l,h,p,d,v,$=i.attrName,m=i.optional;switch(i.mode){case"@":m||f.call(e,$)||(Pt($,o.name),r[a]=e[$]=void 0),v=e.$observe($,function(t){if(q(t)||Z(t)){var e=r[a];c(a,t,e),r[a]=t}}),e.$$observers[$].$$scope=t,q(l=e[$])?r[a]=n(l)(t):Z(l)&&(r[a]=l),u[a]=new mn(vn,r[a]),s.push(v);break;case"=":if(!f.call(e,$)){if(m)break;Pt($,o.name),e[$]=void 0}if(m&&!e[$])break;h=x(e[$]),d=h.literal?ut:st,p=h.assign||function(){throw l=r[a]=h(t),dn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[$],$,o.name)},l=r[a]=h(t);var g=function(e){return d(e,r[a])||(d(e,l)?p(t,e=r[a]):r[a]=e),l=e};g.$stateful=!0,v=i.collection?t.$watchCollection(e[$],g):t.$watch(x(e[$],g),null,h.literal),s.push(v);break;case"<":if(!f.call(e,$)){if(m)break;Pt($,o.name),e[$]=void 0}if(m&&!e[$])break;var y=(h=x(e[$])).literal,b=r[a]=h(t);u[a]=new mn(vn,r[a]),v=t.$watch(h,function(t,e){if(e===t){if(e===b||y&&ut(e,b))return;e=b}c(a,t,e),r[a]=t}),s.push(v);break;case"&":if(m||f.call(e,$)||Pt($,o.name),(h=e.hasOwnProperty($)?x(e[$]):M)===M&&m)break;r[a]=function(e){return h(t,e)}}}),{initialChanges:u,removeWatches:s.length&&function(){for(var t=0,e=s.length;t<e;++t)s[t]()}}}}]}function mn(t,e){this.previousValue=t,this.currentValue=e}$n.$inject=["$provide","$$sanitizeUriProvider"],mn.prototype.isFirstChange=function(){return this.previousValue===vn};var gn=/^((?:x|data)[:\-_])/i,yn=/[:\-_]+(.)/g;function bn(t){return t.replace(gn,"").replace(yn,function(t,e,n){return n?e.toUpperCase():e})}function wn(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue t;n+=(n.length>0?" ":"")+a}return n}function En(t){var e=(t=a(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(n.nodeType===Bt||n.nodeType===Lt&&""===n.nodeValue.trim())&&v.call(t,e,1)}return t}var Sn=i("$controller"),xn=/^(\S+)(\s+as\s+([\w$]+))?$/;function _n(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Ut(e,"controller"),F(e)?R(t,e):t[e]=n},this.$get=["$injector",function(e){return function(r,i,o,a){var s,u,c,l;if(o=!0===o,a&&q(a)&&(l=a),q(r)){if(!(u=r.match(xn)))throw Sn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(c=u[1],l=l||u[3],!(r=t.hasOwnProperty(c)?t[c]:function(t,e,n){if(!e)return t;for(var r,i=e.split("."),o=t,a=i.length,s=0;s<a;s++)r=i[s],t&&(t=(o=t)[r]);return!n&&G(t)?pt(o,t):t}(i.$scope,c,!0)))throw Sn("ctrlreg","The controller with the name '{0}' is not registered.",c);Dt(r,c,!0)}if(o){var f=(z(r)?r[r.length-1]:r).prototype;return s=Object.create(f||null),l&&n(i,l,s,c||r.name),R(function(){var t=e.invoke(r,s,i,c);return t!==s&&(F(t)||G(t))&&(s=t,l&&n(i,l,s,c||r.name)),s},{instance:s,identifier:l})}return s=e.instantiate(r,i,c),l&&n(i,l,s,c||r.name),s};function n(t,e,n,r){if(!t||!F(t.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,e);t.$scope[e]=n}}]}function Cn(){this.$get=["$window",function(t){return a(t.document)}]}function kn(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],r=n&&n.hidden;function i(){r=n.hidden}return t.on("visibilitychange",i),e.$on("$destroy",function(){t.off("visibilitychange",i)}),function(){return r}}]}function On(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var Rn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof a&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Tn="application/json",Pn={"Content-Type":Tn+";charset=utf-8"},An=/^\[|^\{(?!\{)/,jn={"[":/]$/,"{":/}$/},Mn=/^\)]\}',?\n/,Vn=i("$http");function In(t){return F(t)?B(t)?t.toISOString():vt(t):t}function Dn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return x(t,function(t,n){null===t||U(t)||G(t)||(z(t)?S(t,function(t){e.push(Ct(n)+"="+Ct(In(t)))}):e.push(Ct(n)+"="+Ct(In(t))))}),e.join("&")}}}function Un(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,r,i){z(n)?S(n,function(e,n){t(e,r+"["+(F(e)?n:"")+"]")}):F(n)&&!B(n)?x(n,function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))}):(G(n)&&(n=n()),e.push(Ct(r)+"="+(null==n?"":Ct(In(n)))))}(t,"",!0),e.join("&")}}}function Nn(t,e){if(q(t)){var n=t.replace(Mn,"").trim();if(n){var r=e("Content-Type"),i=r&&0===r.indexOf(Tn);if(i||(a=(o=n).match(An))&&jn[a[0]].test(o))try{t=$t(n)}catch(e){if(!i)return t;throw Vn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}var o,a;return t}function Fn(t){var e,n=Ft();function r(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return q(t)?S(t.split("\n"),function(t){e=t.indexOf(":"),r(h(tt(t.substr(0,e))),tt(t.substr(e+1)))}):F(t)&&S(t,function(t,e){r(h(e),tt(t))}),n}function Hn(t){var e;return function(n){if(e||(e=Fn(t)),n){var r=e[h(n)];return void 0===r&&(r=null),r}return e}}function qn(t,e,n,r){return G(r)?r(t,e,n):(S(r,function(r){t=r(t,e,n)}),t)}function Ln(t){return 200<=t&&t<300}function Bn(){var t=this.defaults={transformResponse:[Nn],transformRequest:[function(t){return!F(t)||(e=t,"[object File]"===m.call(e))||function(t){return"[object Blob]"===m.call(t)}(t)||function(t){return"[object FormData]"===m.call(t)}(t)?t:vt(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Gt(Pn),put:Gt(Pn),patch:Gt(Pn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return N(t)?(e=!!t,this):e};var n=this.interceptors=[],r=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,a,s,u,c,l,f,d){var v=u("$http");t.paramSerializer=q(t.paramSerializer)?f.get(t.paramSerializer):t.paramSerializer;var $=[];S(n,function(t){$.unshift(q(t)?f.get(t):f.invoke(t))});var m,g=(m=[si].concat(r.map(ui)),function(t){var e=ui(t);return m.some(ci.bind(null,e))});function y(n){if(!F(n))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!q(d.valueOf(n.url)))throw i("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var r=R({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);r.headers=function(e){var n,r,i,o=t.headers,a=R({},e.headers);o=R({},o.common,o[h(e.method)]);t:for(n in o){for(i in r=h(n),a)if(h(i)===r)continue t;a[n]=o[n]}return function(t,e){var n,r={};return S(t,function(t,i){G(t)?null!=(n=t(e))&&(r[i]=n):r[i]=t}),r}(a,Gt(e))}(n),r.method=p(r.method),r.paramSerializer=q(r.paramSerializer)?f.get(r.paramSerializer):r.paramSerializer,o.$$incOutstandingRequestCount();var u=[],m=[],b=l.resolve(r);return S($,function(t){(t.request||t.requestError)&&u.unshift(t.request,t.requestError),(t.response||t.responseError)&&m.push(t.response,t.responseError)}),b=(b=w(b=(b=w(b,u)).then(function(n){var r=n.headers,i=qn(n.data,Hn(r),void 0,n.transformRequest);U(i)&&S(r,function(t,e){"content-type"===h(e)&&delete r[e]});U(n.withCredentials)&&!U(t.withCredentials)&&(n.withCredentials=t.withCredentials);return function(n,r){var i,o,u=l.defer(),f=u.promise,p=n.headers,$="jsonp"===h(n.method),m=n.url;$?m=d.getTrustedResourceUrl(m):q(m)||(m=d.valueOf(m));m=function(t,e){return e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}(m,n.paramSerializer(n.params)),$&&(m=function(t,e){var n=t.split("?");if(n.length>2)throw Vn("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return S(St(n[1]),function(n,r){if("JSON_CALLBACK"===n)throw Vn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(r===e)throw Vn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)}),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(m,n.jsonpCallbackParam));y.pendingRequests.push(n),f.then(_,_),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(i=F(n.cache)?n.cache:F(t.cache)?t.cache:v);i&&(N(o=i.get(m))?Q(o)?o.then(x,x):z(o)?E(o[1],o[0],Gt(o[2]),o[3],o[4]):E(o,200,{},"OK","complete"):i.put(m,f));if(U(o)){var b=g(n.url)?s()[n.xsrfCookieName||t.xsrfCookieName]:void 0;b&&(p[n.xsrfHeaderName||t.xsrfHeaderName]=b),a(n.method,m,r,function(t,n,r,o,a){i&&(Ln(t)?i.put(m,[t,n,Fn(r),o,a]):i.remove(m));function s(){E(n,t,r,o,a)}e?c.$applyAsync(s):(s(),c.$$phase||c.$apply())},p,n.timeout,n.withCredentials,n.responseType,w(n.eventHandlers),w(n.uploadEventHandlers))}return f;function w(t){if(t){var n={};return S(t,function(t,r){n[r]=function(n){function r(){t(n)}e?c.$applyAsync(r):c.$$phase?r():c.$apply(r)}}),n}}function E(t,e,r,i,o){(Ln(e=e>=-1?e:0)?u.resolve:u.reject)({data:t,status:e,headers:Hn(r),config:n,statusText:i,xhrStatus:o})}function x(t){E(t.data,t.status,Gt(t.headers()),t.statusText,t.xhrStatus)}function _(){var t=y.pendingRequests.indexOf(n);-1!==t&&y.pendingRequests.splice(t,1)}}(n,i).then(E,E)}),m)).finally(function(){o.$$completeOutstandingRequest(M)});function w(t,e){for(var n=0,r=e.length;n<r;){var i=e[n++],o=e[n++];t=t.then(i,o)}return e.length=0,t}function E(t){var e=R({},t);return e.data=qn(t.data,t.headers,t.status,r.transformResponse),Ln(t.status)?e:l.reject(e)}}return y.pendingRequests=[],function(t){S(arguments,function(t){y[t]=function(e,n){return y(R({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){S(arguments,function(t){y[t]=function(e,n,r){return y(R({},r||{},{method:t,url:e,data:n}))}})}("post","put","patch"),y.defaults=t,y}]}function zn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Wn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,r){return function(t,e,n,r,i){return function(o,a,s,u,c,l,f,p,d,v){if(a=a||t.url(),"jsonp"===h(o))var $=r.createCallback(a),m=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=t,o.async=!0,a=function(t){o.removeEventListener("load",a),o.removeEventListener("error",a),i.body.removeChild(o),o=null;var s=-1,u="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),u=t.type,s="error"===t.type?404:200),n&&n(s,u)},o.addEventListener("load",a),o.addEventListener("error",a),i.body.appendChild(o),a}(a,$,function(t,e){var n=200===t&&r.getResponse($);E(u,t,n,"",e,"complete"),r.removeCallback($)});else{var g=e(o,a),y=!1;g.open(o,a,!0),S(c,function(t,e){N(t)&&g.setRequestHeader(e,t)}),g.onload=function(){var t=g.statusText||"",e="response"in g?g.response:g.responseText,n=1223===g.status?204:g.status;0===n&&(n=e?200:"file"===ui(a).protocol?404:0),E(u,n,e,g.getAllResponseHeaders(),t,"complete")};if(g.onerror=function(){E(u,-1,null,null,"","error")},g.ontimeout=function(){E(u,-1,null,null,"","timeout")},g.onabort=function(){E(u,-1,null,null,"",y?"timeout":"abort")},S(d,function(t,e){g.addEventListener(e,t)}),S(v,function(t,e){g.upload.addEventListener(e,t)}),f&&(g.withCredentials=!0),p)try{g.responseType=p}catch(t){if("json"!==p)throw t}g.send(U(s)?null:s)}if(l>0)var b=n(function(){w("timeout")},l);else Q(l)&&l.then(function(){w(N(l.$$timeoutId)?"timeout":"abort")});function w(t){y="timeout"===t,m&&m(),g&&g.abort()}function E(t,e,r,i,o,a){N(b)&&n.cancel(b),m=g=null,t(e,r,i,o,a)}}}(t,r,t.defer,e,n[0])}]}var Gn=b.$interpolateMinErr=i("$interpolate");function Jn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var o=t.length,a=e.length,s=new RegExp(t.replace(/./g,c),"g"),u=new RegExp(e.replace(/./g,c),"g");function c(t){return"\\\\\\"+t}function l(n){return n.replace(s,t).replace(u,e)}function f(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function h(s,u,c,h){var p=c===i.URL||c===i.MEDIA_URL;if(!s.length||-1===s.indexOf(t)){if(u&&!p)return;var d=l(s);p&&(d=i.getTrusted(c,d));var v=I(d);return v.exp=s,v.expressions=[],v.$$watchDelegate=f,v}h=!!h;for(var $,m,g,y,b,w=0,E=[],S=s.length,x=[],_=[];w<S;){if(-1===($=s.indexOf(t,w))||-1===(m=s.indexOf(e,$+o))){w!==S&&x.push(l(s.substring(w)));break}w!==$&&x.push(l(s.substring(w,$))),y=s.substring($+o,m),E.push(y),w=m+a,_.push(x.length),x.push("")}b=1===x.length&&1===_.length;var C=p&&b?void 0:function(t){try{return t=c&&!p?i.getTrusted(c,t):i.valueOf(t),h&&!N(t)?t:Ht(t)}catch(t){r(Gn.interr(s,t))}};if(g=E.map(function(t){return n(t,C)}),!u||E.length){var k=function(t){for(var e=0,n=E.length;e<n;e++){if(h&&U(t[e]))return;x[_[e]]=t[e]}return p?i.getTrusted(c,b?x[0]:x.join("")):(c&&x.length>1&&Gn.throwNoconcat(s),x.join(""))};return R(function(t){var e=0,n=E.length,i=new Array(n);try{for(;e<n;e++)i[e]=g[e](t);return k(i)}catch(t){r(Gn.interr(s,t))}},{exp:s,expressions:E,$$watchDelegate:function(t,e){var n;return t.$watchGroup(g,function(r,i){var o=k(r);e.call(this,o,r!==i?n:o,t),n=o})}})}}return h.startSymbol=function(){return t},h.endSymbol=function(){return e},h}]}Gn.throwNoconcat=function(t){throw Gn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Gn.interr=function(t,e){return Gn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Kn=i("$interval");function Yn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,r,i){var o={};function a(a,s,u,c){var l=arguments.length>4,f=l?ht(arguments,4):[],h=e.setInterval,p=e.clearInterval,d=0,v=N(c)&&!c,$=(v?r:n).defer(),m=$.promise;return u=N(u)?u:0,m.$$intervalId=h(function(){v?i.defer(g):t.$evalAsync(g),$.notify(d++),u>0&&d>=u&&($.resolve(d),p(m.$$intervalId),delete o[m.$$intervalId]),v||t.$apply()},s),o[m.$$intervalId]=$,m;function g(){l?a.apply(null,f):a(d)}}return a.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw Kn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!o.hasOwnProperty(t.$$intervalId))return!1;var n=t.$$intervalId,r=o[n];return qr(r.promise),r.reject("canceled"),e.clearInterval(n),delete o[n],!0},a}]}var Zn=function(){this.$get=function(){var t=b.callbacks,e={};return{createCallback:function(n){var r="_"+(t.$$counter++).toString(36),i="angular.callbacks."+r,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(r);return e[i]=t[r]=o,i},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var r=e[n];delete t[r.id],delete e[n]}}}},Qn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Xn={http:80,https:443,ftp:21},tr=i("$location");function er(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=_t(e[n].replace(/%2F/g,"/"));return e.join("/")}function nr(t,e){var n=ui(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=P(n.port)||Xn[n.protocol]||null}var rr=/^\s*[\\/]{2,}/;function ir(t,e,n){if(rr.test(t))throw tr("badpath",'Invalid url "{0}".',t);var r="/"!==t.charAt(0);r&&(t="/"+t);var i=ui(t),o=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;e.$$path=function(t,e){for(var n=t.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),e&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(o,n),e.$$search=St(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function or(t,e){return t.slice(0,e.length)===e}function ar(t,e){if(or(e,t))return e.substr(t.length)}function sr(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function ur(t){return t.replace(/(#.+)|#$/,"$1")}function cr(t,e,n){this.$$html5=!0,n=n||"",nr(t,this),this.$$parse=function(t){var n=ar(e,t);if(!q(n))throw tr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);ir(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=xt(this.$$search),n=this.$$hash?"#"+_t(this.$$hash):"";this.$$url=er(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(N(o=ar(t,r))?(a=o,s=n&&N(o=ar(n,o))?e+(ar("/",o)||o):t+a):N(o=ar(e,r))?s=e+o:e===r+"/"&&(s=e),s&&this.$$parse(s),!!s);var o,a,s}}function lr(t,e,n){nr(t,this),this.$$parse=function(r){var i,o=ar(t,r)||ar(e,r);U(o)||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",U(o)&&(t=r,this.replace())):U(i=ar(n,o))&&(i=o),ir(i,this,!1),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;or(e,n)&&(e=e.replace(n,""));if(i.exec(e))return t;return(r=i.exec(t))?r[1]:t}(this.$$path,i,t),this.$$compose()},this.$$compose=function(){var e=xt(this.$$search),r=this.$$hash?"#"+_t(this.$$hash):"";this.$$url=er(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+(this.$$url?n+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,n){return sr(t)===sr(e)&&(this.$$parse(e),!0)}}function fr(t,e,n){this.$$html5=!0,lr.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(t===sr(r)?o=r:(a=ar(e,r))?o=t+n+a:e===r+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,a},this.$$compose=function(){var e=xt(this.$$search),r=this.$$hash?"#"+_t(this.$$hash):"";this.$$url=er(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+n+this.$$url,this.$$urlUpdatedByLocation=!0}}var hr={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:pr("$$absUrl"),url:function(t){if(U(t))return this.$$url;var e=Qn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:pr("$$protocol"),host:pr("$$host"),port:pr("$$port"),path:dr("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(q(t)||L(t))t=t.toString(),this.$$search=St(t);else{if(!F(t))throw tr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");S(t=at(t,{}),function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:U(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:dr("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function pr(t){return function(){return this[t]}}function dr(t,e){return function(n){return U(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function vr(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return N(e)?(t=e,this):t},this.html5Mode=function(t){return Z(t)?(e.enabled=t,this):F(t)?(Z(t.enabled)&&(e.enabled=t.enabled),Z(t.requireBase)&&(e.requireBase=t.requireBase),(Z(t.rewriteLinks)||q(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,s){var u,c,l,f,h=r.baseHref(),p=r.url();if(e.enabled){if(!h&&e.requireBase)throw tr("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=(f=p).substring(0,f.indexOf("/",f.indexOf("//")+2))+(h||"/"),c=i.history?cr:fr}else l=sr(p),c=lr;var d=function(t){return t.substr(0,sr(t).lastIndexOf("/")+1)}(l);(u=new c(l,d,"#"+t)).$$parseLinkUrl(p,p),u.$$state=r.state();var v=/^\s*(javascript|mailto):/i;function $(t,e,n){var i=u.url(),o=u.$$state;try{r.url(t,e,n),u.$$state=r.state()}catch(t){throw u.url(i),u.$$state=o,t}}o.on("click",function(t){var i=e.rewriteLinks;if(i&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var s=a(t.target);"a"!==rt(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!q(i)||!U(s.attr(i))){var c=s.prop("href"),l=s.attr("href")||s.attr("xlink:href");F(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=ui(c.animVal).href),v.test(c)||!c||s.attr("target")||t.isDefaultPrevented()||u.$$parseLinkUrl(c,l)&&(t.preventDefault(),u.absUrl()!==r.url()&&n.$apply())}}}),ur(u.absUrl())!==ur(p)&&r.url(u.absUrl(),!0);var m=!0;return r.onUrlChange(function(t,e){or(t,d)?(n.$evalAsync(function(){var r,i=u.absUrl(),o=u.$$state;t=ur(t),u.$$parse(t),u.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,u.absUrl()===t&&(r?(u.$$parse(i),u.$$state=o,$(i,!1,o)):(m=!1,g(i,o)))}),n.$$phase||n.$digest()):s.location.href=t}),n.$watch(function(){if(m||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=!1;var t=ur(r.url()),e=ur(u.absUrl()),o=r.state(),a=u.$$replace,s=t!==e||u.$$html5&&i.history&&o!==u.$$state;(m||s)&&(m=!1,n.$evalAsync(function(){var e=u.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,u.$$state,o).defaultPrevented;u.absUrl()===e&&(r?(u.$$parse(t),u.$$state=o):(s&&$(e,a,o===u.$$state?null:u.$$state),g(t,o)))}))}u.$$replace=!1}),u;function g(t,e){n.$broadcast("$locationChangeSuccess",u.absUrl(),t,u.$$state,e)}}]}function $r(){var t=!0,e=this;this.debugEnabled=function(e){return N(e)?(t=e,this):t},this.$get=["$window",function(n){var r,i=o||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:(r=a("debug"),function(){t&&r.apply(e,arguments)})};function a(t){var e=n.console||{},r=e[t]||e.log||M;return function(){var t=[];return S(arguments,function(e){t.push(function(t){return W(t)&&(t.stack&&i?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}(e))}),Function.prototype.apply.call(r,e,t)}}}]}S([fr,lr,cr],function(t){t.prototype=Object.create(hr),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==cr||!this.$$html5)throw tr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=U(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var mr=i("$parse"),gr={}.constructor.prototype.valueOf;function yr(t){return t+""}var br=Ft();S("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){br[t]=!0});var wr={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Er=function(t){this.options=t};Er.prototype={constructor:Er,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=br[e],o=br[n],a=br[r];if(i||o||a){var s=a?r:o?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||""===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=N(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw mr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=h(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=wr[o]||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var Sr=function(t,e){this.lexer=t,this.options=e};function xr(t,e){return void 0!==t?t:e}function _r(t,e){return void 0===t?e:void 0===e?t:t+e}Sr.Program="Program",Sr.ExpressionStatement="ExpressionStatement",Sr.AssignmentExpression="AssignmentExpression",Sr.ConditionalExpression="ConditionalExpression",Sr.LogicalExpression="LogicalExpression",Sr.BinaryExpression="BinaryExpression",Sr.UnaryExpression="UnaryExpression",Sr.CallExpression="CallExpression",Sr.MemberExpression="MemberExpression",Sr.Identifier="Identifier",Sr.Literal="Literal",Sr.ArrayExpression="ArrayExpression",Sr.Property="Property",Sr.ObjectExpression="ObjectExpression",Sr.ThisExpression="ThisExpression",Sr.LocalsExpression="LocalsExpression",Sr.NGValueParameter="NGValueParameter",Sr.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Sr.Program,body:t}},expressionStatement:function(){return{type:Sr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Tr(t))throw mr("lval","Trying to assign a value to a non l-value");t={type:Sr.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Sr.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Sr.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Sr.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Sr.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Sr.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Sr.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Sr.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Sr.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=at(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Sr.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:Sr.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Sr.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Sr.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:Sr.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Sr.Identifier,name:t.text}},constant:function(){return{type:Sr.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Sr.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Sr.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Sr.ObjectExpression,properties:e}},throwError:function(t,e){throw mr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw mr("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw mr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===r||a===i||!e&&!n&&!r&&!i)return o}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:Sr.ThisExpression},$locals:{type:Sr.LocalsExpression}}};var Cr=1,kr=2;function Or(t,e,n){var r,i,o,a=t.isPure=function(t,e){switch(t.type){case Sr.MemberExpression:if(t.computed)return!1;break;case Sr.UnaryExpression:return Cr;case Sr.BinaryExpression:return"+"!==t.operator&&Cr;case Sr.CallExpression:return!1}return void 0===e?kr:e}(t,n);switch(t.type){case Sr.Program:r=!0,S(t.body,function(t){Or(t.expression,e,a),r=r&&t.expression.constant}),t.constant=r;break;case Sr.Literal:t.constant=!0,t.toWatch=[];break;case Sr.UnaryExpression:Or(t.argument,e,a),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Sr.BinaryExpression:Or(t.left,e,a),Or(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Sr.LogicalExpression:Or(t.left,e,a),Or(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Sr.ConditionalExpression:Or(t.test,e,a),Or(t.alternate,e,a),Or(t.consequent,e,a),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Sr.Identifier:t.constant=!1,t.toWatch=[t];break;case Sr.MemberExpression:Or(t.object,e,a),t.computed&&Or(t.property,e,a),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case Sr.CallExpression:o=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),r=o,i=[],S(t.arguments,function(t){Or(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=o?i:[t];break;case Sr.AssignmentExpression:Or(t.left,e,a),Or(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Sr.ArrayExpression:r=!0,i=[],S(t.elements,function(t){Or(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=i;break;case Sr.ObjectExpression:r=!0,i=[],S(t.properties,function(t){Or(t.value,e,a),r=r&&t.value.constant,i.push.apply(i,t.value.toWatch),t.computed&&(Or(t.key,e,!1),r=r&&t.key.constant,i.push.apply(i,t.key.toWatch))}),t.constant=r,t.toWatch=i;break;case Sr.ThisExpression:case Sr.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Rr(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function Tr(t){return t.type===Sr.Identifier||t.type===Sr.MemberExpression}function Pr(t){if(1===t.body.length&&Tr(t.body[0].expression))return{type:Sr.AssignmentExpression,left:t.body[0].expression,right:{type:Sr.NGValueParameter},operator:"="}}function Ar(t){this.$filter=t}function jr(t){this.$filter=t}function Mr(t,e,n){this.ast=new Sr(t,n),this.astCompiler=n.csp?new jr(e):new Ar(e)}function Vr(t){return G(t.valueOf)?t.valueOf():gr.call(t)}function Ir(){var t,e,n=Ft(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,r){return t=n,e=r,this},this.$get=["$filter",function(i){var o={csp:ct().noUnsafeEval,literals:at(r),isIdentifierStart:G(t)&&t,isIdentifierContinue:G(e)&&e};return a.$$getAst=function(t){return new Mr(new Er(o),i,o).getAst(t).ast},a;function a(t,e){var r,a;switch(typeof t){case"string":if(t=t.trim(),!(r=n[a=t]))r=new Mr(new Er(o),i,o).parse(t),n[a]=h(r);return p(r,e);case"function":return p(t,e);default:return p(M,e)}}function s(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Vr(t))&&!n)&&(t===e||t!=t&&e!=e)}function u(t,e,n,r,i){var o,a=r.inputs;if(1===a.length){var u=s;return a=a[0],t.$watch(function(t){var e=a(t);return s(e,u,a.isPure)||(o=r(t,void 0,void 0,[e]),u=e&&Vr(e)),o},e,n,i)}for(var c=[],l=[],f=0,h=a.length;f<h;f++)c[f]=s,l[f]=null;return t.$watch(function(t){for(var e=!1,n=0,i=a.length;n<i;n++){var u=a[n](t);(e||(e=!s(u,c[n],a[n].isPure)))&&(l[n]=u,c[n]=u&&Vr(u))}return e&&(o=r(t,void 0,void 0,l)),o},e,n,i)}function c(t,e,n,r,i){var o,a,s=r.literal?l:N,u=r.$$intercepted||r,c=r.$$interceptor||V,f=r.inputs&&!u.inputs;return d.literal=r.literal,d.constant=r.constant,d.inputs=r.inputs,h(d),o=t.$watch(d,e,n,i);function p(){s(a)&&o()}function d(t,e,n,r){return a=f&&r?r[0]:u(t,e,n,r),s(a)&&t.$$postDigest(p),c(a)}}function l(t){var e=!0;return S(t,function(t){N(t)||(e=!1)}),e}function f(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function h(t){return t.constant?t.$$watchDelegate=f:t.oneTime?t.$$watchDelegate=c:t.inputs&&(t.$$watchDelegate=u),t}function p(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function n(n){return e(t(n))}return n.$stateful=t.$stateful||e.$stateful,n.$$pure=t.$$pure&&e.$$pure,n}(t.$$interceptor,e),t=t.$$intercepted);var n=!1,r=function(r,i,o,a){var s=n&&a?a[0]:t(r,i,o,a);return e(s)};return r.$$intercepted=t,r.$$interceptor=e,r.literal=t.literal,r.oneTime=t.oneTime,r.constant=t.constant,e.$stateful||(n=!t.inputs,r.inputs=t.inputs?t.inputs:[t],e.$$pure||(r.inputs=r.inputs.map(function(t){return t.isPure===kr?function(e){return t(e)}:t}))),h(r)}}]}function Dr(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return Nr(function(t){e.$evalAsync(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return N(e)?(t=e,this):t}}function Ur(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return Nr(function(t){e.defer(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return N(e)?(t=e,this):t}}function Nr(t,e,n){var r=i("$q",TypeError),o=0,a=[];function s(){return new function(){var t=this.promise=new u;this.resolve=function(e){f(t,e)},this.reject=function(e){h(t,e)},this.notify=function(e){d(t,e)}}}function u(){this.$$state={status:0}}function c(){for(;!o&&a.length;){var t=a.shift();if(!Fr(t)){Hr(t);var n="Possibly unhandled rejection: "+Jt(t.value);W(t.value)?e(t.value,n):e(n)}}}function l(r){!n||r.pending||2!==r.status||Fr(r)||(0===o&&0===a.length&&t(c),a.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++o,t(function(){!function(r){var i,a,s;s=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var u=0,l=s.length;u<l;++u){Hr(r),a=s[u][0],i=s[u][r.status];try{G(i)?f(a,i(r.value)):1===r.status?f(a,r.value):h(a,r.value)}catch(t){h(a,t),t&&!0===t.$$passToExceptionHandler&&e(t)}}}finally{--o,n&&0===o&&t(c)}}(r)}))}function f(t,e){t.$$state.status||(e===t?p(t,r("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):function t(e,n){var r;var i=!1;try{(F(n)||G(n))&&(r=n.then),G(r)?(e.$$state.status=-1,r.call(n,function o(t){if(i)return;i=!0,function t(e,n){var r;var i=!1;try{(F(n)||G(n))&&(r=n.then),G(r)?(e.$$state.status=-1,r.call(n,o,a,function(t){d(e,t)})):(e.$$state.value=n,e.$$state.status=1,l(e.$$state))}catch(t){a(t)}function o(n){i||(i=!0,t(e,n))}function a(t){i||(i=!0,p(e,t))}}(e,t)},a,function(t){d(e,t)})):(e.$$state.value=n,e.$$state.status=1,l(e.$$state))}catch(t){a(t)}function o(n){i||(i=!0,t(e,n))}function a(t){i||(i=!0,p(e,t))}}(t,e))}function h(t,e){t.$$state.status||p(t,e)}function p(t,e){t.$$state.value=e,t.$$state.status=2,l(t.$$state)}function d(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&t(function(){for(var t,n,o=0,a=i.length;o<a;o++){n=i[o][0],t=i[o][3];try{d(n,G(t)?t(r):r)}catch(t){e(t)}}})}function v(t){var e=new u;return h(e,t),e}function $(t,e,n){var r=null;try{G(n)&&(r=n())}catch(t){return v(t)}return Q(r)?r.then(function(){return e(t)},v):e(t)}function m(t,e,n,r){var i=new u;return f(i,t),i.then(e,n,r)}R(u.prototype,{then:function(t,e,n){if(U(t)&&U(e)&&U(n))return this;var r=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&l(this.$$state),r},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return $(e,g,t)},function(e){return $(e,v,t)},e)}});var g=m;function y(t){if(!G(t))throw r("norslvr","Expected resolverFn, got '{0}'",t);var e=new u;return t(function(t){f(e,t)},function(t){h(e,t)}),e}return y.prototype=u.prototype,y.defer=s,y.reject=v,y.when=m,y.resolve=g,y.all=function(t){var e=new u,n=0,r=z(t)?[]:{};return S(t,function(t,i){n++,m(t).then(function(t){r[i]=t,--n||f(e,r)},function(t){h(e,t)})}),0===n&&f(e,r),e},y.race=function(t){var e=s();return S(t,function(t){m(t).then(e.resolve,e.reject)}),e.promise},y}function Fr(t){return!!t.pur}function Hr(t){t.pur=!0}function qr(t){Hr(t.$$state)}function Lr(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function Br(){var t=10,e=i("$rootScope"),n=null,r=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(i,a,s){function u(t){t.currentScope.$$destroyed=!0}function c(){this.$id=C(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}c.prototype={constructor:c,$new:function(t,e){var n;return e=e||this,t?(n=new c).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=C(),this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",u),n},$watch:function(t,e,r,i){var o=a(t),s=G(e)?e:M;if(o.$$watchDelegate)return o.$$watchDelegate(this,s,r,o,t);var u=this,c=u.$$watchers,l={fn:s,last:b,get:o,exp:i||t,eq:!!r};return n=null,c||((c=u.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(l),c.$$digestWatchIndex++,g(this,1),function(){var t=ot(c,l);t>=0&&(g(u,-1),t<c.$$digestWatchIndex&&c.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),r=new Array(t.length),i=[],o=this,a=!1,s=!0;if(!t.length){var u=!0;return o.$evalAsync(function(){u&&e(r,r,o)}),function(){u=!1}}if(1===t.length)return this.$watch(t[0],function(t,i,o){r[0]=t,n[0]=i,e(r,t===i?r:n,o)});function c(){a=!1;try{s?(s=!1,e(r,r,o)):e(r,n,o)}finally{for(var i=0;i<t.length;i++)n[i]=r[i]}}return S(t,function(t,e){var n=o.$watch(t,function(t){r[e]=t,a||(a=!0,o.$evalAsync(c))});i.push(n)}),function(){for(;i.length;)i.shift()()}},$watchCollection:function(t,e){v.$$pure=a(t).literal,v.$stateful=!v.$$pure;var n,r,i,o=this,s=e.length>1,u=0,c=a(t,v),l=[],h={},p=!0,d=0;function v(t){var e,i,o,a;if(!U(n=t)){if(F(n))if(E(n)){r!==l&&(d=(r=l).length=0,u++),e=n.length,d!==e&&(u++,r.length=d=e);for(var s=0;s<e;s++)a=r[s],o=n[s],a!=a&&o!=o||a===o||(u++,r[s]=o)}else{for(i in r!==h&&(r=h={},d=0,u++),e=0,n)f.call(n,i)&&(e++,o=n[i],a=r[i],i in r?a!=a&&o!=o||a===o||(u++,r[i]=o):(d++,r[i]=o,u++));if(d>e)for(i in u++,r)f.call(n,i)||(d--,delete r[i])}else r!==n&&(r=n,u++);return u}}return this.$watch(c,function(){if(p?(p=!1,e(n,n,o)):e(n,i,o),s)if(F(n))if(E(n)){i=new Array(n.length);for(var t=0;t<n.length;t++)i[t]=n[t]}else for(var r in i={},n)f.call(n,r)&&(i[r]=n[r]);else i=n})},$digest:function(){var o,a,u,c,f,d,g,y,E,S=t,x=h.length?l:this,_=[];$("$digest"),s.$$checkUrlChange(),this===l&&null!==r&&(s.defer.cancel(r),w()),n=null;do{f=!1,g=x;for(var C=0;C<h.length;C++){try{(0,(E=h[C]).fn)(E.scope,E.locals)}catch(t){i(t)}n=null}h.length=0;t:do{if(c=!g.$$suspended&&g.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(o=c[c.$$digestWatchIndex])if((a=(0,o.get)(g))===(u=o.last)||(o.eq?ut(a,u):A(a)&&A(u))){if(o===n){f=!1;break t}}else f=!0,n=o,o.last=o.eq?at(a,null):a,(0,o.fn)(a,u===b?a:u,g),S<5&&(_[y=4-S]||(_[y]=[]),_[y].push({msg:G(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:a,oldVal:u}))}catch(t){i(t)}if(!(d=!g.$$suspended&&g.$$watchersCount&&g.$$childHead||g!==x&&g.$$nextSibling))for(;g!==x&&!(d=g.$$nextSibling);)g=g.$parent}while(g=d);if((f||h.length)&&!S--)throw m(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,_)}while(f||h.length);for(m();v<p.length;)try{p[v++]()}catch(t){i(t)}p.length=v=0,s.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===l&&s.$$applicationDestroyed(),g(this,-this.$$watchersCount),this.$$listenerCount)y(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=M,this.$on=this.$watch=this.$watchGroup=function(){return M},this.$$listeners={},this.$$nextSibling=null,function t(e){9===o&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return a(t)(this,e)},$evalAsync:function(t,e){l.$$phase||h.length||s.defer(function(){h.length&&l.$digest()}),h.push({scope:this,fn:a(t),locals:e})},$$postDigest:function(t){p.push(t)},$apply:function(t){try{$("$apply");try{return this.$eval(t)}finally{m()}}catch(t){i(t)}finally{try{l.$digest()}catch(t){throw i(t),t}}},$applyAsync:function(t){var e=this;t&&d.push(function(){e.$eval(t)}),t=a(t),null===r&&(r=s.defer(function(){l.$apply(w)}))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do{r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(delete n[r],y(i,1,t))}},$emit:function(t,e){var n,r,o,a=[],s=this,u=!1,c={name:t,targetScope:s,stopPropagation:function(){u=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=ft([c],arguments,1);do{for(n=s.$$listeners[t]||a,c.currentScope=s,r=0,o=n.length;r<o;r++)if(n[r])try{n[r].apply(null,l)}catch(t){i(t)}else n.splice(r,1),r--,o--;if(u)break;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(t,e){var n=this,r=this,o={name:t,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return o;for(var a,s,u,c=ft([o],arguments,1);n=r;){for(o.currentScope=n,s=0,u=(a=n.$$listeners[t]||[]).length;s<u;s++)if(a[s])try{a[s].apply(null,c)}catch(t){i(t)}else a.splice(s,1),s--,u--;if(!(r=n.$$listenerCount[t]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(r=n.$$nextSibling);)n=n.$parent}return o.currentScope=null,o}};var l=new c,h=l.$$asyncQueue=[],p=l.$$postDigestQueue=[],d=l.$$applyAsyncQueue=[],v=0;return l;function $(t){if(l.$$phase)throw e("inprog","{0} already in progress",l.$$phase);l.$$phase=t}function m(){l.$$phase=null}function g(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function y(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function b(){}function w(){for(;d.length;)try{d.shift()()}catch(t){i(t)}r=null}}]}function zr(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return N(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return N(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i=r?e:t,o=ui(n&&n.trim()).href;return""===o||o.match(i)?n:"unsafe:"+o}}}Ar.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Or(t,e.$filter);var n,r="";if(this.stage="assign",n=Pr(t)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var o=Rr(t.body);e.stage="inputs",S(o,function(t,n){var r="fn"+n;e.state[r]={vars:[],body:[],own:{}},e.state.computing=r;var i=e.nextId();e.recurse(t,i),e.return_(i),e.state.inputs.push({name:r,isPure:t.isPure}),t.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(t);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,yr,xr,_r);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return S(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(t){return t.name}).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return S(this.state.filters,function(n,r){t.push(n+"=$filter("+e.escape(r)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,i,o){var a,s,u,c,l,f=this;if(r=r||M,!o&&N(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,i,!0));switch(t.type){case Sr.Program:S(t.body,function(e,n){f.recurse(e.expression,void 0,void 0,function(t){s=t}),n!==t.body.length-1?f.current().body.push(s,";"):f.return_(s)});break;case Sr.Literal:c=this.escape(t.value),this.assign(e,c),r(e||c);break;case Sr.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){s=t}),c=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,c),r(c);break;case Sr.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){s=t}),c="+"===t.operator?this.plus(a,s):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(s,0):"("+a+")"+t.operator+"("+s+")",this.assign(e,c),r(c);break;case Sr.LogicalExpression:e=e||this.nextId(),f.recurse(t.left,e),f.if_("&&"===t.operator?e:f.not(e),f.lazyRecurse(t.right,e)),r(e);break;case Sr.ConditionalExpression:e=e||this.nextId(),f.recurse(t.test,e),f.if_(e,f.lazyRecurse(t.alternate,e),f.lazyRecurse(t.consequent,e)),r(e);break;case Sr.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",t.name)),function(){f.if_("inputs"===f.stage||"s",function(){i&&1!==i&&f.if_(f.isNull(f.nonComputedMember("s",t.name)),f.lazyAssign(f.nonComputedMember("s",t.name),"{}")),f.assign(e,f.nonComputedMember("s",t.name))})},e&&f.lazyAssign(e,f.nonComputedMember("l",t.name))),r(e);break;case Sr.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),f.recurse(t.object,a,void 0,function(){f.if_(f.notNull(a),function(){t.computed?(s=f.nextId(),f.recurse(t.property,s),f.getStringValue(s),i&&1!==i&&f.if_(f.not(f.computedMember(a,s)),f.lazyAssign(f.computedMember(a,s),"{}")),c=f.computedMember(a,s),f.assign(e,c),n&&(n.computed=!0,n.name=s)):(i&&1!==i&&f.if_(f.isNull(f.nonComputedMember(a,t.property.name)),f.lazyAssign(f.nonComputedMember(a,t.property.name),"{}")),c=f.nonComputedMember(a,t.property.name),f.assign(e,c),n&&(n.computed=!1,n.name=t.property.name))},function(){f.assign(e,"undefined")}),r(e)},!!i);break;case Sr.CallExpression:e=e||this.nextId(),t.filter?(s=f.filter(t.callee.name),u=[],S(t.arguments,function(t){var e=f.nextId();f.recurse(t,e),u.push(e)}),c=s+"("+u.join(",")+")",f.assign(e,c),r(e)):(s=f.nextId(),a={},u=[],f.recurse(t.callee,s,a,function(){f.if_(f.notNull(s),function(){S(t.arguments,function(e){f.recurse(e,t.constant?void 0:f.nextId(),void 0,function(t){u.push(t)})}),c=a.name?f.member(a.context,a.name,a.computed)+"("+u.join(",")+")":s+"("+u.join(",")+")",f.assign(e,c)},function(){f.assign(e,"undefined")}),r(e)}));break;case Sr.AssignmentExpression:s=this.nextId(),a={},this.recurse(t.left,void 0,a,function(){f.if_(f.notNull(a.context),function(){f.recurse(t.right,s),c=f.member(a.context,a.name,a.computed)+t.operator+s,f.assign(e,c),r(e||c)})},1);break;case Sr.ArrayExpression:u=[],S(t.elements,function(e){f.recurse(e,t.constant?void 0:f.nextId(),void 0,function(t){u.push(t)})}),c="["+u.join(",")+"]",this.assign(e,c),r(e||c);break;case Sr.ObjectExpression:u=[],l=!1,S(t.properties,function(t){t.computed&&(l=!0)}),l?(e=e||this.nextId(),this.assign(e,"{}"),S(t.properties,function(t){t.computed?(a=f.nextId(),f.recurse(t.key,a)):a=t.key.type===Sr.Identifier?t.key.name:""+t.key.value,s=f.nextId(),f.recurse(t.value,s),f.assign(f.member(e,a,t.computed),s)})):(S(t.properties,function(e){f.recurse(e.value,t.constant?void 0:f.nextId(),void 0,function(t){u.push(f.escape(e.key.type===Sr.Identifier?e.key.name:""+e.key.value)+":"+t)})}),c="{"+u.join(",")+"}",this.assign(e,c)),r(e||c);break;case Sr.ThisExpression:this.assign(e,"s"),r(e||"s");break;case Sr.LocalsExpression:this.assign(e,"l"),r(e||"l");break;case Sr.NGValueParameter:this.assign(e,"v"),r(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,r,i,o){var a=this;return function(){a.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(q(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(L(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw mr("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},jr.prototype={compile:function(t){var e,n,r=this;Or(t,r.$filter),(e=Pr(t))&&(n=this.recurse(e));var i,o=Rr(t.body);o&&(i=[],S(o,function(t,e){var n=r.recurse(t);n.isPure=t.isPure,t.input=n,i.push(n),t.watchId=e}));var a=[];S(t.body,function(t){a.push(r.recurse(t.expression))});var s=0===t.body.length?M:1===t.body.length?a[0]:function(t,e){var n;return S(a,function(r){n=r(t,e)}),n};return n&&(s.assign=function(t,e,r){return n(t,r,e)}),i&&(s.inputs=i),s},recurse:function(t,e,n){var r,i,o,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Sr.Literal:return this.value(t.value,e);case Sr.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case Sr.BinaryExpression:case Sr.LogicalExpression:return r=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](r,i,e);case Sr.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Sr.Identifier:return a.identifier(t.name,e,n);case Sr.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(r,i,e,n):this.nonComputedMember(r,i,e,n);case Sr.CallExpression:return o=[],S(t.arguments,function(t){o.push(a.recurse(t))}),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,n,r,a){for(var s=[],u=0;u<o.length;++u)s.push(o[u](t,n,r,a));var c=i.apply(void 0,s,a);return e?{context:void 0,name:void 0,value:c}:c}:function(t,n,r,a){var s,u=i(t,n,r,a);if(null!=u.value){for(var c=[],l=0;l<o.length;++l)c.push(o[l](t,n,r,a));s=u.value.apply(u.context,c)}return e?{value:s}:s};case Sr.AssignmentExpression:return r=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,n,o,a){var s=r(t,n,o,a),u=i(t,n,o,a);return s.context[s.name]=u,e?{value:u}:u};case Sr.ArrayExpression:return o=[],S(t.elements,function(t){o.push(a.recurse(t))}),function(t,n,r,i){for(var a=[],s=0;s<o.length;++s)a.push(o[s](t,n,r,i));return e?{value:a}:a};case Sr.ObjectExpression:return o=[],S(t.properties,function(t){t.computed?o.push({key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}):o.push({key:t.key.type===Sr.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})}),function(t,n,r,i){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(t,n,r,i)]=o[s].value(t,n,r,i):a[o[s].key]=o[s].value(t,n,r,i);return e?{value:a}:a};case Sr.ThisExpression:return function(t){return e?{value:t}:t};case Sr.LocalsExpression:return function(t,n){return e?{value:n}:n};case Sr.NGValueParameter:return function(t,n,r){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=N(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=N(a)?-a:-0,e?{value:a}:a}},"unary!":function(t,e){return function(n,r,i,o){var a=!t(n,r,i,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(r,i,o,a){var s=_r(t(r,i,o,a),e(r,i,o,a));return n?{value:s}:s}},"binary-":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a),u=e(r,i,o,a),c=(N(s)?s:0)-(N(u)?u:0);return n?{value:c}:c}},"binary*":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)*e(r,i,o,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)/e(r,i,o,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)%e(r,i,o,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)===e(r,i,o,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!==e(r,i,o,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)==e(r,i,o,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!=e(r,i,o,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<e(r,i,o,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>e(r,i,o,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<=e(r,i,o,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>=e(r,i,o,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)&&e(r,i,o,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)||e(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,r){return function(i,o,a,s){var u=t(i,o,a,s)?e(i,o,a,s):n(i,o,a,s);return r?{value:u}:u}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(r,i,o,a){var s=i&&t in i?i:r;n&&1!==n&&s&&null==s[t]&&(s[t]={});var u=s?s[t]:void 0;return e?{context:s,name:t,value:u}:u}},computedMember:function(t,e,n,r){return function(i,o,a,s){var u,c,l=t(i,o,a,s);return null!=l&&(u=yr(u=e(i,o,a,s)),r&&1!==r&&l&&!l[u]&&(l[u]={}),c=l[u]),n?{context:l,name:u,value:c}:c}},nonComputedMember:function(t,e,n,r){return function(i,o,a,s){var u=t(i,o,a,s);r&&1!==r&&u&&null==u[e]&&(u[e]={});var c=null!=u?u[e]:void 0;return n?{context:u,name:e,value:c}:c}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}},Mr.prototype={constructor:Mr,parse:function(t){var e=this.getAst(t),n=this.astCompiler.compile(e.ast);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Sr.Literal||t.body[0].expression.type===Sr.ArrayExpression||t.body[0].expression.type===Sr.ObjectExpression)}(e.ast),n.constant=function(t){return t.constant}(e.ast),n.oneTime=e.oneTime,n},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var Wr=i("$sce"),Gr={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Jr=/_([a-z])/g;function Kr(t){return t.replace(Jr,ne)}function Yr(t){var e=[];return N(t)&&S(t,function(t){e.push(function(t){if("self"===t)return t;if(q(t)){if(t.indexOf("***")>-1)throw Wr("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(J(t))return new RegExp("^"+t.source+"$");throw Wr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function Zr(){this.SCE_CONTEXTS=Gr;var e=["self"],n=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Yr(t)),e},this.resourceUrlBlacklist=function(t){return arguments.length&&(n=Yr(t)),n},this.$get=["$injector","$$sanitizeUri",function(r,i){var o=function(t){throw Wr("unsafe","Attempting to use an unsafe value in a safe context.")};function a(e,n){return"self"===e?ci(n,si)||function(e){return ci(e,function(){if(t.document.baseURI)return t.document.baseURI;oi||((oi=t.document.createElement("a")).href=".",oi=oi.cloneNode(!1));return oi.href}())}(n):!!e.exec(n.href)}function s(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}r.has("$sanitize")&&(o=r.get("$sanitize"));var u=s(),c={};return c[Gr.HTML]=s(u),c[Gr.CSS]=s(u),c[Gr.MEDIA_URL]=s(u),c[Gr.URL]=s(c[Gr.MEDIA_URL]),c[Gr.JS]=s(u),c[Gr.RESOURCE_URL]=s(c[Gr.URL]),{trustAs:function(t,e){var n=c.hasOwnProperty(t)?c[t]:null;if(!n)throw Wr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||U(e)||""===e)return e;if("string"!=typeof e)throw Wr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,r){if(null===r||U(r)||""===r)return r;var s=c.hasOwnProperty(t)?c[t]:null;if(s&&r instanceof s)return r.$$unwrapTrustedValue();if(G(r.$$unwrapTrustedValue)&&(r=r.$$unwrapTrustedValue()),t===Gr.MEDIA_URL||t===Gr.URL)return i(r,t===Gr.MEDIA_URL);if(t===Gr.RESOURCE_URL){if(function(t){var r,i,o=ui(t.toString()),s=!1;for(r=0,i=e.length;r<i;r++)if(a(e[r],o)){s=!0;break}if(s)for(r=0,i=n.length;r<i;r++)if(a(n[r],o)){s=!1;break}return s}(r))return r;throw Wr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",r.toString())}if(t===Gr.HTML)return o(r);throw Wr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof u?t.$$unwrapTrustedValue():t}}}]}function Qr(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&o<8)throw Wr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Gt(Gr);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=V),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return S(Gr,function(t,e){var n=h(e);r[Kr("parse_as_"+n)]=function(e){return i(t,e)},r[Kr("get_trusted_"+n)]=function(e){return a(t,e)},r[Kr("trust_as_"+n)]=function(e){return s(t,e)}}),r}]}function Xr(){this.$get=["$window","$document",function(t,e){var n={},r=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,i=P((/android (\d+)/.exec(h((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},u=s.body&&s.body.style,c=!1,l=!1;return u&&(c=!!("transition"in u||"webkitTransition"in u),l=!!("animation"in u||"webkitAnimation"in u)),{history:!(!r||i<4||a),hasEvent:function(t){if("input"===t&&o)return!1;if(U(n[t])){var e=s.createElement("div");n[t]="on"+t in e}return n[t]},csp:ct(),transitions:c,animations:l,android:i}}]}var ti=i("$templateRequest");function ei(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,r,i,o){function a(s,u){a.totalPendingRequests++,q(s)&&!U(n.get(s))||(s=o.getTrustedResourceUrl(s));var c=r.defaults&&r.defaults.transformResponse;return z(c)?c=c.filter(function(t){return t!==Nn}):c===Nn&&(c=null),r.get(s,R({cache:n,transformResponse:c},t)).finally(function(){a.totalPendingRequests--}).then(function(t){return n.put(s,t.data)},function(t){u||(t=ti("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText),e(t));return i.reject(t)})}return a.totalPendingRequests=0,a}]}function ni(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={findBindings:function(t,e,n){var r=[];return S(t.getElementsByClassName("ng-binding"),function(t){var i=b.element(t).data("$binding");i&&S(i,function(i){n?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!==i.indexOf(e)&&r.push(t)})}),r},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o="["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]',a=t.querySelectorAll(o);if(a.length)return a}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return r}]}var ri=i("$timeout");function ii(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){var o={};function a(a,s,u){G(a)||(u=s,s=a,a=M);var c,l=ht(arguments,3),f=N(u)&&!u,h=(f?r:n).defer(),p=h.promise;return c=e.defer(function(){try{h.resolve(a.apply(null,l))}catch(t){h.reject(t),i(t)}finally{delete o[p.$$timeoutId]}f||t.$apply()},s),p.$$timeoutId=c,o[c]=h,p}return a.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw ri("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!o.hasOwnProperty(t.$$timeoutId))return!1;var n=t.$$timeoutId,r=o[n];return qr(r.promise),r.reject("canceled"),delete o[n],e.defer.cancel(n)},a}]}var oi,ai=t.document.createElement("a"),si=ui(t.location.href);function ui(t){if(!q(t))return t;var e=t;return o&&(ai.setAttribute("href",e),e=ai.href),ai.setAttribute("href",e),{href:ai.href,protocol:ai.protocol?ai.protocol.replace(/:$/,""):"",host:ai.host,search:ai.search?ai.search.replace(/^\?/,""):"",hash:ai.hash?ai.hash.replace(/^#/,""):"",hostname:ai.hostname,port:ai.port,pathname:"/"===ai.pathname.charAt(0)?ai.pathname:"/"+ai.pathname}}function ci(t,e){return t=ui(t),e=ui(e),t.protocol===e.protocol&&t.host===e.host}function li(){this.$get=I(t)}function fi(t){var e=t[0]||{},n={},r="";function i(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,a,s,u,c=function(t){try{return t.cookie||""}catch(t){return""}}(e);if(c!==r)for(t=(r=c).split("; "),n={},a=0;a<t.length;a++)(s=(o=t[a]).indexOf("="))>0&&(u=i(o.substring(0,s)),U(n[u])&&(n[u]=i(o.substring(s+1))));return n}}function hi(){this.$get=fi}function pi(t){var e="Filter";function n(r,i){if(F(r)){var o={};return S(r,function(t,e){o[e]=n(e,t)}),o}return t.factory(r+e,i)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",bi),n("date",Ai),n("filter",di),n("json",ji),n("limitTo",Ii),n("lowercase",Mi),n("number",wi),n("orderBy",Ui),n("uppercase",Vi)}function di(){return function(t,e,n,r){if(!E(t)){if(null==t)return t;throw i("filter")("notarray","Expected array but received: {0}",t)}var o,a;switch(r=r||"$",$i(e)){case"function":o=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=function(t,e,n,r){var i=F(t)&&n in t;!0===e?e=ut:G(e)||(e=function(t,e){return!U(t)&&(null===t||null===e?t===e:!(F(e)||F(t)&&!D(t))&&(t=h(""+t),e=h(""+e),-1!==t.indexOf(e)))});return function(o){return i&&!F(o)?vi(o,t[n],e,n,!1):vi(o,t,e,n,r)}}(e,n,r,a);break;default:return t}return Array.prototype.filter.call(t,o)}}function vi(t,e,n,r,i,o){var a=$i(t),s=$i(e);if("string"===s&&"!"===e.charAt(0))return!vi(t,e.substring(1),n,r,i);if(z(t))return t.some(function(t){return vi(t,e,n,r,i)});switch(a){case"object":var u;if(i){for(u in t)if(u.charAt&&"$"!==u.charAt(0)&&vi(t[u],e,n,r,!0))return!0;return!o&&vi(t,e,n,r,!1)}if("object"===s){for(u in e){var c=e[u];if(!G(c)&&!U(c)){var l=u===r;if(!vi(l?t:t[u],c,n,r,l,l))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function $i(t){return null===t?"null":typeof t}fi.$inject=["$document"],pi.$inject=["$provide"];var mi=22,gi=".",yi="0";function bi(t){var e=t.NUMBER_FORMATS;return function(t,n,r){U(n)&&(n=e.CURRENCY_SYM),U(r)&&(r=e.PATTERNS[1].maxFrac);var i=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:Ei(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(i,n)}}function wi(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:Ei(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Ei(t,e,n,r,i){if(!q(t)&&!L(t)||isNaN(t))return"";var o,a=!isFinite(t),s=!1,u=Math.abs(t)+"",c="";if(a)c="";else{(function(t,e,n,r){var i=t.d,o=i.length-t.i,a=(e=U(e)?Math.min(Math.max(n,o),r):+e)+t.i,s=i[a];if(a>0){i.splice(Math.max(t.i,a));for(var u=a;u<i.length;u++)i[u]=0}else{o=Math.max(0,o),t.i=1,i.length=Math.max(1,a=e+1),i[0]=0;for(var c=1;c<a;c++)i[c]=0}if(s>=5)if(a-1<0){for(var l=0;l>a;l--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[a-1]++;for(;o<Math.max(0,e);o++)i.push(0);var f=i.reduceRight(function(t,e,n,r){return e+=t,r[n]=e%10,Math.floor(e/10)},0);f&&(i.unshift(f),t.i++)})(o=function(t){var e,n,r,i,o,a=0;for((n=t.indexOf(gi))>-1&&(t=t.replace(gi,"")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charAt(r)===yi;r++);if(r===(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)===yi;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=+t.charAt(r)}return n>mi&&(e=e.splice(0,mi-1),a=n-1,n=1),{d:e,e:a,i:n}}(u),i,e.minFrac,e.maxFrac);var l=o.d,f=o.i,h=o.e,p=[];for(s=l.reduce(function(t,e){return t&&!e},!0);f<0;)l.unshift(0),f++;f>0?p=l.splice(f,l.length):(p=l,l=[0]);var d=[];for(l.length>=e.lgSize&&d.unshift(l.splice(-e.lgSize,l.length).join(""));l.length>e.gSize;)d.unshift(l.splice(-e.gSize,l.length).join(""));l.length&&d.unshift(l.join("")),c=d.join(n),p.length&&(c+=r+p.join("")),h&&(c+="e+"+h)}return t<0&&!s?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function Si(t,e,n,r){var i="";for((t<0||r&&t<=0)&&(r?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t=yi+t;return n&&(t=t.substr(t.length-e)),i+t}function xi(t,e,n,r,i){return n=n||0,function(o){var a=o["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),Si(a,e,r,i)}}function _i(t,e,n){return function(r,i){var o=r["get"+t]();return i[p((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function Ci(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function ki(t){return function(e){var n,r=Ci(e.getFullYear()),i=+(n=e,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+r;return Si(1+Math.round(i/6048e5),t)}}function Oi(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}bi.$inject=["$locale"],wi.$inject=["$locale"];var Ri={yyyy:xi("FullYear",4,0,!1,!0),yy:xi("FullYear",2,0,!0,!0),y:xi("FullYear",1,0,!1,!0),MMMM:_i("Month"),MMM:_i("Month",!0),MM:xi("Month",2,1),M:xi("Month",1,1),LLLL:_i("Month",!1,!0),dd:xi("Date",2),d:xi("Date",1),HH:xi("Hours",2),H:xi("Hours",1),hh:xi("Hours",2,-12),h:xi("Hours",1,-12),mm:xi("Minutes",2),m:xi("Minutes",1),ss:xi("Seconds",2),s:xi("Seconds",1),sss:xi("Milliseconds",3),EEEE:_i("Day"),EEE:_i("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var r=-1*n,i=r>=0?"+":"";return i+=Si(Math[r>0?"floor":"ceil"](r/60),2)+Si(Math.abs(r%60),2)},ww:ki(2),w:ki(1),G:Oi,GG:Oi,GGG:Oi,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Ti=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Pi=/^-?\d+$/;function Ai(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var o,a,s="",u=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,q(n)&&(n=Pi.test(n)?P(n):function(t){var n;if(n=t.match(e)){var r=new Date(0),i=0,o=0,a=n[8]?r.setUTCFullYear:r.setFullYear,s=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=P(n[9]+n[10]),o=P(n[9]+n[11])),a.call(r,P(n[1]),P(n[2])-1,P(n[3]));var u=P(n[4]||0)-i,c=P(n[5]||0)-o,l=P(n[6]||0),f=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(r,u,c,l,f),r}return t}(n)),L(n)&&(n=new Date(n)),!B(n)||!isFinite(n.getTime()))return n;for(;r;)(a=Ti.exec(r))?r=(u=ft(u,a,1)).pop():(u.push(r),r=null);var c=n.getTimezoneOffset();return i&&(c=gt(i,c),n=bt(n,i,!0)),S(u,function(e){o=Ri[e],s+=o?o(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function ji(){return function(t,e){return U(e)&&(e=2),vt(t,e)}}Ai.$inject=["$locale"];var Mi=I(h),Vi=I(p);function Ii(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):P(e),A(e)?t:(L(t)&&(t=t.toString()),E(t)?(n=(n=!n||isNaN(n)?0:P(n))<0?Math.max(0,t.length+n):n,e>=0?Di(t,n,n+e):0===n?Di(t,e,t.length):Di(t,Math.max(0,n+e),n)):t)}}function Di(t,e,n){return q(t)?t.slice(e,n):d.call(t,e,n)}function Ui(t){return function(r,o,a,s){if(null==r)return r;if(!E(r))throw i("orderBy")("notarray","Expected array but received: {0}",r);z(o)||(o=[o]),0===o.length&&(o=["+"]);var u=o.map(function(e){var n=1,r=V;if(G(e))r=e;else if(q(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e)).constant)){var i=r();r=function(t){return t[i]}}return{get:r,descending:n}}),c=a?-1:1,l=G(s)?s:n,f=Array.prototype.map.call(r,function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:u.map(function(r){return function(t,n){var r=typeof t;null===t?r="null":"object"===r&&(t=function(t){if(G(t.valueOf)&&e(t=t.valueOf()))return t;if(D(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:r,index:n}}(r.get(t),n)})}});return f.sort(function(t,e){for(var r=0,i=u.length;r<i;r++){var o=l(t.predicateValues[r],e.predicateValues[r]);if(o)return o*u[r].descending*c}return(l(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*c}),r=f.map(function(t){return t.value})};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,r=t.type,i=e.type;if(r===i){var o=t.value,a=e.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(F(o)&&(o=t.index),F(a)&&(a=e.index)),o!==a&&(n=o<a?-1:1)}else n="undefined"===r?1:"undefined"===i?-1:"null"===r?1:"null"===i?-1:r<i?-1:1;return n}}function Ni(t){return G(t)&&(t={link:t}),t.restrict=t.restrict||"AC",I(t)}Ui.$inject=["$parse"];var Fi=I({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===m.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Hi={};S(Ae,function(t,e){if("multiple"!==t){var n=bn("ng-"+e),r=i;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[n]&&i(t,0,r)}),Hi[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(t,r,i){t.$watch(i[n],function(t){i.$set(e,!!t)})}}),S(Me,function(t,e){Hi[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(c);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),S(["src","srcset","href"],function(t){var e=bn("ng-"+t);Hi[e]=function(){return{priority:99,link:function(n,r,i){var a=t,s=t;"href"===t&&"[object SVGAnimatedString]"===m.call(r.prop("href"))&&(s="xlinkHref",i.$attr[s]="xlink:href",a=null),i.$observe(e,function(e){e?(i.$set(s,e),o&&a&&r.prop(a,i[s])):"href"===t&&i.$set(s,null)})}}}});var qi={$addControl:M,$$renameControl:function(t,e){t.$name=e},$removeControl:M,$setValidity:M,$setDirty:M,$setPristine:M,$setSubmitted:M,$$setSubmitted:M},Li="ng-pending";function Bi(t,e,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=qi,this.$$element=t,this.$$animate=r,Ji(this)}Bi.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Bi.prototype={$rollbackViewValue:function(){S(this.$$controls,function(t){t.$rollbackViewValue()})},$commitViewValue:function(){S(this.$$controls,function(t){t.$commitViewValue()})},$addControl:function(t){Ut(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],S(this.$pending,function(e,n){this.$setValidity(n,null,t)},this),S(this.$error,function(e,n){this.$setValidity(n,null,t)},this),S(this.$$success,function(e,n){this.$setValidity(n,null,t)},this),ot(this.$$controls,t),t.$$parentForm=qi},$setDirty:function(){this.$$animate.removeClass(this.$$element,Lo),this.$$animate.addClass(this.$$element,Bo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Lo,Bo+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,S(this.$$controls,function(t){t.$setPristine()})},$setUntouched:function(){S(this.$$controls,function(t){t.$setUntouched()})},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==qi;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,S(this.$$controls,function(t){t.$$setSubmitted&&t.$$setSubmitted()})}},Ki({clazz:Bi,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(ot(r,n),0===r.length&&delete t[e])}});var zi=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Bi,compile:function(n,i){n.addClass(Lo).addClass(Ho);var o=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,n,i,a){var s=a[0];if(!("action"in i)){var u=function(e){t.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),e.preventDefault()};n[0].addEventListener("submit",u),n.on("$destroy",function(){e(function(){n[0].removeEventListener("submit",u)},0,!1)})}(a[1]||s.$$parentForm).$addControl(s);var c=o?r(s.$name):M;o&&(c(t,s),i.$observe(o,function(e){s.$name!==e&&(c(t,void 0),s.$$parentForm.$$renameControl(s,e),(c=r(s.$name))(t,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),c(t,void 0),R(s,qi)})}}}};function r(t){return""===t?n('this[""]').assign:n(t).assign||M}}]},Wi=zi(),Gi=zi(!0);function Ji(t){t.$$classCache={},t.$$classCache[qo]=!(t.$$classCache[Ho]=t.$$element.hasClass(Ho))}function Ki(t){var e=t.clazz,n=t.set,r=t.unset;function i(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function o(t,e,n){e=e?"-"+Mt(e,"-"):"",i(t,Ho+e,!0===n),i(t,qo+e,!1===n)}e.prototype.$setValidity=function(t,e,a){var s;U(e)?function(t,e,r,i){t[e]||(t[e]={});n(t[e],r,i)}(this,"$pending",t,a):function(t,e,n,i){t[e]&&r(t[e],n,i);Yi(t[e])&&(t[e]=void 0)}(this,"$pending",t,a),Z(e)?e?(r(this.$error,t,a),n(this.$$success,t,a)):(n(this.$error,t,a),r(this.$$success,t,a)):(r(this.$error,t,a),r(this.$$success,t,a)),this.$pending?(i(this,Li,!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(i(this,Li,!1),this.$valid=Yi(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,t,s=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,s,this)}}function Yi(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Zi=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Qi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Xi=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,to=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,eo=/^(\d{4,})-(\d{2})-(\d{2})$/,no=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ro=/^(\d{4,})-W(\d\d)$/,io=/^(\d{4,})-(\d\d)$/,oo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ao="keydown wheel mousedown",so=Ft();S("date,datetime-local,month,time,week".split(","),function(t){so[t]=!0});var uo={text:function(t,e,n,r,i,o){lo(t,e,n,r,i,o),co(r)},date:ho("date",eo,fo(eo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ho("datetimelocal",no,fo(no,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:ho("time",oo,fo(oo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ho("week",ro,function(t,e){if(B(t))return t;if(q(t)){ro.lastIndex=0;var n=ro.exec(t);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,u=0,c=Ci(r),l=7*(i-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),u=e.getMilliseconds()),new Date(r,0,c.getDate()+l,o,a,s,u)}}return NaN},"yyyy-Www"),month:ho("month",io,fo(io,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,r,i,o){var a,s;po(t,e,n,r,"number"),vo(r),lo(t,e,n,r,i,o),(N(n.min)||n.ngMin)&&(r.$validators.min=function(t,e){return r.$isEmpty(e)||U(a)||e>=a},n.$observe("min",function(t){a=$o(t),r.$validate()}));(N(n.max)||n.ngMax)&&(r.$validators.max=function(t,e){return r.$isEmpty(e)||U(s)||e<=s},n.$observe("max",function(t){s=$o(t),r.$validate()}));if(N(n.step)||n.ngStep){var u;r.$validators.step=function(t,e){return r.$isEmpty(e)||U(u)||yo(e,a||0,u)},n.$observe("step",function(t){u=$o(t),r.$validate()})}},url:function(t,e,n,r,i,o){lo(t,e,n,r,i,o),co(r),r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||Qi.test(n)}},email:function(t,e,n,r,i,o){lo(t,e,n,r,i,o),co(r),r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||Xi.test(n)}},radio:function(t,e,n,r){var i=!n.ngTrim||"false"!==tt(n.ngTrim);U(n.name)&&e.attr("name",C());e.on("change",function(t){var o;e[0].checked&&(o=n.value,i&&(o=tt(o)),r.$setViewValue(o,t&&t.type))}),r.$render=function(){var t=n.value;i&&(t=tt(t)),e[0].checked=t===r.$viewValue},n.$observe("value",r.$render)},range:function(t,e,n,r,i,o){po(t,e,n,r,"range"),vo(r),lo(t,e,n,r,i,o);var a=r.$$hasNativeValidators&&"range"===e[0].type,s=a?0:void 0,u=a?100:void 0,c=a?1:void 0,l=e[0].validity,f=N(n.min),h=N(n.max),p=N(n.step),d=r.$render;r.$render=a&&N(l.rangeUnderflow)&&N(l.rangeOverflow)?function(){d(),r.$setViewValue(e.val())}:d,f&&(r.$validators.min=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||U(s)||e>=s},v("min",function(t){if(s=$o(t),A(r.$modelValue))return;if(a){var n=e.val();s>n&&(n=s,e.val(n)),r.$setViewValue(n)}else r.$validate()}));h&&(r.$validators.max=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||U(u)||e<=u},v("max",function(t){if(u=$o(t),A(r.$modelValue))return;if(a){var n=e.val();u<n&&(e.val(u),n=u<s?s:u),r.$setViewValue(n)}else r.$validate()}));p&&(r.$validators.step=a?function(){return!l.stepMismatch}:function(t,e){return r.$isEmpty(e)||U(c)||yo(e,s||0,c)},v("step",function(t){if(c=$o(t),A(r.$modelValue))return;a&&r.$viewValue!==e.val()?r.$setViewValue(e.val()):r.$validate()}));function v(t,r){e.attr(t,n[t]),n.$observe(t,r)}},checkbox:function(t,e,n,r,i,o,a,s){var u=bo(s,t,"ngTrueValue",n.ngTrueValue,!0),c=bo(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("change",function(t){r.$setViewValue(e[0].checked,t&&t.type)}),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push(function(t){return ut(t,u)}),r.$parsers.push(function(t){return t?u:c})},hidden:M,button:M,submit:M,reset:M,file:M};function co(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function lo(t,e,n,r,i,o){var a,s=h(e[0].type);if(!i.android){var u=!1;e.on("compositionstart",function(){u=!0}),e.on("compositionupdate",function(t){(U(t.data)||""===t.data)&&(u=!1)}),e.on("compositionend",function(){u=!1,c()})}var c=function(t){if(a&&(o.defer.cancel(a),a=null),!u){var i=e.val(),c=t&&t.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(i=tt(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,c)}};if(i.hasEvent("input"))e.on("input",c);else{var f=function(t,e,n){a||(a=o.defer(function(){a=null,e&&e.value===n||c(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||f(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut drop",f)}e.on("change",c),so[s]&&r.$$hasNativeValidators&&s===n.type&&e.on(ao,function(t){if(!a){var e=this[l],n=e.badInput,r=e.typeMismatch;a=o.defer(function(){a=null,e.badInput===n&&e.typeMismatch===r||c(t)})}}),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function fo(t,e){return function(n,r){var i,o;if(B(n))return n;if(q(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Zi.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n)){i.shift(),o=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},S(i,function(t,n){n<e.length&&(o[e[n]]=+t)});var a=new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0);return o.yyyy<100&&a.setFullYear(o.yyyy),a}}return NaN}}function ho(t,e,n,r){return function(i,o,a,s,u,c,l){var f,h,p,d;(po(i,o,a,s,t),lo(0,o,a,s,u,c),s.$parsers.push(function(n){return s.$isEmpty(n)?null:e.test(n)?m(n,f):void(s.$$parserName=t)}),s.$formatters.push(function(t){if(t&&!B(t))throw zo("datefmt","Expected `{0}` to be a date",t);if(v(t)){f=t;var e=s.$options.getOption("timezone");return e&&(h=e,f=bt(f,e,!0)),l("date")(t,r,e)}return f=null,h=null,""}),N(a.min)||a.ngMin)&&(s.$validators.min=function(t){return!v(t)||U(p)||n(t)>=p},a.$observe("min",function(t){p=$(t),s.$validate()}));(N(a.max)||a.ngMax)&&(s.$validators.max=function(t){return!v(t)||U(d)||n(t)<=d},a.$observe("max",function(t){d=$(t),s.$validate()}));function v(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function $(t){return N(t)&&!B(t)?m(t)||void 0:t}function m(t,e){var r=s.$options.getOption("timezone");h&&h!==r&&(e=yt(e,gt(h)));var i=n(t,e);return!isNaN(i)&&r&&(i=bt(i,r)),i}}}function po(t,e,n,r,i){var o=e[0];(r.$$hasNativeValidators=F(o.validity))&&r.$parsers.push(function(t){var n=e.prop(l)||{};if(!n.badInput&&!n.typeMismatch)return t;r.$$parserName=i})}function vo(t){t.$parsers.push(function(e){return t.$isEmpty(e)?null:to.test(e)?parseFloat(e):void(t.$$parserName="number")}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!L(e))throw zo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function $o(t){return N(t)&&!L(t)&&(t=parseFloat(t)),A(t)?void 0:t}function mo(t){return(0|t)===t}function go(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var r=/e-(\d+)$/.exec(e);if(r)return Number(r[1])}return 0}return e.length-n-1}function yo(t,e,n){var r=Number(t),i=!mo(r),o=!mo(e),a=!mo(n);if(i||o||a){var s=i?go(r):0,u=o?go(e):0,c=a?go(n):0,l=Math.max(s,u,c),f=Math.pow(10,l);r*=f,e*=f,n*=f,i&&(r=Math.round(r)),o&&(e=Math.round(e)),a&&(n=Math.round(n))}return(r-e)%n==0}function bo(t,e,n,r,i){var o;if(N(r)){if(!(o=t(r)).constant)throw zo("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(e)}return i}var wo=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(uo[h(a.type)]||uo.text)(i,o,a,s[0],e,t,n,r)}}}}],Eo=/^(true|false|\d+)$/,So=function(){function t(t,e,n){var r=N(n)?n:9===o?"":null;t.prop("value",r),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return Eo.test(n.ngValue)?function(e,n,r){t(n,r,e.$eval(r.ngValue))}:function(e,n,r){e.$watch(r.ngValue,function(e){t(n,r,e)})}}}},xo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,function(t){n.textContent=Ht(t)})}}}}],_o=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){var o=t(r.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(t){r.textContent=U(t)?"":t})}}}}],Co=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,function(){var n=o(e);r.html(t.getTrustedHtml(n)||"")})}}}}],ko=I({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function Oo(t,e){var n;return t="ngClass"+t,["$parse",function(a){return{restrict:"AC",link:function(s,u,c){var l,f=u.data("$classCounts"),h=!0;function p(t,e){var n=[];return S(t,function(t){(e>0||f[t])&&(f[t]=(f[t]||0)+e,f[t]===+(e>0)&&n.push(t))}),n.join(" ")}f||(f=Ft(),u.data("$classCounts",f)),"ngClass"!==t&&(n||(n=a("$index",function(t){return 1&t})),s.$watch(n,function(t){t===e?(n=p(i(n=l),1),c.$addClass(n)):function(t){t=p(i(t),-1),c.$removeClass(t)}(l);var n;h=t})),s.$watch(a(c[t],o),function(t){h===e&&function(t,e){var n=i(t),o=i(e),a=r(n,o),s=r(o,n),u=p(a,-1),l=p(s,1);c.$addClass(l),c.$removeClass(u)}(l,t);l=t})}}}];function r(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i===e[o])continue t;n.push(i)}return n}function i(t){return t&&t.split(" ")}function o(t){var e=t;return z(t)?e=t.map(o).join(" "):F(t)&&(e=Object.keys(t).filter(function(e){return t[e]}).join(" ")),e}}var Ro=Oo("",!0),To=Oo("Odd",0),Po=Oo("Even",1),Ao=Ni({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),jo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Mo={},Vo={blur:!0,focus:!0};S("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=bn("ng-"+t);Mo[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[e]);return function(e,n){n.on(t,function(n){var i=function(){a(e,{$event:n})};Vo[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var Io=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,c;n.$watch(i.ngIf,function(n){n?u||a(function(n,o){u=o,n[n.length++]=e.$$createComment("end ngIf",i.ngIf),s={clone:n},t.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),u&&(u.$destroy(),u=null),s&&(c=Nt(s.clone),t.leave(c).done(function(t){!1!==t&&(c=null)}),s=null))})}}}],Do=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,u,c,l){var f,h,p,d=0,v=function(){h&&(h.remove(),h=null),f&&(f.$destroy(),f=null),p&&(n.leave(p).done(function(t){!1!==t&&(h=null)}),h=p,p=null)};r.$watch(o,function(o){var u=function(t){!1===t||!N(s)||s&&!r.$eval(s)||e()},h=++d;o?(t(o,!0).then(function(t){if(!r.$$destroyed&&h===d){var e=r.$new();c.template=t;var s=l(e,function(t){v(),n.enter(t,null,i).done(u)});p=s,(f=e).$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||h===d&&(v(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(v(),c.template=null)})}}}}],Uo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){if(m.call(r[0]).match(/SVG/))return r.empty(),void e(fe(o.template,t.document).childNodes)(n,function(t){r.append(t)},{futureParentElement:r});r.html(o.template),e(r.contents())(n)}}}],No=Ni({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Fo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var i=n.ngList||", ",o="false"!==n.ngTrim,a=o?tt(i):i;r.$parsers.push(function(t){if(!U(t)){var e=[];return t&&S(t.split(a),function(t){t&&e.push(o?tt(t):t)}),e}}),r.$formatters.push(function(t){if(z(t))return t.join(i)}),r.$isEmpty=function(t){return!t||!t.length}}}},Ho="ng-valid",qo="ng-invalid",Lo="ng-pristine",Bo="ng-dirty",zo=i("ngModel");function Wo(t,e,n,r,i,o,a,s,u){var c;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=u(n.name||"",!1)(t),this.$$parentForm=qi,this.$options=Go,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=e,Ji(this),(c=this).$$scope.$watch(function(t){var e=c.$$ngModelGet(t);return e===c.$modelValue||c.$modelValue!=c.$modelValue&&e!=e||c.$$setModelValue(e),e})}Wo.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Wo.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return G(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){G(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw zo("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,wt(this.$$element))},$render:M,$isEmpty:function(t){return U(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Bo),this.$$animate.addClass(this.$$element,Lo)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Lo),this.$$animate.addClass(this.$$element,Bo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!A(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,function(t){i||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==r&&o.$$writeModelToScope())})}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var r,i,o=this.$$currentValidationRunId,a=this;(function(){var t=a.$$parserName;if(!U(a.$$parserValid))return a.$$parserValid||(S(a.$validators,function(t,e){s(e,null)}),S(a.$asyncValidators,function(t,e){s(e,null)})),s(t,a.$$parserValid),a.$$parserValid;s(t,null);return!0})()?!function(){var n=!0;if(S(a.$validators,function(r,i){var o=Boolean(r(t,e));n=n&&o,s(i,o)}),!n)return S(a.$asyncValidators,function(t,e){s(e,null)}),!1;return!0}()?u(!1):(r=[],i=!0,S(a.$asyncValidators,function(n,o){var a=n(t,e);if(!Q(a))throw zo("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),r.push(a.then(function(){s(o,!0)},function(){i=!1,s(o,!1)}))}),r.length?a.$$q.all(r).then(function(){u(i)},M):u(!0)):u(!1);function s(t,e){o===a.$$currentValidationRunId&&a.$setValidity(t,e)}function u(t){o===a.$$currentValidationRunId&&n(t)}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!U(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(U(t=this.$parsers[n](t))){this.$$parserValid=!1;break}A(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");function o(){e.$modelValue!==r&&e.$$writeModelToScope()}this.$$rawModelValue=t,i&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(n){i||(e.$modelValue=n?t:void 0,o())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),S(this.$viewChangeListeners,function(t){try{t()}catch(t){this.$$exceptionHandler(t)}},this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");L(e[t])?e=e[t]:L(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:L(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},e):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,M))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Ki({clazz:Wo,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Go,Jo=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Wo,priority:1,compile:function(e){return e.addClass(Lo).addClass("ng-untouched").addClass(Ho),{pre:function(t,e,n,r){var i=r[0],o=r[1]||i.$$parentForm,a=r[2];a&&(i.$options=a.$options),i.$$initGetterSetters(),o.$addControl(i),n.$observe("name",function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)}),t.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,n,r,i){var o=i[0];function a(){o.$setTouched()}o.$$setUpdateOnEvents(),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(a):e.$apply(a))})}}}}}],Ko=/(\s+|^)default(\s+|$)/;function Yo(t){this.$$options=t}Yo.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return S(t=R({},t),function(n,r){"$inherit"===n?"*"===r?e=!0:(t[r]=this.$$options[r],"updateOn"===r&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(t.updateOnDefault=!1,t[r]=tt(n.replace(Ko,function(){return t.updateOnDefault=!0," "})))},this),e&&(delete t["*"],Qo(t,this.$$options)),Qo(t,Go.$$options),new Yo(t)}},Go=new Yo({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Zo=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Go,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function Qo(t,e){S(e,function(e,n){N(t[n])||(t[n]=e)})}var Xo=Ni({terminal:!0,priority:1e3}),ta=i("ngOptions"),ea=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,na=["$compile","$document","$parse",function(e,n,r){var i=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=M},post:function(t,s,u,c){for(var l=c[0],f=c[1],h=u.multiple,p=0,d=s.children(),v=d.length;p<v;p++)if(""===d[p].value){l.hasEmptyOption=!0,l.emptyOption=d.eq(p);break}s.empty();var $,m=!!l.emptyOption;a(i.cloneNode(!1)).val("?");var g=function(t,e,n){var i=t.match(ea);if(!i)throw ta("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,wt(e));var o=i[5]||i[7],a=i[6],s=/ as /.test(i[0])&&i[1],u=i[9],c=r(i[2]?i[1]:o),l=s&&r(s)||c,f=u&&r(u),h=u?function(t,e){return f(n,e)}:function(t){return Ne(t)},p=function(t,e){return h(t,y(t,e))},d=r(i[2]||i[1]),v=r(i[3]||""),$=r(i[4]||""),m=r(i[8]),g={},y=a?function(t,e){return g[a]=e,g[o]=t,g}:function(t){return g[o]=t,g};function b(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function w(t){var e;if(!a&&E(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:u,getTrackByValue:p,getWatchables:r(m,function(t){for(var e=[],r=w(t=t||[]),o=r.length,a=0;a<o;a++){var s=t===r?a:r[a],u=t[s],c=y(u,s),l=h(u,c);if(e.push(l),i[2]||i[1]){var f=d(n,c);e.push(f)}if(i[4]){var p=$(n,c);e.push(p)}}return e}),getOptions:function(){for(var t=[],e={},r=m(n)||[],i=w(r),o=i.length,a=0;a<o;a++){var s=r===i?a:i[a],c=r[s],f=y(c,s),g=l(n,f),E=h(g,f),S=new b(E,g,d(n,f),v(n,f),$(n,f));t.push(S),e[E]=S}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[p(t)]},getViewValueFromOption:function(t){return u?at(t.viewValue):t.viewValue}}}}}(u.ngOptions,s,t),y=n[0].createDocumentFragment();function b(t,e){var n=i.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),e.value=t.selectValue}(t,n)}function w(t){var e=$.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}l.generateUnknownOptionValue=function(t){return"?"},h?(l.writeValue=function(t){if($){var e=t&&t.map(w)||[];$.items.forEach(function(t){t.element.selected&&!it(e,t)&&(t.element.selected=!1)})}},l.readValue=function(){var t=[];return S(s.val()||[],function(e){var n=$.selectValueMap[e];n&&!n.disabled&&t.push($.getViewValueFromOption(n))}),t},g.trackBy&&t.$watchCollection(function(){if(z(f.$viewValue))return f.$viewValue.map(function(t){return g.getTrackByValue(t)})},function(){f.$render()})):(l.writeValue=function(t){if($){var e=s[0].options[s[0].selectedIndex],n=$.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(s[0].value!==n.selectValue&&(l.removeUnknownOption(),s[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):l.selectUnknownOrEmptyOption(t)}},l.readValue=function(){var t=$.selectValueMap[s.val()];return t&&!t.disabled?(l.unselectEmptyOption(),l.removeUnknownOption(),$.getViewValueFromOption(t)):null},g.trackBy&&t.$watch(function(){return g.getTrackByValue(f.$viewValue)},function(){f.$render()})),m&&(e(l.emptyOption)(t),s.prepend(l.emptyOption),l.emptyOption[0].nodeType===Bt?(l.hasEmptyOption=!1,l.registerOption=function(t,e){""===e.val()&&(l.hasEmptyOption=!0,l.emptyOption=e,l.emptyOption.removeClass("ng-scope"),f.$render(),e.on("$destroy",function(){var t=l.$isEmptyOptionSelected();l.hasEmptyOption=!1,l.emptyOption=void 0,t&&f.$render()}))}):l.emptyOption.removeClass("ng-scope")),t.$watchCollection(g.getWatchables,function(){var t=$&&l.readValue();if($)for(var e=$.items.length-1;e>=0;e--){var n=$.items[e];N(n.group)?Re(n.element.parentNode):Re(n.element)}var r={};if(($=g.getOptions()).items.forEach(function(t){var e;N(t.group)?((e=r[t.group])||(e=o.cloneNode(!1),y.appendChild(e),e.label=null===t.group?"null":t.group,r[t.group]=e),b(t,e)):b(t,y)}),s[0].appendChild(y),f.$render(),!f.$isEmpty(t)){var i=l.readValue(),a=g.trackBy||h;(a?ut(t,i):t===i)||(f.$setViewValue(i),f.$render())}})}}}}],ra=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(o,a,s){var u,c=s.count,l=s.$attr.when&&a.attr(s.$attr.when),f=s.offset||0,p=o.$eval(l)||{},d={},v=e.startSymbol(),$=e.endSymbol(),m=v+c+"-"+f+$,g=b.noop;function y(t){a.text(t||"")}S(s,function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+h(n[2]);p[r]=a.attr(s.$attr[e])}}),S(p,function(t,n){d[n]=e(t.replace(r,m))}),o.$watch(c,function(e){var r=parseFloat(e),i=A(r);if(i||r in p||(r=t.pluralCat(r-f)),!(r===u||i&&A(u))){g();var a=d[r];U(a)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+l),g=M,y()):g=o.$watch(a,y),u=r}})}}}],ia=["$parse","$animate","$compile",function(t,e,n){var r=i("ngRepeat"),o=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},a=function(t){return t.clone[0]},s=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,u){var c=u.ngRepeat,l=n.$$createComment("end ngRepeat",c),h=c.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!h)throw r("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",c);var p=h[1],d=h[2],v=h[3],$=h[4];if(!(h=p.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw r("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",p);var m,g,y,b,w=h[3]||h[1],x=h[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw r("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var _={$id:Ne};return $?m=t($):(y=function(t,e){return Ne(e)},b=function(t){return t}),function(t,n,i,u,h){m&&(g=function(e,n,r){return x&&(_[x]=e),_[w]=n,_.$index=r,m(t,_)});var p=Ft();t.$watchCollection(d,function(i){var u,d,$,m,_,C,k,O,R,T,P,A,j=n[0],M=Ft();if(v&&(t[v]=i),E(i))R=i,O=g||y;else for(var V in O=g||b,R=[],i)f.call(i,V)&&"$"!==V.charAt(0)&&R.push(V);for(m=R.length,P=new Array(m),u=0;u<m;u++)if(_=i===R?u:R[u],C=i[_],k=O(_,C,u),p[k])T=p[k],delete p[k],M[k]=T,P[u]=T;else{if(M[k])throw S(P,function(t){t&&t.scope&&(p[t.id]=t)}),r("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",c,k,C);P[u]={id:k,scope:void 0,clone:void 0},M[k]=!0}for(var I in p){if(A=Nt((T=p[I]).clone),e.leave(A),A[0].parentNode)for(u=0,d=A.length;u<d;u++)A[u].$$NG_REMOVED=!0;T.scope.$destroy()}for(u=0;u<m;u++)if(_=i===R?u:R[u],C=i[_],(T=P[u]).scope){$=j;do{$=$.nextSibling}while($&&$.$$NG_REMOVED);a(T)!==$&&e.move(Nt(T.clone),null,j),j=s(T),o(T.scope,u,w,C,x,_,m)}else h(function(t,n){T.scope=n;var r=l.cloneNode(!1);t[t.length++]=r,e.enter(t,null,j),j=r,T.clone=t,M[T.id]=T,o(T.scope,u,w,C,x,_,m)});p=M})}}}}],oa=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],aa=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],sa=Ni(function(t,e,n){t.$watchCollection(n.ngStyle,function(t,n){n&&t!==n&&S(n,function(t,n){e.css(n,"")}),t&&e.css(t)})}),ua=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,o){var a=i.ngSwitch||i.on,s=[],u=[],c=[],l=[],f=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(a,function(n){for(var r,i;c.length;)t.cancel(c.pop());for(r=0,i=l.length;r<i;++r){var a=Nt(u[r].clone);l[r].$destroy(),(c[r]=t.leave(a)).done(f(c,r))}u.length=0,l.length=0,(s=o.cases["!"+n]||o.cases["?"])&&S(s,function(n){n.transclude(function(r,i){l.push(i);var o=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen");var a={clone:r};u.push(a),t.enter(r,o.parent(),o)})})})}}}],ca=Ni({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){S(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(t,e,n){return n[e-1]!==t}),function(t){r.cases["!"+t]=r.cases["!"+t]||[],r.cases["!"+t].push({transclude:i,element:e})})}}),la=Ni({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),fa=i("ngTransclude"),ha=["$compile",function(t){return{restrict:"EAC",compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,r,i,o){if(!o)throw fa("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",wt(e));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var a=r.ngTransclude||r.ngTranscludeSlot;function s(){n(t,function(t){e.append(t)})}o(function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];if(r.nodeType!==Lt||r.nodeValue.trim())return!0}}(t)?e.append(t):(s(),n.$destroy())},null,a),a&&!o.isSlotFilled(a)&&s()}}}}],pa=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var r=n.id,i=e[0].text;t.put(r,i)}}}}],da={$setViewValue:M,$render:M};function va(t,e){t.prop("selected",e),t.attr("selected",e)}var $a=["$element","$scope",function(e,n){var r=this,i=new qe;r.selectValueMap={},r.ngModelCtrl=da,r.multiple=!1,r.unknownOption=a(t.document.createElement("option")),r.hasEmptyOption=!1,r.emptyOption=void 0,r.renderUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),e.prepend(r.unknownOption),va(r.unknownOption,!0),e.val(n)},r.updateUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),va(r.unknownOption,!0),e.val(n)},r.generateUnknownOptionValue=function(t){return"? "+Ne(t)+" ?"},r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.selectEmptyOption=function(){r.emptyOption&&(e.val(""),va(r.emptyOption,!0))},r.unselectEmptyOption=function(){r.hasEmptyOption&&va(r.emptyOption,!1)},n.$on("$destroy",function(){r.renderUnknownOption=M}),r.readValue=function(){var t=e.val(),n=t in r.selectValueMap?r.selectValueMap[t]:t;return r.hasOption(n)?n:null},r.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&va(a(n),!1),r.hasOption(t)){r.removeUnknownOption();var i=Ne(t);e.val(i in r.selectValueMap?i:t);var o=e[0].options[e[0].selectedIndex];va(a(o),!0)}else r.selectUnknownOrEmptyOption(t)},r.addOption=function(t,e){if(e[0].nodeType!==Bt){Ut(t,'"option value"'),""===t&&(r.hasEmptyOption=!0,r.emptyOption=e);var n=i.get(t)||0;i.set(t,n+1),s()}},r.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.delete(t),""===t&&(r.hasEmptyOption=!1,r.emptyOption=void 0)):i.set(t,e-1))},r.hasOption=function(t){return!!i.get(t)},r.$hasEmptyOption=function(){return r.hasEmptyOption},r.$isUnknownOptionSelected=function(){return e[0].options[0]===r.unknownOption[0]},r.$isEmptyOptionSelected=function(){return r.hasEmptyOption&&e[0].options[e[0].selectedIndex]===r.emptyOption[0]},r.selectUnknownOrEmptyOption=function(t){null==t&&r.emptyOption?(r.removeUnknownOption(),r.selectEmptyOption()):r.unknownOption.parent().length?r.updateUnknownOption(t):r.renderUnknownOption(t)};var o=!1;function s(){o||(o=!0,n.$$postDigest(function(){o=!1,r.ngModelCtrl.$render()}))}var u=!1;function c(t){u||(u=!0,n.$$postDigest(function(){n.$$destroyed||(u=!1,r.ngModelCtrl.$setViewValue(r.readValue()),t&&r.ngModelCtrl.$render())}))}r.registerOption=function(t,e,n,i,o){if(n.$attr.ngValue){var a,u=NaN;n.$observe("value",function(t){var n,i=e.prop("selected");N(u)&&(r.removeOption(a),delete r.selectValueMap[u],n=!0),u=Ne(t),a=t,r.selectValueMap[u]=t,r.addOption(t,e),e.attr("value",u),n&&i&&c()})}else i?n.$observe("value",function(t){var n;r.readValue();var i=e.prop("selected");N(a)&&(r.removeOption(a),n=!0),a=t,r.addOption(t,e),n&&i&&c()}):o?t.$watch(o,function(t,i){n.$set("value",t);var o=e.prop("selected");i!==t&&r.removeOption(i),r.addOption(t,e),i&&o&&c()}):r.addOption(n.value,e);n.$observe("disabled",function(t){("true"===t||t&&e.prop("selected"))&&(r.multiple?c(!0):(r.ngModelCtrl.$setViewValue(null),r.ngModelCtrl.$render()))}),e.on("$destroy",function(){var t=r.readValue(),e=n.value;r.removeOption(e),s(),(r.multiple&&t&&-1!==t.indexOf(e)||t===e)&&c(!0)})}}],ma=function(){return{restrict:"E",require:["select","?ngModel"],controller:$a,priority:1,link:{pre:function(t,e,n,r){var i=r[0],o=r[1];if(!o)return void(i.registerOption=M);if(i.ngModelCtrl=o,e.on("change",function(){i.removeUnknownOption(),t.$apply(function(){o.$setViewValue(i.readValue())})}),n.multiple){i.multiple=!0,i.readValue=function(){var t=[];return S(e.find("option"),function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in i.selectValueMap?i.selectValueMap[n]:n)}}),t},i.writeValue=function(t){S(e.find("option"),function(e){var n=!!t&&(it(t,e.value)||it(t,i.selectValueMap[e.value])),r=e.selected;n!==r&&va(a(e),n)})};var s,u=NaN;t.$watch(function(){u!==o.$viewValue||ut(s,o.$viewValue)||(s=Gt(o.$viewValue),o.$render()),u=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,r){var i=r[1];if(!i)return;var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}}},ga=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var r,i;return N(n.ngValue)||(N(n.value)?r=t(n.value,!0):(i=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o=e.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.registerOption(t,e,n,r,i)}}}}],ya=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},ba=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var o,a=n.ngPattern||n.pattern;n.$observe("pattern",function(t){if(q(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,t,wt(e));o=t||void 0,r.$validate()}),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||U(o)||o.test(e)}}}}},wa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",function(t){var e=P(t);i=A(e)?-1:e,r.$validate()}),r.$validators.maxlength=function(t,e){return i<0||r.$isEmpty(e)||e.length<=i}}}}},Ea=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",function(t){i=P(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var e;if(!Vt){var n=lt();(s=U(n)?t.jQuery:n?t[n]:void 0)&&s.fn.on?(a=s,R(s.fn,{scope:Pe.scope,isolateScope:Pe.isolateScope,controller:Pe.controller,injector:Pe.injector,inheritedData:Pe.inheritedData})):a=pe,e=a.cleanData,a.cleanData=function(t){for(var n,r,i=0;null!=(r=t[i]);i++)(n=a._data(r).events)&&n.$destroy&&a(r).triggerHandler("$destroy");e(t)},b.element=a,Vt=!0}}(),function(e){R(e,{errorHandlingConfig:n,bootstrap:Tt,copy:at,extend:R,merge:T,equals:ut,element:a,forEach:S,injector:Qe,noop:M,bind:pt,toJson:vt,fromJson:$t,identity:V,isUndefined:U,isDefined:N,isString:q,isFunction:G,isObject:F,isNumber:L,isElement:nt,isArray:z,version:Kt,isDate:B,callbacks:{$$counter:0},getTestability:At,reloadWithDebugInfo:Pt,$$minErr:i,$$csp:ct,$$encodeUriSegment:_t,$$encodeUriQuery:Ct,$$lowercase:h,$$stringify:Ht,$$uppercase:p}),(u=function(t){var e=i("$injector"),n=i("ng");function r(t,e,n){return t[e]||(t[e]=n())}var o=r(t,"angular",Object);return o.$$minErr=o.$$minErr||i,r(o,"module",function(){var t={};return function(i,o,a){var s={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name",e)}(i,"module"),o&&t.hasOwnProperty(i)&&(t[i]=null),r(t,i,function(){if(!o)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],u=[],c=f("$injector","invoke","push",r),l={_invokeQueue:t,_configBlocks:r,_runBlocks:u,info:function(t){if(N(t)){if(!F(t))throw n("aobj","Argument '{0}' must be an object","value");return s=t,this}return s},requires:o,name:i,provider:h("$provide","provider"),factory:h("$provide","factory"),service:h("$provide","service"),value:f("$provide","value"),constant:f("$provide","constant","unshift"),decorator:h("$provide","decorator",r),animation:h("$animateProvider","register"),filter:h("$filterProvider","register"),controller:h("$controllerProvider","register"),directive:h("$compileProvider","directive"),component:h("$compileProvider","component"),config:c,run:function(t){return u.push(t),this}};return a&&c(a),l;function f(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),l}}function h(e,n,r){return r||(r=t),function(t,o){return o&&G(o)&&(o.$$moduleName=i),r.push([e,n,arguments]),l}}})}})}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:zr}),t.provider("$compile",$n).directive({a:Fi,input:wo,textarea:wo,form:Wi,script:pa,select:ma,option:ga,ngBind:xo,ngBindHtml:Co,ngBindTemplate:_o,ngClass:Ro,ngClassEven:Po,ngClassOdd:To,ngCloak:Ao,ngController:jo,ngForm:Gi,ngHide:aa,ngIf:Io,ngInclude:Do,ngInit:No,ngNonBindable:Xo,ngPluralize:ra,ngRepeat:ia,ngShow:oa,ngStyle:sa,ngSwitch:ua,ngSwitchWhen:ca,ngSwitchDefault:la,ngOptions:na,ngTransclude:ha,ngModel:Jo,ngList:Fo,ngChange:ko,pattern:ba,ngPattern:ba,required:ya,ngRequired:ya,minlength:Ea,ngMinlength:Ea,maxlength:wa,ngMaxlength:wa,ngValue:So,ngModelOptions:Zo}).directive({ngInclude:Uo}).directive(Hi).directive(Mo),t.provider({$anchorScroll:Xe,$animate:sn,$animateCss:ln,$$animateJs:on,$$animateQueue:an,$$AnimateRunner:cn,$$animateAsyncRun:un,$browser:fn,$cacheFactory:hn,$controller:_n,$document:Cn,$$isDocumentHidden:kn,$exceptionHandler:On,$filter:pi,$$forceReflow:Rn,$interpolate:Jn,$interval:Yn,$http:Bn,$httpParamSerializer:Dn,$httpParamSerializerJQLike:Un,$httpBackend:Wn,$xhrFactory:zn,$jsonpCallbacks:Zn,$location:vr,$log:$r,$parse:Ir,$rootScope:Br,$q:Dr,$$q:Ur,$sce:Qr,$sceDelegate:Zr,$sniffer:Xr,$templateCache:pn,$templateRequest:ei,$$testability:ni,$timeout:ii,$window:li,$$rAF:Lr,$$jqLite:Ue,$$Map:Le,$$cookieReader:hi})}]).info({angularVersion:"1.7.0"})}(b),b.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,r){var i=0|t,o=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var r=Math.pow(10,n);return{v:n,f:(t*r|0)%r}}(t,r);return 1==i&&0==o.v?e:n}})}]),a(function(){Rt(t.document,Tt)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(t,e){
/**
 * @license AngularJS v1.7.0
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t,e){"use strict";function n(t){return parseInt(t,10)}function r(t,e,n){var r="";for(t<0&&(r="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function i(t,n,r,i){var u=[],c=[],l=[],f=e.bind(l,l.push),h=e.copy,p=r.$$originalHttpBackend||r;function d(t,n,r,i){return e.isFunction(t)?t:function(){return e.isNumber(t)?[t,n,r,i,"complete"]:[200,t,n,r,"complete"]}}function v(t,r,o,a,d,v,$,m,g,y){var b=new s,w=c[0],E=!1;function S(t){return e.isString(t)||e.isFunction(t)||t instanceof RegExp?t:e.toJson(t)}function x(s){return!i&&v&&(v.then?v.then(function(){c(e.isDefined(v.$$timeoutId)?"timeout":"abort")}):n(function(){c("timeout")},v)),u.description=t+" "+r,u;function u(){var e=s.response(t,r,o,d,s.params(r));b.$$respHeaders=e[2],a(h(e[0]),h(e[1]),b.getAllResponseHeaders(),h(e[3]||""),h(e[4]))}function c(t){for(var e=0,n=l.length;e<n;e++)if(l[e]===u){l.splice(e,1),a(-1,void 0,"",void 0,t);break}}}if(b.$$events=g,b.upload.$$events=y,w&&w.match(t,r)){if(!w.matchData(o))throw new Error("Expected "+w+" with different data\nEXPECTED: "+S(w.data)+"\nGOT:      "+o);if(!w.matchHeaders(d))throw new Error("Expected "+w+" with different headers\nEXPECTED: "+S(w.headers)+"\nGOT:      "+S(d));if(c.shift(),w.response)return void l.push(x(w));E=!0}for(var _,C=-1;_=u[++C];)if(_.match(t,r,o,d||{})){if(_.response)(i?i.defer:f)(x(_));else{if(!_.passThrough)throw new Error("No response defined !");p(t,r,o,a,d,v,$,m,g,y)}return}var k=E?new Error("No response defined !"):new Error("Unexpected request: "+t+" "+r+"\n"+(w?"Expected "+w:"No more request expected"));throw k.$$passToExceptionHandler=!0,k}function $(t){var n={regexp:t},r=n.keys=[];return t&&e.isString(t)?(t=t.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([?*])?/g,function(t,e,n,i){var o="?"===i?i:null,a="*"===i?i:null;return r.push({name:n,optional:!!o}),e=e||"",(o?"":e)+"(?:"+(o?e:"")+(a?"(.+?)":"([^/]+)")+(o||"")+")"+(o||"")}).replace(/([/$*])/g,"\\$1"),n.regexp=new RegExp("^"+t,"i"),n):n}return v.when=function(t,e,n,r,s){o(arguments,1,"url");var c=new a(t,e,n,r,s),l={respond:function(t,e,n,r){return c.passThrough=void 0,c.response=d(t,e,n,r),l}};return i&&(l.passThrough=function(){return c.response=void 0,c.passThrough=!0,l}),u.push(c),l},m("when"),v.whenRoute=function(t,e){var n=$(e);return v.when(t,n.regexp,void 0,void 0,n.keys)},v.expect=function(t,e,n,r,i){o(arguments,1,"url");var s=new a(t,e,n,r,i),u={respond:function(t,e,n,r){return s.response=d(t,e,n,r),u}};return c.push(s),u},m("expect"),v.expectRoute=function(t,e){var n=$(e);return v.expect(t,n.regexp,void 0,void 0,n.keys)},v.flush=function(n,r,i){if(!1!==i&&t.$digest(),(r=r||0)>=l.length)throw new Error("No pending request to flush !");if(e.isDefined(n)&&null!==n)for(;n--;){var o=l.splice(r,1);if(!o.length)throw new Error("No more pending request to flush !");o[0]()}else for(;l.length>r;)l.splice(r,1)[0]();v.verifyNoOutstandingExpectation(i)},v.verifyNoOutstandingExpectation=function(e){if(!1!==e&&t.$digest(),c.length)throw new Error("Unsatisfied requests: "+c.join(", "))},v.verifyNoOutstandingRequest=function(e){if(!1!==e&&t.$digest(),l.length){var n=l.map(function(t){return t.description});throw new Error("Unflushed requests: "+l.length+"\n  "+n.join("\n  "))}},v.resetExpectations=function(){c.length=0,l.length=0},v.$$originalHttpBackend=p,v;function m(t){e.forEach(["GET","DELETE","JSONP","HEAD"],function(n){v[t+n]=function(r,i,a){return o(arguments,0,"url"),e.isUndefined(r)&&(r=null),v[t](n,r,void 0,i,a)}}),e.forEach(["PUT","POST","PATCH"],function(n){v[t+n]=function(r,i,a,s){return o(arguments,0,"url"),e.isUndefined(r)&&(r=null),v[t](n,r,i,a,s)}})}}function o(t,n,r){if(t.length>n&&e.isUndefined(t[n]))throw new Error("Undefined argument `"+r+"`; the argument is provided but not defined")}function a(t,n,r,i,o){function a(t){return t.slice(t.indexOf("?")+1).split("&").sort()}this.data=r,this.headers=i,this.match=function(n,r,i,o){return t===n&&(!!this.matchUrl(r)&&(!(e.isDefined(i)&&!this.matchData(i))&&!(e.isDefined(o)&&!this.matchHeaders(o))))},this.matchUrl=function(t){return!n||(e.isFunction(n.test)?n.test(t):e.isFunction(n)?n(t):n===t||function(t){return n.slice(0,n.indexOf("?"))===t.slice(0,t.indexOf("?"))&&a(n).join()===a(t).join()}(t))},this.matchHeaders=function(t){return!!e.isUndefined(i)||(e.isFunction(i)?i(t):e.equals(i,t))},this.matchData=function(t){return!!e.isUndefined(r)||(r&&e.isFunction(r.test)?r.test(t):r&&e.isFunction(r)?r(t):r&&!e.isString(r)?e.equals(e.fromJson(e.toJson(r)),e.fromJson(t)):r==t)},this.toString=function(){return t+" "+n},this.params=function(t){return e.extend((a={},s=t.indexOf("?")>-1?t.substring(t.indexOf("?")+1):"",e.forEach(s.split("&"),function(t){if(t&&(r=t.replace(/\+/g,"%20").split("="),i=u(r[0]),e.isDefined(i))){var n=!e.isDefined(r[1])||u(r[1]);hasOwnProperty.call(a,i)?e.isArray(a[i])?a[i].push(n):a[i]=[a[i],n]:a[i]=n}}),a),function(){var r={};if(!n||!e.isFunction(n.test)||!o||0===o.length)return r;var i=n.exec(t);if(!i)return r;for(var a=1,s=i.length;a<s;++a){var u=o[a-1],c=i[a];u&&c&&(r[u.name||u]=c)}return r}());var r,i,a,s;function u(t){try{return decodeURIComponent(t)}catch(t){}}}}function s(){s.$$lastInstance=this,this.open=function(t,e,n){this.$$method=t,this.$$url=e,this.$$async=n,this.$$reqHeaders={},this.$$respHeaders={}},this.send=function(t){this.$$data=t},this.setRequestHeader=function(t,e){this.$$reqHeaders[t]=e},this.getResponseHeader=function(t){var n=this.$$respHeaders[t];return n||(t=e.$$lowercase(t),(n=this.$$respHeaders[t])?n:(n=void 0,e.forEach(this.$$respHeaders,function(r,i){n||e.$$lowercase(i)!==t||(n=r)}),n))},this.getAllResponseHeaders=function(){var t=[];return e.forEach(this.$$respHeaders,function(e,n){t.push(n+": "+e)}),t.join("\n")},this.abort=function(){isFunction(this.onabort)&&this.onabort()},this.$$events={},this.addEventListener=function(t,n){e.isUndefined(this.$$events[t])&&(this.$$events[t]=[]),this.$$events[t].push(n)},this.upload={$$events:{},addEventListener:this.addEventListener}}var u;e.mock={},e.mock.$BrowserProvider=function(){this.$get=function(){return new e.mock.$Browser}},e.mock.$Browser=function(){var t=this;this.isMock=!0,t.$$url="http://server/",t.$$lastUrl=t.$$url,t.pollFns=[];var n=0,r=[];t.$$incOutstandingRequestCount=function(){n++},t.$$completeOutstandingRequest=function(t){try{t()}finally{if(!--n)for(;r.length;)r.pop()()}},t.notifyWhenNoOutstandingRequests=function(t){n?r.push(t):t()},t.onUrlChange=function(e){return t.pollFns.push(function(){t.$$lastUrl===t.$$url&&t.$$state===t.$$lastState||(t.$$lastUrl=t.$$url,t.$$lastState=t.$$state,e(t.$$url,t.$$state))}),e},t.$$applicationDestroyed=e.noop,t.$$checkUrlChange=e.noop,t.deferredFns=[],t.deferredNextId=0,t.defer=function(e,n){return n=n||0,t.deferredFns.push({time:t.defer.now+n,fn:e,id:t.deferredNextId}),t.deferredFns.sort(function(t,e){return t.time-e.time}),t.deferredNextId++},t.defer.now=0,t.defer.cancel=function(n){var r;return e.forEach(t.deferredFns,function(t,e){t.id===n&&(r=e)}),!!e.isDefined(r)&&(t.deferredFns.splice(r,1),!0)},t.defer.flush=function(n){var r;if(e.isDefined(n))r=t.defer.now+n;else{if(!t.deferredFns.length)throw new Error("No deferred tasks to be flushed");r=t.deferredFns[t.deferredFns.length-1].time}for(;t.deferredFns.length&&t.deferredFns[0].time<=r;)t.defer.now=t.deferredFns[0].time,t.deferredFns.shift().fn();t.defer.now=r},t.$$baseHref="/",t.baseHref=function(){return this.$$baseHref}},e.mock.$Browser.prototype={poll:function(){e.forEach(this.pollFns,function(t){t()})},url:function(t,n,r){return e.isUndefined(r)&&(r=null),t?(this.$$url=t,this.$$state=e.copy(r),this):this.$$url},state:function(){return this.$$state}},e.mock.$ExceptionHandlerProvider=function(){var t;this.mode=function(e){switch(e){case"log":case"rethrow":var n=[];(t=function(t){if(1===arguments.length?n.push(t):n.push([].slice.call(arguments,0)),"rethrow"===e)throw t}).errors=n;break;default:throw new Error("Unknown mode '"+e+"', only 'log'/'rethrow' modes are allowed!")}},this.$get=function(){return t},this.mode("rethrow")},e.mock.$LogProvider=function(){var t=!0;function n(t,e,n){return t.concat(Array.prototype.slice.call(e,n))}this.debugEnabled=function(n){return e.isDefined(n)?(t=n,this):t},this.$get=function(){var r={log:function(){r.log.logs.push(n([],arguments,0))},warn:function(){r.warn.logs.push(n([],arguments,0))},info:function(){r.info.logs.push(n([],arguments,0))},error:function(){r.error.logs.push(n([],arguments,0))},debug:function(){t&&r.debug.logs.push(n([],arguments,0))},reset:function(){r.log.logs=[],r.info.logs=[],r.warn.logs=[],r.error.logs=[],r.debug.logs=[]},assertEmpty:function(){var t=[];if(e.forEach(["error","warn","info","log","debug"],function(n){e.forEach(r[n].logs,function(r){e.forEach(r,function(e){t.push("MOCK $log ("+n+"): "+String(e)+"\n"+(e.stack||""))})})}),t.length)throw t.unshift("Expected $log to be empty! Either a message was logged unexpectedly, or an expected log message was not checked and removed:"),t.push(""),new Error(t.join("\n---------\n"))}};return r.reset(),r}},e.mock.$IntervalProvider=function(){this.$get=["$browser","$rootScope","$q","$$q",function(t,n,r,i){var o=[],a=0,s=0,u=function(u,c,l,f){var h=arguments.length>4,p=h?Array.prototype.slice.call(arguments,4):[],d=0,v=e.isDefined(f)&&!f,$=(v?i:r).defer(),m=$.promise;return l=e.isDefined(l)?l:0,m.then(null,function(){},h?function(){u.apply(null,p)}:u),m.$$intervalId=a,o.push({nextTime:s+(c||0),delay:c||1,fn:function(){var r;$.notify(d++),l>0&&d>=l&&($.resolve(d),e.forEach(o,function(t,e){t.id===m.$$intervalId&&(r=e)}),e.isDefined(r)&&o.splice(r,1)),v?t.defer.flush():n.$apply()},id:a,deferred:$}),o.sort(function(t,e){return t.nextTime-e.nextTime}),a++,m};return u.cancel=function(t){return!!t&&(e.forEach(o,function(e,r){e.id===t.$$intervalId&&(n=r)}),!!e.isDefined(n)&&(o[n].deferred.promise.then(void 0,function(){}),o[n].deferred.reject("canceled"),o.splice(n,1),!0));var n},u.flush=function(t){var e=s;for(s+=t;o.length&&o[0].nextTime<=s;){var n=o[0];n.fn(),n.nextTime===e&&n.nextTime++,n.nextTime+=n.delay,o.sort(function(t,e){return t.nextTime-e.nextTime})}return t},u}]},e.mock.TzDate=function(t,i){var o=new Date(0);if(e.isString(i)){var a=i;if(o.origDate=function(t){var e;if(e=t.match(/^(-?\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/)){var r=new Date(0),i=0,o=0;return e[9]&&(i=n(e[9]+e[10]),o=n(e[9]+e[11])),r.setUTCFullYear(n(e[1]),n(e[2])-1,n(e[3])),r.setUTCHours(n(e[4]||0)-i,n(e[5]||0)-o,n(e[6]||0),n(e[7]||0)),r}return t}(i),i=o.origDate.getTime(),isNaN(i))throw{name:"Illegal Argument",message:"Arg '"+a+"' passed into TzDate constructor is not a valid date string"}}else o.origDate=new Date(i);var s=new Date(i).getTimezoneOffset();o.offsetDiff=60*s*1e3-1e3*t*60*60,o.date=new Date(i+o.offsetDiff),o.getTime=function(){return o.date.getTime()-o.offsetDiff},o.toLocaleDateString=function(){return o.date.toLocaleDateString()},o.getFullYear=function(){return o.date.getFullYear()},o.getMonth=function(){return o.date.getMonth()},o.getDate=function(){return o.date.getDate()},o.getHours=function(){return o.date.getHours()},o.getMinutes=function(){return o.date.getMinutes()},o.getSeconds=function(){return o.date.getSeconds()},o.getMilliseconds=function(){return o.date.getMilliseconds()},o.getTimezoneOffset=function(){return 60*t},o.getUTCFullYear=function(){return o.origDate.getUTCFullYear()},o.getUTCMonth=function(){return o.origDate.getUTCMonth()},o.getUTCDate=function(){return o.origDate.getUTCDate()},o.getUTCHours=function(){return o.origDate.getUTCHours()},o.getUTCMinutes=function(){return o.origDate.getUTCMinutes()},o.getUTCSeconds=function(){return o.origDate.getUTCSeconds()},o.getUTCMilliseconds=function(){return o.origDate.getUTCMilliseconds()},o.getDay=function(){return o.date.getDay()},o.toISOString&&(o.toISOString=function(){return r(o.origDate.getUTCFullYear(),4)+"-"+r(o.origDate.getUTCMonth()+1,2)+"-"+r(o.origDate.getUTCDate(),2)+"T"+r(o.origDate.getUTCHours(),2)+":"+r(o.origDate.getUTCMinutes(),2)+":"+r(o.origDate.getUTCSeconds(),2)+"."+r(o.origDate.getUTCMilliseconds(),3)+"Z"});return e.forEach(["getUTCDay","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toGMTString","toJSON","toLocaleFormat","toLocaleString","toLocaleTimeString","toSource","toString","toTimeString","toUTCString","valueOf"],function(t){o[t]=function(){throw new Error("Method '"+t+"' is not implemented in the TzDate mock")}}),o},e.mock.TzDate.prototype=Date.prototype,e.mock.animate=e.module("ngAnimateMock",["ng"]).info({angularVersion:"1.7.0"}).config(["$provide",function(t){t.factory("$$forceReflow",function(){function t(){t.totalReflows++}return t.totalReflows=0,t}),t.factory("$$animateAsyncRun",function(){var t=[],e=function(){return function(e){t.push(e)}};return e.flush=function(){if(0===t.length)return!1;for(var e=0;e<t.length;e++)t[e]();return t=[],!0},e}),t.decorator("$$animateJs",["$delegate",function(t){var e=[],n=function(){var n=t.apply(t,arguments);return n&&e.push(n),n};return n.$closeAndFlush=function(){e.forEach(function(t){t.end()}),e=[]},n}]),t.decorator("$animateCss",["$delegate",function(t){var e=[],n=function(n,r){var i=t(n,r);return e.push(i),i};return n.$closeAndFlush=function(){e.forEach(function(t){t.end()}),e=[]},n}]),t.decorator("$animate",["$delegate","$timeout","$browser","$$rAF","$animateCss","$$animateJs","$$forceReflow","$$animateAsyncRun","$rootScope",function(t,n,r,i,o,a,s,u,c){var l={queue:[],cancel:t.cancel,on:t.on,off:t.off,pin:t.pin,get reflows(){return s.totalReflows},enabled:t.enabled,closeAndFlush:function(){this.flush(!0),o.$closeAndFlush(),a.$closeAndFlush(),this.flush()},flush:function(t){c.$digest();var e,n=!1;do{e=!1,i.queue.length&&(i.flush(),e=n=!0),u.flush()&&(e=n=!0)}while(e);if(!n&&!t)throw new Error("No pending animations ready to be closed or flushed");c.$digest()}};return e.forEach(["animate","enter","leave","move","addClass","removeClass","setClass"],function(e){l[e]=function(){return l.queue.push({event:e,element:arguments[0],options:arguments[arguments.length-1],args:arguments}),t[e].apply(t,arguments)}}),l}])}]),e.mock.dump=function(t){return function t(n){var r;e.isElement(n)?(n=e.element(n),r=e.element("<div></div>"),e.forEach(n,function(t){r.append(e.element(t).clone())}),r=r.html()):e.isArray(n)?(r=[],e.forEach(n,function(e){r.push(t(e))}),r="[ "+r.join(", ")+" ]"):r=e.isObject(n)?e.isFunction(n.$eval)&&e.isFunction(n.$apply)?function t(n,r){r=r||"  ";var i=[r+"Scope("+n.$id+"): {"];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&!o.match(/^(\$|this)/)&&i.push("  "+o+": "+e.toJson(n[o]));var a=n.$$childHead;for(;a;)i.push(t(a,r+"  ")),a=a.$$nextSibling;i.push("}");return i.join("\n"+r)}(n):n instanceof Error?n.stack||n.name+": "+n.message:e.toJson(n,!0):String(n);return r}(t)},e.mock.$httpBackendDecorator=["$rootScope","$timeout","$delegate",i],e.mock.$TimeoutDecorator=["$delegate","$browser",function(t,n){return t.flush=function(t){n.defer.flush(t)},t.verifyNoPendingTasks=function(){if(n.deferredFns.length)throw new Error("Deferred tasks to flush ("+n.deferredFns.length+"): "+(t=n.deferredFns,r=[],e.forEach(t,function(t){r.push("{id: "+t.id+", time: "+t.time+"}")}),r.join(", ")));var t,r},t}],e.mock.$RAFDecorator=["$delegate",function(t){var e=function(t){var n=e.queue.length;return e.queue.push(t),function(){e.queue.splice(n,1)}};return e.queue=[],e.supported=t.supported,e.flush=function(){if(0===e.queue.length)throw new Error("No rAF callbacks present");for(var t=e.queue.length,n=0;n<t;n++)e.queue[n]();e.queue=e.queue.slice(n)},e}],e.mock.$RootElementProvider=function(){this.$get=["$injector",function(t){return u=e.element("<div ng-app></div>").data("$injector",t)}]},e.mock.$ComponentControllerProvider=["$compileProvider",function(t){this.$get=["$controller","$injector","$rootScope",function(t,e,n){return function(r,i,o,a){var s=e.get(r+"Directive").filter(function(t){return t.controller&&t.controllerAs&&"E"===t.restrict});if(0===s.length)throw new Error("No component found");if(s.length>1)throw new Error("Too many components found");var u=s[0];return(i=i||{}).$scope=i.$scope||n.$new(!0),t(u.controller,i,o,a||u.controllerAs)}}]}],e.module("ngMock",["ng"]).provider({$browser:e.mock.$BrowserProvider,$exceptionHandler:e.mock.$ExceptionHandlerProvider,$log:e.mock.$LogProvider,$interval:e.mock.$IntervalProvider,$rootElement:e.mock.$RootElementProvider,$componentController:e.mock.$ComponentControllerProvider}).config(["$provide","$compileProvider",function(t,n){t.decorator("$timeout",e.mock.$TimeoutDecorator),t.decorator("$$rAF",e.mock.$RAFDecorator),t.decorator("$rootScope",e.mock.$RootScopeDecorator),t.decorator("$controller",(e.mock.$ControllerDecorator=["$delegate",function(t){return function(n,r,i,o){if(i&&"object"==typeof i){var a=t(n,r,!0,o)();return e.extend(a,i),a}return t(n,r,i,o)}}],e.mock.$ControllerDecorator)),t.decorator("$httpBackend",e.mock.$httpBackendDecorator)}]).info({angularVersion:"1.7.0"}),e.module("ngMockE2E",["ng"]).config(["$provide",function(t){t.decorator("$httpBackend",e.mock.e2e.$httpBackendDecorator)}]).info({angularVersion:"1.7.0"}),e.mock.e2e={},e.mock.e2e.$httpBackendDecorator=["$rootScope","$timeout","$delegate","$browser",i],e.mock.$RootScopeDecorator=["$delegate",function(t){var e=Object.getPrototypeOf(t);return e.$countChildScopes=function(){var t,e=0,n=[this.$$childHead];for(;n.length;)for(t=n.shift();t;)e+=1,n.push(t.$$childHead),t=t.$$nextSibling;return e},e.$countWatchers=function(){var t,e=this.$$watchers?this.$$watchers.length:0,n=[this.$$childHead];for(;n.length;)for(t=n.shift();t;)e+=t.$$watchers?t.$$watchers.length:0,n.push(t.$$childHead),t=t.$$nextSibling;return e},t}],function(n){if(t.jasmine||t.mocha){var r=null,i=new f,o=[],a=function(){return!!r};e.mock.$$annotate=e.injector.$$annotate,e.injector.$$annotate=function(t){return"function"!=typeof t||t.$inject||o.push(t),e.mock.$$annotate.apply(this,arguments)};var c=t.module=e.mock.module=function(){var t=Array.prototype.slice.call(arguments,0);return a()?n():n;function n(){if(r.$injector)throw new Error("Injector already created, can not register a module!");var n,i=r.$modules||(r.$modules=[]);e.forEach(t,function(t){n=e.isObject(t)&&!e.isArray(t)?["$provide",function(n){e.forEach(t,function(t,e){n.value(e,t)})}]:t,r.$providerInjector?r.$providerInjector.invoke(n):i.push(n)})}};c.$$beforeAllHook=t.before||t.beforeAll,c.$$afterAllHook=t.after||t.afterAll,c.$$currentSpec=function(t){if(0===arguments.length)return t;r=t},c.sharedInjector=function(){if(!c.$$beforeAllHook||!c.$$afterAllHook)throw Error("sharedInjector() cannot be used unless your test runner defines beforeAll/afterAll");var t=!1;c.$$beforeAllHook(function(){if(i.shared)throw i.sharedError=Error("sharedInjector() cannot be called inside a context that has already called sharedInjector()"),i.sharedError;t=!0,r=this,i.shared=!0}),c.$$afterAllHook(function(){t?(i=new f,c.$$cleanup()):i.sharedError=null})},c.$$beforeEach=function(){if(i.shared&&r&&r!==this){var t=r;r=this,e.forEach(["$injector","$modules","$providerInjector","$injectorStrict"],function(e){r[e]=t[e],t[e]=null})}else r=this,u=null,o=[]},c.$$afterEach=function(){i.cleanupAfterEach()&&c.$$cleanup()},c.$$cleanup=function(){var t=r.$injector;if(o.forEach(function(t){delete t.$inject}),r.$injector=null,r.$modules=null,r.$providerInjector=null,r=null,t){var n=t.get("$rootElement"),i=n&&n[0],a=u?[u[0]]:[];!i||u&&i===u[0]||a.push(i),e.element.cleanData(a);var c=t.get("$rootScope");c&&c.$destroy&&c.$destroy()}e.forEach(e.element.fragments,function(t,n){delete e.element.fragments[n]}),s.$$lastInstance=null,e.forEach(e.callbacks,function(t,n){delete e.callbacks[n]}),e.callbacks.$$counter=0},(t.beforeEach||t.setup)(c.$$beforeEach),(t.afterEach||t.teardown)(c.$$afterEach);var l=function(t,e){this.message=t.message,this.name=t.name,t.line&&(this.line=t.line),t.sourceId&&(this.sourceId=t.sourceId),t.stack&&e&&(this.stack=t.stack+"\n"+e.stack),t.stackArray&&(this.stackArray=t.stackArray)};l.prototype=Error.prototype,t.inject=e.mock.inject=function(){var t=Array.prototype.slice.call(arguments,0),n=new Error("Declaration Location");if(!n.stack)try{throw n}catch(t){}return a()?i.call(r):i;function i(){var i=r.$modules||[],o=!!r.$injectorStrict;i.unshift(["$injector",function(t){r.$providerInjector=t}]),i.unshift("ngMock"),i.unshift("ng");var a=r.$injector;a||(o&&e.forEach(i,function(t){"function"==typeof t&&e.injector.$$annotate(t)}),a=r.$injector=e.injector(i,o),r.$injectorStrict=o);for(var s=0,u=t.length;s<u;s++){r.$injectorStrict&&a.annotate(t[s]);try{a.invoke(t[s]||e.noop,this)}catch(t){if(t.stack&&n)throw new l(t,n);throw t}finally{n=null}}}},e.mock.inject.strictDi=function(t){return t=!arguments.length||!!t,a()?e():e;function e(){if(t!==r.$injectorStrict){if(r.$injector)throw new Error("Injector already created, can not modify strict annotations");r.$injectorStrict=t}}}}function f(){this.shared=!1,this.sharedError=null,this.cleanupAfterEach=function(){return!this.shared||this.sharedError}}}(),function(){function e(){if("_cached"in e)return e._cached;if(!t.document.createTouch||!t.document.createTouchList)return e._cached=!1,!1;try{t.document.createEvent("TouchEvent")}catch(t){return e._cached=!1,!1}return e._cached=!0,!0}function n(){if("_cached"in n)return n._cached;n._cached=!1;var e=t.document;if(e){var r=e.createElement("div"),i=r.cloneNode();r.appendChild(i),r.addEventListener("e",function(){n._cached=!0});var o=t.document.createEvent("Events");o.initEvent("e",!0,!0),i.dispatchEvent(o)}return n._cached}t.browserTrigger=function(r,i,o){if(r&&!r.nodeName&&(r=r[0]),r){var a,s=(o=o||{}).relatedTarget||r,u=o.keys,c=o.x,l=o.y,f=r.type?r.type.toLowerCase():null,h=r.nodeName.toLowerCase();if(i||(i={text:"change",textarea:"change",hidden:"change",password:"change",button:"click",submit:"click",reset:"click",image:"click",checkbox:"click",radio:"click","select-one":"change","select-multiple":"change",_default_:"click"}[f||"_default_"]),"option"===h&&(r.parentNode.value=r.value,r=r.parentNode,i="change"),u=u||[],/transitionend/.test(i))if(t.WebKitTransitionEvent)(a=new t.WebKitTransitionEvent(i,o)).initEvent(i,o.bubbles,!0);else try{a=new t.TransitionEvent(i,o)}catch(e){(a=t.document.createEvent("TransitionEvent")).initTransitionEvent(i,o.bubbles,null,null,o.elapsedTime||0)}else if(/animationend/.test(i))if(t.WebKitAnimationEvent)(a=new t.WebKitAnimationEvent(i,o)).initEvent(i,o.bubbles,!0);else try{a=new t.AnimationEvent(i,o)}catch(e){(a=t.document.createEvent("AnimationEvent")).initAnimationEvent(i,o.bubbles,null,null,o.elapsedTime||0)}else if(/touch/.test(i)&&e())a=function(e,n,r,i){var o=new t.Event(n);r=r||0,i=i||0;var a=t.document.createTouch(t,e,Date.now(),r,i,r,i),s=t.document.createTouchList(a);return o.touches=s,o}(r,i,c,l);else if(/key/.test(i))(a=t.document.createEvent("Events")).initEvent(i,o.bubbles,o.cancelable),a.view=t,a.ctrlKey=p("ctrl"),a.altKey=p("alt"),a.shiftKey=p("shift"),a.metaKey=p("meta"),a.keyCode=o.keyCode,a.charCode=o.charCode,a.which=o.which;else if(/composition/.test(i))try{a=new t.CompositionEvent(i,{data:o.data})}catch(e){(a=t.document.createEvent("CompositionEvent",{})).initCompositionEvent(i,o.bubbles,o.cancelable,t,o.data,null)}else a=t.document.createEvent("MouseEvents"),c=c||0,l=l||0,a.initMouseEvent(i,!0,!0,t,0,c,l,c,l,p("ctrl"),p("alt"),p("shift"),p("meta"),0,s);if(a.$manualTimeStamp=o.timeStamp,a)return!o.bubbles||n()||function(e){for(;e=e.parentNode;)if(e===t)return!0;return!1}(r)?r.dispatchEvent(a):void function(t,e){var n=!1,r=e.stopPropagation;e.stopPropagation=function(){n=!0,r.apply(e,arguments)},i=e,o=t,i._target=o,Object.defineProperty(i,"target",{get:function(){return this._target}});var i,o;do{t.dispatchEvent(e)}while(!n&&(t=t.parentNode))}(r,a)}function p(t){return-1!==u.indexOf(t)}}}()}(window,window.angular)},function(t,e,n){(function(t,e,n){"use strict";var r=angular,i=e&&e.module?e:r;function o(){var t=null;return function(e,r){return t=t||n.services.$injector.get("$templateFactory"),[new c(e,r,t)]}}var a=function(t,e){return t.reduce(function(t,r){return t||n.isDefined(e[r])},!1)};function s(t){if(!t.parent)return{};var e=["component","bindings","componentProvider"],r=["templateProvider","templateUrl","template","notify","async"].concat(["controller","controllerProvider","controllerAs","resolveAs"]),i=e.concat(r);if(n.isDefined(t.views)&&a(i,t))throw new Error("State '"+t.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+i.filter(function(e){return n.isDefined(t[e])}).join(", "));var o={},s=t.views||{$default:n.pick(t,i)};return n.forEach(s,function(i,s){if(s=s||"$default",n.isString(i)&&(i={component:i}),i=n.extend({},i),a(e,i)&&a(r,i))throw new Error("Cannot combine: "+e.join("|")+" with: "+r.join("|")+" in stateview: '"+s+"@"+t.name+"'");i.resolveAs=i.resolveAs||"$resolve",i.$type="ng1",i.$context=t,i.$name=s;var u=n.ViewService.normalizeUIViewTarget(i.$context,i.$name);i.$uiViewName=u.uiViewName,i.$uiViewContextAnchor=u.uiViewContextAnchor,o[s]=i}),o}var u=0,c=function(){function t(t,e,n){var r=this;this.path=t,this.viewDecl=e,this.factory=n,this.$id=u++,this.loaded=!1,this.getTemplate=function(t,e){return r.component?r.factory.makeComponentTemplate(t,e,r.component,r.viewDecl.bindings):r.template}}return t.prototype.load=function(){var t=this,e=n.services.$q,r=new n.ResolveContext(this.path),i=this.path.reduce(function(t,e){return n.extend(t,e.paramValues)},{}),o={template:e.when(this.factory.fromConfig(this.viewDecl,i,r)),controller:e.when(this.getController(r))};return e.all(o).then(function(e){return n.trace.traceViewServiceEvent("Loaded",t),t.controller=e.controller,n.extend(t,e.template),t})},t.prototype.getController=function(t){var e=this.viewDecl.controllerProvider;if(!n.isInjectable(e))return this.viewDecl.controller;var r=n.services.$injector.annotate(e),i=n.isArray(e)?n.tail(e):e;return new n.Resolvable("",i,r).get(t)},t}(),l=function(){function t(){var t=this;this._useHttp=i.version.minor<3,this.$get=["$http","$templateCache","$injector",function(e,n,r){return t.$templateRequest=r.has&&r.has("$templateRequest")&&r.get("$templateRequest"),t.$http=e,t.$templateCache=n,t}]}return t.prototype.useHttpService=function(t){this._useHttp=t},t.prototype.fromConfig=function(t,e,r){var i=function(t){return n.services.$q.when(t).then(function(t){return{template:t}})},o=function(t){return n.services.$q.when(t).then(function(t){return{component:t}})};return n.isDefined(t.template)?i(this.fromString(t.template,e)):n.isDefined(t.templateUrl)?i(this.fromUrl(t.templateUrl,e)):n.isDefined(t.templateProvider)?i(this.fromProvider(t.templateProvider,e,r)):n.isDefined(t.component)?o(t.component):n.isDefined(t.componentProvider)?o(this.fromComponentProvider(t.componentProvider,e,r)):i("<ui-view></ui-view>")},t.prototype.fromString=function(t,e){return n.isFunction(t)?t(e):t},t.prototype.fromUrl=function(t,e){return n.isFunction(t)&&(t=t(e)),null==t?null:this._useHttp?this.$http.get(t,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(t){return t.data}):this.$templateRequest(t)},t.prototype.fromProvider=function(t,e,r){var i=n.services.$injector.annotate(t),o=n.isArray(t)?n.tail(t):t;return new n.Resolvable("",o,i).get(r)},t.prototype.fromComponentProvider=function(t,e,r){var i=n.services.$injector.annotate(t),o=n.isArray(t)?n.tail(t):t;return new n.Resolvable("",o,i).get(r)},t.prototype.makeComponentTemplate=function(t,e,r,o){o=o||{};var a=i.version.minor>=3?"::":"",s=function(t){var e=n.kebobString(t);return/^(x|data)-/.exec(e)?"x-"+e:e},u=function(t){var e=n.services.$injector.get(t+"Directive");if(!e||!e.length)throw new Error("Unable to find component named '"+t+"'");return e.map(f).reduce(n.unnestR,[])}(r).map(function(r){var i=r.name,u=r.type,c=s(i);if(t.attr(c)&&!o[i])return c+"='"+t.attr(c)+"'";var l=o[i]||i;if("@"===u)return c+"='{{"+a+"$resolve."+l+"}}'";if("&"===u){var f=e.getResolvable(l),h=f&&f.data,p=h&&n.services.$injector.annotate(h)||[];return c+"='$resolve."+l+(n.isArray(h)?"["+(h.length-1)+"]":"")+"("+p.join(",")+")'"}return c+"='"+a+"$resolve."+l+"'"}).join(" "),c=s(r);return"<"+c+" "+u+"></"+c+">"},t}();var f=function(t){return n.isObject(t.bindToController)?h(t.bindToController):h(t.scope)},h=function(t){return Object.keys(t||{}).map(function(e){return[e,/^([=<@&])[?]?(.*)/.exec(t[e])]}).filter(function(t){return n.isDefined(t)&&n.isArray(t[1])}).map(function(t){return{name:t[1][2]||t[0],type:t[1][1]}})},p=function(){function t(e,r){this.stateRegistry=e,this.stateService=r,n.createProxyFunctions(n.val(t.prototype),this,n.val(this))}return t.prototype.decorator=function(t,e){return this.stateRegistry.decorator(t,e)||this},t.prototype.state=function(t,e){return n.isObject(t)?e=t:e.name=t,this.stateRegistry.register(e),this},t.prototype.onInvalid=function(t){return this.stateService.onInvalid(t)},t}(),d=function(t){return function(e,r){var i=e[t],o="onExit"===t?"from":"to";return i?function(t,e){var r=new n.ResolveContext(t.treeChanges(o)).subContext(e.$$state()),a=n.extend(P(r),{$state$:e,$transition$:t});return n.services.$injector.invoke(i,this,a)}:void 0}},v=function(){function t(t){this._urlListeners=[],this.$locationProvider=t;var e=n.val(t);n.createProxyFunctions(e,this,e,["hashPrefix"])}return t.monkeyPatchPathParameterType=function(t){var e=t.urlMatcherFactory.type("path");e.encode=function(t){return null!=t?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t},e.decode=function(t){return null!=t?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t}},t.prototype.dispose=function(){},t.prototype.onChange=function(t){var e=this;return this._urlListeners.push(t),function(){return n.removeFrom(e._urlListeners)(t)}},t.prototype.html5Mode=function(){var t=this.$locationProvider.html5Mode();return(t=n.isObject(t)?t.enabled:t)&&this.$sniffer.history},t.prototype.url=function(t,e,r){return void 0===e&&(e=!1),n.isDefined(t)&&this.$location.url(t),e&&this.$location.replace(),r&&this.$location.state(r),this.$location.url()},t.prototype._runtimeServices=function(t,e,r,i){var o=this;this.$location=e,this.$sniffer=r,t.$on("$locationChangeSuccess",function(t){return o._urlListeners.forEach(function(e){return e(t)})});var a=n.val(e),s=n.val(i);n.createProxyFunctions(a,this,a,["replace","path","search","hash"]),n.createProxyFunctions(a,this,a,["port","protocol","host"]),n.createProxyFunctions(s,this,s,["baseHref"])},t}(),$=function(){function t(t){this._router=t,this._urlRouter=t.urlRouter}return t.injectableHandler=function(t,e){return function(r){return n.services.$injector.invoke(e,null,{$match:r,$stateParams:t.globals.params})}},t.prototype.$get=function(){var t=this._urlRouter;return t.update(!0),t.interceptDeferred||t.listen(),t},t.prototype.rule=function(t){var e=this;if(!n.isFunction(t))throw new Error("'rule' must be a function");var r=new n.BaseUrlRule(function(){return t(n.services.$injector,e._router.locationService)},n.identity);return this._urlRouter.rule(r),this},t.prototype.otherwise=function(t){var e=this,r=this._urlRouter;if(n.isString(t))r.otherwise(t);else{if(!n.isFunction(t))throw new Error("'rule' must be a string or function");r.otherwise(function(){return t(n.services.$injector,e._router.locationService)})}return this},t.prototype.when=function(e,r){return(n.isArray(r)||n.isFunction(r))&&(r=t.injectableHandler(this._router,r)),this._urlRouter.when(e,r),this},t.prototype.deferIntercept=function(t){this._urlRouter.deferIntercept(t)},t}();i.module("ui.router.angular1",[]);var m=i.module("ui.router.init",[]),g=i.module("ui.router.util",["ng","ui.router.init"]),y=i.module("ui.router.router",["ui.router.util"]),b=i.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),w=i.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),E=(i.module("ui.router.compat",["ui.router"]),null);function S(t){(E=this.router=new n.UIRouter).stateProvider=new p(E.stateRegistry,E.stateService),E.stateRegistry.decorator("views",s),E.stateRegistry.decorator("onExit",d("onExit")),E.stateRegistry.decorator("onRetain",d("onRetain")),E.stateRegistry.decorator("onEnter",d("onEnter")),E.viewService._pluginapi._viewConfigFactory("ng1",o());var e=E.locationService=E.locationConfig=new v(t);function r(t,n,r,i,o,a){return e._runtimeServices(i,t,r,n),delete E.router,delete E.$get,E}return v.monkeyPatchPathParameterType(E),E.router=E,E.$get=r,r.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],E}S.$inject=["$locationProvider"];var x=function(t){return["$uiRouterProvider",function(e){var n=e.router[t];return n.$get=function(){return n},n}]};function _(t,e,r){n.services.$injector=t,n.services.$q=e,r.stateRegistry.get().map(function(t){return t.$$state().resolvables}).reduce(n.unnestR,[]).filter(function(t){return"deferred"===t.deps}).forEach(function(e){return e.deps=t.annotate(e.resolveFn,t.strictDi)})}_.$inject=["$injector","$q","$uiRouter"];function C(t){t.$watch(function(){n.trace.approximateDigests++})}C.$inject=["$rootScope"],m.provider("$uiRouter",S),y.provider("$urlRouter",["$uiRouterProvider",function(t){return t.urlRouterProvider=new $(t)}]),g.provider("$urlService",x("urlService")),g.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return E.urlMatcherFactory}]),g.provider("$templateFactory",function(){return new l}),b.provider("$stateRegistry",x("stateRegistry")),b.provider("$uiRouterGlobals",x("globals")),b.provider("$transitions",x("transitionService")),b.provider("$state",["$uiRouterProvider",function(){return n.extend(E.stateProvider,{$get:function(){return E.stateService}})}]),b.factory("$stateParams",["$uiRouter",function(t){return t.globals.params}]),w.factory("$view",function(){return E.viewService}),w.service("$trace",function(){return n.trace}),w.run(C),g.run(["$urlMatcherFactory",function(t){}]),b.run(["$state",function(t){}]),y.run(["$urlRouter",function(t){}]),m.run(_);var k,O,R,T,P=function(t){return t.getTokens().filter(n.isString).map(function(e){var n=t.getResolvable(e);return[e,"NOWAIT"===t.getPolicy(n).async?n.promise:n.data]}).reduce(n.applyPairs,{})};function A(t){var e,n=t.match(/^\s*({[^}]*})\s*$/);if(n&&(t="("+n[1]+")"),!(e=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==e.length)throw new Error("Invalid state ref '"+t+"'");return{state:e[1]||null,paramExpr:e[3]||null}}function j(t){var e=t.parent().inheritedData("$uiView"),r=n.parse("$cfg.path")(e);return r?n.tail(r).state.name:void 0}function M(t,e,r){var i=r.uiState||t.current.name,o=n.extend(function(t,e){return{relative:j(t)||e.$current,inherit:!0,source:"sref"}}(e,t),r.uiStateOpts||{}),a=t.href(i,r.uiStateParams,o);return{uiState:i,uiStateParams:r.uiStateParams,uiStateOpts:o,href:a}}function V(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),n="FORM"===t[0].nodeName;return{attr:n?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!n}}function I(t,e,n,r,i){return function(o){var a=o.which||o.button,s=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||t.attr("target"))){var u=n(function(){e.go(s.uiState,s.uiStateParams,s.uiStateOpts)});o.preventDefault();var c=r.isAnchor&&!s.href?1:0;o.preventDefault=function(){c--<=0&&n.cancel(u)}}}}function D(t,e,r,i){var o;i&&(o=i.events),n.isArray(o)||(o=["click"]);for(var a=t.on?"on":"bind",s=0,u=o;s<u.length;s++){var c=u[s];t[a](c,r)}e.$on("$destroy",function(){for(var e=t.off?"off":"unbind",n=0,i=o;n<i.length;n++){var a=i[n];t[e](a,r)}})}function U(t){var e=function(e,n,r){return t.is(e,n,r)};return e.$stateful=!0,e}function N(t){var e=function(e,n,r){return t.includes(e,n,r)};return e.$stateful=!0,e}function F(t,e,r,o,a,s){var u=n.parse("viewDecl.controllerAs"),c=n.parse("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(o){var s=o.html();return o.empty(),function(o,l){var f=l.data("$uiView");if(!f)return l.html(s),void t(l.contents())(o);var h=f.$cfg||{viewDecl:{},getTemplate:n.noop},p=h.path&&new n.ResolveContext(h.path);l.html(h.getTemplate(l,p)||s),n.trace.traceUIViewFill(f.$uiView,l.html());var d=t(l.contents()),v=h.controller,$=u(h),m=c(h),g=p&&P(p);if(o[m]=g,v){var y=e(v,n.extend({},g,{$scope:o,$element:l}));$&&(o[$]=y,o[$][m]=g),l.data("$ngControllerController",y),l.children().data("$ngControllerController",y),L(a,r,y,o,h)}if(n.isString(h.viewDecl.component))var b=h.viewDecl.component,w=n.kebobString(b),E=new RegExp("^(x-|data-)?"+w+"$","i"),S=o.$watch(function(){var t=[].slice.call(l[0].children).filter(function(t){return t&&t.tagName&&E.exec(t.tagName)});return t&&i.element(t).data("$"+b+"Controller")},function(t){t&&(L(a,r,t,o,h),S())});d(o)}}}}k=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,a,s){var u,c=V(o),l=s[1]||s[0],f=null,h={},p=function(){return M(r,o,h)},d=A(a.uiSref);function v(){var t=p();f&&f(),l&&(f=l.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&a.$set(c.attr,t.href)}h.uiState=d.state,h.uiStateOpts=a.uiSrefOpts?i.$eval(a.uiSrefOpts):{},d.paramExpr&&(i.$watch(d.paramExpr,function(t){h.uiStateParams=n.extend({},t),v()},!0),h.uiStateParams=n.extend({},i.$eval(d.paramExpr))),v(),i.$on("$destroy",t.stateRegistry.onStatesChanged(v)),i.$on("$destroy",t.transitionService.onSuccess({},v)),c.clickable&&(u=I(o,r,e,c,p),D(o,i,u,h.uiStateOpts))}}}],O=["$uiRouter","$timeout",function(t,e){var r=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,a,s){var u,c=V(o),l=s[1]||s[0],f=null,h={},p=function(){return M(r,o,h)},d=["uiState","uiStateParams","uiStateOpts"],v=d.reduce(function(t,e){return t[e]=n.noop,t},{});function $(){var t=p();f&&f(),l&&(f=l.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&a.$set(c.attr,t.href)}d.forEach(function(t){h[t]=a[t]?i.$eval(a[t]):null,a.$observe(t,function(e){v[t](),v[t]=i.$watch(e,function(e){h[t]=e,$()},!0)})}),$(),i.$on("$destroy",t.stateRegistry.onStatesChanged($)),i.$on("$destroy",t.transitionService.onSuccess({},$)),c.clickable&&(u=I(o,r,e,c,p),D(o,i,u,h.uiStateOpts))}}}],R=["$state","$stateParams","$interpolate","$uiRouter",function(t,e,r,i){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,o,a){var s,u,c,l,f,h=[];s=r(a.uiSrefActiveEq||"",!1)(e);try{u=e.$eval(a.uiSrefActive)}catch(t){}function p(t){t.promise.then(m,n.noop)}function d(){v(u)}function v(t){n.isObject(t)&&(h=[],n.forEach(t,function(t,r){var i=function(t,n){var r=A(t);$(r.state,e.$eval(r.paramExpr),n)};n.isString(t)?i(t,r):n.isArray(t)&&n.forEach(t,function(t){i(t,r)})}))}function $(e,r,i){var a={state:t.get(e,j(o))||{name:e},params:r,activeClass:i};return h.push(a),function(){n.removeFrom(h)(a)}}function m(){var r=function(t){return t.split(/\s/).filter(n.identity)},i=function(t){return t.map(function(t){return t.activeClass}).map(r).reduce(n.unnestR,[])},a=i(h).concat(r(s)).reduce(n.uniqR,[]),u=i(h.filter(function(e){return t.includes(e.state.name,e.params)})),c=!!h.filter(function(e){return t.is(e.state.name,e.params)}).length?r(s):[],l=u.concat(c).reduce(n.uniqR,[]),f=a.filter(function(t){return!n.inArray(l,t)});e.$evalAsync(function(){l.forEach(function(t){return o.addClass(t)}),f.forEach(function(t){return o.removeClass(t)})})}v(u=u||r(a.uiSrefActive||"",!1)(e)),this.$$addStateInfo=function(t,e){if(!(n.isObject(u)&&h.length>0)){var r=$(t,e,u);return m(),r}},e.$on("$destroy",(c=i.stateRegistry.onStatesChanged(d),l=i.transitionService.onStart({},p),f=e.$on("$stateChangeSuccess",m),function(){c(),l(),f()})),i.globals.transition&&p(i.globals.transition),m()}]}}],i.module("ui.router.state").directive("uiSref",k).directive("uiSrefActive",R).directive("uiSrefActiveEq",R).directive("uiState",O),U.$inject=["$state"],N.$inject=["$state"],i.module("ui.router.state").filter("isState",U).filter("includedByState",N),T=["$view","$animate","$uiViewScroll","$interpolate","$q",function(t,e,r,o,a){var s={$cfg:{viewDecl:{$context:t._pluginapi._rootViewContext()}},$uiView:{}},u={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(l,f,h){return function(l,f,p){var d,v,$,m,g,y=p.onload||"",b=p.autoscroll,w={enter:function(t,n,r){i.version.minor>2?e.enter(t,null,n).then(r):e.enter(t,null,n,r)},leave:function(t,n){i.version.minor>2?e.leave(t).then(n):e.leave(t,n)}},E=f.inheritedData("$uiView")||s,S=o(p.uiView||p.name||"")(l)||"$default",x={$type:"ng1",id:u.count++,name:S,fqn:E.$uiView.fqn?E.$uiView.fqn+"."+S:S,config:null,configUpdated:function(t){if(t&&!(t instanceof c))return;if(e=m,r=t,e===r)return;var e,r;n.trace.traceUIViewConfigUpdated(x,t&&t.viewDecl&&t.viewDecl.$context),m=t,_(t)},get creationContext(){var t=n.parse("$cfg.viewDecl.$context")(E),e=n.parse("$uiView.creationContext")(E);return t||e}};function _(t){var e=l.$new(),i=a.defer(),o=a.defer(),s={$cfg:t,$uiView:x},u={$animEnter:i.promise,$animLeave:o.promise,$$animLeave:o};e.$emit("$viewContentLoading",S);var c=h(e,function(t){t.data("$uiViewAnim",u),t.data("$uiView",s),w.enter(t,f,function(){i.resolve(),$&&$.$emit("$viewContentAnimationEnded"),(n.isDefined(b)&&!b||l.$eval(b))&&r(t)}),function(){if(d&&(n.trace.traceUIViewEvent("Removing (previous) el",d.data("$uiView")),d.remove(),d=null),$&&(n.trace.traceUIViewEvent("Destroying scope",x),$.$destroy(),$=null),v){var t=v.data("$uiViewAnim");n.trace.traceUIViewEvent("Animate out",t),w.leave(v,function(){t.$$animLeave.resolve(),d=null}),d=v,v=null}}()});v=c,($=e).$emit("$viewContentLoaded",t||m),$.$eval(y)}n.trace.traceUIViewEvent("Linking",x),f.data("$uiView",{$uiView:x}),_(),g=t.registerUIView(x),l.$on("$destroy",function(){n.trace.traceUIViewEvent("Destroying/Unregistering",x),g()})}}};return u}],F.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var H="function"==typeof i.module("ui.router").component,q=0;function L(t,e,r,i,o){!n.isFunction(r.$onInit)||o.viewDecl.component&&H||r.$onInit();var a=n.tail(o.path).state.self,s={bind:r};if(n.isFunction(r.uiOnParamsChanged)){var u=new n.ResolveContext(o.path).getResolvable("$transition$").data;i.$on("$destroy",e.onSuccess({},function(t){if(t!==u&&-1===t.exiting().indexOf(a)){var e=t.params("to"),i=t.params("from"),o=function(t){return t.paramSchema},s=t.treeChanges("to").map(o).reduce(n.unnestR,[]),c=t.treeChanges("from").map(o).reduce(n.unnestR,[]),l=s.filter(function(t){var n=c.indexOf(t);return-1===n||!c[n].type.equals(e[t.id],i[t.id])});if(l.length){var f=l.map(function(t){return t.id}),h=n.filter(e,function(t,e){return-1!==f.indexOf(e)});r.uiOnParamsChanged(h,t)}}},s))}if(n.isFunction(r.uiCanExit)){var c=q++,l=function(t){return!!t&&(t._uiCanExitIds&&!0===t._uiCanExitIds[c]||l(t.redirectedFrom()))},f={exiting:a.name};i.$on("$destroy",e.onBefore(f,function(e){var n,i=e._uiCanExitIds=e._uiCanExitIds||{};return l(e)||(n=t.when(r.uiCanExit(e))).then(function(t){return i[c]=!1!==t}),n},s))}}i.module("ui.router.state").directive("uiView",T),i.module("ui.router.state").directive("uiView",F),i.module("ui.router.state").provider("$uiViewScroll",function(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){return n(function(){t[0].scrollIntoView()},0,!1)}}]});Object.keys(n).forEach(function(e){t[e]=n[e]}),t.core=n,t.default="ui.router",t.watchDigests=C,t.getLocals=P,t.getNg1ViewConfigFactory=o,t.ng1ViewsBuilder=s,t.Ng1ViewConfig=c,t.StateProvider=p,t.UrlRouterProvider=$,Object.defineProperty(t,"__esModule",{value:!0})})(e,n(26),n(60))},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(4)),r(n(62)),r(n(63)),r(n(31)),r(n(64)),r(n(74)),r(n(75)),r(n(76)),r(n(42)),r(n(37)),r(n(77)),r(n(80))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(10)),r(n(29)),r(n(30)),r(n(23))},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(22)),r(n(14))},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(32)),r(n(18)),r(n(33)),r(n(34)),r(n(35)),r(n(36)),r(n(9))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=n(37),o=n(31),a=n(4);function s(t){t.addResolvable(o.Resolvable.fromData(i.UIRouter,t.router),""),t.addResolvable(o.Resolvable.fromData(r.Transition,t),""),t.addResolvable(o.Resolvable.fromData("$transition$",t),""),t.addResolvable(o.Resolvable.fromData("$stateParams",t.params()),""),t.entering().forEach(function(e){t.addResolvable(o.Resolvable.fromData("$state$",e),e)})}e.registerAddCoreResolvables=function(t){return t.onCreate({},s)};var u=["$transition$",r.Transition],c=a.inArray(u);e.treeChangesCleanup=function(t){var e=function(t){return c(t.token)?o.Resolvable.fromData(t.token,null):t};a.values(t.treeChanges()).reduce(a.unnestR,[]).reduce(a.uniqR,[]).forEach(function(t){t.resolvables=t.resolvables.map(e)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(3),o=n(9),a=function(t){var e=t.to().redirectTo;if(e){var n=t.router.stateService;return r.isFunction(e)?i.services.$q.when(e(t)).then(a):a(e)}function a(e){if(e)return e instanceof o.TargetState?e:r.isString(e)?n.target(e,t.params(),t.options()):e.state||e.params?n.target(e.state||t.to(),e.params||t.params(),t.options()):void 0}};e.registerRedirectToHook=function(t){return t.onStart({to:function(t){return!!t.redirectTo}},a)}},function(t,e,n){"use strict";function r(t){return function(e,n){return(0,n.$$state()[t])(e,n)}}Object.defineProperty(e,"__esModule",{value:!0});var i=r("onExit");e.registerOnExitHook=function(t){return t.onExit({exiting:function(t){return!!t.onExit}},i)};var o=r("onRetain");e.registerOnRetainHook=function(t){return t.onRetain({retained:function(t){return!!t.onRetain}},o)};var a=r("onEnter");e.registerOnEnterHook=function(t){return t.onEnter({entering:function(t){return!!t.onEnter}},a)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(15),o=n(2);e.RESOLVE_HOOK_PRIORITY=1e3;var a=function(t){return new i.ResolveContext(t.treeChanges().to).resolvePath("EAGER",t).then(r.noop)};e.registerEagerResolvePath=function(t){return t.onStart({},a,{priority:e.RESOLVE_HOOK_PRIORITY})};var s=function(t,e){return new i.ResolveContext(t.treeChanges().to).subContext(e.$$state()).resolvePath("LAZY",t).then(r.noop)};e.registerLazyResolveState=function(t){return t.onEnter({entering:o.val(!0)},s,{priority:e.RESOLVE_HOOK_PRIORITY})};var u=function(t){return new i.ResolveContext(t.treeChanges().to).resolvePath("LAZY",t).then(r.noop)};e.registerResolveRemaining=function(t){return t.onFinish({},u,{priority:e.RESOLVE_HOOK_PRIORITY})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3),o=function(t){var e=i.services.$q,n=t.views("entering");if(n.length)return e.all(n.map(function(t){return e.when(t.load())})).then(r.noop)};e.registerLoadEnteringViews=function(t){return t.onFinish({},o)};var a=function(t){var e=t.views("entering"),n=t.views("exiting");if(e.length||n.length){var r=t.router.viewService;n.forEach(function(t){return r.deactivateViewConfig(t)}),e.forEach(function(t){return r.activateViewConfig(t)}),r.sync()}};e.registerActivateViews=function(t){return t.onSuccess({},a)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(t){var e=t.router.globals,n=function(){e.transition===t&&(e.transition=null)};t.onSuccess({},function(){e.successfulTransitions.enqueue(t),e.$current=t.$to(),e.current=e.$current.self,r.copy(t.params(),e.params)},{priority:1e4}),t.promise.then(n,n)};e.registerUpdateGlobalState=function(t){return t.onCreate({},i)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){var e=t.options(),n=t.router.stateService,r=t.router.urlRouter;if("url"!==e.source&&e.location&&n.$current.navigable){var i={replace:"replace"===e.location};r.push(n.$current.navigable.url,n.params,i)}r.update(!0)};e.registerUpdateUrl=function(t){return t.onSuccess({},r,{priority:9999})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(7);function o(t){var e=t._ignoredReason();if(e){r.trace.traceTransitionIgnored(t);var n=t.router.globals.transition;return"SameAsCurrent"===e&&n&&n.abort(),i.Rejection.ignored().toPromise()}}e.registerIgnoredTransitionHook=function(t){return t.onBefore({},o,{priority:-9999})}},function(t,e,n){"use strict";function r(t){if(!t.valid())throw new Error(t.error().toString())}Object.defineProperty(e,"__esModule",{value:!0}),e.registerInvalidTransitionHook=function(t){return t.onBefore({},r,{priority:-1e4})}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(8)),r(n(27)),r(n(21)),r(n(7)),r(n(13)),r(n(11)),r(n(45)),r(n(24))},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(16)),r(n(38)),r(n(39)),r(n(40)),r(n(43))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(41))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(78))},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(46)),r(n(47)),r(n(17)),r(n(48)),r(n(49)),r(n(50)),r(n(51)),r(n(52)),r(n(25)),r(n(79))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(52),i=n(48),o=n(25),a=n(50),s=n(49),u=n(51),c=n(47),l=n(46),f=n(3);e.servicesPlugin=function(t){return f.services.$injector=c.$injector,f.services.$q=l.$q,{name:"vanilla.services",$q:l.$q,$injector:c.$injector,dispose:function(){return null}}},e.hashLocationPlugin=o.locationPluginFactory("vanilla.hashBangLocation",!1,i.HashLocationService,r.BrowserLocationConfig),e.pushStateLocationPlugin=o.locationPluginFactory("vanilla.pushStateLocation",!0,a.PushStateLocationService,r.BrowserLocationConfig),e.memoryLocationPlugin=o.locationPluginFactory("vanilla.memoryLocation",!1,s.MemoryLocationService,u.MemoryLocationConfig)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.dispose=function(t){},t}();e.UIRouterPluginBase=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNWJjMDEzYWE0OTczNTQ0NGEwMjEiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL2NvbW1vbi9jb21tb24udHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL2NvbW1vbi9wcmVkaWNhdGVzLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9jb21tb24vaG9mLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9jb21tb24vY29yZXNlcnZpY2VzLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9jb21tb24vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL2NvbW1vbi9zdHJpbmdzLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9jb21tb24vdHJhY2UudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3RyYW5zaXRpb24vcmVqZWN0RmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvdHJhbnNpdGlvbi9pbnRlcmZhY2UudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3N0YXRlL3RhcmdldFN0YXRlLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9wYXJhbXMvcGFyYW0udHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3RyYW5zaXRpb24vdHJhbnNpdGlvbkhvb2sudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3Jlc29sdmUvcmVzb2x2YWJsZS50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvdHJhbnNpdGlvbi90cmFuc2l0aW9uLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9wYXRoL3BhdGhVdGlscy50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvcmVzb2x2ZS9yZXNvbHZlQ29udGV4dC50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvdXJsL3VybE1hdGNoZXIudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3ZhbmlsbGEvYmFzZUxvY2F0aW9uU2VydmljZS50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvc3RhdGUvc3RhdGVPYmplY3QudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL2NvbW1vbi9nbG9iLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9jb21tb24vcXVldWUudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3RyYW5zaXRpb24vaG9va1JlZ2lzdHJ5LnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9wYXRoL3BhdGhOb2RlLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9wYXJhbXMvcGFyYW1UeXBlLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS92YW5pbGxhL3V0aWxzLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hbmd1bGFyL2luZGV4LmpzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS90cmFuc2l0aW9uL2hvb2tCdWlsZGVyLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9yZXNvbHZlL2ludGVyZmFjZS50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvcGFyYW1zL3BhcmFtVHlwZXMudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3BhcmFtcy9zdGF0ZVBhcmFtcy50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvcmVzb2x2ZS9pbmRleC50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvc3RhdGUvc3RhdGVCdWlsZGVyLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9zdGF0ZS9zdGF0ZU1hdGNoZXIudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3N0YXRlL3N0YXRlUXVldWVNYW5hZ2VyLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9zdGF0ZS9zdGF0ZVJlZ2lzdHJ5LnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9zdGF0ZS9zdGF0ZVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3JvdXRlci50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvdXJsL3VybE1hdGNoZXJGYWN0b3J5LnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS91cmwvdXJsUm91dGVyLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS91cmwvdXJsUnVsZS50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvdmlldy92aWV3LnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9nbG9iYWxzLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS91cmwvdXJsU2VydmljZS50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvaG9va3MvbGF6eUxvYWQudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3RyYW5zaXRpb24vdHJhbnNpdGlvbkV2ZW50VHlwZS50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvdmFuaWxsYS9xLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS92YW5pbGxhL2luamVjdG9yLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS92YW5pbGxhL2hhc2hMb2NhdGlvblNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3ZhbmlsbGEvbWVtb3J5TG9jYXRpb25TZXJ2aWNlLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS92YW5pbGxhL3B1c2hTdGF0ZUxvY2F0aW9uU2VydmljZS50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvdmFuaWxsYS9tZW1vcnlMb2NhdGlvbkNvbmZpZy50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvdmFuaWxsYS9icm93c2VyTG9jYXRpb25Db25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vdGVzdC9tYWluLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hbmd1bGFyL2FuZ3VsYXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2FuZ3VsYXItbW9ja3MvYW5ndWxhci1tb2Nrcy5qcyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvYW5ndWxhci50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvc3RhdGVidWlsZGVycy92aWV3cy50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvdGVtcGxhdGVGYWN0b3J5LnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9zdGF0ZVByb3ZpZGVyLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9zdGF0ZWJ1aWxkZXJzL29uRW50ZXJFeGl0UmV0YWluLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9sb2NhdGlvblNlcnZpY2VzLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy91cmxSb3V0ZXJQcm92aWRlci50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvc2VydmljZXMudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9hbmd1bGFyanMvc3JjL2RpcmVjdGl2ZXMvc3RhdGVEaXJlY3RpdmVzLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9kaXJlY3RpdmVzL3ZpZXdEaXJlY3RpdmUudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9hbmd1bGFyanMvc3JjL3N0YXRlRmlsdGVycy50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvdmlld1Njcm9sbC50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL2luZGV4LnRzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL3BhcmFtcy9pbmRleC50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvcGF0aC9pbmRleC50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvc3RhdGUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL2hvb2tzL2NvcmVSZXNvbHZhYmxlcy50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvaG9va3MvcmVkaXJlY3RUby50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvaG9va3Mvb25FbnRlckV4aXRSZXRhaW4udHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL2hvb2tzL3Jlc29sdmUudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL2hvb2tzL3ZpZXdzLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9ob29rcy91cGRhdGVHbG9iYWxzLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9ob29rcy91cmwudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL2hvb2tzL2lnbm9yZWRUcmFuc2l0aW9uLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS9ob29rcy9pbnZhbGlkVHJhbnNpdGlvbi50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvdHJhbnNpdGlvbi9pbmRleC50cyIsIndlYnBhY2s6Ly8vQHVpcm91dGVyL2NvcmUvdXJsL2luZGV4LnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS92aWV3L2luZGV4LnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS92YW5pbGxhLnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS92YW5pbGxhL2luZGV4LnRzIiwid2VicGFjazovLy9AdWlyb3V0ZXIvY29yZS92YW5pbGxhL3BsdWdpbnMudHMiLCJ3ZWJwYWNrOi8vL0B1aXJvdXRlci9jb3JlL2ludGVyZmFjZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicHJlZGljYXRlc18xIiwiaG9mXzEiLCJjb3Jlc2VydmljZXNfMSIsInJvb3QiLCJzZWxmIiwiZ2xvYmFsIiwidGhpcyIsImFuZ3VsYXIiLCJfaW5BcnJheSIsImFycmF5Iiwib2JqIiwiaW5kZXhPZiIsIl9yZW1vdmVGcm9tIiwiaWR4Iiwic3BsaWNlIiwiX3B1c2hUbyIsImFyciIsInZhbCIsInB1c2giLCJwaWNrIiwicHJvcE5hbWVzIiwib2JqQ29weSIsIl9wcm9wIiwibWFwIiwiY29sbGVjdGlvbiIsImNhbGxiYWNrIiwidGFyZ2V0IiwiaXNBcnJheSIsImZvckVhY2giLCJpdGVtIiwicHVzaFIiLCJhc3NlcnRGbiIsInByZWRpY2F0ZU9yTWFwIiwiZXJyTXNnIiwicmVzdWx0IiwiRXJyb3IiLCJpc0Z1bmN0aW9uIiwiYXJyYXlUdXBsZXMiLCJhcmdzIiwiX2kiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJtYXhBcnJheUxlbiIsInJlZHVjZSIsIm1pbiIsIk1hdGgiLCJfZXh0ZW5kIiwidG9PYmoiLCJrZXlzIiwiaiIsIl9lcXVhbHMiLCJvMSIsIm8yIiwidDEiLCJhMSIsImEyIiwidHVwIiwiYWxsIiwiYiIsInQiLCJpc0RhdGUiLCJnZXRUaW1lIiwiaXNSZWdFeHAiLCJ0b1N0cmluZyIsImFueSIsImZuIiwia2V5IiwiZnJvbUpzb24iLCJKU09OIiwicGFyc2UiLCJiaW5kIiwidG9Kc29uIiwic3RyaW5naWZ5IiwiY2IiLCJfdGhpcyIsImV4dGVuZCIsImFzc2lnbiIsImVxdWFscyIsImlkZW50aXR5IiwieCIsIm5vb3AiLCJjcmVhdGVQcm94eUZ1bmN0aW9ucyIsInNvdXJjZSIsImZuTmFtZXMiLCJsYXRlYmluZCIsImJpbmRGdW5jdGlvbiIsImZuTmFtZSIsImFjYyIsImFwcGx5IiwiaW5oZXJpdCIsInBhcmVudCIsImV4dHJhIiwiY3JlYXRlIiwiaW5BcnJheSIsImN1cnJ5IiwicmVtb3ZlRnJvbSIsInB1c2hUbyIsImRlcmVnQWxsIiwiZnVuY3Rpb25zIiwic2xpY2UiLCJkZWZhdWx0cyIsIm9wdHMiLCJkZWZhdWx0c0xpc3QiLCJfZGVmYXVsdHNMaXN0IiwiY29uY2F0IiwicmV2ZXJzZSIsImRlZmF1bHRWYWxzIiwibWVyZ2VSIiwibWVtbyIsImFuY2VzdG9ycyIsImZpcnN0Iiwic2Vjb25kIiwicGF0aCIsIm9taXQiLCJmaWx0ZXIiLCJub3QiLCJwbHVjayIsInByb3BOYW1lIiwicHJvcCIsImFjY2VwdCIsImZpbmQiLCJtYXBPYmoiLCJ2YWx1ZXMiLCJhbGxUcnVlUiIsImVsZW0iLCJhbnlUcnVlUiIsInVubmVzdFIiLCJmbGF0dGVuUiIsInVuaXFSIiwidG9rZW4iLCJ1bm5lc3QiLCJmbGF0dGVuIiwiYXNzZXJ0UHJlZGljYXRlIiwiYXNzZXJ0TWFwIiwicGFpcnMiLCJhcHBseVBhaXJzIiwia2V5VmFsVHVwbGUiLCJ2YWx1ZSIsImlzU3RyaW5nIiwidGFpbCIsInVuZGVmaW5lZCIsImNvcHkiLCJzcmMiLCJkZXN0Iiwic2lsZW5jZVVuY2F1Z2h0SW5Qcm9taXNlIiwicHJvbWlzZSIsImNhdGNoIiwiZSIsInNpbGVudFJlamVjdGlvbiIsImVycm9yIiwic2VydmljZXMiLCIkcSIsInJlamVjdCIsInN0YXRlT2JqZWN0XzEiLCJ0b1N0ciIsInRpcyIsImlzVW5kZWZpbmVkIiwiaXNEZWZpbmVkIiwiaXNOdWxsIiwiaXNOdWxsT3JVbmRlZmluZWQiLCJvciIsImlzTnVtYmVyIiwiaXNPYmplY3QiLCJBcnJheSIsImlzU3RhdGUiLCJTdGF0ZU9iamVjdCIsImlzSW5qZWN0YWJsZSIsImhlYWQiLCJpc1Byb21pc2UiLCJhbmQiLCJwaXBlIiwiaW5pdGlhbF9hcmdzIiwiZnVuY19hcmdzX2xlbmd0aCIsImN1cnJpZWQiLCJjb21wb3NlIiwic3RhcnQiLCJmdW5jcyIsInByb3BFcSIsIl92YWwiLCJzcGxpdCIsImZuMSIsImZuMiIsImlzIiwiY3RvciIsImNvbnN0cnVjdG9yIiwiZXEiLCJvdGhlciIsInYiLCJpbnZva2UiLCJwYXR0ZXJuIiwic3RydWN0Iiwibm90SW1wbGVtZW50ZWQiLCJmbm5hbWUiLCIkaW5qZWN0b3IiLCJfX2V4cG9ydCIsInJlamVjdEZhY3RvcnlfMSIsImNvbW1vbl8xIiwidHJhbnNpdGlvbl8xIiwicmVzb2x2YWJsZV8xIiwiZnVuY3Rpb25Ub1N0cmluZyIsImZuU3RyIiwiZm5Ub1N0cmluZyIsIm5hbWVkRnVuY3Rpb25NYXRjaCIsIm1hdGNoIiwic3Vic3RyIiwiX2ZuIiwibWF4TGVuZ3RoIiwibWF4Iiwic3RyIiwicGFkU3RyaW5nIiwia2Vib2JTdHJpbmciLCJjYW1lbENhc2UiLCJyZXBsYWNlIiwiJDEiLCJ0b0xvd2VyQ2FzZSIsInN0cmluZ2lmeVBhdHRlcm5GbiIsInN0cmluZ2lmeVBhdHRlcm4iLCJpc1JlamVjdGlvbiIsIlJlamVjdGlvbiIsImlzUmVqZWN0aW9uUHJvbWlzZSIsIl90cmFuc2l0aW9uUmVqZWN0aW9uIiwiVHJhbnNpdGlvbiIsIlJlc29sdmFibGUiLCJzZWVuIiwiZm9ybWF0IiwiYmVmb3JlQWZ0ZXJTdWJzdHIiLCJjaGFyIiwiaG9zdFJlZ2V4IiwiUmVnRXhwIiwic3RyaXBMYXN0UGF0aEVsZW1lbnQiLCJzcGxpdEhhc2giLCJzcGxpdFF1ZXJ5Iiwic3BsaXRFcXVhbCIsInRyaW1IYXNoVmFsIiwic3BsaXRPbkRlbGltIiwiZGVsaW0iLCJyZSIsImpvaW5OZWlnaGJvcnNSIiwic3RyaW5nc18xIiwidWlWaWV3U3RyaW5nIiwidWl2aWV3Iiwic3RhdGUiLCJjcmVhdGlvbkNvbnRleHQiLCJpZCIsIiR0eXBlIiwiZnFuIiwibm9ybWFsaXplZENhdCIsImlucHV0IiwiQ2F0ZWdvcnkiLCJjb25zb2xlTG9nIiwiRnVuY3Rpb24iLCJjb25zb2xlIiwibG9nIiwiY29uc29sZXRhYmxlIiwidGFibGUiLCJfdGlkIiwiX3JpZCIsInRyYW5zTGJsIiwidHJhbnMiLCJUcmFjZSIsIl9lbmFibGVkIiwiYXBwcm94aW1hdGVEaWdlc3RzIiwiX3NldCIsImVuYWJsZWQiLCJjYXRlZ29yaWVzIiwiayIsInBhcnNlSW50IiwiaXNOYU4iLCJjYXRlZ29yeSIsImVuYWJsZSIsImRpc2FibGUiLCJ0cmFjZVRyYW5zaXRpb25TdGFydCIsIlRSQU5TSVRJT04iLCJ0cmFjZVRyYW5zaXRpb25JZ25vcmVkIiwidHJhY2VIb29rSW52b2NhdGlvbiIsInN0ZXAiLCJvcHRpb25zIiwiSE9PSyIsImV2ZW50IiwiY29udGV4dCIsInJlZ2lzdGVyZWRIb29rIiwidHJhY2VIb29rUmVzdWx0IiwiaG9va1Jlc3VsdCIsInRyYW5zaXRpb25PcHRpb25zIiwidHJhY2VSZXNvbHZlUGF0aCIsIndoZW4iLCJSRVNPTFZFIiwidHJhY2VSZXNvbHZhYmxlUmVzb2x2ZWQiLCJyZXNvbHZhYmxlIiwiZGF0YSIsInRyYWNlRXJyb3IiLCJyZWFzb24iLCJ0cmFjZVN1Y2Nlc3MiLCJmaW5hbFN0YXRlIiwidHJhY2VVSVZpZXdFdmVudCIsInZpZXdEYXRhIiwiVUlWSUVXIiwidHJhY2VVSVZpZXdDb25maWdVcGRhdGVkIiwidHJhY2VVSVZpZXdGaWxsIiwiaHRtbCIsInRyYWNlVmlld1N5bmMiLCJWSUVXQ09ORklHIiwidWl2aGVhZGVyIiwibWFwcGluZyIsIl9hIiwidWlWaWV3Iiwidmlld0NvbmZpZyIsInVpdiIsImNmZyIsInZpZXdEZWNsIiwiJGNvbnRleHQiLCIkbmFtZSIsIl9iIiwic29ydCIsImEiLCJsb2NhbGVDb21wYXJlIiwidHJhY2VWaWV3U2VydmljZUV2ZW50IiwidmlldyIsIiRpZCIsIiR1aVZpZXdOYW1lIiwiJHVpVmlld0NvbnRleHRBbmNob3IiLCJ2aWV3Q29uZmlnU3RyaW5nIiwidHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50IiwidHJhY2UiLCJSZWplY3RUeXBlIiwidHlwZSIsIm1lc3NhZ2UiLCJkZXRhaWwiLCJ0aGVuIiwic3VwZXJzZWRlZCIsInJlamVjdGlvbiIsIlNVUEVSU0VERUQiLCJyZWRpcmVjdGVkIiwiaW52YWxpZCIsIklOVkFMSUQiLCJpZ25vcmVkIiwiSUdOT1JFRCIsImFib3J0ZWQiLCJBQk9SVEVEIiwiZXJyb3JlZCIsIkVSUk9SIiwibm9ybWFsaXplIiwidG9Qcm9taXNlIiwiVHJhbnNpdGlvbkhvb2tQaGFzZSIsIlRyYW5zaXRpb25Ib29rU2NvcGUiLCJUYXJnZXRTdGF0ZSIsIl9zdGF0ZVJlZ2lzdHJ5IiwiX2lkZW50aWZpZXIiLCJfcGFyYW1zIiwiX29wdGlvbnMiLCJfZGVmaW5pdGlvbiIsIm1hdGNoZXIiLCJyZWxhdGl2ZSIsImlkZW50aWZpZXIiLCJwYXJhbXMiLCIkc3RhdGUiLCJleGlzdHMiLCJ2YWxpZCIsImJhc2UiLCJzdGF0ZU5hbWUiLCJ3aXRoU3RhdGUiLCJ3aXRoUGFyYW1zIiwibmV3UGFyYW1zIiwid2l0aE9wdGlvbnMiLCJuZXdPcHRzIiwiaXNEZWYiLCJEZWZUeXBlIiwicGFyYW1UeXBlXzEiLCJoYXNPd24iLCJpc1Nob3J0aGFuZCIsIlBhcmFtIiwiY29uZmlnIiwibG9jYXRpb24iLCJ1cmxNYXRjaGVyRmFjdG9yeSIsInVybFR5cGUiLCJwYXJhbVR5cGVzIiwiQ09ORklHIiwiUEFUSCIsIlNFQVJDSCIsIlBhcmFtVHlwZSIsImdldFR5cGUiLCJnZXRTdGF0aWNEZWZhdWx0VmFsdWUiLCIkJGZuIiwidW53cmFwU2hvcnRoYW5kIiwiYXJyYXlEZWZhdWx0cyIsImFycmF5UGFyYW1Ob21lbmNsYXR1cmUiLCJhcnJheU1vZGUiLCIkYXNBcnJheSIsImlzT3B0aW9uYWwiLCJkeW5hbWljIiwicmF3Iiwic3F1YXNoIiwiZGVmYXVsdFBvbGljeSIsImdldFNxdWFzaFBvbGljeSIsImRlZmF1bHRTcXVhc2hQb2xpY3kiLCJmcm9tIiwidG8iLCJjb25maWd1cmVkS2V5cyIsImdldFJlcGxhY2UiLCJwYXJhbVZhbHVlcyIsInBhcmFtc18xIiwicGFyYW0iLCJjaGFuZ2VkIiwidmFsdWVzMSIsInZhbHVlczIiLCJ2YWxpZGF0ZXMiLCJpc0RlZmF1bHRWYWx1ZSIsInR1cGxlIiwicmVwbGFjZVNwZWNpYWxWYWx1ZXMiLCJfZGVmYXVsdFZhbHVlQ2FjaGUiLCJkZWZhdWx0VmFsdWUiLCJnZXREZWZhdWx0VmFsdWUiLCIkbm9ybWFsaXplIiwiaXNTZWFyY2giLCJub3JtYWxpemVkIiwiZW5jb2RlZCIsImVuY29kZSIsImV4ZWMiLCJpbnRlcmZhY2VfMSIsInRyYWNlXzEiLCJ0YXJnZXRTdGF0ZV8xIiwiZGVmYXVsdE9wdGlvbnMiLCJjdXJyZW50IiwidHJhbnNpdGlvbiIsInRyYWNlRGF0YSIsIlRyYW5zaXRpb25Ib29rIiwic3RhdGVDb250ZXh0IiwiaXNTdXBlcnNlZGVkIiwiaG9va1BoYXNlIiwiUlVOIiwiaXNBY3RpdmUiLCJldmVudFR5cGUiLCJjaGFpbiIsImhvb2tzIiwid2FpdEZvciIsInByZXYiLCJuZXh0SG9vayIsImludm9rZUhvb2siLCJpbnZva2VIb29rcyIsImRvbmVDYWxsYmFjayIsInJlbWFpbmluZ0hvb2tzIiwicnVuQWxsSG9va3MiLCJob29rIiwibG9nRXJyb3IiLCJlcnIiLCJyb3V0ZXIiLCJzdGF0ZVNlcnZpY2UiLCJkZWZhdWx0RXJyb3JIYW5kbGVyIiwiX2RlcmVnaXN0ZXJlZCIsIm5vdEN1cnJlbnQiLCJnZXROb3RDdXJyZW50UmVqZWN0aW9uIiwiaGFuZGxlRXJyb3IiLCJnZXRFcnJvckhhbmRsZXIiLCJoYW5kbGVSZXN1bHQiLCJnZXRSZXN1bHRIYW5kbGVyIiwic3luY2hyb25vdXMiLCJpbnZva2VMaW1pdCIsImludm9rZUNvdW50IiwiZGVyZWdpc3RlciIsImhhbmRsZUhvb2tSZXN1bHQiLCJpc1RhcmdldFN0YXRlIiwiX2Rpc3Bvc2VkIiwiX2Fib3J0ZWQiLCJIQU5ETEVfUkVTVUxUIiwiTE9HX1JFSkVDVEVEX1JFU1VMVCIsIkxPR19FUlJPUiIsIlJFSkVDVF9FUlJPUiIsIlRIUk9XX0VSUk9SIiwicHJlZGljYXRlc18yIiwiZGVmYXVsdFJlc29sdmVQb2xpY3kiLCJhc3luYyIsImFyZzEiLCJyZXNvbHZlRm4iLCJkZXBzIiwicG9saWN5IiwicmVzb2x2ZWQiLCJsaXRlcmFsIiwiZ2V0UG9saWN5IiwidGhpc1BvbGljeSIsInN0YXRlUG9saWN5IiwicmVzb2x2ZVBvbGljeSIsInJlc29sdmUiLCJyZXNvbHZlQ29udGV4dCIsIm5vZGUiLCJmaW5kTm9kZSIsIm1heWJlV2FpdEZvclJ4Iiwib2JzZXJ2YWJsZSQiLCJjYWNoZWQiLCJjYWNoZSIsInRha2UiLCJnZXREZXBlbmRlbmNpZXMiLCJyZXNvbHZlZERlcHMiLCJyZXNvbHZlZFZhbHVlIiwiY2xvbmUiLCJmcm9tRGF0YSIsInRyYW5zaXRpb25Ib29rXzEiLCJob29rUmVnaXN0cnlfMSIsImhvb2tCdWlsZGVyXzEiLCJwYXRoVXRpbHNfMSIsInBhcmFtXzEiLCJyZXNvbHZlQ29udGV4dF8xIiwic3RhdGVTZWxmIiwiZnJvbVBhdGgiLCJ0YXJnZXRTdGF0ZSIsIl9kZWZlcnJlZCIsImRlZmVyIiwiX3JlZ2lzdGVyZWRIb29rcyIsIl9ob29rQnVpbGRlciIsIkhvb2tCdWlsZGVyIiwiZ2xvYmFscyIsIl90YXJnZXRTdGF0ZSIsInRyYW5zaXRpb25TZXJ2aWNlIiwiX3RyYW5zaXRpb25Db3VudCIsInRvUGF0aCIsIlBhdGhVdGlscyIsImJ1aWxkVG9QYXRoIiwiX3RyZWVDaGFuZ2VzIiwidHJlZUNoYW5nZXMiLCJyZWxvYWRTdGF0ZSIsImNyZWF0ZVRyYW5zaXRpb25Ib29rUmVnRm5zIiwib25DcmVhdGVIb29rcyIsImJ1aWxkSG9va3NGb3JQaGFzZSIsIkNSRUFURSIsImFwcGx5Vmlld0NvbmZpZ3MiLCJvbkJlZm9yZSIsImNyaXRlcmlhIiwib25TdGFydCIsIm9uRXhpdCIsIm9uUmV0YWluIiwib25FbnRlciIsIm9uRmluaXNoIiwib25TdWNjZXNzIiwib25FcnJvciIsIl9wbHVnaW5hcGkiLCJfZ2V0RXZlbnRzIiwibWFrZUV2ZW50IiwiZ2V0SG9va3MiLCJob29rTmFtZSIsImVudGVyaW5nU3RhdGVzIiwiZW50ZXJpbmciLCIkdmlldyIsIiRmcm9tIiwiJHRvIiwiY29tcGFyZSIsIm1hdGNoU3RhdGUiLCJwYXRobmFtZSIsImZyZWV6ZSIsImluamVjdG9yIiwicGF0aE5hbWUiLCJzdWJQYXRoIiwiUmVzb2x2ZUNvbnRleHQiLCJnZXRSZXNvbHZlVG9rZW5zIiwiZ2V0VG9rZW5zIiwiYWRkUmVzb2x2YWJsZSIsInRvcGF0aCIsInRhcmdldE5vZGUiLCJhZGRSZXNvbHZhYmxlcyIsInJlZGlyZWN0ZWRGcm9tIiwib3JpZ2luYWxUcmFuc2l0aW9uIiwicmYiLCJleGl0aW5nIiwicmV0YWluZWQiLCJ2aWV3cyIsInJlZGlyZWN0IiwicmVkaXJlY3RzIiwicmVkaXJlY3RPcHRzIiwibmV3T3B0aW9ucyIsIm5ld1RyYW5zaXRpb24iLCJvcmlnaW5hbEVudGVyaW5nTm9kZXMiLCJyZWRpcmVjdEVudGVyaW5nTm9kZXMiLCJtYXRjaGluZyIsIm5vbkR5bmFtaWNQYXJhbXMiLCJpbmNsdWRlcyIsInJlc29sdmFibGVzIiwiX2NoYW5nZWRQYXJhbXMiLCJ0YyIsInJlbG9hZCIsIm5vZGVTY2hlbWFzIiwicGFyYW1TY2hlbWEiLCJ0b1ZhbHVlcyIsImZyb21WYWx1ZXMiLCJzY2hlbWEiLCJ0b1ZhbHMiLCJmcm9tVmFscyIsImNoYW5nZXMiLCJfaWdub3JlZFJlYXNvbiIsInBlbmRpbmciLCJzYW1lIiwicGF0aEEiLCJwYXRoQiIsIm5ld1RDIiwicGVuZFRDIiwicnVuIiwiZ2V0SG9va3NGb3IiLCJwaGFzZSIsImFsbEJlZm9yZUhvb2tzIiwiQkVGT1JFIiwibGFzdFN0YXJ0ZWRUcmFuc2l0aW9uSWQiLCJ0cmFuc2l0aW9uSGlzdG9yeSIsImVucXVldWUiLCJhbGxSdW5Ib29rcyIsInN1Y2Nlc3MiLCJTVUNDRVNTIiwiX2Vycm9yIiwiYWJvcnQiLCJhYnN0cmFjdCIsInBhcmFtRGVmcyIsInBhcmFtZXRlcnMiLCJpbnZhbGlkUGFyYW1zIiwiaW52YWxpZFZhbHVlcyIsImpvaW4iLCJmcm9tU3RhdGVPck5hbWUiLCJ0b1N0YXRlT3JOYW1lIiwiYXZvaWRFbXB0eUhhc2giLCJkaVRva2VuIiwicGF0aE5vZGVfMSIsIm1ha2VUYXJnZXRTdGF0ZSIsInJlZ2lzdHJ5IiwiYnVpbGRQYXRoIiwidG9QYXJhbXMiLCJQYXRoTm9kZSIsImFwcGx5UmF3UGFyYW1zIiwiaW5oZXJpdFBhcmFtcyIsInN0YXRlcyIsInZpZXdEZWNscyIsInZpZXdDb25maWdzIiwiY3JlYXRlVmlld0NvbmZpZyIsInRvS2V5cyIsIm5vSW5oZXJpdCIsInRvTm9kZSIsInRvUGFyYW1WYWxzIiwiaW5jb21pbmdQYXJhbVZhbHMiLCJmcm9tUGFyYW1WYWxzIiwib3duUGFyYW1WYWxzIiwibm9kZTEiLCJub2RlMiIsImtlZXAiLCJyZXRhaW5lZFdpdGhUb1BhcmFtcyIsInJldGFpbmVkTm9kZSIsImNsb25lZCIsInBhcmFtc0ZuIiwiZG9uZSIsIm5vZGVBIiwibm9kZUIiLCJwcmVkaWNhdGUiLCJlbGVtZW50SWR4IiwiY29tbW9uXzIiLCJ3aGVucyIsInJlc29sdmVQb2xpY2llcyIsIkFMTF9XSEVOUyIsIkVBR0VSIiwiTEFaWSIsIkVBR0VSX1dIRU5TIiwiTkFUSVZFX0lOSkVDVE9SX1RPS0VOIiwiX3BhdGgiLCJyIiwiZ2V0UmVzb2x2YWJsZSIsInN1YkNvbnRleHQiLCJuZXdSZXNvbHZhYmxlcyIsInJlc29sdmVQYXRoIiwibWF0Y2hlZFdoZW5zIiwibWF0Y2hlc1BvbGljeSIsImFjY2VwdGVkVmFscyIsIndoZW5PckFzeW5jIiwicHJvbWlzZXMiLCJub2RlUmVzb2x2YWJsZXMiLCJub3dhaXQiLCJ3YWl0IiwiZ2V0UmVzdWx0IiwiX2luamVjdG9yIiwiVUlJbmplY3RvckltcGwiLCJhdmFpbGFibGVSZXNvbHZhYmxlcyIsIl9ub2RlIiwicmVzIiwiZnJvbUluamVjdG9yIiwiZ2V0TmF0aXZlIiwibmF0aXZlIiwiZ2V0QXN5bmMiLCJxdW90ZVJlZ0V4cCIsInN1cnJvdW5kUGF0dGVybiIsInNwbGl0T25TbGFzaCIsIlVybE1hdGNoZXIiLCJwYXJhbUZhY3RvcnkiLCJfY2FjaGUiLCJfY2hpbGRyZW4iLCJfc2VnbWVudHMiLCJfY29tcGlsZWQiLCJzdHJpY3QiLCJjYXNlSW5zZW5zaXRpdmUiLCJwYXJhbU1hcCIsIm1hdGNoQXJyYXkiLCJzZWdtZW50IiwicGxhY2Vob2xkZXIiLCJzZWFyY2hQbGFjZWhvbGRlciIsInBhdHRlcm5zIiwibGFzdCIsImNoZWNrUGFyYW1FcnJvcnMiLCJuYW1lVmFsaWRhdG9yIiwidGVzdCIsIm1hdGNoRGV0YWlscyIsInJlZ2V4cCIsInN1YnN0cmluZyIsImluZGV4IiwibGFzdEluZGV4Iiwic2VhcmNoIiwiZnJvbVNlYXJjaCIsIl9wYXR0ZXJuIiwiZW5jb2RlRGFzaGVzIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY2hhckNvZGVBdCIsInRvVXBwZXJDYXNlIiwicGF0aFNlZ21lbnRzQW5kUGFyYW1zIiwic3RhdGljU2VnbWVudHMiLCJwYXRoUGFyYW1zIiwicXVlcnlQYXJhbXMiLCJ3ZWlnaHRzIiwic2VnbWVudHMiLCJ3ZWlnaHRzQSIsIndlaWdodHNCIiwicGFkVmFsIiwibGVuIiwicGFkQXJyYXlzIiwiY21wIiwiX3BhaXJzIiwiYXBwZW5kIiwidXJsIiwiaXNSb290IiwiaGFzaCIsInJldmVyc2VTdHJpbmciLCJhbGxSZXZlcnNlZCIsImFsbFBhcmFtcyIsInNlYXJjaFBhcmFtcyIsIm5QYXRoU2VnbWVudHMiLCJ1cmxtIiwiZGVjb2RlIiwicGFyYW1ldGVyIiwiZmluZFBhcmFtIiwicGFyYW1EZWYiLCJ1cmxNYXRjaGVycyIsImdldERldGFpbHMiLCJpc1ZhbGlkIiwicGF0aFN0cmluZyIsInF1ZXJ5U3RyaW5nIiwicGFyYW1EZXRhaWxzIiwidXRpbHNfMSIsIkJhc2VMb2NhdGlvblNlcnZpY2VzIiwiZmlyZUFmdGVyVXBkYXRlIiwiX2xpc3RlbmVycyIsIl9saXN0ZW5lciIsImV2dCIsInBhcnNlVXJsIiwiX2dldCIsImdldFBhcmFtcyIsIl9sb2NhdGlvbiIsIl9oaXN0b3J5IiwiaGlzdG9yeSIsImJ1aWxkVXJsIiwib25DaGFuZ2UiLCJkaXNwb3NlIiwiZ2xvYl8xIiwic3RhdGVEZWNsIiwiaXNTdGF0ZUNsYXNzIiwiJCRzdGF0ZSIsIl9fc3RhdGVPYmplY3RDYWNoZSIsIm5hbWVHbG9iIiwiR2xvYiIsImZyb21TdHJpbmciLCJyZWYiLCJtYXRjaGluZ0tleXMiLCJ0ZXh0IiwiZ2xvYiIsInJlZ2V4cFN0cmluZyIsInNlZyIsIm1hdGNoZXMiLCJRdWV1ZSIsIl9pdGVtcyIsIl9saW1pdCIsIl9ldmljdExpc3RlbmVycyIsIm9uRXZpY3QiLCJpdGVtcyIsImV2aWN0Iiwic2hpZnQiLCJkZXF1ZXVlIiwic2l6ZSIsImNsZWFyIiwicmVtb3ZlIiwicGVla1RhaWwiLCJwZWVrSGVhZCIsImNyaXRlcmlvbiIsInRvTWF0Y2giLCJfc3RhdGUiLCJnbG9iU3RyaW5ncyIsIlJlZ2lzdGVyZWRIb29rIiwidHJhblN2YyIsIm1hdGNoQ3JpdGVyaWEiLCJyZW1vdmVIb29rRnJvbVJlZ2lzdHJ5IiwicHJpb3JpdHkiLCJfbWF0Y2hpbmdOb2RlcyIsIm5vZGVzIiwiX2dldERlZmF1bHRNYXRjaENyaXRlcmlhIiwiX2dldFBhdGhUeXBlcyIsIl9nZXRNYXRjaGluZ05vZGVzIiwibW4iLCJwYXRodHlwZSIsImlzU3RhdGVIb29rIiwic2NvcGUiLCJTVEFURSIsImV2ZXJ5IiwicmVtb3ZlSG9va0ZuIiwiaG9va1JlZ2lzdHJhdGlvbkZuIiwibWF0Y2hPYmplY3QiLCJzdGF0ZU9yTm9kZSIsInBEZWYiLCJkaWZmIiwiZGVmIiwiJHN1YlBhdHRlcm4iLCJzdWIiLCJtb2RlIiwiYXJyYXlXcmFwIiwiYXJyYXlIYW5kbGVyIiwiYWxsVHJ1dGh5TW9kZSIsImFycmF5VW53cmFwIiwiYXJyYXlFcXVhbHNIYW5kbGVyIiwidmFsMSIsInZhbDIiLCJsZWZ0IiwicmlnaHQiLCJwYXJhbVR5cGVGbiIsIndyYXBwZXJGbiIsIiRhcnJheU1vZGUiLCJjb3JlUmVzb2x2YWJsZXNfMSIsInJlZGlyZWN0VG9fMSIsIm9uRW50ZXJFeGl0UmV0YWluXzEiLCJyZXNvbHZlXzEiLCJ2aWV3c18xIiwidXBkYXRlR2xvYmFsc18xIiwidXJsXzEiLCJsYXp5TG9hZF8xIiwidHJhbnNpdGlvbkV2ZW50VHlwZV8xIiwiaWdub3JlZFRyYW5zaXRpb25fMSIsImludmFsaWRUcmFuc2l0aW9uXzEiLCJkZWZhdWx0VHJhbnNPcHRzIiwibm90aWZ5IiwiY3VzdG9tIiwiVHJhbnNpdGlvblNlcnZpY2UiLCJfcm91dGVyIiwiX2V2ZW50VHlwZXMiLCJfY3JpdGVyaWFQYXRocyIsInZpZXdTZXJ2aWNlIiwiX2RlcmVnaXN0ZXJIb29rRm5zIiwiX2RlZmluZUNvcmVQYXRocyIsIl9kZWZpbmVDb3JlRXZlbnRzIiwiX3JlZ2lzdGVyQ29yZVRyYW5zaXRpb25Ib29rcyIsInN1Y2Nlc3NmdWxUcmFuc2l0aW9ucyIsInRyZWVDaGFuZ2VzQ2xlYW51cCIsIm9uQ3JlYXRlIiwiaG9va3NBcnJheSIsIlBoYXNlIiwiVEgiLCJwYXRocyIsIl9kZWZpbmVFdmVudCIsIl9kZWZpbmVQYXRoVHlwZSIsImhvb2tPcmRlciIsImNyaXRlcmlhTWF0Y2hQYXRoIiwicmV2ZXJzZVNvcnQiLCJUcmFuc2l0aW9uRXZlbnRUeXBlIiwiY21wQnlQaGFzZSIsImhvb2tTY29wZSIsImZucyIsImFkZENvcmVSZXNvbHZlcyIsInJlZ2lzdGVyQWRkQ29yZVJlc29sdmFibGVzIiwicmVnaXN0ZXJJZ25vcmVkVHJhbnNpdGlvbkhvb2siLCJyZWdpc3RlckludmFsaWRUcmFuc2l0aW9uSG9vayIsInJlZGlyZWN0VG8iLCJyZWdpc3RlclJlZGlyZWN0VG9Ib29rIiwicmVnaXN0ZXJPbkV4aXRIb29rIiwicmVnaXN0ZXJPblJldGFpbkhvb2siLCJyZWdpc3Rlck9uRW50ZXJIb29rIiwiZWFnZXJSZXNvbHZlIiwicmVnaXN0ZXJFYWdlclJlc29sdmVQYXRoIiwibGF6eVJlc29sdmUiLCJyZWdpc3RlckxhenlSZXNvbHZlU3RhdGUiLCJyZXNvbHZlQWxsIiwicmVnaXN0ZXJSZXNvbHZlUmVtYWluaW5nIiwibG9hZFZpZXdzIiwicmVnaXN0ZXJMb2FkRW50ZXJpbmdWaWV3cyIsImFjdGl2YXRlVmlld3MiLCJyZWdpc3RlckFjdGl2YXRlVmlld3MiLCJ1cGRhdGVHbG9iYWxzIiwicmVnaXN0ZXJVcGRhdGVHbG9iYWxTdGF0ZSIsInVwZGF0ZVVybCIsInJlZ2lzdGVyVXBkYXRlVXJsIiwibGF6eUxvYWQiLCJyZWdpc3RlckxhenlMb2FkSG9vayIsImtleVZhbHNUb09iamVjdFIiLCJhY2N1bSIsIm9yRW1wdHlTdHJpbmciLCJiZWZvcmVoYXNoIiwibG9jIiwic2VhcmNoT2JqZWN0IiwibG9jYXRpb25QbHVnaW5GYWN0b3J5IiwiaXNIdG1sNSIsInNlcnZpY2VDbGFzcyIsImNvbmZpZ3VyYXRpb25DbGFzcyIsInVpUm91dGVyIiwic2VydmljZSIsImxvY2F0aW9uU2VydmljZSIsImNvbmZpZ3VyYXRpb24iLCJsb2NhdGlvbkNvbmZpZyIsImJ1aWxkSG9va3MiLCJob29rVHlwZSIsIm1hdGNoaW5nSG9va3MiLCJnZXRNYXRjaGluZ0hvb2tzIiwiYmFzZUhvb2tPcHRpb25zIiwidHJhbnNpdGlvbkhvb2siLCJyZXZlcnNlRGVwdGhTb3J0IiwiZmFjdG9yIiwiZGVwdGhEZWx0YSIsInR1cGxlU29ydCIsImlzQ3JlYXRlIiwiJHRyYW5zaXRpb25zIiwicmVnIiwiV0FJVCIsIk5PV0FJVCIsIlJYV0FJVCIsIm1ha2VEZWZhdWx0VHlwZSIsIlBhcmFtVHlwZXMiLCJ0eXBlUXVldWUiLCJkZWZhdWx0VHlwZXMiLCJ0eXBlcyIsImRlZmluaXRpb24iLCJkZWZpbml0aW9uRm4iLCJfZmx1c2hUeXBlUXVldWUiLCJ2YWxUb1N0cmluZyIsImRlZmF1bHRUeXBlQmFzZSIsIlN0cmluZyIsInN0cmluZyIsInF1ZXJ5IiwiaW50IiwiYm9vbCIsIkJvb2xlYW4iLCJkYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJjYXB0dXJlIiwiRGF0ZSIsInZhbHVlT2YiLCJqc29uIiwiU3RhdGVQYXJhbXMiLCIkaW5oZXJpdCIsIiRjdXJyZW50IiwicGFyZW50UGFyYW1zIiwicGFyZW50cyIsImluaGVyaXRlZCIsImluaGVyaXRMaXN0IiwibmFtZUJ1aWxkZXIiLCJzZWxmQnVpbGRlciIsImRhdGFCdWlsZGVyIiwiZ2V0VXJsQnVpbGRlciIsIiR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyIiwic3RhdGVEZWMiLCJwYXJzZWQiLCJjaGFyQXQiLCJjb21waWxlIiwicGFyYW1Db25maWciLCJyZWxvYWRPblNlYXJjaCIsImlzTWF0Y2hlciIsIm5hdmlnYWJsZSIsImdldE5hdmlnYWJsZUJ1aWxkZXIiLCJnZXRQYXJhbXNCdWlsZGVyIiwidXJsUGFyYW1zIiwibm9uVXJsUGFyYW1zIiwiZnJvbUNvbmZpZyIsInBhdGhCdWlsZGVyIiwiaW5jbHVkZXNCdWlsZGVyIiwicmVzb2x2YWJsZXNCdWlsZGVyIiwicmVzb2x2ZU9iaiIsImdldFRva2VuIiwicHJvdmlkZSIsImxpdGVyYWwyUmVzb2x2YWJsZSIsInVzZUZhY3RvcnkiLCJkZXBlbmRlbmNpZXMiLCJ1c2VDbGFzcyIsInVzZVZhbHVlIiwidXNlRXhpc3RpbmciLCJ0dXBsZTJSZXNvbHZhYmxlIiwiYW5ub3RhdGUiLCJzdHJpY3REaSIsIml0ZW0yUmVzb2x2YWJsZSIsImRlY2wiLCJTdGF0ZUJ1aWxkZXIiLCJidWlsZGVycyIsInBhcmVudE5hbWUiLCJidWlsZGVyIiwiYnVpbGQiLCJwYXJlbnRGbiIsInBvcCIsIlN0YXRlTWF0Y2hlciIsIl9zdGF0ZXMiLCJpc1JlbGF0aXZlIiwic3RhdGVPck5hbWUiLCJtYXRjaEdsb2IiLCJpc1N0ciIsImJhc2VTdGF0ZSIsInNwbGl0TmFtZSIsInBhdGhMZW5ndGgiLCJyZWxOYW1lIiwiU3RhdGVRdWV1ZU1hbmFnZXIiLCIkcmVnaXN0cnkiLCIkdXJsUm91dGVyIiwibGlzdGVuZXJzIiwicXVldWUiLCJyZWdpc3RlciIsImZsdXNoIiwicmVnaXN0ZXJlZCIsIm9ycGhhbnMiLCJwcmV2aW91c1F1ZXVlTGVuZ3RoIiwiZ2V0U3RhdGUiLCJub3RpZnlMaXN0ZW5lcnMiLCJsaXN0ZW5lciIsIm5hbWVfMSIsIm9ycGhhbklkeCIsImV4aXN0aW5nU3RhdGUiLCJleGlzdGluZ0Z1dHVyZVN0YXRlIiwiYXR0YWNoUm91dGUiLCJydWxlIiwidXJsUnVsZUZhY3RvcnkiLCJzdGF0ZU1hdGNoZXJfMSIsInN0YXRlQnVpbGRlcl8xIiwic3RhdGVRdWV1ZU1hbmFnZXJfMSIsIlN0YXRlUmVnaXN0cnkiLCJzdGF0ZVF1ZXVlIiwidXJsUm91dGVyIiwiX3JlZ2lzdGVyUm9vdCIsIl9yb290IiwiIyIsIm9uU3RhdGVzQ2hhbmdlZCIsInN0YXRlRGVmaW5pdGlvbiIsIl9kZXJlZ2lzdGVyVHJlZSIsImdldENoaWxkcmVuIiwiY2hpbGRyZW4iLCJkZXJlZ2lzdGVyZWQiLCIkdXIiLCJydWxlcyIsInJlbW92ZVJ1bGUiLCJkZXJlZ2lzdGVyZWRTdGF0ZXMiLCJmb3VuZCIsImRlY29yYXRvciIsImZ1bmMiLCJxdWV1ZV8xIiwidHJhbnNpdGlvblNlcnZpY2VfMSIsIlN0YXRlU2VydmljZSIsImludmFsaWRDYWxsYmFja3MiLCJfZGVmYXVsdEVycm9ySGFuZGxlciIsIiRlcnJvciQiLCJzdGFjayIsImJvdW5kRm5zIiwiX2hhbmRsZUludmFsaWRUYXJnZXRTdGF0ZSIsInRvU3RhdGUiLCJmcm9tU3RhdGUiLCJzdGF0ZVJlZ2lzdHJ5IiwibGF0ZXN0VGhpbmciLCJsYXRlc3QiLCJjYWxsYmFja1F1ZXVlIiwiY2hlY2tGb3JSZWRpcmVjdCIsInRyYW5zaXRpb25UbyIsImludm9rZU5leHRDYWxsYmFjayIsIm5leHRDYWxsYmFjayIsIm9uSW52YWxpZCIsImdvIiwiZGVmYXV0R29PcHRzIiwidHJhbnNPcHRzIiwiZ2V0Q3VycmVudFBhdGgiLCJsYXRlc3RTdWNjZXNzIiwiY3VycmVudFBhdGgiLCJyZWplY3RlZFRyYW5zaXRpb25IYW5kbGVyIiwiaXNMYXRlc3QiLCJ1cGRhdGUiLCJlcnJvckhhbmRsZXIiLCJ0cmFuc2l0aW9uVG9Qcm9taXNlIiwiaW5jbHVkZSIsImhyZWYiLCJkZWZhdWx0SHJlZk9wdHMiLCJsb3NzeSIsImFic29sdXRlIiwibmF2IiwiaGFuZGxlciIsImxhenlMb2FkU3RhdGUiLCJ1cmxNYXRjaGVyRmFjdG9yeV8xIiwidXJsUm91dGVyXzEiLCJ2aWV3XzEiLCJzdGF0ZVJlZ2lzdHJ5XzEiLCJzdGF0ZVNlcnZpY2VfMSIsImdsb2JhbHNfMSIsInVybFNlcnZpY2VfMSIsIl9yb3V0ZXJJbnN0YW5jZSIsIlVJUm91dGVyIiwiVXJsU2VydmljZSIsImxvY2F0aW9uU2VydmljZVN0dWIiLCJsb2NhdGlvbkNvbmZpZ1N0dWIiLCJfZGlzcG9zYWJsZXMiLCJWaWV3U2VydmljZSIsIlVJUm91dGVyR2xvYmFscyIsIlVybE1hdGNoZXJGYWN0b3J5IiwiVXJsUm91dGVyIiwidXJsU2VydmljZSIsIl9wbHVnaW5zIiwiX3Jvb3RWaWV3Q29udGV4dCIsImRpc3Bvc2FibGUiLCJwbHVnaW4iLCJwbHVnaW5JbnN0YW5jZSIsImdldFBsdWdpbiIsInBsdWdpbk5hbWUiLCJ1cmxNYXRjaGVyXzEiLCJwYXJhbVR5cGVzXzEiLCJfaXNDYXNlSW5zZW5zaXRpdmUiLCJfaXNTdHJpY3RNb2RlIiwiX2RlZmF1bHRTcXVhc2hQb2xpY3kiLCJfZ2V0Q29uZmlnIiwic3RyaWN0TW9kZSIsIiRnZXQiLCJ1cmxSdWxlXzEiLCJkZWZhdWx0UnVsZVNvcnRGbiIsInByaW9yaXR5U29ydCIsIlVSTE1BVENIRVIiLCJSRUdFWFAiLCJSQVciLCJPVEhFUiIsInR5cGVTb3J0IiwidXJsTWF0Y2hlciIsInVybE1hdGNoZXJTb3J0IiwidXNlTWF0Y2hQcmlvcml0eSIsImlkU29ydCIsIl9zb3J0Rm4iLCJfcnVsZXMiLCJpbnRlcmNlcHREZWZlcnJlZCIsIl9pZCIsIl9zb3J0ZWQiLCJVcmxSdWxlRmFjdG9yeSIsImxpc3RlbiIsIl9vdGhlcndpc2VGbiIsImNvbXBhcmVGbiIsInN0YWJsZVNvcnQiLCJlbnN1cmVTb3J0ZWQiLCJhcnJPZldyYXBwZXIiLCJ3cmFwcGVyQSIsIndyYXBwZXJCIiwiY21wRGlmZiIsIndyYXBwZXIiLCJiZXN0Iiwid2VpZ2h0IiwibWF0Y2hQcmlvcml0eSIsInN5bmMiLCJkZWZhdWx0UHJldmVudGVkIiwiJHVybCIsIm5ld3VybCIsImFwcGx5UmVzdWx0IiwiX3N0b3BGbiIsInJlYWQiLCJodG1sNU1vZGUiLCJoYXNoUHJlZml4IiwiYmFzZUhyZWYiLCJhcHBlbmRCYXNlUGF0aCIsInNsYXNoIiwiY2ZnUG9ydCIsInBvcnQiLCJwcm90b2NvbCIsImhvc3QiLCJpc1VybFJ1bGUiLCJvdGhlcndpc2UiLCJoYW5kbGVyRm4iLCJnZXRIYW5kbGVyRm4iLCJpbml0aWFsIiwidXJsUGFydHMiLCJkZWZlckludGVyY2VwdCIsIndoYXQiLCJtYWtlUnVsZSIsIl93aGF0IiwiZnJvbVVybE1hdGNoZXIiLCJmcm9tUmVnRXhwIiwiQmFzZVVybFJ1bGUiLCJfaGFuZGxlciIsImRldGFpbHMiLCJvcHRpb25hbCIsInN0aWNreSIsIk51bWJlciIsIl91aVZpZXdzIiwiX3ZpZXdDb25maWdzIiwiX3ZpZXdDb25maWdGYWN0b3JpZXMiLCJfdmlld0NvbmZpZ0ZhY3RvcnkiLCJfcmVnaXN0ZXJlZFVJVmlld3MiLCJfYWN0aXZlVmlld0NvbmZpZ3MiLCJfb25TeW5jIiwibm9ybWFsaXplVUlWaWV3VGFyZ2V0IiwicmF3Vmlld05hbWUiLCJ2aWV3QXRDb250ZXh0IiwidWlWaWV3TmFtZSIsInVpVmlld0NvbnRleHRBbmNob3IiLCJyZWxhdGl2ZVZpZXdOYW1lU3VnYXIiLCJhbmNob3IiLCJfcm9vdENvbnRleHQiLCJ2aWV3VHlwZSIsImZhY3RvcnkiLCJjZmdGYWN0b3J5IiwiY2ZncyIsImRlYWN0aXZhdGVWaWV3Q29uZmlnIiwiYWN0aXZhdGVWaWV3Q29uZmlnIiwidWlWaWV3c0J5RnFuIiwidmlld0NvbmZpZ0RlcHRoIiwiY291bnQiLCJkZXB0aENvbXBhcmUiLCJkZXB0aEZuIiwicG9zTmVnIiwidWlWaWV3VHVwbGVzIiwic3RhdGVEZXB0aCIsIm1hdGNoaW5nQ29uZmlncyIsIm1hdGNoZWRWaWV3Q29uZmlncyIsInVubWF0Y2hlZENvbmZpZ1R1cGxlcyIsImNvbmZpZ1VwZGF0ZWQiLCJhbGxUdXBsZXMiLCJyZWdpc3RlclVJVmlldyIsInVpVmlld3MiLCJhdmFpbGFibGUiLCJhY3RpdmUiLCJ2YyIsInZjU2VnbWVudHMiLCJ1aXZTZWdtZW50cyIsIm5lZ09mZnNldCIsImZxblRvRmlyc3RTZWdtZW50IiwidWlWaWV3Q29udGV4dCIsInN0YXRlUGFyYW1zXzEiLCJtYWtlU3R1YiIsImxvY2F0aW9uU2VydmljZXNGbnMiLCJsb2NhdGlvbkNvbmZpZ0ZucyIsInVtZkZucyIsInJ1bGVzRm5zIiwic3luY0ZucyIsImxhdGVCaW5kIiwibG9jYXRpb25TZXJ2aWNlcyIsInVtZiIsInBhcnRzIiwibGF6eUxvYWRIb29rIiwib3JpZyIsImxhenlMb2FkRm4iLCJpbmRleF8xIiwiUHJvbWlzZSIsImRlZmVycmVkIiwiU1RSSVBfQ09NTUVOVFMiLCJBUkdVTUVOVF9OQU1FUyIsImhhcyIsImxvY2FscyIsImVuc3VyZUV4aXN0IiwiJGluamVjdCIsIkhhc2hMb2NhdGlvblNlcnZpY2UiLCJfc3VwZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiX19leHRlbmRzIiwidGl0bGUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiTWVtb3J5TG9jYXRpb25TZXJ2aWNlIiwiX3VybCIsImJhc2VMb2NhdGlvblNlcnZpY2VfMSIsIlB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSIsIl9jb25maWciLCJfZ2V0QmFzZVByZWZpeCIsImJhc2VQcmVmaXgiLCJleGFjdEJhc2VIcmVmTWF0Y2giLCJzdGFydHNXaXRoQmFzZSIsImZ1bGxVcmwiLCJyZXBsYWNlU3RhdGUiLCJwdXNoU3RhdGUiLCJNZW1vcnlMb2NhdGlvbkNvbmZpZyIsIl9iYXNlSHJlZiIsIl9wb3J0IiwiX3Byb3RvY29sIiwiX2hvc3QiLCJfaGFzaFByZWZpeCIsIm5ld3ZhbCIsIkJyb3dzZXJMb2NhdGlvbkNvbmZpZyIsIl9pc0h0bWw1IiwiaG9zdG5hbWUiLCJuZXdwcmVmaXgiLCJhcHBseURvY3VtZW50QmFzZUhyZWYiLCJiYXNlVGFnIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIm9yaWdpbiIsImNvZGUiLCJjb25zdGFudCIsIndpbmRvdyIsIm1pbkVyckNvbmZpZyIsIm9iamVjdE1heERlcHRoIiwiZXJyb3JIYW5kbGluZ0NvbmZpZyIsImlzVmFsaWRPYmplY3RNYXhEZXB0aCIsIk5hTiIsIm1heERlcHRoIiwibWluRXJyIiwiRXJyb3JDb25zdHJ1Y3RvciIsInJlZ2V4IiwiZXJyUmVnRXhwIiwicGFyYW1QcmVmaXgiLCJ0ZW1wbGF0ZSIsInRlbXBsYXRlQXJncyIsInNsaWNlQXJncyIsImFyZyIsInRvRGVidWdTdHJpbmciLCJtc2llIiwianFMaXRlIiwialF1ZXJ5IiwiYW5ndWxhck1vZHVsZSIsIlJFR0VYX1NUUklOR19SRUdFWFAiLCJWQUxJRElUWV9TVEFURV9QUk9QRVJUWSIsImxvd2VyY2FzZSIsInVwcGVyY2FzZSIsImdldFByb3RvdHlwZU9mIiwibmdNaW5FcnIiLCJ1aWQiLCJpc0FycmF5TGlrZSIsImlzV2luZG93IiwiaXRlcmF0b3IiLCJpc1ByaW1pdGl2ZSIsImlzQmxhbmtPYmplY3QiLCJmb3JFYWNoU29ydGVkIiwicmV2ZXJzZVBhcmFtcyIsIml0ZXJhdG9yRm4iLCJuZXh0VWlkIiwic2V0SGFzaEtleSIsImgiLCIkJGhhc2hLZXkiLCJiYXNlRXh0ZW5kIiwiZHN0Iiwib2JqcyIsImRlZXAiLCJpaSIsImpqIiwibm9kZU5hbWUiLCJjbG9uZU5vZGUiLCJpc0VsZW1lbnQiLCJtZXJnZSIsInRvSW50IiwiZG9jdW1lbnRNb2RlIiwiaXNOdW1iZXJOYU4iLCJudW0iLCIkIiwidmFsdWVGbiIsImhhc0N1c3RvbVRvU3RyaW5nIiwiaXNFcnJvciIsImlzU2NvcGUiLCIkZXZhbEFzeW5jIiwiJHdhdGNoIiwiaXNCb29sZWFuIiwiaXNQcm9taXNlTGlrZSIsIlRZUEVEX0FSUkFZX1JFR0VYUCIsInRyaW0iLCJlc2NhcGVGb3JSZWdleHAiLCJhdHRyIiwibm9kZU5hbWVfIiwiZWxlbWVudCIsImFycmF5UmVtb3ZlIiwiZGVzdGluYXRpb24iLCJzdGFja1NvdXJjZSIsInN0YWNrRGVzdCIsImNvcHlSZWN1cnNlIiwiY29weUVsZW1lbnQiLCJuZWVkc1JlY3Vyc2UiLCJidWZmZXIiLCJieXRlT2Zmc2V0IiwiY29waWVkIiwiQXJyYXlCdWZmZXIiLCJieXRlTGVuZ3RoIiwiVWludDhBcnJheSIsInNldCIsImNvcHlUeXBlIiwic2ltcGxlQ29tcGFyZSIsImtleVNldCIsImNyZWF0ZU1hcCIsImNzcCIsIm5nQ3NwRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJuZ0NzcEF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIm5vVW5zYWZlRXZhbCIsIm5vSW5saW5lU3R5bGUiLCJqcSIsIm5hbWVfIiwiZWwiLCJwcmVmaXgiLCJuZ0F0dHJQcmVmaXhlcyIsImFycmF5MSIsImFycmF5MiIsInN0YXJ0SW5kZXgiLCJjdXJyeUFyZ3MiLCJ0b0pzb25SZXBsYWNlciIsInByZXR0eSIsIkFMTF9DT0xPTlMiLCJ0aW1lem9uZVRvT2Zmc2V0IiwidGltZXpvbmUiLCJmYWxsYmFjayIsInJlcXVlc3RlZFRpbWV6b25lT2Zmc2V0IiwiYWRkRGF0ZU1pbnV0ZXMiLCJtaW51dGVzIiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJjb252ZXJ0VGltZXpvbmVUb0xvY2FsIiwiZGF0ZVRpbWV6b25lT2Zmc2V0IiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJzdGFydGluZ1RhZyIsImVtcHR5IiwiZWxlbUh0bWwiLCJub2RlVHlwZSIsIk5PREVfVFlQRV9URVhUIiwidHJ5RGVjb2RlVVJJQ29tcG9uZW50IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicGFyc2VLZXlWYWx1ZSIsImtleVZhbHVlIiwic3BsaXRQb2ludCIsInRvS2V5VmFsdWUiLCJhcnJheVZhbHVlIiwiZW5jb2RlVXJpUXVlcnkiLCJlbmNvZGVVcmlTZWdtZW50IiwicGN0RW5jb2RlU3BhY2VzIiwiaXNBdXRvQm9vdHN0cmFwQWxsb3dlZCIsInNjcmlwdCIsImN1cnJlbnRTY3JpcHQiLCJIVE1MU2NyaXB0RWxlbWVudCIsIlNWR1NjcmlwdEVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwiZ2V0TmFtZWRJdGVtIiwibGluayIsImNyZWF0ZUVsZW1lbnQiLCJhbGxvd0F1dG9Cb290c3RyYXAiLCJhbmd1bGFySW5pdCIsImJvb3RzdHJhcCIsImFwcEVsZW1lbnQiLCJoYXNBdHRyaWJ1dGUiLCJjYW5kaWRhdGUiLCJuZ0F0dHIiLCJnZXROZ0F0dHJpYnV0ZSIsImRvQm9vdHN0cmFwIiwidGFnIiwidW5zaGlmdCIsIiRwcm92aWRlIiwiZGVidWdJbmZvRW5hYmxlZCIsIiRjb21waWxlUHJvdmlkZXIiLCJjcmVhdGVJbmplY3RvciIsIiRhcHBseSIsIk5HX0VOQUJMRV9ERUJVR19JTkZPIiwiTkdfREVGRVJfQk9PVFNUUkFQIiwicmVzdW1lQm9vdHN0cmFwIiwiZXh0cmFNb2R1bGVzIiwicmVzdW1lRGVmZXJyZWRCb290c3RyYXAiLCJyZWxvYWRXaXRoRGVidWdJbmZvIiwiZ2V0VGVzdGFiaWxpdHkiLCJyb290RWxlbWVudCIsIlNOQUtFX0NBU0VfUkVHRVhQIiwic25ha2VfY2FzZSIsInNlcGFyYXRvciIsImxldHRlciIsInBvcyIsImJpbmRKUXVlcnlGaXJlZCIsImFzc2VydEFyZyIsImFzc2VydEFyZ0ZuIiwiYWNjZXB0QXJyYXlBbm5vdGF0aW9uIiwiYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkiLCJnZXRCbG9ja05vZGVzIiwiYmxvY2tOb2RlcyIsImVuZE5vZGUiLCJuZXh0U2libGluZyIsIk5PREVfVFlQRV9FTEVNRU5UIiwiTk9ERV9UWVBFX0NPTU1FTlQiLCJOT0RFX1RZUEVfRE9DVU1FTlQiLCJOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlQiLCJzaGFsbG93Q29weSIsInNlcmlhbGl6ZU9iamVjdCIsInZlcnNpb24iLCJmdWxsIiwibWFqb3IiLCJtaW5vciIsImRvdCIsImNvZGVOYW1lIiwiSlFMaXRlIiwiZXhwYW5kbyIsImpxQ2FjaGUiLCJqcUlkIiwiX2RhdGEiLCJEQVNIX0xPV0VSQ0FTRV9SRUdFWFAiLCJNU19IQUNLX1JFR0VYUCIsIk1PVVNFX0VWRU5UX01BUCIsIm1vdXNlbGVhdmUiLCJtb3VzZWVudGVyIiwianFMaXRlTWluRXJyIiwiZm5DYW1lbENhc2VSZXBsYWNlIiwia2ViYWJUb0NhbWVsIiwiU0lOR0xFX1RBR19SRUdFWFAiLCJIVE1MX1JFR0VYUCIsIlRBR19OQU1FX1JFR0VYUCIsIlhIVE1MX1RBR19SRUdFWFAiLCJ3cmFwTWFwIiwib3B0aW9uIiwidGhlYWQiLCJjb2wiLCJ0ciIsInRkIiwiX2RlZmF1bHQiLCJqcUxpdGVJc1RleHROb2RlIiwianFMaXRlQWNjZXB0c0RhdGEiLCJqcUxpdGVCdWlsZEZyYWdtZW50IiwidG1wIiwid3JhcCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNyZWF0ZVRleHROb2RlIiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJsYXN0Q2hpbGQiLCJjaGlsZE5vZGVzIiwiZmlyc3RDaGlsZCIsInRleHRDb250ZW50Iiwib3B0Z3JvdXAiLCJ0Ym9keSIsInRmb290IiwiY29sZ3JvdXAiLCJjYXB0aW9uIiwidGgiLCJqcUxpdGVDb250YWlucyIsIk5vZGUiLCJjb250YWlucyIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiYXJnSXNTdHJpbmciLCJqcUxpdGVBZGROb2RlcyIsImpxTGl0ZVJlYWR5IiwianFMaXRlQ2xvbmUiLCJqcUxpdGVEZWFsb2MiLCJvbmx5RGVzY2VuZGFudHMiLCJjbGVhbkRhdGEiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXNFbXB0eU9iamVjdCIsInJlbW92ZUlmRW1wdHlEYXRhIiwiZXhwYW5kb0lkIiwibmczMzkiLCJleHBhbmRvU3RvcmUiLCJldmVudHMiLCJqcUxpdGVPZmYiLCJ1bnN1cHBvcnRlZCIsImpxTGl0ZUV4cGFuZG9TdG9yZSIsImhhbmRsZSIsInJlbW92ZUhhbmRsZXIiLCJsaXN0ZW5lckZucyIsImpxTGl0ZVJlbW92ZURhdGEiLCJjcmVhdGVJZk5lY2Vzc2FyeSIsImpxTGl0ZURhdGEiLCJpc1NpbXBsZVNldHRlciIsImlzU2ltcGxlR2V0dGVyIiwibWFzc0dldHRlciIsImpxTGl0ZUhhc0NsYXNzIiwic2VsZWN0b3IiLCJqcUxpdGVSZW1vdmVDbGFzcyIsImNzc0NsYXNzZXMiLCJzZXRBdHRyaWJ1dGUiLCJleGlzdGluZ0NsYXNzZXMiLCJuZXdDbGFzc2VzIiwiY3NzQ2xhc3MiLCJqcUxpdGVBZGRDbGFzcyIsImVsZW1lbnRzIiwianFMaXRlQ29udHJvbGxlciIsImpxTGl0ZUluaGVyaXRlZERhdGEiLCJkb2N1bWVudEVsZW1lbnQiLCJuYW1lcyIsInBhcmVudE5vZGUiLCJqcUxpdGVFbXB0eSIsInJlbW92ZUNoaWxkIiwianFMaXRlUmVtb3ZlIiwia2VlcERhdGEiLCJ0cmlnZ2VyIiwicmVhZHlTdGF0ZSIsInNldFRpbWVvdXQiLCJKUUxpdGVQcm90b3R5cGUiLCJyZWFkeSIsIkJPT0xFQU5fQVRUUiIsIkJPT0xFQU5fRUxFTUVOVFMiLCJBTElBU0VEX0FUVFIiLCJuZ01pbmxlbmd0aCIsIm5nTWF4bGVuZ3RoIiwibmdNaW4iLCJuZ01heCIsIm5nUGF0dGVybiIsIm5nU3RlcCIsImdldEJvb2xlYW5BdHRyTmFtZSIsImJvb2xlYW5BdHRyIiwiZGVmYXVsdEhhbmRsZXJXcmFwcGVyIiwic3BlY2lhbE1vdXNlSGFuZGxlcldyYXBwZXIiLCJyZWxhdGVkIiwicmVsYXRlZFRhcmdldCIsIiQkanFMaXRlUHJvdmlkZXIiLCJoYXNDbGFzcyIsImNsYXNzZXMiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiaGFzaEtleSIsIm5leHRVaWRGbiIsIm9ialR5cGUiLCJyZW1vdmVEYXRhIiwiaGFzRGF0YSIsImluaGVyaXRlZERhdGEiLCJpc29sYXRlU2NvcGUiLCJjb250cm9sbGVyIiwicmVtb3ZlQXR0ciIsInJlbW92ZUF0dHJpYnV0ZSIsImNzcyIsImNzc0tlYmFiVG9DYW1lbCIsInN0eWxlIiwicmV0IiwibG93ZXJjYXNlZE5hbWUiLCJpc0Jvb2xlYW5BdHRyIiwiZ2V0VGV4dCIsIiRkdiIsIm11bHRpcGxlIiwic2VsZWN0ZWQiLCJhcmcyIiwibm9kZUNvdW50Iiwibm9kZVZhbHVlIiwib24iLCJldmVudEhhbmRsZXIiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJldmVudEZucyIsImV2ZW50Rm5zTGVuZ3RoIiwiaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkIiwib3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJzdG9wUHJvcGFnYXRpb24iLCJpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCIsImhhbmRsZXJXcmFwcGVyIiwic3BlY2lhbEhhbmRsZXJXcmFwcGVyIiwiY3JlYXRlRXZlbnRIYW5kbGVyIiwiYWRkSGFuZGxlciIsIm5vRXZlbnRMaXN0ZW5lciIsIm9mZiIsIm9uZSIsIm9uRm4iLCJyZXBsYWNlV2l0aCIsInJlcGxhY2VOb2RlIiwiaW5zZXJ0QmVmb3JlIiwicmVwbGFjZUNoaWxkIiwiY29udGVudHMiLCJjb250ZW50RG9jdW1lbnQiLCJjaGlsZCIsInByZXBlbmQiLCJ3cmFwTm9kZSIsImRldGFjaCIsImFmdGVyIiwibmV3RWxlbWVudCIsInRvZ2dsZUNsYXNzIiwiY29uZGl0aW9uIiwiY2xhc3NOYW1lIiwiY2xhc3NDb25kaXRpb24iLCJuZXh0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidHJpZ2dlckhhbmRsZXIiLCJleHRyYVBhcmFtZXRlcnMiLCJkdW1teUV2ZW50IiwiZXZlbnRGbnNDb3B5IiwiaGFuZGxlckFyZ3MiLCJldmVudE5hbWUiLCJwcmV2ZW50RGVmYXVsdCIsImFyZzMiLCJ1bmJpbmQiLCJuYW5LZXkiLCJOZ01hcFNoaW0iLCJfa2V5cyIsIl92YWx1ZXMiLCJfbGFzdEtleSIsIl9sYXN0SW5kZXgiLCJfaWR4IiwiX3RyYW5zZm9ybUtleSIsImRlbGV0ZSIsIk5nTWFwIiwiJCRNYXBQcm92aWRlciIsIkFSUk9XX0FSRyIsIkZOX0FSR1MiLCJGTl9BUkdfU1BMSVQiLCJGTl9BUkciLCIkaW5qZWN0b3JNaW5FcnIiLCJzdHJpbmdpZnlGbiIsImV4dHJhY3RBcmdzIiwiZm5UZXh0IiwibW9kdWxlc1RvTG9hZCIsIklOU1RBTlRJQVRJTkciLCJwcm92aWRlclN1ZmZpeCIsImxvYWRlZE1vZHVsZXMiLCJwcm92aWRlckNhY2hlIiwicHJvdmlkZXIiLCJzdXBwb3J0T2JqZWN0IiwiaW5zdGFudGlhdGUiLCJpbnN0YW5jZUNhY2hlIiwic2VydmljZU5hbWUiLCJkZWNvckZuIiwib3JpZ1Byb3ZpZGVyIiwicHJvdmlkZXJJbmplY3RvciIsIm9yaWckZ2V0Iiwib3JpZ0luc3RhbmNlIiwiaW5zdGFuY2VJbmplY3RvciIsIiRkZWxlZ2F0ZSIsImNyZWF0ZUludGVybmFsSW5qZWN0b3IiLCJjYWxsZXIiLCJwcm90b0luc3RhbmNlSW5qZWN0b3IiLCJydW5CbG9ja3MiLCJsb2FkTW9kdWxlcyIsImxvYWROZXdNb2R1bGVzIiwibW9kcyIsImRlbGVnYXRlIiwicHJvdmlkZXJfIiwiZmFjdG9yeUZuIiwiZW5mb3JjZSIsImVuZm9yY2VSZXR1cm5WYWx1ZSIsIm1vZHVsZUZuIiwicmVxdWlyZXMiLCJfcnVuQmxvY2tzIiwicnVuSW52b2tlUXVldWUiLCJfaW52b2tlUXVldWUiLCJfY29uZmlnQmxvY2tzIiwiaW52b2tlQXJncyIsImdldFNlcnZpY2UiLCJpbmplY3Rpb25BcmdzIiwiJCRhbm5vdGF0ZSIsIiQkbmdJc0NsYXNzIiwiaXNDbGFzcyIsIlR5cGUiLCIkQW5jaG9yU2Nyb2xsUHJvdmlkZXIiLCJhdXRvU2Nyb2xsaW5nRW5hYmxlZCIsImRpc2FibGVBdXRvU2Nyb2xsaW5nIiwiJHdpbmRvdyIsIiRsb2NhdGlvbiIsIiRyb290U2NvcGUiLCJzY3JvbGxUbyIsInNjcm9sbEludG9WaWV3Iiwib2Zmc2V0Iiwic2Nyb2xsIiwieU9mZnNldCIsImdldENvbXB1dGVkU3R5bGUiLCJwb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImJvdHRvbSIsImdldFlPZmZzZXQiLCJlbGVtVG9wIiwidG9wIiwic2Nyb2xsQnkiLCJlbG0iLCJsaXN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRFbGVtZW50c0J5TmFtZSIsInNvbWUiLCJuZXdWYWwiLCJvbGRWYWwiLCJhY3Rpb24iLCJ3aW4iLCJhbm9uRm4iLCJ1bmRlcnNjb3JlIiwiJGFuaW1hdGVNaW5FcnIiLCJFTEVNRU5UX05PREUiLCJtZXJnZUNsYXNzZXMiLCJwcmVwYXJlQW5pbWF0ZU9wdGlvbnMiLCIkJENvcmVBbmltYXRlSnNQcm92aWRlciIsIiQkQ29yZUFuaW1hdGVRdWV1ZVByb3ZpZGVyIiwicG9zdERpZ2VzdFF1ZXVlIiwicG9zdERpZ2VzdEVsZW1lbnRzIiwiJCRBbmltYXRlUnVubmVyIiwicGluIiwiZG9tT3BlcmF0aW9uIiwiYWRkIiwiY2xhc3Nlc0FkZGVkIiwidXBkYXRlRGF0YSIsImNsYXNzZXNSZW1vdmVkIiwiJCRwb3N0RGlnZXN0IiwiaGFuZGxlQ1NTQ2xhc3NDaGFuZ2VzIiwiYWRkUmVtb3ZlQ2xhc3Nlc1Bvc3REaWdlc3QiLCJydW5uZXIiLCJjb21wbGV0ZSIsImV4aXN0aW5nIiwia2xhc3MiLCJzcGxpdENsYXNzZXMiLCJ0b0FkZCIsInRvUmVtb3ZlIiwic3RhdHVzIiwiJEFuaW1hdGVQcm92aWRlciIsImNsYXNzTmFtZUZpbHRlciIsImN1c3RvbUZpbHRlciIsIiQkcmVnaXN0ZXJlZEFuaW1hdGlvbnMiLCJmaWx0ZXJGbiIsImV4cHJlc3Npb24iLCIkJGFuaW1hdGVRdWV1ZSIsImRvbUluc2VydCIsInBhcmVudEVsZW1lbnQiLCJhZnRlckVsZW1lbnQiLCJhZnRlck5vZGUiLCJleHRyYWN0RWxlbWVudE5vZGUiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiY2FuY2VsIiwiZW50ZXIiLCJtb3ZlIiwibGVhdmUiLCJhZGRjbGFzcyIsInNldENsYXNzIiwiYW5pbWF0ZSIsInRlbXBDbGFzc2VzIiwiJCRBbmltYXRlQXN5bmNSdW5GYWN0b3J5UHJvdmlkZXIiLCIkJHJBRiIsIndhaXRRdWV1ZSIsIndhaXRGb3JUaWNrIiwicGFzc2VkIiwiJCRBbmltYXRlUnVubmVyRmFjdG9yeVByb3ZpZGVyIiwiJHNuaWZmZXIiLCIkJGFuaW1hdGVBc3luY1J1biIsIiQkaXNEb2N1bWVudEhpZGRlbiIsIiR0aW1lb3V0IiwiQW5pbWF0ZVJ1bm5lciIsInNldEhvc3QiLCJyYWZUaWNrIiwiX2RvbmVDYWxsYmFja3MiLCJfdGljayIsInRpbWVvdXRUaWNrIiwicmVzcG9uc2UiLCJydW5uZXJzIiwib25Qcm9ncmVzcyIsInByb2dyZXNzIiwiZ2V0UHJvbWlzZSIsInJlc29sdmVIYW5kbGVyIiwicmVqZWN0SGFuZGxlciIsImZpbmFsbHkiLCJwYXVzZSIsInJlc3VtZSIsImVuZCIsIl9yZXNvbHZlIiwiJENvcmVBbmltYXRlQ3NzUHJvdmlkZXIiLCJpbml0aWFsT3B0aW9ucyIsIiQkcHJlcGFyZWQiLCJjbGVhbnVwU3R5bGVzIiwiY2xvc2VkIiwiYXBwbHlBbmltYXRpb25Db250ZW50cyIsIiRCcm93c2VyUHJvdmlkZXIiLCIkbG9nIiwiJGRvY3VtZW50IiwiY2xlYXJUaW1lb3V0IiwicGVuZGluZ0RlZmVySWRzIiwiaXNNb2NrIiwib3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQiLCJvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MiLCJjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCIsIiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QiLCIkJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50Iiwibm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cyIsImNhY2hlZFN0YXRlIiwibGFzdEhpc3RvcnlTdGF0ZSIsImxhc3RCcm93c2VyVXJsIiwiYmFzZUVsZW1lbnQiLCJwZW5kaW5nTG9jYXRpb24iLCJnZXRDdXJyZW50U3RhdGUiLCJjYWNoZVN0YXRlIiwic2FtZVN0YXRlIiwic2FtZUJhc2UiLCJzdHJpcEhhc2giLCJnZXRIYXNoIiwidXJsQ2hhbmdlTGlzdGVuZXJzIiwidXJsQ2hhbmdlSW5pdCIsImNhY2hlU3RhdGVBbmRGaXJlVXJsQ2hhbmdlIiwiZmlyZVN0YXRlT3JVcmxDaGFuZ2UiLCJsYXN0Q2FjaGVkU3RhdGUiLCJwcmV2TGFzdEhpc3RvcnlTdGF0ZSIsIm9uVXJsQ2hhbmdlIiwiJCRhcHBsaWNhdGlvbkRlc3Ryb3llZCIsIiQkY2hlY2tVcmxDaGFuZ2UiLCJkZWxheSIsInRpbWVvdXRJZCIsImRlZmVySWQiLCIkQ2FjaGVGYWN0b3J5UHJvdmlkZXIiLCJjYWNoZXMiLCJjYWNoZUZhY3RvcnkiLCJjYWNoZUlkIiwic3RhdHMiLCJjYXBhY2l0eSIsIk1BWF9WQUxVRSIsImxydUhhc2giLCJmcmVzaEVuZCIsInN0YWxlRW5kIiwicHV0IiwicmVmcmVzaCIsImxydUVudHJ5IiwicmVtb3ZlQWxsIiwiZGVzdHJveSIsImluZm8iLCJlbnRyeSIsIm5leHRFbnRyeSIsInByZXZFbnRyeSIsIiRUZW1wbGF0ZUNhY2hlUHJvdmlkZXIiLCIkY2FjaGVGYWN0b3J5IiwiJGNvbXBpbGVNaW5FcnIiLCJfVU5JTklUSUFMSVpFRF9WQUxVRSIsIiRDb21waWxlUHJvdmlkZXIiLCIkJHNhbml0aXplVXJpUHJvdmlkZXIiLCJoYXNEaXJlY3RpdmVzIiwiU3VmZml4IiwiQ09NTUVOVF9ESVJFQ1RJVkVfUkVHRVhQIiwiQ0xBU1NfRElSRUNUSVZFX1JFR0VYUCIsIkFMTF9PUl9OT1RISU5HX0FUVFJTIiwibWFrZU1hcCIsIlJFUVVJUkVfUFJFRklYX1JFR0VYUCIsIkVWRU5UX0hBTkRMRVJfQVRUUl9SRUdFWFAiLCJiaW5kaW5nQ2FjaGUiLCJwYXJzZUlzb2xhdGVCaW5kaW5ncyIsImRpcmVjdGl2ZU5hbWUiLCJpc0NvbnRyb2xsZXIiLCJMT0NBTF9SRUdFWFAiLCJiaW5kaW5ncyIsInNjb3BlTmFtZSIsImF0dHJOYW1lIiwicGFyc2VEaXJlY3RpdmVCaW5kaW5ncyIsImRpcmVjdGl2ZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJyZWdpc3RlckRpcmVjdGl2ZSIsImRpcmVjdGl2ZUZhY3RvcnkiLCJhc3NlcnRWYWxpZERpcmVjdGl2ZU5hbWUiLCIkZXhjZXB0aW9uSGFuZGxlciIsImRpcmVjdGl2ZXMiLCJyZXF1aXJlIiwiZ2V0RGlyZWN0aXZlUmVxdWlyZSIsInJlc3RyaWN0IiwiZ2V0RGlyZWN0aXZlUmVzdHJpY3QiLCIkJG1vZHVsZU5hbWUiLCJjb21wb25lbnQiLCJyZWdpc3RlckNvbXBvbmVudCIsIm1ha2VJbmplY3RhYmxlIiwidEVsZW1lbnQiLCJ0QXR0cnMiLCIkZWxlbWVudCIsIiRhdHRycyIsInRlbXBsYXRlVXJsIiwiZGRvIiwiY29udHJvbGxlckFzIiwiaWRlbnQiLCJDTlRSTF9SRUciLCJpZGVudGlmaWVyRm9yQ29udHJvbGxlciIsInRyYW5zY2x1ZGUiLCJhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCIsImltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCIsInN0cmljdENvbXBvbmVudEJpbmRpbmdzRW5hYmxlZCIsIlRUTCIsIm9uQ2hhbmdlc1R0bCIsImNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZENvbmZpZyIsImNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZCIsImNzc0NsYXNzRGlyZWN0aXZlc0VuYWJsZWRDb25maWciLCJjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkIiwiJGludGVycG9sYXRlIiwiJHRlbXBsYXRlUmVxdWVzdCIsIiRwYXJzZSIsIiRjb250cm9sbGVyIiwiJHNjZSIsIiRhbmltYXRlIiwib25DaGFuZ2VzUXVldWUiLCJTSU1QTEVfQVRUUl9OQU1FIiwic3BlY2lhbEF0dHJIb2xkZXIiLCJmbHVzaE9uQ2hhbmdlc1F1ZXVlIiwiQXR0cmlidXRlcyIsImF0dHJpYnV0ZXNUb0NvcHkiLCIkYXR0ciIsIiQkZWxlbWVudCIsInNhZmVBZGRDbGFzcyIsImRpcmVjdGl2ZU5vcm1hbGl6ZSIsIiRhZGRDbGFzcyIsImNsYXNzVmFsIiwiJHJlbW92ZUNsYXNzIiwiJHVwZGF0ZUNsYXNzIiwib2xkQ2xhc3NlcyIsInRva2VuRGlmZmVyZW5jZSIsIiRzZXQiLCJ3cml0ZUF0dHIiLCJib29sZWFuS2V5IiwiYWxpYXNlZEtleSIsIm9ic2VydmVyIiwidHJpbW1lZFNyY3NldCIsInJhd1VyaXMiLCJuYnJVcmlzV2l0aDJwYXJ0cyIsImZsb29yIiwiaW5uZXJJZHgiLCJnZXRUcnVzdGVkTWVkaWFVcmwiLCJsYXN0VHVwbGUiLCJhdHRyaWJ1dGUiLCJyZW1vdmVOYW1lZEl0ZW0iLCJzZXROYW1lZEl0ZW0iLCJzZXRTcGVjaWFsQXR0ciIsIiQkb2JzZXJ2ZXJzIiwiJG9ic2VydmUiLCJhdHRycyIsIiQkaW50ZXIiLCJzdGFydFN5bWJvbCIsImVuZFN5bWJvbCIsImRlbm9ybWFsaXplVGVtcGxhdGUiLCJOR19BVFRSX0JJTkRJTkciLCJNVUxUSV9FTEVNRU5UX0RJUl9SRSIsIiQkYWRkQmluZGluZ0luZm8iLCJiaW5kaW5nIiwiJCRhZGRCaW5kaW5nQ2xhc3MiLCIkJGFkZFNjb3BlSW5mbyIsImlzb2xhdGVkIiwibm9UZW1wbGF0ZSIsImRhdGFOYW1lIiwiJCRhZGRTY29wZUNsYXNzIiwiJCRjcmVhdGVDb21tZW50IiwiY29tbWVudCIsImNvbnRlbnQiLCJjcmVhdGVDb21tZW50IiwiJGNvbXBpbGVOb2RlcyIsInRyYW5zY2x1ZGVGbiIsIm1heFByaW9yaXR5IiwiaWdub3JlRGlyZWN0aXZlIiwicHJldmlvdXNDb21waWxlQ29udGV4dCIsImNvbXBvc2l0ZUxpbmtGbiIsImNvbXBpbGVOb2RlcyIsIm5hbWVzcGFjZSIsImNsb25lQ29ubmVjdEZuIiwibmVlZHNOZXdTY29wZSIsIiRwYXJlbnQiLCIkbmV3IiwiJGxpbmtOb2RlIiwicGFyZW50Qm91bmRUcmFuc2NsdWRlRm4iLCJ0cmFuc2NsdWRlQ29udHJvbGxlcnMiLCJmdXR1cmVQYXJlbnRFbGVtZW50IiwiJCRib3VuZFRyYW5zY2x1ZGUiLCJ3cmFwVGVtcGxhdGUiLCJjb250cm9sbGVyTmFtZSIsImluc3RhbmNlIiwibm9kZUxpc3QiLCIkcm9vdEVsZW1lbnQiLCJub2RlTGlua0ZuIiwiY2hpbGRMaW5rRm4iLCJsaW5rRm5Gb3VuZCIsIm5vZGVMaW5rRm5Gb3VuZCIsImxpbmtGbnMiLCJub3RMaXZlTGlzdCIsIm1lcmdlQ29uc2VjdXRpdmVUZXh0Tm9kZXMiLCJjb2xsZWN0RGlyZWN0aXZlcyIsImFwcGx5RGlyZWN0aXZlc1RvTm9kZSIsInRlcm1pbmFsIiwidHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQiLCJ0ZW1wbGF0ZU9uVGhpc0VsZW1lbnQiLCJjaGlsZFNjb3BlIiwiY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiIsInN0YWJsZU5vZGVMaXN0Iiwibm9kZUxpc3RMZW5ndGgiLCJjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbiIsInNpYmxpbmciLCJwcmV2aW91c0JvdW5kVHJhbnNjbHVkZUZuIiwiYm91bmRUcmFuc2NsdWRlRm4iLCJ0cmFuc2NsdWRlZFNjb3BlIiwiY2xvbmVGbiIsImNvbnRyb2xsZXJzIiwiY29udGFpbmluZ1Njb3BlIiwiJCR0cmFuc2NsdWRlZCIsImJvdW5kU2xvdHMiLCIkJHNsb3RzIiwic2xvdE5hbWUiLCJhdHRyc01hcCIsImFkZERpcmVjdGl2ZSIsIm5OYW1lIiwibmdBdHRyTmFtZSIsImlzTmdBdHRyIiwibkF0dHJzIiwiYXR0clN0YXJ0TmFtZSIsImF0dHJFbmROYW1lIiwiUFJFRklYX1JFR0VYUCIsIm11bHRpRWxlbWVudE1hdGNoIiwiZGlyZWN0aXZlSXNNdWx0aUVsZW1lbnQiLCJhZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUiLCJhbmltVmFsIiwiaW50ZXJwb2xhdGVGbiIsInRlbXBsYXRlTm9kZSIsInRlbXBsYXRlTm9kZVBhcmVudCIsImhhc0NvbXBpbGVQYXJlbnQiLCJleHByZXNzaW9ucyIsImFkZFRleHRJbnRlcnBvbGF0ZURpcmVjdGl2ZSIsImNvbGxlY3RDb21tZW50RGlyZWN0aXZlcyIsImJ5UHJpb3JpdHkiLCJncm91cFNjYW4iLCJhdHRyU3RhcnQiLCJhdHRyRW5kIiwiZGVwdGgiLCJncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlciIsImxpbmtGbiIsImNvbXBpbGF0aW9uR2VuZXJhdG9yIiwiZWFnZXIiLCJjb21waWxlZCIsImNvbXBpbGVOb2RlIiwidGVtcGxhdGVBdHRycyIsImpxQ29sbGVjdGlvbiIsIm9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSIsInByZUxpbmtGbnMiLCJwb3N0TGlua0ZucyIsIiR0ZW1wbGF0ZSIsImRpcmVjdGl2ZVZhbHVlIiwidGVybWluYWxQcmlvcml0eSIsIm5ld1Njb3BlRGlyZWN0aXZlIiwiY29udHJvbGxlckRpcmVjdGl2ZXMiLCJuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUiLCJ0ZW1wbGF0ZURpcmVjdGl2ZSIsIm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUiLCJoYXNUcmFuc2NsdWRlRGlyZWN0aXZlIiwiaGFzVGVtcGxhdGUiLCJoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSIsIiRjb21waWxlTm9kZSIsInJlcGxhY2VEaXJlY3RpdmUiLCJjaGlsZFRyYW5zY2x1ZGVGbiIsImRpZFNjYW5Gb3JNdWx0aXBsZVRyYW5zY2x1c2lvbiIsIm1pZ2h0SGF2ZU11bHRpcGxlVHJhbnNjbHVzaW9uRXJyb3IiLCIkJHN0YXJ0IiwiJCRlbmQiLCJhc3NlcnROb0R1cGxpY2F0ZSIsIiQkdGxiIiwiY2FuZGlkYXRlRGlyZWN0aXZlIiwic2Nhbm5pbmdJbmRleCIsInNsb3RzIiwic2xvdE1hcCIsImZpbGxlZFNsb3RzIiwiZWxlbWVudFNlbGVjdG9yIiwiZmlsbGVkIiwiJCRpc29sYXRlU2NvcGUiLCIkJG5ld1Njb3BlIiwicmVtb3ZlQ29tbWVudHMiLCJ0ZW1wbGF0ZU5hbWVzcGFjZSIsIm5ld1RlbXBsYXRlQXR0cnMiLCJ0ZW1wbGF0ZURpcmVjdGl2ZXMiLCJ1bnByb2Nlc3NlZERpcmVjdGl2ZXMiLCJtYXJrRGlyZWN0aXZlU2NvcGUiLCJtZXJnZVRlbXBsYXRlQXR0cmlidXRlcyIsImNvbXBpbGVUZW1wbGF0ZVVybCIsIiQkb3JpZ2luYWxEaXJlY3RpdmUiLCJhZGRMaW5rRm5zIiwicHJlIiwicG9zdCIsImNsb25lQW5kQW5ub3RhdGVGbiIsImxpbmtOb2RlIiwiY29udHJvbGxlclNjb3BlIiwiZWxlbWVudENvbnRyb2xsZXJzIiwic2NvcGVCaW5kaW5nSW5mbyIsImNsb25lQXR0YWNoRm4iLCJzY29wZVRvQ2hpbGQiLCJzbG90VHJhbnNjbHVkZUZuIiwiaXNTbG90RmlsbGVkIiwiY29udHJvbGxlcktleSIsIiRzY29wZSIsIiR0cmFuc2NsdWRlIiwiY29udHJvbGxlckluc3RhbmNlIiwic2V0dXBDb250cm9sbGVycyIsIiQkaXNvbGF0ZUJpbmRpbmdzIiwiaW5pdGlhbGl6ZURpcmVjdGl2ZUJpbmRpbmdzIiwicmVtb3ZlV2F0Y2hlcyIsIiRvbiIsImNvbnRyb2xsZXJEaXJlY3RpdmUiLCIkJGJpbmRpbmdzIiwiYmluZGluZ0luZm8iLCJnZXRDb250cm9sbGVycyIsIiRvbkNoYW5nZXMiLCJpbml0aWFsQ2hhbmdlcyIsIiRvbkluaXQiLCIkZG9DaGVjayIsIiRvbkRlc3Ryb3kiLCJpbnZva2VMaW5rRm4iLCIkcG9zdExpbmsiLCJpbmhlcml0VHlwZSIsIm5ld1Njb3BlIiwidERpcmVjdGl2ZXMiLCJzdGFydEF0dHJOYW1lIiwiZW5kQXR0ck5hbWUiLCJtdWx0aUVsZW1lbnQiLCJzcmNBdHRyIiwiZHN0QXR0ciIsImFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuIiwiYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuIiwibGlua1F1ZXVlIiwiYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZSIsIm9yaWdBc3luY0RpcmVjdGl2ZSIsImRlcml2ZWRTeW5jRGlyZWN0aXZlIiwidGVtcFRlbXBsYXRlQXR0cnMiLCJiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlIiwibGlua1Jvb3RFbGVtZW50IiwiJCRkZXN0cm95ZWQiLCJpZ25vcmVDaGlsZExpbmtGbiIsInByZXZpb3VzRGlyZWN0aXZlIiwid3JhcE1vZHVsZU5hbWVJZkRlZmluZWQiLCJtb2R1bGVOYW1lIiwidHJ1c3RlZENvbnRleHQiLCJhdHRyTm9ybWFsaXplZE5hbWUiLCJIVE1MIiwiUkVTT1VSQ0VfVVJMIiwiTUVESUFfVVJMIiwiVVJMIiwiZ2V0VHJ1c3RlZENvbnRleHQiLCJtdXN0SGF2ZUV4cHJlc3Npb24iLCJhbGxPck5vdGhpbmciLCJuZXdWYWx1ZSIsIiQkc2NvcGUiLCJvbGRWYWx1ZSIsImVsZW1lbnRzVG9SZW1vdmUiLCJuZXdOb2RlIiwiZmlyc3RFbGVtZW50VG9SZW1vdmUiLCJyZW1vdmVDb3VudCIsImoyIiwiYW5ub3RhdGlvbiIsInN0cmljdEJpbmRpbmdzQ2hlY2siLCJyZW1vdmVXYXRjaENvbGxlY3Rpb24iLCJyZWNvcmRDaGFuZ2VzIiwiY3VycmVudFZhbHVlIiwicHJldmlvdXNWYWx1ZSIsInRyaWdnZXJPbkNoYW5nZXNIb29rIiwiU2ltcGxlQ2hhbmdlIiwibGFzdFZhbHVlIiwicGFyZW50R2V0IiwicGFyZW50U2V0IiwicmVtb3ZlV2F0Y2giLCJwYXJlbnRWYWx1ZVdhdGNoIiwicGFyZW50VmFsdWUiLCIkc3RhdGVmdWwiLCIkd2F0Y2hDb2xsZWN0aW9uIiwiaXNMaXRlcmFsIiwiaW5pdGlhbFZhbHVlIiwicHJldmlvdXMiLCJpc0ZpcnN0Q2hhbmdlIiwiU1BFQ0lBTF9DSEFSU19SRUdFWFAiLCJfIiwic3RyMSIsInN0cjIiLCJ0b2tlbnMxIiwidG9rZW5zMiIsIm91dGVyIiwianFOb2RlcyIsIiRjb250cm9sbGVyTWluRXJyIiwiJENvbnRyb2xsZXJQcm92aWRlciIsImxhdGVyIiwiYmluZEZuVG9TY29wZSIsImxhc3RJbnN0YW5jZSIsImNvbnRyb2xsZXJQcm90b3R5cGUiLCJhZGRJZGVudGlmaWVyIiwiJERvY3VtZW50UHJvdmlkZXIiLCIkJElzRG9jdW1lbnRIaWRkZW5Qcm92aWRlciIsImRvYyIsImhpZGRlbiIsImNoYW5nZUxpc3RlbmVyIiwiJEV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlciIsImV4Y2VwdGlvbiIsImNhdXNlIiwiJCRGb3JjZVJlZmxvd1Byb3ZpZGVyIiwiZG9tTm9kZSIsImJvZHkiLCJvZmZzZXRXaWR0aCIsIkFQUExJQ0FUSU9OX0pTT04iLCJDT05URU5UX1RZUEVfQVBQTElDQVRJT05fSlNPTiIsIkNvbnRlbnQtVHlwZSIsIkpTT05fU1RBUlQiLCJKU09OX0VORFMiLCJbIiwieyIsIkpTT05fUFJPVEVDVElPTl9QUkVGSVgiLCIkaHR0cE1pbkVyciIsInNlcmlhbGl6ZVZhbHVlIiwidG9JU09TdHJpbmciLCIkSHR0cFBhcmFtU2VyaWFsaXplclByb3ZpZGVyIiwiJEh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2VQcm92aWRlciIsInNlcmlhbGl6ZSIsInRvU2VyaWFsaXplIiwidG9wTGV2ZWwiLCJkZWZhdWx0SHR0cFJlc3BvbnNlVHJhbnNmb3JtIiwiaGVhZGVycyIsInRlbXBEYXRhIiwiY29udGVudFR5cGUiLCJoYXNKc29uQ29udGVudFR5cGUiLCJqc29uU3RhcnQiLCJwYXJzZUhlYWRlcnMiLCJmaWxsSW5QYXJzZWQiLCJsaW5lIiwiaGVhZGVyVmFsIiwiaGVhZGVyS2V5IiwiaGVhZGVyc0dldHRlciIsImhlYWRlcnNPYmoiLCJ0cmFuc2Zvcm1EYXRhIiwiaXNTdWNjZXNzIiwiJEh0dHBQcm92aWRlciIsInRyYW5zZm9ybVJlc3BvbnNlIiwidHJhbnNmb3JtUmVxdWVzdCIsImlzQmxvYiIsImlzRm9ybURhdGEiLCJjb21tb24iLCJBY2NlcHQiLCJwYXRjaCIsInhzcmZDb29raWVOYW1lIiwieHNyZkhlYWRlck5hbWUiLCJwYXJhbVNlcmlhbGl6ZXIiLCJqc29ucENhbGxiYWNrUGFyYW0iLCJ1c2VBcHBseUFzeW5jIiwiaW50ZXJjZXB0b3JGYWN0b3JpZXMiLCJpbnRlcmNlcHRvcnMiLCJ4c3JmV2hpdGVsaXN0ZWRPcmlnaW5zIiwiJGJyb3dzZXIiLCIkaHR0cEJhY2tlbmQiLCIkJGNvb2tpZVJlYWRlciIsImRlZmF1bHRDYWNoZSIsInJldmVyc2VkSW50ZXJjZXB0b3JzIiwiaW50ZXJjZXB0b3JGYWN0b3J5IiwicGFyc2VkQWxsb3dlZE9yaWdpblVybHMiLCJ1cmxJc0FsbG93ZWRPcmlnaW4iLCJvcmlnaW5VcmwiLCJ1cmxSZXNvbHZlIiwicmVxdWVzdFVybCIsInBhcnNlZFVybCIsInVybHNBcmVTYW1lT3JpZ2luIiwiJGh0dHAiLCJyZXF1ZXN0Q29uZmlnIiwibWV0aG9kIiwiZGVmSGVhZGVyTmFtZSIsImxvd2VyY2FzZURlZkhlYWRlck5hbWUiLCJyZXFIZWFkZXJOYW1lIiwiZGVmSGVhZGVycyIsInJlcUhlYWRlcnMiLCJkZWZhdWx0SGVhZGVyc0l0ZXJhdGlvbiIsImhlYWRlckNvbnRlbnQiLCJwcm9jZXNzZWRIZWFkZXJzIiwiaGVhZGVyRm4iLCJoZWFkZXIiLCJleGVjdXRlSGVhZGVyRm5zIiwibWVyZ2VIZWFkZXJzIiwicmVxdWVzdEludGVyY2VwdG9ycyIsInJlc3BvbnNlSW50ZXJjZXB0b3JzIiwiaW50ZXJjZXB0b3IiLCJyZXF1ZXN0IiwicmVxdWVzdEVycm9yIiwicmVzcG9uc2VFcnJvciIsImNoYWluSW50ZXJjZXB0b3JzIiwicmVxRGF0YSIsIndpdGhDcmVkZW50aWFscyIsImNhY2hlZFJlc3AiLCJpc0pzb25wIiwiZ2V0VHJ1c3RlZFJlc291cmNlVXJsIiwic2VyaWFsaXplZFBhcmFtcyIsImNiS2V5Iiwic2FuaXRpemVKc29ucENhbGxiYWNrUGFyYW0iLCJwZW5kaW5nUmVxdWVzdHMiLCJyZW1vdmVQZW5kaW5nUmVxIiwicmVzb2x2ZVByb21pc2VXaXRoUmVzdWx0IiwicmVzb2x2ZVByb21pc2UiLCJ4c3JmVmFsdWUiLCJoZWFkZXJzU3RyaW5nIiwic3RhdHVzVGV4dCIsInhoclN0YXR1cyIsInJlc29sdmVIdHRwUHJvbWlzZSIsIiRhcHBseUFzeW5jIiwiJCRwaGFzZSIsInRpbWVvdXQiLCJyZXNwb25zZVR5cGUiLCJjcmVhdGVBcHBseUhhbmRsZXJzIiwiZXZlbnRIYW5kbGVycyIsInVwbG9hZEV2ZW50SGFuZGxlcnMiLCJhcHBseUhhbmRsZXJzIiwiY2FsbEV2ZW50SGFuZGxlciIsInNlbmRSZXEiLCJ0aGVuRm4iLCJyZWplY3RGbiIsInJlc3AiLCJjcmVhdGVTaG9ydE1ldGhvZHMiLCJjcmVhdGVTaG9ydE1ldGhvZHNXaXRoRGF0YSIsIiR4aHJGYWN0b3J5UHJvdmlkZXIiLCJYTUxIdHRwUmVxdWVzdCIsIiRIdHRwQmFja2VuZFByb3ZpZGVyIiwiJGpzb25wQ2FsbGJhY2tzIiwiJHhockZhY3RvcnkiLCJjcmVhdGVYaHIiLCIkYnJvd3NlckRlZmVyIiwiY2FsbGJhY2tzIiwicmF3RG9jdW1lbnQiLCJjYWxsYmFja1BhdGgiLCJjcmVhdGVDYWxsYmFjayIsImpzb25wRG9uZSIsIndhc0NhbGxlZCIsImpzb25wUmVxIiwiZ2V0UmVzcG9uc2UiLCJjb21wbGV0ZVJlcXVlc3QiLCJyZW1vdmVDYWxsYmFjayIsInhociIsImFib3J0ZWRCeVRpbWVvdXQiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsInJlc3BvbnNlVGV4dCIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsIm9uZXJyb3IiLCJvbnRpbWVvdXQiLCJvbmFib3J0IiwidXBsb2FkIiwic2VuZCIsInRpbWVvdXRSZXF1ZXN0IiwiJCR0aW1lb3V0SWQiLCJjcmVhdGVIdHRwQmFja2VuZCIsIiRpbnRlcnBvbGF0ZU1pbkVyciIsIiRJbnRlcnBvbGF0ZVByb3ZpZGVyIiwic3RhcnRTeW1ib2xMZW5ndGgiLCJlbmRTeW1ib2xMZW5ndGgiLCJlc2NhcGVkU3RhcnRSZWdleHAiLCJlc2NhcGUiLCJlc2NhcGVkRW5kUmVnZXhwIiwiY2giLCJ1bmVzY2FwZVRleHQiLCJjb25zdGFudFdhdGNoRGVsZWdhdGUiLCJvYmplY3RFcXVhbGl0eSIsImNvbnN0YW50SW50ZXJwIiwidW53YXRjaCIsImNvbnRleHRBbGxvd3NDb25jYXRlbmF0aW9uIiwidW5lc2NhcGVkVGV4dCIsImdldFRydXN0ZWQiLCJleHAiLCIkJHdhdGNoRGVsZWdhdGUiLCJlbmRJbmRleCIsInBhcnNlRm5zIiwic2luZ2xlRXhwcmVzc2lvbiIsInRleHRMZW5ndGgiLCJleHByZXNzaW9uUG9zaXRpb25zIiwiaW50ZXJyIiwiY29tcHV0ZSIsInRocm93Tm9jb25jYXQiLCIkd2F0Y2hHcm91cCIsIm9sZFZhbHVlcyIsImN1cnJWYWx1ZSIsIiRpbnRlcnZhbE1pbkVyciIsIiRJbnRlcnZhbFByb3ZpZGVyIiwiJCRxIiwiaW50ZXJ2YWxzIiwiaW50ZXJ2YWwiLCJpbnZva2VBcHBseSIsImhhc1BhcmFtcyIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsIml0ZXJhdGlvbiIsInNraXBBcHBseSIsIiQkaW50ZXJ2YWxJZCIsIm1hcmtRRXhjZXB0aW9uSGFuZGxlZCIsIiRqc29ucENhbGxiYWNrc1Byb3ZpZGVyIiwiY2FsbGJhY2tNYXAiLCJjYWxsYmFja0lkIiwiJCRjb3VudGVyIiwiY2FsbGVkIiwiUEFUSF9NQVRDSCIsIkRFRkFVTFRfUE9SVFMiLCJodHRwIiwiaHR0cHMiLCJmdHAiLCIkbG9jYXRpb25NaW5FcnIiLCJlbmNvZGVQYXRoIiwicGFyc2VBYnNvbHV0ZVVybCIsImFic29sdXRlVXJsIiwibG9jYXRpb25PYmoiLCIkJHByb3RvY29sIiwiJCRob3N0IiwiJCRwb3J0IiwiRE9VQkxFX1NMQVNIX1JFR0VYIiwicGFyc2VBcHBVcmwiLCJwcmVmaXhlZCIsIiQkcGF0aCIsImRlY29kZVBhdGgiLCIkJHNlYXJjaCIsIiQkaGFzaCIsInN0YXJ0c1dpdGgiLCJzdHJpcEJhc2VVcmwiLCJ0cmltRW1wdHlIYXNoIiwiTG9jYXRpb25IdG1sNVVybCIsImFwcEJhc2UiLCJhcHBCYXNlTm9GaWxlIiwiJCRodG1sNSIsIiQkcGFyc2UiLCJwYXRoVXJsIiwiJCRjb21wb3NlIiwiJCR1cmwiLCIkJGFic1VybCIsIiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24iLCIkJHBhcnNlTGlua1VybCIsInJlbEhyZWYiLCJhcHBVcmwiLCJwcmV2QXBwVXJsIiwicmV3cml0dGVuVXJsIiwiTG9jYXRpb25IYXNoYmFuZ1VybCIsIndpdGhvdXRIYXNoVXJsIiwid2l0aG91dEJhc2VVcmwiLCJmaXJzdFBhdGhTZWdtZW50TWF0Y2giLCJ3aW5kb3dzRmlsZVBhdGhFeHAiLCJyZW1vdmVXaW5kb3dzRHJpdmVOYW1lIiwiTG9jYXRpb25IYXNoYmFuZ0luSHRtbDVVcmwiLCJsb2NhdGlvblByb3RvdHlwZSIsIiQkcmVwbGFjZSIsImFic1VybCIsImxvY2F0aW9uR2V0dGVyIiwibG9jYXRpb25HZXR0ZXJTZXR0ZXIiLCJwYXJhbVZhbHVlIiwicHJlcHJvY2VzcyIsIiRMb2NhdGlvblByb3ZpZGVyIiwicmVxdWlyZUJhc2UiLCJyZXdyaXRlTGlua3MiLCJMb2NhdGlvbk1vZGUiLCJpbml0aWFsVXJsIiwibGFzdEluZGV4T2YiLCJzdHJpcEZpbGUiLCJJR05PUkVfVVJJX1JFR0VYUCIsInNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2siLCJvbGRVcmwiLCJvbGRTdGF0ZSIsImN0cmxLZXkiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJ3aGljaCIsImJ1dHRvbiIsImFic0hyZWYiLCJpbml0aWFsaXppbmciLCJuZXdVcmwiLCJuZXdTdGF0ZSIsIiRicm9hZGNhc3QiLCJhZnRlckxvY2F0aW9uQ2hhbmdlIiwiJGRpZ2VzdCIsImN1cnJlbnRSZXBsYWNlIiwidXJsT3JTdGF0ZUNoYW5nZWQiLCIkTG9nUHJvdmlkZXIiLCJkZWJ1ZyIsImRlYnVnRW5hYmxlZCIsImZsYWciLCJmb3JtYXRTdGFja1RyYWNlIiwibmF2aWdhdG9yIiwidXNlckFnZW50Iiwid2FybiIsImxvZ0ZuIiwic291cmNlVVJMIiwiZm9ybWF0RXJyb3IiLCJMb2NhdGlvbiIsIiRwYXJzZU1pbkVyciIsIm9iamVjdFZhbHVlT2YiLCJnZXRTdHJpbmdWYWx1ZSIsIk9QRVJBVE9SUyIsIm9wZXJhdG9yIiwiRVNDQVBFIiwiZiIsIiciLCJcIiIsIkxleGVyIiwibGV4IiwidG9rZW5zIiwicmVhZFN0cmluZyIsInBlZWsiLCJyZWFkTnVtYmVyIiwiaXNJZGVudGlmaWVyU3RhcnQiLCJwZWVrTXVsdGljaGFyIiwicmVhZElkZW50IiwiaXNXaGl0ZXNwYWNlIiwiY2gyIiwiY2gzIiwib3AxIiwib3AyIiwib3AzIiwidGhyb3dFcnJvciIsImNoYXJzIiwiY29kZVBvaW50QXQiLCJpc1ZhbGlkSWRlbnRpZmllclN0YXJ0IiwiaXNJZGVudGlmaWVyQ29udGludWUiLCJpc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlIiwiY3AiLCJjcDEiLCJjcDIiLCJpc0V4cE9wZXJhdG9yIiwiY29sU3RyIiwibnVtYmVyIiwicGVla0NoIiwicXVvdGUiLCJyYXdTdHJpbmciLCJoZXgiLCJmcm9tQ2hhckNvZGUiLCJBU1QiLCJsZXhlciIsImlmRGVmaW5lZCIsInBsdXNGbiIsIlByb2dyYW0iLCJFeHByZXNzaW9uU3RhdGVtZW50IiwiQXNzaWdubWVudEV4cHJlc3Npb24iLCJDb25kaXRpb25hbEV4cHJlc3Npb24iLCJMb2dpY2FsRXhwcmVzc2lvbiIsIkJpbmFyeUV4cHJlc3Npb24iLCJVbmFyeUV4cHJlc3Npb24iLCJDYWxsRXhwcmVzc2lvbiIsIk1lbWJlckV4cHJlc3Npb24iLCJJZGVudGlmaWVyIiwiTGl0ZXJhbCIsIkFycmF5RXhwcmVzc2lvbiIsIlByb3BlcnR5IiwiT2JqZWN0RXhwcmVzc2lvbiIsIlRoaXNFeHByZXNzaW9uIiwiTG9jYWxzRXhwcmVzc2lvbiIsIk5HVmFsdWVQYXJhbWV0ZXIiLCJhc3QiLCJwcm9ncmFtIiwiZXhwcmVzc2lvblN0YXRlbWVudCIsImV4cGVjdCIsImZpbHRlckNoYWluIiwiYXNzaWdubWVudCIsInRlcm5hcnkiLCJpc0Fzc2lnbmFibGUiLCJhbHRlcm5hdGUiLCJjb25zZXF1ZW50IiwibG9naWNhbE9SIiwiY29uc3VtZSIsImxvZ2ljYWxBTkQiLCJlcXVhbGl0eSIsInJlbGF0aW9uYWwiLCJhZGRpdGl2ZSIsIm11bHRpcGxpY2F0aXZlIiwidW5hcnkiLCJhcmd1bWVudCIsInByaW1hcnkiLCJhcnJheURlY2xhcmF0aW9uIiwic2VsZlJlZmVyZW50aWFsIiwibGl0ZXJhbHMiLCJjYWxsZWUiLCJwYXJzZUFyZ3VtZW50cyIsImNvbXB1dGVkIiwiYmFzZUV4cHJlc3Npb24iLCJwZWVrVG9rZW4iLCJwcm9wZXJ0aWVzIiwia2luZCIsIm1zZyIsImUxIiwiZTIiLCJlMyIsImU0IiwicGVla0FoZWFkIiwiJGxvY2FscyIsIlBVUklUWV9BQlNPTFVURSIsIlBVUklUWV9SRUxBVElWRSIsImZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMiLCIkZmlsdGVyIiwicGFyZW50SXNQdXJlIiwiYWxsQ29uc3RhbnRzIiwiYXJnc1RvV2F0Y2giLCJpc1N0YXRlbGVzc0ZpbHRlciIsImFzdElzUHVyZSIsImlzUHVyZSIsImV4cHIiLCJ0b1dhdGNoIiwiZmlsdGVyTmFtZSIsImlzU3RhdGVsZXNzIiwiZ2V0SW5wdXRzIiwibGFzdEV4cHJlc3Npb24iLCJhc3NpZ25hYmxlQVNUIiwiQVNUQ29tcGlsZXIiLCJBU1RJbnRlcnByZXRlciIsIlBhcnNlciIsImFzdENvbXBpbGVyIiwiZ2V0VmFsdWVPZiIsIiRQYXJzZVByb3ZpZGVyIiwiaWRlbnRTdGFydCIsImlkZW50Q29udGludWUiLCJ0cnVlIiwiZmFsc2UiLCJudWxsIiwiYWRkTGl0ZXJhbCIsImxpdGVyYWxOYW1lIiwibGl0ZXJhbFZhbHVlIiwic2V0SWRlbnRpZmllckZucyIsImlkZW50aWZpZXJTdGFydCIsImlkZW50aWZpZXJDb250aW51ZSIsIiRwYXJzZU9wdGlvbnMiLCIkJGdldEFzdCIsImdldEFzdCIsImludGVyY2VwdG9yRm4iLCJwYXJzZWRFeHByZXNzaW9uIiwiY2FjaGVLZXkiLCJhZGRXYXRjaERlbGVnYXRlIiwiYWRkSW50ZXJjZXB0b3IiLCJleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrIiwib2xkVmFsdWVPZlZhbHVlIiwiY29tcGFyZU9iamVjdElkZW50aXR5IiwiaW5wdXRzV2F0Y2hEZWxlZ2F0ZSIsInByZXR0eVByaW50RXhwcmVzc2lvbiIsImxhc3RSZXN1bHQiLCJpbnB1dEV4cHJlc3Npb25zIiwiaW5wdXRzIiwib2xkSW5wdXRWYWx1ZU9mIiwibmV3SW5wdXRWYWx1ZSIsIm9sZElucHV0VmFsdWVPZlZhbHVlcyIsIm9sZElucHV0VmFsdWVzIiwib25lVGltZVdhdGNoRGVsZWdhdGUiLCJpc0RvbmUiLCJpc0FsbERlZmluZWQiLCIkJGludGVyY2VwdGVkIiwiJCRpbnRlcmNlcHRvciIsInVzZUlucHV0cyIsIm9uZVRpbWVXYXRjaCIsInVud2F0Y2hJZkRvbmUiLCJhbGxEZWZpbmVkIiwib25lVGltZSIsImNoYWluZWRJbnRlcmNlcHRvciIsIiQkcHVyZSIsIiRRUHJvdmlkZXIiLCJlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyIsInFGYWN0b3J5IiwiJCRRUHJvdmlkZXIiLCJuZXh0VGljayIsImV4Y2VwdGlvbkhhbmRsZXIiLCIkcU1pbkVyciIsIlR5cGVFcnJvciIsInF1ZXVlU2l6ZSIsImNoZWNrUXVldWUiLCJyZWplY3RQcm9taXNlIiwibm90aWZ5UHJvbWlzZSIsInByb2Nlc3NDaGVja3MiLCJ0b0NoZWNrIiwiaXNTdGF0ZUV4Y2VwdGlvbkhhbmRsZWQiLCJtYXJrUVN0YXRlRXhjZXB0aW9uSGFuZGxlZCIsImVycm9yTWVzc2FnZSIsInNjaGVkdWxlUHJvY2Vzc1F1ZXVlIiwicHJvY2Vzc1NjaGVkdWxlZCIsIiQkcGFzc1RvRXhjZXB0aW9uSGFuZGxlciIsInByb2Nlc3NRdWV1ZSIsIiQkcmVqZWN0IiwiJCRyZXNvbHZlIiwiZG9SZXNvbHZlIiwiZG9SZWplY3QiLCJoYW5kbGVDYWxsYmFjayIsInJlc29sdmVyIiwiY2FsbGJhY2tPdXRwdXQiLCJlcnJiYWNrIiwicHJvZ3Jlc3NCYWNrIiwib25GdWxmaWxsZWQiLCJvblJlamVjdGVkIiwiJFEiLCJjb3VudGVyIiwicmVzdWx0cyIsInJhY2UiLCJwdXIiLCJxIiwiJCRSQUZQcm92aWRlciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwid2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyYWZTdXBwb3J0ZWQiLCJyYWYiLCJ0aW1lciIsInN1cHBvcnRlZCIsIiRSb290U2NvcGVQcm92aWRlciIsIiRyb290U2NvcGVNaW5FcnIiLCJsYXN0RGlydHlXYXRjaCIsImFwcGx5QXN5bmNJZCIsImRpZ2VzdFR0bCIsImRlc3Ryb3lDaGlsZFNjb3BlIiwiJGV2ZW50IiwiY3VycmVudFNjb3BlIiwiU2NvcGUiLCIkJHdhdGNoZXJzIiwiJCRuZXh0U2libGluZyIsIiQkcHJldlNpYmxpbmciLCIkJGNoaWxkSGVhZCIsIiQkY2hpbGRUYWlsIiwiJHJvb3QiLCIkJHN1c3BlbmRlZCIsIiQkbGlzdGVuZXJzIiwiJCRsaXN0ZW5lckNvdW50IiwiJCR3YXRjaGVyc0NvdW50IiwiaXNvbGF0ZSIsIiQkQ2hpbGRTY29wZSIsIkNoaWxkU2NvcGUiLCJjcmVhdGVDaGlsZFNjb3BlQ2xhc3MiLCJ3YXRjaEV4cCIsIndhdGNoZXIiLCJpbml0V2F0Y2hWYWwiLCIkJGRpZ2VzdFdhdGNoSW5kZXgiLCJpbmNyZW1lbnRXYXRjaGVyc0NvdW50Iiwid2F0Y2hFeHByZXNzaW9ucyIsIm5ld1ZhbHVlcyIsImRlcmVnaXN0ZXJGbnMiLCJjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCIsImZpcnN0UnVuIiwic2hvdWxkQ2FsbCIsIndhdGNoR3JvdXBBY3Rpb24iLCJ1bndhdGNoRm4iLCIkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IiLCJ2ZXJ5T2xkVmFsdWUiLCJ0cmFja1ZlcnlPbGRWYWx1ZSIsImNoYW5nZURldGVjdGVkIiwiY2hhbmdlRGV0ZWN0b3IiLCJpbnRlcm5hbEFycmF5IiwiaW50ZXJuYWxPYmplY3QiLCJpbml0UnVuIiwib2xkTGVuZ3RoIiwiX3ZhbHVlIiwibmV3TGVuZ3RoIiwibmV3SXRlbSIsIm9sZEl0ZW0iLCJ3YXRjaCIsIndhdGNoZXJzIiwiZGlydHkiLCJsb2dJZHgiLCJhc3luY1Rhc2siLCJ0dGwiLCJhc3luY1F1ZXVlIiwid2F0Y2hMb2ciLCJiZWdpblBoYXNlIiwiZmx1c2hBcHBseUFzeW5jIiwiYXN5bmNRdWV1ZVBvc2l0aW9uIiwidHJhdmVyc2VTY29wZXNMb29wIiwiY2xlYXJQaGFzZSIsInBvc3REaWdlc3RRdWV1ZVBvc2l0aW9uIiwiJHN1c3BlbmQiLCIkaXNTdXNwZW5kZWQiLCIkcmVzdW1lIiwiJGRlc3Ryb3kiLCJkZWNyZW1lbnRMaXN0ZW5lckNvdW50IiwiY2xlYW5VcFNjb3BlIiwiJGV2YWwiLCJhcHBseUFzeW5jUXVldWUiLCJuYW1lZExpc3RlbmVycyIsImluZGV4T2ZMaXN0ZW5lciIsIiRlbWl0IiwidGFyZ2V0U2NvcGUiLCJsaXN0ZW5lckFyZ3MiLCIkJGFzeW5jUXVldWUiLCIkJHBvc3REaWdlc3RRdWV1ZSIsIiQkYXBwbHlBc3luY1F1ZXVlIiwiJCRTYW5pdGl6ZVVyaVByb3ZpZGVyIiwidXJpIiwiaXNNZWRpYVVybCIsIm5vcm1hbGl6ZWRWYWwiLCJuZXh0SWQiLCJmaWx0ZXJzIiwidmFycyIsIm93biIsImFzc2lnbmFibGUiLCJzdGFnZSIsImNvbXB1dGluZyIsInJlY3Vyc2UiLCJyZXR1cm5fIiwiZ2VuZXJhdGVGdW5jdGlvbiIsImZuS2V5IiwiaW50b0lkIiwid2F0Y2hJZCIsImZuU3RyaW5nIiwiVVNFIiwiU1RSSUNUIiwiZmlsdGVyUHJlZml4Iiwid2F0Y2hGbnMiLCJ2YXJzUHJlZml4Iiwic2VjdGlvbiIsIm5hbWVJZCIsInJlY3Vyc2lvbkZuIiwic2tpcFdhdGNoSWRDaGVjayIsImlmXyIsImxhenlBc3NpZ24iLCJjb21wdXRlZE1lbWJlciIsImxhenlSZWN1cnNlIiwicGx1cyIsImdldEhhc093blByb3BlcnR5Iiwibm9uQ29tcHV0ZWRNZW1iZXIiLCJub3ROdWxsIiwibWVtYmVyIiwic3RyaW5nRXNjYXBlRm4iLCJzdHJpbmdFc2NhcGVSZWdleCIsInNraXAiLCJpbml0IiwicmhzIiwibGhzIiwidW5hcnkrIiwidW5hcnktIiwidW5hcnkhIiwiYmluYXJ5KyIsImJpbmFyeS0iLCJiaW5hcnkqIiwiYmluYXJ5LyIsImJpbmFyeSUiLCJiaW5hcnk9PT0iLCJiaW5hcnkhPT0iLCJiaW5hcnk9PSIsImJpbmFyeSE9IiwiYmluYXJ5PCIsImJpbmFyeT4iLCJiaW5hcnk8PSIsImJpbmFyeT49IiwiYmluYXJ5JiYiLCJiaW5hcnl8fCIsInRlcm5hcnk/OiIsImlzQ29uc3RhbnQiLCIkc2NlTWluRXJyIiwiU0NFX0NPTlRFWFRTIiwiQ1NTIiwiSlMiLCJVTkRFUlNDT1JFX0xPV0VSQ0FTRV9SRUdFWFAiLCJzbmFrZVRvQ2FtZWwiLCJhZGp1c3RNYXRjaGVycyIsIm1hdGNoZXJzIiwiYWRqdXN0ZWRNYXRjaGVycyIsImFkanVzdE1hdGNoZXIiLCIkU2NlRGVsZWdhdGVQcm92aWRlciIsInJlc291cmNlVXJsV2hpdGVsaXN0IiwicmVzb3VyY2VVcmxCbGFja2xpc3QiLCIkJHNhbml0aXplVXJpIiwiaHRtbFNhbml0aXplciIsIm1hdGNoVXJsIiwiYmFzZVVSSSIsImJhc2VVcmxQYXJzaW5nTm9kZSIsImdldEJhc2VVcmwiLCJ1cmxJc1NhbWVPcmlnaW5Bc0Jhc2VVcmwiLCJnZW5lcmF0ZUhvbGRlclR5cGUiLCJCYXNlIiwiaG9sZGVyVHlwZSIsInRydXN0ZWRWYWx1ZSIsIiQkdW53cmFwVHJ1c3RlZFZhbHVlIiwidHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSIsImJ5VHlwZSIsInRydXN0QXMiLCJDb25zdHJ1Y3RvciIsIm1heWJlVHJ1c3RlZCIsImFsbG93ZWQiLCJpc1Jlc291cmNlVXJsQWxsb3dlZEJ5UG9saWN5IiwiJFNjZVByb3ZpZGVyIiwiJHNjZURlbGVnYXRlIiwic2NlIiwiaXNFbmFibGVkIiwicGFyc2VBcyIsImVudW1WYWx1ZSIsImxOYW1lIiwiJFNuaWZmZXJQcm92aWRlciIsImV2ZW50U3VwcG9ydCIsImhhc0hpc3RvcnlQdXNoU3RhdGUiLCJudyIsInByb2Nlc3MiLCJjaHJvbWUiLCJhcHAiLCJydW50aW1lIiwiYW5kcm9pZCIsImJveGVlIiwiYm9keVN0eWxlIiwidHJhbnNpdGlvbnMiLCJhbmltYXRpb25zIiwiaGFzRXZlbnQiLCJkaXZFbG0iLCIkdGVtcGxhdGVSZXF1ZXN0TWluRXJyIiwiJFRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyIiwiaHR0cE9wdGlvbnMiLCIkdGVtcGxhdGVDYWNoZSIsImhhbmRsZVJlcXVlc3RGbiIsInRwbCIsImlnbm9yZVJlcXVlc3RFcnJvciIsInRvdGFsUGVuZGluZ1JlcXVlc3RzIiwidHJhbnNmb3JtZXIiLCIkJFRlc3RhYmlsaXR5UHJvdmlkZXIiLCJ0ZXN0YWJpbGl0eSIsImZpbmRCaW5kaW5ncyIsIm9wdF9leGFjdE1hdGNoIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImRhdGFCaW5kaW5nIiwiYmluZGluZ05hbWUiLCJmaW5kTW9kZWxzIiwicHJlZml4ZXMiLCJnZXRMb2NhdGlvbiIsInNldExvY2F0aW9uIiwid2hlblN0YWJsZSIsIiR0aW1lb3V0TWluRXJyIiwiJFRpbWVvdXRQcm92aWRlciIsImRlZmVycmVkcyIsInVybFBhcnNpbmdOb2RlIiwidXJsMSIsInVybDIiLCIkV2luZG93UHJvdmlkZXIiLCIkJENvb2tpZVJlYWRlciIsImxhc3RDb29raWVzIiwibGFzdENvb2tpZVN0cmluZyIsInNhZmVEZWNvZGVVUklDb21wb25lbnQiLCJjb29raWVBcnJheSIsImNvb2tpZSIsImN1cnJlbnRDb29raWVTdHJpbmciLCJzYWZlR2V0Q29va2llIiwiJCRDb29raWVSZWFkZXJQcm92aWRlciIsIiRGaWx0ZXJQcm92aWRlciIsInN1ZmZpeCIsImN1cnJlbmN5RmlsdGVyIiwiZGF0ZUZpbHRlciIsImZpbHRlckZpbHRlciIsImpzb25GaWx0ZXIiLCJsaW1pdFRvRmlsdGVyIiwibG93ZXJjYXNlRmlsdGVyIiwibnVtYmVyRmlsdGVyIiwib3JkZXJCeUZpbHRlciIsInVwcGVyY2FzZUZpbHRlciIsImNvbXBhcmF0b3IiLCJhbnlQcm9wZXJ0eUtleSIsInByZWRpY2F0ZUZuIiwibWF0Y2hBZ2FpbnN0QW55UHJvcCIsImdldFR5cGVGb3JGaWx0ZXIiLCJzaG91bGRNYXRjaFByaW1pdGl2ZXMiLCJhY3R1YWwiLCJleHBlY3RlZCIsImRlZXBDb21wYXJlIiwiY3JlYXRlUHJlZGljYXRlRm4iLCJkb250TWF0Y2hXaG9sZU9iamVjdCIsImFjdHVhbFR5cGUiLCJleHBlY3RlZFR5cGUiLCJleHBlY3RlZFZhbCIsIm1hdGNoQW55UHJvcGVydHkiLCJNQVhfRElHSVRTIiwiREVDSU1BTF9TRVAiLCJaRVJPX0NIQVIiLCIkbG9jYWxlIiwiZm9ybWF0cyIsIk5VTUJFUl9GT1JNQVRTIiwiYW1vdW50IiwiY3VycmVuY3lTeW1ib2wiLCJmcmFjdGlvblNpemUiLCJDVVJSRU5DWV9TWU0iLCJQQVRURVJOUyIsIm1heEZyYWMiLCJjdXJyZW5jeVN5bWJvbFJlIiwiZm9ybWF0TnVtYmVyIiwiR1JPVVBfU0VQIiwiZ3JvdXBTZXAiLCJkZWNpbWFsU2VwIiwicGFyc2VkTnVtYmVyIiwiaXNJbmZpbml0eSIsImlzRmluaXRlIiwiaXNaZXJvIiwibnVtU3RyIiwiYWJzIiwiZm9ybWF0dGVkVGV4dCIsIm1pbkZyYWMiLCJkaWdpdHMiLCJmcmFjdGlvbkxlbiIsInJvdW5kQXQiLCJkaWdpdCIsImNhcnJ5IiwicmVkdWNlUmlnaHQiLCJyb3VuZE51bWJlciIsIm51bWJlck9mSW50ZWdlckRpZ2l0cyIsInplcm9zIiwiZXhwb25lbnQiLCJpbnRlZ2VyTGVuIiwiZGVjaW1hbHMiLCJncm91cHMiLCJsZ1NpemUiLCJnU2l6ZSIsIm5lZ1ByZSIsIm5lZ1N1ZiIsInBvc1ByZSIsInBvc1N1ZiIsInBhZE51bWJlciIsIm5lZ1dyYXAiLCJuZWciLCJkYXRlR2V0dGVyIiwiZGF0ZVN0ckdldHRlciIsInNob3J0Rm9ybSIsInN0YW5kQWxvbmUiLCJnZXRGaXJzdFRodXJzZGF5T2ZZZWFyIiwieWVhciIsImRheU9mV2Vla09uRmlyc3QiLCJnZXREYXkiLCJ3ZWVrR2V0dGVyIiwiZGF0ZXRpbWUiLCJmaXJzdFRodXJzIiwicm91bmQiLCJlcmFHZXR0ZXIiLCJFUkFTIiwiREFURV9GT1JNQVRTIiwieXl5eSIsInl5IiwieSIsIk1NTU0iLCJNTU0iLCJNTSIsIk0iLCJMTExMIiwiZGQiLCJISCIsIkgiLCJoaCIsIm1tIiwic3MiLCJzc3MiLCJFRUVFIiwiRUVFIiwiZ2V0SG91cnMiLCJBTVBNUyIsIloiLCJ6b25lIiwicGFkZGVkWm9uZSIsInd3IiwidyIsIkciLCJHRyIsIkdHRyIsIkdHR0ciLCJFUkFOQU1FUyIsIkRBVEVfRk9STUFUU19TUExJVCIsIk5VTUJFUl9TVFJJTkciLCJSX0lTTzg2MDFfU1RSIiwiREFURVRJTUVfRk9STUFUUyIsInR6SG91ciIsInR6TWluIiwiZGF0ZVNldHRlciIsInNldFVUQ0Z1bGxZZWFyIiwic2V0RnVsbFllYXIiLCJ0aW1lU2V0dGVyIiwic2V0VVRDSG91cnMiLCJzZXRIb3VycyIsIm1zIiwicGFyc2VGbG9hdCIsImpzb25TdHJpbmdUb0RhdGUiLCJzcGFjaW5nIiwibGltaXQiLCJiZWdpbiIsIkluZmluaXR5Iiwic2xpY2VGbiIsInNvcnRQcmVkaWNhdGUiLCJyZXZlcnNlT3JkZXIiLCJwcmVkaWNhdGVzIiwiZGVzY2VuZGluZyIsImRlZmF1bHRDb21wYXJlIiwiY29tcGFyZVZhbHVlcyIsInRpZUJyZWFrZXIiLCJwcmVkaWNhdGVWYWx1ZXMiLCJvYmplY3RWYWx1ZSIsImdldFByZWRpY2F0ZVZhbHVlIiwidjEiLCJ2MiIsInR5cGUxIiwidHlwZTIiLCJ2YWx1ZTEiLCJ2YWx1ZTIiLCJuZ0RpcmVjdGl2ZSIsImh0bWxBbmNob3JEaXJlY3RpdmUiLCJ4bGlua0hyZWYiLCJuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyIsImRlZmF1bHRMaW5rRm4iLCJuZ01vZGVsIiwiaHRtbEF0dHIiLCJudWxsRm9ybUN0cmwiLCIkYWRkQ29udHJvbCIsIiQkcmVuYW1lQ29udHJvbCIsImNvbnRyb2wiLCIkcmVtb3ZlQ29udHJvbCIsIiRzZXRWYWxpZGl0eSIsIiRzZXREaXJ0eSIsIiRzZXRQcmlzdGluZSIsIiRzZXRTdWJtaXR0ZWQiLCIkJHNldFN1Ym1pdHRlZCIsIlBFTkRJTkdfQ0xBU1MiLCJGb3JtQ29udHJvbGxlciIsIiQkY29udHJvbHMiLCIkZXJyb3IiLCIkJHN1Y2Nlc3MiLCIkcGVuZGluZyIsIm5nRm9ybSIsIiRkaXJ0eSIsIiRwcmlzdGluZSIsIiR2YWxpZCIsIiRpbnZhbGlkIiwiJHN1Ym1pdHRlZCIsIiQkcGFyZW50Rm9ybSIsIiQkYW5pbWF0ZSIsInNldHVwVmFsaWRpdHkiLCIkcm9sbGJhY2tWaWV3VmFsdWUiLCIkY29tbWl0Vmlld1ZhbHVlIiwibmV3TmFtZSIsIm9sZE5hbWUiLCJQUklTVElORV9DTEFTUyIsIkRJUlRZX0NMQVNTIiwiJHNldFVudG91Y2hlZCIsInJvb3RGb3JtIiwiYWRkU2V0VmFsaWRpdHlNZXRob2QiLCJjbGF6eiIsInVuc2V0IiwiZm9ybURpcmVjdGl2ZUZhY3RvcnkiLCJpc05nRm9ybSIsImZvcm1FbGVtZW50IiwiVkFMSURfQ0xBU1MiLCJuYW1lQXR0ciIsImN0cmxzIiwiaGFuZGxlRm9ybVN1Ym1pc3Npb24iLCJzZXR0ZXIiLCJnZXRTZXR0ZXIiLCJmb3JtRGlyZWN0aXZlIiwibmdGb3JtRGlyZWN0aXZlIiwiJCRjbGFzc0NhY2hlIiwiSU5WQUxJRF9DTEFTUyIsImNhY2hlZFRvZ2dsZUNsYXNzIiwiY3RybCIsInN3aXRjaFZhbHVlIiwidG9nZ2xlVmFsaWRhdGlvbkNzcyIsInZhbGlkYXRpb25FcnJvcktleSIsImNvbWJpbmVkU3RhdGUiLCJjcmVhdGVBbmRTZXQiLCJpc09iamVjdEVtcHR5IiwidW5zZXRBbmRDbGVhbnVwIiwiSVNPX0RBVEVfUkVHRVhQIiwiVVJMX1JFR0VYUCIsIkVNQUlMX1JFR0VYUCIsIk5VTUJFUl9SRUdFWFAiLCJEQVRFX1JFR0VYUCIsIkRBVEVUSU1FTE9DQUxfUkVHRVhQIiwiV0VFS19SRUdFWFAiLCJNT05USF9SRUdFWFAiLCJUSU1FX1JFR0VYUCIsIlBBUlRJQUxfVkFMSURBVElPTl9FVkVOVFMiLCJQQVJUSUFMX1ZBTElEQVRJT05fVFlQRVMiLCJpbnB1dFR5cGUiLCJiYXNlSW5wdXRUeXBlIiwic3RyaW5nQmFzZWRJbnB1dFR5cGUiLCJjcmVhdGVEYXRlSW5wdXRUeXBlIiwiY3JlYXRlRGF0ZVBhcnNlciIsImRhdGV0aW1lLWxvY2FsIiwidGltZSIsIndlZWsiLCJpc29XZWVrIiwiZXhpc3RpbmdEYXRlIiwiaG91cnMiLCJzZWNvbmRzIiwibWlsbGlzZWNvbmRzIiwiYWRkRGF5cyIsImdldFNlY29uZHMiLCJnZXRNaWxsaXNlY29uZHMiLCJtb250aCIsIm1pblZhbCIsIm1heFZhbCIsImJhZElucHV0Q2hlY2tlciIsIm51bWJlckZvcm1hdHRlclBhcnNlciIsIiR2YWxpZGF0b3JzIiwibW9kZWxWYWx1ZSIsInZpZXdWYWx1ZSIsIiRpc0VtcHR5IiwicGFyc2VOdW1iZXJBdHRyVmFsIiwiJHZhbGlkYXRlIiwic3RlcFZhbCIsImlzVmFsaWRGb3JTdGVwIiwiZW1haWwiLCJyYWRpbyIsImRvVHJpbSIsIm5nVHJpbSIsImV2IiwiY2hlY2tlZCIsIiRzZXRWaWV3VmFsdWUiLCIkcmVuZGVyIiwiJHZpZXdWYWx1ZSIsInJhbmdlIiwic3VwcG9ydHNSYW5nZSIsIiQkaGFzTmF0aXZlVmFsaWRhdG9ycyIsInZhbGlkaXR5IiwiaGFzTWluQXR0ciIsImhhc01heEF0dHIiLCJoYXNTdGVwQXR0ciIsIm9yaWdpbmFsUmVuZGVyIiwicmFuZ2VVbmRlcmZsb3ciLCJyYW5nZU92ZXJmbG93Iiwic2V0SW5pdGlhbFZhbHVlQW5kT2JzZXJ2ZXIiLCIkbW9kZWxWYWx1ZSIsImVsVmFsIiwic3RlcE1pc21hdGNoIiwiaHRtbEF0dHJOYW1lIiwiY2hhbmdlRm4iLCJjaGVja2JveCIsInRydWVWYWx1ZSIsInBhcnNlQ29uc3RhbnRFeHByIiwibmdUcnVlVmFsdWUiLCJmYWxzZVZhbHVlIiwibmdGYWxzZVZhbHVlIiwiJGZvcm1hdHRlcnMiLCIkcGFyc2VycyIsInN1Ym1pdCIsInJlc2V0IiwiZmlsZSIsImNvbXBvc2luZyIsImRlZmVyTGlzdGVuZXIiLCJvcmlnVmFsdWUiLCJrZXlDb2RlIiwib3JpZ0JhZElucHV0IiwiYmFkSW5wdXQiLCJvcmlnVHlwZU1pc21hdGNoIiwidHlwZU1pc21hdGNoIiwiaXNvIiwicHJldmlvdXNEYXRlIiwicGFydCIsInBhcnNlRGF0ZSIsInByZXZpb3VzVGltZXpvbmUiLCJwYXJzZURhdGVBbmRDb252ZXJ0VGltZVpvbmVUb0xvY2FsIiwiJCRwYXJzZXJOYW1lIiwibmdNb2RlbE1pbkVyciIsImlzVmFsaWREYXRlIiwiJG9wdGlvbnMiLCJnZXRPcHRpb24iLCJwYXJzZU9ic2VydmVkRGF0ZVZhbHVlIiwicGFyc2VkRGF0ZSIsInBhcnNlck5hbWUiLCJpc051bWJlckludGVnZXIiLCJjb3VudERlY2ltYWxzIiwibnVtU3RyaW5nIiwiZGVjaW1hbFN5bWJvbEluZGV4Iiwic3RlcEJhc2UiLCJpc05vbkludGVnZXJWYWx1ZSIsImlzTm9uSW50ZWdlclN0ZXBCYXNlIiwiaXNOb25JbnRlZ2VyU3RlcCIsInZhbHVlRGVjaW1hbHMiLCJzdGVwQmFzZURlY2ltYWxzIiwic3RlcERlY2ltYWxzIiwiZGVjaW1hbENvdW50IiwibXVsdGlwbGllciIsInBvdyIsInBhcnNlRm4iLCJpbnB1dERpcmVjdGl2ZSIsIkNPTlNUQU5UX1ZBTFVFX1JFR0VYUCIsIm5nVmFsdWVEaXJlY3RpdmUiLCJ1cGRhdGVFbGVtZW50VmFsdWUiLCJwcm9wVmFsdWUiLCJ0cGxBdHRyIiwibmdWYWx1ZSIsIm5nQmluZERpcmVjdGl2ZSIsIiRjb21waWxlIiwidGVtcGxhdGVFbGVtZW50IiwibmdCaW5kIiwibmdCaW5kVGVtcGxhdGVEaXJlY3RpdmUiLCJuZ0JpbmRUZW1wbGF0ZSIsIm5nQmluZEh0bWxEaXJlY3RpdmUiLCJuZ0JpbmRIdG1sR2V0dGVyIiwibmdCaW5kSHRtbCIsIm5nQmluZEh0bWxXYXRjaCIsImdldFRydXN0ZWRIdG1sIiwibmdDaGFuZ2VEaXJlY3RpdmUiLCIkdmlld0NoYW5nZUxpc3RlbmVycyIsIm5nQ2hhbmdlIiwiY2xhc3NEaXJlY3RpdmUiLCJpbmRleFdhdGNoRXhwcmVzc2lvbiIsIm9sZENsYXNzU3RyaW5nIiwiY2xhc3NDb3VudHMiLCJvbGRNb2R1bG8iLCJkaWdlc3RDbGFzc0NvdW50cyIsImNsYXNzQXJyYXkiLCJjbGFzc2VzVG9VcGRhdGUiLCIkaW5kZXgiLCJuZXdNb2R1bG8iLCJjbGFzc1N0cmluZyIsInJlbW92ZUNsYXNzZXMiLCJ0b0NsYXNzU3RyaW5nIiwibmV3Q2xhc3NTdHJpbmciLCJvbGRDbGFzc0FycmF5IiwibmV3Q2xhc3NBcnJheSIsInRvUmVtb3ZlQXJyYXkiLCJhcnJheURpZmZlcmVuY2UiLCJ0b0FkZEFycmF5IiwidG9SZW1vdmVTdHJpbmciLCJ0b0FkZFN0cmluZyIsInVwZGF0ZUNsYXNzZXMiLCJjbGFzc1ZhbHVlIiwibmdDbGFzc0RpcmVjdGl2ZSIsIm5nQ2xhc3NPZGREaXJlY3RpdmUiLCJuZ0NsYXNzRXZlbkRpcmVjdGl2ZSIsIm5nQ2xvYWtEaXJlY3RpdmUiLCJuZ0NvbnRyb2xsZXJEaXJlY3RpdmUiLCJuZ0V2ZW50RGlyZWN0aXZlcyIsImZvcmNlQXN5bmNFdmVudHMiLCJibHVyIiwiZm9jdXMiLCJuZ0lmRGlyZWN0aXZlIiwiYmxvY2siLCJwcmV2aW91c0VsZW1lbnRzIiwibmdJZiIsIm5nSW5jbHVkZURpcmVjdGl2ZSIsIiRhbmNob3JTY3JvbGwiLCJzcmNFeHAiLCJuZ0luY2x1ZGUiLCJvbmxvYWRFeHAiLCJhdXRvU2Nyb2xsRXhwIiwiYXV0b3Njcm9sbCIsInByZXZpb3VzRWxlbWVudCIsImN1cnJlbnRFbGVtZW50IiwiY2hhbmdlQ291bnRlciIsImNsZWFudXBMYXN0SW5jbHVkZUNvbnRlbnQiLCJhZnRlckFuaW1hdGlvbiIsInRoaXNDaGFuZ2VJZCIsIm5nSW5jbHVkZUZpbGxDb250ZW50RGlyZWN0aXZlIiwibmdJbml0RGlyZWN0aXZlIiwibmdJbml0IiwibmdMaXN0RGlyZWN0aXZlIiwibmdMaXN0IiwidHJpbVZhbHVlcyIsIk5nTW9kZWxDb250cm9sbGVyIiwiJCRyYXdNb2RlbFZhbHVlIiwiJGFzeW5jVmFsaWRhdG9ycyIsIiR1bnRvdWNoZWQiLCIkdG91Y2hlZCIsImRlZmF1bHRNb2RlbE9wdGlvbnMiLCIkJHVwZGF0ZUV2ZW50cyIsIiQkdXBkYXRlRXZlbnRIYW5kbGVyIiwiJCRwYXJzZWROZ01vZGVsIiwiJCRwYXJzZWROZ01vZGVsQXNzaWduIiwiJCRuZ01vZGVsR2V0IiwiJCRuZ01vZGVsU2V0IiwiJCRwZW5kaW5nRGVib3VuY2UiLCIkJHBhcnNlclZhbGlkIiwiJCRjdXJyZW50VmFsaWRhdGlvblJ1bklkIiwiJCRhdHRyIiwiJCR0aW1lb3V0IiwiJCRleGNlcHRpb25IYW5kbGVyIiwiJCRzZXRNb2RlbFZhbHVlIiwiJCRpbml0R2V0dGVyU2V0dGVycyIsImludm9rZU1vZGVsR2V0dGVyIiwiaW52b2tlTW9kZWxTZXR0ZXIiLCIkJCRwIiwiJCR1cGRhdGVFbXB0eUNsYXNzZXMiLCIkc2V0VG91Y2hlZCIsIiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSIsInByZXZWYWxpZCIsInByZXZNb2RlbFZhbHVlIiwiYWxsb3dJbnZhbGlkIiwidGhhdCIsIiQkcnVuVmFsaWRhdG9ycyIsImFsbFZhbGlkIiwiJCR3cml0ZU1vZGVsVG9TY29wZSIsInZhbGlkYXRvclByb21pc2VzIiwibG9jYWxWYWxpZGF0aW9uUnVuSWQiLCJlcnJvcktleSIsInNldFZhbGlkaXR5IiwicHJvY2Vzc1BhcnNlRXJyb3JzIiwic3luY1ZhbGlkYXRvcnNWYWxpZCIsInZhbGlkYXRvciIsInByb2Nlc3NTeW5jVmFsaWRhdG9ycyIsInZhbGlkYXRpb25Eb25lIiwiJCRwYXJzZUFuZFZhbGlkYXRlIiwid3JpdGVUb01vZGVsSWZOZWVkZWQiLCIkJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0IiwiZGVib3VuY2VEZWxheSIsIiRvdmVycmlkZU1vZGVsT3B0aW9ucyIsImNyZWF0ZUNoaWxkIiwiJCRzZXRVcGRhdGVPbkV2ZW50cyIsIiRwcm9jZXNzTW9kZWxWYWx1ZSIsIiQkZm9ybWF0IiwiZm9ybWF0dGVycyIsIm5nTW9kZWxEaXJlY3RpdmUiLCJtb2RlbEN0cmwiLCJmb3JtQ3RybCIsIm9wdGlvbnNDdHJsIiwic2V0VG91Y2hlZCIsIkRFRkFVTFRfUkVHRVhQIiwiTW9kZWxPcHRpb25zIiwiJCRvcHRpb25zIiwiaW5oZXJpdEFsbCIsInVwZGF0ZU9uRGVmYXVsdCIsInVwZGF0ZU9uIiwiZGVib3VuY2UiLCJnZXR0ZXJTZXR0ZXIiLCJuZ01vZGVsT3B0aW9uc0RpcmVjdGl2ZSIsIk5nTW9kZWxPcHRpb25zQ29udHJvbGxlciIsIiQkYXR0cnMiLCJwYXJlbnRPcHRpb25zIiwicGFyZW50Q3RybCIsIm1vZGVsT3B0aW9uc0RlZmluaXRpb24iLCJuZ01vZGVsT3B0aW9ucyIsIm5nTm9uQmluZGFibGVEaXJlY3RpdmUiLCJuZ09wdGlvbnNNaW5FcnIiLCJOR19PUFRJT05TX1JFR0VYUCIsIm5nT3B0aW9uc0RpcmVjdGl2ZSIsIm9wdGlvblRlbXBsYXRlIiwib3B0R3JvdXBUZW1wbGF0ZSIsInNlbGVjdEVsZW1lbnQiLCJyZWdpc3Rlck9wdGlvbiIsInNlbGVjdEN0cmwiLCJuZ01vZGVsQ3RybCIsImhhc0VtcHR5T3B0aW9uIiwiZW1wdHlPcHRpb24iLCJwcm92aWRlZEVtcHR5T3B0aW9uIiwibmdPcHRpb25zIiwib3B0aW9uc0V4cCIsInZhbHVlTmFtZSIsImtleU5hbWUiLCJzZWxlY3RBcyIsInRyYWNrQnkiLCJ2aWV3VmFsdWVGbiIsInRyYWNrQnlGbiIsImdldFRyYWNrQnlWYWx1ZUZuIiwiZ2V0VHJhY2tCeVZhbHVlIiwiZ2V0TG9jYWxzIiwiZGlzcGxheUZuIiwiZ3JvdXBCeUZuIiwiZGlzYWJsZVdoZW5GbiIsInZhbHVlc0ZuIiwiT3B0aW9uIiwic2VsZWN0VmFsdWUiLCJsYWJlbCIsImdyb3VwIiwiZGlzYWJsZWQiLCJnZXRPcHRpb25WYWx1ZXNLZXlzIiwib3B0aW9uVmFsdWVzIiwib3B0aW9uVmFsdWVzS2V5cyIsIml0ZW1LZXkiLCJnZXRXYXRjaGFibGVzIiwid2F0Y2hlZEFycmF5Iiwib3B0aW9uVmFsdWVzTGVuZ3RoIiwiZGlzYWJsZVdoZW4iLCJnZXRPcHRpb25zIiwib3B0aW9uSXRlbXMiLCJzZWxlY3RWYWx1ZU1hcCIsIm9wdGlvbkl0ZW0iLCJnZXRPcHRpb25Gcm9tVmlld1ZhbHVlIiwiZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbiIsInBhcnNlT3B0aW9uc0V4cHJlc3Npb24iLCJsaXN0RnJhZ21lbnQiLCJhZGRPcHRpb25FbGVtZW50Iiwib3B0aW9uRWxlbWVudCIsInVwZGF0ZU9wdGlvbkVsZW1lbnQiLCJnZXRBbmRVcGRhdGVTZWxlY3RlZE9wdGlvbiIsImdlbmVyYXRlVW5rbm93bk9wdGlvblZhbHVlIiwid3JpdGVWYWx1ZSIsInNlbGVjdGVkT3B0aW9ucyIsInJlYWRWYWx1ZSIsInNlbGVjdGlvbnMiLCJzZWxlY3RlZE9wdGlvbiIsInNlbGVjdGVkSW5kZXgiLCJyZW1vdmVVbmtub3duT3B0aW9uIiwic2VsZWN0VW5rbm93bk9yRW1wdHlPcHRpb24iLCJ1bnNlbGVjdEVtcHR5T3B0aW9uIiwib3B0aW9uU2NvcGUiLCJvcHRpb25FbCIsIm5lZWRzUmVyZW5kZXIiLCIkaXNFbXB0eU9wdGlvblNlbGVjdGVkIiwiZ3JvdXBFbGVtZW50TWFwIiwiZ3JvdXBFbGVtZW50IiwibmV4dFZhbHVlIiwiaXNOb3RQcmltaXRpdmUiLCJuZ1BsdXJhbGl6ZURpcmVjdGl2ZSIsIkJSQUNFIiwiSVNfV0hFTiIsImxhc3RDb3VudCIsIm51bWJlckV4cCIsIndoZW5FeHAiLCJ3aGVuc0V4cEZucyIsImJyYWNlUmVwbGFjZW1lbnQiLCJ3YXRjaFJlbW92ZXIiLCJ1cGRhdGVFbGVtZW50VGV4dCIsIm5ld1RleHQiLCJhdHRyaWJ1dGVOYW1lIiwidG1wTWF0Y2giLCJ3aGVuS2V5IiwiY291bnRJc05hTiIsInBsdXJhbENhdCIsIndoZW5FeHBGbiIsIm5nUmVwZWF0RGlyZWN0aXZlIiwibmdSZXBlYXRNaW5FcnIiLCJ1cGRhdGVTY29wZSIsInZhbHVlSWRlbnRpZmllciIsImtleUlkZW50aWZpZXIiLCJhcnJheUxlbmd0aCIsIiRmaXJzdCIsIiRsYXN0IiwiJG1pZGRsZSIsIiRvZGQiLCIkZXZlbiIsImdldEJsb2NrU3RhcnQiLCJnZXRCbG9ja0VuZCIsIm5nUmVwZWF0IiwibmdSZXBlYXRFbmRDb21tZW50IiwiYWxpYXNBcyIsInRyYWNrQnlFeHAiLCJ0cmFja0J5RXhwR2V0dGVyIiwidHJhY2tCeUlkRXhwRm4iLCJ0cmFja0J5SWRBcnJheUZuIiwidHJhY2tCeUlkT2JqRm4iLCJoYXNoRm5Mb2NhbHMiLCJsYXN0QmxvY2tNYXAiLCJuZXh0Tm9kZSIsImNvbGxlY3Rpb25MZW5ndGgiLCJ0cmFja0J5SWQiLCJ0cmFja0J5SWRGbiIsImNvbGxlY3Rpb25LZXlzIiwibmV4dEJsb2NrT3JkZXIiLCJwcmV2aW91c05vZGUiLCJuZXh0QmxvY2tNYXAiLCJibG9ja0tleSIsIm5nU2hvd0RpcmVjdGl2ZSIsIm5nU2hvdyIsIm5nSGlkZURpcmVjdGl2ZSIsIm5nSGlkZSIsIm5nU3R5bGVEaXJlY3RpdmUiLCJuZ1N0eWxlIiwibmV3U3R5bGVzIiwib2xkU3R5bGVzIiwibmdTd2l0Y2hEaXJlY3RpdmUiLCJjYXNlcyIsIm5nU3dpdGNoQ29udHJvbGxlciIsIndhdGNoRXhwciIsIm5nU3dpdGNoIiwic2VsZWN0ZWRUcmFuc2NsdWRlcyIsInNlbGVjdGVkRWxlbWVudHMiLCJwcmV2aW91c0xlYXZlQW5pbWF0aW9ucyIsInNlbGVjdGVkU2NvcGVzIiwic3BsaWNlRmFjdG9yeSIsInNlbGVjdGVkVHJhbnNjbHVkZSIsImNhc2VFbGVtZW50Iiwic2VsZWN0ZWRTY29wZSIsIm5nU3dpdGNoV2hlbkRpcmVjdGl2ZSIsIm5nU3dpdGNoV2hlbiIsIm5nU3dpdGNoV2hlblNlcGFyYXRvciIsIndoZW5DYXNlIiwibmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlIiwibmdUcmFuc2NsdWRlTWluRXJyIiwibmdUcmFuc2NsdWRlRGlyZWN0aXZlIiwiZmFsbGJhY2tMaW5rRm4iLCJuZ1RyYW5zY2x1ZGUiLCJuZ1RyYW5zY2x1ZGVTbG90IiwidXNlRmFsbGJhY2tDb250ZW50Iiwibm90V2hpdGVzcGFjZSIsInNjcmlwdERpcmVjdGl2ZSIsIm5vb3BOZ01vZGVsQ29udHJvbGxlciIsInNldE9wdGlvblNlbGVjdGVkU3RhdHVzIiwiU2VsZWN0Q29udHJvbGxlciIsIm9wdGlvbnNNYXAiLCJ1bmtub3duT3B0aW9uIiwicmVuZGVyVW5rbm93bk9wdGlvbiIsInVua25vd25WYWwiLCJ1cGRhdGVVbmtub3duT3B0aW9uIiwic2VsZWN0RW1wdHlPcHRpb24iLCJyZWFsVmFsIiwiaGFzT3B0aW9uIiwiY3VycmVudGx5U2VsZWN0ZWRPcHRpb24iLCJoYXNoZWRWYWwiLCJhZGRPcHRpb24iLCJzY2hlZHVsZVJlbmRlciIsInJlbW92ZU9wdGlvbiIsIiRoYXNFbXB0eU9wdGlvbiIsIiRpc1Vua25vd25PcHRpb25TZWxlY3RlZCIsInJlbmRlclNjaGVkdWxlZCIsInVwZGF0ZVNjaGVkdWxlZCIsInNjaGVkdWxlVmlld1ZhbHVlVXBkYXRlIiwicmVuZGVyQWZ0ZXIiLCJvcHRpb25BdHRycyIsImludGVycG9sYXRlVmFsdWVGbiIsImludGVycG9sYXRlVGV4dEZuIiwicmVtb3ZhbCIsInByZXZpb3VzbHlTZWxlY3RlZCIsInJlbW92ZVZhbHVlIiwic2VsZWN0RGlyZWN0aXZlIiwic2hvdWxkQmVTZWxlY3RlZCIsImN1cnJlbnRseVNlbGVjdGVkIiwibGFzdFZpZXciLCJsYXN0Vmlld1JlZiIsIm9wdGlvbkRpcmVjdGl2ZSIsInJlcXVpcmVkRGlyZWN0aXZlIiwicmVxdWlyZWQiLCJwYXR0ZXJuRGlyZWN0aXZlIiwicGF0dGVybkV4cCIsIm1heGxlbmd0aERpcmVjdGl2ZSIsIm1heGxlbmd0aCIsImludFZhbCIsIm1pbmxlbmd0aERpcmVjdGl2ZSIsIm1pbmxlbmd0aCIsIm9yaWdpbmFsQ2xlYW5EYXRhIiwianFOYW1lIiwiZWxlbXMiLCJiaW5kSlF1ZXJ5IiwiJCRtaW5FcnIiLCIkJGNzcCIsIiQkZW5jb2RlVXJpU2VnbWVudCIsIiQkZW5jb2RlVXJpUXVlcnkiLCIkJGxvd2VyY2FzZSIsIiQkc3RyaW5naWZ5IiwiJCR1cHBlcmNhc2UiLCJlbnN1cmUiLCJjb25maWdGbiIsImludm9rZVF1ZXVlIiwiY29uZmlnQmxvY2tzIiwiaW52b2tlTGF0ZXIiLCJtb2R1bGVJbnN0YW5jZSIsImludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSIsImFuaW1hdGlvbiIsImluc2VydE1ldGhvZCIsInJlY2lwZU5hbWUiLCJmYWN0b3J5RnVuY3Rpb24iLCJzZXR1cE1vZHVsZUxvYWRlciIsInRleHRhcmVhIiwiZm9ybSIsInNlbGVjdCIsIm5nQ2xhc3MiLCJuZ0NsYXNzRXZlbiIsIm5nQ2xhc3NPZGQiLCJuZ0Nsb2FrIiwibmdDb250cm9sbGVyIiwibmdOb25CaW5kYWJsZSIsIm5nUGx1cmFsaXplIiwibmdTd2l0Y2hEZWZhdWx0IiwibmdSZXF1aXJlZCIsIiRhbmltYXRlQ3NzIiwiJCRhbmltYXRlSnMiLCIkJGZvcmNlUmVmbG93IiwiJGludGVydmFsIiwiJGh0dHBQYXJhbVNlcmlhbGl6ZXIiLCIkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZSIsIiQkdGVzdGFiaWxpdHkiLCIkJGpxTGl0ZSIsIiQkTWFwIiwiYW5ndWxhclZlcnNpb24iLCJwdWJsaXNoRXh0ZXJuYWxBUEkiLCJQTFVSQUxfQ0FURUdPUlkiLCJEQVkiLCJGSVJTVERBWU9GV0VFSyIsIk1PTlRIIiwiU0hPUlREQVkiLCJTSE9SVE1PTlRIIiwiU1RBTkRBTE9ORU1PTlRIIiwiV0VFS0VORFJBTkdFIiwiZnVsbERhdGUiLCJsb25nRGF0ZSIsIm1lZGl1bSIsIm1lZGl1bURhdGUiLCJtZWRpdW1UaW1lIiwic2hvcnQiLCJzaG9ydERhdGUiLCJzaG9ydFRpbWUiLCJtaW5JbnQiLCJsb2NhbGVJRCIsIm9wdF9wcmVjaXNpb24iLCJ2ZiIsImdldERlY2ltYWxzIiwiZ2V0VkYiLCJwYWROdW1iZXJJbk1vY2siLCJjcmVhdGVIdHRwQmFja2VuZE1vY2siLCJkZWZpbml0aW9ucyIsImV4cGVjdGF0aW9ucyIsInJlc3BvbnNlcyIsInJlc3BvbnNlc1B1c2giLCJvcmlnaW5hbEh0dHBCYWNrZW5kIiwiJCRvcmlnaW5hbEh0dHBCYWNrZW5kIiwiY3JlYXRlUmVzcG9uc2UiLCJNb2NrWGhyIiwiZXhwZWN0YXRpb24iLCJ3YXNFeHBlY3RlZCIsInByZXR0eVByaW50Iiwid3JhcFJlc3BvbnNlIiwid3JhcHBlZCIsImhhbmRsZVByZW1hdHVyZUVuZCIsImhhbmRsZVJlc3BvbnNlIiwiZGVzY3JpcHRpb24iLCIkJHJlc3BIZWFkZXJzIiwiJCRldmVudHMiLCJtYXRjaERhdGEiLCJtYXRjaEhlYWRlcnMiLCJwYXNzVGhyb3VnaCIsInBhcnNlUm91dGUiLCJzdGFyIiwiYXNzZXJ0QXJnRGVmaW5lZCIsIk1vY2tIdHRwRXhwZWN0YXRpb24iLCJyZXNwb25kIiwid2hlblJvdXRlIiwicGF0aE9iaiIsImV4cGVjdFJvdXRlIiwiZGlnZXN0IiwidmVyaWZ5Tm9PdXRzdGFuZGluZ0V4cGVjdGF0aW9uIiwidmVyaWZ5Tm9PdXRzdGFuZGluZ1JlcXVlc3QiLCJ1bmZsdXNoZWREZXNjcmlwdGlvbnMiLCJyZXNldEV4cGVjdGF0aW9ucyIsImdldFVybFBhcmFtcyIsInUiLCJjb21wYXJlVXJsIiwicXVlcnlTdHIiLCJrZXlfdmFsdWUiLCJrZXlPYmoiLCIkJGxhc3RJbnN0YW5jZSIsIiQkbWV0aG9kIiwiJCRhc3luYyIsIiQkcmVxSGVhZGVycyIsIiQkZGF0YSIsImdldFJlc3BvbnNlSGVhZGVyIiwiaGVhZGVyTmFtZSIsImxpbmVzIiwib3JpZ2luYWxSb290RWxlbWVudCIsIm1vY2siLCIkQnJvd3NlciIsIiQkbGFzdFVybCIsInBvbGxGbnMiLCIkJGxhc3RTdGF0ZSIsImRlZmVycmVkRm5zIiwiZGVmZXJyZWROZXh0SWQiLCJub3ciLCJmbkluZGV4IiwibmV4dFRpbWUiLCIkJGJhc2VIcmVmIiwicG9sbCIsInBvbGxGbiIsImVycm9ycyIsImxvZ3MiLCJhc3NlcnRFbXB0eSIsImxvZ0xldmVsIiwibG9nSXRlbSIsInJlcGVhdEZucyIsIm5leHRSZXBlYXRJZCIsIm1pbGxpcyIsImJlZm9yZSIsInRhc2siLCJUekRhdGUiLCJ0aW1lc3RhbXAiLCJ0c1N0ciIsIm9yaWdEYXRlIiwibG9jYWxPZmZzZXQiLCJvZmZzZXREaWZmIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiZ2V0VVRDRnVsbFllYXIiLCJnZXRVVENNb250aCIsImdldFVUQ0RhdGUiLCJnZXRVVENIb3VycyIsImdldFVUQ01pbnV0ZXMiLCJnZXRVVENTZWNvbmRzIiwiZ2V0VVRDTWlsbGlzZWNvbmRzIiwibWV0aG9kTmFtZSIsInJlZmxvd0ZuIiwidG90YWxSZWZsb3dzIiwicXVldWVGbiIsImFuaW1hdGVKc0NvbnN0cnVjdG9yIiwiYW5pbWF0b3IiLCIkY2xvc2VBbmRGbHVzaCIsImFuaW1hdGVDc3NDb25zdHJ1Y3RvciIsInJlZmxvd3MiLCJjbG9zZUFuZEZsdXNoIiwiaGlkZUVycm9ycyIsImRvTmV4dFJ1biIsInNvbWV0aGluZ0ZsdXNoZWQiLCJkdW1wIiwib3V0Iiwic2VyaWFsaXplU2NvcGUiLCIkaHR0cEJhY2tlbmREZWNvcmF0b3IiLCIkVGltZW91dERlY29yYXRvciIsInZlcmlmeU5vUGVuZGluZ1Rhc2tzIiwidGFza3MiLCIkUkFGRGVjb3JhdG9yIiwicmFmRm4iLCIkUm9vdEVsZW1lbnRQcm92aWRlciIsIiRDb21wb25lbnRDb250cm9sbGVyUHJvdmlkZXIiLCJjb21wb25lbnROYW1lIiwiY2FuZGlkYXRlRGlyZWN0aXZlcyIsImRpcmVjdGl2ZUluZm8iLCIkY29tcG9uZW50Q29udHJvbGxlciIsIiRSb290U2NvcGVEZWNvcmF0b3IiLCIkQ29udHJvbGxlckRlY29yYXRvciIsImUyZSIsIiRyb290U2NvcGVQcm90b3R5cGUiLCIkY291bnRDaGlsZFNjb3BlcyIsInBlbmRpbmdDaGlsZEhlYWRzIiwiJGNvdW50V2F0Y2hlcnMiLCJqYXNtaW5lT3JNb2NoYSIsImphc21pbmUiLCJtb2NoYSIsImN1cnJlbnRTcGVjIiwiaW5qZWN0b3JTdGF0ZSIsIkluamVjdG9yU3RhdGUiLCJhbm5vdGF0ZWRGdW5jdGlvbnMiLCJ3YXNJbmplY3RvckNyZWF0ZWQiLCJtb2R1bGVGbnMiLCJ3b3JrRm4iLCIkbW9kdWxlcyIsIiRwcm92aWRlckluamVjdG9yIiwiJCRiZWZvcmVBbGxIb29rIiwiYmVmb3JlQWxsIiwiJCRhZnRlckFsbEhvb2siLCJhZnRlckFsbCIsIiQkY3VycmVudFNwZWMiLCJzaGFyZWRJbmplY3RvciIsImluaXRpYWxpemVkIiwic2hhcmVkIiwic2hhcmVkRXJyb3IiLCIkJGNsZWFudXAiLCIkJGJlZm9yZUVhY2giLCIkJGFmdGVyRWFjaCIsImNsZWFudXBBZnRlckVhY2giLCJyb290Tm9kZSIsImNsZWFuVXBOb2RlcyIsImZyYWdtZW50cyIsImJlZm9yZUVhY2giLCJzZXR1cCIsImFmdGVyRWFjaCIsInRlYXJkb3duIiwiRXJyb3JBZGRpbmdEZWNsYXJhdGlvbkxvY2F0aW9uU3RhY2siLCJlcnJvckZvclN0YWNrIiwic291cmNlSWQiLCJzdGFja0FycmF5IiwiaW5qZWN0IiwiYmxvY2tGbnMiLCJXb3JrRm4iLCIkaW5qZWN0b3JTdHJpY3QiLCJzdXBwb3J0c1RvdWNoRXZlbnRzIiwiX2NhY2hlZCIsImNyZWF0ZVRvdWNoIiwiY3JlYXRlVG91Y2hMaXN0IiwiY3JlYXRlRXZlbnQiLCJzdXBwb3J0c0V2ZW50QnViYmxpbmdJbkRldGFjaGVkVHJlZSIsImV2bnQiLCJpbml0RXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiYnJvd3NlclRyaWdnZXIiLCJldmVudERhdGEiLCJwYXNzd29yZCIsImltYWdlIiwic2VsZWN0LW9uZSIsInNlbGVjdC1tdWx0aXBsZSIsIl9kZWZhdWx0XyIsIldlYktpdFRyYW5zaXRpb25FdmVudCIsImJ1YmJsZXMiLCJUcmFuc2l0aW9uRXZlbnQiLCJpbml0VHJhbnNpdGlvbkV2ZW50IiwiZWxhcHNlZFRpbWUiLCJXZWJLaXRBbmltYXRpb25FdmVudCIsIkFuaW1hdGlvbkV2ZW50IiwiaW5pdEFuaW1hdGlvbkV2ZW50IiwiRXZlbnQiLCJ0b3VjaCIsInRvdWNoZXMiLCJjcmVhdGVUb3VjaEV2ZW50IiwiY2FuY2VsYWJsZSIsInByZXNzZWQiLCJhbHRLZXkiLCJjaGFyQ29kZSIsIkNvbXBvc2l0aW9uRXZlbnQiLCJpbml0Q29tcG9zaXRpb25FdmVudCIsImluaXRNb3VzZUV2ZW50IiwiJG1hbnVhbFRpbWVTdGFtcCIsInRpbWVTdGFtcCIsImlzQXR0YWNoZWRUb0RvY3VtZW50Iiwic3RvcCIsIl9zdG9wUHJvcGFnYXRpb24iLCJfdGFyZ2V0IiwidHJpZ2dlckZvclBhdGgiLCJuZ19mcm9tX2dsb2JhbCIsIm5nIiwibmdfZnJvbV9pbXBvcnQiLCJuZ19mcm9tX2ltcG9ydC5tb2R1bGUiLCJ0ZW1wbGF0ZUZhY3RvcnkiLCJOZzFWaWV3Q29uZmlnIiwiaGFzQW55S2V5IiwibmcxVmlld3NCdWlsZGVyIiwiY29tcEtleXMiLCJub25Db21wS2V5cyIsImFsbFZpZXdLZXlzIiwidmlld3NPYmplY3QiLCIkZGVmYXVsdCIsInJlc29sdmVBcyIsImxvYWRlZCIsImdldFRlbXBsYXRlIiwibWFrZUNvbXBvbmVudFRlbXBsYXRlIiwibG9hZCIsImdldENvbnRyb2xsZXIiLCJjb250cm9sbGVyUHJvdmlkZXIiLCJwcm92aWRlckZuIiwiVGVtcGxhdGVGYWN0b3J5IiwiX3VzZUh0dHAiLCJ1c2VIdHRwU2VydmljZSIsImFzVGVtcGxhdGUiLCJhc0NvbXBvbmVudCIsImZyb21VcmwiLCJ0ZW1wbGF0ZVByb3ZpZGVyIiwiZnJvbVByb3ZpZGVyIiwiY29tcG9uZW50UHJvdmlkZXIiLCJmcm9tQ29tcG9uZW50UHJvdmlkZXIiLCJrZWJvYiIsImtlYm9iZWQiLCJjbXBEZWZzIiwiZ2V0QmluZGluZ3MiLCJnZXRDb21wb25lbnRCaW5kaW5ncyIsInJlc29sdmVOYW1lIiwia2Vib2JOYW1lIiwic2NvcGVCaW5kaW5ncyIsImJpbmRpbmdzT2JqIiwiU3RhdGVQcm92aWRlciIsImdldFN0YXRlSG9va0J1aWxkZXIiLCJzdGF0ZU9iamVjdCIsIiRzdGF0ZSQiLCIkdHJhbnNpdGlvbiQiLCJOZzFMb2NhdGlvblNlcnZpY2VzIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJfdXJsTGlzdGVuZXJzIiwiX2xwIiwibW9ua2V5UGF0Y2hQYXRoUGFyYW1ldGVyVHlwZSIsInBhdGhUeXBlIiwifiIsIi8iLCJ+fiIsIn4yRiIsIl9ydW50aW1lU2VydmljZXMiLCJfbG9jIiwiX2Jyb3dzZXIiLCJVcmxSb3V0ZXJQcm92aWRlciIsIl91cmxSb3V0ZXIiLCJpbmplY3RhYmxlSGFuZGxlciIsIiRtYXRjaCIsIiRzdGF0ZVBhcmFtcyIsInJ1bGVGbiIsIm1vZF9pbml0IiwibW9kX3V0aWwiLCJtb2RfcnRyIiwibW9kX3N0YXRlIiwibW9kX21haW4iLCIkdWlSb3V0ZXJQcm92aWRlciIsInN0YXRlUHJvdmlkZXIiLCJnZXROZzFWaWV3Q29uZmlnRmFjdG9yeSIsIm5nMUxvY2F0aW9uU2VydmljZSIsImdldFByb3ZpZGVyRm9yIiwiJHVycCIsInJ1bkJsb2NrIiwiJHVpUm91dGVyIiwid2F0Y2hEaWdlc3RzIiwidXJsUm91dGVyUHJvdmlkZXIiLCIkdXJsTWF0Y2hlckZhY3RvcnkiLCJ1aVNyZWZEaXJlY3RpdmUiLCJ1aVN0YXRlRGlyZWN0aXZlIiwidWlTcmVmQWN0aXZlRGlyZWN0aXZlIiwiY3R4IiwicGFyc2VTdGF0ZVJlZiIsInBhcmFtc09ubHkiLCJwYXJhbUV4cHIiLCIkdWlWaWV3IiwicHJvY2Vzc2VkRGVmIiwidWlTdGF0ZSIsInVpU3RhdGVPcHRzIiwiZGVmYXVsdE9wdHMiLCJ1aVN0YXRlUGFyYW1zIiwiZ2V0VHlwZUluZm8iLCJpc1N2ZyIsImlzRm9ybSIsImlzQW5jaG9yIiwiY2xpY2thYmxlIiwiY2xpY2tIb29rIiwiZ2V0RGVmIiwiaWdub3JlUHJldmVudERlZmF1bHRDb3VudF8xIiwiYmluZEV2ZW50cyIsImhvb2tGbiIsImV2ZW50c18xIiwiZXZlbnRfMSIsImV2ZW50c18yIiwiZXZlbnRfMiIsIiRJc1N0YXRlRmlsdGVyIiwiaXNGaWx0ZXIiLCIkSW5jbHVkZWRCeVN0YXRlRmlsdGVyIiwiaW5jbHVkZXNGaWx0ZXIiLCIkVmlld0RpcmVjdGl2ZUZpbGwiLCJnZXRDb250cm9sbGVyQXMiLCJnZXRSZXNvbHZlQXMiLCIkY2ZnIiwicmVzb2x2ZUN0eCIsInJlZ2lzdGVyQ29udHJvbGxlckNhbGxiYWNrcyIsImNtcF8xIiwidGFnUmVnZXhwXzEiLCJkZXJlZ2lzdGVyV2F0Y2hfMSIsImRpcmVjdGl2ZUVsIiwidGFnTmFtZSIsImN0cmxJbnN0YW5jZSIsInVpU3JlZkFjdGl2ZSIsInVubGlua0luZm9GbiIsInJhd0RlZiIsInVpU3JlZiIsIiQkYWRkU3RhdGVJbmZvIiwidWlTcmVmT3B0cyIsImlucHV0QXR0cnMiLCJ3YXRjaERlcmVnRm5zIiwiZmllbGQiLCJhY3RpdmVFcUNsYXNzIiwiZGVyZWdpc3RlclN0YXRlc0NoYW5nZWRMaXN0ZW5lciIsImRlcmVnaXN0ZXJPblN0YXJ0TGlzdGVuZXIiLCJkZXJlZ2lzdGVyU3RhdGVDaGFuZ2VTdWNjZXNzTGlzdGVuZXIiLCJ1aVNyZWZBY3RpdmVFcSIsInVwZGF0ZUFmdGVyVHJhbnNpdGlvbiIsImhhbmRsZVN0YXRlc0NoYW5nZWQiLCJzZXRTdGF0ZXNGcm9tRGVmaW5pdGlvbk9iamVjdCIsInN0YXRlc0RlZmluaXRpb24iLCJhY3RpdmVDbGFzcyIsImFkZFN0YXRlRm9yQ2xhc3MiLCJhZGRTdGF0ZSIsInN0YXRlUGFyYW1zIiwic3RhdGVJbmZvIiwiZ2V0Q2xhc3NlcyIsInN0YXRlTGlzdCIsImFsbENsYXNzZXMiLCJmdXp6eUNsYXNzZXMiLCJleGFjdENsYXNzZXMiLCJhZGRDbGFzc2VzIiwiY2xzIiwiJHVpVmlld1Njcm9sbCIsInJvb3REYXRhIiwicHJldmlvdXNFbCIsImN1cnJlbnRFbCIsInVucmVnaXN0ZXIiLCJyZW5kZXJlciIsImFjdGl2ZVVJVmlldyIsImNvbmZpZzEiLCJjb25maWcyIiwidXBkYXRlVmlldyIsImZyb21QYXJlbnRUYWdDb25maWciLCJmcm9tUGFyZW50VGFnIiwiYW5pbUVudGVyIiwiYW5pbUxlYXZlIiwiJHVpVmlld0RhdGEiLCIkdWlWaWV3QW5pbSIsIiRhbmltRW50ZXIiLCIkYW5pbUxlYXZlIiwiJCRhbmltTGVhdmUiLCJfdmlld0RhdGFfMSIsImNsZWFudXBMYXN0VmlldyIsImhhc0NvbXBvbmVudEltcGwiLCJfdWlDYW5FeGl0SWQiLCJ2aWV3U3RhdGUiLCJob29rT3B0aW9ucyIsInVpT25QYXJhbXNDaGFuZ2VkIiwidmlld0NyZWF0aW9uVHJhbnNfMSIsImZyb21QYXJhbXMiLCJnZXROb2RlU2NoZW1hIiwidG9TY2hlbWEiLCJmcm9tU2NoZW1hIiwiY2hhbmdlZFRvUGFyYW1zIiwiY2hhbmdlZEtleXNfMSIsInVpQ2FuRXhpdCIsImlkXzEiLCJwcmV2VHJ1dGh5QW5zd2VyXzEiLCJpZHMiLCJ1c2VBbmNob3JTY3JvbGwiLCJnIiwiZXZhbCIsInJvdXRlcl8xIiwiYWRkQ29yZVJlc29sdmFibGVzIiwiVFJBTlNJVElPTl9UT0tFTlMiLCJpc1RyYW5zaXRpb24iLCJyZXBsYWNlVHJhbnNpdGlvbldpdGhOdWxsIiwicmVkaXJlY3RUb0hvb2siLCJtYWtlRW50ZXJFeGl0UmV0YWluSG9vayIsIm9uRXhpdEhvb2siLCJvblJldGFpbkhvb2siLCJvbkVudGVySG9vayIsIlJFU09MVkVfSE9PS19QUklPUklUWSIsImVhZ2VyUmVzb2x2ZVBhdGgiLCJsYXp5UmVzb2x2ZVN0YXRlIiwicmVzb2x2ZVJlbWFpbmluZyIsImxvYWRFbnRlcmluZ1ZpZXdzIiwiZW50ZXJpbmdWaWV3cyIsImV4aXRpbmdWaWV3cyIsInVwZGF0ZUdsb2JhbFN0YXRlIiwiY2xlYXJDdXJyZW50VHJhbnNpdGlvbiIsInVybE9wdGlvbnMiLCJpZ25vcmVkSG9vayIsImlnbm9yZWRSZWFzb24iLCJpbnZhbGlkVHJhbnNpdGlvbkhvb2siLCJicm93c2VyTG9jYXRpb25Db25maWdfMSIsImhhc2hMb2NhdGlvblNlcnZpY2VfMSIsInB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZV8xIiwibWVtb3J5TG9jYXRpb25TZXJ2aWNlXzEiLCJtZW1vcnlMb2NhdGlvbkNvbmZpZ18xIiwiaW5qZWN0b3JfMSIsInFfMSIsInNlcnZpY2VzUGx1Z2luIiwiaGFzaExvY2F0aW9uUGx1Z2luIiwicHVzaFN0YXRlTG9jYXRpb25QbHVnaW4iLCJtZW1vcnlMb2NhdGlvblBsdWdpbiIsIlVJUm91dGVyUGx1Z2luQmFzZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBaEIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBaUIsV0FDQSxXQUEyQixPQUFBakIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVEsRUFBQUMsR0FBc0QsT0FBQVIsT0FBQVMsVUFBQUMsZUFBQWpCLEtBQUFjLEVBQUFDLElBR3REdEIsRUFBQXlCLEVBQUEsR0FHQXpCLElBQUEwQixFQUFBLGlHQ3BEQSxJQUFBQyxFQUFBM0IsRUFBQSxHQUNBNEIsRUFBQTVCLEVBQUEsR0FDQTZCLEVBQUE3QixFQUFBLEdBSWFFLEVBQUE0QixLQUNNLGlCQUFUQyxNQUFxQkEsS0FBS0EsT0FBU0EsTUFBUUEsTUFDaEMsaUJBQVhDLEdBQXVCQSxFQUFPQSxTQUFXQSxHQUFVQSxHQUMzREMs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QTdOLEVBQUEsb0ZDakJBLElBQUEya0ksRUFBQTNrSSxFQUFBLElBQ0E0a0ksRUFBQTVrSSxFQUFBLElBQ0Ftd0IsRUFBQW53QixFQUFBLElBR0E2a0ksRUFBQTdrSSxFQUFBLElBQ0E4a0ksRUFBQTlrSSxFQUFBLElBQ0Era0ksRUFBQS9rSSxFQUFBLElBQ0FnbEksRUFBQWhsSSxFQUFBLElBQ0FpbEksRUFBQWpsSSxFQUFBLElBQ0E2QixFQUFBN0IsRUFBQSxHQUVBRSxFQUFBZ2xJLGVBQUEsU0FBK0IxbkgsR0FJN0IsT0FIQTNiLEVBQUFvSixTQUFTMkMsVUFBWW8zSCxFQUFBcDNILFVBQ3JCL0wsRUFBQW9KLFNBQVNDLEdBQUsrNUgsRUFBQS81SCxJQUVMdkssS0FBTSxtQkFBb0J1SyxHQUFFKzVILEVBQUEvNUgsR0FBRTBDLFVBQVNvM0gsRUFBQXAzSCxVQUFFcWpCLFFBQVMsV0FBTSxlQUl0RC93QixFQUFBaWxJLG1CQUEyRGgxRyxFQUFBNEosc0JBQ3RFLDRCQUNBLEVBQ0E2cUcsRUFBQTMwRixvQkFDQTAwRixFQUFBanpGLHVCQUlXeHhDLEVBQUFrbEksd0JBQWdFajFHLEVBQUE0SixzQkFDM0UsNkJBQ0EsRUFDQThxRyxFQUFBbjBGLHlCQUNBaTBGLEVBQUFqekYsdUJBSVd4eEMsRUFBQW1sSSxxQkFBNkRsMUcsRUFBQTRKLHNCQUN4RSwwQkFDQSxFQUNBK3FHLEVBQUF2MEYsc0JBQ0F3MEYsRUFBQTV6RixxR0NxRUYsSUFBQW0wRixFQUFBLG9CQUFBQSxLQUdBLE9BREVBLEVBQUEvakksVUFBQTB2QixRQUFBLFNBQVF6VCxLQUNWOG5ILEVBSEEsR0FBc0JwbEksRUFBQW9sSSIsImZpbGUiOiJ0ZXN0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDU2KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA1YmMwMTNhYTQ5NzM1NDQ0YTAyMSIsIi8qKlxuICogUmFuZG9tIHV0aWxpdHkgZnVuY3Rpb25zIHVzZWQgaW4gdGhlIFVJLVJvdXRlciBjb2RlXG4gKlxuICogVGhlc2UgZnVuY3Rpb25zIGFyZSBleHBvcnRlZCwgYnV0IGFyZSBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IG5vdGljZS5cbiAqXG4gKiBAcHJlZmVycmVkXG4gKiBAbW9kdWxlIGNvbW1vblxuICovXG4vKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGlzRnVuY3Rpb24sIGlzU3RyaW5nLCBpc0FycmF5LCBpc1JlZ0V4cCwgaXNEYXRlIH0gZnJvbSAnLi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IGFsbCwgYW55LCBwcm9wLCBjdXJyeSwgbm90IH0gZnJvbSAnLi9ob2YnO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcblxuZGVjbGFyZSBjb25zdCBnbG9iYWw7XG5leHBvcnQgY29uc3Qgcm9vdDogYW55ID1cbiAgKHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGYgJiYgc2VsZikgfHxcbiAgKHR5cGVvZiBnbG9iYWwgPT09ICdvYmplY3QnICYmIGdsb2JhbC5nbG9iYWwgPT09IGdsb2JhbCAmJiBnbG9iYWwpIHx8XG4gIHRoaXM7XG5jb25zdCBhbmd1bGFyID0gcm9vdC5hbmd1bGFyIHx8IHt9O1xuXG5leHBvcnQgY29uc3QgZnJvbUpzb24gPSBhbmd1bGFyLmZyb21Kc29uIHx8IEpTT04ucGFyc2UuYmluZChKU09OKTtcbmV4cG9ydCBjb25zdCB0b0pzb24gPSBhbmd1bGFyLnRvSnNvbiB8fCBKU09OLnN0cmluZ2lmeS5iaW5kKEpTT04pO1xuZXhwb3J0IGNvbnN0IGZvckVhY2ggPSBhbmd1bGFyLmZvckVhY2ggfHwgX2ZvckVhY2g7XG5leHBvcnQgY29uc3QgZXh0ZW5kID0gT2JqZWN0LmFzc2lnbiB8fCBfZXh0ZW5kO1xuZXhwb3J0IGNvbnN0IGVxdWFscyA9IGFuZ3VsYXIuZXF1YWxzIHx8IF9lcXVhbHM7XG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoeDogYW55KSB7XG4gIHJldHVybiB4O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vb3AoKTogYW55IHt9XG5cbmV4cG9ydCB0eXBlIE1hcHBlcjxYLCBUPiA9ICh4OiBYLCBrZXk/OiBzdHJpbmcgfCBudW1iZXIpID0+IFQ7XG5leHBvcnQgaW50ZXJmYWNlIFR5cGVkTWFwPFQ+IHtcbiAgW2tleTogc3RyaW5nXTogVDtcbn1cbmV4cG9ydCB0eXBlIFByZWRpY2F0ZTxYPiA9ICh4PzogWCkgPT4gYm9vbGVhbjtcbi8qKlxuICogQW4gbmcxLXN0eWxlIGluamVjdGFibGVcbiAqXG4gKiBUaGlzIGNvdWxkIGJlIGEgKG5vbi1taW5pZmllZCkgZnVuY3Rpb24gc3VjaCBhczpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBpbmplY3RhYmxlRnVuY3Rpb24oU29tZURlcGVuZGVuY3kpIHtcbiAqXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBvciBhbiBleHBsaWNpdGx5IGFubm90YXRlZCBmdW5jdGlvbiAobWluaWZ5IHNhZmUpXG4gKiBgYGBqc1xuICogaW5qZWN0YWJsZUZ1bmN0aW9uLiRpbmplY3QgPSBbICdTb21lRGVwZW5kZW5jeScgXTtcbiAqIGZ1bmN0aW9uIGluamVjdGFibGVGdW5jdGlvbihTb21lRGVwZW5kZW5jeSkge1xuICpcbiAqIH1cbiAqIGBgYFxuICpcbiAqIG9yIGFuIGFycmF5IHN0eWxlIGFubm90YXRlZCBmdW5jdGlvbiAobWluaWZ5IHNhZmUpXG4gKiBgYGBqc1xuICogWydTb21lRGVwZW5kZW5jeScsIGZ1bmN0aW9uIGluamVjdGFibGVGdW5jdGlvbihTb21lRGVwZW5kZW5jeSkge1xuICpcbiAqIH1dO1xuICogYGBgXG4gKlxuICogQHB1YmxpY2FwaVxuICovXG5leHBvcnQgdHlwZSBJSW5qZWN0YWJsZSA9IEZ1bmN0aW9uIHwgYW55W107XG5cbmV4cG9ydCBpbnRlcmZhY2UgT2JqIGV4dGVuZHMgT2JqZWN0IHtcbiAgW2tleTogc3RyaW5nXTogYW55O1xufVxuXG4vKipcbiAqIEJ1aWxkcyBwcm94eSBmdW5jdGlvbnMgb24gdGhlIGB0b2Agb2JqZWN0IHdoaWNoIHBhc3MgdGhyb3VnaCB0byB0aGUgYGZyb21gIG9iamVjdC5cbiAqXG4gKiBGb3IgZWFjaCBrZXkgaW4gYGZuTmFtZXNgLCBjcmVhdGVzIGEgcHJveHkgZnVuY3Rpb24gb24gdGhlIGB0b2Agb2JqZWN0LlxuICogVGhlIHByb3h5IGZ1bmN0aW9uIGNhbGxzIHRoZSByZWFsIGZ1bmN0aW9uIG9uIHRoZSBgZnJvbWAgb2JqZWN0LlxuICpcbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBUaGlzIGV4YW1wbGUgY3JlYXRlcyBhbiBuZXcgY2xhc3MgaW5zdGFuY2Ugd2hvc2UgZnVuY3Rpb25zIGFyZSBwcmVib3VuZCB0byB0aGUgbmV3J2Qgb2JqZWN0LlxuICogYGBganNcbiAqIGNsYXNzIEZvbyB7XG4gKiAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAqICAgICAvLyBCaW5kcyBhbGwgZnVuY3Rpb25zIGZyb20gRm9vLnByb3RvdHlwZSB0byAndGhpcycsXG4gKiAgICAgLy8gdGhlbiBjb3BpZXMgdGhlbSB0byAndGhpcydcbiAqICAgICBiaW5kRnVuY3Rpb25zKEZvby5wcm90b3R5cGUsIHRoaXMsIHRoaXMpO1xuICogICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gKiAgIH1cbiAqXG4gKiAgIGxvZygpIHtcbiAqICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpO1xuICogICB9XG4gKiB9XG4gKlxuICogbGV0IG15Rm9vID0gbmV3IEZvbyhbMSwyLDNdKTtcbiAqIHZhciBsb2dpdCA9IG15Rm9vLmxvZztcbiAqIGxvZ2l0KCk7IC8vIGxvZ3MgWzEsIDIsIDNdIGZyb20gdGhlIG15Rm9vICd0aGlzJyBpbnN0YW5jZVxuICogYGBgXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogVGhpcyBleGFtcGxlIGNyZWF0ZXMgYSBib3VuZCB2ZXJzaW9uIG9mIGEgc2VydmljZSBmdW5jdGlvbiwgYW5kIGNvcGllcyBpdCB0byBhbm90aGVyIG9iamVjdFxuICogYGBgXG4gKlxuICogdmFyIFNvbWVTZXJ2aWNlID0ge1xuICogICB0aGlzLmRhdGEgPSBbMywgNCwgNV07XG4gKiAgIHRoaXMubG9nID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgY29uc29sZS5sb2codGhpcy5kYXRhKTtcbiAqICAgfVxuICogfVxuICpcbiAqIC8vIENvbnN0cnVjdG9yIGZuXG4gKiBmdW5jdGlvbiBPdGhlclRoaW5nKCkge1xuICogICAvLyBCaW5kcyBhbGwgZnVuY3Rpb25zIGZyb20gU29tZVNlcnZpY2UgdG8gU29tZVNlcnZpY2UsXG4gKiAgIC8vIHRoZW4gY29waWVzIHRoZW0gdG8gJ3RoaXMnXG4gKiAgIGJpbmRGdW5jdGlvbnMoU29tZVNlcnZpY2UsIHRoaXMsIFNvbWVTZXJ2aWNlKTtcbiAqIH1cbiAqXG4gKiBsZXQgbXlPdGhlclRoaW5nID0gbmV3IE90aGVyVGhpbmcoKTtcbiAqIG15T3RoZXJUaGluZy5sb2coKTsgLy8gbG9ncyBbMywgNCwgNV0gZnJvbSBTb21lU2VydmljZSdzICd0aGlzJ1xuICogYGBgXG4gKlxuICogQHBhcmFtIHNvdXJjZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgc291cmNlIG9iamVjdCB3aGljaCBjb250YWlucyB0aGUgb3JpZ2luYWwgZnVuY3Rpb25zIHRvIGJlIGJvdW5kXG4gKiBAcGFyYW0gdGFyZ2V0IEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSB0YXJnZXQgb2JqZWN0IHdoaWNoIHdpbGwgcmVjZWl2ZSB0aGUgYm91bmQgZnVuY3Rpb25zXG4gKiBAcGFyYW0gYmluZCBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgb2JqZWN0IHdoaWNoIHRoZSBmdW5jdGlvbnMgd2lsbCBiZSBib3VuZCB0b1xuICogQHBhcmFtIGZuTmFtZXMgVGhlIGZ1bmN0aW9uIG5hbWVzIHdoaWNoIHdpbGwgYmUgYm91bmQgKERlZmF1bHRzIHRvIGFsbCB0aGUgZnVuY3Rpb25zIGZvdW5kIG9uIHRoZSAnZnJvbScgb2JqZWN0KVxuICogQHBhcmFtIGxhdGViaW5kIElmIHRydWUsIHRoZSBiaW5kaW5nIG9mIHRoZSBmdW5jdGlvbiBpcyBkZWxheWVkIHVudGlsIHRoZSBmaXJzdCB0aW1lIGl0J3MgaW52b2tlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJveHlGdW5jdGlvbnMoXG4gIHNvdXJjZTogRnVuY3Rpb24sXG4gIHRhcmdldDogT2JqLFxuICBiaW5kOiBGdW5jdGlvbixcbiAgZm5OYW1lcz86IHN0cmluZ1tdLFxuICBsYXRlYmluZCA9IGZhbHNlLFxuKTogT2JqIHtcbiAgY29uc3QgYmluZEZ1bmN0aW9uID0gZm5OYW1lID0+IHNvdXJjZSgpW2ZuTmFtZV0uYmluZChiaW5kKCkpO1xuXG4gIGNvbnN0IG1ha2VMYXRlUmViaW5kRm4gPSBmbk5hbWUgPT5cbiAgICBmdW5jdGlvbiBsYXRlUmViaW5kRnVuY3Rpb24oKSB7XG4gICAgICB0YXJnZXRbZm5OYW1lXSA9IGJpbmRGdW5jdGlvbihmbk5hbWUpO1xuICAgICAgcmV0dXJuIHRhcmdldFtmbk5hbWVdLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICBmbk5hbWVzID0gZm5OYW1lcyB8fCBPYmplY3Qua2V5cyhzb3VyY2UoKSk7XG5cbiAgcmV0dXJuIGZuTmFtZXMucmVkdWNlKChhY2MsIG5hbWUpID0+IHtcbiAgICBhY2NbbmFtZV0gPSBsYXRlYmluZCA/IG1ha2VMYXRlUmViaW5kRm4obmFtZSkgOiBiaW5kRnVuY3Rpb24obmFtZSk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwgdGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGhlbHBlci5cbiAqIENyZWF0ZXMgYSBuZXcgb2JqZWN0IHdoaWNoIGhhcyBgcGFyZW50YCBvYmplY3QgYXMgaXRzIHByb3RvdHlwZSwgYW5kIHRoZW4gY29waWVzIHRoZSBwcm9wZXJ0aWVzIGZyb20gYGV4dHJhYCBvbnRvIGl0XG4gKi9cbmV4cG9ydCBjb25zdCBpbmhlcml0ID0gKHBhcmVudDogT2JqLCBleHRyYT86IE9iaikgPT4gZXh0ZW5kKE9iamVjdC5jcmVhdGUocGFyZW50KSwgZXh0cmEpO1xuXG4vKiogR2l2ZW4gYW4gYXJyYXksIHJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIGZvdW5kIGluIHRoZSBhcnJheSwgKHVzaW5nIGluZGV4T2YpICovXG5leHBvcnQgY29uc3QgaW5BcnJheTogdHlwZW9mIF9pbkFycmF5ID0gY3VycnkoX2luQXJyYXkpIGFzIGFueTtcbmV4cG9ydCBmdW5jdGlvbiBfaW5BcnJheShhcnJheTogYW55W10sIG9iajogYW55KTogYm9vbGVhbjtcbmV4cG9ydCBmdW5jdGlvbiBfaW5BcnJheShhcnJheTogYW55W10pOiAob2JqOiBhbnkpID0+IGJvb2xlYW47XG5leHBvcnQgZnVuY3Rpb24gX2luQXJyYXkoYXJyYXksIG9iaj8pOiBhbnkge1xuICByZXR1cm4gYXJyYXkuaW5kZXhPZihvYmopICE9PSAtMTtcbn1cblxuLyoqXG4gKiBHaXZlbiBhbiBhcnJheSwgYW5kIGFuIGl0ZW0sIGlmIHRoZSBpdGVtIGlzIGZvdW5kIGluIHRoZSBhcnJheSwgaXQgcmVtb3ZlcyBpdCAoaW4tcGxhY2UpLlxuICogVGhlIHNhbWUgYXJyYXkgaXMgcmV0dXJuZWRcbiAqL1xuZXhwb3J0IGNvbnN0IHJlbW92ZUZyb206IHR5cGVvZiBfcmVtb3ZlRnJvbSA9IGN1cnJ5KF9yZW1vdmVGcm9tKSBhcyBhbnk7XG5leHBvcnQgZnVuY3Rpb24gX3JlbW92ZUZyb208VD4oYXJyYXk6IFRbXSwgb2JqOiBUKTogVFtdO1xuZXhwb3J0IGZ1bmN0aW9uIF9yZW1vdmVGcm9tPFQ+KGFycmF5OiBUW10pOiAob2JqOiBUKSA9PiBUW107XG5leHBvcnQgZnVuY3Rpb24gX3JlbW92ZUZyb20oYXJyYXksIG9iaj8pIHtcbiAgY29uc3QgaWR4ID0gYXJyYXkuaW5kZXhPZihvYmopO1xuICBpZiAoaWR4ID49IDApIGFycmF5LnNwbGljZShpZHgsIDEpO1xuICByZXR1cm4gYXJyYXk7XG59XG5cbi8qKiBwdXNoZXMgYSB2YWx1ZXMgdG8gYW4gYXJyYXkgYW5kIHJldHVybnMgdGhlIHZhbHVlICovXG5leHBvcnQgY29uc3QgcHVzaFRvOiB0eXBlb2YgX3B1c2hUbyA9IGN1cnJ5KF9wdXNoVG8pIGFzIGFueTtcbmV4cG9ydCBmdW5jdGlvbiBfcHVzaFRvPFQ+KGFycjogVFtdLCB2YWw6IFQpOiBUO1xuZXhwb3J0IGZ1bmN0aW9uIF9wdXNoVG88VD4oYXJyOiBUW10pOiAodmFsOiBUKSA9PiBUO1xuZXhwb3J0IGZ1bmN0aW9uIF9wdXNoVG8oYXJyLCB2YWw/KTogYW55IHtcbiAgcmV0dXJuIGFyci5wdXNoKHZhbCksIHZhbDtcbn1cblxuLyoqIEdpdmVuIGFuIGFycmF5IG9mIChkZXJlZ2lzdHJhdGlvbikgZnVuY3Rpb25zLCBjYWxscyBhbGwgZnVuY3Rpb25zIGFuZCByZW1vdmVzIGVhY2ggb25lIGZyb20gdGhlIHNvdXJjZSBhcnJheSAqL1xuZXhwb3J0IGNvbnN0IGRlcmVnQWxsID0gKGZ1bmN0aW9uczogRnVuY3Rpb25bXSkgPT5cbiAgZnVuY3Rpb25zLnNsaWNlKCkuZm9yRWFjaChmbiA9PiB7XG4gICAgdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICYmIGZuKCk7XG4gICAgcmVtb3ZlRnJvbShmdW5jdGlvbnMsIGZuKTtcbiAgfSk7XG4vKipcbiAqIEFwcGxpZXMgYSBzZXQgb2YgZGVmYXVsdHMgdG8gYW4gb3B0aW9ucyBvYmplY3QuICBUaGUgb3B0aW9ucyBvYmplY3QgaXMgZmlsdGVyZWRcbiAqIHRvIG9ubHkgdGhvc2UgcHJvcGVydGllcyBvZiB0aGUgb2JqZWN0cyBpbiB0aGUgZGVmYXVsdHNMaXN0LlxuICogRWFybGllciBvYmplY3RzIGluIHRoZSBkZWZhdWx0c0xpc3QgdGFrZSBwcmVjZWRlbmNlIHdoZW4gYXBwbHlpbmcgZGVmYXVsdHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRzLCAuLi5kZWZhdWx0c0xpc3Q6IE9ialtdKSB7XG4gIGNvbnN0IF9kZWZhdWx0c0xpc3QgPSBkZWZhdWx0c0xpc3QuY29uY2F0KHt9KS5yZXZlcnNlKCk7XG4gIGNvbnN0IGRlZmF1bHRWYWxzID0gZXh0ZW5kLmFwcGx5KG51bGwsIF9kZWZhdWx0c0xpc3QpO1xuICByZXR1cm4gZXh0ZW5kKHt9LCBkZWZhdWx0VmFscywgcGljayhvcHRzIHx8IHt9LCBPYmplY3Qua2V5cyhkZWZhdWx0VmFscykpKTtcbn1cblxuLyoqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IG1lcmdlcyBlYWNoIGVsZW1lbnQgb2YgdGhlIGxpc3QgaW50byBhIHNpbmdsZSBvYmplY3QsIHVzaW5nIGV4dGVuZCAqL1xuZXhwb3J0IGNvbnN0IG1lcmdlUiA9IChtZW1vOiBPYmosIGl0ZW06IE9iaikgPT4gZXh0ZW5kKG1lbW8sIGl0ZW0pO1xuXG4vKipcbiAqIEZpbmRzIHRoZSBjb21tb24gYW5jZXN0b3IgcGF0aCBiZXR3ZWVuIHR3byBzdGF0ZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGZpcnN0IFRoZSBmaXJzdCBzdGF0ZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzZWNvbmQgVGhlIHNlY29uZCBzdGF0ZS5cbiAqIEByZXR1cm4ge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHN0YXRlIG5hbWVzIGluIGRlc2NlbmRpbmcgb3JkZXIsIG5vdCBpbmNsdWRpbmcgdGhlIHJvb3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbmNlc3RvcnMoZmlyc3Q6IFN0YXRlT2JqZWN0LCBzZWNvbmQ6IFN0YXRlT2JqZWN0KSB7XG4gIGNvbnN0IHBhdGg6IFN0YXRlT2JqZWN0W10gPSBbXTtcblxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Zm9yaW5cbiAgZm9yIChjb25zdCBuIGluIGZpcnN0LnBhdGgpIHtcbiAgICBpZiAoZmlyc3QucGF0aFtuXSAhPT0gc2Vjb25kLnBhdGhbbl0pIGJyZWFrO1xuICAgIHBhdGgucHVzaChmaXJzdC5wYXRoW25dKTtcbiAgfVxuICByZXR1cm4gcGF0aDtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgb25seSBjb250YWluaW5nIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0aWVzLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYFxuICogdmFyIGZvbyA9IHsgYTogMSwgYjogMiwgYzogMyB9O1xuICogdmFyIGFiID0gcGljayhmb28sIFsnYScsICdiJ10pOyAvLyB7IGE6IDEsIGI6IDIgfVxuICogYGBgXG4gKiBAcGFyYW0gb2JqIHRoZSBzb3VyY2Ugb2JqZWN0XG4gKiBAcGFyYW0gcHJvcE5hbWVzIGFuIEFycmF5IG9mIHN0cmluZ3MsIHdoaWNoIGFyZSB0aGUgd2hpdGVsaXN0ZWQgcHJvcGVydHkgbmFtZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBpY2sob2JqOiBPYmosIHByb3BOYW1lczogc3RyaW5nW10pOiBPYmoge1xuICBjb25zdCBvYmpDb3B5ID0ge307XG4gIGZvciAoY29uc3QgX3Byb3AgaW4gb2JqKSB7XG4gICAgaWYgKHByb3BOYW1lcy5pbmRleE9mKF9wcm9wKSAhPT0gLTEpIHtcbiAgICAgIG9iakNvcHlbX3Byb3BdID0gb2JqW19wcm9wXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iakNvcHk7XG59XG5cbi8qKlxuICogUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IG9taXR0aW5nIHRoZSBibGFja2xpc3RlZCBwcm9wZXJ0aWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiB2YXIgZm9vID0geyBhOiAxLCBiOiAyLCBjOiAzIH07XG4gKiB2YXIgYWIgPSBvbWl0KGZvbywgWydhJywgJ2InXSk7IC8vIHsgYzogMyB9XG4gKiBgYGBcbiAqIEBwYXJhbSBvYmogdGhlIHNvdXJjZSBvYmplY3RcbiAqIEBwYXJhbSBwcm9wTmFtZXMgYW4gQXJyYXkgb2Ygc3RyaW5ncywgd2hpY2ggYXJlIHRoZSBibGFja2xpc3RlZCBwcm9wZXJ0eSBuYW1lc1xuICovXG5leHBvcnQgZnVuY3Rpb24gb21pdChvYmo6IE9iaiwgcHJvcE5hbWVzOiBzdHJpbmdbXSk6IE9iaiB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgLmZpbHRlcihub3QoaW5BcnJheShwcm9wTmFtZXMpKSlcbiAgICAucmVkdWNlKChhY2MsIGtleSkgPT4gKChhY2Nba2V5XSA9IG9ialtrZXldKSwgYWNjKSwge30pO1xufVxuXG4vKiogR2l2ZW4gYW4gYXJyYXkgb2Ygb2JqZWN0cywgbWFwcyBlYWNoIGVsZW1lbnQgdG8gYSBuYW1lZCBwcm9wZXJ0eSBvZiB0aGUgZWxlbWVudC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwbHVjazxUPihjb2xsZWN0aW9uOiBPYmpbXSwgcHJvcE5hbWU6IHN0cmluZyk6IFRbXTtcbi8qKiBHaXZlbiBhbiBvYmplY3QsIG1hcHMgZWFjaCBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0IHRvIGEgbmFtZWQgcHJvcGVydHkgb2YgdGhlIHByb3BlcnR5LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBsdWNrKGNvbGxlY3Rpb246IHsgW2tleTogc3RyaW5nXTogYW55IH0sIHByb3BOYW1lOiBzdHJpbmcpOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuLyoqXG4gKiBNYXBzIGFuIGFycmF5LCBvciBvYmplY3QgdG8gYSBwcm9wZXJ0eSAoYnkgbmFtZSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBsdWNrKGNvbGxlY3Rpb246IGFueSwgcHJvcE5hbWU6IHN0cmluZyk6IGFueSB7XG4gIHJldHVybiBtYXAoY29sbGVjdGlvbiwgPE1hcHBlcjxhbnksIHN0cmluZz4+cHJvcChwcm9wTmFtZSkpO1xufVxuXG4vKiogR2l2ZW4gYW4gYXJyYXkgb2Ygb2JqZWN0cywgcmV0dXJucyBhIG5ldyBhcnJheSBjb250YWluaW5nIG9ubHkgdGhlIGVsZW1lbnRzIHdoaWNoIHBhc3NlZCB0aGUgY2FsbGJhY2sgcHJlZGljYXRlICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyPFQ+KGNvbGxlY3Rpb246IFRbXSwgY2FsbGJhY2s6ICh0OiBULCBrZXk/OiBudW1iZXIpID0+IGJvb2xlYW4pOiBUW107XG4vKiogR2l2ZW4gYW4gb2JqZWN0LCByZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIG9ubHkgdGhvc2UgcHJvcGVydGllcyB0aGF0IHBhc3NlZCB0aGUgY2FsbGJhY2sgcHJlZGljYXRlICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyPFQ+KGNvbGxlY3Rpb246IFR5cGVkTWFwPFQ+LCBjYWxsYmFjazogKHQ6IFQsIGtleT86IHN0cmluZykgPT4gYm9vbGVhbik6IFR5cGVkTWFwPFQ+O1xuLyoqIEZpbHRlcnMgYW4gQXJyYXkgb3IgYW4gT2JqZWN0J3MgcHJvcGVydGllcyBiYXNlZCBvbiBhIHByZWRpY2F0ZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxUPihjb2xsZWN0aW9uOiBhbnksIGNhbGxiYWNrOiBGdW5jdGlvbik6IFQge1xuICBjb25zdCBhcnIgPSBpc0FycmF5KGNvbGxlY3Rpb24pLFxuICAgIHJlc3VsdDogYW55ID0gYXJyID8gW10gOiB7fTtcbiAgY29uc3QgYWNjZXB0ID0gYXJyID8geCA9PiByZXN1bHQucHVzaCh4KSA6ICh4LCBrZXkpID0+IChyZXN1bHRba2V5XSA9IHgpO1xuICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKGl0ZW0sIGkpIHtcbiAgICBpZiAoY2FsbGJhY2soaXRlbSwgaSkpIGFjY2VwdChpdGVtLCBpKTtcbiAgfSk7XG4gIHJldHVybiA8VD5yZXN1bHQ7XG59XG5cbi8qKiBHaXZlbiBhbiBvYmplY3QsIHJldHVybiB0aGUgZmlyc3QgcHJvcGVydHkgb2YgdGhhdCBvYmplY3Qgd2hpY2ggcGFzc2VkIHRoZSBjYWxsYmFjayBwcmVkaWNhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kPFQ+KGNvbGxlY3Rpb246IFR5cGVkTWFwPFQ+LCBjYWxsYmFjazogUHJlZGljYXRlPFQ+KTogVDtcbi8qKiBHaXZlbiBhbiBhcnJheSBvZiBvYmplY3RzLCByZXR1cm5zIHRoZSBmaXJzdCBvYmplY3Qgd2hpY2ggcGFzc2VkIHRoZSBjYWxsYmFjayBwcmVkaWNhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kPFQ+KGNvbGxlY3Rpb246IFRbXSwgY2FsbGJhY2s6IFByZWRpY2F0ZTxUPik6IFQ7XG4vKiogRmluZHMgYW4gb2JqZWN0IGZyb20gYW4gYXJyYXksIG9yIGEgcHJvcGVydHkgb2YgYW4gb2JqZWN0LCB0aGF0IG1hdGNoZXMgYSBwcmVkaWNhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kKGNvbGxlY3Rpb246IGFueSwgY2FsbGJhY2s6IGFueSkge1xuICBsZXQgcmVzdWx0O1xuXG4gIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24oaXRlbSwgaSkge1xuICAgIGlmIChyZXN1bHQpIHJldHVybjtcbiAgICBpZiAoY2FsbGJhY2soaXRlbSwgaSkpIHJlc3VsdCA9IGl0ZW07XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKiBHaXZlbiBhbiBvYmplY3QsIHJldHVybnMgYSBuZXcgb2JqZWN0LCB3aGVyZSBlYWNoIHByb3BlcnR5IGlzIHRyYW5zZm9ybWVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbiAqL1xuZXhwb3J0IGxldCBtYXBPYmo6IDxULCBVPihcbiAgY29sbGVjdGlvbjogeyBba2V5OiBzdHJpbmddOiBUIH0sXG4gIGNhbGxiYWNrOiBNYXBwZXI8VCwgVT4sXG4gIHRhcmdldD86IHR5cGVvZiBjb2xsZWN0aW9uLFxuKSA9PiB7IFtrZXk6IHN0cmluZ106IFUgfSA9IG1hcDtcbi8qKiBHaXZlbiBhbiBhcnJheSwgcmV0dXJucyBhIG5ldyBhcnJheSwgd2hlcmUgZWFjaCBlbGVtZW50IGlzIHRyYW5zZm9ybWVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcDxULCBVPihjb2xsZWN0aW9uOiBUW10sIGNhbGxiYWNrOiBNYXBwZXI8VCwgVT4sIHRhcmdldD86IHR5cGVvZiBjb2xsZWN0aW9uKTogVVtdO1xuZXhwb3J0IGZ1bmN0aW9uIG1hcDxULCBVPihcbiAgY29sbGVjdGlvbjogeyBba2V5OiBzdHJpbmddOiBUIH0sXG4gIGNhbGxiYWNrOiBNYXBwZXI8VCwgVT4sXG4gIHRhcmdldD86IHR5cGVvZiBjb2xsZWN0aW9uLFxuKTogeyBba2V5OiBzdHJpbmddOiBVIH07XG4vKiogTWFwcyBhbiBhcnJheSBvciBvYmplY3QgcHJvcGVydGllcyB1c2luZyBhIGNhbGxiYWNrIGZ1bmN0aW9uICovXG5leHBvcnQgZnVuY3Rpb24gbWFwKGNvbGxlY3Rpb246IGFueSwgY2FsbGJhY2s6IGFueSwgdGFyZ2V0OiB0eXBlb2YgY29sbGVjdGlvbik6IGFueSB7XG4gIHRhcmdldCA9IHRhcmdldCB8fCAoaXNBcnJheShjb2xsZWN0aW9uKSA/IFtdIDoge30pO1xuICBmb3JFYWNoKGNvbGxlY3Rpb24sIChpdGVtLCBpKSA9PiAodGFyZ2V0W2ldID0gY2FsbGJhY2soaXRlbSwgaSkpKTtcbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuLyoqXG4gKiBHaXZlbiBhbiBvYmplY3QsIHJldHVybiBpdHMgZW51bWVyYWJsZSBwcm9wZXJ0eSB2YWx1ZXNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGZvbyA9IHsgYTogMSwgYjogMiwgYzogMyB9XG4gKiBsZXQgdmFscyA9IHZhbHVlcyhmb28pOyAvLyBbIDEsIDIsIDMgXVxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCB2YWx1ZXM6ICg8VD4ob2JqOiBUeXBlZE1hcDxUPikgPT4gVFtdKSA9IChvYmo6IE9iaikgPT4gT2JqZWN0LmtleXMob2JqKS5tYXAoa2V5ID0+IG9ialtrZXldKTtcblxuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRydWUgaWYgYWxsIG9mIHRoZSB2YWx1ZXMgYXJlIHRydXRoeS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IHZhbHMgPSBbIDEsIHRydWUsIHt9LCBcImhlbGxvIHdvcmxkXCJdO1xuICogdmFscy5yZWR1Y2UoYWxsVHJ1ZVIsIHRydWUpOyAvLyB0cnVlXG4gKlxuICogdmFscy5wdXNoKDApO1xuICogdmFscy5yZWR1Y2UoYWxsVHJ1ZVIsIHRydWUpOyAvLyBmYWxzZVxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBhbGxUcnVlUiA9IChtZW1vOiBib29sZWFuLCBlbGVtOiBhbnkpID0+IG1lbW8gJiYgZWxlbTtcblxuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRydWUgaWYgYW55IG9mIHRoZSB2YWx1ZXMgYXJlIHRydXRoeS5cbiAqXG4gKiAgKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IHZhbHMgPSBbIDAsIG51bGwsIHVuZGVmaW5lZCBdO1xuICogdmFscy5yZWR1Y2UoYW55VHJ1ZVIsIHRydWUpOyAvLyBmYWxzZVxuICpcbiAqIHZhbHMucHVzaChcImhlbGxvIHdvcmxkXCIpO1xuICogdmFscy5yZWR1Y2UoYW55VHJ1ZVIsIHRydWUpOyAvLyB0cnVlXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IGFueVRydWVSID0gKG1lbW86IGJvb2xlYW4sIGVsZW06IGFueSkgPT4gbWVtbyB8fCBlbGVtO1xuXG4vKipcbiAqIFJlZHVjZSBmdW5jdGlvbiB3aGljaCB1bi1uZXN0cyBhIHNpbmdsZSBsZXZlbCBvZiBhcnJheXNcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgaW5wdXQgPSBbIFsgXCJhXCIsIFwiYlwiIF0sIFsgXCJjXCIsIFwiZFwiIF0sIFsgWyBcImRvdWJsZVwiLCBcIm5lc3RlZFwiIF0gXSBdO1xuICogaW5wdXQucmVkdWNlKHVubmVzdFIsIFtdKSAvLyBbIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBbIFwiZG91YmxlLCBcIm5lc3RlZFwiIF0gXVxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCB1bm5lc3RSID0gKG1lbW86IGFueVtdLCBlbGVtOiBhbnlbXSkgPT4gbWVtby5jb25jYXQoZWxlbSk7XG5cbi8qKlxuICogUmVkdWNlIGZ1bmN0aW9uIHdoaWNoIHJlY3Vyc2l2ZWx5IHVuLW5lc3RzIGFsbCBhcnJheXNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGlucHV0ID0gWyBbIFwiYVwiLCBcImJcIiBdLCBbIFwiY1wiLCBcImRcIiBdLCBbIFsgXCJkb3VibGVcIiwgXCJuZXN0ZWRcIiBdIF0gXTtcbiAqIGlucHV0LnJlZHVjZSh1bm5lc3RSLCBbXSkgLy8gWyBcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgXCJkb3VibGUsIFwibmVzdGVkXCIgXVxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBmbGF0dGVuUiA9IChtZW1vOiBhbnlbXSwgZWxlbTogYW55KSA9PlxuICBpc0FycmF5KGVsZW0pID8gbWVtby5jb25jYXQoZWxlbS5yZWR1Y2UoZmxhdHRlblIsIFtdKSkgOiBwdXNoUihtZW1vLCBlbGVtKTtcblxuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCBwdXNoZXMgYW4gb2JqZWN0IHRvIGFuIGFycmF5LCB0aGVuIHJldHVybnMgdGhlIGFycmF5LlxuICogTW9zdGx5IGp1c3QgZm9yIFtbZmxhdHRlblJdXSBhbmQgW1t1bmlxUl1dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdXNoUihhcnI6IGFueVtdLCBvYmo6IGFueSkge1xuICBhcnIucHVzaChvYmopO1xuICByZXR1cm4gYXJyO1xufVxuXG4vKiogUmVkdWNlIGZ1bmN0aW9uIHRoYXQgZmlsdGVycyBvdXQgZHVwbGljYXRlcyAqL1xuZXhwb3J0IGNvbnN0IHVuaXFSID0gPFQ+KGFjYzogVFtdLCB0b2tlbjogVCk6IFRbXSA9PiAoaW5BcnJheShhY2MsIHRva2VuKSA/IGFjYyA6IHB1c2hSKGFjYywgdG9rZW4pKTtcblxuLyoqXG4gKiBSZXR1cm4gYSBuZXcgYXJyYXkgd2l0aCBhIHNpbmdsZSBsZXZlbCBvZiBhcnJheXMgdW5uZXN0ZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIGxldCBpbnB1dCA9IFsgWyBcImFcIiwgXCJiXCIgXSwgWyBcImNcIiwgXCJkXCIgXSwgWyBbIFwiZG91YmxlXCIsIFwibmVzdGVkXCIgXSBdIF07XG4gKiB1bm5lc3QoaW5wdXQpIC8vIFsgXCJhXCIsIFwiYlwiLCBcImNcIiwgXCJkXCIsIFsgXCJkb3VibGUsIFwibmVzdGVkXCIgXSBdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IHVubmVzdCA9IChhcnI6IGFueVtdKSA9PiBhcnIucmVkdWNlKHVubmVzdFIsIFtdKTtcbi8qKlxuICogUmV0dXJuIGEgY29tcGxldGVseSBmbGF0dGVuZWQgdmVyc2lvbiBvZiBhbiBhcnJheS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGlucHV0ID0gWyBbIFwiYVwiLCBcImJcIiBdLCBbIFwiY1wiLCBcImRcIiBdLCBbIFsgXCJkb3VibGVcIiwgXCJuZXN0ZWRcIiBdIF0gXTtcbiAqIGZsYXR0ZW4oaW5wdXQpIC8vIFsgXCJhXCIsIFwiYlwiLCBcImNcIiwgXCJkXCIsIFwiZG91YmxlLCBcIm5lc3RlZFwiIF1cbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgZmxhdHRlbiA9IChhcnI6IGFueVtdKSA9PiBhcnIucmVkdWNlKGZsYXR0ZW5SLCBbXSk7XG5cbi8qKlxuICogR2l2ZW4gYSAuZmlsdGVyIFByZWRpY2F0ZSwgYnVpbGRzIGEgLmZpbHRlciBQcmVkaWNhdGUgd2hpY2ggdGhyb3dzIGFuIGVycm9yIGlmIGFueSBlbGVtZW50cyBkbyBub3QgcGFzcy5cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgaXNOdW1iZXIgPSAob2JqKSA9PiB0eXBlb2Yob2JqKSA9PT0gJ251bWJlcic7XG4gKiBsZXQgYWxsTnVtYmVycyA9IFsgMSwgMiwgMywgNCwgNSBdO1xuICogYWxsTnVtYmVycy5maWx0ZXIoYXNzZXJ0UHJlZGljYXRlKGlzTnVtYmVyKSk7IC8vT0tcbiAqXG4gKiBsZXQgb25lU3RyaW5nID0gWyAxLCAyLCAzLCA0LCBcIjVcIiBdO1xuICogb25lU3RyaW5nLmZpbHRlcihhc3NlcnRQcmVkaWNhdGUoaXNOdW1iZXIsIFwiTm90IGFsbCBudW1iZXJzXCIpKTsgLy8gdGhyb3dzIEVycm9yKFwiXCJOb3QgYWxsIG51bWJlcnNcIlwiKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgYXNzZXJ0UHJlZGljYXRlOiA8VD4ocHJlZGljYXRlOiBQcmVkaWNhdGU8VD4sIGVyck1zZzogc3RyaW5nIHwgRnVuY3Rpb24pID0+IFByZWRpY2F0ZTxUPiA9IGFzc2VydEZuO1xuLyoqXG4gKiBHaXZlbiBhIC5tYXAgZnVuY3Rpb24sIGJ1aWxkcyBhIC5tYXAgZnVuY3Rpb24gd2hpY2ggdGhyb3dzIGFuIGVycm9yIGlmIGFueSBtYXBwZWQgZWxlbWVudHMgZG8gbm90IHBhc3MgYSB0cnV0aHluZXNzIHRlc3QuXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogdmFyIGRhdGEgPSB7IGZvbzogMSwgYmFyOiAyIH07XG4gKlxuICogbGV0IGtleXMgPSBbICdmb28nLCAnYmFyJyBdXG4gKiBsZXQgdmFsdWVzID0ga2V5cy5tYXAoYXNzZXJ0TWFwKGtleSA9PiBkYXRhW2tleV0sIFwiS2V5IG5vdCBmb3VuZFwiKSk7XG4gKiAvLyB2YWx1ZXMgaXMgWzEsIDJdXG4gKlxuICogbGV0IGtleXMgPSBbICdmb28nLCAnYmFyJywgJ2JheicgXVxuICogbGV0IHZhbHVlcyA9IGtleXMubWFwKGFzc2VydE1hcChrZXkgPT4gZGF0YVtrZXldLCBcIktleSBub3QgZm91bmRcIikpO1xuICogLy8gdGhyb3dzIEVycm9yKFwiS2V5IG5vdCBmb3VuZFwiKVxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBhc3NlcnRNYXA6IDxULCBVPihtYXBGbjogKHQ6IFQpID0+IFUsIGVyck1zZzogc3RyaW5nIHwgRnVuY3Rpb24pID0+ICh0OiBUKSA9PiBVID0gYXNzZXJ0Rm47XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0Rm4ocHJlZGljYXRlT3JNYXA6IEZ1bmN0aW9uLCBlcnJNc2c6IHN0cmluZyB8IEZ1bmN0aW9uID0gJ2Fzc2VydCBmYWlsdXJlJyk6IGFueSB7XG4gIHJldHVybiBvYmogPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHByZWRpY2F0ZU9yTWFwKG9iaik7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihpc0Z1bmN0aW9uKGVyck1zZykgPyAoPEZ1bmN0aW9uPmVyck1zZykob2JqKSA6IGVyck1zZyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5cbi8qKlxuICogTGlrZSBfLnBhaXJzOiBHaXZlbiBhbiBvYmplY3QsIHJldHVybnMgYW4gYXJyYXkgb2Yga2V5L3ZhbHVlIHBhaXJzXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIHBhaXJzKHsgZm9vOiBcIkZPT1wiLCBiYXI6IFwiQkFSIH0pIC8vIFsgWyBcImZvb1wiLCBcIkZPT1wiIF0sIFsgXCJiYXJcIjogXCJCQVJcIiBdIF1cbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgcGFpcnMgPSAob2JqOiBPYmopID0+IE9iamVjdC5rZXlzKG9iaikubWFwKGtleSA9PiBba2V5LCBvYmpba2V5XV0pO1xuXG4vKipcbiAqIEdpdmVuIHR3byBvciBtb3JlIHBhcmFsbGVsIGFycmF5cywgcmV0dXJucyBhbiBhcnJheSBvZiB0dXBsZXMgd2hlcmVcbiAqIGVhY2ggdHVwbGUgaXMgY29tcG9zZWQgb2YgWyBhW2ldLCBiW2ldLCAuLi4geltpXSBdXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIGxldCBmb28gPSBbIDAsIDIsIDQsIDYgXTtcbiAqIGxldCBiYXIgPSBbIDEsIDMsIDUsIDcgXTtcbiAqIGxldCBiYXogPSBbIDEwLCAzMCwgNTAsIDcwIF07XG4gKiBhcnJheVR1cGxlcyhmb28sIGJhcik7ICAgICAgIC8vIFsgWzAsIDFdLCBbMiwgM10sIFs0LCA1XSwgWzYsIDddIF1cbiAqIGFycmF5VHVwbGVzKGZvbywgYmFyLCBiYXopOyAgLy8gWyBbMCwgMSwgMTBdLCBbMiwgMywgMzBdLCBbNCwgNSwgNTBdLCBbNiwgNywgNzBdIF1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlUdXBsZXMoLi4uYXJnczogYW55W10pOiBhbnlbXSB7XG4gIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xuICBjb25zdCBtYXhBcnJheUxlbiA9IGFyZ3MucmVkdWNlKChtaW4sIGFycikgPT4gTWF0aC5taW4oYXJyLmxlbmd0aCwgbWluKSwgOTAwNzE5OTI1NDc0MDk5MSk7IC8vIGFrYSAyXjUzIOKIkiAxIGFrYSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUlxuICBjb25zdCByZXN1bHQgPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG1heEFycmF5TGVuOyBpKyspIHtcbiAgICAvLyBUaGlzIGlzIGEgaG90IGZ1bmN0aW9uXG4gICAgLy8gVW5yb2xsIHdoZW4gdGhlcmUgYXJlIDEtNCBhcmd1bWVudHNcbiAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJlc3VsdC5wdXNoKFthcmdzWzBdW2ldXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICByZXN1bHQucHVzaChbYXJnc1swXVtpXSwgYXJnc1sxXVtpXV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcmVzdWx0LnB1c2goW2FyZ3NbMF1baV0sIGFyZ3NbMV1baV0sIGFyZ3NbMl1baV1dKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHJlc3VsdC5wdXNoKFthcmdzWzBdW2ldLCBhcmdzWzFdW2ldLCBhcmdzWzJdW2ldLCBhcmdzWzNdW2ldXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmVzdWx0LnB1c2goYXJncy5tYXAoYXJyYXkgPT4gYXJyYXlbaV0pKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gd2hpY2ggYnVpbGRzIGFuIG9iamVjdCBmcm9tIGFuIGFycmF5IG9mIFtrZXksIHZhbHVlXSBwYWlycy5cbiAqXG4gKiBFYWNoIGl0ZXJhdGlvbiBzZXRzIHRoZSBrZXkvdmFsIHBhaXIgb24gdGhlIG1lbW8gb2JqZWN0LCB0aGVuIHJldHVybnMgdGhlIG1lbW8gZm9yIHRoZSBuZXh0IGl0ZXJhdGlvbi5cbiAqXG4gKiBFYWNoIGtleVZhbHVlVHVwbGUgc2hvdWxkIGJlIGFuIGFycmF5IHdpdGggdmFsdWVzIFsga2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkgXVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiB2YXIgcGFpcnMgPSBbIFtcImZvb2tleVwiLCBcImZvb3ZhbFwiXSwgW1wiYmFya2V5XCIsIFwiYmFydmFsXCJdIF1cbiAqXG4gKiB2YXIgcGFpcnNUb09iaiA9IHBhaXJzLnJlZHVjZSgobWVtbywgcGFpcikgPT4gYXBwbHlQYWlycyhtZW1vLCBwYWlyKSwge30pXG4gKiAvLyBwYWlyc1RvT2JqID09IHsgZm9va2V5OiBcImZvb3ZhbFwiLCBiYXJrZXk6IFwiYmFydmFsXCIgfVxuICpcbiAqIC8vIE9yLCBtb3JlIHNpbXBseTpcbiAqIHZhciBwYWlyc1RvT2JqID0gcGFpcnMucmVkdWNlKGFwcGx5UGFpcnMsIHt9KVxuICogLy8gcGFpcnNUb09iaiA9PSB7IGZvb2tleTogXCJmb292YWxcIiwgYmFya2V5OiBcImJhcnZhbFwiIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlQYWlycyhtZW1vOiBUeXBlZE1hcDxhbnk+LCBrZXlWYWxUdXBsZTogYW55W10pIHtcbiAgbGV0IGtleTogc3RyaW5nLCB2YWx1ZTogYW55O1xuICBpZiAoaXNBcnJheShrZXlWYWxUdXBsZSkpIFtrZXksIHZhbHVlXSA9IGtleVZhbFR1cGxlO1xuICBpZiAoIWlzU3RyaW5nKGtleSkpIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBwYXJhbWV0ZXJzIHRvIGFwcGx5UGFpcnMnKTtcbiAgbWVtb1trZXldID0gdmFsdWU7XG4gIHJldHVybiBtZW1vO1xufVxuXG4vKiogR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkgKi9cbmV4cG9ydCBmdW5jdGlvbiB0YWlsPFQ+KGFycjogVFtdKTogVCB7XG4gIHJldHVybiAoYXJyLmxlbmd0aCAmJiBhcnJbYXJyLmxlbmd0aCAtIDFdKSB8fCB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogc2hhbGxvdyBjb3B5IGZyb20gc3JjIHRvIGRlc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHkoc3JjOiBPYmosIGRlc3Q/OiBPYmopIHtcbiAgaWYgKGRlc3QpIE9iamVjdC5rZXlzKGRlc3QpLmZvckVhY2goa2V5ID0+IGRlbGV0ZSBkZXN0W2tleV0pO1xuICBpZiAoIWRlc3QpIGRlc3QgPSB7fTtcbiAgcmV0dXJuIGV4dGVuZChkZXN0LCBzcmMpO1xufVxuXG4vKiogTmFpdmUgZm9yRWFjaCBpbXBsZW1lbnRhdGlvbiB3b3JrcyB3aXRoIE9iamVjdHMgb3IgQXJyYXlzICovXG5mdW5jdGlvbiBfZm9yRWFjaChvYmo6IGFueVtdIHwgYW55LCBjYjogKGVsLCBpZHg/KSA9PiB2b2lkLCBfdGhpczogT2JqKSB7XG4gIGlmIChpc0FycmF5KG9iaikpIHJldHVybiBvYmouZm9yRWFjaChjYiwgX3RoaXMpO1xuICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goa2V5ID0+IGNiKG9ialtrZXldLCBrZXkpKTtcbn1cblxuLyoqIExpa2UgT2JqZWN0LmFzc2lnbigpICovXG5leHBvcnQgZnVuY3Rpb24gX2V4dGVuZCh0b09iajogT2JqLCAuLi5mcm9tT2JqczogT2JqW10pOiBhbnk7XG5leHBvcnQgZnVuY3Rpb24gX2V4dGVuZCh0b09iajogT2JqKTogYW55IHtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBvYmogPSBhcmd1bWVudHNbaV07XG4gICAgaWYgKCFvYmopIGNvbnRpbnVlO1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBrZXlzLmxlbmd0aDsgaisrKSB7XG4gICAgICB0b09ialtrZXlzW2pdXSA9IG9ialtrZXlzW2pdXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdG9PYmo7XG59XG5cbmZ1bmN0aW9uIF9lcXVhbHMobzE6IGFueSwgbzI6IGFueSk6IGJvb2xlYW4ge1xuICBpZiAobzEgPT09IG8yKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKG8xID09PSBudWxsIHx8IG8yID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gIGlmIChvMSAhPT0gbzEgJiYgbzIgIT09IG8yKSByZXR1cm4gdHJ1ZTsgLy8gTmFOID09PSBOYU5cbiAgY29uc3QgdDEgPSB0eXBlb2YgbzEsXG4gICAgdDIgPSB0eXBlb2YgbzI7XG4gIGlmICh0MSAhPT0gdDIgfHwgdDEgIT09ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG5cbiAgY29uc3QgdHVwID0gW28xLCBvMl07XG4gIGlmIChhbGwoaXNBcnJheSkodHVwKSkgcmV0dXJuIF9hcnJheXNFcShvMSwgbzIpO1xuICBpZiAoYWxsKGlzRGF0ZSkodHVwKSkgcmV0dXJuIG8xLmdldFRpbWUoKSA9PT0gbzIuZ2V0VGltZSgpO1xuICBpZiAoYWxsKGlzUmVnRXhwKSh0dXApKSByZXR1cm4gbzEudG9TdHJpbmcoKSA9PT0gbzIudG9TdHJpbmcoKTtcbiAgaWYgKGFsbChpc0Z1bmN0aW9uKSh0dXApKSByZXR1cm4gdHJ1ZTsgLy8gbWVoXG5cbiAgY29uc3QgcHJlZGljYXRlcyA9IFtpc0Z1bmN0aW9uLCBpc0FycmF5LCBpc0RhdGUsIGlzUmVnRXhwXTtcbiAgaWYgKHByZWRpY2F0ZXMubWFwKGFueSkucmVkdWNlKChiLCBmbikgPT4gYiB8fCAhIWZuKHR1cCksIGZhbHNlKSkgcmV0dXJuIGZhbHNlO1xuXG4gIGNvbnN0IGtleXM6IHsgW2k6IHN0cmluZ106IGJvb2xlYW4gfSA9IHt9O1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Zm9yaW5cbiAgZm9yIChjb25zdCBrZXkgaW4gbzEpIHtcbiAgICBpZiAoIV9lcXVhbHMobzFba2V5XSwgbzJba2V5XSkpIHJldHVybiBmYWxzZTtcbiAgICBrZXlzW2tleV0gPSB0cnVlO1xuICB9XG4gIGZvciAoY29uc3Qga2V5IGluIG8yKSB7XG4gICAgaWYgKCFrZXlzW2tleV0pIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlzRXEoYTE6IGFueVtdLCBhMjogYW55W10pIHtcbiAgaWYgKGExLmxlbmd0aCAhPT0gYTIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBhcnJheVR1cGxlcyhhMSwgYTIpLnJlZHVjZSgoYiwgdCkgPT4gYiAmJiBfZXF1YWxzKHRbMF0sIHRbMV0pLCB0cnVlKTtcbn1cblxuLy8gaXNzdWUgIzI2NzZcbmV4cG9ydCBjb25zdCBzaWxlbmNlVW5jYXVnaHRJblByb21pc2UgPSAocHJvbWlzZTogUHJvbWlzZTxhbnk+KSA9PiBwcm9taXNlLmNhdGNoKGUgPT4gMCkgJiYgcHJvbWlzZTtcbmV4cG9ydCBjb25zdCBzaWxlbnRSZWplY3Rpb24gPSAoZXJyb3I6IGFueSkgPT4gc2lsZW5jZVVuY2F1Z2h0SW5Qcm9taXNlKHNlcnZpY2VzLiRxLnJlamVjdChlcnJvcikpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL2NvbW1vbi9jb21tb24udHMiLCIvKiogUHJlZGljYXRlc1xuICpcbiAqIFRoZXNlIHByZWRpY2F0ZXMgcmV0dXJuIHRydWUvZmFsc2UgYmFzZWQgb24gdGhlIGlucHV0LlxuICogQWx0aG91Z2ggdGhlc2UgZnVuY3Rpb25zIGFyZSBleHBvcnRlZCwgdGhleSBhcmUgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXG4gKlxuICogQG1vZHVsZSBjb21tb25fcHJlZGljYXRlc1xuICovXG4vKiogKi9cbmltcG9ydCB7IGFuZCwgbm90LCBwaXBlLCBwcm9wLCBvciB9IGZyb20gJy4vaG9mJztcbmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJy4vY29tbW9uJzsgLy8gaGFzIG9yIGlzIHVzaW5nXG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcblxuY29uc3QgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuY29uc3QgdGlzID0gKHQ6IHN0cmluZykgPT4gKHg6IGFueSkgPT4gdHlwZW9mIHggPT09IHQ7XG5leHBvcnQgY29uc3QgaXNVbmRlZmluZWQgPSB0aXMoJ3VuZGVmaW5lZCcpO1xuZXhwb3J0IGNvbnN0IGlzRGVmaW5lZCA9IG5vdChpc1VuZGVmaW5lZCk7XG5leHBvcnQgY29uc3QgaXNOdWxsID0gKG86IGFueSkgPT4gbyA9PT0gbnVsbDtcbmV4cG9ydCBjb25zdCBpc051bGxPclVuZGVmaW5lZCA9IG9yKGlzTnVsbCwgaXNVbmRlZmluZWQpO1xuZXhwb3J0IGNvbnN0IGlzRnVuY3Rpb246ICh4OiBhbnkpID0+IHggaXMgRnVuY3Rpb24gPSA8YW55PnRpcygnZnVuY3Rpb24nKTtcbmV4cG9ydCBjb25zdCBpc051bWJlcjogKHg6IGFueSkgPT4geCBpcyBudW1iZXIgPSA8YW55PnRpcygnbnVtYmVyJyk7XG5leHBvcnQgY29uc3QgaXNTdHJpbmcgPSA8KHg6IGFueSkgPT4geCBpcyBzdHJpbmc+dGlzKCdzdHJpbmcnKTtcbmV4cG9ydCBjb25zdCBpc09iamVjdCA9ICh4OiBhbnkpID0+IHggIT09IG51bGwgJiYgdHlwZW9mIHggPT09ICdvYmplY3QnO1xuZXhwb3J0IGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuZXhwb3J0IGNvbnN0IGlzRGF0ZTogKHg6IGFueSkgPT4geCBpcyBEYXRlID0gPGFueT4oKHg6IGFueSkgPT4gdG9TdHIuY2FsbCh4KSA9PT0gJ1tvYmplY3QgRGF0ZV0nKTtcbmV4cG9ydCBjb25zdCBpc1JlZ0V4cDogKHg6IGFueSkgPT4geCBpcyBSZWdFeHAgPSA8YW55PigoeDogYW55KSA9PiB0b1N0ci5jYWxsKHgpID09PSAnW29iamVjdCBSZWdFeHBdJyk7XG5leHBvcnQgY29uc3QgaXNTdGF0ZTogKHg6IGFueSkgPT4geCBpcyBTdGF0ZU9iamVjdCA9IFN0YXRlT2JqZWN0LmlzU3RhdGU7XG5cbi8qKlxuICogUHJlZGljYXRlIHdoaWNoIGNoZWNrcyBpZiBhIHZhbHVlIGlzIGluamVjdGFibGVcbiAqXG4gKiBBIHZhbHVlIGlzIFwiaW5qZWN0YWJsZVwiIGlmIGl0IGlzIGEgZnVuY3Rpb24sIG9yIGlmIGl0IGlzIGFuIG5nMSBhcnJheS1ub3RhdGlvbi1zdHlsZSBhcnJheVxuICogd2hlcmUgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgYXJyYXkgYXJlIFN0cmluZ3MsIGV4Y2VwdCB0aGUgbGFzdCBvbmUsIHdoaWNoIGlzIGEgRnVuY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSW5qZWN0YWJsZSh2YWw6IGFueSkge1xuICBpZiAoaXNBcnJheSh2YWwpICYmIHZhbC5sZW5ndGgpIHtcbiAgICBjb25zdCBoZWFkID0gdmFsLnNsaWNlKDAsIC0xKSxcbiAgICAgIHRhaWwgPSB2YWwuc2xpY2UoLTEpO1xuICAgIHJldHVybiAhKGhlYWQuZmlsdGVyKG5vdChpc1N0cmluZykpLmxlbmd0aCB8fCB0YWlsLmZpbHRlcihub3QoaXNGdW5jdGlvbikpLmxlbmd0aCk7XG4gIH1cbiAgcmV0dXJuIGlzRnVuY3Rpb24odmFsKTtcbn1cblxuLyoqXG4gKiBQcmVkaWNhdGUgd2hpY2ggY2hlY2tzIGlmIGEgdmFsdWUgbG9va3MgbGlrZSBhIFByb21pc2VcbiAqXG4gKiBJdCBpcyBwcm9iYWJseSBhIFByb21pc2UgaWYgaXQncyBhbiBvYmplY3QsIGFuZCBpdCBoYXMgYSBgdGhlbmAgcHJvcGVydHkgd2hpY2ggaXMgYSBGdW5jdGlvblxuICovXG5leHBvcnQgY29uc3QgaXNQcm9taXNlID0gPCh4OiBhbnkpID0+IHggaXMgUHJvbWlzZTxhbnk+PmFuZChpc09iamVjdCwgcGlwZShwcm9wKCd0aGVuJyksIGlzRnVuY3Rpb24pKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9jb21tb24vcHJlZGljYXRlcy50cyIsIi8qKlxuICogSGlnaGVyIG9yZGVyIGZ1bmN0aW9uc1xuICpcbiAqIFRoZXNlIHV0aWxpdHkgZnVuY3Rpb25zIGFyZSBleHBvcnRlZCwgYnV0IGFyZSBzdWJqZWN0IHRvIGNoYW5nZSB3aXRob3V0IG5vdGljZS5cbiAqXG4gKiBAbW9kdWxlIGNvbW1vbl9ob2ZcbiAqLyAvKiogKi9cblxuaW1wb3J0IHsgUHJlZGljYXRlIH0gZnJvbSAnLi9jb21tb24nO1xuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGZ1bmN0aW9uIGZvciBbUGFydGlhbCBBcHBsaWNhdGlvbl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFydGlhbF9hcHBsaWNhdGlvbikgb2YgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLlxuICpcbiAqIEdpdmVuIGEgZnVuY3Rpb24gd2l0aCBOIHBhcmFtZXRlcnMsIHJldHVybnMgYSBuZXcgZnVuY3Rpb24gdGhhdCBzdXBwb3J0cyBwYXJ0aWFsIGFwcGxpY2F0aW9uLlxuICogVGhlIG5ldyBmdW5jdGlvbiBhY2NlcHRzIGFueXdoZXJlIGZyb20gMSB0byBOIHBhcmFtZXRlcnMuICBXaGVuIHRoYXQgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggTSBwYXJhbWV0ZXJzLFxuICogd2hlcmUgTSBpcyBsZXNzIHRoYW4gTiwgaXQgcmV0dXJucyBhIG5ldyBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgdGhlIHJlbWFpbmluZyBwYXJhbWV0ZXJzLiAgSXQgY29udGludWVzIHRvXG4gKiBhY2NlcHQgbW9yZSBwYXJhbWV0ZXJzIHVudGlsIGFsbCBOIHBhcmFtZXRlcnMgaGF2ZSBiZWVuIHN1cHBsaWVkLlxuICpcbiAqXG4gKiBUaGlzIGNvbnRyaXZlZCBleGFtcGxlIHVzZXMgYSBwYXJ0aWFsbHkgYXBwbGllZCBmdW5jdGlvbiBhcyBhbiBwcmVkaWNhdGUsIHdoaWNoIHJldHVybnMgdHJ1ZVxuICogaWYgYW4gb2JqZWN0IGlzIGZvdW5kIGluIGJvdGggYXJyYXlzLlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogLy8gcmV0dXJucyB0cnVlIGlmIGFuIG9iamVjdCBpcyBpbiBib3RoIG9mIHRoZSB0d28gYXJyYXlzXG4gKiBmdW5jdGlvbiBpbkJvdGgoYXJyYXkxLCBhcnJheTIsIG9iamVjdCkge1xuICogICByZXR1cm4gYXJyYXkxLmluZGV4T2Yob2JqZWN0KSAhPT0gLTEgJiZcbiAqICAgICAgICAgIGFycmF5Mi5pbmRleE9mKG9iamVjdCkgIT09IDE7XG4gKiB9XG4gKiBsZXQgb2JqMSwgb2JqMiwgb2JqMywgb2JqNCwgb2JqNSwgb2JqNiwgb2JqN1xuICogbGV0IGZvb3MgPSBbb2JqMSwgb2JqM11cbiAqIGxldCBiYXJzID0gW29iajMsIG9iajQsIG9iajVdXG4gKlxuICogLy8gQSBjdXJyaWVkIFwiY29weVwiIG9mIGluQm90aFxuICogbGV0IGN1cnJpZWRJbkJvdGggPSBjdXJyeShpbkJvdGgpO1xuICogLy8gUGFydGlhbGx5IGFwcGx5IGJvdGggdGhlIGFycmF5MSBhbmQgYXJyYXkyXG4gKiBsZXQgaW5Gb29zQW5kQmFycyA9IGN1cnJpZWRJbkJvdGgoZm9vcywgYmFycyk7XG4gKlxuICogLy8gU3VwcGx5IHRoZSBmaW5hbCBhcmd1bWVudDsgc2luY2UgYWxsIGFyZ3VtZW50cyBhcmVcbiAqIC8vIHN1cHBsaWVkLCB0aGUgb3JpZ2luYWwgaW5Cb3RoIGZ1bmN0aW9uIGlzIHRoZW4gY2FsbGVkLlxuICogbGV0IG9iajFJbkJvdGggPSBpbkZvb3NBbmRCYXJzKG9iajEpOyAvLyBmYWxzZVxuICpcbiAqIC8vIFVzZSB0aGUgaW5Gb29zQW5kQmFycyBhcyBhIHByZWRpY2F0ZS5cbiAqIC8vIEZpbHRlciwgb24gZWFjaCBpdGVyYXRpb24sIHN1cHBsaWVzIHRoZSBmaW5hbCBhcmd1bWVudFxuICogbGV0IGFsbE9ianMgPSBbIG9iajEsIG9iajIsIG9iajMsIG9iajQsIG9iajUsIG9iajYsIG9iajcgXTtcbiAqIGxldCBmb3VuZEluQm90aCA9IGFsbE9ianMuZmlsdGVyKGluRm9vc0FuZEJhcnMpOyAvLyBbIG9iajMgXVxuICpcbiAqIGBgYFxuICpcbiAqIFN0b2xlbiBmcm9tOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQzOTQ3NDcvamF2YXNjcmlwdC1jdXJyeS1mdW5jdGlvblxuICpcbiAqIEBwYXJhbSBmblxuICogQHJldHVybnMgeyp8ZnVuY3Rpb24oKTogKCp8YW55KX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGN1cnJ5KGZuOiBGdW5jdGlvbik6IEZ1bmN0aW9uIHtcbiAgY29uc3QgaW5pdGlhbF9hcmdzID0gW10uc2xpY2UuYXBwbHkoYXJndW1lbnRzLCBbMV0pO1xuICBjb25zdCBmdW5jX2FyZ3NfbGVuZ3RoID0gZm4ubGVuZ3RoO1xuXG4gIGZ1bmN0aW9uIGN1cnJpZWQoYXJnczogYW55W10pIHtcbiAgICBpZiAoYXJncy5sZW5ndGggPj0gZnVuY19hcmdzX2xlbmd0aCkgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBjdXJyaWVkKGFyZ3MuY29uY2F0KFtdLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpKTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBjdXJyaWVkKGluaXRpYWxfYXJncyk7XG59XG5cbi8qKlxuICogR2l2ZW4gYSB2YXJhcmdzIGxpc3Qgb2YgZnVuY3Rpb25zLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBjb21wb3NlcyB0aGUgYXJndW1lbnQgZnVuY3Rpb25zLCByaWdodC10by1sZWZ0XG4gKiBnaXZlbjogZih4KSwgZyh4KSwgaCh4KVxuICogbGV0IGNvbXBvc2VkID0gY29tcG9zZShmLGcsaClcbiAqIHRoZW4sIGNvbXBvc2VkIGlzOiBmKGcoaCh4KSkpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wb3NlKCkge1xuICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xuICBjb25zdCBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGxldCBpID0gc3RhcnQsXG4gICAgICByZXN1bHQgPSBhcmdzW3N0YXJ0XS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHdoaWxlIChpLS0pIHJlc3VsdCA9IGFyZ3NbaV0uY2FsbCh0aGlzLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5cbi8qKlxuICogR2l2ZW4gYSB2YXJhcmdzIGxpc3Qgb2YgZnVuY3Rpb25zLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBpcyBjb21wb3NlcyB0aGUgYXJndW1lbnQgZnVuY3Rpb25zLCBsZWZ0LXRvLXJpZ2h0XG4gKiBnaXZlbjogZih4KSwgZyh4KSwgaCh4KVxuICogbGV0IHBpcGVkID0gcGlwZShmLGcsaCk7XG4gKiB0aGVuLCBwaXBlZCBpczogaChnKGYoeCkpKVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGlwZSguLi5mdW5jczogRnVuY3Rpb25bXSk6IChvYmo6IGFueSkgPT4gYW55IHtcbiAgcmV0dXJuIGNvbXBvc2UuYXBwbHkobnVsbCwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMpLnJldmVyc2UoKSk7XG59XG5cbi8qKlxuICogR2l2ZW4gYSBwcm9wZXJ0eSBuYW1lLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoYXQgcHJvcGVydHkgZnJvbSBhbiBvYmplY3RcbiAqIGxldCBvYmogPSB7IGZvbzogMSwgbmFtZTogXCJibGFyZ1wiIH07XG4gKiBsZXQgZ2V0TmFtZSA9IHByb3AoXCJuYW1lXCIpO1xuICogZ2V0TmFtZShvYmopID09PSBcImJsYXJnXCJcbiAqL1xuZXhwb3J0IGNvbnN0IHByb3AgPSAobmFtZTogc3RyaW5nKSA9PiAob2JqOiBhbnkpID0+IG9iaiAmJiBvYmpbbmFtZV07XG5cbi8qKlxuICogR2l2ZW4gYSBwcm9wZXJ0eSBuYW1lIGFuZCBhIHZhbHVlLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYm9vbGVhbiBiYXNlZCBvbiB3aGV0aGVyXG4gKiB0aGUgcGFzc2VkIG9iamVjdCBoYXMgYSBwcm9wZXJ0eSB0aGF0IG1hdGNoZXMgdGhlIHZhbHVlXG4gKiBsZXQgb2JqID0geyBmb286IDEsIG5hbWU6IFwiYmxhcmdcIiB9O1xuICogbGV0IGdldE5hbWUgPSBwcm9wRXEoXCJuYW1lXCIsIFwiYmxhcmdcIik7XG4gKiBnZXROYW1lKG9iaikgPT09IHRydWVcbiAqL1xuZXhwb3J0IGNvbnN0IHByb3BFcSA9IGN1cnJ5KChuYW1lOiBzdHJpbmcsIF92YWw6IGFueSwgb2JqOiBhbnkpID0+IG9iaiAmJiBvYmpbbmFtZV0gPT09IF92YWwpO1xuXG4vKipcbiAqIEdpdmVuIGEgZG90dGVkIHByb3BlcnR5IG5hbWUsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBuZXN0ZWQgcHJvcGVydHkgZnJvbSBhbiBvYmplY3QsIG9yIHVuZGVmaW5lZFxuICogbGV0IG9iaiA9IHsgaWQ6IDEsIG5lc3RlZE9iajogeyBmb286IDEsIG5hbWU6IFwiYmxhcmdcIiB9LCB9O1xuICogbGV0IGdldE5hbWUgPSBwcm9wKFwibmVzdGVkT2JqLm5hbWVcIik7XG4gKiBnZXROYW1lKG9iaikgPT09IFwiYmxhcmdcIlxuICogbGV0IHByb3BOb3RGb3VuZCA9IHByb3AoXCJ0aGlzLnByb3BlcnR5LmRvZXNudC5leGlzdFwiKTtcbiAqIHByb3BOb3RGb3VuZChvYmopID09PSB1bmRlZmluZWRcbiAqL1xuZXhwb3J0IGNvbnN0IHBhcnNlID0gKG5hbWU6IHN0cmluZykgPT4gcGlwZS5hcHBseShudWxsLCBuYW1lLnNwbGl0KCcuJykubWFwKHByb3ApKTtcblxuLyoqXG4gKiBHaXZlbiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHRydXRoeSBvciBmYWxzZXkgdmFsdWUsIHJldHVybnMgYVxuICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBvcHBvc2l0ZSAoZmFsc2V5IG9yIHRydXRoeSkgdmFsdWUgZ2l2ZW4gdGhlIHNhbWUgaW5wdXRzXG4gKi9cbmV4cG9ydCBjb25zdCBub3Q6IChmbjogUHJlZGljYXRlPGFueT4pID0+IFByZWRpY2F0ZTxhbnk+ID0gKGZuOiBQcmVkaWNhdGU8YW55PikgPT4gKC4uLmFyZ3M6IGFueVtdKSA9PlxuICAhZm4uYXBwbHkobnVsbCwgYXJncyk7XG5cbi8qKlxuICogR2l2ZW4gdHdvIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB0cnV0aHkgb3IgZmFsc2V5IHZhbHVlcywgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnV0aHlcbiAqIGlmIGJvdGggZnVuY3Rpb25zIHJldHVybiB0cnV0aHkgZm9yIHRoZSBnaXZlbiBhcmd1bWVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFuZChmbjE6IFByZWRpY2F0ZTxhbnk+LCBmbjI6IFByZWRpY2F0ZTxhbnk+KTogUHJlZGljYXRlPGFueT4ge1xuICByZXR1cm4gKC4uLmFyZ3M6IGFueVtdKSA9PiBmbjEuYXBwbHkobnVsbCwgYXJncykgJiYgZm4yLmFwcGx5KG51bGwsIGFyZ3MpO1xufVxuXG4vKipcbiAqIEdpdmVuIHR3byBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdHJ1dGh5IG9yIGZhbHNleSB2YWx1ZXMsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1dGh5XG4gKiBpZiBhdCBsZWFzdCBvbmUgb2YgdGhlIGZ1bmN0aW9ucyByZXR1cm5zIHRydXRoeSBmb3IgdGhlIGdpdmVuIGFyZ3VtZW50c1xuICovXG5leHBvcnQgZnVuY3Rpb24gb3IoZm4xOiBQcmVkaWNhdGU8YW55PiwgZm4yOiBQcmVkaWNhdGU8YW55Pik6IFByZWRpY2F0ZTxhbnk+IHtcbiAgcmV0dXJuICguLi5hcmdzOiBhbnlbXSkgPT4gZm4xLmFwcGx5KG51bGwsIGFyZ3MpIHx8IGZuMi5hcHBseShudWxsLCBhcmdzKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbGwgdGhlIGVsZW1lbnRzIG9mIGFuIGFycmF5IG1hdGNoIGEgcHJlZGljYXRlIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIGZuMSBhIHByZWRpY2F0ZSBmdW5jdGlvbiBgZm4xYFxuICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCB0YWtlcyBhbiBhcnJheSBhbmQgcmV0dXJucyB0cnVlIGlmIGBmbjFgIGlzIHRydWUgZm9yIGFsbCBlbGVtZW50cyBvZiB0aGUgYXJyYXlcbiAqL1xuZXhwb3J0IGNvbnN0IGFsbCA9IChmbjE6IFByZWRpY2F0ZTxhbnk+KSA9PiAoYXJyOiBhbnlbXSkgPT4gYXJyLnJlZHVjZSgoYiwgeCkgPT4gYiAmJiAhIWZuMSh4KSwgdHJ1ZSkgYXMgYm9vbGVhbjtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbmV4cG9ydCBjb25zdCBhbnkgPSAoZm4xOiBQcmVkaWNhdGU8YW55PikgPT4gKGFycjogYW55W10pID0+IGFyci5yZWR1Y2UoKGIsIHgpID0+IGIgfHwgISFmbjEoeCksIGZhbHNlKSBhcyBib29sZWFuO1xuXG4vKiogR2l2ZW4gYSBjbGFzcywgcmV0dXJucyBhIFByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIG9mIHRoYXQgY2xhc3MgKi9cbmV4cG9ydCBjb25zdCBpcyA9IDxUPihjdG9yOiB7IG5ldyAoLi4uYXJncyk6IFQgfSkgPT4gKG9iajogYW55KTogb2JqIGlzIFQgPT5cbiAgKG9iaiAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gY3RvcikgfHwgb2JqIGluc3RhbmNlb2YgY3RvcjtcblxuLyoqIEdpdmVuIGEgdmFsdWUsIHJldHVybnMgYSBQcmVkaWNhdGUgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRydWUgaWYgYW5vdGhlciB2YWx1ZSBpcyA9PT0gZXF1YWwgdG8gdGhlIG9yaWdpbmFsIHZhbHVlICovXG5leHBvcnQgY29uc3QgZXE6IChjb21wOiBhbnkpID0+IFByZWRpY2F0ZTxhbnk+ID0gKHZhbHVlOiBhbnkpID0+IChvdGhlcjogYW55KSA9PiB2YWx1ZSA9PT0gb3RoZXI7XG5cbi8qKiBHaXZlbiBhIHZhbHVlLCByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgdmFsdWUgKi9cbmV4cG9ydCBjb25zdCB2YWwgPSA8VD4odjogVCkgPT4gKCkgPT4gdjtcblxuZXhwb3J0IGZ1bmN0aW9uIGludm9rZShmbk5hbWU6IHN0cmluZyk6IEZ1bmN0aW9uO1xuZXhwb3J0IGZ1bmN0aW9uIGludm9rZShmbk5hbWU6IHN0cmluZywgYXJnczogYW55W10pOiBGdW5jdGlvbjtcbmV4cG9ydCBmdW5jdGlvbiBpbnZva2UoZm5OYW1lOiBzdHJpbmcsIGFyZ3M/OiBhbnlbXSk6IEZ1bmN0aW9uIHtcbiAgcmV0dXJuIChvYmo6IGFueSkgPT4gb2JqW2ZuTmFtZV0uYXBwbHkob2JqLCBhcmdzKTtcbn1cblxuLyoqXG4gKiBTb3J0YSBsaWtlIFBhdHRlcm4gTWF0Y2hpbmcgKGEgZnVuY3Rpb25hbCBwcm9ncmFtbWluZyBjb25kaXRpb25hbCBjb25zdHJ1Y3QpXG4gKlxuICogU2VlIGh0dHA6Ly9jMi5jb20vY2dpL3dpa2k/UGF0dGVybk1hdGNoaW5nXG4gKlxuICogVGhpcyBpcyBhIGNvbmRpdGlvbmFsIGNvbnN0cnVjdCB3aGljaCBhbGxvd3MgYSBzZXJpZXMgb2YgcHJlZGljYXRlcyBhbmQgb3V0cHV0IGZ1bmN0aW9uc1xuICogdG8gYmUgY2hlY2tlZCBhbmQgdGhlbiBhcHBsaWVkLiAgRWFjaCBwcmVkaWNhdGUgcmVjZWl2ZXMgdGhlIGlucHV0LiAgSWYgdGhlIHByZWRpY2F0ZVxuICogcmV0dXJucyB0cnV0aHksIHRoZW4gaXRzIG1hdGNoaW5nIG91dHB1dCBmdW5jdGlvbiAobWFwcGluZyBmdW5jdGlvbikgaXMgcHJvdmlkZWQgd2l0aFxuICogdGhlIGlucHV0IGFuZCwgdGhlbiB0aGUgcmVzdWx0IGlzIHJldHVybmVkLlxuICpcbiAqIEVhY2ggY29tYmluYXRpb24gKDItdHVwbGUpIG9mIHByZWRpY2F0ZSArIG91dHB1dCBmdW5jdGlvbiBzaG91bGQgYmUgcGxhY2VkIGluIGFuIGFycmF5XG4gKiBvZiBzaXplIDI6IFsgcHJlZGljYXRlLCBtYXBGbiBdXG4gKlxuICogVGhlc2UgMi10dXBsZXMgc2hvdWxkIGJlIHB1dCBpbiBhbiBvdXRlciBhcnJheS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogLy8gSGVyZSdzIGEgMi10dXBsZSB3aGVyZSB0aGUgZmlyc3QgZWxlbWVudCBpcyB0aGUgaXNTdHJpbmcgcHJlZGljYXRlXG4gKiAvLyBhbmQgdGhlIHNlY29uZCBlbGVtZW50IGlzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZGVzY3JpcHRpb24gb2YgdGhlIGlucHV0XG4gKiBsZXQgZmlyc3RUdXBsZSA9IFsgYW5ndWxhci5pc1N0cmluZywgKGlucHV0KSA9PiBgSGVyZXMgeW91ciBzdHJpbmcgJHtpbnB1dH1gIF07XG4gKlxuICogLy8gU2Vjb25kIHR1cGxlOiBwcmVkaWNhdGUgXCJpc051bWJlclwiLCBtYXBmbiByZXR1cm5zIGEgZGVzY3JpcHRpb25cbiAqIGxldCBzZWNvbmRUdXBsZSA9IFsgYW5ndWxhci5pc051bWJlciwgKGlucHV0KSA9PiBgKCR7aW5wdXR9KSBUaGF0J3MgYSBudW1iZXIhYCBdO1xuICpcbiAqIGxldCB0aGlyZCA9IFsgKGlucHV0KSA9PiBpbnB1dCA9PT0gbnVsbCwgIChpbnB1dCkgPT4gYE9oLCBudWxsLi4uYCBdO1xuICpcbiAqIGxldCBmb3VydGggPSBbIChpbnB1dCkgPT4gaW5wdXQgPT09IHVuZGVmaW5lZCwgIChpbnB1dCkgPT4gYG5vdGRlZmluZWRgIF07XG4gKlxuICogbGV0IGRlc2NyaXB0aW9uT2YgPSBwYXR0ZXJuKFsgZmlyc3RUdXBsZSwgc2Vjb25kVHVwbGUsIHRoaXJkLCBmb3VydGggXSk7XG4gKlxuICogY29uc29sZS5sb2coZGVzY3JpcHRpb25PZih1bmRlZmluZWQpKTsgLy8gJ25vdGRlZmluZWQnXG4gKiBjb25zb2xlLmxvZyhkZXNjcmlwdGlvbk9mKDU1KSk7IC8vICcoNTUpIFRoYXQncyBhIG51bWJlciEnXG4gKiBjb25zb2xlLmxvZyhkZXNjcmlwdGlvbk9mKFwiZm9vXCIpKTsgLy8gJ0hlcmUncyB5b3VyIHN0cmluZyBmb28nXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gc3RydWN0IEEgMkQgYXJyYXkuICBFYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5IHNob3VsZCBiZSBhbiBhcnJheSwgYSAyLXR1cGxlLFxuICogd2l0aCBhIFByZWRpY2F0ZSBhbmQgYSBtYXBwaW5nL291dHB1dCBmdW5jdGlvblxuICogQHJldHVybnMge2Z1bmN0aW9uKGFueSk6ICp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXR0ZXJuKHN0cnVjdDogRnVuY3Rpb25bXVtdKTogRnVuY3Rpb24ge1xuICByZXR1cm4gZnVuY3Rpb24oeDogYW55KSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJ1Y3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChzdHJ1Y3RbaV1bMF0oeCkpIHJldHVybiBzdHJ1Y3RbaV1bMV0oeCk7XG4gICAgfVxuICB9O1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL2NvbW1vbi9ob2YudHMiLCIvKipcbiAqIFRoaXMgbW9kdWxlIGlzIGEgc3R1YiBmb3IgY29yZSBzZXJ2aWNlcyBzdWNoIGFzIERlcGVuZGVuY3kgSW5qZWN0aW9uIG9yIEJyb3dzZXIgTG9jYXRpb24uXG4gKiBDb3JlIHNlcnZpY2VzIG1heSBiZSBpbXBsZW1lbnRlZCBieSBhIHNwZWNpZmljIGZyYW1ld29yaywgc3VjaCBhcyBuZzEgb3IgbmcyLCBvciBiZSBwdXJlIGphdmFzY3JpcHQuXG4gKlxuICogQG1vZHVsZSBjb21tb25cbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBJSW5qZWN0YWJsZSwgT2JqIH0gZnJvbSAnLi9jb21tb24nO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBVcmxQYXJ0cyB9IGZyb20gJy4uL3VybC9pbnRlcmZhY2UnO1xuXG5leHBvcnQgbGV0IG5vdEltcGxlbWVudGVkID0gKGZubmFtZTogc3RyaW5nKSA9PiAoKSA9PiB7XG4gIHRocm93IG5ldyBFcnJvcihgJHtmbm5hbWV9KCk6IE5vIGNvcmVzZXJ2aWNlcyBpbXBsZW1lbnRhdGlvbiBmb3IgVUktUm91dGVyIGlzIGxvYWRlZC5gKTtcbn07XG5cbmNvbnN0IHNlcnZpY2VzOiBDb3JlU2VydmljZXMgPSB7XG4gICRxOiB1bmRlZmluZWQsXG4gICRpbmplY3RvcjogdW5kZWZpbmVkLFxufTtcblxuZXhwb3J0IGludGVyZmFjZSAkUUxpa2VEZWZlcnJlZCB7XG4gIHJlc29sdmU6ICh2YWw/OiBhbnkpID0+IHZvaWQ7XG4gIHJlamVjdDogKHJlYXNvbj86IGFueSkgPT4gdm9pZDtcbiAgcHJvbWlzZTogUHJvbWlzZTxhbnk+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlICRRTGlrZSB7XG4gIHdoZW48VD4odmFsdWU/OiBUIHwgUHJvbWlzZUxpa2U8VD4pOiBQcm9taXNlPFQ+O1xuICByZWplY3Q8VD4ocmVhc29uOiBhbnkpOiBQcm9taXNlPFQ+O1xuICBkZWZlcigpOiAkUUxpa2VEZWZlcnJlZDtcbiAgYWxsKHByb21pc2VzOiB7IFtrZXk6IHN0cmluZ106IFByb21pc2U8YW55PiB9KTogUHJvbWlzZTxhbnk+O1xuICBhbGwocHJvbWlzZXM6IFByb21pc2U8YW55PltdKTogUHJvbWlzZTxhbnlbXT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgJEluamVjdG9yTGlrZSB7XG4gIHN0cmljdERpPzogYm9vbGVhbjtcbiAgZ2V0KHRva2VuOiBhbnkpOiBhbnk7XG4gIGdldDxUPih0b2tlbjogYW55KTogVDtcbiAgaGFzKHRva2VuOiBhbnkpOiBib29sZWFuO1xuICBpbnZva2UoZm46IElJbmplY3RhYmxlLCBjb250ZXh0PzogYW55LCBsb2NhbHM/OiBPYmopOiBhbnk7XG4gIGFubm90YXRlKGZuOiBJSW5qZWN0YWJsZSwgc3RyaWN0RGk/OiBib29sZWFuKTogYW55W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29yZVNlcnZpY2VzIHtcbiAgJHE6ICRRTGlrZTtcbiAgJGluamVjdG9yOiAkSW5qZWN0b3JMaWtlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvY2F0aW9uU2VydmljZXMgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgdXJsIHN0cmluZ1xuICAgKlxuICAgKiBUaGUgVVJMIGlzIG5vcm1hbGl6ZWQgdXNpbmcgdGhlIGludGVybmFsIFtbcGF0aF1dL1tbc2VhcmNoXV0vW1toYXNoXV0gdmFsdWVzLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgdGhlIFVSTCBtYXkgYmUgc3RvcmVkIGluIHRoZSBoYXNoIChbW0hhc2hMb2NhdGlvblNlcnZpY2VzXV0pIG9yXG4gICAqIGhhdmUgYSBiYXNlIEhSRUYgcHJlcGVuZGVkIChbW1B1c2hTdGF0ZUxvY2F0aW9uU2VydmljZXNdXSkuXG4gICAqXG4gICAqIFRoZSByYXcgVVJMIGluIHRoZSBicm93c2VyIG1pZ2h0IGJlOlxuICAgKlxuICAgKiBgYGBcbiAgICogaHR0cDovL215c2l0ZS5jb20vc29tZXBhdGgvaW5kZXguaHRtbCMvaW50ZXJuYWwvcGF0aC8xMjM/cGFyYW0xPWZvbyNhbmNob3JcbiAgICogYGBgXG4gICAqXG4gICAqIG9yXG4gICAqXG4gICAqIGBgYFxuICAgKiBodHRwOi8vbXlzaXRlLmNvbS9iYXNlcGF0aC9pbnRlcm5hbC9wYXRoLzEyMz9wYXJhbTE9Zm9vI2FuY2hvclxuICAgKiBgYGBcbiAgICpcbiAgICogdGhlbiB0aGlzIG1ldGhvZCByZXR1cm5zOlxuICAgKlxuICAgKiBgYGBcbiAgICogL2ludGVybmFsL3BhdGgvMTIzP3BhcmFtMT1mb28jYW5jaG9yXG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIGxvY2F0aW9uU2VydmljZXMudXJsKCk7IC8vIFwiL3NvbWUvcGF0aD9xdWVyeT12YWx1ZSNhbmNob3JcIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybnMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHVybCwgYXMgYSBzdHJpbmcuXG4gICAqL1xuICB1cmwoKTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSB1cmwsIG9yIGdldHMgdGhlIGN1cnJlbnQgdXJsXG4gICAqXG4gICAqIFVwZGF0ZXMgdGhlIHVybCwgY2hhbmdpbmcgaXQgdG8gdGhlIHZhbHVlIGluIGBuZXd1cmxgXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogbG9jYXRpb25TZXJ2aWNlcy51cmwoXCIvc29tZS9wYXRoP3F1ZXJ5PXZhbHVlI2FuY2hvclwiLCB0cnVlKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBuZXd1cmwgVGhlIG5ldyB2YWx1ZSBmb3IgdGhlIFVSTC5cbiAgICogICAgICAgICAgICAgICBUaGlzIHVybCBzaG91bGQgcmVmbGVjdCBvbmx5IHRoZSBuZXcgaW50ZXJuYWwgW1twYXRoXV0sIFtbc2VhcmNoXV0sIGFuZCBbW2hhc2hdXSB2YWx1ZXMuXG4gICAqICAgICAgICAgICAgICAgSXQgc2hvdWxkIG5vdCBpbmNsdWRlIHRoZSBwcm90b2NvbCwgc2l0ZSwgcG9ydCwgb3IgYmFzZSBwYXRoIG9mIGFuIGFic29sdXRlIEhSRUYuXG4gICAqIEBwYXJhbSByZXBsYWNlIFdoZW4gdHJ1ZSwgcmVwbGFjZXMgdGhlIGN1cnJlbnQgaGlzdG9yeSBlbnRyeSAoaW5zdGVhZCBvZiBhcHBlbmRpbmcgaXQpIHdpdGggdGhpcyBuZXcgdXJsXG4gICAqIEBwYXJhbSBzdGF0ZSBUaGUgaGlzdG9yeSdzIHN0YXRlIG9iamVjdCwgaS5lLiwgcHVzaFN0YXRlIChpZiB0aGUgTG9jYXRpb25TZXJ2aWNlcyBpbXBsZW1lbnRhdGlvbiBzdXBwb3J0cyBpdClcbiAgICogQHJldHVybiB0aGUgdXJsIChhZnRlciBwb3RlbnRpYWxseSBiZWluZyBwcm9jZXNzZWQpXG4gICAqL1xuICB1cmwobmV3dXJsOiBzdHJpbmcsIHJlcGxhY2U/OiBib29sZWFuLCBzdGF0ZT86IGFueSk6IHN0cmluZztcblxuICAvKipcbiAgICogR2V0cyB0aGUgcGF0aCBwYXJ0IG9mIHRoZSBjdXJyZW50IHVybFxuICAgKlxuICAgKiBJZiB0aGUgY3VycmVudCBVUkwgaXMgYC9zb21lL3BhdGg/cXVlcnk9dmFsdWUjYW5jaG9yYCwgdGhpcyByZXR1cm5zIGAvc29tZS9wYXRoYFxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBwYXRoIHBvcnRpb24gb2YgdGhlIHVybFxuICAgKi9cbiAgcGF0aCgpOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHNlYXJjaCBwYXJ0IG9mIHRoZSBjdXJyZW50IHVybCBhcyBhbiBvYmplY3RcbiAgICpcbiAgICogSWYgdGhlIGN1cnJlbnQgVVJMIGlzIGAvc29tZS9wYXRoP3F1ZXJ5PXZhbHVlI2FuY2hvcmAsIHRoaXMgcmV0dXJucyBgeyBxdWVyeTogJ3ZhbHVlJyB9YFxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBzZWFyY2ggKHF1ZXJ5c3RyaW5nKSBwb3J0aW9uIG9mIHRoZSB1cmwsIGFzIGFuIG9iamVjdFxuICAgKi9cbiAgc2VhcmNoKCk6IHsgW2tleTogc3RyaW5nXTogYW55IH07XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGhhc2ggcGFydCBvZiB0aGUgY3VycmVudCB1cmxcbiAgICpcbiAgICogSWYgdGhlIGN1cnJlbnQgVVJMIGlzIGAvc29tZS9wYXRoP3F1ZXJ5PXZhbHVlI2FuY2hvcmAsIHRoaXMgcmV0dXJucyBgYW5jaG9yYFxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBoYXNoIChhbmNob3IpIHBvcnRpb24gb2YgdGhlIHVybFxuICAgKi9cbiAgaGFzaCgpOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIHVybCBjaGFuZ2UgaGFuZGxlclxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIGxldCBkZXJlZ2lzdGVyRm4gPSBsb2NhdGlvblNlcnZpY2VzLm9uQ2hhbmdlKChldnQpID0+IGNvbnNvbGUubG9nKFwidXJsIGNoYW5nZVwiLCBldnQpKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFjayBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgdXJsIGlzIGNoYW5naW5nXG4gICAqIEByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGRlLXJlZ2lzdGVycyB0aGUgY2FsbGJhY2tcbiAgICovXG4gIG9uQ2hhbmdlKGNhbGxiYWNrOiBGdW5jdGlvbik6IEZ1bmN0aW9uO1xufVxuXG4vKipcbiAqIFRoaXMgc2VydmljZSByZXR1cm5zIHRoZSBsb2NhdGlvbiBjb25maWd1cmF0aW9uXG4gKlxuICogVGhpcyBzZXJ2aWNlIHJldHVybnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGxvY2F0aW9uIGNvbmZpZ3VyYXRpb24uXG4gKiBUaGlzIHNlcnZpY2UgaXMgcHJpbWFyaWx5IHVzZWQgd2hlbiBidWlsZGluZyBVUkxzIChlLmcuLCBmb3IgYGhyZWZzYClcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb2NhdGlvbkNvbmZpZyBleHRlbmRzIERpc3Bvc2FibGUge1xuICAvKipcbiAgICogR2V0cyB0aGUgcG9ydCwgZS5nLiwgYDgwYFxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBwb3J0IG51bWJlclxuICAgKi9cbiAgcG9ydCgpOiBudW1iZXI7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwcm90b2NvbCwgZS5nLiwgYGh0dHBgXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHByb3RvY29sXG4gICAqL1xuICBwcm90b2NvbCgpOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBob3N0LCBlLmcuLCBgbG9jYWxob3N0YFxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBwcm90b2NvbFxuICAgKi9cbiAgaG9zdCgpOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBiYXNlIEhyZWYsIGUuZy4sIGBodHRwOi8vbG9jYWxob3N0L2FwcHJvb3QvYFxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBhcHBsaWNhdGlvbidzIGJhc2UgaHJlZlxuICAgKi9cbiAgYmFzZUhyZWYoKTogc3RyaW5nO1xuICAvKipcbiAgICogUmV0dXJucyB0cnVlIHdoZW4gcnVubmluZyBpbiBwdXNoc3RhdGUgbW9kZVxuICAgKlxuICAgKiBAcmV0dXJuIHRydWUgd2hlbiBydW5uaW5nIGluIHB1c2hzdGF0ZSBtb2RlXG4gICAqL1xuICBodG1sNU1vZGUoKTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEdldHMgdGhlIGhhc2hQcmVmaXggKHdoZW4gbm90IHJ1bm5pbmcgaW4gcHVzaHN0YXRlIG1vZGUpXG4gICAqXG4gICAqIElmIHRoZSBjdXJyZW50IHVybCBpcyBgaHR0cDovL2xvY2FsaG9zdC9hcHAjIS91aXJvdXRlci9wYXRoLyNhbmNob3JgLCBpdCByZXR1cm5zIGAhYCB3aGljaCBpcyB0aGUgcHJlZml4IGZvciB0aGUgXCJoYXNoYmFuZ1wiIHBvcnRpb24uXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIGhhc2ggcHJlZml4XG4gICAqL1xuICBoYXNoUHJlZml4KCk6IHN0cmluZztcbiAgLyoqXG4gICAqIFNldHMgdGhlIGhhc2hQcmVmaXggKHdoZW4gbm90IHJ1bm5pbmcgaW4gcHVzaHN0YXRlIG1vZGUpXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIG5ldyBoYXNoIHByZWZpeFxuICAgKi9cbiAgaGFzaFByZWZpeChuZXdwcmVmaXg6IHN0cmluZyk6IHN0cmluZztcbn1cblxuZXhwb3J0IHsgc2VydmljZXMgfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9jb21tb24vY29yZXNlcnZpY2VzLnRzIiwiLyoqIEBtb2R1bGUgY29tbW9uICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuZXhwb3J0ICogZnJvbSAnLi9jb21tb24nO1xuZXhwb3J0ICogZnJvbSAnLi9jb3Jlc2VydmljZXMnO1xuZXhwb3J0ICogZnJvbSAnLi9nbG9iJztcbmV4cG9ydCAqIGZyb20gJy4vaG9mJztcbmV4cG9ydCAqIGZyb20gJy4vcHJlZGljYXRlcyc7XG5leHBvcnQgKiBmcm9tICcuL3F1ZXVlJztcbmV4cG9ydCAqIGZyb20gJy4vc3RyaW5ncyc7XG5leHBvcnQgKiBmcm9tICcuL3RyYWNlJztcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9jb21tb24vaW5kZXgudHMiLCIvKipcbiAqIEZ1bmN0aW9ucyB0aGF0IG1hbmlwdWxhdGUgc3RyaW5nc1xuICpcbiAqIEFsdGhvdWdoIHRoZXNlIGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIHRoZXkgYXJlIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXQgbm90aWNlLlxuICpcbiAqIEBtb2R1bGUgY29tbW9uX3N0cmluZ3NcbiAqLyAvKiogKi9cblxuaW1wb3J0IHsgaXNTdHJpbmcsIGlzQXJyYXksIGlzRGVmaW5lZCwgaXNOdWxsLCBpc1Byb21pc2UsIGlzSW5qZWN0YWJsZSwgaXNPYmplY3QgfSBmcm9tICcuL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgUmVqZWN0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi9yZWplY3RGYWN0b3J5JztcbmltcG9ydCB7IElJbmplY3RhYmxlLCBpZGVudGl0eSwgT2JqLCB0YWlsLCBwdXNoUiB9IGZyb20gJy4vY29tbW9uJztcbmltcG9ydCB7IHBhdHRlcm4sIGlzLCBub3QsIHZhbCwgaW52b2tlIH0gZnJvbSAnLi9ob2YnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZhYmxlJztcblxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHNob3J0ZW5lZCB0byBhIG1heGltdW0gbGVuZ3RoXG4gKlxuICogSWYgdGhlIHN0cmluZyBpcyBhbHJlYWR5IGxlc3MgdGhhbiB0aGUgYG1heGAgbGVuZ3RoLCByZXR1cm4gdGhlIHN0cmluZy5cbiAqIEVsc2UgcmV0dXJuIHRoZSBzdHJpbmcsIHNob3J0ZW5lZCB0byBgbWF4IC0gM2AgYW5kIGFwcGVuZCB0aHJlZSBkb3RzIChcIi4uLlwiKS5cbiAqXG4gKiBAcGFyYW0gbWF4IHRoZSBtYXhpbXVtIGxlbmd0aCBvZiB0aGUgc3RyaW5nIHRvIHJldHVyblxuICogQHBhcmFtIHN0ciB0aGUgaW5wdXQgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXhMZW5ndGgobWF4OiBudW1iZXIsIHN0cjogc3RyaW5nKSB7XG4gIGlmIChzdHIubGVuZ3RoIDw9IG1heCkgcmV0dXJuIHN0cjtcbiAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgbWF4IC0gMykgKyAnLi4uJztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nLCB3aXRoIHNwYWNlcyBhZGRlZCB0byB0aGUgZW5kLCB1cCB0byBhIGRlc2lyZWQgc3RyIGxlbmd0aFxuICpcbiAqIElmIHRoZSBzdHJpbmcgaXMgYWxyZWFkeSBsb25nZXIgdGhhbiB0aGUgZGVzaXJlZCBsZW5ndGgsIHJldHVybiB0aGUgc3RyaW5nLlxuICogRWxzZSByZXR1cm5zIHRoZSBzdHJpbmcsIHdpdGggZXh0cmEgc3BhY2VzIG9uIHRoZSBlbmQsIHN1Y2ggdGhhdCBpdCByZWFjaGVzIGBsZW5ndGhgIGNoYXJhY3RlcnMuXG4gKlxuICogQHBhcmFtIGxlbmd0aCB0aGUgZGVzaXJlZCBsZW5ndGggb2YgdGhlIHN0cmluZyB0byByZXR1cm5cbiAqIEBwYXJhbSBzdHIgdGhlIGlucHV0IHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFkU3RyaW5nKGxlbmd0aDogbnVtYmVyLCBzdHI6IHN0cmluZykge1xuICB3aGlsZSAoc3RyLmxlbmd0aCA8IGxlbmd0aCkgc3RyICs9ICcgJztcbiAgcmV0dXJuIHN0cjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGtlYm9iU3RyaW5nKGNhbWVsQ2FzZTogc3RyaW5nKSB7XG4gIHJldHVybiBjYW1lbENhc2VcbiAgICAucmVwbGFjZSgvXihbQS1aXSkvLCAkMSA9PiAkMS50b0xvd2VyQ2FzZSgpKSAvLyByZXBsYWNlIGZpcnN0IGNoYXJcbiAgICAucmVwbGFjZSgvKFtBLVpdKS9nLCAkMSA9PiAnLScgKyAkMS50b0xvd2VyQ2FzZSgpKTsgLy8gcmVwbGFjZSByZXN0XG59XG5cbmZ1bmN0aW9uIF90b0pzb24ob2JqOiBPYmopIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7XG59XG5cbmZ1bmN0aW9uIF9mcm9tSnNvbihqc29uOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGlzU3RyaW5nKGpzb24pID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XG59XG5cbmZ1bmN0aW9uIHByb21pc2VUb1N0cmluZyhwOiBQcm9taXNlPGFueT4pIHtcbiAgcmV0dXJuIGBQcm9taXNlKCR7SlNPTi5zdHJpbmdpZnkocCl9KWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmdW5jdGlvblRvU3RyaW5nKGZuOiBGdW5jdGlvbikge1xuICBjb25zdCBmblN0ciA9IGZuVG9TdHJpbmcoZm4pO1xuICBjb25zdCBuYW1lZEZ1bmN0aW9uTWF0Y2ggPSBmblN0ci5tYXRjaCgvXihmdW5jdGlvbiBbXiBdK1xcKFteKV0qXFwpKS8pO1xuICBjb25zdCB0b1N0ciA9IG5hbWVkRnVuY3Rpb25NYXRjaCA/IG5hbWVkRnVuY3Rpb25NYXRjaFsxXSA6IGZuU3RyO1xuXG4gIGNvbnN0IGZuTmFtZSA9IGZuWyduYW1lJ10gfHwgJyc7XG4gIGlmIChmbk5hbWUgJiYgdG9TdHIubWF0Y2goL2Z1bmN0aW9uIFxcKC8pKSB7XG4gICAgcmV0dXJuICdmdW5jdGlvbiAnICsgZm5OYW1lICsgdG9TdHIuc3Vic3RyKDkpO1xuICB9XG4gIHJldHVybiB0b1N0cjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZuVG9TdHJpbmcoZm46IElJbmplY3RhYmxlKSB7XG4gIGNvbnN0IF9mbiA9IGlzQXJyYXkoZm4pID8gZm4uc2xpY2UoLTEpWzBdIDogZm47XG4gIHJldHVybiAoX2ZuICYmIF9mbi50b1N0cmluZygpKSB8fCAndW5kZWZpbmVkJztcbn1cblxubGV0IHN0cmluZ2lmeVBhdHRlcm5GbjogKHZhbDogYW55KSA9PiBzdHJpbmcgPSBudWxsO1xuY29uc3Qgc3RyaW5naWZ5UGF0dGVybiA9IGZ1bmN0aW9uKHZhbHVlOiBhbnkpIHtcbiAgY29uc3QgaXNSZWplY3Rpb24gPSBSZWplY3Rpb24uaXNSZWplY3Rpb25Qcm9taXNlO1xuXG4gIHN0cmluZ2lmeVBhdHRlcm5GbiA9XG4gICAgPGFueT5zdHJpbmdpZnlQYXR0ZXJuRm4gfHxcbiAgICBwYXR0ZXJuKFtcbiAgICAgIFtub3QoaXNEZWZpbmVkKSwgdmFsKCd1bmRlZmluZWQnKV0sXG4gICAgICBbaXNOdWxsLCB2YWwoJ251bGwnKV0sXG4gICAgICBbaXNQcm9taXNlLCB2YWwoJ1tQcm9taXNlXScpXSxcbiAgICAgIFtpc1JlamVjdGlvbiwgKHg6IGFueSkgPT4geC5fdHJhbnNpdGlvblJlamVjdGlvbi50b1N0cmluZygpXSxcbiAgICAgIFtpcyhSZWplY3Rpb24pLCBpbnZva2UoJ3RvU3RyaW5nJyldLFxuICAgICAgW2lzKFRyYW5zaXRpb24pLCBpbnZva2UoJ3RvU3RyaW5nJyldLFxuICAgICAgW2lzKFJlc29sdmFibGUpLCBpbnZva2UoJ3RvU3RyaW5nJyldLFxuICAgICAgW2lzSW5qZWN0YWJsZSwgZnVuY3Rpb25Ub1N0cmluZ10sXG4gICAgICBbdmFsKHRydWUpLCBpZGVudGl0eV0sXG4gICAgXSk7XG5cbiAgcmV0dXJuIHN0cmluZ2lmeVBhdHRlcm5Gbih2YWx1ZSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5KG86IGFueSkge1xuICBjb25zdCBzZWVuOiBhbnlbXSA9IFtdO1xuXG4gIGZ1bmN0aW9uIGZvcm1hdCh2YWx1ZTogYW55KSB7XG4gICAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgaWYgKHNlZW4uaW5kZXhPZih2YWx1ZSkgIT09IC0xKSByZXR1cm4gJ1tjaXJjdWxhciByZWZdJztcbiAgICAgIHNlZW4ucHVzaCh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmdpZnlQYXR0ZXJuKHZhbHVlKTtcbiAgfVxuXG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvLCAoa2V5LCB2YWx1ZSkgPT4gZm9ybWF0KHZhbHVlKSkucmVwbGFjZSgvXFxcXFwiL2csICdcIicpO1xufVxuXG4vKiogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgc3BsaXRzIGEgc3RyaW5nIG9uIGEgY2hhcmFjdGVyIG9yIHN1YnN0cmluZyAqL1xuZXhwb3J0IGNvbnN0IGJlZm9yZUFmdGVyU3Vic3RyID0gKGNoYXI6IHN0cmluZykgPT4gKHN0cjogc3RyaW5nKTogc3RyaW5nW10gPT4ge1xuICBpZiAoIXN0cikgcmV0dXJuIFsnJywgJyddO1xuICBjb25zdCBpZHggPSBzdHIuaW5kZXhPZihjaGFyKTtcbiAgaWYgKGlkeCA9PT0gLTEpIHJldHVybiBbc3RyLCAnJ107XG4gIHJldHVybiBbc3RyLnN1YnN0cigwLCBpZHgpLCBzdHIuc3Vic3RyKGlkeCArIDEpXTtcbn07XG5cbmV4cG9ydCBjb25zdCBob3N0UmVnZXggPSBuZXcgUmVnRXhwKCdeKD86W2Etel0rOik/Ly9bXi9dKy8nKTtcbmV4cG9ydCBjb25zdCBzdHJpcExhc3RQYXRoRWxlbWVudCA9IChzdHI6IHN0cmluZykgPT4gc3RyLnJlcGxhY2UoL1xcL1teL10qJC8sICcnKTtcbmV4cG9ydCBjb25zdCBzcGxpdEhhc2ggPSBiZWZvcmVBZnRlclN1YnN0cignIycpO1xuZXhwb3J0IGNvbnN0IHNwbGl0UXVlcnkgPSBiZWZvcmVBZnRlclN1YnN0cignPycpO1xuZXhwb3J0IGNvbnN0IHNwbGl0RXF1YWwgPSBiZWZvcmVBZnRlclN1YnN0cignPScpO1xuZXhwb3J0IGNvbnN0IHRyaW1IYXNoVmFsID0gKHN0cjogc3RyaW5nKSA9PiAoc3RyID8gc3RyLnJlcGxhY2UoL14jLywgJycpIDogJycpO1xuXG4vKipcbiAqIFNwbGl0cyBvbiBhIGRlbGltaXRlciwgYnV0IHJldHVybnMgdGhlIGRlbGltaXRlcnMgaW4gdGhlIGFycmF5XG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqIHZhciBzcGxpdE9uU2xhc2hlcyA9IHNwbGl0T25EZWxpbSgnLycpO1xuICogc3BsaXRPblNsYXNoZXMoXCIvZm9vXCIpOyAvLyBbXCIvXCIsIFwiZm9vXCJdXG4gKiBzcGxpdE9uU2xhc2hlcyhcIi9mb28vXCIpOyAvLyBbXCIvXCIsIFwiZm9vXCIsIFwiL1wiXVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdE9uRGVsaW0oZGVsaW06IHN0cmluZykge1xuICBjb25zdCByZSA9IG5ldyBSZWdFeHAoJygnICsgZGVsaW0gKyAnKScsICdnJyk7XG4gIHJldHVybiAoc3RyOiBzdHJpbmcpID0+IHN0ci5zcGxpdChyZSkuZmlsdGVyKGlkZW50aXR5KTtcbn1cblxuLyoqXG4gKiBSZWR1Y2UgZm4gdGhhdCBqb2lucyBuZWlnaGJvcmluZyBzdHJpbmdzXG4gKlxuICogR2l2ZW4gYW4gYXJyYXkgb2Ygc3RyaW5ncywgcmV0dXJucyBhIG5ldyBhcnJheVxuICogd2hlcmUgYWxsIG5laWdoYm9yaW5nIHN0cmluZ3MgaGF2ZSBiZWVuIGpvaW5lZC5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogbGV0IGFyciA9IFtcImZvb1wiLCBcImJhclwiLCAxLCBcImJhelwiLCBcIlwiLCBcInF1eFwiIF07XG4gKiBhcnIucmVkdWNlKGpvaW5OZWlnaGJvcnNSLCBbXSkgLy8gW1wiZm9vYmFyXCIsIDEsIFwiYmF6cXV4XCIgXVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBqb2luTmVpZ2hib3JzUihhY2M6IGFueVtdLCB4OiBhbnkpIHtcbiAgaWYgKGlzU3RyaW5nKHRhaWwoYWNjKSkgJiYgaXNTdHJpbmcoeCkpIHJldHVybiBhY2Muc2xpY2UoMCwgLTEpLmNvbmNhdCh0YWlsKGFjYykgKyB4KTtcbiAgcmV0dXJuIHB1c2hSKGFjYywgeCk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvY29tbW9uL3N0cmluZ3MudHMiLCIvKipcbiAqICMgVHJhbnNpdGlvbiB0cmFjaW5nIChkZWJ1ZylcbiAqXG4gKiBFbmFibGUgdHJhbnNpdGlvbiB0cmFjaW5nIHRvIHByaW50IHRyYW5zaXRpb24gaW5mb3JtYXRpb24gdG8gdGhlIGNvbnNvbGUsXG4gKiBpbiBvcmRlciB0byBoZWxwIGRlYnVnIHlvdXIgYXBwbGljYXRpb24uXG4gKiBUcmFjaW5nIGxvZ3MgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCBUcmFuc2l0aW9uIHRvIHlvdXIgY29uc29sZS5cbiAqXG4gKiBUbyBlbmFibGUgdHJhY2luZywgaW1wb3J0IHRoZSBbW1RyYWNlXV0gc2luZ2xldG9uIGFuZCBlbmFibGUgb25lIG9yIG1vcmUgY2F0ZWdvcmllcy5cbiAqXG4gKiAjIyMgRVM2XG4gKiBgYGBqc1xuICogaW1wb3J0IHt0cmFjZX0gZnJvbSBcIkB1aXJvdXRlci9jb3JlXCI7XG4gKiB0cmFjZS5lbmFibGUoMSwgNSk7IC8vIFRSQU5TSVRJT04gYW5kIFZJRVdDT05GSUdcbiAqIGBgYFxuICpcbiAqICMjIyBDSlNcbiAqIGBgYGpzXG4gKiBsZXQgdHJhY2UgPSByZXF1aXJlKFwiQHVpcm91dGVyL2NvcmVcIikudHJhY2U7XG4gKiB0cmFjZS5lbmFibGUoXCJUUkFOU0lUSU9OXCIsIFwiVklFV0NPTkZJR1wiKTtcbiAqIGBgYFxuICpcbiAqICMjIyBHbG9iYWxzXG4gKiBgYGBqc1xuICogbGV0IHRyYWNlID0gd2luZG93W1wiQHVpcm91dGVyL2NvcmVcIl0udHJhY2U7XG4gKiB0cmFjZS5lbmFibGUoKTsgLy8gVHJhY2UgZXZlcnl0aGluZyAodmVyeSB2ZXJib3NlKVxuICogYGBgXG4gKlxuICogIyMjIEFuZ3VsYXIgMTpcbiAqIGBgYGpzXG4gKiBhcHAucnVuKCR0cmFjZSA9PiAkdHJhY2UuZW5hYmxlKCkpO1xuICogYGBgXG4gKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdHJhY2VcbiAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tY29uc29sZSAqL1xuaW1wb3J0IHsgcGFyc2UgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IGlzRnVuY3Rpb24sIGlzTnVtYmVyIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBWaWV3VHVwbGUgfSBmcm9tICcuLi92aWV3JztcbmltcG9ydCB7IEFjdGl2ZVVJVmlldywgVmlld0NvbmZpZywgVmlld0NvbnRleHQgfSBmcm9tICcuLi92aWV3L2ludGVyZmFjZSc7XG5pbXBvcnQgeyBzdHJpbmdpZnksIGZ1bmN0aW9uVG9TdHJpbmcsIG1heExlbmd0aCwgcGFkU3RyaW5nIH0gZnJvbSAnLi9zdHJpbmdzJztcbmltcG9ydCB7IFJlc29sdmFibGUgfSBmcm9tICcuLi9yZXNvbHZlL3Jlc29sdmFibGUnO1xuaW1wb3J0IHsgUGF0aE5vZGUgfSBmcm9tICcuLi9wYXRoL3BhdGhOb2RlJztcbmltcG9ydCB7IFBvbGljeVdoZW4gfSBmcm9tICcuLi9yZXNvbHZlL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9vayB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbkhvb2snO1xuaW1wb3J0IHsgSG9va1Jlc3VsdCB9IGZyb20gJy4uL3RyYW5zaXRpb24vaW50ZXJmYWNlJztcbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi4vc3RhdGUvc3RhdGVPYmplY3QnO1xuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gdWlWaWV3U3RyaW5nKHVpdmlldzogQWN0aXZlVUlWaWV3KSB7XG4gIGlmICghdWl2aWV3KSByZXR1cm4gJ3VpLXZpZXcgKGRlZnVuY3QpJztcbiAgY29uc3Qgc3RhdGUgPSB1aXZpZXcuY3JlYXRpb25Db250ZXh0ID8gdWl2aWV3LmNyZWF0aW9uQ29udGV4dC5uYW1lIHx8ICcocm9vdCknIDogJyhub25lKSc7XG4gIHJldHVybiBgW3VpLXZpZXcjJHt1aXZpZXcuaWR9ICR7dWl2aWV3LiR0eXBlfToke3Vpdmlldy5mcW59ICgke3Vpdmlldy5uYW1lfUAke3N0YXRlfSldYDtcbn1cblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IHZpZXdDb25maWdTdHJpbmcgPSAodmlld0NvbmZpZzogVmlld0NvbmZpZykgPT4ge1xuICBjb25zdCB2aWV3ID0gdmlld0NvbmZpZy52aWV3RGVjbDtcbiAgY29uc3Qgc3RhdGUgPSB2aWV3LiRjb250ZXh0Lm5hbWUgfHwgJyhyb290KSc7XG4gIHJldHVybiBgW1ZpZXcjJHt2aWV3Q29uZmlnLiRpZH0gZnJvbSAnJHtzdGF0ZX0nIHN0YXRlXTogdGFyZ2V0IHVpLXZpZXc6ICcke3ZpZXcuJHVpVmlld05hbWV9QCR7XG4gICAgdmlldy4kdWlWaWV3Q29udGV4dEFuY2hvclxuICB9J2A7XG59O1xuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplZENhdChpbnB1dDogQ2F0ZWdvcnkgfCBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gaXNOdW1iZXIoaW5wdXQpID8gQ2F0ZWdvcnlbaW5wdXRdIDogQ2F0ZWdvcnlbQ2F0ZWdvcnlbaW5wdXRdXTtcbn1cblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IGNvbnNvbGVMb2cgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUubG9nLCBjb25zb2xlKTtcblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IGNvbnNvbGV0YWJsZSA9IGlzRnVuY3Rpb24oY29uc29sZS50YWJsZSkgPyBjb25zb2xlLnRhYmxlLmJpbmQoY29uc29sZSkgOiBjb25zb2xlTG9nLmJpbmQoY29uc29sZSk7XG5cbi8qKlxuICogVHJhY2UgY2F0ZWdvcmllcyBFbnVtXG4gKlxuICogRW5hYmxlIG9yIGRpc2FibGUgYSBjYXRlZ29yeSB1c2luZyBbW1RyYWNlLmVuYWJsZV1dIG9yIFtbVHJhY2UuZGlzYWJsZV1dXG4gKlxuICogYHRyYWNlLmVuYWJsZShDYXRlZ29yeS5UUkFOU0lUSU9OKWBcbiAqXG4gKiBUaGVzZSBjYW4gYWxzbyBiZSBwcm92aWRlZCB1c2luZyBhIG1hdGNoaW5nIHN0cmluZywgb3IgcG9zaXRpb24gb3JkaW5hbFxuICpcbiAqIGB0cmFjZS5lbmFibGUoXCJUUkFOU0lUSU9OXCIpYFxuICpcbiAqIGB0cmFjZS5lbmFibGUoMSlgXG4gKi9cbmVudW0gQ2F0ZWdvcnkge1xuICBSRVNPTFZFLFxuICBUUkFOU0lUSU9OLFxuICBIT09LLFxuICBVSVZJRVcsXG4gIFZJRVdDT05GSUcsXG59XG5cbmV4cG9ydCB7IENhdGVnb3J5IH07XG5cbi8qKiBAaGlkZGVuICovXG5jb25zdCBfdGlkID0gcGFyc2UoJyRpZCcpO1xuXG4vKiogQGhpZGRlbiAqL1xuY29uc3QgX3JpZCA9IHBhcnNlKCdyb3V0ZXIuJGlkJyk7XG5cbi8qKiBAaGlkZGVuICovXG5jb25zdCB0cmFuc0xibCA9IHRyYW5zID0+IGBUcmFuc2l0aW9uICMke190aWQodHJhbnMpfS0ke19yaWQodHJhbnMpfWA7XG5cbi8qKlxuICogUHJpbnRzIFVJLVJvdXRlciBUcmFuc2l0aW9uIHRyYWNlIGluZm9ybWF0aW9uIHRvIHRoZSBjb25zb2xlLlxuICovXG5leHBvcnQgY2xhc3MgVHJhY2Uge1xuICAvKiogQGhpZGRlbiAqL1xuICBhcHByb3hpbWF0ZURpZ2VzdHM6IG51bWJlcjtcblxuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9lbmFibGVkOiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfSA9IHt9O1xuXG4gIC8qKiBAaGlkZGVuICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYXBwcm94aW1hdGVEaWdlc3RzID0gMDtcbiAgfVxuXG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX3NldChlbmFibGVkOiBib29sZWFuLCBjYXRlZ29yaWVzOiBDYXRlZ29yeVtdKSB7XG4gICAgaWYgKCFjYXRlZ29yaWVzLmxlbmd0aCkge1xuICAgICAgY2F0ZWdvcmllcyA9IDxhbnk+T2JqZWN0LmtleXMoQ2F0ZWdvcnkpXG4gICAgICAgIC5tYXAoayA9PiBwYXJzZUludChrLCAxMCkpXG4gICAgICAgIC5maWx0ZXIoayA9PiAhaXNOYU4oaykpXG4gICAgICAgIC5tYXAoa2V5ID0+IENhdGVnb3J5W2tleV0pO1xuICAgIH1cbiAgICBjYXRlZ29yaWVzLm1hcChub3JtYWxpemVkQ2F0KS5mb3JFYWNoKGNhdGVnb3J5ID0+ICh0aGlzLl9lbmFibGVkW2NhdGVnb3J5XSA9IGVuYWJsZWQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGVzIGEgdHJhY2UgW1tDYXRlZ29yeV1dXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHRyYWNlLmVuYWJsZShcIlRSQU5TSVRJT05cIik7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gY2F0ZWdvcmllcyBjYXRlZ29yaWVzIHRvIGVuYWJsZS4gSWYgYGNhdGVnb3JpZXNgIGlzIG9taXR0ZWQsIGFsbCBjYXRlZ29yaWVzIGFyZSBlbmFibGVkLlxuICAgKiAgICAgICAgQWxzbyB0YWtlcyBzdHJpbmdzIChjYXRlZ29yeSBuYW1lKSBvciBvcmRpbmFsIChjYXRlZ29yeSBwb3NpdGlvbilcbiAgICovXG4gIGVuYWJsZSguLi5jYXRlZ29yaWVzOiAoQ2F0ZWdvcnkgfCBzdHJpbmcgfCBudW1iZXIpW10pO1xuICBlbmFibGUoLi4uY2F0ZWdvcmllczogYW55W10pIHtcbiAgICB0aGlzLl9zZXQodHJ1ZSwgY2F0ZWdvcmllcyk7XG4gIH1cbiAgLyoqXG4gICAqIERpc2FibGVzIGEgdHJhY2UgW1tDYXRlZ29yeV1dXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHRyYWNlLmRpc2FibGUoXCJWSUVXQ09ORklHXCIpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGNhdGVnb3JpZXMgY2F0ZWdvcmllcyB0byBkaXNhYmxlLiBJZiBgY2F0ZWdvcmllc2AgaXMgb21pdHRlZCwgYWxsIGNhdGVnb3JpZXMgYXJlIGRpc2FibGVkLlxuICAgKiAgICAgICAgQWxzbyB0YWtlcyBzdHJpbmdzIChjYXRlZ29yeSBuYW1lKSBvciBvcmRpbmFsIChjYXRlZ29yeSBwb3NpdGlvbilcbiAgICovXG4gIGRpc2FibGUoLi4uY2F0ZWdvcmllczogKENhdGVnb3J5IHwgc3RyaW5nIHwgbnVtYmVyKVtdKTtcbiAgZGlzYWJsZSguLi5jYXRlZ29yaWVzOiBhbnlbXSkge1xuICAgIHRoaXMuX3NldChmYWxzZSwgY2F0ZWdvcmllcyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBlbmFibGVkIHN0YXRldXMgb2YgYSBbW0NhdGVnb3J5XV1cbiAgICpcbiAgICogYGBganNcbiAgICogdHJhY2UuZW5hYmxlZChcIlZJRVdDT05GSUdcIik7IC8vIHRydWUgb3IgZmFsc2VcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm5zIGJvb2xlYW4gdHJ1ZSBpZiB0aGUgY2F0ZWdvcnkgaXMgZW5hYmxlZFxuICAgKi9cbiAgZW5hYmxlZChjYXRlZ29yeTogQ2F0ZWdvcnkgfCBzdHJpbmcgfCBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLl9lbmFibGVkW25vcm1hbGl6ZWRDYXQoY2F0ZWdvcnkpXTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gIHRyYWNlVHJhbnNpdGlvblN0YXJ0KHRyYW5zOiBUcmFuc2l0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuVFJBTlNJVElPTikpIHJldHVybjtcbiAgICBjb25zb2xlLmxvZyhgJHt0cmFuc0xibCh0cmFucyl9OiBTdGFydGVkICAtPiAke3N0cmluZ2lmeSh0cmFucyl9YCk7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICB0cmFjZVRyYW5zaXRpb25JZ25vcmVkKHRyYW5zOiBUcmFuc2l0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuVFJBTlNJVElPTikpIHJldHVybjtcbiAgICBjb25zb2xlLmxvZyhgJHt0cmFuc0xibCh0cmFucyl9OiBJZ25vcmVkICA8PiAke3N0cmluZ2lmeSh0cmFucyl9YCk7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICB0cmFjZUhvb2tJbnZvY2F0aW9uKHN0ZXA6IFRyYW5zaXRpb25Ib29rLCB0cmFuczogVHJhbnNpdGlvbiwgb3B0aW9uczogYW55KSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuSE9PSykpIHJldHVybjtcbiAgICBjb25zdCBldmVudCA9IHBhcnNlKCd0cmFjZURhdGEuaG9va1R5cGUnKShvcHRpb25zKSB8fCAnaW50ZXJuYWwnLFxuICAgICAgY29udGV4dCA9IHBhcnNlKCd0cmFjZURhdGEuY29udGV4dC5zdGF0ZS5uYW1lJykob3B0aW9ucykgfHwgcGFyc2UoJ3RyYWNlRGF0YS5jb250ZXh0Jykob3B0aW9ucykgfHwgJ3Vua25vd24nLFxuICAgICAgbmFtZSA9IGZ1bmN0aW9uVG9TdHJpbmcoKHN0ZXAgYXMgYW55KS5yZWdpc3RlcmVkSG9vay5jYWxsYmFjayk7XG4gICAgY29uc29sZS5sb2coYCR7dHJhbnNMYmwodHJhbnMpfTogICBIb29rIC0+ICR7ZXZlbnR9IGNvbnRleHQ6ICR7Y29udGV4dH0sICR7bWF4TGVuZ3RoKDIwMCwgbmFtZSl9YCk7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICB0cmFjZUhvb2tSZXN1bHQoaG9va1Jlc3VsdDogSG9va1Jlc3VsdCwgdHJhbnM6IFRyYW5zaXRpb24sIHRyYW5zaXRpb25PcHRpb25zOiBhbnkpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5IT09LKSkgcmV0dXJuO1xuICAgIGNvbnNvbGUubG9nKGAke3RyYW5zTGJsKHRyYW5zKX06ICAgPC0gSG9vayByZXR1cm5lZDogJHttYXhMZW5ndGgoMjAwLCBzdHJpbmdpZnkoaG9va1Jlc3VsdCkpfWApO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VSZXNvbHZlUGF0aChwYXRoOiBQYXRoTm9kZVtdLCB3aGVuOiBQb2xpY3lXaGVuLCB0cmFucz86IFRyYW5zaXRpb24pIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5SRVNPTFZFKSkgcmV0dXJuO1xuICAgIGNvbnNvbGUubG9nKGAke3RyYW5zTGJsKHRyYW5zKX06ICAgICAgICAgUmVzb2x2aW5nICR7cGF0aH0gKCR7d2hlbn0pYCk7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICB0cmFjZVJlc29sdmFibGVSZXNvbHZlZChyZXNvbHZhYmxlOiBSZXNvbHZhYmxlLCB0cmFucz86IFRyYW5zaXRpb24pIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5SRVNPTFZFKSkgcmV0dXJuO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYCR7dHJhbnNMYmwodHJhbnMpfTogICAgICAgICAgICAgICA8LSBSZXNvbHZlZCAgJHtyZXNvbHZhYmxlfSB0bzogJHttYXhMZW5ndGgoMjAwLCBzdHJpbmdpZnkocmVzb2x2YWJsZS5kYXRhKSl9YCxcbiAgICApO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VFcnJvcihyZWFzb246IGFueSwgdHJhbnM6IFRyYW5zaXRpb24pIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5UUkFOU0lUSU9OKSkgcmV0dXJuO1xuICAgIGNvbnNvbGUubG9nKGAke3RyYW5zTGJsKHRyYW5zKX06IDwtIFJlamVjdGVkICR7c3RyaW5naWZ5KHRyYW5zKX0sIHJlYXNvbjogJHtyZWFzb259YCk7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICB0cmFjZVN1Y2Nlc3MoZmluYWxTdGF0ZTogU3RhdGVPYmplY3QsIHRyYW5zOiBUcmFuc2l0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuVFJBTlNJVElPTikpIHJldHVybjtcbiAgICBjb25zb2xlLmxvZyhgJHt0cmFuc0xibCh0cmFucyl9OiA8LSBTdWNjZXNzICAke3N0cmluZ2lmeSh0cmFucyl9LCBmaW5hbCBzdGF0ZTogJHtmaW5hbFN0YXRlLm5hbWV9YCk7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICB0cmFjZVVJVmlld0V2ZW50KGV2ZW50OiBzdHJpbmcsIHZpZXdEYXRhOiBBY3RpdmVVSVZpZXcsIGV4dHJhID0gJycpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5VSVZJRVcpKSByZXR1cm47XG4gICAgY29uc29sZS5sb2coYHVpLXZpZXc6ICR7cGFkU3RyaW5nKDMwLCBldmVudCl9ICR7dWlWaWV3U3RyaW5nKHZpZXdEYXRhKX0ke2V4dHJhfWApO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VVSVZpZXdDb25maWdVcGRhdGVkKHZpZXdEYXRhOiBBY3RpdmVVSVZpZXcsIGNvbnRleHQ6IFZpZXdDb250ZXh0KSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQoQ2F0ZWdvcnkuVUlWSUVXKSkgcmV0dXJuO1xuICAgIHRoaXMudHJhY2VVSVZpZXdFdmVudCgnVXBkYXRpbmcnLCB2aWV3RGF0YSwgYCB3aXRoIFZpZXdDb25maWcgZnJvbSBjb250ZXh0PScke2NvbnRleHR9J2ApO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VVSVZpZXdGaWxsKHZpZXdEYXRhOiBBY3RpdmVVSVZpZXcsIGh0bWw6IHN0cmluZykge1xuICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LlVJVklFVykpIHJldHVybjtcbiAgICB0aGlzLnRyYWNlVUlWaWV3RXZlbnQoJ0ZpbGwnLCB2aWV3RGF0YSwgYCB3aXRoOiAke21heExlbmd0aCgyMDAsIGh0bWwpfWApO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VWaWV3U3luYyhwYWlyczogVmlld1R1cGxlW10pIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5WSUVXQ09ORklHKSkgcmV0dXJuO1xuICAgIGNvbnN0IHVpdmhlYWRlciA9ICd1aXZpZXcgY29tcG9uZW50IGZxbic7XG4gICAgY29uc3QgY2ZnaGVhZGVyID0gJ3ZpZXcgY29uZmlnIHN0YXRlICh2aWV3IG5hbWUpJztcbiAgICBjb25zdCBtYXBwaW5nID0gcGFpcnNcbiAgICAgIC5tYXAoKHsgdWlWaWV3LCB2aWV3Q29uZmlnIH0pID0+IHtcbiAgICAgICAgY29uc3QgdWl2ID0gdWlWaWV3ICYmIHVpVmlldy5mcW47XG4gICAgICAgIGNvbnN0IGNmZyA9IHZpZXdDb25maWcgJiYgYCR7dmlld0NvbmZpZy52aWV3RGVjbC4kY29udGV4dC5uYW1lfTogKCR7dmlld0NvbmZpZy52aWV3RGVjbC4kbmFtZX0pYDtcbiAgICAgICAgcmV0dXJuIHsgW3VpdmhlYWRlcl06IHVpdiwgW2NmZ2hlYWRlcl06IGNmZyB9O1xuICAgICAgfSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiAoYVt1aXZoZWFkZXJdIHx8ICcnKS5sb2NhbGVDb21wYXJlKGJbdWl2aGVhZGVyXSB8fCAnJykpO1xuXG4gICAgY29uc29sZXRhYmxlKG1hcHBpbmcpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgdHJhY2VWaWV3U2VydmljZUV2ZW50KGV2ZW50OiBzdHJpbmcsIHZpZXdDb25maWc6IFZpZXdDb25maWcpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZChDYXRlZ29yeS5WSUVXQ09ORklHKSkgcmV0dXJuO1xuICAgIGNvbnNvbGUubG9nKGBWSUVXQ09ORklHOiAke2V2ZW50fSAke3ZpZXdDb25maWdTdHJpbmcodmlld0NvbmZpZyl9YCk7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICB0cmFjZVZpZXdTZXJ2aWNlVUlWaWV3RXZlbnQoZXZlbnQ6IHN0cmluZywgdmlld0RhdGE6IEFjdGl2ZVVJVmlldykge1xuICAgIGlmICghdGhpcy5lbmFibGVkKENhdGVnb3J5LlZJRVdDT05GSUcpKSByZXR1cm47XG4gICAgY29uc29sZS5sb2coYFZJRVdDT05GSUc6ICR7ZXZlbnR9ICR7dWlWaWV3U3RyaW5nKHZpZXdEYXRhKX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBbW1RyYWNlXV0gc2luZ2xldG9uXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqIGltcG9ydCB7dHJhY2V9IGZyb20gXCJAdWlyb3V0ZXIvY29yZVwiO1xuICogdHJhY2UuZW5hYmxlKDEsIDUpO1xuICogYGBgXG4gKi9cbmNvbnN0IHRyYWNlID0gbmV3IFRyYWNlKCk7XG5leHBvcnQgeyB0cmFjZSB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL2NvbW1vbi90cmFjZS50cyIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdHJhbnNpdGlvblxuICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHsgZXh0ZW5kLCBzaWxlbnRSZWplY3Rpb24gfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJy4uL2NvbW1vbi9zdHJpbmdzJztcbmltcG9ydCB7IGlzIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5cbmVudW0gUmVqZWN0VHlwZSB7XG4gIC8qKlxuICAgKiBBIG5ldyB0cmFuc2l0aW9uIHN1cGVyc2VkZWQgdGhpcyBvbmUuXG4gICAqXG4gICAqIFdoaWxlIHRoaXMgdHJhbnNpdGlvbiB3YXMgcnVubmluZywgYSBuZXcgdHJhbnNpdGlvbiBzdGFydGVkLlxuICAgKiBUaGlzIHRyYW5zaXRpb24gaXMgY2FuY2VsbGVkIGJlY2F1c2UgaXQgd2FzIHN1cGVyc2VkZWQgYnkgbmV3IHRyYW5zaXRpb24uXG4gICAqL1xuICBTVVBFUlNFREVEID0gMixcblxuICAvKipcbiAgICogVGhlIHRyYW5zaXRpb24gd2FzIGFib3J0ZWRcbiAgICpcbiAgICogVGhlIHRyYW5zaXRpb24gd2FzIGFib3J0ZWQgYnkgYSBob29rIHdoaWNoIHJldHVybmVkIGBmYWxzZWBcbiAgICovXG4gIEFCT1JURUQgPSAzLFxuXG4gIC8qKlxuICAgKiBUaGUgdHJhbnNpdGlvbiB3YXMgaW52YWxpZFxuICAgKlxuICAgKiBUaGUgdHJhbnNpdGlvbiB3YXMgbmV2ZXIgc3RhcnRlZCBiZWNhdXNlIGl0IHdhcyBpbnZhbGlkXG4gICAqL1xuICBJTlZBTElEID0gNCxcblxuICAvKipcbiAgICogVGhlIHRyYW5zaXRpb24gd2FzIGlnbm9yZWRcbiAgICpcbiAgICogVGhlIHRyYW5zaXRpb24gd2FzIGlnbm9yZWQgYmVjYXVzZSBpdCB3b3VsZCBoYXZlIG5vIGVmZmVjdC5cbiAgICpcbiAgICogRWl0aGVyOlxuICAgKlxuICAgKiAtIFRoZSB0cmFuc2l0aW9uIGlzIHRhcmdldGluZyB0aGUgY3VycmVudCBzdGF0ZSBhbmQgcGFyYW1ldGVyIHZhbHVlc1xuICAgKiAtIFRoZSB0cmFuc2l0aW9uIGlzIHRhcmdldGluZyB0aGUgc2FtZSBzdGF0ZSBhbmQgcGFyYW1ldGVyIHZhbHVlcyBhcyB0aGUgY3VycmVudGx5IHJ1bm5pbmcgdHJhbnNpdGlvbi5cbiAgICovXG4gIElHTk9SRUQgPSA1LFxuXG4gIC8qKlxuICAgKiBUaGUgdHJhbnNpdGlvbiBlcnJvcmVkLlxuICAgKlxuICAgKiBUaGlzIGdlbmVyYWxseSBtZWFucyBhIGhvb2sgdGhyZXcgYW4gZXJyb3Igb3IgcmV0dXJuZWQgYSByZWplY3RlZCBwcm9taXNlXG4gICAqL1xuICBFUlJPUiA9IDYsXG59XG5cbmV4cG9ydCB7IFJlamVjdFR5cGUgfTtcblxuLyoqIEBoaWRkZW4gKi9cbmxldCBpZCA9IDA7XG5cbmV4cG9ydCBjbGFzcyBSZWplY3Rpb24ge1xuICAvKiogQGhpZGRlbiAqL1xuICAkaWQgPSBpZCsrO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgdGhlIHJlamVjdGlvbi5cbiAgICpcbiAgICogVGhpcyB2YWx1ZSBpcyBhbiBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSB0eXBlIG9mIHRyYW5zaXRpb24gcmVqZWN0aW9uLlxuICAgKiBJZiB1c2luZyBUeXBlc2NyaXB0LCB0aGlzIGlzIGEgVHlwZXNjcmlwdCBlbnVtLlxuICAgKlxuICAgKiAtIFtbUmVqZWN0VHlwZS5TVVBFUlNFREVEXV0gKGAyYClcbiAgICogLSBbW1JlamVjdFR5cGUuQUJPUlRFRF1dIChgM2ApXG4gICAqIC0gW1tSZWplY3RUeXBlLklOVkFMSURdXSAoYDRgKVxuICAgKiAtIFtbUmVqZWN0VHlwZS5JR05PUkVEXV0gKGA1YClcbiAgICogLSBbW1JlamVjdFR5cGUuRVJST1JdXSAoYDZgKVxuICAgKlxuICAgKi9cbiAgdHlwZTogUmVqZWN0VHlwZTtcblxuICAvKipcbiAgICogQSBtZXNzYWdlIGRlc2NyaWJpbmcgdGhlIHJlamVjdGlvblxuICAgKi9cbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIGRldGFpbCBvYmplY3RcbiAgICpcbiAgICogVGhpcyB2YWx1ZSB2YXJpZXMgYmFzZWQgb24gdGhlIG1lY2hhbmlzbSBmb3IgcmVqZWN0aW5nIHRoZSB0cmFuc2l0aW9uLlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgYW4gZXJyb3Igd2FzIHRocm93biBmcm9tIGEgaG9vaywgdGhlIGBkZXRhaWxgIHdpbGwgYmUgdGhlIGBFcnJvcmAgb2JqZWN0LlxuICAgKiBJZiBhIGhvb2sgcmV0dXJuZWQgYSByZWplY3RlZCBwcm9taXNlLCB0aGUgYGRldGFpbGAgd2lsbCBiZSB0aGUgcmVqZWN0ZWQgdmFsdWUuXG4gICAqL1xuICBkZXRhaWw6IGFueTtcblxuICAvKipcbiAgICogSW5kaWNhdGVzIGlmIHRoZSB0cmFuc2l0aW9uIHdhcyByZWRpcmVjdGVkLlxuICAgKlxuICAgKiBXaGVuIGEgdHJhbnNpdGlvbiBpcyByZWRpcmVjdGVkLCB0aGUgcmVqZWN0aW9uIFtbdHlwZV1dIHdpbGwgYmUgW1tSZWplY3RUeXBlLlNVUEVSU0VERURdXSBhbmQgdGhpcyBmbGFnIHdpbGwgYmUgdHJ1ZS5cbiAgICovXG4gIHJlZGlyZWN0ZWQ6IGJvb2xlYW47XG5cbiAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqIGlzIGEgcmVqZWN0ZWQgcHJvbWlzZSBjcmVhdGVkIGZyb20gdGhlIGBhc1Byb21pc2VgIGZhY3RvcnkgKi9cbiAgc3RhdGljIGlzUmVqZWN0aW9uUHJvbWlzZShvYmo6IGFueSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBvYmogJiYgdHlwZW9mIG9iai50aGVuID09PSAnZnVuY3Rpb24nICYmIGlzKFJlamVjdGlvbikob2JqLl90cmFuc2l0aW9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIGEgUmVqZWN0aW9uIGR1ZSB0byB0cmFuc2l0aW9uIHN1cGVyc2VkZWQgKi9cbiAgc3RhdGljIHN1cGVyc2VkZWQoZGV0YWlsPzogYW55LCBvcHRpb25zPzogYW55KTogUmVqZWN0aW9uIHtcbiAgICBjb25zdCBtZXNzYWdlID0gJ1RoZSB0cmFuc2l0aW9uIGhhcyBiZWVuIHN1cGVyc2VkZWQgYnkgYSBkaWZmZXJlbnQgdHJhbnNpdGlvbic7XG4gICAgY29uc3QgcmVqZWN0aW9uID0gbmV3IFJlamVjdGlvbihSZWplY3RUeXBlLlNVUEVSU0VERUQsIG1lc3NhZ2UsIGRldGFpbCk7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWRpcmVjdGVkKSB7XG4gICAgICByZWplY3Rpb24ucmVkaXJlY3RlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiByZWplY3Rpb247XG4gIH1cblxuICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gcmVkaXJlY3RlZCB0cmFuc2l0aW9uICovXG4gIHN0YXRpYyByZWRpcmVjdGVkKGRldGFpbD86IGFueSk6IFJlamVjdGlvbiB7XG4gICAgcmV0dXJuIFJlamVjdGlvbi5zdXBlcnNlZGVkKGRldGFpbCwgeyByZWRpcmVjdGVkOiB0cnVlIH0pO1xuICB9XG5cbiAgLyoqIFJldHVybnMgYSBSZWplY3Rpb24gZHVlIHRvIGludmFsaWQgdHJhbnNpdGlvbiAqL1xuICBzdGF0aWMgaW52YWxpZChkZXRhaWw/OiBhbnkpOiBSZWplY3Rpb24ge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnVGhpcyB0cmFuc2l0aW9uIGlzIGludmFsaWQnO1xuICAgIHJldHVybiBuZXcgUmVqZWN0aW9uKFJlamVjdFR5cGUuSU5WQUxJRCwgbWVzc2FnZSwgZGV0YWlsKTtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIGEgUmVqZWN0aW9uIGR1ZSB0byBpZ25vcmVkIHRyYW5zaXRpb24gKi9cbiAgc3RhdGljIGlnbm9yZWQoZGV0YWlsPzogYW55KTogUmVqZWN0aW9uIHtcbiAgICBjb25zdCBtZXNzYWdlID0gJ1RoZSB0cmFuc2l0aW9uIHdhcyBpZ25vcmVkJztcbiAgICByZXR1cm4gbmV3IFJlamVjdGlvbihSZWplY3RUeXBlLklHTk9SRUQsIG1lc3NhZ2UsIGRldGFpbCk7XG4gIH1cblxuICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gYWJvcnRlZCB0cmFuc2l0aW9uICovXG4gIHN0YXRpYyBhYm9ydGVkKGRldGFpbD86IGFueSk6IFJlamVjdGlvbiB7XG4gICAgY29uc3QgbWVzc2FnZSA9ICdUaGUgdHJhbnNpdGlvbiBoYXMgYmVlbiBhYm9ydGVkJztcbiAgICByZXR1cm4gbmV3IFJlamVjdGlvbihSZWplY3RUeXBlLkFCT1JURUQsIG1lc3NhZ2UsIGRldGFpbCk7XG4gIH1cblxuICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gYWJvcnRlZCB0cmFuc2l0aW9uICovXG4gIHN0YXRpYyBlcnJvcmVkKGRldGFpbD86IGFueSk6IFJlamVjdGlvbiB7XG4gICAgY29uc3QgbWVzc2FnZSA9ICdUaGUgdHJhbnNpdGlvbiBlcnJvcmVkJztcbiAgICByZXR1cm4gbmV3IFJlamVjdGlvbihSZWplY3RUeXBlLkVSUk9SLCBtZXNzYWdlLCBkZXRhaWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBSZWplY3Rpb25cbiAgICpcbiAgICogTm9ybWFsaXplcyBhIHZhbHVlIGFzIGEgUmVqZWN0aW9uLlxuICAgKiBJZiB0aGUgdmFsdWUgaXMgYWxyZWFkeSBhIFJlamVjdGlvbiwgcmV0dXJucyBpdC5cbiAgICogT3RoZXJ3aXNlLCB3cmFwcyBhbmQgcmV0dXJucyB0aGUgdmFsdWUgYXMgYSBSZWplY3Rpb24gKFJlamVjdGlvbiB0eXBlOiBFUlJPUikuXG4gICAqXG4gICAqIEByZXR1cm5zIGBkZXRhaWxgIGlmIGl0IGlzIGFscmVhZHkgYSBgUmVqZWN0aW9uYCwgZWxzZSByZXR1cm5zIGFuIEVSUk9SIFJlamVjdGlvbi5cbiAgICovXG4gIHN0YXRpYyBub3JtYWxpemUoZGV0YWlsPzogUmVqZWN0aW9uIHwgRXJyb3IgfCBhbnkpOiBSZWplY3Rpb24ge1xuICAgIHJldHVybiBpcyhSZWplY3Rpb24pKGRldGFpbCkgPyBkZXRhaWwgOiBSZWplY3Rpb24uZXJyb3JlZChkZXRhaWwpO1xuICB9XG5cbiAgY29uc3RydWN0b3IodHlwZTogbnVtYmVyLCBtZXNzYWdlPzogc3RyaW5nLCBkZXRhaWw/OiBhbnkpIHtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy5kZXRhaWwgPSBkZXRhaWw7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICBjb25zdCBkZXRhaWxTdHJpbmcgPSAoZDogYW55KSA9PiAoZCAmJiBkLnRvU3RyaW5nICE9PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nID8gZC50b1N0cmluZygpIDogc3RyaW5naWZ5KGQpKTtcbiAgICBjb25zdCBkZXRhaWwgPSBkZXRhaWxTdHJpbmcodGhpcy5kZXRhaWwpO1xuICAgIGNvbnN0IHsgJGlkLCB0eXBlLCBtZXNzYWdlIH0gPSB0aGlzO1xuICAgIHJldHVybiBgVHJhbnNpdGlvbiBSZWplY3Rpb24oJGlkOiAkeyRpZH0gdHlwZTogJHt0eXBlfSwgbWVzc2FnZTogJHttZXNzYWdlfSwgZGV0YWlsOiAke2RldGFpbH0pYDtcbiAgfVxuXG4gIHRvUHJvbWlzZSgpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBleHRlbmQoc2lsZW50UmVqZWN0aW9uKHRoaXMpLCB7IF90cmFuc2l0aW9uUmVqZWN0aW9uOiB0aGlzIH0pO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvdHJhbnNpdGlvbi9yZWplY3RGYWN0b3J5LnRzIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB0cmFuc2l0aW9uXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBTdGF0ZURlY2xhcmF0aW9uIH0gZnJvbSAnLi4vc3RhdGUvaW50ZXJmYWNlJztcbmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuXG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi90cmFuc2l0aW9uJztcbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi4vc3RhdGUvc3RhdGVPYmplY3QnO1xuaW1wb3J0IHsgUGF0aE5vZGUgfSBmcm9tICcuLi9wYXRoL3BhdGhOb2RlJztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvdGFyZ2V0U3RhdGUnO1xuaW1wb3J0IHsgUmVnaXN0ZXJlZEhvb2sgfSBmcm9tICcuL2hvb2tSZWdpc3RyeSc7XG5cbi8qKlxuICogVGhlIFRyYW5zaXRpb25PcHRpb25zIG9iamVjdCBjYW4gYmUgdXNlZCB0byBjaGFuZ2UgdGhlIGJlaGF2aW9yIG9mIGEgdHJhbnNpdGlvbi5cbiAqXG4gKiBJdCBpcyBwYXNzZWQgYXMgdGhlIHRoaXJkIGFyZ3VtZW50IHRvIFtbU3RhdGVTZXJ2aWNlLmdvXV0sIFtbU3RhdGVTZXJ2aWNlLnRyYW5zaXRpb25Ub11dLlxuICogSXQgY2FuIGFsc28gYmUgdXNlZCB3aXRoIGEgYHVpU3JlZmAuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNpdGlvbk9wdGlvbnMge1xuICAvKipcbiAgICogVGhpcyBvcHRpb24gY2hhbmdlcyBob3cgdGhlIFRyYW5zaXRpb24gaW50ZXJhY3RzIHdpdGggdGhlIGJyb3dzZXIncyBsb2NhdGlvbiBiYXIgKFVSTCkuXG4gICAqXG4gICAqIC0gSWYgYHRydWVgLCBpdCB3aWxsIHVwZGF0ZSB0aGUgdXJsIGluIHRoZSBsb2NhdGlvbiBiYXIuXG4gICAqIC0gSWYgYGZhbHNlYCwgaXQgd2lsbCBub3QgdXBkYXRlIHRoZSB1cmwgaW4gdGhlIGxvY2F0aW9uIGJhci5cbiAgICogLSBJZiBpdCBpcyB0aGUgc3RyaW5nIGBcInJlcGxhY2VcImAsIGl0IHdpbGwgdXBkYXRlIHRoZSB1cmwgYW5kIGFsc28gcmVwbGFjZSB0aGUgbGFzdCBoaXN0b3J5IHJlY29yZC5cbiAgICpcbiAgICogQGRlZmF1bHQgYHRydWVgXG4gICAqL1xuICBsb2NhdGlvbj86IGJvb2xlYW4gfCBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFdoZW4gdHJhbnNpdGlvbmluZyB0byByZWxhdGl2ZSBwYXRoIChlLmcgJ2BeYCcpLCB0aGlzIG9wdGlvbiBkZWZpbmVzIHdoaWNoIHN0YXRlIHRvIGJlIHJlbGF0aXZlIGZyb20uXG4gICAqIEBkZWZhdWx0IGAkc3RhdGUuY3VycmVudGBcbiAgICovXG4gIHJlbGF0aXZlPzogc3RyaW5nIHwgU3RhdGVEZWNsYXJhdGlvbiB8IFN0YXRlT2JqZWN0O1xuXG4gIC8qKlxuICAgKiBUaGlzIG9wdGlvbiBzZXRzIHdoZXRoZXIgb3Igbm90IHRoZSB0cmFuc2l0aW9uJ3MgcGFyYW1ldGVyIHZhbHVlcyBzaG91bGQgYmUgaW5oZXJpdGVkIGZyb21cbiAgICogdGhlIGN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlcy5cbiAgICpcbiAgICogLSBJZiBgdHJ1ZWAsIGl0IHdpbGwgaW5oZXJpdCBwYXJhbWV0ZXIgdmFsdWVzIGZyb20gdGhlIGN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlcy5cbiAgICogLSBJZiBgZmFsc2VgLCBvbmx5IHRoZSBwYXJhbWV0ZXJzIHdoaWNoIGFyZSBwcm92aWRlZCB0byBgdHJhbnNpdGlvblRvYCB3aWxsIGJlIHVzZWQuXG4gICAqXG4gICAqIEBkZWZhdWx0IGBmYWxzZWBcbiAgICovXG4gIGluaGVyaXQ/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgbm90aWZ5PzogYm9vbGVhbjtcblxuICAvKipcbiAgICogVGhpcyBvcHRpb24gbWF5IGJlIHVzZWQgdG8gZm9yY2Ugc3RhdGVzIHdoaWNoIGFyZSBjdXJyZW50bHkgYWN0aXZlIHRvIHJlbG9hZC5cbiAgICpcbiAgICogRHVyaW5nIGEgbm9ybWFsIHRyYW5zaXRpb24sIGEgc3RhdGUgaXMgXCJyZXRhaW5lZFwiIGlmOlxuICAgKiAtIEl0IHdhcyBwcmV2aW91c2x5IGFjdGl2ZVxuICAgKiAtIFRoZSBzdGF0ZSdzIHBhcmFtZXRlciB2YWx1ZXMgaGF2ZSBub3QgY2hhbmdlZFxuICAgKiAtIEFsbCB0aGUgcGFyZW50IHN0YXRlcycgcGFyYW1ldGVyIHZhbHVlcyBoYXZlIG5vdCBjaGFuZ2VkXG4gICAqXG4gICAqIEZvcmNpbmcgYSByZWxvYWQgb2YgYSBzdGF0ZSB3aWxsIGNhdXNlIGl0IHRvIGJlIGV4aXRlZCBhbmQgZW50ZXJlZCwgd2hpY2ggd2lsbDpcbiAgICogLSBSZWZldGNoIHRoYXQgc3RhdGUncyByZXNvbHZlIGRhdGFcbiAgICogLSBFeGl0IHRoZSBzdGF0ZSAob25FeGl0IGhvb2spXG4gICAqIC0gUmUtZW50ZXIgdGhlIHN0YXRlIChvbkVudGVyIGhvb2spXG4gICAqIC0gUmUtcmVuZGVyIHRoZSB2aWV3cyAoY29udHJvbGxlcnMgYW5kIHRlbXBsYXRlcylcbiAgICpcbiAgICogLSBXaGVuIGB0cnVlYCwgdGhlIGRlc3RpbmF0aW9uIHN0YXRlIChhbmQgYWxsIHBhcmVudCBzdGF0ZXMpIHdpbGwgYmUgcmVsb2FkZWQuXG4gICAqIC0gV2hlbiBpdCBpcyBhIHN0cmluZyBhbmQgaXMgdGhlIG5hbWUgb2YgYSBzdGF0ZSwgb3Igd2hlbiBpdCBpcyBhIFN0YXRlIG9iamVjdCxcbiAgICogICB0aGF0IHN0YXRlIGFuZCBhbnkgY2hpbGRyZW4gc3RhdGVzIHdpbGwgYmUgcmVsb2FkZWQuXG4gICAqXG4gICAqIEBkZWZhdWx0IGBmYWxzZWBcbiAgICovXG4gIHJlbG9hZD86IGJvb2xlYW4gfCBzdHJpbmcgfCBTdGF0ZURlY2xhcmF0aW9uIHwgU3RhdGVPYmplY3Q7XG4gIC8qKlxuICAgKiBZb3UgY2FuIGRlZmluZSB5b3VyIG93biBUcmFuc2l0aW9uIE9wdGlvbnMgaW5zaWRlIHRoaXMgcHJvcGVydHkgYW5kIHVzZSB0aGVtLCBlLmcuLCBmcm9tIGEgVHJhbnNpdGlvbiBIb29rXG4gICAqL1xuICBjdXN0b20/OiBhbnk7XG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgcmVsb2FkU3RhdGU/OiBTdGF0ZU9iamVjdDtcbiAgLyoqIEBpbnRlcm5hbGFwaVxuICAgKiBJZiB0aGlzIHRyYW5zaXRpb24gaXMgYSByZWRpcmVjdCwgdGhpcyBwcm9wZXJ0eSBzaG91bGQgYmUgdGhlIG9yaWdpbmFsIFRyYW5zaXRpb24gKHdoaWNoIHdhcyByZWRpcmVjdGVkIHRvIHRoaXMgb25lKVxuICAgKi9cbiAgcmVkaXJlY3RlZEZyb20/OiBUcmFuc2l0aW9uO1xuICAvKiogQGludGVybmFsYXBpICovXG4gIGN1cnJlbnQ/OiAoKSA9PiBUcmFuc2l0aW9uO1xuICAvKiogQGludGVybmFsYXBpICovXG4gIHNvdXJjZT86ICdzcmVmJyB8ICd1cmwnIHwgJ3JlZGlyZWN0JyB8ICdvdGhlcndpc2UnIHwgJ3Vua25vd24nO1xufVxuXG4vKiogQGludGVybmFsYXBpICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zaXRpb25Ib29rT3B0aW9ucyB7XG4gIGN1cnJlbnQ/OiAoKSA9PiBUcmFuc2l0aW9uOyAvLyBwYXRoP1xuICB0cmFuc2l0aW9uPzogVHJhbnNpdGlvbjtcbiAgaG9va1R5cGU/OiBzdHJpbmc7XG4gIHRhcmdldD86IGFueTtcbiAgdHJhY2VEYXRhPzogYW55O1xuICBiaW5kPzogYW55O1xuICBzdGF0ZUhvb2s/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRyZWVDaGFuZ2VzIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBQYXRocyB0aGF0IGFyZSBpbnZvbHZlZCBpbiBhIFRyYW5zaXRpb24uXG4gKlxuICogR2V0IGEgVHJlZUNoYW5nZXMgb2JqZWN0IHVzaW5nIFtbVHJhbnNpdGlvbi50cmVlQ2hhbmdlc11dXG4gKlxuICogQSBVSS1Sb3V0ZXIgVHJhbnNpdGlvbiBpcyBmcm9tIG9uZSBQYXRoIGluIGEgU3RhdGUgVHJlZSB0byBhbm90aGVyIFBhdGguICBGb3IgYSBnaXZlbiBUcmFuc2l0aW9uLFxuICogdGhpcyBvYmplY3Qgc3RvcmVzIHRoZSBcInRvXCIgYW5kIFwiZnJvbVwiIHBhdGhzLCBhcyB3ZWxsIGFzIHN1YnNldHMgb2YgdGhvc2U6IHRoZSBcInJldGFpbmVkXCIsXG4gKiBcImV4aXRpbmdcIiBhbmQgXCJlbnRlcmluZ1wiIHBhdGhzLlxuICpcbiAqIEVhY2ggcGF0aCBpbiBUcmVlQ2hhbmdlcyBpcyBhbiBhcnJheSBvZiBbW1BhdGhOb2RlXV0gb2JqZWN0cy4gRWFjaCBQYXRoTm9kZSBpbiB0aGUgYXJyYXkgY29ycmVzcG9uZHMgdG8gYSBwb3J0aW9uXG4gKiBvZiBhIG5lc3RlZCBzdGF0ZS5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgaWYgeW91IGhhZCBhIG5lc3RlZCBzdGF0ZSBuYW1lZCBgZm9vLmJhci5iYXpgLCBpdCB3b3VsZCBoYXZlIHRocmVlXG4gKiBwb3J0aW9ucywgYGZvbywgYmFyLCBiYXpgLiAgSWYgeW91IHRyYW5zaXRpb25lZCAqKnRvKiogYGZvby5iYXIuYmF6YCBhbmQgaW5zcGVjdGVkIHRoZSBbW1RyZWVDaGFuZ2VzLnRvXV1cbiAqIFBhdGgsIHlvdSB3b3VsZCBmaW5kIGEgbm9kZSBpbiB0aGUgYXJyYXkgZm9yIGVhY2ggcG9ydGlvbjogYGZvb2AsIGBiYXJgLCBhbmQgYGJhemAuXG4gKlxuICogLS0tXG4gKlxuICogQHRvZG8gc2hvdyB2aXN1YWwgc3RhdGUgdHJlZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyZWVDaGFuZ2VzIHtcbiAgLyoqIEBub2RvYyAqL1xuICBba2V5OiBzdHJpbmddOiBQYXRoTm9kZVtdO1xuXG4gIC8qKiBUaGUgcGF0aCBvZiBub2RlcyBpbiB0aGUgc3RhdGUgdHJlZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGNvbWluZyAqZnJvbSogKi9cbiAgZnJvbTogUGF0aE5vZGVbXTtcblxuICAvKiogVGhlIHBhdGggb2Ygbm9kZXMgaW4gdGhlIHN0YXRlIHRyZWUgdGhhdCB0aGUgdHJhbnNpdGlvbiBpcyBnb2luZyAqdG8qICovXG4gIHRvOiBQYXRoTm9kZVtdO1xuXG4gIC8qKlxuICAgKiBUaGUgcGF0aCBvZiBhY3RpdmUgbm9kZXMgdGhhdCB0aGUgdHJhbnNpdGlvbiBpcyByZXRhaW5pbmcuXG4gICAqXG4gICAqIFRoZXNlIG5vZGVzIGFyZSBuZWl0aGVyIGV4aXRlZCwgbm9yIGVudGVyZWQuXG4gICAqIEJlZm9yZSBhbmQgYWZ0ZXIgdGhlIHRyYW5zaXRpb24gaXMgc3VjY2Vzc2Z1bCwgdGhlc2Ugbm9kZXMgYXJlIGFjdGl2ZS5cbiAgICovXG4gIHJldGFpbmVkOiBQYXRoTm9kZVtdO1xuXG4gIC8qKlxuICAgKiBUaGUgcGF0aCBvZiBhY3RpdmUgbm9kZXMgdGhhdCB0aGUgdHJhbnNpdGlvbiBpcyByZXRhaW5pbmcgd2l0aCB1cGRhdGVkIFwidG8gcGFyYW1zXCIgYXBwbGllZC5cbiAgICpcbiAgICogVGhlc2Ugbm9kZXMgYXJlIG5laXRoZXIgZXhpdGVkLCBub3IgZW50ZXJlZC5cbiAgICogQmVmb3JlIGFuZCBhZnRlciB0aGUgdHJhbnNpdGlvbiBpcyBzdWNjZXNzZnVsLCB0aGVzZSBub2RlcyBhcmUgYWN0aXZlLlxuICAgKlxuICAgKiBUaGlzIGlzIGEgc2hhbGxvdyBjb3B5IG9mIFtbcmV0YWluZWRdXSwgYnV0IHdpdGggbmV3IChkeW5hbWljKSBwYXJhbWV0ZXIgdmFsdWVzIGZyb20gW1t0b11dIGFwcGxpZWQuXG4gICAqL1xuICByZXRhaW5lZFdpdGhUb1BhcmFtczogUGF0aE5vZGVbXTtcblxuICAvKipcbiAgICogVGhlIHBhdGggb2YgcHJldmlvdXNseSBhY3RpdmUgbm9kZXMgdGhhdCB0aGUgdHJhbnNpdGlvbiBpcyBleGl0aW5nLlxuICAgKlxuICAgKiBBZnRlciB0aGUgVHJhbnNpdGlvbiBpcyBzdWNjZXNzZnVsLCB0aGVzZSBub2RlcyBhcmUgbm8gbG9uZ2VyIGFjdGl2ZS5cbiAgICpcbiAgICogTm90ZSB0aGF0IGEgc3RhdGUgdGhhdCBpcyBiZWluZyByZWxvYWRlZCAoZHVlIHRvIHBhcmFtZXRlciB2YWx1ZXMgY2hhbmdpbmcsIG9yIGByZWxvYWQ6IHRydWVgKSBtYXkgYmUgaW4gYm90aCB0aGVcbiAgICogYGV4aXRpbmdgIGFuZCBgZW50ZXJpbmdgIHBhdGhzLlxuICAgKi9cbiAgZXhpdGluZzogUGF0aE5vZGVbXTtcblxuICAvKipcbiAgICogVGhlIHBhdGggb2Ygbm9kZXMgdGhhdCB0aGUgdHJhbnNpdGlvbiBpcyBlbnRlcmluZy5cbiAgICpcbiAgICogQWZ0ZXIgdGhlIFRyYW5zaXRpb24gaXMgc3VjY2Vzc2Z1bCwgdGhlc2Ugbm9kZXMgd2lsbCBiZSBhY3RpdmUuXG4gICAqIEJlY2F1c2UgdGhleSBhcmUgZW50ZXJpbmcsIHRoZXkgaGF2ZSB0aGVpciByZXNvbHZlcyBmZXRjaGVkLCBgb25FbnRlcmAgaG9va3MgcnVuLCBhbmQgdGhlaXIgdmlld3NcbiAgICogKGNvbXBvbmVudChzKSBvciBjb250cm9sbGVyKHMpK3RlbXBsYXRlKHMpKSByZWZyZXNoZWQuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBhIHN0YXRlIHRoYXQgaXMgcmVsb2FkZWQgKGR1ZSB0byBwYXJhbWV0ZXIgdmFsdWVzIGNoYW5naW5nLCBvciBgcmVsb2FkOiB0cnVlYCkgbWF5IGJlIGluIGJvdGggdGhlXG4gICAqIGBleGl0aW5nYCBhbmQgYGVudGVyaW5nYCBwYXRocy5cbiAgICovXG4gIGVudGVyaW5nOiBQYXRoTm9kZVtdO1xufVxuXG5leHBvcnQgdHlwZSBJSG9va1JlZ2lzdHJhdGlvbiA9IChcbiAgbWF0Y2hDcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsXG4gIGNhbGxiYWNrOiBIb29rRm4sXG4gIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyxcbikgPT4gRnVuY3Rpb247XG5cbi8qKlxuICogVGhlIHNpZ25hdHVyZSBmb3IgVHJhbnNpdGlvbiBIb29rcy5cbiAqXG4gKiBUcmFuc2l0aW9uIGhvb2tzIGFyZSBjYWxsYmFjayBmdW5jdGlvbnMgdGhhdCBob29rIGludG8gdGhlIGxpZmVjeWNsZSBvZiB0cmFuc2l0aW9ucy5cbiAqIEFzIGEgdHJhbnNpdGlvbiBydW5zLCBpdCByZWFjaGVzIGNlcnRhaW4gbGlmZWN5Y2xlIGV2ZW50cy5cbiAqIEFzIGVhY2ggZXZlbnQgb2NjdXJzLCB0aGUgaG9va3Mgd2hpY2ggYXJlIHJlZ2lzdGVyZWQgZm9yIHRoZSBldmVudCBhcmUgY2FsbGVkIChpbiBwcmlvcml0eSBvcmRlcikuXG4gKlxuICogQSB0cmFuc2l0aW9uIGhvb2sgbWF5IGFsdGVyIGEgVHJhbnNpdGlvbiBieSByZXR1cm5pbmcgYSBbW0hvb2tSZXN1bHRdXS5cbiAqXG4gKiAjIyMjIFNlZTpcbiAqXG4gKiAtIFtbSUhvb2tSZWdpc3RyeS5vbkJlZm9yZV1dXG4gKiAtIFtbSUhvb2tSZWdpc3RyeS5vblN0YXJ0XV1cbiAqIC0gW1tJSG9va1JlZ2lzdHJ5Lm9uRmluaXNoXV1cbiAqIC0gW1tJSG9va1JlZ2lzdHJ5Lm9uU3VjY2Vzc11dXG4gKiAtIFtbSUhvb2tSZWdpc3RyeS5vbkVycm9yXV1cbiAqXG4gKiBAcGFyYW0gdHJhbnNpdGlvbiB0aGUgY3VycmVudCBbW1RyYW5zaXRpb25dXVxuICogQHBhcmFtIGluamVjdG9yIChmb3IgbmcxIG9yIG5nMiBvbmx5KSB0aGUgaW5qZWN0b3Igc2VydmljZVxuICpcbiAqIEByZXR1cm5zIGEgW1tIb29rUmVzdWx0XV0gd2hpY2ggbWF5IGFsdGVyIHRoZSB0cmFuc2l0aW9uXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zaXRpb25Ib29rRm4ge1xuICAodHJhbnNpdGlvbjogVHJhbnNpdGlvbik6IEhvb2tSZXN1bHQ7XG59XG5cbi8qKlxuICogVGhlIHNpZ25hdHVyZSBmb3IgVHJhbnNpdGlvbiBTdGF0ZSBIb29rcy5cbiAqXG4gKiBBIGZ1bmN0aW9uIHdoaWNoIGhvb2tzIGludG8gYSBsaWZlY3ljbGUgZXZlbnQgZm9yIGEgc3BlY2lmaWMgc3RhdGUuXG4gKlxuICogVHJhbnNpdGlvbiBTdGF0ZSBIb29rcyBhcmUgY2FsbGJhY2sgZnVuY3Rpb25zIHRoYXQgaG9vayBpbnRvIHRoZSBsaWZlY3ljbGUgZXZlbnRzIG9mIHNwZWNpZmljIHN0YXRlcyBkdXJpbmcgYSB0cmFuc2l0aW9uLlxuICogQXMgYSB0cmFuc2l0aW9uIHJ1bnMsIGl0IG1heSBleGl0IHNvbWUgc3RhdGVzLCByZXRhaW4gKGtlZXApIHN0YXRlcywgYW5kIGVudGVyIHN0YXRlcy5cbiAqIEFzIGVhY2ggbGlmZWN5Y2xlIGV2ZW50IG9jY3VycywgdGhlIGhvb2tzIHdoaWNoIGFyZSByZWdpc3RlcmVkIGZvciB0aGUgZXZlbnQgYW5kIHRoYXQgc3RhdGUgYXJlIGNhbGxlZCAoaW4gcHJpb3JpdHkgb3JkZXIpLlxuICpcbiAqICMjIyMgU2VlOlxuICpcbiAqIC0gW1tJSG9va1JlZ2lzdHJ5Lm9uRXhpdF1dXG4gKiAtIFtbSUhvb2tSZWdpc3RyeS5vblJldGFpbl1dXG4gKiAtIFtbSUhvb2tSZWdpc3RyeS5vbkVudGVyXV1cbiAqXG4gKiBAcGFyYW0gdHJhbnNpdGlvbiB0aGUgY3VycmVudCBbW1RyYW5zaXRpb25dXVxuICogQHBhcmFtIHN0YXRlIHRoZSBbW1N0YXRlT2JqZWN0XV0gdGhhdCB0aGUgaG9vayBpcyBib3VuZCB0b1xuICogQHBhcmFtIGluamVjdG9yIChmb3IgbmcxIG9yIG5nMiBvbmx5KSB0aGUgaW5qZWN0b3Igc2VydmljZVxuICpcbiAqIEByZXR1cm5zIGEgW1tIb29rUmVzdWx0XV0gd2hpY2ggbWF5IGFsdGVyIHRoZSB0cmFuc2l0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNpdGlvblN0YXRlSG9va0ZuIHtcbiAgKHRyYW5zaXRpb246IFRyYW5zaXRpb24sIHN0YXRlOiBTdGF0ZURlY2xhcmF0aW9uKTogSG9va1Jlc3VsdDtcbn1cblxuLyoqXG4gKiBUaGUgc2lnbmF0dXJlIGZvciBUcmFuc2l0aW9uIG9uQ3JlYXRlIEhvb2tzLlxuICpcbiAqIFRyYW5zaXRpb24gb25DcmVhdGUgSG9va3MgYXJlIGNhbGxiYWNrcyB0aGF0IGFsbG93IGN1c3RvbWl6YXRpb24gb3IgcHJlcHJvY2Vzc2luZyBvZlxuICogYSBUcmFuc2l0aW9uIGJlZm9yZSBpdCBpcyByZXR1cm5lZCBmcm9tIFtbVHJhbnNpdGlvblNlcnZpY2UuY3JlYXRlXV1cbiAqXG4gKiBAcGFyYW0gdHJhbnNpdGlvbiB0aGUgW1tUcmFuc2l0aW9uXV0gdGhhdCB3YXMganVzdCBjcmVhdGVkXG4gKiBAcmV0dXJuIGEgW1tUcmFuc2l0aW9uXV0gd2hpY2ggd2lsbCB0aGVuIGJlIHJldHVybmVkIGZyb20gW1tUcmFuc2l0aW9uU2VydmljZS5jcmVhdGVdXVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zaXRpb25DcmVhdGVIb29rRm4ge1xuICAodHJhbnNpdGlvbjogVHJhbnNpdGlvbik6IHZvaWQ7XG59XG5cbmV4cG9ydCB0eXBlIEhvb2tGbiA9IFRyYW5zaXRpb25Ib29rRm4gfCBUcmFuc2l0aW9uU3RhdGVIb29rRm4gfCBUcmFuc2l0aW9uQ3JlYXRlSG9va0ZuO1xuXG4vKipcbiAqIFRoZSByZXR1cm4gdmFsdWUgb2YgYSBbW1RyYW5zaXRpb25Ib29rRm5dXSBvciBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dXG4gKlxuICogV2hlbiByZXR1cm5lZCBmcm9tIGEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gb3IgW1tUcmFuc2l0aW9uU3RhdGVIb29rRm5dXSwgdGhlc2UgdmFsdWVzIGFsdGVyIHRoZSBydW5uaW5nIFtbVHJhbnNpdGlvbl1dOlxuICpcbiAqIC0gYGZhbHNlYDogdGhlIHRyYW5zaXRpb24gd2lsbCBiZSBjYW5jZWxsZWQuXG4gKiAtIFtbVGFyZ2V0U3RhdGVdXTogdGhlIHRyYW5zaXRpb24gd2lsbCBiZSByZWRpcmVjdGVkIHRvIHRoZSBuZXcgdGFyZ2V0IHN0YXRlIChzZWU6IFtbU3RhdGVTZXJ2aWNlLnRhcmdldF1dKVxuICogLSBgUHJvbWlzZWA6IHRoZSB0cmFuc2l0aW9uIHdpbGwgd2FpdCBmb3IgdGhlIHByb21pc2UgdG8gcmVzb2x2ZSBvciByZWplY3RcbiAqICAgIC0gSWYgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgKG9yIHJlc29sdmVzIHRvIGBmYWxzZWApLCB0aGUgdHJhbnNpdGlvbiB3aWxsIGJlIGNhbmNlbGxlZFxuICogICAgLSBJZiB0aGUgcHJvbWlzZSByZXNvbHZlcyB0byBhIFtbVGFyZ2V0U3RhdGVdXSwgdGhlIHRyYW5zaXRpb24gd2lsbCBiZSByZWRpcmVjdGVkXG4gKiAgICAtIElmIHRoZSBwcm9taXNlIHJlc29sdmVzIHRvIGFueXRoaW5nIGVsc2UsIHRoZSB0cmFuc2l0aW9uIHdpbGwgcmVzdW1lXG4gKiAtIEFueXRoaW5nIGVsc2U6IHRoZSB0cmFuc2l0aW9uIHdpbGwgcmVzdW1lXG4gKi9cbmV4cG9ydCB0eXBlIEhvb2tSZXN1bHQgPSBib29sZWFuIHwgVGFyZ2V0U3RhdGUgfCB2b2lkIHwgUHJvbWlzZTxib29sZWFuIHwgVGFyZ2V0U3RhdGUgfCB2b2lkPjtcblxuLyoqXG4gKiBUaGVzZSBvcHRpb25zIG1heSBiZSBwcm92aWRlZCB3aGVuIHJlZ2lzdGVyaW5nIGEgVHJhbnNpdGlvbiBIb29rIChzdWNoIGFzIGBvblN0YXJ0YClcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBIb29rUmVnT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwcmlvcml0eSBvZiB0aGUgcmVnaXN0ZXJlZCBob29rXG4gICAqXG4gICAqIEhvb2tzIG9mIHRoZSBzYW1lIHR5cGUgKG9uQmVmb3JlLCBvblN0YXJ0LCBldGMpIGFyZSBpbnZva2VkIGluIHByaW9yaXR5IG9yZGVyLiAgQSBob29rIHdpdGggYSBoaWdoZXIgcHJpb3JpdHlcbiAgICogaXMgaW52b2tlZCBiZWZvcmUgYSBob29rIHdpdGggYSBsb3dlciBwcmlvcml0eS5cbiAgICpcbiAgICogVGhlIGRlZmF1bHQgaG9vayBwcmlvcml0eSBpcyAwXG4gICAqL1xuICBwcmlvcml0eT86IG51bWJlcjtcblxuICAvKipcbiAgICogU3BlY2lmaWVzIHdoYXQgYHRoaXNgIGlzIGJvdW5kIHRvIGR1cmluZyBob29rIGludm9jYXRpb24uXG4gICAqL1xuICBiaW5kPzogYW55O1xuXG4gIC8qKlxuICAgKiBMaW1pdHMgdGhlIG51bWJlciBvZiB0aW1lcyB0aGF0IHRoZSBob29rIHdpbGwgYmUgaW52b2tlZC5cbiAgICogT25jZSB0aGUgaG9vayBoYXMgYmVlbiBpbnZva2VkIHRoaXMgbWFueSB0aW1lcywgaXQgaXMgYXV0b21hdGljYWxseSBkZXJlZ2lzdGVyZWQuXG4gICAqL1xuICBpbnZva2VMaW1pdD86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBUaGlzIGludGVyZmFjZSBzcGVjaWZpZXMgdGhlIGFwaSBmb3IgcmVnaXN0ZXJpbmcgVHJhbnNpdGlvbiBIb29rcy4gIEJvdGggdGhlXG4gKiBbW1RyYW5zaXRpb25TZXJ2aWNlXV0gYW5kIGFsc28gdGhlIFtbVHJhbnNpdGlvbl1dIG9iamVjdCBpdHNlbGYgaW1wbGVtZW50IHRoaXMgaW50ZXJmYWNlLlxuICogTm90ZTogdGhlIFRyYW5zaXRpb24gb2JqZWN0IG9ubHkgYWxsb3dzIGhvb2tzIHRvIGJlIHJlZ2lzdGVyZWQgYmVmb3JlIHRoZSBUcmFuc2l0aW9uIGlzIHN0YXJ0ZWQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUhvb2tSZWdpc3RyeSB7XG4gIC8qKiBAaGlkZGVuIHBsYWNlIHRvIHN0b3JlIHRoZSBob29rcyAqL1xuICBfcmVnaXN0ZXJlZEhvb2tzOiB7IFtrZXk6IHN0cmluZ106IFJlZ2lzdGVyZWRIb29rW10gfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgW1tUcmFuc2l0aW9uSG9va0ZuXV0sIGNhbGxlZCAqYmVmb3JlIGEgdHJhbnNpdGlvbiBzdGFydHMqLlxuICAgKlxuICAgKiBSZWdpc3RlcnMgYSB0cmFuc2l0aW9uIGxpZmVjeWNsZSBob29rLCB3aGljaCBpcyBpbnZva2VkIGJlZm9yZSBhIHRyYW5zaXRpb24gZXZlbiBiZWdpbnMuXG4gICAqIFRoaXMgaG9vayBjYW4gYmUgdXNlZnVsIHRvIGltcGxlbWVudCBsb2dpYyB3aGljaCBwcmV2ZW50cyBhIHRyYW5zaXRpb24gZnJvbSBldmVuIHN0YXJ0aW5nLCBzdWNoXG4gICAqIGFzIGF1dGhlbnRpY2F0aW9uLCByZWRpcmVjdGlvblxuICAgKlxuICAgKiBTZWUgW1tUcmFuc2l0aW9uSG9va0ZuXV0gZm9yIHRoZSBzaWduYXR1cmUgb2YgdGhlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBUaGUgW1tIb29rTWF0Y2hDcml0ZXJpYV1dIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBob29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cbiAgICogVG8gbWF0Y2ggYWxsIFRyYW5zaXRpb25zLCB1c2UgYW4gZW1wdHkgY3JpdGVyaWEgb2JqZWN0IGB7fWAuXG4gICAqXG4gICAqICMjIyBMaWZlY3ljbGVcbiAgICpcbiAgICogYG9uQmVmb3JlYCBob29rcyBhcmUgaW52b2tlZCAqYmVmb3JlIGEgVHJhbnNpdGlvbiBzdGFydHMqLlxuICAgKiBObyByZXNvbHZlcyBoYXZlIGJlZW4gZmV0Y2hlZCB5ZXQuXG4gICAqIEVhY2ggYG9uQmVmb3JlYCBob29rIGlzIGludm9rZWQgc3luY2hyb25vdXNseSwgaW4gdGhlIHNhbWUgY2FsbCBzdGFjayBhcyBbW1N0YXRlU2VydmljZS50cmFuc2l0aW9uVG9dXS5cbiAgICogVGhlIHJlZ2lzdGVyZWQgYG9uQmVmb3JlYCBob29rcyBhcmUgaW52b2tlZCBpbiBwcmlvcml0eSBvcmRlci5cbiAgICpcbiAgICogTm90ZTogZHVyaW5nIHRoZSBgb25CZWZvcmVgIHBoYXNlLCBhZGRpdGlvbmFsIGhvb2tzIGNhbiBiZSBhZGRlZCB0byB0aGUgc3BlY2lmaWMgW1tUcmFuc2l0aW9uXV0gaW5zdGFuY2UuXG4gICAqIFRoZXNlIFwib24tdGhlLWZseVwiIGhvb2tzIG9ubHkgYWZmZWN0IHRoZSBjdXJyZW50bHkgcnVubmluZyB0cmFuc2l0aW9uLi5cbiAgICpcbiAgICogIyMjIFJldHVybiB2YWx1ZVxuICAgKlxuICAgKiBUaGUgaG9vaydzIHJldHVybiB2YWx1ZSBjYW4gYmUgdXNlZCB0byBwYXVzZSwgY2FuY2VsLCBvciByZWRpcmVjdCB0aGUgY3VycmVudCBUcmFuc2l0aW9uLlxuICAgKiBTZWUgW1tIb29rUmVzdWx0XV0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqXG4gICAqIElmIGFueSBob29rIG1vZGlmaWVzIHRoZSB0cmFuc2l0aW9uICpzeW5jaHJvbm91c2x5KiAoYnkgdGhyb3dpbmcsIHJldHVybmluZyBgZmFsc2VgLCBvciByZXR1cm5pbmdcbiAgICogYSBbW1RhcmdldFN0YXRlXV0pLCB0aGUgcmVtYWluZGVyIG9mIHRoZSBob29rcyBhcmUgc2tpcHBlZC5cbiAgICogSWYgYSBob29rIHJldHVybnMgYSBwcm9taXNlLCB0aGUgcmVtYWluZGVyIG9mIHRoZSBgb25CZWZvcmVgIGhvb2tzIGFyZSBzdGlsbCBpbnZva2VkIHN5bmNocm9ub3VzbHkuXG4gICAqIEFsbCBwcm9taXNlcyBhcmUgcmVzb2x2ZWQsIGFuZCBwcm9jZXNzZWQgYXN5bmNocm9ub3VzbHkgYmVmb3JlIHRoZSBgb25TdGFydGAgcGhhc2Ugb2YgdGhlIFRyYW5zaXRpb24uXG4gICAqXG4gICAqICMjIyBFeGFtcGxlc1xuICAgKlxuICAgKiAjIyMjIERlZmF1bHQgU3Vic3RhdGVcbiAgICpcbiAgICogVGhpcyBleGFtcGxlIHJlZGlyZWN0cyBhbnkgdHJhbnNpdGlvbiBmcm9tICdob21lJyB0byAnaG9tZS5kYXNoYm9hcmQnLiAgVGhpcyBpcyBjb21tb25seSByZWZlcnJlZCB0byBhcyBhXG4gICAqIFwiZGVmYXVsdCBzdWJzdGF0ZVwiLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiAvLyBuZzJcbiAgICogdHJhbnNpdGlvblNlcnZpY2Uub25CZWZvcmUoeyB0bzogJ2hvbWUnIH0sICh0cmFuczogVHJhbnNpdGlvbikgPT5cbiAgICogICAgIHRyYW5zLnJvdXRlci5zdGF0ZVNlcnZpY2UudGFyZ2V0KFwiaG9tZS5kYXNoYm9hcmRcIikpO1xuICAgKiBgYGBcbiAgICpcbiAgICogIyMjIyBEYXRhIERyaXZlbiBEZWZhdWx0IFN1YnN0YXRlXG4gICAqXG4gICAqIFRoaXMgZXhhbXBsZSBwcm92aWRlcyBkYXRhLWRyaXZlbiBkZWZhdWx0IHN1YnN0YXRlIGZ1bmN0aW9uYWxpdHkuIEl0IG1hdGNoZXMgb24gYSB0cmFuc2l0aW9uIHRvIGFueSBzdGF0ZVxuICAgKiB3aGljaCBoYXMgYGRlZmF1bHRTdWJzdGF0ZTogXCJzb21lLnN1Yi5zdGF0ZVwiYCBkZWZpbmVkLiAgU2VlOiBbW1RyYW5zaXRpb24udG9dXSB3aGljaCByZXR1cm5zIHRoZSBcInRvIHN0YXRlXCJcbiAgICogZGVmaW5pdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICogLy8gbmcxXG4gICAqIC8vIHN0YXRlIGRlY2xhcmF0aW9uXG4gICAqIHtcbiAgICogICBuYW1lOiAnaG9tZScsXG4gICAqICAgdGVtcGxhdGU6ICc8ZGl2IHVpLXZpZXcvPicsXG4gICAqICAgZGVmYXVsdFN1YnN0YXRlOiAnaG9tZS5kYXNoYm9hcmQnXG4gICAqIH1cbiAgICpcbiAgICogdmFyIGNyaXRlcmlhID0ge1xuICAgKiAgIHRvOiBmdW5jdGlvbihzdGF0ZSkge1xuICAgKiAgICAgcmV0dXJuIHN0YXRlLmRlZmF1bHRTdWJzdGF0ZSAhPSBudWxsO1xuICAgKiAgIH1cbiAgICogfVxuICAgKlxuICAgKiAkdHJhbnNpdGlvbnMub25CZWZvcmUoY3JpdGVyaWEsIGZ1bmN0aW9uKHRyYW5zOiBUcmFuc2l0aW9uKSB7XG4gICAqICAgdmFyIHN1YnN0YXRlID0gdHJhbnMudG8oKS5kZWZhdWx0U3Vic3RhdGU7XG4gICAqICAgcmV0dXJuIHRyYW5zLnJvdXRlci5zdGF0ZVNlcnZpY2UudGFyZ2V0KHN1YnN0YXRlKTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiAjIyMjIFJlcXVpcmUgYXV0aGVudGljYXRpb25cbiAgICpcbiAgICogVGhpcyBleGFtcGxlIGNhbmNlbHMgYSB0cmFuc2l0aW9uIHRvIGEgc3RhdGUgd2hpY2ggcmVxdWlyZXMgYXV0aGVudGljYXRpb24sIGlmIHRoZSB1c2VyIGlzIG5vdCBjdXJyZW50bHkgYXV0aGVudGljYXRlZC5cbiAgICpcbiAgICogVGhpcyBleGFtcGxlIGFzc3VtZXMgYSBzdGF0ZSB0cmVlIHdoZXJlIGFsbCBzdGF0ZXMgd2hpY2ggcmVxdWlyZSBhdXRoZW50aWNhdGlvbiBhcmUgY2hpbGRyZW4gb2YgYSBwYXJlbnQgYCdyZXF1aXJlYXV0aCdgIHN0YXRlLlxuICAgKiBUaGlzIGV4YW1wbGUgYXNzdW1lcyBgTXlBdXRoU2VydmljZWAgc3luY2hyb25vdXNseSByZXR1cm5zIGEgYm9vbGVhbiBmcm9tIGBpc0F1dGhlbnRpY2F0ZWQoKWAuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogLy8gbmcxXG4gICAqICR0cmFuc2l0aW9ucy5vbkJlZm9yZSggeyB0bzogJ3JlcXVpcmVhdXRoLioqJyB9LCBmdW5jdGlvbih0cmFucykge1xuICAgKiAgIHZhciBteUF1dGhTZXJ2aWNlID0gdHJhbnMuaW5qZWN0b3IoKS5nZXQoJ015QXV0aFNlcnZpY2UnKTtcbiAgICogICAvLyBJZiBpc0F1dGhlbnRpY2F0ZWQgcmV0dXJucyBmYWxzZSwgdGhlIHRyYW5zaXRpb24gaXMgY2FuY2VsbGVkLlxuICAgKiAgIHJldHVybiBteUF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBtYXRjaENyaXRlcmlhIGRlZmluZXMgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIEhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGhvb2sgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBpbnZva2VkLlxuICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGRlcmVnaXN0ZXJzIHRoZSBob29rLlxuICAgKi9cbiAgb25CZWZvcmUobWF0Y2hDcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbjtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgW1tUcmFuc2l0aW9uSG9va0ZuXV0sIGNhbGxlZCB3aGVuIGEgdHJhbnNpdGlvbiBzdGFydHMuXG4gICAqXG4gICAqIFJlZ2lzdGVycyBhIHRyYW5zaXRpb24gbGlmZWN5Y2xlIGhvb2ssIHdoaWNoIGlzIGludm9rZWQgYXMgYSB0cmFuc2l0aW9uIHN0YXJ0cyBydW5uaW5nLlxuICAgKiBUaGlzIGhvb2sgY2FuIGJlIHVzZWZ1bCB0byBwZXJmb3JtIHNvbWUgYXN5bmNocm9ub3VzIGFjdGlvbiBiZWZvcmUgY29tcGxldGluZyBhIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIFNlZSBbW1RyYW5zaXRpb25Ib29rRm5dXSBmb3IgdGhlIHNpZ25hdHVyZSBvZiB0aGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIFRoZSBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIGhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgKiBUbyBtYXRjaCBhbGwgVHJhbnNpdGlvbnMsIHVzZSBhbiBlbXB0eSBjcml0ZXJpYSBvYmplY3QgYHt9YC5cbiAgICpcbiAgICogIyMjIExpZmVjeWNsZVxuICAgKlxuICAgKiBgb25TdGFydGAgaG9va3MgYXJlIGludm9rZWQgYXN5bmNocm9ub3VzbHkgd2hlbiB0aGUgVHJhbnNpdGlvbiBzdGFydHMgcnVubmluZy5cbiAgICogVGhpcyBoYXBwZW5zIGFmdGVyIHRoZSBgb25CZWZvcmVgIHBoYXNlIGlzIGNvbXBsZXRlLlxuICAgKiBBdCB0aGlzIHBvaW50LCB0aGUgVHJhbnNpdGlvbiBoYXMgbm90IHlldCBleGl0ZWQgbm9yIGVudGVyZWQgYW55IHN0YXRlcy5cbiAgICogVGhlIHJlZ2lzdGVyZWQgYG9uU3RhcnRgIGhvb2tzIGFyZSBpbnZva2VkIGluIHByaW9yaXR5IG9yZGVyLlxuICAgKlxuICAgKiBOb3RlOiBBIGJ1aWx0LWluIGBvblN0YXJ0YCBob29rIHdpdGggaGlnaCBwcmlvcml0eSBpcyB1c2VkIHRvIGZldGNoIGFueSBlYWdlciByZXNvbHZlIGRhdGEuXG4gICAqXG4gICAqICMjIyBSZXR1cm4gdmFsdWVcbiAgICpcbiAgICogVGhlIGhvb2sncyByZXR1cm4gdmFsdWUgY2FuIGJlIHVzZWQgdG8gcGF1c2UsIGNhbmNlbCwgb3IgcmVkaXJlY3QgdGhlIGN1cnJlbnQgVHJhbnNpdGlvbi5cbiAgICogU2VlIFtbSG9va1Jlc3VsdF1dIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgKlxuICAgKiAjIyMgRXhhbXBsZVxuICAgKlxuICAgKiAjIyMjIExvZ2luIGR1cmluZyB0cmFuc2l0aW9uXG4gICAqXG4gICAqIFRoaXMgZXhhbXBsZSBpbnRlcmNlcHRzIGFueSB0cmFuc2l0aW9uIHRvIGEgc3RhdGUgd2hpY2ggcmVxdWlyZXMgYXV0aGVudGljYXRpb24sIHdoZW4gdGhlIHVzZXIgaXNcbiAgICogbm90IGN1cnJlbnRseSBhdXRoZW50aWNhdGVkLiAgSXQgYWxsb3dzIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhc3luY2hyb25vdXNseSwgdGhlbiByZXN1bWVzIHRoZVxuICAgKiB0cmFuc2l0aW9uLiAgSWYgdGhlIHVzZXIgZGlkIG5vdCBhdXRoZW50aWNhdGUgc3VjY2Vzc2Z1bGx5LCBpdCByZWRpcmVjdHMgdG8gdGhlIFwiZ3Vlc3RcIiBzdGF0ZSwgd2hpY2hcbiAgICogZG9lcyBub3QgcmVxdWlyZSBhdXRoZW50aWNhdGlvbi5cbiAgICpcbiAgICogVGhpcyBleGFtcGxlIGFzc3VtZXM6XG4gICAqIC0gYSBzdGF0ZSB0cmVlIHdoZXJlIGFsbCBzdGF0ZXMgd2hpY2ggcmVxdWlyZSBhdXRoZW50aWNhdGlvbiBhcmUgY2hpbGRyZW4gb2YgYSBwYXJlbnQgYCdhdXRoJ2Agc3RhdGUuXG4gICAqIC0gYE15QXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKClgIHN5bmNocm9ub3VzbHkgcmV0dXJucyBhIGJvb2xlYW4uXG4gICAqIC0gYE15QXV0aFNlcnZpY2UuYXV0aGVudGljYXRlKClgIHByZXNlbnRzIGEgbG9naW4gZGlhbG9nLCBhbmQgcmV0dXJucyBhIHByb21pc2Ugd2hpY2ggaXMgcmVzb2x2ZWRcbiAgICogICBvciByZWplY3RlZCwgd2hldGhlciBvciBub3QgdGhlIGxvZ2luIGF0dGVtcHQgd2FzIHN1Y2Nlc3NmdWwuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogLy8gbmcxXG4gICAqICR0cmFuc2l0aW9ucy5vblN0YXJ0KCB7IHRvOiAnYXV0aC4qKicgfSwgZnVuY3Rpb24odHJhbnMpIHtcbiAgICogICB2YXIgJHN0YXRlID0gdHJhbnMucm91dGVyLnN0YXRlU2VydmljZTtcbiAgICogICB2YXIgTXlBdXRoU2VydmljZSA9IHRyYW5zLmluamVjdG9yKCkuZ2V0KCdNeUF1dGhTZXJ2aWNlJyk7XG4gICAqXG4gICAqICAgLy8gSWYgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICogICBpZiAoIU15QXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICpcbiAgICogICAgIC8vIFRoZW4gcmV0dXJuIGEgcHJvbWlzZSBmb3IgYSBzdWNjZXNzZnVsIGxvZ2luLlxuICAgKiAgICAgLy8gVGhlIHRyYW5zaXRpb24gd2lsbCB3YWl0IGZvciB0aGlzIHByb21pc2UgdG8gc2V0dGxlXG4gICAqXG4gICAqICAgICByZXR1cm4gTXlBdXRoU2VydmljZS5hdXRoZW50aWNhdGUoKS5jYXRjaChmdW5jdGlvbigpIHtcbiAgICpcbiAgICogICAgICAgLy8gSWYgdGhlIGF1dGhlbnRpY2F0ZSgpIG1ldGhvZCBmYWlsZWQgZm9yIHdoYXRldmVyIHJlYXNvbixcbiAgICogICAgICAgLy8gcmVkaXJlY3QgdG8gYSAnZ3Vlc3QnIHN0YXRlIHdoaWNoIGRvZXNuJ3QgcmVxdWlyZSBhdXRoLlxuICAgKiAgICAgICByZXR1cm4gJHN0YXRlLnRhcmdldChcImd1ZXN0XCIpO1xuICAgKiAgICAgfSk7XG4gICAqICAgfVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBtYXRjaENyaXRlcmlhIGRlZmluZXMgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIEhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGhvb2sgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBpbmplY3RlZCBhbmQgaW52b2tlZC5cbiAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgaG9vay5cbiAgICovXG4gIG9uU3RhcnQobWF0Y2hDcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbjtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgW1tUcmFuc2l0aW9uU3RhdGVIb29rRm5dXSwgY2FsbGVkIHdoZW4gYSBzcGVjaWZpYyBzdGF0ZSBpcyBlbnRlcmVkLlxuICAgKlxuICAgKiBSZWdpc3RlcnMgYSBsaWZlY3ljbGUgaG9vaywgd2hpY2ggaXMgaW52b2tlZCAoZHVyaW5nIGEgdHJhbnNpdGlvbikgd2hlbiBhIHNwZWNpZmljIHN0YXRlIGlzIGJlaW5nIGVudGVyZWQuXG4gICAqXG4gICAqIFNpbmNlIHRoaXMgaG9vayBpcyBydW4gb25seSB3aGVuIHRoZSBzcGVjaWZpYyBzdGF0ZSBpcyBiZWluZyAqZW50ZXJlZCosIGl0IGNhbiBiZSB1c2VmdWwgZm9yXG4gICAqIHBlcmZvcm1pbmcgdGFza3Mgd2hlbiBlbnRlcmluZyBhIHN1Ym1vZHVsZS9mZWF0dXJlIGFyZWEgc3VjaCBhcyBpbml0aWFsaXppbmcgYSBzdGF0ZWZ1bCBzZXJ2aWNlLFxuICAgKiBvciBmb3IgZ3VhcmRpbmcgYWNjZXNzIHRvIGEgc3VibW9kdWxlL2ZlYXR1cmUgYXJlYS5cbiAgICpcbiAgICogU2VlIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0gZm9yIHRoZSBzaWduYXR1cmUgb2YgdGhlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBUaGUgW1tIb29rTWF0Y2hDcml0ZXJpYV1dIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBob29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cbiAgICogYG9uRW50ZXJgIGhvb2tzIGdlbmVyYWxseSBzcGVjaWZ5IGB7IGVudGVyaW5nOiAnc29tZXN0YXRlJyB9YC5cbiAgICogVG8gbWF0Y2ggYWxsIFRyYW5zaXRpb25zLCB1c2UgYW4gZW1wdHkgY3JpdGVyaWEgb2JqZWN0IGB7fWAuXG4gICAqXG4gICAqICMjIyBMaWZlY3ljbGVcbiAgICpcbiAgICogYG9uRW50ZXJgIGhvb2tzIGFyZSBpbnZva2VkIHdoZW4gdGhlIFRyYW5zaXRpb24gaXMgZW50ZXJpbmcgYSBzdGF0ZS5cbiAgICogU3RhdGVzIGFyZSBlbnRlcmVkIGFmdGVyIHRoZSBgb25SZXRhaW5gIHBoYXNlIGlzIGNvbXBsZXRlLlxuICAgKiBJZiBtb3JlIHRoYW4gb25lIHN0YXRlIGlzIGJlaW5nIGVudGVyZWQsIHRoZSBwYXJlbnQgc3RhdGUgaXMgZW50ZXJlZCBmaXJzdC5cbiAgICogVGhlIHJlZ2lzdGVyZWQgYG9uRW50ZXJgIGhvb2tzIGZvciBhIHN0YXRlIGFyZSBpbnZva2VkIGluIHByaW9yaXR5IG9yZGVyLlxuICAgKlxuICAgKiBOb3RlOiBBIGJ1aWx0LWluIGBvbkVudGVyYCBob29rIHdpdGggaGlnaCBwcmlvcml0eSBpcyB1c2VkIHRvIGZldGNoIGxhenkgcmVzb2x2ZSBkYXRhIGZvciBzdGF0ZXMgYmVpbmcgZW50ZXJlZC5cbiAgICpcbiAgICogIyMjIFJldHVybiB2YWx1ZVxuICAgKlxuICAgKiBUaGUgaG9vaydzIHJldHVybiB2YWx1ZSBjYW4gYmUgdXNlZCB0byBwYXVzZSwgY2FuY2VsLCBvciByZWRpcmVjdCB0aGUgY3VycmVudCBUcmFuc2l0aW9uLlxuICAgKiBTZWUgW1tIb29rUmVzdWx0XV0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqXG4gICAqICMjIyBJbnNpZGUgYSBzdGF0ZSBkZWNsYXJhdGlvblxuICAgKlxuICAgKiBJbnN0ZWFkIG9mIHJlZ2lzdGVyaW5nIGBvbkVudGVyYCBob29rcyB1c2luZyB0aGUgW1tUcmFuc2l0aW9uU2VydmljZV1dLCB5b3UgbWF5IGRlZmluZSBhbiBgb25FbnRlcmAgaG9va1xuICAgKiBkaXJlY3RseSBvbiBhIHN0YXRlIGRlY2xhcmF0aW9uIChzZWU6IFtbU3RhdGVEZWNsYXJhdGlvbi5vbkVudGVyXV0pLlxuICAgKlxuICAgKlxuICAgKiAjIyMgRXhhbXBsZXNcbiAgICpcbiAgICogIyMjIyBBdWRpdCBMb2dcbiAgICpcbiAgICogVGhpcyBleGFtcGxlIHVzZXMgYSBzZXJ2aWNlIHRvIGxvZyB0aGF0IGEgdXNlciBoYXMgZW50ZXJlZCB0aGUgYWRtaW4gc2VjdGlvbiBvZiBhbiBhcHAuXG4gICAqIFRoaXMgYXNzdW1lcyB0aGF0IHRoZXJlIGFyZSBzdWJzdGF0ZXMgb2YgdGhlIFwiYWRtaW5cIiBzdGF0ZSwgc3VjaCBhcyBcImFkbWluLnVzZXJzXCIsIFwiYWRtaW4ucGFnZXNcIiwgZXRjLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBcbiAgICpcbiAgICogJHRyYW5zaXRpb25zLm9uRW50ZXIoeyBlbnRlcmluZzogJ2FkbWluJyB9LCBmdW5jdGlvbih0cmFuc2l0aW9uLCBzdGF0ZSkge1xuICAgKiAgIHZhciBBdWRpdFNlcnZpY2UgPSB0cmFucy5pbmplY3RvcigpLmdldCgnQXVkaXRTZXJ2aWNlJyk7XG4gICAqICAgQXVkaXRTZXJ2aWNlLmxvZyhcIkVudGVyZWQgXCIgKyBzdGF0ZS5uYW1lICsgXCIgbW9kdWxlIHdoaWxlIHRyYW5zaXRpb25pbmcgdG8gXCIgKyB0cmFuc2l0aW9uLnRvKCkubmFtZSk7XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqICMjIyMgQXVkaXQgTG9nIChpbnNpZGUgYSBzdGF0ZSBkZWNsYXJhdGlvbilcbiAgICpcbiAgICogVGhlIGBvbkVudGVyYCBpbnNpZGUgdGhpcyBzdGF0ZSBkZWNsYXJhdGlvbiBpcyBzeW50YWN0aWMgc3VnYXIgZm9yIHRoZSBwcmV2aW91cyBBdWRpdCBMb2cgZXhhbXBsZS5cbiAgICogYGBgXG4gICAqIHtcbiAgICogICBuYW1lOiAnYWRtaW4nLFxuICAgKiAgIGNvbXBvbmVudDogJ2FkbWluJyxcbiAgICogICBvbkVudGVyOiBmdW5jdGlvbigkdHJhbnNpdGlvbiQsICRzdGF0ZSQpIHtcbiAgICogICAgIHZhciBBdWRpdFNlcnZpY2UgPSAkdHJhbnNpdGlvbiQuaW5qZWN0b3IoKS5nZXQoJ0F1ZGl0U2VydmljZScpO1xuICAgKiAgICAgQXVkaXRTZXJ2aWNlLmxvZyhcIkVudGVyZWQgXCIgKyBzdGF0ZS5uYW1lICsgXCIgbW9kdWxlIHdoaWxlIHRyYW5zaXRpb25pbmcgdG8gXCIgKyB0cmFuc2l0aW9uLnRvKCkubmFtZSk7XG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBOb3RlOiBBIHN0YXRlIGRlY2xhcmF0aW9uJ3MgYG9uRW50ZXJgIGZ1bmN0aW9uIGlzIGluamVjdGVkIGZvciBBbmd1bGFyIDEgb25seS5cbiAgICpcbiAgICogQHBhcmFtIG1hdGNoQ3JpdGVyaWEgZGVmaW5lcyB3aGljaCBUcmFuc2l0aW9ucyB0aGUgSG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgaG9vayBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGluamVjdGVkIGFuZCBpbnZva2VkLlxuICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGRlcmVnaXN0ZXJzIHRoZSBob29rLlxuICAgKi9cbiAgb25FbnRlcihtYXRjaENyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0sIGNhbGxlZCB3aGVuIGEgc3BlY2lmaWMgc3RhdGUgaXMgcmV0YWluZWQva2VwdC5cbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgbGlmZWN5Y2xlIGhvb2ssIHdoaWNoIGlzIGludm9rZWQgKGR1cmluZyBhIHRyYW5zaXRpb24pIGZvclxuICAgKiBhIHNwZWNpZmljIHN0YXRlIHRoYXQgd2FzIHByZXZpb3VzbHkgYWN0aXZlIHdpbGwgcmVtYWluIGFjdGl2ZSAoaXMgbm90IGJlaW5nIGVudGVyZWQgbm9yIGV4aXRlZCkuXG4gICAqXG4gICAqIFRoaXMgaG9vayBpcyBpbnZva2VkIHdoZW4gYSBzdGF0ZSBpcyBcInJldGFpbmVkXCIgb3IgXCJrZXB0XCIuXG4gICAqIEl0IG1lYW5zIHRoZSB0cmFuc2l0aW9uIGlzIGNvbWluZyAqZnJvbSogYSBzdWJzdGF0ZSBvZiB0aGUgcmV0YWluZWQgc3RhdGUgKnRvKiBhIHN1YnN0YXRlIG9mIHRoZSByZXRhaW5lZCBzdGF0ZS5cbiAgICogVGhpcyBob29rIGNhbiBiZSB1c2VkIHRvIHBlcmZvcm0gYWN0aW9ucyB3aGVuIHRoZSB1c2VyIG1vdmVzIGZyb20gb25lIHN1YnN0YXRlIHRvIGFub3RoZXIsIHN1Y2ggYXMgYmV0d2VlbiBzdGVwcyBpbiBhIHdpemFyZC5cbiAgICpcbiAgICogVGhlIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBpcyB1c2VkIHRvIGRldGVybWluZSB3aGljaCBUcmFuc2l0aW9ucyB0aGUgaG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIGBvblJldGFpbmAgaG9va3MgZ2VuZXJhbGx5IHNwZWNpZnkgYHsgcmV0YWluZWQ6ICdzb21lc3RhdGUnIH1gLlxuICAgKiBUbyBtYXRjaCBhbGwgVHJhbnNpdGlvbnMsIHVzZSBhbiBlbXB0eSBjcml0ZXJpYSBvYmplY3QgYHt9YC5cbiAgICpcbiAgICogIyMjIExpZmVjeWNsZVxuICAgKlxuICAgKiBgb25SZXRhaW5gIGhvb2tzIGFyZSBpbnZva2VkIGFmdGVyIGFueSBgb25FeGl0YCBob29rcyBoYXZlIGJlZW4gZmlyZWQuXG4gICAqIElmIG1vcmUgdGhhbiBvbmUgc3RhdGUgaXMgcmV0YWluZWQsIHRoZSBjaGlsZCBzdGF0ZXMnIGBvblJldGFpbmAgaG9va3MgYXJlIGludm9rZWQgZmlyc3QuXG4gICAqIFRoZSByZWdpc3RlcmVkIGBvblJldGFpbmAgaG9va3MgZm9yIGEgc3RhdGUgYXJlIGludm9rZWQgaW4gcHJpb3JpdHkgb3JkZXIuXG4gICAqXG4gICAqICMjIyBSZXR1cm4gdmFsdWVcbiAgICpcbiAgICogVGhlIGhvb2sncyByZXR1cm4gdmFsdWUgY2FuIGJlIHVzZWQgdG8gcGF1c2UsIGNhbmNlbCwgb3IgcmVkaXJlY3QgdGhlIGN1cnJlbnQgVHJhbnNpdGlvbi5cbiAgICogU2VlIFtbSG9va1Jlc3VsdF1dIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgKlxuICAgKiAjIyMgSW5zaWRlIGEgc3RhdGUgZGVjbGFyYXRpb25cbiAgICpcbiAgICogSW5zdGVhZCBvZiByZWdpc3RlcmluZyBgb25SZXRhaW5gIGhvb2tzIHVzaW5nIHRoZSBbW1RyYW5zaXRpb25TZXJ2aWNlXV0sIHlvdSBtYXkgZGVmaW5lIGFuIGBvblJldGFpbmAgaG9va1xuICAgKiBkaXJlY3RseSBvbiBhIHN0YXRlIGRlY2xhcmF0aW9uIChzZWU6IFtbU3RhdGVEZWNsYXJhdGlvbi5vblJldGFpbl1dKS5cbiAgICpcbiAgICogTm90ZTogQSBzdGF0ZSBkZWNsYXJhdGlvbidzIGBvblJldGFpbmAgZnVuY3Rpb24gaXMgaW5qZWN0ZWQgZm9yIEFuZ3VsYXIgMSBvbmx5LlxuICAgKlxuICAgKiBAcGFyYW0gbWF0Y2hDcml0ZXJpYSBkZWZpbmVzIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBIb29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cbiAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBob29rIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgaW5qZWN0ZWQgYW5kIGludm9rZWQuXG4gICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggZGVyZWdpc3RlcnMgdGhlIGhvb2suXG4gICAqL1xuICBvblJldGFpbihtYXRjaENyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0sIGNhbGxlZCB3aGVuIGEgc3BlY2lmaWMgc3RhdGUgaXMgZXhpdGVkLlxuICAgKlxuICAgKiBSZWdpc3RlcnMgYSBsaWZlY3ljbGUgaG9vaywgd2hpY2ggaXMgaW52b2tlZCAoZHVyaW5nIGEgdHJhbnNpdGlvbikgd2hlbiBhIHNwZWNpZmljIHN0YXRlIGlzIGJlaW5nIGV4aXRlZC5cbiAgICpcbiAgICogU2luY2UgdGhpcyBob29rIGlzIHJ1biBvbmx5IHdoZW4gdGhlIHNwZWNpZmljIHN0YXRlIGlzIGJlaW5nICpleGl0ZWQqLCBpdCBjYW4gYmUgdXNlZnVsIGZvclxuICAgKiBwZXJmb3JtaW5nIHRhc2tzIHdoZW4gbGVhdmluZyBhIHN1Ym1vZHVsZS9mZWF0dXJlIGFyZWEgc3VjaCBhcyBjbGVhbmluZyB1cCBhIHN0YXRlZnVsIHNlcnZpY2UsXG4gICAqIG9yIGZvciBwcmV2ZW50aW5nIHRoZSB1c2VyIGZyb20gbGVhdmluZyBhIHN0YXRlIG9yIHN1Ym1vZHVsZSB1bnRpbCBzb21lIGNyaXRlcmlhIGlzIHNhdGlzZmllZC5cbiAgICpcbiAgICogU2VlIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0gZm9yIHRoZSBzaWduYXR1cmUgb2YgdGhlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBUaGUgW1tIb29rTWF0Y2hDcml0ZXJpYV1dIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBob29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cbiAgICogYG9uRXhpdGAgaG9va3MgZ2VuZXJhbGx5IHNwZWNpZnkgYHsgZXhpdGluZzogJ3NvbWVzdGF0ZScgfWAuXG4gICAqIFRvIG1hdGNoIGFsbCBUcmFuc2l0aW9ucywgdXNlIGFuIGVtcHR5IGNyaXRlcmlhIG9iamVjdCBge31gLlxuICAgKlxuICAgKiAjIyMgTGlmZWN5Y2xlXG4gICAqXG4gICAqIGBvbkV4aXRgIGhvb2tzIGFyZSBpbnZva2VkIHdoZW4gdGhlIFRyYW5zaXRpb24gaXMgZXhpdGluZyBhIHN0YXRlLlxuICAgKiBTdGF0ZXMgYXJlIGV4aXRlZCBhZnRlciBhbnkgYG9uU3RhcnRgIHBoYXNlIGlzIGNvbXBsZXRlLlxuICAgKiBJZiBtb3JlIHRoYW4gb25lIHN0YXRlIGlzIGJlaW5nIGV4aXRlZCwgdGhlIGNoaWxkIHN0YXRlcyBhcmUgZXhpdGVkIGZpcnN0LlxuICAgKiBUaGUgcmVnaXN0ZXJlZCBgb25FeGl0YCBob29rcyBmb3IgYSBzdGF0ZSBhcmUgaW52b2tlZCBpbiBwcmlvcml0eSBvcmRlci5cbiAgICpcbiAgICogIyMjIFJldHVybiB2YWx1ZVxuICAgKlxuICAgKiBUaGUgaG9vaydzIHJldHVybiB2YWx1ZSBjYW4gYmUgdXNlZCB0byBwYXVzZSwgY2FuY2VsLCBvciByZWRpcmVjdCB0aGUgY3VycmVudCBUcmFuc2l0aW9uLlxuICAgKiBTZWUgW1tIb29rUmVzdWx0XV0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqXG4gICAqICMjIyBJbnNpZGUgYSBzdGF0ZSBkZWNsYXJhdGlvblxuICAgKlxuICAgKiBJbnN0ZWFkIG9mIHJlZ2lzdGVyaW5nIGBvbkV4aXRgIGhvb2tzIHVzaW5nIHRoZSBbW1RyYW5zaXRpb25TZXJ2aWNlXV0sIHlvdSBtYXkgZGVmaW5lIGFuIGBvbkV4aXRgIGhvb2tcbiAgICogZGlyZWN0bHkgb24gYSBzdGF0ZSBkZWNsYXJhdGlvbiAoc2VlOiBbW1N0YXRlRGVjbGFyYXRpb24ub25FeGl0XV0pLlxuICAgKlxuICAgKiBOb3RlOiBBIHN0YXRlIGRlY2xhcmF0aW9uJ3MgYG9uRXhpdGAgZnVuY3Rpb24gaXMgaW5qZWN0ZWQgZm9yIEFuZ3VsYXIgMSBvbmx5LlxuICAgKlxuICAgKiBAcGFyYW0gbWF0Y2hDcml0ZXJpYSBkZWZpbmVzIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBIb29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cbiAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBob29rIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgaW5qZWN0ZWQgYW5kIGludm9rZWQuXG4gICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggZGVyZWdpc3RlcnMgdGhlIGhvb2suXG4gICAqL1xuICBvbkV4aXQobWF0Y2hDcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uU3RhdGVIb29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uO1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBbW1RyYW5zaXRpb25Ib29rRm5dXSwgY2FsbGVkICpqdXN0IGJlZm9yZSBhIHRyYW5zaXRpb24gZmluaXNoZXMqLlxuICAgKlxuICAgKiBSZWdpc3RlcnMgYSB0cmFuc2l0aW9uIGxpZmVjeWNsZSBob29rLCB3aGljaCBpcyBpbnZva2VkIGp1c3QgYmVmb3JlIGEgdHJhbnNpdGlvbiBmaW5pc2hlcy5cbiAgICogVGhpcyBob29rIGlzIGEgbGFzdCBjaGFuY2UgdG8gY2FuY2VsIG9yIHJlZGlyZWN0IGEgdHJhbnNpdGlvbi5cbiAgICpcbiAgICogU2VlIFtbVHJhbnNpdGlvbkhvb2tGbl1dIGZvciB0aGUgc2lnbmF0dXJlIG9mIHRoZSBmdW5jdGlvbi5cbiAgICpcbiAgICogVGhlIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBpcyB1c2VkIHRvIGRldGVybWluZSB3aGljaCBUcmFuc2l0aW9ucyB0aGUgaG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIFRvIG1hdGNoIGFsbCBUcmFuc2l0aW9ucywgdXNlIGFuIGVtcHR5IGNyaXRlcmlhIG9iamVjdCBge31gLlxuICAgKlxuICAgKiAjIyMgTGlmZWN5Y2xlXG4gICAqXG4gICAqIGBvbkZpbmlzaGAgaG9va3MgYXJlIGludm9rZWQgYWZ0ZXIgdGhlIGBvbkVudGVyYCBwaGFzZSBpcyBjb21wbGV0ZS5cbiAgICogVGhlc2UgaG9va3MgYXJlIGludm9rZWQganVzdCBiZWZvcmUgdGhlIHRyYW5zaXRpb24gaXMgXCJjb21taXR0ZWRcIi5cbiAgICogRWFjaCBob29rIGlzIGludm9rZWQgaW4gcHJpb3JpdHkgb3JkZXIuXG4gICAqXG4gICAqICMjIyBSZXR1cm4gdmFsdWVcbiAgICpcbiAgICogVGhlIGhvb2sncyByZXR1cm4gdmFsdWUgY2FuIGJlIHVzZWQgdG8gcGF1c2UsIGNhbmNlbCwgb3IgcmVkaXJlY3QgdGhlIGN1cnJlbnQgVHJhbnNpdGlvbi5cbiAgICogU2VlIFtbSG9va1Jlc3VsdF1dIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gbWF0Y2hDcml0ZXJpYSBkZWZpbmVzIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBIb29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cbiAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBob29rIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgaW5qZWN0ZWQgYW5kIGludm9rZWQuXG4gICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggZGVyZWdpc3RlcnMgdGhlIGhvb2suXG4gICAqL1xuICBvbkZpbmlzaChtYXRjaENyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25Ib29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uO1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBbW1RyYW5zaXRpb25Ib29rRm5dXSwgY2FsbGVkIGFmdGVyIGEgc3VjY2Vzc2Z1bCB0cmFuc2l0aW9uIGNvbXBsZXRlZC5cbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgdHJhbnNpdGlvbiBsaWZlY3ljbGUgaG9vaywgd2hpY2ggaXMgaW52b2tlZCBhZnRlciBhIHRyYW5zaXRpb24gc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlcy5cbiAgICpcbiAgICogU2VlIFtbVHJhbnNpdGlvbkhvb2tGbl1dIGZvciB0aGUgc2lnbmF0dXJlIG9mIHRoZSBmdW5jdGlvbi5cbiAgICpcbiAgICogVGhlIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBpcyB1c2VkIHRvIGRldGVybWluZSB3aGljaCBUcmFuc2l0aW9ucyB0aGUgaG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIFRvIG1hdGNoIGFsbCBUcmFuc2l0aW9ucywgdXNlIGFuIGVtcHR5IGNyaXRlcmlhIG9iamVjdCBge31gLlxuICAgKlxuICAgKiAjIyMgTGlmZWN5Y2xlXG4gICAqXG4gICAqIGBvblN1Y2Nlc3NgIGhvb2tzIGFyZSBjaGFpbmVkIG9mZiB0aGUgVHJhbnNpdGlvbidzIHByb21pc2UgKHNlZSBbW1RyYW5zaXRpb24ucHJvbWlzZV1dKS5cbiAgICogSWYgdGhlIFRyYW5zaXRpb24gaXMgc3VjY2Vzc2Z1bCBhbmQgaXRzIHByb21pc2UgaXMgcmVzb2x2ZWQsIHRoZW4gdGhlIGBvblN1Y2Nlc3NgIGhvb2tzIGFyZSBpbnZva2VkLlxuICAgKiBTaW5jZSB0aGVzZSBob29rcyBhcmUgcnVuIGFmdGVyIHRoZSB0cmFuc2l0aW9uIGlzIG92ZXIsIHRoZWlyIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkLlxuICAgKiBUaGUgYG9uU3VjY2Vzc2AgaG9va3MgYXJlIGludm9rZWQgaW4gcHJpb3JpdHkgb3JkZXIuXG4gICAqXG4gICAqICMjIyBSZXR1cm4gdmFsdWVcbiAgICpcbiAgICogU2luY2UgdGhlIFRyYW5zaXRpb24gaXMgYWxyZWFkeSBjb21wbGV0ZWQsIHRoZSBob29rJ3MgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWRcbiAgICpcbiAgICogQHBhcmFtIG1hdGNoQ3JpdGVyaWEgZGVmaW5lcyB3aGljaCBUcmFuc2l0aW9ucyB0aGUgSG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgaG9vayBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGluamVjdGVkIGFuZCBpbnZva2VkLlxuICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGRlcmVnaXN0ZXJzIHRoZSBob29rLlxuICAgKi9cbiAgb25TdWNjZXNzKG1hdGNoQ3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIFtbVHJhbnNpdGlvbkhvb2tGbl1dLCBjYWxsZWQgYWZ0ZXIgYSB0cmFuc2l0aW9uIGhhcyBlcnJvcmVkLlxuICAgKlxuICAgKiBSZWdpc3RlcnMgYSB0cmFuc2l0aW9uIGxpZmVjeWNsZSBob29rLCB3aGljaCBpcyBpbnZva2VkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgYmVlbiByZWplY3RlZCBmb3IgYW55IHJlYXNvbi5cbiAgICpcbiAgICogU2VlIFtbVHJhbnNpdGlvbkhvb2tGbl1dIGZvciB0aGUgc2lnbmF0dXJlIG9mIHRoZSBmdW5jdGlvbi5cbiAgICpcbiAgICogVGhlIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBpcyB1c2VkIHRvIGRldGVybWluZSB3aGljaCBUcmFuc2l0aW9ucyB0aGUgaG9vayBzaG91bGQgYmUgaW52b2tlZCBmb3IuXG4gICAqIFRvIG1hdGNoIGFsbCBUcmFuc2l0aW9ucywgdXNlIGFuIGVtcHR5IGNyaXRlcmlhIG9iamVjdCBge31gLlxuICAgKlxuICAgKiAjIyMgTGlmZWN5Y2xlXG4gICAqXG4gICAqIFRoZSBgb25FcnJvcmAgaG9va3MgYXJlIGNoYWluZWQgb2ZmIHRoZSBUcmFuc2l0aW9uJ3MgcHJvbWlzZSAoc2VlIFtbVHJhbnNpdGlvbi5wcm9taXNlXV0pLlxuICAgKiBJZiBhIFRyYW5zaXRpb24gZmFpbHMsIGl0cyBwcm9taXNlIGlzIHJlamVjdGVkIGFuZCB0aGUgYG9uRXJyb3JgIGhvb2tzIGFyZSBpbnZva2VkLlxuICAgKiBUaGUgYG9uRXJyb3JgIGhvb2tzIGFyZSBpbnZva2VkIGluIHByaW9yaXR5IG9yZGVyLlxuICAgKlxuICAgKiBTaW5jZSB0aGVzZSBob29rcyBhcmUgcnVuIGFmdGVyIHRoZSB0cmFuc2l0aW9uIGlzIG92ZXIsIHRoZWlyIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkLlxuICAgKlxuICAgKiBBIHRyYW5zaXRpb24gXCJlcnJvcnNcIiBpZiBpdCB3YXMgc3RhcnRlZCwgYnV0IGZhaWxlZCB0byBjb21wbGV0ZSAoZm9yIGFueSByZWFzb24pLlxuICAgKiBBICpub24tZXhoYXVzdGl2ZSBsaXN0KiBvZiByZWFzb25zIGEgdHJhbnNpdGlvbiBjYW4gZXJyb3I6XG4gICAqXG4gICAqIC0gQSB0cmFuc2l0aW9uIHdhcyBjYW5jZWxsZWQgYmVjYXVzZSBhIG5ldyB0cmFuc2l0aW9uIHN0YXJ0ZWQgd2hpbGUgaXQgd2FzIHN0aWxsIHJ1bm5pbmcgKGBUcmFuc2l0aW9uIHN1cGVyc2VkZWRgKVxuICAgKiAtIEEgdHJhbnNpdGlvbiB3YXMgY2FuY2VsbGVkIGJ5IGEgVHJhbnNpdGlvbiBIb29rIHJldHVybmluZyBmYWxzZVxuICAgKiAtIEEgdHJhbnNpdGlvbiB3YXMgcmVkaXJlY3RlZCBieSBhIFRyYW5zaXRpb24gSG9vayByZXR1cm5pbmcgYSBbW1RhcmdldFN0YXRlXV1cbiAgICogLSBBIFRyYW5zaXRpb24gSG9vayBvciByZXNvbHZlIGZ1bmN0aW9uIHRocmV3IGFuIGVycm9yXG4gICAqIC0gQSBUcmFuc2l0aW9uIEhvb2sgcmV0dXJuZWQgYSByZWplY3RlZCBwcm9taXNlXG4gICAqIC0gQSByZXNvbHZlIGZ1bmN0aW9uIHJldHVybmVkIGEgcmVqZWN0ZWQgcHJvbWlzZVxuICAgKlxuICAgKiBUbyBjaGVjayB0aGUgZmFpbHVyZSByZWFzb24sIGluc3BlY3QgdGhlIHJldHVybiB2YWx1ZSBvZiBbW1RyYW5zaXRpb24uZXJyb3JdXS5cbiAgICpcbiAgICogTm90ZTogYG9uRXJyb3JgIHNob3VsZCBiZSB1c2VkIGZvciB0YXJnZXRlZCBlcnJvciBoYW5kbGluZywgb3IgZXJyb3IgcmVjb3ZlcnkuXG4gICAqIEZvciBzaW1wbGUgY2F0Y2gtYWxsIGVycm9yIHJlcG9ydGluZywgdXNlIFtbU3RhdGVTZXJ2aWNlLmRlZmF1bHRFcnJvckhhbmRsZXJdXS5cbiAgICpcbiAgICogIyMjIFJldHVybiB2YWx1ZVxuICAgKlxuICAgKiBTaW5jZSB0aGUgVHJhbnNpdGlvbiBpcyBhbHJlYWR5IGNvbXBsZXRlZCwgdGhlIGhvb2sncyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZFxuICAgKlxuICAgKiBAcGFyYW0gbWF0Y2hDcml0ZXJpYSBkZWZpbmVzIHdoaWNoIFRyYW5zaXRpb25zIHRoZSBIb29rIHNob3VsZCBiZSBpbnZva2VkIGZvci5cbiAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBob29rIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgaW5qZWN0ZWQgYW5kIGludm9rZWQuXG4gICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggZGVyZWdpc3RlcnMgdGhlIGhvb2suXG4gICAqL1xuICBvbkVycm9yKG1hdGNoQ3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIHRoZSByZWdpc3RlcmVkIGhvb2tzIG9mIGEgZ2l2ZW4gYGhvb2tOYW1lYCB0eXBlXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBgXG4gICAqICR0cmFuc2l0aW9ucy5nZXRIb29rcyhcIm9uRW50ZXJcIilcbiAgICogYGBgXG4gICAqL1xuICBnZXRIb29rcyhob29rTmFtZTogc3RyaW5nKTogUmVnaXN0ZXJlZEhvb2tbXTtcbn1cblxuLyoqIEEgcHJlZGljYXRlIHR5cGUgd2hpY2ggdGVzdHMgaWYgYSBbW1N0YXRlT2JqZWN0XV0gcGFzc2VzIHNvbWUgdGVzdC4gUmV0dXJucyBhIGJvb2xlYW4uICovXG5leHBvcnQgdHlwZSBJU3RhdGVNYXRjaCA9IFByZWRpY2F0ZTxTdGF0ZU9iamVjdD47XG5cbi8qKlxuICogVGhpcyBvYmplY3QgaXMgdXNlZCB0byBjb25maWd1cmUgd2hldGhlciBvciBub3QgYSBUcmFuc2l0aW9uIEhvb2sgaXMgaW52b2tlZCBmb3IgYSBwYXJ0aWN1bGFyIHRyYW5zaXRpb24sXG4gKiBiYXNlZCBvbiB0aGUgVHJhbnNpdGlvbidzIFwidG8gc3RhdGVcIiBhbmQgXCJmcm9tIHN0YXRlXCIuXG4gKlxuICogRWFjaCBwcm9wZXJ0eSAoYHRvYCwgYGZyb21gLCBgZXhpdGluZ2AsIGByZXRhaW5lZGAsIGFuZCBgZW50ZXJpbmdgKSBjYW4gYmUgYSBzdGF0ZSBbW0dsb2JdXSBzdHJpbmcsXG4gKiBhIGJvb2xlYW4sIG9yIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHN0YXRlIGFuZCByZXR1cm5zIGEgYm9vbGVhbiAoc2VlIFtbSG9va01hdGNoQ3JpdGVyaW9uXV0pXG4gKlxuICogQWxsIHByb3BlcnRpZXMgYXJlIG9wdGlvbmFsLiAgSWYgYW55IHByb3BlcnR5IGlzIG9taXR0ZWQsIGl0IGlzIHJlcGxhY2VkIHdpdGggdGhlIHZhbHVlIGB0cnVlYCwgYW5kIGFsd2F5cyBtYXRjaGVzLlxuICogVG8gbWF0Y2ggYW55IHRyYW5zaXRpb24sIHVzZSBhbiBlbXB0eSBjcml0ZXJpYSBvYmplY3QgYHt9YC5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogLy8gVGhpcyBtYXRjaGVzIGEgdHJhbnNpdGlvbiBjb21pbmcgZnJvbSB0aGUgYHBhcmVudGAgc3RhdGUgYW5kIGdvaW5nIHRvIHRoZSBgcGFyZW50LmNoaWxkYCBzdGF0ZS5cbiAqIHZhciBtYXRjaCA9IHtcbiAqICAgdG86ICdwYXJlbnQnLFxuICogICBmcm9tOiAncGFyZW50LmNoaWxkJ1xuICogfVxuICogYGBgXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqIC8vIFRoaXMgbWF0Y2hlcyBhIHRyYW5zaXRpb24gY29taW5nIGZyb20gYW55IHN1YnN0YXRlIG9mIGBwYXJlbnRgIGFuZCBnb2luZyBkaXJlY3RseSB0byB0aGUgYHBhcmVudGAgc3RhdGUuXG4gKiB2YXIgbWF0Y2ggPSB7XG4gKiAgIHRvOiAncGFyZW50JyxcbiAqICAgZnJvbTogJ3BhcmVudC4qKidcbiAqIH1cbiAqIGBgYFxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKiAvLyBUaGlzIG1hdGNoZXMgYSB0cmFuc2l0aW9uIGNvbWluZyBmcm9tIGFueSBzdGF0ZSBhbmQgZ29pbmcgdG8gYW55IHN1YnN0YXRlIG9mIGBteW1vZHVsZWBcbiAqIHZhciBtYXRjaCA9IHtcbiAqICAgdG86ICdteW1vZHVsZS4qKidcbiAqIH1cbiAqIGBgYFxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKiAvLyBUaGlzIG1hdGNoZXMgYSB0cmFuc2l0aW9uIGNvbWluZyBmcm9tIGFueSBzdGF0ZSBhbmQgZ29pbmcgdG8gYW55IHN0YXRlIHRoYXQgaGFzIGBkYXRhLmF1dGhSZXF1aXJlZGBcbiAqIC8vIHNldCB0byBhIHRydXRoeSB2YWx1ZS5cbiAqIHZhciBtYXRjaCA9IHtcbiAqICAgdG86IGZ1bmN0aW9uKHN0YXRlKSB7XG4gKiAgICAgcmV0dXJuIHN0YXRlLmRhdGEgIT0gbnVsbCAmJiBzdGF0ZS5kYXRhLmF1dGhSZXF1aXJlZCA9PT0gdHJ1ZTtcbiAqICAgfVxuICogfVxuICogYGBgXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqIC8vIFRoaXMgbWF0Y2hlcyBhIHRyYW5zaXRpb24gdGhhdCBpcyBleGl0aW5nIGBwYXJlbnQuY2hpbGRgXG4gKiB2YXIgbWF0Y2ggPSB7XG4gKiAgIGV4aXRpbmc6ICdwYXJlbnQuY2hpbGQnXG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBIb29rTWF0Y2hDcml0ZXJpYSB7XG4gIFtrZXk6IHN0cmluZ106IEhvb2tNYXRjaENyaXRlcmlvbiB8IHVuZGVmaW5lZDtcblxuICAvKiogQSBbW0hvb2tNYXRjaENyaXRlcmlvbl1dIHRvIG1hdGNoIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZSAqL1xuICB0bz86IEhvb2tNYXRjaENyaXRlcmlvbjtcbiAgLyoqIEEgW1tIb29rTWF0Y2hDcml0ZXJpb25dXSB0byBtYXRjaCB0aGUgb3JpZ2luYWwgKGZyb20pIHN0YXRlICovXG4gIGZyb20/OiBIb29rTWF0Y2hDcml0ZXJpb247XG4gIC8qKiBBIFtbSG9va01hdGNoQ3JpdGVyaW9uXV0gdG8gbWF0Y2ggYW55IHN0YXRlIHRoYXQgd291bGQgYmUgZXhpdGluZyAqL1xuICBleGl0aW5nPzogSG9va01hdGNoQ3JpdGVyaW9uO1xuICAvKiogQSBbW0hvb2tNYXRjaENyaXRlcmlvbl1dIHRvIG1hdGNoIGFueSBzdGF0ZSB0aGF0IHdvdWxkIGJlIHJldGFpbmVkICovXG4gIHJldGFpbmVkPzogSG9va01hdGNoQ3JpdGVyaW9uO1xuICAvKiogQSBbW0hvb2tNYXRjaENyaXRlcmlvbl1dIHRvIG1hdGNoIGFueSBzdGF0ZSB0aGF0IHdvdWxkIGJlIGVudGVyaW5nICovXG4gIGVudGVyaW5nPzogSG9va01hdGNoQ3JpdGVyaW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElNYXRjaGluZ05vZGVzIHtcbiAgW2tleTogc3RyaW5nXTogUGF0aE5vZGVbXTtcblxuICB0bzogUGF0aE5vZGVbXTtcbiAgZnJvbTogUGF0aE5vZGVbXTtcbiAgZXhpdGluZzogUGF0aE5vZGVbXTtcbiAgcmV0YWluZWQ6IFBhdGhOb2RlW107XG4gIGVudGVyaW5nOiBQYXRoTm9kZVtdO1xufVxuXG4vKiogQGhpZGRlbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWdpc3RlcmVkSG9va3Mge1xuICBba2V5OiBzdHJpbmddOiBSZWdpc3RlcmVkSG9va1tdO1xufVxuXG4vKiogQGhpZGRlbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXRoVHlwZXMge1xuICBba2V5OiBzdHJpbmddOiBQYXRoVHlwZTtcblxuICB0bzogUGF0aFR5cGU7XG4gIGZyb206IFBhdGhUeXBlO1xuICBleGl0aW5nOiBQYXRoVHlwZTtcbiAgcmV0YWluZWQ6IFBhdGhUeXBlO1xuICBlbnRlcmluZzogUGF0aFR5cGU7XG59XG5cbi8qKiBAaGlkZGVuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhdGhUeXBlIHtcbiAgbmFtZTogc3RyaW5nO1xuICBzY29wZTogVHJhbnNpdGlvbkhvb2tTY29wZTtcbn1cblxuLyoqXG4gKiBIb29rIENyaXRlcmlvbiB1c2VkIHRvIG1hdGNoIGEgdHJhbnNpdGlvbi5cbiAqXG4gKiBBIFtbR2xvYl1dIHN0cmluZyB0aGF0IG1hdGNoZXMgdGhlIG5hbWUgb2YgYSBzdGF0ZS5cbiAqXG4gKiBPciwgYSBmdW5jdGlvbiB3aXRoIHRoZSBzaWduYXR1cmUgYGZ1bmN0aW9uKHN0YXRlKSB7IHJldHVybiBtYXRjaGVzOyB9YFxuICogd2hpY2ggc2hvdWxkIHJldHVybiBhIGJvb2xlYW4gdG8gaW5kaWNhdGUgaWYgYSBzdGF0ZSBtYXRjaGVzLlxuICpcbiAqIE9yLCBgdHJ1ZWAgdG8gYWx3YXlzIG1hdGNoXG4gKi9cbmV4cG9ydCB0eXBlIEhvb2tNYXRjaENyaXRlcmlvbiA9IHN0cmluZyB8IElTdGF0ZU1hdGNoIHwgYm9vbGVhbjtcblxuZW51bSBUcmFuc2l0aW9uSG9va1BoYXNlIHtcbiAgQ1JFQVRFLFxuICBCRUZPUkUsXG4gIFJVTixcbiAgU1VDQ0VTUyxcbiAgRVJST1IsXG59XG5lbnVtIFRyYW5zaXRpb25Ib29rU2NvcGUge1xuICBUUkFOU0lUSU9OLFxuICBTVEFURSxcbn1cblxuZXhwb3J0IHsgVHJhbnNpdGlvbkhvb2tQaGFzZSwgVHJhbnNpdGlvbkhvb2tTY29wZSB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3RyYW5zaXRpb24vaW50ZXJmYWNlLnRzIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBzdGF0ZVxuICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuXG5pbXBvcnQgeyBTdGF0ZURlY2xhcmF0aW9uLCBTdGF0ZU9yTmFtZSwgVGFyZ2V0U3RhdGVEZWYgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uT3B0aW9ucyB9IGZyb20gJy4uL3RyYW5zaXRpb24vaW50ZXJmYWNlJztcbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJy4uL2NvbW1vbi9zdHJpbmdzJztcbmltcG9ydCB7IGV4dGVuZCB9IGZyb20gJy4uL2NvbW1vbic7XG5pbXBvcnQgeyBTdGF0ZVJlZ2lzdHJ5IH0gZnJvbSAnLi9zdGF0ZVJlZ2lzdHJ5JztcbmltcG9ydCB7IFJhd1BhcmFtcyB9IGZyb20gJy4uL3BhcmFtcyc7XG5cbi8qKlxuICogRW5jYXBzdWxhdGUgdGhlIHRhcmdldCAoZGVzdGluYXRpb24pIHN0YXRlL3BhcmFtcy9vcHRpb25zIG9mIGEgW1tUcmFuc2l0aW9uXV0uXG4gKlxuICogVGhpcyBjbGFzcyBpcyBmcmVxdWVudGx5IHVzZWQgdG8gcmVkaXJlY3QgYSB0cmFuc2l0aW9uIHRvIGEgbmV3IGRlc3RpbmF0aW9uLlxuICpcbiAqIFNlZTpcbiAqXG4gKiAtIFtbSG9va1Jlc3VsdF1dXG4gKiAtIFtbVHJhbnNpdGlvbkhvb2tGbl1dXG4gKiAtIFtbVHJhbnNpdGlvblNlcnZpY2Uub25TdGFydF1dXG4gKlxuICogVG8gY3JlYXRlIGEgYFRhcmdldFN0YXRlYCwgdXNlIFtbU3RhdGVTZXJ2aWNlLnRhcmdldF1dLlxuICpcbiAqIC0tLVxuICpcbiAqIFRoaXMgY2xhc3Mgd3JhcHM6XG4gKlxuICogMSkgYW4gaWRlbnRpZmllciBmb3IgYSBzdGF0ZVxuICogMikgYSBzZXQgb2YgcGFyYW1ldGVyc1xuICogMykgYW5kIHRyYW5zaXRpb24gb3B0aW9uc1xuICogNCkgdGhlIHJlZ2lzdGVyZWQgc3RhdGUgb2JqZWN0ICh0aGUgW1tTdGF0ZURlY2xhcmF0aW9uXV0pXG4gKlxuICogTWFueSBVSS1Sb3V0ZXIgQVBJcyBzdWNoIGFzIFtbU3RhdGVTZXJ2aWNlLmdvXV0gdGFrZSBhIFtbU3RhdGVPck5hbWVdXSBhcmd1bWVudCB3aGljaCBjYW5cbiAqIGVpdGhlciBiZSBhICpzdGF0ZSBvYmplY3QqIChhIFtbU3RhdGVEZWNsYXJhdGlvbl1dIG9yIFtbU3RhdGVPYmplY3RdXSkgb3IgYSAqc3RhdGUgbmFtZSogKGEgc3RyaW5nKS5cbiAqIFRoZSBgVGFyZ2V0U3RhdGVgIGNsYXNzIG5vcm1hbGl6ZXMgdGhvc2Ugb3B0aW9ucy5cbiAqXG4gKiBBIGBUYXJnZXRTdGF0ZWAgbWF5IGJlIHZhbGlkICh0aGUgc3RhdGUgYmVpbmcgdGFyZ2V0ZWQgZXhpc3RzIGluIHRoZSByZWdpc3RyeSlcbiAqIG9yIGludmFsaWQgKHRoZSBzdGF0ZSBiZWluZyB0YXJnZXRlZCBpcyBub3QgcmVnaXN0ZXJlZCkuXG4gKi9cbmV4cG9ydCBjbGFzcyBUYXJnZXRTdGF0ZSB7XG4gIHByaXZhdGUgX2RlZmluaXRpb246IFN0YXRlT2JqZWN0O1xuICBwcml2YXRlIF9wYXJhbXM6IFJhd1BhcmFtcztcbiAgcHJpdmF0ZSBfb3B0aW9uczogVHJhbnNpdGlvbk9wdGlvbnM7XG5cbiAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqZWN0IGhhcyBhIHN0YXRlIHByb3BlcnR5IHRoYXQgbWlnaHQgYmUgYSBzdGF0ZSBvciBzdGF0ZSBuYW1lICovXG4gIHN0YXRpYyBpc0RlZiA9IChvYmopOiBvYmogaXMgVGFyZ2V0U3RhdGVEZWYgPT4gb2JqICYmIG9iai5zdGF0ZSAmJiAoaXNTdHJpbmcob2JqLnN0YXRlKSB8fCBpc1N0cmluZyhvYmouc3RhdGUubmFtZSkpO1xuXG4gIC8qKlxuICAgKiBUaGUgVGFyZ2V0U3RhdGUgY29uc3RydWN0b3JcbiAgICpcbiAgICogTm90ZTogRG8gbm90IGNvbnN0cnVjdCBhIGBUYXJnZXRTdGF0ZWAgbWFudWFsbHkuXG4gICAqIFRvIGNyZWF0ZSBhIGBUYXJnZXRTdGF0ZWAsIHVzZSB0aGUgW1tTdGF0ZVNlcnZpY2UudGFyZ2V0XV0gZmFjdG9yeSBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSBfc3RhdGVSZWdpc3RyeSBUaGUgU3RhdGVSZWdpc3RyeSB0byB1c2UgdG8gbG9vayB1cCB0aGUgX2RlZmluaXRpb25cbiAgICogQHBhcmFtIF9pZGVudGlmaWVyIEFuIGlkZW50aWZpZXIgZm9yIGEgc3RhdGUuXG4gICAqICAgIEVpdGhlciBhIGZ1bGx5LXF1YWxpZmllZCBzdGF0ZSBuYW1lLCBvciB0aGUgb2JqZWN0IHVzZWQgdG8gZGVmaW5lIHRoZSBzdGF0ZS5cbiAgICogQHBhcmFtIF9wYXJhbXMgUGFyYW1ldGVycyBmb3IgdGhlIHRhcmdldCBzdGF0ZVxuICAgKiBAcGFyYW0gX29wdGlvbnMgVHJhbnNpdGlvbiBvcHRpb25zLlxuICAgKlxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX3N0YXRlUmVnaXN0cnk6IFN0YXRlUmVnaXN0cnksXG4gICAgcHJpdmF0ZSBfaWRlbnRpZmllcjogU3RhdGVPck5hbWUsXG4gICAgX3BhcmFtcz86IFJhd1BhcmFtcyxcbiAgICBfb3B0aW9ucz86IFRyYW5zaXRpb25PcHRpb25zLFxuICApIHtcbiAgICB0aGlzLl9pZGVudGlmaWVyID0gX2lkZW50aWZpZXI7XG4gICAgdGhpcy5fcGFyYW1zID0gZXh0ZW5kKHt9LCBfcGFyYW1zIHx8IHt9KTtcbiAgICB0aGlzLl9vcHRpb25zID0gZXh0ZW5kKHt9LCBfb3B0aW9ucyB8fCB7fSk7XG4gICAgdGhpcy5fZGVmaW5pdGlvbiA9IF9zdGF0ZVJlZ2lzdHJ5Lm1hdGNoZXIuZmluZChfaWRlbnRpZmllciwgdGhpcy5fb3B0aW9ucy5yZWxhdGl2ZSk7XG4gIH1cblxuICAvKiogVGhlIG5hbWUgb2YgdGhlIHN0YXRlIHRoaXMgb2JqZWN0IHRhcmdldHMgKi9cbiAgbmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAodGhpcy5fZGVmaW5pdGlvbiAmJiB0aGlzLl9kZWZpbml0aW9uLm5hbWUpIHx8IDxzdHJpbmc+dGhpcy5faWRlbnRpZmllcjtcbiAgfVxuXG4gIC8qKiBUaGUgaWRlbnRpZmllciB1c2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBUYXJnZXRTdGF0ZSAqL1xuICBpZGVudGlmaWVyKCk6IFN0YXRlT3JOYW1lIHtcbiAgICByZXR1cm4gdGhpcy5faWRlbnRpZmllcjtcbiAgfVxuXG4gIC8qKiBUaGUgdGFyZ2V0IHBhcmFtZXRlciB2YWx1ZXMgKi9cbiAgcGFyYW1zKCk6IFJhd1BhcmFtcyB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcmFtcztcbiAgfVxuXG4gIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgb2JqZWN0IChpZiBpdCB3YXMgZm91bmQpICovXG4gICRzdGF0ZSgpOiBTdGF0ZU9iamVjdCB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZmluaXRpb247XG4gIH1cblxuICAvKiogVGhlIGludGVybmFsIHN0YXRlIGRlY2xhcmF0aW9uIChpZiBpdCB3YXMgZm91bmQpICovXG4gIHN0YXRlKCk6IFN0YXRlRGVjbGFyYXRpb24ge1xuICAgIHJldHVybiB0aGlzLl9kZWZpbml0aW9uICYmIHRoaXMuX2RlZmluaXRpb24uc2VsZjtcbiAgfVxuXG4gIC8qKiBUaGUgdGFyZ2V0IG9wdGlvbnMgKi9cbiAgb3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgfVxuXG4gIC8qKiBUcnVlIGlmIHRoZSB0YXJnZXQgc3RhdGUgd2FzIGZvdW5kICovXG4gIGV4aXN0cygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISEodGhpcy5fZGVmaW5pdGlvbiAmJiB0aGlzLl9kZWZpbml0aW9uLnNlbGYpO1xuICB9XG5cbiAgLyoqIFRydWUgaWYgdGhlIG9iamVjdCBpcyB2YWxpZCAqL1xuICB2YWxpZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuZXJyb3IoKTtcbiAgfVxuXG4gIC8qKiBJZiB0aGUgb2JqZWN0IGlzIGludmFsaWQsIHJldHVybnMgdGhlIHJlYXNvbiB3aHkgKi9cbiAgZXJyb3IoKTogc3RyaW5nIHtcbiAgICBjb25zdCBiYXNlID0gPGFueT50aGlzLm9wdGlvbnMoKS5yZWxhdGl2ZTtcbiAgICBpZiAoIXRoaXMuX2RlZmluaXRpb24gJiYgISFiYXNlKSB7XG4gICAgICBjb25zdCBzdGF0ZU5hbWUgPSBiYXNlLm5hbWUgPyBiYXNlLm5hbWUgOiBiYXNlO1xuICAgICAgcmV0dXJuIGBDb3VsZCBub3QgcmVzb2x2ZSAnJHt0aGlzLm5hbWUoKX0nIGZyb20gc3RhdGUgJyR7c3RhdGVOYW1lfSdgO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2RlZmluaXRpb24pIHJldHVybiBgTm8gc3VjaCBzdGF0ZSAnJHt0aGlzLm5hbWUoKX0nYDtcbiAgICBpZiAoIXRoaXMuX2RlZmluaXRpb24uc2VsZikgcmV0dXJuIGBTdGF0ZSAnJHt0aGlzLm5hbWUoKX0nIGhhcyBhbiBpbnZhbGlkIGRlZmluaXRpb25gO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIGAnJHt0aGlzLm5hbWUoKX0nJHtzdHJpbmdpZnkodGhpcy5wYXJhbXMoKSl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIFRhcmdldFN0YXRlIHdoaWNoIHRhcmdldHMgYSBkaWZmZXJlbnQgc3RhdGUuXG4gICAqIFRoZSBuZXcgVGFyZ2V0U3RhdGUgaGFzIHRoZSBzYW1lIHBhcmFtZXRlciB2YWx1ZXMgYW5kIHRyYW5zaXRpb24gb3B0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHN0YXRlIFRoZSBuZXcgc3RhdGUgdGhhdCBzaG91bGQgYmUgdGFyZ2V0ZWRcbiAgICovXG4gIHdpdGhTdGF0ZShzdGF0ZTogU3RhdGVPck5hbWUpOiBUYXJnZXRTdGF0ZSB7XG4gICAgcmV0dXJuIG5ldyBUYXJnZXRTdGF0ZSh0aGlzLl9zdGF0ZVJlZ2lzdHJ5LCBzdGF0ZSwgdGhpcy5fcGFyYW1zLCB0aGlzLl9vcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIFRhcmdldFN0YXRlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgdGhlIG5ldyBwYXJhbWV0ZXIgdmFsdWVzIHRvIHVzZVxuICAgKiBAcGFyYW0gcmVwbGFjZSBXaGVuIGZhbHNlIChkZWZhdWx0KSB0aGUgbmV3IHBhcmFtZXRlciB2YWx1ZXMgd2lsbCBiZSBtZXJnZWQgd2l0aCB0aGUgY3VycmVudCB2YWx1ZXMuXG4gICAqICAgICAgICAgICAgICAgIFdoZW4gdHJ1ZSB0aGUgcGFyYW1ldGVyIHZhbHVlcyB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2YWx1ZXMuXG4gICAqL1xuICB3aXRoUGFyYW1zKHBhcmFtczogUmF3UGFyYW1zLCByZXBsYWNlID0gZmFsc2UpOiBUYXJnZXRTdGF0ZSB7XG4gICAgY29uc3QgbmV3UGFyYW1zOiBSYXdQYXJhbXMgPSByZXBsYWNlID8gcGFyYW1zIDogZXh0ZW5kKHt9LCB0aGlzLl9wYXJhbXMsIHBhcmFtcyk7XG4gICAgcmV0dXJuIG5ldyBUYXJnZXRTdGF0ZSh0aGlzLl9zdGF0ZVJlZ2lzdHJ5LCB0aGlzLl9pZGVudGlmaWVyLCBuZXdQYXJhbXMsIHRoaXMuX29wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb3B5IG9mIHRoaXMgVGFyZ2V0U3RhdGUsIHVzaW5nIHRoZSBzcGVjaWZpZWQgVHJhbnNpdGlvbiBPcHRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgbmV3IG9wdGlvbnMgdG8gdXNlXG4gICAqIEBwYXJhbSByZXBsYWNlIFdoZW4gZmFsc2UgKGRlZmF1bHQpIHRoZSBuZXcgb3B0aW9ucyB3aWxsIGJlIG1lcmdlZCB3aXRoIHRoZSBjdXJyZW50IG9wdGlvbnMuXG4gICAqICAgICAgICAgICAgICAgIFdoZW4gdHJ1ZSB0aGUgb3B0aW9ucyB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBvcHRpb25zLlxuICAgKi9cbiAgd2l0aE9wdGlvbnMob3B0aW9uczogVHJhbnNpdGlvbk9wdGlvbnMsIHJlcGxhY2UgPSBmYWxzZSk6IFRhcmdldFN0YXRlIHtcbiAgICBjb25zdCBuZXdPcHRzID0gcmVwbGFjZSA/IG9wdGlvbnMgOiBleHRlbmQoe30sIHRoaXMuX29wdGlvbnMsIG9wdGlvbnMpO1xuICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5fc3RhdGVSZWdpc3RyeSwgdGhpcy5faWRlbnRpZmllciwgdGhpcy5fcGFyYW1zLCBuZXdPcHRzKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3N0YXRlL3RhcmdldFN0YXRlLnRzIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBwYXJhbXNcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGV4dGVuZCwgZmlsdGVyLCBtYXAsIGFsbFRydWVSIH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBwcm9wIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBpc0luamVjdGFibGUsIGlzRGVmaW5lZCwgaXNTdHJpbmcsIGlzQXJyYXksIGlzVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgUmF3UGFyYW1zLCBQYXJhbURlY2xhcmF0aW9uIH0gZnJvbSAnLi4vcGFyYW1zL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgUGFyYW1UeXBlIH0gZnJvbSAnLi9wYXJhbVR5cGUnO1xuaW1wb3J0IHsgUGFyYW1UeXBlcyB9IGZyb20gJy4vcGFyYW1UeXBlcyc7XG5pbXBvcnQgeyBVcmxNYXRjaGVyRmFjdG9yeSB9IGZyb20gJy4uL3VybC91cmxNYXRjaGVyRmFjdG9yeSc7XG5cbi8qKiBAaGlkZGVuICovXG5jb25zdCBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKiogQGhpZGRlbiAqL1xuY29uc3QgaXNTaG9ydGhhbmQgPSAoY2ZnOiBQYXJhbURlY2xhcmF0aW9uKSA9PlxuICBbJ3ZhbHVlJywgJ3R5cGUnLCAnc3F1YXNoJywgJ2FycmF5JywgJ2R5bmFtaWMnXS5maWx0ZXIoaGFzT3duLmJpbmQoY2ZnIHx8IHt9KSkubGVuZ3RoID09PSAwO1xuXG4vKiogQGludGVybmFsYXBpICovXG5lbnVtIERlZlR5cGUge1xuICBQQVRILFxuICBTRUFSQ0gsXG4gIENPTkZJRyxcbn1cbmV4cG9ydCB7IERlZlR5cGUgfTtcblxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIHVud3JhcFNob3J0aGFuZChjZmc6IFBhcmFtRGVjbGFyYXRpb24pOiBQYXJhbURlY2xhcmF0aW9uIHtcbiAgY2ZnID0gKGlzU2hvcnRoYW5kKGNmZykgJiYgKHsgdmFsdWU6IGNmZyB9IGFzIGFueSkpIHx8IGNmZztcblxuICBnZXRTdGF0aWNEZWZhdWx0VmFsdWVbJ19fY2FjaGVhYmxlJ10gPSB0cnVlO1xuICBmdW5jdGlvbiBnZXRTdGF0aWNEZWZhdWx0VmFsdWUoKSB7XG4gICAgcmV0dXJuIGNmZy52YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBleHRlbmQoY2ZnLCB7XG4gICAgJCRmbjogaXNJbmplY3RhYmxlKGNmZy52YWx1ZSkgPyBjZmcudmFsdWUgOiBnZXRTdGF0aWNEZWZhdWx0VmFsdWUsXG4gIH0pO1xufVxuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gZ2V0VHlwZShjZmc6IFBhcmFtRGVjbGFyYXRpb24sIHVybFR5cGU6IFBhcmFtVHlwZSwgbG9jYXRpb246IERlZlR5cGUsIGlkOiBzdHJpbmcsIHBhcmFtVHlwZXM6IFBhcmFtVHlwZXMpIHtcbiAgaWYgKGNmZy50eXBlICYmIHVybFR5cGUgJiYgdXJsVHlwZS5uYW1lICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKGBQYXJhbSAnJHtpZH0nIGhhcyB0d28gdHlwZSBjb25maWd1cmF0aW9ucy5gKTtcbiAgaWYgKGNmZy50eXBlICYmIHVybFR5cGUgJiYgdXJsVHlwZS5uYW1lID09PSAnc3RyaW5nJyAmJiBwYXJhbVR5cGVzLnR5cGUoY2ZnLnR5cGUgYXMgc3RyaW5nKSlcbiAgICByZXR1cm4gcGFyYW1UeXBlcy50eXBlKGNmZy50eXBlIGFzIHN0cmluZyk7XG4gIGlmICh1cmxUeXBlKSByZXR1cm4gdXJsVHlwZTtcbiAgaWYgKCFjZmcudHlwZSkge1xuICAgIGNvbnN0IHR5cGUgPVxuICAgICAgbG9jYXRpb24gPT09IERlZlR5cGUuQ09ORklHXG4gICAgICAgID8gJ2FueSdcbiAgICAgICAgOiBsb2NhdGlvbiA9PT0gRGVmVHlwZS5QQVRIXG4gICAgICAgICAgPyAncGF0aCdcbiAgICAgICAgICA6IGxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSFxuICAgICAgICAgICAgPyAncXVlcnknXG4gICAgICAgICAgICA6ICdzdHJpbmcnO1xuICAgIHJldHVybiBwYXJhbVR5cGVzLnR5cGUodHlwZSk7XG4gIH1cbiAgcmV0dXJuIGNmZy50eXBlIGluc3RhbmNlb2YgUGFyYW1UeXBlID8gY2ZnLnR5cGUgOiBwYXJhbVR5cGVzLnR5cGUoY2ZnLnR5cGUgYXMgc3RyaW5nKTtcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIHJldHVybnMgZmFsc2UsIHRydWUsIG9yIHRoZSBzcXVhc2ggdmFsdWUgdG8gaW5kaWNhdGUgdGhlIFwiZGVmYXVsdCBwYXJhbWV0ZXIgdXJsIHNxdWFzaCBwb2xpY3lcIi5cbiAqL1xuZnVuY3Rpb24gZ2V0U3F1YXNoUG9saWN5KGNvbmZpZzogUGFyYW1EZWNsYXJhdGlvbiwgaXNPcHRpb25hbDogYm9vbGVhbiwgZGVmYXVsdFBvbGljeTogYm9vbGVhbiB8IHN0cmluZykge1xuICBjb25zdCBzcXVhc2ggPSBjb25maWcuc3F1YXNoO1xuICBpZiAoIWlzT3B0aW9uYWwgfHwgc3F1YXNoID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuICBpZiAoIWlzRGVmaW5lZChzcXVhc2gpIHx8IHNxdWFzaCA9PSBudWxsKSByZXR1cm4gZGVmYXVsdFBvbGljeTtcbiAgaWYgKHNxdWFzaCA9PT0gdHJ1ZSB8fCBpc1N0cmluZyhzcXVhc2gpKSByZXR1cm4gc3F1YXNoO1xuICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3F1YXNoIHBvbGljeTogJyR7c3F1YXNofScuIFZhbGlkIHBvbGljaWVzOiBmYWxzZSwgdHJ1ZSwgb3IgYXJiaXRyYXJ5IHN0cmluZ2ApO1xufVxuXG4vKiogQGludGVybmFsYXBpICovXG5mdW5jdGlvbiBnZXRSZXBsYWNlKGNvbmZpZzogUGFyYW1EZWNsYXJhdGlvbiwgYXJyYXlNb2RlOiBib29sZWFuLCBpc09wdGlvbmFsOiBib29sZWFuLCBzcXVhc2g6IHN0cmluZyB8IGJvb2xlYW4pIHtcbiAgY29uc3QgZGVmYXVsdFBvbGljeSA9IFtcbiAgICB7IGZyb206ICcnLCB0bzogaXNPcHRpb25hbCB8fCBhcnJheU1vZGUgPyB1bmRlZmluZWQgOiAnJyB9LFxuICAgIHsgZnJvbTogbnVsbCwgdG86IGlzT3B0aW9uYWwgfHwgYXJyYXlNb2RlID8gdW5kZWZpbmVkIDogJycgfSxcbiAgXTtcblxuICBjb25zdCByZXBsYWNlID0gaXNBcnJheShjb25maWcucmVwbGFjZSkgPyBjb25maWcucmVwbGFjZSA6IFtdO1xuICBpZiAoaXNTdHJpbmcoc3F1YXNoKSkgcmVwbGFjZS5wdXNoKHsgZnJvbTogc3F1YXNoLCB0bzogdW5kZWZpbmVkIH0pO1xuXG4gIGNvbnN0IGNvbmZpZ3VyZWRLZXlzID0gbWFwKHJlcGxhY2UsIHByb3AoJ2Zyb20nKSk7XG4gIHJldHVybiBmaWx0ZXIoZGVmYXVsdFBvbGljeSwgaXRlbSA9PiBjb25maWd1cmVkS2V5cy5pbmRleE9mKGl0ZW0uZnJvbSkgPT09IC0xKS5jb25jYXQocmVwbGFjZSk7XG59XG5cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbmV4cG9ydCBjbGFzcyBQYXJhbSB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6IFBhcmFtVHlwZTtcbiAgbG9jYXRpb246IERlZlR5cGU7XG4gIGlzT3B0aW9uYWw6IGJvb2xlYW47XG4gIGR5bmFtaWM6IGJvb2xlYW47XG4gIHJhdzogYm9vbGVhbjtcbiAgc3F1YXNoOiBib29sZWFuIHwgc3RyaW5nO1xuICByZXBsYWNlOiBbeyB0bzogYW55OyBmcm9tOiBhbnkgfV07XG4gIGluaGVyaXQ6IGJvb2xlYW47XG4gIGFycmF5OiBib29sZWFuO1xuICBjb25maWc6IGFueTtcbiAgLyoqIENhY2hlIHRoZSBkZWZhdWx0IHZhbHVlIGlmIGl0IGlzIGEgc3RhdGljIHZhbHVlICovXG4gIF9kZWZhdWx0VmFsdWVDYWNoZToge1xuICAgIGRlZmF1bHRWYWx1ZTogYW55O1xuICB9O1xuXG4gIHN0YXRpYyB2YWx1ZXMocGFyYW1zOiBQYXJhbVtdLCB2YWx1ZXM6IFJhd1BhcmFtcyA9IHt9KTogUmF3UGFyYW1zIHtcbiAgICBjb25zdCBwYXJhbVZhbHVlcyA9IHt9IGFzIFJhd1BhcmFtcztcbiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHBhcmFtcykge1xuICAgICAgcGFyYW1WYWx1ZXNbcGFyYW0uaWRdID0gcGFyYW0udmFsdWUodmFsdWVzW3BhcmFtLmlkXSk7XG4gICAgfVxuICAgIHJldHVybiBwYXJhbVZhbHVlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyBbW1BhcmFtXV0gb2JqZWN0cyB3aGljaCBoYXZlIGRpZmZlcmVudCBwYXJhbSB2YWx1ZXNcbiAgICpcbiAgICogRmlsdGVycyBhIGxpc3Qgb2YgW1tQYXJhbV1dIG9iamVjdHMgdG8gb25seSB0aG9zZSB3aG9zZSBwYXJhbWV0ZXIgdmFsdWVzIGRpZmZlciBpbiB0d28gcGFyYW0gdmFsdWUgb2JqZWN0c1xuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zOiBUaGUgbGlzdCBvZiBQYXJhbSBvYmplY3RzIHRvIGZpbHRlclxuICAgKiBAcGFyYW0gdmFsdWVzMTogVGhlIGZpcnN0IHNldCBvZiBwYXJhbWV0ZXIgdmFsdWVzXG4gICAqIEBwYXJhbSB2YWx1ZXMyOiB0aGUgc2Vjb25kIHNldCBvZiBwYXJhbWV0ZXIgdmFsdWVzXG4gICAqXG4gICAqIEByZXR1cm5zIGFueSBQYXJhbSBvYmplY3RzIHdob3NlIHZhbHVlcyB3ZXJlIGRpZmZlcmVudCBiZXR3ZWVuIHZhbHVlczEgYW5kIHZhbHVlczJcbiAgICovXG4gIHN0YXRpYyBjaGFuZ2VkKHBhcmFtczogUGFyYW1bXSwgdmFsdWVzMTogUmF3UGFyYW1zID0ge30sIHZhbHVlczI6IFJhd1BhcmFtcyA9IHt9KTogUGFyYW1bXSB7XG4gICAgcmV0dXJuIHBhcmFtcy5maWx0ZXIocGFyYW0gPT4gIXBhcmFtLnR5cGUuZXF1YWxzKHZhbHVlczFbcGFyYW0uaWRdLCB2YWx1ZXMyW3BhcmFtLmlkXSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0d28gcGFyYW0gdmFsdWUgb2JqZWN0cyBhcmUgZXF1YWwgKGZvciBhIHNldCBvZiBbW1BhcmFtXV0gb2JqZWN0cylcbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBUaGUgbGlzdCBvZiBbW1BhcmFtXV0gb2JqZWN0cyB0byBjaGVja1xuICAgKiBAcGFyYW0gdmFsdWVzMSBUaGUgZmlyc3Qgc2V0IG9mIHBhcmFtIHZhbHVlc1xuICAgKiBAcGFyYW0gdmFsdWVzMiBUaGUgc2Vjb25kIHNldCBvZiBwYXJhbSB2YWx1ZXNcbiAgICpcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcGFyYW0gdmFsdWVzIGluIHZhbHVlczEgYW5kIHZhbHVlczIgYXJlIGVxdWFsXG4gICAqL1xuICBzdGF0aWMgZXF1YWxzKHBhcmFtczogUGFyYW1bXSwgdmFsdWVzMSA9IHt9LCB2YWx1ZXMyID0ge30pOiBib29sZWFuIHtcbiAgICByZXR1cm4gUGFyYW0uY2hhbmdlZChwYXJhbXMsIHZhbHVlczEsIHZhbHVlczIpLmxlbmd0aCA9PT0gMDtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIHRydWUgaWYgYSB0aGUgcGFyYW1ldGVyIHZhbHVlcyBhcmUgdmFsaWQsIGFjY29yZGluZyB0byB0aGUgUGFyYW0gZGVmaW5pdGlvbnMgKi9cbiAgc3RhdGljIHZhbGlkYXRlcyhwYXJhbXM6IFBhcmFtW10sIHZhbHVlczogUmF3UGFyYW1zID0ge30pOiBib29sZWFuIHtcbiAgICByZXR1cm4gcGFyYW1zLm1hcChwYXJhbSA9PiBwYXJhbS52YWxpZGF0ZXModmFsdWVzW3BhcmFtLmlkXSkpLnJlZHVjZShhbGxUcnVlUiwgdHJ1ZSk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBpZDogc3RyaW5nLFxuICAgIHR5cGU6IFBhcmFtVHlwZSxcbiAgICBjb25maWc6IFBhcmFtRGVjbGFyYXRpb24sXG4gICAgbG9jYXRpb246IERlZlR5cGUsXG4gICAgdXJsTWF0Y2hlckZhY3Rvcnk6IFVybE1hdGNoZXJGYWN0b3J5LFxuICApIHtcbiAgICBjb25maWcgPSB1bndyYXBTaG9ydGhhbmQoY29uZmlnKTtcbiAgICB0eXBlID0gZ2V0VHlwZShjb25maWcsIHR5cGUsIGxvY2F0aW9uLCBpZCwgdXJsTWF0Y2hlckZhY3RvcnkucGFyYW1UeXBlcyk7XG4gICAgY29uc3QgYXJyYXlNb2RlID0gZ2V0QXJyYXlNb2RlKCk7XG4gICAgdHlwZSA9IGFycmF5TW9kZSA/IHR5cGUuJGFzQXJyYXkoYXJyYXlNb2RlLCBsb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0gpIDogdHlwZTtcbiAgICBjb25zdCBpc09wdGlvbmFsID0gY29uZmlnLnZhbHVlICE9PSB1bmRlZmluZWQgfHwgbG9jYXRpb24gPT09IERlZlR5cGUuU0VBUkNIO1xuICAgIGNvbnN0IGR5bmFtaWMgPSBpc0RlZmluZWQoY29uZmlnLmR5bmFtaWMpID8gISFjb25maWcuZHluYW1pYyA6ICEhdHlwZS5keW5hbWljO1xuICAgIGNvbnN0IHJhdyA9IGlzRGVmaW5lZChjb25maWcucmF3KSA/ICEhY29uZmlnLnJhdyA6ICEhdHlwZS5yYXc7XG4gICAgY29uc3Qgc3F1YXNoID0gZ2V0U3F1YXNoUG9saWN5KGNvbmZpZywgaXNPcHRpb25hbCwgdXJsTWF0Y2hlckZhY3RvcnkuZGVmYXVsdFNxdWFzaFBvbGljeSgpKTtcbiAgICBjb25zdCByZXBsYWNlID0gZ2V0UmVwbGFjZShjb25maWcsIGFycmF5TW9kZSwgaXNPcHRpb25hbCwgc3F1YXNoKTtcbiAgICBjb25zdCBpbmhlcml0ID0gaXNEZWZpbmVkKGNvbmZpZy5pbmhlcml0KSA/ICEhY29uZmlnLmluaGVyaXQgOiAhIXR5cGUuaW5oZXJpdDtcblxuICAgIC8vIGFycmF5IGNvbmZpZzogcGFyYW0gbmFtZSAocGFyYW1bXSkgb3ZlcnJpZGVzIGRlZmF1bHQgc2V0dGluZ3MuICBleHBsaWNpdCBjb25maWcgb3ZlcnJpZGVzIHBhcmFtIG5hbWUuXG4gICAgZnVuY3Rpb24gZ2V0QXJyYXlNb2RlKCkge1xuICAgICAgY29uc3QgYXJyYXlEZWZhdWx0cyA9IHsgYXJyYXk6IGxvY2F0aW9uID09PSBEZWZUeXBlLlNFQVJDSCA/ICdhdXRvJyA6IGZhbHNlIH07XG4gICAgICBjb25zdCBhcnJheVBhcmFtTm9tZW5jbGF0dXJlID0gaWQubWF0Y2goL1xcW1xcXSQvKSA/IHsgYXJyYXk6IHRydWUgfSA6IHt9O1xuICAgICAgcmV0dXJuIGV4dGVuZChhcnJheURlZmF1bHRzLCBhcnJheVBhcmFtTm9tZW5jbGF0dXJlLCBjb25maWcpLmFycmF5O1xuICAgIH1cblxuICAgIGV4dGVuZCh0aGlzLCB7IGlkLCB0eXBlLCBsb2NhdGlvbiwgaXNPcHRpb25hbCwgZHluYW1pYywgcmF3LCBzcXVhc2gsIHJlcGxhY2UsIGluaGVyaXQsIGFycmF5OiBhcnJheU1vZGUsIGNvbmZpZyB9KTtcbiAgfVxuXG4gIGlzRGVmYXVsdFZhbHVlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc09wdGlvbmFsICYmIHRoaXMudHlwZS5lcXVhbHModGhpcy52YWx1ZSgpLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogW0ludGVybmFsXSBHZXRzIHRoZSBkZWNvZGVkIHJlcHJlc2VudGF0aW9uIG9mIGEgdmFsdWUgaWYgdGhlIHZhbHVlIGlzIGRlZmluZWQsIG90aGVyd2lzZSwgcmV0dXJucyB0aGVcbiAgICogZGVmYXVsdCB2YWx1ZSwgd2hpY2ggbWF5IGJlIHRoZSByZXN1bHQgb2YgYW4gaW5qZWN0YWJsZSBmdW5jdGlvbi5cbiAgICovXG4gIHZhbHVlKHZhbHVlPzogYW55KTogYW55IHtcbiAgICAvKipcbiAgICAgKiBbSW50ZXJuYWxdIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHBhcmFtZXRlciwgd2hpY2ggbWF5IGJlIGFuIGluamVjdGFibGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgY29uc3QgZ2V0RGVmYXVsdFZhbHVlID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2RlZmF1bHRWYWx1ZUNhY2hlKSByZXR1cm4gdGhpcy5fZGVmYXVsdFZhbHVlQ2FjaGUuZGVmYXVsdFZhbHVlO1xuXG4gICAgICBpZiAoIXNlcnZpY2VzLiRpbmplY3RvcikgdGhyb3cgbmV3IEVycm9yKCdJbmplY3RhYmxlIGZ1bmN0aW9ucyBjYW5ub3QgYmUgY2FsbGVkIGF0IGNvbmZpZ3VyYXRpb24gdGltZScpO1xuXG4gICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKHRoaXMuY29uZmlnLiQkZm4pO1xuXG4gICAgICBpZiAoZGVmYXVsdFZhbHVlICE9PSBudWxsICYmIGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmICF0aGlzLnR5cGUuaXMoZGVmYXVsdFZhbHVlKSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBEZWZhdWx0IHZhbHVlICgke2RlZmF1bHRWYWx1ZX0pIGZvciBwYXJhbWV0ZXIgJyR7dGhpcy5pZH0nIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBQYXJhbVR5cGUgKCR7XG4gICAgICAgICAgICB0aGlzLnR5cGUubmFtZVxuICAgICAgICAgIH0pYCxcbiAgICAgICAgKTtcblxuICAgICAgaWYgKHRoaXMuY29uZmlnLiQkZm5bJ19fY2FjaGVhYmxlJ10pIHtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFZhbHVlQ2FjaGUgPSB7IGRlZmF1bHRWYWx1ZSB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH07XG5cbiAgICBjb25zdCByZXBsYWNlU3BlY2lhbFZhbHVlcyA9ICh2YWw6IGFueSkgPT4ge1xuICAgICAgZm9yIChjb25zdCB0dXBsZSBvZiB0aGlzLnJlcGxhY2UpIHtcbiAgICAgICAgaWYgKHR1cGxlLmZyb20gPT09IHZhbCkgcmV0dXJuIHR1cGxlLnRvO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xuXG4gICAgdmFsdWUgPSByZXBsYWNlU3BlY2lhbFZhbHVlcyh2YWx1ZSk7XG5cbiAgICByZXR1cm4gaXNVbmRlZmluZWQodmFsdWUpID8gZ2V0RGVmYXVsdFZhbHVlKCkgOiB0aGlzLnR5cGUuJG5vcm1hbGl6ZSh2YWx1ZSk7XG4gIH1cblxuICBpc1NlYXJjaCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhdGlvbiA9PT0gRGVmVHlwZS5TRUFSQ0g7XG4gIH1cblxuICB2YWxpZGF0ZXModmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICAgIC8vIFRoZXJlIHdhcyBubyBwYXJhbWV0ZXIgdmFsdWUsIGJ1dCB0aGUgcGFyYW0gaXMgb3B0aW9uYWxcbiAgICBpZiAoKGlzVW5kZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gbnVsbCkgJiYgdGhpcy5pc09wdGlvbmFsKSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFRoZSB2YWx1ZSB3YXMgbm90IG9mIHRoZSBjb3JyZWN0IFBhcmFtVHlwZSwgYW5kIGNvdWxkIG5vdCBiZSBkZWNvZGVkIHRvIHRoZSBjb3JyZWN0IFBhcmFtVHlwZVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLnR5cGUuJG5vcm1hbGl6ZSh2YWx1ZSk7XG4gICAgaWYgKCF0aGlzLnR5cGUuaXMobm9ybWFsaXplZCkpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFRoZSB2YWx1ZSB3YXMgb2YgdGhlIGNvcnJlY3QgdHlwZSwgYnV0IHdoZW4gZW5jb2RlZCwgZGlkIG5vdCBtYXRjaCB0aGUgUGFyYW1UeXBlJ3MgcmVnZXhwXG4gICAgY29uc3QgZW5jb2RlZCA9IHRoaXMudHlwZS5lbmNvZGUobm9ybWFsaXplZCk7XG4gICAgcmV0dXJuICEoaXNTdHJpbmcoZW5jb2RlZCkgJiYgIXRoaXMudHlwZS5wYXR0ZXJuLmV4ZWMoPHN0cmluZz5lbmNvZGVkKSk7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYHtQYXJhbToke3RoaXMuaWR9ICR7dGhpcy50eXBlfSBzcXVhc2g6ICcke3RoaXMuc3F1YXNofScgb3B0aW9uYWw6ICR7dGhpcy5pc09wdGlvbmFsfX1gO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvcGFyYW1zL3BhcmFtLnRzIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB0cmFuc2l0aW9uXG4gKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2tPcHRpb25zLCBIb29rUmVzdWx0LCBUcmFuc2l0aW9uSG9va1BoYXNlIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgZGVmYXVsdHMsIG5vb3AsIHNpbGVudFJlamVjdGlvbiB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgZm5Ub1N0cmluZywgbWF4TGVuZ3RoIH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgaXNQcm9taXNlIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgaXMsIHBhcnNlIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyB0cmFjZSB9IGZyb20gJy4uL2NvbW1vbi90cmFjZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgUmVqZWN0aW9uIH0gZnJvbSAnLi9yZWplY3RGYWN0b3J5JztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvdGFyZ2V0U3RhdGUnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uRXZlbnRUeXBlIH0gZnJvbSAnLi90cmFuc2l0aW9uRXZlbnRUeXBlJztcbmltcG9ydCB7IFJlZ2lzdGVyZWRIb29rIH0gZnJvbSAnLi9ob29rUmVnaXN0cnknO1xuaW1wb3J0IHsgU3RhdGVEZWNsYXJhdGlvbiB9IGZyb20gJy4uL3N0YXRlL2ludGVyZmFjZSc7XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBUcmFuc2l0aW9uSG9va09wdGlvbnMgPSB7XG4gIGN1cnJlbnQ6IG5vb3AsXG4gIHRyYW5zaXRpb246IG51bGwsXG4gIHRyYWNlRGF0YToge30sXG4gIGJpbmQ6IG51bGwsXG59O1xuXG5leHBvcnQgdHlwZSBHZXRSZXN1bHRIYW5kbGVyID0gKGhvb2s6IFRyYW5zaXRpb25Ib29rKSA9PiBSZXN1bHRIYW5kbGVyO1xuZXhwb3J0IHR5cGUgR2V0RXJyb3JIYW5kbGVyID0gKGhvb2s6IFRyYW5zaXRpb25Ib29rKSA9PiBFcnJvckhhbmRsZXI7XG5cbmV4cG9ydCB0eXBlIFJlc3VsdEhhbmRsZXIgPSAocmVzdWx0OiBIb29rUmVzdWx0KSA9PiBQcm9taXNlPEhvb2tSZXN1bHQ+O1xuZXhwb3J0IHR5cGUgRXJyb3JIYW5kbGVyID0gKGVycm9yOiBhbnkpID0+IFByb21pc2U8YW55PjtcblxuLyoqIEBoaWRkZW4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2l0aW9uSG9vayB7XG4gIHR5cGU6IFRyYW5zaXRpb25FdmVudFR5cGU7XG5cbiAgLyoqXG4gICAqIFRoZXNlIEdldFJlc3VsdEhhbmRsZXIocykgYXJlIHVzZWQgYnkgW1tpbnZva2VIb29rXV0gYmVsb3dcbiAgICogRWFjaCBIb29rVHlwZSBjaG9vc2VzIGEgR2V0UmVzdWx0SGFuZGxlciAoU2VlOiBbW1RyYW5zaXRpb25TZXJ2aWNlLl9kZWZpbmVDb3JlRXZlbnRzXV0pXG4gICAqL1xuICBzdGF0aWMgSEFORExFX1JFU1VMVDogR2V0UmVzdWx0SGFuZGxlciA9IChob29rOiBUcmFuc2l0aW9uSG9vaykgPT4gKHJlc3VsdDogSG9va1Jlc3VsdCkgPT5cbiAgICBob29rLmhhbmRsZUhvb2tSZXN1bHQocmVzdWx0KTtcblxuICAvKipcbiAgICogSWYgdGhlIHJlc3VsdCBpcyBhIHByb21pc2UgcmVqZWN0aW9uLCBsb2cgaXQuXG4gICAqIE90aGVyd2lzZSwgaWdub3JlIHRoZSByZXN1bHQuXG4gICAqL1xuICBzdGF0aWMgTE9HX1JFSkVDVEVEX1JFU1VMVDogR2V0UmVzdWx0SGFuZGxlciA9IChob29rOiBUcmFuc2l0aW9uSG9vaykgPT4gKHJlc3VsdDogSG9va1Jlc3VsdCkgPT4ge1xuICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIHJlc3VsdC5jYXRjaChlcnIgPT4gaG9vay5sb2dFcnJvcihSZWplY3Rpb24ubm9ybWFsaXplKGVycikpKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGVzZSBHZXRFcnJvckhhbmRsZXIocykgYXJlIHVzZWQgYnkgW1tpbnZva2VIb29rXV0gYmVsb3dcbiAgICogRWFjaCBIb29rVHlwZSBjaG9vc2VzIGEgR2V0RXJyb3JIYW5kbGVyIChTZWU6IFtbVHJhbnNpdGlvblNlcnZpY2UuX2RlZmluZUNvcmVFdmVudHNdXSlcbiAgICovXG4gIHN0YXRpYyBMT0dfRVJST1I6IEdldEVycm9ySGFuZGxlciA9IChob29rOiBUcmFuc2l0aW9uSG9vaykgPT4gKGVycm9yOiBhbnkpID0+IGhvb2subG9nRXJyb3IoZXJyb3IpO1xuXG4gIHN0YXRpYyBSRUpFQ1RfRVJST1I6IEdldEVycm9ySGFuZGxlciA9IChob29rOiBUcmFuc2l0aW9uSG9vaykgPT4gKGVycm9yOiBhbnkpID0+IHNpbGVudFJlamVjdGlvbihlcnJvcik7XG5cbiAgc3RhdGljIFRIUk9XX0VSUk9SOiBHZXRFcnJvckhhbmRsZXIgPSAoaG9vazogVHJhbnNpdGlvbkhvb2spID0+IChlcnJvcjogYW55KSA9PiB7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoYWlucyB0b2dldGhlciBhbiBhcnJheSBvZiBUcmFuc2l0aW9uSG9va3MuXG4gICAqXG4gICAqIEdpdmVuIGEgbGlzdCBvZiBbW1RyYW5zaXRpb25Ib29rXV0gb2JqZWN0cywgY2hhaW5zIHRoZW0gdG9nZXRoZXIuXG4gICAqIEVhY2ggaG9vayBpcyBpbnZva2VkIGFmdGVyIHRoZSBwcmV2aW91cyBvbmUgY29tcGxldGVzLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHZhciBob29rczogVHJhbnNpdGlvbkhvb2tbXSA9IGdldEhvb2tzKCk7XG4gICAqIGxldCBwcm9taXNlOiBQcm9taXNlPGFueT4gPSBUcmFuc2l0aW9uSG9vay5jaGFpbihob29rcyk7XG4gICAqXG4gICAqIHByb21pc2UudGhlbihoYW5kbGVTdWNjZXNzLCBoYW5kbGVFcnJvcik7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaG9va3MgdGhlIGxpc3Qgb2YgaG9va3MgdG8gY2hhaW4gdG9nZXRoZXJcbiAgICogQHBhcmFtIHdhaXRGb3IgaWYgcHJvdmlkZWQsIHRoZSBjaGFpbiBpcyBgLnRoZW4oKWAnZWQgb2ZmIHRoaXMgcHJvbWlzZVxuICAgKiBAcmV0dXJucyBhIGBQcm9taXNlYCBmb3Igc2VxdWVudGlhbGx5IGludm9raW5nIHRoZSBob29rcyAoaW4gb3JkZXIpXG4gICAqL1xuICBzdGF0aWMgY2hhaW4oaG9va3M6IFRyYW5zaXRpb25Ib29rW10sIHdhaXRGb3I/OiBQcm9taXNlPGFueT4pOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIENoYWluIHRoZSBuZXh0IGhvb2sgb2ZmIHRoZSBwcmV2aW91c1xuICAgIGNvbnN0IGNyZWF0ZUhvb2tDaGFpblIgPSAocHJldjogUHJvbWlzZTxhbnk+LCBuZXh0SG9vazogVHJhbnNpdGlvbkhvb2spID0+IHByZXYudGhlbigoKSA9PiBuZXh0SG9vay5pbnZva2VIb29rKCkpO1xuICAgIHJldHVybiBob29rcy5yZWR1Y2UoY3JlYXRlSG9va0NoYWluUiwgd2FpdEZvciB8fCBzZXJ2aWNlcy4kcS53aGVuKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZXMgYWxsIHRoZSBwcm92aWRlZCBUcmFuc2l0aW9uSG9va3MsIGluIG9yZGVyLlxuICAgKiBFYWNoIGhvb2sncyByZXR1cm4gdmFsdWUgaXMgY2hlY2tlZC5cbiAgICogSWYgYW55IGhvb2sgcmV0dXJucyBhIHByb21pc2UsIHRoZW4gdGhlIHJlc3Qgb2YgdGhlIGhvb2tzIGFyZSBjaGFpbmVkIG9mZiB0aGF0IHByb21pc2UsIGFuZCB0aGUgcHJvbWlzZSBpcyByZXR1cm5lZC5cbiAgICogSWYgbm8gaG9vayByZXR1cm5zIGEgcHJvbWlzZSwgdGhlbiBhbGwgaG9va3MgYXJlIHByb2Nlc3NlZCBzeW5jaHJvbm91c2x5LlxuICAgKlxuICAgKiBAcGFyYW0gaG9va3MgdGhlIGxpc3Qgb2YgVHJhbnNpdGlvbkhvb2tzIHRvIGludm9rZVxuICAgKiBAcGFyYW0gZG9uZUNhbGxiYWNrIGEgY2FsbGJhY2sgdGhhdCBpcyBpbnZva2VkIGFmdGVyIGFsbCB0aGUgaG9va3MgaGF2ZSBzdWNjZXNzZnVsbHkgY29tcGxldGVkXG4gICAqXG4gICAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIGFzeW5jIHJlc3VsdCwgb3IgdGhlIHJlc3VsdCBvZiB0aGUgY2FsbGJhY2tcbiAgICovXG4gIHN0YXRpYyBpbnZva2VIb29rczxUPihob29rczogVHJhbnNpdGlvbkhvb2tbXSwgZG9uZUNhbGxiYWNrOiAocmVzdWx0PzogSG9va1Jlc3VsdCkgPT4gVCk6IFByb21pc2U8YW55PiB8IFQge1xuICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGhvb2tzLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgIGNvbnN0IGhvb2tSZXN1bHQgPSBob29rc1tpZHhdLmludm9rZUhvb2soKTtcblxuICAgICAgaWYgKGlzUHJvbWlzZShob29rUmVzdWx0KSkge1xuICAgICAgICBjb25zdCByZW1haW5pbmdIb29rcyA9IGhvb2tzLnNsaWNlKGlkeCArIDEpO1xuXG4gICAgICAgIHJldHVybiBUcmFuc2l0aW9uSG9vay5jaGFpbihyZW1haW5pbmdIb29rcywgaG9va1Jlc3VsdCkudGhlbihkb25lQ2FsbGJhY2spO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkb25lQ2FsbGJhY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW4gYWxsIFRyYW5zaXRpb25Ib29rcywgaWdub3JpbmcgdGhlaXIgcmV0dXJuIHZhbHVlLlxuICAgKi9cbiAgc3RhdGljIHJ1bkFsbEhvb2tzKGhvb2tzOiBUcmFuc2l0aW9uSG9va1tdKTogdm9pZCB7XG4gICAgaG9va3MuZm9yRWFjaChob29rID0+IGhvb2suaW52b2tlSG9vaygpKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgdHJhbnNpdGlvbjogVHJhbnNpdGlvbixcbiAgICBwcml2YXRlIHN0YXRlQ29udGV4dDogU3RhdGVEZWNsYXJhdGlvbixcbiAgICBwcml2YXRlIHJlZ2lzdGVyZWRIb29rOiBSZWdpc3RlcmVkSG9vayxcbiAgICBwcml2YXRlIG9wdGlvbnM6IFRyYW5zaXRpb25Ib29rT3B0aW9ucyxcbiAgKSB7XG4gICAgdGhpcy5vcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgZGVmYXVsdE9wdGlvbnMpO1xuICAgIHRoaXMudHlwZSA9IHJlZ2lzdGVyZWRIb29rLmV2ZW50VHlwZTtcbiAgfVxuXG4gIHByaXZhdGUgaXNTdXBlcnNlZGVkID0gKCkgPT4gdGhpcy50eXBlLmhvb2tQaGFzZSA9PT0gVHJhbnNpdGlvbkhvb2tQaGFzZS5SVU4gJiYgIXRoaXMub3B0aW9ucy50cmFuc2l0aW9uLmlzQWN0aXZlKCk7XG5cbiAgbG9nRXJyb3IoZXJyKTogYW55IHtcbiAgICB0aGlzLnRyYW5zaXRpb24ucm91dGVyLnN0YXRlU2VydmljZS5kZWZhdWx0RXJyb3JIYW5kbGVyKCkoZXJyKTtcbiAgfVxuXG4gIGludm9rZUhvb2soKTogUHJvbWlzZTxIb29rUmVzdWx0PiB8IHZvaWQge1xuICAgIGNvbnN0IGhvb2sgPSB0aGlzLnJlZ2lzdGVyZWRIb29rO1xuICAgIGlmIChob29rLl9kZXJlZ2lzdGVyZWQpIHJldHVybjtcblxuICAgIGNvbnN0IG5vdEN1cnJlbnQgPSB0aGlzLmdldE5vdEN1cnJlbnRSZWplY3Rpb24oKTtcbiAgICBpZiAobm90Q3VycmVudCkgcmV0dXJuIG5vdEN1cnJlbnQ7XG5cbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIHRyYWNlLnRyYWNlSG9va0ludm9jYXRpb24odGhpcywgdGhpcy50cmFuc2l0aW9uLCBvcHRpb25zKTtcblxuICAgIGNvbnN0IGludm9rZUNhbGxiYWNrID0gKCkgPT4gaG9vay5jYWxsYmFjay5jYWxsKG9wdGlvbnMuYmluZCwgdGhpcy50cmFuc2l0aW9uLCB0aGlzLnN0YXRlQ29udGV4dCk7XG5cbiAgICBjb25zdCBub3JtYWxpemVFcnIgPSBlcnIgPT4gUmVqZWN0aW9uLm5vcm1hbGl6ZShlcnIpLnRvUHJvbWlzZSgpO1xuXG4gICAgY29uc3QgaGFuZGxlRXJyb3IgPSBlcnIgPT4gaG9vay5ldmVudFR5cGUuZ2V0RXJyb3JIYW5kbGVyKHRoaXMpKGVycik7XG5cbiAgICBjb25zdCBoYW5kbGVSZXN1bHQgPSByZXN1bHQgPT4gaG9vay5ldmVudFR5cGUuZ2V0UmVzdWx0SGFuZGxlcih0aGlzKShyZXN1bHQpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGludm9rZUNhbGxiYWNrKCk7XG5cbiAgICAgIGlmICghdGhpcy50eXBlLnN5bmNocm9ub3VzICYmIGlzUHJvbWlzZShyZXN1bHQpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQuY2F0Y2gobm9ybWFsaXplRXJyKS50aGVuKGhhbmRsZVJlc3VsdCwgaGFuZGxlRXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChyZXN1bHQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gSWYgY2FsbGJhY2sgdGhyb3dzIChzeW5jaHJvbm91c2x5KVxuICAgICAgcmV0dXJuIGhhbmRsZUVycm9yKFJlamVjdGlvbi5ub3JtYWxpemUoZXJyKSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChob29rLmludm9rZUxpbWl0ICYmICsraG9vay5pbnZva2VDb3VudCA+PSBob29rLmludm9rZUxpbWl0KSB7XG4gICAgICAgIGhvb2suZGVyZWdpc3RlcigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBoYW5kbGVzIHRoZSByZXR1cm4gdmFsdWUgb2YgYSBUcmFuc2l0aW9uIEhvb2suXG4gICAqXG4gICAqIEEgaG9vayBjYW4gcmV0dXJuIGZhbHNlIChjYW5jZWwpLCBhIFRhcmdldFN0YXRlIChyZWRpcmVjdCksXG4gICAqIG9yIGEgcHJvbWlzZSAod2hpY2ggbWF5IGxhdGVyIHJlc29sdmUgdG8gZmFsc2Ugb3IgYSByZWRpcmVjdClcbiAgICpcbiAgICogVGhpcyBhbHNvIGhhbmRsZXMgXCJ0cmFuc2l0aW9uIHN1cGVyc2VkZWRcIiAtLSB3aGVuIGEgbmV3IHRyYW5zaXRpb25cbiAgICogd2FzIHN0YXJ0ZWQgd2hpbGUgdGhlIGhvb2sgd2FzIHN0aWxsIHJ1bm5pbmdcbiAgICovXG4gIGhhbmRsZUhvb2tSZXN1bHQocmVzdWx0OiBIb29rUmVzdWx0KTogUHJvbWlzZTxIb29rUmVzdWx0PiB7XG4gICAgY29uc3Qgbm90Q3VycmVudCA9IHRoaXMuZ2V0Tm90Q3VycmVudFJlamVjdGlvbigpO1xuICAgIGlmIChub3RDdXJyZW50KSByZXR1cm4gbm90Q3VycmVudDtcblxuICAgIC8vIEhvb2sgcmV0dXJuZWQgYSBwcm9taXNlXG4gICAgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7XG4gICAgICAvLyBXYWl0IGZvciB0aGUgcHJvbWlzZSwgdGhlbiByZXByb2Nlc3Mgd2l0aCB0aGUgcmVzdWx0aW5nIHZhbHVlXG4gICAgICByZXR1cm4gcmVzdWx0LnRoZW4odmFsID0+IHRoaXMuaGFuZGxlSG9va1Jlc3VsdCh2YWwpKTtcbiAgICB9XG5cbiAgICB0cmFjZS50cmFjZUhvb2tSZXN1bHQocmVzdWx0LCB0aGlzLnRyYW5zaXRpb24sIHRoaXMub3B0aW9ucyk7XG5cbiAgICAvLyBIb29rIHJldHVybmVkIGZhbHNlXG4gICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgIC8vIEFib3J0IHRoaXMgVHJhbnNpdGlvblxuICAgICAgcmV0dXJuIFJlamVjdGlvbi5hYm9ydGVkKCdIb29rIGFib3J0ZWQgdHJhbnNpdGlvbicpLnRvUHJvbWlzZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGlzVGFyZ2V0U3RhdGUgPSBpcyhUYXJnZXRTdGF0ZSk7XG4gICAgLy8gaG9vayByZXR1cm5lZCBhIFRhcmdldFN0YXRlXG4gICAgaWYgKGlzVGFyZ2V0U3RhdGUocmVzdWx0KSkge1xuICAgICAgLy8gSGFsdCB0aGUgY3VycmVudCBUcmFuc2l0aW9uIGFuZCByZWRpcmVjdCAoYSBuZXcgVHJhbnNpdGlvbikgdG8gdGhlIFRhcmdldFN0YXRlLlxuICAgICAgcmV0dXJuIFJlamVjdGlvbi5yZWRpcmVjdGVkKHJlc3VsdCkudG9Qcm9taXNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhIFJlamVjdGlvbiBwcm9taXNlIGlmIHRoZSB0cmFuc2l0aW9uIGlzIG5vIGxvbmdlciBjdXJyZW50IGR1ZVxuICAgKiB0byBhIHN0b3BwZWQgcm91dGVyIChkaXNwb3NlZCksIG9yIGEgbmV3IHRyYW5zaXRpb24gaGFzIHN0YXJ0ZWQgYW5kIHN1cGVyc2VkZWQgdGhpcyBvbmUuXG4gICAqL1xuICBwcml2YXRlIGdldE5vdEN1cnJlbnRSZWplY3Rpb24oKSB7XG4gICAgY29uc3Qgcm91dGVyID0gdGhpcy50cmFuc2l0aW9uLnJvdXRlcjtcblxuICAgIC8vIFRoZSByb3V0ZXIgaXMgc3RvcHBlZFxuICAgIGlmIChyb3V0ZXIuX2Rpc3Bvc2VkKSB7XG4gICAgICByZXR1cm4gUmVqZWN0aW9uLmFib3J0ZWQoYFVJUm91dGVyIGluc3RhbmNlICMke3JvdXRlci4kaWR9IGhhcyBiZWVuIHN0b3BwZWQgKGRpc3Bvc2VkKWApLnRvUHJvbWlzZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRyYW5zaXRpb24uX2Fib3J0ZWQpIHtcbiAgICAgIHJldHVybiBSZWplY3Rpb24uYWJvcnRlZCgpLnRvUHJvbWlzZSgpO1xuICAgIH1cblxuICAgIC8vIFRoaXMgdHJhbnNpdGlvbiBpcyBubyBsb25nZXIgY3VycmVudC5cbiAgICAvLyBBbm90aGVyIHRyYW5zaXRpb24gc3RhcnRlZCB3aGlsZSB0aGlzIGhvb2sgd2FzIHN0aWxsIHJ1bm5pbmcuXG4gICAgaWYgKHRoaXMuaXNTdXBlcnNlZGVkKCkpIHtcbiAgICAgIC8vIEFib3J0IHRoaXMgdHJhbnNpdGlvblxuICAgICAgcmV0dXJuIFJlamVjdGlvbi5zdXBlcnNlZGVkKHRoaXMub3B0aW9ucy5jdXJyZW50KCkpLnRvUHJvbWlzZSgpO1xuICAgIH1cbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGNvbnN0IHsgb3B0aW9ucywgcmVnaXN0ZXJlZEhvb2sgfSA9IHRoaXM7XG4gICAgY29uc3QgZXZlbnQgPSBwYXJzZSgndHJhY2VEYXRhLmhvb2tUeXBlJykob3B0aW9ucykgfHwgJ2ludGVybmFsJyxcbiAgICAgIGNvbnRleHQgPSBwYXJzZSgndHJhY2VEYXRhLmNvbnRleHQuc3RhdGUubmFtZScpKG9wdGlvbnMpIHx8IHBhcnNlKCd0cmFjZURhdGEuY29udGV4dCcpKG9wdGlvbnMpIHx8ICd1bmtub3duJyxcbiAgICAgIG5hbWUgPSBmblRvU3RyaW5nKHJlZ2lzdGVyZWRIb29rLmNhbGxiYWNrKTtcbiAgICByZXR1cm4gYCR7ZXZlbnR9IGNvbnRleHQ6ICR7Y29udGV4dH0sICR7bWF4TGVuZ3RoKDIwMCwgbmFtZSl9YDtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3RyYW5zaXRpb24vdHJhbnNpdGlvbkhvb2sudHMiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHJlc29sdmVcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGV4dGVuZCwgZXF1YWxzLCBpbkFycmF5LCBpZGVudGl0eSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IFJlc29sdmVQb2xpY3ksIFJlc29sdmFibGVMaXRlcmFsLCByZXNvbHZlUG9saWNpZXMgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbmltcG9ydCB7IFJlc29sdmVDb250ZXh0IH0gZnJvbSAnLi9yZXNvbHZlQ29udGV4dCc7XG5pbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tICcuLi9jb21tb24vc3RyaW5ncyc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uLCBpc09iamVjdCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyBQYXRoTm9kZSB9IGZyb20gJy4uL3BhdGgvcGF0aE5vZGUnO1xuaW1wb3J0IHsgaXNOdWxsT3JVbmRlZmluZWQgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5cbi8vIFRPRE86IGV4cGxpY2l0bHkgbWFrZSB0aGlzIHVzZXIgY29uZmlndXJhYmxlXG5leHBvcnQgbGV0IGRlZmF1bHRSZXNvbHZlUG9saWN5OiBSZXNvbHZlUG9saWN5ID0ge1xuICB3aGVuOiAnTEFaWScsXG4gIGFzeW5jOiAnV0FJVCcsXG59O1xuXG4vKipcbiAqIFRoZSBiYXNpYyBidWlsZGluZyBibG9jayBmb3IgdGhlIHJlc29sdmUgc3lzdGVtLlxuICpcbiAqIFJlc29sdmFibGVzIGVuY2Fwc3VsYXRlIGEgc3RhdGUncyByZXNvbHZlJ3MgcmVzb2x2ZUZuLCB0aGUgcmVzb2x2ZUZuJ3MgZGVjbGFyZWQgZGVwZW5kZW5jaWVzLCB0aGUgd3JhcHBlZCAoLnByb21pc2UpLFxuICogYW5kIHRoZSB1bndyYXBwZWQtd2hlbi1jb21wbGV0ZSAoLmRhdGEpIHJlc3VsdCBvZiB0aGUgcmVzb2x2ZUZuLlxuICpcbiAqIFJlc29sdmFibGUuZ2V0KCkgZWl0aGVyIHJldHJpZXZlcyB0aGUgUmVzb2x2YWJsZSdzIGV4aXN0aW5nIHByb21pc2UsIG9yIGVsc2UgaW52b2tlcyByZXNvbHZlKCkgKHdoaWNoIGludm9rZXMgdGhlXG4gKiByZXNvbHZlRm4pIGFuZCByZXR1cm5zIHRoZSByZXN1bHRpbmcgcHJvbWlzZS5cbiAqXG4gKiBSZXNvbHZhYmxlLmdldCgpIGFuZCBSZXNvbHZhYmxlLnJlc29sdmUoKSBib3RoIGV4ZWN1dGUgd2l0aGluIGEgY29udGV4dCBwYXRoLCB3aGljaCBpcyBwYXNzZWQgYXMgdGhlIGZpcnN0XG4gKiBwYXJhbWV0ZXIgdG8gdGhvc2UgZm5zLlxuICovXG5leHBvcnQgY2xhc3MgUmVzb2x2YWJsZSBpbXBsZW1lbnRzIFJlc29sdmFibGVMaXRlcmFsIHtcbiAgdG9rZW46IGFueTtcbiAgcG9saWN5OiBSZXNvbHZlUG9saWN5O1xuICByZXNvbHZlRm46IEZ1bmN0aW9uO1xuICBkZXBzOiBhbnlbXTtcblxuICBkYXRhOiBhbnk7XG4gIHJlc29sdmVkID0gZmFsc2U7XG4gIHByb21pc2U6IFByb21pc2U8YW55PiA9IHVuZGVmaW5lZDtcblxuICBzdGF0aWMgZnJvbURhdGEgPSAodG9rZW46IGFueSwgZGF0YTogYW55KSA9PiBuZXcgUmVzb2x2YWJsZSh0b2tlbiwgKCkgPT4gZGF0YSwgbnVsbCwgbnVsbCwgZGF0YSk7XG5cbiAgLyoqIFRoaXMgY29uc3RydWN0b3IgY3JlYXRlcyBhIFJlc29sdmFibGUgY29weSAqL1xuICBjb25zdHJ1Y3RvcihyZXNvbHZhYmxlOiBSZXNvbHZhYmxlKTtcblxuICAvKiogVGhpcyBjb25zdHJ1Y3RvciBjcmVhdGVzIGEgbmV3IFJlc29sdmFibGUgZnJvbSB0aGUgcGxhaW4gb2xkIFtbUmVzb2x2YWJsZUxpdGVyYWxdXSBqYXZhc2NyaXB0IG9iamVjdCAqL1xuICBjb25zdHJ1Y3RvcihyZXNvbHZhYmxlOiBSZXNvbHZhYmxlTGl0ZXJhbCk7XG5cbiAgLyoqXG4gICAqIFRoaXMgY29uc3RydWN0b3IgY3JlYXRlcyBhIG5ldyBgUmVzb2x2YWJsZWBcbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiB2YXIgcmVzb2x2YWJsZTEgPSBuZXcgUmVzb2x2YWJsZSgnbXl0b2tlbicsIGh0dHAgPT4gaHR0cC5nZXQoJ2Zvby5qc29uJykudG9Qcm9taXNlKCksIFtIdHRwXSk7XG4gICAqXG4gICAqIHZhciByZXNvbHZhYmxlMiA9IG5ldyBSZXNvbHZhYmxlKFVzZXJTZXJ2aWNlLCBkZXAgPT4gbmV3IFVzZXJTZXJ2aWNlKGRlcC5kYXRhKSwgW1NvbWVEZXBlbmRlbmN5XSk7XG4gICAqXG4gICAqIHZhciByZXNvbHZhYmxlMUNsb25lID0gbmV3IFJlc29sdmFibGUocmVzb2x2YWJsZTEpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHRva2VuIFRoZSBuZXcgcmVzb2x2YWJsZSdzIGluamVjdGlvbiB0b2tlbiwgc3VjaCBhcyBgXCJ1c2VyTGlzdFwiYCAoYSBzdHJpbmcpIG9yIGBVc2VyU2VydmljZWAgKGEgY2xhc3MpLlxuICAgKiAgICAgICAgICAgICAgV2hlbiB0aGlzIHRva2VuIGlzIHVzZWQgZHVyaW5nIGluamVjdGlvbiwgdGhlIHJlc29sdmVkIHZhbHVlIHdpbGwgYmUgaW5qZWN0ZWQuXG4gICAqIEBwYXJhbSByZXNvbHZlRm4gVGhlIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUsIG9yIGEgcHJvbWlzZSBmb3IgdGhlIHJlc29sdmVkIHZhbHVlXG4gICAqIEBwYXJhbSBkZXBzIEFuIGFycmF5IG9mIGRlcGVuZGVuY2llcywgd2hpY2ggd2lsbCBiZSBpbmplY3RlZCBpbnRvIHRoZSBgcmVzb2x2ZUZuYFxuICAgKiBAcGFyYW0gcG9saWN5IHRoZSBbW1Jlc29sdmVQb2xpY3ldXSBkZWZpbmVzIHdoZW4gYW5kIGhvdyB0aGUgUmVzb2x2YWJsZSBpcyBwcm9jZXNzZWRcbiAgICogQHBhcmFtIGRhdGEgUHJlLXJlc29sdmVkIGRhdGEuIElmIHRoZSByZXNvbHZlIHZhbHVlIGlzIGFscmVhZHkga25vd24sIGl0IG1heSBiZSBwcm92aWRlZCBoZXJlLlxuICAgKi9cbiAgY29uc3RydWN0b3IodG9rZW46IGFueSwgcmVzb2x2ZUZuOiBGdW5jdGlvbiwgZGVwcz86IGFueVtdLCBwb2xpY3k/OiBSZXNvbHZlUG9saWN5LCBkYXRhPzogYW55KTtcbiAgY29uc3RydWN0b3IoYXJnMTogYW55LCByZXNvbHZlRm4/OiBGdW5jdGlvbiwgZGVwcz86IGFueVtdLCBwb2xpY3k/OiBSZXNvbHZlUG9saWN5LCBkYXRhPzogYW55KSB7XG4gICAgaWYgKGFyZzEgaW5zdGFuY2VvZiBSZXNvbHZhYmxlKSB7XG4gICAgICBleHRlbmQodGhpcywgYXJnMSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHJlc29sdmVGbikpIHtcbiAgICAgIGlmIChpc051bGxPclVuZGVmaW5lZChhcmcxKSkgdGhyb3cgbmV3IEVycm9yKCduZXcgUmVzb2x2YWJsZSgpOiB0b2tlbiBhcmd1bWVudCBpcyByZXF1aXJlZCcpO1xuICAgICAgaWYgKCFpc0Z1bmN0aW9uKHJlc29sdmVGbikpIHRocm93IG5ldyBFcnJvcignbmV3IFJlc29sdmFibGUoKTogcmVzb2x2ZUZuIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gICAgICB0aGlzLnRva2VuID0gYXJnMTtcbiAgICAgIHRoaXMucG9saWN5ID0gcG9saWN5O1xuICAgICAgdGhpcy5yZXNvbHZlRm4gPSByZXNvbHZlRm47XG4gICAgICB0aGlzLmRlcHMgPSBkZXBzIHx8IFtdO1xuXG4gICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgdGhpcy5yZXNvbHZlZCA9IGRhdGEgIT09IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMucHJvbWlzZSA9IHRoaXMucmVzb2x2ZWQgPyBzZXJ2aWNlcy4kcS53aGVuKHRoaXMuZGF0YSkgOiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdChhcmcxKSAmJiBhcmcxLnRva2VuICYmIChhcmcxLmhhc093blByb3BlcnR5KCdyZXNvbHZlRm4nKSB8fCBhcmcxLmhhc093blByb3BlcnR5KCdkYXRhJykpKSB7XG4gICAgICBjb25zdCBsaXRlcmFsID0gPFJlc29sdmFibGVMaXRlcmFsPmFyZzE7XG4gICAgICByZXR1cm4gbmV3IFJlc29sdmFibGUobGl0ZXJhbC50b2tlbiwgbGl0ZXJhbC5yZXNvbHZlRm4sIGxpdGVyYWwuZGVwcywgbGl0ZXJhbC5wb2xpY3ksIGxpdGVyYWwuZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0UG9saWN5KHN0YXRlOiBTdGF0ZU9iamVjdCk6IFJlc29sdmVQb2xpY3kge1xuICAgIGNvbnN0IHRoaXNQb2xpY3kgPSB0aGlzLnBvbGljeSB8fCB7fTtcbiAgICBjb25zdCBzdGF0ZVBvbGljeSA9IChzdGF0ZSAmJiBzdGF0ZS5yZXNvbHZlUG9saWN5KSB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgd2hlbjogdGhpc1BvbGljeS53aGVuIHx8IHN0YXRlUG9saWN5LndoZW4gfHwgZGVmYXVsdFJlc29sdmVQb2xpY3kud2hlbixcbiAgICAgIGFzeW5jOiB0aGlzUG9saWN5LmFzeW5jIHx8IHN0YXRlUG9saWN5LmFzeW5jIHx8IGRlZmF1bHRSZXNvbHZlUG9saWN5LmFzeW5jLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQXN5bmNocm9ub3VzbHkgcmVzb2x2ZSB0aGlzIFJlc29sdmFibGUncyBkYXRhXG4gICAqXG4gICAqIEdpdmVuIGEgUmVzb2x2ZUNvbnRleHQgdGhhdCB0aGlzIFJlc29sdmFibGUgaXMgZm91bmQgaW46XG4gICAqIFdhaXQgZm9yIHRoaXMgUmVzb2x2YWJsZSdzIGRlcGVuZGVuY2llcywgdGhlbiBpbnZva2UgdGhpcyBSZXNvbHZhYmxlJ3MgZnVuY3Rpb25cbiAgICogYW5kIHVwZGF0ZSB0aGUgUmVzb2x2YWJsZSdzIHN0YXRlXG4gICAqL1xuICByZXNvbHZlKHJlc29sdmVDb250ZXh0OiBSZXNvbHZlQ29udGV4dCwgdHJhbnM/OiBUcmFuc2l0aW9uKSB7XG4gICAgY29uc3QgJHEgPSBzZXJ2aWNlcy4kcTtcblxuICAgIC8vIEdldHMgYWxsIGRlcGVuZGVuY2llcyBmcm9tIFJlc29sdmVDb250ZXh0IGFuZCB3YWl0IGZvciB0aGVtIHRvIGJlIHJlc29sdmVkXG4gICAgY29uc3QgZ2V0UmVzb2x2YWJsZURlcGVuZGVuY2llcyA9ICgpID0+XG4gICAgICAkcS5hbGwocmVzb2x2ZUNvbnRleHQuZ2V0RGVwZW5kZW5jaWVzKHRoaXMpLm1hcChyZXNvbHZhYmxlID0+IHJlc29sdmFibGUuZ2V0KHJlc29sdmVDb250ZXh0LCB0cmFucykpKSBhcyBQcm9taXNlPFxuICAgICAgICBhbnlbXVxuICAgICAgPjtcblxuICAgIC8vIEludm9rZXMgdGhlIHJlc29sdmUgZnVuY3Rpb24gcGFzc2luZyB0aGUgcmVzb2x2ZWQgZGVwZW5kZW5jaWVzIGFzIGFyZ3VtZW50c1xuICAgIGNvbnN0IGludm9rZVJlc29sdmVGbiA9IChyZXNvbHZlZERlcHM6IGFueVtdKSA9PiB0aGlzLnJlc29sdmVGbi5hcHBseShudWxsLCByZXNvbHZlZERlcHMpO1xuXG4gICAgLyoqXG4gICAgICogRm9yIFJYV0FJVCBwb2xpY3k6XG4gICAgICpcbiAgICAgKiBHaXZlbiBhbiBvYnNlcnZhYmxlIHJldHVybmVkIGZyb20gYSByZXNvbHZlIGZ1bmN0aW9uOlxuICAgICAqIC0gZW5hYmxlcyAuY2FjaGUoKSBtb2RlICh0aGlzIGFsbG93cyBtdWx0aWNhc3Qgc3Vic2NyaWJlcnMpXG4gICAgICogLSB0aGVuIGNhbGxzIHRvUHJvbWlzZSgpICh0aGlzIHRyaWdnZXJzIHN1YnNjcmliZSgpIGFuZCB0aHVzIGZldGNoZXMpXG4gICAgICogLSBXYWl0cyBmb3IgdGhlIHByb21pc2UsIHRoZW4gcmV0dXJuIHRoZSBjYWNoZWQgb2JzZXJ2YWJsZSAobm90IHRoZSBmaXJzdCBlbWl0dGVkIHZhbHVlKS5cbiAgICAgKi9cbiAgICBjb25zdCB3YWl0Rm9yUnggPSAob2JzZXJ2YWJsZSQ6IGFueSkgPT4ge1xuICAgICAgY29uc3QgY2FjaGVkID0gb2JzZXJ2YWJsZSQuY2FjaGUoMSk7XG4gICAgICByZXR1cm4gY2FjaGVkXG4gICAgICAgIC50YWtlKDEpXG4gICAgICAgIC50b1Byb21pc2UoKVxuICAgICAgICAudGhlbigoKSA9PiBjYWNoZWQpO1xuICAgIH07XG5cbiAgICAvLyBJZiB0aGUgcmVzb2x2ZSBwb2xpY3kgaXMgUlhXQUlULCB3YWl0IGZvciB0aGUgb2JzZXJ2YWJsZSB0byBlbWl0IHNvbWV0aGluZy4gb3RoZXJ3aXNlIHBhc3MgdGhyb3VnaC5cbiAgICBjb25zdCBub2RlOiBQYXRoTm9kZSA9IHJlc29sdmVDb250ZXh0LmZpbmROb2RlKHRoaXMpO1xuICAgIGNvbnN0IHN0YXRlOiBTdGF0ZU9iamVjdCA9IG5vZGUgJiYgbm9kZS5zdGF0ZTtcbiAgICBjb25zdCBtYXliZVdhaXRGb3JSeCA9IHRoaXMuZ2V0UG9saWN5KHN0YXRlKS5hc3luYyA9PT0gJ1JYV0FJVCcgPyB3YWl0Rm9yUnggOiBpZGVudGl0eTtcblxuICAgIC8vIEFmdGVyIHRoZSBmaW5hbCB2YWx1ZSBoYXMgYmVlbiByZXNvbHZlZCwgdXBkYXRlIHRoZSBzdGF0ZSBvZiB0aGUgUmVzb2x2YWJsZVxuICAgIGNvbnN0IGFwcGx5UmVzb2x2ZWRWYWx1ZSA9IChyZXNvbHZlZFZhbHVlOiBhbnkpID0+IHtcbiAgICAgIHRoaXMuZGF0YSA9IHJlc29sdmVkVmFsdWU7XG4gICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVzb2x2ZUZuID0gbnVsbDtcbiAgICAgIHRyYWNlLnRyYWNlUmVzb2x2YWJsZVJlc29sdmVkKHRoaXMsIHRyYW5zKTtcbiAgICAgIHJldHVybiB0aGlzLmRhdGE7XG4gICAgfTtcblxuICAgIC8vIFNldHMgdGhlIHByb21pc2UgcHJvcGVydHkgZmlyc3QsIHRoZW4gZ2V0c1Jlc29sdmFibGVEZXBlbmRlbmNpZXMgaW4gdGhlIGNvbnRleHQgb2YgdGhlIHByb21pc2UgY2hhaW4uIEFsd2F5cyB3YWl0cyBvbmUgdGljay5cbiAgICByZXR1cm4gKHRoaXMucHJvbWlzZSA9ICRxXG4gICAgICAud2hlbigpXG4gICAgICAudGhlbihnZXRSZXNvbHZhYmxlRGVwZW5kZW5jaWVzKVxuICAgICAgLnRoZW4oaW52b2tlUmVzb2x2ZUZuKVxuICAgICAgLnRoZW4obWF5YmVXYWl0Rm9yUngpXG4gICAgICAudGhlbihhcHBseVJlc29sdmVkVmFsdWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgcHJvbWlzZSBmb3IgdGhpcyBSZXNvbHZhYmxlJ3MgZGF0YS5cbiAgICpcbiAgICogRmV0Y2hlcyB0aGUgZGF0YSBhbmQgcmV0dXJucyBhIHByb21pc2UuXG4gICAqIFJldHVybnMgdGhlIGV4aXN0aW5nIHByb21pc2UgaWYgaXQgaGFzIGFscmVhZHkgYmVlbiBmZXRjaGVkIG9uY2UuXG4gICAqL1xuICBnZXQocmVzb2x2ZUNvbnRleHQ6IFJlc29sdmVDb250ZXh0LCB0cmFucz86IFRyYW5zaXRpb24pOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLnByb21pc2UgfHwgdGhpcy5yZXNvbHZlKHJlc29sdmVDb250ZXh0LCB0cmFucyk7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYFJlc29sdmFibGUodG9rZW46ICR7c3RyaW5naWZ5KHRoaXMudG9rZW4pfSwgcmVxdWlyZXM6IFske3RoaXMuZGVwcy5tYXAoc3RyaW5naWZ5KX1dKWA7XG4gIH1cblxuICBjbG9uZSgpOiBSZXNvbHZhYmxlIHtcbiAgICByZXR1cm4gbmV3IFJlc29sdmFibGUodGhpcyk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9yZXNvbHZlL3Jlc29sdmFibGUudHMiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHRyYW5zaXRpb25cbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyB0cmFjZSB9IGZyb20gJy4uL2NvbW1vbi90cmFjZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSAnLi4vY29tbW9uL3N0cmluZ3MnO1xuaW1wb3J0IHsgbWFwLCBmaW5kLCBleHRlbmQsIG1lcmdlUiwgdGFpbCwgb21pdCwgYXJyYXlUdXBsZXMsIHVubmVzdFIsIGlkZW50aXR5LCBhbnlUcnVlUiB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNPYmplY3QsIGlzVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgcHJvcCwgcHJvcEVxLCB2YWwsIG5vdCwgaXMgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IFN0YXRlRGVjbGFyYXRpb24sIFN0YXRlT3JOYW1lIH0gZnJvbSAnLi4vc3RhdGUvaW50ZXJmYWNlJztcbmltcG9ydCB7XG4gIFRyYW5zaXRpb25PcHRpb25zLFxuICBUcmVlQ2hhbmdlcyxcbiAgSUhvb2tSZWdpc3RyeSxcbiAgVHJhbnNpdGlvbkhvb2tQaGFzZSxcbiAgUmVnaXN0ZXJlZEhvb2tzLFxuICBIb29rUmVnT3B0aW9ucyxcbiAgSG9va01hdGNoQ3JpdGVyaWEsXG4gIFRyYW5zaXRpb25TdGF0ZUhvb2tGbixcbiAgVHJhbnNpdGlvbkhvb2tGbixcbn0gZnJvbSAnLi9pbnRlcmZhY2UnOyAvLyBoYXMgb3IgaXMgdXNpbmdcbmltcG9ydCB7IFRyYW5zaXRpb25Ib29rIH0gZnJvbSAnLi90cmFuc2l0aW9uSG9vayc7XG5pbXBvcnQgeyBtYXRjaFN0YXRlLCBtYWtlRXZlbnQsIFJlZ2lzdGVyZWRIb29rIH0gZnJvbSAnLi9ob29rUmVnaXN0cnknO1xuaW1wb3J0IHsgSG9va0J1aWxkZXIgfSBmcm9tICcuL2hvb2tCdWlsZGVyJztcbmltcG9ydCB7IFBhdGhOb2RlIH0gZnJvbSAnLi4vcGF0aC9wYXRoTm9kZSc7XG5pbXBvcnQgeyBQYXRoVXRpbHMgfSBmcm9tICcuLi9wYXRoL3BhdGhVdGlscyc7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvdGFyZ2V0U3RhdGUnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgUmVzb2x2YWJsZSB9IGZyb20gJy4uL3Jlc29sdmUvcmVzb2x2YWJsZSc7XG5pbXBvcnQgeyBWaWV3Q29uZmlnIH0gZnJvbSAnLi4vdmlldy9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUmVzb2x2ZUNvbnRleHQgfSBmcm9tICcuLi9yZXNvbHZlL3Jlc29sdmVDb250ZXh0JztcbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmltcG9ydCB7IFVJSW5qZWN0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUmF3UGFyYW1zIH0gZnJvbSAnLi4vcGFyYW1zL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBSZXNvbHZhYmxlTGl0ZXJhbCB9IGZyb20gJy4uL3Jlc29sdmUvaW50ZXJmYWNlJztcbmltcG9ydCB7IFJlamVjdGlvbiB9IGZyb20gJy4vcmVqZWN0RmFjdG9yeSc7XG5cbi8qKiBAaGlkZGVuICovXG5jb25zdCBzdGF0ZVNlbGY6IChfc3RhdGU6IFN0YXRlT2JqZWN0KSA9PiBTdGF0ZURlY2xhcmF0aW9uID0gcHJvcCgnc2VsZicpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSB0cmFuc2l0aW9uIGJldHdlZW4gdHdvIHN0YXRlcy5cbiAqXG4gKiBXaGVuIG5hdmlnYXRpbmcgdG8gYSBzdGF0ZSwgd2UgYXJlIHRyYW5zaXRpb25pbmcgKipmcm9tKiogdGhlIGN1cnJlbnQgc3RhdGUgKip0byoqIHRoZSBuZXcgc3RhdGUuXG4gKlxuICogVGhpcyBvYmplY3QgY29udGFpbnMgYWxsIGNvbnRleHR1YWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHRvL2Zyb20gc3RhdGVzLCBwYXJhbWV0ZXJzLCByZXNvbHZlcy5cbiAqIEl0IGhhcyBpbmZvcm1hdGlvbiBhYm91dCBhbGwgc3RhdGVzIGJlaW5nIGVudGVyZWQgYW5kIGV4aXRlZCBhcyBhIHJlc3VsdCBvZiB0aGUgdHJhbnNpdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zaXRpb24gaW1wbGVtZW50cyBJSG9va1JlZ2lzdHJ5IHtcbiAgLyoqIEBoaWRkZW4gKi9cbiAgc3RhdGljIGRpVG9rZW4gPSBUcmFuc2l0aW9uO1xuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdHJhbnNpdGlvbi5cbiAgICpcbiAgICogVGhpcyBpcyBhbiBhdXRvIGluY3JlbWVudGluZyBpbnRlZ2VyLCBzdGFydGluZyBmcm9tIGAwYC5cbiAgICovXG4gICRpZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgW1tVSVJvdXRlcl1dIGluc3RhbmNlXG4gICAqXG4gICAqIFRoaXMgcmVmZXJlbmNlIGNhbiBiZSB1c2VkIHRvIGFjY2VzcyB0aGUgcm91dGVyIHNlcnZpY2VzLCBzdWNoIGFzIHRoZSBbW1N0YXRlU2VydmljZV1dXG4gICAqL1xuICByb3V0ZXI6IFVJUm91dGVyO1xuXG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX2RlZmVycmVkID0gc2VydmljZXMuJHEuZGVmZXIoKTtcbiAgLyoqXG4gICAqIFRoaXMgcHJvbWlzZSBpcyByZXNvbHZlZCBvciByZWplY3RlZCBiYXNlZCBvbiB0aGUgb3V0Y29tZSBvZiB0aGUgVHJhbnNpdGlvbi5cbiAgICpcbiAgICogV2hlbiB0aGUgdHJhbnNpdGlvbiBpcyBzdWNjZXNzZnVsLCB0aGUgcHJvbWlzZSBpcyByZXNvbHZlZFxuICAgKiBXaGVuIHRoZSB0cmFuc2l0aW9uIGlzIHVuc3VjY2Vzc2Z1bCwgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCB0aGUgW1tSZWplY3Rpb25dXSBvciBqYXZhc2NyaXB0IGVycm9yXG4gICAqL1xuICBwcm9taXNlOiBQcm9taXNlPGFueT4gPSB0aGlzLl9kZWZlcnJlZC5wcm9taXNlO1xuICAvKipcbiAgICogQSBib29sZWFuIHdoaWNoIGluZGljYXRlcyBpZiB0aGUgdHJhbnNpdGlvbiB3YXMgc3VjY2Vzc2Z1bFxuICAgKlxuICAgKiBBZnRlciBhIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvbiwgdGhpcyB2YWx1ZSBpcyBzZXQgdG8gdHJ1ZS5cbiAgICogQWZ0ZXIgYW4gdW5zdWNjZXNzZnVsIHRyYW5zaXRpb24sIHRoaXMgdmFsdWUgaXMgc2V0IHRvIGZhbHNlLlxuICAgKlxuICAgKiBUaGUgdmFsdWUgd2lsbCBiZSB1bmRlZmluZWQgaWYgdGhlIHRyYW5zaXRpb24gaXMgbm90IGNvbXBsZXRlXG4gICAqL1xuICBzdWNjZXNzOiBib29sZWFuO1xuICAvKiogQGhpZGRlbiAqL1xuICBfYWJvcnRlZDogYm9vbGVhbjtcbiAgLyoqIEBoaWRkZW4gKi9cbiAgcHJpdmF0ZSBfZXJyb3I6IFJlamVjdGlvbjtcblxuICAvKiogQGhpZGRlbiBIb2xkcyB0aGUgaG9vayByZWdpc3RyYXRpb24gZnVuY3Rpb25zIHN1Y2ggYXMgdGhvc2UgcGFzc2VkIHRvIFRyYW5zaXRpb24ub25TdGFydCgpICovXG4gIF9yZWdpc3RlcmVkSG9va3M6IFJlZ2lzdGVyZWRIb29rcyA9IHt9O1xuXG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX29wdGlvbnM6IFRyYW5zaXRpb25PcHRpb25zO1xuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF90cmVlQ2hhbmdlczogVHJlZUNoYW5nZXM7XG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX3RhcmdldFN0YXRlOiBUYXJnZXRTdGF0ZTtcbiAgLyoqIEBoaWRkZW4gKi9cbiAgcHJpdmF0ZSBfaG9va0J1aWxkZXIgPSBuZXcgSG9va0J1aWxkZXIodGhpcyk7XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgb25CZWZvcmUoY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25TdGFydChjcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBvbkV4aXQoY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvblN0YXRlSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBvblJldGFpbihjcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uU3RhdGVIb29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uRW50ZXIoY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvblN0YXRlSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBvbkZpbmlzaChjcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBvblN1Y2Nlc3MoY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25FcnJvcihjcml0ZXJpYTogSG9va01hdGNoQ3JpdGVyaWEsIGNhbGxiYWNrOiBUcmFuc2l0aW9uSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqIEBoaWRkZW5cbiAgICogQ3JlYXRlcyB0aGUgdHJhbnNpdGlvbi1sZXZlbCBob29rIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbnNcbiAgICogKHdoaWNoIGNhbiB0aGVuIGJlIHVzZWQgdG8gcmVnaXN0ZXIgaG9va3MpXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZVRyYW5zaXRpb25Ib29rUmVnRm5zKCkge1xuICAgIHRoaXMucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLl9wbHVnaW5hcGlcbiAgICAgIC5fZ2V0RXZlbnRzKClcbiAgICAgIC5maWx0ZXIodHlwZSA9PiB0eXBlLmhvb2tQaGFzZSAhPT0gVHJhbnNpdGlvbkhvb2tQaGFzZS5DUkVBVEUpXG4gICAgICAuZm9yRWFjaCh0eXBlID0+IG1ha2VFdmVudCh0aGlzLCB0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZSwgdHlwZSkpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICBnZXRIb29rcyhob29rTmFtZTogc3RyaW5nKTogUmVnaXN0ZXJlZEhvb2tbXSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlZ2lzdGVyZWRIb29rc1tob29rTmFtZV07XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBUcmFuc2l0aW9uIG9iamVjdC5cbiAgICpcbiAgICogSWYgdGhlIHRhcmdldCBzdGF0ZSBpcyBub3QgdmFsaWQsIGFuIGVycm9yIGlzIHRocm93bi5cbiAgICpcbiAgICogQGludGVybmFsYXBpXG4gICAqXG4gICAqIEBwYXJhbSBmcm9tUGF0aCBUaGUgcGF0aCBvZiBbW1BhdGhOb2RlXV1zIGZyb20gd2hpY2ggdGhlIHRyYW5zaXRpb24gaXMgbGVhdmluZy4gIFRoZSBsYXN0IG5vZGUgaW4gdGhlIGBmcm9tUGF0aGBcbiAgICogICAgICAgIGVuY2Fwc3VsYXRlcyB0aGUgXCJmcm9tIHN0YXRlXCIuXG4gICAqIEBwYXJhbSB0YXJnZXRTdGF0ZSBUaGUgdGFyZ2V0IHN0YXRlIGFuZCBwYXJhbWV0ZXJzIGJlaW5nIHRyYW5zaXRpb25lZCB0byAoYWxzbywgdGhlIHRyYW5zaXRpb24gb3B0aW9ucylcbiAgICogQHBhcmFtIHJvdXRlciBUaGUgW1tVSVJvdXRlcl1dIGluc3RhbmNlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihmcm9tUGF0aDogUGF0aE5vZGVbXSwgdGFyZ2V0U3RhdGU6IFRhcmdldFN0YXRlLCByb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgdGhpcy5fdGFyZ2V0U3RhdGUgPSB0YXJnZXRTdGF0ZTtcblxuICAgIGlmICghdGFyZ2V0U3RhdGUudmFsaWQoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHRhcmdldFN0YXRlLmVycm9yKCkpO1xuICAgIH1cblxuICAgIC8vIGN1cnJlbnQoKSBpcyBhc3N1bWVkIHRvIGNvbWUgZnJvbSB0YXJnZXRTdGF0ZS5vcHRpb25zLCBidXQgcHJvdmlkZSBhIG5haXZlIGltcGxlbWVudGF0aW9uIG90aGVyd2lzZS5cbiAgICB0aGlzLl9vcHRpb25zID0gZXh0ZW5kKHsgY3VycmVudDogdmFsKHRoaXMpIH0sIHRhcmdldFN0YXRlLm9wdGlvbnMoKSk7XG4gICAgdGhpcy4kaWQgPSByb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuX3RyYW5zaXRpb25Db3VudCsrO1xuICAgIGNvbnN0IHRvUGF0aCA9IFBhdGhVdGlscy5idWlsZFRvUGF0aChmcm9tUGF0aCwgdGFyZ2V0U3RhdGUpO1xuICAgIHRoaXMuX3RyZWVDaGFuZ2VzID0gUGF0aFV0aWxzLnRyZWVDaGFuZ2VzKGZyb21QYXRoLCB0b1BhdGgsIHRoaXMuX29wdGlvbnMucmVsb2FkU3RhdGUpO1xuICAgIHRoaXMuY3JlYXRlVHJhbnNpdGlvbkhvb2tSZWdGbnMoKTtcblxuICAgIGNvbnN0IG9uQ3JlYXRlSG9va3MgPSB0aGlzLl9ob29rQnVpbGRlci5idWlsZEhvb2tzRm9yUGhhc2UoVHJhbnNpdGlvbkhvb2tQaGFzZS5DUkVBVEUpO1xuICAgIFRyYW5zaXRpb25Ib29rLmludm9rZUhvb2tzKG9uQ3JlYXRlSG9va3MsICgpID0+IG51bGwpO1xuXG4gICAgdGhpcy5hcHBseVZpZXdDb25maWdzKHJvdXRlcik7XG4gIH1cblxuICBwcml2YXRlIGFwcGx5Vmlld0NvbmZpZ3Mocm91dGVyOiBVSVJvdXRlcikge1xuICAgIGNvbnN0IGVudGVyaW5nU3RhdGVzID0gdGhpcy5fdHJlZUNoYW5nZXMuZW50ZXJpbmcubWFwKG5vZGUgPT4gbm9kZS5zdGF0ZSk7XG4gICAgUGF0aFV0aWxzLmFwcGx5Vmlld0NvbmZpZ3Mocm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLiR2aWV3LCB0aGlzLl90cmVlQ2hhbmdlcy50bywgZW50ZXJpbmdTdGF0ZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbGFwaVxuICAgKlxuICAgKiBAcmV0dXJucyB0aGUgaW50ZXJuYWwgZnJvbSBbU3RhdGVdIG9iamVjdFxuICAgKi9cbiAgJGZyb20oKSB7XG4gICAgcmV0dXJuIHRhaWwodGhpcy5fdHJlZUNoYW5nZXMuZnJvbSkuc3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsYXBpXG4gICAqXG4gICAqIEByZXR1cm5zIHRoZSBpbnRlcm5hbCB0byBbU3RhdGVdIG9iamVjdFxuICAgKi9cbiAgJHRvKCkge1xuICAgIHJldHVybiB0YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLnRvKS5zdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBcImZyb20gc3RhdGVcIlxuICAgKlxuICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGNvbWluZyAqZnJvbSouXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBzdGF0ZSBkZWNsYXJhdGlvbiBvYmplY3QgZm9yIHRoZSBUcmFuc2l0aW9uJ3MgKFwiZnJvbSBzdGF0ZVwiKS5cbiAgICovXG4gIGZyb20oKTogU3RhdGVEZWNsYXJhdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuJGZyb20oKS5zZWxmO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIFwidG8gc3RhdGVcIlxuICAgKlxuICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGdvaW5nICp0byouXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBzdGF0ZSBkZWNsYXJhdGlvbiBvYmplY3QgZm9yIHRoZSBUcmFuc2l0aW9uJ3MgdGFyZ2V0IHN0YXRlIChcInRvIHN0YXRlXCIpLlxuICAgKi9cbiAgdG8oKTogU3RhdGVEZWNsYXJhdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuJHRvKCkuc2VsZjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBUYXJnZXQgU3RhdGVcbiAgICpcbiAgICogQSB0cmFuc2l0aW9uJ3MgW1tUYXJnZXRTdGF0ZV1dIGVuY2Fwc3VsYXRlcyB0aGUgW1t0b11dIHN0YXRlLCB0aGUgW1twYXJhbXNdXSwgYW5kIHRoZSBbW29wdGlvbnNdXSBhcyBhIHNpbmdsZSBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm5zIHRoZSBbW1RhcmdldFN0YXRlXV0gb2YgdGhpcyBUcmFuc2l0aW9uXG4gICAqL1xuICB0YXJnZXRTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0U3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHR3byB0cmFuc2l0aW9ucyBhcmUgZXF1aXZhbGVudC5cbiAgICogQGRlcHJlY2F0ZWRcbiAgICovXG4gIGlzKGNvbXBhcmU6IFRyYW5zaXRpb24gfCB7IHRvPzogYW55OyBmcm9tPzogYW55IH0pOiBib29sZWFuIHtcbiAgICBpZiAoY29tcGFyZSBpbnN0YW5jZW9mIFRyYW5zaXRpb24pIHtcbiAgICAgIC8vIFRPRE86IEFsc28gY29tcGFyZSBwYXJhbWV0ZXJzXG4gICAgICByZXR1cm4gdGhpcy5pcyh7IHRvOiBjb21wYXJlLiR0bygpLm5hbWUsIGZyb206IGNvbXBhcmUuJGZyb20oKS5uYW1lIH0pO1xuICAgIH1cbiAgICByZXR1cm4gIShcbiAgICAgIChjb21wYXJlLnRvICYmICFtYXRjaFN0YXRlKHRoaXMuJHRvKCksIGNvbXBhcmUudG8pKSB8fFxuICAgICAgKGNvbXBhcmUuZnJvbSAmJiAhbWF0Y2hTdGF0ZSh0aGlzLiRmcm9tKCksIGNvbXBhcmUuZnJvbSkpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRyYW5zaXRpb24gcGFyYW1ldGVyIHZhbHVlc1xuICAgKlxuICAgKiBSZXR1cm5zIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIGZvciBhIHRyYW5zaXRpb24gYXMga2V5L3ZhbHVlIHBhaXJzLlxuICAgKiBUaGlzIG9iamVjdCBpcyBpbW11dGFibGUuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHJldHVybnMgdGhlIG5ldyBwYXJhbWV0ZXIgdmFsdWVzIChmb3IgdGhlIFwidG8gc3RhdGVcIikuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogdmFyIHRvUGFyYW1zID0gdHJhbnNpdGlvbi5wYXJhbXMoKTtcbiAgICogYGBgXG4gICAqXG4gICAqIFRvIHJldHVybiB0aGUgcHJldmlvdXMgcGFyYW1ldGVyIHZhbHVlcywgIHN1cHBseSBgJ2Zyb20nYCBhcyB0aGUgYHBhdGhuYW1lYCBhcmd1bWVudC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiB2YXIgZnJvbVBhcmFtcyA9IHRyYW5zaXRpb24ucGFyYW1zKCdmcm9tJyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGF0aG5hbWUgdGhlIG5hbWUgb2YgdGhlIHRyZWVDaGFuZ2VzIHBhdGggdG8gZ2V0IHBhcmFtZXRlciB2YWx1ZXMgZm9yOlxuICAgKiAgIChgJ3RvJ2AsIGAnZnJvbSdgLCBgJ2VudGVyaW5nJ2AsIGAnZXhpdGluZydgLCBgJ3JldGFpbmVkJ2ApXG4gICAqXG4gICAqIEByZXR1cm5zIHRyYW5zaXRpb24gcGFyYW1ldGVyIHZhbHVlcyBmb3IgdGhlIGRlc2lyZWQgcGF0aC5cbiAgICovXG4gIHBhcmFtcyhwYXRobmFtZT86IHN0cmluZyk6IHsgW3BhcmFtTmFtZTogc3RyaW5nXTogYW55IH07XG4gIHBhcmFtczxUPihwYXRobmFtZT86IHN0cmluZyk6IFQ7XG4gIHBhcmFtcyhwYXRobmFtZSA9ICd0bycpIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh0aGlzLl90cmVlQ2hhbmdlc1twYXRobmFtZV0ubWFwKHByb3AoJ3BhcmFtVmFsdWVzJykpLnJlZHVjZShtZXJnZVIsIHt9KSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFtbVUlJbmplY3Rvcl1dIERlcGVuZGVuY3kgSW5qZWN0b3JcbiAgICpcbiAgICogUmV0dXJucyBhIERlcGVuZGVuY3kgSW5qZWN0b3IgZm9yIHRoZSBUcmFuc2l0aW9uJ3MgdGFyZ2V0IHN0YXRlICh0byBzdGF0ZSkuXG4gICAqIFRoZSBpbmplY3RvciBwcm92aWRlcyByZXNvbHZlIHZhbHVlcyB3aGljaCB0aGUgdGFyZ2V0IHN0YXRlIGhhcyBhY2Nlc3MgdG8uXG4gICAqXG4gICAqIFRoZSBgVUlJbmplY3RvcmAgY2FuIGFsc28gcHJvdmlkZSB2YWx1ZXMgZnJvbSB0aGUgbmF0aXZlIHJvb3QvZ2xvYmFsIGluamVjdG9yIChuZzEvbmcyKS5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAub25FbnRlcih7IGVudGVyaW5nOiAnbXlTdGF0ZScgfSwgdHJhbnMgPT4ge1xuICAgKiAgIHZhciBteVJlc29sdmVWYWx1ZSA9IHRyYW5zLmluamVjdG9yKCkuZ2V0KCdteVJlc29sdmUnKTtcbiAgICogICAvLyBJbmplY3QgYSBnbG9iYWwgc2VydmljZSBmcm9tIHRoZSBnbG9iYWwvbmF0aXZlIGluamVjdG9yIChpZiBpdCBleGlzdHMpXG4gICAqICAgdmFyIE15U2VydmljZSA9IHRyYW5zLmluamVjdG9yKCkuZ2V0KCdNeVNlcnZpY2UnKTtcbiAgICogfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEluIHNvbWUgY2FzZXMgKHN1Y2ggYXMgYG9uQmVmb3JlYCksIHlvdSBtYXkgbmVlZCBhY2Nlc3MgdG8gc29tZSByZXNvbHZlIGRhdGEgYnV0IGl0IGhhcyBub3QgeWV0IGJlZW4gZmV0Y2hlZC5cbiAgICogWW91IGNhbiB1c2UgW1tVSUluamVjdG9yLmdldEFzeW5jXV0gdG8gZ2V0IGEgcHJvbWlzZSBmb3IgdGhlIGRhdGEuXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogLm9uQmVmb3JlKHt9LCB0cmFucyA9PiB7XG4gICAqICAgcmV0dXJuIHRyYW5zLmluamVjdG9yKCkuZ2V0QXN5bmMoJ215UmVzb2x2ZScpLnRoZW4obXlSZXNvbHZlVmFsdWUgPT5cbiAgICogICAgIHJldHVybiBteVJlc29sdmVWYWx1ZSAhPT0gJ0FCT1JUJztcbiAgICogICB9KTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBJZiBhIGBzdGF0ZWAgaXMgcHJvdmlkZWQsIHRoZSBpbmplY3RvciB0aGF0IGlzIHJldHVybmVkIHdpbGwgYmUgbGltaXRlZCB0byByZXNvbHZlIHZhbHVlcyB0aGF0IHRoZSBwcm92aWRlZCBzdGF0ZSBoYXMgYWNjZXNzIHRvLlxuICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgaWYgYm90aCBhIHBhcmVudCBzdGF0ZSBgZm9vYCBhbmQgYSBjaGlsZCBzdGF0ZSBgZm9vLmJhcmAgaGF2ZSBib3RoIGRlZmluZWQgYSByZXNvbHZlIHN1Y2ggYXMgYGRhdGFgLlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIC5vbkVudGVyKHsgdG86ICdmb28uYmFyJyB9LCB0cmFucyA9PiB7XG4gICAqICAgLy8gcmV0dXJucyByZXN1bHQgb2YgYGZvb2Agc3RhdGUncyBgbXlSZXNvbHZlYCByZXNvbHZlXG4gICAqICAgLy8gZXZlbiB0aG91Z2ggYGZvby5iYXJgIGFsc28gaGFzIGEgYG15UmVzb2x2ZWAgcmVzb2x2ZVxuICAgKiAgIHZhciBmb29EYXRhID0gdHJhbnMuaW5qZWN0b3IoJ2ZvbycpLmdldCgnbXlSZXNvbHZlJyk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogSWYgeW91IG5lZWQgcmVzb2x2ZSBkYXRhIGZyb20gdGhlIGV4aXRpbmcgc3RhdGVzLCBwYXNzIGAnZnJvbSdgIGFzIGBwYXRoTmFtZWAuXG4gICAqIFRoZSByZXNvbHZlIGRhdGEgZnJvbSB0aGUgYGZyb21gIHBhdGggd2lsbCBiZSByZXR1cm5lZC5cbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAub25FeGl0KHsgZXhpdGluZzogJ2Zvby5iYXInIH0sIHRyYW5zID0+IHtcbiAgICogICAvLyBHZXRzIHRoZSByZXNvbHZlIHZhbHVlIG9mIGBteVJlc29sdmVgIGZyb20gdGhlIHN0YXRlIGJlaW5nIGV4aXRlZFxuICAgKiAgIHZhciBmb29EYXRhID0gdHJhbnMuaW5qZWN0b3IobnVsbCwgJ2Zyb20nKS5nZXQoJ215UmVzb2x2ZScpO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZSBMaW1pdHMgdGhlIHJlc29sdmVzIHByb3ZpZGVkIHRvIG9ubHkgdGhlIHJlc29sdmVzIHRoZSBwcm92aWRlZCBzdGF0ZSBoYXMgYWNjZXNzIHRvLlxuICAgKiBAcGFyYW0gcGF0aE5hbWUgRGVmYXVsdDogYCd0bydgOiBDaG9vc2VzIHRoZSBwYXRoIGZvciB3aGljaCB0byBjcmVhdGUgdGhlIGluamVjdG9yLiBVc2UgdGhpcyB0byBhY2Nlc3MgcmVzb2x2ZXMgZm9yIGBleGl0aW5nYCBzdGF0ZXMuXG4gICAqXG4gICAqIEByZXR1cm5zIGEgW1tVSUluamVjdG9yXV1cbiAgICovXG4gIGluamVjdG9yKHN0YXRlPzogU3RhdGVPck5hbWUsIHBhdGhOYW1lID0gJ3RvJyk6IFVJSW5qZWN0b3Ige1xuICAgIGxldCBwYXRoOiBQYXRoTm9kZVtdID0gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aE5hbWVdO1xuICAgIGlmIChzdGF0ZSkgcGF0aCA9IFBhdGhVdGlscy5zdWJQYXRoKHBhdGgsIG5vZGUgPT4gbm9kZS5zdGF0ZSA9PT0gc3RhdGUgfHwgbm9kZS5zdGF0ZS5uYW1lID09PSBzdGF0ZSk7XG4gICAgcmV0dXJuIG5ldyBSZXNvbHZlQ29udGV4dChwYXRoKS5pbmplY3RvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYWxsIGF2YWlsYWJsZSByZXNvbHZlIHRva2VucyAoa2V5cylcbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBbW2luamVjdG9yXV0gdG8gaW5zcGVjdCB0aGUgcmVzb2x2ZSB2YWx1ZXNcbiAgICogYXZhaWxhYmxlIHRvIHRoZSBUcmFuc2l0aW9uLlxuICAgKlxuICAgKiBUaGlzIHJldHVybnMgYWxsIHRoZSB0b2tlbnMgZGVmaW5lZCBvbiBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dIGJsb2NrcywgZm9yIHRoZSBzdGF0ZXNcbiAgICogaW4gdGhlIFRyYW5zaXRpb24ncyBbW1RyZWVDaGFuZ2VzLnRvXV0gcGF0aC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBUaGlzIGV4YW1wbGUgbG9ncyBhbGwgcmVzb2x2ZSB2YWx1ZXNcbiAgICogYGBganNcbiAgICogbGV0IHRva2VucyA9IHRyYW5zLmdldFJlc29sdmVUb2tlbnMoKTtcbiAgICogdG9rZW5zLmZvckVhY2godG9rZW4gPT4gY29uc29sZS5sb2codG9rZW4gKyBcIiA9IFwiICsgdHJhbnMuaW5qZWN0b3IoKS5nZXQodG9rZW4pKSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFRoaXMgZXhhbXBsZSBjcmVhdGVzIHByb21pc2VzIGZvciBlYWNoIHJlc29sdmUgdmFsdWUuXG4gICAqIFRoaXMgdHJpZ2dlcnMgZmV0Y2hlcyBvZiByZXNvbHZlcyAoaWYgYW55IGhhdmUgbm90IHlldCBiZWVuIGZldGNoZWQpLlxuICAgKiBXaGVuIGFsbCBwcm9taXNlcyBoYXZlIGFsbCBzZXR0bGVkLCBpdCBsb2dzIHRoZSByZXNvbHZlIHZhbHVlcy5cbiAgICogYGBganNcbiAgICogbGV0IHRva2VucyA9IHRyYW5zLmdldFJlc29sdmVUb2tlbnMoKTtcbiAgICogbGV0IHByb21pc2UgPSB0b2tlbnMubWFwKHRva2VuID0+IHRyYW5zLmluamVjdG9yKCkuZ2V0QXN5bmModG9rZW4pKTtcbiAgICogUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4odmFsdWVzID0+IGNvbnNvbGUubG9nKFwiUmVzb2x2ZWQgdmFsdWVzOiBcIiArIHZhbHVlcykpO1xuICAgKiBgYGBcbiAgICpcbiAgICogTm90ZTogQW5ndWxhciAxIHVzZXJzIHdob3VsZCB1c2UgYCRxLmFsbCgpYFxuICAgKlxuICAgKiBAcGFyYW0gcGF0aG5hbWUgcmVzb2x2ZSBjb250ZXh0J3MgcGF0aCBuYW1lIChlLmcuLCBgdG9gIG9yIGBmcm9tYClcbiAgICpcbiAgICogQHJldHVybnMgYW4gYXJyYXkgb2YgcmVzb2x2ZSB0b2tlbnMgKGtleXMpXG4gICAqL1xuICBnZXRSZXNvbHZlVG9rZW5zKHBhdGhuYW1lID0gJ3RvJyk6IGFueVtdIHtcbiAgICByZXR1cm4gbmV3IFJlc29sdmVDb250ZXh0KHRoaXMuX3RyZWVDaGFuZ2VzW3BhdGhuYW1lXSkuZ2V0VG9rZW5zKCk7XG4gIH1cblxuICAvKipcbiAgICogRHluYW1pY2FsbHkgYWRkcyBhIG5ldyBbW1Jlc29sdmFibGVdXSAoaS5lLiwgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXSkgdG8gdGhpcyB0cmFuc2l0aW9uLlxuICAgKlxuICAgKiBBbGxvd3MgYSB0cmFuc2l0aW9uIGhvb2sgdG8gZHluYW1pY2FsbHkgYWRkIGEgUmVzb2x2YWJsZSB0byB0aGlzIFRyYW5zaXRpb24uXG4gICAqXG4gICAqIFVzZSB0aGUgW1tUcmFuc2l0aW9uLmluamVjdG9yXV0gdG8gcmV0cmlldmUgdGhlIHJlc29sdmVkIGRhdGEgaW4gc3Vic2VxdWVudCBob29rcyAoW1tVSUluamVjdG9yLmdldF1dKS5cbiAgICpcbiAgICogSWYgYSBgc3RhdGVgIGFyZ3VtZW50IGlzIHByb3ZpZGVkLCB0aGUgUmVzb2x2YWJsZSBpcyBwcm9jZXNzZWQgd2hlbiB0aGF0IHN0YXRlIGlzIGJlaW5nIGVudGVyZWQuXG4gICAqIElmIG5vIGBzdGF0ZWAgaXMgcHJvdmlkZWQgdGhlbiB0aGUgcm9vdCBzdGF0ZSBpcyB1c2VkLlxuICAgKiBJZiB0aGUgZ2l2ZW4gYHN0YXRlYCBoYXMgYWxyZWFkeSBiZWVuIGVudGVyZWQsIHRoZSBSZXNvbHZhYmxlIGlzIHByb2Nlc3NlZCB3aGVuIGFueSBjaGlsZCBzdGF0ZSBpcyBlbnRlcmVkLlxuICAgKiBJZiBubyBjaGlsZCBzdGF0ZXMgd2lsbCBiZSBlbnRlcmVkLCB0aGUgUmVzb2x2YWJsZSBpcyBwcm9jZXNzZWQgZHVyaW5nIHRoZSBgb25GaW5pc2hgIHBoYXNlIG9mIHRoZSBUcmFuc2l0aW9uLlxuICAgKlxuICAgKiBUaGUgYHN0YXRlYCBhcmd1bWVudCBhbHNvIHNjb3BlcyB0aGUgcmVzb2x2ZWQgZGF0YS5cbiAgICogVGhlIHJlc29sdmVkIGRhdGEgaXMgYXZhaWxhYmxlIGZyb20gdGhlIGluamVjdG9yIGZvciB0aGF0IGBzdGF0ZWAgYW5kIGFueSBjaGlsZHJlbiBzdGF0ZXMuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogdHJhbnNpdGlvblNlcnZpY2Uub25CZWZvcmUoe30sIHRyYW5zaXRpb24gPT4ge1xuICAgKiAgIHRyYW5zaXRpb24uYWRkUmVzb2x2YWJsZSh7XG4gICAqICAgICB0b2tlbjogJ215UmVzb2x2ZScsXG4gICAqICAgICBkZXBzOiBbJ015U2VydmljZSddLFxuICAgKiAgICAgcmVzb2x2ZUZuOiBteVNlcnZpY2UgPT4gbXlTZXJ2aWNlLmdldERhdGEoKVxuICAgKiAgIH0pO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSByZXNvbHZhYmxlIGEgW1tSZXNvbHZhYmxlTGl0ZXJhbF1dIG9iamVjdCAob3IgYSBbW1Jlc29sdmFibGVdXSlcbiAgICogQHBhcmFtIHN0YXRlIHRoZSBzdGF0ZSBpbiB0aGUgXCJ0byBwYXRoXCIgd2hpY2ggc2hvdWxkIHJlY2VpdmUgdGhlIG5ldyByZXNvbHZlIChvdGhlcndpc2UsIHRoZSByb290IHN0YXRlKVxuICAgKi9cbiAgYWRkUmVzb2x2YWJsZShyZXNvbHZhYmxlOiBSZXNvbHZhYmxlIHwgUmVzb2x2YWJsZUxpdGVyYWwsIHN0YXRlOiBTdGF0ZU9yTmFtZSA9ICcnKTogdm9pZCB7XG4gICAgcmVzb2x2YWJsZSA9IGlzKFJlc29sdmFibGUpKHJlc29sdmFibGUpID8gcmVzb2x2YWJsZSA6IG5ldyBSZXNvbHZhYmxlKHJlc29sdmFibGUpO1xuXG4gICAgY29uc3Qgc3RhdGVOYW1lOiBzdHJpbmcgPSB0eXBlb2Ygc3RhdGUgPT09ICdzdHJpbmcnID8gc3RhdGUgOiBzdGF0ZS5uYW1lO1xuICAgIGNvbnN0IHRvcGF0aCA9IHRoaXMuX3RyZWVDaGFuZ2VzLnRvO1xuICAgIGNvbnN0IHRhcmdldE5vZGUgPSBmaW5kKHRvcGF0aCwgbm9kZSA9PiBub2RlLnN0YXRlLm5hbWUgPT09IHN0YXRlTmFtZSk7XG4gICAgY29uc3QgcmVzb2x2ZUNvbnRleHQ6IFJlc29sdmVDb250ZXh0ID0gbmV3IFJlc29sdmVDb250ZXh0KHRvcGF0aCk7XG4gICAgcmVzb2x2ZUNvbnRleHQuYWRkUmVzb2x2YWJsZXMoW3Jlc29sdmFibGUgYXMgUmVzb2x2YWJsZV0sIHRhcmdldE5vZGUuc3RhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRyYW5zaXRpb24gZnJvbSB3aGljaCB0aGlzIHRyYW5zaXRpb24gd2FzIHJlZGlyZWN0ZWQuXG4gICAqXG4gICAqIElmIHRoZSBjdXJyZW50IHRyYW5zaXRpb24gaXMgYSByZWRpcmVjdCwgdGhpcyBtZXRob2QgcmV0dXJucyB0aGUgdHJhbnNpdGlvbiB0aGF0IHdhcyByZWRpcmVjdGVkLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIGxldCB0cmFuc2l0aW9uQSA9ICRzdGF0ZS5nbygnQScpLnRyYW5zaXRpb25cbiAgICogdHJhbnNpdGlvbkEub25TdGFydCh7fSwgKCkgPT4gJHN0YXRlLnRhcmdldCgnQicpKTtcbiAgICogJHRyYW5zaXRpb25zLm9uU3VjY2Vzcyh7IHRvOiAnQicgfSwgKHRyYW5zKSA9PiB7XG4gICAqICAgdHJhbnMudG8oKS5uYW1lID09PSAnQic7IC8vIHRydWVcbiAgICogICB0cmFucy5yZWRpcmVjdGVkRnJvbSgpID09PSB0cmFuc2l0aW9uQTsgLy8gdHJ1ZVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBwcmV2aW91cyBUcmFuc2l0aW9uLCBvciBudWxsIGlmIHRoaXMgVHJhbnNpdGlvbiBpcyBub3QgdGhlIHJlc3VsdCBvZiBhIHJlZGlyZWN0aW9uXG4gICAqL1xuICByZWRpcmVjdGVkRnJvbSgpOiBUcmFuc2l0aW9uIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5yZWRpcmVjdGVkRnJvbSB8fCBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG9yaWdpbmFsIHRyYW5zaXRpb24gaW4gYSByZWRpcmVjdCBjaGFpblxuICAgKlxuICAgKiBBIHRyYW5zaXRpb24gbWlnaHQgYmVsb25nIHRvIGEgbG9uZyBjaGFpbiBvZiBtdWx0aXBsZSByZWRpcmVjdHMuXG4gICAqIFRoaXMgbWV0aG9kIHdhbGtzIHRoZSBbW3JlZGlyZWN0ZWRGcm9tXV0gY2hhaW4gYmFjayB0byB0aGUgb3JpZ2luYWwgKGZpcnN0KSB0cmFuc2l0aW9uIGluIHRoZSBjaGFpbi5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAvLyBzdGF0ZXNcbiAgICogcmVnaXN0cnkucmVnaXN0ZXIoeyBuYW1lOiAnQScsIHJlZGlyZWN0VG86ICdCJyB9KTtcbiAgICogcmVnaXN0cnkucmVnaXN0ZXIoeyBuYW1lOiAnQicsIHJlZGlyZWN0VG86ICdDJyB9KTtcbiAgICogcmVnaXN0cnkucmVnaXN0ZXIoeyBuYW1lOiAnQycsIHJlZGlyZWN0VG86ICdEJyB9KTtcbiAgICogcmVnaXN0cnkucmVnaXN0ZXIoeyBuYW1lOiAnRCcgfSk7XG4gICAqXG4gICAqIGxldCB0cmFuc2l0aW9uQSA9ICRzdGF0ZS5nbygnQScpLnRyYW5zaXRpb25cbiAgICpcbiAgICogJHRyYW5zaXRpb25zLm9uU3VjY2Vzcyh7IHRvOiAnRCcgfSwgKHRyYW5zKSA9PiB7XG4gICAqICAgdHJhbnMudG8oKS5uYW1lID09PSAnRCc7IC8vIHRydWVcbiAgICogICB0cmFucy5yZWRpcmVjdGVkRnJvbSgpLnRvKCkubmFtZSA9PT0gJ0MnOyAvLyB0cnVlXG4gICAqICAgdHJhbnMub3JpZ2luYWxUcmFuc2l0aW9uKCkgPT09IHRyYW5zaXRpb25BOyAvLyB0cnVlXG4gICAqICAgdHJhbnMub3JpZ2luYWxUcmFuc2l0aW9uKCkudG8oKS5uYW1lID09PSAnQSc7IC8vIHRydWVcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgb3JpZ2luYWwgVHJhbnNpdGlvbiB0aGF0IHN0YXJ0ZWQgYSByZWRpcmVjdCBjaGFpblxuICAgKi9cbiAgb3JpZ2luYWxUcmFuc2l0aW9uKCk6IFRyYW5zaXRpb24ge1xuICAgIGNvbnN0IHJmID0gdGhpcy5yZWRpcmVjdGVkRnJvbSgpO1xuICAgIHJldHVybiAocmYgJiYgcmYub3JpZ2luYWxUcmFuc2l0aW9uKCkpIHx8IHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB0cmFuc2l0aW9uIG9wdGlvbnNcbiAgICpcbiAgICogQHJldHVybnMgdGhlIG9wdGlvbnMgZm9yIHRoaXMgVHJhbnNpdGlvbi5cbiAgICovXG4gIG9wdGlvbnMoKTogVHJhbnNpdGlvbk9wdGlvbnMge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHN0YXRlcyBiZWluZyBlbnRlcmVkLlxuICAgKlxuICAgKiBAcmV0dXJucyBhbiBhcnJheSBvZiBzdGF0ZXMgdGhhdCB3aWxsIGJlIGVudGVyZWQgZHVyaW5nIHRoaXMgdHJhbnNpdGlvbi5cbiAgICovXG4gIGVudGVyaW5nKCk6IFN0YXRlRGVjbGFyYXRpb25bXSB7XG4gICAgcmV0dXJuIG1hcCh0aGlzLl90cmVlQ2hhbmdlcy5lbnRlcmluZywgcHJvcCgnc3RhdGUnKSkubWFwKHN0YXRlU2VsZik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgc3RhdGVzIGJlaW5nIGV4aXRlZC5cbiAgICpcbiAgICogQHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGVzIHRoYXQgd2lsbCBiZSBleGl0ZWQgZHVyaW5nIHRoaXMgdHJhbnNpdGlvbi5cbiAgICovXG4gIGV4aXRpbmcoKTogU3RhdGVEZWNsYXJhdGlvbltdIHtcbiAgICByZXR1cm4gbWFwKHRoaXMuX3RyZWVDaGFuZ2VzLmV4aXRpbmcsIHByb3AoJ3N0YXRlJykpXG4gICAgICAubWFwKHN0YXRlU2VsZilcbiAgICAgIC5yZXZlcnNlKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgc3RhdGVzIGJlaW5nIHJldGFpbmVkLlxuICAgKlxuICAgKiBAcmV0dXJucyBhbiBhcnJheSBvZiBzdGF0ZXMgdGhhdCBhcmUgYWxyZWFkeSBlbnRlcmVkIGZyb20gYSBwcmV2aW91cyBUcmFuc2l0aW9uLCB0aGF0IHdpbGwgbm90IGJlXG4gICAqICAgIGV4aXRlZCBkdXJpbmcgdGhpcyBUcmFuc2l0aW9uXG4gICAqL1xuICByZXRhaW5lZCgpOiBTdGF0ZURlY2xhcmF0aW9uW10ge1xuICAgIHJldHVybiBtYXAodGhpcy5fdHJlZUNoYW5nZXMucmV0YWluZWQsIHByb3AoJ3N0YXRlJykpLm1hcChzdGF0ZVNlbGYpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgW1tWaWV3Q29uZmlnXV1zIGFzc29jaWF0ZWQgd2l0aCB0aGlzIFRyYW5zaXRpb25cbiAgICpcbiAgICogRWFjaCBzdGF0ZSBjYW4gZGVmaW5lIG9uZSBvciBtb3JlIHZpZXdzICh0ZW1wbGF0ZS9jb250cm9sbGVyKSwgd2hpY2ggYXJlIGVuY2Fwc3VsYXRlZCBhcyBgVmlld0NvbmZpZ2Agb2JqZWN0cy5cbiAgICogVGhpcyBtZXRob2QgZmV0Y2hlcyB0aGUgYFZpZXdDb25maWdzYCBmb3IgYSBnaXZlbiBwYXRoIGluIHRoZSBUcmFuc2l0aW9uIChlLmcuLCBcInRvXCIgb3IgXCJlbnRlcmluZ1wiKS5cbiAgICpcbiAgICogQHBhcmFtIHBhdGhuYW1lIHRoZSBuYW1lIG9mIHRoZSBwYXRoIHRvIGZldGNoIHZpZXdzIGZvcjpcbiAgICogICAoYCd0bydgLCBgJ2Zyb20nYCwgYCdlbnRlcmluZydgLCBgJ2V4aXRpbmcnYCwgYCdyZXRhaW5lZCdgKVxuICAgKiBAcGFyYW0gc3RhdGUgSWYgcHJvdmlkZWQsIG9ubHkgcmV0dXJucyB0aGUgYFZpZXdDb25maWdgcyBmb3IgYSBzaW5nbGUgc3RhdGUgaW4gdGhlIHBhdGhcbiAgICpcbiAgICogQHJldHVybnMgYSBsaXN0IG9mIFZpZXdDb25maWcgb2JqZWN0cyBmb3IgdGhlIGdpdmVuIHBhdGguXG4gICAqL1xuICB2aWV3cyhwYXRobmFtZSA9ICdlbnRlcmluZycsIHN0YXRlPzogU3RhdGVPYmplY3QpOiBWaWV3Q29uZmlnW10ge1xuICAgIGxldCBwYXRoID0gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdO1xuICAgIHBhdGggPSAhc3RhdGUgPyBwYXRoIDogcGF0aC5maWx0ZXIocHJvcEVxKCdzdGF0ZScsIHN0YXRlKSk7XG4gICAgcmV0dXJuIHBhdGhcbiAgICAgIC5tYXAocHJvcCgndmlld3MnKSlcbiAgICAgIC5maWx0ZXIoaWRlbnRpdHkpXG4gICAgICAucmVkdWNlKHVubmVzdFIsIFtdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHRyYW5zaXRpb24ncyB0cmVlIGNoYW5nZXNcbiAgICpcbiAgICogQSB0cmFuc2l0aW9uIGdvZXMgZnJvbSBvbmUgc3RhdGUvcGFyYW1ldGVycyB0byBhbm90aGVyIHN0YXRlL3BhcmFtZXRlcnMuXG4gICAqIER1cmluZyBhIHRyYW5zaXRpb24sIHN0YXRlcyBhcmUgZW50ZXJlZCBhbmQvb3IgZXhpdGVkLlxuICAgKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdmFyaW91cyBicmFuY2hlcyAocGF0aHMpIHdoaWNoIHJlcHJlc2VudCB0aGUgY2hhbmdlcyB0byB0aGVcbiAgICogYWN0aXZlIHN0YXRlIHRyZWUgdGhhdCBhcmUgY2F1c2VkIGJ5IHRoZSB0cmFuc2l0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gcGF0aG5hbWUgVGhlIG5hbWUgb2YgdGhlIHRyZWUgY2hhbmdlcyBwYXRoIHRvIGdldDpcbiAgICogICAoYCd0bydgLCBgJ2Zyb20nYCwgYCdlbnRlcmluZydgLCBgJ2V4aXRpbmcnYCwgYCdyZXRhaW5lZCdgKVxuICAgKi9cbiAgdHJlZUNoYW5nZXMocGF0aG5hbWU6IHN0cmluZyk6IFBhdGhOb2RlW107XG4gIHRyZWVDaGFuZ2VzKCk6IFRyZWVDaGFuZ2VzO1xuICB0cmVlQ2hhbmdlcyhwYXRobmFtZT86IHN0cmluZykge1xuICAgIHJldHVybiBwYXRobmFtZSA/IHRoaXMuX3RyZWVDaGFuZ2VzW3BhdGhuYW1lXSA6IHRoaXMuX3RyZWVDaGFuZ2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgdHJhbnNpdGlvbiB0aGF0IGlzIGEgcmVkaXJlY3Rpb24gb2YgdGhlIGN1cnJlbnQgb25lLlxuICAgKlxuICAgKiBUaGlzIHRyYW5zaXRpb24gY2FuIGJlIHJldHVybmVkIGZyb20gYSBbW1RyYW5zaXRpb25TZXJ2aWNlXV0gaG9vayB0b1xuICAgKiByZWRpcmVjdCBhIHRyYW5zaXRpb24gdG8gYSBuZXcgc3RhdGUgYW5kL29yIHNldCBvZiBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICpcbiAgICogQHJldHVybnMgUmV0dXJucyBhIG5ldyBbW1RyYW5zaXRpb25dXSBpbnN0YW5jZS5cbiAgICovXG4gIHJlZGlyZWN0KHRhcmdldFN0YXRlOiBUYXJnZXRTdGF0ZSk6IFRyYW5zaXRpb24ge1xuICAgIGxldCByZWRpcmVjdHMgPSAxLFxuICAgICAgdHJhbnM6IFRyYW5zaXRpb24gPSB0aGlzO1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25kaXRpb25hbC1hc3NpZ25tZW50XG4gICAgd2hpbGUgKCh0cmFucyA9IHRyYW5zLnJlZGlyZWN0ZWRGcm9tKCkpICE9IG51bGwpIHtcbiAgICAgIGlmICgrK3JlZGlyZWN0cyA+IDIwKSB0aHJvdyBuZXcgRXJyb3IoYFRvbyBtYW55IGNvbnNlY3V0aXZlIFRyYW5zaXRpb24gcmVkaXJlY3RzICgyMCspYCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVkaXJlY3RPcHRzOiBUcmFuc2l0aW9uT3B0aW9ucyA9IHsgcmVkaXJlY3RlZEZyb206IHRoaXMsIHNvdXJjZTogJ3JlZGlyZWN0JyB9O1xuICAgIC8vIElmIHRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uIHdhcyBjYXVzZWQgYnkgVVJMIHN5bmMsIHRoZW4gdXNlIHsgbG9jYXRpb246ICdyZXBsYWNlJyB9XG4gICAgLy8gb24gdGhlIG5ldyB0cmFuc2l0aW9uICh1bmxlc3MgdGhlIHRhcmdldCBzdGF0ZSBleHBsaWNpdGx5IHNwZWNpZmllcyBsb2NhdGlvbjogZmFsc2UpLlxuICAgIC8vIFRoaXMgY2F1c2VzIHRoZSBvcmlnaW5hbCB1cmwgdG8gYmUgcmVwbGFjZWQgd2l0aCB0aGUgdXJsIGZvciB0aGUgcmVkaXJlY3QgdGFyZ2V0XG4gICAgLy8gc28gdGhlIG9yaWdpbmFsIHVybCBkaXNhcHBlYXJzIGZyb20gdGhlIGJyb3dzZXIgaGlzdG9yeS5cbiAgICBpZiAodGhpcy5vcHRpb25zKCkuc291cmNlID09PSAndXJsJyAmJiB0YXJnZXRTdGF0ZS5vcHRpb25zKCkubG9jYXRpb24gIT09IGZhbHNlKSB7XG4gICAgICByZWRpcmVjdE9wdHMubG9jYXRpb24gPSAncmVwbGFjZSc7XG4gICAgfVxuXG4gICAgY29uc3QgbmV3T3B0aW9ucyA9IGV4dGVuZCh7fSwgdGhpcy5vcHRpb25zKCksIHRhcmdldFN0YXRlLm9wdGlvbnMoKSwgcmVkaXJlY3RPcHRzKTtcbiAgICB0YXJnZXRTdGF0ZSA9IHRhcmdldFN0YXRlLndpdGhPcHRpb25zKG5ld09wdGlvbnMsIHRydWUpO1xuXG4gICAgY29uc3QgbmV3VHJhbnNpdGlvbiA9IHRoaXMucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLmNyZWF0ZSh0aGlzLl90cmVlQ2hhbmdlcy5mcm9tLCB0YXJnZXRTdGF0ZSk7XG4gICAgY29uc3Qgb3JpZ2luYWxFbnRlcmluZ05vZGVzID0gdGhpcy5fdHJlZUNoYW5nZXMuZW50ZXJpbmc7XG4gICAgY29uc3QgcmVkaXJlY3RFbnRlcmluZ05vZGVzID0gbmV3VHJhbnNpdGlvbi5fdHJlZUNoYW5nZXMuZW50ZXJpbmc7XG5cbiAgICAvLyAtLS0gUmUtdXNlIHJlc29sdmUgZGF0YSBmcm9tIG9yaWdpbmFsIHRyYW5zaXRpb24gLS0tXG4gICAgLy8gV2hlbiByZWRpcmVjdGluZyBmcm9tIGEgcGFyZW50IHN0YXRlIHRvIGEgY2hpbGQgc3RhdGUgd2hlcmUgdGhlIHBhcmVudCBwYXJhbWV0ZXIgdmFsdWVzIGhhdmVuJ3QgY2hhbmdlZFxuICAgIC8vIChiZWNhdXNlIG9mIHRoZSByZWRpcmVjdCksIHRoZSByZXNvbHZlcyBmZXRjaGVkIGJ5IHRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uIGFyZSBzdGlsbCB2YWxpZCBpbiB0aGVcbiAgICAvLyByZWRpcmVjdGVkIHRyYW5zaXRpb24uXG4gICAgLy9cbiAgICAvLyBUaGlzIGFsbG93cyB5b3UgdG8gZGVmaW5lIGEgcmVkaXJlY3Qgb24gYSBwYXJlbnQgc3RhdGUgd2hpY2ggZGVwZW5kcyBvbiBhbiBhc3luYyByZXNvbHZlIHZhbHVlLlxuICAgIC8vIFlvdSBjYW4gd2FpdCBmb3IgdGhlIHJlc29sdmUsIHRoZW4gcmVkaXJlY3QgdG8gYSBjaGlsZCBzdGF0ZSBiYXNlZCBvbiB0aGUgcmVzdWx0LlxuICAgIC8vIFRoZSByZWRpcmVjdGVkIHRyYW5zaXRpb24gZG9lcyBub3QgaGF2ZSB0byByZS1mZXRjaCB0aGUgcmVzb2x2ZS5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIGNvbnN0IG5vZGVJc1JlbG9hZGluZyA9IChyZWxvYWRTdGF0ZTogU3RhdGVPYmplY3QpID0+IChub2RlOiBQYXRoTm9kZSkgPT4ge1xuICAgICAgcmV0dXJuIHJlbG9hZFN0YXRlICYmIG5vZGUuc3RhdGUuaW5jbHVkZXNbcmVsb2FkU3RhdGUubmFtZV07XG4gICAgfTtcblxuICAgIC8vIEZpbmQgYW55IFwiZW50ZXJpbmdcIiBub2RlcyBpbiB0aGUgcmVkaXJlY3QgcGF0aCB0aGF0IG1hdGNoIHRoZSBvcmlnaW5hbCBwYXRoIGFuZCBhcmVuJ3QgYmVpbmcgcmVsb2FkZWRcbiAgICBjb25zdCBtYXRjaGluZ0VudGVyaW5nTm9kZXM6IFBhdGhOb2RlW10gPSBQYXRoVXRpbHMubWF0Y2hpbmcoXG4gICAgICByZWRpcmVjdEVudGVyaW5nTm9kZXMsXG4gICAgICBvcmlnaW5hbEVudGVyaW5nTm9kZXMsXG4gICAgICBQYXRoVXRpbHMubm9uRHluYW1pY1BhcmFtcyxcbiAgICApLmZpbHRlcihub3Qobm9kZUlzUmVsb2FkaW5nKHRhcmdldFN0YXRlLm9wdGlvbnMoKS5yZWxvYWRTdGF0ZSkpKTtcblxuICAgIC8vIFVzZSB0aGUgZXhpc3RpbmcgKHBvc3NpYmx5IHByZS1yZXNvbHZlZCkgcmVzb2x2YWJsZXMgZm9yIHRoZSBtYXRjaGluZyBlbnRlcmluZyBub2Rlcy5cbiAgICBtYXRjaGluZ0VudGVyaW5nTm9kZXMuZm9yRWFjaCgobm9kZSwgaWR4KSA9PiB7XG4gICAgICBub2RlLnJlc29sdmFibGVzID0gb3JpZ2luYWxFbnRlcmluZ05vZGVzW2lkeF0ucmVzb2x2YWJsZXM7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmV3VHJhbnNpdGlvbjtcbiAgfVxuXG4gIC8qKiBAaGlkZGVuIElmIGEgdHJhbnNpdGlvbiBkb2Vzbid0IGV4aXQvZW50ZXIgYW55IHN0YXRlcywgcmV0dXJucyBhbnkgW1tQYXJhbV1dIHdob3NlIHZhbHVlIGNoYW5nZWQgKi9cbiAgcHJpdmF0ZSBfY2hhbmdlZFBhcmFtcygpOiBQYXJhbVtdIHtcbiAgICBjb25zdCB0YyA9IHRoaXMuX3RyZWVDaGFuZ2VzO1xuXG4gICAgLyoqIFJldHVybiB1bmRlZmluZWQgaWYgaXQncyBub3QgYSBcImR5bmFtaWNcIiB0cmFuc2l0aW9uLCBmb3IgdGhlIGZvbGxvd2luZyByZWFzb25zICovXG4gICAgLy8gSWYgdXNlciBleHBsaWNpdGx5IHdhbnRzIGEgcmVsb2FkXG4gICAgaWYgKHRoaXMuX29wdGlvbnMucmVsb2FkKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIC8vIElmIGFueSBzdGF0ZXMgYXJlIGV4aXRpbmcgb3IgZW50ZXJpbmdcbiAgICBpZiAodGMuZXhpdGluZy5sZW5ndGggfHwgdGMuZW50ZXJpbmcubGVuZ3RoKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIC8vIElmIHRvL2Zyb20gcGF0aCBsZW5ndGhzIGRpZmZlclxuICAgIGlmICh0Yy50by5sZW5ndGggIT09IHRjLmZyb20ubGVuZ3RoKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIC8vIElmIHRoZSB0by9mcm9tIHBhdGhzIGFyZSBkaWZmZXJlbnRcbiAgICBjb25zdCBwYXRoc0RpZmZlcjogYm9vbGVhbiA9IGFycmF5VHVwbGVzKHRjLnRvLCB0Yy5mcm9tKVxuICAgICAgLm1hcCh0dXBsZSA9PiB0dXBsZVswXS5zdGF0ZSAhPT0gdHVwbGVbMV0uc3RhdGUpXG4gICAgICAucmVkdWNlKGFueVRydWVSLCBmYWxzZSk7XG4gICAgaWYgKHBhdGhzRGlmZmVyKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgLy8gRmluZCBhbnkgcGFyYW1ldGVyIHZhbHVlcyB0aGF0IGRpZmZlclxuICAgIGNvbnN0IG5vZGVTY2hlbWFzOiBQYXJhbVtdW10gPSB0Yy50by5tYXAoKG5vZGU6IFBhdGhOb2RlKSA9PiBub2RlLnBhcmFtU2NoZW1hKTtcbiAgICBjb25zdCBbdG9WYWx1ZXMsIGZyb21WYWx1ZXNdID0gW3RjLnRvLCB0Yy5mcm9tXS5tYXAocGF0aCA9PiBwYXRoLm1hcCh4ID0+IHgucGFyYW1WYWx1ZXMpKTtcbiAgICBjb25zdCB0dXBsZXMgPSBhcnJheVR1cGxlcyhub2RlU2NoZW1hcywgdG9WYWx1ZXMsIGZyb21WYWx1ZXMpO1xuXG4gICAgcmV0dXJuIHR1cGxlcy5tYXAoKFtzY2hlbWEsIHRvVmFscywgZnJvbVZhbHNdKSA9PiBQYXJhbS5jaGFuZ2VkKHNjaGVtYSwgdG9WYWxzLCBmcm9tVmFscykpLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0cmFuc2l0aW9uIGlzIGR5bmFtaWMuXG4gICAqXG4gICAqIEEgdHJhbnNpdGlvbiBpcyBkeW5hbWljIGlmIG5vIHN0YXRlcyBhcmUgZW50ZXJlZCBub3IgZXhpdGVkLCBidXQgYXQgbGVhc3Qgb25lIGR5bmFtaWMgcGFyYW1ldGVyIGhhcyBjaGFuZ2VkLlxuICAgKlxuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBUcmFuc2l0aW9uIGlzIGR5bmFtaWNcbiAgICovXG4gIGR5bmFtaWMoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2hhbmdlcyA9IHRoaXMuX2NoYW5nZWRQYXJhbXMoKTtcbiAgICByZXR1cm4gIWNoYW5nZXMgPyBmYWxzZSA6IGNoYW5nZXMubWFwKHggPT4geC5keW5hbWljKS5yZWR1Y2UoYW55VHJ1ZVIsIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHRyYW5zaXRpb24gaXMgaWdub3JlZC5cbiAgICpcbiAgICogQSB0cmFuc2l0aW9uIGlzIGlnbm9yZWQgaWYgbm8gc3RhdGVzIGFyZSBlbnRlcmVkIG5vciBleGl0ZWQsIGFuZCBubyBwYXJhbWV0ZXIgdmFsdWVzIGhhdmUgY2hhbmdlZC5cbiAgICpcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyBpZ25vcmVkLlxuICAgKi9cbiAgaWdub3JlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLl9pZ25vcmVkUmVhc29uKCk7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBfaWdub3JlZFJlYXNvbigpOiAnU2FtZUFzQ3VycmVudCcgfCAnU2FtZUFzUGVuZGluZycgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLnJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb247XG4gICAgY29uc3QgcmVsb2FkU3RhdGUgPSB0aGlzLl9vcHRpb25zLnJlbG9hZFN0YXRlO1xuXG4gICAgY29uc3Qgc2FtZSA9IChwYXRoQSwgcGF0aEIpID0+IHtcbiAgICAgIGlmIChwYXRoQS5sZW5ndGggIT09IHBhdGhCLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgY29uc3QgbWF0Y2hpbmcgPSBQYXRoVXRpbHMubWF0Y2hpbmcocGF0aEEsIHBhdGhCKTtcbiAgICAgIHJldHVybiBwYXRoQS5sZW5ndGggPT09IG1hdGNoaW5nLmZpbHRlcihub2RlID0+ICFyZWxvYWRTdGF0ZSB8fCAhbm9kZS5zdGF0ZS5pbmNsdWRlc1tyZWxvYWRTdGF0ZS5uYW1lXSkubGVuZ3RoO1xuICAgIH07XG5cbiAgICBjb25zdCBuZXdUQyA9IHRoaXMudHJlZUNoYW5nZXMoKTtcbiAgICBjb25zdCBwZW5kVEMgPSBwZW5kaW5nICYmIHBlbmRpbmcudHJlZUNoYW5nZXMoKTtcblxuICAgIGlmIChwZW5kVEMgJiYgc2FtZShwZW5kVEMudG8sIG5ld1RDLnRvKSAmJiBzYW1lKHBlbmRUQy5leGl0aW5nLCBuZXdUQy5leGl0aW5nKSkgcmV0dXJuICdTYW1lQXNQZW5kaW5nJztcbiAgICBpZiAobmV3VEMuZXhpdGluZy5sZW5ndGggPT09IDAgJiYgbmV3VEMuZW50ZXJpbmcubGVuZ3RoID09PSAwICYmIHNhbWUobmV3VEMuZnJvbSwgbmV3VEMudG8pKSByZXR1cm4gJ1NhbWVBc0N1cnJlbnQnO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1bnMgdGhlIHRyYW5zaXRpb25cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgZ2VuZXJhbGx5IGNhbGxlZCBmcm9tIHRoZSBbW1N0YXRlU2VydmljZS50cmFuc2l0aW9uVG9dXVxuICAgKlxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICpcbiAgICogQHJldHVybnMgYSBwcm9taXNlIGZvciBhIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvbi5cbiAgICovXG4gIHJ1bigpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHJ1bkFsbEhvb2tzID0gVHJhbnNpdGlvbkhvb2sucnVuQWxsSG9va3M7XG5cbiAgICAvLyBHZXRzIHRyYW5zaXRpb24gaG9va3MgYXJyYXkgZm9yIHRoZSBnaXZlbiBwaGFzZVxuICAgIGNvbnN0IGdldEhvb2tzRm9yID0gKHBoYXNlOiBUcmFuc2l0aW9uSG9va1BoYXNlKSA9PiB0aGlzLl9ob29rQnVpbGRlci5idWlsZEhvb2tzRm9yUGhhc2UocGhhc2UpO1xuXG4gICAgLy8gV2hlbiB0aGUgY2hhaW4gaXMgY29tcGxldGUsIHRoZW4gcmVzb2x2ZSBvciByZWplY3QgdGhlIGRlZmVycmVkXG4gICAgY29uc3QgdHJhbnNpdGlvblN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICB0cmFjZS50cmFjZVN1Y2Nlc3ModGhpcy4kdG8oKSwgdGhpcyk7XG4gICAgICB0aGlzLnN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgdGhpcy5fZGVmZXJyZWQucmVzb2x2ZSh0aGlzLnRvKCkpO1xuICAgICAgcnVuQWxsSG9va3MoZ2V0SG9va3NGb3IoVHJhbnNpdGlvbkhvb2tQaGFzZS5TVUNDRVNTKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHRyYW5zaXRpb25FcnJvciA9IChyZWFzb246IFJlamVjdGlvbikgPT4ge1xuICAgICAgdHJhY2UudHJhY2VFcnJvcihyZWFzb24sIHRoaXMpO1xuICAgICAgdGhpcy5zdWNjZXNzID0gZmFsc2U7XG4gICAgICB0aGlzLl9kZWZlcnJlZC5yZWplY3QocmVhc29uKTtcbiAgICAgIHRoaXMuX2Vycm9yID0gcmVhc29uO1xuICAgICAgcnVuQWxsSG9va3MoZ2V0SG9va3NGb3IoVHJhbnNpdGlvbkhvb2tQaGFzZS5FUlJPUikpO1xuICAgIH07XG5cbiAgICBjb25zdCBydW5UcmFuc2l0aW9uID0gKCkgPT4ge1xuICAgICAgLy8gV2FpdCB0byBidWlsZCB0aGUgUlVOIGhvb2sgY2hhaW4gdW50aWwgdGhlIEJFRk9SRSBob29rcyBhcmUgZG9uZVxuICAgICAgLy8gVGhpcyBhbGxvd3MgYSBCRUZPUkUgaG9vayB0byBkeW5hbWljYWxseSBhZGQgYWRkaXRpb25hbCBSVU4gaG9va3MgdmlhIHRoZSBUcmFuc2l0aW9uIG9iamVjdC5cbiAgICAgIGNvbnN0IGFsbFJ1bkhvb2tzID0gZ2V0SG9va3NGb3IoVHJhbnNpdGlvbkhvb2tQaGFzZS5SVU4pO1xuICAgICAgY29uc3QgZG9uZSA9ICgpID0+IHNlcnZpY2VzLiRxLndoZW4odW5kZWZpbmVkKTtcbiAgICAgIHJldHVybiBUcmFuc2l0aW9uSG9vay5pbnZva2VIb29rcyhhbGxSdW5Ib29rcywgZG9uZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHN0YXJ0VHJhbnNpdGlvbiA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGdsb2JhbHMgPSB0aGlzLnJvdXRlci5nbG9iYWxzO1xuXG4gICAgICBnbG9iYWxzLmxhc3RTdGFydGVkVHJhbnNpdGlvbklkID0gdGhpcy4kaWQ7XG4gICAgICBnbG9iYWxzLnRyYW5zaXRpb24gPSB0aGlzO1xuICAgICAgZ2xvYmFscy50cmFuc2l0aW9uSGlzdG9yeS5lbnF1ZXVlKHRoaXMpO1xuXG4gICAgICB0cmFjZS50cmFjZVRyYW5zaXRpb25TdGFydCh0aGlzKTtcblxuICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4odW5kZWZpbmVkKTtcbiAgICB9O1xuXG4gICAgY29uc3QgYWxsQmVmb3JlSG9va3MgPSBnZXRIb29rc0ZvcihUcmFuc2l0aW9uSG9va1BoYXNlLkJFRk9SRSk7XG4gICAgVHJhbnNpdGlvbkhvb2suaW52b2tlSG9va3MoYWxsQmVmb3JlSG9va3MsIHN0YXJ0VHJhbnNpdGlvbilcbiAgICAgIC50aGVuKHJ1blRyYW5zaXRpb24pXG4gICAgICAudGhlbih0cmFuc2l0aW9uU3VjY2VzcywgdHJhbnNpdGlvbkVycm9yKTtcblxuICAgIHJldHVybiB0aGlzLnByb21pc2U7XG4gIH1cblxuICAvKiogQ2hlY2tzIGlmIHRoaXMgdHJhbnNpdGlvbiBpcyBjdXJyZW50bHkgYWN0aXZlL3J1bm5pbmcuICovXG4gIGlzQWN0aXZlID0gKCkgPT4gdGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uID09PSB0aGlzO1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIFRyYW5zaXRpb24gaXMgdmFsaWRcbiAgICpcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyB2YWxpZFxuICAgKi9cbiAgdmFsaWQoKSB7XG4gICAgcmV0dXJuICF0aGlzLmVycm9yKCkgfHwgdGhpcy5zdWNjZXNzICE9PSB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQWJvcnRzIHRoaXMgdHJhbnNpdGlvblxuICAgKlxuICAgKiBJbXBlcmF0aXZlIEFQSSB0byBhYm9ydCBhIFRyYW5zaXRpb24uXG4gICAqIFRoaXMgb25seSBhcHBsaWVzIHRvIFRyYW5zaXRpb25zIHRoYXQgYXJlIG5vdCB5ZXQgY29tcGxldGUuXG4gICAqL1xuICBhYm9ydCgpIHtcbiAgICAvLyBEbyBub3Qgc2V0IGZsYWcgaWYgdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBjb21wbGV0ZVxuICAgIGlmIChpc1VuZGVmaW5lZCh0aGlzLnN1Y2Nlc3MpKSB7XG4gICAgICB0aGlzLl9hYm9ydGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIFRyYW5zaXRpb24gZXJyb3IgcmVhc29uLlxuICAgKlxuICAgKiBJZiB0aGUgdHJhbnNpdGlvbiBpcyBpbnZhbGlkIChhbmQgY291bGQgbm90IGJlIHJ1biksIHJldHVybnMgdGhlIHJlYXNvbiB0aGUgdHJhbnNpdGlvbiBpcyBpbnZhbGlkLlxuICAgKiBJZiB0aGUgdHJhbnNpdGlvbiB3YXMgdmFsaWQgYW5kIHJhbiwgYnV0IHdhcyBub3Qgc3VjY2Vzc2Z1bCwgcmV0dXJucyB0aGUgcmVhc29uIHRoZSB0cmFuc2l0aW9uIGZhaWxlZC5cbiAgICpcbiAgICogQHJldHVybnMgYSB0cmFuc2l0aW9uIHJlamVjdGlvbiBleHBsYWluaW5nIHdoeSB0aGUgdHJhbnNpdGlvbiBpcyBpbnZhbGlkLCBvciB0aGUgcmVhc29uIHRoZSB0cmFuc2l0aW9uIGZhaWxlZC5cbiAgICovXG4gIGVycm9yKCk6IFJlamVjdGlvbiB7XG4gICAgY29uc3Qgc3RhdGU6IFN0YXRlT2JqZWN0ID0gdGhpcy4kdG8oKTtcblxuICAgIGlmIChzdGF0ZS5zZWxmLmFic3RyYWN0KSB7XG4gICAgICByZXR1cm4gUmVqZWN0aW9uLmludmFsaWQoYENhbm5vdCB0cmFuc2l0aW9uIHRvIGFic3RyYWN0IHN0YXRlICcke3N0YXRlLm5hbWV9J2ApO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmFtRGVmcyA9IHN0YXRlLnBhcmFtZXRlcnMoKTtcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLnBhcmFtcygpO1xuICAgIGNvbnN0IGludmFsaWRQYXJhbXMgPSBwYXJhbURlZnMuZmlsdGVyKHBhcmFtID0+ICFwYXJhbS52YWxpZGF0ZXModmFsdWVzW3BhcmFtLmlkXSkpO1xuXG4gICAgaWYgKGludmFsaWRQYXJhbXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBpbnZhbGlkVmFsdWVzID0gaW52YWxpZFBhcmFtcy5tYXAocGFyYW0gPT4gYFske3BhcmFtLmlkfToke3N0cmluZ2lmeSh2YWx1ZXNbcGFyYW0uaWRdKX1dYCkuam9pbignLCAnKTtcbiAgICAgIGNvbnN0IGRldGFpbCA9IGBUaGUgZm9sbG93aW5nIHBhcmFtZXRlciB2YWx1ZXMgYXJlIG5vdCB2YWxpZCBmb3Igc3RhdGUgJyR7c3RhdGUubmFtZX0nOiAke2ludmFsaWRWYWx1ZXN9YDtcbiAgICAgIHJldHVybiBSZWplY3Rpb24uaW52YWxpZChkZXRhaWwpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN1Y2Nlc3MgPT09IGZhbHNlKSByZXR1cm4gdGhpcy5fZXJyb3I7XG4gIH1cblxuICAvKipcbiAgICogQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIFRyYW5zaXRpb25cbiAgICpcbiAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIFRyYW5zaXRpb25cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIGNvbnN0IGZyb21TdGF0ZU9yTmFtZSA9IHRoaXMuZnJvbSgpO1xuICAgIGNvbnN0IHRvU3RhdGVPck5hbWUgPSB0aGlzLnRvKCk7XG5cbiAgICBjb25zdCBhdm9pZEVtcHR5SGFzaCA9IChwYXJhbXM6IFJhd1BhcmFtcykgPT5cbiAgICAgIHBhcmFtc1snIyddICE9PSBudWxsICYmIHBhcmFtc1snIyddICE9PSB1bmRlZmluZWQgPyBwYXJhbXMgOiBvbWl0KHBhcmFtcywgWycjJ10pO1xuXG4gICAgLy8gKFgpIG1lYW5zIHRoZSB0byBzdGF0ZSBpcyBpbnZhbGlkLlxuICAgIGNvbnN0IGlkID0gdGhpcy4kaWQsXG4gICAgICBmcm9tID0gaXNPYmplY3QoZnJvbVN0YXRlT3JOYW1lKSA/IGZyb21TdGF0ZU9yTmFtZS5uYW1lIDogZnJvbVN0YXRlT3JOYW1lLFxuICAgICAgZnJvbVBhcmFtcyA9IHN0cmluZ2lmeShhdm9pZEVtcHR5SGFzaCh0aGlzLl90cmVlQ2hhbmdlcy5mcm9tLm1hcChwcm9wKCdwYXJhbVZhbHVlcycpKS5yZWR1Y2UobWVyZ2VSLCB7fSkpKSxcbiAgICAgIHRvVmFsaWQgPSB0aGlzLnZhbGlkKCkgPyAnJyA6ICcoWCkgJyxcbiAgICAgIHRvID0gaXNPYmplY3QodG9TdGF0ZU9yTmFtZSkgPyB0b1N0YXRlT3JOYW1lLm5hbWUgOiB0b1N0YXRlT3JOYW1lLFxuICAgICAgdG9QYXJhbXMgPSBzdHJpbmdpZnkoYXZvaWRFbXB0eUhhc2godGhpcy5wYXJhbXMoKSkpO1xuXG4gICAgcmV0dXJuIGBUcmFuc2l0aW9uIyR7aWR9KCAnJHtmcm9tfScke2Zyb21QYXJhbXN9IC0+ICR7dG9WYWxpZH0nJHt0b30nJHt0b1BhcmFtc30gKWA7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS90cmFuc2l0aW9uL3RyYW5zaXRpb24udHMiLCIvKiogQG1vZHVsZSBwYXRoICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuXG5pbXBvcnQge1xuICBleHRlbmQsXG4gIGZpbmQsXG4gIHBpY2ssXG4gIG9taXQsXG4gIHRhaWwsXG4gIG1lcmdlUixcbiAgdmFsdWVzLFxuICB1bm5lc3RSLFxuICBQcmVkaWNhdGUsXG4gIGluQXJyYXksXG4gIGFycmF5VHVwbGVzLFxufSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IHByb3AsIHByb3BFcSwgbm90IH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5cbmltcG9ydCB7IFJhd1BhcmFtcyB9IGZyb20gJy4uL3BhcmFtcy9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVHJlZUNoYW5nZXMgfSBmcm9tICcuLi90cmFuc2l0aW9uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBWaWV3Q29uZmlnIH0gZnJvbSAnLi4vdmlldy9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgX1ZpZXdEZWNsYXJhdGlvbiB9IGZyb20gJy4uL3N0YXRlL2ludGVyZmFjZSc7XG5cbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi4vc3RhdGUvc3RhdGVPYmplY3QnO1xuaW1wb3J0IHsgVGFyZ2V0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS90YXJnZXRTdGF0ZSc7XG5pbXBvcnQgeyBHZXRQYXJhbXNGbiwgUGF0aE5vZGUgfSBmcm9tICcuL3BhdGhOb2RlJztcbmltcG9ydCB7IFZpZXdTZXJ2aWNlIH0gZnJvbSAnLi4vdmlldy92aWV3JztcbmltcG9ydCB7IFBhcmFtIH0gZnJvbSAnLi4vcGFyYW1zL3BhcmFtJztcbmltcG9ydCB7IFN0YXRlUmVnaXN0cnkgfSBmcm9tICcuLi9zdGF0ZSc7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBjb250YWlucyBmdW5jdGlvbnMgd2hpY2ggY29udmVydCBUYXJnZXRTdGF0ZXMsIE5vZGVzIGFuZCBwYXRocyBmcm9tIG9uZSB0eXBlIHRvIGFub3RoZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXRoVXRpbHMge1xuICAvKiogR2l2ZW4gYSBQYXRoTm9kZVtdLCBjcmVhdGUgYW4gVGFyZ2V0U3RhdGUgKi9cbiAgc3RhdGljIG1ha2VUYXJnZXRTdGF0ZShyZWdpc3RyeTogU3RhdGVSZWdpc3RyeSwgcGF0aDogUGF0aE5vZGVbXSk6IFRhcmdldFN0YXRlIHtcbiAgICBjb25zdCBzdGF0ZSA9IHRhaWwocGF0aCkuc3RhdGU7XG4gICAgcmV0dXJuIG5ldyBUYXJnZXRTdGF0ZShyZWdpc3RyeSwgc3RhdGUsIHBhdGgubWFwKHByb3AoJ3BhcmFtVmFsdWVzJykpLnJlZHVjZShtZXJnZVIsIHt9KSwge30pO1xuICB9XG5cbiAgc3RhdGljIGJ1aWxkUGF0aCh0YXJnZXRTdGF0ZTogVGFyZ2V0U3RhdGUpIHtcbiAgICBjb25zdCB0b1BhcmFtcyA9IHRhcmdldFN0YXRlLnBhcmFtcygpO1xuICAgIHJldHVybiB0YXJnZXRTdGF0ZS4kc3RhdGUoKS5wYXRoLm1hcChzdGF0ZSA9PiBuZXcgUGF0aE5vZGUoc3RhdGUpLmFwcGx5UmF3UGFyYW1zKHRvUGFyYW1zKSk7XG4gIH1cblxuICAvKiogR2l2ZW4gYSBmcm9tUGF0aDogUGF0aE5vZGVbXSBhbmQgYSBUYXJnZXRTdGF0ZSwgYnVpbGRzIGEgdG9QYXRoOiBQYXRoTm9kZVtdICovXG4gIHN0YXRpYyBidWlsZFRvUGF0aChmcm9tUGF0aDogUGF0aE5vZGVbXSwgdGFyZ2V0U3RhdGU6IFRhcmdldFN0YXRlKTogUGF0aE5vZGVbXSB7XG4gICAgY29uc3QgdG9QYXRoOiBQYXRoTm9kZVtdID0gUGF0aFV0aWxzLmJ1aWxkUGF0aCh0YXJnZXRTdGF0ZSk7XG4gICAgaWYgKHRhcmdldFN0YXRlLm9wdGlvbnMoKS5pbmhlcml0KSB7XG4gICAgICByZXR1cm4gUGF0aFV0aWxzLmluaGVyaXRQYXJhbXMoZnJvbVBhdGgsIHRvUGF0aCwgT2JqZWN0LmtleXModGFyZ2V0U3RhdGUucGFyYW1zKCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRvUGF0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIFZpZXdDb25maWcgb2JqZWN0cyBhbmQgYWRkcyB0byBub2Rlcy5cbiAgICpcbiAgICogT24gZWFjaCBbW1BhdGhOb2RlXV0sIGNyZWF0ZXMgVmlld0NvbmZpZyBvYmplY3RzIGZyb20gdGhlIHZpZXdzOiBwcm9wZXJ0eSBvZiB0aGUgbm9kZSdzIHN0YXRlXG4gICAqL1xuICBzdGF0aWMgYXBwbHlWaWV3Q29uZmlncygkdmlldzogVmlld1NlcnZpY2UsIHBhdGg6IFBhdGhOb2RlW10sIHN0YXRlczogU3RhdGVPYmplY3RbXSkge1xuICAgIC8vIE9ubHkgYXBwbHkgdGhlIHZpZXdDb25maWdzIHRvIHRoZSBub2RlcyBmb3IgdGhlIGdpdmVuIHN0YXRlc1xuICAgIHBhdGguZmlsdGVyKG5vZGUgPT4gaW5BcnJheShzdGF0ZXMsIG5vZGUuc3RhdGUpKS5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgY29uc3Qgdmlld0RlY2xzOiBfVmlld0RlY2xhcmF0aW9uW10gPSB2YWx1ZXMobm9kZS5zdGF0ZS52aWV3cyB8fCB7fSk7XG4gICAgICBjb25zdCBzdWJQYXRoID0gUGF0aFV0aWxzLnN1YlBhdGgocGF0aCwgbiA9PiBuID09PSBub2RlKTtcbiAgICAgIGNvbnN0IHZpZXdDb25maWdzOiBWaWV3Q29uZmlnW11bXSA9IHZpZXdEZWNscy5tYXAodmlldyA9PiAkdmlldy5jcmVhdGVWaWV3Q29uZmlnKHN1YlBhdGgsIHZpZXcpKTtcbiAgICAgIG5vZGUudmlld3MgPSB2aWV3Q29uZmlncy5yZWR1Y2UodW5uZXN0UiwgW10pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgZnJvbVBhdGggYW5kIGEgdG9QYXRoLCByZXR1cm5zIGEgbmV3IHRvIHBhdGggd2hpY2ggaW5oZXJpdHMgcGFyYW1ldGVycyBmcm9tIHRoZSBmcm9tUGF0aFxuICAgKlxuICAgKiBGb3IgYSBwYXJhbWV0ZXIgaW4gYSBub2RlIHRvIGJlIGluaGVyaXRlZCBmcm9tIHRoZSBmcm9tIHBhdGg6XG4gICAqIC0gVGhlIHRvUGF0aCdzIG5vZGUgbXVzdCBoYXZlIGEgbWF0Y2hpbmcgbm9kZSBpbiB0aGUgZnJvbVBhdGggKGJ5IHN0YXRlKS5cbiAgICogLSBUaGUgcGFyYW1ldGVyIG5hbWUgbXVzdCBub3QgYmUgZm91bmQgaW4gdGhlIHRvS2V5cyBwYXJhbWV0ZXIgYXJyYXkuXG4gICAqXG4gICAqIE5vdGU6IHRoZSBrZXlzIHByb3ZpZGVkIGluIHRvS2V5cyBhcmUgaW50ZW5kZWQgdG8gYmUgdGhvc2UgcGFyYW0ga2V5cyBleHBsaWNpdGx5IHNwZWNpZmllZCBieSBzb21lXG4gICAqIGNhbGxlciwgZm9yIGluc3RhbmNlLCAkc3RhdGUudHJhbnNpdGlvblRvKC4uLiwgdG9QYXJhbXMpLiAgSWYgYSBrZXkgd2FzIGZvdW5kIGluIHRvUGFyYW1zLFxuICAgKiBpdCBpcyBub3QgaW5oZXJpdGVkIGZyb20gdGhlIGZyb21QYXRoLlxuICAgKi9cbiAgc3RhdGljIGluaGVyaXRQYXJhbXMoZnJvbVBhdGg6IFBhdGhOb2RlW10sIHRvUGF0aDogUGF0aE5vZGVbXSwgdG9LZXlzOiBzdHJpbmdbXSA9IFtdKTogUGF0aE5vZGVbXSB7XG4gICAgZnVuY3Rpb24gbm9kZVBhcmFtVmFscyhwYXRoOiBQYXRoTm9kZVtdLCBzdGF0ZTogU3RhdGVPYmplY3QpOiBSYXdQYXJhbXMge1xuICAgICAgY29uc3Qgbm9kZTogUGF0aE5vZGUgPSBmaW5kKHBhdGgsIHByb3BFcSgnc3RhdGUnLCBzdGF0ZSkpO1xuICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgbm9kZSAmJiBub2RlLnBhcmFtVmFsdWVzKTtcbiAgICB9XG5cbiAgICBjb25zdCBub0luaGVyaXQgPSBmcm9tUGF0aFxuICAgICAgLm1hcChub2RlID0+IG5vZGUucGFyYW1TY2hlbWEpXG4gICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgLmZpbHRlcihwYXJhbSA9PiAhcGFyYW0uaW5oZXJpdClcbiAgICAgIC5tYXAocHJvcCgnaWQnKSk7XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhbiBbW1BhdGhOb2RlXV0gXCJ0b05vZGVcIiwgcmV0dXJuIGEgbmV3IFtbUGF0aE5vZGVdXSB3aXRoIHBhcmFtIHZhbHVlcyBpbmhlcml0ZWQgZnJvbSB0aGVcbiAgICAgKiBtYXRjaGluZyBub2RlIGluIGZyb21QYXRoLiAgT25seSBpbmhlcml0IGtleXMgdGhhdCBhcmVuJ3QgZm91bmQgaW4gXCJ0b0tleXNcIiBmcm9tIHRoZSBub2RlIGluIFwiZnJvbVBhdGhcIlwiXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFrZUluaGVyaXRlZFBhcmFtc05vZGUodG9Ob2RlOiBQYXRoTm9kZSk6IFBhdGhOb2RlIHtcbiAgICAgIC8vIEFsbCBwYXJhbSB2YWx1ZXMgZm9yIHRoZSBub2RlIChtYXkgaW5jbHVkZSBkZWZhdWx0IGtleS92YWxzLCB3aGVuIGtleSB3YXMgbm90IGZvdW5kIGluIHRvUGFyYW1zKVxuICAgICAgbGV0IHRvUGFyYW1WYWxzID0gZXh0ZW5kKHt9LCB0b05vZGUgJiYgdG9Ob2RlLnBhcmFtVmFsdWVzKTtcbiAgICAgIC8vIGxpbWl0ZWQgdG8gb25seSB0aG9zZSBrZXlzIGZvdW5kIGluIHRvUGFyYW1zXG4gICAgICBjb25zdCBpbmNvbWluZ1BhcmFtVmFscyA9IHBpY2sodG9QYXJhbVZhbHMsIHRvS2V5cyk7XG4gICAgICB0b1BhcmFtVmFscyA9IG9taXQodG9QYXJhbVZhbHMsIHRvS2V5cyk7XG4gICAgICBjb25zdCBmcm9tUGFyYW1WYWxzID0gb21pdChub2RlUGFyYW1WYWxzKGZyb21QYXRoLCB0b05vZGUuc3RhdGUpIHx8IHt9LCBub0luaGVyaXQpO1xuICAgICAgLy8gZXh0ZW5kIHRvUGFyYW1WYWxzIHdpdGggYW55IGZyb21QYXJhbVZhbHMsIHRoZW4gb3ZlcnJpZGUgYW55IG9mIHRob3NlIHRob3NlIHdpdGggaW5jb21pbmdQYXJhbVZhbHNcbiAgICAgIGNvbnN0IG93blBhcmFtVmFsczogUmF3UGFyYW1zID0gZXh0ZW5kKHRvUGFyYW1WYWxzLCBmcm9tUGFyYW1WYWxzLCBpbmNvbWluZ1BhcmFtVmFscyk7XG4gICAgICByZXR1cm4gbmV3IFBhdGhOb2RlKHRvTm9kZS5zdGF0ZSkuYXBwbHlSYXdQYXJhbXMob3duUGFyYW1WYWxzKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgcGFyYW0ga2V5cyBzcGVjaWZpZWQgYnkgdGhlIGluY29taW5nIHRvUGFyYW1zXG4gICAgcmV0dXJuIDxQYXRoTm9kZVtdPnRvUGF0aC5tYXAobWFrZUluaGVyaXRlZFBhcmFtc05vZGUpO1xuICB9XG5cbiAgc3RhdGljIG5vbkR5bmFtaWNQYXJhbXMgPSAobm9kZTogUGF0aE5vZGUpOiBQYXJhbVtdID0+XG4gICAgbm9kZS5zdGF0ZS5wYXJhbWV0ZXJzKHsgaW5oZXJpdDogZmFsc2UgfSkuZmlsdGVyKHBhcmFtID0+ICFwYXJhbS5keW5hbWljKTtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIHRyZWUgY2hhbmdlcyAoZW50ZXJpbmcsIGV4aXRpbmcpIGJldHdlZW4gYSBmcm9tUGF0aCBhbmQgdG9QYXRoLlxuICAgKi9cbiAgc3RhdGljIHRyZWVDaGFuZ2VzKGZyb21QYXRoOiBQYXRoTm9kZVtdLCB0b1BhdGg6IFBhdGhOb2RlW10sIHJlbG9hZFN0YXRlOiBTdGF0ZU9iamVjdCk6IFRyZWVDaGFuZ2VzIHtcbiAgICBjb25zdCBtYXggPSBNYXRoLm1pbihmcm9tUGF0aC5sZW5ndGgsIHRvUGF0aC5sZW5ndGgpO1xuICAgIGxldCBrZWVwID0gMDtcblxuICAgIGNvbnN0IG5vZGVzTWF0Y2ggPSAobm9kZTE6IFBhdGhOb2RlLCBub2RlMjogUGF0aE5vZGUpID0+IG5vZGUxLmVxdWFscyhub2RlMiwgUGF0aFV0aWxzLm5vbkR5bmFtaWNQYXJhbXMpO1xuXG4gICAgd2hpbGUgKGtlZXAgPCBtYXggJiYgZnJvbVBhdGhba2VlcF0uc3RhdGUgIT09IHJlbG9hZFN0YXRlICYmIG5vZGVzTWF0Y2goZnJvbVBhdGhba2VlcF0sIHRvUGF0aFtrZWVwXSkpIHtcbiAgICAgIGtlZXArKztcbiAgICB9XG5cbiAgICAvKiogR2l2ZW4gYSByZXRhaW5lZCBub2RlLCByZXR1cm4gYSBuZXcgbm9kZSB3aGljaCB1c2VzIHRoZSB0byBub2RlJ3MgcGFyYW0gdmFsdWVzICovXG4gICAgZnVuY3Rpb24gYXBwbHlUb1BhcmFtcyhyZXRhaW5lZE5vZGU6IFBhdGhOb2RlLCBpZHg6IG51bWJlcik6IFBhdGhOb2RlIHtcbiAgICAgIGNvbnN0IGNsb25lZCA9IHJldGFpbmVkTm9kZS5jbG9uZSgpO1xuICAgICAgY2xvbmVkLnBhcmFtVmFsdWVzID0gdG9QYXRoW2lkeF0ucGFyYW1WYWx1ZXM7XG4gICAgICByZXR1cm4gY2xvbmVkO1xuICAgIH1cblxuICAgIGxldCBmcm9tOiBQYXRoTm9kZVtdLCByZXRhaW5lZDogUGF0aE5vZGVbXSwgZXhpdGluZzogUGF0aE5vZGVbXSwgZW50ZXJpbmc6IFBhdGhOb2RlW10sIHRvOiBQYXRoTm9kZVtdO1xuXG4gICAgZnJvbSA9IGZyb21QYXRoO1xuICAgIHJldGFpbmVkID0gZnJvbS5zbGljZSgwLCBrZWVwKTtcbiAgICBleGl0aW5nID0gZnJvbS5zbGljZShrZWVwKTtcblxuICAgIC8vIENyZWF0ZSBhIG5ldyByZXRhaW5lZCBwYXRoICh3aXRoIHNoYWxsb3cgY29waWVzIG9mIG5vZGVzKSB3aGljaCBoYXZlIHRoZSBwYXJhbXMgb2YgdGhlIHRvUGF0aCBtYXBwZWRcbiAgICBjb25zdCByZXRhaW5lZFdpdGhUb1BhcmFtcyA9IHJldGFpbmVkLm1hcChhcHBseVRvUGFyYW1zKTtcbiAgICBlbnRlcmluZyA9IHRvUGF0aC5zbGljZShrZWVwKTtcbiAgICB0byA9IHJldGFpbmVkV2l0aFRvUGFyYW1zLmNvbmNhdChlbnRlcmluZyk7XG5cbiAgICByZXR1cm4geyBmcm9tLCB0bywgcmV0YWluZWQsIHJldGFpbmVkV2l0aFRvUGFyYW1zLCBleGl0aW5nLCBlbnRlcmluZyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgcGF0aCB3aGljaCBpczogdGhlIHN1YnBhdGggb2YgdGhlIGZpcnN0IHBhdGggd2hpY2ggbWF0Y2hlcyB0aGUgc2Vjb25kIHBhdGguXG4gICAqXG4gICAqIFRoZSBuZXcgcGF0aCBzdGFydHMgZnJvbSByb290IGFuZCBjb250YWlucyBhbnkgbm9kZXMgdGhhdCBtYXRjaCB0aGUgbm9kZXMgaW4gdGhlIHNlY29uZCBwYXRoLlxuICAgKiBJdCBzdG9wcyBiZWZvcmUgdGhlIGZpcnN0IG5vbi1tYXRjaGluZyBub2RlLlxuICAgKlxuICAgKiBOb2RlcyBhcmUgY29tcGFyZWQgdXNpbmcgdGhlaXIgc3RhdGUgcHJvcGVydHkgYW5kIHRoZWlyIHBhcmFtZXRlciB2YWx1ZXMuXG4gICAqIElmIGEgYHBhcmFtc0ZuYCBpcyBwcm92aWRlZCwgb25seSB0aGUgW1tQYXJhbV1dIHJldHVybmVkIGJ5IHRoZSBmdW5jdGlvbiB3aWxsIGJlIGNvbnNpZGVyZWQgd2hlbiBjb21wYXJpbmcgbm9kZXMuXG4gICAqXG4gICAqIEBwYXJhbSBwYXRoQSB0aGUgZmlyc3QgcGF0aFxuICAgKiBAcGFyYW0gcGF0aEIgdGhlIHNlY29uZCBwYXRoXG4gICAqIEBwYXJhbSBwYXJhbXNGbiBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlIHBhcmFtZXRlcnMgdG8gY29uc2lkZXIgd2hlbiBjb21wYXJpbmdcbiAgICpcbiAgICogQHJldHVybnMgYW4gYXJyYXkgb2YgUGF0aE5vZGVzIGZyb20gdGhlIGZpcnN0IHBhdGggd2hpY2ggbWF0Y2ggdGhlIG5vZGVzIGluIHRoZSBzZWNvbmQgcGF0aFxuICAgKi9cbiAgc3RhdGljIG1hdGNoaW5nKHBhdGhBOiBQYXRoTm9kZVtdLCBwYXRoQjogUGF0aE5vZGVbXSwgcGFyYW1zRm4/OiBHZXRQYXJhbXNGbik6IFBhdGhOb2RlW10ge1xuICAgIGxldCBkb25lID0gZmFsc2U7XG4gICAgY29uc3QgdHVwbGVzOiBQYXRoTm9kZVtdW10gPSBhcnJheVR1cGxlcyhwYXRoQSwgcGF0aEIpO1xuICAgIHJldHVybiB0dXBsZXMucmVkdWNlKChtYXRjaGluZywgW25vZGVBLCBub2RlQl0pID0+IHtcbiAgICAgIGRvbmUgPSBkb25lIHx8ICFub2RlQS5lcXVhbHMobm9kZUIsIHBhcmFtc0ZuKTtcbiAgICAgIHJldHVybiBkb25lID8gbWF0Y2hpbmcgOiBtYXRjaGluZy5jb25jYXQobm9kZUEpO1xuICAgIH0sIFtdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdHdvIHBhdGhzIGFyZSBpZGVudGljYWwuXG4gICAqXG4gICAqIEBwYXJhbSBwYXRoQVxuICAgKiBAcGFyYW0gcGF0aEJcbiAgICogQHBhcmFtIHBhcmFtc0ZuIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgcGFyYW1ldGVycyB0byBjb25zaWRlciB3aGVuIGNvbXBhcmluZ1xuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSB0aGUgc3RhdGVzIGFuZCBwYXJhbWV0ZXIgdmFsdWVzIGZvciBib3RoIHBhdGhzIGFyZSBpZGVudGljYWxcbiAgICovXG4gIHN0YXRpYyBlcXVhbHMocGF0aEE6IFBhdGhOb2RlW10sIHBhdGhCOiBQYXRoTm9kZVtdLCBwYXJhbXNGbj86IEdldFBhcmFtc0ZuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHBhdGhBLmxlbmd0aCA9PT0gcGF0aEIubGVuZ3RoICYmIFBhdGhVdGlscy5tYXRjaGluZyhwYXRoQSwgcGF0aEIsIHBhcmFtc0ZuKS5sZW5ndGggPT09IHBhdGhBLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBzdWJwYXRoIG9mIGEgcGF0aCwgd2hpY2ggc3RvcHMgYXQgdGhlIGZpcnN0IG1hdGNoaW5nIG5vZGVcbiAgICpcbiAgICogR2l2ZW4gYW4gYXJyYXkgb2Ygbm9kZXMsIHJldHVybnMgYSBzdWJzZXQgb2YgdGhlIGFycmF5IHN0YXJ0aW5nIGZyb20gdGhlIGZpcnN0IG5vZGUsXG4gICAqIHN0b3BwaW5nIHdoZW4gdGhlIGZpcnN0IG5vZGUgbWF0Y2hlcyB0aGUgcHJlZGljYXRlLlxuICAgKlxuICAgKiBAcGFyYW0gcGF0aCBhIHBhdGggb2YgW1tQYXRoTm9kZV1dc1xuICAgKiBAcGFyYW0gcHJlZGljYXRlIGEgW1tQcmVkaWNhdGVdXSBmbiB0aGF0IG1hdGNoZXMgW1tQYXRoTm9kZV1dc1xuICAgKiBAcmV0dXJucyBhIHN1YnBhdGggdXAgdG8gdGhlIG1hdGNoaW5nIG5vZGUsIG9yIHVuZGVmaW5lZCBpZiBubyBtYXRjaCBpcyBmb3VuZFxuICAgKi9cbiAgc3RhdGljIHN1YlBhdGgocGF0aDogUGF0aE5vZGVbXSwgcHJlZGljYXRlOiBQcmVkaWNhdGU8UGF0aE5vZGU+KTogUGF0aE5vZGVbXSB7XG4gICAgY29uc3Qgbm9kZSA9IGZpbmQocGF0aCwgcHJlZGljYXRlKTtcbiAgICBjb25zdCBlbGVtZW50SWR4ID0gcGF0aC5pbmRleE9mKG5vZGUpO1xuICAgIHJldHVybiBlbGVtZW50SWR4ID09PSAtMSA/IHVuZGVmaW5lZCA6IHBhdGguc2xpY2UoMCwgZWxlbWVudElkeCArIDEpO1xuICB9XG5cbiAgLyoqIEdldHMgdGhlIHJhdyBwYXJhbWV0ZXIgdmFsdWVzIGZyb20gYSBwYXRoICovXG4gIHN0YXRpYyBwYXJhbVZhbHVlcyA9IChwYXRoOiBQYXRoTm9kZVtdKSA9PiBwYXRoLnJlZHVjZSgoYWNjLCBub2RlKSA9PiBleHRlbmQoYWNjLCBub2RlLnBhcmFtVmFsdWVzKSwge30pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3BhdGgvcGF0aFV0aWxzLnRzIiwiLyoqIEBtb2R1bGUgcmVzb2x2ZSAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBmaW5kLCB0YWlsLCB1bmlxUiwgdW5uZXN0UiwgaW5BcnJheSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcEVxLCBub3QgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IHRyYWNlIH0gZnJvbSAnLi4vY29tbW9uL3RyYWNlJztcbmltcG9ydCB7IHNlcnZpY2VzLCAkSW5qZWN0b3JMaWtlIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyByZXNvbHZlUG9saWNpZXMsIFBvbGljeVdoZW4sIFJlc29sdmVQb2xpY3kgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBQYXRoTm9kZSB9IGZyb20gJy4uL3BhdGgvcGF0aE5vZGUnO1xuaW1wb3J0IHsgUmVzb2x2YWJsZSB9IGZyb20gJy4vcmVzb2x2YWJsZSc7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFBhdGhVdGlscyB9IGZyb20gJy4uL3BhdGgvcGF0aFV0aWxzJztcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJy4uL2NvbW1vbi9zdHJpbmdzJztcbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgVUlJbmplY3RvciB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBpc1VuZGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbic7XG5cbmNvbnN0IHdoZW5zID0gcmVzb2x2ZVBvbGljaWVzLndoZW47XG5jb25zdCBBTExfV0hFTlMgPSBbd2hlbnMuRUFHRVIsIHdoZW5zLkxBWlldO1xuY29uc3QgRUFHRVJfV0hFTlMgPSBbd2hlbnMuRUFHRVJdO1xuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8taW5mZXJyYWJsZS10eXBlc1xuZXhwb3J0IGNvbnN0IE5BVElWRV9JTkpFQ1RPUl9UT0tFTjogc3RyaW5nID0gJ05hdGl2ZSBJbmplY3Rvcic7XG5cbi8qKlxuICogRW5jYXBzdWxhdGVzIERlcGVuZGVuY3kgSW5qZWN0aW9uIGZvciBhIHBhdGggb2Ygbm9kZXNcbiAqXG4gKiBVSS1Sb3V0ZXIgc3RhdGVzIGFyZSBvcmdhbml6ZWQgYXMgYSB0cmVlLlxuICogQSBuZXN0ZWQgc3RhdGUgaGFzIGEgcGF0aCBvZiBhbmNlc3RvcnMgdG8gdGhlIHJvb3Qgb2YgdGhlIHRyZWUuXG4gKiBXaGVuIGEgc3RhdGUgaXMgYmVpbmcgYWN0aXZhdGVkLCBlYWNoIGVsZW1lbnQgaW4gdGhlIHBhdGggaXMgd3JhcHBlZCBhcyBhIFtbUGF0aE5vZGVdXS5cbiAqIEEgYFBhdGhOb2RlYCBpcyBhIHN0YXRlZnVsIG9iamVjdCB0aGF0IGhvbGRzIHRoaW5ncyBsaWtlIHBhcmFtZXRlcnMgYW5kIHJlc29sdmFibGVzIGZvciB0aGUgc3RhdGUgYmVpbmcgYWN0aXZhdGVkLlxuICpcbiAqIFRoZSBSZXNvbHZlQ29udGV4dCBjbG9zZXMgb3ZlciB0aGUgW1tQYXRoTm9kZV1dcywgYW5kIHByb3ZpZGVzIERJIGZvciB0aGUgbGFzdCBub2RlIGluIHRoZSBwYXRoLlxuICovXG5leHBvcnQgY2xhc3MgUmVzb2x2ZUNvbnRleHQge1xuICBfaW5qZWN0b3I6IFVJSW5qZWN0b3I7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfcGF0aDogUGF0aE5vZGVbXSkge31cblxuICAvKiogR2V0cyBhbGwgdGhlIHRva2VucyBmb3VuZCBpbiB0aGUgcmVzb2x2ZSBjb250ZXh0LCBkZS1kdXBsaWNhdGVkICovXG4gIGdldFRva2VucygpOiBhbnlbXSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhdGgucmVkdWNlKChhY2MsIG5vZGUpID0+IGFjYy5jb25jYXQobm9kZS5yZXNvbHZhYmxlcy5tYXAociA9PiByLnRva2VuKSksIFtdKS5yZWR1Y2UodW5pcVIsIFtdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBSZXNvbHZhYmxlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW5cbiAgICpcbiAgICogR2V0cyB0aGUgbGFzdCBSZXNvbHZhYmxlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW4gaW4gdGhpcyBjb250ZXh0LCBvciB1bmRlZmluZWQuXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBkb2Vzbid0IGV4aXN0IGluIHRoZSBSZXNvbHZlQ29udGV4dFxuICAgKi9cbiAgZ2V0UmVzb2x2YWJsZSh0b2tlbjogYW55KTogUmVzb2x2YWJsZSB7XG4gICAgY29uc3QgbWF0Y2hpbmcgPSB0aGlzLl9wYXRoXG4gICAgICAubWFwKG5vZGUgPT4gbm9kZS5yZXNvbHZhYmxlcylcbiAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAuZmlsdGVyKChyOiBSZXNvbHZhYmxlKSA9PiByLnRva2VuID09PSB0b2tlbik7XG4gICAgcmV0dXJuIHRhaWwobWF0Y2hpbmcpO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdGhlIFtbUmVzb2x2ZVBvbGljeV1dIGZvciB0aGUgZ2l2ZW4gW1tSZXNvbHZhYmxlXV0gKi9cbiAgZ2V0UG9saWN5KHJlc29sdmFibGU6IFJlc29sdmFibGUpOiBSZXNvbHZlUG9saWN5IHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5maW5kTm9kZShyZXNvbHZhYmxlKTtcbiAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXRQb2xpY3kobm9kZS5zdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIFJlc29sdmVDb250ZXh0IHRoYXQgaW5jbHVkZXMgYSBwb3J0aW9uIG9mIHRoaXMgb25lXG4gICAqXG4gICAqIEdpdmVuIGEgc3RhdGUsIHRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgUmVzb2x2ZUNvbnRleHQgZnJvbSB0aGlzIG9uZS5cbiAgICogVGhlIG5ldyBjb250ZXh0IHN0YXJ0cyBhdCB0aGUgZmlyc3Qgbm9kZSAocm9vdCkgYW5kIHN0b3BzIGF0IHRoZSBub2RlIGZvciB0aGUgYHN0YXRlYCBwYXJhbWV0ZXIuXG4gICAqXG4gICAqICMjIyMgV2h5XG4gICAqXG4gICAqIFdoZW4gYSB0cmFuc2l0aW9uIGlzIGNyZWF0ZWQsIHRoZSBub2RlcyBpbiB0aGUgXCJUbyBQYXRoXCIgYXJlIGluamVjdGVkIGZyb20gYSBSZXNvbHZlQ29udGV4dC5cbiAgICogQSBSZXNvbHZlQ29udGV4dCBjbG9zZXMgb3ZlciBhIHBhdGggb2YgW1tQYXRoTm9kZV1dcyBhbmQgcHJvY2Vzc2VzIHRoZSByZXNvbHZhYmxlcy5cbiAgICogVGhlIFwiVG8gU3RhdGVcIiBjYW4gaW5qZWN0IHZhbHVlcyBmcm9tIGl0cyBvd24gcmVzb2x2YWJsZXMsIGFzIHdlbGwgYXMgdGhvc2UgZnJvbSBhbGwgaXRzIGFuY2VzdG9yIHN0YXRlJ3MgKG5vZGUncykuXG4gICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgbmFycm93ZXIgY29udGV4dCB3aGVuIGluamVjdGluZyBhbmNlc3RvciBub2Rlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGxldCBBQkNEID0gbmV3IFJlc29sdmVDb250ZXh0KFtBLCBCLCBDLCBEXSk7YFxuICAgKlxuICAgKiBHaXZlbiBhIHBhdGggYFtBLCBCLCBDLCBEXWAsIHdoZXJlIGBBYCwgYEJgLCBgQ2AgYW5kIGBEYCBhcmUgbm9kZXMgZm9yIHN0YXRlcyBgYWAsIGBiYCwgYGNgLCBgZGA6XG4gICAqIFdoZW4gaW5qZWN0aW5nIGBEYCwgYERgIHNob3VsZCBoYXZlIGFjY2VzcyB0byBhbGwgcmVzb2x2YWJsZXMgZnJvbSBgQWAsIGBCYCwgYENgLCBgRGAuXG4gICAqIEhvd2V2ZXIsIGBCYCBzaG91bGQgb25seSBiZSBhYmxlIHRvIGFjY2VzcyByZXNvbHZhYmxlcyBmcm9tIGBBYCwgYEJgLlxuICAgKlxuICAgKiBXaGVuIHJlc29sdmluZyBmb3IgdGhlIGBCYCBub2RlLCBmaXJzdCB0YWtlIHRoZSBmdWxsIFwiVG8gUGF0aFwiIENvbnRleHQgYFtBLEIsQyxEXWAgYW5kIGxpbWl0IHRvIHRoZSBzdWJwYXRoIGBbQSxCXWAuXG4gICAqIGBsZXQgQUIgPSBBQkNELnN1YmNvbnRleHQoYSlgXG4gICAqL1xuICBzdWJDb250ZXh0KHN0YXRlOiBTdGF0ZU9iamVjdCk6IFJlc29sdmVDb250ZXh0IHtcbiAgICByZXR1cm4gbmV3IFJlc29sdmVDb250ZXh0KFBhdGhVdGlscy5zdWJQYXRoKHRoaXMuX3BhdGgsIG5vZGUgPT4gbm9kZS5zdGF0ZSA9PT0gc3RhdGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIFJlc29sdmFibGVzIHRvIHRoZSBub2RlIHRoYXQgbWF0Y2hlcyB0aGUgc3RhdGVcbiAgICpcbiAgICogVGhpcyBhZGRzIGEgW1tSZXNvbHZhYmxlXV0gKGdlbmVyYWxseSBvbmUgY3JlYXRlZCBvbiB0aGUgZmx5OyBub3QgZGVjbGFyZWQgb24gYSBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dIGJsb2NrKS5cbiAgICogVGhlIHJlc29sdmFibGUgaXMgYWRkZWQgdG8gdGhlIG5vZGUgbWF0Y2hpbmcgdGhlIGBzdGF0ZWAgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBUaGVzZSBuZXcgcmVzb2x2YWJsZXMgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IGZldGNoZWQuXG4gICAqIFRoZSBjYWxsaW5nIGNvZGUgc2hvdWxkIGVpdGhlciBmZXRjaCB0aGVtLCBmZXRjaCBzb21ldGhpbmcgdGhhdCBkZXBlbmRzIG9uIHRoZW0sXG4gICAqIG9yIHJlbHkgb24gW1tyZXNvbHZlUGF0aF1dIGJlaW5nIGNhbGxlZCB3aGVuIHNvbWUgc3RhdGUgaXMgYmVpbmcgZW50ZXJlZC5cbiAgICpcbiAgICogTm90ZTogZWFjaCByZXNvbHZhYmxlJ3MgW1tSZXNvbHZlUG9saWN5XV0gaXMgbWVyZ2VkIHdpdGggdGhlIHN0YXRlJ3MgcG9saWN5LCBhbmQgdGhlIGdsb2JhbCBkZWZhdWx0LlxuICAgKlxuICAgKiBAcGFyYW0gbmV3UmVzb2x2YWJsZXMgdGhlIG5ldyBSZXNvbHZhYmxlc1xuICAgKiBAcGFyYW0gc3RhdGUgVXNlZCB0byBmaW5kIHRoZSBub2RlIHRvIHB1dCB0aGUgcmVzb2x2YWJsZSBvblxuICAgKi9cbiAgYWRkUmVzb2x2YWJsZXMobmV3UmVzb2x2YWJsZXM6IFJlc29sdmFibGVbXSwgc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gICAgY29uc3Qgbm9kZSA9IDxQYXRoTm9kZT5maW5kKHRoaXMuX3BhdGgsIHByb3BFcSgnc3RhdGUnLCBzdGF0ZSkpO1xuICAgIGNvbnN0IGtleXMgPSBuZXdSZXNvbHZhYmxlcy5tYXAociA9PiByLnRva2VuKTtcbiAgICBub2RlLnJlc29sdmFibGVzID0gbm9kZS5yZXNvbHZhYmxlcy5maWx0ZXIociA9PiBrZXlzLmluZGV4T2Yoci50b2tlbikgPT09IC0xKS5jb25jYXQobmV3UmVzb2x2YWJsZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhbiBhcnJheSBvZiByZXNvbHZlZCBwYXRoIEVsZW1lbnQgcHJvbWlzZXNcbiAgICpcbiAgICogQHBhcmFtIHdoZW5cbiAgICogQHBhcmFtIHRyYW5zXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT58YW55fVxuICAgKi9cbiAgcmVzb2x2ZVBhdGgod2hlbjogUG9saWN5V2hlbiA9ICdMQVpZJywgdHJhbnM/OiBUcmFuc2l0aW9uKTogUHJvbWlzZTx7IHRva2VuOiBhbnk7IHZhbHVlOiBhbnkgfVtdPiB7XG4gICAgLy8gVGhpcyBvcHRpb24gZGV0ZXJtaW5lcyB3aGljaCAnd2hlbicgcG9saWN5IFJlc29sdmFibGVzIHdlIGFyZSBhYm91dCB0byBmZXRjaC5cbiAgICBjb25zdCB3aGVuT3B0aW9uOiBzdHJpbmcgPSBpbkFycmF5KEFMTF9XSEVOUywgd2hlbikgPyB3aGVuIDogJ0xBWlknO1xuICAgIC8vIElmIHRoZSBjYWxsZXIgc3BlY2lmaWVkIEVBR0VSLCBvbmx5IHRoZSBFQUdFUiBSZXNvbHZhYmxlcyBhcmUgZmV0Y2hlZC5cbiAgICAvLyBpZiB0aGUgY2FsbGVyIHNwZWNpZmllZCBMQVpZLCBib3RoIEVBR0VSIGFuZCBMQVpZIFJlc29sdmFibGVzIGFyZSBmZXRjaGVkLmBcbiAgICBjb25zdCBtYXRjaGVkV2hlbnMgPSB3aGVuT3B0aW9uID09PSByZXNvbHZlUG9saWNpZXMud2hlbi5FQUdFUiA/IEVBR0VSX1dIRU5TIDogQUxMX1dIRU5TO1xuXG4gICAgLy8gZ2V0IHRoZSBzdWJwYXRoIHRvIHRoZSBzdGF0ZSBhcmd1bWVudCwgaWYgcHJvdmlkZWRcbiAgICB0cmFjZS50cmFjZVJlc29sdmVQYXRoKHRoaXMuX3BhdGgsIHdoZW4sIHRyYW5zKTtcblxuICAgIGNvbnN0IG1hdGNoZXNQb2xpY3kgPSAoYWNjZXB0ZWRWYWxzOiBzdHJpbmdbXSwgd2hlbk9yQXN5bmM6ICd3aGVuJyB8ICdhc3luYycpID0+IChyZXNvbHZhYmxlOiBSZXNvbHZhYmxlKSA9PlxuICAgICAgaW5BcnJheShhY2NlcHRlZFZhbHMsIHRoaXMuZ2V0UG9saWN5KHJlc29sdmFibGUpW3doZW5PckFzeW5jXSk7XG5cbiAgICAvLyBUcmlnZ2VyIGFsbCB0aGUgKG1hdGNoaW5nKSBSZXNvbHZhYmxlcyBpbiB0aGUgcGF0aFxuICAgIC8vIFJlZHVjZSBhbGwgdGhlIFwiV0FJVFwiIFJlc29sdmFibGVzIGludG8gYW4gYXJyYXlcbiAgICBjb25zdCBwcm9taXNlczogUHJvbWlzZTxhbnk+W10gPSB0aGlzLl9wYXRoLnJlZHVjZSgoYWNjLCBub2RlKSA9PiB7XG4gICAgICBjb25zdCBub2RlUmVzb2x2YWJsZXMgPSBub2RlLnJlc29sdmFibGVzLmZpbHRlcihtYXRjaGVzUG9saWN5KG1hdGNoZWRXaGVucywgJ3doZW4nKSk7XG4gICAgICBjb25zdCBub3dhaXQgPSBub2RlUmVzb2x2YWJsZXMuZmlsdGVyKG1hdGNoZXNQb2xpY3koWydOT1dBSVQnXSwgJ2FzeW5jJykpO1xuICAgICAgY29uc3Qgd2FpdCA9IG5vZGVSZXNvbHZhYmxlcy5maWx0ZXIobm90KG1hdGNoZXNQb2xpY3koWydOT1dBSVQnXSwgJ2FzeW5jJykpKTtcblxuICAgICAgLy8gRm9yIHRoZSBtYXRjaGluZyBSZXNvbHZhYmxlcywgc3RhcnQgdGhlaXIgYXN5bmMgZmV0Y2ggcHJvY2Vzcy5cbiAgICAgIGNvbnN0IHN1YkNvbnRleHQgPSB0aGlzLnN1YkNvbnRleHQobm9kZS5zdGF0ZSk7XG4gICAgICBjb25zdCBnZXRSZXN1bHQgPSAocjogUmVzb2x2YWJsZSkgPT5cbiAgICAgICAgclxuICAgICAgICAgIC5nZXQoc3ViQ29udGV4dCwgdHJhbnMpXG4gICAgICAgICAgLy8gUmV0dXJuIGEgdHVwbGUgdGhhdCBpbmNsdWRlcyB0aGUgUmVzb2x2YWJsZSdzIHRva2VuXG4gICAgICAgICAgLnRoZW4odmFsdWUgPT4gKHsgdG9rZW46IHIudG9rZW4sIHZhbHVlOiB2YWx1ZSB9KSk7XG4gICAgICBub3dhaXQuZm9yRWFjaChnZXRSZXN1bHQpO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQod2FpdC5tYXAoZ2V0UmVzdWx0KSk7XG4gICAgfSwgW10pO1xuXG4gICAgLy8gV2FpdCBmb3IgYWxsIHRoZSBcIldBSVRcIiByZXNvbHZhYmxlc1xuICAgIHJldHVybiBzZXJ2aWNlcy4kcS5hbGwocHJvbWlzZXMpO1xuICB9XG5cbiAgaW5qZWN0b3IoKTogVUlJbmplY3RvciB7XG4gICAgcmV0dXJuIHRoaXMuX2luamVjdG9yIHx8ICh0aGlzLl9pbmplY3RvciA9IG5ldyBVSUluamVjdG9ySW1wbCh0aGlzKSk7XG4gIH1cblxuICBmaW5kTm9kZShyZXNvbHZhYmxlOiBSZXNvbHZhYmxlKTogUGF0aE5vZGUge1xuICAgIHJldHVybiBmaW5kKHRoaXMuX3BhdGgsIChub2RlOiBQYXRoTm9kZSkgPT4gaW5BcnJheShub2RlLnJlc29sdmFibGVzLCByZXNvbHZhYmxlKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYXN5bmMgZGVwZW5kZW5jaWVzIG9mIGEgUmVzb2x2YWJsZVxuICAgKlxuICAgKiBHaXZlbiBhIFJlc29sdmFibGUsIHJldHVybnMgaXRzIGRlcGVuZGVuY2llcyBhcyBhIFJlc29sdmFibGVbXVxuICAgKi9cbiAgZ2V0RGVwZW5kZW5jaWVzKHJlc29sdmFibGU6IFJlc29sdmFibGUpOiBSZXNvbHZhYmxlW10ge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLmZpbmROb2RlKHJlc29sdmFibGUpO1xuICAgIC8vIEZpbmQgd2hpY2ggb3RoZXIgcmVzb2x2YWJsZXMgYXJlIFwidmlzaWJsZVwiIHRvIHRoZSBgcmVzb2x2YWJsZWAgYXJndW1lbnRcbiAgICAvLyBzdWJwYXRoIHN0b3BwaW5nIGF0IHJlc29sdmFibGUncyBub2RlLCBvciB0aGUgd2hvbGUgcGF0aCAoaWYgdGhlIHJlc29sdmFibGUgaXNuJ3QgaW4gdGhlIHBhdGgpXG4gICAgY29uc3Qgc3ViUGF0aDogUGF0aE5vZGVbXSA9IFBhdGhVdGlscy5zdWJQYXRoKHRoaXMuX3BhdGgsIHggPT4geCA9PT0gbm9kZSkgfHwgdGhpcy5fcGF0aDtcbiAgICBjb25zdCBhdmFpbGFibGVSZXNvbHZhYmxlczogUmVzb2x2YWJsZVtdID0gc3ViUGF0aFxuICAgICAgLnJlZHVjZSgoYWNjLCBfbm9kZSkgPT4gYWNjLmNvbmNhdChfbm9kZS5yZXNvbHZhYmxlcyksIFtdKSAvLyBhbGwgb2Ygc3VicGF0aCdzIHJlc29sdmFibGVzXG4gICAgICAuZmlsdGVyKHJlcyA9PiByZXMgIT09IHJlc29sdmFibGUpOyAvLyBmaWx0ZXIgb3V0IHRoZSBgcmVzb2x2YWJsZWAgYXJndW1lbnRcblxuICAgIGNvbnN0IGdldERlcGVuZGVuY3kgPSAodG9rZW46IGFueSkgPT4ge1xuICAgICAgY29uc3QgbWF0Y2hpbmcgPSBhdmFpbGFibGVSZXNvbHZhYmxlcy5maWx0ZXIociA9PiByLnRva2VuID09PSB0b2tlbik7XG4gICAgICBpZiAobWF0Y2hpbmcubGVuZ3RoKSByZXR1cm4gdGFpbChtYXRjaGluZyk7XG5cbiAgICAgIGNvbnN0IGZyb21JbmplY3RvciA9IHRoaXMuaW5qZWN0b3IoKS5nZXROYXRpdmUodG9rZW4pO1xuICAgICAgaWYgKGlzVW5kZWZpbmVkKGZyb21JbmplY3RvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZmluZCBEZXBlbmRlbmN5IEluamVjdGlvbiB0b2tlbjogJyArIHN0cmluZ2lmeSh0b2tlbikpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IFJlc29sdmFibGUodG9rZW4sICgpID0+IGZyb21JbmplY3RvciwgW10sIGZyb21JbmplY3Rvcik7XG4gICAgfTtcblxuICAgIHJldHVybiByZXNvbHZhYmxlLmRlcHMubWFwKGdldERlcGVuZGVuY3kpO1xuICB9XG59XG5cbmNsYXNzIFVJSW5qZWN0b3JJbXBsIGltcGxlbWVudHMgVUlJbmplY3RvciB7XG4gIG5hdGl2ZTogJEluamVjdG9yTGlrZTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgY29udGV4dDogUmVzb2x2ZUNvbnRleHQpIHtcbiAgICB0aGlzLm5hdGl2ZSA9IHRoaXMuZ2V0KE5BVElWRV9JTkpFQ1RPUl9UT0tFTikgfHwgc2VydmljZXMuJGluamVjdG9yO1xuICB9XG5cbiAgZ2V0KHRva2VuOiBhbnkpIHtcbiAgICBjb25zdCByZXNvbHZhYmxlID0gdGhpcy5jb250ZXh0LmdldFJlc29sdmFibGUodG9rZW4pO1xuICAgIGlmIChyZXNvbHZhYmxlKSB7XG4gICAgICBpZiAodGhpcy5jb250ZXh0LmdldFBvbGljeShyZXNvbHZhYmxlKS5hc3luYyA9PT0gJ05PV0FJVCcpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZ2V0KHRoaXMuY29udGV4dCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzb2x2YWJsZS5yZXNvbHZlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc29sdmFibGUgYXN5bmMgLmdldCgpIG5vdCBjb21wbGV0ZTonICsgc3RyaW5naWZ5KHJlc29sdmFibGUudG9rZW4pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNvbHZhYmxlLmRhdGE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZ2V0TmF0aXZlKHRva2VuKTtcbiAgfVxuXG4gIGdldEFzeW5jKHRva2VuOiBhbnkpIHtcbiAgICBjb25zdCByZXNvbHZhYmxlID0gdGhpcy5jb250ZXh0LmdldFJlc29sdmFibGUodG9rZW4pO1xuICAgIGlmIChyZXNvbHZhYmxlKSByZXR1cm4gcmVzb2x2YWJsZS5nZXQodGhpcy5jb250ZXh0KTtcbiAgICByZXR1cm4gc2VydmljZXMuJHEud2hlbih0aGlzLm5hdGl2ZS5nZXQodG9rZW4pKTtcbiAgfVxuXG4gIGdldE5hdGl2ZSh0b2tlbjogYW55KSB7XG4gICAgcmV0dXJuIHRoaXMubmF0aXZlICYmIHRoaXMubmF0aXZlLmdldCh0b2tlbik7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9yZXNvbHZlL3Jlc29sdmVDb250ZXh0LnRzIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB1cmxcbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQge1xuICBtYXAsXG4gIGRlZmF1bHRzLFxuICBpbmhlcml0LFxuICBpZGVudGl0eSxcbiAgdW5uZXN0LFxuICB0YWlsLFxuICBmaW5kLFxuICBPYmosXG4gIHBhaXJzLFxuICBhbGxUcnVlUixcbiAgdW5uZXN0UixcbiAgYXJyYXlUdXBsZXMsXG59IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcCwgcHJvcEVxIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBpc0FycmF5LCBpc1N0cmluZywgaXNEZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgUGFyYW0sIERlZlR5cGUgfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgUGFyYW1UeXBlcyB9IGZyb20gJy4uL3BhcmFtcy9wYXJhbVR5cGVzJztcbmltcG9ydCB7IFJhd1BhcmFtcyB9IGZyb20gJy4uL3BhcmFtcy9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUGFyYW1GYWN0b3J5IH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgam9pbk5laWdoYm9yc1IsIHNwbGl0T25EZWxpbSB9IGZyb20gJy4uL2NvbW1vbi9zdHJpbmdzJztcblxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIHF1b3RlUmVnRXhwKHN0cjogYW55LCBwYXJhbT86IGFueSkge1xuICBsZXQgc3Vycm91bmRQYXR0ZXJuID0gWycnLCAnJ10sXG4gICAgcmVzdWx0ID0gc3RyLnJlcGxhY2UoL1tcXFxcXFxbXFxdXFxeJCorPy4oKXx7fV0vZywgJ1xcXFwkJicpO1xuICBpZiAoIXBhcmFtKSByZXR1cm4gcmVzdWx0O1xuXG4gIHN3aXRjaCAocGFyYW0uc3F1YXNoKSB7XG4gICAgY2FzZSBmYWxzZTpcbiAgICAgIHN1cnJvdW5kUGF0dGVybiA9IFsnKCcsICcpJyArIChwYXJhbS5pc09wdGlvbmFsID8gJz8nIDogJycpXTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgdHJ1ZTpcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXC8kLywgJycpO1xuICAgICAgc3Vycm91bmRQYXR0ZXJuID0gWycoPzovKCcsICcpfC8pPyddO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHN1cnJvdW5kUGF0dGVybiA9IFtgKCR7cGFyYW0uc3F1YXNofXxgLCAnKT8nXTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiByZXN1bHQgKyBzdXJyb3VuZFBhdHRlcm5bMF0gKyBwYXJhbS50eXBlLnBhdHRlcm4uc291cmNlICsgc3Vycm91bmRQYXR0ZXJuWzFdO1xufVxuXG4vKiogQGhpZGRlbiAqL1xuY29uc3QgbWVtb2l6ZVRvID0gKG9iajogT2JqLCBfcHJvcDogc3RyaW5nLCBmbjogRnVuY3Rpb24pID0+IChvYmpbX3Byb3BdID0gb2JqW19wcm9wXSB8fCBmbigpKTtcblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IHNwbGl0T25TbGFzaCA9IHNwbGl0T25EZWxpbSgnLycpO1xuXG4vKiogQGhpZGRlbiAqL1xuaW50ZXJmYWNlIFVybE1hdGNoZXJDYWNoZSB7XG4gIHNlZ21lbnRzPzogYW55W107XG4gIHdlaWdodHM/OiBudW1iZXJbXTtcbiAgcGF0aD86IFVybE1hdGNoZXJbXTtcbiAgcGFyZW50PzogVXJsTWF0Y2hlcjtcbiAgcGF0dGVybj86IFJlZ0V4cDtcbn1cblxuLyoqXG4gKiBNYXRjaGVzIFVSTHMgYWdhaW5zdCBwYXR0ZXJucy5cbiAqXG4gKiBNYXRjaGVzIFVSTHMgYWdhaW5zdCBwYXR0ZXJucyBhbmQgZXh0cmFjdHMgbmFtZWQgcGFyYW1ldGVycyBmcm9tIHRoZSBwYXRoIG9yIHRoZSBzZWFyY2hcbiAqIHBhcnQgb2YgdGhlIFVSTC5cbiAqXG4gKiBBIFVSTCBwYXR0ZXJuIGNvbnNpc3RzIG9mIGEgcGF0aCBwYXR0ZXJuLCBvcHRpb25hbGx5IGZvbGxvd2VkIGJ5ICc/JyBhbmQgYSBsaXN0IG9mIHNlYXJjaCAocXVlcnkpXG4gKiBwYXJhbWV0ZXJzLiBNdWx0aXBsZSBzZWFyY2ggcGFyYW1ldGVyIG5hbWVzIGFyZSBzZXBhcmF0ZWQgYnkgJyYnLiBTZWFyY2ggcGFyYW1ldGVyc1xuICogZG8gbm90IGluZmx1ZW5jZSB3aGV0aGVyIG9yIG5vdCBhIFVSTCBpcyBtYXRjaGVkLCBidXQgdGhlaXIgdmFsdWVzIGFyZSBwYXNzZWQgdGhyb3VnaCBpbnRvXG4gKiB0aGUgbWF0Y2hlZCBwYXJhbWV0ZXJzIHJldHVybmVkIGJ5IFtbVXJsTWF0Y2hlci5leGVjXV0uXG4gKlxuICogLSAqUGF0aCBwYXJhbWV0ZXJzKiBhcmUgZGVmaW5lZCB1c2luZyBjdXJseSBicmFjZSBwbGFjZWhvbGRlcnMgKGAvc29tZXBhdGgve3BhcmFtfWApXG4gKiBvciBjb2xvbiBwbGFjZWhvbGRlcnMgKGAvc29tZVBhdGgvOnBhcmFtYCkuXG4gKlxuICogLSAqQSBwYXJhbWV0ZXIgUmVnRXhwKiBtYXkgYmUgZGVmaW5lZCBmb3IgYSBwYXJhbSBhZnRlciBhIGNvbG9uXG4gKiAoYC9zb21lUGF0aC97cGFyYW06W2EtekEtWjAtOV0rfWApIGluIGEgY3VybHkgYnJhY2UgcGxhY2Vob2xkZXIuXG4gKiBUaGUgcmVnZXhwIG11c3QgbWF0Y2ggZm9yIHRoZSB1cmwgdG8gYmUgbWF0Y2hlZC5cbiAqIFNob3VsZCB0aGUgcmVnZXhwIGl0c2VsZiBjb250YWluIGN1cmx5IGJyYWNlcywgdGhleSBtdXN0IGJlIGluIG1hdGNoZWQgcGFpcnMgb3IgZXNjYXBlZCB3aXRoIGEgYmFja3NsYXNoLlxuICpcbiAqIE5vdGU6IGEgUmVnRXhwIHBhcmFtZXRlciB3aWxsIGVuY29kZSBpdHMgdmFsdWUgdXNpbmcgZWl0aGVyIFtbUGFyYW1UeXBlcy5wYXRoXV0gb3IgW1tQYXJhbVR5cGVzLnF1ZXJ5XV0uXG4gKlxuICogLSAqQ3VzdG9tIHBhcmFtZXRlciB0eXBlcyogbWF5IGFsc28gYmUgc3BlY2lmaWVkIGFmdGVyIGEgY29sb24gKGAvc29tZVBhdGgve3BhcmFtOmludH1gKSBpbiBjdXJseSBicmFjZSBwYXJhbWV0ZXJzLlxuICogICBTZWUgW1tVcmxNYXRjaGVyRmFjdG9yeS50eXBlXV0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogLSAqQ2F0Y2gtYWxsIHBhcmFtZXRlcnMqIGFyZSBkZWZpbmVkIHVzaW5nIGFuIGFzdGVyaXNrIHBsYWNlaG9sZGVyIChgL3NvbWVwYXRoLypjYXRjaGFsbHBhcmFtYCkuXG4gKiAgIEEgY2F0Y2gtYWxsICogcGFyYW1ldGVyIHZhbHVlIHdpbGwgY29udGFpbiB0aGUgcmVtYWluZGVyIG9mIHRoZSBVUkwuXG4gKlxuICogLS0tXG4gKlxuICogUGFyYW1ldGVyIG5hbWVzIG1heSBjb250YWluIG9ubHkgd29yZCBjaGFyYWN0ZXJzIChsYXRpbiBsZXR0ZXJzLCBkaWdpdHMsIGFuZCB1bmRlcnNjb3JlKSBhbmRcbiAqIG11c3QgYmUgdW5pcXVlIHdpdGhpbiB0aGUgcGF0dGVybiAoYWNyb3NzIGJvdGggcGF0aCBhbmQgc2VhcmNoIHBhcmFtZXRlcnMpLlxuICogQSBwYXRoIHBhcmFtZXRlciBtYXRjaGVzIGFueSBudW1iZXIgb2YgY2hhcmFjdGVycyBvdGhlciB0aGFuICcvJy4gRm9yIGNhdGNoLWFsbFxuICogcGxhY2Vob2xkZXJzIHRoZSBwYXRoIHBhcmFtZXRlciBtYXRjaGVzIGFueSBudW1iZXIgb2YgY2hhcmFjdGVycy5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAqIGAnL2hlbGxvLydgIC0gTWF0Y2hlcyBvbmx5IGlmIHRoZSBwYXRoIGlzIGV4YWN0bHkgJy9oZWxsby8nLiBUaGVyZSBpcyBubyBzcGVjaWFsIHRyZWF0bWVudCBmb3JcbiAqICAgdHJhaWxpbmcgc2xhc2hlcywgYW5kIHBhdHRlcm5zIGhhdmUgdG8gbWF0Y2ggdGhlIGVudGlyZSBwYXRoLCBub3QganVzdCBhIHByZWZpeC5cbiAqICogYCcvdXNlci86aWQnYCAtIE1hdGNoZXMgJy91c2VyL2JvYicgb3IgJy91c2VyLzEyMzQhISEnIG9yIGV2ZW4gJy91c2VyLycgYnV0IG5vdCAnL3VzZXInIG9yXG4gKiAgICcvdXNlci9ib2IvZGV0YWlscycuIFRoZSBzZWNvbmQgcGF0aCBzZWdtZW50IHdpbGwgYmUgY2FwdHVyZWQgYXMgdGhlIHBhcmFtZXRlciAnaWQnLlxuICogKiBgJy91c2VyL3tpZH0nYCAtIFNhbWUgYXMgdGhlIHByZXZpb3VzIGV4YW1wbGUsIGJ1dCB1c2luZyBjdXJseSBicmFjZSBzeW50YXguXG4gKiAqIGAnL3VzZXIve2lkOlteL10qfSdgIC0gU2FtZSBhcyB0aGUgcHJldmlvdXMgZXhhbXBsZS5cbiAqICogYCcvdXNlci97aWQ6WzAtOWEtZkEtRl17MSw4fX0nYCAtIFNpbWlsYXIgdG8gdGhlIHByZXZpb3VzIGV4YW1wbGUsIGJ1dCBvbmx5IG1hdGNoZXMgaWYgdGhlIGlkXG4gKiAgIHBhcmFtZXRlciBjb25zaXN0cyBvZiAxIHRvIDggaGV4IGRpZ2l0cy5cbiAqICogYCcvZmlsZXMve3BhdGg6Lip9J2AgLSBNYXRjaGVzIGFueSBVUkwgc3RhcnRpbmcgd2l0aCAnL2ZpbGVzLycgYW5kIGNhcHR1cmVzIHRoZSByZXN0IG9mIHRoZVxuICogICBwYXRoIGludG8gdGhlIHBhcmFtZXRlciAncGF0aCcuXG4gKiAqIGAnL2ZpbGVzLypwYXRoJ2AgLSBkaXR0by5cbiAqICogYCcvY2FsZW5kYXIve3N0YXJ0OmRhdGV9J2AgLSBNYXRjaGVzIFwiL2NhbGVuZGFyLzIwMTQtMTEtMTJcIiAoYmVjYXVzZSB0aGUgcGF0dGVybiBkZWZpbmVkXG4gKiAgIGluIHRoZSBidWlsdC1pbiAgYGRhdGVgIFBhcmFtVHlwZSBtYXRjaGVzIGAyMDE0LTExLTEyYCkgYW5kIHByb3ZpZGVzIGEgRGF0ZSBvYmplY3QgaW4gJHN0YXRlUGFyYW1zLnN0YXJ0XG4gKlxuICovXG5leHBvcnQgY2xhc3MgVXJsTWF0Y2hlciB7XG4gIC8qKiBAaGlkZGVuICovXG4gIHN0YXRpYyBuYW1lVmFsaWRhdG9yOiBSZWdFeHAgPSAvXlxcdysoWy0uXStcXHcrKSooPzpcXFtcXF0pPyQvO1xuXG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX2NhY2hlOiBVcmxNYXRjaGVyQ2FjaGUgPSB7IHBhdGg6IFt0aGlzXSB9O1xuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9jaGlsZHJlbjogVXJsTWF0Y2hlcltdID0gW107XG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX3BhcmFtczogUGFyYW1bXSA9IFtdO1xuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9zZWdtZW50czogc3RyaW5nW10gPSBbXTtcbiAgLyoqIEBoaWRkZW4gKi9cbiAgcHJpdmF0ZSBfY29tcGlsZWQ6IHN0cmluZ1tdID0gW107XG5cbiAgLyoqIFRoZSBwYXR0ZXJuIHRoYXQgd2FzIHBhc3NlZCBpbnRvIHRoZSBjb25zdHJ1Y3RvciAqL1xuICBwdWJsaWMgcGF0dGVybjogc3RyaW5nO1xuXG4gIC8qKiBAaGlkZGVuICovXG4gIHN0YXRpYyBlbmNvZGVEYXNoZXMoc3RyOiBzdHJpbmcpIHtcbiAgICAvLyBSZXBsYWNlIGRhc2hlcyB3aXRoIGVuY29kZWQgXCJcXC1cIlxuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyKS5yZXBsYWNlKFxuICAgICAgLy0vZyxcbiAgICAgIGMgPT5cbiAgICAgICAgYCU1QyUke2NcbiAgICAgICAgICAuY2hhckNvZGVBdCgwKVxuICAgICAgICAgIC50b1N0cmluZygxNilcbiAgICAgICAgICAudG9VcHBlckNhc2UoKX1gLFxuICAgICk7XG4gIH1cblxuICAvKiogQGhpZGRlbiBHaXZlbiBhIG1hdGNoZXIsIHJldHVybiBhbiBhcnJheSB3aXRoIHRoZSBtYXRjaGVyJ3MgcGF0aCBzZWdtZW50cyBhbmQgcGF0aCBwYXJhbXMsIGluIG9yZGVyICovXG4gIHN0YXRpYyBwYXRoU2VnbWVudHNBbmRQYXJhbXMobWF0Y2hlcjogVXJsTWF0Y2hlcikge1xuICAgIGNvbnN0IHN0YXRpY1NlZ21lbnRzID0gbWF0Y2hlci5fc2VnbWVudHM7XG4gICAgY29uc3QgcGF0aFBhcmFtcyA9IG1hdGNoZXIuX3BhcmFtcy5maWx0ZXIocCA9PiBwLmxvY2F0aW9uID09PSBEZWZUeXBlLlBBVEgpO1xuICAgIHJldHVybiBhcnJheVR1cGxlcyhzdGF0aWNTZWdtZW50cywgcGF0aFBhcmFtcy5jb25jYXQodW5kZWZpbmVkKSlcbiAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAuZmlsdGVyKHggPT4geCAhPT0gJycgJiYgaXNEZWZpbmVkKHgpKTtcbiAgfVxuXG4gIC8qKiBAaGlkZGVuIEdpdmVuIGEgbWF0Y2hlciwgcmV0dXJuIGFuIGFycmF5IHdpdGggdGhlIG1hdGNoZXIncyBxdWVyeSBwYXJhbXMgKi9cbiAgc3RhdGljIHF1ZXJ5UGFyYW1zKG1hdGNoZXI6IFVybE1hdGNoZXIpOiBQYXJhbVtdIHtcbiAgICByZXR1cm4gbWF0Y2hlci5fcGFyYW1zLmZpbHRlcihwID0+IHAubG9jYXRpb24gPT09IERlZlR5cGUuU0VBUkNIKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wYXJlIHR3byBVcmxNYXRjaGVyc1xuICAgKlxuICAgKiBUaGlzIGNvbXBhcmlzb24gZnVuY3Rpb24gY29udmVydHMgYSBVcmxNYXRjaGVyIGludG8gc3RhdGljIGFuZCBkeW5hbWljIHBhdGggc2VnbWVudHMuXG4gICAqIEVhY2ggc3RhdGljIHBhdGggc2VnbWVudCBpcyBhIHN0YXRpYyBzdHJpbmcgYmV0d2VlbiBhIHBhdGggc2VwYXJhdG9yIChzbGFzaCBjaGFyYWN0ZXIpLlxuICAgKiBFYWNoIGR5bmFtaWMgc2VnbWVudCBpcyBhIHBhdGggcGFyYW1ldGVyLlxuICAgKlxuICAgKiBUaGUgY29tcGFyaXNvbiBmdW5jdGlvbiBzb3J0cyBzdGF0aWMgc2VnbWVudHMgYmVmb3JlIGR5bmFtaWMgb25lcy5cbiAgICovXG4gIHN0YXRpYyBjb21wYXJlKGE6IFVybE1hdGNoZXIsIGI6IFVybE1hdGNoZXIpOiBudW1iZXIge1xuICAgIC8qKlxuICAgICAqIFR1cm4gYSBVcmxNYXRjaGVyIGFuZCBhbGwgaXRzIHBhcmVudCBtYXRjaGVycyBpbnRvIGFuIGFycmF5XG4gICAgICogb2Ygc2xhc2ggbGl0ZXJhbHMgJy8nLCBzdHJpbmcgbGl0ZXJhbHMsIGFuZCBQYXJhbSBvYmplY3RzXG4gICAgICpcbiAgICAgKiBUaGlzIGV4YW1wbGUgbWF0Y2hlciBtYXRjaGVzIHN0cmluZ3MgbGlrZSBcIi9mb28vOnBhcmFtL3RhaWxcIjpcbiAgICAgKiB2YXIgbWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9mb29cIikuYXBwZW5kKCR1bWYuY29tcGlsZShcIi86cGFyYW1cIikpLmFwcGVuZCgkdW1mLmNvbXBpbGUoXCIvXCIpKS5hcHBlbmQoJHVtZi5jb21waWxlKFwidGFpbFwiKSk7XG4gICAgICogdmFyIHJlc3VsdCA9IHNlZ21lbnRzKG1hdGNoZXIpOyAvLyBbICcvJywgJ2ZvbycsICcvJywgUGFyYW0sICcvJywgJ3RhaWwnIF1cbiAgICAgKlxuICAgICAqIENhY2hlcyB0aGUgcmVzdWx0IGFzIGBtYXRjaGVyLl9jYWNoZS5zZWdtZW50c2BcbiAgICAgKi9cbiAgICBjb25zdCBzZWdtZW50cyA9IChtYXRjaGVyOiBVcmxNYXRjaGVyKSA9PlxuICAgICAgKG1hdGNoZXIuX2NhY2hlLnNlZ21lbnRzID1cbiAgICAgICAgbWF0Y2hlci5fY2FjaGUuc2VnbWVudHMgfHxcbiAgICAgICAgbWF0Y2hlci5fY2FjaGUucGF0aFxuICAgICAgICAgIC5tYXAoVXJsTWF0Y2hlci5wYXRoU2VnbWVudHNBbmRQYXJhbXMpXG4gICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgICAgICAucmVkdWNlKGpvaW5OZWlnaGJvcnNSLCBbXSlcbiAgICAgICAgICAubWFwKHggPT4gKGlzU3RyaW5nKHgpID8gc3BsaXRPblNsYXNoKHgpIDogeCkpXG4gICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSkpO1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc29ydCB3ZWlnaHQgZm9yIGVhY2ggc2VnbWVudCBvZiBhIFVybE1hdGNoZXJcbiAgICAgKlxuICAgICAqIENhY2hlcyB0aGUgcmVzdWx0IGFzIGBtYXRjaGVyLl9jYWNoZS53ZWlnaHRzYFxuICAgICAqL1xuICAgIGNvbnN0IHdlaWdodHMgPSAobWF0Y2hlcjogVXJsTWF0Y2hlcikgPT5cbiAgICAgIChtYXRjaGVyLl9jYWNoZS53ZWlnaHRzID1cbiAgICAgICAgbWF0Y2hlci5fY2FjaGUud2VpZ2h0cyB8fFxuICAgICAgICBzZWdtZW50cyhtYXRjaGVyKS5tYXAoc2VnbWVudCA9PiB7XG4gICAgICAgICAgLy8gU29ydCBzbGFzaGVzIGZpcnN0LCB0aGVuIHN0YXRpYyBzdHJpbmdzLCB0aGUgUGFyYW1zXG4gICAgICAgICAgaWYgKHNlZ21lbnQgPT09ICcvJykgcmV0dXJuIDE7XG4gICAgICAgICAgaWYgKGlzU3RyaW5nKHNlZ21lbnQpKSByZXR1cm4gMjtcbiAgICAgICAgICBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIFBhcmFtKSByZXR1cm4gMztcbiAgICAgICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogUGFkcyBzaG9ydGVyIGFycmF5IGluLXBsYWNlIChtdXRhdGVzKVxuICAgICAqL1xuICAgIGNvbnN0IHBhZEFycmF5cyA9IChsOiBhbnlbXSwgcjogYW55W10sIHBhZFZhbDogYW55KSA9PiB7XG4gICAgICBjb25zdCBsZW4gPSBNYXRoLm1heChsLmxlbmd0aCwgci5sZW5ndGgpO1xuICAgICAgd2hpbGUgKGwubGVuZ3RoIDwgbGVuKSBsLnB1c2gocGFkVmFsKTtcbiAgICAgIHdoaWxlIChyLmxlbmd0aCA8IGxlbikgci5wdXNoKHBhZFZhbCk7XG4gICAgfTtcblxuICAgIGNvbnN0IHdlaWdodHNBID0gd2VpZ2h0cyhhKSxcbiAgICAgIHdlaWdodHNCID0gd2VpZ2h0cyhiKTtcbiAgICBwYWRBcnJheXMod2VpZ2h0c0EsIHdlaWdodHNCLCAwKTtcblxuICAgIGNvbnN0IF9wYWlycyA9IGFycmF5VHVwbGVzKHdlaWdodHNBLCB3ZWlnaHRzQik7XG4gICAgbGV0IGNtcCwgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBfcGFpcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNtcCA9IF9wYWlyc1tpXVswXSAtIF9wYWlyc1tpXVsxXTtcbiAgICAgIGlmIChjbXAgIT09IDApIHJldHVybiBjbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHBhdHRlcm4gVGhlIHBhdHRlcm4gdG8gY29tcGlsZSBpbnRvIGEgbWF0Y2hlci5cbiAgICogQHBhcmFtIHBhcmFtVHlwZXMgVGhlIFtbUGFyYW1UeXBlc11dIHJlZ2lzdHJ5XG4gICAqIEBwYXJhbSBjb25maWcgIEEgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICogLSBgY2FzZUluc2Vuc2l0aXZlYCAtIGB0cnVlYCBpZiBVUkwgbWF0Y2hpbmcgc2hvdWxkIGJlIGNhc2UgaW5zZW5zaXRpdmUsIG90aGVyd2lzZSBgZmFsc2VgLCB0aGUgZGVmYXVsdCB2YWx1ZSAoZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpIGlzIGBmYWxzZWAuXG4gICAqIC0gYHN0cmljdGAgLSBgZmFsc2VgIGlmIG1hdGNoaW5nIGFnYWluc3QgYSBVUkwgd2l0aCBhIHRyYWlsaW5nIHNsYXNoIHNob3VsZCBiZSB0cmVhdGVkIGFzIGVxdWl2YWxlbnQgdG8gYSBVUkwgd2l0aG91dCBhIHRyYWlsaW5nIHNsYXNoLCB0aGUgZGVmYXVsdCB2YWx1ZSBpcyBgdHJ1ZWAuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihwYXR0ZXJuOiBzdHJpbmcsIHBhcmFtVHlwZXM6IFBhcmFtVHlwZXMsIHBhcmFtRmFjdG9yeTogUGFyYW1GYWN0b3J5LCBwdWJsaWMgY29uZmlnPzogYW55KSB7XG4gICAgdGhpcy5wYXR0ZXJuID0gcGF0dGVybjtcbiAgICB0aGlzLmNvbmZpZyA9IGRlZmF1bHRzKHRoaXMuY29uZmlnLCB7XG4gICAgICBwYXJhbXM6IHt9LFxuICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgY2FzZUluc2Vuc2l0aXZlOiBmYWxzZSxcbiAgICAgIHBhcmFtTWFwOiBpZGVudGl0eSxcbiAgICB9KTtcblxuICAgIC8vIEZpbmQgYWxsIHBsYWNlaG9sZGVycyBhbmQgY3JlYXRlIGEgY29tcGlsZWQgcGF0dGVybiwgdXNpbmcgZWl0aGVyIGNsYXNzaWMgb3IgY3VybHkgc3ludGF4OlxuICAgIC8vICAgJyonIG5hbWVcbiAgICAvLyAgICc6JyBuYW1lXG4gICAgLy8gICAneycgbmFtZSAnfSdcbiAgICAvLyAgICd7JyBuYW1lICc6JyByZWdleHAgJ30nXG4gICAgLy8gVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBzb21ld2hhdCBjb21wbGljYXRlZCBkdWUgdG8gdGhlIG5lZWQgdG8gYWxsb3cgY3VybHkgYnJhY2VzXG4gICAgLy8gaW5zaWRlIHRoZSByZWd1bGFyIGV4cHJlc3Npb24uIFRoZSBwbGFjZWhvbGRlciByZWdleHAgYnJlYWtzIGRvd24gYXMgZm9sbG93czpcbiAgICAvLyAgICAoWzoqXSkoW1xcd1xcW1xcXV0rKSAgICAgICAgICAgICAgLSBjbGFzc2ljIHBsYWNlaG9sZGVyICgkMSAvICQyKSAoc2VhcmNoIHZlcnNpb24gaGFzIC0gZm9yIHNuYWtlLWNhc2UpXG4gICAgLy8gICAgXFx7KFtcXHdcXFtcXF1dKykoPzpcXDpcXHMqKCAuLi4gKSk/XFx9ICAtIGN1cmx5IGJyYWNlIHBsYWNlaG9sZGVyICgkMykgd2l0aCBvcHRpb25hbCByZWdleHAvdHlwZSAuLi4gKCQ0KSAoc2VhcmNoIHZlcnNpb24gaGFzIC0gZm9yIHNuYWtlLWNhc2VcbiAgICAvLyAgICAoPzogLi4uIHwgLi4uIHwgLi4uICkrICAgICAgICAgLSB0aGUgcmVnZXhwIGNvbnNpc3RzIG9mIGFueSBudW1iZXIgb2YgYXRvbXMsIGFuIGF0b20gYmVpbmcgZWl0aGVyXG4gICAgLy8gICAgW157fVxcXFxdKyAgICAgICAgICAgICAgICAgICAgICAgLSBhbnl0aGluZyBvdGhlciB0aGFuIGN1cmx5IGJyYWNlcyBvciBiYWNrc2xhc2hcbiAgICAvLyAgICBcXFxcLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIGEgYmFja3NsYXNoIGVzY2FwZVxuICAgIC8vICAgIFxceyg/Oltee31cXFxcXSt8XFxcXC4pKlxcfSAgICAgICAgICAtIGEgbWF0Y2hlZCBzZXQgb2YgY3VybHkgYnJhY2VzIGNvbnRhaW5pbmcgb3RoZXIgYXRvbXNcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IC8oWzoqXSkoW1xcd1xcW1xcXV0rKXxcXHsoW1xcd1xcW1xcXV0rKSg/OlxcOlxccyooKD86W157fVxcXFxdK3xcXFxcLnxcXHsoPzpbXnt9XFxcXF0rfFxcXFwuKSpcXH0pKykpP1xcfS9nO1xuICAgIGNvbnN0IHNlYXJjaFBsYWNlaG9sZGVyID0gLyhbOl0/KShbXFx3XFxbXFxdLi1dKyl8XFx7KFtcXHdcXFtcXF0uLV0rKSg/OlxcOlxccyooKD86W157fVxcXFxdK3xcXFxcLnxcXHsoPzpbXnt9XFxcXF0rfFxcXFwuKSpcXH0pKykpP1xcfS9nO1xuICAgIGNvbnN0IHBhdHRlcm5zOiBhbnlbXVtdID0gW107XG4gICAgbGV0IGxhc3QgPSAwLFxuICAgICAgbWF0Y2hBcnJheTogUmVnRXhwRXhlY0FycmF5O1xuXG4gICAgY29uc3QgY2hlY2tQYXJhbUVycm9ycyA9IChpZDogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAoIVVybE1hdGNoZXIubmFtZVZhbGlkYXRvci50ZXN0KGlkKSkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHBhcmFtZXRlciBuYW1lICcke2lkfScgaW4gcGF0dGVybiAnJHtwYXR0ZXJufSdgKTtcbiAgICAgIGlmIChmaW5kKHRoaXMuX3BhcmFtcywgcHJvcEVxKCdpZCcsIGlkKSkpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIHBhcmFtZXRlciBuYW1lICcke2lkfScgaW4gcGF0dGVybiAnJHtwYXR0ZXJufSdgKTtcbiAgICB9O1xuXG4gICAgLy8gU3BsaXQgaW50byBzdGF0aWMgc2VnbWVudHMgc2VwYXJhdGVkIGJ5IHBhdGggcGFyYW1ldGVyIHBsYWNlaG9sZGVycy5cbiAgICAvLyBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIGlzIGFsd2F5cyAxIG1vcmUgdGhhbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMuXG4gICAgY29uc3QgbWF0Y2hEZXRhaWxzID0gKG06IFJlZ0V4cEV4ZWNBcnJheSwgaXNTZWFyY2g6IGJvb2xlYW4pID0+IHtcbiAgICAgIC8vIElFWzc4XSByZXR1cm5zICcnIGZvciB1bm1hdGNoZWQgZ3JvdXBzIGluc3RlYWQgb2YgbnVsbFxuICAgICAgY29uc3QgaWQ6IHN0cmluZyA9IG1bMl0gfHwgbVszXTtcbiAgICAgIGNvbnN0IHJlZ2V4cDogc3RyaW5nID0gaXNTZWFyY2ggPyBtWzRdIDogbVs0XSB8fCAobVsxXSA9PT0gJyonID8gJ1tcXFxcc1xcXFxTXSonIDogbnVsbCk7XG5cbiAgICAgIGNvbnN0IG1ha2VSZWdleHBUeXBlID0gc3RyID0+XG4gICAgICAgIGluaGVyaXQocGFyYW1UeXBlcy50eXBlKGlzU2VhcmNoID8gJ3F1ZXJ5JyA6ICdwYXRoJyksIHtcbiAgICAgICAgICBwYXR0ZXJuOiBuZXcgUmVnRXhwKHN0ciwgdGhpcy5jb25maWcuY2FzZUluc2Vuc2l0aXZlID8gJ2knIDogdW5kZWZpbmVkKSxcbiAgICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkLFxuICAgICAgICByZWdleHAsXG4gICAgICAgIGNmZzogdGhpcy5jb25maWcucGFyYW1zW2lkXSxcbiAgICAgICAgc2VnbWVudDogcGF0dGVybi5zdWJzdHJpbmcobGFzdCwgbS5pbmRleCksXG4gICAgICAgIHR5cGU6ICFyZWdleHAgPyBudWxsIDogcGFyYW1UeXBlcy50eXBlKHJlZ2V4cCkgfHwgbWFrZVJlZ2V4cFR5cGUocmVnZXhwKSxcbiAgICAgIH07XG4gICAgfTtcblxuICAgIGxldCBwOiBhbnksIHNlZ21lbnQ6IHN0cmluZztcblxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25kaXRpb25hbC1hc3NpZ25tZW50XG4gICAgd2hpbGUgKChtYXRjaEFycmF5ID0gcGxhY2Vob2xkZXIuZXhlYyhwYXR0ZXJuKSkpIHtcbiAgICAgIHAgPSBtYXRjaERldGFpbHMobWF0Y2hBcnJheSwgZmFsc2UpO1xuICAgICAgaWYgKHAuc2VnbWVudC5pbmRleE9mKCc/JykgPj0gMCkgYnJlYWs7IC8vIHdlJ3JlIGludG8gdGhlIHNlYXJjaCBwYXJ0XG5cbiAgICAgIGNoZWNrUGFyYW1FcnJvcnMocC5pZCk7XG4gICAgICB0aGlzLl9wYXJhbXMucHVzaChwYXJhbUZhY3RvcnkuZnJvbVBhdGgocC5pZCwgcC50eXBlLCB0aGlzLmNvbmZpZy5wYXJhbU1hcChwLmNmZywgZmFsc2UpKSk7XG4gICAgICB0aGlzLl9zZWdtZW50cy5wdXNoKHAuc2VnbWVudCk7XG4gICAgICBwYXR0ZXJucy5wdXNoKFtwLnNlZ21lbnQsIHRhaWwodGhpcy5fcGFyYW1zKV0pO1xuICAgICAgbGFzdCA9IHBsYWNlaG9sZGVyLmxhc3RJbmRleDtcbiAgICB9XG4gICAgc2VnbWVudCA9IHBhdHRlcm4uc3Vic3RyaW5nKGxhc3QpO1xuXG4gICAgLy8gRmluZCBhbnkgc2VhcmNoIHBhcmFtZXRlciBuYW1lcyBhbmQgcmVtb3ZlIHRoZW0gZnJvbSB0aGUgbGFzdCBzZWdtZW50XG4gICAgY29uc3QgaSA9IHNlZ21lbnQuaW5kZXhPZignPycpO1xuXG4gICAgaWYgKGkgPj0gMCkge1xuICAgICAgY29uc3Qgc2VhcmNoID0gc2VnbWVudC5zdWJzdHJpbmcoaSk7XG4gICAgICBzZWdtZW50ID0gc2VnbWVudC5zdWJzdHJpbmcoMCwgaSk7XG5cbiAgICAgIGlmIChzZWFyY2gubGVuZ3RoID4gMCkge1xuICAgICAgICBsYXN0ID0gMDtcblxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uZGl0aW9uYWwtYXNzaWdubWVudFxuICAgICAgICB3aGlsZSAoKG1hdGNoQXJyYXkgPSBzZWFyY2hQbGFjZWhvbGRlci5leGVjKHNlYXJjaCkpKSB7XG4gICAgICAgICAgcCA9IG1hdGNoRGV0YWlscyhtYXRjaEFycmF5LCB0cnVlKTtcbiAgICAgICAgICBjaGVja1BhcmFtRXJyb3JzKHAuaWQpO1xuICAgICAgICAgIHRoaXMuX3BhcmFtcy5wdXNoKHBhcmFtRmFjdG9yeS5mcm9tU2VhcmNoKHAuaWQsIHAudHlwZSwgdGhpcy5jb25maWcucGFyYW1NYXAocC5jZmcsIHRydWUpKSk7XG4gICAgICAgICAgbGFzdCA9IHBsYWNlaG9sZGVyLmxhc3RJbmRleDtcbiAgICAgICAgICAvLyBjaGVjayBpZiA/JlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fc2VnbWVudHMucHVzaChzZWdtZW50KTtcbiAgICB0aGlzLl9jb21waWxlZCA9IHBhdHRlcm5zLm1hcChfcGF0dGVybiA9PiBxdW90ZVJlZ0V4cC5hcHBseShudWxsLCBfcGF0dGVybikpLmNvbmNhdChxdW90ZVJlZ0V4cChzZWdtZW50KSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBjb25jYXRlbmF0ZWQgVXJsTWF0Y2hlclxuICAgKlxuICAgKiBCdWlsZHMgYSBuZXcgVXJsTWF0Y2hlciBieSBhcHBlbmRpbmcgYW5vdGhlciBVcmxNYXRjaGVyIHRvIHRoaXMgb25lLlxuICAgKlxuICAgKiBAcGFyYW0gdXJsIEEgYFVybE1hdGNoZXJgIGluc3RhbmNlIHRvIGFwcGVuZCBhcyBhIGNoaWxkIG9mIHRoZSBjdXJyZW50IGBVcmxNYXRjaGVyYC5cbiAgICovXG4gIGFwcGVuZCh1cmw6IFVybE1hdGNoZXIpOiBVcmxNYXRjaGVyIHtcbiAgICB0aGlzLl9jaGlsZHJlbi5wdXNoKHVybCk7XG4gICAgdXJsLl9jYWNoZSA9IHtcbiAgICAgIHBhdGg6IHRoaXMuX2NhY2hlLnBhdGguY29uY2F0KHVybCksXG4gICAgICBwYXJlbnQ6IHRoaXMsXG4gICAgICBwYXR0ZXJuOiBudWxsLFxuICAgIH07XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIC8qKiBAaGlkZGVuICovXG4gIGlzUm9vdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fY2FjaGUucGF0aFswXSA9PT0gdGhpcztcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIHRoZSBpbnB1dCBwYXR0ZXJuIHN0cmluZyAqL1xuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnBhdHRlcm47XG4gIH1cblxuICAvKipcbiAgICogVGVzdHMgdGhlIHNwZWNpZmllZCB1cmwvcGF0aCBhZ2FpbnN0IHRoaXMgbWF0Y2hlci5cbiAgICpcbiAgICogVGVzdHMgaWYgdGhlIGdpdmVuIHVybCBtYXRjaGVzIHRoaXMgbWF0Y2hlcidzIHBhdHRlcm4sIGFuZCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBjYXB0dXJlZFxuICAgKiBwYXJhbWV0ZXIgdmFsdWVzLiAgUmV0dXJucyBudWxsIGlmIHRoZSBwYXRoIGRvZXMgbm90IG1hdGNoLlxuICAgKlxuICAgKiBUaGUgcmV0dXJuZWQgb2JqZWN0IGNvbnRhaW5zIHRoZSB2YWx1ZXNcbiAgICogb2YgYW55IHNlYXJjaCBwYXJhbWV0ZXJzIHRoYXQgYXJlIG1lbnRpb25lZCBpbiB0aGUgcGF0dGVybiwgYnV0IHRoZWlyIHZhbHVlIG1heSBiZSBudWxsIGlmXG4gICAqIHRoZXkgYXJlIG5vdCBwcmVzZW50IGluIGBzZWFyY2hgLiBUaGlzIG1lYW5zIHRoYXQgc2VhcmNoIHBhcmFtZXRlcnMgYXJlIGFsd2F5cyB0cmVhdGVkXG4gICAqIGFzIG9wdGlvbmFsLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIG5ldyBVcmxNYXRjaGVyKCcvdXNlci97aWR9P3EmcicpLmV4ZWMoJy91c2VyL2JvYicsIHtcbiAgICogICB4OiAnMScsIHE6ICdoZWxsbydcbiAgICogfSk7XG4gICAqIC8vIHJldHVybnMgeyBpZDogJ2JvYicsIHE6ICdoZWxsbycsIHI6IG51bGwgfVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhdGggICAgVGhlIFVSTCBwYXRoIHRvIG1hdGNoLCBlLmcuIGAkbG9jYXRpb24ucGF0aCgpYC5cbiAgICogQHBhcmFtIHNlYXJjaCAgVVJMIHNlYXJjaCBwYXJhbWV0ZXJzLCBlLmcuIGAkbG9jYXRpb24uc2VhcmNoKClgLlxuICAgKiBAcGFyYW0gaGFzaCAgICBVUkwgaGFzaCBlLmcuIGAkbG9jYXRpb24uaGFzaCgpYC5cbiAgICogQHBhcmFtIG9wdGlvbnNcbiAgICpcbiAgICogQHJldHVybnMgVGhlIGNhcHR1cmVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gICAqL1xuICBleGVjKHBhdGg6IHN0cmluZywgc2VhcmNoOiBhbnkgPSB7fSwgaGFzaD86IHN0cmluZywgb3B0aW9uczogYW55ID0ge30pOiBSYXdQYXJhbXMge1xuICAgIGNvbnN0IG1hdGNoID0gbWVtb2l6ZVRvKHRoaXMuX2NhY2hlLCAncGF0dGVybicsICgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgUmVnRXhwKFxuICAgICAgICBbXG4gICAgICAgICAgJ14nLFxuICAgICAgICAgIHVubmVzdCh0aGlzLl9jYWNoZS5wYXRoLm1hcChwcm9wKCdfY29tcGlsZWQnKSkpLmpvaW4oJycpLFxuICAgICAgICAgIHRoaXMuY29uZmlnLnN0cmljdCA9PT0gZmFsc2UgPyAnLz8nIDogJycsXG4gICAgICAgICAgJyQnLFxuICAgICAgICBdLmpvaW4oJycpLFxuICAgICAgICB0aGlzLmNvbmZpZy5jYXNlSW5zZW5zaXRpdmUgPyAnaScgOiB1bmRlZmluZWQsXG4gICAgICApO1xuICAgIH0pLmV4ZWMocGF0aCk7XG5cbiAgICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDtcblxuICAgIC8vIG9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCB7IGlzb2xhdGU6IGZhbHNlIH0pO1xuXG4gICAgY29uc3QgYWxsUGFyYW1zOiBQYXJhbVtdID0gdGhpcy5wYXJhbWV0ZXJzKCksXG4gICAgICBwYXRoUGFyYW1zOiBQYXJhbVtdID0gYWxsUGFyYW1zLmZpbHRlcihwYXJhbSA9PiAhcGFyYW0uaXNTZWFyY2goKSksXG4gICAgICBzZWFyY2hQYXJhbXM6IFBhcmFtW10gPSBhbGxQYXJhbXMuZmlsdGVyKHBhcmFtID0+IHBhcmFtLmlzU2VhcmNoKCkpLFxuICAgICAgblBhdGhTZWdtZW50cyA9IHRoaXMuX2NhY2hlLnBhdGgubWFwKHVybG0gPT4gdXJsbS5fc2VnbWVudHMubGVuZ3RoIC0gMSkucmVkdWNlKChhLCB4KSA9PiBhICsgeCksXG4gICAgICB2YWx1ZXM6IFJhd1BhcmFtcyA9IHt9O1xuXG4gICAgaWYgKG5QYXRoU2VnbWVudHMgIT09IG1hdGNoLmxlbmd0aCAtIDEpIHRocm93IG5ldyBFcnJvcihgVW5iYWxhbmNlZCBjYXB0dXJlIGdyb3VwIGluIHJvdXRlICcke3RoaXMucGF0dGVybn0nYCk7XG5cbiAgICBmdW5jdGlvbiBkZWNvZGVQYXRoQXJyYXkocGFyYW1WYWw6IHN0cmluZykge1xuICAgICAgY29uc3QgcmV2ZXJzZVN0cmluZyA9IChzdHI6IHN0cmluZykgPT5cbiAgICAgICAgc3RyXG4gICAgICAgICAgLnNwbGl0KCcnKVxuICAgICAgICAgIC5yZXZlcnNlKClcbiAgICAgICAgICAuam9pbignJyk7XG4gICAgICBjb25zdCB1bnF1b3RlRGFzaGVzID0gKHN0cjogc3RyaW5nKSA9PiBzdHIucmVwbGFjZSgvXFxcXC0vZywgJy0nKTtcblxuICAgICAgY29uc3Qgc3BsaXQgPSByZXZlcnNlU3RyaW5nKHBhcmFtVmFsKS5zcGxpdCgvLSg/IVxcXFwpLyk7XG4gICAgICBjb25zdCBhbGxSZXZlcnNlZCA9IG1hcChzcGxpdCwgcmV2ZXJzZVN0cmluZyk7XG4gICAgICByZXR1cm4gbWFwKGFsbFJldmVyc2VkLCB1bnF1b3RlRGFzaGVzKS5yZXZlcnNlKCk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuUGF0aFNlZ21lbnRzOyBpKyspIHtcbiAgICAgIGNvbnN0IHBhcmFtOiBQYXJhbSA9IHBhdGhQYXJhbXNbaV07XG4gICAgICBsZXQgdmFsdWU6IGFueSB8IGFueVtdID0gbWF0Y2hbaSArIDFdO1xuXG4gICAgICAvLyBpZiB0aGUgcGFyYW0gdmFsdWUgbWF0Y2hlcyBhIHByZS1yZXBsYWNlIHBhaXIsIHJlcGxhY2UgdGhlIHZhbHVlIGJlZm9yZSBkZWNvZGluZy5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGFyYW0ucmVwbGFjZS5sZW5ndGg7IGorKykge1xuICAgICAgICBpZiAocGFyYW0ucmVwbGFjZVtqXS5mcm9tID09PSB2YWx1ZSkgdmFsdWUgPSBwYXJhbS5yZXBsYWNlW2pdLnRvO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlICYmIHBhcmFtLmFycmF5ID09PSB0cnVlKSB2YWx1ZSA9IGRlY29kZVBhdGhBcnJheSh2YWx1ZSk7XG4gICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkgdmFsdWUgPSBwYXJhbS50eXBlLmRlY29kZSh2YWx1ZSk7XG4gICAgICB2YWx1ZXNbcGFyYW0uaWRdID0gcGFyYW0udmFsdWUodmFsdWUpO1xuICAgIH1cbiAgICBzZWFyY2hQYXJhbXMuZm9yRWFjaChwYXJhbSA9PiB7XG4gICAgICBsZXQgdmFsdWUgPSBzZWFyY2hbcGFyYW0uaWRdO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwYXJhbS5yZXBsYWNlLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChwYXJhbS5yZXBsYWNlW2pdLmZyb20gPT09IHZhbHVlKSB2YWx1ZSA9IHBhcmFtLnJlcGxhY2Vbal0udG87XG4gICAgICB9XG4gICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkgdmFsdWUgPSBwYXJhbS50eXBlLmRlY29kZSh2YWx1ZSk7XG4gICAgICB2YWx1ZXNbcGFyYW0uaWRdID0gcGFyYW0udmFsdWUodmFsdWUpO1xuICAgIH0pO1xuXG4gICAgaWYgKGhhc2gpIHZhbHVlc1snIyddID0gaGFzaDtcblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICAvKipcbiAgICogQGhpZGRlblxuICAgKiBSZXR1cm5zIGFsbCB0aGUgW1tQYXJhbV1dIG9iamVjdHMgb2YgYWxsIHBhdGggYW5kIHNlYXJjaCBwYXJhbWV0ZXJzIG9mIHRoaXMgcGF0dGVybiBpbiBvcmRlciBvZiBhcHBlYXJhbmNlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7QXJyYXkuPFBhcmFtPn0gIEFuIGFycmF5IG9mIFtbUGFyYW1dXSBvYmplY3RzLiBNdXN0IGJlIHRyZWF0ZWQgYXMgcmVhZC1vbmx5LiBJZiB0aGVcbiAgICogICAgcGF0dGVybiBoYXMgbm8gcGFyYW1ldGVycywgYW4gZW1wdHkgYXJyYXkgaXMgcmV0dXJuZWQuXG4gICAqL1xuICBwYXJhbWV0ZXJzKG9wdHM6IGFueSA9IHt9KTogUGFyYW1bXSB7XG4gICAgaWYgKG9wdHMuaW5oZXJpdCA9PT0gZmFsc2UpIHJldHVybiB0aGlzLl9wYXJhbXM7XG4gICAgcmV0dXJuIHVubmVzdCh0aGlzLl9jYWNoZS5wYXRoLm1hcChtYXRjaGVyID0+IG1hdGNoZXIuX3BhcmFtcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBoaWRkZW5cbiAgICogUmV0dXJucyBhIHNpbmdsZSBwYXJhbWV0ZXIgZnJvbSB0aGlzIFVybE1hdGNoZXIgYnkgaWRcbiAgICpcbiAgICogQHBhcmFtIGlkXG4gICAqIEBwYXJhbSBvcHRzXG4gICAqIEByZXR1cm5zIHtUfFBhcmFtfGFueXxib29sZWFufFVybE1hdGNoZXJ8bnVsbH1cbiAgICovXG4gIHBhcmFtZXRlcihpZDogc3RyaW5nLCBvcHRzOiBhbnkgPSB7fSk6IFBhcmFtIHtcbiAgICBjb25zdCBmaW5kUGFyYW0gPSAoKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHRoaXMuX3BhcmFtcykge1xuICAgICAgICBpZiAocGFyYW0uaWQgPT09IGlkKSByZXR1cm4gcGFyYW07XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuX2NhY2hlLnBhcmVudDtcbiAgICByZXR1cm4gZmluZFBhcmFtKCkgfHwgKG9wdHMuaW5oZXJpdCAhPT0gZmFsc2UgJiYgcGFyZW50ICYmIHBhcmVudC5wYXJhbWV0ZXIoaWQsIG9wdHMpKSB8fCBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB0aGUgaW5wdXQgcGFyYW1ldGVyIHZhbHVlcyBhZ2FpbnN0IHRoaXMgVXJsTWF0Y2hlclxuICAgKlxuICAgKiBDaGVja3MgYW4gb2JqZWN0IGhhc2ggb2YgcGFyYW1ldGVycyB0byB2YWxpZGF0ZSB0aGVpciBjb3JyZWN0bmVzcyBhY2NvcmRpbmcgdG8gdGhlIHBhcmFtZXRlclxuICAgKiB0eXBlcyBvZiB0aGlzIGBVcmxNYXRjaGVyYC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBUaGUgb2JqZWN0IGhhc2ggb2YgcGFyYW1ldGVycyB0byB2YWxpZGF0ZS5cbiAgICogQHJldHVybnMgUmV0dXJucyBgdHJ1ZWAgaWYgYHBhcmFtc2AgdmFsaWRhdGVzLCBvdGhlcndpc2UgYGZhbHNlYC5cbiAgICovXG4gIHZhbGlkYXRlcyhwYXJhbXM6IFJhd1BhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHZhbGlkUGFyYW1WYWwgPSAocGFyYW06IFBhcmFtLCB2YWw6IGFueSkgPT4gIXBhcmFtIHx8IHBhcmFtLnZhbGlkYXRlcyh2YWwpO1xuXG4gICAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xuXG4gICAgLy8gSSdtIG5vdCBzdXJlIHdoeSB0aGlzIGNoZWNrcyBvbmx5IHRoZSBwYXJhbSBrZXlzIHBhc3NlZCBpbiwgYW5kIG5vdCBhbGwgdGhlIHBhcmFtcyBrbm93biB0byB0aGUgbWF0Y2hlclxuICAgIGNvbnN0IHBhcmFtU2NoZW1hID0gdGhpcy5wYXJhbWV0ZXJzKCkuZmlsdGVyKHBhcmFtRGVmID0+IHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShwYXJhbURlZi5pZCkpO1xuICAgIHJldHVybiBwYXJhbVNjaGVtYS5tYXAocGFyYW1EZWYgPT4gdmFsaWRQYXJhbVZhbChwYXJhbURlZiwgcGFyYW1zW3BhcmFtRGVmLmlkXSkpLnJlZHVjZShhbGxUcnVlUiwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gYSBzZXQgb2YgcGFyYW1ldGVyIHZhbHVlcywgY3JlYXRlcyBhIFVSTCBmcm9tIHRoaXMgVXJsTWF0Y2hlci5cbiAgICpcbiAgICogQ3JlYXRlcyBhIFVSTCB0aGF0IG1hdGNoZXMgdGhpcyBwYXR0ZXJuIGJ5IHN1YnN0aXR1dGluZyB0aGUgc3BlY2lmaWVkIHZhbHVlc1xuICAgKiBmb3IgdGhlIHBhdGggYW5kIHNlYXJjaCBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIG5ldyBVcmxNYXRjaGVyKCcvdXNlci97aWR9P3EnKS5mb3JtYXQoeyBpZDonYm9iJywgcToneWVzJyB9KTtcbiAgICogLy8gcmV0dXJucyAnL3VzZXIvYm9iP3E9eWVzJ1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHZhbHVlcyAgdGhlIHZhbHVlcyB0byBzdWJzdGl0dXRlIGZvciB0aGUgcGFyYW1ldGVycyBpbiB0aGlzIHBhdHRlcm4uXG4gICAqIEByZXR1cm5zIHRoZSBmb3JtYXR0ZWQgVVJMIChwYXRoIGFuZCBvcHRpb25hbGx5IHNlYXJjaCBwYXJ0KS5cbiAgICovXG4gIGZvcm1hdCh2YWx1ZXM6IFJhd1BhcmFtcyA9IHt9KSB7XG4gICAgLy8gQnVpbGQgdGhlIGZ1bGwgcGF0aCBvZiBVcmxNYXRjaGVycyAoaW5jbHVkaW5nIGFsbCBwYXJlbnQgVXJsTWF0Y2hlcnMpXG4gICAgY29uc3QgdXJsTWF0Y2hlcnMgPSB0aGlzLl9jYWNoZS5wYXRoO1xuXG4gICAgLy8gRXh0cmFjdCBhbGwgdGhlIHN0YXRpYyBzZWdtZW50cyBhbmQgUGFyYW1zIChwcm9jZXNzZWQgYXMgUGFyYW1EZXRhaWxzKVxuICAgIC8vIGludG8gYW4gb3JkZXJlZCBhcnJheVxuICAgIGNvbnN0IHBhdGhTZWdtZW50c0FuZFBhcmFtczogQXJyYXk8c3RyaW5nIHwgUGFyYW1EZXRhaWxzPiA9IHVybE1hdGNoZXJzXG4gICAgICAubWFwKFVybE1hdGNoZXIucGF0aFNlZ21lbnRzQW5kUGFyYW1zKVxuICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgIC5tYXAoeCA9PiAoaXNTdHJpbmcoeCkgPyB4IDogZ2V0RGV0YWlscyh4KSkpO1xuXG4gICAgLy8gRXh0cmFjdCB0aGUgcXVlcnkgcGFyYW1zIGludG8gYSBzZXBhcmF0ZSBhcnJheVxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zOiBBcnJheTxQYXJhbURldGFpbHM+ID0gdXJsTWF0Y2hlcnNcbiAgICAgIC5tYXAoVXJsTWF0Y2hlci5xdWVyeVBhcmFtcylcbiAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAubWFwKGdldERldGFpbHMpO1xuXG4gICAgY29uc3QgaXNJbnZhbGlkID0gKHBhcmFtOiBQYXJhbURldGFpbHMpID0+IHBhcmFtLmlzVmFsaWQgPT09IGZhbHNlO1xuICAgIGlmIChwYXRoU2VnbWVudHNBbmRQYXJhbXMuY29uY2F0KHF1ZXJ5UGFyYW1zKS5maWx0ZXIoaXNJbnZhbGlkKS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgUGFyYW0sIGFwcGxpZXMgdGhlIHBhcmFtZXRlciB2YWx1ZSwgdGhlbiByZXR1cm5zIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IGl0XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0RGV0YWlscyhwYXJhbTogUGFyYW0pOiBQYXJhbURldGFpbHMge1xuICAgICAgLy8gTm9ybWFsaXplIHRvIHR5cGVkIHZhbHVlXG4gICAgICBjb25zdCB2YWx1ZSA9IHBhcmFtLnZhbHVlKHZhbHVlc1twYXJhbS5pZF0pO1xuICAgICAgY29uc3QgaXNWYWxpZCA9IHBhcmFtLnZhbGlkYXRlcyh2YWx1ZSk7XG4gICAgICBjb25zdCBpc0RlZmF1bHRWYWx1ZSA9IHBhcmFtLmlzRGVmYXVsdFZhbHVlKHZhbHVlKTtcbiAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIHNxdWFzaCBtb2RlIGZvciB0aGUgcGFyYW1ldGVyXG4gICAgICBjb25zdCBzcXVhc2ggPSBpc0RlZmF1bHRWYWx1ZSA/IHBhcmFtLnNxdWFzaCA6IGZhbHNlO1xuICAgICAgLy8gQWxsb3cgdGhlIFBhcmFtZXRlcidzIFR5cGUgdG8gZW5jb2RlIHRoZSB2YWx1ZVxuICAgICAgY29uc3QgZW5jb2RlZCA9IHBhcmFtLnR5cGUuZW5jb2RlKHZhbHVlKTtcblxuICAgICAgcmV0dXJuIHsgcGFyYW0sIHZhbHVlLCBpc1ZhbGlkLCBpc0RlZmF1bHRWYWx1ZSwgc3F1YXNoLCBlbmNvZGVkIH07XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdXAgdGhlIHBhdGgtcG9ydGlvbiBmcm9tIHRoZSBsaXN0IG9mIHN0YXRpYyBzZWdtZW50cyBhbmQgcGFyYW1ldGVyc1xuICAgIGNvbnN0IHBhdGhTdHJpbmcgPSBwYXRoU2VnbWVudHNBbmRQYXJhbXMucmVkdWNlKChhY2M6IHN0cmluZywgeDogc3RyaW5nIHwgUGFyYW1EZXRhaWxzKSA9PiB7XG4gICAgICAvLyBUaGUgZWxlbWVudCBpcyBhIHN0YXRpYyBzZWdtZW50IChhIHJhdyBzdHJpbmcpOyBqdXN0IGFwcGVuZCBpdFxuICAgICAgaWYgKGlzU3RyaW5nKHgpKSByZXR1cm4gYWNjICsgeDtcblxuICAgICAgLy8gT3RoZXJ3aXNlLCBpdCdzIGEgUGFyYW1EZXRhaWxzLlxuICAgICAgY29uc3QgeyBzcXVhc2gsIGVuY29kZWQsIHBhcmFtIH0gPSB4O1xuXG4gICAgICAvLyBJZiBzcXVhc2ggaXMgPT09IHRydWUsIHRyeSB0byByZW1vdmUgYSBzbGFzaCBmcm9tIHRoZSBwYXRoXG4gICAgICBpZiAoc3F1YXNoID09PSB0cnVlKSByZXR1cm4gYWNjLm1hdGNoKC9cXC8kLykgPyBhY2Muc2xpY2UoMCwgLTEpIDogYWNjO1xuICAgICAgLy8gSWYgc3F1YXNoIGlzIGEgc3RyaW5nLCB1c2UgdGhlIHN0cmluZyBmb3IgdGhlIHBhcmFtIHZhbHVlXG4gICAgICBpZiAoaXNTdHJpbmcoc3F1YXNoKSkgcmV0dXJuIGFjYyArIHNxdWFzaDtcbiAgICAgIGlmIChzcXVhc2ggIT09IGZhbHNlKSByZXR1cm4gYWNjOyAvLyA/XG4gICAgICBpZiAoZW5jb2RlZCA9PSBudWxsKSByZXR1cm4gYWNjO1xuICAgICAgLy8gSWYgdGhpcyBwYXJhbWV0ZXIgdmFsdWUgaXMgYW4gYXJyYXksIGVuY29kZSB0aGUgdmFsdWUgdXNpbmcgZW5jb2RlRGFzaGVzXG4gICAgICBpZiAoaXNBcnJheShlbmNvZGVkKSkgcmV0dXJuIGFjYyArIG1hcCg8c3RyaW5nW10+ZW5jb2RlZCwgVXJsTWF0Y2hlci5lbmNvZGVEYXNoZXMpLmpvaW4oJy0nKTtcbiAgICAgIC8vIElmIHRoZSBwYXJhbWV0ZXIgdHlwZSBpcyBcInJhd1wiLCB0aGVuIGRvIG5vdCBlbmNvZGVVUklDb21wb25lbnRcbiAgICAgIGlmIChwYXJhbS5yYXcpIHJldHVybiBhY2MgKyBlbmNvZGVkO1xuICAgICAgLy8gRW5jb2RlIHRoZSB2YWx1ZVxuICAgICAgcmV0dXJuIGFjYyArIGVuY29kZVVSSUNvbXBvbmVudCg8c3RyaW5nPmVuY29kZWQpO1xuICAgIH0sICcnKTtcblxuICAgIC8vIEJ1aWxkIHRoZSBxdWVyeSBzdHJpbmcgYnkgYXBwbHlpbmcgcGFyYW1ldGVyIHZhbHVlcyAoYXJyYXkgb3IgcmVndWxhcilcbiAgICAvLyB0aGVuIG1hcHBpbmcgdG8ga2V5PXZhbHVlLCB0aGVuIGZsYXR0ZW5pbmcgYW5kIGpvaW5pbmcgdXNpbmcgXCImXCJcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IHF1ZXJ5UGFyYW1zXG4gICAgICAubWFwKChwYXJhbURldGFpbHM6IFBhcmFtRGV0YWlscykgPT4ge1xuICAgICAgICBsZXQgeyBwYXJhbSwgc3F1YXNoLCBlbmNvZGVkLCBpc0RlZmF1bHRWYWx1ZSB9ID0gcGFyYW1EZXRhaWxzO1xuICAgICAgICBpZiAoZW5jb2RlZCA9PSBudWxsIHx8IChpc0RlZmF1bHRWYWx1ZSAmJiBzcXVhc2ggIT09IGZhbHNlKSkgcmV0dXJuO1xuICAgICAgICBpZiAoIWlzQXJyYXkoZW5jb2RlZCkpIGVuY29kZWQgPSBbPHN0cmluZz5lbmNvZGVkXTtcbiAgICAgICAgaWYgKGVuY29kZWQubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICAgIGlmICghcGFyYW0ucmF3KSBlbmNvZGVkID0gbWFwKDxzdHJpbmdbXT5lbmNvZGVkLCBlbmNvZGVVUklDb21wb25lbnQpO1xuXG4gICAgICAgIHJldHVybiAoPHN0cmluZ1tdPmVuY29kZWQpLm1hcCh2YWwgPT4gYCR7cGFyYW0uaWR9PSR7dmFsfWApO1xuICAgICAgfSlcbiAgICAgIC5maWx0ZXIoaWRlbnRpdHkpXG4gICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgLmpvaW4oJyYnKTtcblxuICAgIC8vIENvbmNhdCB0aGUgcGF0aHN0cmluZyB3aXRoIHRoZSBxdWVyeVN0cmluZyAoaWYgZXhpc3RzKSBhbmQgdGhlIGhhc2hTdHJpbmcgKGlmIGV4aXN0cylcbiAgICByZXR1cm4gcGF0aFN0cmluZyArIChxdWVyeVN0cmluZyA/IGA/JHtxdWVyeVN0cmluZ31gIDogJycpICsgKHZhbHVlc1snIyddID8gJyMnICsgdmFsdWVzWycjJ10gOiAnJyk7XG4gIH1cbn1cblxuLyoqIEBoaWRkZW4gKi9cbmludGVyZmFjZSBQYXJhbURldGFpbHMge1xuICBwYXJhbTogUGFyYW07XG4gIHZhbHVlOiBhbnk7XG4gIGlzVmFsaWQ6IGJvb2xlYW47XG4gIGlzRGVmYXVsdFZhbHVlOiBib29sZWFuO1xuICBzcXVhc2g6IGJvb2xlYW4gfCBzdHJpbmc7XG4gIGVuY29kZWQ6IHN0cmluZyB8IHN0cmluZ1tdO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3VybC91cmxNYXRjaGVyLnRzIiwiLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdmFuaWxsYVxuICovIC8qKiAqL1xuXG5pbXBvcnQgeyBkZXJlZ0FsbCwgaXNEZWZpbmVkLCBMb2NhdGlvblNlcnZpY2VzLCByZW1vdmVGcm9tLCByb290IH0gZnJvbSAnLi4vY29tbW9uJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuaW1wb3J0IHsgSGlzdG9yeUxpa2UsIExvY2F0aW9uTGlrZSB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IGJ1aWxkVXJsLCBnZXRQYXJhbXMsIHBhcnNlVXJsIH0gZnJvbSAnLi91dGlscyc7XG5cbi8qKiBBIGJhc2UgYExvY2F0aW9uU2VydmljZXNgICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUxvY2F0aW9uU2VydmljZXMgaW1wbGVtZW50cyBMb2NhdGlvblNlcnZpY2VzLCBEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSBfbGlzdGVuZXJzOiBGdW5jdGlvbltdID0gW107XG4gIF9sb2NhdGlvbjogTG9jYXRpb25MaWtlO1xuICBfaGlzdG9yeTogSGlzdG9yeUxpa2U7XG5cbiAgX2xpc3RlbmVyID0gZXZ0ID0+IHRoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGNiID0+IGNiKGV2dCkpO1xuXG4gIGNvbnN0cnVjdG9yKHJvdXRlcjogVUlSb3V0ZXIsIHB1YmxpYyBmaXJlQWZ0ZXJVcGRhdGU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9sb2NhdGlvbiA9IHJvb3QubG9jYXRpb247XG4gICAgdGhpcy5faGlzdG9yeSA9IHJvb3QuaGlzdG9yeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIHNob3VsZCByZXR1cm4gdGhlIGN1cnJlbnQgaW50ZXJuYWwgVVJMIHJlcHJlc2VudGF0aW9uLlxuICAgKlxuICAgKiBUaGUgaW50ZXJuYWwgVVJMIGluY2x1ZGVzIG9ubHkgdGhlIHBvcnRpb24gdGhhdCBVSS1Sb3V0ZXIgbWF0Y2hlcy5cbiAgICogSXQgZG9lcyBub3QgaW5jbHVkZTpcbiAgICogLSBwcm90b2NvbFxuICAgKiAtIHNlcnZlclxuICAgKiAtIHBvcnRcbiAgICogLSBiYXNlIGhyZWYgb3IgaGFzaFxuICAgKi9cbiAgcHJvdGVjdGVkIGFic3RyYWN0IF9nZXQoKTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGlzIHNob3VsZCBzZXQgdGhlIGN1cnJlbnQgVVJMLlxuICAgKlxuICAgKiBUaGUgYHVybGAgcGFyYW0gc2hvdWxkIGluY2x1ZGUgb25seSB0aGUgcG9ydGlvbiB0aGF0IFVJLVJvdXRlciBtYXRjaGVzIG9uLlxuICAgKiBJdCBzaG91bGQgbm90IGluY2x1ZGU6XG4gICAqIC0gcHJvdG9jb2xcbiAgICogLSBzZXJ2ZXJcbiAgICogLSBwb3J0XG4gICAqIC0gYmFzZSBocmVmIG9yIGhhc2hcbiAgICpcbiAgICogSG93ZXZlciwgYWZ0ZXIgdGhpcyBmdW5jdGlvbiBjb21wbGV0ZXMsIHRoZSBicm93c2VyIFVSTCBzaG91bGQgcmVmbGVjdCB0aGUgZW50aXJlIChmdWxseSBxdWFsaWZpZWQpXG4gICAqIEhSRUYgaW5jbHVkaW5nIHRob3NlIGRhdGEuXG4gICAqL1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgX3NldChzdGF0ZTogYW55LCB0aXRsZTogc3RyaW5nLCB1cmw6IHN0cmluZywgcmVwbGFjZTogYm9vbGVhbik7XG5cbiAgaGFzaCA9ICgpID0+IHBhcnNlVXJsKHRoaXMuX2dldCgpKS5oYXNoO1xuICBwYXRoID0gKCkgPT4gcGFyc2VVcmwodGhpcy5fZ2V0KCkpLnBhdGg7XG4gIHNlYXJjaCA9ICgpID0+IGdldFBhcmFtcyhwYXJzZVVybCh0aGlzLl9nZXQoKSkuc2VhcmNoKTtcblxuICB1cmwodXJsPzogc3RyaW5nLCByZXBsYWNlID0gdHJ1ZSk6IHN0cmluZyB7XG4gICAgaWYgKGlzRGVmaW5lZCh1cmwpICYmIHVybCAhPT0gdGhpcy5fZ2V0KCkpIHtcbiAgICAgIHRoaXMuX3NldChudWxsLCBudWxsLCB1cmwsIHJlcGxhY2UpO1xuXG4gICAgICBpZiAodGhpcy5maXJlQWZ0ZXJVcGRhdGUpIHtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goY2IgPT4gY2IoeyB1cmwgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBidWlsZFVybCh0aGlzKTtcbiAgfVxuXG4gIG9uQ2hhbmdlKGNiOiBFdmVudExpc3RlbmVyKSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzLnB1c2goY2IpO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmVGcm9tKHRoaXMuX2xpc3RlbmVycywgY2IpO1xuICB9XG5cbiAgZGlzcG9zZShyb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgZGVyZWdBbGwodGhpcy5fbGlzdGVuZXJzKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3ZhbmlsbGEvYmFzZUxvY2F0aW9uU2VydmljZS50cyIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgc3RhdGVcbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBTdGF0ZURlY2xhcmF0aW9uLCBfVmlld0RlY2xhcmF0aW9uLCBfU3RhdGVEZWNsYXJhdGlvbiwgTGF6eUxvYWRSZXN1bHQgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBkZWZhdWx0cywgdmFsdWVzLCBmaW5kLCBpbmhlcml0IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBwcm9wRXEgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IFBhcmFtIH0gZnJvbSAnLi4vcGFyYW1zL3BhcmFtJztcbmltcG9ydCB7IFVybE1hdGNoZXIgfSBmcm9tICcuLi91cmwvdXJsTWF0Y2hlcic7XG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi4vcmVzb2x2ZS9yZXNvbHZhYmxlJztcbmltcG9ydCB7IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vaW50ZXJmYWNlJztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi90YXJnZXRTdGF0ZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uJztcbmltcG9ydCB7IEdsb2IgfSBmcm9tICcuLi9jb21tb24vZ2xvYic7XG5pbXBvcnQgeyBpc09iamVjdCwgaXNGdW5jdGlvbiB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcblxuLyoqXG4gKiBJbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiBhIFVJLVJvdXRlciBzdGF0ZS5cbiAqXG4gKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgY3JlYXRlZCB3aGVuIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0gaXMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBbW1N0YXRlUmVnaXN0cnldXS5cbiAqXG4gKiBBIHJlZ2lzdGVyZWQgW1tTdGF0ZURlY2xhcmF0aW9uXV0gaXMgYXVnbWVudGVkIHdpdGggYSBnZXR0ZXIgKFtbU3RhdGVEZWNsYXJhdGlvbi4kJHN0YXRlXV0pIHdoaWNoIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgW1tTdGF0ZU9iamVjdF1dIG9iamVjdC5cbiAqXG4gKiBUaGlzIGNsYXNzIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIHRoZSBjb3JyZXNwb25kaW5nIFtbU3RhdGVEZWNsYXJhdGlvbl1dLlxuICogRWFjaCBvZiBpdHMgb3duIHByb3BlcnRpZXMgKGkuZS4sIGBoYXNPd25Qcm9wZXJ0eWApIGFyZSBidWlsdCB1c2luZyBidWlsZGVycyBmcm9tIHRoZSBbW1N0YXRlQnVpbGRlcl1dLlxuICovXG5leHBvcnQgY2xhc3MgU3RhdGVPYmplY3Qge1xuICAvKiogVGhlIHBhcmVudCBbW1N0YXRlT2JqZWN0XV0gKi9cbiAgcHVibGljIHBhcmVudDogU3RhdGVPYmplY3Q7XG5cbiAgLyoqIFRoZSBuYW1lIHVzZWQgdG8gcmVnaXN0ZXIgdGhlIHN0YXRlICovXG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG5cbiAgLyoqIFByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFtbU3RhdGVEZWNsYXJhdGlvbi5hYnN0cmFjdF1dICovXG4gIHB1YmxpYyBhYnN0cmFjdDogYm9vbGVhbjtcblxuICAvKiogUHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXSAqL1xuICBwdWJsaWMgcmVzb2x2ZTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBhbnlbXSB8IEZ1bmN0aW9uIH0gfCBhbnlbXTtcblxuICAvKiogQSBsaXN0IG9mIFtbUmVzb2x2YWJsZV1dIG9iamVjdHMuICBUaGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gb2YgW1tyZXNvbHZlXV0uICovXG4gIHB1YmxpYyByZXNvbHZhYmxlczogUmVzb2x2YWJsZVtdO1xuXG4gIC8qKiBQcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZVBvbGljeV1dICovXG4gIHB1YmxpYyByZXNvbHZlUG9saWN5OiBhbnk7XG5cbiAgLyoqIEEgY29tcGlsZWQgVVJMTWF0Y2hlciB3aGljaCBkZXRlY3RzIHdoZW4gdGhlIHN0YXRlJ3MgVVJMIGlzIG1hdGNoZWQgKi9cbiAgcHVibGljIHVybDogVXJsTWF0Y2hlcjtcblxuICAvKiogVGhlIHBhcmFtZXRlcnMgZm9yIHRoZSBzdGF0ZSwgYnVpbHQgZnJvbSB0aGUgVVJMIGFuZCBbW1N0YXRlRGVjbGFyYXRpb24ucGFyYW1zXV0gKi9cbiAgcHVibGljIHBhcmFtczogeyBba2V5OiBzdHJpbmddOiBQYXJhbSB9O1xuXG4gIC8qKlxuICAgKiBUaGUgdmlld3MgZm9yIHRoZSBzdGF0ZS5cbiAgICogTm90ZTogYEB1aXJvdXRlci9jb3JlYCBkb2VzIG5vdCByZWdpc3RlciBhIGJ1aWxkZXIgZm9yIHZpZXdzLlxuICAgKiBUaGUgZnJhbWV3b3JrIHNwZWNpZmljIGNvZGUgc2hvdWxkIHJlZ2lzdGVyIGEgYHZpZXdzYCBidWlsZGVyLlxuICAgKi9cbiAgcHVibGljIHZpZXdzOiB7IFtrZXk6IHN0cmluZ106IF9WaWV3RGVjbGFyYXRpb24gfTtcblxuICAvKipcbiAgICogVGhlIG9yaWdpbmFsIFtbU3RhdGVEZWNsYXJhdGlvbl1dIHVzZWQgdG8gYnVpbGQgdGhpcyBbW1N0YXRlT2JqZWN0XV0uXG4gICAqIE5vdGU6IGB0aGlzYCBvYmplY3QgYWxzbyBwcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSB0aGUgYHNlbGZgIGRlY2xhcmF0aW9uIG9iamVjdC5cbiAgICovXG4gIHB1YmxpYyBzZWxmOiBTdGF0ZURlY2xhcmF0aW9uO1xuXG4gIC8qKiBUaGUgbmVhcmVzdCBwYXJlbnQgW1tTdGF0ZU9iamVjdF1dIHdoaWNoIGhhcyBhIFVSTCAqL1xuICBwdWJsaWMgbmF2aWdhYmxlOiBTdGF0ZU9iamVjdDtcblxuICAvKiogVGhlIHBhcmVudCBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0cyBmcm9tIHRoaXMgc3RhdGUgdXAgdG8gdGhlIHJvb3QgKi9cbiAgcHVibGljIHBhdGg6IFN0YXRlT2JqZWN0W107XG5cbiAgLyoqXG4gICAqIFByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFtbU3RhdGVEZWNsYXJhdGlvbi5kYXRhXV1cbiAgICogTm90ZTogVGhpcyBpcyB0aGUgb25seSBmaWVsZCBvbiB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uXV0gd2hpY2ggaXMgbXV0YXRlZC5cbiAgICogVGhlIGRlZmluaXRpb24gb2JqZWN0J3MgYGRhdGFgIGZpZWxkIGlzIHJlcGxhY2VkIHdpdGggYSBuZXcgb2JqZWN0XG4gICAqIHdoaWNoIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIHRoZSBwYXJlbnQgc3RhdGUgZGVmaW5pdGlvbidzIGBkYXRhYCBmaWVsZC5cbiAgICovXG4gIHB1YmxpYyBkYXRhOiBhbnk7XG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBwYXJlbnQgU3RhdGVzJyBuYW1lcyBhcyBrZXlzIGFuZFxuICAgKiB0cnVlIGFzIHRoZWlyIHZhbHVlcy5cbiAgICovXG4gIHB1YmxpYyBpbmNsdWRlczogeyBbbmFtZTogc3RyaW5nXTogYm9vbGVhbiB9O1xuXG4gIC8qKiBQcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBbW1N0YXRlRGVjbGFyYXRpb24ub25FeGl0XV0gKi9cbiAgcHVibGljIG9uRXhpdDogVHJhbnNpdGlvblN0YXRlSG9va0ZuO1xuICAvKiogUHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gW1tTdGF0ZURlY2xhcmF0aW9uLm9uUmV0YWluXV0gKi9cbiAgcHVibGljIG9uUmV0YWluOiBUcmFuc2l0aW9uU3RhdGVIb29rRm47XG4gIC8qKiBQcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBbW1N0YXRlRGVjbGFyYXRpb24ub25FbnRlcl1dICovXG4gIHB1YmxpYyBvbkVudGVyOiBUcmFuc2l0aW9uU3RhdGVIb29rRm47XG5cbiAgLyoqIFByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFtbU3RhdGVEZWNsYXJhdGlvbi5sYXp5TG9hZF1dICovXG4gIHB1YmxpYyBsYXp5TG9hZDogKHRyYW5zaXRpb246IFRyYW5zaXRpb24sIHN0YXRlOiBTdGF0ZURlY2xhcmF0aW9uKSA9PiBQcm9taXNlPExhenlMb2FkUmVzdWx0PjtcblxuICAvKiogUHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gW1tTdGF0ZURlY2xhcmF0aW9uLnJlZGlyZWN0VG9dXSAqL1xuICByZWRpcmVjdFRvOlxuICAgIHwgc3RyaW5nXG4gICAgfCAoKCR0cmFuc2l0aW9uJDogVHJhbnNpdGlvbikgPT4gVGFyZ2V0U3RhdGUpXG4gICAgfCB7IHN0YXRlOiBzdHJpbmcgfCBTdGF0ZURlY2xhcmF0aW9uOyBwYXJhbXM6IHsgW2tleTogc3RyaW5nXTogYW55IH0gfTtcblxuICAvKiogQGhpZGRlbiAqL1xuICBfX3N0YXRlT2JqZWN0Q2FjaGU6IHtcbiAgICAvKiogTWlnaHQgYmUgbnVsbCAqL1xuICAgIG5hbWVHbG9iPzogR2xvYjtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgc3RhdGUgb2JqZWN0IHRvIHB1dCB0aGUgcHJpdmF0ZS9pbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzIG9udG8uXG4gICAqIFRoZSBvYmplY3QncyBwcm90b3R5cGUgY2hhaW4gbG9va3MgbGlrZTpcbiAgICogKEludGVybmFsIFN0YXRlIE9iamVjdCkgLT4gKENvcHkgb2YgU3RhdGUucHJvdG90eXBlKSAtPiAoU3RhdGUgRGVjbGFyYXRpb24gb2JqZWN0KSAtPiAoU3RhdGUgRGVjbGFyYXRpb24ncyBwcm90b3R5cGUuLi4pXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZURlY2wgdGhlIHVzZXItc3VwcGxpZWQgU3RhdGUgRGVjbGFyYXRpb25cbiAgICogQHJldHVybnMge1N0YXRlT2JqZWN0fSBhbiBpbnRlcm5hbCBTdGF0ZSBvYmplY3RcbiAgICovXG4gIHN0YXRpYyBjcmVhdGUoc3RhdGVEZWNsOiBfU3RhdGVEZWNsYXJhdGlvbik6IFN0YXRlT2JqZWN0IHtcbiAgICBzdGF0ZURlY2wgPSBTdGF0ZU9iamVjdC5pc1N0YXRlQ2xhc3Moc3RhdGVEZWNsKSA/IG5ldyBzdGF0ZURlY2woKSA6IHN0YXRlRGVjbDtcblxuICAgIGNvbnN0IHN0YXRlID0gaW5oZXJpdChpbmhlcml0KHN0YXRlRGVjbCwgU3RhdGVPYmplY3QucHJvdG90eXBlKSkgYXMgU3RhdGVPYmplY3Q7XG4gICAgc3RhdGVEZWNsLiQkc3RhdGUgPSAoKSA9PiBzdGF0ZTtcbiAgICBzdGF0ZS5zZWxmID0gc3RhdGVEZWNsO1xuICAgIHN0YXRlLl9fc3RhdGVPYmplY3RDYWNoZSA9IHtcbiAgICAgIG5hbWVHbG9iOiBHbG9iLmZyb21TdHJpbmcoc3RhdGUubmFtZSksIC8vIG1pZ2h0IHJldHVybiBudWxsXG4gICAgfTtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICAvKiogUHJlZGljYXRlIHdoaWNoIHJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIGFuIGNsYXNzIHdpdGggQFN0YXRlKCkgZGVjb3JhdG9yICovXG4gIHN0YXRpYyBpc1N0YXRlQ2xhc3MgPSAoc3RhdGVEZWNsOiBfU3RhdGVEZWNsYXJhdGlvbik6IHN0YXRlRGVjbCBpcyB7IG5ldyAoKTogU3RhdGVEZWNsYXJhdGlvbiB9ID0+XG4gICAgaXNGdW5jdGlvbihzdGF0ZURlY2wpICYmIHN0YXRlRGVjbFsnX191aVJvdXRlclN0YXRlJ10gPT09IHRydWU7XG5cbiAgLyoqIFByZWRpY2F0ZSB3aGljaCByZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhbiBpbnRlcm5hbCBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0ICovXG4gIHN0YXRpYyBpc1N0YXRlID0gKG9iajogYW55KTogb2JqIGlzIFN0YXRlT2JqZWN0ID0+IGlzT2JqZWN0KG9ialsnX19zdGF0ZU9iamVjdENhY2hlJ10pO1xuXG4gIC8qKiBAZGVwcmVjYXRlZCB1c2UgU3RhdGUuY3JlYXRlKCkgKi9cbiAgY29uc3RydWN0b3IoY29uZmlnPzogU3RhdGVEZWNsYXJhdGlvbikge1xuICAgIHJldHVybiBTdGF0ZU9iamVjdC5jcmVhdGUoY29uZmlnIHx8IHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHBhcmFtZXRlciBpcyB0aGUgc2FtZSBzdGF0ZS5cbiAgICpcbiAgICogQ29tcGFyZXMgdGhlIGlkZW50aXR5IG9mIHRoZSBzdGF0ZSBhZ2FpbnN0IHRoZSBwYXNzZWQgdmFsdWUsIHdoaWNoIGlzIGVpdGhlciBhbiBvYmplY3RcbiAgICogcmVmZXJlbmNlIHRvIHRoZSBhY3R1YWwgYFN0YXRlYCBpbnN0YW5jZSwgdGhlIG9yaWdpbmFsIGRlZmluaXRpb24gb2JqZWN0IHBhc3NlZCB0b1xuICAgKiBgJHN0YXRlUHJvdmlkZXIuc3RhdGUoKWAsIG9yIHRoZSBmdWxseS1xdWFsaWZpZWQgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHJlZiBDYW4gYmUgb25lIG9mIChhKSBhIGBTdGF0ZWAgaW5zdGFuY2UsIChiKSBhbiBvYmplY3QgdGhhdCB3YXMgcGFzc2VkXG4gICAqICAgICAgICBpbnRvIGAkc3RhdGVQcm92aWRlci5zdGF0ZSgpYCwgKGMpIHRoZSBmdWxseS1xdWFsaWZpZWQgbmFtZSBvZiBhIHN0YXRlIGFzIGEgc3RyaW5nLlxuICAgKiBAcmV0dXJucyBSZXR1cm5zIGB0cnVlYCBpZiBgcmVmYCBtYXRjaGVzIHRoZSBjdXJyZW50IGBTdGF0ZWAgaW5zdGFuY2UuXG4gICAqL1xuICBpcyhyZWY6IFN0YXRlT2JqZWN0IHwgU3RhdGVEZWNsYXJhdGlvbiB8IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzID09PSByZWYgfHwgdGhpcy5zZWxmID09PSByZWYgfHwgdGhpcy5mcW4oKSA9PT0gcmVmO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHRoaXMgZG9lcyBub3QgcHJvcGVybHkgaGFuZGxlIGRvdCBub3RhdGlvblxuICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgZG90LXNlcGFyYXRlZCBuYW1lIG9mIHRoZSBzdGF0ZS5cbiAgICovXG4gIGZxbigpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy5wYXJlbnQgfHwgISh0aGlzLnBhcmVudCBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3IpKSByZXR1cm4gdGhpcy5uYW1lO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcmVudC5mcW4oKTtcbiAgICByZXR1cm4gbmFtZSA/IG5hbWUgKyAnLicgKyB0aGlzLm5hbWUgOiB0aGlzLm5hbWU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcm9vdCBub2RlIG9mIHRoaXMgc3RhdGUncyB0cmVlLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgcm9vdCBvZiB0aGlzIHN0YXRlJ3MgdHJlZS5cbiAgICovXG4gIHJvb3QoKTogU3RhdGVPYmplY3Qge1xuICAgIHJldHVybiAodGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQucm9vdCgpKSB8fCB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHN0YXRlJ3MgYFBhcmFtYCBvYmplY3RzXG4gICAqXG4gICAqIEdldHMgdGhlIGxpc3Qgb2YgW1tQYXJhbV1dIG9iamVjdHMgb3duZWQgYnkgdGhlIHN0YXRlLlxuICAgKiBJZiBgb3B0cy5pbmhlcml0YCBpcyB0cnVlLCBpdCBhbHNvIGluY2x1ZGVzIHRoZSBhbmNlc3RvciBzdGF0ZXMnIFtbUGFyYW1dXSBvYmplY3RzLlxuICAgKiBJZiBgb3B0cy5tYXRjaGluZ0tleXNgIGV4aXN0cywgcmV0dXJucyBvbmx5IGBQYXJhbWBzIHdob3NlIGBpZGAgaXMgYSBrZXkgb24gdGhlIGBtYXRjaGluZ0tleXNgIG9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0gb3B0cyBvcHRpb25zXG4gICAqL1xuICBwYXJhbWV0ZXJzKG9wdHM/OiB7IGluaGVyaXQ/OiBib29sZWFuOyBtYXRjaGluZ0tleXM/OiBhbnkgfSk6IFBhcmFtW10ge1xuICAgIG9wdHMgPSBkZWZhdWx0cyhvcHRzLCB7IGluaGVyaXQ6IHRydWUsIG1hdGNoaW5nS2V5czogbnVsbCB9KTtcbiAgICBjb25zdCBpbmhlcml0ZWQgPSAob3B0cy5pbmhlcml0ICYmIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LnBhcmFtZXRlcnMoKSkgfHwgW107XG4gICAgcmV0dXJuIGluaGVyaXRlZFxuICAgICAgLmNvbmNhdCh2YWx1ZXModGhpcy5wYXJhbXMpKVxuICAgICAgLmZpbHRlcihwYXJhbSA9PiAhb3B0cy5tYXRjaGluZ0tleXMgfHwgb3B0cy5tYXRjaGluZ0tleXMuaGFzT3duUHJvcGVydHkocGFyYW0uaWQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc2luZ2xlIFtbUGFyYW1dXSB0aGF0IGlzIG93bmVkIGJ5IHRoZSBzdGF0ZVxuICAgKlxuICAgKiBJZiBgb3B0cy5pbmhlcml0YCBpcyB0cnVlLCBpdCBhbHNvIHNlYXJjaGVzIHRoZSBhbmNlc3RvciBzdGF0ZXNgIFtbUGFyYW1dXXMuXG4gICAqIEBwYXJhbSBpZCB0aGUgbmFtZSBvZiB0aGUgW1tQYXJhbV1dIHRvIHJldHVyblxuICAgKiBAcGFyYW0gb3B0cyBvcHRpb25zXG4gICAqL1xuICBwYXJhbWV0ZXIoaWQ6IHN0cmluZywgb3B0czogeyBpbmhlcml0PzogYm9vbGVhbiB9ID0ge30pOiBQYXJhbSB7XG4gICAgcmV0dXJuIChcbiAgICAgICh0aGlzLnVybCAmJiB0aGlzLnVybC5wYXJhbWV0ZXIoaWQsIG9wdHMpKSB8fFxuICAgICAgZmluZCh2YWx1ZXModGhpcy5wYXJhbXMpLCBwcm9wRXEoJ2lkJywgaWQpKSB8fFxuICAgICAgKG9wdHMuaW5oZXJpdCAmJiB0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5wYXJhbWV0ZXIoaWQpKVxuICAgICk7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5mcW4oKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3N0YXRlL3N0YXRlT2JqZWN0LnRzIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBjb3JlXG4gKi9cbi8qKlxuICogTWF0Y2hlcyBzdGF0ZSBuYW1lcyB1c2luZyBnbG9iLWxpa2UgcGF0dGVybiBzdHJpbmdzLlxuICpcbiAqIEdsb2JzIGNhbiBiZSB1c2VkIGluIHNwZWNpZmljIEFQSXMgaW5jbHVkaW5nOlxuICpcbiAqIC0gW1tTdGF0ZVNlcnZpY2UuaXNdXVxuICogLSBbW1N0YXRlU2VydmljZS5pbmNsdWRlc11dXG4gKiAtIFRoZSBmaXJzdCBhcmd1bWVudCB0byBIb29rIFJlZ2lzdHJhdGlvbiBmdW5jdGlvbnMgbGlrZSBbW1RyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnRdXVxuICogICAgLSBbW0hvb2tNYXRjaENyaXRlcmlhXV0gYW5kIFtbSG9va01hdGNoQ3JpdGVyaW9uXV1cbiAqXG4gKiBBIGBHbG9iYCBzdHJpbmcgaXMgYSBwYXR0ZXJuIHdoaWNoIG1hdGNoZXMgc3RhdGUgbmFtZXMuXG4gKiBOZXN0ZWQgc3RhdGUgbmFtZXMgYXJlIHNwbGl0IGludG8gc2VnbWVudHMgKHNlcGFyYXRlZCBieSBhIGRvdCkgd2hlbiBwcm9jZXNzaW5nLlxuICogVGhlIHN0YXRlIG5hbWVkIGBmb28uYmFyLmJhemAgaXMgc3BsaXQgaW50byB0aHJlZSBzZWdtZW50cyBbJ2ZvbycsICdiYXInLCAnYmF6J11cbiAqXG4gKiBHbG9icyB3b3JrIGFjY29yZGluZyB0byB0aGUgZm9sbG93aW5nIHJ1bGVzOlxuICpcbiAqICMjIyBFeGFjdCBtYXRjaDpcbiAqXG4gKiBUaGUgZ2xvYiBgJ0EuQidgIG1hdGNoZXMgdGhlIHN0YXRlIG5hbWVkIGV4YWN0bHkgYCdBLkInYC5cbiAqXG4gKiB8IEdsb2IgICAgICAgIHxNYXRjaGVzIHN0YXRlcyBuYW1lZHxEb2VzIG5vdCBtYXRjaCBzdGF0ZSBuYW1lZHxcbiAqIHw6LS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCBgJ0EnYCAgICAgICB8IGAnQSdgICAgICAgICAgICAgICAgfCBgJ0InYCAsIGAnQS5DJ2AgICAgICB8XG4gKiB8IGAnQS5CJ2AgICAgIHwgYCdBLkInYCAgICAgICAgICAgICB8IGAnQSdgICwgYCdBLkIuQydgICAgIHxcbiAqIHwgYCdmb28nYCAgICAgfCBgJ2ZvbydgICAgICAgICAgICAgIHwgYCdGT08nYCAsIGAnZm9vLmJhcidgfFxuICpcbiAqICMjIyBTaW5nbGUgc3RhciAoYCpgKVxuICpcbiAqIEEgc2luZ2xlIHN0YXIgKGAqYCkgaXMgYSB3aWxkY2FyZCB0aGF0IG1hdGNoZXMgZXhhY3RseSBvbmUgc2VnbWVudC5cbiAqXG4gKiB8IEdsb2IgICAgICAgIHxNYXRjaGVzIHN0YXRlcyBuYW1lZCAgfERvZXMgbm90IG1hdGNoIHN0YXRlIG5hbWVkIHxcbiAqIHw6LS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCBgJyonYCAgICAgICB8IGAnQSdgICwgYCdaJ2AgICAgICAgIHwgYCdBLkInYCAsIGAnWi5ZLlgnYCAgICAgICB8XG4gKiB8IGAnQS4qJ2AgICAgIHwgYCdBLkInYCAsIGAnQS5DJ2AgICAgfCBgJ0EnYCAsIGAnQS5CLkMnYCAgICAgICAgIHxcbiAqIHwgYCdBLiouKidgICAgfCBgJ0EuQi5DJ2AgLCBgJ0EuWC5ZJ2B8IGAnQSdgLCBgJ0EuQidgICwgYCdaLlkuWCdgfFxuICpcbiAqICMjIyBEb3VibGUgc3RhciAoYCoqYClcbiAqXG4gKiBBIGRvdWJsZSBzdGFyIChgJyoqJ2ApIGlzIGEgd2lsZGNhcmQgdGhhdCBtYXRjaGVzICp6ZXJvIG9yIG1vcmUgc2VnbWVudHMqXG4gKlxuICogfCBHbG9iICAgICAgICB8TWF0Y2hlcyBzdGF0ZXMgbmFtZWQgICAgICAgICAgICAgICAgICAgICAgICAgICB8RG9lcyBub3QgbWF0Y2ggc3RhdGUgbmFtZWQgICAgICAgICB8XG4gKiB8Oi0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgYCcqKidgICAgICAgfCBgJ0EnYCAsIGAnQS5CJ2AsIGAnWi5ZLlgnYCAgICAgICAgICAgICAgICAgICAgfCAobWF0Y2hlcyBhbGwgc3RhdGVzKSAgICAgICAgICAgICAgfFxuICogfCBgJ0EuKionYCAgICB8IGAnQSdgICwgYCdBLkInYCAsIGAnQS5DLlgnYCAgICAgICAgICAgICAgICAgICB8IGAnWi5ZLlgnYCAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAnKiouWCdgICAgIHwgYCdYJ2AgLCBgJ0EuWCdgICwgYCdaLlkuWCdgICAgICAgICAgICAgICAgICAgIHwgYCdBJ2AgLCBgJ0EubG9naW4uWidgICAgICAgICAgICAgIHxcbiAqIHwgYCdBLioqLlgnYCAgfCBgJ0EuWCdgICwgYCdBLkIuWCdgICwgYCdBLkIuQy5YJ2AgICAgICAgICAgICAgfCBgJ0EnYCAsIGAnQS5CLkMnYCAgICAgICAgICAgICAgICAgfFxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIEdsb2Ige1xuICB0ZXh0OiBzdHJpbmc7XG4gIGdsb2I6IEFycmF5PHN0cmluZz47XG4gIHJlZ2V4cDogUmVnRXhwO1xuXG4gIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBoYXMgZ2xvYi1saWtlIGNoYXJhY3RlcnMgaW4gaXQgKi9cbiAgc3RhdGljIGlzKHRleHQ6IHN0cmluZykge1xuICAgIHJldHVybiAhIS9bISwqXSsvLmV4ZWModGV4dCk7XG4gIH1cblxuICAvKiogUmV0dXJucyBhIGdsb2IgZnJvbSB0aGUgc3RyaW5nLCBvciBudWxsIGlmIHRoZSBzdHJpbmcgaXNuJ3QgR2xvYi1saWtlICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKHRleHQ6IHN0cmluZykge1xuICAgIHJldHVybiBHbG9iLmlzKHRleHQpID8gbmV3IEdsb2IodGV4dCkgOiBudWxsO1xuICB9XG5cbiAgY29uc3RydWN0b3IodGV4dDogc3RyaW5nKSB7XG4gICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICB0aGlzLmdsb2IgPSB0ZXh0LnNwbGl0KCcuJyk7XG5cbiAgICBjb25zdCByZWdleHBTdHJpbmcgPSB0aGlzLnRleHRcbiAgICAgIC5zcGxpdCgnLicpXG4gICAgICAubWFwKHNlZyA9PiB7XG4gICAgICAgIGlmIChzZWcgPT09ICcqKicpIHJldHVybiAnKD86fCg/OlxcXFwuW14uXSopKiknO1xuICAgICAgICBpZiAoc2VnID09PSAnKicpIHJldHVybiAnXFxcXC5bXi5dKic7XG4gICAgICAgIHJldHVybiAnXFxcXC4nICsgc2VnO1xuICAgICAgfSlcbiAgICAgIC5qb2luKCcnKTtcblxuICAgIHRoaXMucmVnZXhwID0gbmV3IFJlZ0V4cCgnXicgKyByZWdleHBTdHJpbmcgKyAnJCcpO1xuICB9XG5cbiAgbWF0Y2hlcyhuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5yZWdleHAudGVzdCgnLicgKyBuYW1lKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL2NvbW1vbi9nbG9iLnRzIiwiLyoqIEBtb2R1bGUgY29tbW9uICovXG5pbXBvcnQgeyBwdXNoVG8gfSBmcm9tICcuL2NvbW1vbic7XG5cbmV4cG9ydCBjbGFzcyBRdWV1ZTxUPiB7XG4gIHByaXZhdGUgX2V2aWN0TGlzdGVuZXJzOiAoKGl0ZW06IFQpID0+IHZvaWQpW10gPSBbXTtcbiAgcHVibGljIG9uRXZpY3QgPSBwdXNoVG8odGhpcy5fZXZpY3RMaXN0ZW5lcnMpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2l0ZW1zOiBUW10gPSBbXSwgcHJpdmF0ZSBfbGltaXQ6IG51bWJlciA9IG51bGwpIHt9XG5cbiAgZW5xdWV1ZShpdGVtOiBUKSB7XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLl9pdGVtcztcbiAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuICAgIGlmICh0aGlzLl9saW1pdCAmJiBpdGVtcy5sZW5ndGggPiB0aGlzLl9saW1pdCkgdGhpcy5ldmljdCgpO1xuICAgIHJldHVybiBpdGVtO1xuICB9XG5cbiAgZXZpY3QoKTogVCB7XG4gICAgY29uc3QgaXRlbTogVCA9IHRoaXMuX2l0ZW1zLnNoaWZ0KCk7XG4gICAgdGhpcy5fZXZpY3RMaXN0ZW5lcnMuZm9yRWFjaChmbiA9PiBmbihpdGVtKSk7XG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cblxuICBkZXF1ZXVlKCk6IFQge1xuICAgIGlmICh0aGlzLnNpemUoKSkgcmV0dXJuIHRoaXMuX2l0ZW1zLnNwbGljZSgwLCAxKVswXTtcbiAgfVxuXG4gIGNsZWFyKCk6IEFycmF5PFQ+IHtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5faXRlbXM7XG4gICAgdGhpcy5faXRlbXMgPSBbXTtcbiAgICByZXR1cm4gY3VycmVudDtcbiAgfVxuXG4gIHNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RoO1xuICB9XG5cbiAgcmVtb3ZlKGl0ZW06IFQpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGl0ZW0pO1xuICAgIHJldHVybiBpZHggPiAtMSAmJiB0aGlzLl9pdGVtcy5zcGxpY2UoaWR4LCAxKVswXTtcbiAgfVxuXG4gIHBlZWtUYWlsKCk6IFQge1xuICAgIHJldHVybiB0aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGggLSAxXTtcbiAgfVxuXG4gIHBlZWtIZWFkKCk6IFQge1xuICAgIGlmICh0aGlzLnNpemUoKSkgcmV0dXJuIHRoaXMuX2l0ZW1zWzBdO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvY29tbW9uL3F1ZXVlLnRzIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB0cmFuc2l0aW9uXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBpc1N0cmluZywgaXNGdW5jdGlvbiwgR2xvYiwgZXh0ZW5kLCByZW1vdmVGcm9tLCB0YWlsLCB2YWx1ZXMsIGlkZW50aXR5LCBtYXBPYmogfSBmcm9tICcuLi9jb21tb24nO1xuaW1wb3J0IHsgUGF0aE5vZGUgfSBmcm9tICcuLi9wYXRoL3BhdGhOb2RlJztcbmltcG9ydCB7XG4gIFRyYW5zaXRpb25TdGF0ZUhvb2tGbixcbiAgVHJhbnNpdGlvbkhvb2tGbixcbiAgVHJhbnNpdGlvbkhvb2tQaGFzZSwgLy8gaGFzIG9yIGlzIHVzaW5nXG4gIFRyYW5zaXRpb25Ib29rU2NvcGUsXG4gIElIb29rUmVnaXN0cnksXG4gIFBhdGhUeXBlLFxufSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbmltcG9ydCB7XG4gIEhvb2tSZWdPcHRpb25zLFxuICBIb29rTWF0Y2hDcml0ZXJpYSxcbiAgVHJlZUNoYW5nZXMsXG4gIEhvb2tNYXRjaENyaXRlcmlvbixcbiAgSU1hdGNoaW5nTm9kZXMsXG4gIEhvb2tGbixcbn0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uRXZlbnRUeXBlIH0gZnJvbSAnLi90cmFuc2l0aW9uRXZlbnRUeXBlJztcbmltcG9ydCB7IFRyYW5zaXRpb25TZXJ2aWNlIH0gZnJvbSAnLi90cmFuc2l0aW9uU2VydmljZSc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgZ2l2ZW4gc3RhdGUgbWF0Y2hlcyB0aGUgbWF0Y2hDcml0ZXJpYVxuICpcbiAqIEBoaWRkZW5cbiAqXG4gKiBAcGFyYW0gc3RhdGUgYSBTdGF0ZSBPYmplY3QgdG8gdGVzdCBhZ2FpbnN0XG4gKiBAcGFyYW0gY3JpdGVyaW9uXG4gKiAtIElmIGEgc3RyaW5nLCBtYXRjaFN0YXRlIHVzZXMgdGhlIHN0cmluZyBhcyBhIGdsb2ItbWF0Y2hlciBhZ2FpbnN0IHRoZSBzdGF0ZSBuYW1lXG4gKiAtIElmIGFuIGFycmF5IChvZiBzdHJpbmdzKSwgbWF0Y2hTdGF0ZSB1c2VzIGVhY2ggc3RyaW5nIGluIHRoZSBhcnJheSBhcyBhIGdsb2ItbWF0Y2hlcnMgYWdhaW5zdCB0aGUgc3RhdGUgbmFtZVxuICogICBhbmQgcmV0dXJucyBhIHBvc2l0aXZlIG1hdGNoIGlmIGFueSBvZiB0aGUgZ2xvYnMgbWF0Y2guXG4gKiAtIElmIGEgZnVuY3Rpb24sIG1hdGNoU3RhdGUgY2FsbHMgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIHN0YXRlIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGZ1bmN0aW9uJ3MgcmVzdWx0IGlzIHRydXRoeS5cbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hTdGF0ZShzdGF0ZTogU3RhdGVPYmplY3QsIGNyaXRlcmlvbjogSG9va01hdGNoQ3JpdGVyaW9uKSB7XG4gIGNvbnN0IHRvTWF0Y2ggPSBpc1N0cmluZyhjcml0ZXJpb24pID8gW2NyaXRlcmlvbl0gOiBjcml0ZXJpb247XG5cbiAgZnVuY3Rpb24gbWF0Y2hHbG9icyhfc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gICAgY29uc3QgZ2xvYlN0cmluZ3MgPSA8c3RyaW5nW10+dG9NYXRjaDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdsb2JTdHJpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBnbG9iID0gbmV3IEdsb2IoZ2xvYlN0cmluZ3NbaV0pO1xuXG4gICAgICBpZiAoKGdsb2IgJiYgZ2xvYi5tYXRjaGVzKF9zdGF0ZS5uYW1lKSkgfHwgKCFnbG9iICYmIGdsb2JTdHJpbmdzW2ldID09PSBfc3RhdGUubmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IG1hdGNoRm4gPSA8YW55Pihpc0Z1bmN0aW9uKHRvTWF0Y2gpID8gdG9NYXRjaCA6IG1hdGNoR2xvYnMpO1xuICByZXR1cm4gISFtYXRjaEZuKHN0YXRlKTtcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIFRoZSByZWdpc3RyYXRpb24gZGF0YSBmb3IgYSByZWdpc3RlcmVkIHRyYW5zaXRpb24gaG9va1xuICovXG5leHBvcnQgY2xhc3MgUmVnaXN0ZXJlZEhvb2sge1xuICBwcmlvcml0eTogbnVtYmVyO1xuICBiaW5kOiBhbnk7XG4gIGludm9rZUNvdW50ID0gMDtcbiAgaW52b2tlTGltaXQ6IG51bWJlcjtcbiAgX2RlcmVnaXN0ZXJlZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyB0cmFuU3ZjOiBUcmFuc2l0aW9uU2VydmljZSxcbiAgICBwdWJsaWMgZXZlbnRUeXBlOiBUcmFuc2l0aW9uRXZlbnRUeXBlLFxuICAgIHB1YmxpYyBjYWxsYmFjazogSG9va0ZuLFxuICAgIHB1YmxpYyBtYXRjaENyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSxcbiAgICBwdWJsaWMgcmVtb3ZlSG9va0Zyb21SZWdpc3RyeTogKGhvb2s6IFJlZ2lzdGVyZWRIb29rKSA9PiB2b2lkLFxuICAgIG9wdGlvbnM6IEhvb2tSZWdPcHRpb25zID0ge30gYXMgYW55LFxuICApIHtcbiAgICB0aGlzLnByaW9yaXR5ID0gb3B0aW9ucy5wcmlvcml0eSB8fCAwO1xuICAgIHRoaXMuYmluZCA9IG9wdGlvbnMuYmluZCB8fCBudWxsO1xuICAgIHRoaXMuaW52b2tlTGltaXQgPSBvcHRpb25zLmludm9rZUxpbWl0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1hdGNoaW5nIFtbUGF0aE5vZGVdXXNcbiAgICpcbiAgICogR2l2ZW4gYW4gYXJyYXkgb2YgW1tQYXRoTm9kZV1dcywgYW5kIGEgW1tIb29rTWF0Y2hDcml0ZXJpb25dXSwgcmV0dXJucyBhbiBhcnJheSBjb250YWluaW5nXG4gICAqIHRoZSBbW1BhdGhOb2RlXV1zIHRoYXQgdGhlIGNyaXRlcmlhIG1hdGNoZXMsIG9yIGBudWxsYCBpZiB0aGVyZSB3ZXJlIG5vIG1hdGNoaW5nIG5vZGVzLlxuICAgKlxuICAgKiBSZXR1cm5pbmcgYG51bGxgIGlzIHNpZ25pZmljYW50IHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gdGhlIGRlZmF1bHRcbiAgICogXCJtYXRjaC1hbGwgY3JpdGVyaW9uIHZhbHVlXCIgb2YgYHRydWVgIGNvbXBhcmVkIHRvIGEgYCgpID0+IHRydWVgIGZ1bmN0aW9uLFxuICAgKiB3aGVuIHRoZSBub2RlcyBpcyBhbiBlbXB0eSBhcnJheS5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VmdWwgdG8gYWxsb3cgYSB0cmFuc2l0aW9uIG1hdGNoIGNyaXRlcmlhIG9mIGBlbnRlcmluZzogdHJ1ZWBcbiAgICogdG8gc3RpbGwgbWF0Y2ggYSB0cmFuc2l0aW9uLCBldmVuIHdoZW4gYGVudGVyaW5nID09PSBbXWAuICBDb250cmFzdCB0aGF0XG4gICAqIHdpdGggYGVudGVyaW5nOiAoc3RhdGUpID0+IHRydWVgIHdoaWNoIG9ubHkgbWF0Y2hlcyB3aGVuIGEgc3RhdGUgaXMgYWN0dWFsbHlcbiAgICogYmVpbmcgZW50ZXJlZC5cbiAgICovXG4gIHByaXZhdGUgX21hdGNoaW5nTm9kZXMobm9kZXM6IFBhdGhOb2RlW10sIGNyaXRlcmlvbjogSG9va01hdGNoQ3JpdGVyaW9uKTogUGF0aE5vZGVbXSB7XG4gICAgaWYgKGNyaXRlcmlvbiA9PT0gdHJ1ZSkgcmV0dXJuIG5vZGVzO1xuICAgIGNvbnN0IG1hdGNoaW5nID0gbm9kZXMuZmlsdGVyKG5vZGUgPT4gbWF0Y2hTdGF0ZShub2RlLnN0YXRlLCBjcml0ZXJpb24pKTtcbiAgICByZXR1cm4gbWF0Y2hpbmcubGVuZ3RoID8gbWF0Y2hpbmcgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRlZmF1bHQgbWF0Y2ggY3JpdGVyaWEgKGFsbCBgdHJ1ZWApXG4gICAqXG4gICAqIFJldHVybnMgYW4gb2JqZWN0IHdoaWNoIGhhcyBhbGwgdGhlIGNyaXRlcmlhIG1hdGNoIHBhdGhzIGFzIGtleXMgYW5kIGB0cnVlYCBhcyB2YWx1ZXMsIGkuZS46XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICB0bzogdHJ1ZSxcbiAgICogICBmcm9tOiB0cnVlLFxuICAgKiAgIGVudGVyaW5nOiB0cnVlLFxuICAgKiAgIGV4aXRpbmc6IHRydWUsXG4gICAqICAgcmV0YWluZWQ6IHRydWUsXG4gICAqIH1cbiAgICovXG4gIHByaXZhdGUgX2dldERlZmF1bHRNYXRjaENyaXRlcmlhKCk6IEhvb2tNYXRjaENyaXRlcmlhIHtcbiAgICByZXR1cm4gbWFwT2JqKHRoaXMudHJhblN2Yy5fcGx1Z2luYXBpLl9nZXRQYXRoVHlwZXMoKSwgKCkgPT4gdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBtYXRjaGluZyBub2RlcyBhcyBbW0lNYXRjaGluZ05vZGVzXV1cbiAgICpcbiAgICogQ3JlYXRlIGEgSU1hdGNoaW5nTm9kZXMgb2JqZWN0IGZyb20gdGhlIFRyYW5zaXRpb25Ib29rVHlwZXMgdGhhdCBpcyByb3VnaGx5IGVxdWl2YWxlbnQgdG86XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGxldCBtYXRjaGVzOiBJTWF0Y2hpbmdOb2RlcyA9IHtcbiAgICogICB0bzogICAgICAgX21hdGNoaW5nTm9kZXMoW3RhaWwodHJlZUNoYW5nZXMudG8pXSwgICBtYy50byksXG4gICAqICAgZnJvbTogICAgIF9tYXRjaGluZ05vZGVzKFt0YWlsKHRyZWVDaGFuZ2VzLmZyb20pXSwgbWMuZnJvbSksXG4gICAqICAgZXhpdGluZzogIF9tYXRjaGluZ05vZGVzKHRyZWVDaGFuZ2VzLmV4aXRpbmcsICAgICAgbWMuZXhpdGluZyksXG4gICAqICAgcmV0YWluZWQ6IF9tYXRjaGluZ05vZGVzKHRyZWVDaGFuZ2VzLnJldGFpbmVkLCAgICAgbWMucmV0YWluZWQpLFxuICAgKiAgIGVudGVyaW5nOiBfbWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcy5lbnRlcmluZywgICAgIG1jLmVudGVyaW5nKSxcbiAgICogfTtcbiAgICogYGBgXG4gICAqL1xuICBwcml2YXRlIF9nZXRNYXRjaGluZ05vZGVzKHRyZWVDaGFuZ2VzOiBUcmVlQ2hhbmdlcyk6IElNYXRjaGluZ05vZGVzIHtcbiAgICBjb25zdCBjcml0ZXJpYSA9IGV4dGVuZCh0aGlzLl9nZXREZWZhdWx0TWF0Y2hDcml0ZXJpYSgpLCB0aGlzLm1hdGNoQ3JpdGVyaWEpO1xuICAgIGNvbnN0IHBhdGhzOiBQYXRoVHlwZVtdID0gdmFsdWVzKHRoaXMudHJhblN2Yy5fcGx1Z2luYXBpLl9nZXRQYXRoVHlwZXMoKSk7XG5cbiAgICByZXR1cm4gcGF0aHMucmVkdWNlKFxuICAgICAgKG1uOiBJTWF0Y2hpbmdOb2RlcywgcGF0aHR5cGU6IFBhdGhUeXBlKSA9PiB7XG4gICAgICAgIC8vIFNUQVRFIHNjb3BlIGNyaXRlcmlhIG1hdGNoZXMgYWdhaW5zdCBldmVyeSBub2RlIGluIHRoZSBwYXRoLlxuICAgICAgICAvLyBUUkFOU0lUSU9OIHNjb3BlIGNyaXRlcmlhIG1hdGNoZXMgYWdhaW5zdCBvbmx5IHRoZSBsYXN0IG5vZGUgaW4gdGhlIHBhdGhcbiAgICAgICAgY29uc3QgaXNTdGF0ZUhvb2sgPSBwYXRodHlwZS5zY29wZSA9PT0gVHJhbnNpdGlvbkhvb2tTY29wZS5TVEFURTtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRyZWVDaGFuZ2VzW3BhdGh0eXBlLm5hbWVdIHx8IFtdO1xuICAgICAgICBjb25zdCBub2RlczogUGF0aE5vZGVbXSA9IGlzU3RhdGVIb29rID8gcGF0aCA6IFt0YWlsKHBhdGgpXTtcblxuICAgICAgICBtbltwYXRodHlwZS5uYW1lXSA9IHRoaXMuX21hdGNoaW5nTm9kZXMobm9kZXMsIGNyaXRlcmlhW3BhdGh0eXBlLm5hbWVdKTtcbiAgICAgICAgcmV0dXJuIG1uO1xuICAgICAgfSxcbiAgICAgIHt9IGFzIElNYXRjaGluZ05vZGVzLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIGhvb2sncyBbW21hdGNoQ3JpdGVyaWFdXSBtYXRjaCB0aGUgZ2l2ZW4gW1tUcmVlQ2hhbmdlc11dXG4gICAqXG4gICAqIEByZXR1cm5zIGFuIElNYXRjaGluZ05vZGVzIG9iamVjdCwgb3IgbnVsbC4gSWYgYW4gSU1hdGNoaW5nTm9kZXMgb2JqZWN0IGlzIHJldHVybmVkLCBpdHMgdmFsdWVzXG4gICAqIGFyZSB0aGUgbWF0Y2hpbmcgW1tQYXRoTm9kZV1dcyBmb3IgZWFjaCBbW0hvb2tNYXRjaENyaXRlcmlvbl1dICh0bywgZnJvbSwgZXhpdGluZywgcmV0YWluZWQsIGVudGVyaW5nKVxuICAgKi9cbiAgbWF0Y2hlcyh0cmVlQ2hhbmdlczogVHJlZUNoYW5nZXMpOiBJTWF0Y2hpbmdOb2RlcyB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IHRoaXMuX2dldE1hdGNoaW5nTm9kZXModHJlZUNoYW5nZXMpO1xuXG4gICAgLy8gQ2hlY2sgaWYgYWxsIHRoZSBjcml0ZXJpYSBtYXRjaGVkIHRoZSBUcmVlQ2hhbmdlcyBvYmplY3RcbiAgICBjb25zdCBhbGxNYXRjaGVkID0gdmFsdWVzKG1hdGNoZXMpLmV2ZXJ5KGlkZW50aXR5KTtcbiAgICByZXR1cm4gYWxsTWF0Y2hlZCA/IG1hdGNoZXMgOiBudWxsO1xuICB9XG5cbiAgZGVyZWdpc3RlcigpIHtcbiAgICB0aGlzLnJlbW92ZUhvb2tGcm9tUmVnaXN0cnkodGhpcyk7XG4gICAgdGhpcy5fZGVyZWdpc3RlcmVkID0gdHJ1ZTtcbiAgfVxufVxuXG4vKiogQGhpZGRlbiBSZXR1cm4gYSByZWdpc3RyYXRpb24gZnVuY3Rpb24gb2YgdGhlIHJlcXVlc3RlZCB0eXBlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VFdmVudChcbiAgcmVnaXN0cnk6IElIb29rUmVnaXN0cnksXG4gIHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSxcbiAgZXZlbnRUeXBlOiBUcmFuc2l0aW9uRXZlbnRUeXBlLFxuKSB7XG4gIC8vIENyZWF0ZSB0aGUgb2JqZWN0IHdoaWNoIGhvbGRzIHRoZSByZWdpc3RlcmVkIHRyYW5zaXRpb24gaG9va3MuXG4gIGNvbnN0IF9yZWdpc3RlcmVkSG9va3MgPSAocmVnaXN0cnkuX3JlZ2lzdGVyZWRIb29rcyA9IHJlZ2lzdHJ5Ll9yZWdpc3RlcmVkSG9va3MgfHwge30pO1xuICBjb25zdCBob29rcyA9IChfcmVnaXN0ZXJlZEhvb2tzW2V2ZW50VHlwZS5uYW1lXSA9IFtdKTtcbiAgY29uc3QgcmVtb3ZlSG9va0ZuOiAoaG9vazogUmVnaXN0ZXJlZEhvb2spID0+IHZvaWQgPSByZW1vdmVGcm9tKGhvb2tzKTtcblxuICAvLyBDcmVhdGUgaG9vayByZWdpc3RyYXRpb24gZnVuY3Rpb24gb24gdGhlIElIb29rUmVnaXN0cnkgZm9yIHRoZSBldmVudFxuICByZWdpc3RyeVtldmVudFR5cGUubmFtZV0gPSBob29rUmVnaXN0cmF0aW9uRm47XG5cbiAgZnVuY3Rpb24gaG9va1JlZ2lzdHJhdGlvbkZuKG1hdGNoT2JqZWN0LCBjYWxsYmFjaywgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcmVnaXN0ZXJlZEhvb2sgPSBuZXcgUmVnaXN0ZXJlZEhvb2soXG4gICAgICB0cmFuc2l0aW9uU2VydmljZSxcbiAgICAgIGV2ZW50VHlwZSxcbiAgICAgIGNhbGxiYWNrLFxuICAgICAgbWF0Y2hPYmplY3QsXG4gICAgICByZW1vdmVIb29rRm4sXG4gICAgICBvcHRpb25zLFxuICAgICk7XG4gICAgaG9va3MucHVzaChyZWdpc3RlcmVkSG9vayk7XG4gICAgcmV0dXJuIHJlZ2lzdGVyZWRIb29rLmRlcmVnaXN0ZXIuYmluZChyZWdpc3RlcmVkSG9vayk7XG4gIH1cblxuICByZXR1cm4gaG9va1JlZ2lzdHJhdGlvbkZuO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3RyYW5zaXRpb24vaG9va1JlZ2lzdHJ5LnRzIiwiLyoqIEBtb2R1bGUgcGF0aCAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGV4dGVuZCwgYXBwbHlQYWlycywgZmluZCwgYWxsVHJ1ZVIsIHBhaXJzLCBhcnJheVR1cGxlcyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgcHJvcEVxIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFJhd1BhcmFtcyB9IGZyb20gJy4uL3BhcmFtcy9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgUmVzb2x2YWJsZSB9IGZyb20gJy4uL3Jlc29sdmUvcmVzb2x2YWJsZSc7XG5pbXBvcnQgeyBWaWV3Q29uZmlnIH0gZnJvbSAnLi4vdmlldy9pbnRlcmZhY2UnO1xuXG4vKipcbiAqIEBpbnRlcm5hbGFwaVxuICpcbiAqIEEgbm9kZSBpbiBhIFtbVHJlZUNoYW5nZXNdXSBwYXRoXG4gKlxuICogRm9yIGEgW1tUcmVlQ2hhbmdlc11dIHBhdGgsIHRoaXMgY2xhc3MgaG9sZHMgdGhlIHN0YXRlZnVsIGluZm9ybWF0aW9uIGZvciBhIHNpbmdsZSBub2RlIGluIHRoZSBwYXRoLlxuICogRWFjaCBQYXRoTm9kZSBjb3JyZXNwb25kcyB0byBhIHN0YXRlIGJlaW5nIGVudGVyZWQsIGV4aXRlZCwgb3IgcmV0YWluZWQuXG4gKiBUaGUgc3RhdGVmdWwgaW5mb3JtYXRpb24gaW5jbHVkZXMgcGFyYW1ldGVyIHZhbHVlcyBhbmQgcmVzb2x2ZSBkYXRhLlxuICovXG5leHBvcnQgY2xhc3MgUGF0aE5vZGUge1xuICAvKiogVGhlIHN0YXRlIGJlaW5nIGVudGVyZWQsIGV4aXRlZCwgb3IgcmV0YWluZWQgKi9cbiAgcHVibGljIHN0YXRlOiBTdGF0ZU9iamVjdDtcbiAgLyoqIFRoZSBwYXJhbWV0ZXJzIGRlY2xhcmVkIG9uIHRoZSBzdGF0ZSAqL1xuICBwdWJsaWMgcGFyYW1TY2hlbWE6IFBhcmFtW107XG4gIC8qKiBUaGUgcGFyYW1ldGVyIHZhbHVlcyB0aGF0IGJlbG9uZyB0byB0aGUgc3RhdGUgKi9cbiAgcHVibGljIHBhcmFtVmFsdWVzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKiogVGhlIGluZGl2aWR1YWwgKHN0YXRlZnVsKSByZXNvbHZhYmxlIG9iamVjdHMgdGhhdCBiZWxvbmcgdG8gdGhlIHN0YXRlICovXG4gIHB1YmxpYyByZXNvbHZhYmxlczogUmVzb2x2YWJsZVtdO1xuICAvKiogVGhlIHN0YXRlJ3MgZGVjbGFyZWQgdmlldyBjb25maWd1cmF0aW9uIG9iamVjdHMgKi9cbiAgcHVibGljIHZpZXdzOiBWaWV3Q29uZmlnW107XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjbG9uZSBvZiB0aGUgUGF0aE5vZGVcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGluc3RhbmNlIG1ldGhvZCBgbm9kZS5jbG9uZSgpYFxuICAgKi9cbiAgc3RhdGljIGNsb25lID0gKG5vZGU6IFBhdGhOb2RlKSA9PiBub2RlLmNsb25lKCk7XG5cbiAgLyoqIENyZWF0ZXMgYSBjb3B5IG9mIGEgUGF0aE5vZGUgKi9cbiAgY29uc3RydWN0b3Iobm9kZTogUGF0aE5vZGUpO1xuICAvKiogQ3JlYXRlcyBhIG5ldyAoZW1wdHkpIFBhdGhOb2RlIGZvciBhIFN0YXRlICovXG4gIGNvbnN0cnVjdG9yKHN0YXRlOiBTdGF0ZU9iamVjdCk7XG4gIGNvbnN0cnVjdG9yKHN0YXRlT3JOb2RlOiBhbnkpIHtcbiAgICBpZiAoc3RhdGVPck5vZGUgaW5zdGFuY2VvZiBQYXRoTm9kZSkge1xuICAgICAgY29uc3Qgbm9kZTogUGF0aE5vZGUgPSBzdGF0ZU9yTm9kZTtcbiAgICAgIHRoaXMuc3RhdGUgPSBub2RlLnN0YXRlO1xuICAgICAgdGhpcy5wYXJhbVNjaGVtYSA9IG5vZGUucGFyYW1TY2hlbWEuc2xpY2UoKTtcbiAgICAgIHRoaXMucGFyYW1WYWx1ZXMgPSBleHRlbmQoe30sIG5vZGUucGFyYW1WYWx1ZXMpO1xuICAgICAgdGhpcy5yZXNvbHZhYmxlcyA9IG5vZGUucmVzb2x2YWJsZXMuc2xpY2UoKTtcbiAgICAgIHRoaXMudmlld3MgPSBub2RlLnZpZXdzICYmIG5vZGUudmlld3Muc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3RhdGU6IFN0YXRlT2JqZWN0ID0gc3RhdGVPck5vZGU7XG4gICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLnBhcmFtU2NoZW1hID0gc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IGZhbHNlIH0pO1xuICAgICAgdGhpcy5wYXJhbVZhbHVlcyA9IHt9O1xuICAgICAgdGhpcy5yZXNvbHZhYmxlcyA9IHN0YXRlLnJlc29sdmFibGVzLm1hcChyZXMgPT4gcmVzLmNsb25lKCkpO1xuICAgIH1cbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgUGF0aE5vZGUodGhpcyk7XG4gIH1cblxuICAvKiogU2V0cyBbW3BhcmFtVmFsdWVzXV0gZm9yIHRoZSBub2RlLCBmcm9tIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0IGhhc2ggKi9cbiAgYXBwbHlSYXdQYXJhbXMocGFyYW1zOiBSYXdQYXJhbXMpOiBQYXRoTm9kZSB7XG4gICAgY29uc3QgZ2V0UGFyYW1WYWwgPSAocGFyYW1EZWY6IFBhcmFtKSA9PiBbcGFyYW1EZWYuaWQsIHBhcmFtRGVmLnZhbHVlKHBhcmFtc1twYXJhbURlZi5pZF0pXTtcbiAgICB0aGlzLnBhcmFtVmFsdWVzID0gdGhpcy5wYXJhbVNjaGVtYS5yZWR1Y2UoKG1lbW8sIHBEZWYpID0+IGFwcGx5UGFpcnMobWVtbywgZ2V0UGFyYW1WYWwocERlZikpLCB7fSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogR2V0cyBhIHNwZWNpZmljIFtbUGFyYW1dXSBtZXRhZGF0YSB0aGF0IGJlbG9uZ3MgdG8gdGhlIG5vZGUgKi9cbiAgcGFyYW1ldGVyKG5hbWU6IHN0cmluZyk6IFBhcmFtIHtcbiAgICByZXR1cm4gZmluZCh0aGlzLnBhcmFtU2NoZW1hLCBwcm9wRXEoJ2lkJywgbmFtZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHN0YXRlIGFuZCBwYXJhbWV0ZXIgdmFsdWVzIGZvciBhbm90aGVyIFBhdGhOb2RlIGFyZVxuICAgKiBlcXVhbCB0byB0aGUgc3RhdGUgYW5kIHBhcmFtIHZhbHVlcyBmb3IgdGhpcyBQYXRoTm9kZVxuICAgKi9cbiAgZXF1YWxzKG5vZGU6IFBhdGhOb2RlLCBwYXJhbXNGbj86IEdldFBhcmFtc0ZuKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZGlmZiA9IHRoaXMuZGlmZihub2RlLCBwYXJhbXNGbik7XG4gICAgcmV0dXJuIGRpZmYgJiYgZGlmZi5sZW5ndGggPT09IDA7XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgUGFyYW1zIHdpdGggZGlmZmVyZW50IHBhcmFtZXRlciB2YWx1ZXMgb24gYW5vdGhlciBQYXRoTm9kZS5cbiAgICpcbiAgICogR2l2ZW4gYW5vdGhlciBub2RlIChvZiB0aGUgc2FtZSBzdGF0ZSksIGZpbmRzIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIHdoaWNoIGRpZmZlci5cbiAgICogUmV0dXJucyB0aGUgW1tQYXJhbV1dIChzY2hlbWEgb2JqZWN0cykgd2hvc2UgcGFyYW1ldGVyIHZhbHVlcyBkaWZmZXIuXG4gICAqXG4gICAqIEdpdmVuIGFub3RoZXIgbm9kZSBmb3IgYSBkaWZmZXJlbnQgc3RhdGUsIHJldHVybnMgYGZhbHNlYFxuICAgKlxuICAgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byBjb21wYXJlIHRvXG4gICAqIEBwYXJhbSBwYXJhbXNGbiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB3aGljaCBwYXJhbWV0ZXJzIHNob3VsZCBiZSBjb21wYXJlZC5cbiAgICogQHJldHVybnMgVGhlIFtbUGFyYW1dXXMgd2hpY2ggZGlmZmVyLCBvciBudWxsIGlmIHRoZSB0d28gbm9kZXMgYXJlIGZvciBkaWZmZXJlbnQgc3RhdGVzXG4gICAqL1xuICBkaWZmKG5vZGU6IFBhdGhOb2RlLCBwYXJhbXNGbj86IEdldFBhcmFtc0ZuKTogUGFyYW1bXSB8IGZhbHNlIHtcbiAgICBpZiAodGhpcy5zdGF0ZSAhPT0gbm9kZS5zdGF0ZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgcGFyYW1zOiBQYXJhbVtdID0gcGFyYW1zRm4gPyBwYXJhbXNGbih0aGlzKSA6IHRoaXMucGFyYW1TY2hlbWE7XG4gICAgcmV0dXJuIFBhcmFtLmNoYW5nZWQocGFyYW1zLCB0aGlzLnBhcmFtVmFsdWVzLCBub2RlLnBhcmFtVmFsdWVzKTtcbiAgfVxufVxuXG4vKiogQGhpZGRlbiAqL1xuZXhwb3J0IHR5cGUgR2V0UGFyYW1zRm4gPSAocGF0aE5vZGU6IFBhdGhOb2RlKSA9PiBQYXJhbVtdO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3BhdGgvcGF0aE5vZGUudHMiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHBhcmFtc1xuICovXG4vKiogKi9cbmltcG9ydCB7IGV4dGVuZCwgZmlsdGVyLCBtYXAgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzQXJyYXksIGlzRGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFBhcmFtVHlwZURlZmluaXRpb24gfSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbi8qKlxuICogQW4gaW50ZXJuYWwgY2xhc3Mgd2hpY2ggaW1wbGVtZW50cyBbW1BhcmFtVHlwZURlZmluaXRpb25dXS5cbiAqXG4gKiBBIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dIGlzIGEgcGxhaW4gamF2YXNjcmlwdCBvYmplY3QgdXNlZCB0byByZWdpc3RlciBjdXN0b20gcGFyYW1ldGVyIHR5cGVzLlxuICogV2hlbiBhIHBhcmFtIHR5cGUgZGVmaW5pdGlvbiBpcyByZWdpc3RlcmVkLCBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGlzIGNyZWF0ZWQgaW50ZXJuYWxseS5cbiAqXG4gKiBUaGlzIGNsYXNzIGhhcyBuYWl2ZSBpbXBsZW1lbnRhdGlvbnMgZm9yIGFsbCB0aGUgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0gbWV0aG9kcy5cbiAqXG4gKiBVc2VkIGJ5IFtbVXJsTWF0Y2hlcl1dIHdoZW4gbWF0Y2hpbmcgb3IgZm9ybWF0dGluZyBVUkxzLCBvciBjb21wYXJpbmcgYW5kIHZhbGlkYXRpbmcgcGFyYW1ldGVyIHZhbHVlcy5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogdmFyIHBhcmFtVHlwZURlZiA9IHtcbiAqICAgZGVjb2RlOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHBhcnNlSW50KHZhbCwgMTApOyB9LFxuICogICBlbmNvZGU6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdmFsICYmIHZhbC50b1N0cmluZygpOyB9LFxuICogICBlcXVhbHM6IGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIHRoaXMuaXMoYSkgJiYgYSA9PT0gYjsgfSxcbiAqICAgaXM6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gYW5ndWxhci5pc051bWJlcih2YWwpICYmIGlzRmluaXRlKHZhbCkgJiYgdmFsICUgMSA9PT0gMDsgfSxcbiAqICAgcGF0dGVybjogL1xcZCsvXG4gKiB9XG4gKlxuICogdmFyIHBhcmFtVHlwZSA9IG5ldyBQYXJhbVR5cGUocGFyYW1UeXBlRGVmKTtcbiAqIGBgYFxuICogQGludGVybmFsYXBpXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXJhbVR5cGUgaW1wbGVtZW50cyBQYXJhbVR5cGVEZWZpbml0aW9uIHtcbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHBhdHRlcm46IFJlZ0V4cCA9IC8uKi87XG4gIC8qKiBUaGUgbmFtZS9pZCBvZiB0aGUgcGFyYW1ldGVyIHR5cGUgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgcmF3OiBib29sZWFuO1xuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZHluYW1pYzogYm9vbGVhbjtcbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGluaGVyaXQgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gZGVmICBBIGNvbmZpZ3VyYXRpb24gb2JqZWN0IHdoaWNoIGNvbnRhaW5zIHRoZSBjdXN0b20gdHlwZSBkZWZpbml0aW9uLiAgVGhlIG9iamVjdCdzXG4gICAqICAgICAgICBwcm9wZXJ0aWVzIHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgbWV0aG9kcyBhbmQvb3IgcGF0dGVybiBpbiBgUGFyYW1UeXBlYCdzIHB1YmxpYyBpbnRlcmZhY2UuXG4gICAqIEByZXR1cm5zIGEgbmV3IFBhcmFtVHlwZSBvYmplY3RcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlZjogUGFyYW1UeXBlRGVmaW5pdGlvbikge1xuICAgIGV4dGVuZCh0aGlzLCBkZWYpO1xuICB9XG5cbiAgLy8gY29uc2lkZXIgdGhlc2UgZm91ciBtZXRob2RzIHRvIGJlIFwiYWJzdHJhY3QgbWV0aG9kc1wiIHRoYXQgc2hvdWxkIGJlIG92ZXJyaWRkZW5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGlzKHZhbDogYW55LCBrZXk/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZW5jb2RlKHZhbDogYW55LCBrZXk/OiBzdHJpbmcpOiBzdHJpbmcgfCBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZGVjb2RlKHZhbDogc3RyaW5nLCBrZXk/OiBzdHJpbmcpOiBhbnkge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGVxdWFscyhhOiBhbnksIGI6IGFueSk6IGJvb2xlYW4ge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0cmlwbGUtZXF1YWxzXG4gICAgcmV0dXJuIGEgPT0gYjtcbiAgfVxuXG4gICRzdWJQYXR0ZXJuKCkge1xuICAgIGNvbnN0IHN1YiA9IHRoaXMucGF0dGVybi50b1N0cmluZygpO1xuICAgIHJldHVybiBzdWIuc3Vic3RyKDEsIHN1Yi5sZW5ndGggLSAyKTtcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBge1BhcmFtVHlwZToke3RoaXMubmFtZX19YDtcbiAgfVxuXG4gIC8qKiBHaXZlbiBhbiBlbmNvZGVkIHN0cmluZywgb3IgYSBkZWNvZGVkIG9iamVjdCwgcmV0dXJucyBhIGRlY29kZWQgb2JqZWN0ICovXG4gICRub3JtYWxpemUodmFsOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy5pcyh2YWwpID8gdmFsIDogdGhpcy5kZWNvZGUodmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcmFwcyBhbiBleGlzdGluZyBjdXN0b20gUGFyYW1UeXBlIGFzIGFuIGFycmF5IG9mIFBhcmFtVHlwZSwgZGVwZW5kaW5nIG9uICdtb2RlJy5cbiAgICogZS5nLjpcbiAgICogLSB1cmxtYXRjaGVyIHBhdHRlcm4gXCIvcGF0aD97cXVlcnlQYXJhbVtdOmludH1cIlxuICAgKiAtIHVybDogXCIvcGF0aD9xdWVyeVBhcmFtPTEmcXVlcnlQYXJhbT0yXG4gICAqIC0gJHN0YXRlUGFyYW1zLnF1ZXJ5UGFyYW0gd2lsbCBiZSBbMSwgMl1cbiAgICogaWYgYG1vZGVgIGlzIFwiYXV0b1wiLCB0aGVuXG4gICAqIC0gdXJsOiBcIi9wYXRoP3F1ZXJ5UGFyYW09MSB3aWxsIGNyZWF0ZSAkc3RhdGVQYXJhbXMucXVlcnlQYXJhbTogMVxuICAgKiAtIHVybDogXCIvcGF0aD9xdWVyeVBhcmFtPTEmcXVlcnlQYXJhbT0yIHdpbGwgY3JlYXRlICRzdGF0ZVBhcmFtcy5xdWVyeVBhcmFtOiBbMSwgMl1cbiAgICovXG4gICRhc0FycmF5KG1vZGU6IGJvb2xlYW4gfCAnYXV0bycsIGlzU2VhcmNoOiBib29sZWFuKSB7XG4gICAgaWYgKCFtb2RlKSByZXR1cm4gdGhpcztcbiAgICBpZiAobW9kZSA9PT0gJ2F1dG8nICYmICFpc1NlYXJjaCkgdGhyb3cgbmV3IEVycm9yKFwiJ2F1dG8nIGFycmF5IG1vZGUgaXMgZm9yIHF1ZXJ5IHBhcmFtZXRlcnMgb25seVwiKTtcbiAgICByZXR1cm4gbmV3ICg8YW55PkFycmF5VHlwZSkodGhpcywgbW9kZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBXcmFwcyB1cCBhIGBQYXJhbVR5cGVgIG9iamVjdCB0byBoYW5kbGUgYXJyYXkgdmFsdWVzLlxuICogQGludGVybmFsYXBpXG4gKi9cbmZ1bmN0aW9uIEFycmF5VHlwZSh0eXBlOiBQYXJhbVR5cGUsIG1vZGU6IGJvb2xlYW4gfCAnYXV0bycpIHtcbiAgLy8gV3JhcCBub24tYXJyYXkgdmFsdWUgYXMgYXJyYXlcbiAgZnVuY3Rpb24gYXJyYXlXcmFwKHZhbDogYW55KTogYW55W10ge1xuICAgIHJldHVybiBpc0FycmF5KHZhbCkgPyB2YWwgOiBpc0RlZmluZWQodmFsKSA/IFt2YWxdIDogW107XG4gIH1cblxuICAvLyBVbndyYXAgYXJyYXkgdmFsdWUgZm9yIFwiYXV0b1wiIG1vZGUuIFJldHVybiB1bmRlZmluZWQgZm9yIGVtcHR5IGFycmF5LlxuICBmdW5jdGlvbiBhcnJheVVud3JhcCh2YWw6IGFueSkge1xuICAgIHN3aXRjaCAodmFsLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gbW9kZSA9PT0gJ2F1dG8nID8gdmFsWzBdIDogdmFsO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gIH1cblxuICAvLyBXcmFwcyB0eXBlICguaXMvLmVuY29kZS8uZGVjb2RlKSBmdW5jdGlvbnMgdG8gb3BlcmF0ZSBvbiBlYWNoIHZhbHVlIG9mIGFuIGFycmF5XG4gIGZ1bmN0aW9uIGFycmF5SGFuZGxlcihjYWxsYmFjazogKHg6IGFueSkgPT4gYW55LCBhbGxUcnV0aHlNb2RlPzogYm9vbGVhbikge1xuICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVBcnJheSh2YWw6IGFueSkge1xuICAgICAgaWYgKGlzQXJyYXkodmFsKSAmJiB2YWwubGVuZ3RoID09PSAwKSByZXR1cm4gdmFsO1xuICAgICAgY29uc3QgYXJyID0gYXJyYXlXcmFwKHZhbCk7XG4gICAgICBjb25zdCByZXN1bHQgPSBtYXAoYXJyLCBjYWxsYmFjayk7XG4gICAgICByZXR1cm4gYWxsVHJ1dGh5TW9kZSA9PT0gdHJ1ZSA/IGZpbHRlcihyZXN1bHQsIHggPT4gIXgpLmxlbmd0aCA9PT0gMCA6IGFycmF5VW53cmFwKHJlc3VsdCk7XG4gICAgfTtcbiAgfVxuXG4gIC8vIFdyYXBzIHR5cGUgKC5lcXVhbHMpIGZ1bmN0aW9ucyB0byBvcGVyYXRlIG9uIGVhY2ggdmFsdWUgb2YgYW4gYXJyYXlcbiAgZnVuY3Rpb24gYXJyYXlFcXVhbHNIYW5kbGVyKGNhbGxiYWNrOiAobDogYW55LCByOiBhbnkpID0+IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlQXJyYXkodmFsMTogYW55LCB2YWwyOiBhbnkpIHtcbiAgICAgIGNvbnN0IGxlZnQgPSBhcnJheVdyYXAodmFsMSksXG4gICAgICAgIHJpZ2h0ID0gYXJyYXlXcmFwKHZhbDIpO1xuICAgICAgaWYgKGxlZnQubGVuZ3RoICE9PSByaWdodC5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVmdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWNhbGxiYWNrKGxlZnRbaV0sIHJpZ2h0W2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgfVxuXG4gIFsnZW5jb2RlJywgJ2RlY29kZScsICdlcXVhbHMnLCAnJG5vcm1hbGl6ZSddLmZvckVhY2gobmFtZSA9PiB7XG4gICAgY29uc3QgcGFyYW1UeXBlRm4gPSB0eXBlW25hbWVdLmJpbmQodHlwZSk7XG4gICAgY29uc3Qgd3JhcHBlckZuOiBGdW5jdGlvbiA9IG5hbWUgPT09ICdlcXVhbHMnID8gYXJyYXlFcXVhbHNIYW5kbGVyIDogYXJyYXlIYW5kbGVyO1xuICAgIHRoaXNbbmFtZV0gPSB3cmFwcGVyRm4ocGFyYW1UeXBlRm4pO1xuICB9KTtcblxuICBleHRlbmQodGhpcywge1xuICAgIGR5bmFtaWM6IHR5cGUuZHluYW1pYyxcbiAgICBuYW1lOiB0eXBlLm5hbWUsXG4gICAgcGF0dGVybjogdHlwZS5wYXR0ZXJuLFxuICAgIGluaGVyaXQ6IHR5cGUuaW5oZXJpdCxcbiAgICBpczogYXJyYXlIYW5kbGVyKHR5cGUuaXMuYmluZCh0eXBlKSwgdHJ1ZSksXG4gICAgJGFycmF5TW9kZTogbW9kZSxcbiAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvcGFyYW1zL3BhcmFtVHlwZS50cyIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdHJhbnNpdGlvblxuICovXG4vKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7XG4gIElIb29rUmVnaXN0cnksXG4gIFRyYW5zaXRpb25PcHRpb25zLFxuICBUcmFuc2l0aW9uSG9va1Njb3BlLFxuICBUcmFuc2l0aW9uSG9va1BoYXNlLFxuICBUcmFuc2l0aW9uQ3JlYXRlSG9va0ZuLFxuICBIb29rTWF0Y2hDcml0ZXJpYSxcbiAgSG9va1JlZ09wdGlvbnMsXG4gIFBhdGhUeXBlcyxcbiAgUGF0aFR5cGUsXG4gIFJlZ2lzdGVyZWRIb29rcyxcbiAgVHJhbnNpdGlvbkhvb2tGbixcbiAgVHJhbnNpdGlvblN0YXRlSG9va0ZuLFxufSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi90cmFuc2l0aW9uJztcbmltcG9ydCB7IG1ha2VFdmVudCwgUmVnaXN0ZXJlZEhvb2sgfSBmcm9tICcuL2hvb2tSZWdpc3RyeSc7XG5pbXBvcnQgeyBUYXJnZXRTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3RhcmdldFN0YXRlJztcbmltcG9ydCB7IFBhdGhOb2RlIH0gZnJvbSAnLi4vcGF0aC9wYXRoTm9kZSc7XG5pbXBvcnQgeyBWaWV3U2VydmljZSB9IGZyb20gJy4uL3ZpZXcvdmlldyc7XG5pbXBvcnQgeyBVSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5pbXBvcnQgeyByZWdpc3RlckFkZENvcmVSZXNvbHZhYmxlcywgdHJlZUNoYW5nZXNDbGVhbnVwIH0gZnJvbSAnLi4vaG9va3MvY29yZVJlc29sdmFibGVzJztcbmltcG9ydCB7IHJlZ2lzdGVyUmVkaXJlY3RUb0hvb2sgfSBmcm9tICcuLi9ob29rcy9yZWRpcmVjdFRvJztcbmltcG9ydCB7IHJlZ2lzdGVyT25FeGl0SG9vaywgcmVnaXN0ZXJPblJldGFpbkhvb2ssIHJlZ2lzdGVyT25FbnRlckhvb2sgfSBmcm9tICcuLi9ob29rcy9vbkVudGVyRXhpdFJldGFpbic7XG5pbXBvcnQgeyByZWdpc3RlckVhZ2VyUmVzb2x2ZVBhdGgsIHJlZ2lzdGVyTGF6eVJlc29sdmVTdGF0ZSwgcmVnaXN0ZXJSZXNvbHZlUmVtYWluaW5nIH0gZnJvbSAnLi4vaG9va3MvcmVzb2x2ZSc7XG5pbXBvcnQgeyByZWdpc3RlckxvYWRFbnRlcmluZ1ZpZXdzLCByZWdpc3RlckFjdGl2YXRlVmlld3MgfSBmcm9tICcuLi9ob29rcy92aWV3cyc7XG5pbXBvcnQgeyByZWdpc3RlclVwZGF0ZUdsb2JhbFN0YXRlIH0gZnJvbSAnLi4vaG9va3MvdXBkYXRlR2xvYmFscyc7XG5pbXBvcnQgeyByZWdpc3RlclVwZGF0ZVVybCB9IGZyb20gJy4uL2hvb2tzL3VybCc7XG5pbXBvcnQgeyByZWdpc3RlckxhenlMb2FkSG9vayB9IGZyb20gJy4uL2hvb2tzL2xhenlMb2FkJztcbmltcG9ydCB7IFRyYW5zaXRpb25FdmVudFR5cGUgfSBmcm9tICcuL3RyYW5zaXRpb25FdmVudFR5cGUnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2ssIEdldFJlc3VsdEhhbmRsZXIsIEdldEVycm9ySGFuZGxlciB9IGZyb20gJy4vdHJhbnNpdGlvbkhvb2snO1xuaW1wb3J0IHsgaXNEZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgcmVtb3ZlRnJvbSwgdmFsdWVzLCBjcmVhdGVQcm94eUZ1bmN0aW9ucyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7IC8vIGhhcyBvciBpcyB1c2luZ1xuaW1wb3J0IHsgdmFsIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyByZWdpc3Rlcklnbm9yZWRUcmFuc2l0aW9uSG9vayB9IGZyb20gJy4uL2hvb2tzL2lnbm9yZWRUcmFuc2l0aW9uJztcbmltcG9ydCB7IHJlZ2lzdGVySW52YWxpZFRyYW5zaXRpb25Ib29rIH0gZnJvbSAnLi4vaG9va3MvaW52YWxpZFRyYW5zaXRpb24nO1xuXG4vKipcbiAqIFRoZSBkZWZhdWx0IFtbVHJhbnNpdGlvbl1dIG9wdGlvbnMuXG4gKlxuICogSW5jbHVkZSB0aGlzIG9iamVjdCB3aGVuIGFwcGx5aW5nIGN1c3RvbSBkZWZhdWx0czpcbiAqIGxldCByZWxvYWRPcHRzID0geyByZWxvYWQ6IHRydWUsIG5vdGlmeTogdHJ1ZSB9XG4gKiBsZXQgb3B0aW9ucyA9IGRlZmF1bHRzKHRoZWlyT3B0cywgY3VzdG9tRGVmYXVsdHMsIGRlZmF1bHRPcHRpb25zKTtcbiAqL1xuZXhwb3J0IGxldCBkZWZhdWx0VHJhbnNPcHRzOiBUcmFuc2l0aW9uT3B0aW9ucyA9IHtcbiAgbG9jYXRpb246IHRydWUsXG4gIHJlbGF0aXZlOiBudWxsLFxuICBpbmhlcml0OiBmYWxzZSxcbiAgbm90aWZ5OiB0cnVlLFxuICByZWxvYWQ6IGZhbHNlLFxuICBjdXN0b206IHt9LFxuICBjdXJyZW50OiAoKSA9PiBudWxsLFxuICBzb3VyY2U6ICd1bmtub3duJyxcbn07XG5cbi8qKlxuICogUGx1Z2luIEFQSSBmb3IgVHJhbnNpdGlvbiBTZXJ2aWNlXG4gKiBAaW50ZXJuYWxhcGlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmFuc2l0aW9uU2VydmljZVBsdWdpbkFQSSB7XG4gIC8qKlxuICAgKiBBZGRzIGEgUGF0aCB0byBiZSB1c2VkIGFzIGEgY3JpdGVyaW9uIGFnYWluc3QgYSBUcmVlQ2hhbmdlcyBwYXRoXG4gICAqXG4gICAqIEZvciBleGFtcGxlOiB0aGUgYGV4aXRpbmdgIHBhdGggaW4gW1tIb29rTWF0Y2hDcml0ZXJpYV1dIGlzIGEgU1RBVEUgc2NvcGVkIHBhdGguXG4gICAqIEl0IHdhcyBkZWZpbmVkIGJ5IGNhbGxpbmcgYGRlZmluZVRyZWVDaGFuZ2VzQ3JpdGVyaW9uKCdleGl0aW5nJywgVHJhbnNpdGlvbkhvb2tTY29wZS5TVEFURSlgXG4gICAqIEVhY2ggc3RhdGUgaW4gdGhlIGV4aXRpbmcgcGF0aCBpcyBjaGVja2VkIGFnYWluc3QgdGhlIGNyaXRlcmlhIGFuZCByZXR1cm5lZCBhcyBwYXJ0IG9mIHRoZSBtYXRjaC5cbiAgICpcbiAgICogQW5vdGhlciBleGFtcGxlOiB0aGUgYHRvYCBwYXRoIGluIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBpcyBhIFRSQU5TSVRJT04gc2NvcGVkIHBhdGguXG4gICAqIEl0IHdhcyBkZWZpbmVkIGJ5IGNhbGxpbmcgYGRlZmluZVRyZWVDaGFuZ2VzQ3JpdGVyaW9uKCd0bycsIFRyYW5zaXRpb25Ib29rU2NvcGUuVFJBTlNJVElPTilgXG4gICAqIE9ubHkgdGhlIHRhaWwgb2YgdGhlIGB0b2AgcGF0aCBpcyBjaGVja2VkIGFnYWluc3QgdGhlIGNyaXRlcmlhIGFuZCByZXR1cm5lZCBhcyBwYXJ0IG9mIHRoZSBtYXRjaC5cbiAgICovXG4gIF9kZWZpbmVQYXRoVHlwZShuYW1lOiBzdHJpbmcsIGhvb2tTY29wZTogVHJhbnNpdGlvbkhvb2tTY29wZSk7XG5cbiAgLyoqXG4gICAqIEdldHMgYSBQYXRoIGRlZmluaXRpb24gdXNlZCBhcyBhIGNyaXRlcmlvbiBhZ2FpbnN0IGEgVHJlZUNoYW5nZXMgcGF0aFxuICAgKi9cbiAgX2dldFBhdGhUeXBlcygpOiBQYXRoVHlwZXM7XG5cbiAgLyoqXG4gICAqIERlZmluZXMgYSB0cmFuc2l0aW9uIGhvb2sgdHlwZSBhbmQgcmV0dXJucyBhIHRyYW5zaXRpb24gaG9vayByZWdpc3RyYXRpb25cbiAgICogZnVuY3Rpb24gKHdoaWNoIGNhbiB0aGVuIGJlIHVzZWQgdG8gcmVnaXN0ZXIgaG9va3Mgb2YgdGhpcyB0eXBlKS5cbiAgICovXG4gIF9kZWZpbmVFdmVudChcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgaG9va1BoYXNlOiBUcmFuc2l0aW9uSG9va1BoYXNlLFxuICAgIGhvb2tPcmRlcjogbnVtYmVyLFxuICAgIGNyaXRlcmlhTWF0Y2hQYXRoOiBQYXRoVHlwZSxcbiAgICByZXZlcnNlU29ydD86IGJvb2xlYW4sXG4gICAgZ2V0UmVzdWx0SGFuZGxlcj86IEdldFJlc3VsdEhhbmRsZXIsXG4gICAgZ2V0RXJyb3JIYW5kbGVyPzogR2V0RXJyb3JIYW5kbGVyLFxuICAgIHJlamVjdElmU3VwZXJzZWRlZD86IGJvb2xlYW4sXG4gICk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGtub3duIGV2ZW50IHR5cGVzLCBzdWNoIGFzIGBvbkJlZm9yZWBcbiAgICogSWYgYSBwaGFzZSBhcmd1bWVudCBpcyBwcm92aWRlZCwgcmV0dXJucyBvbmx5IGV2ZW50cyBmb3IgdGhlIGdpdmVuIHBoYXNlLlxuICAgKi9cbiAgX2dldEV2ZW50cyhwaGFzZT86IFRyYW5zaXRpb25Ib29rUGhhc2UpOiBUcmFuc2l0aW9uRXZlbnRUeXBlW107XG5cbiAgLyoqIFJldHVybnMgdGhlIGhvb2tzIHJlZ2lzdGVyZWQgZm9yIHRoZSBnaXZlbiBob29rIG5hbWUgKi9cbiAgZ2V0SG9va3MoaG9va05hbWU6IHN0cmluZyk6IFJlZ2lzdGVyZWRIb29rW107XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBwcm92aWRlcyBzZXJ2aWNlcyByZWxhdGVkIHRvIFRyYW5zaXRpb25zLlxuICpcbiAqIC0gTW9zdCBpbXBvcnRhbnRseSwgaXQgYWxsb3dzIGdsb2JhbCBUcmFuc2l0aW9uIEhvb2tzIHRvIGJlIHJlZ2lzdGVyZWQuXG4gKiAtIEl0IGFsbG93cyB0aGUgZGVmYXVsdCB0cmFuc2l0aW9uIGVycm9yIGhhbmRsZXIgdG8gYmUgc2V0LlxuICogLSBJdCBhbHNvIGhhcyBhIGZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBbW1RyYW5zaXRpb25dXSBvYmplY3RzLCAodXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBbW1N0YXRlU2VydmljZV1dKS5cbiAqXG4gKiBBdCBib290c3RyYXAsIFtbVUlSb3V0ZXJdXSBjcmVhdGVzIGEgc2luZ2xlIGluc3RhbmNlIChzaW5nbGV0b24pIG9mIHRoaXMgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2l0aW9uU2VydmljZSBpbXBsZW1lbnRzIElIb29rUmVnaXN0cnksIERpc3Bvc2FibGUge1xuICAvKiogQGhpZGRlbiAqL1xuICBfdHJhbnNpdGlvbkNvdW50ID0gMDtcblxuICAvKiogQGhpZGRlbiAqL1xuICBwdWJsaWMgJHZpZXc6IFZpZXdTZXJ2aWNlO1xuXG4gIC8qKiBAaGlkZGVuIFRoZSB0cmFuc2l0aW9uIGhvb2sgdHlwZXMsIHN1Y2ggYXMgYG9uRW50ZXJgLCBgb25TdGFydGAsIGV0YyAqL1xuICBwcml2YXRlIF9ldmVudFR5cGVzOiBUcmFuc2l0aW9uRXZlbnRUeXBlW10gPSBbXTtcbiAgLyoqIEBoaWRkZW4gVGhlIHJlZ2lzdGVyZWQgdHJhbnNpdGlvbiBob29rcyAqL1xuICBfcmVnaXN0ZXJlZEhvb2tzID0ge30gYXMgUmVnaXN0ZXJlZEhvb2tzO1xuICAvKiogQGhpZGRlbiBUaGUgIHBhdGhzIG9uIGEgY3JpdGVyaWEgb2JqZWN0ICovXG4gIHByaXZhdGUgX2NyaXRlcmlhUGF0aHMgPSB7fSBhcyBQYXRoVHlwZXM7XG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX3JvdXRlcjogVUlSb3V0ZXI7XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICBfcGx1Z2luYXBpOiBUcmFuc2l0aW9uU2VydmljZVBsdWdpbkFQSTtcblxuICAvKipcbiAgICogVGhpcyBvYmplY3QgaGFzIGhvb2sgZGUtcmVnaXN0cmF0aW9uIGZ1bmN0aW9ucyBmb3IgdGhlIGJ1aWx0LWluIGhvb2tzLlxuICAgKiBUaGlzIGNhbiBiZSB1c2VkIGJ5IHRoaXJkIHBhcnRpZXMgbGlicmFyaWVzIHRoYXQgd2lzaCB0byBjdXN0b21pemUgdGhlIGJlaGF2aW9yc1xuICAgKlxuICAgKiBAaGlkZGVuXG4gICAqL1xuICBfZGVyZWdpc3Rlckhvb2tGbnM6IHtcbiAgICBhZGRDb3JlUmVzb2x2ZXM6IEZ1bmN0aW9uO1xuICAgIGlnbm9yZWQ6IEZ1bmN0aW9uO1xuICAgIGludmFsaWQ6IEZ1bmN0aW9uO1xuICAgIHJlZGlyZWN0VG86IEZ1bmN0aW9uO1xuICAgIG9uRXhpdDogRnVuY3Rpb247XG4gICAgb25SZXRhaW46IEZ1bmN0aW9uO1xuICAgIG9uRW50ZXI6IEZ1bmN0aW9uO1xuICAgIGVhZ2VyUmVzb2x2ZTogRnVuY3Rpb247XG4gICAgbGF6eVJlc29sdmU6IEZ1bmN0aW9uO1xuICAgIHJlc29sdmVBbGw6IEZ1bmN0aW9uO1xuICAgIGxvYWRWaWV3czogRnVuY3Rpb247XG4gICAgYWN0aXZhdGVWaWV3czogRnVuY3Rpb247XG4gICAgdXBkYXRlR2xvYmFsczogRnVuY3Rpb247XG4gICAgdXBkYXRlVXJsOiBGdW5jdGlvbjtcbiAgICBsYXp5TG9hZDogRnVuY3Rpb247XG4gIH07XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgY29uc3RydWN0b3IoX3JvdXRlcjogVUlSb3V0ZXIpIHtcbiAgICB0aGlzLl9yb3V0ZXIgPSBfcm91dGVyO1xuICAgIHRoaXMuJHZpZXcgPSBfcm91dGVyLnZpZXdTZXJ2aWNlO1xuICAgIHRoaXMuX2RlcmVnaXN0ZXJIb29rRm5zID0gPGFueT57fTtcbiAgICB0aGlzLl9wbHVnaW5hcGkgPSA8VHJhbnNpdGlvblNlcnZpY2VQbHVnaW5BUEk+Y3JlYXRlUHJveHlGdW5jdGlvbnModmFsKHRoaXMpLCB7fSwgdmFsKHRoaXMpLCBbXG4gICAgICAnX2RlZmluZVBhdGhUeXBlJyxcbiAgICAgICdfZGVmaW5lRXZlbnQnLFxuICAgICAgJ19nZXRQYXRoVHlwZXMnLFxuICAgICAgJ19nZXRFdmVudHMnLFxuICAgICAgJ2dldEhvb2tzJyxcbiAgICBdKTtcblxuICAgIHRoaXMuX2RlZmluZUNvcmVQYXRocygpO1xuICAgIHRoaXMuX2RlZmluZUNvcmVFdmVudHMoKTtcbiAgICB0aGlzLl9yZWdpc3RlckNvcmVUcmFuc2l0aW9uSG9va3MoKTtcbiAgICBfcm91dGVyLmdsb2JhbHMuc3VjY2Vzc2Z1bFRyYW5zaXRpb25zLm9uRXZpY3QodHJlZUNoYW5nZXNDbGVhbnVwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBbW1RyYW5zaXRpb25Ib29rRm5dXSwgY2FsbGVkICp3aGlsZSBhIHRyYW5zaXRpb24gaXMgYmVpbmcgY29uc3RydWN0ZWQqLlxuICAgKlxuICAgKiBSZWdpc3RlcnMgYSB0cmFuc2l0aW9uIGxpZmVjeWNsZSBob29rLCB3aGljaCBpcyBpbnZva2VkIGR1cmluZyB0cmFuc2l0aW9uIGNvbnN0cnVjdGlvbi5cbiAgICpcbiAgICogVGhpcyBsb3cgbGV2ZWwgaG9vayBzaG91bGQgb25seSBiZSB1c2VkIGJ5IHBsdWdpbnMuXG4gICAqIFRoaXMgY2FuIGJlIGEgdXNlZnVsIHRpbWUgZm9yIHBsdWdpbnMgdG8gYWRkIHJlc29sdmVzIG9yIG11dGF0ZSB0aGUgdHJhbnNpdGlvbiBhcyBuZWVkZWQuXG4gICAqIFRoZSBTdGlja3kgU3RhdGVzIHBsdWdpbiB1c2VzIHRoaXMgaG9vayB0byBtb2RpZnkgdGhlIHRyZWVjaGFuZ2VzLlxuICAgKlxuICAgKiAjIyMgTGlmZWN5Y2xlXG4gICAqXG4gICAqIGBvbkNyZWF0ZWAgaG9va3MgYXJlIGludm9rZWQgKndoaWxlIGEgdHJhbnNpdGlvbiBpcyBiZWluZyBjb25zdHJ1Y3RlZCouXG4gICAqXG4gICAqICMjIyBSZXR1cm4gdmFsdWVcbiAgICpcbiAgICogVGhlIGhvb2sncyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZFxuICAgKlxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICogQHBhcmFtIGNyaXRlcmlhIGRlZmluZXMgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIEhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGhvb2sgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBpbnZva2VkLlxuICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgcmVnaXN0cmF0aW9uIG9wdGlvbnNcbiAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgaG9vay5cbiAgICovXG4gIG9uQ3JlYXRlKGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25DcmVhdGVIb29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uQmVmb3JlKGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25Ib29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uU3RhcnQoY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25FeGl0KGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25SZXRhaW4oY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvblN0YXRlSG9va0ZuLCBvcHRpb25zPzogSG9va1JlZ09wdGlvbnMpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBvbkVudGVyKGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25GaW5pc2goY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgb25TdWNjZXNzKGNyaXRlcmlhOiBIb29rTWF0Y2hDcml0ZXJpYSwgY2FsbGJhY2s6IFRyYW5zaXRpb25Ib29rRm4sIG9wdGlvbnM/OiBIb29rUmVnT3B0aW9ucyk6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uRXJyb3IoY3JpdGVyaWE6IEhvb2tNYXRjaENyaXRlcmlhLCBjYWxsYmFjazogVHJhbnNpdGlvbkhvb2tGbiwgb3B0aW9ucz86IEhvb2tSZWdPcHRpb25zKTogRnVuY3Rpb24ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBkaXNwb3NlXG4gICAqIEBpbnRlcm5hbGFwaVxuICAgKi9cbiAgZGlzcG9zZShyb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgdmFsdWVzKHRoaXMuX3JlZ2lzdGVyZWRIb29rcykuZm9yRWFjaCgoaG9va3NBcnJheTogUmVnaXN0ZXJlZEhvb2tbXSkgPT5cbiAgICAgIGhvb2tzQXJyYXkuZm9yRWFjaChob29rID0+IHtcbiAgICAgICAgaG9vay5fZGVyZWdpc3RlcmVkID0gdHJ1ZTtcbiAgICAgICAgcmVtb3ZlRnJvbShob29rc0FycmF5LCBob29rKTtcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBbW1RyYW5zaXRpb25dXSBvYmplY3RcbiAgICpcbiAgICogVGhpcyBpcyBhIGZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBUcmFuc2l0aW9uIG9iamVjdHMuXG4gICAqIEl0IGlzIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgW1tTdGF0ZVNlcnZpY2VdXSBhbmQgc2hvdWxkIGdlbmVyYWxseSBub3QgYmUgY2FsbGVkIGJ5IGFwcGxpY2F0aW9uIGNvZGUuXG4gICAqXG4gICAqIEBwYXJhbSBmcm9tUGF0aCB0aGUgcGF0aCB0byB0aGUgY3VycmVudCBzdGF0ZSAodGhlIGZyb20gc3RhdGUpXG4gICAqIEBwYXJhbSB0YXJnZXRTdGF0ZSB0aGUgdGFyZ2V0IHN0YXRlIChkZXN0aW5hdGlvbilcbiAgICogQHJldHVybnMgYSBUcmFuc2l0aW9uXG4gICAqL1xuICBjcmVhdGUoZnJvbVBhdGg6IFBhdGhOb2RlW10sIHRhcmdldFN0YXRlOiBUYXJnZXRTdGF0ZSk6IFRyYW5zaXRpb24ge1xuICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihmcm9tUGF0aCwgdGFyZ2V0U3RhdGUsIHRoaXMuX3JvdXRlcik7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9kZWZpbmVDb3JlRXZlbnRzKCkge1xuICAgIGNvbnN0IFBoYXNlID0gVHJhbnNpdGlvbkhvb2tQaGFzZTtcbiAgICBjb25zdCBUSCA9IFRyYW5zaXRpb25Ib29rO1xuICAgIGNvbnN0IHBhdGhzID0gdGhpcy5fY3JpdGVyaWFQYXRocztcbiAgICBjb25zdCBOT1JNQUxfU09SVCA9IGZhbHNlLFxuICAgICAgUkVWRVJTRV9TT1JUID0gdHJ1ZTtcbiAgICBjb25zdCBTWU5DSFJPTk9VUyA9IHRydWU7XG5cbiAgICB0aGlzLl9kZWZpbmVFdmVudChcbiAgICAgICdvbkNyZWF0ZScsXG4gICAgICBQaGFzZS5DUkVBVEUsXG4gICAgICAwLFxuICAgICAgcGF0aHMudG8sXG4gICAgICBOT1JNQUxfU09SVCxcbiAgICAgIFRILkxPR19SRUpFQ1RFRF9SRVNVTFQsXG4gICAgICBUSC5USFJPV19FUlJPUixcbiAgICAgIFNZTkNIUk9OT1VTLFxuICAgICk7XG5cbiAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25CZWZvcmUnLCBQaGFzZS5CRUZPUkUsIDAsIHBhdGhzLnRvKTtcblxuICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvblN0YXJ0JywgUGhhc2UuUlVOLCAwLCBwYXRocy50byk7XG4gICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uRXhpdCcsIFBoYXNlLlJVTiwgMTAwLCBwYXRocy5leGl0aW5nLCBSRVZFUlNFX1NPUlQpO1xuICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvblJldGFpbicsIFBoYXNlLlJVTiwgMjAwLCBwYXRocy5yZXRhaW5lZCk7XG4gICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uRW50ZXInLCBQaGFzZS5SVU4sIDMwMCwgcGF0aHMuZW50ZXJpbmcpO1xuICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvbkZpbmlzaCcsIFBoYXNlLlJVTiwgNDAwLCBwYXRocy50byk7XG5cbiAgICB0aGlzLl9kZWZpbmVFdmVudChcbiAgICAgICdvblN1Y2Nlc3MnLFxuICAgICAgUGhhc2UuU1VDQ0VTUyxcbiAgICAgIDAsXG4gICAgICBwYXRocy50byxcbiAgICAgIE5PUk1BTF9TT1JULFxuICAgICAgVEguTE9HX1JFSkVDVEVEX1JFU1VMVCxcbiAgICAgIFRILkxPR19FUlJPUixcbiAgICAgIFNZTkNIUk9OT1VTLFxuICAgICk7XG4gICAgdGhpcy5fZGVmaW5lRXZlbnQoXG4gICAgICAnb25FcnJvcicsXG4gICAgICBQaGFzZS5FUlJPUixcbiAgICAgIDAsXG4gICAgICBwYXRocy50byxcbiAgICAgIE5PUk1BTF9TT1JULFxuICAgICAgVEguTE9HX1JFSkVDVEVEX1JFU1VMVCxcbiAgICAgIFRILkxPR19FUlJPUixcbiAgICAgIFNZTkNIUk9OT1VTLFxuICAgICk7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9kZWZpbmVDb3JlUGF0aHMoKSB7XG4gICAgY29uc3QgeyBTVEFURSwgVFJBTlNJVElPTiB9ID0gVHJhbnNpdGlvbkhvb2tTY29wZTtcblxuICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCd0bycsIFRSQU5TSVRJT04pO1xuICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCdmcm9tJywgVFJBTlNJVElPTik7XG4gICAgdGhpcy5fZGVmaW5lUGF0aFR5cGUoJ2V4aXRpbmcnLCBTVEFURSk7XG4gICAgdGhpcy5fZGVmaW5lUGF0aFR5cGUoJ3JldGFpbmVkJywgU1RBVEUpO1xuICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCdlbnRlcmluZycsIFNUQVRFKTtcbiAgfVxuXG4gIC8qKiBAaGlkZGVuICovXG4gIF9kZWZpbmVFdmVudChcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgaG9va1BoYXNlOiBUcmFuc2l0aW9uSG9va1BoYXNlLFxuICAgIGhvb2tPcmRlcjogbnVtYmVyLFxuICAgIGNyaXRlcmlhTWF0Y2hQYXRoOiBQYXRoVHlwZSxcbiAgICByZXZlcnNlU29ydCA9IGZhbHNlLFxuICAgIGdldFJlc3VsdEhhbmRsZXI6IEdldFJlc3VsdEhhbmRsZXIgPSBUcmFuc2l0aW9uSG9vay5IQU5ETEVfUkVTVUxULFxuICAgIGdldEVycm9ySGFuZGxlcjogR2V0RXJyb3JIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suUkVKRUNUX0VSUk9SLFxuICAgIHN5bmNocm9ub3VzID0gZmFsc2UsXG4gICkge1xuICAgIGNvbnN0IGV2ZW50VHlwZSA9IG5ldyBUcmFuc2l0aW9uRXZlbnRUeXBlKFxuICAgICAgbmFtZSxcbiAgICAgIGhvb2tQaGFzZSxcbiAgICAgIGhvb2tPcmRlcixcbiAgICAgIGNyaXRlcmlhTWF0Y2hQYXRoLFxuICAgICAgcmV2ZXJzZVNvcnQsXG4gICAgICBnZXRSZXN1bHRIYW5kbGVyLFxuICAgICAgZ2V0RXJyb3JIYW5kbGVyLFxuICAgICAgc3luY2hyb25vdXMsXG4gICAgKTtcblxuICAgIHRoaXMuX2V2ZW50VHlwZXMucHVzaChldmVudFR5cGUpO1xuICAgIG1ha2VFdmVudCh0aGlzLCB0aGlzLCBldmVudFR5cGUpO1xuICB9XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gIHByaXZhdGUgX2dldEV2ZW50cyhwaGFzZT86IFRyYW5zaXRpb25Ib29rUGhhc2UpOiBUcmFuc2l0aW9uRXZlbnRUeXBlW10ge1xuICAgIGNvbnN0IHRyYW5zaXRpb25Ib29rVHlwZXMgPSBpc0RlZmluZWQocGhhc2UpXG4gICAgICA/IHRoaXMuX2V2ZW50VHlwZXMuZmlsdGVyKHR5cGUgPT4gdHlwZS5ob29rUGhhc2UgPT09IHBoYXNlKVxuICAgICAgOiB0aGlzLl9ldmVudFR5cGVzLnNsaWNlKCk7XG5cbiAgICByZXR1cm4gdHJhbnNpdGlvbkhvb2tUeXBlcy5zb3J0KChsLCByKSA9PiB7XG4gICAgICBjb25zdCBjbXBCeVBoYXNlID0gbC5ob29rUGhhc2UgLSByLmhvb2tQaGFzZTtcbiAgICAgIHJldHVybiBjbXBCeVBoYXNlID09PSAwID8gbC5ob29rT3JkZXIgLSByLmhvb2tPcmRlciA6IGNtcEJ5UGhhc2U7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIFBhdGggdG8gYmUgdXNlZCBhcyBhIGNyaXRlcmlvbiBhZ2FpbnN0IGEgVHJlZUNoYW5nZXMgcGF0aFxuICAgKlxuICAgKiBGb3IgZXhhbXBsZTogdGhlIGBleGl0aW5nYCBwYXRoIGluIFtbSG9va01hdGNoQ3JpdGVyaWFdXSBpcyBhIFNUQVRFIHNjb3BlZCBwYXRoLlxuICAgKiBJdCB3YXMgZGVmaW5lZCBieSBjYWxsaW5nIGBkZWZpbmVUcmVlQ2hhbmdlc0NyaXRlcmlvbignZXhpdGluZycsIFRyYW5zaXRpb25Ib29rU2NvcGUuU1RBVEUpYFxuICAgKiBFYWNoIHN0YXRlIGluIHRoZSBleGl0aW5nIHBhdGggaXMgY2hlY2tlZCBhZ2FpbnN0IHRoZSBjcml0ZXJpYSBhbmQgcmV0dXJuZWQgYXMgcGFydCBvZiB0aGUgbWF0Y2guXG4gICAqXG4gICAqIEFub3RoZXIgZXhhbXBsZTogdGhlIGB0b2AgcGF0aCBpbiBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgYSBUUkFOU0lUSU9OIHNjb3BlZCBwYXRoLlxuICAgKiBJdCB3YXMgZGVmaW5lZCBieSBjYWxsaW5nIGBkZWZpbmVUcmVlQ2hhbmdlc0NyaXRlcmlvbigndG8nLCBUcmFuc2l0aW9uSG9va1Njb3BlLlRSQU5TSVRJT04pYFxuICAgKiBPbmx5IHRoZSB0YWlsIG9mIHRoZSBgdG9gIHBhdGggaXMgY2hlY2tlZCBhZ2FpbnN0IHRoZSBjcml0ZXJpYSBhbmQgcmV0dXJuZWQgYXMgcGFydCBvZiB0aGUgbWF0Y2guXG4gICAqXG4gICAqIEBoaWRkZW5cbiAgICovXG4gIHByaXZhdGUgX2RlZmluZVBhdGhUeXBlKG5hbWU6IHN0cmluZywgaG9va1Njb3BlOiBUcmFuc2l0aW9uSG9va1Njb3BlKSB7XG4gICAgdGhpcy5fY3JpdGVyaWFQYXRoc1tuYW1lXSA9IHsgbmFtZSwgc2NvcGU6IGhvb2tTY29wZSB9O1xuICB9XG5cbiAgLyoqICogQGhpZGRlbiAqL1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgcHJpdmF0ZSBfZ2V0UGF0aFR5cGVzKCk6IFBhdGhUeXBlcyB7XG4gICAgcmV0dXJuIHRoaXMuX2NyaXRlcmlhUGF0aHM7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBwdWJsaWMgZ2V0SG9va3MoaG9va05hbWU6IHN0cmluZyk6IFJlZ2lzdGVyZWRIb29rW10ge1xuICAgIHJldHVybiB0aGlzLl9yZWdpc3RlcmVkSG9va3NbaG9va05hbWVdO1xuICB9XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgcHJpdmF0ZSBfcmVnaXN0ZXJDb3JlVHJhbnNpdGlvbkhvb2tzKCkge1xuICAgIGNvbnN0IGZucyA9IHRoaXMuX2RlcmVnaXN0ZXJIb29rRm5zO1xuXG4gICAgZm5zLmFkZENvcmVSZXNvbHZlcyA9IHJlZ2lzdGVyQWRkQ29yZVJlc29sdmFibGVzKHRoaXMpO1xuICAgIGZucy5pZ25vcmVkID0gcmVnaXN0ZXJJZ25vcmVkVHJhbnNpdGlvbkhvb2sodGhpcyk7XG4gICAgZm5zLmludmFsaWQgPSByZWdpc3RlckludmFsaWRUcmFuc2l0aW9uSG9vayh0aGlzKTtcblxuICAgIC8vIFdpcmUgdXAgcmVkaXJlY3RUbyBob29rXG4gICAgZm5zLnJlZGlyZWN0VG8gPSByZWdpc3RlclJlZGlyZWN0VG9Ib29rKHRoaXMpO1xuXG4gICAgLy8gV2lyZSB1cCBvbkV4aXQvUmV0YWluL0VudGVyIHN0YXRlIGhvb2tzXG4gICAgZm5zLm9uRXhpdCA9IHJlZ2lzdGVyT25FeGl0SG9vayh0aGlzKTtcbiAgICBmbnMub25SZXRhaW4gPSByZWdpc3Rlck9uUmV0YWluSG9vayh0aGlzKTtcbiAgICBmbnMub25FbnRlciA9IHJlZ2lzdGVyT25FbnRlckhvb2sodGhpcyk7XG5cbiAgICAvLyBXaXJlIHVwIFJlc29sdmUgaG9va3NcbiAgICBmbnMuZWFnZXJSZXNvbHZlID0gcmVnaXN0ZXJFYWdlclJlc29sdmVQYXRoKHRoaXMpO1xuICAgIGZucy5sYXp5UmVzb2x2ZSA9IHJlZ2lzdGVyTGF6eVJlc29sdmVTdGF0ZSh0aGlzKTtcbiAgICBmbnMucmVzb2x2ZUFsbCA9IHJlZ2lzdGVyUmVzb2x2ZVJlbWFpbmluZyh0aGlzKTtcblxuICAgIC8vIFdpcmUgdXAgdGhlIFZpZXcgbWFuYWdlbWVudCBob29rc1xuICAgIGZucy5sb2FkVmlld3MgPSByZWdpc3RlckxvYWRFbnRlcmluZ1ZpZXdzKHRoaXMpO1xuICAgIGZucy5hY3RpdmF0ZVZpZXdzID0gcmVnaXN0ZXJBY3RpdmF0ZVZpZXdzKHRoaXMpO1xuXG4gICAgLy8gVXBkYXRlcyBnbG9iYWwgc3RhdGUgYWZ0ZXIgYSB0cmFuc2l0aW9uXG4gICAgZm5zLnVwZGF0ZUdsb2JhbHMgPSByZWdpc3RlclVwZGF0ZUdsb2JhbFN0YXRlKHRoaXMpO1xuXG4gICAgLy8gQWZ0ZXIgZ2xvYmFscy5jdXJyZW50IGlzIHVwZGF0ZWQgYXQgcHJpb3JpdHk6IDEwMDAwXG4gICAgZm5zLnVwZGF0ZVVybCA9IHJlZ2lzdGVyVXBkYXRlVXJsKHRoaXMpO1xuXG4gICAgLy8gTGF6eSBsb2FkIHN0YXRlIHRyZWVzXG4gICAgZm5zLmxhenlMb2FkID0gcmVnaXN0ZXJMYXp5TG9hZEhvb2sodGhpcyk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlLnRzIiwiLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdmFuaWxsYVxuICovXG4vKiogKi9cbmltcG9ydCB7XG4gIExvY2F0aW9uQ29uZmlnLFxuICBMb2NhdGlvblNlcnZpY2VzLFxuICBpZGVudGl0eSxcbiAgdW5uZXN0UixcbiAgaXNBcnJheSxcbiAgc3BsaXRFcXVhbCxcbiAgc3BsaXRIYXNoLFxuICBzcGxpdFF1ZXJ5LFxufSBmcm9tICcuLi9jb21tb24nO1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuXG5leHBvcnQgY29uc3Qga2V5VmFsc1RvT2JqZWN0UiA9IChhY2N1bSwgW2tleSwgdmFsXSkgPT4ge1xuICBpZiAoIWFjY3VtLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICBhY2N1bVtrZXldID0gdmFsO1xuICB9IGVsc2UgaWYgKGlzQXJyYXkoYWNjdW1ba2V5XSkpIHtcbiAgICBhY2N1bVtrZXldLnB1c2godmFsKTtcbiAgfSBlbHNlIHtcbiAgICBhY2N1bVtrZXldID0gW2FjY3VtW2tleV0sIHZhbF07XG4gIH1cbiAgcmV0dXJuIGFjY3VtO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFBhcmFtcyA9IChxdWVyeVN0cmluZzogc3RyaW5nKTogYW55ID0+XG4gIHF1ZXJ5U3RyaW5nXG4gICAgLnNwbGl0KCcmJylcbiAgICAuZmlsdGVyKGlkZW50aXR5KVxuICAgIC5tYXAoc3BsaXRFcXVhbClcbiAgICAucmVkdWNlKGtleVZhbHNUb09iamVjdFIsIHt9KTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXJsKHVybDogc3RyaW5nKSB7XG4gIGNvbnN0IG9yRW1wdHlTdHJpbmcgPSB4ID0+IHggfHwgJyc7XG4gIGNvbnN0IFtiZWZvcmVoYXNoLCBoYXNoXSA9IHNwbGl0SGFzaCh1cmwpLm1hcChvckVtcHR5U3RyaW5nKTtcbiAgY29uc3QgW3BhdGgsIHNlYXJjaF0gPSBzcGxpdFF1ZXJ5KGJlZm9yZWhhc2gpLm1hcChvckVtcHR5U3RyaW5nKTtcblxuICByZXR1cm4geyBwYXRoLCBzZWFyY2gsIGhhc2gsIHVybCB9O1xufVxuXG5leHBvcnQgY29uc3QgYnVpbGRVcmwgPSAobG9jOiBMb2NhdGlvblNlcnZpY2VzKSA9PiB7XG4gIGNvbnN0IHBhdGggPSBsb2MucGF0aCgpO1xuICBjb25zdCBzZWFyY2hPYmplY3QgPSBsb2Muc2VhcmNoKCk7XG4gIGNvbnN0IGhhc2ggPSBsb2MuaGFzaCgpO1xuXG4gIGNvbnN0IHNlYXJjaCA9IE9iamVjdC5rZXlzKHNlYXJjaE9iamVjdClcbiAgICAubWFwKGtleSA9PiB7XG4gICAgICBjb25zdCBwYXJhbSA9IHNlYXJjaE9iamVjdFtrZXldO1xuICAgICAgY29uc3QgdmFscyA9IGlzQXJyYXkocGFyYW0pID8gcGFyYW0gOiBbcGFyYW1dO1xuICAgICAgcmV0dXJuIHZhbHMubWFwKHZhbCA9PiBrZXkgKyAnPScgKyB2YWwpO1xuICAgIH0pXG4gICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAuam9pbignJicpO1xuXG4gIHJldHVybiBwYXRoICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIChoYXNoID8gJyMnICsgaGFzaCA6ICcnKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2NhdGlvblBsdWdpbkZhY3RvcnkoXG4gIG5hbWU6IHN0cmluZyxcbiAgaXNIdG1sNTogYm9vbGVhbixcbiAgc2VydmljZUNsYXNzOiB7IG5ldyAodWlSb3V0ZXI/OiBVSVJvdXRlcik6IExvY2F0aW9uU2VydmljZXMgfSxcbiAgY29uZmlndXJhdGlvbkNsYXNzOiB7IG5ldyAodWlSb3V0ZXI/OiBVSVJvdXRlciwgaXNIdG1sNT86IGJvb2xlYW4pOiBMb2NhdGlvbkNvbmZpZyB9LFxuKSB7XG4gIHJldHVybiBmdW5jdGlvbih1aVJvdXRlcjogVUlSb3V0ZXIpIHtcbiAgICBjb25zdCBzZXJ2aWNlID0gKHVpUm91dGVyLmxvY2F0aW9uU2VydmljZSA9IG5ldyBzZXJ2aWNlQ2xhc3ModWlSb3V0ZXIpKTtcbiAgICBjb25zdCBjb25maWd1cmF0aW9uID0gKHVpUm91dGVyLmxvY2F0aW9uQ29uZmlnID0gbmV3IGNvbmZpZ3VyYXRpb25DbGFzcyh1aVJvdXRlciwgaXNIdG1sNSkpO1xuXG4gICAgZnVuY3Rpb24gZGlzcG9zZShyb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgICByb3V0ZXIuZGlzcG9zZShzZXJ2aWNlKTtcbiAgICAgIHJvdXRlci5kaXNwb3NlKGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cblxuICAgIHJldHVybiB7IG5hbWUsIHNlcnZpY2UsIGNvbmZpZ3VyYXRpb24sIGRpc3Bvc2UgfTtcbiAgfTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS92YW5pbGxhL3V0aWxzLnRzIiwicmVxdWlyZSgnLi9hbmd1bGFyJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGFuZ3VsYXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9hbmd1bGFyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHRyYW5zaXRpb25cbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cblxuaW1wb3J0IHsgZXh0ZW5kLCB0YWlsLCBhc3NlcnRQcmVkaWNhdGUsIHVubmVzdFIsIGlkZW50aXR5IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBpc0FycmF5IH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuXG5pbXBvcnQge1xuICBUcmFuc2l0aW9uT3B0aW9ucyxcbiAgVHJhbnNpdGlvbkhvb2tPcHRpb25zLFxuICBJSG9va1JlZ2lzdHJ5LFxuICBUcmVlQ2hhbmdlcyxcbiAgSU1hdGNoaW5nTm9kZXMsXG4gIFRyYW5zaXRpb25Ib29rUGhhc2UsXG4gIFRyYW5zaXRpb25Ib29rU2NvcGUsXG59IGZyb20gJy4vaW50ZXJmYWNlJztcblxuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9vayB9IGZyb20gJy4vdHJhbnNpdGlvbkhvb2snO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyBQYXRoTm9kZSB9IGZyb20gJy4uL3BhdGgvcGF0aE5vZGUnO1xuaW1wb3J0IHsgVHJhbnNpdGlvblNlcnZpY2UgfSBmcm9tICcuL3RyYW5zaXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFRyYW5zaXRpb25FdmVudFR5cGUgfSBmcm9tICcuL3RyYW5zaXRpb25FdmVudFR5cGUnO1xuaW1wb3J0IHsgUmVnaXN0ZXJlZEhvb2sgfSBmcm9tICcuL2hvb2tSZWdpc3RyeSc7XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXR1cm5zIGFwcGxpY2FibGUgVHJhbnNpdGlvbkhvb2tzIGZvciBhIHNwZWNpZmljIFRyYW5zaXRpb24gaW5zdGFuY2UuXG4gKlxuICogSG9va3MgKFtbUmVnaXN0ZXJlZEhvb2tdXSkgbWF5IGJlIHJlZ2lzdGVyZWQgZ2xvYmFsbHksIGUuZy4sICR0cmFuc2l0aW9ucy5vbkVudGVyKC4uLiksIG9yIGxvY2FsbHksIGUuZy5cbiAqIG15VHJhbnNpdGlvbi5vbkVudGVyKC4uLikuICBUaGUgSG9va0J1aWxkZXIgZmluZHMgbWF0Y2hpbmcgUmVnaXN0ZXJlZEhvb2tzICh3aGVyZSB0aGUgbWF0Y2ggY3JpdGVyaWEgaXNcbiAqIGRldGVybWluZWQgYnkgdGhlIHR5cGUgb2YgaG9vaylcbiAqXG4gKiBUaGUgSG9va0J1aWxkZXIgYWxzbyBjb252ZXJ0cyBSZWdpc3RlcmVkSG9va3Mgb2JqZWN0cyB0byBUcmFuc2l0aW9uSG9vayBvYmplY3RzLCB3aGljaCBhcmUgdXNlZCB0byBydW4gYSBUcmFuc2l0aW9uLlxuICpcbiAqIFRoZSBIb29rQnVpbGRlciBjb25zdHJ1Y3RvciBpcyBnaXZlbiB0aGUgJHRyYW5zaXRpb25zIHNlcnZpY2UgYW5kIGEgVHJhbnNpdGlvbiBpbnN0YW5jZS4gIFRodXMsIGEgSG9va0J1aWxkZXJcbiAqIGluc3RhbmNlIG1heSBvbmx5IGJlIHVzZWQgZm9yIG9uZSBzcGVjaWZpYyBUcmFuc2l0aW9uIG9iamVjdC4gKHNpZGUgbm90ZTogdGhlIF90cmVlQ2hhbmdlcyBhY2Nlc3NvciBpcyBwcml2YXRlXG4gKiBpbiB0aGUgVHJhbnNpdGlvbiBjbGFzcywgc28gd2UgbXVzdCBhbHNvIHByb3ZpZGUgdGhlIFRyYW5zaXRpb24ncyBfdHJlZUNoYW5nZXMpXG4gKlxuICovXG5leHBvcnQgY2xhc3MgSG9va0J1aWxkZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRyYW5zaXRpb246IFRyYW5zaXRpb24pIHt9XG5cbiAgYnVpbGRIb29rc0ZvclBoYXNlKHBoYXNlOiBUcmFuc2l0aW9uSG9va1BoYXNlKTogVHJhbnNpdGlvbkhvb2tbXSB7XG4gICAgY29uc3QgJHRyYW5zaXRpb25zID0gdGhpcy50cmFuc2l0aW9uLnJvdXRlci50cmFuc2l0aW9uU2VydmljZTtcbiAgICByZXR1cm4gJHRyYW5zaXRpb25zLl9wbHVnaW5hcGlcbiAgICAgIC5fZ2V0RXZlbnRzKHBoYXNlKVxuICAgICAgLm1hcCh0eXBlID0+IHRoaXMuYnVpbGRIb29rcyh0eXBlKSlcbiAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAuZmlsdGVyKGlkZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIG5ld2x5IGJ1aWx0IFRyYW5zaXRpb25Ib29rIG9iamVjdHMuXG4gICAqXG4gICAqIC0gRmluZHMgYWxsIFJlZ2lzdGVyZWRIb29rcyByZWdpc3RlcmVkIGZvciB0aGUgZ2l2ZW4gYGhvb2tUeXBlYCB3aGljaCBtYXRjaGVkIHRoZSB0cmFuc2l0aW9uJ3MgW1tUcmVlQ2hhbmdlc11dLlxuICAgKiAtIEZpbmRzIFtbUGF0aE5vZGVdXSAob3IgYFBhdGhOb2RlW11gKSB0byB1c2UgYXMgdGhlIFRyYW5zaXRpb25Ib29rIGNvbnRleHQocylcbiAgICogLSBGb3IgZWFjaCBvZiB0aGUgW1tQYXRoTm9kZV1dcywgY3JlYXRlcyBhIFRyYW5zaXRpb25Ib29rXG4gICAqXG4gICAqIEBwYXJhbSBob29rVHlwZSB0aGUgdHlwZSBvZiB0aGUgaG9vayByZWdpc3RyYXRpb24gZnVuY3Rpb24sIGUuZy4sICdvbkVudGVyJywgJ29uRmluaXNoJy5cbiAgICovXG4gIGJ1aWxkSG9va3MoaG9va1R5cGU6IFRyYW5zaXRpb25FdmVudFR5cGUpOiBUcmFuc2l0aW9uSG9va1tdIHtcbiAgICBjb25zdCB0cmFuc2l0aW9uID0gdGhpcy50cmFuc2l0aW9uO1xuICAgIGNvbnN0IHRyZWVDaGFuZ2VzID0gdHJhbnNpdGlvbi50cmVlQ2hhbmdlcygpO1xuXG4gICAgLy8gRmluZCBhbGwgdGhlIG1hdGNoaW5nIHJlZ2lzdGVyZWQgaG9va3MgZm9yIGEgZ2l2ZW4gaG9vayB0eXBlXG4gICAgY29uc3QgbWF0Y2hpbmdIb29rcyA9IHRoaXMuZ2V0TWF0Y2hpbmdIb29rcyhob29rVHlwZSwgdHJlZUNoYW5nZXMpO1xuICAgIGlmICghbWF0Y2hpbmdIb29rcykgcmV0dXJuIFtdO1xuXG4gICAgY29uc3QgYmFzZUhvb2tPcHRpb25zID0gPFRyYW5zaXRpb25Ib29rT3B0aW9ucz57XG4gICAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uLFxuICAgICAgY3VycmVudDogdHJhbnNpdGlvbi5vcHRpb25zKCkuY3VycmVudCxcbiAgICB9O1xuXG4gICAgY29uc3QgbWFrZVRyYW5zaXRpb25Ib29rcyA9IChob29rOiBSZWdpc3RlcmVkSG9vaykgPT4ge1xuICAgICAgLy8gRmV0Y2ggdGhlIE5vZGVzIHRoYXQgY2F1c2VkIHRoaXMgaG9vayB0byBtYXRjaC5cbiAgICAgIGNvbnN0IG1hdGNoZXM6IElNYXRjaGluZ05vZGVzID0gaG9vay5tYXRjaGVzKHRyZWVDaGFuZ2VzKTtcbiAgICAgIC8vIFNlbGVjdCB0aGUgUGF0aE5vZGVbXSB0aGF0IHdpbGwgYmUgdXNlZCBhcyBUcmFuc2l0aW9uSG9vayBjb250ZXh0IG9iamVjdHNcbiAgICAgIGNvbnN0IG1hdGNoaW5nTm9kZXM6IFBhdGhOb2RlW10gPSBtYXRjaGVzW2hvb2tUeXBlLmNyaXRlcmlhTWF0Y2hQYXRoLm5hbWVdO1xuXG4gICAgICAvLyBSZXR1cm4gYW4gYXJyYXkgb2YgSG9va1R1cGxlc1xuICAgICAgcmV0dXJuIG1hdGNoaW5nTm9kZXMubWFwKG5vZGUgPT4ge1xuICAgICAgICBjb25zdCBfb3B0aW9ucyA9IGV4dGVuZChcbiAgICAgICAgICB7XG4gICAgICAgICAgICBiaW5kOiBob29rLmJpbmQsXG4gICAgICAgICAgICB0cmFjZURhdGE6IHsgaG9va1R5cGU6IGhvb2tUeXBlLm5hbWUsIGNvbnRleHQ6IG5vZGUgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJhc2VIb29rT3B0aW9ucyxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IGhvb2tUeXBlLmNyaXRlcmlhTWF0Y2hQYXRoLnNjb3BlID09PSBUcmFuc2l0aW9uSG9va1Njb3BlLlNUQVRFID8gbm9kZS5zdGF0ZS5zZWxmIDogbnVsbDtcbiAgICAgICAgY29uc3QgdHJhbnNpdGlvbkhvb2sgPSBuZXcgVHJhbnNpdGlvbkhvb2sodHJhbnNpdGlvbiwgc3RhdGUsIGhvb2ssIF9vcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIDxIb29rVHVwbGU+eyBob29rLCBub2RlLCB0cmFuc2l0aW9uSG9vayB9O1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBtYXRjaGluZ0hvb2tzXG4gICAgICAubWFwKG1ha2VUcmFuc2l0aW9uSG9va3MpXG4gICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgLnNvcnQodHVwbGVTb3J0KGhvb2tUeXBlLnJldmVyc2VTb3J0KSlcbiAgICAgIC5tYXAodHVwbGUgPT4gdHVwbGUudHJhbnNpdGlvbkhvb2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIGFsbCBSZWdpc3RlcmVkSG9va3MgZnJvbTpcbiAgICogLSBUaGUgVHJhbnNpdGlvbiBvYmplY3QgaW5zdGFuY2UgaG9vayByZWdpc3RyeVxuICAgKiAtIFRoZSBUcmFuc2l0aW9uU2VydmljZSAoJHRyYW5zaXRpb25zKSBnbG9iYWwgaG9vayByZWdpc3RyeVxuICAgKlxuICAgKiB3aGljaCBtYXRjaGVkOlxuICAgKiAtIHRoZSBldmVudFR5cGVcbiAgICogLSB0aGUgbWF0Y2hDcml0ZXJpYSAodG8sIGZyb20sIGV4aXRpbmcsIHJldGFpbmVkLCBlbnRlcmluZylcbiAgICpcbiAgICogQHJldHVybnMgYW4gYXJyYXkgb2YgbWF0Y2hlZCBbW1JlZ2lzdGVyZWRIb29rXV1zXG4gICAqL1xuICBwdWJsaWMgZ2V0TWF0Y2hpbmdIb29rcyhob29rVHlwZTogVHJhbnNpdGlvbkV2ZW50VHlwZSwgdHJlZUNoYW5nZXM6IFRyZWVDaGFuZ2VzKTogUmVnaXN0ZXJlZEhvb2tbXSB7XG4gICAgY29uc3QgaXNDcmVhdGUgPSBob29rVHlwZS5ob29rUGhhc2UgPT09IFRyYW5zaXRpb25Ib29rUGhhc2UuQ1JFQVRFO1xuXG4gICAgLy8gSW5zdGFuY2UgYW5kIEdsb2JhbCBob29rIHJlZ2lzdHJpZXNcbiAgICBjb25zdCAkdHJhbnNpdGlvbnMgPSB0aGlzLnRyYW5zaXRpb24ucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlO1xuICAgIGNvbnN0IHJlZ2lzdHJpZXMgPSBpc0NyZWF0ZSA/IFskdHJhbnNpdGlvbnNdIDogW3RoaXMudHJhbnNpdGlvbiwgJHRyYW5zaXRpb25zXTtcblxuICAgIHJldHVybiByZWdpc3RyaWVzXG4gICAgICAubWFwKChyZWc6IElIb29rUmVnaXN0cnkpID0+IHJlZy5nZXRIb29rcyhob29rVHlwZS5uYW1lKSkgLy8gR2V0IG5hbWVkIGhvb2tzIGZyb20gcmVnaXN0cmllc1xuICAgICAgLmZpbHRlcihhc3NlcnRQcmVkaWNhdGUoaXNBcnJheSwgYGJyb2tlbiBldmVudCBuYW1lZDogJHtob29rVHlwZS5uYW1lfWApKSAvLyBTYW5pdHkgY2hlY2tcbiAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pIC8vIFVuLW5lc3QgUmVnaXN0ZXJlZEhvb2tbXVtdIHRvIFJlZ2lzdGVyZWRIb29rW10gYXJyYXlcbiAgICAgIC5maWx0ZXIoaG9vayA9PiBob29rLm1hdGNoZXModHJlZUNoYW5nZXMpKTsgLy8gT25seSB0aG9zZSBzYXRpc2Z5aW5nIG1hdGNoQ3JpdGVyaWFcbiAgfVxufVxuXG5pbnRlcmZhY2UgSG9va1R1cGxlIHtcbiAgaG9vazogUmVnaXN0ZXJlZEhvb2s7XG4gIG5vZGU6IFBhdGhOb2RlO1xuICB0cmFuc2l0aW9uSG9vazogVHJhbnNpdGlvbkhvb2s7XG59XG5cbi8qKlxuICogQSBmYWN0b3J5IGZvciBhIHNvcnQgZnVuY3Rpb24gZm9yIEhvb2tUdXBsZXMuXG4gKlxuICogVGhlIHNvcnQgZnVuY3Rpb24gZmlyc3QgY29tcGFyZXMgdGhlIFBhdGhOb2RlIGRlcHRoIChob3cgZGVlcCBpbiB0aGUgc3RhdGUgdHJlZSBhIG5vZGUgaXMpLCB0aGVuIGNvbXBhcmVzXG4gKiB0aGUgRXZlbnRIb29rIHByaW9yaXR5LlxuICpcbiAqIEBwYXJhbSByZXZlcnNlRGVwdGhTb3J0IGEgYm9vbGVhbiwgd2hlbiB0cnVlLCByZXZlcnNlcyB0aGUgc29ydCBvcmRlciBmb3IgdGhlIG5vZGUgZGVwdGhcbiAqIEByZXR1cm5zIGEgdHVwbGUgc29ydCBmdW5jdGlvblxuICovXG5mdW5jdGlvbiB0dXBsZVNvcnQocmV2ZXJzZURlcHRoU29ydCA9IGZhbHNlKSB7XG4gIHJldHVybiBmdW5jdGlvbiBub2RlRGVwdGhUaGVuUHJpb3JpdHkobDogSG9va1R1cGxlLCByOiBIb29rVHVwbGUpOiBudW1iZXIge1xuICAgIGNvbnN0IGZhY3RvciA9IHJldmVyc2VEZXB0aFNvcnQgPyAtMSA6IDE7XG4gICAgY29uc3QgZGVwdGhEZWx0YSA9IChsLm5vZGUuc3RhdGUucGF0aC5sZW5ndGggLSByLm5vZGUuc3RhdGUucGF0aC5sZW5ndGgpICogZmFjdG9yO1xuICAgIHJldHVybiBkZXB0aERlbHRhICE9PSAwID8gZGVwdGhEZWx0YSA6IHIuaG9vay5wcmlvcml0eSAtIGwuaG9vay5wcmlvcml0eTtcbiAgfTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS90cmFuc2l0aW9uL2hvb2tCdWlsZGVyLnRzIiwiLyoqXG4gKiAjIFRoZSBSZXNvbHZlIHN1YnN5c3RlbVxuICpcbiAqIFRoaXMgc3Vic3lzdGVtIGlzIGFuIGFzeW5jaHJvbm91cywgaGllcmFyY2hpY2FsIERlcGVuZGVuY3kgSW5qZWN0aW9uIHN5c3RlbS5cbiAqXG4gKiBUeXBpY2FsbHksIHJlc29sdmUgaXMgY29uZmlndXJlZCBvbiBhIHN0YXRlIHVzaW5nIGEgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXSBkZWNsYXJhdGlvbi5cbiAqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSByZXNvbHZlXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBSZXNvbHZhYmxlIH0gZnJvbSAnLi9yZXNvbHZhYmxlJztcblxuLyoqXG4gKiBBbiBpbnRlcmZhY2Ugd2hpY2ggaXMgc2ltaWxhciB0byBhbiBBbmd1bGFyIDIgYFByb3ZpZGVyYFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFByb3ZpZGVyTGlrZSB7XG4gIHByb3ZpZGU6IGFueTtcbiAgdXNlQ2xhc3M/OiBhbnk7XG4gIHVzZUZhY3Rvcnk/OiBGdW5jdGlvbjtcbiAgdXNlVmFsdWU/OiBhbnk7XG4gIHVzZUV4aXN0aW5nPzogYW55O1xuICBkZXBzPzogYW55W107XG59XG5cbi8qKlxuICogQSBwbGFpbiBvYmplY3QgdXNlZCB0byBkZXNjcmliZSBhIFtbUmVzb2x2YWJsZV1dXG4gKlxuICogVGhlc2Ugb2JqZWN0cyBtYXkgYmUgdXNlZCBpbiB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXSBhcnJheSB0byBkZWNsYXJlXG4gKiBhc3luYyBkYXRhIHRoYXQgdGhlIHN0YXRlIG9yIHN1YnN0YXRlcyByZXF1aXJlLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKlxuICogdmFyIHN0YXRlID0ge1xuICogICBuYW1lOiAnbWFpbicsXG4gKiAgIHJlc29sdmU6IFtcbiAqICAgICB7IHRva2VuOiAnbXlEYXRhJywgZGVwczogW015RGF0YUFwaV0sIHJlc29sdmVGbjogKG15RGF0YUFwaSkgPT4gbXlEYXRhQXBpLmdldERhdGEoKSB9LFxuICogICBdLFxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVzb2x2YWJsZUxpdGVyYWwge1xuICAvKipcbiAgICogQSBEZXBlbmRlbmN5IEluamVjdGlvbiB0b2tlblxuICAgKlxuICAgKiBUaGlzIFJlc29sdmFibGUncyBESSB0b2tlbi5cbiAgICogVGhlIFJlc29sdmFibGUgd2lsbCBiZSBpbmplY3RhYmxlIGVsc2V3aGVyZSB1c2luZyB0aGUgdG9rZW4uXG4gICAqL1xuICB0b2tlbjogYW55O1xuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHdoaWNoIGZldGNoZXMgdGhlIFJlc29sdmFibGUncyBkYXRhXG4gICAqXG4gICAqIEEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBvbmUgb2Y6XG4gICAqXG4gICAqIC0gVGhlIHJlc29sdmVkIHZhbHVlIChzeW5jaHJvbm91c2x5KVxuICAgKiAtIEEgcHJvbWlzZSBmb3IgdGhlIHJlc29sdmVkIHZhbHVlXG4gICAqIC0gQW4gT2JzZXJ2YWJsZSBvZiB0aGUgcmVzb2x2ZWQgdmFsdWUocylcbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHByb3ZpZGVkIHRoZSBkZXBlbmRlbmNpZXMgbGlzdGVkIGluIFtbZGVwc11dIGFzIGl0cyBhcmd1bWVudHMuXG4gICAqIFRoZSByZXNvbHZlIHN5c3RlbSB3aWxsIGFzeW5jaHJvbm91c2x5IGZldGNoIHRoZSBkZXBlbmRlbmNpZXMgYmVmb3JlIGludm9raW5nIHRoaXMgZnVuY3Rpb24uXG4gICAqL1xuICByZXNvbHZlRm46IEZ1bmN0aW9uO1xuXG4gIC8qKlxuICAgKiBEZWZpbmVzIHRoZSBSZXNvbHZlIFBvbGljeVxuICAgKlxuICAgKiBBIHBvbGljeSB0aGF0IGRlZmluZXMgd2hlbiB0byBpbnZva2UgdGhlIHJlc29sdmUsXG4gICAqIGFuZCB3aGV0aGVyIHRvIHdhaXQgZm9yIGFzeW5jIGFuZCB1bndyYXAgdGhlIGRhdGFcbiAgICovXG4gIHBvbGljeT86IFJlc29sdmVQb2xpY3k7XG5cbiAgLyoqXG4gICAqIFRoZSBEZXBlbmRlbmN5IEluamVjdGlvbiB0b2tlbnNcbiAgICpcbiAgICogVGhpcyBpcyBhbiBhcnJheSBvZiBEZXBlbmRlbmN5IEluamVjdGlvbiB0b2tlbnMgZm9yIHRoZSBkZXBlbmRlbmNpZXMgb2YgdGhlIFtbcmVzb2x2ZUZuXV0uXG4gICAqXG4gICAqIFRoZSBESSB0b2tlbnMgYXJlIHJlZmVyZW5jZXMgdG8gb3RoZXIgYFJlc29sdmFibGVzYCwgb3IgdG8gb3RoZXJcbiAgICogc2VydmljZXMgZnJvbSB0aGUgbmF0aXZlIERJIHN5c3RlbS5cbiAgICovXG4gIGRlcHM/OiBhbnlbXTtcblxuICAvKiogUHJlLXJlc29sdmVkIGRhdGEuICovXG4gIGRhdGE/OiBhbnk7XG59XG5cbi8qKlxuICogRGVmaW5lcyBob3cgYSByZXNvbHZlIGlzIHByb2Nlc3NlZCBkdXJpbmcgYSB0cmFuc2l0aW9uXG4gKlxuICogVGhpcyBvYmplY3QgaXMgdGhlIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlUG9saWN5XV0gcHJvcGVydHkuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqIC8vIEZldGNoZWQgd2hlbiB0aGUgcmVzb2x2ZSdzIHN0YXRlIGlzIGJlaW5nIGVudGVyZWQuXG4gKiAvLyBXYWl0IGZvciB0aGUgcHJvbWlzZSB0byByZXNvbHZlLlxuICogdmFyIHBvbGljeTEgPSB7IHdoZW46IFwiTEFaWVwiLCBhc3luYzogXCJXQUlUXCIgfVxuICpcbiAqIC8vIEZldGNoZWQgd2hlbiB0aGUgVHJhbnNpdGlvbiBpcyBzdGFydGluZy5cbiAqIC8vIERvIG5vdCB3YWl0IGZvciB0aGUgcmV0dXJuZWQgcHJvbWlzZSB0byByZXNvbHZlLlxuICogLy8gSW5qZWN0IHRoZSByYXcgcHJvbWlzZS92YWx1ZVxuICogdmFyIHBvbGljeTIgPSB7IHdoZW46IFwiRUFHRVJcIiwgYXN5bmM6IFwiTk9XQUlUXCIgfVxuICogYGBgXG4gKlxuICogVGhlIHBvbGljeSBmb3IgYSBnaXZlbiBSZXNvbHZhYmxlIGlzIG1lcmdlZCBmcm9tIHRocmVlIHNvdXJjZXMgKGhpZ2hlc3QgcHJpb3JpdHkgZmlyc3QpOlxuICpcbiAqIC0gMSkgSW5kaXZpZHVhbCByZXNvbHZlIGRlZmluaXRpb25cbiAqIC0gMikgU3RhdGUgZGVmaW5pdGlvblxuICogLSAzKSBHbG9iYWwgZGVmYXVsdFxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKiAvLyBXYWl0IGZvciBhbiBPYnNlcnZhYmxlIHRvIGVtaXQgb25lIGl0ZW0uXG4gKiAvLyBTaW5jZSBgd2FpdGAgaXMgbm90IHNwZWNpZmllZCwgaXQgdXNlcyB0aGUgYHdhaXRgXG4gKiAvLyBwb2xpY3kgZGVmaW5lZCBvbiB0aGUgc3RhdGUsIG9yIHRoZSBnbG9iYWwgZGVmYXVsdFxuICogLy8gaWYgbm8gYHdhaXRgIHBvbGljeSBpcyBkZWZpbmVkIG9uIHRoZSBzdGF0ZVxuICogdmFyIG15UmVzb2x2YWJsZVBvbGljeSA9IHsgYXN5bmM6IFwiUlhXQUlUXCIgfVxuICogYGBgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVzb2x2ZVBvbGljeSB7XG4gIC8qKlxuICAgKiBEZWZpbmVzIHdoZW4gYSBSZXNvbHZhYmxlIGlzIHJlc29sdmVkIChmZXRjaGVkKSBkdXJpbmcgYSB0cmFuc2l0aW9uXG4gICAqXG4gICAqIC0gYExBWllgIChkZWZhdWx0KVxuICAgKiAgIC0gUmVzb2x2ZWQgYXMgdGhlIHJlc29sdmUncyBzdGF0ZSBpcyBiZWluZyBlbnRlcmVkXG4gICAqIC0gYEVBR0VSYFxuICAgKiAgIC0gUmVzb2x2ZWQgYXMgdGhlIHRyYW5zaXRpb24gaXMgc3RhcnRpbmdcbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBSZXNvbHZlcyBmb3IgYG1haW5gIGFuZCBgbWFpbi5ob21lYCBhcmUgZmV0Y2hlZCB3aGVuIGVhY2ggc3RhdGUgaXMgZW50ZXJlZC5cbiAgICogQWxsIG9mIGBtYWluYCByZXNvbHZlcyBhcmUgcHJvY2Vzc2VkIGJlZm9yZSBmZXRjaGluZyBgbWFpbi5ob21lYCByZXNvbHZlcy5cbiAgICogYGBganNcbiAgICogdmFyIHN0YXRlID0ge1xuICAgKiAgIG5hbWU6ICdtYWluJyxcbiAgICogICByZXNvbHZlOiBtYWluUmVzb2x2ZXMsIC8vIGRlZmluZWQgZWxzZXdoZXJlXG4gICAqICAgcmVzb2x2ZVBvbGljeTogeyB3aGVuOiAnTEFaWScgfSwgLy8gZGVmYXVsdFxuICAgKiB9XG4gICAqXG4gICAqIHZhciBzdGF0ZSA9IHtcbiAgICogICBuYW1lOiAnbWFpbi5ob21lJyxcbiAgICogICByZXNvbHZlOiBob21lUmVzb2x2ZXMsIC8vIGRlZmluZWQgZWxzZXdoZXJlXG4gICAqICAgcmVzb2x2ZVBvbGljeTogeyB3aGVuOiAnTEFaWScgfSwgLy8gZGVmYXVsdFxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFJlc29sdmVzIGZvciBgbWFpbmAgYW5kIGBtYWluLmhvbWVgIGFyZSBmZXRjaGVkIGF0IHRoZSBzYW1lIHRpbWUgd2hlbiB0aGUgdHJhbnNpdGlvbiBzdGFydHMuXG4gICAqIFRoaXMgaGFwcGVucyBlYXJsaWVyIGluIHRoZSBsaWZlY3ljbGUgdGhhbiB3aGVuIHN0YXRlcyBhcmUgZW50ZXJlZC5cbiAgICogQWxsIG9mIHRoZSBgbWFpbmAgYW5kIGBtYWluLmhvbWVgIHJlc29sdmVzIGFyZSBmZXRjaGVkIGFzIHNvb24gYXMgcG9zc2libGUuXG4gICAqIGBgYGpzXG4gICAqIHZhciBtYWluU3RhdGUgPSB7XG4gICAqICAgbmFtZTogJ21haW4nLFxuICAgKiAgIHJlc29sdmU6IG1haW5SZXNvbHZlcywgLy8gZGVmaW5lZCBlbHNld2hlcmVcbiAgICogICByZXNvbHZlUG9saWN5OiB7IHdoZW46ICdFQUdFUicgfSxcbiAgICogfVxuICAgKlxuICAgKiB2YXIgaG9tZVN0YXRlID0ge1xuICAgKiAgIG5hbWU6ICdtYWluLmhvbWUnLFxuICAgKiAgIHJlc29sdmU6IGhvbWVSZXNvbHZlcywgLy8gZGVmaW5lZCBlbHNld2hlcmVcbiAgICogICByZXNvbHZlUG9saWN5OiB7IHdoZW46ICdFQUdFUicgfSxcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHdoZW4/OiBQb2xpY3lXaGVuO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHRoZSB1bndyYXBwaW5nIGJlaGF2aW9yIG9mIGFzeW5jaHJvbm91cyByZXNvbHZlIHZhbHVlcy5cbiAgICpcbiAgICogLSBgV0FJVGAgKGRlZmF1bHQpXG4gICAqICAgLSBJZiBhIHByb21pc2UgaXMgcmV0dXJuZWQgZnJvbSB0aGUgcmVzb2x2ZUZuLCB3YWl0IGZvciB0aGUgcHJvbWlzZSBiZWZvcmUgcHJvY2VlZGluZ1xuICAgKiAgIC0gVGhlIHVud3JhcHBlZCB2YWx1ZSBmcm9tIHRoZSBwcm9taXNlXG4gICAqIC0gYE5PV0FJVGBcbiAgICogICAtIElmIGEgcHJvbWlzZSBpcyByZXR1cm5lZCBmcm9tIHRoZSByZXNvbHZlLCBkbyBub3Qgd2FpdCBmb3IgdGhlIHByb21pc2UuXG4gICAqICAgLSBBbnkgb3RoZXIgdmFsdWUgcmV0dXJuZWQgaXMgd3JhcHBlZCBpbiBhIHByb21pc2UuXG4gICAqICAgLSBUaGUgcHJvbWlzZSB3aWxsIG5vdCBiZSB1bndyYXBwZWQuXG4gICAqICAgLSBUaGUgcHJvbWlzZSBpdHNlbGYgd2lsbCBiZSBwcm92aWRlZCB3aGVuIHRoZSByZXNvbHZlIGlzIGluamVjdGVkIG9yIGJvdW5kIGVsc2V3aGVyZS5cbiAgICogLSBgUlhXQUlUYFxuICAgKiAgIC0gV2hlbiBhbiBPYnNlcnZhYmxlIGlzIHJldHVybmVkIGZyb20gdGhlIHJlc29sdmVGbiwgd2FpdCB1bnRpbCB0aGUgT2JzZXJ2YWJsZSBlbWl0cyBhdCBsZWFzdCBvbmUgaXRlbS5cbiAgICogICAtIFRoZSBPYnNlcnZhYmxlIGl0ZW0gd2lsbCBub3QgYmUgdW53cmFwcGVkLlxuICAgKiAgIC0gVGhlIE9ic2VydmFibGUgc3RyZWFtIGl0c2VsZiB3aWxsIGJlIHByb3ZpZGVkIHdoZW4gdGhlIHJlc29sdmUgaXMgaW5qZWN0ZWQgb3IgYm91bmQgZWxzZXdoZXJlLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFRoZSBgVHJhbnNpdGlvbmAgd2lsbCBub3Qgd2FpdCBmb3IgdGhlIHJlc29sdmUgcHJvbWlzZShzKSBmcm9tIGBtYWluYCB0byBzZXR0bGUgYmVmb3JlIGNvbnRpbnVpbmcuXG4gICAqIFJlc29sdmVzIGZvciBgbWFpbmAgd2lsbCBiZSBwcm92aWRlZCB0byBjb21wb25lbnRzIHdyYXBwZWQgaW4gYSBgUHJvbWlzZWAuXG4gICAqXG4gICAqIFRoZSBgVHJhbnNpdGlvbmAgd2lsbCB3YWl0IGZvciB0aGUgYG1haW4uaG9tZWAgcmVzb2x2ZSBwcm9taXNlcy5cbiAgICogUmVzb2x2ZWQgdmFsdWVzIHdpbGwgYmUgdW53cmFwcGVkIGJlZm9yZSBiZWluZyBwcm92aWRlZCB0byBjb21wb25lbnRzLlxuICAgKiBgYGBqc1xuICAgKiB2YXIgbWFpblN0YXRlID0ge1xuICAgKiAgIG5hbWU6ICdtYWluJyxcbiAgICogICByZXNvbHZlOiBtYWluUmVzb2x2ZXMsIC8vIGRlZmluZWQgZWxzZXdoZXJlXG4gICAqICAgcmVzb2x2ZVBvbGljeTogeyBhc3luYzogJ05PV0FJVCcgfSxcbiAgICogfVxuICAgKiB2YXIgaG9tZVN0YXRlID0ge1xuICAgKiAgIG5hbWU6ICdtYWluLmhvbWUnLFxuICAgKiAgIHJlc29sdmU6IGhvbWVSZXNvbHZlcywgLy8gZGVmaW5lZCBlbHNld2hlcmVcbiAgICogICByZXNvbHZlUG9saWN5OiB7IGFzeW5jOiAnV0FJVCcgfSwgLy8gZGVmYXVsdFxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYXN5bmM/OiBQb2xpY3lBc3luYztcbn1cblxuZXhwb3J0IHR5cGUgUG9saWN5V2hlbiA9ICdMQVpZJyB8ICdFQUdFUic7XG5leHBvcnQgdHlwZSBQb2xpY3lBc3luYyA9ICdXQUlUJyB8ICdOT1dBSVQnIHwgJ1JYV0FJVCc7XG5cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbmV4cG9ydCBsZXQgcmVzb2x2ZVBvbGljaWVzID0ge1xuICB3aGVuOiB7XG4gICAgTEFaWTogJ0xBWlknLFxuICAgIEVBR0VSOiAnRUFHRVInLFxuICB9LFxuICBhc3luYzoge1xuICAgIFdBSVQ6ICdXQUlUJyxcbiAgICBOT1dBSVQ6ICdOT1dBSVQnLFxuICAgIFJYV0FJVDogJ1JYV0FJVCcsXG4gIH0sXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3Jlc29sdmUvaW50ZXJmYWNlLnRzIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBwYXJhbXNcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBmcm9tSnNvbiwgdG9Kc29uLCBpZGVudGl0eSwgZXF1YWxzLCBpbmhlcml0LCBtYXAsIGV4dGVuZCwgcGljayB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNEZWZpbmVkLCBpc051bGxPclVuZGVmaW5lZCB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IGlzIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgUGFyYW1UeXBlIH0gZnJvbSAnLi9wYXJhbVR5cGUnO1xuaW1wb3J0IHsgUGFyYW1UeXBlRGVmaW5pdGlvbiB9IGZyb20gJy4vaW50ZXJmYWNlJztcblxuLyoqXG4gKiBBIHJlZ2lzdHJ5IGZvciBwYXJhbWV0ZXIgdHlwZXMuXG4gKlxuICogVGhpcyByZWdpc3RyeSBtYW5hZ2VzIHRoZSBidWlsdC1pbiAoYW5kIGN1c3RvbSkgcGFyYW1ldGVyIHR5cGVzLlxuICpcbiAqIFRoZSBidWlsdC1pbiBwYXJhbWV0ZXIgdHlwZXMgYXJlOlxuICpcbiAqIC0gW1tzdHJpbmddXVxuICogLSBbW3BhdGhdXVxuICogLSBbW3F1ZXJ5XV1cbiAqIC0gW1toYXNoXV1cbiAqIC0gW1tpbnRdXVxuICogLSBbW2Jvb2xdXVxuICogLSBbW2RhdGVdXVxuICogLSBbW2pzb25dXVxuICogLSBbW2FueV1dXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXJhbVR5cGVzIHtcbiAgLyoqXG4gICAqIEJ1aWx0LWluIHBhcmFtZXRlciB0eXBlOiBgc3RyaW5nYFxuICAgKlxuICAgKiBUaGlzIHBhcmFtZXRlciB0eXBlIGNvZXJjZXMgdmFsdWVzIHRvIHN0cmluZ3MuXG4gICAqIEl0IG1hdGNoZXMgYW55dGhpbmcgKGBuZXcgUmVnRXhwKFwiLipcIilgKSBpbiB0aGUgVVJMXG4gICAqL1xuICBzdGF0aWMgc3RyaW5nOiBQYXJhbVR5cGVEZWZpbml0aW9uO1xuXG4gIC8qKlxuICAgKiBCdWlsdC1pbiBwYXJhbWV0ZXIgdHlwZTogYHBhdGhgXG4gICAqXG4gICAqIFRoaXMgcGFyYW1ldGVyIHR5cGUgaXMgdGhlIGRlZmF1bHQgdHlwZSBmb3IgcGF0aCBwYXJhbWV0ZXJzLlxuICAgKiBBIHBhdGggcGFyYW1ldGVyIGlzIGFueSBwYXJhbWV0ZXIgZGVjbGFyZWQgaW4gdGhlIHBhdGggcG9ydGlvbiBvZiBhIHVybFxuICAgKlxuICAgKiAtIGAvZm9vLzpwYXJhbTEvOnBhcmFtMmA6IHR3byBwYXRoIHBhcmFtZXRlcnNcbiAgICpcbiAgICogVGhpcyBwYXJhbWV0ZXIgdHlwZSBiZWhhdmVzIGV4YWN0bHkgbGlrZSB0aGUgW1tzdHJpbmddXSB0eXBlIHdpdGggb25lIGV4Y2VwdGlvbi5cbiAgICogV2hlbiBtYXRjaGluZyBwYXJhbWV0ZXIgdmFsdWVzIGluIHRoZSBVUkwsIHRoZSBgcGF0aGAgdHlwZSBkb2VzIG5vdCBtYXRjaCBmb3J3YXJkIHNsYXNoZXMgYC9gLlxuICAgKlxuICAgKiAjIyMjIEFuZ3VsYXIgMSBub3RlOlxuICAgKiBJbiBuZzEsIHRoaXMgdHlwZSBpcyBvdmVycmlkZGVuIHdpdGggb25lIHRoYXQgcHJlLWVuY29kZXMgc2xhc2hlcyBhcyBgfjJGYCBpbnN0ZWFkIG9mIGAlMkZgLlxuICAgKiBGb3IgbW9yZSBkZXRhaWxzIGFib3V0IHRoaXMgYW5ndWxhciAxIGJlaGF2aW9yLCBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXVpL3VpLXJvdXRlci9pc3N1ZXMvMjU5OFxuICAgKi9cbiAgc3RhdGljIHBhdGg6IFBhcmFtVHlwZURlZmluaXRpb247XG5cbiAgLyoqXG4gICAqIEJ1aWx0LWluIHBhcmFtZXRlciB0eXBlOiBgcXVlcnlgXG4gICAqXG4gICAqIFRoaXMgcGFyYW1ldGVyIHR5cGUgaXMgdGhlIGRlZmF1bHQgdHlwZSBmb3IgcXVlcnkvc2VhcmNoIHBhcmFtZXRlcnMuXG4gICAqIEl0IGJlaGF2ZXMgdGhlIHNhbWUgYXMgdGhlIFtbc3RyaW5nXV0gcGFyYW1ldGVyIHR5cGUuXG4gICAqXG4gICAqIEEgcXVlcnkgcGFyYW1ldGVyIGlzIGFueSBwYXJhbWV0ZXIgZGVjbGFyZWQgaW4gdGhlIHF1ZXJ5L3NlYXJjaCBwb3J0aW9uIG9mIGEgdXJsXG4gICAqXG4gICAqIC0gYC9iYXI/cGFyYW0yYDogYSBxdWVyeSBwYXJhbWV0ZXJcbiAgICovXG4gIHN0YXRpYyBxdWVyeTogUGFyYW1UeXBlRGVmaW5pdGlvbjtcblxuICAvKipcbiAgICogQnVpbHQtaW4gcGFyYW1ldGVyIHR5cGU6IGBoYXNoYFxuICAgKlxuICAgKiBUaGlzIHBhcmFtZXRlciB0eXBlIGlzIHVzZWQgZm9yIHRoZSBgI2AgcGFyYW1ldGVyICh0aGUgaGFzaClcbiAgICogSXQgYmVoYXZlcyB0aGUgc2FtZSBhcyB0aGUgW1tzdHJpbmddXSBwYXJhbWV0ZXIgdHlwZS5cbiAgICogQGNvcmVhcGlcbiAgICovXG4gIHN0YXRpYyBoYXNoOiBQYXJhbVR5cGVEZWZpbml0aW9uO1xuXG4gIC8qKlxuICAgKiBCdWlsdC1pbiBwYXJhbWV0ZXIgdHlwZTogYGludGBcbiAgICpcbiAgICogVGhpcyBwYXJhbWV0ZXIgdHlwZSBzZXJpYWxpemVzIGphdmFzY3JpcHQgaW50ZWdlcnMgKGBudW1iZXJgcyB3aGljaCByZXByZXNlbnQgYW4gaW50ZWdlcikgdG8gdGhlIFVSTC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAuc3RhdGUoe1xuICAgKiAgIG5hbWU6ICd1c2VyJyxcbiAgICogICB1cmw6ICcvdXNlci97aWQ6aW50fSdcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBgYGBqc1xuICAgKiAkc3RhdGUuZ28oJ3VzZXInLCB7IGlkOiAxMjk4NTQ3IH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogVGhlIFVSTCB3aWxsIHNlcmlhbGl6ZSB0bzogYC91c2VyLzEyOTg1NDdgLlxuICAgKlxuICAgKiBXaGVuIHRoZSBwYXJhbWV0ZXIgdmFsdWUgaXMgcmVhZCwgaXQgd2lsbCBiZSB0aGUgYG51bWJlcmAgYDEyOTg1NDdgLCBub3QgdGhlIHN0cmluZyBgXCIxMjk4NTQ3XCJgLlxuICAgKi9cbiAgc3RhdGljIGludDogUGFyYW1UeXBlRGVmaW5pdGlvbjtcblxuICAvKipcbiAgICogQnVpbHQtaW4gcGFyYW1ldGVyIHR5cGU6IGBib29sYFxuICAgKlxuICAgKiBUaGlzIHBhcmFtZXRlciB0eXBlIHNlcmlhbGl6ZXMgYHRydWVgL2BmYWxzZWAgYXMgYDFgL2AwYFxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIC5zdGF0ZSh7XG4gICAqICAgbmFtZTogJ2luYm94JyxcbiAgICogICB1cmw6ICcvaW5ib3g/e3VucmVhZDpib29sfSdcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBgYGBqc1xuICAgKiAkc3RhdGUuZ28oJ2luYm94JywgeyB1bnJlYWQ6IHRydWUgfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBUaGUgVVJMIHdpbGwgc2VyaWFsaXplIHRvOiBgL2luYm94P3VucmVhZD0xYC5cbiAgICpcbiAgICogQ29udmVyc2VseSwgaWYgdGhlIHVybCBpcyBgL2luYm94P3VucmVhZD0wYCwgdGhlIHZhbHVlIG9mIHRoZSBgdW5yZWFkYCBwYXJhbWV0ZXIgd2lsbCBiZSBhIGBmYWxzZWAuXG4gICAqL1xuICBzdGF0aWMgYm9vbDogUGFyYW1UeXBlRGVmaW5pdGlvbjtcblxuICAvKipcbiAgICogQnVpbHQtaW4gcGFyYW1ldGVyIHR5cGU6IGBkYXRlYFxuICAgKlxuICAgKiBUaGlzIHBhcmFtZXRlciB0eXBlIGNhbiBiZSB1c2VkIHRvIHNlcmlhbGl6ZSBKYXZhc2NyaXB0IGRhdGVzIGFzIHBhcmFtZXRlciB2YWx1ZXMuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogLnN0YXRlKHtcbiAgICogICBuYW1lOiAnc2VhcmNoJyxcbiAgICogICB1cmw6ICcvc2VhcmNoP3tzdGFydDpkYXRlfSdcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBgYGBqc1xuICAgKiAkc3RhdGUuZ28oJ3NlYXJjaCcsIHsgc3RhcnQ6IG5ldyBEYXRlKDIwMDAsIDAsIDEpIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogVGhlIFVSTCB3aWxsIHNlcmlhbGl6ZSB0bzogYC9zZWFyY2g/c3RhcnQ9MjAwMC0wMS0wMWAuXG4gICAqXG4gICAqIENvbnZlcnNlbHksIGlmIHRoZSB1cmwgaXMgYC9zZWFyY2g/c3RhcnQ9MjAxNi0xMi0yNWAsIHRoZSB2YWx1ZSBvZiB0aGUgYHN0YXJ0YCBwYXJhbWV0ZXIgd2lsbCBiZSBhIGBEYXRlYCBvYmplY3Qgd2hlcmU6XG4gICAqXG4gICAqIC0gYGRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gMjAxNmBcbiAgICogLSBgZGF0ZS5nZXRNb250aCgpID09PSAxMWAgKG1vbnRoIGlzIDAtYmFzZWQpXG4gICAqIC0gYGRhdGUuZ2V0RGF0ZSgpID09PSAyNWBcbiAgICovXG4gIHN0YXRpYyBkYXRlOiBQYXJhbVR5cGVEZWZpbml0aW9uO1xuXG4gIC8qKlxuICAgKiBCdWlsdC1pbiBwYXJhbWV0ZXIgdHlwZTogYGpzb25gXG4gICAqXG4gICAqIFRoaXMgcGFyYW1ldGVyIHR5cGUgY2FuIGJlIHVzZWQgdG8gc2VyaWFsaXplIGphdmFzY3JpcHQgb2JqZWN0cyBpbnRvIHRoZSBVUkwgdXNpbmcgSlNPTiBzZXJpYWxpemF0aW9uLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFRoaXMgZXhhbXBsZSBzZXJpYWxpemVzIGFuIHBsYWluIGphdmFzY3JpcHQgb2JqZWN0IHRvIHRoZSBVUkxcbiAgICogYGBganNcbiAgICogLnN0YXRlKHtcbiAgICogICBuYW1lOiAnbWFwJyxcbiAgICogICB1cmw6ICcvbWFwL3tjb29yZHM6anNvbn0nXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICogYGBganNcbiAgICogJHN0YXRlLmdvKCdtYXAnLCB7IGNvb3JkczogeyB4OiAxMDM5OS4yLCB5OiA0OTA3MSB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIFRoZSBVUkwgd2lsbCBzZXJpYWxpemUgdG86IGAvbWFwLyU3QiUyMnglMjIlM0ExMDM5OS4yJTJDJTIyeSUyMiUzQTQ5MDcxJTdEYFxuICAgKi9cbiAgc3RhdGljIGpzb246IFBhcmFtVHlwZURlZmluaXRpb247XG5cbiAgLyoqXG4gICAqIEJ1aWx0LWluIHBhcmFtZXRlciB0eXBlOiBgYW55YFxuICAgKlxuICAgKiBUaGlzIHBhcmFtZXRlciB0eXBlIGlzIHVzZWQgYnkgZGVmYXVsdCBmb3IgdXJsLWxlc3MgcGFyYW1ldGVycyAocGFyYW1ldGVycyB0aGF0IGRvIG5vdCBhcHBlYXIgaW4gdGhlIFVSTCkuXG4gICAqIFRoaXMgdHlwZSBkb2VzIG5vdCBlbmNvZGUgb3IgZGVjb2RlLlxuICAgKiBJdCBpcyBjb21wYXJlZCB1c2luZyBhIGRlZXAgYGVxdWFsc2AgY29tcGFyaXNvbi5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBUaGlzIGV4YW1wbGUgZGVmaW5lcyBhIG5vbi11cmwgcGFyYW1ldGVyIG9uIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0uXG4gICAqIGBgYGpzXG4gICAqIC5zdGF0ZSh7XG4gICAqICAgbmFtZTogJ25ldycsXG4gICAqICAgdXJsOiAnL25ldycsXG4gICAqICAgcGFyYW1zOiB7XG4gICAqICAgICBpbnJlcHl0bzogbnVsbFxuICAgKiAgIH1cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBgYGBqc1xuICAgKiAkc3RhdGUuZ28oJ25ldycsIHsgaW5yZXBseXRvOiBjdXJyZW50TWVzc2FnZSB9KTtcbiAgICogYGBgXG4gICAqL1xuICBzdGF0aWMgYW55OiBQYXJhbVR5cGVEZWZpbml0aW9uO1xuXG4gIC8qKiBAaGlkZGVuICovXG4gIHR5cGVzOiBhbnk7XG4gIC8qKiBAaGlkZGVuICovXG4gIGVucXVldWUgPSB0cnVlO1xuICAvKiogQGhpZGRlbiAqL1xuICB0eXBlUXVldWU6IGFueVtdID0gW107XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICBwcml2YXRlIGRlZmF1bHRUeXBlczogYW55ID0gcGljayhQYXJhbVR5cGVzLnByb3RvdHlwZSwgW1xuICAgICdoYXNoJyxcbiAgICAnc3RyaW5nJyxcbiAgICAncXVlcnknLFxuICAgICdwYXRoJyxcbiAgICAnaW50JyxcbiAgICAnYm9vbCcsXG4gICAgJ2RhdGUnLFxuICAgICdqc29uJyxcbiAgICAnYW55JyxcbiAgXSk7XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBSZWdpc3RlciBkZWZhdWx0IHR5cGVzLiBTdG9yZSB0aGVtIGluIHRoZSBwcm90b3R5cGUgb2YgdGhpcy50eXBlcy5cbiAgICBjb25zdCBtYWtlVHlwZSA9IChkZWZpbml0aW9uOiBQYXJhbVR5cGVEZWZpbml0aW9uLCBuYW1lOiBzdHJpbmcpID0+IG5ldyBQYXJhbVR5cGUoZXh0ZW5kKHsgbmFtZSB9LCBkZWZpbml0aW9uKSk7XG4gICAgdGhpcy50eXBlcyA9IGluaGVyaXQobWFwKHRoaXMuZGVmYXVsdFR5cGVzLCBtYWtlVHlwZSksIHt9KTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLnR5cGVzID0ge307XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgcGFyYW1ldGVyIHR5cGVcbiAgICpcbiAgICogRW5kIHVzZXJzIHNob3VsZCBjYWxsIFtbVXJsTWF0Y2hlckZhY3RvcnkudHlwZV1dLCB3aGljaCBkZWxlZ2F0ZXMgdG8gdGhpcyBtZXRob2QuXG4gICAqL1xuICB0eXBlKG5hbWU6IHN0cmluZywgZGVmaW5pdGlvbj86IFBhcmFtVHlwZURlZmluaXRpb24sIGRlZmluaXRpb25Gbj86ICgpID0+IFBhcmFtVHlwZURlZmluaXRpb24pIHtcbiAgICBpZiAoIWlzRGVmaW5lZChkZWZpbml0aW9uKSkgcmV0dXJuIHRoaXMudHlwZXNbbmFtZV07XG4gICAgaWYgKHRoaXMudHlwZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHRocm93IG5ldyBFcnJvcihgQSB0eXBlIG5hbWVkICcke25hbWV9JyBoYXMgYWxyZWFkeSBiZWVuIGRlZmluZWQuYCk7XG5cbiAgICB0aGlzLnR5cGVzW25hbWVdID0gbmV3IFBhcmFtVHlwZShleHRlbmQoeyBuYW1lIH0sIGRlZmluaXRpb24pKTtcblxuICAgIGlmIChkZWZpbml0aW9uRm4pIHtcbiAgICAgIHRoaXMudHlwZVF1ZXVlLnB1c2goeyBuYW1lLCBkZWY6IGRlZmluaXRpb25GbiB9KTtcbiAgICAgIGlmICghdGhpcy5lbnF1ZXVlKSB0aGlzLl9mbHVzaFR5cGVRdWV1ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICBfZmx1c2hUeXBlUXVldWUoKSB7XG4gICAgd2hpbGUgKHRoaXMudHlwZVF1ZXVlLmxlbmd0aCkge1xuICAgICAgY29uc3QgdHlwZSA9IHRoaXMudHlwZVF1ZXVlLnNoaWZ0KCk7XG4gICAgICBpZiAodHlwZS5wYXR0ZXJuKSB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgY2Fubm90IG92ZXJyaWRlIGEgdHlwZSdzIC5wYXR0ZXJuIGF0IHJ1bnRpbWUuXCIpO1xuICAgICAgZXh0ZW5kKHRoaXMudHlwZXNbdHlwZS5uYW1lXSwgc2VydmljZXMuJGluamVjdG9yLmludm9rZSh0eXBlLmRlZikpO1xuICAgIH1cbiAgfVxufVxuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gaW5pdERlZmF1bHRUeXBlcygpIHtcbiAgY29uc3QgbWFrZURlZmF1bHRUeXBlID0gZGVmID0+IHtcbiAgICBjb25zdCB2YWxUb1N0cmluZyA9ICh2YWw6IGFueSkgPT4gKHZhbCAhPSBudWxsID8gdmFsLnRvU3RyaW5nKCkgOiB2YWwpO1xuXG4gICAgY29uc3QgZGVmYXVsdFR5cGVCYXNlID0ge1xuICAgICAgZW5jb2RlOiB2YWxUb1N0cmluZyxcbiAgICAgIGRlY29kZTogdmFsVG9TdHJpbmcsXG4gICAgICBpczogaXMoU3RyaW5nKSxcbiAgICAgIHBhdHRlcm46IC8uKi8sXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dHJpcGxlLWVxdWFsc1xuICAgICAgZXF1YWxzOiAoYTogYW55LCBiOiBhbnkpID0+IGEgPT0gYiwgLy8gYWxsb3cgY29lcnNpb24gZm9yIG51bGwvdW5kZWZpbmVkL1wiXCJcbiAgICB9O1xuXG4gICAgcmV0dXJuIGV4dGVuZCh7fSwgZGVmYXVsdFR5cGVCYXNlLCBkZWYpIGFzIFBhcmFtVHlwZURlZmluaXRpb247XG4gIH07XG5cbiAgLy8gRGVmYXVsdCBQYXJhbWV0ZXIgVHlwZSBEZWZpbml0aW9uc1xuICBleHRlbmQoUGFyYW1UeXBlcy5wcm90b3R5cGUsIHtcbiAgICBzdHJpbmc6IG1ha2VEZWZhdWx0VHlwZSh7fSksXG5cbiAgICBwYXRoOiBtYWtlRGVmYXVsdFR5cGUoe1xuICAgICAgcGF0dGVybjogL1teL10qLyxcbiAgICB9KSxcblxuICAgIHF1ZXJ5OiBtYWtlRGVmYXVsdFR5cGUoe30pLFxuXG4gICAgaGFzaDogbWFrZURlZmF1bHRUeXBlKHtcbiAgICAgIGluaGVyaXQ6IGZhbHNlLFxuICAgIH0pLFxuXG4gICAgaW50OiBtYWtlRGVmYXVsdFR5cGUoe1xuICAgICAgZGVjb2RlOiAodmFsOiBzdHJpbmcpID0+IHBhcnNlSW50KHZhbCwgMTApLFxuICAgICAgaXM6IGZ1bmN0aW9uKHZhbDogYW55KSB7XG4gICAgICAgIHJldHVybiAhaXNOdWxsT3JVbmRlZmluZWQodmFsKSAmJiB0aGlzLmRlY29kZSh2YWwudG9TdHJpbmcoKSkgPT09IHZhbDtcbiAgICAgIH0sXG4gICAgICBwYXR0ZXJuOiAvLT9cXGQrLyxcbiAgICB9KSxcblxuICAgIGJvb2w6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICBlbmNvZGU6ICh2YWw6IGFueSkgPT4gKHZhbCAmJiAxKSB8fCAwLFxuICAgICAgZGVjb2RlOiAodmFsOiBzdHJpbmcpID0+IHBhcnNlSW50KHZhbCwgMTApICE9PSAwLFxuICAgICAgaXM6IGlzKEJvb2xlYW4pLFxuICAgICAgcGF0dGVybjogLzB8MS8sXG4gICAgfSksXG5cbiAgICBkYXRlOiBtYWtlRGVmYXVsdFR5cGUoe1xuICAgICAgZW5jb2RlOiBmdW5jdGlvbih2YWw6IGFueSkge1xuICAgICAgICByZXR1cm4gIXRoaXMuaXModmFsKVxuICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgOiBbdmFsLmdldEZ1bGxZZWFyKCksICgnMCcgKyAodmFsLmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpLCAoJzAnICsgdmFsLmdldERhdGUoKSkuc2xpY2UoLTIpXS5qb2luKCctJyk7XG4gICAgICB9LFxuICAgICAgZGVjb2RlOiBmdW5jdGlvbih2YWw6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5pcyh2YWwpKSByZXR1cm4gKDxhbnk+dmFsKSBhcyBEYXRlO1xuICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuY2FwdHVyZS5leGVjKHZhbCk7XG4gICAgICAgIHJldHVybiBtYXRjaCA/IG5ldyBEYXRlKG1hdGNoWzFdLCBtYXRjaFsyXSAtIDEsIG1hdGNoWzNdKSA6IHVuZGVmaW5lZDtcbiAgICAgIH0sXG4gICAgICBpczogKHZhbDogYW55KSA9PiB2YWwgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTih2YWwudmFsdWVPZigpKSxcbiAgICAgIGVxdWFscyhsOiBhbnksIHI6IGFueSkge1xuICAgICAgICByZXR1cm4gWydnZXRGdWxsWWVhcicsICdnZXRNb250aCcsICdnZXREYXRlJ10ucmVkdWNlKChhY2MsIGZuKSA9PiBhY2MgJiYgbFtmbl0oKSA9PT0gcltmbl0oKSwgdHJ1ZSk7XG4gICAgICB9LFxuICAgICAgcGF0dGVybjogL1swLTldezR9LSg/OjBbMS05XXwxWzAtMl0pLSg/OjBbMS05XXxbMS0yXVswLTldfDNbMC0xXSkvLFxuICAgICAgY2FwdHVyZTogLyhbMC05XXs0fSktKDBbMS05XXwxWzAtMl0pLSgwWzEtOV18WzEtMl1bMC05XXwzWzAtMV0pLyxcbiAgICB9KSxcblxuICAgIGpzb246IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICBlbmNvZGU6IHRvSnNvbixcbiAgICAgIGRlY29kZTogZnJvbUpzb24sXG4gICAgICBpczogaXMoT2JqZWN0KSxcbiAgICAgIGVxdWFsczogZXF1YWxzLFxuICAgICAgcGF0dGVybjogL1teL10qLyxcbiAgICB9KSxcblxuICAgIC8vIGRvZXMgbm90IGVuY29kZS9kZWNvZGVcbiAgICBhbnk6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICBlbmNvZGU6IGlkZW50aXR5LFxuICAgICAgZGVjb2RlOiBpZGVudGl0eSxcbiAgICAgIGlzOiAoKSA9PiB0cnVlLFxuICAgICAgZXF1YWxzOiBlcXVhbHMsXG4gICAgfSksXG4gIH0pO1xufVxuXG5pbml0RGVmYXVsdFR5cGVzKCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvcGFyYW1zL3BhcmFtVHlwZXMudHMiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHBhcmFtc1xuICovXG4vKiogKi9cbmltcG9ydCB7IGV4dGVuZCwgYW5jZXN0b3JzLCBPYmogfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi4vc3RhdGUvc3RhdGVPYmplY3QnO1xuXG4vKiogQGludGVybmFsYXBpICovXG5leHBvcnQgY2xhc3MgU3RhdGVQYXJhbXMge1xuICBba2V5OiBzdHJpbmddOiBhbnk7XG5cbiAgY29uc3RydWN0b3IocGFyYW1zOiBPYmogPSB7fSkge1xuICAgIGV4dGVuZCh0aGlzLCBwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlcyBhIHNldCBvZiBwYXJhbWV0ZXJzIHdpdGggYWxsIHBhcmFtZXRlcnMgaW5oZXJpdGVkIGJldHdlZW4gdGhlIGNvbW1vbiBwYXJlbnRzIG9mIHRoZVxuICAgKiBjdXJyZW50IHN0YXRlIGFuZCBhIGdpdmVuIGRlc3RpbmF0aW9uIHN0YXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gbmV3UGFyYW1zIFRoZSBzZXQgb2YgcGFyYW1ldGVycyB3aGljaCB3aWxsIGJlIGNvbXBvc2l0ZWQgd2l0aCBpbmhlcml0ZWQgcGFyYW1zLlxuICAgKiBAcGFyYW0ge09iamVjdH0gJGN1cnJlbnQgSW50ZXJuYWwgZGVmaW5pdGlvbiBvZiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHN0YXRlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gJHRvIEludGVybmFsIGRlZmluaXRpb24gb2Ygb2JqZWN0IHJlcHJlc2VudGluZyBzdGF0ZSB0byB0cmFuc2l0aW9uIHRvLlxuICAgKi9cbiAgJGluaGVyaXQobmV3UGFyYW1zOiBPYmosICRjdXJyZW50OiBTdGF0ZU9iamVjdCwgJHRvOiBTdGF0ZU9iamVjdCkge1xuICAgIGxldCBwYXJlbnRQYXJhbXM6IHN0cmluZ1tdO1xuICAgIGNvbnN0IHBhcmVudHMgPSBhbmNlc3RvcnMoJGN1cnJlbnQsICR0byksXG4gICAgICBpbmhlcml0ZWQ6IE9iaiA9IHt9LFxuICAgICAgaW5oZXJpdExpc3Q6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGkgaW4gcGFyZW50cykge1xuICAgICAgaWYgKCFwYXJlbnRzW2ldIHx8ICFwYXJlbnRzW2ldLnBhcmFtcykgY29udGludWU7XG4gICAgICBwYXJlbnRQYXJhbXMgPSBPYmplY3Qua2V5cyhwYXJlbnRzW2ldLnBhcmFtcyk7XG4gICAgICBpZiAoIXBhcmVudFBhcmFtcy5sZW5ndGgpIGNvbnRpbnVlO1xuXG4gICAgICBmb3IgKGNvbnN0IGogaW4gcGFyZW50UGFyYW1zKSB7XG4gICAgICAgIGlmIChpbmhlcml0TGlzdC5pbmRleE9mKHBhcmVudFBhcmFtc1tqXSkgPj0gMCkgY29udGludWU7XG4gICAgICAgIGluaGVyaXRMaXN0LnB1c2gocGFyZW50UGFyYW1zW2pdKTtcbiAgICAgICAgaW5oZXJpdGVkW3BhcmVudFBhcmFtc1tqXV0gPSB0aGlzW3BhcmVudFBhcmFtc1tqXV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBleHRlbmQoe30sIGluaGVyaXRlZCwgbmV3UGFyYW1zKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3BhcmFtcy9zdGF0ZVBhcmFtcy50cyIsIi8qKiBAbW9kdWxlIHJlc29sdmUgKi8gLyoqIGZvciB0eXBlZG9jICovXG5leHBvcnQgKiBmcm9tICcuL2ludGVyZmFjZSc7XG5leHBvcnQgKiBmcm9tICcuL3Jlc29sdmFibGUnO1xuZXhwb3J0ICogZnJvbSAnLi9yZXNvbHZlQ29udGV4dCc7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvcmVzb2x2ZS9pbmRleC50cyIsIi8qKiBAbW9kdWxlIHN0YXRlICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgT2JqLCBvbWl0LCBub29wLCBleHRlbmQsIGluaGVyaXQsIHZhbHVlcywgYXBwbHlQYWlycywgdGFpbCwgbWFwT2JqLCBpZGVudGl0eSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNEZWZpbmVkLCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNBcnJheSB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJy4uL2NvbW1vbi9zdHJpbmdzJztcbmltcG9ydCB7IHByb3AsIHBhdHRlcm4sIGlzLCBwaXBlLCB2YWwgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IFN0YXRlRGVjbGFyYXRpb24gfSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyBTdGF0ZU1hdGNoZXIgfSBmcm9tICcuL3N0YXRlTWF0Y2hlcic7XG5pbXBvcnQgeyBQYXJhbSB9IGZyb20gJy4uL3BhcmFtcy9wYXJhbSc7XG5pbXBvcnQgeyBVcmxNYXRjaGVyRmFjdG9yeSB9IGZyb20gJy4uL3VybC91cmxNYXRjaGVyRmFjdG9yeSc7XG5pbXBvcnQgeyBVcmxNYXRjaGVyIH0gZnJvbSAnLi4vdXJsL3VybE1hdGNoZXInO1xuaW1wb3J0IHsgUmVzb2x2YWJsZSB9IGZyb20gJy4uL3Jlc29sdmUvcmVzb2x2YWJsZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgUmVzb2x2ZVBvbGljeSB9IGZyb20gJy4uL3Jlc29sdmUvaW50ZXJmYWNlJztcbmltcG9ydCB7IFBhcmFtRmFjdG9yeSB9IGZyb20gJy4uL3VybC9pbnRlcmZhY2UnO1xuXG5jb25zdCBwYXJzZVVybCA9ICh1cmw6IHN0cmluZyk6IGFueSA9PiB7XG4gIGlmICghaXNTdHJpbmcodXJsKSkgcmV0dXJuIGZhbHNlO1xuICBjb25zdCByb290ID0gdXJsLmNoYXJBdCgwKSA9PT0gJ14nO1xuICByZXR1cm4geyB2YWw6IHJvb3QgPyB1cmwuc3Vic3RyaW5nKDEpIDogdXJsLCByb290IH07XG59O1xuXG5leHBvcnQgdHlwZSBCdWlsZGVyRnVuY3Rpb24gPSAoc3RhdGU6IFN0YXRlT2JqZWN0LCBwYXJlbnQ/OiBCdWlsZGVyRnVuY3Rpb24pID0+IGFueTtcblxuaW50ZXJmYWNlIEJ1aWxkZXJzIHtcbiAgW2tleTogc3RyaW5nXTogQnVpbGRlckZ1bmN0aW9uW107XG5cbiAgbmFtZTogQnVpbGRlckZ1bmN0aW9uW107XG4gIHBhcmVudDogQnVpbGRlckZ1bmN0aW9uW107XG4gIGRhdGE6IEJ1aWxkZXJGdW5jdGlvbltdO1xuICB1cmw6IEJ1aWxkZXJGdW5jdGlvbltdO1xuICBuYXZpZ2FibGU6IEJ1aWxkZXJGdW5jdGlvbltdO1xuICBwYXJhbXM6IEJ1aWxkZXJGdW5jdGlvbltdO1xuICB2aWV3czogQnVpbGRlckZ1bmN0aW9uW107XG4gIHBhdGg6IEJ1aWxkZXJGdW5jdGlvbltdO1xuICBpbmNsdWRlczogQnVpbGRlckZ1bmN0aW9uW107XG4gIHJlc29sdmFibGVzOiBCdWlsZGVyRnVuY3Rpb25bXTtcbn1cblxuZnVuY3Rpb24gbmFtZUJ1aWxkZXIoc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gIHJldHVybiBzdGF0ZS5uYW1lO1xufVxuXG5mdW5jdGlvbiBzZWxmQnVpbGRlcihzdGF0ZTogU3RhdGVPYmplY3QpIHtcbiAgc3RhdGUuc2VsZi4kJHN0YXRlID0gKCkgPT4gc3RhdGU7XG4gIHJldHVybiBzdGF0ZS5zZWxmO1xufVxuXG5mdW5jdGlvbiBkYXRhQnVpbGRlcihzdGF0ZTogU3RhdGVPYmplY3QpIHtcbiAgaWYgKHN0YXRlLnBhcmVudCAmJiBzdGF0ZS5wYXJlbnQuZGF0YSkge1xuICAgIHN0YXRlLmRhdGEgPSBzdGF0ZS5zZWxmLmRhdGEgPSBpbmhlcml0KHN0YXRlLnBhcmVudC5kYXRhLCBzdGF0ZS5kYXRhKTtcbiAgfVxuICByZXR1cm4gc3RhdGUuZGF0YTtcbn1cblxuY29uc3QgZ2V0VXJsQnVpbGRlciA9ICgkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcjogVXJsTWF0Y2hlckZhY3RvcnksIHJvb3Q6ICgpID0+IFN0YXRlT2JqZWN0KSA9PlxuICBmdW5jdGlvbiB1cmxCdWlsZGVyKHN0YXRlOiBTdGF0ZU9iamVjdCkge1xuICAgIGNvbnN0IHN0YXRlRGVjOiBTdGF0ZURlY2xhcmF0aW9uID0gPGFueT5zdGF0ZTtcblxuICAgIC8vIEZvciBmdXR1cmUgc3RhdGVzLCBpLmUuLCBzdGF0ZXMgd2hvc2UgbmFtZSBlbmRzIHdpdGggYC4qKmAsXG4gICAgLy8gbWF0Y2ggYW55dGhpbmcgdGhhdCBzdGFydHMgd2l0aCB0aGUgdXJsIHByZWZpeFxuICAgIGlmIChzdGF0ZURlYyAmJiBzdGF0ZURlYy51cmwgJiYgc3RhdGVEZWMubmFtZSAmJiBzdGF0ZURlYy5uYW1lLm1hdGNoKC9cXC5cXCpcXCokLykpIHtcbiAgICAgIHN0YXRlRGVjLnVybCArPSAne3JlbWFpbmRlcjphbnl9JzsgLy8gbWF0Y2ggYW55IHBhdGggKC4qKVxuICAgIH1cblxuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlVXJsKHN0YXRlRGVjLnVybCksXG4gICAgICBwYXJlbnQgPSBzdGF0ZS5wYXJlbnQ7XG4gICAgY29uc3QgdXJsID0gIXBhcnNlZFxuICAgICAgPyBzdGF0ZURlYy51cmxcbiAgICAgIDogJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIuY29tcGlsZShwYXJzZWQudmFsLCB7XG4gICAgICAgICAgcGFyYW1zOiBzdGF0ZS5wYXJhbXMgfHwge30sXG4gICAgICAgICAgcGFyYW1NYXA6IGZ1bmN0aW9uKHBhcmFtQ29uZmlnOiBhbnksIGlzU2VhcmNoOiBib29sZWFuKSB7XG4gICAgICAgICAgICBpZiAoc3RhdGVEZWMucmVsb2FkT25TZWFyY2ggPT09IGZhbHNlICYmIGlzU2VhcmNoKVxuICAgICAgICAgICAgICBwYXJhbUNvbmZpZyA9IGV4dGVuZChwYXJhbUNvbmZpZyB8fCB7fSwgeyBkeW5hbWljOiB0cnVlIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtQ29uZmlnO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgaWYgKCF1cmwpIHJldHVybiBudWxsO1xuICAgIGlmICghJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIuaXNNYXRjaGVyKHVybCkpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB1cmwgJyR7dXJsfScgaW4gc3RhdGUgJyR7c3RhdGV9J2ApO1xuICAgIHJldHVybiBwYXJzZWQgJiYgcGFyc2VkLnJvb3QgPyB1cmwgOiAoKHBhcmVudCAmJiBwYXJlbnQubmF2aWdhYmxlKSB8fCByb290KCkpLnVybC5hcHBlbmQoPFVybE1hdGNoZXI+dXJsKTtcbiAgfTtcblxuY29uc3QgZ2V0TmF2aWdhYmxlQnVpbGRlciA9IChpc1Jvb3Q6IChzdGF0ZTogU3RhdGVPYmplY3QpID0+IGJvb2xlYW4pID0+XG4gIGZ1bmN0aW9uIG5hdmlnYWJsZUJ1aWxkZXIoc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gICAgcmV0dXJuICFpc1Jvb3Qoc3RhdGUpICYmIHN0YXRlLnVybCA/IHN0YXRlIDogc3RhdGUucGFyZW50ID8gc3RhdGUucGFyZW50Lm5hdmlnYWJsZSA6IG51bGw7XG4gIH07XG5cbmNvbnN0IGdldFBhcmFtc0J1aWxkZXIgPSAocGFyYW1GYWN0b3J5OiBQYXJhbUZhY3RvcnkpID0+XG4gIGZ1bmN0aW9uIHBhcmFtc0J1aWxkZXIoc3RhdGU6IFN0YXRlT2JqZWN0KTogeyBba2V5OiBzdHJpbmddOiBQYXJhbSB9IHtcbiAgICBjb25zdCBtYWtlQ29uZmlnUGFyYW0gPSAoY29uZmlnOiBhbnksIGlkOiBzdHJpbmcpID0+IHBhcmFtRmFjdG9yeS5mcm9tQ29uZmlnKGlkLCBudWxsLCBjb25maWcpO1xuICAgIGNvbnN0IHVybFBhcmFtczogUGFyYW1bXSA9IChzdGF0ZS51cmwgJiYgc3RhdGUudXJsLnBhcmFtZXRlcnMoeyBpbmhlcml0OiBmYWxzZSB9KSkgfHwgW107XG4gICAgY29uc3Qgbm9uVXJsUGFyYW1zOiBQYXJhbVtdID0gdmFsdWVzKG1hcE9iaihvbWl0KHN0YXRlLnBhcmFtcyB8fCB7fSwgdXJsUGFyYW1zLm1hcChwcm9wKCdpZCcpKSksIG1ha2VDb25maWdQYXJhbSkpO1xuICAgIHJldHVybiB1cmxQYXJhbXNcbiAgICAgIC5jb25jYXQobm9uVXJsUGFyYW1zKVxuICAgICAgLm1hcChwID0+IFtwLmlkLCBwXSlcbiAgICAgIC5yZWR1Y2UoYXBwbHlQYWlycywge30pO1xuICB9O1xuXG5mdW5jdGlvbiBwYXRoQnVpbGRlcihzdGF0ZTogU3RhdGVPYmplY3QpIHtcbiAgcmV0dXJuIHN0YXRlLnBhcmVudCA/IHN0YXRlLnBhcmVudC5wYXRoLmNvbmNhdChzdGF0ZSkgOiAvKnJvb3QqLyBbc3RhdGVdO1xufVxuXG5mdW5jdGlvbiBpbmNsdWRlc0J1aWxkZXIoc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gIGNvbnN0IGluY2x1ZGVzID0gc3RhdGUucGFyZW50ID8gZXh0ZW5kKHt9LCBzdGF0ZS5wYXJlbnQuaW5jbHVkZXMpIDoge307XG4gIGluY2x1ZGVzW3N0YXRlLm5hbWVdID0gdHJ1ZTtcbiAgcmV0dXJuIGluY2x1ZGVzO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSBbW1N0YXRlQnVpbGRlci5idWlsZGVyXV0gZnVuY3Rpb24gZm9yIHRoZSBgcmVzb2x2ZTpgIGJsb2NrIG9uIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0uXG4gKlxuICogV2hlbiB0aGUgW1tTdGF0ZUJ1aWxkZXJdXSBidWlsZHMgYSBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0IGZyb20gYSByYXcgW1tTdGF0ZURlY2xhcmF0aW9uXV0sIHRoaXMgYnVpbGRlclxuICogdmFsaWRhdGVzIHRoZSBgcmVzb2x2ZWAgcHJvcGVydHkgYW5kIGNvbnZlcnRzIGl0IHRvIGEgW1tSZXNvbHZhYmxlXV0gYXJyYXkuXG4gKlxuICogcmVzb2x2ZTogaW5wdXQgdmFsdWUgY2FuIGJlOlxuICpcbiAqIHtcbiAqICAgLy8gYW5hbHl6ZWQgYnV0IG5vdCBpbmplY3RlZFxuICogICBteUZvb1Jlc29sdmU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gXCJteUZvb0RhdGFcIjsgfSxcbiAqXG4gKiAgIC8vIGZ1bmN0aW9uLnRvU3RyaW5nKCkgcGFyc2VkLCBcIkRlcGVuZGVuY3lOYW1lXCIgZGVwIGFzIHN0cmluZyAobm90IG1pbi1zYWZlKVxuICogICBteUJhclJlc29sdmU6IGZ1bmN0aW9uKERlcGVuZGVuY3lOYW1lKSB7IHJldHVybiBEZXBlbmRlbmN5TmFtZS5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sXG4gKlxuICogICAvLyBBcnJheSBzcGxpdDsgXCJEZXBlbmRlbmN5TmFtZVwiIGRlcCBhcyBzdHJpbmdcbiAqICAgbXlCYXpSZXNvbHZlOiBbIFwiRGVwZW5kZW5jeU5hbWVcIiwgZnVuY3Rpb24oZGVwKSB7IHJldHVybiBkZXAuZmV0Y2hTb21ldGhpbmdBc1Byb21pc2UoKSB9LFxuICpcbiAqICAgLy8gQXJyYXkgc3BsaXQ7IERlcGVuZGVuY3lUeXBlIGRlcCBhcyB0b2tlbiAoY29tcGFyZWQgdXNpbmcgPT09KVxuICogICBteVF1eFJlc29sdmU6IFsgRGVwZW5kZW5jeVR5cGUsIGZ1bmN0aW9uKGRlcCkgeyByZXR1cm4gZGVwLmZldGNoU29tZXRpbmdBc1Byb21pc2UoKSB9LFxuICpcbiAqICAgLy8gdmFsLiRpbmplY3QgdXNlZCBhcyBkZXBzXG4gKiAgIC8vIHdoZXJlOlxuICogICAvLyAgICAgY29yZ2VSZXNvbHZlLiRpbmplY3QgPSBbXCJEZXBlbmRlbmN5TmFtZVwiXTtcbiAqICAgLy8gICAgIGZ1bmN0aW9uIGNvcmdlUmVzb2x2ZShkZXApIHsgZGVwLmZldGNoU29tZXRpbmdBc1Byb21pc2UoKSB9XG4gKiAgIC8vIHRoZW4gXCJEZXBlbmRlbmN5TmFtZVwiIGRlcCBhcyBzdHJpbmdcbiAqICAgbXlDb3JnZVJlc29sdmU6IGNvcmdlUmVzb2x2ZSxcbiAqXG4gKiAgLy8gaW5qZWN0IHNlcnZpY2UgYnkgbmFtZVxuICogIC8vIFdoZW4gYSBzdHJpbmcgaXMgZm91bmQsIGRlc3VnYXIgY3JlYXRpbmcgYSByZXNvbHZlIHRoYXQgaW5qZWN0cyB0aGUgbmFtZWQgc2VydmljZVxuICogICBteUdyYXVsdFJlc29sdmU6IFwiU29tZVNlcnZpY2VcIlxuICogfVxuICpcbiAqIG9yOlxuICpcbiAqIFtcbiAqICAgbmV3IFJlc29sdmFibGUoXCJteUZvb1Jlc29sdmVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBcIm15Rm9vRGF0YVwiIH0pLFxuICogICBuZXcgUmVzb2x2YWJsZShcIm15QmFyUmVzb2x2ZVwiLCBmdW5jdGlvbihkZXApIHsgcmV0dXJuIGRlcC5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sIFsgXCJEZXBlbmRlbmN5TmFtZVwiIF0pLFxuICogICB7IHByb3ZpZGU6IFwibXlCYXpSZXNvbHZlXCIsIHVzZUZhY3Rvcnk6IGZ1bmN0aW9uKGRlcCkgeyBkZXAuZmV0Y2hTb21ldGhpbmdBc1Byb21pc2UoKSB9LCBkZXBzOiBbIFwiRGVwZW5kZW5jeU5hbWVcIiBdIH1cbiAqIF1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmFibGVzQnVpbGRlcihzdGF0ZTogU3RhdGVPYmplY3QpOiBSZXNvbHZhYmxlW10ge1xuICBpbnRlcmZhY2UgVHVwbGUge1xuICAgIHRva2VuOiBhbnk7XG4gICAgdmFsOiBhbnk7XG4gICAgZGVwczogYW55W107XG4gICAgcG9saWN5OiBSZXNvbHZlUG9saWN5O1xuICB9XG5cbiAgLyoqIGNvbnZlcnQgcmVzb2x2ZToge30gYW5kIHJlc29sdmVQb2xpY3k6IHt9IG9iamVjdHMgdG8gYW4gYXJyYXkgb2YgdHVwbGVzICovXG4gIGNvbnN0IG9iamVjdHMyVHVwbGVzID0gKHJlc29sdmVPYmo6IE9iaiwgcmVzb2x2ZVBvbGljaWVzOiB7IFtrZXk6IHN0cmluZ106IFJlc29sdmVQb2xpY3kgfSkgPT5cbiAgICBPYmplY3Qua2V5cyhyZXNvbHZlT2JqIHx8IHt9KS5tYXAodG9rZW4gPT4gKHtcbiAgICAgIHRva2VuLFxuICAgICAgdmFsOiByZXNvbHZlT2JqW3Rva2VuXSxcbiAgICAgIGRlcHM6IHVuZGVmaW5lZCxcbiAgICAgIHBvbGljeTogcmVzb2x2ZVBvbGljaWVzW3Rva2VuXSxcbiAgICB9KSk7XG5cbiAgLyoqIGZldGNoIERJIGFubm90YXRpb25zIGZyb20gYSBmdW5jdGlvbiBvciBuZzEtc3R5bGUgYXJyYXkgKi9cbiAgY29uc3QgYW5ub3RhdGUgPSAoZm46IEZ1bmN0aW9uKSA9PiB7XG4gICAgY29uc3QgJGluamVjdG9yID0gc2VydmljZXMuJGluamVjdG9yO1xuICAgIC8vIG5nMSBkb2Vzbid0IGhhdmUgYW4gJGluamVjdG9yIHVudGlsIHJ1bnRpbWUuXG4gICAgLy8gSWYgdGhlICRpbmplY3RvciBkb2Vzbid0IGV4aXN0LCB1c2UgXCJkZWZlcnJlZFwiIGxpdGVyYWwgYXMgYVxuICAgIC8vIG1hcmtlciBpbmRpY2F0aW5nIHRoZXkgc2hvdWxkIGJlIGFubm90YXRlZCB3aGVuIHJ1bnRpbWUgc3RhcnRzXG4gICAgcmV0dXJuIGZuWyckaW5qZWN0J10gfHwgKCRpbmplY3RvciAmJiAkaW5qZWN0b3IuYW5ub3RhdGUoZm4sICRpbmplY3Rvci5zdHJpY3REaSkpIHx8IDxhbnk+J2RlZmVycmVkJztcbiAgfTtcblxuICAvKiogdHJ1ZSBpZiB0aGUgb2JqZWN0IGhhcyBib3RoIGB0b2tlbmAgYW5kIGByZXNvbHZlRm5gLCBhbmQgaXMgcHJvYmFibHkgYSBbW1Jlc29sdmVMaXRlcmFsXV0gKi9cbiAgY29uc3QgaXNSZXNvbHZlTGl0ZXJhbCA9IChvYmo6IGFueSkgPT4gISEob2JqLnRva2VuICYmIG9iai5yZXNvbHZlRm4pO1xuXG4gIC8qKiB0cnVlIGlmIHRoZSBvYmplY3QgbG9va3MgbGlrZSBhIHByb3ZpZGUgbGl0ZXJhbCwgb3IgYSBuZzIgUHJvdmlkZXIgKi9cbiAgY29uc3QgaXNMaWtlTmcyUHJvdmlkZXIgPSAob2JqOiBhbnkpID0+XG4gICAgISEoKG9iai5wcm92aWRlIHx8IG9iai50b2tlbikgJiYgKG9iai51c2VWYWx1ZSB8fCBvYmoudXNlRmFjdG9yeSB8fCBvYmoudXNlRXhpc3RpbmcgfHwgb2JqLnVzZUNsYXNzKSk7XG5cbiAgLyoqIHRydWUgaWYgdGhlIG9iamVjdCBsb29rcyBsaWtlIGEgdHVwbGUgZnJvbSBvYmoyVHVwbGVzICovXG4gIGNvbnN0IGlzVHVwbGVGcm9tT2JqID0gKG9iajogYW55KSA9PlxuICAgICEhKG9iaiAmJiBvYmoudmFsICYmIChpc1N0cmluZyhvYmoudmFsKSB8fCBpc0FycmF5KG9iai52YWwpIHx8IGlzRnVuY3Rpb24ob2JqLnZhbCkpKTtcblxuICAvKiogZXh0cmFjdHMgdGhlIHRva2VuIGZyb20gYSBQcm92aWRlciBvciBwcm92aWRlIGxpdGVyYWwgKi9cbiAgY29uc3QgZ2V0VG9rZW4gPSAocDogYW55KSA9PiBwLnByb3ZpZGUgfHwgcC50b2tlbjtcblxuICAvKiogR2l2ZW4gYSBsaXRlcmFsIHJlc29sdmUgb3IgcHJvdmlkZXIgb2JqZWN0LCByZXR1cm5zIGEgUmVzb2x2YWJsZSAqL1xuICBjb25zdCBsaXRlcmFsMlJlc29sdmFibGUgPSBwYXR0ZXJuKFtcbiAgICBbcHJvcCgncmVzb2x2ZUZuJyksIHAgPT4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksIHAucmVzb2x2ZUZuLCBwLmRlcHMsIHAucG9saWN5KV0sXG4gICAgW3Byb3AoJ3VzZUZhY3RvcnknKSwgcCA9PiBuZXcgUmVzb2x2YWJsZShnZXRUb2tlbihwKSwgcC51c2VGYWN0b3J5LCBwLmRlcHMgfHwgcC5kZXBlbmRlbmNpZXMsIHAucG9saWN5KV0sXG4gICAgW3Byb3AoJ3VzZUNsYXNzJyksIHAgPT4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksICgpID0+IG5ldyAoPGFueT5wLnVzZUNsYXNzKSgpLCBbXSwgcC5wb2xpY3kpXSxcbiAgICBbcHJvcCgndXNlVmFsdWUnKSwgcCA9PiBuZXcgUmVzb2x2YWJsZShnZXRUb2tlbihwKSwgKCkgPT4gcC51c2VWYWx1ZSwgW10sIHAucG9saWN5LCBwLnVzZVZhbHVlKV0sXG4gICAgW3Byb3AoJ3VzZUV4aXN0aW5nJyksIHAgPT4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksIGlkZW50aXR5LCBbcC51c2VFeGlzdGluZ10sIHAucG9saWN5KV0sXG4gIF0pO1xuXG4gIGNvbnN0IHR1cGxlMlJlc29sdmFibGUgPSBwYXR0ZXJuKFtcbiAgICBbcGlwZShwcm9wKCd2YWwnKSwgaXNTdHJpbmcpLCAodHVwbGU6IFR1cGxlKSA9PiBuZXcgUmVzb2x2YWJsZSh0dXBsZS50b2tlbiwgaWRlbnRpdHksIFt0dXBsZS52YWxdLCB0dXBsZS5wb2xpY3kpXSxcbiAgICBbXG4gICAgICBwaXBlKHByb3AoJ3ZhbCcpLCBpc0FycmF5KSxcbiAgICAgICh0dXBsZTogVHVwbGUpID0+IG5ldyBSZXNvbHZhYmxlKHR1cGxlLnRva2VuLCB0YWlsKDxhbnlbXT50dXBsZS52YWwpLCB0dXBsZS52YWwuc2xpY2UoMCwgLTEpLCB0dXBsZS5wb2xpY3kpLFxuICAgIF0sXG4gICAgW1xuICAgICAgcGlwZShwcm9wKCd2YWwnKSwgaXNGdW5jdGlvbiksXG4gICAgICAodHVwbGU6IFR1cGxlKSA9PiBuZXcgUmVzb2x2YWJsZSh0dXBsZS50b2tlbiwgdHVwbGUudmFsLCBhbm5vdGF0ZSh0dXBsZS52YWwpLCB0dXBsZS5wb2xpY3kpLFxuICAgIF0sXG4gIF0pO1xuXG4gIGNvbnN0IGl0ZW0yUmVzb2x2YWJsZSA9IDwob2JqOiBhbnkpID0+IFJlc29sdmFibGU+cGF0dGVybihbXG4gICAgW2lzKFJlc29sdmFibGUpLCAocjogUmVzb2x2YWJsZSkgPT4gcl0sXG4gICAgW2lzUmVzb2x2ZUxpdGVyYWwsIGxpdGVyYWwyUmVzb2x2YWJsZV0sXG4gICAgW2lzTGlrZU5nMlByb3ZpZGVyLCBsaXRlcmFsMlJlc29sdmFibGVdLFxuICAgIFtpc1R1cGxlRnJvbU9iaiwgdHVwbGUyUmVzb2x2YWJsZV0sXG4gICAgW1xuICAgICAgdmFsKHRydWUpLFxuICAgICAgKG9iajogYW55KSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNvbHZlIHZhbHVlOiAnICsgc3RyaW5naWZ5KG9iaikpO1xuICAgICAgfSxcbiAgICBdLFxuICBdKTtcblxuICAvLyBJZiByZXNvbHZlQmxvY2sgaXMgYWxyZWFkeSBhbiBhcnJheSwgdXNlIGl0IGFzLWlzLlxuICAvLyBPdGhlcndpc2UsIGFzc3VtZSBpdCdzIGFuIG9iamVjdCBhbmQgY29udmVydCB0byBhbiBBcnJheSBvZiB0dXBsZXNcbiAgY29uc3QgZGVjbCA9IHN0YXRlLnJlc29sdmU7XG4gIGNvbnN0IGl0ZW1zOiBhbnlbXSA9IGlzQXJyYXkoZGVjbCkgPyBkZWNsIDogb2JqZWN0czJUdXBsZXMoZGVjbCwgc3RhdGUucmVzb2x2ZVBvbGljeSB8fCB7fSk7XG4gIHJldHVybiBpdGVtcy5tYXAoaXRlbTJSZXNvbHZhYmxlKTtcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxhcGkgQSBpbnRlcm5hbCBnbG9iYWwgc2VydmljZVxuICpcbiAqIFN0YXRlQnVpbGRlciBpcyBhIGZhY3RvcnkgZm9yIHRoZSBpbnRlcm5hbCBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0cy5cbiAqXG4gKiBXaGVuIHlvdSByZWdpc3RlciBhIHN0YXRlIHdpdGggdGhlIFtbU3RhdGVSZWdpc3RyeV1dLCB5b3UgcmVnaXN0ZXIgYSBwbGFpbiBvbGQgamF2YXNjcmlwdCBvYmplY3Qgd2hpY2hcbiAqIGNvbmZvcm1zIHRvIHRoZSBbW1N0YXRlRGVjbGFyYXRpb25dXSBpbnRlcmZhY2UuICBUaGlzIGZhY3RvcnkgdGFrZXMgdGhhdCBvYmplY3QgYW5kIGJ1aWxkcyB0aGUgY29ycmVzcG9uZGluZ1xuICogW1tTdGF0ZU9iamVjdF1dIG9iamVjdCwgd2hpY2ggaGFzIGFuIEFQSSBhbmQgaXMgdXNlZCBpbnRlcm5hbGx5LlxuICpcbiAqIEN1c3RvbSBwcm9wZXJ0aWVzIG9yIEFQSSBtYXkgYmUgYWRkZWQgdG8gdGhlIGludGVybmFsIFtbU3RhdGVPYmplY3RdXSBvYmplY3QgYnkgcmVnaXN0ZXJpbmcgYSBkZWNvcmF0b3IgZnVuY3Rpb25cbiAqIHVzaW5nIHRoZSBbW2J1aWxkZXJdXSBtZXRob2QuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdGF0ZUJ1aWxkZXIge1xuICAvKiogQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYWxsIHRoZSBCdWlsZGVyRnVuY3Rpb25zIHJlZ2lzdGVyZWQsIGtleSdkIGJ5IHRoZSBuYW1lIG9mIHRoZSBTdGF0ZSBwcm9wZXJ0eSB0aGV5IGJ1aWxkICovXG4gIHByaXZhdGUgYnVpbGRlcnM6IEJ1aWxkZXJzO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbWF0Y2hlcjogU3RhdGVNYXRjaGVyLCB1cmxNYXRjaGVyRmFjdG9yeTogVXJsTWF0Y2hlckZhY3RvcnkpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgIGNvbnN0IHJvb3QgPSAoKSA9PiBtYXRjaGVyLmZpbmQoJycpO1xuICAgIGNvbnN0IGlzUm9vdCA9IChzdGF0ZTogU3RhdGVPYmplY3QpID0+IHN0YXRlLm5hbWUgPT09ICcnO1xuXG4gICAgZnVuY3Rpb24gcGFyZW50QnVpbGRlcihzdGF0ZTogU3RhdGVPYmplY3QpIHtcbiAgICAgIGlmIChpc1Jvb3Qoc3RhdGUpKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiBtYXRjaGVyLmZpbmQoc2VsZi5wYXJlbnROYW1lKHN0YXRlKSkgfHwgcm9vdCgpO1xuICAgIH1cblxuICAgIHRoaXMuYnVpbGRlcnMgPSB7XG4gICAgICBuYW1lOiBbbmFtZUJ1aWxkZXJdLFxuICAgICAgc2VsZjogW3NlbGZCdWlsZGVyXSxcbiAgICAgIHBhcmVudDogW3BhcmVudEJ1aWxkZXJdLFxuICAgICAgZGF0YTogW2RhdGFCdWlsZGVyXSxcbiAgICAgIC8vIEJ1aWxkIGEgVVJMTWF0Y2hlciBpZiBuZWNlc3NhcnksIGVpdGhlciB2aWEgYSByZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkxcbiAgICAgIHVybDogW2dldFVybEJ1aWxkZXIodXJsTWF0Y2hlckZhY3RvcnksIHJvb3QpXSxcbiAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIGNsb3Nlc3QgYW5jZXN0b3Igc3RhdGUgdGhhdCBoYXMgYSBVUkwgKGkuZS4gaXMgbmF2aWdhYmxlKVxuICAgICAgbmF2aWdhYmxlOiBbZ2V0TmF2aWdhYmxlQnVpbGRlcihpc1Jvb3QpXSxcbiAgICAgIHBhcmFtczogW2dldFBhcmFtc0J1aWxkZXIodXJsTWF0Y2hlckZhY3RvcnkucGFyYW1GYWN0b3J5KV0sXG4gICAgICAvLyBFYWNoIGZyYW1ld29yay1zcGVjaWZpYyB1aS1yb3V0ZXIgaW1wbGVtZW50YXRpb24gc2hvdWxkIGRlZmluZSBpdHMgb3duIGB2aWV3c2AgYnVpbGRlclxuICAgICAgLy8gZS5nLiwgc3JjL25nMS9zdGF0ZWJ1aWxkZXJzL3ZpZXdzLnRzXG4gICAgICB2aWV3czogW10sXG4gICAgICAvLyBLZWVwIGEgZnVsbCBwYXRoIGZyb20gdGhlIHJvb3QgZG93biB0byB0aGlzIHN0YXRlIGFzIHRoaXMgaXMgbmVlZGVkIGZvciBzdGF0ZSBhY3RpdmF0aW9uLlxuICAgICAgcGF0aDogW3BhdGhCdWlsZGVyXSxcbiAgICAgIC8vIFNwZWVkIHVwICRzdGF0ZS5pbmNsdWRlcygpIGFzIGl0J3MgdXNlZCBhIGxvdFxuICAgICAgaW5jbHVkZXM6IFtpbmNsdWRlc0J1aWxkZXJdLFxuICAgICAgcmVzb2x2YWJsZXM6IFtyZXNvbHZhYmxlc0J1aWxkZXJdLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgW1tCdWlsZGVyRnVuY3Rpb25dXSBmb3IgYSBzcGVjaWZpYyBbW1N0YXRlT2JqZWN0XV0gcHJvcGVydHkgKGUuZy4sIGBwYXJlbnRgLCBgdXJsYCwgb3IgYHBhdGhgKS5cbiAgICogTW9yZSB0aGFuIG9uZSBCdWlsZGVyRnVuY3Rpb24gY2FuIGJlIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gcHJvcGVydHkuXG4gICAqXG4gICAqIFRoZSBCdWlsZGVyRnVuY3Rpb24ocykgd2lsbCBiZSB1c2VkIHRvIGRlZmluZSB0aGUgcHJvcGVydHkgb24gYW55IHN1YnNlcXVlbnRseSBidWlsdCBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0cy5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIFN0YXRlIHByb3BlcnR5IGJlaW5nIHJlZ2lzdGVyZWQgZm9yLlxuICAgKiBAcGFyYW0gZm4gVGhlIEJ1aWxkZXJGdW5jdGlvbiB3aGljaCB3aWxsIGJlIHVzZWQgdG8gYnVpbGQgdGhlIFN0YXRlIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggZGVyZWdpc3RlcnMgdGhlIEJ1aWxkZXJGdW5jdGlvblxuICAgKi9cbiAgYnVpbGRlcihuYW1lOiBzdHJpbmcsIGZuOiBCdWlsZGVyRnVuY3Rpb24pOiBCdWlsZGVyRnVuY3Rpb24gfCBCdWlsZGVyRnVuY3Rpb25bXSB8IEZ1bmN0aW9uIHtcbiAgICBjb25zdCBidWlsZGVycyA9IHRoaXMuYnVpbGRlcnM7XG4gICAgY29uc3QgYXJyYXkgPSBidWlsZGVyc1tuYW1lXSB8fCBbXTtcbiAgICAvLyBCYWNrd2FyZHMgY29tcGF0OiBpZiBvbmx5IG9uZSBidWlsZGVyIGV4aXN0cywgcmV0dXJuIGl0LCBlbHNlIHJldHVybiB3aG9sZSBhcmFyeS5cbiAgICBpZiAoaXNTdHJpbmcobmFtZSkgJiYgIWlzRGVmaW5lZChmbikpIHJldHVybiBhcnJheS5sZW5ndGggPiAxID8gYXJyYXkgOiBhcnJheVswXTtcbiAgICBpZiAoIWlzU3RyaW5nKG5hbWUpIHx8ICFpc0Z1bmN0aW9uKGZuKSkgcmV0dXJuO1xuXG4gICAgYnVpbGRlcnNbbmFtZV0gPSBhcnJheTtcbiAgICBidWlsZGVyc1tuYW1lXS5wdXNoKGZuKTtcbiAgICByZXR1cm4gKCkgPT4gYnVpbGRlcnNbbmFtZV0uc3BsaWNlKGJ1aWxkZXJzW25hbWVdLmluZGV4T2YoZm4sIDEpKSAmJiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkcyBhbGwgb2YgdGhlIHByb3BlcnRpZXMgb24gYW4gZXNzZW50aWFsbHkgYmxhbmsgU3RhdGUgb2JqZWN0LCByZXR1cm5pbmcgYSBTdGF0ZSBvYmplY3Qgd2hpY2ggaGFzIGFsbCBpdHNcbiAgICogcHJvcGVydGllcyBhbmQgQVBJIGJ1aWx0LlxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGUgYW4gdW5pbml0aWFsaXplZCBTdGF0ZSBvYmplY3RcbiAgICogQHJldHVybnMgdGhlIGJ1aWx0IFN0YXRlIG9iamVjdFxuICAgKi9cbiAgYnVpbGQoc3RhdGU6IFN0YXRlT2JqZWN0KTogU3RhdGVPYmplY3Qge1xuICAgIGNvbnN0IHsgbWF0Y2hlciwgYnVpbGRlcnMgfSA9IHRoaXM7XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5wYXJlbnROYW1lKHN0YXRlKTtcblxuICAgIGlmIChwYXJlbnQgJiYgIW1hdGNoZXIuZmluZChwYXJlbnQsIHVuZGVmaW5lZCwgZmFsc2UpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBidWlsZGVycykge1xuICAgICAgaWYgKCFidWlsZGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTtcbiAgICAgIGNvbnN0IGNoYWluID0gYnVpbGRlcnNba2V5XS5yZWR1Y2UoXG4gICAgICAgIChwYXJlbnRGbjogQnVpbGRlckZ1bmN0aW9uLCBzdGVwOiBCdWlsZGVyRnVuY3Rpb24pID0+IF9zdGF0ZSA9PiBzdGVwKF9zdGF0ZSwgcGFyZW50Rm4pLFxuICAgICAgICBub29wLFxuICAgICAgKTtcbiAgICAgIHN0YXRlW2tleV0gPSBjaGFpbihzdGF0ZSk7XG4gICAgfVxuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuXG4gIHBhcmVudE5hbWUoc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gICAgLy8gbmFtZSA9ICdmb28uYmFyLmJhei4qKidcbiAgICBjb25zdCBuYW1lID0gc3RhdGUubmFtZSB8fCAnJztcbiAgICAvLyBzZWdtZW50cyA9IFsnZm9vJywgJ2JhcicsICdiYXonLCAnLioqJ11cbiAgICBjb25zdCBzZWdtZW50cyA9IG5hbWUuc3BsaXQoJy4nKTtcbiAgICAvLyBzZWdtZW50cyA9IFsnZm9vJywgJ2JhcicsICdiYXonXVxuICAgIGNvbnN0IGxhc3RTZWdtZW50ID0gc2VnbWVudHMucG9wKCk7XG4gICAgLy8gc2VnbWVudHMgPSBbJ2ZvbycsICdiYXInXSAoaWdub3JlIC4qKiBzZWdtZW50IGZvciBmdXR1cmUgc3RhdGVzKVxuICAgIGlmIChsYXN0U2VnbWVudCA9PT0gJyoqJykgc2VnbWVudHMucG9wKCk7XG5cbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoKSB7XG4gICAgICBpZiAoc3RhdGUucGFyZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgU3RhdGVzIHRoYXQgc3BlY2lmeSB0aGUgJ3BhcmVudDonIHByb3BlcnR5IHNob3VsZCBub3QgaGF2ZSBhICcuJyBpbiB0aGVpciBuYW1lICgke25hbWV9KWApO1xuICAgICAgfVxuXG4gICAgICAvLyAnZm9vLmJhcidcbiAgICAgIHJldHVybiBzZWdtZW50cy5qb2luKCcuJyk7XG4gICAgfVxuXG4gICAgaWYgKCFzdGF0ZS5wYXJlbnQpIHJldHVybiAnJztcbiAgICByZXR1cm4gaXNTdHJpbmcoc3RhdGUucGFyZW50KSA/IHN0YXRlLnBhcmVudCA6IHN0YXRlLnBhcmVudC5uYW1lO1xuICB9XG5cbiAgbmFtZShzdGF0ZTogU3RhdGVPYmplY3QpIHtcbiAgICBjb25zdCBuYW1lID0gc3RhdGUubmFtZTtcbiAgICBpZiAobmFtZS5pbmRleE9mKCcuJykgIT09IC0xIHx8ICFzdGF0ZS5wYXJlbnQpIHJldHVybiBuYW1lO1xuXG4gICAgY29uc3QgcGFyZW50TmFtZSA9IGlzU3RyaW5nKHN0YXRlLnBhcmVudCkgPyBzdGF0ZS5wYXJlbnQgOiBzdGF0ZS5wYXJlbnQubmFtZTtcbiAgICByZXR1cm4gcGFyZW50TmFtZSA/IHBhcmVudE5hbWUgKyAnLicgKyBuYW1lIDogbmFtZTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3N0YXRlL3N0YXRlQnVpbGRlci50cyIsIi8qKiBAbW9kdWxlIHN0YXRlICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgaXNTdHJpbmcgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBTdGF0ZU9yTmFtZSB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyB2YWx1ZXMgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcblxuZXhwb3J0IGNsYXNzIFN0YXRlTWF0Y2hlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX3N0YXRlczogeyBba2V5OiBzdHJpbmddOiBTdGF0ZU9iamVjdCB9KSB7fVxuXG4gIGlzUmVsYXRpdmUoc3RhdGVOYW1lOiBzdHJpbmcpIHtcbiAgICBzdGF0ZU5hbWUgPSBzdGF0ZU5hbWUgfHwgJyc7XG4gICAgcmV0dXJuIHN0YXRlTmFtZS5pbmRleE9mKCcuJykgPT09IDAgfHwgc3RhdGVOYW1lLmluZGV4T2YoJ14nKSA9PT0gMDtcbiAgfVxuXG4gIGZpbmQoc3RhdGVPck5hbWU6IFN0YXRlT3JOYW1lLCBiYXNlPzogU3RhdGVPck5hbWUsIG1hdGNoR2xvYiA9IHRydWUpOiBTdGF0ZU9iamVjdCB7XG4gICAgaWYgKCFzdGF0ZU9yTmFtZSAmJiBzdGF0ZU9yTmFtZSAhPT0gJycpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgaXNTdHIgPSBpc1N0cmluZyhzdGF0ZU9yTmFtZSk7XG4gICAgbGV0IG5hbWU6IHN0cmluZyA9IGlzU3RyID8gc3RhdGVPck5hbWUgOiAoPGFueT5zdGF0ZU9yTmFtZSkubmFtZTtcblxuICAgIGlmICh0aGlzLmlzUmVsYXRpdmUobmFtZSkpIG5hbWUgPSB0aGlzLnJlc29sdmVQYXRoKG5hbWUsIGJhc2UpO1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fc3RhdGVzW25hbWVdO1xuXG4gICAgaWYgKHN0YXRlICYmIChpc1N0ciB8fCAoIWlzU3RyICYmIChzdGF0ZSA9PT0gc3RhdGVPck5hbWUgfHwgc3RhdGUuc2VsZiA9PT0gc3RhdGVPck5hbWUpKSkpIHtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9IGVsc2UgaWYgKGlzU3RyICYmIG1hdGNoR2xvYikge1xuICAgICAgY29uc3QgX3N0YXRlcyA9IHZhbHVlcyh0aGlzLl9zdGF0ZXMpO1xuICAgICAgY29uc3QgbWF0Y2hlcyA9IF9zdGF0ZXMuZmlsdGVyKFxuICAgICAgICBfc3RhdGUgPT4gX3N0YXRlLl9fc3RhdGVPYmplY3RDYWNoZS5uYW1lR2xvYiAmJiBfc3RhdGUuX19zdGF0ZU9iamVjdENhY2hlLm5hbWVHbG9iLm1hdGNoZXMobmFtZSksXG4gICAgICApO1xuXG4gICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGBzdGF0ZU1hdGNoZXIuZmluZDogRm91bmQgbXVsdGlwbGUgbWF0Y2hlcyBmb3IgJHtuYW1lfSB1c2luZyBnbG9iOiBgLFxuICAgICAgICAgIG1hdGNoZXMubWFwKG1hdGNoID0+IG1hdGNoLm5hbWUpLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1hdGNoZXNbMF07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICByZXNvbHZlUGF0aChuYW1lOiBzdHJpbmcsIGJhc2U6IFN0YXRlT3JOYW1lKSB7XG4gICAgaWYgKCFiYXNlKSB0aHJvdyBuZXcgRXJyb3IoYE5vIHJlZmVyZW5jZSBwb2ludCBnaXZlbiBmb3IgcGF0aCAnJHtuYW1lfSdgKTtcblxuICAgIGNvbnN0IGJhc2VTdGF0ZTogU3RhdGVPYmplY3QgPSB0aGlzLmZpbmQoYmFzZSk7XG5cbiAgICBjb25zdCBzcGxpdE5hbWUgPSBuYW1lLnNwbGl0KCcuJyk7XG4gICAgY29uc3QgcGF0aExlbmd0aCA9IHNwbGl0TmFtZS5sZW5ndGg7XG4gICAgbGV0IGkgPSAwLFxuICAgICAgY3VycmVudCA9IGJhc2VTdGF0ZTtcblxuICAgIGZvciAoOyBpIDwgcGF0aExlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoc3BsaXROYW1lW2ldID09PSAnJyAmJiBpID09PSAwKSB7XG4gICAgICAgIGN1cnJlbnQgPSBiYXNlU3RhdGU7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHNwbGl0TmFtZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgIGlmICghY3VycmVudC5wYXJlbnQpIHRocm93IG5ldyBFcnJvcihgUGF0aCAnJHtuYW1lfScgbm90IHZhbGlkIGZvciBzdGF0ZSAnJHtiYXNlU3RhdGUubmFtZX0nYCk7XG4gICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY29uc3QgcmVsTmFtZSA9IHNwbGl0TmFtZS5zbGljZShpKS5qb2luKCcuJyk7XG4gICAgcmV0dXJuIGN1cnJlbnQubmFtZSArIChjdXJyZW50Lm5hbWUgJiYgcmVsTmFtZSA/ICcuJyA6ICcnKSArIHJlbE5hbWU7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9zdGF0ZS9zdGF0ZU1hdGNoZXIudHMiLCIvKiogQG1vZHVsZSBzdGF0ZSAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IGluQXJyYXkgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzU3RyaW5nIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgU3RhdGVEZWNsYXJhdGlvbiwgX1N0YXRlRGVjbGFyYXRpb24gfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4vc3RhdGVPYmplY3QnO1xuaW1wb3J0IHsgU3RhdGVCdWlsZGVyIH0gZnJvbSAnLi9zdGF0ZUJ1aWxkZXInO1xuaW1wb3J0IHsgU3RhdGVSZWdpc3RyeUxpc3RlbmVyLCBTdGF0ZVJlZ2lzdHJ5IH0gZnJvbSAnLi9zdGF0ZVJlZ2lzdHJ5JztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVXJsUm91dGVyIH0gZnJvbSAnLi4vdXJsL3VybFJvdXRlcic7XG5pbXBvcnQgeyBwcm9wIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBTdGF0ZU1hdGNoZXIgfSBmcm9tICcuL3N0YXRlTWF0Y2hlcic7XG5cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbmV4cG9ydCBjbGFzcyBTdGF0ZVF1ZXVlTWFuYWdlciBpbXBsZW1lbnRzIERpc3Bvc2FibGUge1xuICBxdWV1ZTogU3RhdGVPYmplY3RbXTtcbiAgbWF0Y2hlcjogU3RhdGVNYXRjaGVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgJHJlZ2lzdHJ5OiBTdGF0ZVJlZ2lzdHJ5LFxuICAgIHByaXZhdGUgJHVybFJvdXRlcjogVXJsUm91dGVyLFxuICAgIHB1YmxpYyBzdGF0ZXM6IHsgW2tleTogc3RyaW5nXTogU3RhdGVPYmplY3QgfSxcbiAgICBwdWJsaWMgYnVpbGRlcjogU3RhdGVCdWlsZGVyLFxuICAgIHB1YmxpYyBsaXN0ZW5lcnM6IFN0YXRlUmVnaXN0cnlMaXN0ZW5lcltdLFxuICApIHtcbiAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgdGhpcy5tYXRjaGVyID0gJHJlZ2lzdHJ5Lm1hdGNoZXI7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5xdWV1ZSA9IFtdO1xuICB9XG5cbiAgcmVnaXN0ZXIoc3RhdGVEZWNsOiBfU3RhdGVEZWNsYXJhdGlvbikge1xuICAgIGNvbnN0IHF1ZXVlID0gdGhpcy5xdWV1ZTtcbiAgICBjb25zdCBzdGF0ZSA9IFN0YXRlT2JqZWN0LmNyZWF0ZShzdGF0ZURlY2wpO1xuICAgIGNvbnN0IG5hbWUgPSBzdGF0ZS5uYW1lO1xuXG4gICAgaWYgKCFpc1N0cmluZyhuYW1lKSkgdGhyb3cgbmV3IEVycm9yKCdTdGF0ZSBtdXN0IGhhdmUgYSB2YWxpZCBuYW1lJyk7XG4gICAgaWYgKHRoaXMuc3RhdGVzLmhhc093blByb3BlcnR5KG5hbWUpIHx8IGluQXJyYXkocXVldWUubWFwKHByb3AoJ25hbWUnKSksIG5hbWUpKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTdGF0ZSAnJHtuYW1lfScgaXMgYWxyZWFkeSBkZWZpbmVkYCk7XG5cbiAgICBxdWV1ZS5wdXNoKHN0YXRlKTtcbiAgICB0aGlzLmZsdXNoKCk7XG5cbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICBmbHVzaCgpIHtcbiAgICBjb25zdCB7IHF1ZXVlLCBzdGF0ZXMsIGJ1aWxkZXIgfSA9IHRoaXM7XG4gICAgY29uc3QgcmVnaXN0ZXJlZDogU3RhdGVPYmplY3RbXSA9IFtdLCAvLyBzdGF0ZXMgdGhhdCBnb3QgcmVnaXN0ZXJlZFxuICAgICAgb3JwaGFuczogU3RhdGVPYmplY3RbXSA9IFtdLCAvLyBzdGF0ZXMgdGhhdCBkb24ndCB5ZXQgaGF2ZSBhIHBhcmVudCByZWdpc3RlcmVkXG4gICAgICBwcmV2aW91c1F1ZXVlTGVuZ3RoID0ge307IC8vIGtlZXAgdHJhY2sgb2YgaG93IGxvbmcgdGhlIHF1ZXVlIHdoZW4gYW4gb3JwaGFuIHdhcyBmaXJzdCBlbmNvdW50ZXJlZFxuICAgIGNvbnN0IGdldFN0YXRlID0gbmFtZSA9PiB0aGlzLnN0YXRlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB0aGlzLnN0YXRlc1tuYW1lXTtcbiAgICBjb25zdCBub3RpZnlMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICBpZiAocmVnaXN0ZXJlZC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcigncmVnaXN0ZXJlZCcsIHJlZ2lzdGVyZWQubWFwKHMgPT4gcy5zZWxmKSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc3RhdGU6IFN0YXRlT2JqZWN0ID0gcXVldWUuc2hpZnQoKTtcbiAgICAgIGNvbnN0IG5hbWUgPSBzdGF0ZS5uYW1lO1xuICAgICAgY29uc3QgcmVzdWx0OiBTdGF0ZU9iamVjdCA9IGJ1aWxkZXIuYnVpbGQoc3RhdGUpO1xuICAgICAgY29uc3Qgb3JwaGFuSWR4OiBudW1iZXIgPSBvcnBoYW5zLmluZGV4T2Yoc3RhdGUpO1xuXG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3RhdGUgPSBnZXRTdGF0ZShuYW1lKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nU3RhdGUgJiYgZXhpc3RpbmdTdGF0ZS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTdGF0ZSAnJHtuYW1lfScgaXMgYWxyZWFkeSBkZWZpbmVkYCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBleGlzdGluZ0Z1dHVyZVN0YXRlID0gZ2V0U3RhdGUobmFtZSArICcuKionKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nRnV0dXJlU3RhdGUpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgZnV0dXJlIHN0YXRlIG9mIHRoZSBzYW1lIG5hbWVcbiAgICAgICAgICB0aGlzLiRyZWdpc3RyeS5kZXJlZ2lzdGVyKGV4aXN0aW5nRnV0dXJlU3RhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGVzW25hbWVdID0gc3RhdGU7XG4gICAgICAgIHRoaXMuYXR0YWNoUm91dGUoc3RhdGUpO1xuICAgICAgICBpZiAob3JwaGFuSWR4ID49IDApIG9ycGhhbnMuc3BsaWNlKG9ycGhhbklkeCwgMSk7XG4gICAgICAgIHJlZ2lzdGVyZWQucHVzaChzdGF0ZSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwcmV2ID0gcHJldmlvdXNRdWV1ZUxlbmd0aFtuYW1lXTtcbiAgICAgIHByZXZpb3VzUXVldWVMZW5ndGhbbmFtZV0gPSBxdWV1ZS5sZW5ndGg7XG4gICAgICBpZiAob3JwaGFuSWR4ID49IDAgJiYgcHJldiA9PT0gcXVldWUubGVuZ3RoKSB7XG4gICAgICAgIC8vIFdhaXQgdW50aWwgdHdvIGNvbnNlY3V0aXZlIGl0ZXJhdGlvbnMgd2hlcmUgbm8gYWRkaXRpb25hbCBzdGF0ZXMgd2VyZSBkZXF1ZXVlZCBzdWNjZXNzZnVsbHkuXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJlZ2lzdGVyIG9ycGhhbmVkIHN0YXRlICcke25hbWV9J2ApO1xuICAgICAgICBxdWV1ZS5wdXNoKHN0YXRlKTtcbiAgICAgICAgbm90aWZ5TGlzdGVuZXJzKCk7XG4gICAgICAgIHJldHVybiBzdGF0ZXM7XG4gICAgICB9IGVsc2UgaWYgKG9ycGhhbklkeCA8IDApIHtcbiAgICAgICAgb3JwaGFucy5wdXNoKHN0YXRlKTtcbiAgICAgIH1cblxuICAgICAgcXVldWUucHVzaChzdGF0ZSk7XG4gICAgfVxuXG4gICAgbm90aWZ5TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHN0YXRlcztcbiAgfVxuXG4gIGF0dGFjaFJvdXRlKHN0YXRlOiBTdGF0ZU9iamVjdCkge1xuICAgIGlmIChzdGF0ZS5hYnN0cmFjdCB8fCAhc3RhdGUudXJsKSByZXR1cm47XG5cbiAgICB0aGlzLiR1cmxSb3V0ZXIucnVsZSh0aGlzLiR1cmxSb3V0ZXIudXJsUnVsZUZhY3RvcnkuY3JlYXRlKHN0YXRlKSk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9zdGF0ZS9zdGF0ZVF1ZXVlTWFuYWdlci50cyIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgc3RhdGVcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cblxuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFN0YXRlTWF0Y2hlciB9IGZyb20gJy4vc3RhdGVNYXRjaGVyJztcbmltcG9ydCB7IFN0YXRlQnVpbGRlciB9IGZyb20gJy4vc3RhdGVCdWlsZGVyJztcbmltcG9ydCB7IFN0YXRlUXVldWVNYW5hZ2VyIH0gZnJvbSAnLi9zdGF0ZVF1ZXVlTWFuYWdlcic7XG5pbXBvcnQgeyBTdGF0ZURlY2xhcmF0aW9uLCBfU3RhdGVEZWNsYXJhdGlvbiB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IEJ1aWxkZXJGdW5jdGlvbiB9IGZyb20gJy4vc3RhdGVCdWlsZGVyJztcbmltcG9ydCB7IFN0YXRlT3JOYW1lIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgcmVtb3ZlRnJvbSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuaW1wb3J0IHsgcHJvcEVxIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5cbi8qKlxuICogVGhlIHNpZ25hdHVyZSBmb3IgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHByb3ZpZGVkIHRvIFtbU3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWRdXS5cbiAqXG4gKiBUaGlzIGNhbGxiYWNrIHJlY2VpdmVzIHR3byBwYXJhbWV0ZXJzOlxuICpcbiAqIEBwYXJhbSBldmVudCBhIHN0cmluZzsgZWl0aGVyIFwicmVnaXN0ZXJlZFwiIG9yIFwiZGVyZWdpc3RlcmVkXCJcbiAqIEBwYXJhbSBzdGF0ZXMgdGhlIGxpc3Qgb2YgW1tTdGF0ZURlY2xhcmF0aW9uXV1zIHRoYXQgd2VyZSByZWdpc3RlcmVkIChvciBkZXJlZ2lzdGVyZWQpLlxuICovXG5leHBvcnQgdHlwZSBTdGF0ZVJlZ2lzdHJ5TGlzdGVuZXIgPSAoZXZlbnQ6ICdyZWdpc3RlcmVkJyB8ICdkZXJlZ2lzdGVyZWQnLCBzdGF0ZXM6IFN0YXRlRGVjbGFyYXRpb25bXSkgPT4gdm9pZDtcblxuZXhwb3J0IGNsYXNzIFN0YXRlUmVnaXN0cnkge1xuICBwcml2YXRlIF9yb290OiBTdGF0ZU9iamVjdDtcbiAgcHJpdmF0ZSBzdGF0ZXM6IHsgW2tleTogc3RyaW5nXTogU3RhdGVPYmplY3QgfSA9IHt9O1xuXG4gIG1hdGNoZXI6IFN0YXRlTWF0Y2hlcjtcbiAgcHJpdmF0ZSBidWlsZGVyOiBTdGF0ZUJ1aWxkZXI7XG4gIHN0YXRlUXVldWU6IFN0YXRlUXVldWVNYW5hZ2VyO1xuXG4gIGxpc3RlbmVyczogU3RhdGVSZWdpc3RyeUxpc3RlbmVyW10gPSBbXTtcblxuICAvKiogQGludGVybmFsYXBpICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX3JvdXRlcjogVUlSb3V0ZXIpIHtcbiAgICB0aGlzLm1hdGNoZXIgPSBuZXcgU3RhdGVNYXRjaGVyKHRoaXMuc3RhdGVzKTtcbiAgICB0aGlzLmJ1aWxkZXIgPSBuZXcgU3RhdGVCdWlsZGVyKHRoaXMubWF0Y2hlciwgX3JvdXRlci51cmxNYXRjaGVyRmFjdG9yeSk7XG4gICAgdGhpcy5zdGF0ZVF1ZXVlID0gbmV3IFN0YXRlUXVldWVNYW5hZ2VyKHRoaXMsIF9yb3V0ZXIudXJsUm91dGVyLCB0aGlzLnN0YXRlcywgdGhpcy5idWlsZGVyLCB0aGlzLmxpc3RlbmVycyk7XG4gICAgdGhpcy5fcmVnaXN0ZXJSb290KCk7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpICovXG4gIHByaXZhdGUgX3JlZ2lzdGVyUm9vdCgpIHtcbiAgICBjb25zdCByb290U3RhdGVEZWY6IFN0YXRlRGVjbGFyYXRpb24gPSB7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIHVybDogJ14nLFxuICAgICAgdmlld3M6IG51bGwsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgJyMnOiB7IHZhbHVlOiBudWxsLCB0eXBlOiAnaGFzaCcsIGR5bmFtaWM6IHRydWUgfSxcbiAgICAgIH0sXG4gICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICB9O1xuXG4gICAgY29uc3QgX3Jvb3QgPSAodGhpcy5fcm9vdCA9IHRoaXMuc3RhdGVRdWV1ZS5yZWdpc3Rlcihyb290U3RhdGVEZWYpKTtcbiAgICBfcm9vdC5uYXZpZ2FibGUgPSBudWxsO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICBkaXNwb3NlKCkge1xuICAgIHRoaXMuc3RhdGVRdWV1ZS5kaXNwb3NlKCk7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLmdldCgpLmZvckVhY2goc3RhdGUgPT4gdGhpcy5nZXQoc3RhdGUpICYmIHRoaXMuZGVyZWdpc3RlcihzdGF0ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RlbiBmb3IgYSBTdGF0ZSBSZWdpc3RyeSBldmVudHNcbiAgICpcbiAgICogQWRkcyBhIGNhbGxiYWNrIHRoYXQgaXMgaW52b2tlZCB3aGVuIHN0YXRlcyBhcmUgcmVnaXN0ZXJlZCBvciBkZXJlZ2lzdGVyZWQgd2l0aCB0aGUgU3RhdGVSZWdpc3RyeS5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiBsZXQgYWxsU3RhdGVzID0gcmVnaXN0cnkuZ2V0KCk7XG4gICAqXG4gICAqIC8vIExhdGVyLCBpbnZva2UgZGVyZWdpc3RlckZuKCkgdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lclxuICAgKiBsZXQgZGVyZWdpc3RlckZuID0gcmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKChldmVudCwgc3RhdGVzKSA9PiB7XG4gICAqICAgc3dpdGNoKGV2ZW50KSB7XG4gICAqICAgICBjYXNlOiAncmVnaXN0ZXJlZCc6XG4gICAqICAgICAgIHN0YXRlcy5mb3JFYWNoKHN0YXRlID0+IGFsbFN0YXRlcy5wdXNoKHN0YXRlKSk7XG4gICAqICAgICAgIGJyZWFrO1xuICAgKiAgICAgY2FzZTogJ2RlcmVnaXN0ZXJlZCc6XG4gICAqICAgICAgIHN0YXRlcy5mb3JFYWNoKHN0YXRlID0+IHtcbiAgICogICAgICAgICBsZXQgaWR4ID0gYWxsU3RhdGVzLmluZGV4T2Yoc3RhdGUpO1xuICAgKiAgICAgICAgIGlmIChpZHggIT09IC0xKSBhbGxTdGF0ZXMuc3BsaWNlKGlkeCwgMSk7XG4gICAqICAgICAgIH0pO1xuICAgKiAgICAgICBicmVhaztcbiAgICogICB9XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGxpc3RlbmVyIGEgY2FsbGJhY2sgZnVuY3Rpb24gaW52b2tlZCB3aGVuIHRoZSByZWdpc3RlcmVkIHN0YXRlcyBjaGFuZ2VzLlxuICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHJlY2VpdmVzIHR3byBwYXJhbWV0ZXJzLCBgZXZlbnRgIGFuZCBgc3RhdGVgLlxuICAgKiAgICAgICAgU2VlIFtbU3RhdGVSZWdpc3RyeUxpc3RlbmVyXV1cbiAgICogQHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgZGVyZWdpc3RlcnMgdGhlIGxpc3RlbmVyXG4gICAqL1xuICBvblN0YXRlc0NoYW5nZWQobGlzdGVuZXI6IFN0YXRlUmVnaXN0cnlMaXN0ZW5lcik6ICgpID0+IHZvaWQge1xuICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIHJldHVybiBmdW5jdGlvbiBkZXJlZ2lzdGVyTGlzdGVuZXIoKSB7XG4gICAgICByZW1vdmVGcm9tKHRoaXMubGlzdGVuZXJzKShsaXN0ZW5lcik7XG4gICAgfS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGltcGxpY2l0IHJvb3Qgc3RhdGVcbiAgICpcbiAgICogR2V0cyB0aGUgcm9vdCBvZiB0aGUgc3RhdGUgdHJlZS5cbiAgICogVGhlIHJvb3Qgc3RhdGUgaXMgaW1wbGljaXRseSBjcmVhdGVkIGJ5IFVJLVJvdXRlci5cbiAgICogTm90ZTogdGhpcyByZXR1cm5zIHRoZSBpbnRlcm5hbCBbW1N0YXRlT2JqZWN0XV0gcmVwcmVzZW50YXRpb24sIG5vdCBhIFtbU3RhdGVEZWNsYXJhdGlvbl1dXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHJvb3QgW1tTdGF0ZU9iamVjdF1dXG4gICAqL1xuICByb290KCkge1xuICAgIHJldHVybiB0aGlzLl9yb290O1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBzdGF0ZSB0byB0aGUgcmVnaXN0cnlcbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0gb3IgcXVldWVzIGl0IGZvciByZWdpc3RyYXRpb24uXG4gICAqXG4gICAqIE5vdGU6IGEgc3RhdGUgd2lsbCBiZSBxdWV1ZWQgaWYgdGhlIHN0YXRlJ3MgcGFyZW50IGlzbid0IHlldCByZWdpc3RlcmVkLlxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGVEZWZpbml0aW9uIHRoZSBkZWZpbml0aW9uIG9mIHRoZSBzdGF0ZSB0byByZWdpc3Rlci5cbiAgICogQHJldHVybnMgdGhlIGludGVybmFsIFtbU3RhdGVPYmplY3RdXSBvYmplY3QuXG4gICAqICAgICAgICAgIElmIHRoZSBzdGF0ZSB3YXMgc3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZWQsIHRoZW4gdGhlIG9iamVjdCBpcyBmdWxseSBidWlsdCAoU2VlOiBbW1N0YXRlQnVpbGRlcl1dKS5cbiAgICogICAgICAgICAgSWYgdGhlIHN0YXRlIHdhcyBvbmx5IHF1ZXVlZCwgdGhlbiB0aGUgb2JqZWN0IGlzIG5vdCBmdWxseSBidWlsdC5cbiAgICovXG4gIHJlZ2lzdGVyKHN0YXRlRGVmaW5pdGlvbjogX1N0YXRlRGVjbGFyYXRpb24pOiBTdGF0ZU9iamVjdCB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVRdWV1ZS5yZWdpc3RlcihzdGF0ZURlZmluaXRpb24pO1xuICB9XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgcHJpdmF0ZSBfZGVyZWdpc3RlclRyZWUoc3RhdGU6IFN0YXRlT2JqZWN0KSB7XG4gICAgY29uc3QgYWxsID0gdGhpcy5nZXQoKS5tYXAocyA9PiBzLiQkc3RhdGUoKSk7XG4gICAgY29uc3QgZ2V0Q2hpbGRyZW4gPSAoc3RhdGVzOiBTdGF0ZU9iamVjdFtdKSA9PiB7XG4gICAgICBjb25zdCBfY2hpbGRyZW4gPSBhbGwuZmlsdGVyKHMgPT4gc3RhdGVzLmluZGV4T2Yocy5wYXJlbnQpICE9PSAtMSk7XG4gICAgICByZXR1cm4gX2NoaWxkcmVuLmxlbmd0aCA9PT0gMCA/IF9jaGlsZHJlbiA6IF9jaGlsZHJlbi5jb25jYXQoZ2V0Q2hpbGRyZW4oX2NoaWxkcmVuKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGNoaWxkcmVuID0gZ2V0Q2hpbGRyZW4oW3N0YXRlXSk7XG4gICAgY29uc3QgZGVyZWdpc3RlcmVkOiBTdGF0ZU9iamVjdFtdID0gW3N0YXRlXS5jb25jYXQoY2hpbGRyZW4pLnJldmVyc2UoKTtcblxuICAgIGRlcmVnaXN0ZXJlZC5mb3JFYWNoKF9zdGF0ZSA9PiB7XG4gICAgICBjb25zdCAkdXIgPSB0aGlzLl9yb3V0ZXIudXJsUm91dGVyO1xuICAgICAgLy8gUmVtb3ZlIFVSTCBydWxlXG4gICAgICAkdXJcbiAgICAgICAgLnJ1bGVzKClcbiAgICAgICAgLmZpbHRlcihwcm9wRXEoJ3N0YXRlJywgX3N0YXRlKSlcbiAgICAgICAgLmZvckVhY2goJHVyLnJlbW92ZVJ1bGUuYmluZCgkdXIpKTtcbiAgICAgIC8vIFJlbW92ZSBzdGF0ZSBmcm9tIHJlZ2lzdHJ5XG4gICAgICBkZWxldGUgdGhpcy5zdGF0ZXNbX3N0YXRlLm5hbWVdO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRlcmVnaXN0ZXJlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgc3RhdGUgZnJvbSB0aGUgcmVnaXN0cnlcbiAgICpcbiAgICogVGhpcyByZW1vdmVzIGEgc3RhdGUgZnJvbSB0aGUgcmVnaXN0cnkuXG4gICAqIElmIHRoZSBzdGF0ZSBoYXMgY2hpbGRyZW4sIHRoZXkgYXJlIGFyZSBhbHNvIHJlbW92ZWQgZnJvbSB0aGUgcmVnaXN0cnkuXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSB0aGUgc3RhdGUncyBuYW1lIG9yIG9iamVjdCByZXByZXNlbnRhdGlvblxuICAgKiBAcmV0dXJucyB7U3RhdGVPYmplY3RbXX0gYSBsaXN0IG9mIHJlbW92ZWQgc3RhdGVzXG4gICAqL1xuICBkZXJlZ2lzdGVyKHN0YXRlT3JOYW1lOiBTdGF0ZU9yTmFtZSkge1xuICAgIGNvbnN0IF9zdGF0ZSA9IHRoaXMuZ2V0KHN0YXRlT3JOYW1lKTtcbiAgICBpZiAoIV9zdGF0ZSkgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgZGVyZWdpc3RlciBzdGF0ZTsgbm90IGZvdW5kOiBcIiArIHN0YXRlT3JOYW1lKTtcbiAgICBjb25zdCBkZXJlZ2lzdGVyZWRTdGF0ZXMgPSB0aGlzLl9kZXJlZ2lzdGVyVHJlZShfc3RhdGUuJCRzdGF0ZSgpKTtcblxuICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoJ2RlcmVnaXN0ZXJlZCcsIGRlcmVnaXN0ZXJlZFN0YXRlcy5tYXAocyA9PiBzLnNlbGYpKSk7XG4gICAgcmV0dXJuIGRlcmVnaXN0ZXJlZFN0YXRlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGFsbCByZWdpc3RlcmVkIHN0YXRlc1xuICAgKlxuICAgKiBDYWxsaW5nIHRoaXMgbWV0aG9kIHdpdGggbm8gYXJndW1lbnRzIHdpbGwgcmV0dXJuIGEgbGlzdCBvZiBhbGwgdGhlIHN0YXRlcyB0aGF0IGFyZSBjdXJyZW50bHkgcmVnaXN0ZXJlZC5cbiAgICogTm90ZTogdGhpcyBkb2VzIG5vdCByZXR1cm4gc3RhdGVzIHRoYXQgYXJlICpxdWV1ZWQqIGJ1dCBub3QgeWV0IHJlZ2lzdGVyZWQuXG4gICAqXG4gICAqIEByZXR1cm4gYSBsaXN0IG9mIFtbU3RhdGVEZWNsYXJhdGlvbl1dc1xuICAgKi9cbiAgZ2V0KCk6IFN0YXRlRGVjbGFyYXRpb25bXTtcblxuICAvKipcbiAgICogR2V0cyBhIHJlZ2lzdGVyZWQgc3RhdGVcbiAgICpcbiAgICogR2l2ZW4gYSBzdGF0ZSBvciBhIG5hbWUsIGZpbmRzIGFuZCByZXR1cm5zIHRoZSBbW1N0YXRlRGVjbGFyYXRpb25dXSBmcm9tIHRoZSByZWdpc3RyeS5cbiAgICogTm90ZTogdGhpcyBkb2VzIG5vdCByZXR1cm4gc3RhdGVzIHRoYXQgYXJlICpxdWV1ZWQqIGJ1dCBub3QgeWV0IHJlZ2lzdGVyZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSBlaXRoZXIgdGhlIG5hbWUgb2YgYSBzdGF0ZSwgb3IgYSBzdGF0ZSBvYmplY3QuXG4gICAqIEBwYXJhbSBiYXNlIHRoZSBiYXNlIHN0YXRlIHRvIHVzZSB3aGVuIHN0YXRlT3JOYW1lIGlzIHJlbGF0aXZlLlxuICAgKiBAcmV0dXJuIGEgcmVnaXN0ZXJlZCBbW1N0YXRlRGVjbGFyYXRpb25dXSB0aGF0IG1hdGNoZWQgdGhlIGBzdGF0ZU9yTmFtZWAsIG9yIG51bGwgaWYgdGhlIHN0YXRlIGlzbid0IHJlZ2lzdGVyZWQuXG4gICAqL1xuICBnZXQoc3RhdGVPck5hbWU6IFN0YXRlT3JOYW1lLCBiYXNlPzogU3RhdGVPck5hbWUpOiBTdGF0ZURlY2xhcmF0aW9uO1xuICBnZXQoc3RhdGVPck5hbWU/OiBTdGF0ZU9yTmFtZSwgYmFzZT86IFN0YXRlT3JOYW1lKTogYW55IHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDxTdGF0ZURlY2xhcmF0aW9uW10+T2JqZWN0LmtleXModGhpcy5zdGF0ZXMpLm1hcChuYW1lID0+IHRoaXMuc3RhdGVzW25hbWVdLnNlbGYpO1xuICAgIGNvbnN0IGZvdW5kID0gdGhpcy5tYXRjaGVyLmZpbmQoc3RhdGVPck5hbWUsIGJhc2UpO1xuICAgIHJldHVybiAoZm91bmQgJiYgZm91bmQuc2VsZikgfHwgbnVsbDtcbiAgfVxuXG4gIGRlY29yYXRvcihuYW1lOiBzdHJpbmcsIGZ1bmM6IEJ1aWxkZXJGdW5jdGlvbikge1xuICAgIHJldHVybiB0aGlzLmJ1aWxkZXIuYnVpbGRlcihuYW1lLCBmdW5jKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3N0YXRlL3N0YXRlUmVnaXN0cnkudHMiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHN0YXRlXG4gKi9cbi8qKiAqL1xuaW1wb3J0IHtcbiAgY3JlYXRlUHJveHlGdW5jdGlvbnMsXG4gIGRlZmF1bHRzLFxuICBleHRlbmQsXG4gIGluQXJyYXksXG4gIG5vb3AsXG4gIHJlbW92ZUZyb20sXG4gIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZSxcbiAgc2lsZW50UmVqZWN0aW9uLFxufSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzRGVmaW5lZCwgaXNPYmplY3QsIGlzU3RyaW5nIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgUXVldWUgfSBmcm9tICcuLi9jb21tb24vcXVldWUnO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcblxuaW1wb3J0IHsgUGF0aFV0aWxzIH0gZnJvbSAnLi4vcGF0aC9wYXRoVXRpbHMnO1xuaW1wb3J0IHsgUGF0aE5vZGUgfSBmcm9tICcuLi9wYXRoL3BhdGhOb2RlJztcblxuaW1wb3J0IHsgSG9va1Jlc3VsdCwgVHJhbnNpdGlvbk9wdGlvbnMgfSBmcm9tICcuLi90cmFuc2l0aW9uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBkZWZhdWx0VHJhbnNPcHRzIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBSZWplY3Rpb24sIFJlamVjdFR5cGUgfSBmcm9tICcuLi90cmFuc2l0aW9uL3JlamVjdEZhY3RvcnknO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5cbmltcG9ydCB7IEhyZWZPcHRpb25zLCBMYXp5TG9hZFJlc3VsdCwgU3RhdGVEZWNsYXJhdGlvbiwgU3RhdGVPck5hbWUsIFRyYW5zaXRpb25Qcm9taXNlIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi90YXJnZXRTdGF0ZSc7XG5cbmltcG9ydCB7IFJhd1BhcmFtcyB9IGZyb20gJy4uL3BhcmFtcy9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUGFyYW0gfSBmcm9tICcuLi9wYXJhbXMvcGFyYW0nO1xuaW1wb3J0IHsgR2xvYiB9IGZyb20gJy4uL2NvbW1vbi9nbG9iJztcbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmltcG9ydCB7IFVJSW5qZWN0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUmVzb2x2ZUNvbnRleHQgfSBmcm9tICcuLi9yZXNvbHZlL3Jlc29sdmVDb250ZXh0JztcbmltcG9ydCB7IGxhenlMb2FkU3RhdGUgfSBmcm9tICcuLi9ob29rcy9sYXp5TG9hZCc7XG5pbXBvcnQgeyBub3QsIHZhbCB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgU3RhdGVQYXJhbXMgfSBmcm9tICcuLi9wYXJhbXMvc3RhdGVQYXJhbXMnO1xuXG5leHBvcnQgdHlwZSBPbkludmFsaWRDYWxsYmFjayA9ICh0b1N0YXRlPzogVGFyZ2V0U3RhdGUsIGZyb21TdGF0ZT86IFRhcmdldFN0YXRlLCBpbmplY3Rvcj86IFVJSW5qZWN0b3IpID0+IEhvb2tSZXN1bHQ7XG5cbi8qKlxuICogUHJvdmlkZXMgc3RhdGUgcmVsYXRlZCBzZXJ2aWNlIGZ1bmN0aW9uc1xuICpcbiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgc2VydmljZXMgcmVsYXRlZCB0byB1aS1yb3V0ZXIgc3RhdGVzLlxuICogQW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBpcyBsb2NhdGVkIG9uIHRoZSBnbG9iYWwgW1tVSVJvdXRlcl1dIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0YXRlU2VydmljZSB7XG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgaW52YWxpZENhbGxiYWNrczogT25JbnZhbGlkQ2FsbGJhY2tbXSA9IFtdO1xuXG4gIC8qKlxuICAgKiBUaGUgW1tUcmFuc2l0aW9uXV0gY3VycmVudGx5IGluIHByb2dyZXNzIChvciBudWxsKVxuICAgKlxuICAgKiBUaGlzIGlzIGEgcGFzc3Rocm91Z2ggdGhyb3VnaCB0byBbW1VJUm91dGVyR2xvYmFscy50cmFuc2l0aW9uXV1cbiAgICovXG4gIGdldCB0cmFuc2l0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb247XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCBzdGF0ZSBwYXJhbWV0ZXJzXG4gICAqXG4gICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLnBhcmFtc11dXG4gICAqL1xuICBnZXQgcGFyYW1zKCk6IFN0YXRlUGFyYW1zIHtcbiAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy5wYXJhbXM7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IFtbU3RhdGVEZWNsYXJhdGlvbl1dXG4gICAqXG4gICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLmN1cnJlbnRdXVxuICAgKi9cbiAgZ2V0IGN1cnJlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMucm91dGVyLmdsb2JhbHMuY3VycmVudDtcbiAgfVxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgW1tTdGF0ZU9iamVjdF1dXG4gICAqXG4gICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLiRjdXJyZW50XV1cbiAgICovXG4gIGdldCAkY3VycmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy4kY3VycmVudDtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgY29uc3QgZ2V0dGVycyA9IFsnY3VycmVudCcsICckY3VycmVudCcsICdwYXJhbXMnLCAndHJhbnNpdGlvbiddO1xuICAgIGNvbnN0IGJvdW5kRm5zID0gT2JqZWN0LmtleXMoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSkuZmlsdGVyKG5vdChpbkFycmF5KGdldHRlcnMpKSk7XG4gICAgY3JlYXRlUHJveHlGdW5jdGlvbnModmFsKFN0YXRlU2VydmljZS5wcm90b3R5cGUpLCB0aGlzLCB2YWwodGhpcyksIGJvdW5kRm5zKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLmRlZmF1bHRFcnJvckhhbmRsZXIobm9vcCk7XG4gICAgdGhpcy5pbnZhbGlkQ2FsbGJhY2tzID0gW107XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlciBmb3Igd2hlbiBbW3RyYW5zaXRpb25Ub11dIGlzIGNhbGxlZCB3aXRoIGFuIGludmFsaWQgc3RhdGUuXG4gICAqXG4gICAqIEludm9rZXMgdGhlIFtbb25JbnZhbGlkXV0gY2FsbGJhY2tzLCBpbiBuYXR1cmFsIG9yZGVyLlxuICAgKiBFYWNoIGNhbGxiYWNrJ3MgcmV0dXJuIHZhbHVlIGlzIGNoZWNrZWQgaW4gc2VxdWVuY2UgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBhbiBpbnN0YW5jZSBvZiBUYXJnZXRTdGF0ZS5cbiAgICogVGhlIHJlc3VsdHMgb2YgdGhlIGNhbGxiYWNrcyBhcmUgd3JhcHBlZCBpbiAkcS53aGVuKCksIHNvIHRoZSBjYWxsYmFja3MgbWF5IHJldHVybiBwcm9taXNlcy5cbiAgICpcbiAgICogSWYgYSBjYWxsYmFjayByZXR1cm5zIGFuIFRhcmdldFN0YXRlLCB0aGVuIGl0IGlzIHVzZWQgYXMgYXJndW1lbnRzIHRvICRzdGF0ZS50cmFuc2l0aW9uVG8oKSBhbmQgdGhlIHJlc3VsdCByZXR1cm5lZC5cbiAgICpcbiAgICogQGludGVybmFsYXBpXG4gICAqL1xuICBwcml2YXRlIF9oYW5kbGVJbnZhbGlkVGFyZ2V0U3RhdGUoZnJvbVBhdGg6IFBhdGhOb2RlW10sIHRvU3RhdGU6IFRhcmdldFN0YXRlKSB7XG4gICAgY29uc3QgZnJvbVN0YXRlID0gUGF0aFV0aWxzLm1ha2VUYXJnZXRTdGF0ZSh0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LCBmcm9tUGF0aCk7XG4gICAgY29uc3QgZ2xvYmFscyA9IHRoaXMucm91dGVyLmdsb2JhbHM7XG4gICAgY29uc3QgbGF0ZXN0VGhpbmcgPSAoKSA9PiBnbG9iYWxzLnRyYW5zaXRpb25IaXN0b3J5LnBlZWtUYWlsKCk7XG4gICAgY29uc3QgbGF0ZXN0ID0gbGF0ZXN0VGhpbmcoKTtcbiAgICBjb25zdCBjYWxsYmFja1F1ZXVlID0gbmV3IFF1ZXVlPE9uSW52YWxpZENhbGxiYWNrPih0aGlzLmludmFsaWRDYWxsYmFja3Muc2xpY2UoKSk7XG4gICAgY29uc3QgaW5qZWN0b3IgPSBuZXcgUmVzb2x2ZUNvbnRleHQoZnJvbVBhdGgpLmluamVjdG9yKCk7XG5cbiAgICBjb25zdCBjaGVja0ZvclJlZGlyZWN0ID0gKHJlc3VsdDogSG9va1Jlc3VsdCkgPT4ge1xuICAgICAgaWYgKCEocmVzdWx0IGluc3RhbmNlb2YgVGFyZ2V0U3RhdGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IHRhcmdldCA9IDxUYXJnZXRTdGF0ZT5yZXN1bHQ7XG4gICAgICAvLyBSZWNyZWF0ZSB0aGUgVGFyZ2V0U3RhdGUsIGluIGNhc2UgdGhlIHN0YXRlIGlzIG5vdyBkZWZpbmVkLlxuICAgICAgdGFyZ2V0ID0gdGhpcy50YXJnZXQodGFyZ2V0LmlkZW50aWZpZXIoKSwgdGFyZ2V0LnBhcmFtcygpLCB0YXJnZXQub3B0aW9ucygpKTtcblxuICAgICAgaWYgKCF0YXJnZXQudmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gUmVqZWN0aW9uLmludmFsaWQodGFyZ2V0LmVycm9yKCkpLnRvUHJvbWlzZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAobGF0ZXN0VGhpbmcoKSAhPT0gbGF0ZXN0KSB7XG4gICAgICAgIHJldHVybiBSZWplY3Rpb24uc3VwZXJzZWRlZCgpLnRvUHJvbWlzZSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uVG8odGFyZ2V0LmlkZW50aWZpZXIoKSwgdGFyZ2V0LnBhcmFtcygpLCB0YXJnZXQub3B0aW9ucygpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaW52b2tlTmV4dENhbGxiYWNrKCkge1xuICAgICAgY29uc3QgbmV4dENhbGxiYWNrID0gY2FsbGJhY2tRdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICBpZiAobmV4dENhbGxiYWNrID09PSB1bmRlZmluZWQpIHJldHVybiBSZWplY3Rpb24uaW52YWxpZCh0b1N0YXRlLmVycm9yKCkpLnRvUHJvbWlzZSgpO1xuXG4gICAgICBjb25zdCBjYWxsYmFja1Jlc3VsdCA9IHNlcnZpY2VzLiRxLndoZW4obmV4dENhbGxiYWNrKHRvU3RhdGUsIGZyb21TdGF0ZSwgaW5qZWN0b3IpKTtcbiAgICAgIHJldHVybiBjYWxsYmFja1Jlc3VsdC50aGVuKGNoZWNrRm9yUmVkaXJlY3QpLnRoZW4ocmVzdWx0ID0+IHJlc3VsdCB8fCBpbnZva2VOZXh0Q2FsbGJhY2soKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGludm9rZU5leHRDYWxsYmFjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhbiBJbnZhbGlkIFN0YXRlIGhhbmRsZXJcbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgW1tPbkludmFsaWRDYWxsYmFja11dIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgd2hlbiBbW1N0YXRlU2VydmljZS50cmFuc2l0aW9uVG9dXVxuICAgKiBoYXMgYmVlbiBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIHN0YXRlIHJlZmVyZW5jZSBwYXJhbWV0ZXJcbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogc3RhdGVTZXJ2aWNlLm9uSW52YWxpZChmdW5jdGlvbih0bywgZnJvbSwgaW5qZWN0b3IpIHtcbiAgICogICBpZiAodG8ubmFtZSgpID09PSAnZm9vJykge1xuICAgKiAgICAgbGV0IGxhenlMb2FkZXIgPSBpbmplY3Rvci5nZXQoJ0xhenlMb2FkU2VydmljZScpO1xuICAgKiAgICAgcmV0dXJuIGxhenlMb2FkZXIubG9hZCgnZm9vJylcbiAgICogICAgICAgICAudGhlbigoKSA9PiBzdGF0ZVNlcnZpY2UudGFyZ2V0KCdmb28nKSk7XG4gICAqICAgfVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIGludm9rZWQgd2hlbiB0aGUgdG9TdGF0ZSBpcyBpbnZhbGlkXG4gICAqICAgVGhpcyBmdW5jdGlvbiByZWNlaXZlcyB0aGUgKGludmFsaWQpIHRvU3RhdGUsIHRoZSBmcm9tU3RhdGUsIGFuZCBhbiBpbmplY3Rvci5cbiAgICogICBUaGUgZnVuY3Rpb24gbWF5IG9wdGlvbmFsbHkgcmV0dXJuIGEgW1tUYXJnZXRTdGF0ZV1dIG9yIGEgUHJvbWlzZSBmb3IgYSBUYXJnZXRTdGF0ZS5cbiAgICogICBJZiBvbmUgaXMgcmV0dXJuZWQsIGl0IGlzIHRyZWF0ZWQgYXMgYSByZWRpcmVjdC5cbiAgICpcbiAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgY2FsbGJhY2tcbiAgICovXG4gIG9uSW52YWxpZChjYWxsYmFjazogT25JbnZhbGlkQ2FsbGJhY2spOiBGdW5jdGlvbiB7XG4gICAgdGhpcy5pbnZhbGlkQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIHJldHVybiBmdW5jdGlvbiBkZXJlZ2lzdGVyTGlzdGVuZXIoKSB7XG4gICAgICByZW1vdmVGcm9tKHRoaXMuaW52YWxpZENhbGxiYWNrcykoY2FsbGJhY2spO1xuICAgIH0uYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxvYWRzIHRoZSBjdXJyZW50IHN0YXRlXG4gICAqXG4gICAqIEEgbWV0aG9kIHRoYXQgZm9yY2UgcmVsb2FkcyB0aGUgY3VycmVudCBzdGF0ZSwgb3IgYSBwYXJ0aWFsIHN0YXRlIGhpZXJhcmNoeS5cbiAgICogQWxsIHJlc29sdmVzIGFyZSByZS1yZXNvbHZlZCwgYW5kIGNvbXBvbmVudHMgcmVpbnN0YW50aWF0ZWQuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogbGV0IGFwcCBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInXSk7XG4gICAqXG4gICAqIGFwcC5jb250cm9sbGVyKCdjdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlKSB7XG4gICAqICAgJHNjb3BlLnJlbG9hZCA9IGZ1bmN0aW9uKCl7XG4gICAqICAgICAkc3RhdGUucmVsb2FkKCk7XG4gICAqICAgfVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIE5vdGU6IGByZWxvYWQoKWAgaXMganVzdCBhbiBhbGlhcyBmb3I6XG4gICAqXG4gICAqIGBgYGpzXG4gICAqICRzdGF0ZS50cmFuc2l0aW9uVG8oJHN0YXRlLmN1cnJlbnQsICRzdGF0ZS5wYXJhbXMsIHtcbiAgICogICByZWxvYWQ6IHRydWUsIGluaGVyaXQ6IGZhbHNlXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHJlbG9hZFN0YXRlIEEgc3RhdGUgbmFtZSBvciBhIHN0YXRlIG9iamVjdC5cbiAgICogICAgSWYgcHJlc2VudCwgdGhpcyBzdGF0ZSBhbmQgYWxsIGl0cyBjaGlsZHJlbiB3aWxsIGJlIHJlbG9hZGVkLCBidXQgYW5jZXN0b3JzIHdpbGwgbm90IHJlbG9hZC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAvL2Fzc3VtaW5nIGFwcCBhcHBsaWNhdGlvbiBjb25zaXN0cyBvZiAzIHN0YXRlczogJ2NvbnRhY3RzJywgJ2NvbnRhY3RzLmRldGFpbCcsICdjb250YWN0cy5kZXRhaWwuaXRlbSdcbiAgICogLy9hbmQgY3VycmVudCBzdGF0ZSBpcyAnY29udGFjdHMuZGV0YWlsLml0ZW0nXG4gICAqIGxldCBhcHAgYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJ10pO1xuICAgKlxuICAgKiBhcHAuY29udHJvbGxlcignY3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSkge1xuICAgKiAgICRzY29wZS5yZWxvYWQgPSBmdW5jdGlvbigpe1xuICAgKiAgICAgLy93aWxsIHJlbG9hZCAnY29udGFjdC5kZXRhaWwnIGFuZCBuZXN0ZWQgJ2NvbnRhY3QuZGV0YWlsLml0ZW0nIHN0YXRlc1xuICAgKiAgICAgJHN0YXRlLnJlbG9hZCgnY29udGFjdC5kZXRhaWwnKTtcbiAgICogICB9XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlcHJlc2VudGluZyB0aGUgc3RhdGUgb2YgdGhlIG5ldyB0cmFuc2l0aW9uLiBTZWUgW1tTdGF0ZVNlcnZpY2UuZ29dXVxuICAgKi9cbiAgcmVsb2FkKHJlbG9hZFN0YXRlPzogU3RhdGVPck5hbWUpOiBQcm9taXNlPFN0YXRlT2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNpdGlvblRvKHRoaXMuY3VycmVudCwgdGhpcy5wYXJhbXMsIHtcbiAgICAgIHJlbG9hZDogaXNEZWZpbmVkKHJlbG9hZFN0YXRlKSA/IHJlbG9hZFN0YXRlIDogdHJ1ZSxcbiAgICAgIGluaGVyaXQ6IGZhbHNlLFxuICAgICAgbm90aWZ5OiBmYWxzZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2l0aW9uIHRvIGEgZGlmZmVyZW50IHN0YXRlIGFuZC9vciBwYXJhbWV0ZXJzXG4gICAqXG4gICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgdHJhbnNpdGlvbmluZyB0byBhIG5ldyBzdGF0ZS5cbiAgICpcbiAgICogYCRzdGF0ZS5nb2AgY2FsbHMgYCRzdGF0ZS50cmFuc2l0aW9uVG9gIGludGVybmFsbHkgYnV0IGF1dG9tYXRpY2FsbHkgc2V0cyBvcHRpb25zIHRvXG4gICAqIGB7IGxvY2F0aW9uOiB0cnVlLCBpbmhlcml0OiB0cnVlLCByZWxhdGl2ZTogcm91dGVyLmdsb2JhbHMuJGN1cnJlbnQsIG5vdGlmeTogdHJ1ZSB9YC5cbiAgICogVGhpcyBhbGxvd3MgeW91IHRvIHVzZSBlaXRoZXIgYW4gYWJzb2x1dGUgb3IgcmVsYXRpdmUgYHRvYCBhcmd1bWVudCAoYmVjYXVzZSBvZiBgcmVsYXRpdmU6IHJvdXRlci5nbG9iYWxzLiRjdXJyZW50YCkuXG4gICAqIEl0IGFsc28gYWxsb3dzIHlvdSB0byBzcGVjaWZ5ICogb25seSB0aGUgcGFyYW1ldGVycyB5b3UnZCBsaWtlIHRvIHVwZGF0ZSwgd2hpbGUgbGV0dGluZyB1bnNwZWNpZmllZCBwYXJhbWV0ZXJzXG4gICAqIGluaGVyaXQgZnJvbSB0aGUgY3VycmVudCBwYXJhbWV0ZXIgdmFsdWVzIChiZWNhdXNlIG9mIGBpbmhlcml0OiB0cnVlYCkuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogbGV0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcbiAgICpcbiAgICogYXBwLmNvbnRyb2xsZXIoJ2N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUpIHtcbiAgICogICAkc2NvcGUuY2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAqICAgICAkc3RhdGUuZ28oJ2NvbnRhY3QuZGV0YWlsJyk7XG4gICAqICAgfTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdG8gQWJzb2x1dGUgc3RhdGUgbmFtZSwgc3RhdGUgb2JqZWN0LCBvciByZWxhdGl2ZSBzdGF0ZSBwYXRoIChyZWxhdGl2ZSB0byBjdXJyZW50IHN0YXRlKS5cbiAgICpcbiAgICogU29tZSBleGFtcGxlczpcbiAgICpcbiAgICogLSBgJHN0YXRlLmdvKCdjb250YWN0LmRldGFpbCcpYCAtIHdpbGwgZ28gdG8gdGhlIGBjb250YWN0LmRldGFpbGAgc3RhdGVcbiAgICogLSBgJHN0YXRlLmdvKCdeJylgIC0gd2lsbCBnbyB0byB0aGUgcGFyZW50IHN0YXRlXG4gICAqIC0gYCRzdGF0ZS5nbygnXi5zaWJsaW5nJylgIC0gaWYgY3VycmVudCBzdGF0ZSBpcyBgaG9tZS5jaGlsZGAsIHdpbGwgZ28gdG8gdGhlIGBob21lLnNpYmxpbmdgIHN0YXRlXG4gICAqIC0gYCRzdGF0ZS5nbygnLmNoaWxkLmdyYW5kY2hpbGQnKWAgLSBpZiBjdXJyZW50IHN0YXRlIGlzIGhvbWUsIHdpbGwgZ28gdG8gdGhlIGBob21lLmNoaWxkLmdyYW5kY2hpbGRgIHN0YXRlXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgQSBtYXAgb2YgdGhlIHBhcmFtZXRlcnMgdGhhdCB3aWxsIGJlIHNlbnQgdG8gdGhlIHN0YXRlLCB3aWxsIHBvcHVsYXRlICRzdGF0ZVBhcmFtcy5cbiAgICpcbiAgICogICAgQW55IHBhcmFtZXRlcnMgdGhhdCBhcmUgbm90IHNwZWNpZmllZCB3aWxsIGJlIGluaGVyaXRlZCBmcm9tIGN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlcyAoYmVjYXVzZSBvZiBgaW5oZXJpdDogdHJ1ZWApLlxuICAgKiAgICBUaGlzIGFsbG93cywgZm9yIGV4YW1wbGUsIGdvaW5nIHRvIGEgc2libGluZyBzdGF0ZSB0aGF0IHNoYXJlcyBwYXJhbWV0ZXJzIGRlZmluZWQgYnkgYSBwYXJlbnQgc3RhdGUuXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIFRyYW5zaXRpb24gb3B0aW9uc1xuICAgKlxuICAgKiBAcmV0dXJucyB7cHJvbWlzZX0gQSBwcm9taXNlIHJlcHJlc2VudGluZyB0aGUgc3RhdGUgb2YgdGhlIG5ldyB0cmFuc2l0aW9uLlxuICAgKi9cbiAgZ28odG86IFN0YXRlT3JOYW1lLCBwYXJhbXM/OiBSYXdQYXJhbXMsIG9wdGlvbnM/OiBUcmFuc2l0aW9uT3B0aW9ucyk6IFRyYW5zaXRpb25Qcm9taXNlIHtcbiAgICBjb25zdCBkZWZhdXRHb09wdHMgPSB7IHJlbGF0aXZlOiB0aGlzLiRjdXJyZW50LCBpbmhlcml0OiB0cnVlIH07XG4gICAgY29uc3QgdHJhbnNPcHRzID0gZGVmYXVsdHMob3B0aW9ucywgZGVmYXV0R29PcHRzLCBkZWZhdWx0VHJhbnNPcHRzKTtcbiAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uVG8odG8sIHBhcmFtcywgdHJhbnNPcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgW1tUYXJnZXRTdGF0ZV1dXG4gICAqXG4gICAqIFRoaXMgaXMgYSBmYWN0b3J5IG1ldGhvZCBmb3IgY3JlYXRpbmcgYSBUYXJnZXRTdGF0ZVxuICAgKlxuICAgKiBUaGlzIG1heSBiZSByZXR1cm5lZCBmcm9tIGEgVHJhbnNpdGlvbiBIb29rIHRvIHJlZGlyZWN0IGEgdHJhbnNpdGlvbiwgZm9yIGV4YW1wbGUuXG4gICAqL1xuICB0YXJnZXQoaWRlbnRpZmllcjogU3RhdGVPck5hbWUsIHBhcmFtcz86IFJhd1BhcmFtcywgb3B0aW9uczogVHJhbnNpdGlvbk9wdGlvbnMgPSB7fSk6IFRhcmdldFN0YXRlIHtcbiAgICAvLyBJZiB3ZSdyZSByZWxvYWRpbmcsIGZpbmQgdGhlIHN0YXRlIG9iamVjdCB0byByZWxvYWQgZnJvbVxuICAgIGlmIChpc09iamVjdChvcHRpb25zLnJlbG9hZCkgJiYgISg8YW55Pm9wdGlvbnMucmVsb2FkKS5uYW1lKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVsb2FkIHN0YXRlIG9iamVjdCcpO1xuICAgIGNvbnN0IHJlZyA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnk7XG4gICAgb3B0aW9ucy5yZWxvYWRTdGF0ZSA9XG4gICAgICBvcHRpb25zLnJlbG9hZCA9PT0gdHJ1ZSA/IHJlZy5yb290KCkgOiByZWcubWF0Y2hlci5maW5kKDxhbnk+b3B0aW9ucy5yZWxvYWQsIG9wdGlvbnMucmVsYXRpdmUpO1xuXG4gICAgaWYgKG9wdGlvbnMucmVsb2FkICYmICFvcHRpb25zLnJlbG9hZFN0YXRlKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgTm8gc3VjaCByZWxvYWQgc3RhdGUgJyR7aXNTdHJpbmcob3B0aW9ucy5yZWxvYWQpID8gb3B0aW9ucy5yZWxvYWQgOiAoPGFueT5vcHRpb25zLnJlbG9hZCkubmFtZX0nYCxcbiAgICAgICk7XG5cbiAgICByZXR1cm4gbmV3IFRhcmdldFN0YXRlKHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnksIGlkZW50aWZpZXIsIHBhcmFtcywgb3B0aW9ucyk7XG4gIH1cblxuICBwcml2YXRlIGdldEN1cnJlbnRQYXRoKCk6IFBhdGhOb2RlW10ge1xuICAgIGNvbnN0IGdsb2JhbHMgPSB0aGlzLnJvdXRlci5nbG9iYWxzO1xuICAgIGNvbnN0IGxhdGVzdFN1Y2Nlc3M6IFRyYW5zaXRpb24gPSBnbG9iYWxzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5wZWVrVGFpbCgpO1xuICAgIGNvbnN0IHJvb3RQYXRoID0gKCkgPT4gW25ldyBQYXRoTm9kZSh0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKSldO1xuICAgIHJldHVybiBsYXRlc3RTdWNjZXNzID8gbGF0ZXN0U3VjY2Vzcy50cmVlQ2hhbmdlcygpLnRvIDogcm9vdFBhdGgoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb3ctbGV2ZWwgbWV0aG9kIGZvciB0cmFuc2l0aW9uaW5nIHRvIGEgbmV3IHN0YXRlLlxuICAgKlxuICAgKiBUaGUgW1tnb11dIG1ldGhvZCAod2hpY2ggdXNlcyBgdHJhbnNpdGlvblRvYCBpbnRlcm5hbGx5KSBpcyByZWNvbW1lbmRlZCBpbiBtb3N0IHNpdHVhdGlvbnMuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogbGV0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcbiAgICpcbiAgICogYXBwLmNvbnRyb2xsZXIoJ2N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUpIHtcbiAgICogICAkc2NvcGUuY2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAqICAgICAkc3RhdGUudHJhbnNpdGlvblRvKCdjb250YWN0LmRldGFpbCcpO1xuICAgKiAgIH07XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHRvIFN0YXRlIG5hbWUgb3Igc3RhdGUgb2JqZWN0LlxuICAgKiBAcGFyYW0gdG9QYXJhbXMgQSBtYXAgb2YgdGhlIHBhcmFtZXRlcnMgdGhhdCB3aWxsIGJlIHNlbnQgdG8gdGhlIHN0YXRlLFxuICAgKiAgICAgIHdpbGwgcG9wdWxhdGUgJHN0YXRlUGFyYW1zLlxuICAgKiBAcGFyYW0gb3B0aW9ucyBUcmFuc2l0aW9uIG9wdGlvbnNcbiAgICpcbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlcHJlc2VudGluZyB0aGUgc3RhdGUgb2YgdGhlIG5ldyB0cmFuc2l0aW9uLiBTZWUgW1tnb11dXG4gICAqL1xuICB0cmFuc2l0aW9uVG8odG86IFN0YXRlT3JOYW1lLCB0b1BhcmFtczogUmF3UGFyYW1zID0ge30sIG9wdGlvbnM6IFRyYW5zaXRpb25PcHRpb25zID0ge30pOiBUcmFuc2l0aW9uUHJvbWlzZSB7XG4gICAgY29uc3Qgcm91dGVyID0gdGhpcy5yb3V0ZXI7XG4gICAgY29uc3QgZ2xvYmFscyA9IHJvdXRlci5nbG9iYWxzO1xuICAgIG9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCBkZWZhdWx0VHJhbnNPcHRzKTtcbiAgICBjb25zdCBnZXRDdXJyZW50ID0gKCkgPT4gZ2xvYmFscy50cmFuc2l0aW9uO1xuICAgIG9wdGlvbnMgPSBleHRlbmQob3B0aW9ucywgeyBjdXJyZW50OiBnZXRDdXJyZW50IH0pO1xuXG4gICAgY29uc3QgcmVmOiBUYXJnZXRTdGF0ZSA9IHRoaXMudGFyZ2V0KHRvLCB0b1BhcmFtcywgb3B0aW9ucyk7XG4gICAgY29uc3QgY3VycmVudFBhdGggPSB0aGlzLmdldEN1cnJlbnRQYXRoKCk7XG5cbiAgICBpZiAoIXJlZi5leGlzdHMoKSkgcmV0dXJuIHRoaXMuX2hhbmRsZUludmFsaWRUYXJnZXRTdGF0ZShjdXJyZW50UGF0aCwgcmVmKTtcblxuICAgIGlmICghcmVmLnZhbGlkKCkpIHJldHVybiA8VHJhbnNpdGlvblByb21pc2U+c2lsZW50UmVqZWN0aW9uKHJlZi5lcnJvcigpKTtcblxuICAgIC8qKlxuICAgICAqIFNwZWNpYWwgaGFuZGxpbmcgZm9yIElnbm9yZWQsIEFib3J0ZWQsIGFuZCBSZWRpcmVjdGVkIHRyYW5zaXRpb25zXG4gICAgICpcbiAgICAgKiBUaGUgc2VtYW50aWNzIGZvciB0aGUgdHJhbnNpdGlvbi5ydW4oKSBwcm9taXNlIGFuZCB0aGUgU3RhdGVTZXJ2aWNlLnRyYW5zaXRpb25UbygpXG4gICAgICogcHJvbWlzZSBkaWZmZXIuIEZvciBpbnN0YW5jZSwgdGhlIHJ1bigpIHByb21pc2UgbWF5IGJlIHJlamVjdGVkIGJlY2F1c2UgaXQgd2FzXG4gICAgICogSUdOT1JFRCwgYnV0IHRoZSB0cmFuc2l0aW9uVG8oKSBwcm9taXNlIGlzIHJlc29sdmVkIGJlY2F1c2UgZnJvbSB0aGUgdXNlciBwZXJzcGVjdGl2ZVxuICAgICAqIG5vIGVycm9yIG9jY3VycmVkLiAgTGlrZXdpc2UsIHRoZSB0cmFuc2l0aW9uLnJ1bigpIHByb21pc2UgbWF5IGJlIHJlamVjdGVkIGJlY2F1c2Ugb2ZcbiAgICAgKiBhIFJlZGlyZWN0LCBidXQgdGhlIHRyYW5zaXRpb25UbygpIHByb21pc2UgaXMgY2hhaW5lZCB0byB0aGUgbmV3IFRyYW5zaXRpb24ncyBwcm9taXNlLlxuICAgICAqL1xuICAgIGNvbnN0IHJlamVjdGVkVHJhbnNpdGlvbkhhbmRsZXIgPSAodHJhbnM6IFRyYW5zaXRpb24pID0+IChlcnJvcjogYW55KTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJlamVjdGlvbikge1xuICAgICAgICBjb25zdCBpc0xhdGVzdCA9IHJvdXRlci5nbG9iYWxzLmxhc3RTdGFydGVkVHJhbnNpdGlvbklkID09PSB0cmFucy4kaWQ7XG5cbiAgICAgICAgaWYgKGVycm9yLnR5cGUgPT09IFJlamVjdFR5cGUuSUdOT1JFRCkge1xuICAgICAgICAgIGlzTGF0ZXN0ICYmIHJvdXRlci51cmxSb3V0ZXIudXBkYXRlKCk7XG4gICAgICAgICAgLy8gQ29uc2lkZXIgaWdub3JlZCBgVHJhbnNpdGlvbi5ydW4oKWAgYXMgYSBzdWNjZXNzZnVsIGB0cmFuc2l0aW9uVG9gXG4gICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4oZ2xvYmFscy5jdXJyZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRldGFpbDogYW55ID0gZXJyb3IuZGV0YWlsO1xuICAgICAgICBpZiAoZXJyb3IudHlwZSA9PT0gUmVqZWN0VHlwZS5TVVBFUlNFREVEICYmIGVycm9yLnJlZGlyZWN0ZWQgJiYgZGV0YWlsIGluc3RhbmNlb2YgVGFyZ2V0U3RhdGUpIHtcbiAgICAgICAgICAvLyBJZiBgVHJhbnNpdGlvbi5ydW4oKWAgd2FzIHJlZGlyZWN0ZWQsIGFsbG93IHRoZSBgdHJhbnNpdGlvblRvKClgIHByb21pc2UgdG8gcmVzb2x2ZSBzdWNjZXNzZnVsbHlcbiAgICAgICAgICAvLyBieSByZXR1cm5pbmcgdGhlIHByb21pc2UgZm9yIHRoZSBuZXcgKHJlZGlyZWN0KSBgVHJhbnNpdGlvbi5ydW4oKWAuXG4gICAgICAgICAgY29uc3QgcmVkaXJlY3Q6IFRyYW5zaXRpb24gPSB0cmFucy5yZWRpcmVjdChkZXRhaWwpO1xuICAgICAgICAgIHJldHVybiByZWRpcmVjdC5ydW4oKS5jYXRjaChyZWplY3RlZFRyYW5zaXRpb25IYW5kbGVyKHJlZGlyZWN0KSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXJyb3IudHlwZSA9PT0gUmVqZWN0VHlwZS5BQk9SVEVEKSB7XG4gICAgICAgICAgaXNMYXRlc3QgJiYgcm91dGVyLnVybFJvdXRlci51cGRhdGUoKTtcbiAgICAgICAgICByZXR1cm4gc2VydmljZXMuJHEucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBlcnJvckhhbmRsZXIgPSB0aGlzLmRlZmF1bHRFcnJvckhhbmRsZXIoKTtcbiAgICAgIGVycm9ySGFuZGxlcihlcnJvcik7XG5cbiAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS5yZWplY3QoZXJyb3IpO1xuICAgIH07XG5cbiAgICBjb25zdCB0cmFuc2l0aW9uID0gdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuY3JlYXRlKGN1cnJlbnRQYXRoLCByZWYpO1xuICAgIGNvbnN0IHRyYW5zaXRpb25Ub1Byb21pc2UgPSB0cmFuc2l0aW9uLnJ1bigpLmNhdGNoKHJlamVjdGVkVHJhbnNpdGlvbkhhbmRsZXIodHJhbnNpdGlvbikpO1xuICAgIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZSh0cmFuc2l0aW9uVG9Qcm9taXNlKTsgLy8gaXNzdWUgIzI2NzZcblxuICAgIC8vIFJldHVybiBhIHByb21pc2UgZm9yIHRoZSB0cmFuc2l0aW9uLCB3aGljaCBhbHNvIGhhcyB0aGUgdHJhbnNpdGlvbiBvYmplY3Qgb24gaXQuXG4gICAgcmV0dXJuIGV4dGVuZCh0cmFuc2l0aW9uVG9Qcm9taXNlLCB7IHRyYW5zaXRpb24gfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHN0YXRlICppcyogdGhlIHByb3ZpZGVkIHN0YXRlXG4gICAqXG4gICAqIFNpbWlsYXIgdG8gW1tpbmNsdWRlc11dIGJ1dCBvbmx5IGNoZWNrcyBmb3IgdGhlIGZ1bGwgc3RhdGUgbmFtZS5cbiAgICogSWYgcGFyYW1zIGlzIHN1cHBsaWVkIHRoZW4gaXQgd2lsbCBiZSB0ZXN0ZWQgZm9yIHN0cmljdCBlcXVhbGl0eSBhZ2FpbnN0IHRoZSBjdXJyZW50XG4gICAqIGFjdGl2ZSBwYXJhbXMgb2JqZWN0LCBzbyBhbGwgcGFyYW1zIG11c3QgbWF0Y2ggd2l0aCBub25lIG1pc3NpbmcgYW5kIG5vIGV4dHJhcy5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiAkc3RhdGUuJGN1cnJlbnQubmFtZSA9ICdjb250YWN0cy5kZXRhaWxzLml0ZW0nO1xuICAgKlxuICAgKiAvLyBhYnNvbHV0ZSBuYW1lXG4gICAqICRzdGF0ZS5pcygnY29udGFjdC5kZXRhaWxzLml0ZW0nKTsgLy8gcmV0dXJucyB0cnVlXG4gICAqICRzdGF0ZS5pcyhjb250YWN0RGV0YWlsSXRlbVN0YXRlT2JqZWN0KTsgLy8gcmV0dXJucyB0cnVlXG4gICAqIGBgYFxuICAgKlxuICAgKiAvLyByZWxhdGl2ZSBuYW1lICguIGFuZCBeKSwgdHlwaWNhbGx5IGZyb20gYSB0ZW1wbGF0ZVxuICAgKiAvLyBFLmcuIGZyb20gdGhlICdjb250YWN0cy5kZXRhaWxzJyB0ZW1wbGF0ZVxuICAgKiBgYGBodG1sXG4gICAqIDxkaXYgbmctY2xhc3M9XCJ7aGlnaGxpZ2h0ZWQ6ICRzdGF0ZS5pcygnLml0ZW0nKX1cIj5JdGVtPC9kaXY+XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGVPck5hbWUgVGhlIHN0YXRlIG5hbWUgKGFic29sdXRlIG9yIHJlbGF0aXZlKSBvciBzdGF0ZSBvYmplY3QgeW91J2QgbGlrZSB0byBjaGVjay5cbiAgICogQHBhcmFtIHBhcmFtcyBBIHBhcmFtIG9iamVjdCwgZS5nLiBge3NlY3Rpb25JZDogc2VjdGlvbi5pZH1gLCB0aGF0IHlvdSdkIGxpa2VcbiAgICogdG8gdGVzdCBhZ2FpbnN0IHRoZSBjdXJyZW50IGFjdGl2ZSBzdGF0ZS5cbiAgICogQHBhcmFtIG9wdGlvbnMgQW4gb3B0aW9ucyBvYmplY3QuIFRoZSBvcHRpb25zIGFyZTpcbiAgICogICAtIGByZWxhdGl2ZWA6IElmIGBzdGF0ZU9yTmFtZWAgaXMgYSByZWxhdGl2ZSBzdGF0ZSBuYW1lIGFuZCBgb3B0aW9ucy5yZWxhdGl2ZWAgaXMgc2V0LCAuaXMgd2lsbFxuICAgKiAgICAgdGVzdCByZWxhdGl2ZSB0byBgb3B0aW9ucy5yZWxhdGl2ZWAgc3RhdGUgKG9yIG5hbWUpLlxuICAgKlxuICAgKiBAcmV0dXJucyBSZXR1cm5zIHRydWUgaWYgaXQgaXMgdGhlIHN0YXRlLlxuICAgKi9cbiAgaXMoc3RhdGVPck5hbWU6IFN0YXRlT3JOYW1lLCBwYXJhbXM/OiBSYXdQYXJhbXMsIG9wdGlvbnM/OiB7IHJlbGF0aXZlPzogU3RhdGVPck5hbWUgfSk6IGJvb2xlYW4ge1xuICAgIG9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCB7IHJlbGF0aXZlOiB0aGlzLiRjdXJyZW50IH0pO1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeS5tYXRjaGVyLmZpbmQoc3RhdGVPck5hbWUsIG9wdGlvbnMucmVsYXRpdmUpO1xuICAgIGlmICghaXNEZWZpbmVkKHN0YXRlKSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAodGhpcy4kY3VycmVudCAhPT0gc3RhdGUpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIXBhcmFtcykgcmV0dXJuIHRydWU7XG5cbiAgICBjb25zdCBzY2hlbWE6IFBhcmFtW10gPSBzdGF0ZS5wYXJhbWV0ZXJzKHsgaW5oZXJpdDogdHJ1ZSwgbWF0Y2hpbmdLZXlzOiBwYXJhbXMgfSk7XG4gICAgcmV0dXJuIFBhcmFtLmVxdWFscyhzY2hlbWEsIFBhcmFtLnZhbHVlcyhzY2hlbWEsIHBhcmFtcyksIHRoaXMucGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgc3RhdGUgKmluY2x1ZGVzKiB0aGUgcHJvdmlkZWQgc3RhdGVcbiAgICpcbiAgICogQSBtZXRob2QgdG8gZGV0ZXJtaW5lIGlmIHRoZSBjdXJyZW50IGFjdGl2ZSBzdGF0ZSBpcyBlcXVhbCB0byBvciBpcyB0aGUgY2hpbGQgb2YgdGhlXG4gICAqIHN0YXRlIHN0YXRlTmFtZS4gSWYgYW55IHBhcmFtcyBhcmUgcGFzc2VkIHRoZW4gdGhleSB3aWxsIGJlIHRlc3RlZCBmb3IgYSBtYXRjaCBhcyB3ZWxsLlxuICAgKiBOb3QgYWxsIHRoZSBwYXJhbWV0ZXJzIG5lZWQgdG8gYmUgcGFzc2VkLCBqdXN0IHRoZSBvbmVzIHlvdSdkIGxpa2UgdG8gdGVzdCBmb3IgZXF1YWxpdHkuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZSB3aGVuIGAkc3RhdGUuJGN1cnJlbnQubmFtZSA9PT0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbSdgXG4gICAqIGBgYGpzXG4gICAqIC8vIFVzaW5nIHBhcnRpYWwgbmFtZXNcbiAgICogJHN0YXRlLmluY2x1ZGVzKFwiY29udGFjdHNcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgKiAkc3RhdGUuaW5jbHVkZXMoXCJjb250YWN0cy5kZXRhaWxzXCIpOyAvLyByZXR1cm5zIHRydWVcbiAgICogJHN0YXRlLmluY2x1ZGVzKFwiY29udGFjdHMuZGV0YWlscy5pdGVtXCIpOyAvLyByZXR1cm5zIHRydWVcbiAgICogJHN0YXRlLmluY2x1ZGVzKFwiY29udGFjdHMubGlzdFwiKTsgLy8gcmV0dXJucyBmYWxzZVxuICAgKiAkc3RhdGUuaW5jbHVkZXMoXCJhYm91dFwiKTsgLy8gcmV0dXJucyBmYWxzZVxuICAgKiBgYGBcbiAgICpcbiAgICogIyMjIyBHbG9iIEV4YW1wbGVzIHdoZW4gYCogJHN0YXRlLiRjdXJyZW50Lm5hbWUgPT09ICdjb250YWN0cy5kZXRhaWxzLml0ZW0udXJsJ2A6XG4gICAqIGBgYGpzXG4gICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qLipcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgKiAkc3RhdGUuaW5jbHVkZXMoXCIqLmRldGFpbHMuKipcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgKiAkc3RhdGUuaW5jbHVkZXMoXCIqKi5pdGVtLioqXCIpOyAvLyByZXR1cm5zIHRydWVcbiAgICogJHN0YXRlLmluY2x1ZGVzKFwiKi5kZXRhaWxzLml0ZW0udXJsXCIpOyAvLyByZXR1cm5zIHRydWVcbiAgICogJHN0YXRlLmluY2x1ZGVzKFwiKi5kZXRhaWxzLioudXJsXCIpOyAvLyByZXR1cm5zIHRydWVcbiAgICogJHN0YXRlLmluY2x1ZGVzKFwiKi5kZXRhaWxzLipcIik7IC8vIHJldHVybnMgZmFsc2VcbiAgICogJHN0YXRlLmluY2x1ZGVzKFwiaXRlbS4qKlwiKTsgLy8gcmV0dXJucyBmYWxzZVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHN0YXRlT3JOYW1lIEEgcGFydGlhbCBuYW1lLCByZWxhdGl2ZSBuYW1lLCBnbG9iIHBhdHRlcm4sXG4gICAqICAgb3Igc3RhdGUgb2JqZWN0IHRvIGJlIHNlYXJjaGVkIGZvciB3aXRoaW4gdGhlIGN1cnJlbnQgc3RhdGUgbmFtZS5cbiAgICogQHBhcmFtIHBhcmFtcyBBIHBhcmFtIG9iamVjdCwgZS5nLiBge3NlY3Rpb25JZDogc2VjdGlvbi5pZH1gLFxuICAgKiAgIHRoYXQgeW91J2QgbGlrZSB0byB0ZXN0IGFnYWluc3QgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlLlxuICAgKiBAcGFyYW0gb3B0aW9ucyBBbiBvcHRpb25zIG9iamVjdC4gVGhlIG9wdGlvbnMgYXJlOlxuICAgKiAgIC0gYHJlbGF0aXZlYDogSWYgYHN0YXRlT3JOYW1lYCBpcyBhIHJlbGF0aXZlIHN0YXRlIG5hbWUgYW5kIGBvcHRpb25zLnJlbGF0aXZlYCBpcyBzZXQsIC5pcyB3aWxsXG4gICAqICAgICB0ZXN0IHJlbGF0aXZlIHRvIGBvcHRpb25zLnJlbGF0aXZlYCBzdGF0ZSAob3IgbmFtZSkuXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgaXQgZG9lcyBpbmNsdWRlIHRoZSBzdGF0ZVxuICAgKi9cbiAgaW5jbHVkZXMoc3RhdGVPck5hbWU6IFN0YXRlT3JOYW1lLCBwYXJhbXM/OiBSYXdQYXJhbXMsIG9wdGlvbnM/OiBUcmFuc2l0aW9uT3B0aW9ucyk6IGJvb2xlYW4ge1xuICAgIG9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCB7IHJlbGF0aXZlOiB0aGlzLiRjdXJyZW50IH0pO1xuICAgIGNvbnN0IGdsb2IgPSBpc1N0cmluZyhzdGF0ZU9yTmFtZSkgJiYgR2xvYi5mcm9tU3RyaW5nKDxzdHJpbmc+c3RhdGVPck5hbWUpO1xuXG4gICAgaWYgKGdsb2IpIHtcbiAgICAgIGlmICghZ2xvYi5tYXRjaGVzKHRoaXMuJGN1cnJlbnQubmFtZSkpIHJldHVybiBmYWxzZTtcbiAgICAgIHN0YXRlT3JOYW1lID0gdGhpcy4kY3VycmVudC5uYW1lO1xuICAgIH1cbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBvcHRpb25zLnJlbGF0aXZlKSxcbiAgICAgIGluY2x1ZGUgPSB0aGlzLiRjdXJyZW50LmluY2x1ZGVzO1xuXG4gICAgaWYgKCFpc0RlZmluZWQoc3RhdGUpKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmICghaXNEZWZpbmVkKGluY2x1ZGVbc3RhdGUubmFtZV0pKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCFwYXJhbXMpIHJldHVybiB0cnVlO1xuXG4gICAgY29uc3Qgc2NoZW1hOiBQYXJhbVtdID0gc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IHRydWUsIG1hdGNoaW5nS2V5czogcGFyYW1zIH0pO1xuICAgIHJldHVybiBQYXJhbS5lcXVhbHMoc2NoZW1hLCBQYXJhbS52YWx1ZXMoc2NoZW1hLCBwYXJhbXMpLCB0aGlzLnBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgVVJMIGZvciBhIHN0YXRlIGFuZCBwYXJhbWV0ZXJzXG4gICAqXG4gICAqIFJldHVybnMgdGhlIHVybCBmb3IgdGhlIGdpdmVuIHN0YXRlIHBvcHVsYXRlZCB3aXRoIHRoZSBnaXZlbiBwYXJhbXMuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogZXhwZWN0KCRzdGF0ZS5ocmVmKFwiYWJvdXQucGVyc29uXCIsIHsgcGVyc29uOiBcImJvYlwiIH0pKS50b0VxdWFsKFwiL2Fib3V0L2JvYlwiKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSBUaGUgc3RhdGUgbmFtZSBvciBzdGF0ZSBvYmplY3QgeW91J2QgbGlrZSB0byBnZW5lcmF0ZSBhIHVybCBmcm9tLlxuICAgKiBAcGFyYW0gcGFyYW1zIEFuIG9iamVjdCBvZiBwYXJhbWV0ZXIgdmFsdWVzIHRvIGZpbGwgdGhlIHN0YXRlJ3MgcmVxdWlyZWQgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBvYmplY3QuIFRoZSBvcHRpb25zIGFyZTpcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gY29tcGlsZWQgc3RhdGUgdXJsXG4gICAqL1xuICBocmVmKHN0YXRlT3JOYW1lOiBTdGF0ZU9yTmFtZSwgcGFyYW1zOiBSYXdQYXJhbXMsIG9wdGlvbnM/OiBIcmVmT3B0aW9ucyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGVmYXVsdEhyZWZPcHRzID0ge1xuICAgICAgbG9zc3k6IHRydWUsXG4gICAgICBpbmhlcml0OiB0cnVlLFxuICAgICAgYWJzb2x1dGU6IGZhbHNlLFxuICAgICAgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQsXG4gICAgfTtcbiAgICBvcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgZGVmYXVsdEhyZWZPcHRzKTtcbiAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG5cbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBvcHRpb25zLnJlbGF0aXZlKTtcblxuICAgIGlmICghaXNEZWZpbmVkKHN0YXRlKSkgcmV0dXJuIG51bGw7XG4gICAgaWYgKG9wdGlvbnMuaW5oZXJpdCkgcGFyYW1zID0gPGFueT50aGlzLnBhcmFtcy4kaW5oZXJpdChwYXJhbXMsIHRoaXMuJGN1cnJlbnQsIHN0YXRlKTtcblxuICAgIGNvbnN0IG5hdiA9IHN0YXRlICYmIG9wdGlvbnMubG9zc3kgPyBzdGF0ZS5uYXZpZ2FibGUgOiBzdGF0ZTtcblxuICAgIGlmICghbmF2IHx8IG5hdi51cmwgPT09IHVuZGVmaW5lZCB8fCBuYXYudXJsID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucm91dGVyLnVybFJvdXRlci5ocmVmKG5hdi51cmwsIHBhcmFtcywge1xuICAgICAgYWJzb2x1dGU6IG9wdGlvbnMuYWJzb2x1dGUsXG4gICAgfSk7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBwcml2YXRlIF9kZWZhdWx0RXJyb3JIYW5kbGVyOiAoKF9lcnJvcjogYW55KSA9PiB2b2lkKSA9IGZ1bmN0aW9uICRkZWZhdWx0RXJyb3JIYW5kbGVyKCRlcnJvciQpIHtcbiAgICBpZiAoJGVycm9yJCBpbnN0YW5jZW9mIEVycm9yICYmICRlcnJvciQuc3RhY2spIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJGVycm9yJCk7XG4gICAgICBjb25zb2xlLmVycm9yKCRlcnJvciQuc3RhY2spO1xuICAgIH0gZWxzZSBpZiAoJGVycm9yJCBpbnN0YW5jZW9mIFJlamVjdGlvbikge1xuICAgICAgY29uc29sZS5lcnJvcigkZXJyb3IkLnRvU3RyaW5nKCkpO1xuICAgICAgaWYgKCRlcnJvciQuZGV0YWlsICYmICRlcnJvciQuZGV0YWlsLnN0YWNrKSBjb25zb2xlLmVycm9yKCRlcnJvciQuZGV0YWlsLnN0YWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcigkZXJyb3IkKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgb3IgZ2V0cyB0aGUgZGVmYXVsdCBbW3RyYW5zaXRpb25Ub11dIGVycm9yIGhhbmRsZXIuXG4gICAqXG4gICAqIFRoZSBlcnJvciBoYW5kbGVyIGlzIGNhbGxlZCB3aGVuIGEgW1tUcmFuc2l0aW9uXV0gaXMgcmVqZWN0ZWQgb3Igd2hlbiBhbnkgZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHRoZSBUcmFuc2l0aW9uLlxuICAgKiBUaGlzIGluY2x1ZGVzIGVycm9ycyBjYXVzZWQgYnkgcmVzb2x2ZXMgYW5kIHRyYW5zaXRpb24gaG9va3MuXG4gICAqXG4gICAqIE5vdGU6XG4gICAqIFRoaXMgaGFuZGxlciBkb2VzIG5vdCByZWNlaXZlIGNlcnRhaW4gVHJhbnNpdGlvbiByZWplY3Rpb25zLlxuICAgKiBSZWRpcmVjdGVkIGFuZCBJZ25vcmVkIFRyYW5zaXRpb25zIGFyZSBub3QgY29uc2lkZXJlZCB0byBiZSBlcnJvcnMgYnkgW1tTdGF0ZVNlcnZpY2UudHJhbnNpdGlvblRvXV0uXG4gICAqXG4gICAqIFRoZSBidWlsdC1pbiBkZWZhdWx0IGVycm9yIGhhbmRsZXIgbG9ncyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGUuXG4gICAqXG4gICAqIFlvdSBjYW4gcHJvdmlkZSB5b3VyIG93biBjdXN0b20gaGFuZGxlci5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiBzdGF0ZVNlcnZpY2UuZGVmYXVsdEVycm9ySGFuZGxlcihmdW5jdGlvbigpIHtcbiAgICogICAvLyBEbyBub3QgbG9nIHRyYW5zaXRpb25UbyBlcnJvcnNcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaGFuZGxlciBhIGdsb2JhbCBlcnJvciBoYW5kbGVyIGZ1bmN0aW9uXG4gICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IGdsb2JhbCBlcnJvciBoYW5kbGVyXG4gICAqL1xuICBkZWZhdWx0RXJyb3JIYW5kbGVyKGhhbmRsZXI/OiAoZXJyb3I6IGFueSkgPT4gdm9pZCk6IChlcnJvcjogYW55KSA9PiB2b2lkIHtcbiAgICByZXR1cm4gKHRoaXMuX2RlZmF1bHRFcnJvckhhbmRsZXIgPSBoYW5kbGVyIHx8IHRoaXMuX2RlZmF1bHRFcnJvckhhbmRsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSByZWdpc3RlcmVkIFtbU3RhdGVEZWNsYXJhdGlvbl1dIG9iamVjdFxuICAgKlxuICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSBkZWNsYXJhdGlvbiBvYmplY3QgZm9yIGFueSBzcGVjaWZpYyBzdGF0ZSwgb3IgZm9yIGFsbCByZWdpc3RlcmVkIHN0YXRlcy5cbiAgICpcbiAgICogQHBhcmFtIHN0YXRlT3JOYW1lIChhYnNvbHV0ZSBvciByZWxhdGl2ZSkgSWYgcHJvdmlkZWQsIHdpbGwgb25seSBnZXQgdGhlIGRlY2xhcmF0aW9uIG9iamVjdCBmb3IgdGhlIHJlcXVlc3RlZCBzdGF0ZS5cbiAgICogSWYgbm90IHByb3ZpZGVkLCByZXR1cm5zIGFuIGFycmF5IG9mIEFMTCBzdGF0ZXMuXG4gICAqIEBwYXJhbSBiYXNlIFdoZW4gYHN0YXRlT3JOYW1lYCBpcyBhIHJlbGF0aXZlIHN0YXRlIHJlZmVyZW5jZSAoc3VjaCBhcyBgLmJhci5iYXpgKSwgdGhlIHN0YXRlIHdpbGwgYmUgcmV0cmlldmVkIHJlbGF0aXZlIHRvIHRoaXMgc3RhdGUuXG4gICAqXG4gICAqIEByZXR1cm5zIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0gb2JqZWN0IChvciBhcnJheSBvZiBhbGwgcmVnaXN0ZXJlZCBbW1N0YXRlRGVjbGFyYXRpb25dXSBvYmplY3RzLilcbiAgICovXG4gIGdldChzdGF0ZU9yTmFtZTogU3RhdGVPck5hbWUsIGJhc2U6IFN0YXRlT3JOYW1lKTogU3RhdGVEZWNsYXJhdGlvbjtcbiAgZ2V0KHN0YXRlT3JOYW1lOiBTdGF0ZU9yTmFtZSk6IFN0YXRlRGVjbGFyYXRpb247XG4gIGdldCgpOiBTdGF0ZURlY2xhcmF0aW9uW107XG4gIGdldChzdGF0ZU9yTmFtZT86IFN0YXRlT3JOYW1lLCBiYXNlPzogU3RhdGVPck5hbWUpOiBhbnkge1xuICAgIGNvbnN0IHJlZyA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiByZWcuZ2V0KCk7XG4gICAgcmV0dXJuIHJlZy5nZXQoc3RhdGVPck5hbWUsIGJhc2UgfHwgdGhpcy4kY3VycmVudCk7XG4gIH1cblxuICAvKipcbiAgICogTGF6eSBsb2FkcyBhIHN0YXRlXG4gICAqXG4gICAqIEV4cGxpY2l0bHkgcnVucyBhIHN0YXRlJ3MgW1tTdGF0ZURlY2xhcmF0aW9uLmxhenlMb2FkXV0gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSB0aGUgc3RhdGUgdGhhdCBzaG91bGQgYmUgbGF6eSBsb2FkZWRcbiAgICogQHBhcmFtIHRyYW5zaXRpb24gdGhlIG9wdGlvbmFsIFRyYW5zaXRpb24gY29udGV4dCB0byB1c2UgKGlmIHRoZSBsYXp5TG9hZCBmdW5jdGlvbiByZXF1aXJlcyBhbiBpbmplY3RvciwgZXRjKVxuICAgKiBOb3RlOiBJZiBubyB0cmFuc2l0aW9uIGlzIHByb3ZpZGVkLCBhIG5vb3AgdHJhbnNpdGlvbiBpcyBjcmVhdGVkIHVzaW5nIHRoZSBmcm9tIHRoZSBjdXJyZW50IHN0YXRlIHRvIHRoZSBjdXJyZW50IHN0YXRlLlxuICAgKiBUaGlzIG5vb3AgdHJhbnNpdGlvbiBpcyBub3QgYWN0dWFsbHkgcnVuLlxuICAgKlxuICAgKiBAcmV0dXJucyBhIHByb21pc2UgdG8gbGF6eSBsb2FkXG4gICAqL1xuICBsYXp5TG9hZChzdGF0ZU9yTmFtZTogU3RhdGVPck5hbWUsIHRyYW5zaXRpb24/OiBUcmFuc2l0aW9uKTogUHJvbWlzZTxMYXp5TG9hZFJlc3VsdD4ge1xuICAgIGNvbnN0IHN0YXRlOiBTdGF0ZURlY2xhcmF0aW9uID0gdGhpcy5nZXQoc3RhdGVPck5hbWUpO1xuICAgIGlmICghc3RhdGUgfHwgIXN0YXRlLmxhenlMb2FkKSB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBub3QgbGF6eSBsb2FkICcgKyBzdGF0ZU9yTmFtZSk7XG5cbiAgICBjb25zdCBjdXJyZW50UGF0aCA9IHRoaXMuZ2V0Q3VycmVudFBhdGgoKTtcbiAgICBjb25zdCB0YXJnZXQgPSBQYXRoVXRpbHMubWFrZVRhcmdldFN0YXRlKHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnksIGN1cnJlbnRQYXRoKTtcbiAgICB0cmFuc2l0aW9uID0gdHJhbnNpdGlvbiB8fCB0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZS5jcmVhdGUoY3VycmVudFBhdGgsIHRhcmdldCk7XG5cbiAgICByZXR1cm4gbGF6eUxvYWRTdGF0ZSh0cmFuc2l0aW9uLCBzdGF0ZSk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9zdGF0ZS9zdGF0ZVNlcnZpY2UudHMiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIGNvcmVcbiAqLyAvKiogKi9cbmltcG9ydCB7IFVybE1hdGNoZXJGYWN0b3J5IH0gZnJvbSAnLi91cmwvdXJsTWF0Y2hlckZhY3RvcnknO1xuaW1wb3J0IHsgVXJsUm91dGVyIH0gZnJvbSAnLi91cmwvdXJsUm91dGVyJztcbmltcG9ydCB7IFRyYW5zaXRpb25TZXJ2aWNlIH0gZnJvbSAnLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFZpZXdTZXJ2aWNlIH0gZnJvbSAnLi92aWV3L3ZpZXcnO1xuaW1wb3J0IHsgU3RhdGVSZWdpc3RyeSB9IGZyb20gJy4vc3RhdGUvc3RhdGVSZWdpc3RyeSc7XG5pbXBvcnQgeyBTdGF0ZVNlcnZpY2UgfSBmcm9tICcuL3N0YXRlL3N0YXRlU2VydmljZSc7XG5pbXBvcnQgeyBVSVJvdXRlckdsb2JhbHMgfSBmcm9tICcuL2dsb2JhbHMnO1xuaW1wb3J0IHsgVUlSb3V0ZXJQbHVnaW4sIERpc3Bvc2FibGUgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyB2YWx1ZXMsIHJlbW92ZUZyb20gfSBmcm9tICcuL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgVXJsU2VydmljZSB9IGZyb20gJy4vdXJsL3VybFNlcnZpY2UnO1xuaW1wb3J0IHsgTG9jYXRpb25TZXJ2aWNlcywgTG9jYXRpb25Db25maWcgfSBmcm9tICcuL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgVHJhY2UsIHRyYWNlIH0gZnJvbSAnLi9jb21tb24vdHJhY2UnO1xuXG4vKiogQGhpZGRlbiAqL1xubGV0IF9yb3V0ZXJJbnN0YW5jZSA9IDA7XG5cbi8qKlxuICogVGhlIG1hc3RlciBjbGFzcyB1c2VkIHRvIGluc3RhbnRpYXRlIGFuIGluc3RhbmNlIG9mIFVJLVJvdXRlci5cbiAqXG4gKiBVSS1Sb3V0ZXIgKGZvciBlYWNoIHNwZWNpZmljIGZyYW1ld29yaykgd2lsbCBjcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBkdXJpbmcgYm9vdHN0cmFwLlxuICogVGhpcyBjbGFzcyBpbnN0YW50aWF0ZXMgYW5kIHdpcmVzIHRoZSBVSS1Sb3V0ZXIgc2VydmljZXMgdG9nZXRoZXIuXG4gKlxuICogQWZ0ZXIgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFVJUm91dGVyIGNsYXNzIGlzIGNyZWF0ZWQsIGl0IHNob3VsZCBiZSBjb25maWd1cmVkIGZvciB5b3VyIGFwcC5cbiAqIEZvciBpbnN0YW5jZSwgYXBwIHN0YXRlcyBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBbW1VJUm91dGVyLnN0YXRlUmVnaXN0cnldXS5cbiAqXG4gKiAtLS1cbiAqXG4gKiBOb3JtYWxseSB0aGUgZnJhbWV3b3JrIGNvZGUgd2lsbCBib290c3RyYXAgVUktUm91dGVyLlxuICogSWYgeW91IGFyZSBib290c3RyYXBwaW5nIFVJUm91dGVyIG1hbnVhbGx5LCB0ZWxsIGl0IHRvIG1vbml0b3IgdGhlIFVSTCBieSBjYWxsaW5nXG4gKiBbW1VybFNlcnZpY2UubGlzdGVuXV0gdGhlbiBbW1VybFNlcnZpY2Uuc3luY11dLlxuICovXG5leHBvcnQgY2xhc3MgVUlSb3V0ZXIge1xuICAvKiogQGhpZGRlbiAqLyAkaWQgPSBfcm91dGVySW5zdGFuY2UrKztcbiAgLyoqIEBoaWRkZW4gKi8gX2Rpc3Bvc2VkID0gZmFsc2U7XG4gIC8qKiBAaGlkZGVuICovIHByaXZhdGUgX2Rpc3Bvc2FibGVzOiBEaXNwb3NhYmxlW10gPSBbXTtcblxuICAvKiogUHJvdmlkZXMgdHJhY2UgaW5mb3JtYXRpb24gdG8gdGhlIGNvbnNvbGUgKi9cbiAgdHJhY2U6IFRyYWNlID0gdHJhY2U7XG5cbiAgLyoqIFByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gdWktdmlldyBzeW5jaHJvbml6YXRpb24gKi9cbiAgdmlld1NlcnZpY2UgPSBuZXcgVmlld1NlcnZpY2UoKTtcblxuICAvKiogR2xvYmFsIHJvdXRlciBzdGF0ZSAqL1xuICBnbG9iYWxzOiBVSVJvdXRlckdsb2JhbHMgPSBuZXcgVUlSb3V0ZXJHbG9iYWxzKCk7XG5cbiAgLyoqIFByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gVHJhbnNpdGlvbnMgKi9cbiAgdHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlID0gbmV3IFRyYW5zaXRpb25TZXJ2aWNlKHRoaXMpO1xuXG4gIC8qKlxuICAgKiBEZXByZWNhdGVkIGZvciBwdWJsaWMgdXNlLiBVc2UgW1t1cmxTZXJ2aWNlXV0gaW5zdGVhZC5cbiAgICogQGRlcHJlY2F0ZWQgVXNlIFtbdXJsU2VydmljZV1dIGluc3RlYWRcbiAgICovXG4gIHVybE1hdGNoZXJGYWN0b3J5OiBVcmxNYXRjaGVyRmFjdG9yeSA9IG5ldyBVcmxNYXRjaGVyRmFjdG9yeSgpO1xuXG4gIC8qKlxuICAgKiBEZXByZWNhdGVkIGZvciBwdWJsaWMgdXNlLiBVc2UgW1t1cmxTZXJ2aWNlXV0gaW5zdGVhZC5cbiAgICogQGRlcHJlY2F0ZWQgVXNlIFtbdXJsU2VydmljZV1dIGluc3RlYWRcbiAgICovXG4gIHVybFJvdXRlcjogVXJsUm91dGVyID0gbmV3IFVybFJvdXRlcih0aGlzKTtcblxuICAvKiogUHJvdmlkZXMgYSByZWdpc3RyeSBmb3Igc3RhdGVzLCBhbmQgcmVsYXRlZCByZWdpc3RyYXRpb24gc2VydmljZXMgKi9cbiAgc3RhdGVSZWdpc3RyeTogU3RhdGVSZWdpc3RyeSA9IG5ldyBTdGF0ZVJlZ2lzdHJ5KHRoaXMpO1xuXG4gIC8qKiBQcm92aWRlcyBzZXJ2aWNlcyByZWxhdGVkIHRvIHN0YXRlcyAqL1xuICBzdGF0ZVNlcnZpY2UgPSBuZXcgU3RhdGVTZXJ2aWNlKHRoaXMpO1xuXG4gIC8qKiBQcm92aWRlcyBzZXJ2aWNlcyByZWxhdGVkIHRvIHRoZSBVUkwgKi9cbiAgdXJsU2VydmljZTogVXJsU2VydmljZSA9IG5ldyBVcmxTZXJ2aWNlKHRoaXMpO1xuXG4gIC8qKiBAaGlkZGVuIHBsdWdpbiBpbnN0YW5jZXMgYXJlIHJlZ2lzdGVyZWQgaGVyZSAqL1xuICBwcml2YXRlIF9wbHVnaW5zOiB7IFtrZXk6IHN0cmluZ106IFVJUm91dGVyUGx1Z2luIH0gPSB7fTtcblxuICAvKiogUmVnaXN0ZXJzIGFuIG9iamVjdCB0byBiZSBub3RpZmllZCB3aGVuIHRoZSByb3V0ZXIgaXMgZGlzcG9zZWQgKi9cbiAgZGlzcG9zYWJsZShkaXNwb3NhYmxlOiBEaXNwb3NhYmxlKSB7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChkaXNwb3NhYmxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwb3NlcyB0aGlzIHJvdXRlciBpbnN0YW5jZVxuICAgKlxuICAgKiBXaGVuIGNhbGxlZCwgY2xlYXJzIHJlc291cmNlcyByZXRhaW5lZCBieSB0aGUgcm91dGVyIGJ5IGNhbGxpbmcgYGRpc3Bvc2UodGhpcylgIG9uIGFsbFxuICAgKiByZWdpc3RlcmVkIFtbZGlzcG9zYWJsZV1dIG9iamVjdHMuXG4gICAqXG4gICAqIE9yLCBpZiBhIGBkaXNwb3NhYmxlYCBvYmplY3QgaXMgcHJvdmlkZWQsIGNhbGxzIGBkaXNwb3NlKHRoaXMpYCBvbiB0aGF0IG9iamVjdCBvbmx5LlxuICAgKlxuICAgKiBAcGFyYW0gZGlzcG9zYWJsZSAob3B0aW9uYWwpIHRoZSBkaXNwb3NhYmxlIHRvIGRpc3Bvc2VcbiAgICovXG4gIGRpc3Bvc2UoZGlzcG9zYWJsZT86IGFueSk6IHZvaWQge1xuICAgIGlmIChkaXNwb3NhYmxlICYmIGlzRnVuY3Rpb24oZGlzcG9zYWJsZS5kaXNwb3NlKSkge1xuICAgICAgZGlzcG9zYWJsZS5kaXNwb3NlKHRoaXMpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMuc2xpY2UoKS5mb3JFYWNoKGQgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdHlwZW9mIGQuZGlzcG9zZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkLmRpc3Bvc2UodGhpcyk7XG4gICAgICAgIHJlbW92ZUZyb20odGhpcy5fZGlzcG9zYWJsZXMsIGQpO1xuICAgICAgfSBjYXRjaCAoaWdub3JlZCkge31cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGBVSVJvdXRlcmAgb2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSBsb2NhdGlvblNlcnZpY2UgYSBbW0xvY2F0aW9uU2VydmljZXNdXSBpbXBsZW1lbnRhdGlvblxuICAgKiBAcGFyYW0gbG9jYXRpb25Db25maWcgYSBbW0xvY2F0aW9uQ29uZmlnXV0gaW1wbGVtZW50YXRpb25cbiAgICogQGludGVybmFsYXBpXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgbG9jYXRpb25TZXJ2aWNlOiBMb2NhdGlvblNlcnZpY2VzID0gVXJsU2VydmljZS5sb2NhdGlvblNlcnZpY2VTdHViLFxuICAgIHB1YmxpYyBsb2NhdGlvbkNvbmZpZzogTG9jYXRpb25Db25maWcgPSBVcmxTZXJ2aWNlLmxvY2F0aW9uQ29uZmlnU3R1YixcbiAgKSB7XG4gICAgdGhpcy52aWV3U2VydmljZS5fcGx1Z2luYXBpLl9yb290Vmlld0NvbnRleHQodGhpcy5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKSk7XG4gICAgdGhpcy5nbG9iYWxzLiRjdXJyZW50ID0gdGhpcy5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKTtcbiAgICB0aGlzLmdsb2JhbHMuY3VycmVudCA9IHRoaXMuZ2xvYmFscy4kY3VycmVudC5zZWxmO1xuXG4gICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMuZ2xvYmFscyk7XG4gICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMuc3RhdGVTZXJ2aWNlKTtcbiAgICB0aGlzLmRpc3Bvc2FibGUodGhpcy5zdGF0ZVJlZ2lzdHJ5KTtcbiAgICB0aGlzLmRpc3Bvc2FibGUodGhpcy50cmFuc2l0aW9uU2VydmljZSk7XG4gICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMudXJsUm91dGVyKTtcbiAgICB0aGlzLmRpc3Bvc2FibGUobG9jYXRpb25TZXJ2aWNlKTtcbiAgICB0aGlzLmRpc3Bvc2FibGUobG9jYXRpb25Db25maWcpO1xuICB9XG5cbiAgLyoqIEFkZCBwbHVnaW4gKGFzIEVTNiBjbGFzcykgKi9cbiAgcGx1Z2luPFQgZXh0ZW5kcyBVSVJvdXRlclBsdWdpbj4ocGx1Z2luOiB7IG5ldyAocm91dGVyOiBVSVJvdXRlciwgb3B0aW9ucz86IGFueSk6IFQgfSwgb3B0aW9ucz86IGFueSk6IFQ7XG4gIC8qKiBBZGQgcGx1Z2luIChhcyBqYXZhc2NyaXB0IGNvbnN0cnVjdG9yIGZ1bmN0aW9uKSAqL1xuICBwbHVnaW48VCBleHRlbmRzIFVJUm91dGVyUGx1Z2luPihwbHVnaW46IHsgKHJvdXRlcjogVUlSb3V0ZXIsIG9wdGlvbnM/OiBhbnkpOiB2b2lkIH0sIG9wdGlvbnM/OiBhbnkpOiBUO1xuICAvKiogQWRkIHBsdWdpbiAoYXMgamF2YXNjcmlwdCBmYWN0b3J5IGZ1bmN0aW9uKSAqL1xuICBwbHVnaW48VCBleHRlbmRzIFVJUm91dGVyUGx1Z2luPihwbHVnaW46IFBsdWdpbkZhY3Rvcnk8VD4sIG9wdGlvbnM/OiBhbnkpOiBUO1xuICAvKipcbiAgICogQWRkcyBhIHBsdWdpbiB0byBVSS1Sb3V0ZXJcbiAgICpcbiAgICogVGhpcyBtZXRob2QgYWRkcyBhIFVJLVJvdXRlciBQbHVnaW4uXG4gICAqIEEgcGx1Z2luIGNhbiBlbmhhbmNlIG9yIGNoYW5nZSBVSS1Sb3V0ZXIgYmVoYXZpb3IgdXNpbmcgYW55IHB1YmxpYyBBUEkuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogaW1wb3J0IHsgTXlDb29sUGx1Z2luIH0gZnJvbSBcInVpLXJvdXRlci1jb29sLXBsdWdpblwiO1xuICAgKlxuICAgKiB2YXIgcGx1Z2luID0gcm91dGVyLmFkZFBsdWdpbihNeUNvb2xQbHVnaW4pO1xuICAgKiBgYGBcbiAgICpcbiAgICogIyMjIFBsdWdpbiBhdXRob3JpbmdcbiAgICpcbiAgICogQSBwbHVnaW4gaXMgc2ltcGx5IGEgY2xhc3MgKG9yIGNvbnN0cnVjdG9yIGZ1bmN0aW9uKSB3aGljaCBhY2NlcHRzIGEgW1tVSVJvdXRlcl1dIGluc3RhbmNlIGFuZCAob3B0aW9uYWxseSkgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAqXG4gICAqIFRoZSBwbHVnaW4gY2FuIGltcGxlbWVudCBpdHMgZnVuY3Rpb25hbGl0eSB1c2luZyBhbnkgb2YgdGhlIHB1YmxpYyBBUElzIG9mIFtbVUlSb3V0ZXJdXS5cbiAgICogRm9yIGV4YW1wbGUsIGl0IG1heSBjb25maWd1cmUgcm91dGVyIG9wdGlvbnMgb3IgYWRkIGEgVHJhbnNpdGlvbiBIb29rLlxuICAgKlxuICAgKiBUaGUgcGx1Z2luIGNhbiB0aGVuIGJlIHB1Ymxpc2hlZCBhcyBhIHNlcGFyYXRlIG1vZHVsZS5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiBleHBvcnQgY2xhc3MgTXlBdXRoUGx1Z2luIGltcGxlbWVudHMgVUlSb3V0ZXJQbHVnaW4ge1xuICAgKiAgIGNvbnN0cnVjdG9yKHJvdXRlcjogVUlSb3V0ZXIsIG9wdGlvbnM6IGFueSkge1xuICAgKiAgICAgdGhpcy5uYW1lID0gXCJNeUF1dGhQbHVnaW5cIjtcbiAgICogICAgIGxldCAkdHJhbnNpdGlvbnMgPSByb3V0ZXIudHJhbnNpdGlvblNlcnZpY2U7XG4gICAqICAgICBsZXQgJHN0YXRlID0gcm91dGVyLnN0YXRlU2VydmljZTtcbiAgICpcbiAgICogICAgIGxldCBhdXRoQ3JpdGVyaWEgPSB7XG4gICAqICAgICAgIHRvOiAoc3RhdGUpID0+IHN0YXRlLmRhdGEgJiYgc3RhdGUuZGF0YS5yZXF1aXJlc0F1dGhcbiAgICogICAgIH07XG4gICAqXG4gICAqICAgICBmdW5jdGlvbiBhdXRoSG9vayh0cmFuc2l0aW9uOiBUcmFuc2l0aW9uKSB7XG4gICAqICAgICAgIGxldCBhdXRoU2VydmljZSA9IHRyYW5zaXRpb24uaW5qZWN0b3IoKS5nZXQoJ0F1dGhTZXJ2aWNlJyk7XG4gICAqICAgICAgIGlmICghYXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICogICAgICAgICByZXR1cm4gJHN0YXRlLnRhcmdldCgnbG9naW4nKTtcbiAgICogICAgICAgfVxuICAgKiAgICAgfVxuICAgKlxuICAgKiAgICAgJHRyYW5zaXRpb25zLm9uU3RhcnQoYXV0aENyaXRlcmlhLCBhdXRoSG9vayk7XG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGx1Z2luIG9uZSBvZjpcbiAgICogICAgICAgIC0gYSBwbHVnaW4gY2xhc3Mgd2hpY2ggaW1wbGVtZW50cyBbW1VJUm91dGVyUGx1Z2luXV1cbiAgICogICAgICAgIC0gYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3IgYSBbW1VJUm91dGVyUGx1Z2luXV0gd2hpY2ggYWNjZXB0cyBhIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZVxuICAgKiAgICAgICAgLSBhIGZhY3RvcnkgZnVuY3Rpb24gd2hpY2ggYWNjZXB0cyBhIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZSBhbmQgcmV0dXJucyBhIFtbVUlSb3V0ZXJQbHVnaW5dXSBpbnN0YW5jZVxuICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zIHRvIHBhc3MgdG8gdGhlIHBsdWdpbiBjbGFzcy9mYWN0b3J5XG4gICAqIEByZXR1cm5zIHRoZSByZWdpc3RlcmVkIHBsdWdpbiBpbnN0YW5jZVxuICAgKi9cbiAgcGx1Z2luPFQgZXh0ZW5kcyBVSVJvdXRlclBsdWdpbj4ocGx1Z2luOiBhbnksIG9wdGlvbnM6IGFueSA9IHt9KTogVCB7XG4gICAgY29uc3QgcGx1Z2luSW5zdGFuY2UgPSBuZXcgcGx1Z2luKHRoaXMsIG9wdGlvbnMpO1xuICAgIGlmICghcGx1Z2luSW5zdGFuY2UubmFtZSkgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwcm9wZXJ0eSBgbmFtZWAgbWlzc2luZyBvbiBwbHVnaW46ICcgKyBwbHVnaW5JbnN0YW5jZSk7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChwbHVnaW5JbnN0YW5jZSk7XG4gICAgcmV0dXJuICh0aGlzLl9wbHVnaW5zW3BsdWdpbkluc3RhbmNlLm5hbWVdID0gcGx1Z2luSW5zdGFuY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgcmVnaXN0ZXJlZCBwbHVnaW5zXG4gICAqXG4gICAqIFJldHVybnMgdGhlIHJlZ2lzdGVyZWQgcGx1Z2luIG9mIHRoZSBnaXZlbiBgcGx1Z2luTmFtZWAuXG4gICAqIElmIG5vIGBwbHVnaW5OYW1lYCBpcyBnaXZlbiwgcmV0dXJucyBhbGwgcmVnaXN0ZXJlZCBwbHVnaW5zXG4gICAqXG4gICAqIEBwYXJhbSBwbHVnaW5OYW1lIChvcHRpb25hbCkgdGhlIG5hbWUgb2YgdGhlIHBsdWdpbiB0byBnZXRcbiAgICogQHJldHVybiB0aGUgbmFtZWQgcGx1Z2luICh1bmRlZmluZWQgaWYgbm90IGZvdW5kKSwgb3IgYWxsIHBsdWdpbnMgKGlmIGBwbHVnaW5OYW1lYCBpcyBvbWl0dGVkKVxuICAgKi9cbiAgZ2V0UGx1Z2luKHBsdWdpbk5hbWU6IHN0cmluZyk6IFVJUm91dGVyUGx1Z2luO1xuICBnZXRQbHVnaW4oKTogVUlSb3V0ZXJQbHVnaW5bXTtcbiAgZ2V0UGx1Z2luKHBsdWdpbk5hbWU/OiBzdHJpbmcpOiBVSVJvdXRlclBsdWdpbiB8IFVJUm91dGVyUGx1Z2luW10ge1xuICAgIHJldHVybiBwbHVnaW5OYW1lID8gdGhpcy5fcGx1Z2luc1twbHVnaW5OYW1lXSA6IHZhbHVlcyh0aGlzLl9wbHVnaW5zKTtcbiAgfVxufVxuXG4vKiogQGludGVybmFsYXBpICovXG5leHBvcnQgdHlwZSBQbHVnaW5GYWN0b3J5PFQ+ID0gKHJvdXRlcjogVUlSb3V0ZXIsIG9wdGlvbnM/OiBhbnkpID0+IFQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvcm91dGVyLnRzIiwiLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBmb3JFYWNoLCBleHRlbmQgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzT2JqZWN0LCBpc0RlZmluZWQsIGlzRnVuY3Rpb24sIGlzU3RyaW5nIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgVXJsTWF0Y2hlciB9IGZyb20gJy4vdXJsTWF0Y2hlcic7XG5pbXBvcnQgeyBQYXJhbSwgRGVmVHlwZSB9IGZyb20gJy4uL3BhcmFtcy9wYXJhbSc7XG5pbXBvcnQgeyBQYXJhbVR5cGVzIH0gZnJvbSAnLi4vcGFyYW1zL3BhcmFtVHlwZXMnO1xuaW1wb3J0IHsgUGFyYW1UeXBlRGVmaW5pdGlvbiB9IGZyb20gJy4uL3BhcmFtcy9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBQYXJhbVR5cGUgfSBmcm9tICcuLi9wYXJhbXMvcGFyYW1UeXBlJztcbmltcG9ydCB7IFBhcmFtRmFjdG9yeSwgVXJsTWF0Y2hlckNvbmZpZyB9IGZyb20gJy4vaW50ZXJmYWNlJztcblxuLyoqXG4gKiBGYWN0b3J5IGZvciBbW1VybE1hdGNoZXJdXSBpbnN0YW5jZXMuXG4gKlxuICogVGhlIGZhY3RvcnkgaXMgYXZhaWxhYmxlIHRvIG5nMSBzZXJ2aWNlcyBhc1xuICogYCR1cmxNYXRjaGVyRmFjdG9yeWAgb3IgbmcxIHByb3ZpZGVycyBhcyBgJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXJgLlxuICovXG5leHBvcnQgY2xhc3MgVXJsTWF0Y2hlckZhY3RvcnkgaW1wbGVtZW50cyBEaXNwb3NhYmxlLCBVcmxNYXRjaGVyQ29uZmlnIHtcbiAgLyoqIEBoaWRkZW4gKi8gcGFyYW1UeXBlcyA9IG5ldyBQYXJhbVR5cGVzKCk7XG4gIC8qKiBAaGlkZGVuICovIF9pc0Nhc2VJbnNlbnNpdGl2ZSA9IGZhbHNlO1xuICAvKiogQGhpZGRlbiAqLyBfaXNTdHJpY3RNb2RlID0gdHJ1ZTtcbiAgLyoqIEBoaWRkZW4gKi8gX2RlZmF1bHRTcXVhc2hQb2xpY3k6IGJvb2xlYW4gfCBzdHJpbmcgPSBmYWxzZTtcblxuICAvKiogQGludGVybmFsYXBpIENyZWF0ZXMgYSBuZXcgW1tQYXJhbV1dIGZvciBhIGdpdmVuIGxvY2F0aW9uIChEZWZUeXBlKSAqL1xuICBwYXJhbUZhY3Rvcnk6IFBhcmFtRmFjdG9yeSA9IHtcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBbW1BhcmFtXV0gZnJvbSBhIENPTkZJRyBibG9jayAqL1xuICAgIGZyb21Db25maWc6IChpZDogc3RyaW5nLCB0eXBlOiBQYXJhbVR5cGUsIGNvbmZpZzogYW55KSA9PiBuZXcgUGFyYW0oaWQsIHR5cGUsIGNvbmZpZywgRGVmVHlwZS5DT05GSUcsIHRoaXMpLFxuXG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgW1tQYXJhbV1dIGZyb20gYSB1cmwgUEFUSCAqL1xuICAgIGZyb21QYXRoOiAoaWQ6IHN0cmluZywgdHlwZTogUGFyYW1UeXBlLCBjb25maWc6IGFueSkgPT4gbmV3IFBhcmFtKGlkLCB0eXBlLCBjb25maWcsIERlZlR5cGUuUEFUSCwgdGhpcyksXG5cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBbW1BhcmFtXV0gZnJvbSBhIHVybCBTRUFSQ0ggKi9cbiAgICBmcm9tU2VhcmNoOiAoaWQ6IHN0cmluZywgdHlwZTogUGFyYW1UeXBlLCBjb25maWc6IGFueSkgPT4gbmV3IFBhcmFtKGlkLCB0eXBlLCBjb25maWcsIERlZlR5cGUuU0VBUkNILCB0aGlzKSxcbiAgfTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBleHRlbmQodGhpcywgeyBVcmxNYXRjaGVyLCBQYXJhbSB9KTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBjYXNlSW5zZW5zaXRpdmUodmFsdWU/OiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLl9pc0Nhc2VJbnNlbnNpdGl2ZSA9IGlzRGVmaW5lZCh2YWx1ZSkgPyB2YWx1ZSA6IHRoaXMuX2lzQ2FzZUluc2Vuc2l0aXZlKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBzdHJpY3RNb2RlKHZhbHVlPzogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5faXNTdHJpY3RNb2RlID0gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcy5faXNTdHJpY3RNb2RlKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBkZWZhdWx0U3F1YXNoUG9saWN5KHZhbHVlPzogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIGlmIChpc0RlZmluZWQodmFsdWUpICYmIHZhbHVlICE9PSB0cnVlICYmIHZhbHVlICE9PSBmYWxzZSAmJiAhaXNTdHJpbmcodmFsdWUpKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNxdWFzaCBwb2xpY3k6ICR7dmFsdWV9LiBWYWxpZCBwb2xpY2llczogZmFsc2UsIHRydWUsIGFyYml0cmFyeS1zdHJpbmdgKTtcbiAgICByZXR1cm4gKHRoaXMuX2RlZmF1bHRTcXVhc2hQb2xpY3kgPSBpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiB0aGlzLl9kZWZhdWx0U3F1YXNoUG9saWN5KTtcbiAgfVxuXG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgX2dldENvbmZpZyA9IGNvbmZpZyA9PlxuICAgIGV4dGVuZCh7IHN0cmljdDogdGhpcy5faXNTdHJpY3RNb2RlLCBjYXNlSW5zZW5zaXRpdmU6IHRoaXMuX2lzQ2FzZUluc2Vuc2l0aXZlIH0sIGNvbmZpZyk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBbW1VybE1hdGNoZXJdXSBmb3IgdGhlIHNwZWNpZmllZCBwYXR0ZXJuLlxuICAgKlxuICAgKiBAcGFyYW0gcGF0dGVybiAgVGhlIFVSTCBwYXR0ZXJuLlxuICAgKiBAcGFyYW0gY29uZmlnICBUaGUgY29uZmlnIG9iamVjdCBoYXNoLlxuICAgKiBAcmV0dXJucyBUaGUgVXJsTWF0Y2hlci5cbiAgICovXG4gIGNvbXBpbGUocGF0dGVybjogc3RyaW5nLCBjb25maWc/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XG4gICAgcmV0dXJuIG5ldyBVcmxNYXRjaGVyKHBhdHRlcm4sIHRoaXMucGFyYW1UeXBlcywgdGhpcy5wYXJhbUZhY3RvcnksIHRoaXMuX2dldENvbmZpZyhjb25maWcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHNwZWNpZmllZCBvYmplY3QgaXMgYSBbW1VybE1hdGNoZXJdXSwgb3IgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKlxuICAgKiBAcGFyYW0gb2JqZWN0ICBUaGUgb2JqZWN0IHRvIHBlcmZvcm0gdGhlIHR5cGUgY2hlY2sgYWdhaW5zdC5cbiAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3QgbWF0Y2hlcyB0aGUgYFVybE1hdGNoZXJgIGludGVyZmFjZSwgYnlcbiAgICogICAgICAgICAgaW1wbGVtZW50aW5nIGFsbCB0aGUgc2FtZSBtZXRob2RzLlxuICAgKi9cbiAgaXNNYXRjaGVyKG9iamVjdDogYW55KTogYm9vbGVhbiB7XG4gICAgLy8gVE9ETzogdHlwZW9mP1xuICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSkgcmV0dXJuIGZhbHNlO1xuICAgIGxldCByZXN1bHQgPSB0cnVlO1xuXG4gICAgZm9yRWFjaChVcmxNYXRjaGVyLnByb3RvdHlwZSwgKHZhbCwgbmFtZSkgPT4ge1xuICAgICAgaWYgKGlzRnVuY3Rpb24odmFsKSkgcmVzdWx0ID0gcmVzdWx0ICYmIChpc0RlZmluZWQob2JqZWN0W25hbWVdKSAmJiBpc0Z1bmN0aW9uKG9iamVjdFtuYW1lXSkpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbmQgcmVnaXN0ZXJzIGEgY3VzdG9tIFtbUGFyYW1UeXBlXV0gb2JqZWN0XG4gICAqXG4gICAqIEEgW1tQYXJhbVR5cGVdXSBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSBVUkxzIHdpdGggdHlwZWQgcGFyYW1ldGVycy5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgIFRoZSB0eXBlIG5hbWUuXG4gICAqIEBwYXJhbSBkZWZpbml0aW9uIFRoZSB0eXBlIGRlZmluaXRpb24uIFNlZSBbW1BhcmFtVHlwZURlZmluaXRpb25dXSBmb3IgaW5mb3JtYXRpb24gb24gdGhlIHZhbHVlcyBhY2NlcHRlZC5cbiAgICogQHBhcmFtIGRlZmluaXRpb25GbiBBIGZ1bmN0aW9uIHRoYXQgaXMgaW5qZWN0ZWQgYmVmb3JlIHRoZSBhcHAgcnVudGltZSBzdGFydHMuXG4gICAqICAgICAgICBUaGUgcmVzdWx0IG9mIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIGEgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0uXG4gICAqICAgICAgICBUaGUgcmVzdWx0IGlzIG1lcmdlZCBpbnRvIHRoZSBleGlzdGluZyBgZGVmaW5pdGlvbmAuXG4gICAqICAgICAgICBTZWUgW1tQYXJhbVR5cGVdXSBmb3IgaW5mb3JtYXRpb24gb24gdGhlIHZhbHVlcyBhY2NlcHRlZC5cbiAgICpcbiAgICogQHJldHVybnMgLSBpZiBhIHR5cGUgd2FzIHJlZ2lzdGVyZWQ6IHRoZSBbW1VybE1hdGNoZXJGYWN0b3J5XV1cbiAgICogICAtIGlmIG9ubHkgdGhlIGBuYW1lYCBwYXJhbWV0ZXIgd2FzIHNwZWNpZmllZDogdGhlIGN1cnJlbnRseSByZWdpc3RlcmVkIFtbUGFyYW1UeXBlXV0gb2JqZWN0LCBvciB1bmRlZmluZWRcbiAgICpcbiAgICogTm90ZTogUmVnaXN0ZXIgY3VzdG9tIHR5cGVzICpiZWZvcmUgdXNpbmcgdGhlbSogaW4gYSBzdGF0ZSBkZWZpbml0aW9uLlxuICAgKlxuICAgKiBTZWUgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0gZm9yIGV4YW1wbGVzXG4gICAqL1xuICB0eXBlKG5hbWU6IHN0cmluZywgZGVmaW5pdGlvbj86IFBhcmFtVHlwZURlZmluaXRpb24sIGRlZmluaXRpb25Gbj86ICgpID0+IFBhcmFtVHlwZURlZmluaXRpb24pIHtcbiAgICBjb25zdCB0eXBlID0gdGhpcy5wYXJhbVR5cGVzLnR5cGUobmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuKTtcbiAgICByZXR1cm4gIWlzRGVmaW5lZChkZWZpbml0aW9uKSA/IHR5cGUgOiB0aGlzO1xuICB9XG5cbiAgLyoqIEBoaWRkZW4gKi9cbiAgJGdldCgpIHtcbiAgICB0aGlzLnBhcmFtVHlwZXMuZW5xdWV1ZSA9IGZhbHNlO1xuICAgIHRoaXMucGFyYW1UeXBlcy5fZmx1c2hUeXBlUXVldWUoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLnBhcmFtVHlwZXMuZGlzcG9zZSgpO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvdXJsL3VybE1hdGNoZXJGYWN0b3J5LnRzIiwiLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgY3JlYXRlUHJveHlGdW5jdGlvbnMsIGV4dGVuZCwgcmVtb3ZlRnJvbSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgaXNEZWZpbmVkLCBpc0Z1bmN0aW9uLCBpc1N0cmluZyB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFVybE1hdGNoZXIgfSBmcm9tICcuL3VybE1hdGNoZXInO1xuaW1wb3J0IHsgUmF3UGFyYW1zIH0gZnJvbSAnLi4vcGFyYW1zL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmltcG9ydCB7IGlzLCBwYXR0ZXJuLCB2YWwgfSBmcm9tICcuLi9jb21tb24vaG9mJztcbmltcG9ydCB7IFVybFJ1bGVGYWN0b3J5IH0gZnJvbSAnLi91cmxSdWxlJztcbmltcG9ydCB7IFRhcmdldFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvdGFyZ2V0U3RhdGUnO1xuaW1wb3J0IHtcbiAgTWF0Y2hlclVybFJ1bGUsXG4gIE1hdGNoUmVzdWx0LFxuICBVcmxQYXJ0cyxcbiAgVXJsUnVsZSxcbiAgVXJsUnVsZUhhbmRsZXJGbixcbiAgVXJsUnVsZU1hdGNoRm4sXG4gIFVybFJ1bGVzQXBpLFxuICBVcmxTeW5jQXBpLFxufSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUYXJnZXRTdGF0ZURlZiB9IGZyb20gJy4uL3N0YXRlL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBzdHJpcExhc3RQYXRoRWxlbWVudCB9IGZyb20gJy4uL2NvbW1vbic7XG5cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBhcHBlbmRCYXNlUGF0aCh1cmw6IHN0cmluZywgaXNIdG1sNTogYm9vbGVhbiwgYWJzb2x1dGU6IGJvb2xlYW4sIGJhc2VIcmVmOiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoYmFzZUhyZWYgPT09ICcvJykgcmV0dXJuIHVybDtcbiAgaWYgKGlzSHRtbDUpIHJldHVybiBzdHJpcExhc3RQYXRoRWxlbWVudChiYXNlSHJlZikgKyB1cmw7XG4gIGlmIChhYnNvbHV0ZSkgcmV0dXJuIGJhc2VIcmVmLnNsaWNlKDEpICsgdXJsO1xuICByZXR1cm4gdXJsO1xufVxuXG4vKiogQGhpZGRlbiAqL1xuY29uc3QgcHJpb3JpdHlTb3J0ID0gKGE6IFVybFJ1bGUsIGI6IFVybFJ1bGUpID0+IChiLnByaW9yaXR5IHx8IDApIC0gKGEucHJpb3JpdHkgfHwgMCk7XG5cbi8qKiBAaGlkZGVuICovXG5jb25zdCB0eXBlU29ydCA9IChhOiBVcmxSdWxlLCBiOiBVcmxSdWxlKSA9PiB7XG4gIGNvbnN0IHdlaWdodHMgPSB7IFNUQVRFOiA0LCBVUkxNQVRDSEVSOiA0LCBSRUdFWFA6IDMsIFJBVzogMiwgT1RIRVI6IDEgfTtcbiAgcmV0dXJuICh3ZWlnaHRzW2EudHlwZV0gfHwgMCkgLSAod2VpZ2h0c1tiLnR5cGVdIHx8IDApO1xufTtcblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IHVybE1hdGNoZXJTb3J0ID0gKGE6IE1hdGNoZXJVcmxSdWxlLCBiOiBNYXRjaGVyVXJsUnVsZSkgPT5cbiAgIWEudXJsTWF0Y2hlciB8fCAhYi51cmxNYXRjaGVyID8gMCA6IFVybE1hdGNoZXIuY29tcGFyZShhLnVybE1hdGNoZXIsIGIudXJsTWF0Y2hlcik7XG5cbi8qKiBAaGlkZGVuICovXG5jb25zdCBpZFNvcnQgPSAoYTogVXJsUnVsZSwgYjogVXJsUnVsZSkgPT4ge1xuICAvLyBJZGVudGljYWxseSBzb3J0ZWQgU1RBVEUgYW5kIFVSTE1BVENIRVIgYmVzdCBydWxlIHdpbGwgYmUgY2hvc2VuIGJ5IGBtYXRjaFByaW9yaXR5YCBhZnRlciBlYWNoIHJ1bGUgbWF0Y2hlcyB0aGUgVVJMXG4gIGNvbnN0IHVzZU1hdGNoUHJpb3JpdHkgPSB7IFNUQVRFOiB0cnVlLCBVUkxNQVRDSEVSOiB0cnVlIH07XG4gIGNvbnN0IGVxdWFsID0gdXNlTWF0Y2hQcmlvcml0eVthLnR5cGVdICYmIHVzZU1hdGNoUHJpb3JpdHlbYi50eXBlXTtcbiAgcmV0dXJuIGVxdWFsID8gMCA6IChhLiRpZCB8fCAwKSAtIChiLiRpZCB8fCAwKTtcbn07XG5cbi8qKlxuICogRGVmYXVsdCBydWxlIHByaW9yaXR5IHNvcnRpbmcgZnVuY3Rpb24uXG4gKlxuICogU29ydHMgcnVsZXMgYnk6XG4gKlxuICogLSBFeHBsaWNpdCBwcmlvcml0eSAoc2V0IHJ1bGUgcHJpb3JpdHkgdXNpbmcgW1tVcmxSdWxlc0FwaS53aGVuXV0pXG4gKiAtIFJ1bGUgdHlwZSAoU1RBVEU6IDQsIFVSTE1BVENIRVI6IDQsIFJFR0VYUDogMywgUkFXOiAyLCBPVEhFUjogMSlcbiAqIC0gYFVybE1hdGNoZXJgIHNwZWNpZmljaXR5IChbW1VybE1hdGNoZXIuY29tcGFyZV1dKTogd29ya3MgZm9yIFNUQVRFIGFuZCBVUkxNQVRDSEVSIHR5cGVzIHRvIHBpY2sgdGhlIG1vc3Qgc3BlY2lmaWMgcnVsZS5cbiAqIC0gUnVsZSByZWdpc3RyYXRpb24gb3JkZXIgKGZvciBydWxlIHR5cGVzIG90aGVyIHRoYW4gU1RBVEUgYW5kIFVSTE1BVENIRVIpXG4gKiAgIC0gRXF1YWxseSBzb3J0ZWQgU3RhdGUgYW5kIFVybE1hdGNoZXIgcnVsZXMgd2lsbCBlYWNoIG1hdGNoIHRoZSBVUkwuXG4gKiAgICAgVGhlbiwgdGhlICpiZXN0KiBtYXRjaCBpcyBjaG9zZW4gYmFzZWQgb24gaG93IG1hbnkgcGFyYW1ldGVyIHZhbHVlcyB3ZXJlIG1hdGNoZWQuXG4gKlxuICogQGNvcmVhcGlcbiAqL1xubGV0IGRlZmF1bHRSdWxlU29ydEZuOiAoYTogVXJsUnVsZSwgYjogVXJsUnVsZSkgPT4gbnVtYmVyO1xuZGVmYXVsdFJ1bGVTb3J0Rm4gPSAoYSwgYikgPT4ge1xuICBsZXQgY21wID0gcHJpb3JpdHlTb3J0KGEsIGIpO1xuICBpZiAoY21wICE9PSAwKSByZXR1cm4gY21wO1xuXG4gIGNtcCA9IHR5cGVTb3J0KGEsIGIpO1xuICBpZiAoY21wICE9PSAwKSByZXR1cm4gY21wO1xuXG4gIGNtcCA9IHVybE1hdGNoZXJTb3J0KGEgYXMgTWF0Y2hlclVybFJ1bGUsIGIgYXMgTWF0Y2hlclVybFJ1bGUpO1xuICBpZiAoY21wICE9PSAwKSByZXR1cm4gY21wO1xuXG4gIHJldHVybiBpZFNvcnQoYSwgYik7XG59O1xuXG4vKipcbiAqIFVwZGF0ZXMgVVJMIGFuZCByZXNwb25kcyB0byBVUkwgY2hhbmdlc1xuICpcbiAqICMjIyBEZXByZWNhdGlvbiB3YXJuaW5nOlxuICogVGhpcyBjbGFzcyBpcyBub3cgY29uc2lkZXJlZCB0byBiZSBhbiBpbnRlcm5hbCBBUElcbiAqIFVzZSB0aGUgW1tVcmxTZXJ2aWNlXV0gaW5zdGVhZC5cbiAqIEZvciBjb25maWd1cmluZyBVUkwgcnVsZXMsIHVzZSB0aGUgW1tVcmxSdWxlc0FwaV1dIHdoaWNoIGNhbiBiZSBmb3VuZCBhcyBbW1VybFNlcnZpY2UucnVsZXNdXS5cbiAqXG4gKiBUaGlzIGNsYXNzIHVwZGF0ZXMgdGhlIFVSTCB3aGVuIHRoZSBzdGF0ZSBjaGFuZ2VzLlxuICogSXQgYWxzbyByZXNwb25kcyB0byBjaGFuZ2VzIGluIHRoZSBVUkwuXG4gKi9cbmV4cG9ydCBjbGFzcyBVcmxSb3V0ZXIgaW1wbGVtZW50cyBVcmxSdWxlc0FwaSwgVXJsU3luY0FwaSwgRGlzcG9zYWJsZSB7XG4gIC8qKiB1c2VkIHRvIGNyZWF0ZSBbW1VybFJ1bGVdXSBvYmplY3RzIGZvciBjb21tb24gY2FzZXMgKi9cbiAgcHVibGljIHVybFJ1bGVGYWN0b3J5OiBVcmxSdWxlRmFjdG9yeTtcblxuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlIF9yb3V0ZXI6IFVJUm91dGVyO1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlIGxvY2F0aW9uOiBzdHJpbmc7XG4gIC8qKiBAaGlkZGVuICovIHByaXZhdGUgX3NvcnRGbiA9IGRlZmF1bHRSdWxlU29ydEZuO1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlIF9zdG9wRm46IEZ1bmN0aW9uO1xuICAvKiogQGhpZGRlbiAqLyBfcnVsZXM6IFVybFJ1bGVbXSA9IFtdO1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlIF9vdGhlcndpc2VGbjogVXJsUnVsZTtcbiAgLyoqIEBoaWRkZW4gKi8gaW50ZXJjZXB0RGVmZXJyZWQgPSBmYWxzZTtcbiAgLyoqIEBoaWRkZW4gKi8gcHJpdmF0ZSBfaWQgPSAwO1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlIF9zb3J0ZWQgPSBmYWxzZTtcblxuICAvKiogQGhpZGRlbiAqL1xuICBjb25zdHJ1Y3Rvcihyb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgdGhpcy5fcm91dGVyID0gcm91dGVyO1xuICAgIHRoaXMudXJsUnVsZUZhY3RvcnkgPSBuZXcgVXJsUnVsZUZhY3Rvcnkocm91dGVyKTtcbiAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyh2YWwoVXJsUm91dGVyLnByb3RvdHlwZSksIHRoaXMsIHZhbCh0aGlzKSk7XG4gIH1cblxuICAvKiogQGludGVybmFsYXBpICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5saXN0ZW4oZmFsc2UpO1xuICAgIHRoaXMuX3J1bGVzID0gW107XG4gICAgZGVsZXRlIHRoaXMuX290aGVyd2lzZUZuO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHNvcnQoY29tcGFyZUZuPzogKGE6IFVybFJ1bGUsIGI6IFVybFJ1bGUpID0+IG51bWJlcikge1xuICAgIHRoaXMuX3J1bGVzID0gdGhpcy5zdGFibGVTb3J0KHRoaXMuX3J1bGVzLCAodGhpcy5fc29ydEZuID0gY29tcGFyZUZuIHx8IHRoaXMuX3NvcnRGbikpO1xuICAgIHRoaXMuX3NvcnRlZCA9IHRydWU7XG4gIH1cblxuICBwcml2YXRlIGVuc3VyZVNvcnRlZCgpIHtcbiAgICB0aGlzLl9zb3J0ZWQgfHwgdGhpcy5zb3J0KCk7XG4gIH1cblxuICBwcml2YXRlIHN0YWJsZVNvcnQoYXJyLCBjb21wYXJlRm4pIHtcbiAgICBjb25zdCBhcnJPZldyYXBwZXIgPSBhcnIubWFwKChlbGVtLCBpZHgpID0+ICh7IGVsZW0sIGlkeCB9KSk7XG5cbiAgICBhcnJPZldyYXBwZXIuc29ydCgod3JhcHBlckEsIHdyYXBwZXJCKSA9PiB7XG4gICAgICBjb25zdCBjbXBEaWZmID0gY29tcGFyZUZuKHdyYXBwZXJBLmVsZW0sIHdyYXBwZXJCLmVsZW0pO1xuICAgICAgcmV0dXJuIGNtcERpZmYgPT09IDAgPyB3cmFwcGVyQS5pZHggLSB3cmFwcGVyQi5pZHggOiBjbXBEaWZmO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGFyck9mV3JhcHBlci5tYXAod3JhcHBlciA9PiB3cmFwcGVyLmVsZW0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgVVJMLCBjaGVjayBhbGwgcnVsZXMgYW5kIHJldHVybiB0aGUgYmVzdCBbW01hdGNoUmVzdWx0XV1cbiAgICogQHBhcmFtIHVybFxuICAgKiBAcmV0dXJucyB7TWF0Y2hSZXN1bHR9XG4gICAqL1xuICBtYXRjaCh1cmw6IFVybFBhcnRzKTogTWF0Y2hSZXN1bHQge1xuICAgIHRoaXMuZW5zdXJlU29ydGVkKCk7XG5cbiAgICB1cmwgPSBleHRlbmQoeyBwYXRoOiAnJywgc2VhcmNoOiB7fSwgaGFzaDogJycgfSwgdXJsKTtcbiAgICBjb25zdCBydWxlcyA9IHRoaXMucnVsZXMoKTtcbiAgICBpZiAodGhpcy5fb3RoZXJ3aXNlRm4pIHJ1bGVzLnB1c2godGhpcy5fb3RoZXJ3aXNlRm4pO1xuXG4gICAgLy8gQ2hlY2tzIGEgc2luZ2xlIHJ1bGUuIFJldHVybnMgeyBydWxlOiBydWxlLCBtYXRjaDogbWF0Y2gsIHdlaWdodDogd2VpZ2h0IH0gaWYgaXQgbWF0Y2hlZCwgb3IgdW5kZWZpbmVkXG5cbiAgICBjb25zdCBjaGVja1J1bGUgPSAocnVsZTogVXJsUnVsZSk6IE1hdGNoUmVzdWx0ID0+IHtcbiAgICAgIGNvbnN0IG1hdGNoID0gcnVsZS5tYXRjaCh1cmwsIHRoaXMuX3JvdXRlcik7XG4gICAgICByZXR1cm4gbWF0Y2ggJiYgeyBtYXRjaCwgcnVsZSwgd2VpZ2h0OiBydWxlLm1hdGNoUHJpb3JpdHkobWF0Y2gpIH07XG4gICAgfTtcblxuICAgIC8vIFRoZSBydWxlcyBhcmUgcHJlLXNvcnRlZC5cbiAgICAvLyAtIEZpbmQgdGhlIGZpcnN0IG1hdGNoaW5nIHJ1bGUuXG4gICAgLy8gLSBGaW5kIGFueSBvdGhlciBtYXRjaGluZyBydWxlIHRoYXQgc29ydGVkICpleGFjdGx5IHRoZSBzYW1lKiwgYWNjb3JkaW5nIHRvIGAuc29ydCgpYC5cbiAgICAvLyAtIENob29zZSB0aGUgcnVsZSB3aXRoIHRoZSBoaWdoZXN0IG1hdGNoIHdlaWdodC5cbiAgICBsZXQgYmVzdDogTWF0Y2hSZXN1bHQ7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gU3RvcCB3aGVuIHRoZXJlIGlzIGEgJ2Jlc3QnIHJ1bGUgYW5kIHRoZSBuZXh0IHJ1bGUgc29ydHMgZGlmZmVyZW50bHkgdGhhbiBpdC5cbiAgICAgIGlmIChiZXN0ICYmIHRoaXMuX3NvcnRGbihydWxlc1tpXSwgYmVzdC5ydWxlKSAhPT0gMCkgYnJlYWs7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnQgPSBjaGVja1J1bGUocnVsZXNbaV0pO1xuICAgICAgLy8gUGljayB0aGUgYmVzdCBNYXRjaFJlc3VsdFxuICAgICAgYmVzdCA9ICFiZXN0IHx8IChjdXJyZW50ICYmIGN1cnJlbnQud2VpZ2h0ID4gYmVzdC53ZWlnaHQpID8gY3VycmVudCA6IGJlc3Q7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJlc3Q7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc3luYyhldnQ/KSB7XG4gICAgaWYgKGV2dCAmJiBldnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgcm91dGVyID0gdGhpcy5fcm91dGVyLFxuICAgICAgJHVybCA9IHJvdXRlci51cmxTZXJ2aWNlLFxuICAgICAgJHN0YXRlID0gcm91dGVyLnN0YXRlU2VydmljZTtcblxuICAgIGNvbnN0IHVybDogVXJsUGFydHMgPSB7XG4gICAgICBwYXRoOiAkdXJsLnBhdGgoKSxcbiAgICAgIHNlYXJjaDogJHVybC5zZWFyY2goKSxcbiAgICAgIGhhc2g6ICR1cmwuaGFzaCgpLFxuICAgIH07XG5cbiAgICBjb25zdCBiZXN0ID0gdGhpcy5tYXRjaCh1cmwpO1xuXG4gICAgY29uc3QgYXBwbHlSZXN1bHQgPSBwYXR0ZXJuKFtcbiAgICAgIFtpc1N0cmluZywgKG5ld3VybDogc3RyaW5nKSA9PiAkdXJsLnVybChuZXd1cmwsIHRydWUpXSxcbiAgICAgIFtUYXJnZXRTdGF0ZS5pc0RlZiwgKGRlZjogVGFyZ2V0U3RhdGVEZWYpID0+ICRzdGF0ZS5nbyhkZWYuc3RhdGUsIGRlZi5wYXJhbXMsIGRlZi5vcHRpb25zKV0sXG4gICAgICBbaXMoVGFyZ2V0U3RhdGUpLCAodGFyZ2V0OiBUYXJnZXRTdGF0ZSkgPT4gJHN0YXRlLmdvKHRhcmdldC5zdGF0ZSgpLCB0YXJnZXQucGFyYW1zKCksIHRhcmdldC5vcHRpb25zKCkpXSxcbiAgICBdKTtcblxuICAgIGFwcGx5UmVzdWx0KGJlc3QgJiYgYmVzdC5ydWxlLmhhbmRsZXIoYmVzdC5tYXRjaCwgdXJsLCByb3V0ZXIpKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBsaXN0ZW4oZW5hYmxlZD86IGJvb2xlYW4pOiBGdW5jdGlvbiB7XG4gICAgaWYgKGVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLl9zdG9wRm4gJiYgdGhpcy5fc3RvcEZuKCk7XG4gICAgICBkZWxldGUgdGhpcy5fc3RvcEZuO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKHRoaXMuX3N0b3BGbiA9IHRoaXMuX3N0b3BGbiB8fCB0aGlzLl9yb3V0ZXIudXJsU2VydmljZS5vbkNoYW5nZShldnQgPT4gdGhpcy5zeW5jKGV2dCkpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW50ZXJuYWwgQVBJLlxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICovXG4gIHVwZGF0ZShyZWFkPzogYm9vbGVhbikge1xuICAgIGNvbnN0ICR1cmwgPSB0aGlzLl9yb3V0ZXIubG9jYXRpb25TZXJ2aWNlO1xuICAgIGlmIChyZWFkKSB7XG4gICAgICB0aGlzLmxvY2F0aW9uID0gJHVybC51cmwoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCR1cmwudXJsKCkgPT09IHRoaXMubG9jYXRpb24pIHJldHVybjtcblxuICAgICR1cmwudXJsKHRoaXMubG9jYXRpb24sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVybmFsIEFQSS5cbiAgICpcbiAgICogUHVzaGVzIGEgbmV3IGxvY2F0aW9uIHRvIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAqXG4gICAqIEBpbnRlcm5hbGFwaVxuICAgKiBAcGFyYW0gdXJsTWF0Y2hlclxuICAgKiBAcGFyYW0gcGFyYW1zXG4gICAqIEBwYXJhbSBvcHRpb25zXG4gICAqL1xuICBwdXNoKHVybE1hdGNoZXI6IFVybE1hdGNoZXIsIHBhcmFtcz86IFJhd1BhcmFtcywgb3B0aW9ucz86IHsgcmVwbGFjZT86IHN0cmluZyB8IGJvb2xlYW4gfSkge1xuICAgIGNvbnN0IHJlcGxhY2UgPSBvcHRpb25zICYmICEhb3B0aW9ucy5yZXBsYWNlO1xuICAgIHRoaXMuX3JvdXRlci51cmxTZXJ2aWNlLnVybCh1cmxNYXRjaGVyLmZvcm1hdChwYXJhbXMgfHwge30pLCByZXBsYWNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZHMgYW5kIHJldHVybnMgYSBVUkwgd2l0aCBpbnRlcnBvbGF0ZWQgcGFyYW1ldGVyc1xuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIG1hdGNoZXIgPSAkdW1mLmNvbXBpbGUoXCIvYWJvdXQvOnBlcnNvblwiKTtcbiAgICogcGFyYW1zID0geyBwZXJzb246IFwiYm9iXCIgfTtcbiAgICogJGJvYiA9ICR1cmxSb3V0ZXIuaHJlZihtYXRjaGVyLCBwYXJhbXMpO1xuICAgKiAvLyAkYm9iID09IFwiL2Fib3V0L2JvYlwiO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHVybE1hdGNoZXIgVGhlIFtbVXJsTWF0Y2hlcl1dIG9iamVjdCB3aGljaCBpcyB1c2VkIGFzIHRoZSB0ZW1wbGF0ZSBvZiB0aGUgVVJMIHRvIGdlbmVyYXRlLlxuICAgKiBAcGFyYW0gcGFyYW1zIEFuIG9iamVjdCBvZiBwYXJhbWV0ZXIgdmFsdWVzIHRvIGZpbGwgdGhlIG1hdGNoZXIncyByZXF1aXJlZCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIG9iamVjdC4gVGhlIG9wdGlvbnMgYXJlOlxuICAgKlxuICAgKiAtICoqYGFic29sdXRlYCoqIC0ge2Jvb2xlYW49ZmFsc2V9LCAgSWYgdHJ1ZSB3aWxsIGdlbmVyYXRlIGFuIGFic29sdXRlIHVybCwgZS5nLiBcImh0dHA6Ly93d3cuZXhhbXBsZS5jb20vZnVsbHVybFwiLlxuICAgKlxuICAgKiBAcmV0dXJucyBSZXR1cm5zIHRoZSBmdWxseSBjb21waWxlZCBVUkwsIG9yIGBudWxsYCBpZiBgcGFyYW1zYCBmYWlsIHZhbGlkYXRpb24gYWdhaW5zdCBgdXJsTWF0Y2hlcmBcbiAgICovXG4gIGhyZWYodXJsTWF0Y2hlcjogVXJsTWF0Y2hlciwgcGFyYW1zPzogYW55LCBvcHRpb25zPzogeyBhYnNvbHV0ZTogYm9vbGVhbiB9KTogc3RyaW5nIHtcbiAgICBsZXQgdXJsID0gdXJsTWF0Y2hlci5mb3JtYXQocGFyYW1zKTtcbiAgICBpZiAodXJsID09IG51bGwpIHJldHVybiBudWxsO1xuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgeyBhYnNvbHV0ZTogZmFsc2UgfTtcblxuICAgIGNvbnN0IGNmZyA9IHRoaXMuX3JvdXRlci51cmxTZXJ2aWNlLmNvbmZpZztcbiAgICBjb25zdCBpc0h0bWw1ID0gY2ZnLmh0bWw1TW9kZSgpO1xuICAgIGlmICghaXNIdG1sNSAmJiB1cmwgIT09IG51bGwpIHtcbiAgICAgIHVybCA9ICcjJyArIGNmZy5oYXNoUHJlZml4KCkgKyB1cmw7XG4gICAgfVxuICAgIHVybCA9IGFwcGVuZEJhc2VQYXRoKHVybCwgaXNIdG1sNSwgb3B0aW9ucy5hYnNvbHV0ZSwgY2ZnLmJhc2VIcmVmKCkpO1xuXG4gICAgaWYgKCFvcHRpb25zLmFic29sdXRlIHx8ICF1cmwpIHtcbiAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuXG4gICAgY29uc3Qgc2xhc2ggPSAhaXNIdG1sNSAmJiB1cmwgPyAnLycgOiAnJztcbiAgICBjb25zdCBjZmdQb3J0ID0gY2ZnLnBvcnQoKTtcbiAgICBjb25zdCBwb3J0ID0gPGFueT4oY2ZnUG9ydCA9PT0gODAgfHwgY2ZnUG9ydCA9PT0gNDQzID8gJycgOiAnOicgKyBjZmdQb3J0KTtcblxuICAgIHJldHVybiBbY2ZnLnByb3RvY29sKCksICc6Ly8nLCBjZmcuaG9zdCgpLCBwb3J0LCBzbGFzaCwgdXJsXS5qb2luKCcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYW51YWxseSBhZGRzIGEgVVJMIFJ1bGUuXG4gICAqXG4gICAqIFVzdWFsbHksIGEgdXJsIHJ1bGUgaXMgYWRkZWQgdXNpbmcgW1tTdGF0ZURlY2xhcmF0aW9uLnVybF1dIG9yIFtbd2hlbl1dLlxuICAgKiBUaGlzIGFwaSBjYW4gYmUgdXNlZCBkaXJlY3RseSBmb3IgbW9yZSBjb250cm9sICh0byByZWdpc3RlciBhIFtbQmFzZVVybFJ1bGVdXSwgZm9yIGV4YW1wbGUpLlxuICAgKiBSdWxlcyBjYW4gYmUgY3JlYXRlZCB1c2luZyBbW1VybFJvdXRlci51cmxSdWxlRmFjdG9yeV1dLCBvciBjcmVhdGUgbWFudWFsbHkgYXMgc2ltcGxlIG9iamVjdHMuXG4gICAqXG4gICAqIEEgcnVsZSBzaG91bGQgaGF2ZSBhIGBtYXRjaGAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0cnV0aHkgaWYgdGhlIHJ1bGUgbWF0Y2hlZC5cbiAgICogSXQgc2hvdWxkIGFsc28gaGF2ZSBhIGBoYW5kbGVyYCBmdW5jdGlvbiB3aGljaCBpcyBpbnZva2VkIGlmIHRoZSBydWxlIGlzIHRoZSBiZXN0IG1hdGNoLlxuICAgKlxuICAgKiBAcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCBkZXJlZ2lzdGVycyB0aGUgcnVsZVxuICAgKi9cbiAgcnVsZShydWxlOiBVcmxSdWxlKTogRnVuY3Rpb24ge1xuICAgIGlmICghVXJsUnVsZUZhY3RvcnkuaXNVcmxSdWxlKHJ1bGUpKSB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcnVsZScpO1xuICAgIHJ1bGUuJGlkID0gdGhpcy5faWQrKztcbiAgICBydWxlLnByaW9yaXR5ID0gcnVsZS5wcmlvcml0eSB8fCAwO1xuXG4gICAgdGhpcy5fcnVsZXMucHVzaChydWxlKTtcbiAgICB0aGlzLl9zb3J0ZWQgPSBmYWxzZTtcblxuICAgIHJldHVybiAoKSA9PiB0aGlzLnJlbW92ZVJ1bGUocnVsZSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgcmVtb3ZlUnVsZShydWxlKTogdm9pZCB7XG4gICAgcmVtb3ZlRnJvbSh0aGlzLl9ydWxlcywgcnVsZSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgcnVsZXMoKTogVXJsUnVsZVtdIHtcbiAgICB0aGlzLmVuc3VyZVNvcnRlZCgpO1xuICAgIHJldHVybiB0aGlzLl9ydWxlcy5zbGljZSgpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG90aGVyd2lzZShoYW5kbGVyOiBzdHJpbmcgfCBVcmxSdWxlSGFuZGxlckZuIHwgVGFyZ2V0U3RhdGUgfCBUYXJnZXRTdGF0ZURlZikge1xuICAgIGNvbnN0IGhhbmRsZXJGbjogVXJsUnVsZUhhbmRsZXJGbiA9IGdldEhhbmRsZXJGbihoYW5kbGVyKTtcblxuICAgIHRoaXMuX290aGVyd2lzZUZuID0gdGhpcy51cmxSdWxlRmFjdG9yeS5jcmVhdGUodmFsKHRydWUpLCBoYW5kbGVyRm4pO1xuICAgIHRoaXMuX3NvcnRlZCA9IGZhbHNlO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGluaXRpYWwoaGFuZGxlcjogc3RyaW5nIHwgVXJsUnVsZUhhbmRsZXJGbiB8IFRhcmdldFN0YXRlIHwgVGFyZ2V0U3RhdGVEZWYpIHtcbiAgICBjb25zdCBoYW5kbGVyRm46IFVybFJ1bGVIYW5kbGVyRm4gPSBnZXRIYW5kbGVyRm4oaGFuZGxlcik7XG5cbiAgICBjb25zdCBtYXRjaEZuOiBVcmxSdWxlTWF0Y2hGbiA9ICh1cmxQYXJ0cywgcm91dGVyKSA9PlxuICAgICAgcm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbkhpc3Rvcnkuc2l6ZSgpID09PSAwICYmICEhL15cXC8/JC8uZXhlYyh1cmxQYXJ0cy5wYXRoKTtcblxuICAgIHRoaXMucnVsZSh0aGlzLnVybFJ1bGVGYWN0b3J5LmNyZWF0ZShtYXRjaEZuLCBoYW5kbGVyRm4pKTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICB3aGVuKFxuICAgIG1hdGNoZXI6IFJlZ0V4cCB8IFVybE1hdGNoZXIgfCBzdHJpbmcsXG4gICAgaGFuZGxlcjogc3RyaW5nIHwgVXJsUnVsZUhhbmRsZXJGbixcbiAgICBvcHRpb25zPzogeyBwcmlvcml0eTogbnVtYmVyIH0sXG4gICk6IFVybFJ1bGUge1xuICAgIGNvbnN0IHJ1bGUgPSB0aGlzLnVybFJ1bGVGYWN0b3J5LmNyZWF0ZShtYXRjaGVyLCBoYW5kbGVyKTtcbiAgICBpZiAoaXNEZWZpbmVkKG9wdGlvbnMgJiYgb3B0aW9ucy5wcmlvcml0eSkpIHJ1bGUucHJpb3JpdHkgPSBvcHRpb25zLnByaW9yaXR5O1xuICAgIHRoaXMucnVsZShydWxlKTtcbiAgICByZXR1cm4gcnVsZTtcbiAgfVxuXG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBkZWZlckludGVyY2VwdChkZWZlcj86IGJvb2xlYW4pIHtcbiAgICBpZiAoZGVmZXIgPT09IHVuZGVmaW5lZCkgZGVmZXIgPSB0cnVlO1xuICAgIHRoaXMuaW50ZXJjZXB0RGVmZXJyZWQgPSBkZWZlcjtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRIYW5kbGVyRm4oaGFuZGxlcjogc3RyaW5nIHwgVXJsUnVsZUhhbmRsZXJGbiB8IFRhcmdldFN0YXRlIHwgVGFyZ2V0U3RhdGVEZWYpOiBVcmxSdWxlSGFuZGxlckZuIHtcbiAgaWYgKCFpc0Z1bmN0aW9uKGhhbmRsZXIpICYmICFpc1N0cmluZyhoYW5kbGVyKSAmJiAhaXMoVGFyZ2V0U3RhdGUpKGhhbmRsZXIpICYmICFUYXJnZXRTdGF0ZS5pc0RlZihoYW5kbGVyKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIidoYW5kbGVyJyBtdXN0IGJlIGEgc3RyaW5nLCBmdW5jdGlvbiwgVGFyZ2V0U3RhdGUsIG9yIGhhdmUgYSBzdGF0ZTogJ25ld3RhcmdldCcgcHJvcGVydHlcIik7XG4gIH1cbiAgcmV0dXJuIGlzRnVuY3Rpb24oaGFuZGxlcikgPyAoaGFuZGxlciBhcyBVcmxSdWxlSGFuZGxlckZuKSA6IHZhbChoYW5kbGVyKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS91cmwvdXJsUm91dGVyLnRzIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB1cmxcbiAqLyAvKiogKi9cbmltcG9ydCB7IFVybE1hdGNoZXIgfSBmcm9tICcuL3VybE1hdGNoZXInO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzRGVmaW5lZCwgaXNGdW5jdGlvbiwgaXNTdGF0ZSB9IGZyb20gJy4uL2NvbW1vbi9wcmVkaWNhdGVzJztcbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmltcG9ydCB7IGlkZW50aXR5LCBleHRlbmQgfSBmcm9tICcuLi9jb21tb24vY29tbW9uJztcbmltcG9ydCB7IGlzLCBwYXR0ZXJuIH0gZnJvbSAnLi4vY29tbW9uL2hvZic7XG5pbXBvcnQgeyBTdGF0ZU9iamVjdCB9IGZyb20gJy4uL3N0YXRlL3N0YXRlT2JqZWN0JztcbmltcG9ydCB7IFJhd1BhcmFtcyB9IGZyb20gJy4uL3BhcmFtcy9pbnRlcmZhY2UnO1xuaW1wb3J0IHtcbiAgVXJsUnVsZSxcbiAgVXJsUnVsZU1hdGNoRm4sXG4gIFVybFJ1bGVIYW5kbGVyRm4sXG4gIFVybFJ1bGVUeXBlLFxuICBVcmxQYXJ0cyxcbiAgTWF0Y2hlclVybFJ1bGUsXG4gIFN0YXRlUnVsZSxcbiAgUmVnRXhwUnVsZSxcbn0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBbW1VybFJ1bGVdXVxuICpcbiAqIENyZWF0ZXMgYSBbW1VybFJ1bGVdXSBmcm9tIGE6XG4gKlxuICogLSBgc3RyaW5nYFxuICogLSBbW1VybE1hdGNoZXJdXVxuICogLSBgUmVnRXhwYFxuICogLSBbW1N0YXRlT2JqZWN0XV1cbiAqIEBpbnRlcm5hbGFwaVxuICovXG5leHBvcnQgY2xhc3MgVXJsUnVsZUZhY3Rvcnkge1xuICBzdGF0aWMgaXNVcmxSdWxlID0gb2JqID0+IG9iaiAmJiBbJ3R5cGUnLCAnbWF0Y2gnLCAnaGFuZGxlciddLmV2ZXJ5KGtleSA9PiBpc0RlZmluZWQob2JqW2tleV0pKTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcm91dGVyOiBVSVJvdXRlcikge31cblxuICBjb21waWxlKHN0cjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMucm91dGVyLnVybE1hdGNoZXJGYWN0b3J5LmNvbXBpbGUoc3RyKTtcbiAgfVxuXG4gIGNyZWF0ZShcbiAgICB3aGF0OiBzdHJpbmcgfCBVcmxNYXRjaGVyIHwgU3RhdGVPYmplY3QgfCBSZWdFeHAgfCBVcmxSdWxlTWF0Y2hGbixcbiAgICBoYW5kbGVyPzogc3RyaW5nIHwgVXJsUnVsZUhhbmRsZXJGbixcbiAgKTogVXJsUnVsZSB7XG4gICAgY29uc3QgbWFrZVJ1bGUgPSBwYXR0ZXJuKFtcbiAgICAgIFtpc1N0cmluZywgKF93aGF0OiBzdHJpbmcpID0+IG1ha2VSdWxlKHRoaXMuY29tcGlsZShfd2hhdCkpXSxcbiAgICAgIFtpcyhVcmxNYXRjaGVyKSwgKF93aGF0OiBVcmxNYXRjaGVyKSA9PiB0aGlzLmZyb21VcmxNYXRjaGVyKF93aGF0LCBoYW5kbGVyKV0sXG4gICAgICBbaXNTdGF0ZSwgKF93aGF0OiBTdGF0ZU9iamVjdCkgPT4gdGhpcy5mcm9tU3RhdGUoX3doYXQsIHRoaXMucm91dGVyKV0sXG4gICAgICBbaXMoUmVnRXhwKSwgKF93aGF0OiBSZWdFeHApID0+IHRoaXMuZnJvbVJlZ0V4cChfd2hhdCwgaGFuZGxlcildLFxuICAgICAgW2lzRnVuY3Rpb24sIChfd2hhdDogVXJsUnVsZU1hdGNoRm4pID0+IG5ldyBCYXNlVXJsUnVsZShfd2hhdCwgaGFuZGxlciBhcyBVcmxSdWxlSGFuZGxlckZuKV0sXG4gICAgXSk7XG5cbiAgICBjb25zdCBydWxlID0gbWFrZVJ1bGUod2hhdCk7XG4gICAgaWYgKCFydWxlKSB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkICd3aGF0JyBpbiB3aGVuKClcIik7XG4gICAgcmV0dXJuIHJ1bGU7XG4gIH1cblxuICAvKipcbiAgICogQSBVcmxSdWxlIHdoaWNoIG1hdGNoZXMgYmFzZWQgb24gYSBVcmxNYXRjaGVyXG4gICAqXG4gICAqIFRoZSBgaGFuZGxlcmAgbWF5IGJlIGVpdGhlciBhIGBzdHJpbmdgLCBhIFtbVXJsUnVsZUhhbmRsZXJGbl1dIG9yIGFub3RoZXIgW1tVcmxNYXRjaGVyXV1cbiAgICpcbiAgICogIyMgSGFuZGxlciBhcyBhIGZ1bmN0aW9uXG4gICAqXG4gICAqIElmIGBoYW5kbGVyYCBpcyBhIGZ1bmN0aW9uLCB0aGUgZnVuY3Rpb24gaXMgaW52b2tlZCB3aXRoOlxuICAgKlxuICAgKiAtIG1hdGNoZWQgcGFyYW1ldGVyIHZhbHVlcyAoW1tSYXdQYXJhbXNdXSBmcm9tIFtbVXJsTWF0Y2hlci5leGVjXV0pXG4gICAqIC0gdXJsOiB0aGUgY3VycmVudCBVcmwgKFtbVXJsUGFydHNdXSlcbiAgICogLSByb3V0ZXI6IHRoZSByb3V0ZXIgb2JqZWN0IChbW1VJUm91dGVyXV0pXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogdmFyIHVybE1hdGNoZXIgPSAkdW1mLmNvbXBpbGUoXCIvZm9vLzpmb29JZC86YmFySWRcIik7XG4gICAqIHZhciBydWxlID0gZmFjdG9yeS5mcm9tVXJsTWF0Y2hlcih1cmxNYXRjaGVyLCBtYXRjaCA9PiBcIi9ob21lL1wiICsgbWF0Y2guZm9vSWQgKyBcIi9cIiArIG1hdGNoLmJhcklkKTtcbiAgICogdmFyIG1hdGNoID0gcnVsZS5tYXRjaCgnL2Zvby8xMjMvNDU2Jyk7IC8vIHJlc3VsdHMgaW4geyBmb29JZDogJzEyMycsIGJhcklkOiAnNDU2JyB9XG4gICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvMTIzLzQ1NidcbiAgICogYGBgXG4gICAqXG4gICAqICMjIEhhbmRsZXIgYXMgVXJsTWF0Y2hlclxuICAgKlxuICAgKiBJZiBgaGFuZGxlcmAgaXMgYSBVcmxNYXRjaGVyLCB0aGUgaGFuZGxlciBtYXRjaGVyIGlzIHVzZWQgdG8gY3JlYXRlIHRoZSBuZXcgdXJsLlxuICAgKiBUaGUgYGhhbmRsZXJgIFVybE1hdGNoZXIgaXMgZm9ybWF0dGVkIHVzaW5nIHRoZSBtYXRjaGVkIHBhcmFtIGZyb20gdGhlIGZpcnN0IG1hdGNoZXIuXG4gICAqIFRoZSB1cmwgaXMgcmVwbGFjZWQgd2l0aCB0aGUgcmVzdWx0LlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHZhciB1cmxNYXRjaGVyID0gJHVtZi5jb21waWxlKFwiL2Zvby86Zm9vSWQvOmJhcklkXCIpO1xuICAgKiB2YXIgaGFuZGxlciA9ICR1bWYuY29tcGlsZShcIi9ob21lLzpmb29JZC86YmFySWRcIik7XG4gICAqIHZhciBydWxlID0gZmFjdG9yeS5mcm9tVXJsTWF0Y2hlcih1cmxNYXRjaGVyLCBoYW5kbGVyKTtcbiAgICogdmFyIG1hdGNoID0gcnVsZS5tYXRjaCgnL2Zvby8xMjMvNDU2Jyk7IC8vIHJlc3VsdHMgaW4geyBmb29JZDogJzEyMycsIGJhcklkOiAnNDU2JyB9XG4gICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvMTIzLzQ1NidcbiAgICogYGBgXG4gICAqL1xuICBmcm9tVXJsTWF0Y2hlcih1cmxNYXRjaGVyOiBVcmxNYXRjaGVyLCBoYW5kbGVyOiBzdHJpbmcgfCBVcmxNYXRjaGVyIHwgVXJsUnVsZUhhbmRsZXJGbik6IE1hdGNoZXJVcmxSdWxlIHtcbiAgICBsZXQgX2hhbmRsZXI6IFVybFJ1bGVIYW5kbGVyRm4gPSBoYW5kbGVyIGFzIGFueTtcbiAgICBpZiAoaXNTdHJpbmcoaGFuZGxlcikpIGhhbmRsZXIgPSB0aGlzLnJvdXRlci51cmxNYXRjaGVyRmFjdG9yeS5jb21waWxlKGhhbmRsZXIpO1xuICAgIGlmIChpcyhVcmxNYXRjaGVyKShoYW5kbGVyKSkgX2hhbmRsZXIgPSAobWF0Y2g6IFJhd1BhcmFtcykgPT4gKGhhbmRsZXIgYXMgVXJsTWF0Y2hlcikuZm9ybWF0KG1hdGNoKTtcblxuICAgIGZ1bmN0aW9uIG1hdGNoVXJsUGFyYW10ZXJzKHVybDogVXJsUGFydHMpOiBSYXdQYXJhbXMge1xuICAgICAgY29uc3QgcGFyYW1zID0gdXJsTWF0Y2hlci5leGVjKHVybC5wYXRoLCB1cmwuc2VhcmNoLCB1cmwuaGFzaCk7XG4gICAgICByZXR1cm4gdXJsTWF0Y2hlci52YWxpZGF0ZXMocGFyYW1zKSAmJiBwYXJhbXM7XG4gICAgfVxuXG4gICAgLy8gUHJpb3JpdGl6ZSBVUkxzLCBsb3dlc3QgdG8gaGlnaGVzdDpcbiAgICAvLyAtIFNvbWUgb3B0aW9uYWwgVVJMIHBhcmFtZXRlcnMsIGJ1dCBub25lIG1hdGNoZWRcbiAgICAvLyAtIE5vIG9wdGlvbmFsIHBhcmFtZXRlcnMgaW4gVVJMXG4gICAgLy8gLSBTb21lIG9wdGlvbmFsIHBhcmFtZXRlcnMsIHNvbWUgbWF0Y2hlZFxuICAgIC8vIC0gU29tZSBvcHRpb25hbCBwYXJhbWV0ZXJzLCBhbGwgbWF0Y2hlZFxuICAgIGZ1bmN0aW9uIG1hdGNoUHJpb3JpdHkocGFyYW1zOiBSYXdQYXJhbXMpOiBudW1iZXIge1xuICAgICAgY29uc3Qgb3B0aW9uYWwgPSB1cmxNYXRjaGVyLnBhcmFtZXRlcnMoKS5maWx0ZXIocGFyYW0gPT4gcGFyYW0uaXNPcHRpb25hbCk7XG4gICAgICBpZiAoIW9wdGlvbmFsLmxlbmd0aCkgcmV0dXJuIDAuMDAwMDAxO1xuICAgICAgY29uc3QgbWF0Y2hlZCA9IG9wdGlvbmFsLmZpbHRlcihwYXJhbSA9PiBwYXJhbXNbcGFyYW0uaWRdKTtcbiAgICAgIHJldHVybiBtYXRjaGVkLmxlbmd0aCAvIG9wdGlvbmFsLmxlbmd0aDtcbiAgICB9XG5cbiAgICBjb25zdCBkZXRhaWxzID0geyB1cmxNYXRjaGVyLCBtYXRjaFByaW9yaXR5LCB0eXBlOiAnVVJMTUFUQ0hFUicgfTtcbiAgICByZXR1cm4gZXh0ZW5kKG5ldyBCYXNlVXJsUnVsZShtYXRjaFVybFBhcmFtdGVycywgX2hhbmRsZXIpLCBkZXRhaWxzKSBhcyBNYXRjaGVyVXJsUnVsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIFVybFJ1bGUgd2hpY2ggbWF0Y2hlcyBhIHN0YXRlIGJ5IGl0cyB1cmxcbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiB2YXIgcnVsZSA9IGZhY3RvcnkuZnJvbVN0YXRlKCRzdGF0ZS5nZXQoJ2ZvbycpLCByb3V0ZXIpO1xuICAgKiB2YXIgbWF0Y2ggPSBydWxlLm1hdGNoKCcvZm9vLzEyMy80NTYnKTsgLy8gcmVzdWx0cyBpbiB7IGZvb0lkOiAnMTIzJywgYmFySWQ6ICc0NTYnIH1cbiAgICogdmFyIHJlc3VsdCA9IHJ1bGUuaGFuZGxlcihtYXRjaCk7XG4gICAqIC8vIFN0YXJ0cyBhIHRyYW5zaXRpb24gdG8gJ2Zvbycgd2l0aCBwYXJhbXM6IHsgZm9vSWQ6ICcxMjMnLCBiYXJJZDogJzQ1NicgfVxuICAgKiBgYGBcbiAgICovXG4gIGZyb21TdGF0ZShzdGF0ZTogU3RhdGVPYmplY3QsIHJvdXRlcjogVUlSb3V0ZXIpOiBTdGF0ZVJ1bGUge1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgbWF0Y2ggYnkgdHJhbnNpdGlvbmluZyB0byBtYXRjaGVkIHN0YXRlXG4gICAgICpcbiAgICAgKiBGaXJzdCBjaGVja3MgaWYgdGhlIHJvdXRlciBzaG91bGQgc3RhcnQgYSBuZXcgdHJhbnNpdGlvbi5cbiAgICAgKiBBIG5ldyB0cmFuc2l0aW9uIGlzIG5vdCByZXF1aXJlZCBpZiB0aGUgY3VycmVudCBzdGF0ZSdzIFVSTFxuICAgICAqIGFuZCB0aGUgbmV3IFVSTCBhcmUgYWxyZWFkeSBpZGVudGljYWxcbiAgICAgKi9cbiAgICBjb25zdCBoYW5kbGVyID0gKG1hdGNoOiBSYXdQYXJhbXMpID0+IHtcbiAgICAgIGNvbnN0ICRzdGF0ZSA9IHJvdXRlci5zdGF0ZVNlcnZpY2U7XG4gICAgICBjb25zdCBnbG9iYWxzID0gcm91dGVyLmdsb2JhbHM7XG4gICAgICBpZiAoJHN0YXRlLmhyZWYoc3RhdGUsIG1hdGNoKSAhPT0gJHN0YXRlLmhyZWYoZ2xvYmFscy5jdXJyZW50LCBnbG9iYWxzLnBhcmFtcykpIHtcbiAgICAgICAgJHN0YXRlLnRyYW5zaXRpb25UbyhzdGF0ZSwgbWF0Y2gsIHsgaW5oZXJpdDogdHJ1ZSwgc291cmNlOiAndXJsJyB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZGV0YWlscyA9IHsgc3RhdGUsIHR5cGU6ICdTVEFURScgfTtcbiAgICByZXR1cm4gZXh0ZW5kKHRoaXMuZnJvbVVybE1hdGNoZXIoc3RhdGUudXJsLCBoYW5kbGVyKSwgZGV0YWlscykgYXMgU3RhdGVSdWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgVXJsUnVsZSB3aGljaCBtYXRjaGVzIGJhc2VkIG9uIGEgcmVndWxhciBleHByZXNzaW9uXG4gICAqXG4gICAqIFRoZSBgaGFuZGxlcmAgbWF5IGJlIGVpdGhlciBhIFtbVXJsUnVsZUhhbmRsZXJGbl1dIG9yIGEgc3RyaW5nLlxuICAgKlxuICAgKiAjIyBIYW5kbGVyIGFzIGEgZnVuY3Rpb25cbiAgICpcbiAgICogSWYgYGhhbmRsZXJgIGlzIGEgZnVuY3Rpb24sIHRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIHdpdGg6XG4gICAqXG4gICAqIC0gcmVnZXhwIG1hdGNoIGFycmF5IChmcm9tIGByZWdleHBgKVxuICAgKiAtIHVybDogdGhlIGN1cnJlbnQgVXJsIChbW1VybFBhcnRzXV0pXG4gICAqIC0gcm91dGVyOiB0aGUgcm91dGVyIG9iamVjdCAoW1tVSVJvdXRlcl1dKVxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHZhciBydWxlID0gZmFjdG9yeS5mcm9tUmVnRXhwKC9eXFwvZm9vXFwvKGJhcnxiYXopJC8sIG1hdGNoID0+IFwiL2hvbWUvXCIgKyBtYXRjaFsxXSlcbiAgICogdmFyIG1hdGNoID0gcnVsZS5tYXRjaCgnL2Zvby9iYXInKTsgLy8gcmVzdWx0cyBpbiBbICcvZm9vL2JhcicsICdiYXInIF1cbiAgICogdmFyIHJlc3VsdCA9IHJ1bGUuaGFuZGxlcihtYXRjaCk7IC8vICcvaG9tZS9iYXInXG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyBIYW5kbGVyIGFzIHN0cmluZ1xuICAgKlxuICAgKiBJZiBgaGFuZGxlcmAgaXMgYSBzdHJpbmcsIHRoZSB1cmwgaXMgKnJlcGxhY2VkIGJ5IHRoZSBzdHJpbmcqIHdoZW4gdGhlIFJ1bGUgaXMgaW52b2tlZC5cbiAgICogVGhlIHN0cmluZyBpcyBmaXJzdCBpbnRlcnBvbGF0ZWQgdXNpbmcgYHN0cmluZy5yZXBsYWNlKClgIHN0eWxlIHBhdHRlcm4uXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogdmFyIHJ1bGUgPSBmYWN0b3J5LmZyb21SZWdFeHAoL15cXC9mb29cXC8oYmFyfGJheikkLywgXCIvaG9tZS8kMVwiKVxuICAgKiB2YXIgbWF0Y2ggPSBydWxlLm1hdGNoKCcvZm9vL2JhcicpOyAvLyByZXN1bHRzIGluIFsgJy9mb28vYmFyJywgJ2JhcicgXVxuICAgKiB2YXIgcmVzdWx0ID0gcnVsZS5oYW5kbGVyKG1hdGNoKTsgLy8gJy9ob21lL2JhcidcbiAgICogYGBgXG4gICAqL1xuICBmcm9tUmVnRXhwKHJlZ2V4cDogUmVnRXhwLCBoYW5kbGVyOiBzdHJpbmcgfCBVcmxSdWxlSGFuZGxlckZuKTogUmVnRXhwUnVsZSB7XG4gICAgaWYgKHJlZ2V4cC5nbG9iYWwgfHwgcmVnZXhwLnN0aWNreSkgdGhyb3cgbmV3IEVycm9yKCdSdWxlIFJlZ0V4cCBtdXN0IG5vdCBiZSBnbG9iYWwgb3Igc3RpY2t5Jyk7XG5cbiAgICAvKipcbiAgICAgKiBJZiBoYW5kbGVyIGlzIGEgc3RyaW5nLCB0aGUgdXJsIHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIHN0cmluZy5cbiAgICAgKiBJZiB0aGUgc3RyaW5nIGhhcyBhbnkgU3RyaW5nLnJlcGxhY2UoKSBzdHlsZSB2YXJpYWJsZXMgaW4gaXQgKGxpa2UgYCQyYCksXG4gICAgICogdGhleSB3aWxsIGJlIHJlcGxhY2VkIGJ5IHRoZSBjYXB0dXJlcyBmcm9tIFtbbWF0Y2hdXVxuICAgICAqL1xuICAgIGNvbnN0IHJlZGlyZWN0VXJsVG8gPSAobWF0Y2g6IFJlZ0V4cEV4ZWNBcnJheSkgPT5cbiAgICAgIC8vIEludGVycG9sYXRlcyBtYXRjaGVkIHZhbHVlcyBpbnRvICQxICQyLCBldGMgdXNpbmcgYSBTdHJpbmcucmVwbGFjZSgpLXN0eWxlIHBhdHRlcm5cbiAgICAgIChoYW5kbGVyIGFzIHN0cmluZykucmVwbGFjZSgvXFwkKFxcJHxcXGR7MSwyfSkvLCAobSwgd2hhdCkgPT4gbWF0Y2hbd2hhdCA9PT0gJyQnID8gMCA6IE51bWJlcih3aGF0KV0pO1xuXG4gICAgY29uc3QgX2hhbmRsZXIgPSBpc1N0cmluZyhoYW5kbGVyKSA/IHJlZGlyZWN0VXJsVG8gOiBoYW5kbGVyO1xuXG4gICAgY29uc3QgbWF0Y2hQYXJhbXNGcm9tUmVnZXhwID0gKHVybDogVXJsUGFydHMpOiBSZWdFeHBFeGVjQXJyYXkgPT4gcmVnZXhwLmV4ZWModXJsLnBhdGgpO1xuXG4gICAgY29uc3QgZGV0YWlscyA9IHsgcmVnZXhwLCB0eXBlOiAnUkVHRVhQJyB9O1xuICAgIHJldHVybiBleHRlbmQobmV3IEJhc2VVcmxSdWxlKG1hdGNoUGFyYW1zRnJvbVJlZ2V4cCwgX2hhbmRsZXIpLCBkZXRhaWxzKSBhcyBSZWdFeHBSdWxlO1xuICB9XG59XG5cbi8qKlxuICogQSBiYXNlIHJ1bGUgd2hpY2ggY2FsbHMgYG1hdGNoYFxuICpcbiAqIFRoZSB2YWx1ZSBmcm9tIHRoZSBgbWF0Y2hgIGZ1bmN0aW9uIGlzIHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBgaGFuZGxlcmAuXG4gKiBAaW50ZXJuYWxhcGlcbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VVcmxSdWxlIGltcGxlbWVudHMgVXJsUnVsZSB7XG4gICRpZDogbnVtYmVyO1xuICBwcmlvcml0eTogbnVtYmVyO1xuICB0eXBlOiBVcmxSdWxlVHlwZSA9ICdSQVcnO1xuICBoYW5kbGVyOiBVcmxSdWxlSGFuZGxlckZuO1xuICBtYXRjaFByaW9yaXR5ID0gbWF0Y2ggPT4gMCAtIHRoaXMuJGlkO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBtYXRjaDogVXJsUnVsZU1hdGNoRm4sIGhhbmRsZXI/OiBVcmxSdWxlSGFuZGxlckZuKSB7XG4gICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlciB8fCBpZGVudGl0eTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3VybC91cmxSdWxlLnRzIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB2aWV3XG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBlcXVhbHMsIGFwcGx5UGFpcnMsIHJlbW92ZUZyb20sIFR5cGVkTWFwLCBpbkFycmF5IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBjdXJyeSwgcHJvcCB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzQXJyYXkgfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyB0cmFjZSB9IGZyb20gJy4uL2NvbW1vbi90cmFjZSc7XG5pbXBvcnQgeyBQYXRoTm9kZSB9IGZyb20gJy4uL3BhdGgvcGF0aE5vZGUnO1xuaW1wb3J0IHsgQWN0aXZlVUlWaWV3LCBWaWV3Q29udGV4dCwgVmlld0NvbmZpZyB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IF9WaWV3RGVjbGFyYXRpb24gfSBmcm9tICcuLi9zdGF0ZS9pbnRlcmZhY2UnO1xuXG5leHBvcnQgdHlwZSBWaWV3Q29uZmlnRmFjdG9yeSA9IChwYXRoOiBQYXRoTm9kZVtdLCBkZWNsOiBfVmlld0RlY2xhcmF0aW9uKSA9PiBWaWV3Q29uZmlnIHwgVmlld0NvbmZpZ1tdO1xuXG5leHBvcnQgaW50ZXJmYWNlIFZpZXdTZXJ2aWNlUGx1Z2luQVBJIHtcbiAgX3Jvb3RWaWV3Q29udGV4dChjb250ZXh0PzogVmlld0NvbnRleHQpOiBWaWV3Q29udGV4dDtcbiAgX3ZpZXdDb25maWdGYWN0b3J5KHZpZXdUeXBlOiBzdHJpbmcsIGZhY3Rvcnk6IFZpZXdDb25maWdGYWN0b3J5KTtcbiAgX3JlZ2lzdGVyZWRVSVZpZXdzKCk6IEFjdGl2ZVVJVmlld1tdO1xuICBfYWN0aXZlVmlld0NvbmZpZ3MoKTogVmlld0NvbmZpZ1tdO1xuICBfb25TeW5jKGxpc3RlbmVyOiBWaWV3U3luY0xpc3RlbmVyKTogRnVuY3Rpb247XG59XG5cbi8vIEEgdWlWaWV3IGFuZCBpdHMgbWF0Y2hpbmcgdmlld0NvbmZpZ1xuZXhwb3J0IGludGVyZmFjZSBWaWV3VHVwbGUge1xuICB1aVZpZXc6IEFjdGl2ZVVJVmlldztcbiAgdmlld0NvbmZpZzogVmlld0NvbmZpZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWaWV3U3luY0xpc3RlbmVyIHtcbiAgKHZpZXdUdXBsZXM6IFZpZXdUdXBsZVtdKTogdm9pZDtcbn1cblxuLyoqXG4gKiBUaGUgVmlldyBzZXJ2aWNlXG4gKlxuICogVGhpcyBzZXJ2aWNlIHBhaXJzIGV4aXN0aW5nIGB1aS12aWV3YCBjb21wb25lbnRzICh3aGljaCBsaXZlIGluIHRoZSBET00pXG4gKiB3aXRoIHZpZXcgY29uZmlncyAoZnJvbSB0aGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0czogW1tTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV0pLlxuICpcbiAqIC0gQWZ0ZXIgYSBzdWNjZXNzZnVsIFRyYW5zaXRpb24sIHRoZSB2aWV3cyBmcm9tIHRoZSBuZXdseSBlbnRlcmVkIHN0YXRlcyBhcmUgYWN0aXZhdGVkIHZpYSBbW2FjdGl2YXRlVmlld0NvbmZpZ11dLlxuICogICBUaGUgdmlld3MgZnJvbSBleGl0ZWQgc3RhdGVzIGFyZSBkZWFjdGl2YXRlZCB2aWEgW1tkZWFjdGl2YXRlVmlld0NvbmZpZ11dLlxuICogICAoU2VlOiB0aGUgW1tyZWdpc3RlckFjdGl2YXRlVmlld3NdXSBUcmFuc2l0aW9uIEhvb2spXG4gKlxuICogLSBBcyBgdWktdmlld2AgY29tcG9uZW50cyBwb3AgaW4gYW5kIG91dCBvZiBleGlzdGVuY2UsIHRoZXkgcmVnaXN0ZXIgdGhlbXNlbHZlcyB1c2luZyBbW3JlZ2lzdGVyVUlWaWV3XV0uXG4gKlxuICogLSBXaGVuIHRoZSBbW3N5bmNdXSBmdW5jdGlvbiBpcyBjYWxsZWQsIHRoZSByZWdpc3RlcmVkIGB1aS12aWV3YChzKSAoW1tBY3RpdmVVSVZpZXddXSlcbiAqIGFyZSBjb25maWd1cmVkIHdpdGggdGhlIG1hdGNoaW5nIFtbVmlld0NvbmZpZ11dKHMpXG4gKlxuICovXG5leHBvcnQgY2xhc3MgVmlld1NlcnZpY2Uge1xuICBwcml2YXRlIF91aVZpZXdzOiBBY3RpdmVVSVZpZXdbXSA9IFtdO1xuICBwcml2YXRlIF92aWV3Q29uZmlnczogVmlld0NvbmZpZ1tdID0gW107XG4gIHByaXZhdGUgX3Jvb3RDb250ZXh0OiBWaWV3Q29udGV4dDtcbiAgcHJpdmF0ZSBfdmlld0NvbmZpZ0ZhY3RvcmllczogeyBba2V5OiBzdHJpbmddOiBWaWV3Q29uZmlnRmFjdG9yeSB9ID0ge307XG4gIHByaXZhdGUgX2xpc3RlbmVyczogVmlld1N5bmNMaXN0ZW5lcltdID0gW107XG5cbiAgcHVibGljIF9wbHVnaW5hcGk6IFZpZXdTZXJ2aWNlUGx1Z2luQVBJID0ge1xuICAgIF9yb290Vmlld0NvbnRleHQ6IHRoaXMuX3Jvb3RWaWV3Q29udGV4dC5iaW5kKHRoaXMpLFxuICAgIF92aWV3Q29uZmlnRmFjdG9yeTogdGhpcy5fdmlld0NvbmZpZ0ZhY3RvcnkuYmluZCh0aGlzKSxcbiAgICBfcmVnaXN0ZXJlZFVJVmlld3M6ICgpID0+IHRoaXMuX3VpVmlld3MsXG4gICAgX2FjdGl2ZVZpZXdDb25maWdzOiAoKSA9PiB0aGlzLl92aWV3Q29uZmlncyxcbiAgICBfb25TeW5jOiAobGlzdGVuZXI6IFZpZXdTeW5jTGlzdGVuZXIpID0+IHtcbiAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgIHJldHVybiAoKSA9PiByZW1vdmVGcm9tKHRoaXMuX2xpc3RlbmVycywgbGlzdGVuZXIpO1xuICAgIH0sXG4gIH07XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgdWktdmlldyBhbmQgYSBWaWV3Q29uZmlnLCBkZXRlcm1pbmVzIGlmIHRoZXkgXCJtYXRjaFwiLlxuICAgKlxuICAgKiBBIHVpLXZpZXcgaGFzIGEgZnVsbHkgcXVhbGlmaWVkIG5hbWUgKGZxbikgYW5kIGEgY29udGV4dCBvYmplY3QuICBUaGUgZnFuIGlzIGJ1aWx0IGZyb20gaXRzIG92ZXJhbGwgbG9jYXRpb24gaW5cbiAgICogdGhlIERPTSwgZGVzY3JpYmluZyBpdHMgbmVzdGluZyByZWxhdGlvbnNoaXAgdG8gYW55IHBhcmVudCB1aS12aWV3IHRhZ3MgaXQgaXMgbmVzdGVkIGluc2lkZSBvZi5cbiAgICpcbiAgICogQSBWaWV3Q29uZmlnIGhhcyBhIHRhcmdldCB1aS12aWV3IG5hbWUgYW5kIGEgY29udGV4dCBhbmNob3IuICBUaGUgdWktdmlldyBuYW1lIGNhbiBiZSBhIHNpbXBsZSBuYW1lLCBvclxuICAgKiBjYW4gYmUgYSBzZWdtZW50ZWQgdWktdmlldyBwYXRoLCBkZXNjcmliaW5nIGEgcG9ydGlvbiBvZiBhIHVpLXZpZXcgZnFuLlxuICAgKlxuICAgKiBJbiBvcmRlciBmb3IgYSB1aS12aWV3IHRvIG1hdGNoIFZpZXdDb25maWcsIHVpLXZpZXcncyAkdHlwZSBtdXN0IG1hdGNoIHRoZSBWaWV3Q29uZmlnJ3MgJHR5cGVcbiAgICpcbiAgICogSWYgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgdWktdmlldyBuYW1lIGlzIGEgc2ltcGxlIG5hbWUgKG5vIGRvdHMpLCB0aGVuIGEgdWktdmlldyBtYXRjaGVzIGlmOlxuICAgKiAtIHRoZSB1aS12aWV3J3MgbmFtZSBtYXRjaGVzIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICogLSB0aGUgdWktdmlldydzIGNvbnRleHQgbWF0Y2hlcyB0aGUgVmlld0NvbmZpZydzIGFuY2hvclxuICAgKlxuICAgKiBJZiB0aGUgVmlld0NvbmZpZydzIHRhcmdldCB1aS12aWV3IG5hbWUgaXMgYSBzZWdtZW50ZWQgbmFtZSAod2l0aCBkb3RzKSwgdGhlbiBhIHVpLXZpZXcgbWF0Y2hlcyBpZjpcbiAgICogLSBUaGVyZSBleGlzdHMgYSBwYXJlbnQgdWktdmlldyB3aGVyZTpcbiAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBuYW1lIG1hdGNoZXMgdGhlIGZpcnN0IHNlZ21lbnQgKGluZGV4IDApIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBjb250ZXh0IG1hdGNoZXMgdGhlIFZpZXdDb25maWcncyBhbmNob3JcbiAgICogLSBBbmQgdGhlIHJlbWFpbmluZyBzZWdtZW50cyAoaW5kZXggMS4ubikgb2YgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgbmFtZSBtYXRjaCB0aGUgdGFpbCBvZiB0aGUgdWktdmlldydzIGZxblxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiBET006XG4gICAqIDx1aS12aWV3PiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gY3JlYXRlZCBpbiB0aGUgcm9vdCBjb250ZXh0IChuYW1lOiBcIlwiKSAtLT5cbiAgICogICA8dWktdmlldyBuYW1lPVwiZm9vXCI+ICAgICAgICAgICAgICAgIDwhLS0gY3JlYXRlZCBpbiB0aGUgY29udGV4dCBuYW1lZDogXCJBXCIgICAgICAtLT5cbiAgICogICAgIDx1aS12aWV3PiAgICAgICAgICAgICAgICAgICAgPCEtLSBjcmVhdGVkIGluIHRoZSBjb250ZXh0IG5hbWVkOiBcIkEuQlwiICAgIC0tPlxuICAgKiAgICAgICA8dWktdmlldyBuYW1lPVwiYmFyXCI+ICAgICAgICAgICAgPCEtLSBjcmVhdGVkIGluIHRoZSBjb250ZXh0IG5hbWVkOiBcIkEuQi5DXCIgIC0tPlxuICAgKiAgICAgICA8L3VpLXZpZXc+XG4gICAqICAgICA8L3VpLXZpZXc+XG4gICAqICAgPC91aS12aWV3PlxuICAgKiA8L3VpLXZpZXc+XG4gICAqXG4gICAqIHVpVmlld3M6IFtcbiAgICogIHsgZnFuOiBcIiRkZWZhdWx0XCIsICAgICAgICAgICAgICAgICAgY3JlYXRpb25Db250ZXh0OiB7IG5hbWU6IFwiXCIgfSB9LFxuICAgKiAgeyBmcW46IFwiJGRlZmF1bHQuZm9vXCIsICAgICAgICAgICAgICBjcmVhdGlvbkNvbnRleHQ6IHsgbmFtZTogXCJBXCIgfSB9LFxuICAgKiAgeyBmcW46IFwiJGRlZmF1bHQuZm9vLiRkZWZhdWx0XCIsICAgICBjcmVhdGlvbkNvbnRleHQ6IHsgbmFtZTogXCJBLkJcIiB9IH1cbiAgICogIHsgZnFuOiBcIiRkZWZhdWx0LmZvby4kZGVmYXVsdC5iYXJcIiwgY3JlYXRpb25Db250ZXh0OiB7IG5hbWU6IFwiQS5CLkNcIiB9IH1cbiAgICogXVxuICAgKlxuICAgKiBUaGVzZSBmb3VyIHZpZXcgY29uZmlncyBhbGwgbWF0Y2ggdGhlIHVpLXZpZXcgd2l0aCB0aGUgZnFuOiBcIiRkZWZhdWx0LmZvby4kZGVmYXVsdC5iYXJcIjpcbiAgICpcbiAgICogLSBWaWV3Q29uZmlnMTogeyB1aVZpZXdOYW1lOiBcImJhclwiLCAgICAgICAgICAgICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvcjogXCJBLkIuQ1wiIH1cbiAgICogLSBWaWV3Q29uZmlnMjogeyB1aVZpZXdOYW1lOiBcIiRkZWZhdWx0LmJhclwiLCAgICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvcjogXCJBLkJcIiB9XG4gICAqIC0gVmlld0NvbmZpZzM6IHsgdWlWaWV3TmFtZTogXCJmb28uJGRlZmF1bHQuYmFyXCIsICAgICAgICAgIHVpVmlld0NvbnRleHRBbmNob3I6IFwiQVwiIH1cbiAgICogLSBWaWV3Q29uZmlnNDogeyB1aVZpZXdOYW1lOiBcIiRkZWZhdWx0LmZvby4kZGVmYXVsdC5iYXJcIiwgdWlWaWV3Q29udGV4dEFuY2hvcjogXCJcIiB9XG4gICAqXG4gICAqIFVzaW5nIFZpZXdDb25maWczIGFzIGFuIGV4YW1wbGUsIGl0IG1hdGNoZXMgdGhlIHVpLXZpZXcgd2l0aCBmcW4gXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCIgYmVjYXVzZTpcbiAgICogLSBUaGUgVmlld0NvbmZpZydzIHNlZ21lbnRlZCB0YXJnZXQgbmFtZSBpczogWyBcImZvb1wiLCBcIiRkZWZhdWx0XCIsIFwiYmFyXCIgXVxuICAgKiAtIFRoZXJlIGV4aXN0cyBhIHBhcmVudCB1aS12aWV3ICh3aGljaCBoYXMgZnFuOiBcIiRkZWZhdWx0LmZvb1wiKSB3aGVyZTpcbiAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBuYW1lIFwiZm9vXCIgbWF0Y2hlcyB0aGUgZmlyc3Qgc2VnbWVudCBcImZvb1wiIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBjb250ZXh0IFwiQVwiIG1hdGNoZXMgdGhlIFZpZXdDb25maWcncyBhbmNob3IgY29udGV4dCBcIkFcIlxuICAgKiAtIEFuZCB0aGUgcmVtYWluaW5nIHNlZ21lbnRzIFsgXCIkZGVmYXVsdFwiLCBcImJhclwiIF0uam9pbihcIi5cIl8gb2YgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgbmFtZSBtYXRjaFxuICAgKiAgIHRoZSB0YWlsIG9mIHRoZSB1aS12aWV3J3MgZnFuIFwiZGVmYXVsdC5iYXJcIlxuICAgKlxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICovXG4gIHN0YXRpYyBtYXRjaGVzID0gKHVpVmlld3NCeUZxbjogVHlwZWRNYXA8QWN0aXZlVUlWaWV3PiwgdWlWaWV3OiBBY3RpdmVVSVZpZXcpID0+ICh2aWV3Q29uZmlnOiBWaWV3Q29uZmlnKSA9PiB7XG4gICAgLy8gRG9uJ3Qgc3VwcGx5IGFuIG5nMSB1aS12aWV3IHdpdGggYW4gbmcyIFZpZXdDb25maWcsIGV0Y1xuICAgIGlmICh1aVZpZXcuJHR5cGUgIT09IHZpZXdDb25maWcudmlld0RlY2wuJHR5cGUpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFNwbGl0IG5hbWVzIGFwYXJ0IGZyb20gYm90aCB2aWV3Q29uZmlnIGFuZCB1aVZpZXcgaW50byBzZWdtZW50c1xuICAgIGNvbnN0IHZjID0gdmlld0NvbmZpZy52aWV3RGVjbDtcbiAgICBjb25zdCB2Y1NlZ21lbnRzID0gdmMuJHVpVmlld05hbWUuc3BsaXQoJy4nKTtcbiAgICBjb25zdCB1aXZTZWdtZW50cyA9IHVpVmlldy5mcW4uc3BsaXQoJy4nKTtcblxuICAgIC8vIENoZWNrIGlmIHRoZSB0YWlscyBvZiB0aGUgc2VnbWVudCBhcnJheXMgbWF0Y2guIGV4LCB0aGVzZSBhcnJheXMnIHRhaWxzIG1hdGNoOlxuICAgIC8vIHZjOiBbXCJmb29cIiwgXCJiYXJcIl0sIHVpdiBmcW46IFtcIiRkZWZhdWx0XCIsIFwiZm9vXCIsIFwiYmFyXCJdXG4gICAgaWYgKCFlcXVhbHModmNTZWdtZW50cywgdWl2U2VnbWVudHMuc2xpY2UoMCAtIHZjU2VnbWVudHMubGVuZ3RoKSkpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIE5vdyBjaGVjayBpZiB0aGUgZnFuIGVuZGluZyBhdCB0aGUgZmlyc3Qgc2VnbWVudCBvZiB0aGUgdmlld0NvbmZpZyBtYXRjaGVzIHRoZSBjb250ZXh0OlxuICAgIC8vIFtcIiRkZWZhdWx0XCIsIFwiZm9vXCJdLmpvaW4oXCIuXCIpID09IFwiJGRlZmF1bHQuZm9vXCIsIGRvZXMgdGhlIHVpLXZpZXcgJGRlZmF1bHQuZm9vIGNvbnRleHQgbWF0Y2g/XG4gICAgY29uc3QgbmVnT2Zmc2V0ID0gMSAtIHZjU2VnbWVudHMubGVuZ3RoIHx8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBmcW5Ub0ZpcnN0U2VnbWVudCA9IHVpdlNlZ21lbnRzLnNsaWNlKDAsIG5lZ09mZnNldCkuam9pbignLicpO1xuICAgIGNvbnN0IHVpVmlld0NvbnRleHQgPSB1aVZpZXdzQnlGcW5bZnFuVG9GaXJzdFNlZ21lbnRdLmNyZWF0aW9uQ29udGV4dDtcbiAgICByZXR1cm4gdmMuJHVpVmlld0NvbnRleHRBbmNob3IgPT09ICh1aVZpZXdDb250ZXh0ICYmIHVpVmlld0NvbnRleHQubmFtZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZXMgYSB2aWV3J3MgbmFtZSBmcm9tIGEgc3RhdGUudmlld3MgY29uZmlndXJhdGlvbiBibG9jay5cbiAgICpcbiAgICogVGhpcyBzaG91bGQgYmUgdXNlZCBieSBhIGZyYW1ld29yayBpbXBsZW1lbnRhdGlvbiB0byBjYWxjdWxhdGUgdGhlIHZhbHVlcyBmb3JcbiAgICogW1tfVmlld0RlY2xhcmF0aW9uLiR1aVZpZXdOYW1lXV0gYW5kIFtbX1ZpZXdEZWNsYXJhdGlvbi4kdWlWaWV3Q29udGV4dEFuY2hvcl1dLlxuICAgKlxuICAgKiBAcGFyYW0gY29udGV4dCB0aGUgY29udGV4dCBvYmplY3QgKHN0YXRlIGRlY2xhcmF0aW9uKSB0aGF0IHRoZSB2aWV3IGJlbG9uZ3MgdG9cbiAgICogQHBhcmFtIHJhd1ZpZXdOYW1lIHRoZSBuYW1lIG9mIHRoZSB2aWV3LCBhcyBkZWNsYXJlZCBpbiB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV1cbiAgICpcbiAgICogQHJldHVybnMgdGhlIG5vcm1hbGl6ZWQgdWlWaWV3TmFtZSBhbmQgdWlWaWV3Q29udGV4dEFuY2hvciB0aGF0IHRoZSB2aWV3IHRhcmdldHNcbiAgICovXG4gIHN0YXRpYyBub3JtYWxpemVVSVZpZXdUYXJnZXQoY29udGV4dDogVmlld0NvbnRleHQsIHJhd1ZpZXdOYW1lID0gJycpIHtcbiAgICAvLyBUT0RPOiBWYWxpZGF0ZSBpbmNvbWluZyB2aWV3IG5hbWUgd2l0aCBhIHJlZ2V4cCB0byBhbGxvdzpcbiAgICAvLyBleDogXCJ2aWV3Lm5hbWVAZm9vLmJhclwiICwgXCJeLl4udmlldy5uYW1lXCIgLCBcInZpZXcubmFtZUBeLl5cIiAsIFwiXCIgLFxuICAgIC8vIFwiQFwiICwgXCIkZGVmYXVsdEBeXCIgLCBcIiEkZGVmYXVsdC4kZGVmYXVsdFwiICwgXCIhZm9vLmJhclwiXG4gICAgY29uc3Qgdmlld0F0Q29udGV4dDogc3RyaW5nW10gPSByYXdWaWV3TmFtZS5zcGxpdCgnQCcpO1xuICAgIGxldCB1aVZpZXdOYW1lID0gdmlld0F0Q29udGV4dFswXSB8fCAnJGRlZmF1bHQnOyAvLyBkZWZhdWx0IHRvIHVubmFtZWQgdmlld1xuICAgIGxldCB1aVZpZXdDb250ZXh0QW5jaG9yID0gaXNTdHJpbmcodmlld0F0Q29udGV4dFsxXSkgPyB2aWV3QXRDb250ZXh0WzFdIDogJ14nOyAvLyBkZWZhdWx0IHRvIHBhcmVudCBjb250ZXh0XG5cbiAgICAvLyBIYW5kbGUgcmVsYXRpdmUgdmlldy1uYW1lIHN1Z2FyIHN5bnRheC5cbiAgICAvLyBNYXRjaGVzIHJhd1ZpZXdOYW1lIFwiXi5eLl4uZm9vLmJhclwiIGludG8gYXJyYXk6IFtcIl4uXi5eLmZvby5iYXJcIiwgXCJeLl4uXlwiLCBcImZvby5iYXJcIl0sXG4gICAgY29uc3QgcmVsYXRpdmVWaWV3TmFtZVN1Z2FyID0gL14oXFxeKD86XFwuXFxeKSopXFwuKC4qJCkvLmV4ZWModWlWaWV3TmFtZSk7XG4gICAgaWYgKHJlbGF0aXZlVmlld05hbWVTdWdhcikge1xuICAgICAgLy8gQ2xvYmJlcnMgZXhpc3RpbmcgY29udGV4dEFuY2hvciAocmF3Vmlld05hbWUgdmFsaWRhdGlvbiB3aWxsIGZpeCB0aGlzKVxuICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9IHJlbGF0aXZlVmlld05hbWVTdWdhclsxXTsgLy8gc2V0IGFuY2hvciB0byBcIl4uXi5eXCJcbiAgICAgIHVpVmlld05hbWUgPSByZWxhdGl2ZVZpZXdOYW1lU3VnYXJbMl07IC8vIHNldCB2aWV3LW5hbWUgdG8gXCJmb28uYmFyXCJcbiAgICB9XG5cbiAgICBpZiAodWlWaWV3TmFtZS5jaGFyQXQoMCkgPT09ICchJykge1xuICAgICAgdWlWaWV3TmFtZSA9IHVpVmlld05hbWUuc3Vic3RyKDEpO1xuICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9ICcnOyAvLyB0YXJnZXQgYWJzb2x1dGVseSBmcm9tIHJvb3RcbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgcGFyZW50IHJlbGF0aXZlIHRhcmdldGluZyBcIl4uXi5eXCJcbiAgICBjb25zdCByZWxhdGl2ZU1hdGNoID0gL14oXFxeKD86XFwuXFxeKSopJC87XG4gICAgaWYgKHJlbGF0aXZlTWF0Y2guZXhlYyh1aVZpZXdDb250ZXh0QW5jaG9yKSkge1xuICAgICAgY29uc3QgYW5jaG9yU3RhdGUgPSB1aVZpZXdDb250ZXh0QW5jaG9yLnNwbGl0KCcuJykucmVkdWNlKChhbmNob3IsIHgpID0+IGFuY2hvci5wYXJlbnQsIGNvbnRleHQpO1xuICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9IGFuY2hvclN0YXRlLm5hbWU7XG4gICAgfSBlbHNlIGlmICh1aVZpZXdDb250ZXh0QW5jaG9yID09PSAnLicpIHtcbiAgICAgIHVpVmlld0NvbnRleHRBbmNob3IgPSBjb250ZXh0Lm5hbWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdWlWaWV3TmFtZSwgdWlWaWV3Q29udGV4dEFuY2hvciB9O1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIHByaXZhdGUgX3Jvb3RWaWV3Q29udGV4dChjb250ZXh0PzogVmlld0NvbnRleHQpOiBWaWV3Q29udGV4dCB7XG4gICAgcmV0dXJuICh0aGlzLl9yb290Q29udGV4dCA9IGNvbnRleHQgfHwgdGhpcy5fcm9vdENvbnRleHQpO1xuICB9XG5cbiAgcHJpdmF0ZSBfdmlld0NvbmZpZ0ZhY3Rvcnkodmlld1R5cGU6IHN0cmluZywgZmFjdG9yeTogVmlld0NvbmZpZ0ZhY3RvcnkpIHtcbiAgICB0aGlzLl92aWV3Q29uZmlnRmFjdG9yaWVzW3ZpZXdUeXBlXSA9IGZhY3Rvcnk7XG4gIH1cblxuICBjcmVhdGVWaWV3Q29uZmlnKHBhdGg6IFBhdGhOb2RlW10sIGRlY2w6IF9WaWV3RGVjbGFyYXRpb24pOiBWaWV3Q29uZmlnW10ge1xuICAgIGNvbnN0IGNmZ0ZhY3RvcnkgPSB0aGlzLl92aWV3Q29uZmlnRmFjdG9yaWVzW2RlY2wuJHR5cGVdO1xuICAgIGlmICghY2ZnRmFjdG9yeSkgdGhyb3cgbmV3IEVycm9yKCdWaWV3U2VydmljZTogTm8gdmlldyBjb25maWcgZmFjdG9yeSByZWdpc3RlcmVkIGZvciB0eXBlICcgKyBkZWNsLiR0eXBlKTtcbiAgICBjb25zdCBjZmdzID0gY2ZnRmFjdG9yeShwYXRoLCBkZWNsKTtcbiAgICByZXR1cm4gaXNBcnJheShjZmdzKSA/IGNmZ3MgOiBbY2Znc107XG4gIH1cblxuICAvKipcbiAgICogRGVhY3RpdmF0ZXMgYSBWaWV3Q29uZmlnLlxuICAgKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGRlYWN0aXZhdGVzIGEgYFZpZXdDb25maWdgLlxuICAgKiBBZnRlciBjYWxsaW5nIFtbc3luY11dLCBpdCB3aWxsIHVuLXBhaXIgZnJvbSBhbnkgYHVpLXZpZXdgIHdpdGggd2hpY2ggaXQgaXMgY3VycmVudGx5IHBhaXJlZC5cbiAgICpcbiAgICogQHBhcmFtIHZpZXdDb25maWcgVGhlIFZpZXdDb25maWcgdmlldyB0byBkZXJlZ2lzdGVyLlxuICAgKi9cbiAgZGVhY3RpdmF0ZVZpZXdDb25maWcodmlld0NvbmZpZzogVmlld0NvbmZpZykge1xuICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VFdmVudCgnPC0gUmVtb3ZpbmcnLCB2aWV3Q29uZmlnKTtcbiAgICByZW1vdmVGcm9tKHRoaXMuX3ZpZXdDb25maWdzLCB2aWV3Q29uZmlnKTtcbiAgfVxuXG4gIGFjdGl2YXRlVmlld0NvbmZpZyh2aWV3Q29uZmlnOiBWaWV3Q29uZmlnKSB7XG4gICAgdHJhY2UudHJhY2VWaWV3U2VydmljZUV2ZW50KCctPiBSZWdpc3RlcmluZycsIDxhbnk+dmlld0NvbmZpZyk7XG4gICAgdGhpcy5fdmlld0NvbmZpZ3MucHVzaCh2aWV3Q29uZmlnKTtcbiAgfVxuXG4gIHN5bmMoKSB7XG4gICAgY29uc3QgdWlWaWV3c0J5RnFuOiBUeXBlZE1hcDxBY3RpdmVVSVZpZXc+ID0gdGhpcy5fdWlWaWV3cy5tYXAodWl2ID0+IFt1aXYuZnFuLCB1aXZdKS5yZWR1Y2UoYXBwbHlQYWlycywgPGFueT57fSk7XG5cbiAgICAvLyBSZXR1cm4gYSB3ZWlnaHRlZCBkZXB0aCB2YWx1ZSBmb3IgYSB1aVZpZXcuXG4gICAgLy8gVGhlIGRlcHRoIGlzIHRoZSBuZXN0aW5nIGRlcHRoIG9mIHVpLXZpZXdzIChiYXNlZCBvbiBGUU47IHRpbWVzIDEwLDAwMClcbiAgICAvLyBwbHVzIHRoZSBkZXB0aCBvZiB0aGUgc3RhdGUgdGhhdCBpcyBwb3B1bGF0aW5nIHRoZSB1aVZpZXdcbiAgICBmdW5jdGlvbiB1aVZpZXdEZXB0aCh1aVZpZXc6IEFjdGl2ZVVJVmlldykge1xuICAgICAgY29uc3Qgc3RhdGVEZXB0aCA9IChjb250ZXh0OiBWaWV3Q29udGV4dCkgPT4gKGNvbnRleHQgJiYgY29udGV4dC5wYXJlbnQgPyBzdGF0ZURlcHRoKGNvbnRleHQucGFyZW50KSArIDEgOiAxKTtcbiAgICAgIHJldHVybiB1aVZpZXcuZnFuLnNwbGl0KCcuJykubGVuZ3RoICogMTAwMDAgKyBzdGF0ZURlcHRoKHVpVmlldy5jcmVhdGlvbkNvbnRleHQpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgVmlld0NvbmZpZydzIGNvbnRleHQncyBkZXB0aCBpbiB0aGUgY29udGV4dCB0cmVlLlxuICAgIGZ1bmN0aW9uIHZpZXdDb25maWdEZXB0aChjb25maWc6IFZpZXdDb25maWcpIHtcbiAgICAgIGxldCBjb250ZXh0OiBWaWV3Q29udGV4dCA9IGNvbmZpZy52aWV3RGVjbC4kY29udGV4dCxcbiAgICAgICAgY291bnQgPSAwO1xuICAgICAgd2hpbGUgKCsrY291bnQgJiYgY29udGV4dC5wYXJlbnQpIGNvbnRleHQgPSBjb250ZXh0LnBhcmVudDtcbiAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG5cbiAgICAvLyBHaXZlbiBhIGRlcHRoIGZ1bmN0aW9uLCByZXR1cm5zIGEgY29tcGFyZSBmdW5jdGlvbiB3aGljaCBjYW4gcmV0dXJuIGVpdGhlciBhc2NlbmRpbmcgb3IgZGVzY2VuZGluZyBvcmRlclxuICAgIGNvbnN0IGRlcHRoQ29tcGFyZSA9IGN1cnJ5KChkZXB0aEZuLCBwb3NOZWcsIGxlZnQsIHJpZ2h0KSA9PiBwb3NOZWcgKiAoZGVwdGhGbihsZWZ0KSAtIGRlcHRoRm4ocmlnaHQpKSk7XG5cbiAgICBjb25zdCBtYXRjaGluZ0NvbmZpZ1BhaXIgPSAodWlWaWV3OiBBY3RpdmVVSVZpZXcpOiBWaWV3VHVwbGUgPT4ge1xuICAgICAgY29uc3QgbWF0Y2hpbmdDb25maWdzID0gdGhpcy5fdmlld0NvbmZpZ3MuZmlsdGVyKFZpZXdTZXJ2aWNlLm1hdGNoZXModWlWaWV3c0J5RnFuLCB1aVZpZXcpKTtcbiAgICAgIGlmIChtYXRjaGluZ0NvbmZpZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBUaGlzIGlzIE9LLiAgQ2hpbGQgc3RhdGVzIGNhbiB0YXJnZXQgYSB1aS12aWV3IHRoYXQgdGhlIHBhcmVudCBzdGF0ZSBhbHNvIHRhcmdldHMgKHRoZSBjaGlsZCB3aW5zKVxuICAgICAgICAvLyBTb3J0IGJ5IGRlcHRoIGFuZCByZXR1cm4gdGhlIG1hdGNoIGZyb20gdGhlIGRlZXBlc3QgY2hpbGRcbiAgICAgICAgLy8gY29uc29sZS5sb2coYE11bHRpcGxlIG1hdGNoaW5nIHZpZXcgY29uZmlncyBmb3IgJHt1aVZpZXcuZnFufWAsIG1hdGNoaW5nQ29uZmlncyk7XG4gICAgICAgIG1hdGNoaW5nQ29uZmlncy5zb3J0KGRlcHRoQ29tcGFyZSh2aWV3Q29uZmlnRGVwdGgsIC0xKSk7IC8vIGRlc2NlbmRpbmdcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IHVpVmlldywgdmlld0NvbmZpZzogbWF0Y2hpbmdDb25maWdzWzBdIH07XG4gICAgfTtcblxuICAgIGNvbnN0IGNvbmZpZ3VyZVVJVmlldyA9ICh0dXBsZTogVmlld1R1cGxlKSA9PiB7XG4gICAgICAvLyBJZiBhIHBhcmVudCB1aS12aWV3IGlzIHJlY29uZmlndXJlZCwgaXQgY291bGQgZGVzdHJveSBjaGlsZCB1aS12aWV3cy5cbiAgICAgIC8vIEJlZm9yZSBjb25maWd1cmluZyBhIGNoaWxkIHVpLXZpZXcsIG1ha2Ugc3VyZSBpdCdzIHN0aWxsIGluIHRoZSBhY3RpdmUgdWlWaWV3cyBhcnJheS5cbiAgICAgIGlmICh0aGlzLl91aVZpZXdzLmluZGV4T2YodHVwbGUudWlWaWV3KSAhPT0gLTEpIHR1cGxlLnVpVmlldy5jb25maWdVcGRhdGVkKHR1cGxlLnZpZXdDb25maWcpO1xuICAgIH07XG5cbiAgICAvLyBTb3J0IHZpZXdzIGJ5IEZRTiBhbmQgc3RhdGUgZGVwdGguIFByb2Nlc3MgdWl2aWV3cyBuZWFyZXN0IHRoZSByb290IGZpcnN0LlxuICAgIGNvbnN0IHVpVmlld1R1cGxlcyA9IHRoaXMuX3VpVmlld3Muc29ydChkZXB0aENvbXBhcmUodWlWaWV3RGVwdGgsIDEpKS5tYXAobWF0Y2hpbmdDb25maWdQYWlyKTtcbiAgICBjb25zdCBtYXRjaGVkVmlld0NvbmZpZ3MgPSB1aVZpZXdUdXBsZXMubWFwKHR1cGxlID0+IHR1cGxlLnZpZXdDb25maWcpO1xuICAgIGNvbnN0IHVubWF0Y2hlZENvbmZpZ1R1cGxlcyA9IHRoaXMuX3ZpZXdDb25maWdzXG4gICAgICAuZmlsdGVyKGNvbmZpZyA9PiAhaW5BcnJheShtYXRjaGVkVmlld0NvbmZpZ3MsIGNvbmZpZykpXG4gICAgICAubWFwKHZpZXdDb25maWcgPT4gKHsgdWlWaWV3OiB1bmRlZmluZWQsIHZpZXdDb25maWcgfSkpO1xuXG4gICAgdWlWaWV3VHVwbGVzLmZvckVhY2goY29uZmlndXJlVUlWaWV3KTtcblxuICAgIGNvbnN0IGFsbFR1cGxlczogVmlld1R1cGxlW10gPSB1aVZpZXdUdXBsZXMuY29uY2F0KHVubWF0Y2hlZENvbmZpZ1R1cGxlcyk7XG4gICAgdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goY2IgPT4gY2IoYWxsVHVwbGVzKSk7XG4gICAgdHJhY2UudHJhY2VWaWV3U3luYyhhbGxUdXBsZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGB1aS12aWV3YCBjb21wb25lbnRcbiAgICpcbiAgICogV2hlbiBhIGB1aS12aWV3YCBjb21wb25lbnQgaXMgY3JlYXRlZCwgaXQgdXNlcyB0aGlzIG1ldGhvZCB0byByZWdpc3RlciBpdHNlbGYuXG4gICAqIEFmdGVyIHJlZ2lzdHJhdGlvbiB0aGUgW1tzeW5jXV0gbWV0aG9kIGlzIHVzZWQgdG8gZW5zdXJlIGFsbCBgdWktdmlld2AgYXJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgcHJvcGVyIFtbVmlld0NvbmZpZ11dLlxuICAgKlxuICAgKiBOb3RlOiB0aGUgYHVpLXZpZXdgIGNvbXBvbmVudCB1c2VzIHRoZSBgVmlld0NvbmZpZ2AgdG8gZGV0ZXJtaW5lIHdoYXQgdmlldyBzaG91bGQgYmUgbG9hZGVkIGluc2lkZSB0aGUgYHVpLXZpZXdgLFxuICAgKiBhbmQgd2hhdCB0aGUgdmlldydzIHN0YXRlIGNvbnRleHQgaXMuXG4gICAqXG4gICAqIE5vdGU6IFRoZXJlIGlzIG5vIGNvcnJlc3BvbmRpbmcgYGRlcmVnaXN0ZXJVSVZpZXdgLlxuICAgKiAgICAgICBBIGB1aS12aWV3YCBzaG91bGQgaGFuZyBvbiB0byB0aGUgcmV0dXJuIHZhbHVlIG9mIGByZWdpc3RlclVJVmlld2AgYW5kIGludm9rZSBpdCB0byBkZXJlZ2lzdGVyIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHVpVmlldyBUaGUgbWV0YWRhdGEgZm9yIGEgVUlWaWV3XG4gICAqIEByZXR1cm4gYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gdXNlZCB3aGVuIHRoZSB2aWV3IGlzIGRlc3Ryb3llZC5cbiAgICovXG4gIHJlZ2lzdGVyVUlWaWV3KHVpVmlldzogQWN0aXZlVUlWaWV3KSB7XG4gICAgdHJhY2UudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KCctPiBSZWdpc3RlcmluZycsIHVpVmlldyk7XG4gICAgY29uc3QgdWlWaWV3cyA9IHRoaXMuX3VpVmlld3M7XG4gICAgY29uc3QgZnFuQW5kVHlwZU1hdGNoZXMgPSAodWl2OiBBY3RpdmVVSVZpZXcpID0+IHVpdi5mcW4gPT09IHVpVmlldy5mcW4gJiYgdWl2LiR0eXBlID09PSB1aVZpZXcuJHR5cGU7XG4gICAgaWYgKHVpVmlld3MuZmlsdGVyKGZxbkFuZFR5cGVNYXRjaGVzKS5sZW5ndGgpXG4gICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlVUlWaWV3RXZlbnQoJyEhISEgZHVwbGljYXRlIHVpVmlldyBuYW1lZDonLCB1aVZpZXcpO1xuXG4gICAgdWlWaWV3cy5wdXNoKHVpVmlldyk7XG4gICAgdGhpcy5zeW5jKCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgaWR4ID0gdWlWaWV3cy5pbmRleE9mKHVpVmlldyk7XG4gICAgICBpZiAoaWR4ID09PSAtMSkge1xuICAgICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlVUlWaWV3RXZlbnQoJ1RyaWVkIHJlbW92aW5nIG5vbi1yZWdpc3RlcmVkIHVpVmlldycsIHVpVmlldyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VVSVZpZXdFdmVudCgnPC0gRGVyZWdpc3RlcmluZycsIHVpVmlldyk7XG4gICAgICByZW1vdmVGcm9tKHVpVmlld3MpKHVpVmlldyk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIHZpZXdzIGN1cnJlbnRseSBhdmFpbGFibGUgb24gdGhlIHBhZ2UsIGJ5IGZ1bGx5LXF1YWxpZmllZCBuYW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBmdWxseS1xdWFsaWZpZWQgdmlldyBuYW1lcy5cbiAgICovXG4gIGF2YWlsYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdWlWaWV3cy5tYXAocHJvcCgnZnFuJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxpc3Qgb2Ygdmlld3Mgb24gdGhlIHBhZ2UgY29udGFpbmluZyBsb2FkZWQgY29udGVudC5cbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgZnVsbHktcXVhbGlmaWVkIHZpZXcgbmFtZXMuXG4gICAqL1xuICBhY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VpVmlld3MuZmlsdGVyKHByb3AoJyRjb25maWcnKSkubWFwKHByb3AoJ25hbWUnKSk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS92aWV3L3ZpZXcudHMiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIGNvcmVcbiAqLyAvKiogKi9cbmltcG9ydCB7IFN0YXRlUGFyYW1zIH0gZnJvbSAnLi9wYXJhbXMvc3RhdGVQYXJhbXMnO1xuaW1wb3J0IHsgU3RhdGVEZWNsYXJhdGlvbiB9IGZyb20gJy4vc3RhdGUvaW50ZXJmYWNlJztcbmltcG9ydCB7IFN0YXRlT2JqZWN0IH0gZnJvbSAnLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgUXVldWUgfSBmcm9tICcuL2NvbW1vbi9xdWV1ZSc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuXG4vKipcbiAqIEdsb2JhbCByb3V0ZXIgc3RhdGVcbiAqXG4gKiBUaGlzIGlzIHdoZXJlIHdlIGhvbGQgdGhlIGdsb2JhbCBtdXRhYmxlIHN0YXRlIHN1Y2ggYXMgY3VycmVudCBzdGF0ZSwgY3VycmVudFxuICogcGFyYW1zLCBjdXJyZW50IHRyYW5zaXRpb24sIGV0Yy5cbiAqL1xuZXhwb3J0IGNsYXNzIFVJUm91dGVyR2xvYmFscyBpbXBsZW1lbnRzIERpc3Bvc2FibGUge1xuICAvKipcbiAgICogQ3VycmVudCBwYXJhbWV0ZXIgdmFsdWVzXG4gICAqXG4gICAqIFRoZSBwYXJhbWV0ZXIgdmFsdWVzIGZyb20gdGhlIGxhdGVzdCBzdWNjZXNzZnVsIHRyYW5zaXRpb25cbiAgICovXG4gIHBhcmFtczogU3RhdGVQYXJhbXMgPSBuZXcgU3RhdGVQYXJhbXMoKTtcblxuICAvKipcbiAgICogQ3VycmVudCBzdGF0ZVxuICAgKlxuICAgKiBUaGUgdG8tc3RhdGUgZnJvbSB0aGUgbGF0ZXN0IHN1Y2Nlc3NmdWwgdHJhbnNpdGlvblxuICAgKi9cbiAgY3VycmVudDogU3RhdGVEZWNsYXJhdGlvbjtcblxuICAvKipcbiAgICogQ3VycmVudCBzdGF0ZSAoaW50ZXJuYWwgb2JqZWN0KVxuICAgKlxuICAgKiBUaGUgdG8tc3RhdGUgZnJvbSB0aGUgbGF0ZXN0IHN1Y2Nlc3NmdWwgdHJhbnNpdGlvblxuICAgKiBAaW50ZXJuYWxhcGlcbiAgICovXG4gICRjdXJyZW50OiBTdGF0ZU9iamVjdDtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgc3RhcnRlZC9ydW5uaW5nIHRyYW5zaXRpb24uXG4gICAqIFRoaXMgdHJhbnNpdGlvbiBoYXMgcmVhY2hlZCBhdCBsZWFzdCB0aGUgb25TdGFydCBwaGFzZSwgYnV0IGlzIG5vdCB5ZXQgY29tcGxldGVcbiAgICovXG4gIHRyYW5zaXRpb246IFRyYW5zaXRpb247XG5cbiAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICBsYXN0U3RhcnRlZFRyYW5zaXRpb25JZCA9IC0xO1xuXG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgdHJhbnNpdGlvbkhpc3RvcnkgPSBuZXcgUXVldWU8VHJhbnNpdGlvbj4oW10sIDEpO1xuXG4gIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgc3VjY2Vzc2Z1bFRyYW5zaXRpb25zID0gbmV3IFF1ZXVlPFRyYW5zaXRpb24+KFtdLCAxKTtcblxuICBkaXNwb3NlKCkge1xuICAgIHRoaXMudHJhbnNpdGlvbkhpc3RvcnkuY2xlYXIoKTtcbiAgICB0aGlzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5jbGVhcigpO1xuICAgIHRoaXMudHJhbnNpdGlvbiA9IG51bGw7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9nbG9iYWxzLnRzIiwiLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB1cmxcbiAqLyAvKiogKi9cblxuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuaW1wb3J0IHsgTG9jYXRpb25TZXJ2aWNlcywgbm90SW1wbGVtZW50ZWQsIExvY2F0aW9uQ29uZmlnIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBub29wLCBjcmVhdGVQcm94eUZ1bmN0aW9ucyB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgVXJsQ29uZmlnQXBpLCBVcmxTeW5jQXBpLCBVcmxSdWxlc0FwaSwgVXJsUGFydHMsIE1hdGNoUmVzdWx0IH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuXG4vKiogQGhpZGRlbiAqL1xuY29uc3QgbWFrZVN0dWIgPSAoa2V5czogc3RyaW5nW10pOiBhbnkgPT5cbiAga2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoKGFjY1trZXldID0gbm90SW1wbGVtZW50ZWQoa2V5KSksIGFjYyksIHsgZGlzcG9zZTogbm9vcCB9KTtcblxuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IGxvY2F0aW9uU2VydmljZXNGbnMgPSBbJ3VybCcsICdwYXRoJywgJ3NlYXJjaCcsICdoYXNoJywgJ29uQ2hhbmdlJ107XG4vKiogQGhpZGRlbiAqL1xuY29uc3QgbG9jYXRpb25Db25maWdGbnMgPSBbJ3BvcnQnLCAncHJvdG9jb2wnLCAnaG9zdCcsICdiYXNlSHJlZicsICdodG1sNU1vZGUnLCAnaGFzaFByZWZpeCddO1xuLyoqIEBoaWRkZW4gKi9cbmNvbnN0IHVtZkZucyA9IFsndHlwZScsICdjYXNlSW5zZW5zaXRpdmUnLCAnc3RyaWN0TW9kZScsICdkZWZhdWx0U3F1YXNoUG9saWN5J107XG4vKiogQGhpZGRlbiAqL1xuY29uc3QgcnVsZXNGbnMgPSBbJ3NvcnQnLCAnd2hlbicsICdpbml0aWFsJywgJ290aGVyd2lzZScsICdydWxlcycsICdydWxlJywgJ3JlbW92ZVJ1bGUnXTtcbi8qKiBAaGlkZGVuICovXG5jb25zdCBzeW5jRm5zID0gWydkZWZlckludGVyY2VwdCcsICdsaXN0ZW4nLCAnc3luYycsICdtYXRjaCddO1xuXG4vKipcbiAqIEFQSSBmb3IgVVJMIG1hbmFnZW1lbnRcbiAqL1xuZXhwb3J0IGNsYXNzIFVybFNlcnZpY2UgaW1wbGVtZW50cyBMb2NhdGlvblNlcnZpY2VzLCBVcmxTeW5jQXBpIHtcbiAgLyoqIEBoaWRkZW4gKi9cbiAgc3RhdGljIGxvY2F0aW9uU2VydmljZVN0dWI6IExvY2F0aW9uU2VydmljZXMgPSBtYWtlU3R1Yihsb2NhdGlvblNlcnZpY2VzRm5zKTtcbiAgLyoqIEBoaWRkZW4gKi9cbiAgc3RhdGljIGxvY2F0aW9uQ29uZmlnU3R1YjogTG9jYXRpb25Db25maWcgPSBtYWtlU3R1Yihsb2NhdGlvbkNvbmZpZ0Zucyk7XG5cbiAgLyoqXG4gICAqIEEgbmVzdGVkIEFQSSBmb3IgbWFuYWdpbmcgVVJMIHJ1bGVzIGFuZCByZXdyaXRlc1xuICAgKlxuICAgKiBTZWU6IFtbVXJsUnVsZXNBcGldXSBmb3IgZGV0YWlsc1xuICAgKi9cbiAgcnVsZXM6IFVybFJ1bGVzQXBpO1xuXG4gIC8qKlxuICAgKiBBIG5lc3RlZCBBUEkgdG8gY29uZmlndXJlIHRoZSBVUkwgYW5kIHJldHJpZXZlIFVSTCBpbmZvcm1hdGlvblxuICAgKlxuICAgKiBTZWU6IFtbVXJsQ29uZmlnQXBpXV0gZm9yIGRldGFpbHNcbiAgICovXG4gIGNvbmZpZzogVXJsQ29uZmlnQXBpO1xuXG4gIC8qKiBAaGlkZGVuICovXG4gIHByaXZhdGUgcm91dGVyOiBVSVJvdXRlcjtcblxuICAvKiogQGhpZGRlbiAqL1xuICBjb25zdHJ1Y3Rvcihyb3V0ZXI6IFVJUm91dGVyLCBsYXRlQmluZCA9IHRydWUpIHtcbiAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgICB0aGlzLnJ1bGVzID0ge30gYXMgYW55O1xuICAgIHRoaXMuY29uZmlnID0ge30gYXMgYW55O1xuXG4gICAgLy8gcHJveHkgZnVuY3Rpb24gY2FsbHMgZnJvbSBVcmxTZXJ2aWNlIHRvIHRoZSBMb2NhdGlvblNlcnZpY2UvTG9jYXRpb25Db25maWdcbiAgICBjb25zdCBsb2NhdGlvblNlcnZpY2VzID0gKCkgPT4gcm91dGVyLmxvY2F0aW9uU2VydmljZTtcbiAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyhsb2NhdGlvblNlcnZpY2VzLCB0aGlzLCBsb2NhdGlvblNlcnZpY2VzLCBsb2NhdGlvblNlcnZpY2VzRm5zLCBsYXRlQmluZCk7XG5cbiAgICBjb25zdCBsb2NhdGlvbkNvbmZpZyA9ICgpID0+IHJvdXRlci5sb2NhdGlvbkNvbmZpZztcbiAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyhsb2NhdGlvbkNvbmZpZywgdGhpcy5jb25maWcsIGxvY2F0aW9uQ29uZmlnLCBsb2NhdGlvbkNvbmZpZ0ZucywgbGF0ZUJpbmQpO1xuXG4gICAgY29uc3QgdW1mID0gKCkgPT4gcm91dGVyLnVybE1hdGNoZXJGYWN0b3J5O1xuICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKHVtZiwgdGhpcy5jb25maWcsIHVtZiwgdW1mRm5zKTtcblxuICAgIGNvbnN0IHVybFJvdXRlciA9ICgpID0+IHJvdXRlci51cmxSb3V0ZXI7XG4gICAgY3JlYXRlUHJveHlGdW5jdGlvbnModXJsUm91dGVyLCB0aGlzLnJ1bGVzLCB1cmxSb3V0ZXIsIHJ1bGVzRm5zKTtcbiAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyh1cmxSb3V0ZXIsIHRoaXMsIHVybFJvdXRlciwgc3luY0Zucyk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgdXJsKCk6IHN0cmluZztcbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHVybChuZXd1cmw6IHN0cmluZywgcmVwbGFjZT86IGJvb2xlYW4sIHN0YXRlPyk6IHZvaWQ7XG4gIHVybChuZXd1cmw/LCByZXBsYWNlPywgc3RhdGU/KTogYW55IHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHBhdGgoKTogc3RyaW5nIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIHNlYXJjaCgpOiB7IFtrZXk6IHN0cmluZ106IGFueSB9IHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGhhc2goKTogc3RyaW5nIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG9uQ2hhbmdlKGNhbGxiYWNrOiBGdW5jdGlvbik6IEZ1bmN0aW9uIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCBVUkwgcGFydHNcbiAgICpcbiAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgY3VycmVudCBVUkwgY29tcG9uZW50cyBhcyBhIFtbVXJsUGFydHNdXSBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm5zIHRoZSBjdXJyZW50IHVybCBwYXJ0c1xuICAgKi9cbiAgcGFydHMoKTogVXJsUGFydHMge1xuICAgIHJldHVybiB7IHBhdGg6IHRoaXMucGF0aCgpLCBzZWFyY2g6IHRoaXMuc2VhcmNoKCksIGhhc2g6IHRoaXMuaGFzaCgpIH07XG4gIH1cblxuICBkaXNwb3NlKCkge31cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgc3luYyhldnQ/KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBsaXN0ZW4oZW5hYmxlZD86IGJvb2xlYW4pOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAaW5oZXJpdGRvYyAqL1xuICBkZWZlckludGVyY2VwdChkZWZlcj86IGJvb2xlYW4pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIG1hdGNoKHVybFBhcnRzOiBVcmxQYXJ0cyk6IE1hdGNoUmVzdWx0IHtcbiAgICByZXR1cm47XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS91cmwvdXJsU2VydmljZS50cyIsIi8qKiBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2tGbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vaW50ZXJmYWNlJztcbmltcG9ydCB7IFN0YXRlRGVjbGFyYXRpb24sIExhenlMb2FkUmVzdWx0IH0gZnJvbSAnLi4vc3RhdGUvaW50ZXJmYWNlJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBTdGF0ZVJ1bGUgfSBmcm9tICcuLi91cmwvaW50ZXJmYWNlJztcblxuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHRoYXQgcGVyZm9ybXMgbGF6eSBsb2FkaW5nXG4gKlxuICogV2hlbiBlbnRlcmluZyBhIHN0YXRlIFwiYWJjXCIgd2hpY2ggaGFzIGEgYGxhenlMb2FkYCBmdW5jdGlvbiBkZWZpbmVkOlxuICogLSBJbnZva2UgdGhlIGBsYXp5TG9hZGAgZnVuY3Rpb24gKHVubGVzcyBpdCBpcyBhbHJlYWR5IGluIHByb2Nlc3MpXG4gKiAgIC0gRmxhZyB0aGUgaG9vayBmdW5jdGlvbiBhcyBcImluIHByb2Nlc3NcIlxuICogICAtIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgcHJvbWlzZSAodGhhdCByZXNvbHZlcyB3aGVuIGxhenkgbG9hZGluZyBpcyBjb21wbGV0ZSlcbiAqIC0gV2FpdCBmb3IgdGhlIHByb21pc2UgdG8gc2V0dGxlXG4gKiAgIC0gSWYgdGhlIHByb21pc2UgcmVzb2x2ZXMgdG8gYSBbW0xhenlMb2FkUmVzdWx0XV0sIHRoZW4gcmVnaXN0ZXIgdGhvc2Ugc3RhdGVzXG4gKiAgIC0gRmxhZyB0aGUgaG9vayBmdW5jdGlvbiBhcyBcIm5vdCBpbiBwcm9jZXNzXCJcbiAqIC0gSWYgdGhlIGhvb2sgd2FzIHN1Y2Nlc3NmdWxcbiAqICAgLSBSZW1vdmUgdGhlIGBsYXp5TG9hZGAgZnVuY3Rpb24gZnJvbSB0aGUgc3RhdGUgZGVjbGFyYXRpb25cbiAqIC0gSWYgYWxsIHRoZSBob29rcyB3ZXJlIHN1Y2Nlc3NmdWxcbiAqICAgLSBSZXRyeSB0aGUgdHJhbnNpdGlvbiAoYnkgcmV0dXJuaW5nIGEgVGFyZ2V0U3RhdGUpXG4gKlxuICogYGBgXG4gKiAuc3RhdGUoJ2FiYycsIHtcbiAqICAgY29tcG9uZW50OiAnZm9vQ29tcG9uZW50JyxcbiAqICAgbGF6eUxvYWQ6ICgpID0+IFN5c3RlbS5pbXBvcnQoJy4vZm9vQ29tcG9uZW50JylcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLmxhenlMb2FkXV1cbiAqL1xuY29uc3QgbGF6eUxvYWRIb29rOiBUcmFuc2l0aW9uSG9va0ZuID0gKHRyYW5zaXRpb246IFRyYW5zaXRpb24pID0+IHtcbiAgY29uc3Qgcm91dGVyID0gdHJhbnNpdGlvbi5yb3V0ZXI7XG5cbiAgZnVuY3Rpb24gcmV0cnlUcmFuc2l0aW9uKCkge1xuICAgIGlmICh0cmFuc2l0aW9uLm9yaWdpbmFsVHJhbnNpdGlvbigpLm9wdGlvbnMoKS5zb3VyY2UgIT09ICd1cmwnKSB7XG4gICAgICAvLyBUaGUgb3JpZ2luYWwgdHJhbnNpdGlvbiB3YXMgbm90IHRyaWdnZXJlZCB2aWEgdXJsIHN5bmNcbiAgICAgIC8vIFRoZSBsYXp5IHN0YXRlIHNob3VsZCBiZSBsb2FkZWQgbm93LCBzbyByZS10cnkgdGhlIG9yaWdpbmFsIHRyYW5zaXRpb25cbiAgICAgIGNvbnN0IG9yaWcgPSB0cmFuc2l0aW9uLnRhcmdldFN0YXRlKCk7XG4gICAgICByZXR1cm4gcm91dGVyLnN0YXRlU2VydmljZS50YXJnZXQob3JpZy5pZGVudGlmaWVyKCksIG9yaWcucGFyYW1zKCksIG9yaWcub3B0aW9ucygpKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgb3JpZ2luYWwgdHJhbnNpdGlvbiB3YXMgdHJpZ2dlcmVkIHZpYSB1cmwgc3luY1xuICAgIC8vIFJ1biB0aGUgVVJMIHJ1bGVzIGFuZCBmaW5kIHRoZSBiZXN0IG1hdGNoXG4gICAgY29uc3QgJHVybCA9IHJvdXRlci51cmxTZXJ2aWNlO1xuICAgIGNvbnN0IHJlc3VsdCA9ICR1cmwubWF0Y2goJHVybC5wYXJ0cygpKTtcbiAgICBjb25zdCBydWxlID0gcmVzdWx0ICYmIHJlc3VsdC5ydWxlO1xuXG4gICAgLy8gSWYgdGhlIGJlc3QgbWF0Y2ggaXMgYSBzdGF0ZSwgcmVkaXJlY3QgdGhlIHRyYW5zaXRpb24gKGluc3RlYWRcbiAgICAvLyBvZiBjYWxsaW5nIHN5bmMoKSB3aGljaCBzdXBlcnNlZGVzIHRoZSBjdXJyZW50IHRyYW5zaXRpb24pXG4gICAgaWYgKHJ1bGUgJiYgcnVsZS50eXBlID09PSAnU1RBVEUnKSB7XG4gICAgICBjb25zdCBzdGF0ZSA9IChydWxlIGFzIFN0YXRlUnVsZSkuc3RhdGU7XG4gICAgICBjb25zdCBwYXJhbXMgPSByZXN1bHQubWF0Y2g7XG4gICAgICByZXR1cm4gcm91dGVyLnN0YXRlU2VydmljZS50YXJnZXQoc3RhdGUsIHBhcmFtcywgdHJhbnNpdGlvbi5vcHRpb25zKCkpO1xuICAgIH1cblxuICAgIC8vIE5vIG1hdGNoaW5nIHN0YXRlIGZvdW5kLCBzbyBsZXQgLnN5bmMoKSBjaG9vc2UgdGhlIGJlc3Qgbm9uLXN0YXRlIG1hdGNoL290aGVyd2lzZVxuICAgIHJvdXRlci51cmxTZXJ2aWNlLnN5bmMoKTtcbiAgfVxuXG4gIGNvbnN0IHByb21pc2VzID0gdHJhbnNpdGlvblxuICAgIC5lbnRlcmluZygpXG4gICAgLmZpbHRlcihzdGF0ZSA9PiAhIXN0YXRlLiQkc3RhdGUoKS5sYXp5TG9hZClcbiAgICAubWFwKHN0YXRlID0+IGxhenlMb2FkU3RhdGUodHJhbnNpdGlvbiwgc3RhdGUpKTtcblxuICByZXR1cm4gc2VydmljZXMuJHEuYWxsKHByb21pc2VzKS50aGVuKHJldHJ5VHJhbnNpdGlvbik7XG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJMYXp5TG9hZEhvb2sgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vbkJlZm9yZSh7IGVudGVyaW5nOiBzdGF0ZSA9PiAhIXN0YXRlLmxhenlMb2FkIH0sIGxhenlMb2FkSG9vayk7XG5cbi8qKlxuICogSW52b2tlcyBhIHN0YXRlJ3MgbGF6eSBsb2FkIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHRyYW5zaXRpb24gYSBUcmFuc2l0aW9uIGNvbnRleHRcbiAqIEBwYXJhbSBzdGF0ZSB0aGUgc3RhdGUgdG8gbGF6eSBsb2FkXG4gKiBAcmV0dXJucyBBIHByb21pc2UgZm9yIHRoZSBsYXp5IGxvYWQgcmVzdWx0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXp5TG9hZFN0YXRlKHRyYW5zaXRpb246IFRyYW5zaXRpb24sIHN0YXRlOiBTdGF0ZURlY2xhcmF0aW9uKTogUHJvbWlzZTxMYXp5TG9hZFJlc3VsdD4ge1xuICBjb25zdCBsYXp5TG9hZEZuID0gc3RhdGUuJCRzdGF0ZSgpLmxhenlMb2FkO1xuXG4gIC8vIFN0b3JlL2dldCB0aGUgbGF6eSBsb2FkIHByb21pc2Ugb24vZnJvbSB0aGUgaG9va2ZuIHNvIGl0IGRvZXNuJ3QgZ2V0IHJlLWludm9rZWRcbiAgbGV0IHByb21pc2UgPSBsYXp5TG9hZEZuWydfcHJvbWlzZSddO1xuICBpZiAoIXByb21pc2UpIHtcbiAgICBjb25zdCBzdWNjZXNzID0gcmVzdWx0ID0+IHtcbiAgICAgIGRlbGV0ZSBzdGF0ZS5sYXp5TG9hZDtcbiAgICAgIGRlbGV0ZSBzdGF0ZS4kJHN0YXRlKCkubGF6eUxvYWQ7XG4gICAgICBkZWxldGUgbGF6eUxvYWRGblsnX3Byb21pc2UnXTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIGNvbnN0IGVycm9yID0gZXJyID0+IHtcbiAgICAgIGRlbGV0ZSBsYXp5TG9hZEZuWydfcHJvbWlzZSddO1xuICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLnJlamVjdChlcnIpO1xuICAgIH07XG5cbiAgICBwcm9taXNlID0gbGF6eUxvYWRGblsnX3Byb21pc2UnXSA9IHNlcnZpY2VzLiRxXG4gICAgICAud2hlbihsYXp5TG9hZEZuKHRyYW5zaXRpb24sIHN0YXRlKSlcbiAgICAgIC50aGVuKHVwZGF0ZVN0YXRlUmVnaXN0cnkpXG4gICAgICAudGhlbihzdWNjZXNzLCBlcnJvcik7XG4gIH1cblxuICAvKiogUmVnaXN0ZXIgYW55IGxhenkgbG9hZGVkIHN0YXRlIGRlZmluaXRpb25zICovXG4gIGZ1bmN0aW9uIHVwZGF0ZVN0YXRlUmVnaXN0cnkocmVzdWx0OiBMYXp5TG9hZFJlc3VsdCkge1xuICAgIGlmIChyZXN1bHQgJiYgQXJyYXkuaXNBcnJheShyZXN1bHQuc3RhdGVzKSkge1xuICAgICAgcmVzdWx0LnN0YXRlcy5mb3JFYWNoKF9zdGF0ZSA9PiB0cmFuc2l0aW9uLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LnJlZ2lzdGVyKF9zdGF0ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvaG9va3MvbGF6eUxvYWQudHMiLCIvKiogQG1vZHVsZSB0cmFuc2l0aW9uICovIC8qKiAqL1xuaW1wb3J0IHsgVHJhbnNpdGlvbkhvb2tQaGFzZSwgUGF0aFR5cGUgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBHZXRFcnJvckhhbmRsZXIsIEdldFJlc3VsdEhhbmRsZXIsIFRyYW5zaXRpb25Ib29rIH0gZnJvbSAnLi90cmFuc2l0aW9uSG9vayc7XG4vKipcbiAqIFRoaXMgY2xhc3MgZGVmaW5lcyBhIHR5cGUgb2YgaG9vaywgc3VjaCBhcyBgb25CZWZvcmVgIG9yIGBvbkVudGVyYC5cbiAqIFBsdWdpbnMgY2FuIGRlZmluZSBjdXN0b20gaG9vayB0eXBlcywgc3VjaCBhcyBzdGlja3kgc3RhdGVzIGRvZXMgZm9yIGBvbkluYWN0aXZlYC5cbiAqXG4gKiBAaW50ZXJhbGFwaVxuICovXG5leHBvcnQgY2xhc3MgVHJhbnNpdGlvbkV2ZW50VHlwZSB7XG4gIC8qIHRzbGludDpkaXNhYmxlOm5vLWluZmVycmFibGUtdHlwZXMgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIG5hbWU6IHN0cmluZyxcbiAgICBwdWJsaWMgaG9va1BoYXNlOiBUcmFuc2l0aW9uSG9va1BoYXNlLFxuICAgIHB1YmxpYyBob29rT3JkZXI6IG51bWJlcixcbiAgICBwdWJsaWMgY3JpdGVyaWFNYXRjaFBhdGg6IFBhdGhUeXBlLFxuICAgIHB1YmxpYyByZXZlcnNlU29ydDogYm9vbGVhbiA9IGZhbHNlLFxuICAgIHB1YmxpYyBnZXRSZXN1bHRIYW5kbGVyOiBHZXRSZXN1bHRIYW5kbGVyID0gVHJhbnNpdGlvbkhvb2suSEFORExFX1JFU1VMVCxcbiAgICBwdWJsaWMgZ2V0RXJyb3JIYW5kbGVyOiBHZXRFcnJvckhhbmRsZXIgPSBUcmFuc2l0aW9uSG9vay5SRUpFQ1RfRVJST1IsXG4gICAgcHVibGljIHN5bmNocm9ub3VzOiBib29sZWFuID0gZmFsc2UsXG4gICkge31cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS90cmFuc2l0aW9uL3RyYW5zaXRpb25FdmVudFR5cGUudHMiLCIvKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi9cbi8qKiAqL1xuaW1wb3J0IHsgaXNBcnJheSwgaXNPYmplY3QsICRRTGlrZSB9IGZyb20gJy4uL2NvbW1vbi9pbmRleCc7XG5cbi8qKlxuICogQW4gYW5ndWxhcjEtbGlrZSBwcm9taXNlIGFwaVxuICpcbiAqIFRoaXMgb2JqZWN0IGltcGxlbWVudHMgZm91ciBtZXRob2RzIHNpbWlsYXIgdG8gdGhlXG4gKiBbYW5ndWxhciAxIHByb21pc2UgYXBpXShodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmcvc2VydmljZS8kcSlcbiAqXG4gKiBVSS1Sb3V0ZXIgZXZvbHZlZCBmcm9tIGFuIGFuZ3VsYXIgMSBsaWJyYXJ5IHRvIGEgZnJhbWV3b3JrIGFnbm9zdGljIGxpYnJhcnkuXG4gKiBIb3dldmVyLCBzb21lIG9mIHRoZSBgQHVpcm91dGVyL2NvcmVgIGNvZGUgdXNlcyB0aGVzZSBuZzEgc3R5bGUgQVBJcyB0byBzdXBwb3J0IG5nMSBzdHlsZSBkZXBlbmRlbmN5IGluamVjdGlvbi5cbiAqXG4gKiBUaGlzIEFQSSBwcm92aWRlcyBuYXRpdmUgRVM2IHByb21pc2Ugc3VwcG9ydCB3cmFwcGVkIGFzIGEgJHEtbGlrZSBBUEkuXG4gKiBJbnRlcm5hbGx5LCBVSS1Sb3V0ZXIgdXNlcyB0aGlzICRxIG9iamVjdCB0byBwZXJmb3JtIHByb21pc2Ugb3BlcmF0aW9ucy5cbiAqIFRoZSBgYW5ndWxhci11aS1yb3V0ZXJgICh1aS1yb3V0ZXIgZm9yIGFuZ3VsYXIgMSkgdXNlcyB0aGUgJHEgQVBJIHByb3ZpZGVkIGJ5IGFuZ3VsYXIuXG4gKlxuICogJHEtbGlrZSBwcm9taXNlIGFwaVxuICovXG5leHBvcnQgY29uc3QgJHEgPSB7XG4gIC8qKiBOb3JtYWxpemVzIGEgdmFsdWUgYXMgYSBwcm9taXNlICovXG4gIHdoZW46IHZhbCA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiByZXNvbHZlKHZhbCkpLFxuXG4gIC8qKiBOb3JtYWxpemVzIGEgdmFsdWUgYXMgYSBwcm9taXNlIHJlamVjdGlvbiAqL1xuICByZWplY3Q6IHZhbCA9PlxuICAgIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHJlamVjdCh2YWwpO1xuICAgIH0pLFxuXG4gIC8qKiBAcmV0dXJucyBhIGRlZmVycmVkIG9iamVjdCwgd2hpY2ggaGFzIGByZXNvbHZlYCBhbmQgYHJlamVjdGAgZnVuY3Rpb25zICovXG4gIGRlZmVyOiAoKSA9PiB7XG4gICAgY29uc3QgZGVmZXJyZWQ6IGFueSA9IHt9O1xuICAgIGRlZmVycmVkLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgIGRlZmVycmVkLnJlamVjdCA9IHJlamVjdDtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH0sXG5cbiAgLyoqIExpa2UgUHJvbWlzZS5hbGwoKSwgYnV0IGFsc28gc3VwcG9ydHMgb2JqZWN0IGtleS9wcm9taXNlIG5vdGF0aW9uIGxpa2UgJHEgKi9cbiAgYWxsOiAocHJvbWlzZXM6IHsgW2tleTogc3RyaW5nXTogUHJvbWlzZTxhbnk+IH0gfCBQcm9taXNlPGFueT5bXSkgPT4ge1xuICAgIGlmIChpc0FycmF5KHByb21pc2VzKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICB9XG5cbiAgICBpZiAoaXNPYmplY3QocHJvbWlzZXMpKSB7XG4gICAgICAvLyBDb252ZXJ0IHByb21pc2VzIG1hcCB0byBwcm9taXNlcyBhcnJheS5cbiAgICAgIC8vIFdoZW4gZWFjaCBwcm9taXNlIHJlc29sdmVzLCBtYXAgaXQgdG8gYSB0dXBsZSB7IGtleToga2V5LCB2YWw6IHZhbCB9XG4gICAgICBjb25zdCBjaGFpbiA9IE9iamVjdC5rZXlzKHByb21pc2VzKS5tYXAoa2V5ID0+IHByb21pc2VzW2tleV0udGhlbih2YWwgPT4gKHsga2V5LCB2YWwgfSkpKTtcblxuICAgICAgLy8gVGhlbiB3YWl0IGZvciBhbGwgcHJvbWlzZXMgdG8gcmVzb2x2ZSwgYW5kIGNvbnZlcnQgdGhlbSBiYWNrIHRvIGFuIG9iamVjdFxuICAgICAgcmV0dXJuICRxLmFsbChjaGFpbikudGhlbih2YWx1ZXMgPT5cbiAgICAgICAgdmFsdWVzLnJlZHVjZSgoYWNjLCB0dXBsZSkgPT4ge1xuICAgICAgICAgIGFjY1t0dXBsZS5rZXldID0gdHVwbGUudmFsO1xuICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KSxcbiAgICAgICk7XG4gICAgfVxuICB9LFxufSBhcyAkUUxpa2U7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvdmFuaWxsYS9xLnRzIiwiLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdmFuaWxsYVxuICovXG4vKiogKi9cbmltcG9ydCB7XG4gIGV4dGVuZCxcbiAgYXNzZXJ0UHJlZGljYXRlLFxuICBpc0Z1bmN0aW9uLFxuICBpc0FycmF5LFxuICBpc0luamVjdGFibGUsXG4gICRJbmplY3Rvckxpa2UsXG4gIElJbmplY3RhYmxlLFxufSBmcm9tICcuLi9jb21tb24vaW5kZXgnO1xuXG4vLyBnbG9iYWxseSBhdmFpbGFibGUgaW5qZWN0YWJsZXNcbmNvbnN0IGdsb2JhbHMgPSB7fTtcbmNvbnN0IFNUUklQX0NPTU1FTlRTID0gLygoXFwvXFwvLiokKXwoXFwvXFwqW1xcc1xcU10qP1xcKlxcLykpL2dtO1xuY29uc3QgQVJHVU1FTlRfTkFNRVMgPSAvKFteXFxzLF0rKS9nO1xuXG4vKipcbiAqIEEgYmFzaWMgYW5ndWxhcjEtbGlrZSBpbmplY3RvciBhcGlcbiAqXG4gKiBUaGlzIG9iamVjdCBpbXBsZW1lbnRzIGZvdXIgbWV0aG9kcyBzaW1pbGFyIHRvIHRoZVxuICogW2FuZ3VsYXIgMSBkZXBlbmRlbmN5IGluamVjdG9yXShodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvYXV0by9zZXJ2aWNlLyRpbmplY3RvcilcbiAqXG4gKiBVSS1Sb3V0ZXIgZXZvbHZlZCBmcm9tIGFuIGFuZ3VsYXIgMSBsaWJyYXJ5IHRvIGEgZnJhbWV3b3JrIGFnbm9zdGljIGxpYnJhcnkuXG4gKiBIb3dldmVyLCBzb21lIG9mIHRoZSBgQHVpcm91dGVyL2NvcmVgIGNvZGUgdXNlcyB0aGVzZSBuZzEgc3R5bGUgQVBJcyB0byBzdXBwb3J0IG5nMSBzdHlsZSBkZXBlbmRlbmN5IGluamVjdGlvbi5cbiAqXG4gKiBUaGlzIG9iamVjdCBwcm92aWRlcyBhIG5haXZlIGltcGxlbWVudGF0aW9uIG9mIGEgZ2xvYmFsbHkgc2NvcGVkIGRlcGVuZGVuY3kgaW5qZWN0aW9uIHN5c3RlbS5cbiAqIEl0IHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcgREkgYXBwcm9hY2hlczpcbiAqXG4gKiAjIyMgRnVuY3Rpb24gcGFyYW1ldGVyIG5hbWVzXG4gKlxuICogQSBmdW5jdGlvbidzIGAudG9TdHJpbmcoKWAgaXMgY2FsbGVkLCBhbmQgdGhlIHBhcmFtZXRlciBuYW1lcyBhcmUgcGFyc2VkLlxuICogVGhpcyBvbmx5IHdvcmtzIHdoZW4gdGhlIHBhcmFtZXRlciBuYW1lcyBhcmVuJ3QgXCJtYW5nbGVkXCIgYnkgYSBtaW5pZmllciBzdWNoIGFzIFVnbGlmeUpTLlxuICpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBpbmplY3RlZEZ1bmN0aW9uKEZvb1NlcnZpY2UsIEJhclNlcnZpY2UpIHtcbiAqICAgLy8gRm9vU2VydmljZSBhbmQgQmFyU2VydmljZSBhcmUgaW5qZWN0ZWRcbiAqIH1cbiAqIGBgYFxuICpcbiAqICMjIyBGdW5jdGlvbiBhbm5vdGF0aW9uXG4gKlxuICogQSBmdW5jdGlvbiBtYXkgYmUgYW5ub3RhdGVkIHdpdGggYW4gYXJyYXkgb2YgZGVwZW5kZW5jeSBuYW1lcyBhcyB0aGUgYCRpbmplY3RgIHByb3BlcnR5LlxuICpcbiAqIGBgYGpzXG4gKiBpbmplY3RlZEZ1bmN0aW9uLiRpbmplY3QgPSBbICdGb29TZXJ2aWNlJywgJ0JhclNlcnZpY2UnIF07XG4gKiBmdW5jdGlvbiBpbmplY3RlZEZ1bmN0aW9uKGZzLCBicykge1xuICogICAvLyBGb29TZXJ2aWNlIGFuZCBCYXJTZXJ2aWNlIGFyZSBpbmplY3RlZCBhcyBmcyBhbmQgYnMgcGFyYW1ldGVyc1xuICogfVxuICogYGBgXG4gKlxuICogIyMjIEFycmF5IG5vdGF0aW9uXG4gKlxuICogQW4gYXJyYXkgcHJvdmlkZXMgdGhlIG5hbWVzIG9mIHRoZSBkZXBlbmRlbmNpZXMgdG8gaW5qZWN0IChhcyBzdHJpbmdzKS5cbiAqIFRoZSBmdW5jdGlvbiBpcyB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBhcnJheS5cbiAqXG4gKiBgYGBqc1xuICogWyAnRm9vU2VydmljZScsICdCYXJTZXJ2aWNlJywgZnVuY3Rpb24gKGZzLCBicykge1xuICogICAvLyBGb29TZXJ2aWNlIGFuZCBCYXJTZXJ2aWNlIGFyZSBpbmplY3RlZCBhcyBmcyBhbmQgYnMgcGFyYW1ldGVyc1xuICogfV1cbiAqIGBgYFxuICpcbiAqIEB0eXBlIHskSW5qZWN0b3JMaWtlfVxuICovXG5leHBvcnQgY29uc3QgJGluamVjdG9yID0ge1xuICAvKiogR2V0cyBhbiBvYmplY3QgZnJvbSBESSBiYXNlZCBvbiBhIHN0cmluZyB0b2tlbiAqL1xuICBnZXQ6IG5hbWUgPT4gZ2xvYmFsc1tuYW1lXSxcblxuICAvKiogUmV0dXJucyB0cnVlIGlmIGFuIG9iamVjdCBuYW1lZCBgbmFtZWAgZXhpc3RzIGluIGdsb2JhbCBESSAqL1xuICBoYXM6IG5hbWUgPT4gJGluamVjdG9yLmdldChuYW1lKSAhPSBudWxsLFxuXG4gIC8qKlxuICAgKiBJbmplY3RzIGEgZnVuY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIGZuIHRoZSBmdW5jdGlvbiB0byBpbmplY3RcbiAgICogQHBhcmFtIGNvbnRleHQgdGhlIGZ1bmN0aW9uJ3MgYHRoaXNgIGJpbmRpbmdcbiAgICogQHBhcmFtIGxvY2FscyBBbiBvYmplY3Qgd2l0aCBhZGRpdGlvbmFsIERJIHRva2VucyBhbmQgdmFsdWVzLCBzdWNoIGFzIGB7IHNvbWVUb2tlbjogeyBmb286IDEgfSB9YFxuICAgKi9cbiAgaW52b2tlOiAoZm46IElJbmplY3RhYmxlLCBjb250ZXh0PywgbG9jYWxzPykgPT4ge1xuICAgIGNvbnN0IGFsbCA9IGV4dGVuZCh7fSwgZ2xvYmFscywgbG9jYWxzIHx8IHt9KTtcbiAgICBjb25zdCBwYXJhbXMgPSAkaW5qZWN0b3IuYW5ub3RhdGUoZm4pO1xuICAgIGNvbnN0IGVuc3VyZUV4aXN0ID0gYXNzZXJ0UHJlZGljYXRlKFxuICAgICAgKGtleTogc3RyaW5nKSA9PiBhbGwuaGFzT3duUHJvcGVydHkoa2V5KSxcbiAgICAgIGtleSA9PiBgREkgY2FuJ3QgZmluZCBpbmplY3RhYmxlOiAnJHtrZXl9J2AsXG4gICAgKTtcbiAgICBjb25zdCBhcmdzID0gcGFyYW1zLmZpbHRlcihlbnN1cmVFeGlzdCkubWFwKHggPT4gYWxsW3hdKTtcbiAgICBpZiAoaXNGdW5jdGlvbihmbikpIHJldHVybiBmbi5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICBlbHNlIHJldHVybiAoZm4gYXMgYW55W10pLnNsaWNlKC0xKVswXS5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyBhIGZ1bmN0aW9uJ3MgZGVwZW5kZW5jaWVzXG4gICAqXG4gICAqIEFuYWx5emVzIGEgZnVuY3Rpb24gKG9yIGFycmF5KSBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBESSB0b2tlbnMgdGhhdCB0aGUgZnVuY3Rpb24gcmVxdWlyZXMuXG4gICAqIEByZXR1cm4gYW4gYXJyYXkgb2YgYHN0cmluZ2BzXG4gICAqL1xuICBhbm5vdGF0ZTogKGZuOiBJSW5qZWN0YWJsZSk6IGFueVtdID0+IHtcbiAgICBpZiAoIWlzSW5qZWN0YWJsZShmbikpIHRocm93IG5ldyBFcnJvcihgTm90IGFuIGluamVjdGFibGUgZnVuY3Rpb246ICR7Zm59YCk7XG4gICAgaWYgKGZuICYmIChmbiBhcyBhbnkpLiRpbmplY3QpIHJldHVybiAoZm4gYXMgYW55KS4kaW5qZWN0O1xuICAgIGlmIChpc0FycmF5KGZuKSkgcmV0dXJuIGZuLnNsaWNlKDAsIC0xKTtcbiAgICBjb25zdCBmblN0ciA9IGZuLnRvU3RyaW5nKCkucmVwbGFjZShTVFJJUF9DT01NRU5UUywgJycpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGZuU3RyLnNsaWNlKGZuU3RyLmluZGV4T2YoJygnKSArIDEsIGZuU3RyLmluZGV4T2YoJyknKSkubWF0Y2goQVJHVU1FTlRfTkFNRVMpO1xuICAgIHJldHVybiByZXN1bHQgfHwgW107XG4gIH0sXG59IGFzICRJbmplY3Rvckxpa2U7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvdmFuaWxsYS9pbmplY3Rvci50cyIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyByb290LCB0cmltSGFzaFZhbCB9IGZyb20gJy4uL2NvbW1vbic7XG5pbXBvcnQgeyBVSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5pbXBvcnQgeyBCYXNlTG9jYXRpb25TZXJ2aWNlcyB9IGZyb20gJy4vYmFzZUxvY2F0aW9uU2VydmljZSc7XG5cbi8qKiBBIGBMb2NhdGlvblNlcnZpY2VzYCB0aGF0IHVzZXMgdGhlIGJyb3dzZXIgaGFzaCBcIiNcIiB0byBnZXQvc2V0IHRoZSBjdXJyZW50IGxvY2F0aW9uICovXG5leHBvcnQgY2xhc3MgSGFzaExvY2F0aW9uU2VydmljZSBleHRlbmRzIEJhc2VMb2NhdGlvblNlcnZpY2VzIHtcbiAgY29uc3RydWN0b3Iocm91dGVyOiBVSVJvdXRlcikge1xuICAgIHN1cGVyKHJvdXRlciwgZmFsc2UpO1xuICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuX2xpc3RlbmVyLCBmYWxzZSk7XG4gIH1cblxuICBfZ2V0KCkge1xuICAgIHJldHVybiB0cmltSGFzaFZhbCh0aGlzLl9sb2NhdGlvbi5oYXNoKTtcbiAgfVxuICBfc2V0KHN0YXRlOiBhbnksIHRpdGxlOiBzdHJpbmcsIHVybDogc3RyaW5nLCByZXBsYWNlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fbG9jYXRpb24uaGFzaCA9IHVybDtcbiAgfVxuXG4gIGRpc3Bvc2Uocm91dGVyOiBVSVJvdXRlcikge1xuICAgIHN1cGVyLmRpc3Bvc2Uocm91dGVyKTtcbiAgICByb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLl9saXN0ZW5lcik7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS92YW5pbGxhL2hhc2hMb2NhdGlvblNlcnZpY2UudHMiLCIvKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi9cbi8qKiAqL1xuaW1wb3J0IHsgQmFzZUxvY2F0aW9uU2VydmljZXMgfSBmcm9tICcuL2Jhc2VMb2NhdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuXG4vKiogQSBgTG9jYXRpb25TZXJ2aWNlc2AgdGhhdCBnZXRzL3NldHMgdGhlIGN1cnJlbnQgbG9jYXRpb24gZnJvbSBhbiBpbi1tZW1vcnkgb2JqZWN0ICovXG5leHBvcnQgY2xhc3MgTWVtb3J5TG9jYXRpb25TZXJ2aWNlIGV4dGVuZHMgQmFzZUxvY2F0aW9uU2VydmljZXMge1xuICBfdXJsOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Iocm91dGVyOiBVSVJvdXRlcikge1xuICAgIHN1cGVyKHJvdXRlciwgdHJ1ZSk7XG4gIH1cblxuICBfZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl91cmw7XG4gIH1cblxuICBfc2V0KHN0YXRlOiBhbnksIHRpdGxlOiBzdHJpbmcsIHVybDogc3RyaW5nLCByZXBsYWNlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fdXJsID0gdXJsO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvdmFuaWxsYS9tZW1vcnlMb2NhdGlvblNlcnZpY2UudHMiLCIvKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi9cbi8qKiAqL1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuaW1wb3J0IHsgQmFzZUxvY2F0aW9uU2VydmljZXMgfSBmcm9tICcuL2Jhc2VMb2NhdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgTG9jYXRpb25Db25maWcsIHJvb3QsIHNwbGl0SGFzaCwgc3BsaXRRdWVyeSwgc3RyaXBMYXN0UGF0aEVsZW1lbnQgfSBmcm9tICcuLi9jb21tb24nO1xuXG4vKipcbiAqIEEgYExvY2F0aW9uU2VydmljZXNgIHRoYXQgZ2V0cy9zZXRzIHRoZSBjdXJyZW50IGxvY2F0aW9uIHVzaW5nIHRoZSBicm93c2VyJ3MgYGxvY2F0aW9uYCBhbmQgYGhpc3RvcnlgIGFwaXNcbiAqXG4gKiBVc2VzIGBoaXN0b3J5LnB1c2hTdGF0ZWAgYW5kIGBoaXN0b3J5LnJlcGxhY2VTdGF0ZWBcbiAqL1xuZXhwb3J0IGNsYXNzIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSBleHRlbmRzIEJhc2VMb2NhdGlvblNlcnZpY2VzIHtcbiAgX2NvbmZpZzogTG9jYXRpb25Db25maWc7XG5cbiAgY29uc3RydWN0b3Iocm91dGVyOiBVSVJvdXRlcikge1xuICAgIHN1cGVyKHJvdXRlciwgdHJ1ZSk7XG4gICAgdGhpcy5fY29uZmlnID0gcm91dGVyLnVybFNlcnZpY2UuY29uZmlnO1xuICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLl9saXN0ZW5lciwgZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGJhc2UgcHJlZml4IHdpdGhvdXQ6XG4gICAqIC0gdHJhaWxpbmcgc2xhc2hcbiAgICogLSB0cmFpbGluZyBmaWxlbmFtZVxuICAgKiAtIHByb3RvY29sIGFuZCBob3N0bmFtZVxuICAgKlxuICAgKiBJZiA8YmFzZSBocmVmPScvYmFzZS8nPiwgdGhpcyByZXR1cm5zICcvYmFzZScuXG4gICAqIElmIDxiYXNlIGhyZWY9Jy9mb28vYmFzZS8nPiwgdGhpcyByZXR1cm5zICcvZm9vL2Jhc2UnLlxuICAgKiBJZiA8YmFzZSBocmVmPScvYmFzZS9pbmRleC5odG1sJz4sIHRoaXMgcmV0dXJucyAnL2Jhc2UnLlxuICAgKiBJZiA8YmFzZSBocmVmPSdodHRwOi8vbG9jYWxob3N0OjgwODAvYmFzZS9pbmRleC5odG1sJz4sIHRoaXMgcmV0dXJucyAnL2Jhc2UnLlxuICAgKiBJZiA8YmFzZSBocmVmPScvYmFzZSc+LCB0aGlzIHJldHVybnMgJycuXG4gICAqIElmIDxiYXNlIGhyZWY9J2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCc+LCB0aGlzIHJldHVybnMgJycuXG4gICAqIElmIDxiYXNlIGhyZWY9J2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC8nPiwgdGhpcyByZXR1cm5zICcnLlxuICAgKlxuICAgKiBTZWU6IGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvZGV2L3NlbWFudGljcy5odG1sI3RoZS1iYXNlLWVsZW1lbnRcbiAgICovXG4gIHByaXZhdGUgX2dldEJhc2VQcmVmaXgoKSB7XG4gICAgcmV0dXJuIHN0cmlwTGFzdFBhdGhFbGVtZW50KHRoaXMuX2NvbmZpZy5iYXNlSHJlZigpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfZ2V0KCkge1xuICAgIGxldCB7IHBhdGhuYW1lLCBoYXNoLCBzZWFyY2ggfSA9IHRoaXMuX2xvY2F0aW9uO1xuICAgIHNlYXJjaCA9IHNwbGl0UXVlcnkoc2VhcmNoKVsxXTsgLy8gc3RyaXAgPyBpZiBmb3VuZFxuICAgIGhhc2ggPSBzcGxpdEhhc2goaGFzaClbMV07IC8vIHN0cmlwICMgaWYgZm91bmRcblxuICAgIGNvbnN0IGJhc2VQcmVmaXggPSB0aGlzLl9nZXRCYXNlUHJlZml4KCk7XG4gICAgY29uc3QgZXhhY3RCYXNlSHJlZk1hdGNoID0gcGF0aG5hbWUgPT09IHRoaXMuX2NvbmZpZy5iYXNlSHJlZigpO1xuICAgIGNvbnN0IHN0YXJ0c1dpdGhCYXNlID0gcGF0aG5hbWUuc3Vic3RyKDAsIGJhc2VQcmVmaXgubGVuZ3RoKSA9PT0gYmFzZVByZWZpeDtcbiAgICBwYXRobmFtZSA9IGV4YWN0QmFzZUhyZWZNYXRjaCA/ICcvJyA6IHN0YXJ0c1dpdGhCYXNlID8gcGF0aG5hbWUuc3Vic3RyaW5nKGJhc2VQcmVmaXgubGVuZ3RoKSA6IHBhdGhuYW1lO1xuXG4gICAgcmV0dXJuIHBhdGhuYW1lICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIChoYXNoID8gJyMnICsgaGFzaCA6ICcnKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfc2V0KHN0YXRlOiBhbnksIHRpdGxlOiBzdHJpbmcsIHVybDogc3RyaW5nLCByZXBsYWNlOiBib29sZWFuKSB7XG4gICAgY29uc3QgYmFzZVByZWZpeCA9IHRoaXMuX2dldEJhc2VQcmVmaXgoKTtcbiAgICBjb25zdCBzbGFzaCA9IHVybCAmJiB1cmxbMF0gIT09ICcvJyA/ICcvJyA6ICcnO1xuICAgIGNvbnN0IGZ1bGxVcmwgPSB1cmwgPT09ICcnIHx8IHVybCA9PT0gJy8nID8gdGhpcy5fY29uZmlnLmJhc2VIcmVmKCkgOiBiYXNlUHJlZml4ICsgc2xhc2ggKyB1cmw7XG5cbiAgICBpZiAocmVwbGFjZSkge1xuICAgICAgdGhpcy5faGlzdG9yeS5yZXBsYWNlU3RhdGUoc3RhdGUsIHRpdGxlLCBmdWxsVXJsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlzdG9yeS5wdXNoU3RhdGUoc3RhdGUsIHRpdGxlLCBmdWxsVXJsKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZShyb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgc3VwZXIuZGlzcG9zZShyb3V0ZXIpO1xuICAgIHJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLl9saXN0ZW5lcik7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS92YW5pbGxhL3B1c2hTdGF0ZUxvY2F0aW9uU2VydmljZS50cyIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5pbXBvcnQgeyBMb2NhdGlvbkNvbmZpZyB9IGZyb20gJy4uL2NvbW1vbi9jb3Jlc2VydmljZXMnO1xuaW1wb3J0IHsgaXNEZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuXG4vKiogQSBgTG9jYXRpb25Db25maWdgIG1vY2sgdGhhdCBnZXRzL3NldHMgYWxsIGNvbmZpZyBmcm9tIGFuIGluLW1lbW9yeSBvYmplY3QgKi9cbmV4cG9ydCBjbGFzcyBNZW1vcnlMb2NhdGlvbkNvbmZpZyBpbXBsZW1lbnRzIExvY2F0aW9uQ29uZmlnIHtcbiAgZGlzcG9zZSA9IG5vb3A7XG5cbiAgX2Jhc2VIcmVmID0gJyc7XG4gIF9wb3J0ID0gODA7XG4gIF9wcm90b2NvbCA9ICdodHRwJztcbiAgX2hvc3QgPSAnbG9jYWxob3N0JztcbiAgX2hhc2hQcmVmaXggPSAnJztcblxuICBwb3J0ID0gKCkgPT4gdGhpcy5fcG9ydDtcbiAgcHJvdG9jb2wgPSAoKSA9PiB0aGlzLl9wcm90b2NvbDtcbiAgaG9zdCA9ICgpID0+IHRoaXMuX2hvc3Q7XG4gIGJhc2VIcmVmID0gKCkgPT4gdGhpcy5fYmFzZUhyZWY7XG4gIGh0bWw1TW9kZSA9ICgpID0+IGZhbHNlO1xuICBoYXNoUHJlZml4ID0gKG5ld3ZhbD8pID0+IChpc0RlZmluZWQobmV3dmFsKSA/ICh0aGlzLl9oYXNoUHJlZml4ID0gbmV3dmFsKSA6IHRoaXMuX2hhc2hQcmVmaXgpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3ZhbmlsbGEvbWVtb3J5TG9jYXRpb25Db25maWcudHMiLCIvKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi9cbi8qKiAqL1xuaW1wb3J0IHsgaXNEZWZpbmVkIH0gZnJvbSAnLi4vY29tbW9uL3ByZWRpY2F0ZXMnO1xuaW1wb3J0IHsgTG9jYXRpb25Db25maWcgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcblxuLyoqIEEgYExvY2F0aW9uQ29uZmlnYCB0aGF0IGRlbGVnYXRlcyB0byB0aGUgYnJvd3NlcidzIGBsb2NhdGlvbmAgb2JqZWN0ICovXG5leHBvcnQgY2xhc3MgQnJvd3NlckxvY2F0aW9uQ29uZmlnIGltcGxlbWVudHMgTG9jYXRpb25Db25maWcge1xuICBwcml2YXRlIF9iYXNlSHJlZiA9IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfaGFzaFByZWZpeCA9ICcnO1xuXG4gIGNvbnN0cnVjdG9yKHJvdXRlcj8sIHByaXZhdGUgX2lzSHRtbDUgPSBmYWxzZSkge31cblxuICBwb3J0KCk6IG51bWJlciB7XG4gICAgaWYgKGxvY2F0aW9uLnBvcnQpIHtcbiAgICAgIHJldHVybiBOdW1iZXIobG9jYXRpb24ucG9ydCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvdG9jb2woKSA9PT0gJ2h0dHBzJyA/IDQ0MyA6IDgwO1xuICB9XG5cbiAgcHJvdG9jb2woKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wucmVwbGFjZSgvOi9nLCAnJyk7XG4gIH1cblxuICBob3N0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGxvY2F0aW9uLmhvc3RuYW1lO1xuICB9XG5cbiAgaHRtbDVNb2RlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9pc0h0bWw1O1xuICB9XG5cbiAgaGFzaFByZWZpeCgpOiBzdHJpbmc7XG4gIGhhc2hQcmVmaXgobmV3cHJlZml4Pzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaXNEZWZpbmVkKG5ld3ByZWZpeCkgPyAodGhpcy5faGFzaFByZWZpeCA9IG5ld3ByZWZpeCkgOiB0aGlzLl9oYXNoUHJlZml4O1xuICB9XG5cbiAgYmFzZUhyZWYoaHJlZj86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGlzRGVmaW5lZChocmVmKVxuICAgICAgPyAodGhpcy5fYmFzZUhyZWYgPSBocmVmKVxuICAgICAgOiBpc0RlZmluZWQodGhpcy5fYmFzZUhyZWYpID8gdGhpcy5fYmFzZUhyZWYgOiB0aGlzLmFwcGx5RG9jdW1lbnRCYXNlSHJlZigpO1xuICB9XG5cbiAgYXBwbHlEb2N1bWVudEJhc2VIcmVmKCkge1xuICAgIGNvbnN0IGJhc2VUYWc6IEhUTUxCYXNlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdiYXNlJylbMF07XG4gICAgcmV0dXJuICh0aGlzLl9iYXNlSHJlZiA9IGJhc2VUYWcgPyBiYXNlVGFnLmhyZWYuc3Vic3RyKGxvY2F0aW9uLm9yaWdpbi5sZW5ndGgpIDogbG9jYXRpb24ucGF0aG5hbWUgfHwgJy8nKTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7fVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3ZhbmlsbGEvYnJvd3NlckxvY2F0aW9uQ29uZmlnLnRzIiwiaW1wb3J0ICdhbmd1bGFyJztcbmltcG9ydCAnYW5ndWxhci1tb2Nrcy9hbmd1bGFyLW1vY2tzJztcbi8vaW1wb3J0IHVpUm91dGVyIGZyb20gJ0B1aXJvdXRlci9hbmd1bGFyanMnO1xucmVxdWlyZShcIkB1aXJvdXRlci9hbmd1bGFyanNcIilcbnJlcXVpcmUgKCcuLi9zcmMvbW9kdWxlL21haW4ubW9kdWxlLnNwZWMuanMnKVxuXG5cbi8vIGFwcCBtb2R1bGUgaXMgbmVjZXNzYXJ5IGZvciBwbHVnaW5zLCBidXQgb25seSBpbiB0aGUgdGVzdCBlbnZpcm9ubWVudFxuYW5ndWxhci5tb2R1bGUoXCJhcHBcIiwgW10pLmNvbnN0YW50KFwiY29uZmlnXCIsIHtcInVybFwiOiBcImZvb3VybFwifSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vdGVzdC9tYWluLmpzIiwiLyoqXG4gKiBAbGljZW5zZSBBbmd1bGFySlMgdjEuNy4wXG4gKiAoYykgMjAxMC0yMDE4IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuICogTGljZW5zZTogTUlUXG4gKi9cbihmdW5jdGlvbih3aW5kb3cpIHsndXNlIHN0cmljdCc7XG5cbi8qIGV4cG9ydGVkXG4gIG1pbkVyckNvbmZpZyxcbiAgZXJyb3JIYW5kbGluZ0NvbmZpZyxcbiAgaXNWYWxpZE9iamVjdE1heERlcHRoXG4qL1xuXG52YXIgbWluRXJyQ29uZmlnID0ge1xuICBvYmplY3RNYXhEZXB0aDogNVxufTtcblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuZXJyb3JIYW5kbGluZ0NvbmZpZ1xuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbmZpZ3VyZSBzZXZlcmFsIGFzcGVjdHMgb2YgZXJyb3IgaGFuZGxpbmcgaW4gQW5ndWxhckpTIGlmIHVzZWQgYXMgYSBzZXR0ZXIgb3IgcmV0dXJuIHRoZVxuICogY3VycmVudCBjb25maWd1cmF0aW9uIGlmIHVzZWQgYXMgYSBnZXR0ZXIuIFRoZSBmb2xsb3dpbmcgb3B0aW9ucyBhcmUgc3VwcG9ydGVkOlxuICpcbiAqIC0gKipvYmplY3RNYXhEZXB0aCoqOiBUaGUgbWF4aW11bSBkZXB0aCB0byB3aGljaCBvYmplY3RzIGFyZSB0cmF2ZXJzZWQgd2hlbiBzdHJpbmdpZmllZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKlxuICogT21pdHRlZCBvciB1bmRlZmluZWQgb3B0aW9ucyB3aWxsIGxlYXZlIHRoZSBjb3JyZXNwb25kaW5nIGNvbmZpZ3VyYXRpb24gdmFsdWVzIHVuY2hhbmdlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdC4gTWF5IG9ubHkgY29udGFpbiB0aGUgb3B0aW9ucyB0aGF0IG5lZWQgdG8gYmVcbiAqICAgICB1cGRhdGVkLiBTdXBwb3J0ZWQga2V5czpcbiAqXG4gKiAqIGBvYmplY3RNYXhEZXB0aGAgICoqe051bWJlcn0qKiAtIFRoZSBtYXggZGVwdGggZm9yIHN0cmluZ2lmeWluZyBvYmplY3RzLiBTZXR0aW5nIHRvIGFcbiAqICAgbm9uLXBvc2l0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCByZW1vdmVzIHRoZSBtYXggZGVwdGggbGltaXQuXG4gKiAgIERlZmF1bHQ6IDVcbiAqL1xuZnVuY3Rpb24gZXJyb3JIYW5kbGluZ0NvbmZpZyhjb25maWcpIHtcbiAgaWYgKGlzT2JqZWN0KGNvbmZpZykpIHtcbiAgICBpZiAoaXNEZWZpbmVkKGNvbmZpZy5vYmplY3RNYXhEZXB0aCkpIHtcbiAgICAgIG1pbkVyckNvbmZpZy5vYmplY3RNYXhEZXB0aCA9IGlzVmFsaWRPYmplY3RNYXhEZXB0aChjb25maWcub2JqZWN0TWF4RGVwdGgpID8gY29uZmlnLm9iamVjdE1heERlcHRoIDogTmFOO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbWluRXJyQ29uZmlnO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBtYXhEZXB0aFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNWYWxpZE9iamVjdE1heERlcHRoKG1heERlcHRoKSB7XG4gIHJldHVybiBpc051bWJlcihtYXhEZXB0aCkgJiYgbWF4RGVwdGggPiAwO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoaXMgb2JqZWN0IHByb3ZpZGVzIGEgdXRpbGl0eSBmb3IgcHJvZHVjaW5nIHJpY2ggRXJyb3IgbWVzc2FnZXMgd2l0aGluXG4gKiBBbmd1bGFySlMuIEl0IGNhbiBiZSBjYWxsZWQgYXMgZm9sbG93czpcbiAqXG4gKiB2YXIgZXhhbXBsZU1pbkVyciA9IG1pbkVycignZXhhbXBsZScpO1xuICogdGhyb3cgZXhhbXBsZU1pbkVycignb25lJywgJ1RoaXMgezB9IGlzIHsxfScsIGZvbywgYmFyKTtcbiAqXG4gKiBUaGUgYWJvdmUgY3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBtaW5FcnIgaW4gdGhlIGV4YW1wbGUgbmFtZXNwYWNlLiBUaGVcbiAqIHJlc3VsdGluZyBlcnJvciB3aWxsIGhhdmUgYSBuYW1lc3BhY2VkIGVycm9yIGNvZGUgb2YgZXhhbXBsZS5vbmUuICBUaGVcbiAqIHJlc3VsdGluZyBlcnJvciB3aWxsIHJlcGxhY2UgezB9IHdpdGggdGhlIHZhbHVlIG9mIGZvbywgYW5kIHsxfSB3aXRoIHRoZVxuICogdmFsdWUgb2YgYmFyLiBUaGUgb2JqZWN0IGlzIG5vdCByZXN0cmljdGVkIGluIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIGl0IGNhblxuICogdGFrZS5cbiAqXG4gKiBJZiBmZXdlciBhcmd1bWVudHMgYXJlIHNwZWNpZmllZCB0aGFuIG5lY2Vzc2FyeSBmb3IgaW50ZXJwb2xhdGlvbiwgdGhlIGV4dHJhXG4gKiBpbnRlcnBvbGF0aW9uIG1hcmtlcnMgd2lsbCBiZSBwcmVzZXJ2ZWQgaW4gdGhlIGZpbmFsIHN0cmluZy5cbiAqXG4gKiBTaW5jZSBkYXRhIHdpbGwgYmUgcGFyc2VkIHN0YXRpY2FsbHkgZHVyaW5nIGEgYnVpbGQgc3RlcCwgc29tZSByZXN0cmljdGlvbnNcbiAqIGFyZSBhcHBsaWVkIHdpdGggcmVzcGVjdCB0byBob3cgbWluRXJyIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhbmQgY2FsbGVkLlxuICogSW5zdGFuY2VzIHNob3VsZCBoYXZlIG5hbWVzIG9mIHRoZSBmb3JtIG5hbWVzcGFjZU1pbkVyciBmb3IgYSBtaW5FcnIgY3JlYXRlZFxuICogdXNpbmcgbWluRXJyKCduYW1lc3BhY2UnKSAuIEVycm9yIGNvZGVzLCBuYW1lc3BhY2VzIGFuZCB0ZW1wbGF0ZSBzdHJpbmdzXG4gKiBzaG91bGQgYWxsIGJlIHN0YXRpYyBzdHJpbmdzLCBub3QgdmFyaWFibGVzIG9yIGdlbmVyYWwgZXhwcmVzc2lvbnMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZSBUaGUgbmFtZXNwYWNlIHRvIHVzZSBmb3IgdGhlIG5ldyBtaW5FcnIgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBFcnJvckNvbnN0cnVjdG9yIEN1c3RvbSBlcnJvciBjb25zdHJ1Y3RvciB0byBiZSBpbnN0YW50aWF0ZWQgd2hlbiByZXR1cm5pbmdcbiAqICAgZXJyb3IgZnJvbSByZXR1cm5lZCBmdW5jdGlvbiwgZm9yIGNhc2VzIHdoZW4gYSBwYXJ0aWN1bGFyIHR5cGUgb2YgZXJyb3IgaXMgdXNlZnVsLlxuICogQHJldHVybnMge2Z1bmN0aW9uKGNvZGU6c3RyaW5nLCB0ZW1wbGF0ZTpzdHJpbmcsIC4uLnRlbXBsYXRlQXJncyk6IEVycm9yfSBtaW5FcnIgaW5zdGFuY2VcbiAqL1xuXG5mdW5jdGlvbiBtaW5FcnIobW9kdWxlLCBFcnJvckNvbnN0cnVjdG9yKSB7XG4gIEVycm9yQ29uc3RydWN0b3IgPSBFcnJvckNvbnN0cnVjdG9yIHx8IEVycm9yO1xuXG4gIHZhciB1cmwgPSAnaHR0cHM6Ly9lcnJvcnMuYW5ndWxhcmpzLm9yZy8xLjcuMC8nO1xuICB2YXIgcmVnZXggPSB1cmwucmVwbGFjZSgnLicsICdcXFxcLicpICsgJ1tcXFxcc1xcXFxTXSonO1xuICB2YXIgZXJyUmVnRXhwID0gbmV3IFJlZ0V4cChyZWdleCwgJ2cnKTtcblxuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvZGUgPSBhcmd1bWVudHNbMF0sXG4gICAgICB0ZW1wbGF0ZSA9IGFyZ3VtZW50c1sxXSxcbiAgICAgIG1lc3NhZ2UgPSAnWycgKyAobW9kdWxlID8gbW9kdWxlICsgJzonIDogJycpICsgY29kZSArICddICcsXG4gICAgICB0ZW1wbGF0ZUFyZ3MgPSBzbGljZUFyZ3MoYXJndW1lbnRzLCAyKS5tYXAoZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0b0RlYnVnU3RyaW5nKGFyZywgbWluRXJyQ29uZmlnLm9iamVjdE1heERlcHRoKTtcbiAgICAgIH0pLFxuICAgICAgcGFyYW1QcmVmaXgsIGk7XG5cbiAgICAvLyBBIG1pbkVyciBtZXNzYWdlIGhhcyB0d28gcGFydHM6IHRoZSBtZXNzYWdlIGl0c2VsZiBhbmQgdGhlIHVybCB0aGF0IGNvbnRhaW5zIHRoZVxuICAgIC8vIGVuY29kZWQgbWVzc2FnZS5cbiAgICAvLyBUaGUgbWVzc2FnZSdzIHBhcmFtZXRlcnMgY2FuIGNvbnRhaW4gb3RoZXIgZXJyb3IgbWVzc2FnZXMgd2hpY2ggYWxzbyBpbmNsdWRlIGVycm9yIHVybHMuXG4gICAgLy8gVG8gcHJldmVudCB0aGUgbWVzc2FnZXMgZnJvbSBnZXR0aW5nIHRvbyBsb25nLCB3ZSBzdHJpcCB0aGUgZXJyb3IgdXJscyBmcm9tIHRoZSBwYXJhbWV0ZXJzLlxuXG4gICAgbWVzc2FnZSArPSB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHtcXGQrXFx9L2csIGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICB2YXIgaW5kZXggPSArbWF0Y2guc2xpY2UoMSwgLTEpO1xuXG4gICAgICBpZiAoaW5kZXggPCB0ZW1wbGF0ZUFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZUFyZ3NbaW5kZXhdLnJlcGxhY2UoZXJyUmVnRXhwLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2UgKz0gJ1xcbicgKyB1cmwgKyAobW9kdWxlID8gbW9kdWxlICsgJy8nIDogJycpICsgY29kZTtcblxuICAgIGZvciAoaSA9IDAsIHBhcmFtUHJlZml4ID0gJz8nOyBpIDwgdGVtcGxhdGVBcmdzLmxlbmd0aDsgaSsrLCBwYXJhbVByZWZpeCA9ICcmJykge1xuICAgICAgbWVzc2FnZSArPSBwYXJhbVByZWZpeCArICdwJyArIGkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodGVtcGxhdGVBcmdzW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEVycm9yQ29uc3RydWN0b3IobWVzc2FnZSk7XG4gIH07XG59XG5cbi8qIFdlIG5lZWQgdG8gdGVsbCBFU0xpbnQgd2hhdCB2YXJpYWJsZXMgYXJlIGJlaW5nIGV4cG9ydGVkICovXG4vKiBleHBvcnRlZFxuICBhbmd1bGFyLFxuICBtc2llLFxuICBqcUxpdGUsXG4gIGpRdWVyeSxcbiAgc2xpY2UsXG4gIHNwbGljZSxcbiAgcHVzaCxcbiAgdG9TdHJpbmcsXG4gIG1pbkVyckNvbmZpZyxcbiAgZXJyb3JIYW5kbGluZ0NvbmZpZyxcbiAgaXNWYWxpZE9iamVjdE1heERlcHRoLFxuICBuZ01pbkVycixcbiAgYW5ndWxhck1vZHVsZSxcbiAgdWlkLFxuICBSRUdFWF9TVFJJTkdfUkVHRVhQLFxuICBWQUxJRElUWV9TVEFURV9QUk9QRVJUWSxcblxuICBsb3dlcmNhc2UsXG4gIHVwcGVyY2FzZSxcbiAgbm9kZU5hbWVfLFxuICBpc0FycmF5TGlrZSxcbiAgZm9yRWFjaCxcbiAgZm9yRWFjaFNvcnRlZCxcbiAgcmV2ZXJzZVBhcmFtcyxcbiAgbmV4dFVpZCxcbiAgc2V0SGFzaEtleSxcbiAgZXh0ZW5kLFxuICB0b0ludCxcbiAgaW5oZXJpdCxcbiAgbWVyZ2UsXG4gIG5vb3AsXG4gIGlkZW50aXR5LFxuICB2YWx1ZUZuLFxuICBpc1VuZGVmaW5lZCxcbiAgaXNEZWZpbmVkLFxuICBpc09iamVjdCxcbiAgaXNCbGFua09iamVjdCxcbiAgaXNTdHJpbmcsXG4gIGlzTnVtYmVyLFxuICBpc051bWJlck5hTixcbiAgaXNEYXRlLFxuICBpc0Vycm9yLFxuICBpc0FycmF5LFxuICBpc0Z1bmN0aW9uLFxuICBpc1JlZ0V4cCxcbiAgaXNXaW5kb3csXG4gIGlzU2NvcGUsXG4gIGlzRmlsZSxcbiAgaXNGb3JtRGF0YSxcbiAgaXNCbG9iLFxuICBpc0Jvb2xlYW4sXG4gIGlzUHJvbWlzZUxpa2UsXG4gIHRyaW0sXG4gIGVzY2FwZUZvclJlZ2V4cCxcbiAgaXNFbGVtZW50LFxuICBtYWtlTWFwLFxuICBpbmNsdWRlcyxcbiAgYXJyYXlSZW1vdmUsXG4gIGNvcHksXG4gIHNpbXBsZUNvbXBhcmUsXG4gIGVxdWFscyxcbiAgY3NwLFxuICBqcSxcbiAgY29uY2F0LFxuICBzbGljZUFyZ3MsXG4gIGJpbmQsXG4gIHRvSnNvblJlcGxhY2VyLFxuICB0b0pzb24sXG4gIGZyb21Kc29uLFxuICBjb252ZXJ0VGltZXpvbmVUb0xvY2FsLFxuICB0aW1lem9uZVRvT2Zmc2V0LFxuICBhZGREYXRlTWludXRlcyxcbiAgc3RhcnRpbmdUYWcsXG4gIHRyeURlY29kZVVSSUNvbXBvbmVudCxcbiAgcGFyc2VLZXlWYWx1ZSxcbiAgdG9LZXlWYWx1ZSxcbiAgZW5jb2RlVXJpU2VnbWVudCxcbiAgZW5jb2RlVXJpUXVlcnksXG4gIGFuZ3VsYXJJbml0LFxuICBib290c3RyYXAsXG4gIGdldFRlc3RhYmlsaXR5LFxuICBzbmFrZV9jYXNlLFxuICBiaW5kSlF1ZXJ5LFxuICBhc3NlcnRBcmcsXG4gIGFzc2VydEFyZ0ZuLFxuICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eSxcbiAgZ2V0dGVyLFxuICBnZXRCbG9ja05vZGVzLFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgY3JlYXRlTWFwLFxuICBzdHJpbmdpZnksXG5cbiAgTk9ERV9UWVBFX0VMRU1FTlQsXG4gIE5PREVfVFlQRV9BVFRSSUJVVEUsXG4gIE5PREVfVFlQRV9URVhULFxuICBOT0RFX1RZUEVfQ09NTUVOVCxcbiAgTk9ERV9UWVBFX0RPQ1VNRU5ULFxuICBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlRcbiovXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG5nXG4gKiBAbW9kdWxlIG5nXG4gKiBAaW5zdGFsbGF0aW9uXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgbmcgbW9kdWxlIGlzIGxvYWRlZCBieSBkZWZhdWx0IHdoZW4gYW4gQW5ndWxhckpTIGFwcGxpY2F0aW9uIGlzIHN0YXJ0ZWQuIFRoZSBtb2R1bGUgaXRzZWxmXG4gKiBjb250YWlucyB0aGUgZXNzZW50aWFsIGNvbXBvbmVudHMgZm9yIGFuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiB0byBmdW5jdGlvbi4gVGhlIHRhYmxlIGJlbG93XG4gKiBsaXN0cyBhIGhpZ2ggbGV2ZWwgYnJlYWtkb3duIG9mIGVhY2ggb2YgdGhlIHNlcnZpY2VzL2ZhY3RvcmllcywgZmlsdGVycywgZGlyZWN0aXZlcyBhbmQgdGVzdGluZ1xuICogY29tcG9uZW50cyBhdmFpbGFibGUgd2l0aGluIHRoaXMgY29yZSBtb2R1bGUuXG4gKlxuICovXG5cbnZhciBSRUdFWF9TVFJJTkdfUkVHRVhQID0gL15cXC8oLispXFwvKFthLXpdKikkLztcblxuLy8gVGhlIG5hbWUgb2YgYSBmb3JtIGNvbnRyb2wncyBWYWxpZGl0eVN0YXRlIHByb3BlcnR5LlxuLy8gVGhpcyBpcyB1c2VkIHNvIHRoYXQgaXQncyBwb3NzaWJsZSBmb3IgaW50ZXJuYWwgdGVzdHMgdG8gY3JlYXRlIG1vY2sgVmFsaWRpdHlTdGF0ZXMuXG52YXIgVkFMSURJVFlfU1RBVEVfUFJPUEVSVFkgPSAndmFsaWRpdHknO1xuXG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqXG4gKiBAZGVzY3JpcHRpb24gQ29udmVydHMgdGhlIHNwZWNpZmllZCBzdHJpbmcgdG8gbG93ZXJjYXNlLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBTdHJpbmcgdG8gYmUgY29udmVydGVkIHRvIGxvd2VyY2FzZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IExvd2VyY2FzZWQgc3RyaW5nLlxuICovXG52YXIgbG93ZXJjYXNlID0gZnVuY3Rpb24oc3RyaW5nKSB7cmV0dXJuIGlzU3RyaW5nKHN0cmluZykgPyBzdHJpbmcudG9Mb3dlckNhc2UoKSA6IHN0cmluZzt9O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKlxuICogQGRlc2NyaXB0aW9uIENvbnZlcnRzIHRoZSBzcGVjaWZpZWQgc3RyaW5nIHRvIHVwcGVyY2FzZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgU3RyaW5nIHRvIGJlIGNvbnZlcnRlZCB0byB1cHBlcmNhc2UuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBVcHBlcmNhc2VkIHN0cmluZy5cbiAqL1xudmFyIHVwcGVyY2FzZSA9IGZ1bmN0aW9uKHN0cmluZykge3JldHVybiBpc1N0cmluZyhzdHJpbmcpID8gc3RyaW5nLnRvVXBwZXJDYXNlKCkgOiBzdHJpbmc7fTtcblxuXG52YXJcbiAgICBtc2llLCAgICAgICAgICAgICAvLyBob2xkcyBtYWpvciB2ZXJzaW9uIG51bWJlciBmb3IgSUUsIG9yIE5hTiBpZiBVQSBpcyBub3QgSUUuXG4gICAganFMaXRlLCAgICAgICAgICAgLy8gZGVsYXkgYmluZGluZyBzaW5jZSBqUXVlcnkgY291bGQgYmUgbG9hZGVkIGFmdGVyIHVzLlxuICAgIGpRdWVyeSwgICAgICAgICAgIC8vIGRlbGF5IGJpbmRpbmdcbiAgICBzbGljZSAgICAgICAgICAgICA9IFtdLnNsaWNlLFxuICAgIHNwbGljZSAgICAgICAgICAgID0gW10uc3BsaWNlLFxuICAgIHB1c2ggICAgICAgICAgICAgID0gW10ucHVzaCxcbiAgICB0b1N0cmluZyAgICAgICAgICA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsXG4gICAgZ2V0UHJvdG90eXBlT2YgICAgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gICAgbmdNaW5FcnIgICAgICAgICAgPSBtaW5FcnIoJ25nJyksXG5cbiAgICAvKiogQG5hbWUgYW5ndWxhciAqL1xuICAgIGFuZ3VsYXIgICAgICAgICAgID0gd2luZG93LmFuZ3VsYXIgfHwgKHdpbmRvdy5hbmd1bGFyID0ge30pLFxuICAgIGFuZ3VsYXJNb2R1bGUsXG4gICAgdWlkICAgICAgICAgICAgICAgPSAwO1xuXG4vLyBTdXBwb3J0OiBJRSA5LTExIG9ubHlcbi8qKlxuICogZG9jdW1lbnRNb2RlIGlzIGFuIElFLW9ubHkgcHJvcGVydHlcbiAqIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9jYzE5Njk4OCh2PXZzLjg1KS5hc3B4XG4gKi9cbm1zaWUgPSB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xuXG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgYG9iamAgaXMgYW4gYXJyYXkgb3IgYXJyYXktbGlrZSBvYmplY3QgKE5vZGVMaXN0LCBBcmd1bWVudHMsXG4gKiAgICAgICAgICAgICAgICAgICBTdHJpbmcgLi4uKVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZShvYmopIHtcblxuICAvLyBgbnVsbGAsIGB1bmRlZmluZWRgIGFuZCBgd2luZG93YCBhcmUgbm90IGFycmF5LWxpa2VcbiAgaWYgKG9iaiA9PSBudWxsIHx8IGlzV2luZG93KG9iaikpIHJldHVybiBmYWxzZTtcblxuICAvLyBhcnJheXMsIHN0cmluZ3MgYW5kIGpRdWVyeS9qcUxpdGUgb2JqZWN0cyBhcmUgYXJyYXkgbGlrZVxuICAvLyAqIGpxTGl0ZSBpcyBlaXRoZXIgdGhlIGpRdWVyeSBvciBqcUxpdGUgY29uc3RydWN0b3IgZnVuY3Rpb25cbiAgLy8gKiB3ZSBoYXZlIHRvIGNoZWNrIHRoZSBleGlzdGVuY2Ugb2YganFMaXRlIGZpcnN0IGFzIHRoaXMgbWV0aG9kIGlzIGNhbGxlZFxuICAvLyAgIHZpYSB0aGUgZm9yRWFjaCBtZXRob2Qgd2hlbiBjb25zdHJ1Y3RpbmcgdGhlIGpxTGl0ZSBvYmplY3QgaW4gdGhlIGZpcnN0IHBsYWNlXG4gIGlmIChpc0FycmF5KG9iaikgfHwgaXNTdHJpbmcob2JqKSB8fCAoanFMaXRlICYmIG9iaiBpbnN0YW5jZW9mIGpxTGl0ZSkpIHJldHVybiB0cnVlO1xuXG4gIC8vIFN1cHBvcnQ6IGlPUyA4LjIgKG5vdCByZXByb2R1Y2libGUgaW4gc2ltdWxhdG9yKVxuICAvLyBcImxlbmd0aFwiIGluIG9iaiB1c2VkIHRvIHByZXZlbnQgSklUIGVycm9yIChnaC0xMTUwOClcbiAgdmFyIGxlbmd0aCA9ICdsZW5ndGgnIGluIE9iamVjdChvYmopICYmIG9iai5sZW5ndGg7XG5cbiAgLy8gTm9kZUxpc3Qgb2JqZWN0cyAod2l0aCBgaXRlbWAgbWV0aG9kKSBhbmRcbiAgLy8gb3RoZXIgb2JqZWN0cyB3aXRoIHN1aXRhYmxlIGxlbmd0aCBjaGFyYWN0ZXJpc3RpY3MgYXJlIGFycmF5LWxpa2VcbiAgcmV0dXJuIGlzTnVtYmVyKGxlbmd0aCkgJiYgKGxlbmd0aCA+PSAwICYmIChsZW5ndGggLSAxKSBpbiBvYmogfHwgdHlwZW9mIG9iai5pdGVtID09PSAnZnVuY3Rpb24nKTtcblxufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5mb3JFYWNoXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSW52b2tlcyB0aGUgYGl0ZXJhdG9yYCBmdW5jdGlvbiBvbmNlIGZvciBlYWNoIGl0ZW0gaW4gYG9iamAgY29sbGVjdGlvbiwgd2hpY2ggY2FuIGJlIGVpdGhlciBhblxuICogb2JqZWN0IG9yIGFuIGFycmF5LiBUaGUgYGl0ZXJhdG9yYCBmdW5jdGlvbiBpcyBpbnZva2VkIHdpdGggYGl0ZXJhdG9yKHZhbHVlLCBrZXksIG9iailgLCB3aGVyZSBgdmFsdWVgXG4gKiBpcyB0aGUgdmFsdWUgb2YgYW4gb2JqZWN0IHByb3BlcnR5IG9yIGFuIGFycmF5IGVsZW1lbnQsIGBrZXlgIGlzIHRoZSBvYmplY3QgcHJvcGVydHkga2V5IG9yXG4gKiBhcnJheSBlbGVtZW50IGluZGV4IGFuZCBvYmogaXMgdGhlIGBvYmpgIGl0c2VsZi4gU3BlY2lmeWluZyBhIGBjb250ZXh0YCBmb3IgdGhlIGZ1bmN0aW9uIGlzIG9wdGlvbmFsLlxuICpcbiAqIEl0IGlzIHdvcnRoIG5vdGluZyB0aGF0IGAuZm9yRWFjaGAgZG9lcyBub3QgaXRlcmF0ZSBvdmVyIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGJlY2F1c2UgaXQgZmlsdGVyc1xuICogdXNpbmcgdGhlIGBoYXNPd25Qcm9wZXJ0eWAgbWV0aG9kLlxuICpcbiAqIFVubGlrZSBFUzI2MidzXG4gKiBbQXJyYXkucHJvdG90eXBlLmZvckVhY2hdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS40LjQuMTgpLFxuICogcHJvdmlkaW5nICd1bmRlZmluZWQnIG9yICdudWxsJyB2YWx1ZXMgZm9yIGBvYmpgIHdpbGwgbm90IHRocm93IGEgVHlwZUVycm9yLCBidXQgcmF0aGVyIGp1c3RcbiAqIHJldHVybiB0aGUgdmFsdWUgcHJvdmlkZWQuXG4gKlxuICAgYGBganNcbiAgICAgdmFyIHZhbHVlcyA9IHtuYW1lOiAnbWlza28nLCBnZW5kZXI6ICdtYWxlJ307XG4gICAgIHZhciBsb2cgPSBbXTtcbiAgICAgYW5ndWxhci5mb3JFYWNoKHZhbHVlcywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgIHRoaXMucHVzaChrZXkgKyAnOiAnICsgdmFsdWUpO1xuICAgICB9LCBsb2cpO1xuICAgICBleHBlY3QobG9nKS50b0VxdWFsKFsnbmFtZTogbWlza28nLCAnZ2VuZGVyOiBtYWxlJ10pO1xuICAgYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBPYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0b3IgSXRlcmF0b3IgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge09iamVjdD19IGNvbnRleHQgT2JqZWN0IHRvIGJlY29tZSBjb250ZXh0IChgdGhpc2ApIGZvciB0aGUgaXRlcmF0b3IgZnVuY3Rpb24uXG4gKiBAcmV0dXJucyB7T2JqZWN0fEFycmF5fSBSZWZlcmVuY2UgdG8gYG9iamAuXG4gKi9cblxuZnVuY3Rpb24gZm9yRWFjaChvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gIHZhciBrZXksIGxlbmd0aDtcbiAgaWYgKG9iaikge1xuICAgIGlmIChpc0Z1bmN0aW9uKG9iaikpIHtcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpZiAoa2V5ICE9PSAncHJvdG90eXBlJyAmJiBrZXkgIT09ICdsZW5ndGgnICYmIGtleSAhPT0gJ25hbWUnICYmIG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KG9iaikgfHwgaXNBcnJheUxpa2Uob2JqKSkge1xuICAgICAgdmFyIGlzUHJpbWl0aXZlID0gdHlwZW9mIG9iaiAhPT0gJ29iamVjdCc7XG4gICAgICBmb3IgKGtleSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGtleSA8IGxlbmd0aDsga2V5KyspIHtcbiAgICAgICAgaWYgKGlzUHJpbWl0aXZlIHx8IGtleSBpbiBvYmopIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9iai5mb3JFYWNoICYmIG9iai5mb3JFYWNoICE9PSBmb3JFYWNoKSB7XG4gICAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0LCBvYmopO1xuICAgIH0gZWxzZSBpZiAoaXNCbGFua09iamVjdChvYmopKSB7XG4gICAgICAvLyBjcmVhdGVNYXAoKSBmYXN0IHBhdGggLS0tIFNhZmUgdG8gYXZvaWQgaGFzT3duUHJvcGVydHkgY2hlY2sgYmVjYXVzZSBwcm90b3R5cGUgY2hhaW4gaXMgZW1wdHlcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqLmhhc093blByb3BlcnR5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBTbG93IHBhdGggZm9yIG9iamVjdHMgaW5oZXJpdGluZyBPYmplY3QucHJvdG90eXBlLCBoYXNPd25Qcm9wZXJ0eSBjaGVjayBuZWVkZWRcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2xvdyBwYXRoIGZvciBvYmplY3RzIHdoaWNoIGRvIG5vdCBoYXZlIGEgbWV0aG9kIGBoYXNPd25Qcm9wZXJ0eWBcbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaFNvcnRlZChvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKS5zb3J0KCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2tleXNbaV1dLCBrZXlzW2ldKTtcbiAgfVxuICByZXR1cm4ga2V5cztcbn1cblxuXG4vKipcbiAqIHdoZW4gdXNpbmcgZm9yRWFjaCB0aGUgcGFyYW1zIGFyZSB2YWx1ZSwga2V5LCBidXQgaXQgaXMgb2Z0ZW4gdXNlZnVsIHRvIGhhdmUga2V5LCB2YWx1ZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCAqKX0gaXRlcmF0b3JGblxuICogQHJldHVybnMge2Z1bmN0aW9uKCosIHN0cmluZyl9XG4gKi9cbmZ1bmN0aW9uIHJldmVyc2VQYXJhbXMoaXRlcmF0b3JGbikge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGtleSkge2l0ZXJhdG9yRm4oa2V5LCB2YWx1ZSk7fTtcbn1cblxuLyoqXG4gKiBBIGNvbnNpc3RlbnQgd2F5IG9mIGNyZWF0aW5nIHVuaXF1ZSBJRHMgaW4gYW5ndWxhci5cbiAqXG4gKiBVc2luZyBzaW1wbGUgbnVtYmVycyBhbGxvd3MgdXMgdG8gZ2VuZXJhdGUgMjguNiBtaWxsaW9uIHVuaXF1ZSBpZHMgcGVyIHNlY29uZCBmb3IgMTAgeWVhcnMgYmVmb3JlXG4gKiB3ZSBoaXQgbnVtYmVyIHByZWNpc2lvbiBpc3N1ZXMgaW4gSmF2YVNjcmlwdC5cbiAqXG4gKiBNYXRoLnBvdygyLDUzKSAvIDYwIC8gNjAgLyAyNCAvIDM2NSAvIDEwID0gMjguNk1cbiAqXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhbiB1bmlxdWUgYWxwaGEtbnVtZXJpYyBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gbmV4dFVpZCgpIHtcbiAgcmV0dXJuICsrdWlkO1xufVxuXG5cbi8qKlxuICogU2V0IG9yIGNsZWFyIHRoZSBoYXNoa2V5IGZvciBhbiBvYmplY3QuXG4gKiBAcGFyYW0gb2JqIG9iamVjdFxuICogQHBhcmFtIGggdGhlIGhhc2hrZXkgKCF0cnV0aHkgdG8gZGVsZXRlIHRoZSBoYXNoa2V5KVxuICovXG5mdW5jdGlvbiBzZXRIYXNoS2V5KG9iaiwgaCkge1xuICBpZiAoaCkge1xuICAgIG9iai4kJGhhc2hLZXkgPSBoO1xuICB9IGVsc2Uge1xuICAgIGRlbGV0ZSBvYmouJCRoYXNoS2V5O1xuICB9XG59XG5cblxuZnVuY3Rpb24gYmFzZUV4dGVuZChkc3QsIG9ianMsIGRlZXApIHtcbiAgdmFyIGggPSBkc3QuJCRoYXNoS2V5O1xuXG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IG9ianMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBvYmogPSBvYmpzW2ldO1xuICAgIGlmICghaXNPYmplY3Qob2JqKSAmJiAhaXNGdW5jdGlvbihvYmopKSBjb250aW51ZTtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0ga2V5cy5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tqXTtcbiAgICAgIHZhciBzcmMgPSBvYmpba2V5XTtcblxuICAgICAgaWYgKGRlZXAgJiYgaXNPYmplY3Qoc3JjKSkge1xuICAgICAgICBpZiAoaXNEYXRlKHNyYykpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IG5ldyBEYXRlKHNyYy52YWx1ZU9mKCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzUmVnRXhwKHNyYykpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IG5ldyBSZWdFeHAoc3JjKTtcbiAgICAgICAgfSBlbHNlIGlmIChzcmMubm9kZU5hbWUpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IHNyYy5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50KHNyYykpIHtcbiAgICAgICAgICBkc3Rba2V5XSA9IHNyYy5jbG9uZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghaXNPYmplY3QoZHN0W2tleV0pKSBkc3Rba2V5XSA9IGlzQXJyYXkoc3JjKSA/IFtdIDoge307XG4gICAgICAgICAgYmFzZUV4dGVuZChkc3Rba2V5XSwgW3NyY10sIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkc3Rba2V5XSA9IHNyYztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRIYXNoS2V5KGRzdCwgaCk7XG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmV4dGVuZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEV4dGVuZHMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdCBgZHN0YCBieSBjb3B5aW5nIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgZnJvbSB0aGUgYHNyY2Agb2JqZWN0KHMpXG4gKiB0byBgZHN0YC4gWW91IGNhbiBzcGVjaWZ5IG11bHRpcGxlIGBzcmNgIG9iamVjdHMuIElmIHlvdSB3YW50IHRvIHByZXNlcnZlIG9yaWdpbmFsIG9iamVjdHMsIHlvdSBjYW4gZG8gc29cbiAqIGJ5IHBhc3NpbmcgYW4gZW1wdHkgb2JqZWN0IGFzIHRoZSB0YXJnZXQ6IGB2YXIgb2JqZWN0ID0gYW5ndWxhci5leHRlbmQoe30sIG9iamVjdDEsIG9iamVjdDIpYC5cbiAqXG4gKiAqKk5vdGU6KiogS2VlcCBpbiBtaW5kIHRoYXQgYGFuZ3VsYXIuZXh0ZW5kYCBkb2VzIG5vdCBzdXBwb3J0IHJlY3Vyc2l2ZSBtZXJnZSAoZGVlcCBjb3B5KS4gVXNlXG4gKiB7QGxpbmsgYW5ndWxhci5tZXJnZX0gZm9yIHRoaXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRzdCBEZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gc3JjIFNvdXJjZSBvYmplY3QocykuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZWZlcmVuY2UgdG8gYGRzdGAuXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChkc3QpIHtcbiAgcmV0dXJuIGJhc2VFeHRlbmQoZHN0LCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIGZhbHNlKTtcbn1cblxuXG4vKipcbiogQG5nZG9jIGZ1bmN0aW9uXG4qIEBuYW1lIGFuZ3VsYXIubWVyZ2VcbiogQG1vZHVsZSBuZ1xuKiBAa2luZCBmdW5jdGlvblxuKlxuKiBAZGVzY3JpcHRpb25cbiogRGVlcGx5IGV4dGVuZHMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdCBgZHN0YCBieSBjb3B5aW5nIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgZnJvbSB0aGUgYHNyY2Agb2JqZWN0KHMpXG4qIHRvIGBkc3RgLiBZb3UgY2FuIHNwZWNpZnkgbXVsdGlwbGUgYHNyY2Agb2JqZWN0cy4gSWYgeW91IHdhbnQgdG8gcHJlc2VydmUgb3JpZ2luYWwgb2JqZWN0cywgeW91IGNhbiBkbyBzb1xuKiBieSBwYXNzaW5nIGFuIGVtcHR5IG9iamVjdCBhcyB0aGUgdGFyZ2V0OiBgdmFyIG9iamVjdCA9IGFuZ3VsYXIubWVyZ2Uoe30sIG9iamVjdDEsIG9iamVjdDIpYC5cbipcbiogVW5saWtlIHtAbGluayBhbmd1bGFyLmV4dGVuZCBleHRlbmQoKX0sIGBtZXJnZSgpYCByZWN1cnNpdmVseSBkZXNjZW5kcyBpbnRvIG9iamVjdCBwcm9wZXJ0aWVzIG9mIHNvdXJjZVxuKiBvYmplY3RzLCBwZXJmb3JtaW5nIGEgZGVlcCBjb3B5LlxuKlxuKiBAZGVwcmVjYXRlZFxuKiBzaW5jZVZlcnNpb249XCIxLjYuNVwiXG4qIFRoaXMgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCwgYnV0IHdpbGwgbm90IGJlIHJlbW92ZWQgaW4gdGhlIDEueCBsaWZlY3ljbGUuXG4qIFRoZXJlIGFyZSBlZGdlIGNhc2VzIChzZWUge0BsaW5rIGFuZ3VsYXIubWVyZ2Uja25vd24taXNzdWVzIGtub3duIGlzc3Vlc30pIHRoYXQgYXJlIG5vdFxuKiBzdXBwb3J0ZWQgYnkgdGhpcyBmdW5jdGlvbi4gV2Ugc3VnZ2VzdFxuKiB1c2luZyBbbG9kYXNoJ3MgbWVyZ2UoKV0oaHR0cHM6Ly9sb2Rhc2guY29tL2RvY3MvNC4xNy40I21lcmdlKSBpbnN0ZWFkLlxuKlxuKiBAa25vd25Jc3N1ZVxuKiBUaGlzIGlzIGEgbGlzdCBvZiAoa25vd24pIG9iamVjdCB0eXBlcyB0aGF0IGFyZSBub3QgaGFuZGxlZCBjb3JyZWN0bHkgYnkgdGhpcyBmdW5jdGlvbjpcbiogLSBbYEJsb2JgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYilcbiogLSBbYE1lZGlhU3RyZWFtYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL01lZGlhU3RyZWFtKVxuKiAtIFtgQ2FudmFzR3JhZGllbnRgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQ2FudmFzR3JhZGllbnQpXG4qIC0gQW5ndWxhckpTIHtAbGluayAkcm9vdFNjb3BlLlNjb3BlIHNjb3Blc307XG4qXG4qIEBwYXJhbSB7T2JqZWN0fSBkc3QgRGVzdGluYXRpb24gb2JqZWN0LlxuKiBAcGFyYW0gey4uLk9iamVjdH0gc3JjIFNvdXJjZSBvYmplY3QocykuXG4qIEByZXR1cm5zIHtPYmplY3R9IFJlZmVyZW5jZSB0byBgZHN0YC5cbiovXG5mdW5jdGlvbiBtZXJnZShkc3QpIHtcbiAgcmV0dXJuIGJhc2VFeHRlbmQoZHN0LCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIHRydWUpO1xufVxuXG5cblxuZnVuY3Rpb24gdG9JbnQoc3RyKSB7XG4gIHJldHVybiBwYXJzZUludChzdHIsIDEwKTtcbn1cblxudmFyIGlzTnVtYmVyTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIGlzTnVtYmVyTmFOKG51bSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gIHJldHVybiBudW0gIT09IG51bTtcbn07XG5cblxuZnVuY3Rpb24gaW5oZXJpdChwYXJlbnQsIGV4dHJhKSB7XG4gIHJldHVybiBleHRlbmQoT2JqZWN0LmNyZWF0ZShwYXJlbnQpLCBleHRyYSk7XG59XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLm5vb3BcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIGZ1bmN0aW9uIHRoYXQgcGVyZm9ybXMgbm8gb3BlcmF0aW9ucy4gVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZnVsIHdoZW4gd3JpdGluZyBjb2RlIGluIHRoZVxuICogZnVuY3Rpb25hbCBzdHlsZS5cbiAgIGBgYGpzXG4gICAgIGZ1bmN0aW9uIGZvbyhjYWxsYmFjaykge1xuICAgICAgIHZhciByZXN1bHQgPSBjYWxjdWxhdGVSZXN1bHQoKTtcbiAgICAgICAoY2FsbGJhY2sgfHwgYW5ndWxhci5ub29wKShyZXN1bHQpO1xuICAgICB9XG4gICBgYGBcbiAqL1xuZnVuY3Rpb24gbm9vcCgpIHt9XG5ub29wLiRpbmplY3QgPSBbXTtcblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pZGVudGl0eVxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGl0cyBmaXJzdCBhcmd1bWVudC4gVGhpcyBmdW5jdGlvbiBpcyB1c2VmdWwgd2hlbiB3cml0aW5nIGNvZGUgaW4gdGhlXG4gKiBmdW5jdGlvbmFsIHN0eWxlLlxuICpcbiAgIGBgYGpzXG4gICBmdW5jdGlvbiB0cmFuc2Zvcm1lcih0cmFuc2Zvcm1hdGlvbkZuLCB2YWx1ZSkge1xuICAgICByZXR1cm4gKHRyYW5zZm9ybWF0aW9uRm4gfHwgYW5ndWxhci5pZGVudGl0eSkodmFsdWUpO1xuICAgfTtcblxuICAgLy8gRS5nLlxuICAgZnVuY3Rpb24gZ2V0UmVzdWx0KGZuLCBpbnB1dCkge1xuICAgICByZXR1cm4gKGZuIHx8IGFuZ3VsYXIuaWRlbnRpdHkpKGlucHV0KTtcbiAgIH07XG5cbiAgIGdldFJlc3VsdChmdW5jdGlvbihuKSB7IHJldHVybiBuICogMjsgfSwgMjEpOyAgIC8vIHJldHVybnMgNDJcbiAgIGdldFJlc3VsdChudWxsLCAyMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybnMgMjFcbiAgIGdldFJlc3VsdCh1bmRlZmluZWQsIDIxKTsgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybnMgMjFcbiAgIGBgYFxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgdG8gYmUgcmV0dXJuZWQuXG4gKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIHBhc3NlZCBpbi5cbiAqL1xuZnVuY3Rpb24gaWRlbnRpdHkoJCkge3JldHVybiAkO31cbmlkZW50aXR5LiRpbmplY3QgPSBbXTtcblxuXG5mdW5jdGlvbiB2YWx1ZUZuKHZhbHVlKSB7cmV0dXJuIGZ1bmN0aW9uIHZhbHVlUmVmKCkge3JldHVybiB2YWx1ZTt9O31cblxuZnVuY3Rpb24gaGFzQ3VzdG9tVG9TdHJpbmcob2JqKSB7XG4gIHJldHVybiBpc0Z1bmN0aW9uKG9iai50b1N0cmluZykgJiYgb2JqLnRvU3RyaW5nICE9PSB0b1N0cmluZztcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc1VuZGVmaW5lZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgdW5kZWZpbmVkLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyB1bmRlZmluZWQuXG4gKi9cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlKSB7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCc7fVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzRGVmaW5lZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgZGVmaW5lZC5cbiAqL1xuZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKSB7cmV0dXJuIHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCc7fVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzT2JqZWN0XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgT2JqZWN0YC4gVW5saWtlIGB0eXBlb2ZgIGluIEphdmFTY3JpcHQsIGBudWxsYHMgYXJlIG5vdFxuICogY29uc2lkZXJlZCB0byBiZSBvYmplY3RzLiBOb3RlIHRoYXQgSmF2YVNjcmlwdCBhcnJheXMgYXJlIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIGBPYmplY3RgIGJ1dCBub3QgYG51bGxgLlxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBodHRwOi8vanNwZXJmLmNvbS9pc29iamVjdDRcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCc7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhIG51bGwgcHJvdG90eXBlXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhbiBgT2JqZWN0YCB3aXRoIGEgbnVsbCBwcm90b3R5cGVcbiAqL1xuZnVuY3Rpb24gaXNCbGFua09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAhZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzU3RyaW5nXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIGBTdHJpbmdgLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBTdHJpbmdgLlxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge3JldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO31cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc051bWJlclxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBgTnVtYmVyYC5cbiAqXG4gKiBUaGlzIGluY2x1ZGVzIHRoZSBcInNwZWNpYWxcIiBudW1iZXJzIGBOYU5gLCBgK0luZmluaXR5YCBhbmQgYC1JbmZpbml0eWAuXG4gKlxuICogSWYgeW91IHdpc2ggdG8gZXhjbHVkZSB0aGVzZSB0aGVuIHlvdSBjYW4gdXNlIHRoZSBuYXRpdmVcbiAqIFtgaXNGaW5pdGUnXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9pc0Zpbml0ZSlcbiAqIG1ldGhvZC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgTnVtYmVyYC5cbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIodmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJzt9XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNEYXRlXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHZhbHVlIGlzIGEgZGF0ZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgRGF0ZWAuXG4gKi9cbmZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc0FycmF5XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgQXJyYXlgLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhbiBgQXJyYXlgLlxuICovXG5mdW5jdGlvbiBpc0FycmF5KGFycikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpIHx8IGFyciBpbnN0YW5jZW9mIEFycmF5O1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgRXJyb3JgLlxuICogTG9vc2VseSBiYXNlZCBvbiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9pc2Vycm9yXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIGBFcnJvcmAuXG4gKi9cbmZ1bmN0aW9uIGlzRXJyb3IodmFsdWUpIHtcbiAgdmFyIHRhZyA9IHRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICBzd2l0Y2ggKHRhZykge1xuICAgIGNhc2UgJ1tvYmplY3QgRXJyb3JdJzogcmV0dXJuIHRydWU7XG4gICAgY2FzZSAnW29iamVjdCBFeGNlcHRpb25dJzogcmV0dXJuIHRydWU7XG4gICAgY2FzZSAnW29iamVjdCBET01FeGNlcHRpb25dJzogcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDogcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNGdW5jdGlvblxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBgRnVuY3Rpb25gLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBGdW5jdGlvbmAuXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO31cblxuXG4vKipcbiAqIERldGVybWluZXMgaWYgYSB2YWx1ZSBpcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBSZWdFeHBgLlxuICovXG5mdW5jdGlvbiBpc1JlZ0V4cCh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIGlmIGBvYmpgIGlzIGEgd2luZG93IG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBvYmogT2JqZWN0IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb2JqYCBpcyBhIHdpbmRvdyBvYmouXG4gKi9cbmZ1bmN0aW9uIGlzV2luZG93KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai53aW5kb3cgPT09IG9iajtcbn1cblxuXG5mdW5jdGlvbiBpc1Njb3BlKG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai4kZXZhbEFzeW5jICYmIG9iai4kd2F0Y2g7XG59XG5cblxuZnVuY3Rpb24gaXNGaWxlKG9iaikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBGaWxlXSc7XG59XG5cblxuZnVuY3Rpb24gaXNGb3JtRGF0YShvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgRm9ybURhdGFdJztcbn1cblxuXG5mdW5jdGlvbiBpc0Jsb2Iob2JqKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEJsb2JdJztcbn1cblxuXG5mdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nO1xufVxuXG5cbmZ1bmN0aW9uIGlzUHJvbWlzZUxpa2Uob2JqKSB7XG4gIHJldHVybiBvYmogJiYgaXNGdW5jdGlvbihvYmoudGhlbik7XG59XG5cblxudmFyIFRZUEVEX0FSUkFZX1JFR0VYUCA9IC9eXFxbb2JqZWN0ICg/OlVpbnQ4fFVpbnQ4Q2xhbXBlZHxVaW50MTZ8VWludDMyfEludDh8SW50MTZ8SW50MzJ8RmxvYXQzMnxGbG9hdDY0KUFycmF5XSQvO1xuZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiBpc051bWJlcih2YWx1ZS5sZW5ndGgpICYmIFRZUEVEX0FSUkFZX1JFR0VYUC50ZXN0KHRvU3RyaW5nLmNhbGwodmFsdWUpKTtcbn1cblxuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcihvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcbn1cblxuXG52YXIgdHJpbSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBpc1N0cmluZyh2YWx1ZSkgPyB2YWx1ZS50cmltKCkgOiB2YWx1ZTtcbn07XG5cbi8vIENvcGllZCBmcm9tOlxuLy8gaHR0cDovL2RvY3MuY2xvc3VyZS1saWJyYXJ5Lmdvb2dsZWNvZGUuY29tL2dpdC9sb2NhbF9jbG9zdXJlX2dvb2dfc3RyaW5nX3N0cmluZy5qcy5zb3VyY2UuaHRtbCNsaW5lMTAyMVxuLy8gUHJlcmVxOiBzIGlzIGEgc3RyaW5nLlxudmFyIGVzY2FwZUZvclJlZ2V4cCA9IGZ1bmN0aW9uKHMpIHtcbiAgcmV0dXJuIHNcbiAgICAucmVwbGFjZSgvKFstKClbXFxde30rPyouJF58LDojPCFcXFxcXSkvZywgJ1xcXFwkMScpXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAucmVwbGFjZSgvXFx4MDgvZywgJ1xcXFx4MDgnKTtcbn07XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNFbGVtZW50XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIERPTSBlbGVtZW50IChvciB3cmFwcGVkIGpRdWVyeSBlbGVtZW50KS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBET00gZWxlbWVudCAob3Igd3JhcHBlZCBqUXVlcnkgZWxlbWVudCkuXG4gKi9cbmZ1bmN0aW9uIGlzRWxlbWVudChub2RlKSB7XG4gIHJldHVybiAhIShub2RlICYmXG4gICAgKG5vZGUubm9kZU5hbWUgIC8vIFdlIGFyZSBhIGRpcmVjdCBlbGVtZW50LlxuICAgIHx8IChub2RlLnByb3AgJiYgbm9kZS5hdHRyICYmIG5vZGUuZmluZCkpKTsgIC8vIFdlIGhhdmUgYW4gb24gYW5kIGZpbmQgbWV0aG9kIHBhcnQgb2YgalF1ZXJ5IEFQSS5cbn1cblxuLyoqXG4gKiBAcGFyYW0gc3RyICdrZXkxLGtleTIsLi4uJ1xuICogQHJldHVybnMge29iamVjdH0gaW4gdGhlIGZvcm0gb2Yge2tleTE6dHJ1ZSwga2V5Mjp0cnVlLCAuLi59XG4gKi9cbmZ1bmN0aW9uIG1ha2VNYXAoc3RyKSB7XG4gIHZhciBvYmogPSB7fSwgaXRlbXMgPSBzdHIuc3BsaXQoJywnKSwgaTtcbiAgZm9yIChpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgb2JqW2l0ZW1zW2ldXSA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuXG5mdW5jdGlvbiBub2RlTmFtZV8oZWxlbWVudCkge1xuICByZXR1cm4gbG93ZXJjYXNlKGVsZW1lbnQubm9kZU5hbWUgfHwgKGVsZW1lbnRbMF0gJiYgZWxlbWVudFswXS5ub2RlTmFtZSkpO1xufVxuXG5mdW5jdGlvbiBpbmNsdWRlcyhhcnJheSwgb2JqKSB7XG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGFycmF5LCBvYmopICE9PSAtMTtcbn1cblxuZnVuY3Rpb24gYXJyYXlSZW1vdmUoYXJyYXksIHZhbHVlKSB7XG4gIHZhciBpbmRleCA9IGFycmF5LmluZGV4T2YodmFsdWUpO1xuICBpZiAoaW5kZXggPj0gMCkge1xuICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7XG4gIH1cbiAgcmV0dXJuIGluZGV4O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5jb3B5XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiBgc291cmNlYCwgd2hpY2ggc2hvdWxkIGJlIGFuIG9iamVjdCBvciBhbiBhcnJheS5cbiAqXG4gKiAqIElmIG5vIGRlc3RpbmF0aW9uIGlzIHN1cHBsaWVkLCBhIGNvcHkgb2YgdGhlIG9iamVjdCBvciBhcnJheSBpcyBjcmVhdGVkLlxuICogKiBJZiBhIGRlc3RpbmF0aW9uIGlzIHByb3ZpZGVkLCBhbGwgb2YgaXRzIGVsZW1lbnRzIChmb3IgYXJyYXlzKSBvciBwcm9wZXJ0aWVzIChmb3Igb2JqZWN0cylcbiAqICAgYXJlIGRlbGV0ZWQgYW5kIHRoZW4gYWxsIGVsZW1lbnRzL3Byb3BlcnRpZXMgZnJvbSB0aGUgc291cmNlIGFyZSBjb3BpZWQgdG8gaXQuXG4gKiAqIElmIGBzb3VyY2VgIGlzIG5vdCBhbiBvYmplY3Qgb3IgYXJyYXkgKGluYy4gYG51bGxgIGFuZCBgdW5kZWZpbmVkYCksIGBzb3VyY2VgIGlzIHJldHVybmVkLlxuICogKiBJZiBgc291cmNlYCBpcyBpZGVudGljYWwgdG8gYGRlc3RpbmF0aW9uYCBhbiBleGNlcHRpb24gd2lsbCBiZSB0aHJvd24uXG4gKlxuICogPGJyIC8+XG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogICBPbmx5IGVudW1lcmFibGUgcHJvcGVydGllcyBhcmUgdGFrZW4gaW50byBhY2NvdW50LiBOb24tZW51bWVyYWJsZSBwcm9wZXJ0aWVzIChib3RoIG9uIGBzb3VyY2VgXG4gKiAgIGFuZCBvbiBgZGVzdGluYXRpb25gKSB3aWxsIGJlIGlnbm9yZWQuXG4gKiA8L2Rpdj5cbiAqXG4gKiBAcGFyYW0geyp9IHNvdXJjZSBUaGUgc291cmNlIHRoYXQgd2lsbCBiZSB1c2VkIHRvIG1ha2UgYSBjb3B5LlxuICogICAgICAgICAgICAgICAgICAgQ2FuIGJlIGFueSB0eXBlLCBpbmNsdWRpbmcgcHJpbWl0aXZlcywgYG51bGxgLCBhbmQgYHVuZGVmaW5lZGAuXG4gKiBAcGFyYW0geyhPYmplY3R8QXJyYXkpPX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gaW50byB3aGljaCB0aGUgc291cmNlIGlzIGNvcGllZC4gSWZcbiAqICAgICBwcm92aWRlZCwgbXVzdCBiZSBvZiB0aGUgc2FtZSB0eXBlIGFzIGBzb3VyY2VgLlxuICogQHJldHVybnMgeyp9IFRoZSBjb3B5IG9yIHVwZGF0ZWQgYGRlc3RpbmF0aW9uYCwgaWYgYGRlc3RpbmF0aW9uYCB3YXMgc3BlY2lmaWVkLlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlIG1vZHVsZT1cImNvcHlFeGFtcGxlXCIgbmFtZT1cImFuZ3VsYXItY29weVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8Zm9ybSBub3ZhbGlkYXRlIGNsYXNzPVwic2ltcGxlLWZvcm1cIj5cbiAgICAgICAgICA8bGFiZWw+TmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIiAvPjwvbGFiZWw+PGJyIC8+XG4gICAgICAgICAgPGxhYmVsPkFnZTogIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJ1c2VyLmFnZVwiIC8+PC9sYWJlbD48YnIgLz5cbiAgICAgICAgICBHZW5kZXI6IDxsYWJlbD48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJ1c2VyLmdlbmRlclwiIHZhbHVlPVwibWFsZVwiIC8+bWFsZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwidXNlci5nZW5kZXJcIiB2YWx1ZT1cImZlbWFsZVwiIC8+ZmVtYWxlPC9sYWJlbD48YnIgLz5cbiAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwicmVzZXQoKVwiPlJFU0VUPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInVwZGF0ZSh1c2VyKVwiPlNBVkU8L2J1dHRvbj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICA8cHJlPmZvcm0gPSB7e3VzZXIgfCBqc29ufX08L3ByZT5cbiAgICAgICAgPHByZT5sZWFkZXIgPSB7e2xlYWRlciB8IGpzb259fTwvcHJlPlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgIC8vIE1vZHVsZTogY29weUV4YW1wbGVcbiAgICAgIGFuZ3VsYXIuXG4gICAgICAgIG1vZHVsZSgnY29weUV4YW1wbGUnLCBbXSkuXG4gICAgICAgIGNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUubGVhZGVyID0ge307XG5cbiAgICAgICAgICAkc2NvcGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIEV4YW1wbGUgd2l0aCAxIGFyZ3VtZW50XG4gICAgICAgICAgICAkc2NvcGUudXNlciA9IGFuZ3VsYXIuY29weSgkc2NvcGUubGVhZGVyKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgICAgIC8vIEV4YW1wbGUgd2l0aCAyIGFyZ3VtZW50c1xuICAgICAgICAgICAgYW5ndWxhci5jb3B5KHVzZXIsICRzY29wZS5sZWFkZXIpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAkc2NvcGUucmVzZXQoKTtcbiAgICAgICAgfV0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiBjb3B5KHNvdXJjZSwgZGVzdGluYXRpb24sIG1heERlcHRoKSB7XG4gIHZhciBzdGFja1NvdXJjZSA9IFtdO1xuICB2YXIgc3RhY2tEZXN0ID0gW107XG4gIG1heERlcHRoID0gaXNWYWxpZE9iamVjdE1heERlcHRoKG1heERlcHRoKSA/IG1heERlcHRoIDogTmFOO1xuXG4gIGlmIChkZXN0aW5hdGlvbikge1xuICAgIGlmIChpc1R5cGVkQXJyYXkoZGVzdGluYXRpb24pIHx8IGlzQXJyYXlCdWZmZXIoZGVzdGluYXRpb24pKSB7XG4gICAgICB0aHJvdyBuZ01pbkVycignY3B0YScsICdDYW5cXCd0IGNvcHkhIFR5cGVkQXJyYXkgZGVzdGluYXRpb24gY2Fubm90IGJlIG11dGF0ZWQuJyk7XG4gICAgfVxuICAgIGlmIChzb3VyY2UgPT09IGRlc3RpbmF0aW9uKSB7XG4gICAgICB0aHJvdyBuZ01pbkVycignY3BpJywgJ0NhblxcJ3QgY29weSEgU291cmNlIGFuZCBkZXN0aW5hdGlvbiBhcmUgaWRlbnRpY2FsLicpO1xuICAgIH1cblxuICAgIC8vIEVtcHR5IHRoZSBkZXN0aW5hdGlvbiBvYmplY3RcbiAgICBpZiAoaXNBcnJheShkZXN0aW5hdGlvbikpIHtcbiAgICAgIGRlc3RpbmF0aW9uLmxlbmd0aCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvckVhY2goZGVzdGluYXRpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleSAhPT0gJyQkaGFzaEtleScpIHtcbiAgICAgICAgICBkZWxldGUgZGVzdGluYXRpb25ba2V5XTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhY2tTb3VyY2UucHVzaChzb3VyY2UpO1xuICAgIHN0YWNrRGVzdC5wdXNoKGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gY29weVJlY3Vyc2Uoc291cmNlLCBkZXN0aW5hdGlvbiwgbWF4RGVwdGgpO1xuICB9XG5cbiAgcmV0dXJuIGNvcHlFbGVtZW50KHNvdXJjZSwgbWF4RGVwdGgpO1xuXG4gIGZ1bmN0aW9uIGNvcHlSZWN1cnNlKHNvdXJjZSwgZGVzdGluYXRpb24sIG1heERlcHRoKSB7XG4gICAgbWF4RGVwdGgtLTtcbiAgICBpZiAobWF4RGVwdGggPCAwKSB7XG4gICAgICByZXR1cm4gJy4uLic7XG4gICAgfVxuICAgIHZhciBoID0gZGVzdGluYXRpb24uJCRoYXNoS2V5O1xuICAgIHZhciBrZXk7XG4gICAgaWYgKGlzQXJyYXkoc291cmNlKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc291cmNlLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgZGVzdGluYXRpb24ucHVzaChjb3B5RWxlbWVudChzb3VyY2VbaV0sIG1heERlcHRoKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0JsYW5rT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIC8vIGNyZWF0ZU1hcCgpIGZhc3QgcGF0aCAtLS0gU2FmZSB0byBhdm9pZCBoYXNPd25Qcm9wZXJ0eSBjaGVjayBiZWNhdXNlIHByb3RvdHlwZSBjaGFpbiBpcyBlbXB0eVxuICAgICAgZm9yIChrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGRlc3RpbmF0aW9uW2tleV0gPSBjb3B5RWxlbWVudChzb3VyY2Vba2V5XSwgbWF4RGVwdGgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc291cmNlICYmIHR5cGVvZiBzb3VyY2UuaGFzT3duUHJvcGVydHkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIFNsb3cgcGF0aCwgd2hpY2ggbXVzdCByZWx5IG9uIGhhc093blByb3BlcnR5XG4gICAgICBmb3IgKGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgZGVzdGluYXRpb25ba2V5XSA9IGNvcHlFbGVtZW50KHNvdXJjZVtrZXldLCBtYXhEZXB0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2xvd2VzdCBwYXRoIC0tLSBoYXNPd25Qcm9wZXJ0eSBjYW4ndCBiZSBjYWxsZWQgYXMgYSBtZXRob2RcbiAgICAgIGZvciAoa2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICBkZXN0aW5hdGlvbltrZXldID0gY29weUVsZW1lbnQoc291cmNlW2tleV0sIG1heERlcHRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzZXRIYXNoS2V5KGRlc3RpbmF0aW9uLCBoKTtcbiAgICByZXR1cm4gZGVzdGluYXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBjb3B5RWxlbWVudChzb3VyY2UsIG1heERlcHRoKSB7XG4gICAgLy8gU2ltcGxlIHZhbHVlc1xuICAgIGlmICghaXNPYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICB9XG5cbiAgICAvLyBBbHJlYWR5IGNvcGllZCB2YWx1ZXNcbiAgICB2YXIgaW5kZXggPSBzdGFja1NvdXJjZS5pbmRleE9mKHNvdXJjZSk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHN0YWNrRGVzdFtpbmRleF07XG4gICAgfVxuXG4gICAgaWYgKGlzV2luZG93KHNvdXJjZSkgfHwgaXNTY29wZShzb3VyY2UpKSB7XG4gICAgICB0aHJvdyBuZ01pbkVycignY3B3cycsXG4gICAgICAgICdDYW5cXCd0IGNvcHkhIE1ha2luZyBjb3BpZXMgb2YgV2luZG93IG9yIFNjb3BlIGluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLicpO1xuICAgIH1cblxuICAgIHZhciBuZWVkc1JlY3Vyc2UgPSBmYWxzZTtcbiAgICB2YXIgZGVzdGluYXRpb24gPSBjb3B5VHlwZShzb3VyY2UpO1xuXG4gICAgaWYgKGRlc3RpbmF0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRlc3RpbmF0aW9uID0gaXNBcnJheShzb3VyY2UpID8gW10gOiBPYmplY3QuY3JlYXRlKGdldFByb3RvdHlwZU9mKHNvdXJjZSkpO1xuICAgICAgbmVlZHNSZWN1cnNlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBzdGFja1NvdXJjZS5wdXNoKHNvdXJjZSk7XG4gICAgc3RhY2tEZXN0LnB1c2goZGVzdGluYXRpb24pO1xuXG4gICAgcmV0dXJuIG5lZWRzUmVjdXJzZVxuICAgICAgPyBjb3B5UmVjdXJzZShzb3VyY2UsIGRlc3RpbmF0aW9uLCBtYXhEZXB0aClcbiAgICAgIDogZGVzdGluYXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBjb3B5VHlwZShzb3VyY2UpIHtcbiAgICBzd2l0Y2ggKHRvU3RyaW5nLmNhbGwoc291cmNlKSkge1xuICAgICAgY2FzZSAnW29iamVjdCBJbnQ4QXJyYXldJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgSW50MTZBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBJbnQzMkFycmF5XSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBGbG9hdDY0QXJyYXldJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgVWludDhBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBVaW50MTZBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBVaW50MzJBcnJheV0nOlxuICAgICAgICByZXR1cm4gbmV3IHNvdXJjZS5jb25zdHJ1Y3Rvcihjb3B5RWxlbWVudChzb3VyY2UuYnVmZmVyKSwgc291cmNlLmJ5dGVPZmZzZXQsIHNvdXJjZS5sZW5ndGgpO1xuXG4gICAgICBjYXNlICdbb2JqZWN0IEFycmF5QnVmZmVyXSc6XG4gICAgICAgIC8vIFN1cHBvcnQ6IElFMTBcbiAgICAgICAgaWYgKCFzb3VyY2Uuc2xpY2UpIHtcbiAgICAgICAgICAvLyBJZiB3ZSdyZSBpbiB0aGlzIGNhc2Ugd2Uga25vdyB0aGUgZW52aXJvbm1lbnQgc3VwcG9ydHMgQXJyYXlCdWZmZXJcbiAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuICAgICAgICAgIHZhciBjb3BpZWQgPSBuZXcgQXJyYXlCdWZmZXIoc291cmNlLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgIG5ldyBVaW50OEFycmF5KGNvcGllZCkuc2V0KG5ldyBVaW50OEFycmF5KHNvdXJjZSkpO1xuICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgICAgICByZXR1cm4gY29waWVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc2xpY2UoMCk7XG5cbiAgICAgIGNhc2UgJ1tvYmplY3QgQm9vbGVhbl0nOlxuICAgICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcbiAgICAgICAgcmV0dXJuIG5ldyBzb3VyY2UuY29uc3RydWN0b3Ioc291cmNlLnZhbHVlT2YoKSk7XG5cbiAgICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG4gICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoc291cmNlLnNvdXJjZSwgc291cmNlLnRvU3RyaW5nKCkubWF0Y2goL1teL10qJC8pWzBdKTtcbiAgICAgICAgcmUubGFzdEluZGV4ID0gc291cmNlLmxhc3RJbmRleDtcbiAgICAgICAgcmV0dXJuIHJlO1xuXG4gICAgICBjYXNlICdbb2JqZWN0IEJsb2JdJzpcbiAgICAgICAgcmV0dXJuIG5ldyBzb3VyY2UuY29uc3RydWN0b3IoW3NvdXJjZV0sIHt0eXBlOiBzb3VyY2UudHlwZX0pO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKHNvdXJjZS5jbG9uZU5vZGUpKSB7XG4gICAgICByZXR1cm4gc291cmNlLmNsb25lTm9kZSh0cnVlKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG5mdW5jdGlvbiBzaW1wbGVDb21wYXJlKGEsIGIpIHsgcmV0dXJuIGEgPT09IGIgfHwgKGEgIT09IGEgJiYgYiAhPT0gYik7IH1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5lcXVhbHNcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXRlcm1pbmVzIGlmIHR3byBvYmplY3RzIG9yIHR3byB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQuIFN1cHBvcnRzIHZhbHVlIHR5cGVzLCByZWd1bGFyXG4gKiBleHByZXNzaW9ucywgYXJyYXlzIGFuZCBvYmplY3RzLlxuICpcbiAqIFR3byBvYmplY3RzIG9yIHZhbHVlcyBhcmUgY29uc2lkZXJlZCBlcXVpdmFsZW50IGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgZm9sbG93aW5nIGlzIHRydWU6XG4gKlxuICogKiBCb3RoIG9iamVjdHMgb3IgdmFsdWVzIHBhc3MgYD09PWAgY29tcGFyaXNvbi5cbiAqICogQm90aCBvYmplY3RzIG9yIHZhbHVlcyBhcmUgb2YgdGhlIHNhbWUgdHlwZSBhbmQgYWxsIG9mIHRoZWlyIHByb3BlcnRpZXMgYXJlIGVxdWFsIGJ5XG4gKiAgIGNvbXBhcmluZyB0aGVtIHdpdGggYGFuZ3VsYXIuZXF1YWxzYC5cbiAqICogQm90aCB2YWx1ZXMgYXJlIE5hTi4gKEluIEphdmFTY3JpcHQsIE5hTiA9PSBOYU4gPT4gZmFsc2UuIEJ1dCB3ZSBjb25zaWRlciB0d28gTmFOIGFzIGVxdWFsKVxuICogKiBCb3RoIHZhbHVlcyByZXByZXNlbnQgdGhlIHNhbWUgcmVndWxhciBleHByZXNzaW9uIChJbiBKYXZhU2NyaXB0LFxuICogICAvYWJjLyA9PSAvYWJjLyA9PiBmYWxzZS4gQnV0IHdlIGNvbnNpZGVyIHR3byByZWd1bGFyIGV4cHJlc3Npb25zIGFzIGVxdWFsIHdoZW4gdGhlaXIgdGV4dHVhbFxuICogICByZXByZXNlbnRhdGlvbiBtYXRjaGVzKS5cbiAqXG4gKiBEdXJpbmcgYSBwcm9wZXJ0eSBjb21wYXJpc29uLCBwcm9wZXJ0aWVzIG9mIGBmdW5jdGlvbmAgdHlwZSBhbmQgcHJvcGVydGllcyB3aXRoIG5hbWVzXG4gKiB0aGF0IGJlZ2luIHdpdGggYCRgIGFyZSBpZ25vcmVkLlxuICpcbiAqIFNjb3BlIGFuZCBET01XaW5kb3cgb2JqZWN0cyBhcmUgYmVpbmcgY29tcGFyZWQgb25seSBieSBpZGVudGlmeSAoYD09PWApLlxuICpcbiAqIEBwYXJhbSB7Kn0gbzEgT2JqZWN0IG9yIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG8yIE9iamVjdCBvciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYXJndW1lbnRzIGFyZSBlcXVhbC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwiZXF1YWxzRXhhbXBsZVwiIG5hbWU9XCJlcXVhbHNFeGFtcGxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8Zm9ybSBub3ZhbGlkYXRlPlxuICAgICAgICAgIDxoMz5Vc2VyIDE8L2gzPlxuICAgICAgICAgIE5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwidXNlcjEubmFtZVwiPlxuICAgICAgICAgIEFnZTogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cInVzZXIxLmFnZVwiPlxuXG4gICAgICAgICAgPGgzPlVzZXIgMjwvaDM+XG4gICAgICAgICAgTmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1c2VyMi5uYW1lXCI+XG4gICAgICAgICAgQWdlOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwidXNlcjIuYWdlXCI+XG5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJDb21wYXJlXCIgbmctY2xpY2s9XCJjb21wYXJlKClcIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBVc2VyIDE6IDxwcmU+e3t1c2VyMSB8IGpzb259fTwvcHJlPlxuICAgICAgICAgIFVzZXIgMjogPHByZT57e3VzZXIyIHwganNvbn19PC9wcmU+XG4gICAgICAgICAgRXF1YWw6IDxwcmU+e3tyZXN1bHR9fTwvcHJlPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZXF1YWxzRXhhbXBsZScsIFtdKS5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLnVzZXIxID0ge307XG4gICAgICAgICAgJHNjb3BlLnVzZXIyID0ge307XG4gICAgICAgICAgJHNjb3BlLmNvbXBhcmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5yZXN1bHQgPSBhbmd1bGFyLmVxdWFscygkc2NvcGUudXNlcjEsICRzY29wZS51c2VyMik7XG4gICAgICAgICAgfTtcbiAgICAgICAgfV0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiBlcXVhbHMobzEsIG8yKSB7XG4gIGlmIChvMSA9PT0gbzIpIHJldHVybiB0cnVlO1xuICBpZiAobzEgPT09IG51bGwgfHwgbzIgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICBpZiAobzEgIT09IG8xICYmIG8yICE9PSBvMikgcmV0dXJuIHRydWU7IC8vIE5hTiA9PT0gTmFOXG4gIHZhciB0MSA9IHR5cGVvZiBvMSwgdDIgPSB0eXBlb2YgbzIsIGxlbmd0aCwga2V5LCBrZXlTZXQ7XG4gIGlmICh0MSA9PT0gdDIgJiYgdDEgPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKGlzQXJyYXkobzEpKSB7XG4gICAgICBpZiAoIWlzQXJyYXkobzIpKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoKGxlbmd0aCA9IG8xLmxlbmd0aCkgPT09IG8yLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGtleSA9IDA7IGtleSA8IGxlbmd0aDsga2V5KyspIHtcbiAgICAgICAgICBpZiAoIWVxdWFscyhvMVtrZXldLCBvMltrZXldKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNEYXRlKG8xKSkge1xuICAgICAgaWYgKCFpc0RhdGUobzIpKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gc2ltcGxlQ29tcGFyZShvMS5nZXRUaW1lKCksIG8yLmdldFRpbWUoKSk7XG4gICAgfSBlbHNlIGlmIChpc1JlZ0V4cChvMSkpIHtcbiAgICAgIGlmICghaXNSZWdFeHAobzIpKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gbzEudG9TdHJpbmcoKSA9PT0gbzIudG9TdHJpbmcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzU2NvcGUobzEpIHx8IGlzU2NvcGUobzIpIHx8IGlzV2luZG93KG8xKSB8fCBpc1dpbmRvdyhvMikgfHxcbiAgICAgICAgaXNBcnJheShvMikgfHwgaXNEYXRlKG8yKSB8fCBpc1JlZ0V4cChvMikpIHJldHVybiBmYWxzZTtcbiAgICAgIGtleVNldCA9IGNyZWF0ZU1hcCgpO1xuICAgICAgZm9yIChrZXkgaW4gbzEpIHtcbiAgICAgICAgaWYgKGtleS5jaGFyQXQoMCkgPT09ICckJyB8fCBpc0Z1bmN0aW9uKG8xW2tleV0pKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFlcXVhbHMobzFba2V5XSwgbzJba2V5XSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAga2V5U2V0W2tleV0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gbzIpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIGtleVNldCkgJiZcbiAgICAgICAgICAgIGtleS5jaGFyQXQoMCkgIT09ICckJyAmJlxuICAgICAgICAgICAgaXNEZWZpbmVkKG8yW2tleV0pICYmXG4gICAgICAgICAgICAhaXNGdW5jdGlvbihvMltrZXldKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxudmFyIGNzcCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIWlzRGVmaW5lZChjc3AucnVsZXMpKSB7XG5cblxuICAgIHZhciBuZ0NzcEVsZW1lbnQgPSAod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuZy1jc3BdJykgfHxcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5nLWNzcF0nKSk7XG5cbiAgICBpZiAobmdDc3BFbGVtZW50KSB7XG4gICAgICB2YXIgbmdDc3BBdHRyaWJ1dGUgPSBuZ0NzcEVsZW1lbnQuZ2V0QXR0cmlidXRlKCduZy1jc3AnKSB8fFxuICAgICAgICAgICAgICAgICAgICBuZ0NzcEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW5nLWNzcCcpO1xuICAgICAgY3NwLnJ1bGVzID0ge1xuICAgICAgICBub1Vuc2FmZUV2YWw6ICFuZ0NzcEF0dHJpYnV0ZSB8fCAobmdDc3BBdHRyaWJ1dGUuaW5kZXhPZignbm8tdW5zYWZlLWV2YWwnKSAhPT0gLTEpLFxuICAgICAgICBub0lubGluZVN0eWxlOiAhbmdDc3BBdHRyaWJ1dGUgfHwgKG5nQ3NwQXR0cmlidXRlLmluZGV4T2YoJ25vLWlubGluZS1zdHlsZScpICE9PSAtMSlcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNzcC5ydWxlcyA9IHtcbiAgICAgICAgbm9VbnNhZmVFdmFsOiBub1Vuc2FmZUV2YWwoKSxcbiAgICAgICAgbm9JbmxpbmVTdHlsZTogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNzcC5ydWxlcztcblxuICBmdW5jdGlvbiBub1Vuc2FmZUV2YWwoKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXcsIG5vLW5ldy1mdW5jXG4gICAgICBuZXcgRnVuY3Rpb24oJycpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbW9kdWxlIG5nXG4gKiBAbmFtZSBuZ0pxXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nSnEgdGhlIG5hbWUgb2YgdGhlIGxpYnJhcnkgYXZhaWxhYmxlIHVuZGVyIGB3aW5kb3dgXG4gKiB0byBiZSB1c2VkIGZvciBhbmd1bGFyLmVsZW1lbnRcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIHRoaXMgZGlyZWN0aXZlIHRvIGZvcmNlIHRoZSBhbmd1bGFyLmVsZW1lbnQgbGlicmFyeS4gIFRoaXMgc2hvdWxkIGJlXG4gKiB1c2VkIHRvIGZvcmNlIGVpdGhlciBqcUxpdGUgYnkgbGVhdmluZyBuZy1qcSBibGFuayBvciBzZXR0aW5nIHRoZSBuYW1lIG9mXG4gKiB0aGUganF1ZXJ5IHZhcmlhYmxlIHVuZGVyIHdpbmRvdyAoZWcuIGpRdWVyeSkuXG4gKlxuICogU2luY2UgQW5ndWxhckpTIGxvb2tzIGZvciB0aGlzIGRpcmVjdGl2ZSB3aGVuIGl0IGlzIGxvYWRlZCAoZG9lc24ndCB3YWl0IGZvciB0aGVcbiAqIERPTUNvbnRlbnRMb2FkZWQgZXZlbnQpLCBpdCBtdXN0IGJlIHBsYWNlZCBvbiBhbiBlbGVtZW50IHRoYXQgY29tZXMgYmVmb3JlIHRoZSBzY3JpcHRcbiAqIHdoaWNoIGxvYWRzIGFuZ3VsYXIuIEFsc28sIG9ubHkgdGhlIGZpcnN0IGluc3RhbmNlIG9mIGBuZy1qcWAgd2lsbCBiZSB1c2VkIGFuZCBhbGxcbiAqIG90aGVycyBpZ25vcmVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHRvIGZvcmNlIGpxTGl0ZSB1c2luZyB0aGUgYG5nSnFgIGRpcmVjdGl2ZSB0byB0aGUgYGh0bWxgIHRhZy5cbiBgYGBodG1sXG4gPCFkb2N0eXBlIGh0bWw+XG4gPGh0bWwgbmctYXBwIG5nLWpxPlxuIC4uLlxuIC4uLlxuIDwvaHRtbD5cbiBgYGBcbiAqIEBleGFtcGxlXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHRvIHVzZSBhIGpRdWVyeSBiYXNlZCBsaWJyYXJ5IG9mIGEgZGlmZmVyZW50IG5hbWUuXG4gKiBUaGUgbGlicmFyeSBuYW1lIG11c3QgYmUgYXZhaWxhYmxlIGF0IHRoZSB0b3AgbW9zdCAnd2luZG93Jy5cbiBgYGBodG1sXG4gPCFkb2N0eXBlIGh0bWw+XG4gPGh0bWwgbmctYXBwIG5nLWpxPVwialF1ZXJ5TGliXCI+XG4gLi4uXG4gLi4uXG4gPC9odG1sPlxuIGBgYFxuICovXG52YXIganEgPSBmdW5jdGlvbigpIHtcbiAgaWYgKGlzRGVmaW5lZChqcS5uYW1lXykpIHJldHVybiBqcS5uYW1lXztcbiAgdmFyIGVsO1xuICB2YXIgaSwgaWkgPSBuZ0F0dHJQcmVmaXhlcy5sZW5ndGgsIHByZWZpeCwgbmFtZTtcbiAgZm9yIChpID0gMDsgaSA8IGlpOyArK2kpIHtcbiAgICBwcmVmaXggPSBuZ0F0dHJQcmVmaXhlc1tpXTtcbiAgICBlbCA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbJyArIHByZWZpeC5yZXBsYWNlKCc6JywgJ1xcXFw6JykgKyAnanFdJyk7XG4gICAgaWYgKGVsKSB7XG4gICAgICBuYW1lID0gZWwuZ2V0QXR0cmlidXRlKHByZWZpeCArICdqcScpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChqcS5uYW1lXyA9IG5hbWUpO1xufTtcblxuZnVuY3Rpb24gY29uY2F0KGFycmF5MSwgYXJyYXkyLCBpbmRleCkge1xuICByZXR1cm4gYXJyYXkxLmNvbmNhdChzbGljZS5jYWxsKGFycmF5MiwgaW5kZXgpKTtcbn1cblxuZnVuY3Rpb24gc2xpY2VBcmdzKGFyZ3MsIHN0YXJ0SW5kZXgpIHtcbiAgcmV0dXJuIHNsaWNlLmNhbGwoYXJncywgc3RhcnRJbmRleCB8fCAwKTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5iaW5kXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGNhbGxzIGZ1bmN0aW9uIGBmbmAgYm91bmQgdG8gYHNlbGZgIChgc2VsZmAgYmVjb21lcyB0aGUgYHRoaXNgIGZvclxuICogYGZuYCkuIFlvdSBjYW4gc3VwcGx5IG9wdGlvbmFsIGBhcmdzYCB0aGF0IGFyZSBwcmVib3VuZCB0byB0aGUgZnVuY3Rpb24uIFRoaXMgZmVhdHVyZSBpcyBhbHNvXG4gKiBrbm93biBhcyBbcGFydGlhbCBhcHBsaWNhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYXJ0aWFsX2FwcGxpY2F0aW9uKSwgYXNcbiAqIGRpc3Rpbmd1aXNoZWQgZnJvbSBbZnVuY3Rpb24gY3VycnlpbmddKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ3VycnlpbmcjQ29udHJhc3Rfd2l0aF9wYXJ0aWFsX2Z1bmN0aW9uX2FwcGxpY2F0aW9uKS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc2VsZiBDb250ZXh0IHdoaWNoIGBmbmAgc2hvdWxkIGJlIGV2YWx1YXRlZCBpbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gRnVuY3Rpb24gdG8gYmUgYm91bmQuXG4gKiBAcGFyYW0gey4uLip9IGFyZ3MgT3B0aW9uYWwgYXJndW1lbnRzIHRvIGJlIHByZWJvdW5kIHRvIHRoZSBgZm5gIGZ1bmN0aW9uIGNhbGwuXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gRnVuY3Rpb24gdGhhdCB3cmFwcyB0aGUgYGZuYCB3aXRoIGFsbCB0aGUgc3BlY2lmaWVkIGJpbmRpbmdzLlxuICovXG5mdW5jdGlvbiBiaW5kKHNlbGYsIGZuKSB7XG4gIHZhciBjdXJyeUFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IHNsaWNlQXJncyhhcmd1bWVudHMsIDIpIDogW107XG4gIGlmIChpc0Z1bmN0aW9uKGZuKSAmJiAhKGZuIGluc3RhbmNlb2YgUmVnRXhwKSkge1xuICAgIHJldHVybiBjdXJyeUFyZ3MubGVuZ3RoXG4gICAgICA/IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgICA/IGZuLmFwcGx5KHNlbGYsIGNvbmNhdChjdXJyeUFyZ3MsIGFyZ3VtZW50cywgMCkpXG4gICAgICAgICAgICA6IGZuLmFwcGx5KHNlbGYsIGN1cnJ5QXJncyk7XG4gICAgICAgIH1cbiAgICAgIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICAgICAgID8gZm4uYXBwbHkoc2VsZiwgYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBmbi5jYWxsKHNlbGYpO1xuICAgICAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIEluIElFLCBuYXRpdmUgbWV0aG9kcyBhcmUgbm90IGZ1bmN0aW9ucyBzbyB0aGV5IGNhbm5vdCBiZSBib3VuZCAobm90ZTogdGhleSBkb24ndCBuZWVkIHRvIGJlKS5cbiAgICByZXR1cm4gZm47XG4gIH1cbn1cblxuXG5mdW5jdGlvbiB0b0pzb25SZXBsYWNlcihrZXksIHZhbHVlKSB7XG4gIHZhciB2YWwgPSB2YWx1ZTtcblxuICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYga2V5LmNoYXJBdCgwKSA9PT0gJyQnICYmIGtleS5jaGFyQXQoMSkgPT09ICckJykge1xuICAgIHZhbCA9IHVuZGVmaW5lZDtcbiAgfSBlbHNlIGlmIChpc1dpbmRvdyh2YWx1ZSkpIHtcbiAgICB2YWwgPSAnJFdJTkRPVyc7XG4gIH0gZWxzZSBpZiAodmFsdWUgJiYgIHdpbmRvdy5kb2N1bWVudCA9PT0gdmFsdWUpIHtcbiAgICB2YWwgPSAnJERPQ1VNRU5UJztcbiAgfSBlbHNlIGlmIChpc1Njb3BlKHZhbHVlKSkge1xuICAgIHZhbCA9ICckU0NPUEUnO1xuICB9XG5cbiAgcmV0dXJuIHZhbDtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci50b0pzb25cbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTZXJpYWxpemVzIGlucHV0IGludG8gYSBKU09OLWZvcm1hdHRlZCBzdHJpbmcuIFByb3BlcnRpZXMgd2l0aCBsZWFkaW5nICQkIGNoYXJhY3RlcnMgd2lsbCBiZVxuICogc3RyaXBwZWQgc2luY2UgQW5ndWxhckpTIHVzZXMgdGhpcyBub3RhdGlvbiBpbnRlcm5hbGx5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fERhdGV8c3RyaW5nfG51bWJlcnxib29sZWFufSBvYmogSW5wdXQgdG8gYmUgc2VyaWFsaXplZCBpbnRvIEpTT04uXG4gKiBAcGFyYW0ge2Jvb2xlYW58bnVtYmVyfSBbcHJldHR5PTJdIElmIHNldCB0byB0cnVlLCB0aGUgSlNPTiBvdXRwdXQgd2lsbCBjb250YWluIG5ld2xpbmVzIGFuZCB3aGl0ZXNwYWNlLlxuICogICAgSWYgc2V0IHRvIGFuIGludGVnZXIsIHRoZSBKU09OIG91dHB1dCB3aWxsIGNvbnRhaW4gdGhhdCBtYW55IHNwYWNlcyBwZXIgaW5kZW50YXRpb24uXG4gKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gSlNPTi1pZmllZCBzdHJpbmcgcmVwcmVzZW50aW5nIGBvYmpgLlxuICogQGtub3duSXNzdWVcbiAqXG4gKiBUaGUgU2FmYXJpIGJyb3dzZXIgdGhyb3dzIGEgYFJhbmdlRXJyb3JgIGluc3RlYWQgb2YgcmV0dXJuaW5nIGBudWxsYCB3aGVuIGl0IHRyaWVzIHRvIHN0cmluZ2lmeSBhIGBEYXRlYFxuICogb2JqZWN0IHdpdGggYW4gaW52YWxpZCBkYXRlIHZhbHVlLiBUaGUgb25seSByZWxpYWJsZSB3YXkgdG8gcHJldmVudCB0aGlzIGlzIHRvIG1vbmtleXBhdGNoIHRoZVxuICogYERhdGUucHJvdG90eXBlLnRvSlNPTmAgbWV0aG9kIGFzIGZvbGxvd3M6XG4gKlxuICogYGBgXG4gKiB2YXIgX0RhdGV0b0pTT04gPSBEYXRlLnByb3RvdHlwZS50b0pTT047XG4gKiBEYXRlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbigpIHtcbiAqICAgdHJ5IHtcbiAqICAgICByZXR1cm4gX0RhdGV0b0pTT04uY2FsbCh0aGlzKTtcbiAqICAgfSBjYXRjaChlKSB7XG4gKiAgICAgaWYgKGUgaW5zdGFuY2VvZiBSYW5nZUVycm9yKSB7XG4gKiAgICAgICByZXR1cm4gbnVsbDtcbiAqICAgICB9XG4gKiAgICAgdGhyb3cgZTtcbiAqICAgfVxuICogfTtcbiAqIGBgYFxuICpcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3B1bGwvMTQyMjEgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKi9cbmZ1bmN0aW9uIHRvSnNvbihvYmosIHByZXR0eSkge1xuICBpZiAoaXNVbmRlZmluZWQob2JqKSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgaWYgKCFpc051bWJlcihwcmV0dHkpKSB7XG4gICAgcHJldHR5ID0gcHJldHR5ID8gMiA6IG51bGw7XG4gIH1cbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgdG9Kc29uUmVwbGFjZXIsIHByZXR0eSk7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuZnJvbUpzb25cbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXNlcmlhbGl6ZXMgYSBKU09OIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ganNvbiBKU09OIHN0cmluZyB0byBkZXNlcmlhbGl6ZS5cbiAqIEByZXR1cm5zIHtPYmplY3R8QXJyYXl8c3RyaW5nfG51bWJlcn0gRGVzZXJpYWxpemVkIEpTT04gc3RyaW5nLlxuICovXG5mdW5jdGlvbiBmcm9tSnNvbihqc29uKSB7XG4gIHJldHVybiBpc1N0cmluZyhqc29uKVxuICAgICAgPyBKU09OLnBhcnNlKGpzb24pXG4gICAgICA6IGpzb247XG59XG5cblxudmFyIEFMTF9DT0xPTlMgPSAvOi9nO1xuZnVuY3Rpb24gdGltZXpvbmVUb09mZnNldCh0aW1lem9uZSwgZmFsbGJhY2spIHtcbiAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5LCBFZGdlIDEzLTE1K1xuICAvLyBJRS9FZGdlIGRvIG5vdCBcInVuZGVyc3RhbmRcIiBjb2xvbiAoYDpgKSBpbiB0aW1lem9uZVxuICB0aW1lem9uZSA9IHRpbWV6b25lLnJlcGxhY2UoQUxMX0NPTE9OUywgJycpO1xuICB2YXIgcmVxdWVzdGVkVGltZXpvbmVPZmZzZXQgPSBEYXRlLnBhcnNlKCdKYW4gMDEsIDE5NzAgMDA6MDA6MDAgJyArIHRpbWV6b25lKSAvIDYwMDAwO1xuICByZXR1cm4gaXNOdW1iZXJOYU4ocmVxdWVzdGVkVGltZXpvbmVPZmZzZXQpID8gZmFsbGJhY2sgOiByZXF1ZXN0ZWRUaW1lem9uZU9mZnNldDtcbn1cblxuXG5mdW5jdGlvbiBhZGREYXRlTWludXRlcyhkYXRlLCBtaW51dGVzKSB7XG4gIGRhdGUgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7XG4gIGRhdGUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSArIG1pbnV0ZXMpO1xuICByZXR1cm4gZGF0ZTtcbn1cblxuXG5mdW5jdGlvbiBjb252ZXJ0VGltZXpvbmVUb0xvY2FsKGRhdGUsIHRpbWV6b25lLCByZXZlcnNlKSB7XG4gIHJldmVyc2UgPSByZXZlcnNlID8gLTEgOiAxO1xuICB2YXIgZGF0ZVRpbWV6b25lT2Zmc2V0ID0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICB2YXIgdGltZXpvbmVPZmZzZXQgPSB0aW1lem9uZVRvT2Zmc2V0KHRpbWV6b25lLCBkYXRlVGltZXpvbmVPZmZzZXQpO1xuICByZXR1cm4gYWRkRGF0ZU1pbnV0ZXMoZGF0ZSwgcmV2ZXJzZSAqICh0aW1lem9uZU9mZnNldCAtIGRhdGVUaW1lem9uZU9mZnNldCkpO1xufVxuXG5cbi8qKlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBzdGFydGluZ1RhZyhlbGVtZW50KSB7XG4gIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCkuY2xvbmUoKS5lbXB0eSgpO1xuICB2YXIgZWxlbUh0bWwgPSBqcUxpdGUoJzxkaXY+PC9kaXY+JykuYXBwZW5kKGVsZW1lbnQpLmh0bWwoKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZWxlbWVudFswXS5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX1RFWFQgPyBsb3dlcmNhc2UoZWxlbUh0bWwpIDpcbiAgICAgICAgZWxlbUh0bWwuXG4gICAgICAgICAgbWF0Y2goL14oPFtePl0rPikvKVsxXS5cbiAgICAgICAgICByZXBsYWNlKC9ePChbXFx3LV0rKS8sIGZ1bmN0aW9uKG1hdGNoLCBub2RlTmFtZSkge3JldHVybiAnPCcgKyBsb3dlcmNhc2Uobm9kZU5hbWUpO30pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGxvd2VyY2FzZShlbGVtSHRtbCk7XG4gIH1cblxufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLyoqXG4gKiBUcmllcyB0byBkZWNvZGUgdGhlIFVSSSBjb21wb25lbnQgd2l0aG91dCB0aHJvd2luZyBhbiBleGNlcHRpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSBzdHIgdmFsdWUgcG90ZW50aWFsIFVSSSBjb21wb25lbnQgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGNhbiBiZSBkZWNvZGVkXG4gKiB3aXRoIHRoZSBkZWNvZGVVUklDb21wb25lbnQgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHRyeURlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkge1xuICB0cnkge1xuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSWdub3JlIGFueSBpbnZhbGlkIHVyaSBjb21wb25lbnQuXG4gIH1cbn1cblxuXG4vKipcbiAqIFBhcnNlcyBhbiBlc2NhcGVkIHVybCBxdWVyeSBzdHJpbmcgaW50byBrZXktdmFsdWUgcGFpcnMuXG4gKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsYm9vbGVhbnxBcnJheT59XG4gKi9cbmZ1bmN0aW9uIHBhcnNlS2V5VmFsdWUoLyoqc3RyaW5nKi9rZXlWYWx1ZSkge1xuICB2YXIgb2JqID0ge307XG4gIGZvckVhY2goKGtleVZhbHVlIHx8ICcnKS5zcGxpdCgnJicpLCBmdW5jdGlvbihrZXlWYWx1ZSkge1xuICAgIHZhciBzcGxpdFBvaW50LCBrZXksIHZhbDtcbiAgICBpZiAoa2V5VmFsdWUpIHtcbiAgICAgIGtleSA9IGtleVZhbHVlID0ga2V5VmFsdWUucmVwbGFjZSgvXFwrL2csJyUyMCcpO1xuICAgICAgc3BsaXRQb2ludCA9IGtleVZhbHVlLmluZGV4T2YoJz0nKTtcbiAgICAgIGlmIChzcGxpdFBvaW50ICE9PSAtMSkge1xuICAgICAgICBrZXkgPSBrZXlWYWx1ZS5zdWJzdHJpbmcoMCwgc3BsaXRQb2ludCk7XG4gICAgICAgIHZhbCA9IGtleVZhbHVlLnN1YnN0cmluZyhzcGxpdFBvaW50ICsgMSk7XG4gICAgICB9XG4gICAgICBrZXkgPSB0cnlEZWNvZGVVUklDb21wb25lbnQoa2V5KTtcbiAgICAgIGlmIChpc0RlZmluZWQoa2V5KSkge1xuICAgICAgICB2YWwgPSBpc0RlZmluZWQodmFsKSA/IHRyeURlY29kZVVSSUNvbXBvbmVudCh2YWwpIDogdHJ1ZTtcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgIG9ialtrZXldID0gdmFsO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqW2tleV0pKSB7XG4gICAgICAgICAgb2JqW2tleV0ucHVzaCh2YWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9ialtrZXldID0gW29ialtrZXldLHZhbF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiB0b0tleVZhbHVlKG9iaikge1xuICB2YXIgcGFydHMgPSBbXTtcbiAgZm9yRWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIGZvckVhY2godmFsdWUsIGZ1bmN0aW9uKGFycmF5VmFsdWUpIHtcbiAgICAgICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXksIHRydWUpICtcbiAgICAgICAgICAgICAgICAgICAoYXJyYXlWYWx1ZSA9PT0gdHJ1ZSA/ICcnIDogJz0nICsgZW5jb2RlVXJpUXVlcnkoYXJyYXlWYWx1ZSwgdHJ1ZSkpKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXksIHRydWUpICtcbiAgICAgICAgICAgICAgICh2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogJz0nICsgZW5jb2RlVXJpUXVlcnkodmFsdWUsIHRydWUpKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHBhcnRzLmxlbmd0aCA/IHBhcnRzLmpvaW4oJyYnKSA6ICcnO1xufVxuXG5cbi8qKlxuICogV2UgbmVlZCBvdXIgY3VzdG9tIG1ldGhvZCBiZWNhdXNlIGVuY29kZVVSSUNvbXBvbmVudCBpcyB0b28gYWdncmVzc2l2ZSBhbmQgZG9lc24ndCBmb2xsb3dcbiAqIGh0dHA6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzM5ODYudHh0IHdpdGggcmVnYXJkcyB0byB0aGUgY2hhcmFjdGVyIHNldCAocGNoYXIpIGFsbG93ZWQgaW4gcGF0aFxuICogc2VnbWVudHM6XG4gKiAgICBzZWdtZW50ICAgICAgID0gKnBjaGFyXG4gKiAgICBwY2hhciAgICAgICAgID0gdW5yZXNlcnZlZCAvIHBjdC1lbmNvZGVkIC8gc3ViLWRlbGltcyAvIFwiOlwiIC8gXCJAXCJcbiAqICAgIHBjdC1lbmNvZGVkICAgPSBcIiVcIiBIRVhESUcgSEVYRElHXG4gKiAgICB1bnJlc2VydmVkICAgID0gQUxQSEEgLyBESUdJVCAvIFwiLVwiIC8gXCIuXCIgLyBcIl9cIiAvIFwiflwiXG4gKiAgICBzdWItZGVsaW1zICAgID0gXCIhXCIgLyBcIiRcIiAvIFwiJlwiIC8gXCInXCIgLyBcIihcIiAvIFwiKVwiXG4gKiAgICAgICAgICAgICAgICAgICAgIC8gXCIqXCIgLyBcIitcIiAvIFwiLFwiIC8gXCI7XCIgLyBcIj1cIlxuICovXG5mdW5jdGlvbiBlbmNvZGVVcmlTZWdtZW50KHZhbCkge1xuICByZXR1cm4gZW5jb2RlVXJpUXVlcnkodmFsLCB0cnVlKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lMjYvZ2ksICcmJykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTNEL2dpLCAnPScpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyQi9naSwgJysnKTtcbn1cblxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIGZvciBlbmNvZGluZyAqa2V5KiBvciAqdmFsdWUqIHBhcnRzIG9mIHF1ZXJ5IGNvbXBvbmVudC4gV2UgbmVlZCBhIGN1c3RvbVxuICogbWV0aG9kIGJlY2F1c2UgZW5jb2RlVVJJQ29tcG9uZW50IGlzIHRvbyBhZ2dyZXNzaXZlIGFuZCBlbmNvZGVzIHN0dWZmIHRoYXQgZG9lc24ndCBoYXZlIHRvIGJlXG4gKiBlbmNvZGVkIHBlciBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2OlxuICogICAgcXVlcnkgICAgICAgICA9ICooIHBjaGFyIC8gXCIvXCIgLyBcIj9cIiApXG4gKiAgICBwY2hhciAgICAgICAgID0gdW5yZXNlcnZlZCAvIHBjdC1lbmNvZGVkIC8gc3ViLWRlbGltcyAvIFwiOlwiIC8gXCJAXCJcbiAqICAgIHVucmVzZXJ2ZWQgICAgPSBBTFBIQSAvIERJR0lUIC8gXCItXCIgLyBcIi5cIiAvIFwiX1wiIC8gXCJ+XCJcbiAqICAgIHBjdC1lbmNvZGVkICAgPSBcIiVcIiBIRVhESUcgSEVYRElHXG4gKiAgICBzdWItZGVsaW1zICAgID0gXCIhXCIgLyBcIiRcIiAvIFwiJlwiIC8gXCInXCIgLyBcIihcIiAvIFwiKVwiXG4gKiAgICAgICAgICAgICAgICAgICAgIC8gXCIqXCIgLyBcIitcIiAvIFwiLFwiIC8gXCI7XCIgLyBcIj1cIlxuICovXG5mdW5jdGlvbiBlbmNvZGVVcmlRdWVyeSh2YWwsIHBjdEVuY29kZVNwYWNlcykge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTQwL2dpLCAnQCcpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTNCL2dpLCAnOycpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyMC9nLCAocGN0RW5jb2RlU3BhY2VzID8gJyUyMCcgOiAnKycpKTtcbn1cblxudmFyIG5nQXR0clByZWZpeGVzID0gWyduZy0nLCAnZGF0YS1uZy0nLCAnbmc6JywgJ3gtbmctJ107XG5cbmZ1bmN0aW9uIGdldE5nQXR0cmlidXRlKGVsZW1lbnQsIG5nQXR0cikge1xuICB2YXIgYXR0ciwgaSwgaWkgPSBuZ0F0dHJQcmVmaXhlcy5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBpaTsgKytpKSB7XG4gICAgYXR0ciA9IG5nQXR0clByZWZpeGVzW2ldICsgbmdBdHRyO1xuICAgIGlmIChpc1N0cmluZyhhdHRyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cikpKSB7XG4gICAgICByZXR1cm4gYXR0cjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGFsbG93QXV0b0Jvb3RzdHJhcChkb2N1bWVudCkge1xuICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdDtcblxuICBpZiAoIXNjcmlwdCkge1xuICAgIC8vIFN1cHBvcnQ6IElFIDktMTEgb25seVxuICAgIC8vIElFIGRvZXMgbm90IGhhdmUgYGRvY3VtZW50LmN1cnJlbnRTY3JpcHRgXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBJZiB0aGUgYGN1cnJlbnRTY3JpcHRgIHByb3BlcnR5IGhhcyBiZWVuIGNsb2JiZXJlZCBqdXN0IHJldHVybiBmYWxzZSwgc2luY2UgdGhpcyBpbmRpY2F0ZXMgYSBwcm9iYWJsZSBhdHRhY2tcbiAgaWYgKCEoc2NyaXB0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxTY3JpcHRFbGVtZW50IHx8IHNjcmlwdCBpbnN0YW5jZW9mIHdpbmRvdy5TVkdTY3JpcHRFbGVtZW50KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBhdHRyaWJ1dGVzID0gc2NyaXB0LmF0dHJpYnV0ZXM7XG4gIHZhciBzcmNzID0gW2F0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKCdzcmMnKSwgYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oJ2hyZWYnKSwgYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oJ3hsaW5rOmhyZWYnKV07XG5cbiAgcmV0dXJuIHNyY3MuZXZlcnkoZnVuY3Rpb24oc3JjKSB7XG4gICAgaWYgKCFzcmMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXNyYy52YWx1ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGxpbmsuaHJlZiA9IHNyYy52YWx1ZTtcblxuICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4gPT09IGxpbmsub3JpZ2luKSB7XG4gICAgICAvLyBTYW1lLW9yaWdpbiByZXNvdXJjZXMgYXJlIGFsd2F5cyBhbGxvd2VkLCBldmVuIGZvciBub24td2hpdGVsaXN0ZWQgc2NoZW1lcy5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBEaXNhYmxlZCBib290c3RyYXBwaW5nIHVubGVzcyBhbmd1bGFyLmpzIHdhcyBsb2FkZWQgZnJvbSBhIGtub3duIHNjaGVtZSB1c2VkIG9uIHRoZSB3ZWIuXG4gICAgLy8gVGhpcyBpcyB0byBwcmV2ZW50IGFuZ3VsYXIuanMgYnVuZGxlZCB3aXRoIGJyb3dzZXIgZXh0ZW5zaW9ucyBmcm9tIGJlaW5nIHVzZWQgdG8gYnlwYXNzIHRoZVxuICAgIC8vIGNvbnRlbnQgc2VjdXJpdHkgcG9saWN5IGluIHdlYiBwYWdlcyBhbmQgb3RoZXIgYnJvd3NlciBleHRlbnNpb25zLlxuICAgIHN3aXRjaCAobGluay5wcm90b2NvbCkge1xuICAgICAgY2FzZSAnaHR0cDonOlxuICAgICAgY2FzZSAnaHR0cHM6JzpcbiAgICAgIGNhc2UgJ2Z0cDonOlxuICAgICAgY2FzZSAnYmxvYjonOlxuICAgICAgY2FzZSAnZmlsZTonOlxuICAgICAgY2FzZSAnZGF0YTonOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBDYWNoZWQgYXMgaXQgaGFzIHRvIHJ1biBkdXJpbmcgbG9hZGluZyBzbyB0aGF0IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQgaXMgYXZhaWxhYmxlLlxudmFyIGlzQXV0b0Jvb3RzdHJhcEFsbG93ZWQgPSBhbGxvd0F1dG9Cb290c3RyYXAod2luZG93LmRvY3VtZW50KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0FwcFxuICogQG1vZHVsZSBuZ1xuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHthbmd1bGFyLk1vZHVsZX0gbmdBcHAgYW4gb3B0aW9uYWwgYXBwbGljYXRpb25cbiAqICAge0BsaW5rIGFuZ3VsYXIubW9kdWxlIG1vZHVsZX0gbmFtZSB0byBsb2FkLlxuICogQHBhcmFtIHtib29sZWFuPX0gbmdTdHJpY3REaSBpZiB0aGlzIGF0dHJpYnV0ZSBpcyBwcmVzZW50IG9uIHRoZSBhcHAgZWxlbWVudCwgdGhlIGluamVjdG9yIHdpbGwgYmVcbiAqICAgY3JlYXRlZCBpbiBcInN0cmljdC1kaVwiIG1vZGUuIFRoaXMgbWVhbnMgdGhhdCB0aGUgYXBwbGljYXRpb24gd2lsbCBmYWlsIHRvIGludm9rZSBmdW5jdGlvbnMgd2hpY2hcbiAqICAgZG8gbm90IHVzZSBleHBsaWNpdCBmdW5jdGlvbiBhbm5vdGF0aW9uIChhbmQgYXJlIHRodXMgdW5zdWl0YWJsZSBmb3IgbWluaWZpY2F0aW9uKSwgYXMgZGVzY3JpYmVkXG4gKiAgIGluIHtAbGluayBndWlkZS9kaSB0aGUgRGVwZW5kZW5jeSBJbmplY3Rpb24gZ3VpZGV9LCBhbmQgdXNlZnVsIGRlYnVnZ2luZyBpbmZvIHdpbGwgYXNzaXN0IGluXG4gKiAgIHRyYWNraW5nIGRvd24gdGhlIHJvb3Qgb2YgdGhlc2UgYnVncy5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBVc2UgdGhpcyBkaXJlY3RpdmUgdG8gKiphdXRvLWJvb3RzdHJhcCoqIGFuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi4gVGhlIGBuZ0FwcGAgZGlyZWN0aXZlXG4gKiBkZXNpZ25hdGVzIHRoZSAqKnJvb3QgZWxlbWVudCoqIG9mIHRoZSBhcHBsaWNhdGlvbiBhbmQgaXMgdHlwaWNhbGx5IHBsYWNlZCBuZWFyIHRoZSByb290IGVsZW1lbnRcbiAqIG9mIHRoZSBwYWdlIC0gZS5nLiBvbiB0aGUgYDxib2R5PmAgb3IgYDxodG1sPmAgdGFncy5cbiAqXG4gKiBUaGVyZSBhcmUgYSBmZXcgdGhpbmdzIHRvIGtlZXAgaW4gbWluZCB3aGVuIHVzaW5nIGBuZ0FwcGA6XG4gKiAtIG9ubHkgb25lIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiBjYW4gYmUgYXV0by1ib290c3RyYXBwZWQgcGVyIEhUTUwgZG9jdW1lbnQuIFRoZSBmaXJzdCBgbmdBcHBgXG4gKiAgIGZvdW5kIGluIHRoZSBkb2N1bWVudCB3aWxsIGJlIHVzZWQgdG8gZGVmaW5lIHRoZSByb290IGVsZW1lbnQgdG8gYXV0by1ib290c3RyYXAgYXMgYW5cbiAqICAgYXBwbGljYXRpb24uIFRvIHJ1biBtdWx0aXBsZSBhcHBsaWNhdGlvbnMgaW4gYW4gSFRNTCBkb2N1bWVudCB5b3UgbXVzdCBtYW51YWxseSBib290c3RyYXAgdGhlbSB1c2luZ1xuICogICB7QGxpbmsgYW5ndWxhci5ib290c3RyYXB9IGluc3RlYWQuXG4gKiAtIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbnMgY2Fubm90IGJlIG5lc3RlZCB3aXRoaW4gZWFjaCBvdGhlci5cbiAqIC0gRG8gbm90IHVzZSBhIGRpcmVjdGl2ZSB0aGF0IHVzZXMge0BsaW5rIG5nLiRjb21waWxlI3RyYW5zY2x1c2lvbiB0cmFuc2NsdXNpb259IG9uIHRoZSBzYW1lIGVsZW1lbnQgYXMgYG5nQXBwYC5cbiAqICAgVGhpcyBpbmNsdWRlcyBkaXJlY3RpdmVzIHN1Y2ggYXMge0BsaW5rIG5nLm5nSWYgYG5nSWZgfSwge0BsaW5rIG5nLm5nSW5jbHVkZSBgbmdJbmNsdWRlYH0gYW5kXG4gKiAgIHtAbGluayBuZ1JvdXRlLm5nVmlldyBgbmdWaWV3YH0uXG4gKiAgIERvaW5nIHRoaXMgbWlzcGxhY2VzIHRoZSBhcHAge0BsaW5rIG5nLiRyb290RWxlbWVudCBgJHJvb3RFbGVtZW50YH0gYW5kIHRoZSBhcHAncyB7QGxpbmsgYXV0by4kaW5qZWN0b3IgaW5qZWN0b3J9LFxuICogICBjYXVzaW5nIGFuaW1hdGlvbnMgdG8gc3RvcCB3b3JraW5nIGFuZCBtYWtpbmcgdGhlIGluamVjdG9yIGluYWNjZXNzaWJsZSBmcm9tIG91dHNpZGUgdGhlIGFwcC5cbiAqXG4gKiBZb3UgY2FuIHNwZWNpZnkgYW4gKipBbmd1bGFySlMgbW9kdWxlKiogdG8gYmUgdXNlZCBhcyB0aGUgcm9vdCBtb2R1bGUgZm9yIHRoZSBhcHBsaWNhdGlvbi4gIFRoaXNcbiAqIG1vZHVsZSB3aWxsIGJlIGxvYWRlZCBpbnRvIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3J9IHdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGJvb3RzdHJhcHBlZC4gSXRcbiAqIHNob3VsZCBjb250YWluIHRoZSBhcHBsaWNhdGlvbiBjb2RlIG5lZWRlZCBvciBoYXZlIGRlcGVuZGVuY2llcyBvbiBvdGhlciBtb2R1bGVzIHRoYXQgd2lsbFxuICogY29udGFpbiB0aGUgY29kZS4gU2VlIHtAbGluayBhbmd1bGFyLm1vZHVsZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogSW4gdGhlIGV4YW1wbGUgYmVsb3cgaWYgdGhlIGBuZ0FwcGAgZGlyZWN0aXZlIHdlcmUgbm90IHBsYWNlZCBvbiB0aGUgYGh0bWxgIGVsZW1lbnQgdGhlbiB0aGVcbiAqIGRvY3VtZW50IHdvdWxkIG5vdCBiZSBjb21waWxlZCwgdGhlIGBBcHBDb250cm9sbGVyYCB3b3VsZCBub3QgYmUgaW5zdGFudGlhdGVkIGFuZCB0aGUgYHt7IGErYiB9fWBcbiAqIHdvdWxkIG5vdCBiZSByZXNvbHZlZCB0byBgM2AuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAjIyMgU2ltcGxlIFVzYWdlXG4gKlxuICogYG5nQXBwYCBpcyB0aGUgZWFzaWVzdCwgYW5kIG1vc3QgY29tbW9uIHdheSB0byBib290c3RyYXAgYW4gYXBwbGljYXRpb24uXG4gKlxuIDxleGFtcGxlIG1vZHVsZT1cIm5nQXBwRGVtb1wiIG5hbWU9XCJuZy1hcHBcIj5cbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJuZ0FwcERlbW9Db250cm9sbGVyXCI+XG4gICAgIEkgY2FuIGFkZDoge3thfX0gKyB7e2J9fSA9ICB7eyBhK2IgfX1cbiAgIDwvZGl2PlxuICAgPC9maWxlPlxuICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgYW5ndWxhci5tb2R1bGUoJ25nQXBwRGVtbycsIFtdKS5jb250cm9sbGVyKCduZ0FwcERlbW9Db250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICRzY29wZS5hID0gMTtcbiAgICAgJHNjb3BlLmIgPSAyO1xuICAgfSk7XG4gICA8L2ZpbGU+XG4gPC9leGFtcGxlPlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogIyMjIFdpdGggYG5nU3RyaWN0RGlgXG4gKlxuICogVXNpbmcgYG5nU3RyaWN0RGlgLCB5b3Ugd291bGQgc2VlIHNvbWV0aGluZyBsaWtlIHRoaXM6XG4gKlxuIDxleGFtcGxlIG5nLWFwcC1pbmNsdWRlZD1cInRydWVcIiBuYW1lPVwic3RyaWN0LWRpXCI+XG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgPGRpdiBuZy1hcHA9XCJuZ0FwcFN0cmljdERlbW9cIiBuZy1zdHJpY3QtZGk+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiR29vZENvbnRyb2xsZXIxXCI+XG4gICAgICAgICAgIEkgY2FuIGFkZDoge3thfX0gKyB7e2J9fSA9ICB7eyBhK2IgfX1cblxuICAgICAgICAgICA8cD5UaGlzIHJlbmRlcnMgYmVjYXVzZSB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBmYWlsIHRvXG4gICAgICAgICAgICAgIGluc3RhbnRpYXRlLCBieSB1c2luZyBleHBsaWNpdCBhbm5vdGF0aW9uIHN0eWxlIChzZWVcbiAgICAgICAgICAgICAgc2NyaXB0LmpzIGZvciBkZXRhaWxzKVxuICAgICAgICAgICA8L3A+XG4gICAgICAgPC9kaXY+XG5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJHb29kQ29udHJvbGxlcjJcIj5cbiAgICAgICAgICAgTmFtZTogPGlucHV0IG5nLW1vZGVsPVwibmFtZVwiPjxiciAvPlxuICAgICAgICAgICBIZWxsbywge3tuYW1lfX0hXG5cbiAgICAgICAgICAgPHA+VGhpcyByZW5kZXJzIGJlY2F1c2UgdGhlIGNvbnRyb2xsZXIgZG9lcyBub3QgZmFpbCB0b1xuICAgICAgICAgICAgICBpbnN0YW50aWF0ZSwgYnkgdXNpbmcgZXhwbGljaXQgYW5ub3RhdGlvbiBzdHlsZVxuICAgICAgICAgICAgICAoc2VlIHNjcmlwdC5qcyBmb3IgZGV0YWlscylcbiAgICAgICAgICAgPC9wPlxuICAgICAgIDwvZGl2PlxuXG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiQmFkQ29udHJvbGxlclwiPlxuICAgICAgICAgICBJIGNhbiBhZGQ6IHt7YX19ICsge3tifX0gPSAge3sgYStiIH19XG5cbiAgICAgICAgICAgPHA+VGhlIGNvbnRyb2xsZXIgY291bGQgbm90IGJlIGluc3RhbnRpYXRlZCwgZHVlIHRvIHJlbHlpbmdcbiAgICAgICAgICAgICAgb24gYXV0b21hdGljIGZ1bmN0aW9uIGFubm90YXRpb25zICh3aGljaCBhcmUgZGlzYWJsZWQgaW5cbiAgICAgICAgICAgICAgc3RyaWN0IG1vZGUpLiBBcyBzdWNoLCB0aGUgY29udGVudCBvZiB0aGlzIHNlY3Rpb24gaXMgbm90XG4gICAgICAgICAgICAgIGludGVycG9sYXRlZCwgYW5kIHRoZXJlIHNob3VsZCBiZSBhbiBlcnJvciBpbiB5b3VyIHdlYiBjb25zb2xlLlxuICAgICAgICAgICA8L3A+XG4gICAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgIDwvZmlsZT5cbiAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgIGFuZ3VsYXIubW9kdWxlKCduZ0FwcFN0cmljdERlbW8nLCBbXSlcbiAgICAgLy8gQmFkQ29udHJvbGxlciB3aWxsIGZhaWwgdG8gaW5zdGFudGlhdGUsIGR1ZSB0byByZWx5aW5nIG9uIGF1dG9tYXRpYyBmdW5jdGlvbiBhbm5vdGF0aW9uLFxuICAgICAvLyByYXRoZXIgdGhhbiBhbiBleHBsaWNpdCBhbm5vdGF0aW9uXG4gICAgIC5jb250cm9sbGVyKCdCYWRDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgJHNjb3BlLmEgPSAxO1xuICAgICAgICRzY29wZS5iID0gMjtcbiAgICAgfSlcbiAgICAgLy8gVW5saWtlIEJhZENvbnRyb2xsZXIsIEdvb2RDb250cm9sbGVyMSBhbmQgR29vZENvbnRyb2xsZXIyIHdpbGwgbm90IGZhaWwgdG8gYmUgaW5zdGFudGlhdGVkLFxuICAgICAvLyBkdWUgdG8gdXNpbmcgZXhwbGljaXQgYW5ub3RhdGlvbnMgdXNpbmcgdGhlIGFycmF5IHN0eWxlIGFuZCAkaW5qZWN0IHByb3BlcnR5LCByZXNwZWN0aXZlbHkuXG4gICAgIC5jb250cm9sbGVyKCdHb29kQ29udHJvbGxlcjEnLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICRzY29wZS5hID0gMTtcbiAgICAgICAkc2NvcGUuYiA9IDI7XG4gICAgIH1dKVxuICAgICAuY29udHJvbGxlcignR29vZENvbnRyb2xsZXIyJywgR29vZENvbnRyb2xsZXIyKTtcbiAgICAgZnVuY3Rpb24gR29vZENvbnRyb2xsZXIyKCRzY29wZSkge1xuICAgICAgICRzY29wZS5uYW1lID0gJ1dvcmxkJztcbiAgICAgfVxuICAgICBHb29kQ29udHJvbGxlcjIuJGluamVjdCA9IFsnJHNjb3BlJ107XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICBkaXZbbmctY29udHJvbGxlcl0ge1xuICAgICAgIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgICAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgYm9yZGVyOiAxcHggc29saWQ7XG4gICAgICAgcGFkZGluZzogLjVlbTtcbiAgIH1cbiAgIGRpdltuZy1jb250cm9sbGVyXj1Hb29kXSB7XG4gICAgICAgYm9yZGVyLWNvbG9yOiAjZDZlOWM2O1xuICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkZmYwZDg7XG4gICAgICAgY29sb3I6ICMzYzc2M2Q7XG4gICB9XG4gICBkaXZbbmctY29udHJvbGxlcl49QmFkXSB7XG4gICAgICAgYm9yZGVyLWNvbG9yOiAjZWJjY2QxO1xuICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMmRlZGU7XG4gICAgICAgY29sb3I6ICNhOTQ0NDI7XG4gICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgIH1cbiAgIDwvZmlsZT5cbiA8L2V4YW1wbGU+XG4gKi9cbmZ1bmN0aW9uIGFuZ3VsYXJJbml0KGVsZW1lbnQsIGJvb3RzdHJhcCkge1xuICB2YXIgYXBwRWxlbWVudCxcbiAgICAgIG1vZHVsZSxcbiAgICAgIGNvbmZpZyA9IHt9O1xuXG4gIC8vIFRoZSBlbGVtZW50IGBlbGVtZW50YCBoYXMgcHJpb3JpdHkgb3ZlciBhbnkgb3RoZXIgZWxlbWVudC5cbiAgZm9yRWFjaChuZ0F0dHJQcmVmaXhlcywgZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgdmFyIG5hbWUgPSBwcmVmaXggKyAnYXBwJztcblxuICAgIGlmICghYXBwRWxlbWVudCAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZShuYW1lKSkge1xuICAgICAgYXBwRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICBtb2R1bGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG4gIH0pO1xuICBmb3JFYWNoKG5nQXR0clByZWZpeGVzLCBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICB2YXIgbmFtZSA9IHByZWZpeCArICdhcHAnO1xuICAgIHZhciBjYW5kaWRhdGU7XG5cbiAgICBpZiAoIWFwcEVsZW1lbnQgJiYgKGNhbmRpZGF0ZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignWycgKyBuYW1lLnJlcGxhY2UoJzonLCAnXFxcXDonKSArICddJykpKSB7XG4gICAgICBhcHBFbGVtZW50ID0gY2FuZGlkYXRlO1xuICAgICAgbW9kdWxlID0gY2FuZGlkYXRlLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG4gIH0pO1xuICBpZiAoYXBwRWxlbWVudCkge1xuICAgIGlmICghaXNBdXRvQm9vdHN0cmFwQWxsb3dlZCkge1xuICAgICAgd2luZG93LmNvbnNvbGUuZXJyb3IoJ0FuZ3VsYXJKUzogZGlzYWJsaW5nIGF1dG9tYXRpYyBib290c3RyYXAuIDxzY3JpcHQ+IHByb3RvY29sIGluZGljYXRlcyAnICtcbiAgICAgICAgICAnYW4gZXh0ZW5zaW9uLCBkb2N1bWVudC5sb2NhdGlvbi5ocmVmIGRvZXMgbm90IG1hdGNoLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25maWcuc3RyaWN0RGkgPSBnZXROZ0F0dHJpYnV0ZShhcHBFbGVtZW50LCAnc3RyaWN0LWRpJykgIT09IG51bGw7XG4gICAgYm9vdHN0cmFwKGFwcEVsZW1lbnQsIG1vZHVsZSA/IFttb2R1bGVdIDogW10sIGNvbmZpZyk7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuYm9vdHN0cmFwXG4gKiBAbW9kdWxlIG5nXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzZSB0aGlzIGZ1bmN0aW9uIHRvIG1hbnVhbGx5IHN0YXJ0IHVwIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSB7QGxpbmsgZ3VpZGUvYm9vdHN0cmFwIEJvb3RzdHJhcCBndWlkZX0uXG4gKlxuICogQW5ndWxhckpTIHdpbGwgZGV0ZWN0IGlmIGl0IGhhcyBiZWVuIGxvYWRlZCBpbnRvIHRoZSBicm93c2VyIG1vcmUgdGhhbiBvbmNlIGFuZCBvbmx5IGFsbG93IHRoZVxuICogZmlyc3QgbG9hZGVkIHNjcmlwdCB0byBiZSBib290c3RyYXBwZWQgYW5kIHdpbGwgcmVwb3J0IGEgd2FybmluZyB0byB0aGUgYnJvd3NlciBjb25zb2xlIGZvclxuICogZWFjaCBvZiB0aGUgc3Vic2VxdWVudCBzY3JpcHRzLiBUaGlzIHByZXZlbnRzIHN0cmFuZ2UgcmVzdWx0cyBpbiBhcHBsaWNhdGlvbnMsIHdoZXJlIG90aGVyd2lzZVxuICogbXVsdGlwbGUgaW5zdGFuY2VzIG9mIEFuZ3VsYXJKUyB0cnkgdG8gd29yayBvbiB0aGUgRE9NLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogUHJvdHJhY3RvciBiYXNlZCBlbmQtdG8tZW5kIHRlc3RzIGNhbm5vdCB1c2UgdGhpcyBmdW5jdGlvbiB0byBib290c3RyYXAgbWFudWFsbHkuXG4gKiBUaGV5IG11c3QgdXNlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdBcHAgbmdBcHB9LlxuICogPC9kaXY+XG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBEbyBub3QgYm9vdHN0cmFwIHRoZSBhcHAgb24gYW4gZWxlbWVudCB3aXRoIGEgZGlyZWN0aXZlIHRoYXQgdXNlcyB7QGxpbmsgbmcuJGNvbXBpbGUjdHJhbnNjbHVzaW9uIHRyYW5zY2x1c2lvbn0sXG4gKiBzdWNoIGFzIHtAbGluayBuZy5uZ0lmIGBuZ0lmYH0sIHtAbGluayBuZy5uZ0luY2x1ZGUgYG5nSW5jbHVkZWB9IGFuZCB7QGxpbmsgbmdSb3V0ZS5uZ1ZpZXcgYG5nVmlld2B9LlxuICogRG9pbmcgdGhpcyBtaXNwbGFjZXMgdGhlIGFwcCB7QGxpbmsgbmcuJHJvb3RFbGVtZW50IGAkcm9vdEVsZW1lbnRgfSBhbmQgdGhlIGFwcCdzIHtAbGluayBhdXRvLiRpbmplY3RvciBpbmplY3Rvcn0sXG4gKiBjYXVzaW5nIGFuaW1hdGlvbnMgdG8gc3RvcCB3b3JraW5nIGFuZCBtYWtpbmcgdGhlIGluamVjdG9yIGluYWNjZXNzaWJsZSBmcm9tIG91dHNpZGUgdGhlIGFwcC5cbiAqIDwvZGl2PlxuICpcbiAqIGBgYGh0bWxcbiAqIDwhZG9jdHlwZSBodG1sPlxuICogPGh0bWw+XG4gKiA8Ym9keT5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIldlbGNvbWVDb250cm9sbGVyXCI+XG4gKiAgIHt7Z3JlZXRpbmd9fVxuICogPC9kaXY+XG4gKlxuICogPHNjcmlwdCBzcmM9XCJhbmd1bGFyLmpzXCI+PC9zY3JpcHQ+XG4gKiA8c2NyaXB0PlxuICogICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2RlbW8nLCBbXSlcbiAqICAgLmNvbnRyb2xsZXIoJ1dlbGNvbWVDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAkc2NvcGUuZ3JlZXRpbmcgPSAnV2VsY29tZSEnO1xuICogICB9KTtcbiAqICAgYW5ndWxhci5ib290c3RyYXAoZG9jdW1lbnQsIFsnZGVtbyddKTtcbiAqIDwvc2NyaXB0PlxuICogPC9ib2R5PlxuICogPC9odG1sPlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IERPTSBlbGVtZW50IHdoaWNoIGlzIHRoZSByb290IG9mIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi5cbiAqIEBwYXJhbSB7QXJyYXk8U3RyaW5nfEZ1bmN0aW9ufEFycmF5Pj19IG1vZHVsZXMgYW4gYXJyYXkgb2YgbW9kdWxlcyB0byBsb2FkIGludG8gdGhlIGFwcGxpY2F0aW9uLlxuICogICAgIEVhY2ggaXRlbSBpbiB0aGUgYXJyYXkgc2hvdWxkIGJlIHRoZSBuYW1lIG9mIGEgcHJlZGVmaW5lZCBtb2R1bGUgb3IgYSAoREkgYW5ub3RhdGVkKVxuICogICAgIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkIGJ5IHRoZSBpbmplY3RvciBhcyBhIGBjb25maWdgIGJsb2NrLlxuICogICAgIFNlZToge0BsaW5rIGFuZ3VsYXIubW9kdWxlIG1vZHVsZXN9XG4gKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBhbiBvYmplY3QgZm9yIGRlZmluaW5nIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIGFwcGxpY2F0aW9uLiBUaGVcbiAqICAgICBmb2xsb3dpbmcga2V5cyBhcmUgc3VwcG9ydGVkOlxuICpcbiAqICogYHN0cmljdERpYCAtIGRpc2FibGUgYXV0b21hdGljIGZ1bmN0aW9uIGFubm90YXRpb24gZm9yIHRoZSBhcHBsaWNhdGlvbi4gVGhpcyBpcyBtZWFudCB0b1xuICogICBhc3Npc3QgaW4gZmluZGluZyBidWdzIHdoaWNoIGJyZWFrIG1pbmlmaWVkIGNvZGUuIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gKlxuICogQHJldHVybnMge2F1dG8uJGluamVjdG9yfSBSZXR1cm5zIHRoZSBuZXdseSBjcmVhdGVkIGluamVjdG9yIGZvciB0aGlzIGFwcC5cbiAqL1xuZnVuY3Rpb24gYm9vdHN0cmFwKGVsZW1lbnQsIG1vZHVsZXMsIGNvbmZpZykge1xuICBpZiAoIWlzT2JqZWN0KGNvbmZpZykpIGNvbmZpZyA9IHt9O1xuICB2YXIgZGVmYXVsdENvbmZpZyA9IHtcbiAgICBzdHJpY3REaTogZmFsc2VcbiAgfTtcbiAgY29uZmlnID0gZXh0ZW5kKGRlZmF1bHRDb25maWcsIGNvbmZpZyk7XG4gIHZhciBkb0Jvb3RzdHJhcCA9IGZ1bmN0aW9uKCkge1xuICAgIGVsZW1lbnQgPSBqcUxpdGUoZWxlbWVudCk7XG5cbiAgICBpZiAoZWxlbWVudC5pbmplY3RvcigpKSB7XG4gICAgICB2YXIgdGFnID0gKGVsZW1lbnRbMF0gPT09IHdpbmRvdy5kb2N1bWVudCkgPyAnZG9jdW1lbnQnIDogc3RhcnRpbmdUYWcoZWxlbWVudCk7XG4gICAgICAvLyBFbmNvZGUgYW5nbGUgYnJhY2tldHMgdG8gcHJldmVudCBpbnB1dCBmcm9tIGJlaW5nIHNhbml0aXplZCB0byBlbXB0eSBzdHJpbmcgIzg2ODMuXG4gICAgICB0aHJvdyBuZ01pbkVycihcbiAgICAgICAgICAnYnRzdHJwZCcsXG4gICAgICAgICAgJ0FwcCBhbHJlYWR5IGJvb3RzdHJhcHBlZCB3aXRoIHRoaXMgZWxlbWVudCBcXCd7MH1cXCcnLFxuICAgICAgICAgIHRhZy5yZXBsYWNlKC88LywnJmx0OycpLnJlcGxhY2UoLz4vLCcmZ3Q7JykpO1xuICAgIH1cblxuICAgIG1vZHVsZXMgPSBtb2R1bGVzIHx8IFtdO1xuICAgIG1vZHVsZXMudW5zaGlmdChbJyRwcm92aWRlJywgZnVuY3Rpb24oJHByb3ZpZGUpIHtcbiAgICAgICRwcm92aWRlLnZhbHVlKCckcm9vdEVsZW1lbnQnLCBlbGVtZW50KTtcbiAgICB9XSk7XG5cbiAgICBpZiAoY29uZmlnLmRlYnVnSW5mb0VuYWJsZWQpIHtcbiAgICAgIC8vIFB1c2hpbmcgc28gdGhhdCB0aGlzIG92ZXJyaWRlcyBgZGVidWdJbmZvRW5hYmxlZGAgc2V0dGluZyBkZWZpbmVkIGluIHVzZXIncyBgbW9kdWxlc2AuXG4gICAgICBtb2R1bGVzLnB1c2goWyckY29tcGlsZVByb3ZpZGVyJywgZnVuY3Rpb24oJGNvbXBpbGVQcm92aWRlcikge1xuICAgICAgICAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQodHJ1ZSk7XG4gICAgICB9XSk7XG4gICAgfVxuXG4gICAgbW9kdWxlcy51bnNoaWZ0KCduZycpO1xuICAgIHZhciBpbmplY3RvciA9IGNyZWF0ZUluamVjdG9yKG1vZHVsZXMsIGNvbmZpZy5zdHJpY3REaSk7XG4gICAgaW5qZWN0b3IuaW52b2tlKFsnJHJvb3RTY29wZScsICckcm9vdEVsZW1lbnQnLCAnJGNvbXBpbGUnLCAnJGluamVjdG9yJyxcbiAgICAgICBmdW5jdGlvbiBib290c3RyYXBBcHBseShzY29wZSwgZWxlbWVudCwgY29tcGlsZSwgaW5qZWN0b3IpIHtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQuZGF0YSgnJGluamVjdG9yJywgaW5qZWN0b3IpO1xuICAgICAgICAgIGNvbXBpbGUoZWxlbWVudCkoc2NvcGUpO1xuICAgICAgICB9KTtcbiAgICAgIH1dXG4gICAgKTtcbiAgICByZXR1cm4gaW5qZWN0b3I7XG4gIH07XG5cbiAgdmFyIE5HX0VOQUJMRV9ERUJVR19JTkZPID0gL15OR19FTkFCTEVfREVCVUdfSU5GTyEvO1xuICB2YXIgTkdfREVGRVJfQk9PVFNUUkFQID0gL15OR19ERUZFUl9CT09UU1RSQVAhLztcblxuICBpZiAod2luZG93ICYmIE5HX0VOQUJMRV9ERUJVR19JTkZPLnRlc3Qod2luZG93Lm5hbWUpKSB7XG4gICAgY29uZmlnLmRlYnVnSW5mb0VuYWJsZWQgPSB0cnVlO1xuICAgIHdpbmRvdy5uYW1lID0gd2luZG93Lm5hbWUucmVwbGFjZShOR19FTkFCTEVfREVCVUdfSU5GTywgJycpO1xuICB9XG5cbiAgaWYgKHdpbmRvdyAmJiAhTkdfREVGRVJfQk9PVFNUUkFQLnRlc3Qod2luZG93Lm5hbWUpKSB7XG4gICAgcmV0dXJuIGRvQm9vdHN0cmFwKCk7XG4gIH1cblxuICB3aW5kb3cubmFtZSA9IHdpbmRvdy5uYW1lLnJlcGxhY2UoTkdfREVGRVJfQk9PVFNUUkFQLCAnJyk7XG4gIGFuZ3VsYXIucmVzdW1lQm9vdHN0cmFwID0gZnVuY3Rpb24oZXh0cmFNb2R1bGVzKSB7XG4gICAgZm9yRWFjaChleHRyYU1vZHVsZXMsIGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgbW9kdWxlcy5wdXNoKG1vZHVsZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRvQm9vdHN0cmFwKCk7XG4gIH07XG5cbiAgaWYgKGlzRnVuY3Rpb24oYW5ndWxhci5yZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCkpIHtcbiAgICBhbmd1bGFyLnJlc3VtZURlZmVycmVkQm9vdHN0cmFwKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIucmVsb2FkV2l0aERlYnVnSW5mb1xuICogQG1vZHVsZSBuZ1xuICogQGRlc2NyaXB0aW9uXG4gKiBVc2UgdGhpcyBmdW5jdGlvbiB0byByZWxvYWQgdGhlIGN1cnJlbnQgYXBwbGljYXRpb24gd2l0aCBkZWJ1ZyBpbmZvcm1hdGlvbiB0dXJuZWQgb24uXG4gKiBUaGlzIHRha2VzIHByZWNlZGVuY2Ugb3ZlciBhIGNhbGwgdG8gYCRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZChmYWxzZSlgLlxuICpcbiAqIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkZWJ1Z0luZm9FbmFibGVkfSBmb3IgbW9yZS5cbiAqL1xuZnVuY3Rpb24gcmVsb2FkV2l0aERlYnVnSW5mbygpIHtcbiAgd2luZG93Lm5hbWUgPSAnTkdfRU5BQkxFX0RFQlVHX0lORk8hJyArIHdpbmRvdy5uYW1lO1xuICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG59XG5cbi8qKlxuICogQG5hbWUgYW5ndWxhci5nZXRUZXN0YWJpbGl0eVxuICogQG1vZHVsZSBuZ1xuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIHRlc3RhYmlsaXR5IHNlcnZpY2UgZm9yIHRoZSBpbnN0YW5jZSBvZiBBbmd1bGFySlMgb24gdGhlIGdpdmVuXG4gKiBlbGVtZW50LlxuICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IERPTSBlbGVtZW50IHdoaWNoIGlzIHRoZSByb290IG9mIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0VGVzdGFiaWxpdHkocm9vdEVsZW1lbnQpIHtcbiAgdmFyIGluamVjdG9yID0gYW5ndWxhci5lbGVtZW50KHJvb3RFbGVtZW50KS5pbmplY3RvcigpO1xuICBpZiAoIWluamVjdG9yKSB7XG4gICAgdGhyb3cgbmdNaW5FcnIoJ3Rlc3QnLFxuICAgICAgJ25vIGluamVjdG9yIGZvdW5kIGZvciBlbGVtZW50IGFyZ3VtZW50IHRvIGdldFRlc3RhYmlsaXR5Jyk7XG4gIH1cbiAgcmV0dXJuIGluamVjdG9yLmdldCgnJCR0ZXN0YWJpbGl0eScpO1xufVxuXG52YXIgU05BS0VfQ0FTRV9SRUdFWFAgPSAvW0EtWl0vZztcbmZ1bmN0aW9uIHNuYWtlX2Nhc2UobmFtZSwgc2VwYXJhdG9yKSB7XG4gIHNlcGFyYXRvciA9IHNlcGFyYXRvciB8fCAnXyc7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoU05BS0VfQ0FTRV9SRUdFWFAsIGZ1bmN0aW9uKGxldHRlciwgcG9zKSB7XG4gICAgcmV0dXJuIChwb3MgPyBzZXBhcmF0b3IgOiAnJykgKyBsZXR0ZXIudG9Mb3dlckNhc2UoKTtcbiAgfSk7XG59XG5cbnZhciBiaW5kSlF1ZXJ5RmlyZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIGJpbmRKUXVlcnkoKSB7XG4gIHZhciBvcmlnaW5hbENsZWFuRGF0YTtcblxuICBpZiAoYmluZEpRdWVyeUZpcmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gYmluZCB0byBqUXVlcnkgaWYgcHJlc2VudDtcbiAgdmFyIGpxTmFtZSA9IGpxKCk7XG4gIGpRdWVyeSA9IGlzVW5kZWZpbmVkKGpxTmFtZSkgPyB3aW5kb3cualF1ZXJ5IDogICAvLyB1c2UgalF1ZXJ5IChpZiBwcmVzZW50KVxuICAgICAgICAgICAhanFOYW1lICAgICAgICAgICAgID8gdW5kZWZpbmVkICAgICA6ICAgLy8gdXNlIGpxTGl0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93W2pxTmFtZV07ICAgLy8gdXNlIGpRdWVyeSBzcGVjaWZpZWQgYnkgYG5nSnFgXG5cbiAgLy8gVXNlIGpRdWVyeSBpZiBpdCBleGlzdHMgd2l0aCBwcm9wZXIgZnVuY3Rpb25hbGl0eSwgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gdXMuXG4gIC8vIEFuZ3VsYXJKUyAxLjIrIHJlcXVpcmVzIGpRdWVyeSAxLjcrIGZvciBvbigpL29mZigpIHN1cHBvcnQuXG4gIC8vIEFuZ3VsYXJKUyAxLjMrIHRlY2huaWNhbGx5IHJlcXVpcmVzIGF0IGxlYXN0IGpRdWVyeSAyLjErIGJ1dCBpdCBtYXkgd29yayB3aXRoIG9sZGVyXG4gIC8vIHZlcnNpb25zLiBJdCB3aWxsIG5vdCB3b3JrIGZvciBzdXJlIHdpdGggalF1ZXJ5IDwxLjcsIHRob3VnaC5cbiAgaWYgKGpRdWVyeSAmJiBqUXVlcnkuZm4ub24pIHtcbiAgICBqcUxpdGUgPSBqUXVlcnk7XG4gICAgZXh0ZW5kKGpRdWVyeS5mbiwge1xuICAgICAgc2NvcGU6IEpRTGl0ZVByb3RvdHlwZS5zY29wZSxcbiAgICAgIGlzb2xhdGVTY29wZTogSlFMaXRlUHJvdG90eXBlLmlzb2xhdGVTY29wZSxcbiAgICAgIGNvbnRyb2xsZXI6IC8qKiBAdHlwZSB7P30gKi8gKEpRTGl0ZVByb3RvdHlwZSkuY29udHJvbGxlcixcbiAgICAgIGluamVjdG9yOiBKUUxpdGVQcm90b3R5cGUuaW5qZWN0b3IsXG4gICAgICBpbmhlcml0ZWREYXRhOiBKUUxpdGVQcm90b3R5cGUuaW5oZXJpdGVkRGF0YVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGpxTGl0ZSA9IEpRTGl0ZTtcbiAgfVxuXG4gIC8vIEFsbCBub2RlcyByZW1vdmVkIGZyb20gdGhlIERPTSB2aWEgdmFyaW91cyBqcUxpdGUvalF1ZXJ5IEFQSXMgbGlrZSAucmVtb3ZlKClcbiAgLy8gYXJlIHBhc3NlZCB0aHJvdWdoIGpxTGl0ZS9qUXVlcnkuY2xlYW5EYXRhLiBNb25rZXktcGF0Y2ggdGhpcyBtZXRob2QgdG8gZmlyZVxuICAvLyB0aGUgJGRlc3Ryb3kgZXZlbnQgb24gYWxsIHJlbW92ZWQgbm9kZXMuXG4gIG9yaWdpbmFsQ2xlYW5EYXRhID0ganFMaXRlLmNsZWFuRGF0YTtcbiAganFMaXRlLmNsZWFuRGF0YSA9IGZ1bmN0aW9uKGVsZW1zKSB7XG4gICAgdmFyIGV2ZW50cztcbiAgICBmb3IgKHZhciBpID0gMCwgZWxlbTsgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrKSB7XG4gICAgICBldmVudHMgPSBqcUxpdGUuX2RhdGEoZWxlbSkuZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHMuJGRlc3Ryb3kpIHtcbiAgICAgICAganFMaXRlKGVsZW0pLnRyaWdnZXJIYW5kbGVyKCckZGVzdHJveScpO1xuICAgICAgfVxuICAgIH1cbiAgICBvcmlnaW5hbENsZWFuRGF0YShlbGVtcyk7XG4gIH07XG5cbiAgYW5ndWxhci5lbGVtZW50ID0ganFMaXRlO1xuXG4gIC8vIFByZXZlbnQgZG91YmxlLXByb3h5aW5nLlxuICBiaW5kSlF1ZXJ5RmlyZWQgPSB0cnVlO1xufVxuXG4vKipcbiAqIHRocm93IGVycm9yIGlmIHRoZSBhcmd1bWVudCBpcyBmYWxzeS5cbiAqL1xuZnVuY3Rpb24gYXNzZXJ0QXJnKGFyZywgbmFtZSwgcmVhc29uKSB7XG4gIGlmICghYXJnKSB7XG4gICAgdGhyb3cgbmdNaW5FcnIoJ2FyZXEnLCAnQXJndW1lbnQgXFwnezB9XFwnIGlzIHsxfScsIChuYW1lIHx8ICc/JyksIChyZWFzb24gfHwgJ3JlcXVpcmVkJykpO1xuICB9XG4gIHJldHVybiBhcmc7XG59XG5cbmZ1bmN0aW9uIGFzc2VydEFyZ0ZuKGFyZywgbmFtZSwgYWNjZXB0QXJyYXlBbm5vdGF0aW9uKSB7XG4gIGlmIChhY2NlcHRBcnJheUFubm90YXRpb24gJiYgaXNBcnJheShhcmcpKSB7XG4gICAgICBhcmcgPSBhcmdbYXJnLmxlbmd0aCAtIDFdO1xuICB9XG5cbiAgYXNzZXJ0QXJnKGlzRnVuY3Rpb24oYXJnKSwgbmFtZSwgJ25vdCBhIGZ1bmN0aW9uLCBnb3QgJyArXG4gICAgICAoYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnID8gYXJnLmNvbnN0cnVjdG9yLm5hbWUgfHwgJ09iamVjdCcgOiB0eXBlb2YgYXJnKSk7XG4gIHJldHVybiBhcmc7XG59XG5cbi8qKlxuICogdGhyb3cgZXJyb3IgaWYgdGhlIG5hbWUgZ2l2ZW4gaXMgaGFzT3duUHJvcGVydHlcbiAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSAgICB0aGUgbmFtZSB0byB0ZXN0XG4gKiBAcGFyYW0gIHtTdHJpbmd9IGNvbnRleHQgdGhlIGNvbnRleHQgaW4gd2hpY2ggdGhlIG5hbWUgaXMgdXNlZCwgc3VjaCBhcyBtb2R1bGUgb3IgZGlyZWN0aXZlXG4gKi9cbmZ1bmN0aW9uIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsIGNvbnRleHQpIHtcbiAgaWYgKG5hbWUgPT09ICdoYXNPd25Qcm9wZXJ0eScpIHtcbiAgICB0aHJvdyBuZ01pbkVycignYmFkbmFtZScsICdoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZScsIGNvbnRleHQpO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSB2YWx1ZSBhY2Nlc3NpYmxlIGZyb20gdGhlIG9iamVjdCBieSBwYXRoLiBBbnkgdW5kZWZpbmVkIHRyYXZlcnNhbHMgYXJlIGlnbm9yZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogc3RhcnRpbmcgb2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aCBwYXRoIHRvIHRyYXZlcnNlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtiaW5kRm5Ub1Njb3BlPXRydWVdXG4gKiBAcmV0dXJucyB7T2JqZWN0fSB2YWx1ZSBhcyBhY2Nlc3NpYmxlIGJ5IHBhdGhcbiAqL1xuLy9UT0RPKG1pc2tvKTogdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZW1vdmVkXG5mdW5jdGlvbiBnZXR0ZXIob2JqLCBwYXRoLCBiaW5kRm5Ub1Njb3BlKSB7XG4gIGlmICghcGF0aCkgcmV0dXJuIG9iajtcbiAgdmFyIGtleXMgPSBwYXRoLnNwbGl0KCcuJyk7XG4gIHZhciBrZXk7XG4gIHZhciBsYXN0SW5zdGFuY2UgPSBvYmo7XG4gIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAga2V5ID0ga2V5c1tpXTtcbiAgICBpZiAob2JqKSB7XG4gICAgICBvYmogPSAobGFzdEluc3RhbmNlID0gb2JqKVtrZXldO1xuICAgIH1cbiAgfVxuICBpZiAoIWJpbmRGblRvU2NvcGUgJiYgaXNGdW5jdGlvbihvYmopKSB7XG4gICAgcmV0dXJuIGJpbmQobGFzdEluc3RhbmNlLCBvYmopO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBET00gc2libGluZ3MgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3Qgbm9kZSBpbiB0aGUgZ2l2ZW4gYXJyYXkuXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBsaWtlIG9iamVjdFxuICogQHJldHVybnMge0FycmF5fSB0aGUgaW5wdXR0ZWQgb2JqZWN0IG9yIGEganFMaXRlIGNvbGxlY3Rpb24gY29udGFpbmluZyB0aGUgbm9kZXNcbiAqL1xuZnVuY3Rpb24gZ2V0QmxvY2tOb2Rlcyhub2Rlcykge1xuICAvLyBUT0RPKHBlcmYpOiB1cGRhdGUgYG5vZGVzYCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IG9iamVjdD9cbiAgdmFyIG5vZGUgPSBub2Rlc1swXTtcbiAgdmFyIGVuZE5vZGUgPSBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXTtcbiAgdmFyIGJsb2NrTm9kZXM7XG5cbiAgZm9yICh2YXIgaSA9IDE7IG5vZGUgIT09IGVuZE5vZGUgJiYgKG5vZGUgPSBub2RlLm5leHRTaWJsaW5nKTsgaSsrKSB7XG4gICAgaWYgKGJsb2NrTm9kZXMgfHwgbm9kZXNbaV0gIT09IG5vZGUpIHtcbiAgICAgIGlmICghYmxvY2tOb2Rlcykge1xuICAgICAgICBibG9ja05vZGVzID0ganFMaXRlKHNsaWNlLmNhbGwobm9kZXMsIDAsIGkpKTtcbiAgICAgIH1cbiAgICAgIGJsb2NrTm9kZXMucHVzaChub2RlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYmxvY2tOb2RlcyB8fCBub2Rlcztcbn1cblxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgb2JqZWN0IHdpdGhvdXQgYSBwcm90b3R5cGUuIFRoaXMgb2JqZWN0IGlzIHVzZWZ1bCBmb3IgbG9va3VwIHdpdGhvdXQgaGF2aW5nIHRvXG4gKiBndWFyZCBhZ2FpbnN0IHByb3RvdHlwaWNhbGx5IGluaGVyaXRlZCBwcm9wZXJ0aWVzIHZpYSBoYXNPd25Qcm9wZXJ0eS5cbiAqXG4gKiBSZWxhdGVkIG1pY3JvLWJlbmNobWFya3M6XG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL29iamVjdC1jcmVhdGUyXG4gKiAtIGh0dHA6Ly9qc3BlcmYuY29tL3Byb3RvLW1hcC1sb29rdXAvMlxuICogLSBodHRwOi8vanNwZXJmLmNvbS9mb3ItaW4tdnMtb2JqZWN0LWtleXMyXG4gKlxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlTWFwKCkge1xuICByZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7IC8vIG51bGwgfHwgdW5kZWZpbmVkXG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICB2YWx1ZSA9ICcnICsgdmFsdWU7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKGhhc0N1c3RvbVRvU3RyaW5nKHZhbHVlKSAmJiAhaXNBcnJheSh2YWx1ZSkgJiYgIWlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB0b0pzb24odmFsdWUpO1xuICAgICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG52YXIgTk9ERV9UWVBFX0VMRU1FTlQgPSAxO1xudmFyIE5PREVfVFlQRV9BVFRSSUJVVEUgPSAyO1xudmFyIE5PREVfVFlQRV9URVhUID0gMztcbnZhciBOT0RFX1RZUEVfQ09NTUVOVCA9IDg7XG52YXIgTk9ERV9UWVBFX0RPQ1VNRU5UID0gOTtcbnZhciBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlQgPSAxMTtcblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgYW5ndWxhci5Nb2R1bGVcbiAqIEBtb2R1bGUgbmdcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEludGVyZmFjZSBmb3IgY29uZmlndXJpbmcgQW5ndWxhckpTIHtAbGluayBhbmd1bGFyLm1vZHVsZSBtb2R1bGVzfS5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cE1vZHVsZUxvYWRlcih3aW5kb3cpIHtcblxuICB2YXIgJGluamVjdG9yTWluRXJyID0gbWluRXJyKCckaW5qZWN0b3InKTtcbiAgdmFyIG5nTWluRXJyID0gbWluRXJyKCduZycpO1xuXG4gIGZ1bmN0aW9uIGVuc3VyZShvYmosIG5hbWUsIGZhY3RvcnkpIHtcbiAgICByZXR1cm4gb2JqW25hbWVdIHx8IChvYmpbbmFtZV0gPSBmYWN0b3J5KCkpO1xuICB9XG5cbiAgdmFyIGFuZ3VsYXIgPSBlbnN1cmUod2luZG93LCAnYW5ndWxhcicsIE9iamVjdCk7XG5cbiAgLy8gV2UgbmVlZCB0byBleHBvc2UgYGFuZ3VsYXIuJCRtaW5FcnJgIHRvIG1vZHVsZXMgc3VjaCBhcyBgbmdSZXNvdXJjZWAgdGhhdCByZWZlcmVuY2UgaXQgZHVyaW5nIGJvb3RzdHJhcFxuICBhbmd1bGFyLiQkbWluRXJyID0gYW5ndWxhci4kJG1pbkVyciB8fCBtaW5FcnI7XG5cbiAgcmV0dXJuIGVuc3VyZShhbmd1bGFyLCAnbW9kdWxlJywgZnVuY3Rpb24oKSB7XG4gICAgLyoqIEB0eXBlIHtPYmplY3QuPHN0cmluZywgYW5ndWxhci5Nb2R1bGU+fSAqL1xuICAgIHZhciBtb2R1bGVzID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICAgKiBAbmFtZSBhbmd1bGFyLm1vZHVsZVxuICAgICAqIEBtb2R1bGUgbmdcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIFRoZSBgYW5ndWxhci5tb2R1bGVgIGlzIGEgZ2xvYmFsIHBsYWNlIGZvciBjcmVhdGluZywgcmVnaXN0ZXJpbmcgYW5kIHJldHJpZXZpbmcgQW5ndWxhckpTXG4gICAgICogbW9kdWxlcy5cbiAgICAgKiBBbGwgbW9kdWxlcyAoQW5ndWxhckpTIGNvcmUgb3IgM3JkIHBhcnR5KSB0aGF0IHNob3VsZCBiZSBhdmFpbGFibGUgdG8gYW4gYXBwbGljYXRpb24gbXVzdCBiZVxuICAgICAqIHJlZ2lzdGVyZWQgdXNpbmcgdGhpcyBtZWNoYW5pc20uXG4gICAgICpcbiAgICAgKiBQYXNzaW5nIG9uZSBhcmd1bWVudCByZXRyaWV2ZXMgYW4gZXhpc3Rpbmcge0BsaW5rIGFuZ3VsYXIuTW9kdWxlfSxcbiAgICAgKiB3aGVyZWFzIHBhc3NpbmcgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCBjcmVhdGVzIGEgbmV3IHtAbGluayBhbmd1bGFyLk1vZHVsZX1cbiAgICAgKlxuICAgICAqXG4gICAgICogIyBNb2R1bGVcbiAgICAgKlxuICAgICAqIEEgbW9kdWxlIGlzIGEgY29sbGVjdGlvbiBvZiBzZXJ2aWNlcywgZGlyZWN0aXZlcywgY29udHJvbGxlcnMsIGZpbHRlcnMsIGFuZCBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9uLlxuICAgICAqIGBhbmd1bGFyLm1vZHVsZWAgaXMgdXNlZCB0byBjb25maWd1cmUgdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBDcmVhdGUgYSBuZXcgbW9kdWxlXG4gICAgICogdmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ215TW9kdWxlJywgW10pO1xuICAgICAqXG4gICAgICogLy8gcmVnaXN0ZXIgYSBuZXcgc2VydmljZVxuICAgICAqIG15TW9kdWxlLnZhbHVlKCdhcHBOYW1lJywgJ015Q29vbEFwcCcpO1xuICAgICAqXG4gICAgICogLy8gY29uZmlndXJlIGV4aXN0aW5nIHNlcnZpY2VzIGluc2lkZSBpbml0aWFsaXphdGlvbiBibG9ja3MuXG4gICAgICogbXlNb2R1bGUuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbigkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAqICAgLy8gQ29uZmlndXJlIGV4aXN0aW5nIHByb3ZpZGVyc1xuICAgICAqICAgJGxvY2F0aW9uUHJvdmlkZXIuaGFzaFByZWZpeCgnIScpO1xuICAgICAqIH1dKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFRoZW4geW91IGNhbiBjcmVhdGUgYW4gaW5qZWN0b3IgYW5kIGxvYWQgeW91ciBtb2R1bGVzIGxpa2UgdGhpczpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogdmFyIGluamVjdG9yID0gYW5ndWxhci5pbmplY3RvcihbJ25nJywgJ215TW9kdWxlJ10pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBIb3dldmVyIGl0J3MgbW9yZSBsaWtlbHkgdGhhdCB5b3UnbGwganVzdCB1c2VcbiAgICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQXBwIG5nQXBwfSBvclxuICAgICAqIHtAbGluayBhbmd1bGFyLmJvb3RzdHJhcH0gdG8gc2ltcGxpZnkgdGhpcyBwcm9jZXNzIGZvciB5b3UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIG1vZHVsZSB0byBjcmVhdGUgb3IgcmV0cmlldmUuXG4gICAgICogQHBhcmFtIHshQXJyYXkuPHN0cmluZz49fSByZXF1aXJlcyBJZiBzcGVjaWZpZWQgdGhlbiBuZXcgbW9kdWxlIGlzIGJlaW5nIGNyZWF0ZWQuIElmXG4gICAgICogICAgICAgIHVuc3BlY2lmaWVkIHRoZW4gdGhlIG1vZHVsZSBpcyBiZWluZyByZXRyaWV2ZWQgZm9yIGZ1cnRoZXIgY29uZmlndXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gY29uZmlnRm4gT3B0aW9uYWwgY29uZmlndXJhdGlvbiBmdW5jdGlvbiBmb3IgdGhlIG1vZHVsZS4gU2FtZSBhc1xuICAgICAqICAgICAgICB7QGxpbmsgYW5ndWxhci5Nb2R1bGUjY29uZmlnIE1vZHVsZSNjb25maWcoKX0uXG4gICAgICogQHJldHVybnMge2FuZ3VsYXIuTW9kdWxlfSBuZXcgbW9kdWxlIHdpdGggdGhlIHtAbGluayBhbmd1bGFyLk1vZHVsZX0gYXBpLlxuICAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBtb2R1bGUobmFtZSwgcmVxdWlyZXMsIGNvbmZpZ0ZuKSB7XG5cbiAgICAgIHZhciBpbmZvID0ge307XG5cbiAgICAgIHZhciBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eSA9IGZ1bmN0aW9uKG5hbWUsIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdoYXNPd25Qcm9wZXJ0eScpIHtcbiAgICAgICAgICB0aHJvdyBuZ01pbkVycignYmFkbmFtZScsICdoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZScsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnbW9kdWxlJyk7XG4gICAgICBpZiAocmVxdWlyZXMgJiYgbW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBtb2R1bGVzW25hbWVdID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbnN1cmUobW9kdWxlcywgbmFtZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghcmVxdWlyZXMpIHtcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ25vbW9kJywgJ01vZHVsZSBcXCd7MH1cXCcgaXMgbm90IGF2YWlsYWJsZSEgWW91IGVpdGhlciBtaXNzcGVsbGVkICcgK1xuICAgICAgICAgICAgICd0aGUgbW9kdWxlIG5hbWUgb3IgZm9yZ290IHRvIGxvYWQgaXQuIElmIHJlZ2lzdGVyaW5nIGEgbW9kdWxlIGVuc3VyZSB0aGF0IHlvdSAnICtcbiAgICAgICAgICAgICAnc3BlY2lmeSB0aGUgZGVwZW5kZW5jaWVzIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQuJywgbmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiogQHR5cGUgeyFBcnJheS48QXJyYXkuPCo+Pn0gKi9cbiAgICAgICAgdmFyIGludm9rZVF1ZXVlID0gW107XG5cbiAgICAgICAgLyoqIEB0eXBlIHshQXJyYXkuPEZ1bmN0aW9uPn0gKi9cbiAgICAgICAgdmFyIGNvbmZpZ0Jsb2NrcyA9IFtdO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7IUFycmF5LjxGdW5jdGlvbj59ICovXG4gICAgICAgIHZhciBydW5CbG9ja3MgPSBbXTtcblxuICAgICAgICB2YXIgY29uZmlnID0gaW52b2tlTGF0ZXIoJyRpbmplY3RvcicsICdpbnZva2UnLCAncHVzaCcsIGNvbmZpZ0Jsb2Nrcyk7XG5cbiAgICAgICAgLyoqIEB0eXBlIHthbmd1bGFyLk1vZHVsZX0gKi9cbiAgICAgICAgdmFyIG1vZHVsZUluc3RhbmNlID0ge1xuICAgICAgICAgIC8vIFByaXZhdGUgc3RhdGVcbiAgICAgICAgICBfaW52b2tlUXVldWU6IGludm9rZVF1ZXVlLFxuICAgICAgICAgIF9jb25maWdCbG9ja3M6IGNvbmZpZ0Jsb2NrcyxcbiAgICAgICAgICBfcnVuQmxvY2tzOiBydW5CbG9ja3MsXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjaW5mb1xuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gaW5mbyBJbmZvcm1hdGlvbiBhYm91dCB0aGUgbW9kdWxlXG4gICAgICAgICAgICogQHJldHVybnMge09iamVjdHxNb2R1bGV9IFRoZSBjdXJyZW50IGluZm8gb2JqZWN0IGZvciB0aGlzIG1vZHVsZSBpZiBjYWxsZWQgYXMgYSBnZXR0ZXIsXG4gICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgIG9yIGB0aGlzYCBpZiBjYWxsZWQgYXMgYSBzZXR0ZXIuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBSZWFkIGFuZCB3cml0ZSBjdXN0b20gaW5mb3JtYXRpb24gYWJvdXQgdGhpcyBtb2R1bGUuXG4gICAgICAgICAgICogRm9yIGV4YW1wbGUgeW91IGNvdWxkIHB1dCB0aGUgdmVyc2lvbiBvZiB0aGUgbW9kdWxlIGluIGhlcmUuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgICAqIGFuZ3VsYXIubW9kdWxlKCdteU1vZHVsZScsIFtdKS5pbmZvKHsgdmVyc2lvbjogJzEuMC4wJyB9KTtcbiAgICAgICAgICAgKiBgYGBcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFRoZSB2ZXJzaW9uIGNvdWxkIHRoZW4gYmUgcmVhZCBiYWNrIG91dCBieSBhY2Nlc3NpbmcgdGhlIG1vZHVsZSBlbHNld2hlcmU6XG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBgYGBcbiAgICAgICAgICAgKiB2YXIgdmVyc2lvbiA9IGFuZ3VsYXIubW9kdWxlKCdteU1vZHVsZScpLmluZm8oKS52ZXJzaW9uO1xuICAgICAgICAgICAqIGBgYFxuICAgICAgICAgICAqXG4gICAgICAgICAgICogWW91IGNhbiBhbHNvIHJldHJpZXZlIHRoaXMgaW5mb3JtYXRpb24gZHVyaW5nIHJ1bnRpbWUgdmlhIHRoZVxuICAgICAgICAgICAqIHtAbGluayAkaW5qZWN0b3IjbW9kdWxlcyBgJGluamVjdG9yLm1vZHVsZXNgfSBwcm9wZXJ0eTpcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIGBgYGpzXG4gICAgICAgICAgICogdmFyIHZlcnNpb24gPSAkaW5qZWN0b3IubW9kdWxlc1snbXlNb2R1bGUnXS5pbmZvKCkudmVyc2lvbjtcbiAgICAgICAgICAgKiBgYGBcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpbmZvOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHRocm93IG5nTWluRXJyKCdhb2JqJywgJ0FyZ3VtZW50IFxcJ3swfVxcJyBtdXN0IGJlIGFuIG9iamVjdCcsICd2YWx1ZScpO1xuICAgICAgICAgICAgICBpbmZvID0gdmFsdWU7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZm87XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI3JlcXVpcmVzXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogSG9sZHMgdGhlIGxpc3Qgb2YgbW9kdWxlcyB3aGljaCB0aGUgaW5qZWN0b3Igd2lsbCBsb2FkIGJlZm9yZSB0aGUgY3VycmVudCBtb2R1bGUgaXNcbiAgICAgICAgICAgKiBsb2FkZWQuXG4gICAgICAgICAgICovXG4gICAgICAgICAgcmVxdWlyZXM6IHJlcXVpcmVzLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjbmFtZVxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIE5hbWUgb2YgdGhlIG1vZHVsZS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBuYW1lOiBuYW1lLFxuXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjcHJvdmlkZXJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvdmlkZXJUeXBlIENvbnN0cnVjdGlvbiBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIHRoZVxuICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNwcm92aWRlciAkcHJvdmlkZS5wcm92aWRlcigpfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBwcm92aWRlcjogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckcHJvdmlkZScsICdwcm92aWRlcicpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2ZhY3RvcnlcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvdmlkZXJGdW5jdGlvbiBGdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIHRoZSBzZXJ2aWNlLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5ICRwcm92aWRlLmZhY3RvcnkoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgZmFjdG9yeTogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckcHJvdmlkZScsICdmYWN0b3J5JyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjc2VydmljZVxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBzZXJ2aWNlIG5hbWVcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25zdHJ1Y3RvciBBIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnN0YW50aWF0ZWQuXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI3NlcnZpY2UgJHByb3ZpZGUuc2VydmljZSgpfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBzZXJ2aWNlOiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUoJyRwcm92aWRlJywgJ3NlcnZpY2UnKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSN2YWx1ZVxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBzZXJ2aWNlIG5hbWVcbiAgICAgICAgICAgKiBAcGFyYW0geyp9IG9iamVjdCBTZXJ2aWNlIGluc3RhbmNlIG9iamVjdC5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjdmFsdWUgJHByb3ZpZGUudmFsdWUoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgdmFsdWU6IGludm9rZUxhdGVyKCckcHJvdmlkZScsICd2YWx1ZScpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2NvbnN0YW50XG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIGNvbnN0YW50IG5hbWVcbiAgICAgICAgICAgKiBAcGFyYW0geyp9IG9iamVjdCBDb25zdGFudCB2YWx1ZS5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBCZWNhdXNlIHRoZSBjb25zdGFudHMgYXJlIGZpeGVkLCB0aGV5IGdldCBhcHBsaWVkIGJlZm9yZSBvdGhlciBwcm92aWRlIG1ldGhvZHMuXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI2NvbnN0YW50ICRwcm92aWRlLmNvbnN0YW50KCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGNvbnN0YW50OiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAnY29uc3RhbnQnLCAndW5zaGlmdCcpLFxuXG4gICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNkZWNvcmF0b3JcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gZGVjb3JhdGUuXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZGVjb3JGbiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBzZXJ2aWNlIG5lZWRzIHRvIGJlXG4gICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW50aWF0ZWQgYW5kIHNob3VsZCByZXR1cm4gdGhlIGRlY29yYXRlZCBzZXJ2aWNlIGluc3RhbmNlLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNkZWNvcmF0b3IgJHByb3ZpZGUuZGVjb3JhdG9yKCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGRlY29yYXRvcjogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckcHJvdmlkZScsICdkZWNvcmF0b3InLCBjb25maWdCbG9ja3MpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2FuaW1hdGlvblxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBhbmltYXRpb24gbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFuaW1hdGlvbkZhY3RvcnkgRmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlIG9mIGFuXG4gICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiAqKk5PVEUqKjogYW5pbWF0aW9ucyB0YWtlIGVmZmVjdCBvbmx5IGlmIHRoZSAqKm5nQW5pbWF0ZSoqIG1vZHVsZSBpcyBsb2FkZWQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIERlZmluZXMgYW4gYW5pbWF0aW9uIGhvb2sgdGhhdCBjYW4gYmUgbGF0ZXIgdXNlZCB3aXRoXG4gICAgICAgICAgICoge0BsaW5rICRhbmltYXRlICRhbmltYXRlfSBzZXJ2aWNlIGFuZCBkaXJlY3RpdmVzIHRoYXQgdXNlIHRoaXMgc2VydmljZS5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIGBgYGpzXG4gICAgICAgICAgICogbW9kdWxlLmFuaW1hdGlvbignLmFuaW1hdGlvbi1uYW1lJywgZnVuY3Rpb24oJGluamVjdDEsICRpbmplY3QyKSB7XG4gICAgICAgICAgICogICByZXR1cm4ge1xuICAgICAgICAgICAqICAgICBldmVudE5hbWUgOiBmdW5jdGlvbihlbGVtZW50LCBkb25lKSB7XG4gICAgICAgICAgICogICAgICAgLy9jb2RlIHRvIHJ1biB0aGUgYW5pbWF0aW9uXG4gICAgICAgICAgICogICAgICAgLy9vbmNlIGNvbXBsZXRlLCB0aGVuIHJ1biBkb25lKClcbiAgICAgICAgICAgKiAgICAgICByZXR1cm4gZnVuY3Rpb24gY2FuY2VsbGF0aW9uRnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAqICAgICAgICAgLy9jb2RlIHRvIGNhbmNlbCB0aGUgYW5pbWF0aW9uXG4gICAgICAgICAgICogICAgICAgfVxuICAgICAgICAgICAqICAgICB9XG4gICAgICAgICAgICogICB9XG4gICAgICAgICAgICogfSlcbiAgICAgICAgICAgKiBgYGBcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGFuaW1hdGVQcm92aWRlciNyZWdpc3RlciAkYW5pbWF0ZVByb3ZpZGVyLnJlZ2lzdGVyKCl9IGFuZFxuICAgICAgICAgICAqIHtAbGluayBuZ0FuaW1hdGUgbmdBbmltYXRlIG1vZHVsZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICAgICAgICovXG4gICAgICAgICAgYW5pbWF0aW9uOiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUoJyRhbmltYXRlUHJvdmlkZXInLCAncmVnaXN0ZXInKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNmaWx0ZXJcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRmlsdGVyIG5hbWUgLSB0aGlzIG11c3QgYmUgYSB2YWxpZCBBbmd1bGFySlMgZXhwcmVzc2lvbiBpZGVudGlmaWVyXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmlsdGVyRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2YgZmlsdGVyLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGZpbHRlclByb3ZpZGVyI3JlZ2lzdGVyICRmaWx0ZXJQcm92aWRlci5yZWdpc3RlcigpfS5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAgICAgICAgICogKipOb3RlOioqIEZpbHRlciBuYW1lcyBtdXN0IGJlIHZhbGlkIEFuZ3VsYXJKUyB7QGxpbmsgZXhwcmVzc2lvbn0gaWRlbnRpZmllcnMsIHN1Y2ggYXMgYHVwcGVyY2FzZWAgb3IgYG9yZGVyQnlgLlxuICAgICAgICAgICAqIE5hbWVzIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzLCBzdWNoIGFzIGh5cGhlbnMgYW5kIGRvdHMsIGFyZSBub3QgYWxsb3dlZC4gSWYgeW91IHdpc2ggdG8gbmFtZXNwYWNlXG4gICAgICAgICAgICogeW91ciBmaWx0ZXJzLCB0aGVuIHlvdSBjYW4gdXNlIGNhcGl0YWxpemF0aW9uIChgbXlhcHBTdWJzZWN0aW9uRmlsdGVyeGApIG9yIHVuZGVyc2NvcmVzXG4gICAgICAgICAgICogKGBteWFwcF9zdWJzZWN0aW9uX2ZpbHRlcnhgKS5cbiAgICAgICAgICAgKiA8L2Rpdj5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBmaWx0ZXI6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJGZpbHRlclByb3ZpZGVyJywgJ3JlZ2lzdGVyJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjY29udHJvbGxlclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgQ29udHJvbGxlciBuYW1lLCBvciBhbiBvYmplY3QgbWFwIG9mIGNvbnRyb2xsZXJzIHdoZXJlIHRoZVxuICAgICAgICAgICAqICAgIGtleXMgYXJlIHRoZSBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGNvbnN0cnVjdG9ycy5cbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25zdHJ1Y3RvciBDb250cm9sbGVyIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGNvbnRyb2xsZXJQcm92aWRlciNyZWdpc3RlciAkY29udHJvbGxlclByb3ZpZGVyLnJlZ2lzdGVyKCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGNvbnRyb2xsZXI6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJGNvbnRyb2xsZXJQcm92aWRlcicsICdyZWdpc3RlcicpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2RpcmVjdGl2ZVxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgRGlyZWN0aXZlIG5hbWUsIG9yIGFuIG9iamVjdCBtYXAgb2YgZGlyZWN0aXZlcyB3aGVyZSB0aGVcbiAgICAgICAgICAgKiAgICBrZXlzIGFyZSB0aGUgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBmYWN0b3JpZXMuXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZGlyZWN0aXZlRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2ZcbiAgICAgICAgICAgKiBkaXJlY3RpdmVzLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgJGNvbXBpbGVQcm92aWRlci5kaXJlY3RpdmUoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgZGlyZWN0aXZlOiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUoJyRjb21waWxlUHJvdmlkZXInLCAnZGlyZWN0aXZlJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjY29tcG9uZW50XG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBOYW1lIG9mIHRoZSBjb21wb25lbnQgaW4gY2FtZWxDYXNlIChpLmUuIGBteUNvbXBgIHdoaWNoIHdpbGwgbWF0Y2ggYDxteS1jb21wPmApLFxuICAgICAgICAgICAqICAgIG9yIGFuIG9iamVjdCBtYXAgb2YgY29tcG9uZW50cyB3aGVyZSB0aGUga2V5cyBhcmUgdGhlIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgY29tcG9uZW50IGRlZmluaXRpb24gb2JqZWN0cy5cbiAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDb21wb25lbnQgZGVmaW5pdGlvbiBvYmplY3QgKGEgc2ltcGxpZmllZFxuICAgICAgICAgICAqICAgIHtAbGluayBuZy4kY29tcGlsZSNkaXJlY3RpdmUtZGVmaW5pdGlvbi1vYmplY3QgZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0fSlcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNjb21wb25lbnQgJGNvbXBpbGVQcm92aWRlci5jb21wb25lbnQoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgY29tcG9uZW50OiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUoJyRjb21waWxlUHJvdmlkZXInLCAnY29tcG9uZW50JyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjY29uZmlnXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmZpZ0ZuIEV4ZWN1dGUgdGhpcyBmdW5jdGlvbiBvbiBtb2R1bGUgbG9hZC4gVXNlZnVsIGZvciBzZXJ2aWNlXG4gICAgICAgICAgICogICAgY29uZmlndXJhdGlvbi5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gY29uZmlndXJlIHNlcnZpY2VzIGJ5IGluamVjdGluZyB0aGVpclxuICAgICAgICAgICAqIHtAbGluayBhbmd1bGFyLk1vZHVsZSNwcm92aWRlciBgcHJvdmlkZXJzYH0sIGUuZy4gZm9yIGFkZGluZyByb3V0ZXMgdG8gdGhlXG4gICAgICAgICAgICoge0BsaW5rIG5nUm91dGUuJHJvdXRlUHJvdmlkZXIgJHJvdXRlUHJvdmlkZXJ9LlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogTm90ZSB0aGF0IHlvdSBjYW4gb25seSBpbmplY3Qge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI3Byb3ZpZGVyIGBwcm92aWRlcnNgfSBhbmRcbiAgICAgICAgICAgKiB7QGxpbmsgYW5ndWxhci5Nb2R1bGUjY29uc3RhbnQgYGNvbnN0YW50c2B9IGludG8gdGhpcyBmdW5jdGlvbi5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEZvciBtb3JlIGFib3V0IGhvdyB0byBjb25maWd1cmUgc2VydmljZXMsIHNlZVxuICAgICAgICAgICAqIHtAbGluayBwcm92aWRlcnMjcHJvdmlkZXItcmVjaXBlIFByb3ZpZGVyIFJlY2lwZX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgY29uZmlnOiBjb25maWcsXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjcnVuXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGluaXRpYWxpemF0aW9uRm4gRXhlY3V0ZSB0aGlzIGZ1bmN0aW9uIGFmdGVyIGluamVjdG9yIGNyZWF0aW9uLlxuICAgICAgICAgICAqICAgIFVzZWZ1bCBmb3IgYXBwbGljYXRpb24gaW5pdGlhbGl6YXRpb24uXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHJlZ2lzdGVyIHdvcmsgd2hpY2ggc2hvdWxkIGJlIHBlcmZvcm1lZCB3aGVuIHRoZSBpbmplY3RvciBpcyBkb25lXG4gICAgICAgICAgICogbG9hZGluZyBhbGwgbW9kdWxlcy5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBydW46IGZ1bmN0aW9uKGJsb2NrKSB7XG4gICAgICAgICAgICBydW5CbG9ja3MucHVzaChibG9jayk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGNvbmZpZ0ZuKSB7XG4gICAgICAgICAgY29uZmlnKGNvbmZpZ0ZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtb2R1bGVJbnN0YW5jZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3ZpZGVyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmc9fSBpbnNlcnRNZXRob2RcbiAgICAgICAgICogQHJldHVybnMge2FuZ3VsYXIuTW9kdWxlfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW52b2tlTGF0ZXIocHJvdmlkZXIsIG1ldGhvZCwgaW5zZXJ0TWV0aG9kLCBxdWV1ZSkge1xuICAgICAgICAgIGlmICghcXVldWUpIHF1ZXVlID0gaW52b2tlUXVldWU7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcXVldWVbaW5zZXJ0TWV0aG9kIHx8ICdwdXNoJ10oW3Byb3ZpZGVyLCBtZXRob2QsIGFyZ3VtZW50c10pO1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZUluc3RhbmNlO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3ZpZGVyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAgICAgICAgICogQHJldHVybnMge2FuZ3VsYXIuTW9kdWxlfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKHByb3ZpZGVyLCBtZXRob2QsIHF1ZXVlKSB7XG4gICAgICAgICAgaWYgKCFxdWV1ZSkgcXVldWUgPSBpbnZva2VRdWV1ZTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVjaXBlTmFtZSwgZmFjdG9yeUZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoZmFjdG9yeUZ1bmN0aW9uICYmIGlzRnVuY3Rpb24oZmFjdG9yeUZ1bmN0aW9uKSkgZmFjdG9yeUZ1bmN0aW9uLiQkbW9kdWxlTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKFtwcm92aWRlciwgbWV0aG9kLCBhcmd1bWVudHNdKTtcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVJbnN0YW5jZTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxufVxuXG4vKiBnbG9iYWwgc2hhbGxvd0NvcHk6IHRydWUgKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgc2hhbGxvdyBjb3B5IG9mIGFuIG9iamVjdCwgYW4gYXJyYXkgb3IgYSBwcmltaXRpdmUuXG4gKlxuICogQXNzdW1lcyB0aGF0IHRoZXJlIGFyZSBubyBwcm90byBwcm9wZXJ0aWVzIGZvciBvYmplY3RzLlxuICovXG5mdW5jdGlvbiBzaGFsbG93Q29weShzcmMsIGRzdCkge1xuICBpZiAoaXNBcnJheShzcmMpKSB7XG4gICAgZHN0ID0gZHN0IHx8IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc3JjLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGRzdFtpXSA9IHNyY1tpXTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qoc3JjKSkge1xuICAgIGRzdCA9IGRzdCB8fCB7fTtcblxuICAgIGZvciAodmFyIGtleSBpbiBzcmMpIHtcbiAgICAgIGlmICghKGtleS5jaGFyQXQoMCkgPT09ICckJyAmJiBrZXkuY2hhckF0KDEpID09PSAnJCcpKSB7XG4gICAgICAgIGRzdFtrZXldID0gc3JjW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRzdCB8fCBzcmM7XG59XG5cbi8qIGV4cG9ydGVkIHRvRGVidWdTdHJpbmcgKi9cblxuZnVuY3Rpb24gc2VyaWFsaXplT2JqZWN0KG9iaiwgbWF4RGVwdGgpIHtcbiAgdmFyIHNlZW4gPSBbXTtcblxuICAvLyBUaGVyZSBpcyBubyBkaXJlY3Qgd2F5IHRvIHN0cmluZ2lmeSBvYmplY3QgdW50aWwgcmVhY2hpbmcgYSBzcGVjaWZpYyBkZXB0aFxuICAvLyBhbmQgYSB2ZXJ5IGRlZXAgb2JqZWN0IGNhbiBjYXVzZSBhIHBlcmZvcm1hbmNlIGlzc3VlLCBzbyB3ZSBjb3B5IHRoZSBvYmplY3RcbiAgLy8gYmFzZWQgb24gdGhpcyBzcGVjaWZpYyBkZXB0aCBhbmQgdGhlbiBzdHJpbmdpZnkgaXQuXG4gIGlmIChpc1ZhbGlkT2JqZWN0TWF4RGVwdGgobWF4RGVwdGgpKSB7XG4gICAgLy8gVGhpcyBmaWxlIGlzIGFsc28gaW5jbHVkZWQgaW4gYGFuZ3VsYXItbG9hZGVyYCwgc28gYGNvcHkoKWAgbWlnaHQgbm90IGFsd2F5cyBiZSBhdmFpbGFibGUgaW5cbiAgICAvLyB0aGUgY2xvc3VyZS4gVGhlcmVmb3JlLCBpdCBpcyBsYXppbHkgcmV0cmlldmVkIGFzIGBhbmd1bGFyLmNvcHkoKWAgd2hlbiBuZWVkZWQuXG4gICAgb2JqID0gYW5ndWxhci5jb3B5KG9iaiwgbnVsbCwgbWF4RGVwdGgpO1xuICB9XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gICAgdmFsID0gdG9Kc29uUmVwbGFjZXIoa2V5LCB2YWwpO1xuICAgIGlmIChpc09iamVjdCh2YWwpKSB7XG5cbiAgICAgIGlmIChzZWVuLmluZGV4T2YodmFsKSA+PSAwKSByZXR1cm4gJy4uLic7XG5cbiAgICAgIHNlZW4ucHVzaCh2YWwpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdG9EZWJ1Z1N0cmluZyhvYmosIG1heERlcHRoKSB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIG9iai50b1N0cmluZygpLnJlcGxhY2UoLyBcXHtbXFxzXFxTXSokLywgJycpO1xuICB9IGVsc2UgaWYgKGlzVW5kZWZpbmVkKG9iaikpIHtcbiAgICByZXR1cm4gJ3VuZGVmaW5lZCc7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9iaiAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gc2VyaWFsaXplT2JqZWN0KG9iaiwgbWF4RGVwdGgpO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qIGdsb2JhbCBhbmd1bGFyTW9kdWxlOiB0cnVlLFxuICB2ZXJzaW9uOiB0cnVlLFxuXG4gICRDb21waWxlUHJvdmlkZXIsXG5cbiAgaHRtbEFuY2hvckRpcmVjdGl2ZSxcbiAgaW5wdXREaXJlY3RpdmUsXG4gIGlucHV0RGlyZWN0aXZlLFxuICBmb3JtRGlyZWN0aXZlLFxuICBzY3JpcHREaXJlY3RpdmUsXG4gIHNlbGVjdERpcmVjdGl2ZSxcbiAgb3B0aW9uRGlyZWN0aXZlLFxuICBuZ0JpbmREaXJlY3RpdmUsXG4gIG5nQmluZEh0bWxEaXJlY3RpdmUsXG4gIG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlLFxuICBuZ0NsYXNzRGlyZWN0aXZlLFxuICBuZ0NsYXNzRXZlbkRpcmVjdGl2ZSxcbiAgbmdDbGFzc09kZERpcmVjdGl2ZSxcbiAgbmdDbG9ha0RpcmVjdGl2ZSxcbiAgbmdDb250cm9sbGVyRGlyZWN0aXZlLFxuICBuZ0Zvcm1EaXJlY3RpdmUsXG4gIG5nSGlkZURpcmVjdGl2ZSxcbiAgbmdJZkRpcmVjdGl2ZSxcbiAgbmdJbmNsdWRlRGlyZWN0aXZlLFxuICBuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZSxcbiAgbmdJbml0RGlyZWN0aXZlLFxuICBuZ05vbkJpbmRhYmxlRGlyZWN0aXZlLFxuICBuZ1BsdXJhbGl6ZURpcmVjdGl2ZSxcbiAgbmdSZXBlYXREaXJlY3RpdmUsXG4gIG5nU2hvd0RpcmVjdGl2ZSxcbiAgbmdTdHlsZURpcmVjdGl2ZSxcbiAgbmdTd2l0Y2hEaXJlY3RpdmUsXG4gIG5nU3dpdGNoV2hlbkRpcmVjdGl2ZSxcbiAgbmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlLFxuICBuZ09wdGlvbnNEaXJlY3RpdmUsXG4gIG5nVHJhbnNjbHVkZURpcmVjdGl2ZSxcbiAgbmdNb2RlbERpcmVjdGl2ZSxcbiAgbmdMaXN0RGlyZWN0aXZlLFxuICBuZ0NoYW5nZURpcmVjdGl2ZSxcbiAgcGF0dGVybkRpcmVjdGl2ZSxcbiAgcGF0dGVybkRpcmVjdGl2ZSxcbiAgcmVxdWlyZWREaXJlY3RpdmUsXG4gIHJlcXVpcmVkRGlyZWN0aXZlLFxuICBtaW5sZW5ndGhEaXJlY3RpdmUsXG4gIG1pbmxlbmd0aERpcmVjdGl2ZSxcbiAgbWF4bGVuZ3RoRGlyZWN0aXZlLFxuICBtYXhsZW5ndGhEaXJlY3RpdmUsXG4gIG5nVmFsdWVEaXJlY3RpdmUsXG4gIG5nTW9kZWxPcHRpb25zRGlyZWN0aXZlLFxuICBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyxcbiAgbmdFdmVudERpcmVjdGl2ZXMsXG5cbiAgJEFuY2hvclNjcm9sbFByb3ZpZGVyLFxuICAkQW5pbWF0ZVByb3ZpZGVyLFxuICAkQ29yZUFuaW1hdGVDc3NQcm92aWRlcixcbiAgJCRDb3JlQW5pbWF0ZUpzUHJvdmlkZXIsXG4gICQkQ29yZUFuaW1hdGVRdWV1ZVByb3ZpZGVyLFxuICAkJEFuaW1hdGVSdW5uZXJGYWN0b3J5UHJvdmlkZXIsXG4gICQkQW5pbWF0ZUFzeW5jUnVuRmFjdG9yeVByb3ZpZGVyLFxuICAkQnJvd3NlclByb3ZpZGVyLFxuICAkQ2FjaGVGYWN0b3J5UHJvdmlkZXIsXG4gICRDb250cm9sbGVyUHJvdmlkZXIsXG4gICREYXRlUHJvdmlkZXIsXG4gICREb2N1bWVudFByb3ZpZGVyLFxuICAkJElzRG9jdW1lbnRIaWRkZW5Qcm92aWRlcixcbiAgJEV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcixcbiAgJEZpbHRlclByb3ZpZGVyLFxuICAkJEZvcmNlUmVmbG93UHJvdmlkZXIsXG4gICRJbnRlcnBvbGF0ZVByb3ZpZGVyLFxuICAkSW50ZXJ2YWxQcm92aWRlcixcbiAgJEh0dHBQcm92aWRlcixcbiAgJEh0dHBQYXJhbVNlcmlhbGl6ZXJQcm92aWRlcixcbiAgJEh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2VQcm92aWRlcixcbiAgJEh0dHBCYWNrZW5kUHJvdmlkZXIsXG4gICR4aHJGYWN0b3J5UHJvdmlkZXIsXG4gICRqc29ucENhbGxiYWNrc1Byb3ZpZGVyLFxuICAkTG9jYXRpb25Qcm92aWRlcixcbiAgJExvZ1Byb3ZpZGVyLFxuICAkJE1hcFByb3ZpZGVyLFxuICAkUGFyc2VQcm92aWRlcixcbiAgJFJvb3RTY29wZVByb3ZpZGVyLFxuICAkUVByb3ZpZGVyLFxuICAkJFFQcm92aWRlcixcbiAgJCRTYW5pdGl6ZVVyaVByb3ZpZGVyLFxuICAkU2NlUHJvdmlkZXIsXG4gICRTY2VEZWxlZ2F0ZVByb3ZpZGVyLFxuICAkU25pZmZlclByb3ZpZGVyLFxuICAkVGVtcGxhdGVDYWNoZVByb3ZpZGVyLFxuICAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIsXG4gICQkVGVzdGFiaWxpdHlQcm92aWRlcixcbiAgJFRpbWVvdXRQcm92aWRlcixcbiAgJCRSQUZQcm92aWRlcixcbiAgJFdpbmRvd1Byb3ZpZGVyLFxuICAkJGpxTGl0ZVByb3ZpZGVyLFxuICAkJENvb2tpZVJlYWRlclByb3ZpZGVyXG4qL1xuXG5cbi8qKlxuICogQG5nZG9jIG9iamVjdFxuICogQG5hbWUgYW5ndWxhci52ZXJzaW9uXG4gKiBAbW9kdWxlIG5nXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50IEFuZ3VsYXJKUyB2ZXJzaW9uLlxuICpcbiAqIFRoaXMgb2JqZWN0IGhhcyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKlxuICogLSBgZnVsbGAg4oCTIGB7c3RyaW5nfWAg4oCTIEZ1bGwgdmVyc2lvbiBzdHJpbmcsIHN1Y2ggYXMgXCIwLjkuMThcIi5cbiAqIC0gYG1ham9yYCDigJMgYHtudW1iZXJ9YCDigJMgTWFqb3IgdmVyc2lvbiBudW1iZXIsIHN1Y2ggYXMgXCIwXCIuXG4gKiAtIGBtaW5vcmAg4oCTIGB7bnVtYmVyfWAg4oCTIE1pbm9yIHZlcnNpb24gbnVtYmVyLCBzdWNoIGFzIFwiOVwiLlxuICogLSBgZG90YCDigJMgYHtudW1iZXJ9YCDigJMgRG90IHZlcnNpb24gbnVtYmVyLCBzdWNoIGFzIFwiMThcIi5cbiAqIC0gYGNvZGVOYW1lYCDigJMgYHtzdHJpbmd9YCDigJMgQ29kZSBuYW1lIG9mIHRoZSByZWxlYXNlLCBzdWNoIGFzIFwiamlnZ2xpbmctYXJtZmF0XCIuXG4gKi9cbnZhciB2ZXJzaW9uID0ge1xuICAvLyBUaGVzZSBwbGFjZWhvbGRlciBzdHJpbmdzIHdpbGwgYmUgcmVwbGFjZWQgYnkgZ3J1bnQncyBgYnVpbGRgIHRhc2suXG4gIC8vIFRoZXkgbmVlZCB0byBiZSBkb3VibGUtIG9yIHNpbmdsZS1xdW90ZWQuXG4gIGZ1bGw6ICcxLjcuMCcsXG4gIG1ham9yOiAxLFxuICBtaW5vcjogNyxcbiAgZG90OiAwLFxuICBjb2RlTmFtZTogJ25vbmV4aXN0ZW50LXBoeXNpb2xvZ3knXG59O1xuXG5cbmZ1bmN0aW9uIHB1Ymxpc2hFeHRlcm5hbEFQSShhbmd1bGFyKSB7XG4gIGV4dGVuZChhbmd1bGFyLCB7XG4gICAgJ2Vycm9ySGFuZGxpbmdDb25maWcnOiBlcnJvckhhbmRsaW5nQ29uZmlnLFxuICAgICdib290c3RyYXAnOiBib290c3RyYXAsXG4gICAgJ2NvcHknOiBjb3B5LFxuICAgICdleHRlbmQnOiBleHRlbmQsXG4gICAgJ21lcmdlJzogbWVyZ2UsXG4gICAgJ2VxdWFscyc6IGVxdWFscyxcbiAgICAnZWxlbWVudCc6IGpxTGl0ZSxcbiAgICAnZm9yRWFjaCc6IGZvckVhY2gsXG4gICAgJ2luamVjdG9yJzogY3JlYXRlSW5qZWN0b3IsXG4gICAgJ25vb3AnOiBub29wLFxuICAgICdiaW5kJzogYmluZCxcbiAgICAndG9Kc29uJzogdG9Kc29uLFxuICAgICdmcm9tSnNvbic6IGZyb21Kc29uLFxuICAgICdpZGVudGl0eSc6IGlkZW50aXR5LFxuICAgICdpc1VuZGVmaW5lZCc6IGlzVW5kZWZpbmVkLFxuICAgICdpc0RlZmluZWQnOiBpc0RlZmluZWQsXG4gICAgJ2lzU3RyaW5nJzogaXNTdHJpbmcsXG4gICAgJ2lzRnVuY3Rpb24nOiBpc0Z1bmN0aW9uLFxuICAgICdpc09iamVjdCc6IGlzT2JqZWN0LFxuICAgICdpc051bWJlcic6IGlzTnVtYmVyLFxuICAgICdpc0VsZW1lbnQnOiBpc0VsZW1lbnQsXG4gICAgJ2lzQXJyYXknOiBpc0FycmF5LFxuICAgICd2ZXJzaW9uJzogdmVyc2lvbixcbiAgICAnaXNEYXRlJzogaXNEYXRlLFxuICAgICdjYWxsYmFja3MnOiB7JCRjb3VudGVyOiAwfSxcbiAgICAnZ2V0VGVzdGFiaWxpdHknOiBnZXRUZXN0YWJpbGl0eSxcbiAgICAncmVsb2FkV2l0aERlYnVnSW5mbyc6IHJlbG9hZFdpdGhEZWJ1Z0luZm8sXG4gICAgJyQkbWluRXJyJzogbWluRXJyLFxuICAgICckJGNzcCc6IGNzcCxcbiAgICAnJCRlbmNvZGVVcmlTZWdtZW50JzogZW5jb2RlVXJpU2VnbWVudCxcbiAgICAnJCRlbmNvZGVVcmlRdWVyeSc6IGVuY29kZVVyaVF1ZXJ5LFxuICAgICckJGxvd2VyY2FzZSc6IGxvd2VyY2FzZSxcbiAgICAnJCRzdHJpbmdpZnknOiBzdHJpbmdpZnksXG4gICAgJyQkdXBwZXJjYXNlJzogdXBwZXJjYXNlXG4gIH0pO1xuXG4gIGFuZ3VsYXJNb2R1bGUgPSBzZXR1cE1vZHVsZUxvYWRlcih3aW5kb3cpO1xuXG4gIGFuZ3VsYXJNb2R1bGUoJ25nJywgWyduZ0xvY2FsZSddLCBbJyRwcm92aWRlJyxcbiAgICBmdW5jdGlvbiBuZ01vZHVsZSgkcHJvdmlkZSkge1xuICAgICAgLy8gJCRzYW5pdGl6ZVVyaVByb3ZpZGVyIG5lZWRzIHRvIGJlIGJlZm9yZSAkY29tcGlsZVByb3ZpZGVyIGFzIGl0IGlzIHVzZWQgYnkgaXQuXG4gICAgICAkcHJvdmlkZS5wcm92aWRlcih7XG4gICAgICAgICQkc2FuaXRpemVVcmk6ICQkU2FuaXRpemVVcmlQcm92aWRlclxuICAgICAgfSk7XG4gICAgICAkcHJvdmlkZS5wcm92aWRlcignJGNvbXBpbGUnLCAkQ29tcGlsZVByb3ZpZGVyKS5cbiAgICAgICAgZGlyZWN0aXZlKHtcbiAgICAgICAgICAgIGE6IGh0bWxBbmNob3JEaXJlY3RpdmUsXG4gICAgICAgICAgICBpbnB1dDogaW5wdXREaXJlY3RpdmUsXG4gICAgICAgICAgICB0ZXh0YXJlYTogaW5wdXREaXJlY3RpdmUsXG4gICAgICAgICAgICBmb3JtOiBmb3JtRGlyZWN0aXZlLFxuICAgICAgICAgICAgc2NyaXB0OiBzY3JpcHREaXJlY3RpdmUsXG4gICAgICAgICAgICBzZWxlY3Q6IHNlbGVjdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG9wdGlvbjogb3B0aW9uRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdCaW5kOiBuZ0JpbmREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0JpbmRIdG1sOiBuZ0JpbmRIdG1sRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdCaW5kVGVtcGxhdGU6IG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdDbGFzczogbmdDbGFzc0RpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQ2xhc3NFdmVuOiBuZ0NsYXNzRXZlbkRpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQ2xhc3NPZGQ6IG5nQ2xhc3NPZGREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0Nsb2FrOiBuZ0Nsb2FrRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdDb250cm9sbGVyOiBuZ0NvbnRyb2xsZXJEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0Zvcm06IG5nRm9ybURpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nSGlkZTogbmdIaWRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdJZjogbmdJZkRpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nSW5jbHVkZTogbmdJbmNsdWRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdJbml0OiBuZ0luaXREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ05vbkJpbmRhYmxlOiBuZ05vbkJpbmRhYmxlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdQbHVyYWxpemU6IG5nUGx1cmFsaXplRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdSZXBlYXQ6IG5nUmVwZWF0RGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdTaG93OiBuZ1Nob3dEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1N0eWxlOiBuZ1N0eWxlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdTd2l0Y2g6IG5nU3dpdGNoRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdTd2l0Y2hXaGVuOiBuZ1N3aXRjaFdoZW5EaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1N3aXRjaERlZmF1bHQ6IG5nU3dpdGNoRGVmYXVsdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nT3B0aW9uczogbmdPcHRpb25zRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdUcmFuc2NsdWRlOiBuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ01vZGVsOiBuZ01vZGVsRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdMaXN0OiBuZ0xpc3REaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0NoYW5nZTogbmdDaGFuZ2VEaXJlY3RpdmUsXG4gICAgICAgICAgICBwYXR0ZXJuOiBwYXR0ZXJuRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdQYXR0ZXJuOiBwYXR0ZXJuRGlyZWN0aXZlLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdSZXF1aXJlZDogcmVxdWlyZWREaXJlY3RpdmUsXG4gICAgICAgICAgICBtaW5sZW5ndGg6IG1pbmxlbmd0aERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nTWlubGVuZ3RoOiBtaW5sZW5ndGhEaXJlY3RpdmUsXG4gICAgICAgICAgICBtYXhsZW5ndGg6IG1heGxlbmd0aERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nTWF4bGVuZ3RoOiBtYXhsZW5ndGhEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1ZhbHVlOiBuZ1ZhbHVlRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdNb2RlbE9wdGlvbnM6IG5nTW9kZWxPcHRpb25zRGlyZWN0aXZlXG4gICAgICAgIH0pLlxuICAgICAgICBkaXJlY3RpdmUoe1xuICAgICAgICAgIG5nSW5jbHVkZTogbmdJbmNsdWRlRmlsbENvbnRlbnREaXJlY3RpdmVcbiAgICAgICAgfSkuXG4gICAgICAgIGRpcmVjdGl2ZShuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcykuXG4gICAgICAgIGRpcmVjdGl2ZShuZ0V2ZW50RGlyZWN0aXZlcyk7XG4gICAgICAkcHJvdmlkZS5wcm92aWRlcih7XG4gICAgICAgICRhbmNob3JTY3JvbGw6ICRBbmNob3JTY3JvbGxQcm92aWRlcixcbiAgICAgICAgJGFuaW1hdGU6ICRBbmltYXRlUHJvdmlkZXIsXG4gICAgICAgICRhbmltYXRlQ3NzOiAkQ29yZUFuaW1hdGVDc3NQcm92aWRlcixcbiAgICAgICAgJCRhbmltYXRlSnM6ICQkQ29yZUFuaW1hdGVKc1Byb3ZpZGVyLFxuICAgICAgICAkJGFuaW1hdGVRdWV1ZTogJCRDb3JlQW5pbWF0ZVF1ZXVlUHJvdmlkZXIsXG4gICAgICAgICQkQW5pbWF0ZVJ1bm5lcjogJCRBbmltYXRlUnVubmVyRmFjdG9yeVByb3ZpZGVyLFxuICAgICAgICAkJGFuaW1hdGVBc3luY1J1bjogJCRBbmltYXRlQXN5bmNSdW5GYWN0b3J5UHJvdmlkZXIsXG4gICAgICAgICRicm93c2VyOiAkQnJvd3NlclByb3ZpZGVyLFxuICAgICAgICAkY2FjaGVGYWN0b3J5OiAkQ2FjaGVGYWN0b3J5UHJvdmlkZXIsXG4gICAgICAgICRjb250cm9sbGVyOiAkQ29udHJvbGxlclByb3ZpZGVyLFxuICAgICAgICAkZG9jdW1lbnQ6ICREb2N1bWVudFByb3ZpZGVyLFxuICAgICAgICAkJGlzRG9jdW1lbnRIaWRkZW46ICQkSXNEb2N1bWVudEhpZGRlblByb3ZpZGVyLFxuICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcjogJEV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcixcbiAgICAgICAgJGZpbHRlcjogJEZpbHRlclByb3ZpZGVyLFxuICAgICAgICAkJGZvcmNlUmVmbG93OiAkJEZvcmNlUmVmbG93UHJvdmlkZXIsXG4gICAgICAgICRpbnRlcnBvbGF0ZTogJEludGVycG9sYXRlUHJvdmlkZXIsXG4gICAgICAgICRpbnRlcnZhbDogJEludGVydmFsUHJvdmlkZXIsXG4gICAgICAgICRodHRwOiAkSHR0cFByb3ZpZGVyLFxuICAgICAgICAkaHR0cFBhcmFtU2VyaWFsaXplcjogJEh0dHBQYXJhbVNlcmlhbGl6ZXJQcm92aWRlcixcbiAgICAgICAgJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2U6ICRIdHRwUGFyYW1TZXJpYWxpemVySlFMaWtlUHJvdmlkZXIsXG4gICAgICAgICRodHRwQmFja2VuZDogJEh0dHBCYWNrZW5kUHJvdmlkZXIsXG4gICAgICAgICR4aHJGYWN0b3J5OiAkeGhyRmFjdG9yeVByb3ZpZGVyLFxuICAgICAgICAkanNvbnBDYWxsYmFja3M6ICRqc29ucENhbGxiYWNrc1Byb3ZpZGVyLFxuICAgICAgICAkbG9jYXRpb246ICRMb2NhdGlvblByb3ZpZGVyLFxuICAgICAgICAkbG9nOiAkTG9nUHJvdmlkZXIsXG4gICAgICAgICRwYXJzZTogJFBhcnNlUHJvdmlkZXIsXG4gICAgICAgICRyb290U2NvcGU6ICRSb290U2NvcGVQcm92aWRlcixcbiAgICAgICAgJHE6ICRRUHJvdmlkZXIsXG4gICAgICAgICQkcTogJCRRUHJvdmlkZXIsXG4gICAgICAgICRzY2U6ICRTY2VQcm92aWRlcixcbiAgICAgICAgJHNjZURlbGVnYXRlOiAkU2NlRGVsZWdhdGVQcm92aWRlcixcbiAgICAgICAgJHNuaWZmZXI6ICRTbmlmZmVyUHJvdmlkZXIsXG4gICAgICAgICR0ZW1wbGF0ZUNhY2hlOiAkVGVtcGxhdGVDYWNoZVByb3ZpZGVyLFxuICAgICAgICAkdGVtcGxhdGVSZXF1ZXN0OiAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIsXG4gICAgICAgICQkdGVzdGFiaWxpdHk6ICQkVGVzdGFiaWxpdHlQcm92aWRlcixcbiAgICAgICAgJHRpbWVvdXQ6ICRUaW1lb3V0UHJvdmlkZXIsXG4gICAgICAgICR3aW5kb3c6ICRXaW5kb3dQcm92aWRlcixcbiAgICAgICAgJCRyQUY6ICQkUkFGUHJvdmlkZXIsXG4gICAgICAgICQkanFMaXRlOiAkJGpxTGl0ZVByb3ZpZGVyLFxuICAgICAgICAkJE1hcDogJCRNYXBQcm92aWRlcixcbiAgICAgICAgJCRjb29raWVSZWFkZXI6ICQkQ29va2llUmVhZGVyUHJvdmlkZXJcbiAgICAgIH0pO1xuICAgIH1cbiAgXSlcbiAgLmluZm8oeyBhbmd1bGFyVmVyc2lvbjogJzEuNy4wJyB9KTtcbn1cblxuLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKlxuICogICAgIEFueSBjb21taXRzIHRvIHRoaXMgZmlsZSBzaG91bGQgYmUgcmV2aWV3ZWQgd2l0aCBzZWN1cml0eSBpbiBtaW5kLiAgKlxuICogICBDaGFuZ2VzIHRvIHRoaXMgZmlsZSBjYW4gcG90ZW50aWFsbHkgY3JlYXRlIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4gKlxuICogICAgICAgICAgQW4gYXBwcm92YWwgZnJvbSAyIENvcmUgbWVtYmVycyB3aXRoIGhpc3Rvcnkgb2YgbW9kaWZ5aW5nICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyBmaWxlIGlzIHJlcXVpcmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogIERvZXMgdGhlIGNoYW5nZSBzb21laG93IGFsbG93IGZvciBhcmJpdHJhcnkgamF2YXNjcmlwdCB0byBiZSBleGVjdXRlZD8gKlxuICogICAgT3IgYWxsb3dzIGZvciBzb21lb25lIHRvIGNoYW5nZSB0aGUgcHJvdG90eXBlIG9mIGJ1aWx0LWluIG9iamVjdHM/ICAgKlxuICogICAgIE9yIGdpdmVzIHVuZGVzaXJlZCBhY2Nlc3MgdG8gdmFyaWFibGVzIGxpa2VzIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxuLyogZ2xvYmFsXG4gIEpRTGl0ZVByb3RvdHlwZTogdHJ1ZSxcbiAgQk9PTEVBTl9BVFRSOiB0cnVlLFxuICBBTElBU0VEX0FUVFI6IHRydWVcbiovXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vSlFMaXRlXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmVsZW1lbnRcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBXcmFwcyBhIHJhdyBET00gZWxlbWVudCBvciBIVE1MIHN0cmluZyBhcyBhIFtqUXVlcnldKGh0dHA6Ly9qcXVlcnkuY29tKSBlbGVtZW50LlxuICpcbiAqIElmIGpRdWVyeSBpcyBhdmFpbGFibGUsIGBhbmd1bGFyLmVsZW1lbnRgIGlzIGFuIGFsaWFzIGZvciB0aGVcbiAqIFtqUXVlcnldKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9qUXVlcnkvKSBmdW5jdGlvbi4gSWYgalF1ZXJ5IGlzIG5vdCBhdmFpbGFibGUsIGBhbmd1bGFyLmVsZW1lbnRgXG4gKiBkZWxlZ2F0ZXMgdG8gQW5ndWxhckpTJ3MgYnVpbHQtaW4gc3Vic2V0IG9mIGpRdWVyeSwgY2FsbGVkIFwialF1ZXJ5IGxpdGVcIiBvciAqKmpxTGl0ZSoqLlxuICpcbiAqIGpxTGl0ZSBpcyBhIHRpbnksIEFQSS1jb21wYXRpYmxlIHN1YnNldCBvZiBqUXVlcnkgdGhhdCBhbGxvd3NcbiAqIEFuZ3VsYXJKUyB0byBtYW5pcHVsYXRlIHRoZSBET00gaW4gYSBjcm9zcy1icm93c2VyIGNvbXBhdGlibGUgd2F5LiBqcUxpdGUgaW1wbGVtZW50cyBvbmx5IHRoZSBtb3N0XG4gKiBjb21tb25seSBuZWVkZWQgZnVuY3Rpb25hbGl0eSB3aXRoIHRoZSBnb2FsIG9mIGhhdmluZyBhIHZlcnkgc21hbGwgZm9vdHByaW50LlxuICpcbiAqIFRvIHVzZSBgalF1ZXJ5YCwgc2ltcGx5IGVuc3VyZSBpdCBpcyBsb2FkZWQgYmVmb3JlIHRoZSBgYW5ndWxhci5qc2AgZmlsZS4gWW91IGNhbiBhbHNvIHVzZSB0aGVcbiAqIHtAbGluayBuZ0pxIGBuZ0pxYH0gZGlyZWN0aXZlIHRvIHNwZWNpZnkgdGhhdCBqcWxpdGUgc2hvdWxkIGJlIHVzZWQgb3ZlciBqUXVlcnksIG9yIHRvIHVzZSBhXG4gKiBzcGVjaWZpYyB2ZXJzaW9uIG9mIGpRdWVyeSBpZiBtdWx0aXBsZSB2ZXJzaW9ucyBleGlzdCBvbiB0aGUgcGFnZS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPioqTm90ZToqKiBBbGwgZWxlbWVudCByZWZlcmVuY2VzIGluIEFuZ3VsYXJKUyBhcmUgYWx3YXlzIHdyYXBwZWQgd2l0aCBqUXVlcnkgb3JcbiAqIGpxTGl0ZSAoc3VjaCBhcyB0aGUgZWxlbWVudCBhcmd1bWVudCBpbiBhIGRpcmVjdGl2ZSdzIGNvbXBpbGUgLyBsaW5rIGZ1bmN0aW9uKS4gVGhleSBhcmUgbmV2ZXIgcmF3IERPTSByZWZlcmVuY2VzLjwvZGl2PlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+KipOb3RlOioqIEtlZXAgaW4gbWluZCB0aGF0IHRoaXMgZnVuY3Rpb24gd2lsbCBub3QgZmluZCBlbGVtZW50c1xuICogYnkgdGFnIG5hbWUgLyBDU1Mgc2VsZWN0b3IuIEZvciBsb29rdXBzIGJ5IHRhZyBuYW1lLCB0cnkgaW5zdGVhZCBgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5maW5kKC4uLilgXG4gKiBvciBgJGRvY3VtZW50LmZpbmQoKWAsIG9yIHVzZSB0aGUgc3RhbmRhcmQgRE9NIEFQSXMsIGUuZy4gYGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoKWAuPC9kaXY+XG4gKlxuICogIyMgQW5ndWxhckpTJ3MganFMaXRlXG4gKiBqcUxpdGUgcHJvdmlkZXMgb25seSB0aGUgZm9sbG93aW5nIGpRdWVyeSBtZXRob2RzOlxuICpcbiAqIC0gW2BhZGRDbGFzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2FkZENsYXNzLykgLSBEb2VzIG5vdCBzdXBwb3J0IGEgZnVuY3Rpb24gYXMgZmlyc3QgYXJndW1lbnRcbiAqIC0gW2BhZnRlcigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2FmdGVyLylcbiAqIC0gW2BhcHBlbmQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9hcHBlbmQvKSAtIENvbnRyYXJ5IHRvIGpRdWVyeSwgdGhpcyBkb2Vzbid0IGNsb25lIGVsZW1lbnRzXG4gKiAgIHNvIHdpbGwgbm90IHdvcmsgY29ycmVjdGx5IHdoZW4gaW52b2tlZCBvbiBhIGpxTGl0ZSBvYmplY3QgY29udGFpbmluZyBtb3JlIHRoYW4gb25lIERPTSBub2RlXG4gKiAtIFtgYXR0cigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2F0dHIvKSAtIERvZXMgbm90IHN1cHBvcnQgZnVuY3Rpb25zIGFzIHBhcmFtZXRlcnNcbiAqIC0gW2BiaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vYmluZC8pIChfZGVwcmVjYXRlZF8sIHVzZSBbYG9uKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vb24vKSkgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMsIHNlbGVjdG9ycyBvciBldmVudERhdGFcbiAqIC0gW2BjaGlsZHJlbigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2NoaWxkcmVuLykgLSBEb2VzIG5vdCBzdXBwb3J0IHNlbGVjdG9yc1xuICogLSBbYGNsb25lKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vY2xvbmUvKVxuICogLSBbYGNvbnRlbnRzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vY29udGVudHMvKVxuICogLSBbYGNzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2Nzcy8pIC0gT25seSByZXRyaWV2ZXMgaW5saW5lLXN0eWxlcywgZG9lcyBub3QgY2FsbCBgZ2V0Q29tcHV0ZWRTdHlsZSgpYC5cbiAqICAgQXMgYSBzZXR0ZXIsIGRvZXMgbm90IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmdzIG9yIGFwcGVuZCAncHgnLCBhbmQgYWxzbyBkb2VzIG5vdCBoYXZlIGF1dG9tYXRpYyBwcm9wZXJ0eSBwcmVmaXhpbmcuXG4gKiAtIFtgZGF0YSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2RhdGEvKVxuICogLSBbYGRldGFjaCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2RldGFjaC8pXG4gKiAtIFtgZW1wdHkoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9lbXB0eS8pXG4gKiAtIFtgZXEoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9lcS8pXG4gKiAtIFtgZmluZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2ZpbmQvKSAtIExpbWl0ZWQgdG8gbG9va3VwcyBieSB0YWcgbmFtZVxuICogLSBbYGhhc0NsYXNzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vaGFzQ2xhc3MvKVxuICogLSBbYGh0bWwoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9odG1sLylcbiAqIC0gW2BuZXh0KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vbmV4dC8pIC0gRG9lcyBub3Qgc3VwcG9ydCBzZWxlY3RvcnNcbiAqIC0gW2BvbigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL29uLykgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMsIHNlbGVjdG9ycyBvciBldmVudERhdGFcbiAqIC0gW2BvZmYoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vZmYvKSAtIERvZXMgbm90IHN1cHBvcnQgbmFtZXNwYWNlcywgc2VsZWN0b3JzIG9yIGV2ZW50IG9iamVjdCBhcyBwYXJhbWV0ZXJcbiAqIC0gW2BvbmUoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vbmUvKSAtIERvZXMgbm90IHN1cHBvcnQgbmFtZXNwYWNlcyBvciBzZWxlY3RvcnNcbiAqIC0gW2BwYXJlbnQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9wYXJlbnQvKSAtIERvZXMgbm90IHN1cHBvcnQgc2VsZWN0b3JzXG4gKiAtIFtgcHJlcGVuZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3ByZXBlbmQvKVxuICogLSBbYHByb3AoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9wcm9wLylcbiAqIC0gW2ByZWFkeSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlYWR5LykgKF9kZXByZWNhdGVkXywgdXNlIGBhbmd1bGFyLmVsZW1lbnQoY2FsbGJhY2spYCBpbnN0ZWFkIG9mIGBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLnJlYWR5KGNhbGxiYWNrKWApXG4gKiAtIFtgcmVtb3ZlKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVtb3ZlLylcbiAqIC0gW2ByZW1vdmVBdHRyKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVtb3ZlQXR0ci8pIC0gRG9lcyBub3Qgc3VwcG9ydCBtdWx0aXBsZSBhdHRyaWJ1dGVzXG4gKiAtIFtgcmVtb3ZlQ2xhc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZW1vdmVDbGFzcy8pIC0gRG9lcyBub3Qgc3VwcG9ydCBhIGZ1bmN0aW9uIGFzIGZpcnN0IGFyZ3VtZW50XG4gKiAtIFtgcmVtb3ZlRGF0YSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlbW92ZURhdGEvKVxuICogLSBbYHJlcGxhY2VXaXRoKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVwbGFjZVdpdGgvKVxuICogLSBbYHRleHQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90ZXh0LylcbiAqIC0gW2B0b2dnbGVDbGFzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3RvZ2dsZUNsYXNzLykgLSBEb2VzIG5vdCBzdXBwb3J0IGEgZnVuY3Rpb24gYXMgZmlyc3QgYXJndW1lbnRcbiAqIC0gW2B0cmlnZ2VySGFuZGxlcigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3RyaWdnZXJIYW5kbGVyLykgLSBQYXNzZXMgYSBkdW1teSBldmVudCBvYmplY3QgdG8gaGFuZGxlcnNcbiAqIC0gW2B1bmJpbmQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS91bmJpbmQvKSAoX2RlcHJlY2F0ZWRfLCB1c2UgW2BvZmYoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vZmYvKSkgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMgb3IgZXZlbnQgb2JqZWN0IGFzIHBhcmFtZXRlclxuICogLSBbYHZhbCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3ZhbC8pXG4gKiAtIFtgd3JhcCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3dyYXAvKVxuICpcbiAqICMjIGpRdWVyeS9qcUxpdGUgRXh0cmFzXG4gKiBBbmd1bGFySlMgYWxzbyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGFkZGl0aW9uYWwgbWV0aG9kcyBhbmQgZXZlbnRzIHRvIGJvdGggalF1ZXJ5IGFuZCBqcUxpdGU6XG4gKlxuICogIyMjIEV2ZW50c1xuICogLSBgJGRlc3Ryb3lgIC0gQW5ndWxhckpTIGludGVyY2VwdHMgYWxsIGpxTGl0ZS9qUXVlcnkncyBET00gZGVzdHJ1Y3Rpb24gYXBpcyBhbmQgZmlyZXMgdGhpcyBldmVudFxuICogICAgb24gYWxsIERPTSBub2RlcyBiZWluZyByZW1vdmVkLiAgVGhpcyBjYW4gYmUgdXNlZCB0byBjbGVhbiB1cCBhbnkgM3JkIHBhcnR5IGJpbmRpbmdzIHRvIHRoZSBET01cbiAqICAgIGVsZW1lbnQgYmVmb3JlIGl0IGlzIHJlbW92ZWQuXG4gKlxuICogIyMjIE1ldGhvZHNcbiAqIC0gYGNvbnRyb2xsZXIobmFtZSlgIC0gcmV0cmlldmVzIHRoZSBjb250cm9sbGVyIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQgb3IgaXRzIHBhcmVudC4gQnkgZGVmYXVsdFxuICogICByZXRyaWV2ZXMgY29udHJvbGxlciBhc3NvY2lhdGVkIHdpdGggdGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZS4gSWYgYG5hbWVgIGlzIHByb3ZpZGVkIGFzXG4gKiAgIGNhbWVsQ2FzZSBkaXJlY3RpdmUgbmFtZSwgdGhlbiB0aGUgY29udHJvbGxlciBmb3IgdGhpcyBkaXJlY3RpdmUgd2lsbCBiZSByZXRyaWV2ZWQgKGUuZy5cbiAqICAgYCduZ01vZGVsJ2ApLlxuICogLSBgaW5qZWN0b3IoKWAgLSByZXRyaWV2ZXMgdGhlIGluamVjdG9yIG9mIHRoZSBjdXJyZW50IGVsZW1lbnQgb3IgaXRzIHBhcmVudC5cbiAqIC0gYHNjb3BlKClgIC0gcmV0cmlldmVzIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0gb2YgdGhlIGN1cnJlbnRcbiAqICAgZWxlbWVudCBvciBpdHMgcGFyZW50LiBSZXF1aXJlcyB7QGxpbmsgZ3VpZGUvcHJvZHVjdGlvbiNkaXNhYmxpbmctZGVidWctZGF0YSBEZWJ1ZyBEYXRhfSB0b1xuICogICBiZSBlbmFibGVkLlxuICogLSBgaXNvbGF0ZVNjb3BlKClgIC0gcmV0cmlldmVzIGFuIGlzb2xhdGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgc2NvcGV9IGlmIG9uZSBpcyBhdHRhY2hlZCBkaXJlY3RseSB0byB0aGVcbiAqICAgY3VycmVudCBlbGVtZW50LiBUaGlzIGdldHRlciBzaG91bGQgYmUgdXNlZCBvbmx5IG9uIGVsZW1lbnRzIHRoYXQgY29udGFpbiBhIGRpcmVjdGl2ZSB3aGljaCBzdGFydHMgYSBuZXcgaXNvbGF0ZVxuICogICBzY29wZS4gQ2FsbGluZyBgc2NvcGUoKWAgb24gdGhpcyBlbGVtZW50IGFsd2F5cyByZXR1cm5zIHRoZSBvcmlnaW5hbCBub24taXNvbGF0ZSBzY29wZS5cbiAqICAgUmVxdWlyZXMge0BsaW5rIGd1aWRlL3Byb2R1Y3Rpb24jZGlzYWJsaW5nLWRlYnVnLWRhdGEgRGVidWcgRGF0YX0gdG8gYmUgZW5hYmxlZC5cbiAqIC0gYGluaGVyaXRlZERhdGEoKWAgLSBzYW1lIGFzIGBkYXRhKClgLCBidXQgd2Fsa3MgdXAgdGhlIERPTSB1bnRpbCBhIHZhbHVlIGlzIGZvdW5kIG9yIHRoZSB0b3BcbiAqICAgcGFyZW50IGVsZW1lbnQgaXMgcmVhY2hlZC5cbiAqXG4gKiBAa25vd25Jc3N1ZSBZb3UgY2Fubm90IHNweSBvbiBgYW5ndWxhci5lbGVtZW50YCBpZiB5b3UgYXJlIHVzaW5nIEphc21pbmUgdmVyc2lvbiAxLnguIFNlZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTQyNTEgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8RE9NRWxlbWVudH0gZWxlbWVudCBIVE1MIHN0cmluZyBvciBET01FbGVtZW50IHRvIGJlIHdyYXBwZWQgaW50byBqUXVlcnkuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBqUXVlcnkgb2JqZWN0LlxuICovXG5cbkpRTGl0ZS5leHBhbmRvID0gJ25nMzM5JztcblxudmFyIGpxQ2FjaGUgPSBKUUxpdGUuY2FjaGUgPSB7fSxcbiAgICBqcUlkID0gMTtcblxuLypcbiAqICEhISBUaGlzIGlzIGFuIHVuZG9jdW1lbnRlZCBcInByaXZhdGVcIiBmdW5jdGlvbiAhISFcbiAqL1xuSlFMaXRlLl9kYXRhID0gZnVuY3Rpb24obm9kZSkge1xuICAvL2pRdWVyeSBhbHdheXMgcmV0dXJucyBhbiBvYmplY3Qgb24gY2FjaGUgbWlzc1xuICByZXR1cm4gdGhpcy5jYWNoZVtub2RlW3RoaXMuZXhwYW5kb11dIHx8IHt9O1xufTtcblxuZnVuY3Rpb24ganFOZXh0SWQoKSB7IHJldHVybiArK2pxSWQ7IH1cblxuXG52YXIgREFTSF9MT1dFUkNBU0VfUkVHRVhQID0gLy0oW2Etel0pL2c7XG52YXIgTVNfSEFDS19SRUdFWFAgPSAvXi1tcy0vO1xudmFyIE1PVVNFX0VWRU5UX01BUCA9IHsgbW91c2VsZWF2ZTogJ21vdXNlb3V0JywgbW91c2VlbnRlcjogJ21vdXNlb3ZlcicgfTtcbnZhciBqcUxpdGVNaW5FcnIgPSBtaW5FcnIoJ2pxTGl0ZScpO1xuXG4vKipcbiAqIENvbnZlcnRzIGtlYmFiLWNhc2UgdG8gY2FtZWxDYXNlLlxuICogVGhlcmUgaXMgYWxzbyBhIHNwZWNpYWwgY2FzZSBmb3IgdGhlIG1zIHByZWZpeCBzdGFydGluZyB3aXRoIGEgbG93ZXJjYXNlIGxldHRlci5cbiAqIEBwYXJhbSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXG4gKi9cbmZ1bmN0aW9uIGNzc0tlYmFiVG9DYW1lbChuYW1lKSB7XG4gICAgcmV0dXJuIGtlYmFiVG9DYW1lbChuYW1lLnJlcGxhY2UoTVNfSEFDS19SRUdFWFAsICdtcy0nKSk7XG59XG5cbmZ1bmN0aW9uIGZuQ2FtZWxDYXNlUmVwbGFjZShhbGwsIGxldHRlcikge1xuICByZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQ29udmVydHMga2ViYWItY2FzZSB0byBjYW1lbENhc2UuXG4gKiBAcGFyYW0gbmFtZSBOYW1lIHRvIG5vcm1hbGl6ZVxuICovXG5mdW5jdGlvbiBrZWJhYlRvQ2FtZWwobmFtZSkge1xuICByZXR1cm4gbmFtZVxuICAgIC5yZXBsYWNlKERBU0hfTE9XRVJDQVNFX1JFR0VYUCwgZm5DYW1lbENhc2VSZXBsYWNlKTtcbn1cblxudmFyIFNJTkdMRV9UQUdfUkVHRVhQID0gL148KFtcXHctXSspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvO1xudmFyIEhUTUxfUkVHRVhQID0gLzx8JiM/XFx3KzsvO1xudmFyIFRBR19OQU1FX1JFR0VYUCA9IC88KFtcXHc6LV0rKS87XG52YXIgWEhUTUxfVEFHX1JFR0VYUCA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6LV0rKVtePl0qKVxcLz4vZ2k7XG5cbnZhciB3cmFwTWFwID0ge1xuICAnb3B0aW9uJzogWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J10sXG5cbiAgJ3RoZWFkJzogWzEsICc8dGFibGU+JywgJzwvdGFibGU+J10sXG4gICdjb2wnOiBbMiwgJzx0YWJsZT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXSxcbiAgJ3RyJzogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gICd0ZCc6IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddLFxuICAnX2RlZmF1bHQnOiBbMCwgJycsICcnXVxufTtcblxud3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uO1xud3JhcE1hcC50Ym9keSA9IHdyYXBNYXAudGZvb3QgPSB3cmFwTWFwLmNvbGdyb3VwID0gd3JhcE1hcC5jYXB0aW9uID0gd3JhcE1hcC50aGVhZDtcbndyYXBNYXAudGggPSB3cmFwTWFwLnRkO1xuXG5cbmZ1bmN0aW9uIGpxTGl0ZUlzVGV4dE5vZGUoaHRtbCkge1xuICByZXR1cm4gIUhUTUxfUkVHRVhQLnRlc3QoaHRtbCk7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUFjY2VwdHNEYXRhKG5vZGUpIHtcbiAgLy8gVGhlIHdpbmRvdyBvYmplY3QgY2FuIGFjY2VwdCBkYXRhIGJ1dCBoYXMgbm8gbm9kZVR5cGVcbiAgLy8gT3RoZXJ3aXNlIHdlIGFyZSBvbmx5IGludGVyZXN0ZWQgaW4gZWxlbWVudHMgKDEpIGFuZCBkb2N1bWVudHMgKDkpXG4gIHZhciBub2RlVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gIHJldHVybiBub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQgfHwgIW5vZGVUeXBlIHx8IG5vZGVUeXBlID09PSBOT0RFX1RZUEVfRE9DVU1FTlQ7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUhhc0RhdGEobm9kZSkge1xuICBmb3IgKHZhciBrZXkgaW4ganFDYWNoZVtub2RlLm5nMzM5XSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24ganFMaXRlQnVpbGRGcmFnbWVudChodG1sLCBjb250ZXh0KSB7XG4gIHZhciB0bXAsIHRhZywgd3JhcCxcbiAgICAgIGZyYWdtZW50ID0gY29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBub2RlcyA9IFtdLCBpO1xuXG4gIGlmIChqcUxpdGVJc1RleHROb2RlKGh0bWwpKSB7XG4gICAgLy8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlXG4gICAgbm9kZXMucHVzaChjb250ZXh0LmNyZWF0ZVRleHROb2RlKGh0bWwpKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcbiAgICB0bXAgPSBmcmFnbWVudC5hcHBlbmRDaGlsZChjb250ZXh0LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICB0YWcgPSAoVEFHX05BTUVfUkVHRVhQLmV4ZWMoaHRtbCkgfHwgWycnLCAnJ10pWzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgd3JhcCA9IHdyYXBNYXBbdGFnXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuICAgIHRtcC5pbm5lckhUTUwgPSB3cmFwWzFdICsgaHRtbC5yZXBsYWNlKFhIVE1MX1RBR19SRUdFWFAsICc8JDE+PC8kMj4nKSArIHdyYXBbMl07XG5cbiAgICAvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcbiAgICBpID0gd3JhcFswXTtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0bXAgPSB0bXAubGFzdENoaWxkO1xuICAgIH1cblxuICAgIG5vZGVzID0gY29uY2F0KG5vZGVzLCB0bXAuY2hpbGROb2Rlcyk7XG5cbiAgICB0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuICAgIHRtcC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgLy8gUmVtb3ZlIHdyYXBwZXIgZnJvbSBmcmFnbWVudFxuICBmcmFnbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICBmcmFnbWVudC5pbm5lckhUTUwgPSAnJzsgLy8gQ2xlYXIgaW5uZXIgSFRNTFxuICBmb3JFYWNoKG5vZGVzLCBmdW5jdGlvbihub2RlKSB7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gIH0pO1xuXG4gIHJldHVybiBmcmFnbWVudDtcbn1cblxuZnVuY3Rpb24ganFMaXRlUGFyc2VIVE1MKGh0bWwsIGNvbnRleHQpIHtcbiAgY29udGV4dCA9IGNvbnRleHQgfHwgd2luZG93LmRvY3VtZW50O1xuICB2YXIgcGFyc2VkO1xuXG4gIGlmICgocGFyc2VkID0gU0lOR0xFX1RBR19SRUdFWFAuZXhlYyhodG1sKSkpIHtcbiAgICByZXR1cm4gW2NvbnRleHQuY3JlYXRlRWxlbWVudChwYXJzZWRbMV0pXTtcbiAgfVxuXG4gIGlmICgocGFyc2VkID0ganFMaXRlQnVpbGRGcmFnbWVudChodG1sLCBjb250ZXh0KSkpIHtcbiAgICByZXR1cm4gcGFyc2VkLmNoaWxkTm9kZXM7XG4gIH1cblxuICByZXR1cm4gW107XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZVdyYXBOb2RlKG5vZGUsIHdyYXBwZXIpIHtcbiAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcblxuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZCh3cmFwcGVyLCBub2RlKTtcbiAgfVxuXG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQobm9kZSk7XG59XG5cblxuLy8gSUU5LTExIGhhcyBubyBtZXRob2QgXCJjb250YWluc1wiIGluIFNWRyBlbGVtZW50IGFuZCBpbiBOb2RlLnByb3RvdHlwZS4gQnVnICMxMDI1OS5cbnZhciBqcUxpdGVDb250YWlucyA9IHdpbmRvdy5Ob2RlLnByb3RvdHlwZS5jb250YWlucyB8fCAvKiogQHRoaXMgKi8gZnVuY3Rpb24oYXJnKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gIHJldHVybiAhISh0aGlzLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGFyZykgJiAxNik7XG59O1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZ1bmN0aW9uIEpRTGl0ZShlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSlFMaXRlKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICB2YXIgYXJnSXNTdHJpbmc7XG5cbiAgaWYgKGlzU3RyaW5nKGVsZW1lbnQpKSB7XG4gICAgZWxlbWVudCA9IHRyaW0oZWxlbWVudCk7XG4gICAgYXJnSXNTdHJpbmcgPSB0cnVlO1xuICB9XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBKUUxpdGUpKSB7XG4gICAgaWYgKGFyZ0lzU3RyaW5nICYmIGVsZW1lbnQuY2hhckF0KDApICE9PSAnPCcpIHtcbiAgICAgIHRocm93IGpxTGl0ZU1pbkVycignbm9zZWwnLCAnTG9va2luZyB1cCBlbGVtZW50cyB2aWEgc2VsZWN0b3JzIGlzIG5vdCBzdXBwb3J0ZWQgYnkganFMaXRlISBTZWU6IGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL2FuZ3VsYXIuZWxlbWVudCcpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEpRTGl0ZShlbGVtZW50KTtcbiAgfVxuXG4gIGlmIChhcmdJc1N0cmluZykge1xuICAgIGpxTGl0ZUFkZE5vZGVzKHRoaXMsIGpxTGl0ZVBhcnNlSFRNTChlbGVtZW50KSk7XG4gIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihlbGVtZW50KSkge1xuICAgIGpxTGl0ZVJlYWR5KGVsZW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGpxTGl0ZUFkZE5vZGVzKHRoaXMsIGVsZW1lbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUNsb25lKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xufVxuXG5mdW5jdGlvbiBqcUxpdGVEZWFsb2MoZWxlbWVudCwgb25seURlc2NlbmRhbnRzKSB7XG4gIGlmICghb25seURlc2NlbmRhbnRzICYmIGpxTGl0ZUFjY2VwdHNEYXRhKGVsZW1lbnQpKSBqcUxpdGUuY2xlYW5EYXRhKFtlbGVtZW50XSk7XG5cbiAgaWYgKGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCkge1xuICAgIGpxTGl0ZS5jbGVhbkRhdGEoZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqJykpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzRW1wdHlPYmplY3Qob2JqKSB7XG4gIHZhciBuYW1lO1xuXG4gIGZvciAobmFtZSBpbiBvYmopIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUlmRW1wdHlEYXRhKGVsZW1lbnQpIHtcbiAgdmFyIGV4cGFuZG9JZCA9IGVsZW1lbnQubmczMzk7XG4gIHZhciBleHBhbmRvU3RvcmUgPSBleHBhbmRvSWQgJiYganFDYWNoZVtleHBhbmRvSWRdO1xuXG4gIHZhciBldmVudHMgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmV2ZW50cztcbiAgdmFyIGRhdGEgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmRhdGE7XG5cbiAgaWYgKCghZGF0YSB8fCBpc0VtcHR5T2JqZWN0KGRhdGEpKSAmJiAoIWV2ZW50cyB8fCBpc0VtcHR5T2JqZWN0KGV2ZW50cykpKSB7XG4gICAgZGVsZXRlIGpxQ2FjaGVbZXhwYW5kb0lkXTtcbiAgICBlbGVtZW50Lm5nMzM5ID0gdW5kZWZpbmVkOyAvLyBkb24ndCBkZWxldGUgRE9NIGV4cGFuZG9zLiBJRSBhbmQgQ2hyb21lIGRvbid0IGxpa2UgaXRcbiAgfVxufVxuXG5mdW5jdGlvbiBqcUxpdGVPZmYoZWxlbWVudCwgdHlwZSwgZm4sIHVuc3VwcG9ydGVkKSB7XG4gIGlmIChpc0RlZmluZWQodW5zdXBwb3J0ZWQpKSB0aHJvdyBqcUxpdGVNaW5FcnIoJ29mZmFyZ3MnLCAnanFMaXRlI29mZigpIGRvZXMgbm90IHN1cHBvcnQgdGhlIGBzZWxlY3RvcmAgYXJndW1lbnQnKTtcblxuICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQpO1xuICB2YXIgZXZlbnRzID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5ldmVudHM7XG4gIHZhciBoYW5kbGUgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmhhbmRsZTtcblxuICBpZiAoIWhhbmRsZSkgcmV0dXJuOyAvL25vIGxpc3RlbmVycyByZWdpc3RlcmVkXG5cbiAgaWYgKCF0eXBlKSB7XG4gICAgZm9yICh0eXBlIGluIGV2ZW50cykge1xuICAgICAgaWYgKHR5cGUgIT09ICckZGVzdHJveScpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZSk7XG4gICAgICB9XG4gICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgIH1cbiAgfSBlbHNlIHtcblxuICAgIHZhciByZW1vdmVIYW5kbGVyID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVyRm5zID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGlzRGVmaW5lZChmbikpIHtcbiAgICAgICAgYXJyYXlSZW1vdmUobGlzdGVuZXJGbnMgfHwgW10sIGZuKTtcbiAgICAgIH1cbiAgICAgIGlmICghKGlzRGVmaW5lZChmbikgJiYgbGlzdGVuZXJGbnMgJiYgbGlzdGVuZXJGbnMubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZSk7XG4gICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvckVhY2godHlwZS5zcGxpdCgnICcpLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICByZW1vdmVIYW5kbGVyKHR5cGUpO1xuICAgICAgaWYgKE1PVVNFX0VWRU5UX01BUFt0eXBlXSkge1xuICAgICAgICByZW1vdmVIYW5kbGVyKE1PVVNFX0VWRU5UX01BUFt0eXBlXSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZW1vdmVJZkVtcHR5RGF0YShlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24ganFMaXRlUmVtb3ZlRGF0YShlbGVtZW50LCBuYW1lKSB7XG4gIHZhciBleHBhbmRvSWQgPSBlbGVtZW50Lm5nMzM5O1xuICB2YXIgZXhwYW5kb1N0b3JlID0gZXhwYW5kb0lkICYmIGpxQ2FjaGVbZXhwYW5kb0lkXTtcblxuICBpZiAoZXhwYW5kb1N0b3JlKSB7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIGRlbGV0ZSBleHBhbmRvU3RvcmUuZGF0YVtuYW1lXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhwYW5kb1N0b3JlLmRhdGEgPSB7fTtcbiAgICB9XG5cbiAgICByZW1vdmVJZkVtcHR5RGF0YShlbGVtZW50KTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCBjcmVhdGVJZk5lY2Vzc2FyeSkge1xuICB2YXIgZXhwYW5kb0lkID0gZWxlbWVudC5uZzMzOSxcbiAgICAgIGV4cGFuZG9TdG9yZSA9IGV4cGFuZG9JZCAmJiBqcUNhY2hlW2V4cGFuZG9JZF07XG5cbiAgaWYgKGNyZWF0ZUlmTmVjZXNzYXJ5ICYmICFleHBhbmRvU3RvcmUpIHtcbiAgICBlbGVtZW50Lm5nMzM5ID0gZXhwYW5kb0lkID0ganFOZXh0SWQoKTtcbiAgICBleHBhbmRvU3RvcmUgPSBqcUNhY2hlW2V4cGFuZG9JZF0gPSB7ZXZlbnRzOiB7fSwgZGF0YToge30sIGhhbmRsZTogdW5kZWZpbmVkfTtcbiAgfVxuXG4gIHJldHVybiBleHBhbmRvU3RvcmU7XG59XG5cblxuZnVuY3Rpb24ganFMaXRlRGF0YShlbGVtZW50LCBrZXksIHZhbHVlKSB7XG4gIGlmIChqcUxpdGVBY2NlcHRzRGF0YShlbGVtZW50KSkge1xuICAgIHZhciBwcm9wO1xuXG4gICAgdmFyIGlzU2ltcGxlU2V0dGVyID0gaXNEZWZpbmVkKHZhbHVlKTtcbiAgICB2YXIgaXNTaW1wbGVHZXR0ZXIgPSAhaXNTaW1wbGVTZXR0ZXIgJiYga2V5ICYmICFpc09iamVjdChrZXkpO1xuICAgIHZhciBtYXNzR2V0dGVyID0gIWtleTtcbiAgICB2YXIgZXhwYW5kb1N0b3JlID0ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsICFpc1NpbXBsZUdldHRlcik7XG4gICAgdmFyIGRhdGEgPSBleHBhbmRvU3RvcmUgJiYgZXhwYW5kb1N0b3JlLmRhdGE7XG5cbiAgICBpZiAoaXNTaW1wbGVTZXR0ZXIpIHsgLy8gZGF0YSgna2V5JywgdmFsdWUpXG4gICAgICBkYXRhW2tlYmFiVG9DYW1lbChrZXkpXSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobWFzc0dldHRlcikgeyAgLy8gZGF0YSgpXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzU2ltcGxlR2V0dGVyKSB7IC8vIGRhdGEoJ2tleScpXG4gICAgICAgICAgLy8gZG9uJ3QgZm9yY2UgY3JlYXRpb24gb2YgZXhwYW5kb1N0b3JlIGlmIGl0IGRvZXNuJ3QgZXhpc3QgeWV0XG4gICAgICAgICAgcmV0dXJuIGRhdGEgJiYgZGF0YVtrZWJhYlRvQ2FtZWwoa2V5KV07XG4gICAgICAgIH0gZWxzZSB7IC8vIG1hc3Mtc2V0dGVyOiBkYXRhKHtrZXkxOiB2YWwxLCBrZXkyOiB2YWwyfSlcbiAgICAgICAgICBmb3IgKHByb3AgaW4ga2V5KSB7XG4gICAgICAgICAgICBkYXRhW2tlYmFiVG9DYW1lbChwcm9wKV0gPSBrZXlbcHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUhhc0NsYXNzKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gIGlmICghZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuICgoJyAnICsgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArICcgJykucmVwbGFjZSgvW1xcblxcdF0vZywgJyAnKS5cbiAgICAgIGluZGV4T2YoJyAnICsgc2VsZWN0b3IgKyAnICcpID4gLTEpO1xufVxuXG5mdW5jdGlvbiBqcUxpdGVSZW1vdmVDbGFzcyhlbGVtZW50LCBjc3NDbGFzc2VzKSB7XG4gIGlmIChjc3NDbGFzc2VzICYmIGVsZW1lbnQuc2V0QXR0cmlidXRlKSB7XG4gICAgdmFyIGV4aXN0aW5nQ2xhc3NlcyA9ICgnICcgKyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgJyAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxuXFx0XS9nLCAnICcpO1xuICAgIHZhciBuZXdDbGFzc2VzID0gZXhpc3RpbmdDbGFzc2VzO1xuXG4gICAgZm9yRWFjaChjc3NDbGFzc2VzLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNzc0NsYXNzKSB7XG4gICAgICBjc3NDbGFzcyA9IHRyaW0oY3NzQ2xhc3MpO1xuICAgICAgbmV3Q2xhc3NlcyA9IG5ld0NsYXNzZXMucmVwbGFjZSgnICcgKyBjc3NDbGFzcyArICcgJywgJyAnKTtcbiAgICB9KTtcblxuICAgIGlmIChuZXdDbGFzc2VzICE9PSBleGlzdGluZ0NsYXNzZXMpIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRyaW0obmV3Q2xhc3NlcykpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBqcUxpdGVBZGRDbGFzcyhlbGVtZW50LCBjc3NDbGFzc2VzKSB7XG4gIGlmIChjc3NDbGFzc2VzICYmIGVsZW1lbnQuc2V0QXR0cmlidXRlKSB7XG4gICAgdmFyIGV4aXN0aW5nQ2xhc3NlcyA9ICgnICcgKyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgJyAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxuXFx0XS9nLCAnICcpO1xuICAgIHZhciBuZXdDbGFzc2VzID0gZXhpc3RpbmdDbGFzc2VzO1xuXG4gICAgZm9yRWFjaChjc3NDbGFzc2VzLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNzc0NsYXNzKSB7XG4gICAgICBjc3NDbGFzcyA9IHRyaW0oY3NzQ2xhc3MpO1xuICAgICAgaWYgKG5ld0NsYXNzZXMuaW5kZXhPZignICcgKyBjc3NDbGFzcyArICcgJykgPT09IC0xKSB7XG4gICAgICAgIG5ld0NsYXNzZXMgKz0gY3NzQ2xhc3MgKyAnICc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAobmV3Q2xhc3NlcyAhPT0gZXhpc3RpbmdDbGFzc2VzKSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB0cmltKG5ld0NsYXNzZXMpKTtcbiAgICB9XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBqcUxpdGVBZGROb2Rlcyhyb290LCBlbGVtZW50cykge1xuICAvLyBUSElTIENPREUgSVMgVkVSWSBIT1QuIERvbid0IG1ha2UgY2hhbmdlcyB3aXRob3V0IGJlbmNobWFya2luZy5cblxuICBpZiAoZWxlbWVudHMpIHtcblxuICAgIC8vIGlmIGEgTm9kZSAodGhlIG1vc3QgY29tbW9uIGNhc2UpXG4gICAgaWYgKGVsZW1lbnRzLm5vZGVUeXBlKSB7XG4gICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG5cbiAgICAgIC8vIGlmIGFuIEFycmF5IG9yIE5vZGVMaXN0IGFuZCBub3QgYSBXaW5kb3dcbiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09PSAnbnVtYmVyJyAmJiBlbGVtZW50cy53aW5kb3cgIT09IGVsZW1lbnRzKSB7XG4gICAgICAgIGlmIChsZW5ndGgpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHNbaV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb290W3Jvb3QubGVuZ3RoKytdID0gZWxlbWVudHM7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblxuZnVuY3Rpb24ganFMaXRlQ29udHJvbGxlcihlbGVtZW50LCBuYW1lKSB7XG4gIHJldHVybiBqcUxpdGVJbmhlcml0ZWREYXRhKGVsZW1lbnQsICckJyArIChuYW1lIHx8ICduZ0NvbnRyb2xsZXInKSArICdDb250cm9sbGVyJyk7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwgbmFtZSwgdmFsdWUpIHtcbiAgLy8gaWYgZWxlbWVudCBpcyB0aGUgZG9jdW1lbnQgb2JqZWN0IHdvcmsgd2l0aCB0aGUgaHRtbCBlbGVtZW50IGluc3RlYWRcbiAgLy8gdGhpcyBtYWtlcyAkKGRvY3VtZW50KS5zY29wZSgpIHBvc3NpYmxlXG4gIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSBOT0RFX1RZUEVfRE9DVU1FTlQpIHtcbiAgICBlbGVtZW50ID0gZWxlbWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIH1cbiAgdmFyIG5hbWVzID0gaXNBcnJheShuYW1lKSA/IG5hbWUgOiBbbmFtZV07XG5cbiAgd2hpbGUgKGVsZW1lbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBuYW1lcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlID0ganFMaXRlLmRhdGEoZWxlbWVudCwgbmFtZXNbaV0pKSkgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8vIElmIGRlYWxpbmcgd2l0aCBhIGRvY3VtZW50IGZyYWdtZW50IG5vZGUgd2l0aCBhIGhvc3QgZWxlbWVudCwgYW5kIG5vIHBhcmVudCwgdXNlIHRoZSBob3N0XG4gICAgLy8gZWxlbWVudCBhcyB0aGUgcGFyZW50LiBUaGlzIGVuYWJsZXMgZGlyZWN0aXZlcyB3aXRoaW4gYSBTaGFkb3cgRE9NIG9yIHBvbHlmaWxsZWQgU2hhZG93IERPTVxuICAgIC8vIHRvIGxvb2t1cCBwYXJlbnQgY29udHJvbGxlcnMuXG4gICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSB8fCAoZWxlbWVudC5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UICYmIGVsZW1lbnQuaG9zdCk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlRW1wdHkoZWxlbWVudCkge1xuICBqcUxpdGVEZWFsb2MoZWxlbWVudCwgdHJ1ZSk7XG4gIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlUmVtb3ZlKGVsZW1lbnQsIGtlZXBEYXRhKSB7XG4gIGlmICgha2VlcERhdGEpIGpxTGl0ZURlYWxvYyhlbGVtZW50KTtcbiAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xufVxuXG5cbmZ1bmN0aW9uIGpxTGl0ZURvY3VtZW50TG9hZGVkKGFjdGlvbiwgd2luKSB7XG4gIHdpbiA9IHdpbiB8fCB3aW5kb3c7XG4gIGlmICh3aW4uZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgIC8vIEZvcmNlIHRoZSBhY3Rpb24gdG8gYmUgcnVuIGFzeW5jIGZvciBjb25zaXN0ZW50IGJlaGF2aW9yXG4gICAgLy8gZnJvbSB0aGUgYWN0aW9uJ3MgcG9pbnQgb2Ygdmlld1xuICAgIC8vIGkuZS4gaXQgd2lsbCBkZWZpbml0ZWx5IG5vdCBiZSBpbiBhICRhcHBseVxuICAgIHdpbi5zZXRUaW1lb3V0KGFjdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgLy8gTm8gbmVlZCB0byB1bmJpbmQgdGhpcyBoYW5kbGVyIGFzIGxvYWQgaXMgb25seSBldmVyIGNhbGxlZCBvbmNlXG4gICAganFMaXRlKHdpbikub24oJ2xvYWQnLCBhY3Rpb24pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZVJlYWR5KGZuKSB7XG4gIGZ1bmN0aW9uIHRyaWdnZXIoKSB7XG4gICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB0cmlnZ2VyKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRyaWdnZXIpO1xuICAgIGZuKCk7XG4gIH1cblxuICAvLyBjaGVjayBpZiBkb2N1bWVudCBpcyBhbHJlYWR5IGxvYWRlZFxuICBpZiAod2luZG93LmRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICB3aW5kb3cuc2V0VGltZW91dChmbik7XG4gIH0gZWxzZSB7XG4gICAgLy8gV2UgY2FuIG5vdCB1c2UganFMaXRlIHNpbmNlIHdlIGFyZSBub3QgZG9uZSBsb2FkaW5nIGFuZCBqUXVlcnkgY291bGQgYmUgbG9hZGVkIGxhdGVyLlxuXG4gICAgLy8gV29ya3MgZm9yIG1vZGVybiBicm93c2VycyBhbmQgSUU5XG4gICAgd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB0cmlnZ2VyKTtcblxuICAgIC8vIEZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQgZm9yIG90aGVyc1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgdHJpZ2dlcik7XG4gIH1cbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBGdW5jdGlvbnMgd2hpY2ggYXJlIGRlY2xhcmVkIGRpcmVjdGx5LlxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG52YXIgSlFMaXRlUHJvdG90eXBlID0gSlFMaXRlLnByb3RvdHlwZSA9IHtcbiAgcmVhZHk6IGpxTGl0ZVJlYWR5LFxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlID0gW107XG4gICAgZm9yRWFjaCh0aGlzLCBmdW5jdGlvbihlKSB7IHZhbHVlLnB1c2goJycgKyBlKTt9KTtcbiAgICByZXR1cm4gJ1snICsgdmFsdWUuam9pbignLCAnKSArICddJztcbiAgfSxcblxuICBlcTogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHJldHVybiAoaW5kZXggPj0gMCkgPyBqcUxpdGUodGhpc1tpbmRleF0pIDoganFMaXRlKHRoaXNbdGhpcy5sZW5ndGggKyBpbmRleF0pO1xuICB9LFxuXG4gIGxlbmd0aDogMCxcbiAgcHVzaDogcHVzaCxcbiAgc29ydDogW10uc29ydCxcbiAgc3BsaWNlOiBbXS5zcGxpY2Vcbn07XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gRnVuY3Rpb25zIGl0ZXJhdGluZyBnZXR0ZXIvc2V0dGVycy5cbi8vIHRoZXNlIGZ1bmN0aW9ucyByZXR1cm4gc2VsZiBvbiBzZXR0ZXIgYW5kXG4vLyB2YWx1ZSBvbiBnZXQuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbnZhciBCT09MRUFOX0FUVFIgPSB7fTtcbmZvckVhY2goJ211bHRpcGxlLHNlbGVjdGVkLGNoZWNrZWQsZGlzYWJsZWQscmVhZE9ubHkscmVxdWlyZWQsb3Blbicuc3BsaXQoJywnKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgQk9PTEVBTl9BVFRSW2xvd2VyY2FzZSh2YWx1ZSldID0gdmFsdWU7XG59KTtcbnZhciBCT09MRUFOX0VMRU1FTlRTID0ge307XG5mb3JFYWNoKCdpbnB1dCxzZWxlY3Qsb3B0aW9uLHRleHRhcmVhLGJ1dHRvbixmb3JtLGRldGFpbHMnLnNwbGl0KCcsJyksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gIEJPT0xFQU5fRUxFTUVOVFNbdmFsdWVdID0gdHJ1ZTtcbn0pO1xudmFyIEFMSUFTRURfQVRUUiA9IHtcbiAgJ25nTWlubGVuZ3RoJzogJ21pbmxlbmd0aCcsXG4gICduZ01heGxlbmd0aCc6ICdtYXhsZW5ndGgnLFxuICAnbmdNaW4nOiAnbWluJyxcbiAgJ25nTWF4JzogJ21heCcsXG4gICduZ1BhdHRlcm4nOiAncGF0dGVybicsXG4gICduZ1N0ZXAnOiAnc3RlcCdcbn07XG5cbmZ1bmN0aW9uIGdldEJvb2xlYW5BdHRyTmFtZShlbGVtZW50LCBuYW1lKSB7XG4gIC8vIGNoZWNrIGRvbSBsYXN0IHNpbmNlIHdlIHdpbGwgbW9zdCBsaWtlbHkgZmFpbCBvbiBuYW1lXG4gIHZhciBib29sZWFuQXR0ciA9IEJPT0xFQU5fQVRUUltuYW1lLnRvTG93ZXJDYXNlKCldO1xuXG4gIC8vIGJvb2xlYW5BdHRyIGlzIGhlcmUgdHdpY2UgdG8gbWluaW1pemUgRE9NIGFjY2Vzc1xuICByZXR1cm4gYm9vbGVhbkF0dHIgJiYgQk9PTEVBTl9FTEVNRU5UU1tub2RlTmFtZV8oZWxlbWVudCldICYmIGJvb2xlYW5BdHRyO1xufVxuXG5mdW5jdGlvbiBnZXRBbGlhc2VkQXR0ck5hbWUobmFtZSkge1xuICByZXR1cm4gQUxJQVNFRF9BVFRSW25hbWVdO1xufVxuXG5mb3JFYWNoKHtcbiAgZGF0YToganFMaXRlRGF0YSxcbiAgcmVtb3ZlRGF0YToganFMaXRlUmVtb3ZlRGF0YSxcbiAgaGFzRGF0YToganFMaXRlSGFzRGF0YSxcbiAgY2xlYW5EYXRhOiBmdW5jdGlvbiBqcUxpdGVDbGVhbkRhdGEobm9kZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBub2Rlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBqcUxpdGVSZW1vdmVEYXRhKG5vZGVzW2ldKTtcbiAgICAgIGpxTGl0ZU9mZihub2Rlc1tpXSk7XG4gICAgfVxuICB9XG59LCBmdW5jdGlvbihmbiwgbmFtZSkge1xuICBKUUxpdGVbbmFtZV0gPSBmbjtcbn0pO1xuXG5mb3JFYWNoKHtcbiAgZGF0YToganFMaXRlRGF0YSxcbiAgaW5oZXJpdGVkRGF0YToganFMaXRlSW5oZXJpdGVkRGF0YSxcblxuICBzY29wZTogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIC8vIENhbid0IHVzZSBqcUxpdGVEYXRhIGhlcmUgZGlyZWN0bHkgc28gd2Ugc3RheSBjb21wYXRpYmxlIHdpdGggalF1ZXJ5IVxuICAgIHJldHVybiBqcUxpdGUuZGF0YShlbGVtZW50LCAnJHNjb3BlJykgfHwganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LnBhcmVudE5vZGUgfHwgZWxlbWVudCwgWyckaXNvbGF0ZVNjb3BlJywgJyRzY29wZSddKTtcbiAgfSxcblxuICBpc29sYXRlU2NvcGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAvLyBDYW4ndCB1c2UganFMaXRlRGF0YSBoZXJlIGRpcmVjdGx5IHNvIHdlIHN0YXkgY29tcGF0aWJsZSB3aXRoIGpRdWVyeSFcbiAgICByZXR1cm4ganFMaXRlLmRhdGEoZWxlbWVudCwgJyRpc29sYXRlU2NvcGUnKSB8fCBqcUxpdGUuZGF0YShlbGVtZW50LCAnJGlzb2xhdGVTY29wZU5vVGVtcGxhdGUnKTtcbiAgfSxcblxuICBjb250cm9sbGVyOiBqcUxpdGVDb250cm9sbGVyLFxuXG4gIGluamVjdG9yOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwgJyRpbmplY3RvcicpO1xuICB9LFxuXG4gIHJlbW92ZUF0dHI6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUpIHtcbiAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgfSxcblxuICBoYXNDbGFzczoganFMaXRlSGFzQ2xhc3MsXG5cbiAgY3NzOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xuICAgIG5hbWUgPSBjc3NLZWJhYlRvQ2FtZWwobmFtZSk7XG5cbiAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgZWxlbWVudC5zdHlsZVtuYW1lXSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZWxlbWVudC5zdHlsZVtuYW1lXTtcbiAgICB9XG4gIH0sXG5cbiAgYXR0cjogZnVuY3Rpb24oZWxlbWVudCwgbmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgcmV0O1xuICAgIHZhciBub2RlVHlwZSA9IGVsZW1lbnQubm9kZVR5cGU7XG4gICAgaWYgKG5vZGVUeXBlID09PSBOT0RFX1RZUEVfVEVYVCB8fCBub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0FUVFJJQlVURSB8fCBub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0NPTU1FTlQgfHxcbiAgICAgICFlbGVtZW50LmdldEF0dHJpYnV0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBsb3dlcmNhc2VkTmFtZSA9IGxvd2VyY2FzZShuYW1lKTtcbiAgICB2YXIgaXNCb29sZWFuQXR0ciA9IEJPT0xFQU5fQVRUUltsb3dlcmNhc2VkTmFtZV07XG5cbiAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgLy8gc2V0dGVyXG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCAodmFsdWUgPT09IGZhbHNlICYmIGlzQm9vbGVhbkF0dHIpKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgaXNCb29sZWFuQXR0ciA/IGxvd2VyY2FzZWROYW1lIDogdmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBnZXR0ZXJcblxuICAgICAgcmV0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUobmFtZSk7XG5cbiAgICAgIGlmIChpc0Jvb2xlYW5BdHRyICYmIHJldCAhPT0gbnVsbCkge1xuICAgICAgICByZXQgPSBsb3dlcmNhc2VkTmFtZTtcbiAgICAgIH1cbiAgICAgIC8vIE5vcm1hbGl6ZSBub24tZXhpc3RpbmcgYXR0cmlidXRlcyB0byB1bmRlZmluZWQgKGFzIGpRdWVyeSkuXG4gICAgICByZXR1cm4gcmV0ID09PSBudWxsID8gdW5kZWZpbmVkIDogcmV0O1xuICAgIH1cbiAgfSxcblxuICBwcm9wOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICBlbGVtZW50W25hbWVdID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbGVtZW50W25hbWVdO1xuICAgIH1cbiAgfSxcblxuICB0ZXh0OiAoZnVuY3Rpb24oKSB7XG4gICAgZ2V0VGV4dC4kZHYgPSAnJztcbiAgICByZXR1cm4gZ2V0VGV4dDtcblxuICAgIGZ1bmN0aW9uIGdldFRleHQoZWxlbWVudCwgdmFsdWUpIHtcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdmFyIG5vZGVUeXBlID0gZWxlbWVudC5ub2RlVHlwZTtcbiAgICAgICAgcmV0dXJuIChub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQgfHwgbm9kZVR5cGUgPT09IE5PREVfVFlQRV9URVhUKSA/IGVsZW1lbnQudGV4dENvbnRlbnQgOiAnJztcbiAgICAgIH1cbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgICB9XG4gIH0pKCksXG5cbiAgdmFsOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZSkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIGlmIChlbGVtZW50Lm11bHRpcGxlICYmIG5vZGVOYW1lXyhlbGVtZW50KSA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3JFYWNoKGVsZW1lbnQub3B0aW9ucywgZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gob3B0aW9uLnZhbHVlIHx8IG9wdGlvbi50ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbiAgfSxcblxuICBodG1sOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZSkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBlbGVtZW50LmlubmVySFRNTDtcbiAgICB9XG4gICAganFMaXRlRGVhbG9jKGVsZW1lbnQsIHRydWUpO1xuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gdmFsdWU7XG4gIH0sXG5cbiAgZW1wdHk6IGpxTGl0ZUVtcHR5XG59LCBmdW5jdGlvbihmbiwgbmFtZSkge1xuICAvKipcbiAgICogUHJvcGVydGllczogd3JpdGVzIHJldHVybiBzZWxlY3Rpb24sIHJlYWRzIHJldHVybiBmaXJzdCB2YWx1ZVxuICAgKi9cbiAgSlFMaXRlLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKGFyZzEsIGFyZzIpIHtcbiAgICB2YXIgaSwga2V5O1xuICAgIHZhciBub2RlQ291bnQgPSB0aGlzLmxlbmd0aDtcblxuICAgIC8vIGpxTGl0ZUhhc0NsYXNzIGhhcyBvbmx5IHR3byBhcmd1bWVudHMsIGJ1dCBpcyBhIGdldHRlci1vbmx5IGZuLCBzbyB3ZSBuZWVkIHRvIHNwZWNpYWwtY2FzZSBpdFxuICAgIC8vIGluIGEgd2F5IHRoYXQgc3Vydml2ZXMgbWluaWZpY2F0aW9uLlxuICAgIC8vIGpxTGl0ZUVtcHR5IHRha2VzIG5vIGFyZ3VtZW50cyBidXQgaXMgYSBzZXR0ZXIuXG4gICAgaWYgKGZuICE9PSBqcUxpdGVFbXB0eSAmJlxuICAgICAgICAoaXNVbmRlZmluZWQoKGZuLmxlbmd0aCA9PT0gMiAmJiAoZm4gIT09IGpxTGl0ZUhhc0NsYXNzICYmIGZuICE9PSBqcUxpdGVDb250cm9sbGVyKSkgPyBhcmcxIDogYXJnMikpKSB7XG4gICAgICBpZiAoaXNPYmplY3QoYXJnMSkpIHtcblxuICAgICAgICAvLyB3ZSBhcmUgYSB3cml0ZSwgYnV0IHRoZSBvYmplY3QgcHJvcGVydGllcyBhcmUgdGhlIGtleS92YWx1ZXNcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG5vZGVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGZuID09PSBqcUxpdGVEYXRhKSB7XG4gICAgICAgICAgICAvLyBkYXRhKCkgdGFrZXMgdGhlIHdob2xlIG9iamVjdCBpbiBqUXVlcnlcbiAgICAgICAgICAgIGZuKHRoaXNbaV0sIGFyZzEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiBhcmcxKSB7XG4gICAgICAgICAgICAgIGZuKHRoaXNbaV0sIGtleSwgYXJnMVtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0dXJuIHNlbGYgZm9yIGNoYWluaW5nXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gd2UgYXJlIGEgcmVhZCwgc28gcmVhZCB0aGUgZmlyc3QgY2hpbGQuXG4gICAgICAgIC8vIFRPRE86IGRvIHdlIHN0aWxsIG5lZWQgdGhpcz9cbiAgICAgICAgdmFyIHZhbHVlID0gZm4uJGR2O1xuICAgICAgICAvLyBPbmx5IGlmIHdlIGhhdmUgJGR2IGRvIHdlIGl0ZXJhdGUgb3ZlciBhbGwsIG90aGVyd2lzZSBpdCBpcyBqdXN0IHRoZSBmaXJzdCBlbGVtZW50LlxuICAgICAgICB2YXIgamogPSAoaXNVbmRlZmluZWQodmFsdWUpKSA/IE1hdGgubWluKG5vZGVDb3VudCwgMSkgOiBub2RlQ291bnQ7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgamo7IGorKykge1xuICAgICAgICAgIHZhciBub2RlVmFsdWUgPSBmbih0aGlzW2pdLCBhcmcxLCBhcmcyKTtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlID8gdmFsdWUgKyBub2RlVmFsdWUgOiBub2RlVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB3ZSBhcmUgYSB3cml0ZSwgc28gYXBwbHkgdG8gYWxsIGNoaWxkcmVuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbm9kZUNvdW50OyBpKyspIHtcbiAgICAgICAgZm4odGhpc1tpXSwgYXJnMSwgYXJnMik7XG4gICAgICB9XG4gICAgICAvLyByZXR1cm4gc2VsZiBmb3IgY2hhaW5pbmdcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcbn0pO1xuXG5mdW5jdGlvbiBjcmVhdGVFdmVudEhhbmRsZXIoZWxlbWVudCwgZXZlbnRzKSB7XG4gIHZhciBldmVudEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCwgdHlwZSkge1xuICAgIC8vIGpRdWVyeSBzcGVjaWZpYyBhcGlcbiAgICBldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBldmVudC5kZWZhdWx0UHJldmVudGVkO1xuICAgIH07XG5cbiAgICB2YXIgZXZlbnRGbnMgPSBldmVudHNbdHlwZSB8fCBldmVudC50eXBlXTtcbiAgICB2YXIgZXZlbnRGbnNMZW5ndGggPSBldmVudEZucyA/IGV2ZW50Rm5zLmxlbmd0aCA6IDA7XG5cbiAgICBpZiAoIWV2ZW50Rm5zTGVuZ3RoKSByZXR1cm47XG5cbiAgICBpZiAoaXNVbmRlZmluZWQoZXZlbnQuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKSkge1xuICAgICAgdmFyIG9yaWdpbmFsU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uO1xuICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGV2ZW50LmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XG5cbiAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9yaWdpbmFsU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgb3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24uY2FsbChldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBldmVudC5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPT09IHRydWU7XG4gICAgfTtcblxuICAgIC8vIFNvbWUgZXZlbnRzIGhhdmUgc3BlY2lhbCBoYW5kbGVycyB0aGF0IHdyYXAgdGhlIHJlYWwgaGFuZGxlclxuICAgIHZhciBoYW5kbGVyV3JhcHBlciA9IGV2ZW50Rm5zLnNwZWNpYWxIYW5kbGVyV3JhcHBlciB8fCBkZWZhdWx0SGFuZGxlcldyYXBwZXI7XG5cbiAgICAvLyBDb3B5IGV2ZW50IGhhbmRsZXJzIGluIGNhc2UgZXZlbnQgaGFuZGxlcnMgYXJyYXkgaXMgbW9kaWZpZWQgZHVyaW5nIGV4ZWN1dGlvbi5cbiAgICBpZiAoKGV2ZW50Rm5zTGVuZ3RoID4gMSkpIHtcbiAgICAgIGV2ZW50Rm5zID0gc2hhbGxvd0NvcHkoZXZlbnRGbnMpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRGbnNMZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG4gICAgICAgIGhhbmRsZXJXcmFwcGVyKGVsZW1lbnQsIGV2ZW50LCBldmVudEZuc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFRPRE86IHRoaXMgaXMgYSBoYWNrIGZvciBhbmd1bGFyTW9ja3MvY2xlYXJEYXRhQ2FjaGUgdGhhdCBtYWtlcyBpdCBwb3NzaWJsZSB0byBkZXJlZ2lzdGVyIGFsbFxuICAvLyAgICAgICBldmVudHMgb24gYGVsZW1lbnRgXG4gIGV2ZW50SGFuZGxlci5lbGVtID0gZWxlbWVudDtcbiAgcmV0dXJuIGV2ZW50SGFuZGxlcjtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdEhhbmRsZXJXcmFwcGVyKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSB7XG4gIGhhbmRsZXIuY2FsbChlbGVtZW50LCBldmVudCk7XG59XG5cbmZ1bmN0aW9uIHNwZWNpYWxNb3VzZUhhbmRsZXJXcmFwcGVyKHRhcmdldCwgZXZlbnQsIGhhbmRsZXIpIHtcbiAgLy8gUmVmZXIgdG8galF1ZXJ5J3MgaW1wbGVtZW50YXRpb24gb2YgbW91c2VlbnRlciAmIG1vdXNlbGVhdmVcbiAgLy8gUmVhZCBhYm91dCBtb3VzZWVudGVyIGFuZCBtb3VzZWxlYXZlOlxuICAvLyBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2pzL2V2ZW50c19tb3VzZS5odG1sI2xpbms4XG4gIHZhciByZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldDtcbiAgLy8gRm9yIG1vdXNlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuICAvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xuICBpZiAoIXJlbGF0ZWQgfHwgKHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhanFMaXRlQ29udGFpbnMuY2FsbCh0YXJnZXQsIHJlbGF0ZWQpKSkge1xuICAgIGhhbmRsZXIuY2FsbCh0YXJnZXQsIGV2ZW50KTtcbiAgfVxufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIEZ1bmN0aW9ucyBpdGVyYXRpbmcgdHJhdmVyc2FsLlxuLy8gVGhlc2UgZnVuY3Rpb25zIGNoYWluIHJlc3VsdHMgaW50byBhIHNpbmdsZVxuLy8gc2VsZWN0b3IuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZvckVhY2goe1xuICByZW1vdmVEYXRhOiBqcUxpdGVSZW1vdmVEYXRhLFxuXG4gIG9uOiBmdW5jdGlvbiBqcUxpdGVPbihlbGVtZW50LCB0eXBlLCBmbiwgdW5zdXBwb3J0ZWQpIHtcbiAgICBpZiAoaXNEZWZpbmVkKHVuc3VwcG9ydGVkKSkgdGhyb3cganFMaXRlTWluRXJyKCdvbmFyZ3MnLCAnanFMaXRlI29uKCkgZG9lcyBub3Qgc3VwcG9ydCB0aGUgYHNlbGVjdG9yYCBvciBgZXZlbnREYXRhYCBwYXJhbWV0ZXJzJyk7XG5cbiAgICAvLyBEbyBub3QgYWRkIGV2ZW50IGhhbmRsZXJzIHRvIG5vbi1lbGVtZW50cyBiZWNhdXNlIHRoZXkgd2lsbCBub3QgYmUgY2xlYW5lZCB1cC5cbiAgICBpZiAoIWpxTGl0ZUFjY2VwdHNEYXRhKGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCB0cnVlKTtcbiAgICB2YXIgZXZlbnRzID0gZXhwYW5kb1N0b3JlLmV2ZW50cztcbiAgICB2YXIgaGFuZGxlID0gZXhwYW5kb1N0b3JlLmhhbmRsZTtcblxuICAgIGlmICghaGFuZGxlKSB7XG4gICAgICBoYW5kbGUgPSBleHBhbmRvU3RvcmUuaGFuZGxlID0gY3JlYXRlRXZlbnRIYW5kbGVyKGVsZW1lbnQsIGV2ZW50cyk7XG4gICAgfVxuXG4gICAgLy8gaHR0cDovL2pzcGVyZi5jb20vc3RyaW5nLWluZGV4b2YtdnMtc3BsaXRcbiAgICB2YXIgdHlwZXMgPSB0eXBlLmluZGV4T2YoJyAnKSA+PSAwID8gdHlwZS5zcGxpdCgnICcpIDogW3R5cGVdO1xuICAgIHZhciBpID0gdHlwZXMubGVuZ3RoO1xuXG4gICAgdmFyIGFkZEhhbmRsZXIgPSBmdW5jdGlvbih0eXBlLCBzcGVjaWFsSGFuZGxlcldyYXBwZXIsIG5vRXZlbnRMaXN0ZW5lcikge1xuICAgICAgdmFyIGV2ZW50Rm5zID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAoIWV2ZW50Rm5zKSB7XG4gICAgICAgIGV2ZW50Rm5zID0gZXZlbnRzW3R5cGVdID0gW107XG4gICAgICAgIGV2ZW50Rm5zLnNwZWNpYWxIYW5kbGVyV3JhcHBlciA9IHNwZWNpYWxIYW5kbGVyV3JhcHBlcjtcbiAgICAgICAgaWYgKHR5cGUgIT09ICckZGVzdHJveScgJiYgIW5vRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGV2ZW50Rm5zLnB1c2goZm4pO1xuICAgIH07XG5cbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0eXBlID0gdHlwZXNbaV07XG4gICAgICBpZiAoTU9VU0VfRVZFTlRfTUFQW3R5cGVdKSB7XG4gICAgICAgIGFkZEhhbmRsZXIoTU9VU0VfRVZFTlRfTUFQW3R5cGVdLCBzcGVjaWFsTW91c2VIYW5kbGVyV3JhcHBlcik7XG4gICAgICAgIGFkZEhhbmRsZXIodHlwZSwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZEhhbmRsZXIodHlwZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIG9mZjoganFMaXRlT2ZmLFxuXG4gIG9uZTogZnVuY3Rpb24oZWxlbWVudCwgdHlwZSwgZm4pIHtcbiAgICBlbGVtZW50ID0ganFMaXRlKGVsZW1lbnQpO1xuXG4gICAgLy9hZGQgdGhlIGxpc3RlbmVyIHR3aWNlIHNvIHRoYXQgd2hlbiBpdCBpcyBjYWxsZWRcbiAgICAvL3lvdSBjYW4gcmVtb3ZlIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiBhbmQgc3RpbGwgYmVcbiAgICAvL2FibGUgdG8gY2FsbCBlbGVtZW50Lm9mZihldiwgZm4pIG5vcm1hbGx5XG4gICAgZWxlbWVudC5vbih0eXBlLCBmdW5jdGlvbiBvbkZuKCkge1xuICAgICAgZWxlbWVudC5vZmYodHlwZSwgZm4pO1xuICAgICAgZWxlbWVudC5vZmYodHlwZSwgb25Gbik7XG4gICAgfSk7XG4gICAgZWxlbWVudC5vbih0eXBlLCBmbik7XG4gIH0sXG5cbiAgcmVwbGFjZVdpdGg6IGZ1bmN0aW9uKGVsZW1lbnQsIHJlcGxhY2VOb2RlKSB7XG4gICAgdmFyIGluZGV4LCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAganFMaXRlRGVhbG9jKGVsZW1lbnQpO1xuICAgIGZvckVhY2gobmV3IEpRTGl0ZShyZXBsYWNlTm9kZSksIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGlmIChpbmRleCkge1xuICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIGluZGV4Lm5leHRTaWJsaW5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobm9kZSwgZWxlbWVudCk7XG4gICAgICB9XG4gICAgICBpbmRleCA9IG5vZGU7XG4gICAgfSk7XG4gIH0sXG5cbiAgY2hpbGRyZW46IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSBbXTtcbiAgICBmb3JFYWNoKGVsZW1lbnQuY2hpbGROb2RlcywgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT09IE5PREVfVFlQRV9FTEVNRU5UKSB7XG4gICAgICAgIGNoaWxkcmVuLnB1c2goZWxlbWVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9LFxuXG4gIGNvbnRlbnRzOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuY29udGVudERvY3VtZW50IHx8IGVsZW1lbnQuY2hpbGROb2RlcyB8fCBbXTtcbiAgfSxcblxuICBhcHBlbmQ6IGZ1bmN0aW9uKGVsZW1lbnQsIG5vZGUpIHtcbiAgICB2YXIgbm9kZVR5cGUgPSBlbGVtZW50Lm5vZGVUeXBlO1xuICAgIGlmIChub2RlVHlwZSAhPT0gTk9ERV9UWVBFX0VMRU1FTlQgJiYgbm9kZVR5cGUgIT09IE5PREVfVFlQRV9ET0NVTUVOVF9GUkFHTUVOVCkgcmV0dXJuO1xuXG4gICAgbm9kZSA9IG5ldyBKUUxpdGUobm9kZSk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBub2RlLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIHZhciBjaGlsZCA9IG5vZGVbaV07XG4gICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICB9XG4gIH0sXG5cbiAgcHJlcGVuZDogZnVuY3Rpb24oZWxlbWVudCwgbm9kZSkge1xuICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSBOT0RFX1RZUEVfRUxFTUVOVCkge1xuICAgICAgdmFyIGluZGV4ID0gZWxlbWVudC5maXJzdENoaWxkO1xuICAgICAgZm9yRWFjaChuZXcgSlFMaXRlKG5vZGUpLCBmdW5jdGlvbihjaGlsZCkge1xuICAgICAgICBlbGVtZW50Lmluc2VydEJlZm9yZShjaGlsZCwgaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHdyYXA6IGZ1bmN0aW9uKGVsZW1lbnQsIHdyYXBOb2RlKSB7XG4gICAganFMaXRlV3JhcE5vZGUoZWxlbWVudCwganFMaXRlKHdyYXBOb2RlKS5lcSgwKS5jbG9uZSgpWzBdKTtcbiAgfSxcblxuICByZW1vdmU6IGpxTGl0ZVJlbW92ZSxcblxuICBkZXRhY2g6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICBqcUxpdGVSZW1vdmUoZWxlbWVudCwgdHJ1ZSk7XG4gIH0sXG5cbiAgYWZ0ZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIG5ld0VsZW1lbnQpIHtcbiAgICB2YXIgaW5kZXggPSBlbGVtZW50LCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBuZXdFbGVtZW50ID0gbmV3IEpRTGl0ZShuZXdFbGVtZW50KTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmV3RWxlbWVudC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIHZhciBub2RlID0gbmV3RWxlbWVudFtpXTtcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCBpbmRleC5uZXh0U2libGluZyk7XG4gICAgICAgIGluZGV4ID0gbm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgYWRkQ2xhc3M6IGpxTGl0ZUFkZENsYXNzLFxuICByZW1vdmVDbGFzczoganFMaXRlUmVtb3ZlQ2xhc3MsXG5cbiAgdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIHNlbGVjdG9yLCBjb25kaXRpb24pIHtcbiAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgIGZvckVhY2goc2VsZWN0b3Iuc3BsaXQoJyAnKSwgZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gICAgICAgIHZhciBjbGFzc0NvbmRpdGlvbiA9IGNvbmRpdGlvbjtcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKGNsYXNzQ29uZGl0aW9uKSkge1xuICAgICAgICAgIGNsYXNzQ29uZGl0aW9uID0gIWpxTGl0ZUhhc0NsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgKGNsYXNzQ29uZGl0aW9uID8ganFMaXRlQWRkQ2xhc3MgOiBqcUxpdGVSZW1vdmVDbGFzcykoZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBwYXJlbnQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgIHJldHVybiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlQgPyBwYXJlbnQgOiBudWxsO1xuICB9LFxuXG4gIG5leHQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gIH0sXG5cbiAgZmluZDogZnVuY3Rpb24oZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICBpZiAoZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoc2VsZWN0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9LFxuXG4gIGNsb25lOiBqcUxpdGVDbG9uZSxcblxuICB0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oZWxlbWVudCwgZXZlbnQsIGV4dHJhUGFyYW1ldGVycykge1xuXG4gICAgdmFyIGR1bW15RXZlbnQsIGV2ZW50Rm5zQ29weSwgaGFuZGxlckFyZ3M7XG4gICAgdmFyIGV2ZW50TmFtZSA9IGV2ZW50LnR5cGUgfHwgZXZlbnQ7XG4gICAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50KTtcbiAgICB2YXIgZXZlbnRzID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5ldmVudHM7XG4gICAgdmFyIGV2ZW50Rm5zID0gZXZlbnRzICYmIGV2ZW50c1tldmVudE5hbWVdO1xuXG4gICAgaWYgKGV2ZW50Rm5zKSB7XG4gICAgICAvLyBDcmVhdGUgYSBkdW1teSBldmVudCB0byBwYXNzIHRvIHRoZSBoYW5kbGVyc1xuICAgICAgZHVtbXlFdmVudCA9IHtcbiAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkgeyB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlOyB9LFxuICAgICAgICBpc0RlZmF1bHRQcmV2ZW50ZWQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5kZWZhdWx0UHJldmVudGVkID09PSB0cnVlOyB9LFxuICAgICAgICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkgeyB0aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7IH0sXG4gICAgICAgIGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID09PSB0cnVlOyB9LFxuICAgICAgICBzdG9wUHJvcGFnYXRpb246IG5vb3AsXG4gICAgICAgIHR5cGU6IGV2ZW50TmFtZSxcbiAgICAgICAgdGFyZ2V0OiBlbGVtZW50XG4gICAgICB9O1xuXG4gICAgICAvLyBJZiBhIGN1c3RvbSBldmVudCB3YXMgcHJvdmlkZWQgdGhlbiBleHRlbmQgb3VyIGR1bW15IGV2ZW50IHdpdGggaXRcbiAgICAgIGlmIChldmVudC50eXBlKSB7XG4gICAgICAgIGR1bW15RXZlbnQgPSBleHRlbmQoZHVtbXlFdmVudCwgZXZlbnQpO1xuICAgICAgfVxuXG4gICAgICAvLyBDb3B5IGV2ZW50IGhhbmRsZXJzIGluIGNhc2UgZXZlbnQgaGFuZGxlcnMgYXJyYXkgaXMgbW9kaWZpZWQgZHVyaW5nIGV4ZWN1dGlvbi5cbiAgICAgIGV2ZW50Rm5zQ29weSA9IHNoYWxsb3dDb3B5KGV2ZW50Rm5zKTtcbiAgICAgIGhhbmRsZXJBcmdzID0gZXh0cmFQYXJhbWV0ZXJzID8gW2R1bW15RXZlbnRdLmNvbmNhdChleHRyYVBhcmFtZXRlcnMpIDogW2R1bW15RXZlbnRdO1xuXG4gICAgICBmb3JFYWNoKGV2ZW50Rm5zQ29weSwgZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgaWYgKCFkdW1teUV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgICBmbi5hcHBseShlbGVtZW50LCBoYW5kbGVyQXJncyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSwgZnVuY3Rpb24oZm4sIG5hbWUpIHtcbiAgLyoqXG4gICAqIGNoYWluaW5nIGZ1bmN0aW9uc1xuICAgKi9cbiAgSlFMaXRlLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgICB2YXIgdmFsdWU7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBmbih0aGlzW2ldLCBhcmcxLCBhcmcyLCBhcmczKTtcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAvLyBhbnkgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIHZhbHVlIG5lZWRzIHRvIGJlIHdyYXBwZWRcbiAgICAgICAgICB2YWx1ZSA9IGpxTGl0ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGpxTGl0ZUFkZE5vZGVzKHZhbHVlLCBmbih0aGlzW2ldLCBhcmcxLCBhcmcyLCBhcmczKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiB0aGlzO1xuICB9O1xufSk7XG5cbi8vIGJpbmQgbGVnYWN5IGJpbmQvdW5iaW5kIHRvIG9uL29mZlxuSlFMaXRlLnByb3RvdHlwZS5iaW5kID0gSlFMaXRlLnByb3RvdHlwZS5vbjtcbkpRTGl0ZS5wcm90b3R5cGUudW5iaW5kID0gSlFMaXRlLnByb3RvdHlwZS5vZmY7XG5cblxuLy8gUHJvdmlkZXIgZm9yIHByaXZhdGUgJCRqcUxpdGUgc2VydmljZVxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkJGpxTGl0ZVByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBmdW5jdGlvbiAkJGpxTGl0ZSgpIHtcbiAgICByZXR1cm4gZXh0ZW5kKEpRTGl0ZSwge1xuICAgICAgaGFzQ2xhc3M6IGZ1bmN0aW9uKG5vZGUsIGNsYXNzZXMpIHtcbiAgICAgICAgaWYgKG5vZGUuYXR0cikgbm9kZSA9IG5vZGVbMF07XG4gICAgICAgIHJldHVybiBqcUxpdGVIYXNDbGFzcyhub2RlLCBjbGFzc2VzKTtcbiAgICAgIH0sXG4gICAgICBhZGRDbGFzczogZnVuY3Rpb24obm9kZSwgY2xhc3Nlcykge1xuICAgICAgICBpZiAobm9kZS5hdHRyKSBub2RlID0gbm9kZVswXTtcbiAgICAgICAgcmV0dXJuIGpxTGl0ZUFkZENsYXNzKG5vZGUsIGNsYXNzZXMpO1xuICAgICAgfSxcbiAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbihub2RlLCBjbGFzc2VzKSB7XG4gICAgICAgIGlmIChub2RlLmF0dHIpIG5vZGUgPSBub2RlWzBdO1xuICAgICAgICByZXR1cm4ganFMaXRlUmVtb3ZlQ2xhc3Mobm9kZSwgY2xhc3Nlcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgYSBoYXNoIG9mIGFuICdvYmonLlxuICogSGFzaCBvZiBhOlxuICogIHN0cmluZyBpcyBzdHJpbmdcbiAqICBudW1iZXIgaXMgbnVtYmVyIGFzIHN0cmluZ1xuICogIG9iamVjdCBpcyBlaXRoZXIgcmVzdWx0IG9mIGNhbGxpbmcgJCRoYXNoS2V5IGZ1bmN0aW9uIG9uIHRoZSBvYmplY3Qgb3IgdW5pcXVlbHkgZ2VuZXJhdGVkIGlkLFxuICogICAgICAgICB0aGF0IGlzIGFsc28gYXNzaWduZWQgdG8gdGhlICQkaGFzaEtleSBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBvYmpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IGhhc2ggc3RyaW5nIHN1Y2ggdGhhdCB0aGUgc2FtZSBpbnB1dCB3aWxsIGhhdmUgdGhlIHNhbWUgaGFzaCBzdHJpbmcuXG4gKiAgICAgICAgIFRoZSByZXN1bHRpbmcgc3RyaW5nIGtleSBpcyBpbiAndHlwZTpoYXNoS2V5JyBmb3JtYXQuXG4gKi9cbmZ1bmN0aW9uIGhhc2hLZXkob2JqLCBuZXh0VWlkRm4pIHtcbiAgdmFyIGtleSA9IG9iaiAmJiBvYmouJCRoYXNoS2V5O1xuXG4gIGlmIChrZXkpIHtcbiAgICBpZiAodHlwZW9mIGtleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAga2V5ID0gb2JqLiQkaGFzaEtleSgpO1xuICAgIH1cbiAgICByZXR1cm4ga2V5O1xuICB9XG5cbiAgdmFyIG9ialR5cGUgPSB0eXBlb2Ygb2JqO1xuICBpZiAob2JqVHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCAob2JqVHlwZSA9PT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsKSkge1xuICAgIGtleSA9IG9iai4kJGhhc2hLZXkgPSBvYmpUeXBlICsgJzonICsgKG5leHRVaWRGbiB8fCBuZXh0VWlkKSgpO1xuICB9IGVsc2Uge1xuICAgIGtleSA9IG9ialR5cGUgKyAnOicgKyBvYmo7XG4gIH1cblxuICByZXR1cm4ga2V5O1xufVxuXG4vLyBBIG1pbmltYWwgRVMyMDE1IE1hcCBpbXBsZW1lbnRhdGlvbi5cbi8vIFNob3VsZCBiZSBidWcvZmVhdHVyZSBlcXVpdmFsZW50IHRvIHRoZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIG9mIHN1cHBvcnRlZCBicm93c2Vyc1xuLy8gKGZvciB0aGUgZmVhdHVyZXMgcmVxdWlyZWQgaW4gQW5ndWxhcikuXG4vLyBTZWUgaHR0cHM6Ly9rYW5nYXguZ2l0aHViLmlvL2NvbXBhdC10YWJsZS9lczYvI3Rlc3QtTWFwXG52YXIgbmFuS2V5ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmZ1bmN0aW9uIE5nTWFwU2hpbSgpIHtcbiAgdGhpcy5fa2V5cyA9IFtdO1xuICB0aGlzLl92YWx1ZXMgPSBbXTtcbiAgdGhpcy5fbGFzdEtleSA9IE5hTjtcbiAgdGhpcy5fbGFzdEluZGV4ID0gLTE7XG59XG5OZ01hcFNoaW0ucHJvdG90eXBlID0ge1xuICBfaWR4OiBmdW5jdGlvbihrZXkpIHtcbiAgICBpZiAoa2V5ID09PSB0aGlzLl9sYXN0S2V5KSB7XG4gICAgICByZXR1cm4gdGhpcy5fbGFzdEluZGV4O1xuICAgIH1cbiAgICB0aGlzLl9sYXN0S2V5ID0ga2V5O1xuICAgIHRoaXMuX2xhc3RJbmRleCA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuICAgIHJldHVybiB0aGlzLl9sYXN0SW5kZXg7XG4gIH0sXG4gIF90cmFuc2Zvcm1LZXk6IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBpc051bWJlck5hTihrZXkpID8gbmFuS2V5IDoga2V5O1xuICB9LFxuICBnZXQ6IGZ1bmN0aW9uKGtleSkge1xuICAgIGtleSA9IHRoaXMuX3RyYW5zZm9ybUtleShrZXkpO1xuICAgIHZhciBpZHggPSB0aGlzLl9pZHgoa2V5KTtcbiAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlc1tpZHhdO1xuICAgIH1cbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAga2V5ID0gdGhpcy5fdHJhbnNmb3JtS2V5KGtleSk7XG4gICAgdmFyIGlkeCA9IHRoaXMuX2lkeChrZXkpO1xuICAgIGlmIChpZHggPT09IC0xKSB7XG4gICAgICBpZHggPSB0aGlzLl9sYXN0SW5kZXggPSB0aGlzLl9rZXlzLmxlbmd0aDtcbiAgICB9XG4gICAgdGhpcy5fa2V5c1tpZHhdID0ga2V5O1xuICAgIHRoaXMuX3ZhbHVlc1tpZHhdID0gdmFsdWU7XG5cbiAgICAvLyBTdXBwb3J0OiBJRTExXG4gICAgLy8gRG8gbm90IGByZXR1cm4gdGhpc2AgdG8gc2ltdWxhdGUgdGhlIHBhcnRpYWwgSUUxMSBpbXBsZW1lbnRhdGlvblxuICB9LFxuICBkZWxldGU6IGZ1bmN0aW9uKGtleSkge1xuICAgIGtleSA9IHRoaXMuX3RyYW5zZm9ybUtleShrZXkpO1xuICAgIHZhciBpZHggPSB0aGlzLl9pZHgoa2V5KTtcbiAgICBpZiAoaWR4ID09PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLl9rZXlzLnNwbGljZShpZHgsIDEpO1xuICAgIHRoaXMuX3ZhbHVlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICB0aGlzLl9sYXN0S2V5ID0gTmFOO1xuICAgIHRoaXMuX2xhc3RJbmRleCA9IC0xO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG4vLyBGb3Igbm93LCBhbHdheXMgdXNlIGBOZ01hcFNoaW1gLCBldmVuIGlmIGB3aW5kb3cuTWFwYCBpcyBhdmFpbGFibGUuIFNvbWUgbmF0aXZlIGltcGxlbWVudGF0aW9uc1xuLy8gYXJlIHN0aWxsIGJ1Z2d5IChvZnRlbiBpbiBzdWJ0bGUgd2F5cykgYW5kIGNhbiBjYXVzZSBoYXJkLXRvLWRlYnVnIGZhaWx1cmVzLiBXaGVuIG5hdGl2ZSBgTWFwYFxuLy8gaW1wbGVtZW50YXRpb25zIGdldCBtb3JlIHN0YWJsZSwgd2UgY2FuIHJlY29uc2lkZXIgc3dpdGNoaW5nIHRvIGB3aW5kb3cuTWFwYCAod2hlbiBhdmFpbGFibGUpLlxudmFyIE5nTWFwID0gTmdNYXBTaGltO1xuXG52YXIgJCRNYXBQcm92aWRlciA9IFsvKiogQHRoaXMgKi9mdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gW2Z1bmN0aW9uKCkge1xuICAgIHJldHVybiBOZ01hcDtcbiAgfV07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBtb2R1bGUgbmdcbiAqIEBuYW1lIGFuZ3VsYXIuaW5qZWN0b3JcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGFuIGluamVjdG9yIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGZvciByZXRyaWV2aW5nIHNlcnZpY2VzIGFzIHdlbGwgYXMgZm9yXG4gKiBkZXBlbmRlbmN5IGluamVjdGlvbiAoc2VlIHtAbGluayBndWlkZS9kaSBkZXBlbmRlbmN5IGluamVjdGlvbn0pLlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZ3xGdW5jdGlvbj59IG1vZHVsZXMgQSBsaXN0IG9mIG1vZHVsZSBmdW5jdGlvbnMgb3IgdGhlaXIgYWxpYXNlcy4gU2VlXG4gKiAgICAge0BsaW5rIGFuZ3VsYXIubW9kdWxlfS4gVGhlIGBuZ2AgbW9kdWxlIG11c3QgYmUgZXhwbGljaXRseSBhZGRlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IFtzdHJpY3REaT1mYWxzZV0gV2hldGhlciB0aGUgaW5qZWN0b3Igc2hvdWxkIGJlIGluIHN0cmljdCBtb2RlLCB3aGljaFxuICogICAgIGRpc2FsbG93cyBhcmd1bWVudCBuYW1lIGFubm90YXRpb24gaW5mZXJlbmNlLlxuICogQHJldHVybnMge2luamVjdG9yfSBJbmplY3RvciBvYmplY3QuIFNlZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS5cbiAqXG4gKiBAZXhhbXBsZVxuICogVHlwaWNhbCB1c2FnZVxuICogYGBganNcbiAqICAgLy8gY3JlYXRlIGFuIGluamVjdG9yXG4gKiAgIHZhciAkaW5qZWN0b3IgPSBhbmd1bGFyLmluamVjdG9yKFsnbmcnXSk7XG4gKlxuICogICAvLyB1c2UgdGhlIGluamVjdG9yIHRvIGtpY2sgb2ZmIHlvdXIgYXBwbGljYXRpb25cbiAqICAgLy8gdXNlIHRoZSB0eXBlIGluZmVyZW5jZSB0byBhdXRvIGluamVjdCBhcmd1bWVudHMsIG9yIHVzZSBpbXBsaWNpdCBpbmplY3Rpb25cbiAqICAgJGluamVjdG9yLmludm9rZShmdW5jdGlvbigkcm9vdFNjb3BlLCAkY29tcGlsZSwgJGRvY3VtZW50KSB7XG4gKiAgICAgJGNvbXBpbGUoJGRvY3VtZW50KSgkcm9vdFNjb3BlKTtcbiAqICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiBTb21ldGltZXMgeW91IHdhbnQgdG8gZ2V0IGFjY2VzcyB0byB0aGUgaW5qZWN0b3Igb2YgYSBjdXJyZW50bHkgcnVubmluZyBBbmd1bGFySlMgYXBwXG4gKiBmcm9tIG91dHNpZGUgQW5ndWxhckpTLiBQZXJoYXBzLCB5b3Ugd2FudCB0byBpbmplY3QgYW5kIGNvbXBpbGUgc29tZSBtYXJrdXAgYWZ0ZXIgdGhlXG4gKiBhcHBsaWNhdGlvbiBoYXMgYmVlbiBib290c3RyYXBwZWQuIFlvdSBjYW4gZG8gdGhpcyB1c2luZyB0aGUgZXh0cmEgYGluamVjdG9yKClgIGFkZGVkXG4gKiB0byBKUXVlcnkvanFMaXRlIGVsZW1lbnRzLiBTZWUge0BsaW5rIGFuZ3VsYXIuZWxlbWVudH0uXG4gKlxuICogKlRoaXMgaXMgZmFpcmx5IHJhcmUgYnV0IGNvdWxkIGJlIHRoZSBjYXNlIGlmIGEgdGhpcmQgcGFydHkgbGlicmFyeSBpcyBpbmplY3RpbmcgdGhlXG4gKiBtYXJrdXAuKlxuICpcbiAqIEluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSBhIG5ldyBibG9jayBvZiBIVE1MIGNvbnRhaW5pbmcgYSBgbmctY29udHJvbGxlcmBcbiAqIGRpcmVjdGl2ZSBpcyBhZGRlZCB0byB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCBib2R5IGJ5IEpRdWVyeS4gV2UgdGhlbiBjb21waWxlIGFuZCBsaW5rXG4gKiBpdCBpbnRvIHRoZSBjdXJyZW50IEFuZ3VsYXJKUyBzY29wZS5cbiAqXG4gKiBgYGBqc1xuICogdmFyICRkaXYgPSAkKCc8ZGl2IG5nLWNvbnRyb2xsZXI9XCJNeUN0cmxcIj57e2NvbnRlbnQubGFiZWx9fTwvZGl2PicpO1xuICogJChkb2N1bWVudC5ib2R5KS5hcHBlbmQoJGRpdik7XG4gKlxuICogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5pbmplY3RvcigpLmludm9rZShmdW5jdGlvbigkY29tcGlsZSkge1xuICogICB2YXIgc2NvcGUgPSBhbmd1bGFyLmVsZW1lbnQoJGRpdikuc2NvcGUoKTtcbiAqICAgJGNvbXBpbGUoJGRpdikoc2NvcGUpO1xuICogfSk7XG4gKiBgYGBcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgYXV0b1xuICogQGluc3RhbGxhdGlvblxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogSW1wbGljaXQgbW9kdWxlIHdoaWNoIGdldHMgYXV0b21hdGljYWxseSBhZGRlZCB0byBlYWNoIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LlxuICovXG5cbnZhciBBUlJPV19BUkcgPSAvXihbXihdKz8pPT4vO1xudmFyIEZOX0FSR1MgPSAvXlteKF0qXFwoXFxzKihbXildKilcXCkvbTtcbnZhciBGTl9BUkdfU1BMSVQgPSAvLC87XG52YXIgRk5fQVJHID0gL15cXHMqKF8/KShcXFMrPylcXDFcXHMqJC87XG52YXIgU1RSSVBfQ09NTUVOVFMgPSAvKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvbWc7XG52YXIgJGluamVjdG9yTWluRXJyID0gbWluRXJyKCckaW5qZWN0b3InKTtcblxuZnVuY3Rpb24gc3RyaW5naWZ5Rm4oZm4pIHtcbiAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGZuKTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEFyZ3MoZm4pIHtcbiAgdmFyIGZuVGV4dCA9IHN0cmluZ2lmeUZuKGZuKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCAnJyksXG4gICAgICBhcmdzID0gZm5UZXh0Lm1hdGNoKEFSUk9XX0FSRykgfHwgZm5UZXh0Lm1hdGNoKEZOX0FSR1MpO1xuICByZXR1cm4gYXJncztcbn1cblxuZnVuY3Rpb24gYW5vbkZuKGZuKSB7XG4gIC8vIEZvciBhbm9ueW1vdXMgZnVuY3Rpb25zLCBzaG93aW5nIGF0IHRoZSB2ZXJ5IGxlYXN0IHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgY2FuIGhlbHAgaW5cbiAgLy8gZGVidWdnaW5nLlxuICB2YXIgYXJncyA9IGV4dHJhY3RBcmdzKGZuKTtcbiAgaWYgKGFyZ3MpIHtcbiAgICByZXR1cm4gJ2Z1bmN0aW9uKCcgKyAoYXJnc1sxXSB8fCAnJykucmVwbGFjZSgvW1xcc1xcclxcbl0rLywgJyAnKSArICcpJztcbiAgfVxuICByZXR1cm4gJ2ZuJztcbn1cblxuZnVuY3Rpb24gYW5ub3RhdGUoZm4sIHN0cmljdERpLCBuYW1lKSB7XG4gIHZhciAkaW5qZWN0LFxuICAgICAgYXJnRGVjbCxcbiAgICAgIGxhc3Q7XG5cbiAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmICghKCRpbmplY3QgPSBmbi4kaW5qZWN0KSkge1xuICAgICAgJGluamVjdCA9IFtdO1xuICAgICAgaWYgKGZuLmxlbmd0aCkge1xuICAgICAgICBpZiAoc3RyaWN0RGkpIHtcbiAgICAgICAgICBpZiAoIWlzU3RyaW5nKG5hbWUpIHx8ICFuYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gZm4ubmFtZSB8fCBhbm9uRm4oZm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3N0cmljdGRpJyxcbiAgICAgICAgICAgICd7MH0gaXMgbm90IHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb24gYW5kIGNhbm5vdCBiZSBpbnZva2VkIGluIHN0cmljdCBtb2RlJywgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgYXJnRGVjbCA9IGV4dHJhY3RBcmdzKGZuKTtcbiAgICAgICAgZm9yRWFjaChhcmdEZWNsWzFdLnNwbGl0KEZOX0FSR19TUExJVCksIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgIGFyZy5yZXBsYWNlKEZOX0FSRywgZnVuY3Rpb24oYWxsLCB1bmRlcnNjb3JlLCBuYW1lKSB7XG4gICAgICAgICAgICAkaW5qZWN0LnB1c2gobmFtZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZm4uJGluamVjdCA9ICRpbmplY3Q7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzQXJyYXkoZm4pKSB7XG4gICAgbGFzdCA9IGZuLmxlbmd0aCAtIDE7XG4gICAgYXNzZXJ0QXJnRm4oZm5bbGFzdF0sICdmbicpO1xuICAgICRpbmplY3QgPSBmbi5zbGljZSgwLCBsYXN0KTtcbiAgfSBlbHNlIHtcbiAgICBhc3NlcnRBcmdGbihmbiwgJ2ZuJywgdHJ1ZSk7XG4gIH1cbiAgcmV0dXJuICRpbmplY3Q7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkaW5qZWN0b3JcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBgJGluamVjdG9yYCBpcyB1c2VkIHRvIHJldHJpZXZlIG9iamVjdCBpbnN0YW5jZXMgYXMgZGVmaW5lZCBieVxuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUgcHJvdmlkZXJ9LCBpbnN0YW50aWF0ZSB0eXBlcywgaW52b2tlIG1ldGhvZHMsXG4gKiBhbmQgbG9hZCBtb2R1bGVzLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgYWx3YXlzIGhvbGRzIHRydWU6XG4gKlxuICogYGBganNcbiAqICAgdmFyICRpbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoKTtcbiAqICAgZXhwZWN0KCRpbmplY3Rvci5nZXQoJyRpbmplY3RvcicpKS50b0JlKCRpbmplY3Rvcik7XG4gKiAgIGV4cGVjdCgkaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuICogICAgIHJldHVybiAkaW5qZWN0b3I7XG4gKiAgIH0pKS50b0JlKCRpbmplY3Rvcik7XG4gKiBgYGBcbiAqXG4gKiAjIyBJbmplY3Rpb24gRnVuY3Rpb24gQW5ub3RhdGlvblxuICpcbiAqIEphdmFTY3JpcHQgZG9lcyBub3QgaGF2ZSBhbm5vdGF0aW9ucywgYW5kIGFubm90YXRpb25zIGFyZSBuZWVkZWQgZm9yIGRlcGVuZGVuY3kgaW5qZWN0aW9uLiBUaGVcbiAqIGZvbGxvd2luZyBhcmUgYWxsIHZhbGlkIHdheXMgb2YgYW5ub3RhdGluZyBmdW5jdGlvbiB3aXRoIGluamVjdGlvbiBhcmd1bWVudHMgYW5kIGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIGBgYGpzXG4gKiAgIC8vIGluZmVycmVkIChvbmx5IHdvcmtzIGlmIGNvZGUgbm90IG1pbmlmaWVkL29iZnVzY2F0ZWQpXG4gKiAgICRpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24oc2VydmljZUEpe30pO1xuICpcbiAqICAgLy8gYW5ub3RhdGVkXG4gKiAgIGZ1bmN0aW9uIGV4cGxpY2l0KHNlcnZpY2VBKSB7fTtcbiAqICAgZXhwbGljaXQuJGluamVjdCA9IFsnc2VydmljZUEnXTtcbiAqICAgJGluamVjdG9yLmludm9rZShleHBsaWNpdCk7XG4gKlxuICogICAvLyBpbmxpbmVcbiAqICAgJGluamVjdG9yLmludm9rZShbJ3NlcnZpY2VBJywgZnVuY3Rpb24oc2VydmljZUEpe31dKTtcbiAqIGBgYFxuICpcbiAqICMjIyBJbmZlcmVuY2VcbiAqXG4gKiBJbiBKYXZhU2NyaXB0IGNhbGxpbmcgYHRvU3RyaW5nKClgIG9uIGEgZnVuY3Rpb24gcmV0dXJucyB0aGUgZnVuY3Rpb24gZGVmaW5pdGlvbi4gVGhlIGRlZmluaXRpb25cbiAqIGNhbiB0aGVuIGJlIHBhcnNlZCBhbmQgdGhlIGZ1bmN0aW9uIGFyZ3VtZW50cyBjYW4gYmUgZXh0cmFjdGVkLiBUaGlzIG1ldGhvZCBvZiBkaXNjb3ZlcmluZ1xuICogYW5ub3RhdGlvbnMgaXMgZGlzYWxsb3dlZCB3aGVuIHRoZSBpbmplY3RvciBpcyBpbiBzdHJpY3QgbW9kZS5cbiAqICpOT1RFOiogVGhpcyBkb2VzIG5vdCB3b3JrIHdpdGggbWluaWZpY2F0aW9uLCBhbmQgb2JmdXNjYXRpb24gdG9vbHMgc2luY2UgdGhlc2UgdG9vbHMgY2hhbmdlIHRoZVxuICogYXJndW1lbnQgbmFtZXMuXG4gKlxuICogIyMjIGAkaW5qZWN0YCBBbm5vdGF0aW9uXG4gKiBCeSBhZGRpbmcgYW4gYCRpbmplY3RgIHByb3BlcnR5IG9udG8gYSBmdW5jdGlvbiB0aGUgaW5qZWN0aW9uIHBhcmFtZXRlcnMgY2FuIGJlIHNwZWNpZmllZC5cbiAqXG4gKiAjIyMgSW5saW5lXG4gKiBBcyBhbiBhcnJheSBvZiBpbmplY3Rpb24gbmFtZXMsIHdoZXJlIHRoZSBsYXN0IGl0ZW0gaW4gdGhlIGFycmF5IGlzIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICovXG5cbi8qKlxuICogQG5nZG9jIHByb3BlcnR5XG4gKiBAbmFtZSAkaW5qZWN0b3IjbW9kdWxlc1xuICogQHR5cGUge09iamVjdH1cbiAqIEBkZXNjcmlwdGlvblxuICogQSBoYXNoIGNvbnRhaW5pbmcgYWxsIHRoZSBtb2R1bGVzIHRoYXQgaGF2ZSBiZWVuIGxvYWRlZCBpbnRvIHRoZVxuICogJGluamVjdG9yLlxuICpcbiAqIFlvdSBjYW4gdXNlIHRoaXMgcHJvcGVydHkgdG8gZmluZCBvdXQgaW5mb3JtYXRpb24gYWJvdXQgYSBtb2R1bGUgdmlhIHRoZVxuICoge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2luZm8gYG15TW9kdWxlLmluZm8oLi4uKWB9IG1ldGhvZC5cbiAqXG4gKiBGb3IgZXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIHZhciBpbmZvID0gJGluamVjdG9yLm1vZHVsZXNbJ25nQW5pbWF0ZSddLmluZm8oKTtcbiAqIGBgYFxuICpcbiAqICoqRG8gbm90IHVzZSB0aGlzIHByb3BlcnR5IHRvIGF0dGVtcHQgdG8gbW9kaWZ5IHRoZSBtb2R1bGVzIGFmdGVyIHRoZSBhcHBsaWNhdGlvblxuICogaGFzIGJlZW4gYm9vdHN0cmFwcGVkLioqXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNnZXRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiBhbiBpbnN0YW5jZSBvZiB0aGUgc2VydmljZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UgdG8gcmV0cmlldmUuXG4gKiBAcGFyYW0ge3N0cmluZz19IGNhbGxlciBBbiBvcHRpb25hbCBzdHJpbmcgdG8gcHJvdmlkZSB0aGUgb3JpZ2luIG9mIHRoZSBmdW5jdGlvbiBjYWxsIGZvciBlcnJvciBtZXNzYWdlcy5cbiAqIEByZXR1cm4geyp9IFRoZSBpbnN0YW5jZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNpbnZva2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEludm9rZSB0aGUgbWV0aG9kIGFuZCBzdXBwbHkgdGhlIG1ldGhvZCBhcmd1bWVudHMgZnJvbSB0aGUgYCRpbmplY3RvcmAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gZm4gVGhlIGluamVjdGFibGUgZnVuY3Rpb24gdG8gaW52b2tlLiBGdW5jdGlvbiBwYXJhbWV0ZXJzIGFyZVxuICogICBpbmplY3RlZCBhY2NvcmRpbmcgdG8gdGhlIHtAbGluayBndWlkZS9kaSAkaW5qZWN0IEFubm90YXRpb259IHJ1bGVzLlxuICogQHBhcmFtIHtPYmplY3Q9fSBzZWxmIFRoZSBgdGhpc2AgZm9yIHRoZSBpbnZva2VkIG1ldGhvZC5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gbG9jYWxzIE9wdGlvbmFsIG9iamVjdC4gSWYgcHJlc2V0IHRoZW4gYW55IGFyZ3VtZW50IG5hbWVzIGFyZSByZWFkIGZyb20gdGhpc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0IGZpcnN0LCBiZWZvcmUgdGhlIGAkaW5qZWN0b3JgIGlzIGNvbnN1bHRlZC5cbiAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhlIGludm9rZWQgYGZuYCBmdW5jdGlvbi5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNoYXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFsbG93cyB0aGUgdXNlciB0byBxdWVyeSBpZiB0aGUgcGFydGljdWxhciBzZXJ2aWNlIGV4aXN0cy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiBpbmplY3RvciBoYXMgZ2l2ZW4gc2VydmljZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNpbnN0YW50aWF0ZVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgSlMgdHlwZS4gVGhlIG1ldGhvZCB0YWtlcyBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLCBpbnZva2VzIHRoZSBuZXdcbiAqIG9wZXJhdG9yLCBhbmQgc3VwcGxpZXMgYWxsIG9mIHRoZSBhcmd1bWVudHMgdG8gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGFzIHNwZWNpZmllZCBieSB0aGVcbiAqIGNvbnN0cnVjdG9yIGFubm90YXRpb24uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gVHlwZSBBbm5vdGF0ZWQgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge09iamVjdD19IGxvY2FscyBPcHRpb25hbCBvYmplY3QuIElmIHByZXNldCB0aGVuIGFueSBhcmd1bWVudCBuYW1lcyBhcmUgcmVhZCBmcm9tIHRoaXNcbiAqIG9iamVjdCBmaXJzdCwgYmVmb3JlIHRoZSBgJGluamVjdG9yYCBpcyBjb25zdWx0ZWQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBuZXcgaW5zdGFuY2Ugb2YgYFR5cGVgLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2Fubm90YXRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIHNlcnZpY2UgbmFtZXMgd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIHJlcXVlc3RpbmcgZm9yIGluamVjdGlvbi4gVGhpcyBBUEkgaXNcbiAqIHVzZWQgYnkgdGhlIGluamVjdG9yIHRvIGRldGVybWluZSB3aGljaCBzZXJ2aWNlcyBuZWVkIHRvIGJlIGluamVjdGVkIGludG8gdGhlIGZ1bmN0aW9uIHdoZW4gdGhlXG4gKiBmdW5jdGlvbiBpcyBpbnZva2VkLiBUaGVyZSBhcmUgdGhyZWUgd2F5cyBpbiB3aGljaCB0aGUgZnVuY3Rpb24gY2FuIGJlIGFubm90YXRlZCB3aXRoIHRoZSBuZWVkZWRcbiAqIGRlcGVuZGVuY2llcy5cbiAqXG4gKiAjIyMjIEFyZ3VtZW50IG5hbWVzXG4gKlxuICogVGhlIHNpbXBsZXN0IGZvcm0gaXMgdG8gZXh0cmFjdCB0aGUgZGVwZW5kZW5jaWVzIGZyb20gdGhlIGFyZ3VtZW50cyBvZiB0aGUgZnVuY3Rpb24uIFRoaXMgaXMgZG9uZVxuICogYnkgY29udmVydGluZyB0aGUgZnVuY3Rpb24gaW50byBhIHN0cmluZyB1c2luZyBgdG9TdHJpbmcoKWAgbWV0aG9kIGFuZCBleHRyYWN0aW5nIHRoZSBhcmd1bWVudFxuICogbmFtZXMuXG4gKiBgYGBqc1xuICogICAvLyBHaXZlblxuICogICBmdW5jdGlvbiBNeUNvbnRyb2xsZXIoJHNjb3BlLCAkcm91dGUpIHtcbiAqICAgICAvLyAuLi5cbiAqICAgfVxuICpcbiAqICAgLy8gVGhlblxuICogICBleHBlY3QoaW5qZWN0b3IuYW5ub3RhdGUoTXlDb250cm9sbGVyKSkudG9FcXVhbChbJyRzY29wZScsICckcm91dGUnXSk7XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIGRpc2FsbG93IHRoaXMgbWV0aG9kIGJ5IHVzaW5nIHN0cmljdCBpbmplY3Rpb24gbW9kZS5cbiAqXG4gKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB3b3JrIHdpdGggY29kZSBtaW5pZmljYXRpb24gLyBvYmZ1c2NhdGlvbi4gRm9yIHRoaXMgcmVhc29uIHRoZSBmb2xsb3dpbmdcbiAqIGFubm90YXRpb24gc3RyYXRlZ2llcyBhcmUgc3VwcG9ydGVkLlxuICpcbiAqICMjIyMgVGhlIGAkaW5qZWN0YCBwcm9wZXJ0eVxuICpcbiAqIElmIGEgZnVuY3Rpb24gaGFzIGFuIGAkaW5qZWN0YCBwcm9wZXJ0eSBhbmQgaXRzIHZhbHVlIGlzIGFuIGFycmF5IG9mIHN0cmluZ3MsIHRoZW4gdGhlIHN0cmluZ3NcbiAqIHJlcHJlc2VudCBuYW1lcyBvZiBzZXJ2aWNlcyB0byBiZSBpbmplY3RlZCBpbnRvIHRoZSBmdW5jdGlvbi5cbiAqIGBgYGpzXG4gKiAgIC8vIEdpdmVuXG4gKiAgIHZhciBNeUNvbnRyb2xsZXIgPSBmdW5jdGlvbihvYmZ1c2NhdGVkU2NvcGUsIG9iZnVzY2F0ZWRSb3V0ZSkge1xuICogICAgIC8vIC4uLlxuICogICB9XG4gKiAgIC8vIERlZmluZSBmdW5jdGlvbiBkZXBlbmRlbmNpZXNcbiAqICAgTXlDb250cm9sbGVyWyckaW5qZWN0J10gPSBbJyRzY29wZScsICckcm91dGUnXTtcbiAqXG4gKiAgIC8vIFRoZW5cbiAqICAgZXhwZWN0KGluamVjdG9yLmFubm90YXRlKE15Q29udHJvbGxlcikpLnRvRXF1YWwoWyckc2NvcGUnLCAnJHJvdXRlJ10pO1xuICogYGBgXG4gKlxuICogIyMjIyBUaGUgYXJyYXkgbm90YXRpb25cbiAqXG4gKiBJdCBpcyBvZnRlbiBkZXNpcmFibGUgdG8gaW5saW5lIEluamVjdGVkIGZ1bmN0aW9ucyBhbmQgdGhhdCdzIHdoZW4gc2V0dGluZyB0aGUgYCRpbmplY3RgIHByb3BlcnR5XG4gKiBpcyB2ZXJ5IGluY29udmVuaWVudC4gSW4gdGhlc2Ugc2l0dWF0aW9ucyB1c2luZyB0aGUgYXJyYXkgbm90YXRpb24gdG8gc3BlY2lmeSB0aGUgZGVwZW5kZW5jaWVzIGluXG4gKiBhIHdheSB0aGF0IHN1cnZpdmVzIG1pbmlmaWNhdGlvbiBpcyBhIGJldHRlciBjaG9pY2U6XG4gKlxuICogYGBganNcbiAqICAgLy8gV2Ugd2lzaCB0byB3cml0ZSB0aGlzIChub3QgbWluaWZpY2F0aW9uIC8gb2JmdXNjYXRpb24gc2FmZSlcbiAqICAgaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKCRjb21waWxlLCAkcm9vdFNjb3BlKSB7XG4gKiAgICAgLy8gLi4uXG4gKiAgIH0pO1xuICpcbiAqICAgLy8gV2UgYXJlIGZvcmNlZCB0byB3cml0ZSBicmVhayBpbmxpbmluZ1xuICogICB2YXIgdG1wRm4gPSBmdW5jdGlvbihvYmZ1c2NhdGVkQ29tcGlsZSwgb2JmdXNjYXRlZFJvb3RTY29wZSkge1xuICogICAgIC8vIC4uLlxuICogICB9O1xuICogICB0bXBGbi4kaW5qZWN0ID0gWyckY29tcGlsZScsICckcm9vdFNjb3BlJ107XG4gKiAgIGluamVjdG9yLmludm9rZSh0bXBGbik7XG4gKlxuICogICAvLyBUbyBiZXR0ZXIgc3VwcG9ydCBpbmxpbmUgZnVuY3Rpb24gdGhlIGlubGluZSBhbm5vdGF0aW9uIGlzIHN1cHBvcnRlZFxuICogICBpbmplY3Rvci5pbnZva2UoWyckY29tcGlsZScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24ob2JmQ29tcGlsZSwgb2JmUm9vdFNjb3BlKSB7XG4gKiAgICAgLy8gLi4uXG4gKiAgIH1dKTtcbiAqXG4gKiAgIC8vIFRoZXJlZm9yZVxuICogICBleHBlY3QoaW5qZWN0b3IuYW5ub3RhdGUoXG4gKiAgICAgIFsnJGNvbXBpbGUnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKG9iZnVzXyRjb21waWxlLCBvYmZ1c18kcm9vdFNjb3BlKSB7fV0pXG4gKiAgICApLnRvRXF1YWwoWyckY29tcGlsZScsICckcm9vdFNjb3BlJ10pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gZm4gRnVuY3Rpb24gZm9yIHdoaWNoIGRlcGVuZGVudCBzZXJ2aWNlIG5hbWVzIG5lZWQgdG9cbiAqIGJlIHJldHJpZXZlZCBhcyBkZXNjcmliZWQgYWJvdmUuXG4gKlxuICogQHBhcmFtIHtib29sZWFuPX0gW3N0cmljdERpPWZhbHNlXSBEaXNhbGxvdyBhcmd1bWVudCBuYW1lIGFubm90YXRpb24gaW5mZXJlbmNlLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheS48c3RyaW5nPn0gVGhlIG5hbWVzIG9mIHRoZSBzZXJ2aWNlcyB3aGljaCB0aGUgZnVuY3Rpb24gcmVxdWlyZXMuXG4gKi9cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2xvYWROZXdNb2R1bGVzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogKipUaGlzIGlzIGEgZGFuZ2Vyb3VzIEFQSSwgd2hpY2ggeW91IHVzZSBhdCB5b3VyIG93biByaXNrISoqXG4gKlxuICogQWRkIHRoZSBzcGVjaWZpZWQgbW9kdWxlcyB0byB0aGUgY3VycmVudCBpbmplY3Rvci5cbiAqXG4gKiBUaGlzIG1ldGhvZCB3aWxsIGFkZCBlYWNoIG9mIHRoZSBpbmplY3RhYmxlcyB0byB0aGUgaW5qZWN0b3IgYW5kIGV4ZWN1dGUgYWxsIG9mIHRoZSBjb25maWcgYW5kIHJ1blxuICogYmxvY2tzIGZvciBlYWNoIG1vZHVsZSBwYXNzZWQgdG8gdGhlIG1ldGhvZC5cbiAqXG4gKiBJZiBhIG1vZHVsZSBoYXMgYWxyZWFkeSBiZWVuIGxvYWRlZCBpbnRvIHRoZSBpbmplY3RvciB0aGVuIGl0IHdpbGwgbm90IGJlIGxvYWRlZCBhZ2Fpbi5cbiAqXG4gKiAqIFRoZSBhcHBsaWNhdGlvbiBkZXZlbG9wZXIgaXMgcmVzcG9uc2libGUgZm9yIGxvYWRpbmcgdGhlIGNvZGUgY29udGFpbmluZyB0aGUgbW9kdWxlczsgYW5kIGZvclxuICogZW5zdXJpbmcgdGhhdCBsYXp5IHNjcmlwdHMgYXJlIG5vdCBkb3dubG9hZGVkIGFuZCBleGVjdXRlZCBtb3JlIG9mdGVuIHRoYXQgZGVzaXJlZC5cbiAqICogUHJldmlvdXNseSBjb21waWxlZCBIVE1MIHdpbGwgbm90IGJlIGFmZmVjdGVkIGJ5IG5ld2x5IGxvYWRlZCBkaXJlY3RpdmVzLCBmaWx0ZXJzIGFuZCBjb21wb25lbnRzLlxuICogKiBNb2R1bGVzIGNhbm5vdCBiZSB1bmxvYWRlZC5cbiAqXG4gKiBZb3UgY2FuIHVzZSB7QGxpbmsgJGluamVjdG9yI21vZHVsZXMgYCRpbmplY3Rvci5tb2R1bGVzYH0gdG8gY2hlY2sgd2hldGhlciBhIG1vZHVsZSBoYXMgYmVlbiBsb2FkZWRcbiAqIGludG8gdGhlIGluamVjdG9yLCB3aGljaCBtYXkgaW5kaWNhdGUgd2hldGhlciB0aGUgc2NyaXB0IGhhcyBiZWVuIGV4ZWN1dGVkIGFscmVhZHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgaXMgYW4gZXhhbXBsZSBvZiBsb2FkaW5nIGEgYnVuZGxlIG9mIG1vZHVsZXMsIHdpdGggYSB1dGlsaXR5IG1ldGhvZCBjYWxsZWQgYGdldFNjcmlwdGA6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogYXBwLmZhY3RvcnkoJ2xvYWRNb2R1bGUnLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcbiAqICAgcmV0dXJuIGZ1bmN0aW9uIGxvYWRNb2R1bGUobW9kdWxlTmFtZSwgYnVuZGxlVXJsKSB7XG4gKiAgICAgcmV0dXJuIGdldFNjcmlwdChidW5kbGVVcmwpLnRoZW4oZnVuY3Rpb24oKSB7ICRpbmplY3Rvci5sb2FkTmV3TW9kdWxlcyhbbW9kdWxlTmFtZV0pOyB9KTtcbiAqICAgfTtcbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge0FycmF5PFN0cmluZ3xGdW5jdGlvbnxBcnJheT49fSBtb2RzIGFuIGFycmF5IG9mIG1vZHVsZXMgdG8gbG9hZCBpbnRvIHRoZSBhcHBsaWNhdGlvbi5cbiAqICAgICBFYWNoIGl0ZW0gaW4gdGhlIGFycmF5IHNob3VsZCBiZSB0aGUgbmFtZSBvZiBhIHByZWRlZmluZWQgbW9kdWxlIG9yIGEgKERJIGFubm90YXRlZClcbiAqICAgICBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCBieSB0aGUgaW5qZWN0b3IgYXMgYSBgY29uZmlnYCBibG9jay5cbiAqICAgICBTZWU6IHtAbGluayBhbmd1bGFyLm1vZHVsZSBtb2R1bGVzfVxuICovXG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHByb3ZpZGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUge0BsaW5rIGF1dG8uJHByb3ZpZGUgJHByb3ZpZGV9IHNlcnZpY2UgaGFzIGEgbnVtYmVyIG9mIG1ldGhvZHMgZm9yIHJlZ2lzdGVyaW5nIGNvbXBvbmVudHNcbiAqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBNYW55IG9mIHRoZXNlIGZ1bmN0aW9ucyBhcmUgYWxzbyBleHBvc2VkIG9uXG4gKiB7QGxpbmsgYW5ndWxhci5Nb2R1bGV9LlxuICpcbiAqIEFuIEFuZ3VsYXJKUyAqKnNlcnZpY2UqKiBpcyBhIHNpbmdsZXRvbiBvYmplY3QgY3JlYXRlZCBieSBhICoqc2VydmljZSBmYWN0b3J5KiouICBUaGVzZSAqKnNlcnZpY2VcbiAqIGZhY3RvcmllcyoqIGFyZSBmdW5jdGlvbnMgd2hpY2gsIGluIHR1cm4sIGFyZSBjcmVhdGVkIGJ5IGEgKipzZXJ2aWNlIHByb3ZpZGVyKiouXG4gKiBUaGUgKipzZXJ2aWNlIHByb3ZpZGVycyoqIGFyZSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMuIFdoZW4gaW5zdGFudGlhdGVkIHRoZXkgbXVzdCBjb250YWluIGFcbiAqIHByb3BlcnR5IGNhbGxlZCBgJGdldGAsIHdoaWNoIGhvbGRzIHRoZSAqKnNlcnZpY2UgZmFjdG9yeSoqIGZ1bmN0aW9uLlxuICpcbiAqIFdoZW4geW91IHJlcXVlc3QgYSBzZXJ2aWNlLCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0gaXMgcmVzcG9uc2libGUgZm9yIGZpbmRpbmcgdGhlXG4gKiBjb3JyZWN0ICoqc2VydmljZSBwcm92aWRlcioqLCBpbnN0YW50aWF0aW5nIGl0IGFuZCB0aGVuIGNhbGxpbmcgaXRzIGAkZ2V0YCAqKnNlcnZpY2UgZmFjdG9yeSoqXG4gKiBmdW5jdGlvbiB0byBnZXQgdGhlIGluc3RhbmNlIG9mIHRoZSAqKnNlcnZpY2UqKi5cbiAqXG4gKiBPZnRlbiBzZXJ2aWNlcyBoYXZlIG5vIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBhbmQgdGhlcmUgaXMgbm8gbmVlZCB0byBhZGQgbWV0aG9kcyB0byB0aGUgc2VydmljZVxuICogcHJvdmlkZXIuICBUaGUgcHJvdmlkZXIgd2lsbCBiZSBubyBtb3JlIHRoYW4gYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB3aXRoIGEgYCRnZXRgIHByb3BlcnR5LiBGb3JcbiAqIHRoZXNlIGNhc2VzIHRoZSB7QGxpbmsgYXV0by4kcHJvdmlkZSAkcHJvdmlkZX0gc2VydmljZSBoYXMgYWRkaXRpb25hbCBoZWxwZXIgbWV0aG9kcyB0byByZWdpc3RlclxuICogc2VydmljZXMgd2l0aG91dCBzcGVjaWZ5aW5nIGEgcHJvdmlkZXIuXG4gKlxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNwcm92aWRlciBwcm92aWRlcihuYW1lLCBwcm92aWRlcil9IC0gcmVnaXN0ZXJzIGEgKipzZXJ2aWNlIHByb3ZpZGVyKiogd2l0aCB0aGVcbiAqICAgICB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfVxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNjb25zdGFudCBjb25zdGFudChuYW1lLCBvYmopfSAtIHJlZ2lzdGVycyBhIHZhbHVlL29iamVjdCB0aGF0IGNhbiBiZSBhY2Nlc3NlZCBieVxuICogICAgIHByb3ZpZGVycyBhbmQgc2VydmljZXMuXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlIHZhbHVlKG5hbWUsIG9iail9IC0gcmVnaXN0ZXJzIGEgdmFsdWUvb2JqZWN0IHRoYXQgY2FuIG9ubHkgYmUgYWNjZXNzZWQgYnlcbiAqICAgICBzZXJ2aWNlcywgbm90IHByb3ZpZGVycy5cbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjZmFjdG9yeSBmYWN0b3J5KG5hbWUsIGZuKX0gLSByZWdpc3RlcnMgYSBzZXJ2aWNlICoqZmFjdG9yeSBmdW5jdGlvbioqXG4gKiAgICAgdGhhdCB3aWxsIGJlIHdyYXBwZWQgaW4gYSAqKnNlcnZpY2UgcHJvdmlkZXIqKiBvYmplY3QsIHdob3NlIGAkZ2V0YCBwcm9wZXJ0eSB3aWxsIGNvbnRhaW4gdGhlXG4gKiAgICAgZ2l2ZW4gZmFjdG9yeSBmdW5jdGlvbi5cbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjc2VydmljZSBzZXJ2aWNlKG5hbWUsIEZuKX0gLSByZWdpc3RlcnMgYSAqKmNvbnN0cnVjdG9yIGZ1bmN0aW9uKipcbiAqICAgICB0aGF0IHdpbGwgYmUgd3JhcHBlZCBpbiBhICoqc2VydmljZSBwcm92aWRlcioqIG9iamVjdCwgd2hvc2UgYCRnZXRgIHByb3BlcnR5IHdpbGwgaW5zdGFudGlhdGVcbiAqICAgICAgYSBuZXcgb2JqZWN0IHVzaW5nIHRoZSBnaXZlbiBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjZGVjb3JhdG9yIGRlY29yYXRvcihuYW1lLCBkZWNvckZuKX0gLSByZWdpc3RlcnMgYSAqKmRlY29yYXRvciBmdW5jdGlvbioqIHRoYXRcbiAqICAgICAgd2lsbCBiZSBhYmxlIHRvIG1vZGlmeSBvciByZXBsYWNlIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBhbm90aGVyIHNlcnZpY2UuXG4gKlxuICogU2VlIHRoZSBpbmRpdmlkdWFsIG1ldGhvZHMgZm9yIG1vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVzLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJHByb3ZpZGUjcHJvdmlkZXJcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFJlZ2lzdGVyIGEgKipwcm92aWRlciBmdW5jdGlvbioqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBQcm92aWRlciBmdW5jdGlvbnNcbiAqIGFyZSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMsIHdob3NlIGluc3RhbmNlcyBhcmUgcmVzcG9uc2libGUgZm9yIFwicHJvdmlkaW5nXCIgYSBmYWN0b3J5IGZvciBhXG4gKiBzZXJ2aWNlLlxuICpcbiAqIFNlcnZpY2UgcHJvdmlkZXIgbmFtZXMgc3RhcnQgd2l0aCB0aGUgbmFtZSBvZiB0aGUgc2VydmljZSB0aGV5IHByb3ZpZGUgZm9sbG93ZWQgYnkgYFByb3ZpZGVyYC5cbiAqIEZvciBleGFtcGxlLCB0aGUge0BsaW5rIG5nLiRsb2cgJGxvZ30gc2VydmljZSBoYXMgYSBwcm92aWRlciBjYWxsZWRcbiAqIHtAbGluayBuZy4kbG9nUHJvdmlkZXIgJGxvZ1Byb3ZpZGVyfS5cbiAqXG4gKiBTZXJ2aWNlIHByb3ZpZGVyIG9iamVjdHMgY2FuIGhhdmUgYWRkaXRpb25hbCBtZXRob2RzIHdoaWNoIGFsbG93IGNvbmZpZ3VyYXRpb24gb2YgdGhlIHByb3ZpZGVyXG4gKiBhbmQgaXRzIHNlcnZpY2UuIEltcG9ydGFudGx5LCB5b3UgY2FuIGNvbmZpZ3VyZSB3aGF0IGtpbmQgb2Ygc2VydmljZSBpcyBjcmVhdGVkIGJ5IHRoZSBgJGdldGBcbiAqIG1ldGhvZCwgb3IgaG93IHRoYXQgc2VydmljZSB3aWxsIGFjdC4gRm9yIGV4YW1wbGUsIHRoZSB7QGxpbmsgbmcuJGxvZ1Byb3ZpZGVyICRsb2dQcm92aWRlcn0gaGFzIGFcbiAqIG1ldGhvZCB7QGxpbmsgbmcuJGxvZ1Byb3ZpZGVyI2RlYnVnRW5hYmxlZCBkZWJ1Z0VuYWJsZWR9XG4gKiB3aGljaCBsZXRzIHlvdSBzcGVjaWZ5IHdoZXRoZXIgdGhlIHtAbGluayBuZy4kbG9nICRsb2d9IHNlcnZpY2Ugd2lsbCBsb2cgZGVidWcgbWVzc2FnZXMgdG8gdGhlXG4gKiBjb25zb2xlIG9yIG5vdC5cbiAqXG4gKiBJdCBpcyBwb3NzaWJsZSB0byBpbmplY3Qgb3RoZXIgcHJvdmlkZXJzIGludG8gdGhlIHByb3ZpZGVyIGZ1bmN0aW9uLFxuICogYnV0IHRoZSBpbmplY3RlZCBwcm92aWRlciBtdXN0IGhhdmUgYmVlbiBkZWZpbmVkIGJlZm9yZSB0aGUgb25lIHRoYXQgcmVxdWlyZXMgaXQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluc3RhbmNlLiBOT1RFOiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBhdmFpbGFibGUgdW5kZXIgYG5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb3ZpZGVyJ2Aga2V5LlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKCkpfSBwcm92aWRlciBJZiB0aGUgcHJvdmlkZXIgaXM6XG4gKlxuICogICAtIGBPYmplY3RgOiB0aGVuIGl0IHNob3VsZCBoYXZlIGEgYCRnZXRgIG1ldGhvZC4gVGhlIGAkZ2V0YCBtZXRob2Qgd2lsbCBiZSBpbnZva2VkIHVzaW5nXG4gKiAgICAge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSAkaW5qZWN0b3IuaW52b2tlKCl9IHdoZW4gYW4gaW5zdGFuY2UgbmVlZHMgdG8gYmUgY3JlYXRlZC5cbiAqICAgLSBgQ29uc3RydWN0b3JgOiBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBjcmVhdGVkIHVzaW5nXG4gKiAgICAge0BsaW5rIGF1dG8uJGluamVjdG9yI2luc3RhbnRpYXRlICRpbmplY3Rvci5pbnN0YW50aWF0ZSgpfSwgdGhlbiB0cmVhdGVkIGFzIGBvYmplY3RgLlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcblxuICogQGV4YW1wbGVcbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIGNyZWF0ZSBhIHNpbXBsZSBldmVudCB0cmFja2luZyBzZXJ2aWNlIGFuZCByZWdpc3RlciBpdCB1c2luZ1xuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgJHByb3ZpZGUucHJvdmlkZXIoKX0uXG4gKlxuICogYGBganNcbiAqICAvLyBEZWZpbmUgdGhlIGV2ZW50VHJhY2tlciBwcm92aWRlclxuICogIGZ1bmN0aW9uIEV2ZW50VHJhY2tlclByb3ZpZGVyKCkge1xuICogICAgdmFyIHRyYWNraW5nVXJsID0gJy90cmFjayc7XG4gKlxuICogICAgLy8gQSBwcm92aWRlciBtZXRob2QgZm9yIGNvbmZpZ3VyaW5nIHdoZXJlIHRoZSB0cmFja2VkIGV2ZW50cyBzaG91bGQgYmVlbiBzYXZlZFxuICogICAgdGhpcy5zZXRUcmFja2luZ1VybCA9IGZ1bmN0aW9uKHVybCkge1xuICogICAgICB0cmFja2luZ1VybCA9IHVybDtcbiAqICAgIH07XG4gKlxuICogICAgLy8gVGhlIHNlcnZpY2UgZmFjdG9yeSBmdW5jdGlvblxuICogICAgdGhpcy4kZ2V0ID0gWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gKiAgICAgIHZhciB0cmFja2VkRXZlbnRzID0ge307XG4gKiAgICAgIHJldHVybiB7XG4gKiAgICAgICAgLy8gQ2FsbCB0aGlzIHRvIHRyYWNrIGFuIGV2ZW50XG4gKiAgICAgICAgZXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gKiAgICAgICAgICB2YXIgY291bnQgPSB0cmFja2VkRXZlbnRzW2V2ZW50XSB8fCAwO1xuICogICAgICAgICAgY291bnQgKz0gMTtcbiAqICAgICAgICAgIHRyYWNrZWRFdmVudHNbZXZlbnRdID0gY291bnQ7XG4gKiAgICAgICAgICByZXR1cm4gY291bnQ7XG4gKiAgICAgICAgfSxcbiAqICAgICAgICAvLyBDYWxsIHRoaXMgdG8gc2F2ZSB0aGUgdHJhY2tlZCBldmVudHMgdG8gdGhlIHRyYWNraW5nVXJsXG4gKiAgICAgICAgc2F2ZTogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAkaHR0cC5wb3N0KHRyYWNraW5nVXJsLCB0cmFja2VkRXZlbnRzKTtcbiAqICAgICAgICB9XG4gKiAgICAgIH07XG4gKiAgICB9XTtcbiAqICB9XG4gKlxuICogIGRlc2NyaWJlKCdldmVudFRyYWNrZXInLCBmdW5jdGlvbigpIHtcbiAqICAgIHZhciBwb3N0U3B5O1xuICpcbiAqICAgIGJlZm9yZUVhY2gobW9kdWxlKGZ1bmN0aW9uKCRwcm92aWRlKSB7XG4gKiAgICAgIC8vIFJlZ2lzdGVyIHRoZSBldmVudFRyYWNrZXIgcHJvdmlkZXJcbiAqICAgICAgJHByb3ZpZGUucHJvdmlkZXIoJ2V2ZW50VHJhY2tlcicsIEV2ZW50VHJhY2tlclByb3ZpZGVyKTtcbiAqICAgIH0pKTtcbiAqXG4gKiAgICBiZWZvcmVFYWNoKG1vZHVsZShmdW5jdGlvbihldmVudFRyYWNrZXJQcm92aWRlcikge1xuICogICAgICAvLyBDb25maWd1cmUgZXZlbnRUcmFja2VyIHByb3ZpZGVyXG4gKiAgICAgIGV2ZW50VHJhY2tlclByb3ZpZGVyLnNldFRyYWNraW5nVXJsKCcvY3VzdG9tLXRyYWNrJyk7XG4gKiAgICB9KSk7XG4gKlxuICogICAgaXQoJ3RyYWNrcyBldmVudHMnLCBpbmplY3QoZnVuY3Rpb24oZXZlbnRUcmFja2VyKSB7XG4gKiAgICAgIGV4cGVjdChldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJykpLnRvRXF1YWwoMSk7XG4gKiAgICAgIGV4cGVjdChldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJykpLnRvRXF1YWwoMik7XG4gKiAgICB9KSk7XG4gKlxuICogICAgaXQoJ3NhdmVzIHRvIHRoZSB0cmFja2luZyB1cmwnLCBpbmplY3QoZnVuY3Rpb24oZXZlbnRUcmFja2VyLCAkaHR0cCkge1xuICogICAgICBwb3N0U3B5ID0gc3B5T24oJGh0dHAsICdwb3N0Jyk7XG4gKiAgICAgIGV2ZW50VHJhY2tlci5ldmVudCgnbG9naW4nKTtcbiAqICAgICAgZXZlbnRUcmFja2VyLnNhdmUoKTtcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkubW9zdFJlY2VudENhbGwuYXJnc1swXSkubm90LnRvRXF1YWwoJy90cmFjaycpO1xuICogICAgICBleHBlY3QocG9zdFNweS5tb3N0UmVjZW50Q2FsbC5hcmdzWzBdKS50b0VxdWFsKCcvY3VzdG9tLXRyYWNrJyk7XG4gKiAgICAgIGV4cGVjdChwb3N0U3B5Lm1vc3RSZWNlbnRDYWxsLmFyZ3NbMV0pLnRvRXF1YWwoeyAnbG9naW4nOiAxIH0pO1xuICogICAgfSkpO1xuICogIH0pO1xuICogYGBgXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSNmYWN0b3J5XG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqc2VydmljZSBmYWN0b3J5KiosIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHRvIHJldHVybiB0aGUgc2VydmljZSBpbnN0YW5jZS5cbiAqIFRoaXMgaXMgc2hvcnQgZm9yIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB3aGVyZSBpdHMgcHJvdmlkZXIgY29uc2lzdHMgb2Ygb25seSBhIGAkZ2V0YCBwcm9wZXJ0eSxcbiAqIHdoaWNoIGlzIHRoZSBnaXZlbiBzZXJ2aWNlIGZhY3RvcnkgZnVuY3Rpb24uXG4gKiBZb3Ugc2hvdWxkIHVzZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5ICRwcm92aWRlLmZhY3RvcnkoZ2V0Rm4pfSBpZiB5b3UgZG8gbm90IG5lZWQgdG9cbiAqIGNvbmZpZ3VyZSB5b3VyIHNlcnZpY2UgaW4gYSBwcm92aWRlci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSAkZ2V0Rm4gVGhlIGluamVjdGFibGUgJGdldEZuIGZvciB0aGUgaW5zdGFuY2UgY3JlYXRpb24uXG4gKiAgICAgICAgICAgICAgICAgICAgICBJbnRlcm5hbGx5IHRoaXMgaXMgYSBzaG9ydCBoYW5kIGZvciBgJHByb3ZpZGUucHJvdmlkZXIobmFtZSwgeyRnZXQ6ICRnZXRGbn0pYC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSBpcyBhbiBleGFtcGxlIG9mIHJlZ2lzdGVyaW5nIGEgc2VydmljZVxuICogYGBganNcbiAqICAgJHByb3ZpZGUuZmFjdG9yeSgncGluZycsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuICogICAgIHJldHVybiBmdW5jdGlvbiBwaW5nKCkge1xuICogICAgICAgcmV0dXJuICRodHRwLnNlbmQoJy9waW5nJyk7XG4gKiAgICAgfTtcbiAqICAgfV0pO1xuICogYGBgXG4gKiBZb3Ugd291bGQgdGhlbiBpbmplY3QgYW5kIHVzZSB0aGlzIHNlcnZpY2UgbGlrZSB0aGlzOlxuICogYGBganNcbiAqICAgc29tZU1vZHVsZS5jb250cm9sbGVyKCdDdHJsJywgWydwaW5nJywgZnVuY3Rpb24ocGluZykge1xuICogICAgIHBpbmcoKTtcbiAqICAgfV0pO1xuICogYGBgXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRwcm92aWRlI3NlcnZpY2VcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFJlZ2lzdGVyIGEgKipzZXJ2aWNlIGNvbnN0cnVjdG9yKiosIHdoaWNoIHdpbGwgYmUgaW52b2tlZCB3aXRoIGBuZXdgIHRvIGNyZWF0ZSB0aGUgc2VydmljZVxuICogaW5zdGFuY2UuXG4gKiBUaGlzIGlzIHNob3J0IGZvciByZWdpc3RlcmluZyBhIHNlcnZpY2Ugd2hlcmUgaXRzIHByb3ZpZGVyJ3MgYCRnZXRgIHByb3BlcnR5IGlzIGEgZmFjdG9yeVxuICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGluc3RhbmNlIGluc3RhbnRpYXRlZCBieSB0aGUgaW5qZWN0b3IgZnJvbSB0aGUgc2VydmljZSBjb25zdHJ1Y3RvclxuICogZnVuY3Rpb24uXG4gKlxuICogSW50ZXJuYWxseSBpdCBsb29rcyBhIGJpdCBsaWtlIHRoaXM6XG4gKlxuICogYGBgXG4gKiB7XG4gKiAgICRnZXQ6IGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiAkaW5qZWN0b3IuaW5zdGFudGlhdGUoY29uc3RydWN0b3IpO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKlxuICogWW91IHNob3VsZCB1c2Uge0BsaW5rIGF1dG8uJHByb3ZpZGUjc2VydmljZSAkcHJvdmlkZS5zZXJ2aWNlKGNsYXNzKX0gaWYgeW91IGRlZmluZSB5b3VyIHNlcnZpY2VcbiAqIGFzIGEgdHlwZS9jbGFzcy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSBjb25zdHJ1Y3RvciBBbiBpbmplY3RhYmxlIGNsYXNzIChjb25zdHJ1Y3RvciBmdW5jdGlvbilcbiAqICAgICB0aGF0IHdpbGwgYmUgaW5zdGFudGlhdGVkLlxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBwcm92aWRlciBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlXG4gKiBIZXJlIGlzIGFuIGV4YW1wbGUgb2YgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlIHVzaW5nXG4gKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoY2xhc3MpfS5cbiAqIGBgYGpzXG4gKiAgIHZhciBQaW5nID0gZnVuY3Rpb24oJGh0dHApIHtcbiAqICAgICB0aGlzLiRodHRwID0gJGh0dHA7XG4gKiAgIH07XG4gKlxuICogICBQaW5nLiRpbmplY3QgPSBbJyRodHRwJ107XG4gKlxuICogICBQaW5nLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIHRoaXMuJGh0dHAuZ2V0KCcvcGluZycpO1xuICogICB9O1xuICogICAkcHJvdmlkZS5zZXJ2aWNlKCdwaW5nJywgUGluZyk7XG4gKiBgYGBcbiAqIFlvdSB3b3VsZCB0aGVuIGluamVjdCBhbmQgdXNlIHRoaXMgc2VydmljZSBsaWtlIHRoaXM6XG4gKiBgYGBqc1xuICogICBzb21lTW9kdWxlLmNvbnRyb2xsZXIoJ0N0cmwnLCBbJ3BpbmcnLCBmdW5jdGlvbihwaW5nKSB7XG4gKiAgICAgcGluZy5zZW5kKCk7XG4gKiAgIH1dKTtcbiAqIGBgYFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSN2YWx1ZVxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogUmVnaXN0ZXIgYSAqKnZhbHVlIHNlcnZpY2UqKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfSwgc3VjaCBhcyBhIHN0cmluZywgYVxuICogbnVtYmVyLCBhbiBhcnJheSwgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24uIFRoaXMgaXMgc2hvcnQgZm9yIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB3aGVyZSBpdHNcbiAqIHByb3ZpZGVyJ3MgYCRnZXRgIHByb3BlcnR5IGlzIGEgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHRha2VzIG5vIGFyZ3VtZW50cyBhbmQgcmV0dXJucyB0aGUgKip2YWx1ZVxuICogc2VydmljZSoqLiBUaGF0IGFsc28gbWVhbnMgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGluamVjdCBvdGhlciBzZXJ2aWNlcyBpbnRvIGEgdmFsdWUgc2VydmljZS5cbiAqXG4gKiBWYWx1ZSBzZXJ2aWNlcyBhcmUgc2ltaWxhciB0byBjb25zdGFudCBzZXJ2aWNlcywgZXhjZXB0IHRoYXQgdGhleSBjYW5ub3QgYmUgaW5qZWN0ZWQgaW50byBhXG4gKiBtb2R1bGUgY29uZmlndXJhdGlvbiBmdW5jdGlvbiAoc2VlIHtAbGluayBhbmd1bGFyLk1vZHVsZSNjb25maWd9KSBidXQgdGhleSBjYW4gYmUgb3ZlcnJpZGRlbiBieVxuICogYW4gQW5ndWxhckpTIHtAbGluayBhdXRvLiRwcm92aWRlI2RlY29yYXRvciBkZWNvcmF0b3J9LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlLlxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBwcm92aWRlciBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlXG4gKiBIZXJlIGFyZSBzb21lIGV4YW1wbGVzIG9mIGNyZWF0aW5nIHZhbHVlIHNlcnZpY2VzLlxuICogYGBganNcbiAqICAgJHByb3ZpZGUudmFsdWUoJ0FETUlOX1VTRVInLCAnYWRtaW4nKTtcbiAqXG4gKiAgICRwcm92aWRlLnZhbHVlKCdSb2xlTG9va3VwJywgeyBhZG1pbjogMCwgd3JpdGVyOiAxLCByZWFkZXI6IDIgfSk7XG4gKlxuICogICAkcHJvdmlkZS52YWx1ZSgnaGFsZk9mJywgZnVuY3Rpb24odmFsdWUpIHtcbiAqICAgICByZXR1cm4gdmFsdWUgLyAyO1xuICogICB9KTtcbiAqIGBgYFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSNjb25zdGFudFxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogUmVnaXN0ZXIgYSAqKmNvbnN0YW50IHNlcnZpY2UqKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfSwgc3VjaCBhcyBhIHN0cmluZyxcbiAqIGEgbnVtYmVyLCBhbiBhcnJheSwgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24uIExpa2UgdGhlIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlIHZhbHVlfSwgaXQgaXMgbm90XG4gKiBwb3NzaWJsZSB0byBpbmplY3Qgb3RoZXIgc2VydmljZXMgaW50byBhIGNvbnN0YW50LlxuICpcbiAqIEJ1dCB1bmxpa2Uge0BsaW5rIGF1dG8uJHByb3ZpZGUjdmFsdWUgdmFsdWV9LCBhIGNvbnN0YW50IGNhbiBiZVxuICogaW5qZWN0ZWQgaW50byBhIG1vZHVsZSBjb25maWd1cmF0aW9uIGZ1bmN0aW9uIChzZWUge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZ30pIGFuZCBpdCBjYW5ub3RcbiAqIGJlIG92ZXJyaWRkZW4gYnkgYW4gQW5ndWxhckpTIHtAbGluayBhdXRvLiRwcm92aWRlI2RlY29yYXRvciBkZWNvcmF0b3J9LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjb25zdGFudC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIGNvbnN0YW50IHZhbHVlLlxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlXG4gKiBIZXJlIGEgc29tZSBleGFtcGxlcyBvZiBjcmVhdGluZyBjb25zdGFudHM6XG4gKiBgYGBqc1xuICogICAkcHJvdmlkZS5jb25zdGFudCgnU0hBUkRfSEVJR0hUJywgMzA2KTtcbiAqXG4gKiAgICRwcm92aWRlLmNvbnN0YW50KCdNWV9DT0xPVVJTJywgWydyZWQnLCAnYmx1ZScsICdncmV5J10pO1xuICpcbiAqICAgJHByb3ZpZGUuY29uc3RhbnQoJ2RvdWJsZScsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gKiAgICAgcmV0dXJuIHZhbHVlICogMjtcbiAqICAgfSk7XG4gKiBgYGBcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJHByb3ZpZGUjZGVjb3JhdG9yXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqZGVjb3JhdG9yIGZ1bmN0aW9uKiogd2l0aCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIEEgZGVjb3JhdG9yIGZ1bmN0aW9uXG4gKiBpbnRlcmNlcHRzIHRoZSBjcmVhdGlvbiBvZiBhIHNlcnZpY2UsIGFsbG93aW5nIGl0IHRvIG92ZXJyaWRlIG9yIG1vZGlmeSB0aGUgYmVoYXZpb3Igb2YgdGhlXG4gKiBzZXJ2aWNlLiBUaGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBkZWNvcmF0b3IgZnVuY3Rpb24gbWF5IGJlIHRoZSBvcmlnaW5hbCBzZXJ2aWNlLCBvciBhIG5ldyBzZXJ2aWNlXG4gKiB0aGF0IHJlcGxhY2VzIChvciB3cmFwcyBhbmQgZGVsZWdhdGVzIHRvKSB0aGUgb3JpZ2luYWwgc2VydmljZS5cbiAqXG4gKiBZb3UgY2FuIGZpbmQgb3V0IG1vcmUgYWJvdXQgdXNpbmcgZGVjb3JhdG9ycyBpbiB0aGUge0BsaW5rIGd1aWRlL2RlY29yYXRvcnN9IGd1aWRlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIGRlY29yYXRlLlxuICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gZGVjb3JhdG9yIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIHNlcnZpY2UgbmVlZHMgdG8gYmVcbiAqICAgIHByb3ZpZGVkIGFuZCBzaG91bGQgcmV0dXJuIHRoZSBkZWNvcmF0ZWQgc2VydmljZSBpbnN0YW5jZS4gVGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCB1c2luZ1xuICogICAgdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciNpbnZva2UgaW5qZWN0b3IuaW52b2tlfSBtZXRob2QgYW5kIGlzIHRoZXJlZm9yZSBmdWxseSBpbmplY3RhYmxlLlxuICogICAgTG9jYWwgaW5qZWN0aW9uIGFyZ3VtZW50czpcbiAqXG4gKiAgICAqIGAkZGVsZWdhdGVgIC0gVGhlIG9yaWdpbmFsIHNlcnZpY2UgaW5zdGFuY2UsIHdoaWNoIGNhbiBiZSByZXBsYWNlZCwgbW9ua2V5IHBhdGNoZWQsIGNvbmZpZ3VyZWQsXG4gKiAgICAgIGRlY29yYXRlZCBvciBkZWxlZ2F0ZWQgdG8uXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgd2UgZGVjb3JhdGUgdGhlIHtAbGluayBuZy4kbG9nICRsb2d9IHNlcnZpY2UgdG8gY29udmVydCB3YXJuaW5ncyB0byBlcnJvcnMgYnkgaW50ZXJjZXB0aW5nXG4gKiBjYWxscyB0byB7QGxpbmsgbmcuJGxvZyNlcnJvciAkbG9nLndhcm4oKX0uXG4gKiBgYGBqc1xuICogICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRsb2cnLCBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSkge1xuICogICAgICRkZWxlZ2F0ZS53YXJuID0gJGRlbGVnYXRlLmVycm9yO1xuICogICAgIHJldHVybiAkZGVsZWdhdGU7XG4gKiAgIH1dKTtcbiAqIGBgYFxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlSW5qZWN0b3IobW9kdWxlc1RvTG9hZCwgc3RyaWN0RGkpIHtcbiAgc3RyaWN0RGkgPSAoc3RyaWN0RGkgPT09IHRydWUpO1xuICB2YXIgSU5TVEFOVElBVElORyA9IHt9LFxuICAgICAgcHJvdmlkZXJTdWZmaXggPSAnUHJvdmlkZXInLFxuICAgICAgcGF0aCA9IFtdLFxuICAgICAgbG9hZGVkTW9kdWxlcyA9IG5ldyBOZ01hcCgpLFxuICAgICAgcHJvdmlkZXJDYWNoZSA9IHtcbiAgICAgICAgJHByb3ZpZGU6IHtcbiAgICAgICAgICAgIHByb3ZpZGVyOiBzdXBwb3J0T2JqZWN0KHByb3ZpZGVyKSxcbiAgICAgICAgICAgIGZhY3Rvcnk6IHN1cHBvcnRPYmplY3QoZmFjdG9yeSksXG4gICAgICAgICAgICBzZXJ2aWNlOiBzdXBwb3J0T2JqZWN0KHNlcnZpY2UpLFxuICAgICAgICAgICAgdmFsdWU6IHN1cHBvcnRPYmplY3QodmFsdWUpLFxuICAgICAgICAgICAgY29uc3RhbnQ6IHN1cHBvcnRPYmplY3QoY29uc3RhbnQpLFxuICAgICAgICAgICAgZGVjb3JhdG9yOiBkZWNvcmF0b3JcbiAgICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJvdmlkZXJJbmplY3RvciA9IChwcm92aWRlckNhY2hlLiRpbmplY3RvciA9XG4gICAgICAgICAgY3JlYXRlSW50ZXJuYWxJbmplY3Rvcihwcm92aWRlckNhY2hlLCBmdW5jdGlvbihzZXJ2aWNlTmFtZSwgY2FsbGVyKSB7XG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc1N0cmluZyhjYWxsZXIpKSB7XG4gICAgICAgICAgICAgIHBhdGgucHVzaChjYWxsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCd1bnByJywgJ1Vua25vd24gcHJvdmlkZXI6IHswfScsIHBhdGguam9pbignIDwtICcpKTtcbiAgICAgICAgICB9KSksXG4gICAgICBpbnN0YW5jZUNhY2hlID0ge30sXG4gICAgICBwcm90b0luc3RhbmNlSW5qZWN0b3IgPVxuICAgICAgICAgIGNyZWF0ZUludGVybmFsSW5qZWN0b3IoaW5zdGFuY2VDYWNoZSwgZnVuY3Rpb24oc2VydmljZU5hbWUsIGNhbGxlcikge1xuICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gcHJvdmlkZXJJbmplY3Rvci5nZXQoc2VydmljZU5hbWUgKyBwcm92aWRlclN1ZmZpeCwgY2FsbGVyKTtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZUluamVjdG9yLmludm9rZShcbiAgICAgICAgICAgICAgICBwcm92aWRlci4kZ2V0LCBwcm92aWRlciwgdW5kZWZpbmVkLCBzZXJ2aWNlTmFtZSk7XG4gICAgICAgICAgfSksXG4gICAgICBpbnN0YW5jZUluamVjdG9yID0gcHJvdG9JbnN0YW5jZUluamVjdG9yO1xuXG4gIHByb3ZpZGVyQ2FjaGVbJyRpbmplY3RvcicgKyBwcm92aWRlclN1ZmZpeF0gPSB7ICRnZXQ6IHZhbHVlRm4ocHJvdG9JbnN0YW5jZUluamVjdG9yKSB9O1xuICBpbnN0YW5jZUluamVjdG9yLm1vZHVsZXMgPSBwcm92aWRlckluamVjdG9yLm1vZHVsZXMgPSBjcmVhdGVNYXAoKTtcbiAgdmFyIHJ1bkJsb2NrcyA9IGxvYWRNb2R1bGVzKG1vZHVsZXNUb0xvYWQpO1xuICBpbnN0YW5jZUluamVjdG9yID0gcHJvdG9JbnN0YW5jZUluamVjdG9yLmdldCgnJGluamVjdG9yJyk7XG4gIGluc3RhbmNlSW5qZWN0b3Iuc3RyaWN0RGkgPSBzdHJpY3REaTtcbiAgZm9yRWFjaChydW5CbG9ja3MsIGZ1bmN0aW9uKGZuKSB7IGlmIChmbikgaW5zdGFuY2VJbmplY3Rvci5pbnZva2UoZm4pOyB9KTtcblxuICBpbnN0YW5jZUluamVjdG9yLmxvYWROZXdNb2R1bGVzID0gZnVuY3Rpb24obW9kcykge1xuICAgIGZvckVhY2gobG9hZE1vZHVsZXMobW9kcyksIGZ1bmN0aW9uKGZuKSB7IGlmIChmbikgaW5zdGFuY2VJbmplY3Rvci5pbnZva2UoZm4pOyB9KTtcbiAgfTtcblxuXG4gIHJldHVybiBpbnN0YW5jZUluamVjdG9yO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyAkcHJvdmlkZXJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZnVuY3Rpb24gc3VwcG9ydE9iamVjdChkZWxlZ2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICBpZiAoaXNPYmplY3Qoa2V5KSkge1xuICAgICAgICBmb3JFYWNoKGtleSwgcmV2ZXJzZVBhcmFtcyhkZWxlZ2F0ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlbGVnYXRlKGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBwcm92aWRlcihuYW1lLCBwcm92aWRlcl8pIHtcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnc2VydmljZScpO1xuICAgIGlmIChpc0Z1bmN0aW9uKHByb3ZpZGVyXykgfHwgaXNBcnJheShwcm92aWRlcl8pKSB7XG4gICAgICBwcm92aWRlcl8gPSBwcm92aWRlckluamVjdG9yLmluc3RhbnRpYXRlKHByb3ZpZGVyXyk7XG4gICAgfVxuICAgIGlmICghcHJvdmlkZXJfLiRnZXQpIHtcbiAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycigncGdldCcsICdQcm92aWRlciBcXCd7MH1cXCcgbXVzdCBkZWZpbmUgJGdldCBmYWN0b3J5IG1ldGhvZC4nLCBuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIChwcm92aWRlckNhY2hlW25hbWUgKyBwcm92aWRlclN1ZmZpeF0gPSBwcm92aWRlcl8pO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5mb3JjZVJldHVyblZhbHVlKG5hbWUsIGZhY3RvcnkpIHtcbiAgICByZXR1cm4gLyoqIEB0aGlzICovIGZ1bmN0aW9uIGVuZm9yY2VkUmV0dXJuVmFsdWUoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gaW5zdGFuY2VJbmplY3Rvci5pbnZva2UoZmFjdG9yeSwgdGhpcyk7XG4gICAgICBpZiAoaXNVbmRlZmluZWQocmVzdWx0KSkge1xuICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3VuZGVmJywgJ1Byb3ZpZGVyIFxcJ3swfVxcJyBtdXN0IHJldHVybiBhIHZhbHVlIGZyb20gJGdldCBmYWN0b3J5IG1ldGhvZC4nLCBuYW1lKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZhY3RvcnkobmFtZSwgZmFjdG9yeUZuLCBlbmZvcmNlKSB7XG4gICAgcmV0dXJuIHByb3ZpZGVyKG5hbWUsIHtcbiAgICAgICRnZXQ6IGVuZm9yY2UgIT09IGZhbHNlID8gZW5mb3JjZVJldHVyblZhbHVlKG5hbWUsIGZhY3RvcnlGbikgOiBmYWN0b3J5Rm5cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlcnZpY2UobmFtZSwgY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gZmFjdG9yeShuYW1lLCBbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuICAgICAgcmV0dXJuICRpbmplY3Rvci5pbnN0YW50aWF0ZShjb25zdHJ1Y3Rvcik7XG4gICAgfV0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdmFsdWUobmFtZSwgdmFsKSB7IHJldHVybiBmYWN0b3J5KG5hbWUsIHZhbHVlRm4odmFsKSwgZmFsc2UpOyB9XG5cbiAgZnVuY3Rpb24gY29uc3RhbnQobmFtZSwgdmFsdWUpIHtcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnY29uc3RhbnQnKTtcbiAgICBwcm92aWRlckNhY2hlW25hbWVdID0gdmFsdWU7XG4gICAgaW5zdGFuY2VDYWNoZVtuYW1lXSA9IHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVjb3JhdG9yKHNlcnZpY2VOYW1lLCBkZWNvckZuKSB7XG4gICAgdmFyIG9yaWdQcm92aWRlciA9IHByb3ZpZGVySW5qZWN0b3IuZ2V0KHNlcnZpY2VOYW1lICsgcHJvdmlkZXJTdWZmaXgpLFxuICAgICAgICBvcmlnJGdldCA9IG9yaWdQcm92aWRlci4kZ2V0O1xuXG4gICAgb3JpZ1Byb3ZpZGVyLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvcmlnSW5zdGFuY2UgPSBpbnN0YW5jZUluamVjdG9yLmludm9rZShvcmlnJGdldCwgb3JpZ1Byb3ZpZGVyKTtcbiAgICAgIHJldHVybiBpbnN0YW5jZUluamVjdG9yLmludm9rZShkZWNvckZuLCBudWxsLCB7JGRlbGVnYXRlOiBvcmlnSW5zdGFuY2V9KTtcbiAgICB9O1xuICB9XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIE1vZHVsZSBMb2FkaW5nXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBmdW5jdGlvbiBsb2FkTW9kdWxlcyhtb2R1bGVzVG9Mb2FkKSB7XG4gICAgYXNzZXJ0QXJnKGlzVW5kZWZpbmVkKG1vZHVsZXNUb0xvYWQpIHx8IGlzQXJyYXkobW9kdWxlc1RvTG9hZCksICdtb2R1bGVzVG9Mb2FkJywgJ25vdCBhbiBhcnJheScpO1xuICAgIHZhciBydW5CbG9ja3MgPSBbXSwgbW9kdWxlRm47XG4gICAgZm9yRWFjaChtb2R1bGVzVG9Mb2FkLCBmdW5jdGlvbihtb2R1bGUpIHtcbiAgICAgIGlmIChsb2FkZWRNb2R1bGVzLmdldChtb2R1bGUpKSByZXR1cm47XG4gICAgICBsb2FkZWRNb2R1bGVzLnNldChtb2R1bGUsIHRydWUpO1xuXG4gICAgICBmdW5jdGlvbiBydW5JbnZva2VRdWV1ZShxdWV1ZSkge1xuICAgICAgICB2YXIgaSwgaWk7XG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gcXVldWUubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIHZhciBpbnZva2VBcmdzID0gcXVldWVbaV0sXG4gICAgICAgICAgICAgIHByb3ZpZGVyID0gcHJvdmlkZXJJbmplY3Rvci5nZXQoaW52b2tlQXJnc1swXSk7XG5cbiAgICAgICAgICBwcm92aWRlcltpbnZva2VBcmdzWzFdXS5hcHBseShwcm92aWRlciwgaW52b2tlQXJnc1syXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGlzU3RyaW5nKG1vZHVsZSkpIHtcbiAgICAgICAgICBtb2R1bGVGbiA9IGFuZ3VsYXJNb2R1bGUobW9kdWxlKTtcbiAgICAgICAgICBpbnN0YW5jZUluamVjdG9yLm1vZHVsZXNbbW9kdWxlXSA9IG1vZHVsZUZuO1xuICAgICAgICAgIHJ1bkJsb2NrcyA9IHJ1bkJsb2Nrcy5jb25jYXQobG9hZE1vZHVsZXMobW9kdWxlRm4ucmVxdWlyZXMpKS5jb25jYXQobW9kdWxlRm4uX3J1bkJsb2Nrcyk7XG4gICAgICAgICAgcnVuSW52b2tlUXVldWUobW9kdWxlRm4uX2ludm9rZVF1ZXVlKTtcbiAgICAgICAgICBydW5JbnZva2VRdWV1ZShtb2R1bGVGbi5fY29uZmlnQmxvY2tzKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKG1vZHVsZSkpIHtcbiAgICAgICAgICAgIHJ1bkJsb2Nrcy5wdXNoKHByb3ZpZGVySW5qZWN0b3IuaW52b2tlKG1vZHVsZSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkobW9kdWxlKSkge1xuICAgICAgICAgICAgcnVuQmxvY2tzLnB1c2gocHJvdmlkZXJJbmplY3Rvci5pbnZva2UobW9kdWxlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXNzZXJ0QXJnRm4obW9kdWxlLCAnbW9kdWxlJyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkobW9kdWxlKSkge1xuICAgICAgICAgIG1vZHVsZSA9IG1vZHVsZVttb2R1bGUubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUubWVzc2FnZSAmJiBlLnN0YWNrICYmIGUuc3RhY2suaW5kZXhPZihlLm1lc3NhZ2UpID09PSAtMSkge1xuICAgICAgICAgIC8vIFNhZmFyaSAmIEZGJ3Mgc3RhY2sgdHJhY2VzIGRvbid0IGNvbnRhaW4gZXJyb3IubWVzc2FnZSBjb250ZW50XG4gICAgICAgICAgLy8gdW5saWtlIHRob3NlIG9mIENocm9tZSBhbmQgSUVcbiAgICAgICAgICAvLyBTbyBpZiBzdGFjayBkb2Vzbid0IGNvbnRhaW4gbWVzc2FnZSwgd2UgY3JlYXRlIGEgbmV3IHN0cmluZyB0aGF0IGNvbnRhaW5zIGJvdGguXG4gICAgICAgICAgLy8gU2luY2UgZXJyb3Iuc3RhY2sgaXMgcmVhZC1vbmx5IGluIFNhZmFyaSwgSSdtIG92ZXJyaWRpbmcgZSBhbmQgbm90IGUuc3RhY2sgaGVyZS5cbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXgtYXNzaWduXG4gICAgICAgICAgZSA9IGUubWVzc2FnZSArICdcXG4nICsgZS5zdGFjaztcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ21vZHVsZXJyJywgJ0ZhaWxlZCB0byBpbnN0YW50aWF0ZSBtb2R1bGUgezB9IGR1ZSB0bzpcXG57MX0nLFxuICAgICAgICAgICAgICAgICAgbW9kdWxlLCBlLnN0YWNrIHx8IGUubWVzc2FnZSB8fCBlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcnVuQmxvY2tzO1xuICB9XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIGludGVybmFsIEluamVjdG9yXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUludGVybmFsSW5qZWN0b3IoY2FjaGUsIGZhY3RvcnkpIHtcblxuICAgIGZ1bmN0aW9uIGdldFNlcnZpY2Uoc2VydmljZU5hbWUsIGNhbGxlcikge1xuICAgICAgaWYgKGNhY2hlLmhhc093blByb3BlcnR5KHNlcnZpY2VOYW1lKSkge1xuICAgICAgICBpZiAoY2FjaGVbc2VydmljZU5hbWVdID09PSBJTlNUQU5USUFUSU5HKSB7XG4gICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdjZGVwJywgJ0NpcmN1bGFyIGRlcGVuZGVuY3kgZm91bmQ6IHswfScsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2VOYW1lICsgJyA8LSAnICsgcGF0aC5qb2luKCcgPC0gJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWNoZVtzZXJ2aWNlTmFtZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHBhdGgudW5zaGlmdChzZXJ2aWNlTmFtZSk7XG4gICAgICAgICAgY2FjaGVbc2VydmljZU5hbWVdID0gSU5TVEFOVElBVElORztcbiAgICAgICAgICBjYWNoZVtzZXJ2aWNlTmFtZV0gPSBmYWN0b3J5KHNlcnZpY2VOYW1lLCBjYWxsZXIpO1xuICAgICAgICAgIHJldHVybiBjYWNoZVtzZXJ2aWNlTmFtZV07XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGlmIChjYWNoZVtzZXJ2aWNlTmFtZV0gPT09IElOU1RBTlRJQVRJTkcpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBjYWNoZVtzZXJ2aWNlTmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBwYXRoLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGluamVjdGlvbkFyZ3MoZm4sIGxvY2Fscywgc2VydmljZU5hbWUpIHtcbiAgICAgIHZhciBhcmdzID0gW10sXG4gICAgICAgICAgJGluamVjdCA9IGNyZWF0ZUluamVjdG9yLiQkYW5ub3RhdGUoZm4sIHN0cmljdERpLCBzZXJ2aWNlTmFtZSk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSAkaW5qZWN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBrZXkgPSAkaW5qZWN0W2ldO1xuICAgICAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2l0a24nLFxuICAgICAgICAgICAgICAgICAgJ0luY29ycmVjdCBpbmplY3Rpb24gdG9rZW4hIEV4cGVjdGVkIHNlcnZpY2UgbmFtZSBhcyBzdHJpbmcsIGdvdCB7MH0nLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGFyZ3MucHVzaChsb2NhbHMgJiYgbG9jYWxzLmhhc093blByb3BlcnR5KGtleSkgPyBsb2NhbHNba2V5XSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRTZXJ2aWNlKGtleSwgc2VydmljZU5hbWUpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcmdzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQ2xhc3MoZnVuYykge1xuICAgICAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG4gICAgICAvLyBJRSA5LTExIGRvIG5vdCBzdXBwb3J0IGNsYXNzZXMgYW5kIElFOSBsZWFrcyB3aXRoIHRoZSBjb2RlIGJlbG93LlxuICAgICAgaWYgKG1zaWUgfHwgdHlwZW9mIGZ1bmMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMuJCRuZ0lzQ2xhc3M7XG4gICAgICBpZiAoIWlzQm9vbGVhbihyZXN1bHQpKSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuJCRuZ0lzQ2xhc3MgPSAvXmNsYXNzXFxiLy50ZXN0KHN0cmluZ2lmeUZuKGZ1bmMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW52b2tlKGZuLCBzZWxmLCBsb2NhbHMsIHNlcnZpY2VOYW1lKSB7XG4gICAgICBpZiAodHlwZW9mIGxvY2FscyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2VydmljZU5hbWUgPSBsb2NhbHM7XG4gICAgICAgIGxvY2FscyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBhcmdzID0gaW5qZWN0aW9uQXJncyhmbiwgbG9jYWxzLCBzZXJ2aWNlTmFtZSk7XG4gICAgICBpZiAoaXNBcnJheShmbikpIHtcbiAgICAgICAgZm4gPSBmbltmbi5sZW5ndGggLSAxXTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc0NsYXNzKGZuKSkge1xuICAgICAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9hbmd1bGFyanMtaW52b2tlLWFwcGx5LXZzLXN3aXRjaFxuICAgICAgICAvLyAjNTM4OFxuICAgICAgICByZXR1cm4gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmdzLnVuc2hpZnQobnVsbCk7XG4gICAgICAgIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KGZuLCBhcmdzKSkoKTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGluc3RhbnRpYXRlKFR5cGUsIGxvY2Fscywgc2VydmljZU5hbWUpIHtcbiAgICAgIC8vIENoZWNrIGlmIFR5cGUgaXMgYW5ub3RhdGVkIGFuZCB1c2UganVzdCB0aGUgZ2l2ZW4gZnVuY3Rpb24gYXQgbi0xIGFzIHBhcmFtZXRlclxuICAgICAgLy8gZS5nLiBzb21lTW9kdWxlLmZhY3RvcnkoJ2dyZWV0ZXInLCBbJyR3aW5kb3cnLCBmdW5jdGlvbihyZW5hbWVkJHdpbmRvdykge31dKTtcbiAgICAgIHZhciBjdG9yID0gKGlzQXJyYXkoVHlwZSkgPyBUeXBlW1R5cGUubGVuZ3RoIC0gMV0gOiBUeXBlKTtcbiAgICAgIHZhciBhcmdzID0gaW5qZWN0aW9uQXJncyhUeXBlLCBsb2NhbHMsIHNlcnZpY2VOYW1lKTtcbiAgICAgIC8vIEVtcHR5IG9iamVjdCBhdCBwb3NpdGlvbiAwIGlzIGlnbm9yZWQgZm9yIGludm9jYXRpb24gd2l0aCBgbmV3YCwgYnV0IHJlcXVpcmVkLlxuICAgICAgYXJncy51bnNoaWZ0KG51bGwpO1xuICAgICAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoY3RvciwgYXJncykpKCk7XG4gICAgfVxuXG5cbiAgICByZXR1cm4ge1xuICAgICAgaW52b2tlOiBpbnZva2UsXG4gICAgICBpbnN0YW50aWF0ZTogaW5zdGFudGlhdGUsXG4gICAgICBnZXQ6IGdldFNlcnZpY2UsXG4gICAgICBhbm5vdGF0ZTogY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSxcbiAgICAgIGhhczogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gcHJvdmlkZXJDYWNoZS5oYXNPd25Qcm9wZXJ0eShuYW1lICsgcHJvdmlkZXJTdWZmaXgpIHx8IGNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxuY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSA9IGFubm90YXRlO1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGFuY2hvclNjcm9sbFByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIGAkYW5jaG9yU2Nyb2xsUHJvdmlkZXJgIHRvIGRpc2FibGUgYXV0b21hdGljIHNjcm9sbGluZyB3aGVuZXZlclxuICoge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGNoYW5nZXMuXG4gKi9cbmZ1bmN0aW9uICRBbmNob3JTY3JvbGxQcm92aWRlcigpIHtcblxuICB2YXIgYXV0b1Njcm9sbGluZ0VuYWJsZWQgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRhbmNob3JTY3JvbGxQcm92aWRlciNkaXNhYmxlQXV0b1Njcm9sbGluZ1xuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnkgZGVmYXVsdCwge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwgJGFuY2hvclNjcm9sbCgpfSB3aWxsIGF1dG9tYXRpY2FsbHkgZGV0ZWN0IGNoYW5nZXMgdG9cbiAgICoge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGFuZCBzY3JvbGwgdG8gdGhlIGVsZW1lbnQgbWF0Y2hpbmcgdGhlIG5ldyBoYXNoLjxiciAvPlxuICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZGlzYWJsZSBhdXRvbWF0aWMgc2Nyb2xsaW5nLlxuICAgKlxuICAgKiBJZiBhdXRvbWF0aWMgc2Nyb2xsaW5nIGlzIGRpc2FibGVkLCBvbmUgbXVzdCBleHBsaWNpdGx5IGNhbGxcbiAgICoge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwgJGFuY2hvclNjcm9sbCgpfSBpbiBvcmRlciB0byBzY3JvbGwgdG8gdGhlIGVsZW1lbnQgcmVsYXRlZCB0byB0aGVcbiAgICogY3VycmVudCBoYXNoLlxuICAgKi9cbiAgdGhpcy5kaXNhYmxlQXV0b1Njcm9sbGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIGF1dG9TY3JvbGxpbmdFbmFibGVkID0gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAqIEBuYW1lICRhbmNob3JTY3JvbGxcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICogQHJlcXVpcmVzICR3aW5kb3dcbiAgICogQHJlcXVpcmVzICRsb2NhdGlvblxuICAgKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogV2hlbiBjYWxsZWQsIGl0IHNjcm9sbHMgdG8gdGhlIGVsZW1lbnQgcmVsYXRlZCB0byB0aGUgc3BlY2lmaWVkIGBoYXNoYCBvciAoaWYgb21pdHRlZCkgdG8gdGhlXG4gICAqIGN1cnJlbnQgdmFsdWUgb2Yge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9LCBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIHNwZWNpZmllZFxuICAgKiBpbiB0aGVcbiAgICogW0hUTUw1IHNwZWNdKGh0dHA6Ly93d3cudzMub3JnL2h0bWwvd2cvZHJhZnRzL2h0bWwvbWFzdGVyL2Jyb3dzZXJzLmh0bWwjYW4taW5kaWNhdGVkLXBhcnQtb2YtdGhlLWRvY3VtZW50KS5cbiAgICpcbiAgICogSXQgYWxzbyB3YXRjaGVzIHRoZSB7QGxpbmsgbmcuJGxvY2F0aW9uI2hhc2ggJGxvY2F0aW9uLmhhc2goKX0gYW5kIGF1dG9tYXRpY2FsbHkgc2Nyb2xscyB0b1xuICAgKiBtYXRjaCBhbnkgYW5jaG9yIHdoZW5ldmVyIGl0IGNoYW5nZXMuIFRoaXMgY2FuIGJlIGRpc2FibGVkIGJ5IGNhbGxpbmdcbiAgICoge0BsaW5rIG5nLiRhbmNob3JTY3JvbGxQcm92aWRlciNkaXNhYmxlQXV0b1Njcm9sbGluZyAkYW5jaG9yU2Nyb2xsUHJvdmlkZXIuZGlzYWJsZUF1dG9TY3JvbGxpbmcoKX0uXG4gICAqXG4gICAqIEFkZGl0aW9uYWxseSwgeW91IGNhbiB1c2UgaXRzIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsI3lPZmZzZXQgeU9mZnNldH0gcHJvcGVydHkgdG8gc3BlY2lmeSBhXG4gICAqIHZlcnRpY2FsIHNjcm9sbC1vZmZzZXQgKGVpdGhlciBmaXhlZCBvciBkeW5hbWljKS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBoYXNoIFRoZSBoYXNoIHNwZWNpZnlpbmcgdGhlIGVsZW1lbnQgdG8gc2Nyb2xsIHRvLiBJZiBvbWl0dGVkLCB0aGUgdmFsdWUgb2ZcbiAgICogICAgICAgICAgICAgICAgICAgICAgIHtAbGluayBuZy4kbG9jYXRpb24jaGFzaCAkbG9jYXRpb24uaGFzaCgpfSB3aWxsIGJlIHVzZWQuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7KG51bWJlcnxmdW5jdGlvbnxqcUxpdGUpfSB5T2Zmc2V0XG4gICAqIElmIHNldCwgc3BlY2lmaWVzIGEgdmVydGljYWwgc2Nyb2xsLW9mZnNldC4gVGhpcyBpcyBvZnRlbiB1c2VmdWwgd2hlbiB0aGVyZSBhcmUgZml4ZWRcbiAgICogcG9zaXRpb25lZCBlbGVtZW50cyBhdCB0aGUgdG9wIG9mIHRoZSBwYWdlLCBzdWNoIGFzIG5hdmJhcnMsIGhlYWRlcnMgZXRjLlxuICAgKlxuICAgKiBgeU9mZnNldGAgY2FuIGJlIHNwZWNpZmllZCBpbiB2YXJpb3VzIHdheXM6XG4gICAqIC0gKipudW1iZXIqKjogQSBmaXhlZCBudW1iZXIgb2YgcGl4ZWxzIHRvIGJlIHVzZWQgYXMgb2Zmc2V0LjxiciAvPjxiciAvPlxuICAgKiAtICoqZnVuY3Rpb24qKjogQSBnZXR0ZXIgZnVuY3Rpb24gY2FsbGVkIGV2ZXJ5dGltZSBgJGFuY2hvclNjcm9sbCgpYCBpcyBleGVjdXRlZC4gTXVzdCByZXR1cm5cbiAgICogICBhIG51bWJlciByZXByZXNlbnRpbmcgdGhlIG9mZnNldCAoaW4gcGl4ZWxzKS48YnIgLz48YnIgLz5cbiAgICogLSAqKmpxTGl0ZSoqOiBBIGpxTGl0ZS9qUXVlcnkgZWxlbWVudCB0byBiZSB1c2VkIGZvciBzcGVjaWZ5aW5nIHRoZSBvZmZzZXQuIFRoZSBkaXN0YW5jZSBmcm9tXG4gICAqICAgdGhlIHRvcCBvZiB0aGUgcGFnZSB0byB0aGUgZWxlbWVudCdzIGJvdHRvbSB3aWxsIGJlIHVzZWQgYXMgb2Zmc2V0LjxiciAvPlxuICAgKiAgICoqTm90ZSoqOiBUaGUgZWxlbWVudCB3aWxsIGJlIHRha2VuIGludG8gYWNjb3VudCBvbmx5IGFzIGxvbmcgYXMgaXRzIGBwb3NpdGlvbmAgaXMgc2V0IHRvXG4gICAqICAgYGZpeGVkYC4gVGhpcyBvcHRpb24gaXMgdXNlZnVsLCB3aGVuIGRlYWxpbmcgd2l0aCByZXNwb25zaXZlIG5hdmJhcnMvaGVhZGVycyB0aGF0IGFkanVzdFxuICAgKiAgIHRoZWlyIGhlaWdodCBhbmQvb3IgcG9zaXRpb25pbmcgYWNjb3JkaW5nIHRvIHRoZSB2aWV3cG9ydCdzIHNpemUuXG4gICAqXG4gICAqIDxiciAvPlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiBJbiBvcmRlciBmb3IgYHlPZmZzZXRgIHRvIHdvcmsgcHJvcGVybHksIHNjcm9sbGluZyBzaG91bGQgdGFrZSBwbGFjZSBvbiB0aGUgZG9jdW1lbnQncyByb290IGFuZFxuICAgKiBub3Qgc29tZSBjaGlsZCBlbGVtZW50LlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgPGV4YW1wbGUgbW9kdWxlPVwiYW5jaG9yU2Nyb2xsRXhhbXBsZVwiIG5hbWU9XCJhbmNob3Itc2Nyb2xsXCI+XG4gICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxkaXYgaWQ9XCJzY3JvbGxBcmVhXCIgbmctY29udHJvbGxlcj1cIlNjcm9sbENvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgPGEgbmctY2xpY2s9XCJnb3RvQm90dG9tKClcIj5HbyB0byBib3R0b208L2E+XG4gICAgICAgICAgIDxhIGlkPVwiYm90dG9tXCI+PC9hPiBZb3UncmUgYXQgdGhlIGJvdHRvbSFcbiAgICAgICAgIDwvZGl2PlxuICAgICAgIDwvZmlsZT5cbiAgICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnYW5jaG9yU2Nyb2xsRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignU2Nyb2xsQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICckYW5jaG9yU2Nyb2xsJyxcbiAgICAgICAgICAgICBmdW5jdGlvbigkc2NvcGUsICRsb2NhdGlvbiwgJGFuY2hvclNjcm9sbCkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmdvdG9Cb3R0b20gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBsb2NhdGlvbi5oYXNoIHRvIHRoZSBpZCBvZlxuICAgICAgICAgICAgICAgICAvLyB0aGUgZWxlbWVudCB5b3Ugd2lzaCB0byBzY3JvbGwgdG8uXG4gICAgICAgICAgICAgICAgICRsb2NhdGlvbi5oYXNoKCdib3R0b20nKTtcblxuICAgICAgICAgICAgICAgICAvLyBjYWxsICRhbmNob3JTY3JvbGwoKVxuICAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgICAgI3Njcm9sbEFyZWEge1xuICAgICAgICAgICBoZWlnaHQ6IDI4MHB4O1xuICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgIH1cblxuICAgICAgICAgI2JvdHRvbSB7XG4gICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICBtYXJnaW4tdG9wOiAyMDAwcHg7XG4gICAgICAgICB9XG4gICAgICAgPC9maWxlPlxuICAgICA8L2V4YW1wbGU+XG4gICAqXG4gICAqIDxociAvPlxuICAgKiBUaGUgZXhhbXBsZSBiZWxvdyBpbGx1c3RyYXRlcyB0aGUgdXNlIG9mIGEgdmVydGljYWwgc2Nyb2xsLW9mZnNldCAoc3BlY2lmaWVkIGFzIGEgZml4ZWQgdmFsdWUpLlxuICAgKiBTZWUge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwjeU9mZnNldCAkYW5jaG9yU2Nyb2xsLnlPZmZzZXR9IGZvciBtb3JlIGRldGFpbHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgIDxleGFtcGxlIG1vZHVsZT1cImFuY2hvclNjcm9sbE9mZnNldEV4YW1wbGVcIiBuYW1lPVwiYW5jaG9yLXNjcm9sbC1vZmZzZXRcIj5cbiAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cImZpeGVkLWhlYWRlclwiIG5nLWNvbnRyb2xsZXI9XCJoZWFkZXJDdHJsXCI+XG4gICAgICAgICAgIDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cImdvdG9BbmNob3IoeClcIiBuZy1yZXBlYXQ9XCJ4IGluIFsxLDIsMyw0LDVdXCI+XG4gICAgICAgICAgICAgR28gdG8gYW5jaG9yIHt7eH19XG4gICAgICAgICAgIDwvYT5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGRpdiBpZD1cImFuY2hvcnt7eH19XCIgY2xhc3M9XCJhbmNob3JcIiBuZy1yZXBlYXQ9XCJ4IGluIFsxLDIsMyw0LDVdXCI+XG4gICAgICAgICAgIEFuY2hvciB7e3h9fSBvZiA1XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2FuY2hvclNjcm9sbE9mZnNldEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLnJ1bihbJyRhbmNob3JTY3JvbGwnLCBmdW5jdGlvbigkYW5jaG9yU2Nyb2xsKSB7XG4gICAgICAgICAgICAgJGFuY2hvclNjcm9sbC55T2Zmc2V0ID0gNTA7ICAgLy8gYWx3YXlzIHNjcm9sbCBieSA1MCBleHRyYSBwaXhlbHNcbiAgICAgICAgICAgfV0pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdoZWFkZXJDdHJsJywgWyckYW5jaG9yU2Nyb2xsJywgJyRsb2NhdGlvbicsICckc2NvcGUnLFxuICAgICAgICAgICAgIGZ1bmN0aW9uKCRhbmNob3JTY3JvbGwsICRsb2NhdGlvbiwgJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAkc2NvcGUuZ290b0FuY2hvciA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICAgdmFyIG5ld0hhc2ggPSAnYW5jaG9yJyArIHg7XG4gICAgICAgICAgICAgICAgIGlmICgkbG9jYXRpb24uaGFzaCgpICE9PSBuZXdIYXNoKSB7XG4gICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSAkbG9jYXRpb24uaGFzaCB0byBgbmV3SGFzaGAgYW5kXG4gICAgICAgICAgICAgICAgICAgLy8gJGFuY2hvclNjcm9sbCB3aWxsIGF1dG9tYXRpY2FsbHkgc2Nyb2xsIHRvIGl0XG4gICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLmhhc2goJ2FuY2hvcicgKyB4KTtcbiAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAvLyBjYWxsICRhbmNob3JTY3JvbGwoKSBleHBsaWNpdGx5LFxuICAgICAgICAgICAgICAgICAgIC8vIHNpbmNlICRsb2NhdGlvbi5oYXNoIGhhc24ndCBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgXSk7XG4gICAgICAgPC9maWxlPlxuICAgICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAgIGJvZHkge1xuICAgICAgICAgICBwYWRkaW5nLXRvcDogNTBweDtcbiAgICAgICAgIH1cblxuICAgICAgICAgLmFuY2hvciB7XG4gICAgICAgICAgIGJvcmRlcjogMnB4IGRhc2hlZCBEYXJrT3JjaGlkO1xuICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDEwcHggMjAwcHggMTBweDtcbiAgICAgICAgIH1cblxuICAgICAgICAgLmZpeGVkLWhlYWRlciB7XG4gICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgICAgICAgaGVpZ2h0OiA1MHB4O1xuICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgIHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7XG4gICAgICAgICB9XG5cbiAgICAgICAgIC5maXhlZC1oZWFkZXIgPiBhIHtcbiAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICBtYXJnaW46IDVweCAxNXB4O1xuICAgICAgICAgfVxuICAgICAgIDwvZmlsZT5cbiAgICAgPC9leGFtcGxlPlxuICAgKi9cbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHdpbmRvdywgJGxvY2F0aW9uLCAkcm9vdFNjb3BlKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gJHdpbmRvdy5kb2N1bWVudDtcblxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZmlyc3QgYW5jaG9yIGZyb20gYSBOb2RlTGlzdFxuICAgIC8vICh1c2luZyBgQXJyYXkjc29tZSgpYCBpbnN0ZWFkIG9mIGBhbmd1bGFyI2ZvckVhY2goKWAgc2luY2UgaXQncyBtb3JlIHBlcmZvcm1hbnRcbiAgICAvLyAgYW5kIHdvcmtpbmcgaW4gYWxsIHN1cHBvcnRlZCBicm93c2Vycy4pXG4gICAgZnVuY3Rpb24gZ2V0Rmlyc3RBbmNob3IobGlzdCkge1xuICAgICAgdmFyIHJlc3VsdCA9IG51bGw7XG4gICAgICBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGxpc3QsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKG5vZGVOYW1lXyhlbGVtZW50KSA9PT0gJ2EnKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZWxlbWVudDtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFlPZmZzZXQoKSB7XG5cbiAgICAgIHZhciBvZmZzZXQgPSBzY3JvbGwueU9mZnNldDtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24ob2Zmc2V0KSkge1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQoKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50KG9mZnNldCkpIHtcbiAgICAgICAgdmFyIGVsZW0gPSBvZmZzZXRbMF07XG4gICAgICAgIHZhciBzdHlsZSA9ICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTtcbiAgICAgICAgaWYgKHN0eWxlLnBvc2l0aW9uICE9PSAnZml4ZWQnKSB7XG4gICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghaXNOdW1iZXIob2Zmc2V0KSkge1xuICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvKGVsZW0pIHtcbiAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgIGVsZW0uc2Nyb2xsSW50b1ZpZXcoKTtcblxuICAgICAgICB2YXIgb2Zmc2V0ID0gZ2V0WU9mZnNldCgpO1xuXG4gICAgICAgIGlmIChvZmZzZXQpIHtcbiAgICAgICAgICAvLyBgb2Zmc2V0YCBpcyB0aGUgbnVtYmVyIG9mIHBpeGVscyB3ZSBzaG91bGQgc2Nyb2xsIFVQIGluIG9yZGVyIHRvIGFsaWduIGBlbGVtYCBwcm9wZXJseS5cbiAgICAgICAgICAvLyBUaGlzIGlzIHRydWUgT05MWSBpZiB0aGUgY2FsbCB0byBgZWxlbS5zY3JvbGxJbnRvVmlldygpYCBpbml0aWFsbHkgYWxpZ25zIGBlbGVtYCBhdCB0aGVcbiAgICAgICAgICAvLyB0b3Agb2YgdGhlIHZpZXdwb3J0LlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gSUYgdGhlIG51bWJlciBvZiBwaXhlbHMgZnJvbSB0aGUgdG9wIG9mIGBlbGVtYCB0byB0aGUgZW5kIG9mIHRoZSBwYWdlJ3MgY29udGVudCBpcyBsZXNzXG4gICAgICAgICAgLy8gdGhhbiB0aGUgaGVpZ2h0IG9mIHRoZSB2aWV3cG9ydCwgdGhlbiBgZWxlbS5zY3JvbGxJbnRvVmlldygpYCB3aWxsIGFsaWduIHRoZSBgZWxlbWAgc29tZVxuICAgICAgICAgIC8vIHdheSBkb3duIHRoZSBwYWdlLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gVGhpcyBpcyBvZnRlbiB0aGUgY2FzZSBmb3IgZWxlbWVudHMgbmVhciB0aGUgYm90dG9tIG9mIHRoZSBwYWdlLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gSW4gc3VjaCBjYXNlcyB3ZSBkbyBub3QgbmVlZCB0byBzY3JvbGwgdGhlIHdob2xlIGBvZmZzZXRgIHVwLCBqdXN0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW5cbiAgICAgICAgICAvLyB0aGUgdG9wIG9mIHRoZSBlbGVtZW50IGFuZCB0aGUgb2Zmc2V0LCB3aGljaCBpcyBlbm91Z2ggdG8gYWxpZ24gdGhlIHRvcCBvZiBgZWxlbWAgYXQgdGhlXG4gICAgICAgICAgLy8gZGVzaXJlZCBwb3NpdGlvbi5cbiAgICAgICAgICB2YXIgZWxlbVRvcCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICR3aW5kb3cuc2Nyb2xsQnkoMCwgZWxlbVRvcCAtIG9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2Nyb2xsKGhhc2gpIHtcbiAgICAgIC8vIEFsbG93IG51bWVyaWMgaGFzaGVzXG4gICAgICBoYXNoID0gaXNTdHJpbmcoaGFzaCkgPyBoYXNoIDogaXNOdW1iZXIoaGFzaCkgPyBoYXNoLnRvU3RyaW5nKCkgOiAkbG9jYXRpb24uaGFzaCgpO1xuICAgICAgdmFyIGVsbTtcblxuICAgICAgLy8gZW1wdHkgaGFzaCwgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAgICAgIGlmICghaGFzaCkgc2Nyb2xsVG8obnVsbCk7XG5cbiAgICAgIC8vIGVsZW1lbnQgd2l0aCBnaXZlbiBpZFxuICAgICAgZWxzZSBpZiAoKGVsbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhhc2gpKSkgc2Nyb2xsVG8oZWxtKTtcblxuICAgICAgLy8gZmlyc3QgYW5jaG9yIHdpdGggZ2l2ZW4gbmFtZSA6LURcbiAgICAgIGVsc2UgaWYgKChlbG0gPSBnZXRGaXJzdEFuY2hvcihkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShoYXNoKSkpKSBzY3JvbGxUbyhlbG0pO1xuXG4gICAgICAvLyBubyBlbGVtZW50IGFuZCBoYXNoID09PSAndG9wJywgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAgICAgIGVsc2UgaWYgKGhhc2ggPT09ICd0b3AnKSBzY3JvbGxUbyhudWxsKTtcbiAgICB9XG5cbiAgICAvLyBkb2VzIG5vdCBzY3JvbGwgd2hlbiB1c2VyIGNsaWNrcyBvbiBhbmNob3IgbGluayB0aGF0IGlzIGN1cnJlbnRseSBvblxuICAgIC8vIChubyB1cmwgY2hhbmdlLCBubyAkbG9jYXRpb24uaGFzaCgpIGNoYW5nZSksIGJyb3dzZXIgbmF0aXZlIGRvZXMgc2Nyb2xsXG4gICAgaWYgKGF1dG9TY3JvbGxpbmdFbmFibGVkKSB7XG4gICAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiBhdXRvU2Nyb2xsV2F0Y2goKSB7cmV0dXJuICRsb2NhdGlvbi5oYXNoKCk7fSxcbiAgICAgICAgZnVuY3Rpb24gYXV0b1Njcm9sbFdhdGNoQWN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgLy8gc2tpcCB0aGUgaW5pdGlhbCBzY3JvbGwgaWYgJGxvY2F0aW9uLmhhc2ggaXMgZW1wdHlcbiAgICAgICAgICBpZiAobmV3VmFsID09PSBvbGRWYWwgJiYgbmV3VmFsID09PSAnJykgcmV0dXJuO1xuXG4gICAgICAgICAganFMaXRlRG9jdW1lbnRMb2FkZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoc2Nyb2xsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNjcm9sbDtcbiAgfV07XG59XG5cbnZhciAkYW5pbWF0ZU1pbkVyciA9IG1pbkVycignJGFuaW1hdGUnKTtcbnZhciBFTEVNRU5UX05PREUgPSAxO1xudmFyIE5HX0FOSU1BVEVfQ0xBU1NOQU1FID0gJ25nLWFuaW1hdGUnO1xuXG5mdW5jdGlvbiBtZXJnZUNsYXNzZXMoYSxiKSB7XG4gIGlmICghYSAmJiAhYikgcmV0dXJuICcnO1xuICBpZiAoIWEpIHJldHVybiBiO1xuICBpZiAoIWIpIHJldHVybiBhO1xuICBpZiAoaXNBcnJheShhKSkgYSA9IGEuam9pbignICcpO1xuICBpZiAoaXNBcnJheShiKSkgYiA9IGIuam9pbignICcpO1xuICByZXR1cm4gYSArICcgJyArIGI7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBlbG0gPSBlbGVtZW50W2ldO1xuICAgIGlmIChlbG0ubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERSkge1xuICAgICAgcmV0dXJuIGVsbTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc3BsaXRDbGFzc2VzKGNsYXNzZXMpIHtcbiAgaWYgKGlzU3RyaW5nKGNsYXNzZXMpKSB7XG4gICAgY2xhc3NlcyA9IGNsYXNzZXMuc3BsaXQoJyAnKTtcbiAgfVxuXG4gIC8vIFVzZSBjcmVhdGVNYXAoKSB0byBwcmV2ZW50IGNsYXNzIGFzc3VtcHRpb25zIGludm9sdmluZyBwcm9wZXJ0eSBuYW1lcyBpblxuICAvLyBPYmplY3QucHJvdG90eXBlXG4gIHZhciBvYmogPSBjcmVhdGVNYXAoKTtcbiAgZm9yRWFjaChjbGFzc2VzLCBmdW5jdGlvbihrbGFzcykge1xuICAgIC8vIHNvbWV0aW1lcyB0aGUgc3BsaXQgbGVhdmVzIGVtcHR5IHN0cmluZyB2YWx1ZXNcbiAgICAvLyBpbmNhc2UgZXh0cmEgc3BhY2VzIHdlcmUgYXBwbGllZCB0byB0aGUgb3B0aW9uc1xuICAgIGlmIChrbGFzcy5sZW5ndGgpIHtcbiAgICAgIG9ialtrbGFzc10gPSB0cnVlO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbi8vIGlmIGFueSBvdGhlciB0eXBlIG9mIG9wdGlvbnMgdmFsdWUgYmVzaWRlcyBhbiBPYmplY3QgdmFsdWUgaXNcbi8vIHBhc3NlZCBpbnRvIHRoZSAkYW5pbWF0ZS5tZXRob2QoKSBhbmltYXRpb24gdGhlbiB0aGlzIGhlbHBlciBjb2RlXG4vLyB3aWxsIGJlIHJ1biB3aGljaCB3aWxsIGlnbm9yZSBpdC4gV2hpbGUgdGhpcyBwYXRjaCBpcyBub3QgdGhlXG4vLyBncmVhdGVzdCBzb2x1dGlvbiB0byB0aGlzLCBhIGxvdCBvZiBleGlzdGluZyBwbHVnaW5zIGRlcGVuZCBvblxuLy8gJGFuaW1hdGUgdG8gZWl0aGVyIGNhbGwgdGhlIGNhbGxiYWNrICg8IDEuMikgb3IgcmV0dXJuIGEgcHJvbWlzZVxuLy8gdGhhdCBjYW4gYmUgY2hhbmdlZC4gVGhpcyBoZWxwZXIgZnVuY3Rpb24gZW5zdXJlcyB0aGF0IHRoZSBvcHRpb25zXG4vLyBhcmUgd2lwZWQgY2xlYW4gaW5jYXNlIGEgY2FsbGJhY2sgZnVuY3Rpb24gaXMgcHJvdmlkZWQuXG5mdW5jdGlvbiBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucykge1xuICByZXR1cm4gaXNPYmplY3Qob3B0aW9ucylcbiAgICAgID8gb3B0aW9uc1xuICAgICAgOiB7fTtcbn1cblxudmFyICQkQ29yZUFuaW1hdGVKc1Byb3ZpZGVyID0gLyoqIEB0aGlzICovIGZ1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBub29wO1xufTtcblxuLy8gdGhpcyBpcyBwcmVmaXhlZCB3aXRoIENvcmUgc2luY2UgaXQgY29uZmxpY3RzIHdpdGhcbi8vIHRoZSBhbmltYXRlUXVldWVQcm92aWRlciBkZWZpbmVkIGluIG5nQW5pbWF0ZS9hbmltYXRlUXVldWUuanNcbnZhciAkJENvcmVBbmltYXRlUXVldWVQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdmFyIHBvc3REaWdlc3RRdWV1ZSA9IG5ldyBOZ01hcCgpO1xuICB2YXIgcG9zdERpZ2VzdEVsZW1lbnRzID0gW107XG5cbiAgdGhpcy4kZ2V0ID0gWyckJEFuaW1hdGVSdW5uZXInLCAnJHJvb3RTY29wZScsXG4gICAgICAgZnVuY3Rpb24oJCRBbmltYXRlUnVubmVyLCAgICRyb290U2NvcGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZW5hYmxlZDogbm9vcCxcbiAgICAgIG9uOiBub29wLFxuICAgICAgb2ZmOiBub29wLFxuICAgICAgcGluOiBub29wLFxuXG4gICAgICBwdXNoOiBmdW5jdGlvbihlbGVtZW50LCBldmVudCwgb3B0aW9ucywgZG9tT3BlcmF0aW9uKSB7XG4gICAgICAgIGlmIChkb21PcGVyYXRpb24pIHtcbiAgICAgICAgICBkb21PcGVyYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5mcm9tKSB7XG4gICAgICAgICAgZWxlbWVudC5jc3Mob3B0aW9ucy5mcm9tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy50bykge1xuICAgICAgICAgIGVsZW1lbnQuY3NzKG9wdGlvbnMudG8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuYWRkQ2xhc3MgfHwgb3B0aW9ucy5yZW1vdmVDbGFzcykge1xuICAgICAgICAgIGFkZFJlbW92ZUNsYXNzZXNQb3N0RGlnZXN0KGVsZW1lbnQsIG9wdGlvbnMuYWRkQ2xhc3MsIG9wdGlvbnMucmVtb3ZlQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJ1bm5lciA9IG5ldyAkJEFuaW1hdGVSdW5uZXIoKTtcblxuICAgICAgICAvLyBzaW5jZSB0aGVyZSBhcmUgbm8gYW5pbWF0aW9ucyB0byBydW4gdGhlIHJ1bm5lciBuZWVkcyB0byBiZVxuICAgICAgICAvLyBub3RpZmllZCB0aGF0IHRoZSBhbmltYXRpb24gY2FsbCBpcyBjb21wbGV0ZS5cbiAgICAgICAgcnVubmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIHJldHVybiBydW5uZXI7XG4gICAgICB9XG4gICAgfTtcblxuXG4gICAgZnVuY3Rpb24gdXBkYXRlRGF0YShkYXRhLCBjbGFzc2VzLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIGlmIChjbGFzc2VzKSB7XG4gICAgICAgIGNsYXNzZXMgPSBpc1N0cmluZyhjbGFzc2VzKSA/IGNsYXNzZXMuc3BsaXQoJyAnKSA6XG4gICAgICAgICAgICAgICAgICBpc0FycmF5KGNsYXNzZXMpID8gY2xhc3NlcyA6IFtdO1xuICAgICAgICBmb3JFYWNoKGNsYXNzZXMsIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgICAgIGlmIChjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGF0YVtjbGFzc05hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGFuZ2VkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUNTU0NsYXNzQ2hhbmdlcygpIHtcbiAgICAgIGZvckVhY2gocG9zdERpZ2VzdEVsZW1lbnRzLCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIHZhciBkYXRhID0gcG9zdERpZ2VzdFF1ZXVlLmdldChlbGVtZW50KTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBzcGxpdENsYXNzZXMoZWxlbWVudC5hdHRyKCdjbGFzcycpKTtcbiAgICAgICAgICB2YXIgdG9BZGQgPSAnJztcbiAgICAgICAgICB2YXIgdG9SZW1vdmUgPSAnJztcbiAgICAgICAgICBmb3JFYWNoKGRhdGEsIGZ1bmN0aW9uKHN0YXR1cywgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgaGFzQ2xhc3MgPSAhIWV4aXN0aW5nW2NsYXNzTmFtZV07XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSBoYXNDbGFzcykge1xuICAgICAgICAgICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgdG9BZGQgKz0gKHRvQWRkLmxlbmd0aCA/ICcgJyA6ICcnKSArIGNsYXNzTmFtZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b1JlbW92ZSArPSAodG9SZW1vdmUubGVuZ3RoID8gJyAnIDogJycpICsgY2xhc3NOYW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBmb3JFYWNoKGVsZW1lbnQsIGZ1bmN0aW9uKGVsbSkge1xuICAgICAgICAgICAgaWYgKHRvQWRkKSB7XG4gICAgICAgICAgICAgIGpxTGl0ZUFkZENsYXNzKGVsbSwgdG9BZGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvUmVtb3ZlKSB7XG4gICAgICAgICAgICAgIGpxTGl0ZVJlbW92ZUNsYXNzKGVsbSwgdG9SZW1vdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHBvc3REaWdlc3RRdWV1ZS5kZWxldGUoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcG9zdERpZ2VzdEVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBhZGRSZW1vdmVDbGFzc2VzUG9zdERpZ2VzdChlbGVtZW50LCBhZGQsIHJlbW92ZSkge1xuICAgICAgdmFyIGRhdGEgPSBwb3N0RGlnZXN0UXVldWUuZ2V0KGVsZW1lbnQpIHx8IHt9O1xuXG4gICAgICB2YXIgY2xhc3Nlc0FkZGVkID0gdXBkYXRlRGF0YShkYXRhLCBhZGQsIHRydWUpO1xuICAgICAgdmFyIGNsYXNzZXNSZW1vdmVkID0gdXBkYXRlRGF0YShkYXRhLCByZW1vdmUsIGZhbHNlKTtcblxuICAgICAgaWYgKGNsYXNzZXNBZGRlZCB8fCBjbGFzc2VzUmVtb3ZlZCkge1xuXG4gICAgICAgIHBvc3REaWdlc3RRdWV1ZS5zZXQoZWxlbWVudCwgZGF0YSk7XG4gICAgICAgIHBvc3REaWdlc3RFbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xuXG4gICAgICAgIGlmIChwb3N0RGlnZXN0RWxlbWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kJHBvc3REaWdlc3QoaGFuZGxlQ1NTQ2xhc3NDaGFuZ2VzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfV07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGFuaW1hdGVQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiAkYW5pbWF0ZSB0aGF0IGRvZXNuJ3QgcGVyZm9ybSBhbnkgYW5pbWF0aW9ucywgaW5zdGVhZCBqdXN0XG4gKiBzeW5jaHJvbm91c2x5IHBlcmZvcm1zIERPTSB1cGRhdGVzIGFuZCByZXNvbHZlcyB0aGUgcmV0dXJuZWQgcnVubmVyIHByb21pc2UuXG4gKlxuICogSW4gb3JkZXIgdG8gZW5hYmxlIGFuaW1hdGlvbnMgdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSBoYXMgdG8gYmUgbG9hZGVkLlxuICpcbiAqIFRvIHNlZSB0aGUgZnVuY3Rpb25hbCBpbXBsZW1lbnRhdGlvbiBjaGVjayBvdXQgYHNyYy9uZ0FuaW1hdGUvYW5pbWF0ZS5qc2AuXG4gKi9cbnZhciAkQW5pbWF0ZVByb3ZpZGVyID0gWyckcHJvdmlkZScsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbigkcHJvdmlkZSkge1xuICB2YXIgcHJvdmlkZXIgPSB0aGlzO1xuICB2YXIgY2xhc3NOYW1lRmlsdGVyID0gbnVsbDtcbiAgdmFyIGN1c3RvbUZpbHRlciA9IG51bGw7XG5cbiAgdGhpcy4kJHJlZ2lzdGVyZWRBbmltYXRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGFuaW1hdGVQcm92aWRlciNyZWdpc3RlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXJzIGEgbmV3IGluamVjdGFibGUgYW5pbWF0aW9uIGZhY3RvcnkgZnVuY3Rpb24uIFRoZSBmYWN0b3J5IGZ1bmN0aW9uIHByb2R1Y2VzIHRoZVxuICAgKiBhbmltYXRpb24gb2JqZWN0IHdoaWNoIGNvbnRhaW5zIGNhbGxiYWNrIGZ1bmN0aW9ucyBmb3IgZWFjaCBldmVudCB0aGF0IGlzIGV4cGVjdGVkIHRvIGJlXG4gICAqIGFuaW1hdGVkLlxuICAgKlxuICAgKiAgICogYGV2ZW50Rm5gOiBgZnVuY3Rpb24oZWxlbWVudCwgLi4uICwgZG9uZUZ1bmN0aW9uLCBvcHRpb25zKWBcbiAgICogICBUaGUgZWxlbWVudCB0byBhbmltYXRlLCB0aGUgYGRvbmVGdW5jdGlvbmAgYW5kIHRoZSBvcHRpb25zIGZlZCBpbnRvIHRoZSBhbmltYXRpb24uIERlcGVuZGluZ1xuICAgKiAgIG9uIHRoZSB0eXBlIG9mIGFuaW1hdGlvbiBhZGRpdGlvbmFsIGFyZ3VtZW50cyB3aWxsIGJlIGluamVjdGVkIGludG8gdGhlIGFuaW1hdGlvbiBmdW5jdGlvbi4gVGhlXG4gICAqICAgbGlzdCBiZWxvdyBleHBsYWlucyB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlcyBmb3IgdGhlIGRpZmZlcmVudCBhbmltYXRpb24gbWV0aG9kczpcbiAgICpcbiAgICogICAtIHNldENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBhZGRlZENsYXNzZXMsIHJlbW92ZWRDbGFzc2VzLCBkb25lRnVuY3Rpb24sIG9wdGlvbnMpXG4gICAqICAgLSBhZGRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgYWRkZWRDbGFzc2VzLCBkb25lRnVuY3Rpb24sIG9wdGlvbnMpXG4gICAqICAgLSByZW1vdmVDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgcmVtb3ZlZENsYXNzZXMsIGRvbmVGdW5jdGlvbiwgb3B0aW9ucylcbiAgICogICAtIGVudGVyLCBsZWF2ZSwgbW92ZTogZnVuY3Rpb24oZWxlbWVudCwgZG9uZUZ1bmN0aW9uLCBvcHRpb25zKVxuICAgKiAgIC0gYW5pbWF0ZTogZnVuY3Rpb24oZWxlbWVudCwgZnJvbVN0eWxlcywgdG9TdHlsZXMsIGRvbmVGdW5jdGlvbiwgb3B0aW9ucylcbiAgICpcbiAgICogICBNYWtlIHN1cmUgdG8gdHJpZ2dlciB0aGUgYGRvbmVGdW5jdGlvbmAgb25jZSB0aGUgYW5pbWF0aW9uIGlzIGZ1bGx5IGNvbXBsZXRlLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAgIHJldHVybiB7XG4gICAqICAgICAvL2VudGVyLCBsZWF2ZSwgbW92ZSBzaWduYXR1cmVcbiAgICogICAgIGV2ZW50Rm4gOiBmdW5jdGlvbihlbGVtZW50LCBkb25lLCBvcHRpb25zKSB7XG4gICAqICAgICAgIC8vY29kZSB0byBydW4gdGhlIGFuaW1hdGlvblxuICAgKiAgICAgICAvL29uY2UgY29tcGxldGUsIHRoZW4gcnVuIGRvbmUoKVxuICAgKiAgICAgICByZXR1cm4gZnVuY3Rpb24gZW5kRnVuY3Rpb24od2FzQ2FuY2VsbGVkKSB7XG4gICAqICAgICAgICAgLy9jb2RlIHRvIGNhbmNlbCB0aGUgYW5pbWF0aW9uXG4gICAqICAgICAgIH1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgYW5pbWF0aW9uICh0aGlzIGlzIHdoYXQgdGhlIGNsYXNzLWJhc2VkIENTUyB2YWx1ZSB3aWxsIGJlIGNvbXBhcmVkIHRvKS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9yeSBUaGUgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgdG8gcmV0dXJuIHRoZSBhbmltYXRpb25cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuXG4gICAqL1xuICB0aGlzLnJlZ2lzdGVyID0gZnVuY3Rpb24obmFtZSwgZmFjdG9yeSkge1xuICAgIGlmIChuYW1lICYmIG5hbWUuY2hhckF0KDApICE9PSAnLicpIHtcbiAgICAgIHRocm93ICRhbmltYXRlTWluRXJyKCdub3Rjc2VsJywgJ0V4cGVjdGluZyBjbGFzcyBzZWxlY3RvciBzdGFydGluZyB3aXRoIFxcJy5cXCcgZ290IFxcJ3swfVxcJy4nLCBuYW1lKTtcbiAgICB9XG5cbiAgICB2YXIga2V5ID0gbmFtZSArICctYW5pbWF0aW9uJztcbiAgICBwcm92aWRlci4kJHJlZ2lzdGVyZWRBbmltYXRpb25zW25hbWUuc3Vic3RyKDEpXSA9IGtleTtcbiAgICAkcHJvdmlkZS5mYWN0b3J5KGtleSwgZmFjdG9yeSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGFuaW1hdGVQcm92aWRlciNjdXN0b21GaWx0ZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgYW5kL29yIHJldHVybnMgdGhlIGN1c3RvbSBmaWx0ZXIgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIHRvIFwiZmlsdGVyXCIgYW5pbWF0aW9ucywgaS5lLlxuICAgKiBkZXRlcm1pbmUgaWYgYW4gYW5pbWF0aW9uIGlzIGFsbG93ZWQgb3Igbm90LiBXaGVuIG5vIGZpbHRlciBpcyBzcGVjaWZpZWQgKHRoZSBkZWZhdWx0KSwgbm9cbiAgICogYW5pbWF0aW9uIHdpbGwgYmUgYmxvY2tlZC4gU2V0dGluZyB0aGUgYGN1c3RvbUZpbHRlcmAgdmFsdWUgd2lsbCBvbmx5IGFsbG93IGFuaW1hdGlvbnMgZm9yXG4gICAqIHdoaWNoIHRoZSBmaWx0ZXIgZnVuY3Rpb24ncyByZXR1cm4gdmFsdWUgaXMgdHJ1dGh5LlxuICAgKlxuICAgKiBUaGlzIGFsbG93cyB0byBlYXNpbHkgY3JlYXRlIGFyYml0cmFyaWx5IGNvbXBsZXggcnVsZXMgZm9yIGZpbHRlcmluZyBhbmltYXRpb25zLCBzdWNoIGFzXG4gICAqIGFsbG93aW5nIHNwZWNpZmljIGV2ZW50cyBvbmx5LCBvciBlbmFibGluZyBhbmltYXRpb25zIG9uIHNwZWNpZmljIHN1YnRyZWVzIG9mIHRoZSBET00sIGV0Yy5cbiAgICogRmlsdGVyaW5nIGFuaW1hdGlvbnMgY2FuIGFsc28gYm9vc3QgcGVyZm9ybWFuY2UgZm9yIGxvdy1wb3dlcmVkIGRldmljZXMsIGFzIHdlbGwgYXNcbiAgICogYXBwbGljYXRpb25zIGNvbnRhaW5pbmcgYSBsb3Qgb2Ygc3RydWN0dXJhbCBvcGVyYXRpb25zLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxuICAgKiAgICoqQmVzdCBQcmFjdGljZToqKlxuICAgKiAgIEtlZXAgdGhlIGZpbHRlcmluZyBmdW5jdGlvbiBhcyBsZWFuIGFzIHBvc3NpYmxlLCBiZWNhdXNlIGl0IHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIERPTVxuICAgKiAgIGFjdGlvbiAoZS5nLiBpbnNlcnRpb24sIHJlbW92YWwsIGNsYXNzIGNoYW5nZSkgcGVyZm9ybWVkIGJ5IFwiYW5pbWF0aW9uLWF3YXJlXCIgZGlyZWN0aXZlcy5cbiAgICogICBTZWUge0BsaW5rIGd1aWRlL2FuaW1hdGlvbnMjd2hpY2gtZGlyZWN0aXZlcy1zdXBwb3J0LWFuaW1hdGlvbnMtIGhlcmV9IGZvciBhIGxpc3Qgb2YgYnVpbHQtaW5cbiAgICogICBkaXJlY3RpdmVzIHRoYXQgc3VwcG9ydCBhbmltYXRpb25zLlxuICAgKiAgIFBlcmZvcm1pbmcgY29tcHV0YXRpb25hbGx5IGV4cGVuc2l2ZSBvciB0aW1lLWNvbnN1bWluZyBvcGVyYXRpb25zIG9uIGVhY2ggY2FsbCBvZiB0aGVcbiAgICogICBmaWx0ZXJpbmcgZnVuY3Rpb24gY2FuIG1ha2UgeW91ciBhbmltYXRpb25zIHNsdWdnaXNoLlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogKipOb3RlOioqIElmIHByZXNlbnQsIGBjdXN0b21GaWx0ZXJgIHdpbGwgYmUgY2hlY2tlZCBiZWZvcmVcbiAgICoge0BsaW5rICRhbmltYXRlUHJvdmlkZXIjY2xhc3NOYW1lRmlsdGVyIGNsYXNzTmFtZUZpbHRlcn0uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBmaWx0ZXJGbiAtIFRoZSBmaWx0ZXIgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGZpbHRlciBhbGwgYW5pbWF0aW9ucy5cbiAgICogICBJZiBhIGZhbHN5IHZhbHVlIGlzIHJldHVybmVkLCBubyBhbmltYXRpb24gd2lsbCBiZSBwZXJmb3JtZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZFxuICAgKiAgIHdpdGggdGhlIGZvbGxvd2luZyBhcmd1bWVudHM6XG4gICAqICAgLSAqKm5vZGUqKiBge0RPTUVsZW1lbnR9YCAtIFRoZSBET00gZWxlbWVudCB0byBiZSBhbmltYXRlZC5cbiAgICogICAtICoqZXZlbnQqKiBge1N0cmluZ31gIC0gVGhlIG5hbWUgb2YgdGhlIGFuaW1hdGlvbiBldmVudCAoZS5nLiBgZW50ZXJgLCBgbGVhdmVgLCBgYWRkQ2xhc3NgXG4gICAqICAgICBldGMpLlxuICAgKiAgIC0gKipvcHRpb25zKiogYHtPYmplY3R9YCAtIEEgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB1c2VkIGZvciB0aGUgYW5pbWF0aW9uLlxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGN1cnJlbnQgZmlsdGVyIGZ1bmN0aW9uIG9yIGBudWxsYCBpZiB0aGVyZSBpcyBub25lIHNldC5cbiAgICovXG4gIHRoaXMuY3VzdG9tRmlsdGVyID0gZnVuY3Rpb24oZmlsdGVyRm4pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY3VzdG9tRmlsdGVyID0gaXNGdW5jdGlvbihmaWx0ZXJGbikgPyBmaWx0ZXJGbiA6IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1c3RvbUZpbHRlcjtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyI2NsYXNzTmFtZUZpbHRlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyBhbmQvb3IgcmV0dXJucyB0aGUgQ1NTIGNsYXNzIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIGNoZWNrZWQgd2hlbiBwZXJmb3JtaW5nXG4gICAqIGFuIGFuaW1hdGlvbi4gVXBvbiBib290c3RyYXAgdGhlIGNsYXNzTmFtZUZpbHRlciB2YWx1ZSBpcyBub3Qgc2V0IGF0IGFsbCBhbmQgd2lsbFxuICAgKiB0aGVyZWZvcmUgZW5hYmxlICRhbmltYXRlIHRvIGF0dGVtcHQgdG8gcGVyZm9ybSBhbiBhbmltYXRpb24gb24gYW55IGVsZW1lbnQgdGhhdCBpcyB0cmlnZ2VyZWQuXG4gICAqIFdoZW4gc2V0dGluZyB0aGUgYGNsYXNzTmFtZUZpbHRlcmAgdmFsdWUsIGFuaW1hdGlvbnMgd2lsbCBvbmx5IGJlIHBlcmZvcm1lZCBvbiBlbGVtZW50c1xuICAgKiB0aGF0IHN1Y2Nlc3NmdWxseSBtYXRjaCB0aGUgZmlsdGVyIGV4cHJlc3Npb24uIFRoaXMgaW4gdHVybiBjYW4gYm9vc3QgcGVyZm9ybWFuY2VcbiAgICogZm9yIGxvdy1wb3dlcmVkIGRldmljZXMgYXMgd2VsbCBhcyBhcHBsaWNhdGlvbnMgY29udGFpbmluZyBhIGxvdCBvZiBzdHJ1Y3R1cmFsIG9wZXJhdGlvbnMuXG4gICAqXG4gICAqICoqTm90ZToqKiBJZiBwcmVzZW50LCBgY2xhc3NOYW1lRmlsdGVyYCB3aWxsIGJlIGNoZWNrZWQgYWZ0ZXJcbiAgICoge0BsaW5rICRhbmltYXRlUHJvdmlkZXIjY3VzdG9tRmlsdGVyIGN1c3RvbUZpbHRlcn0uIElmIGBjdXN0b21GaWx0ZXJgIGlzIHByZXNlbnQgYW5kIHJldHVybnNcbiAgICogZmFsc2UsIGBjbGFzc05hbWVGaWx0ZXJgIHdpbGwgbm90IGJlIGNoZWNrZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gZXhwcmVzc2lvbiBUaGUgY2xhc3NOYW1lIGV4cHJlc3Npb24gd2hpY2ggd2lsbCBiZSBjaGVja2VkIGFnYWluc3QgYWxsIGFuaW1hdGlvbnNcbiAgICogQHJldHVybiB7UmVnRXhwfSBUaGUgY3VycmVudCBDU1MgY2xhc3NOYW1lIGV4cHJlc3Npb24gdmFsdWUuIElmIG51bGwgdGhlbiB0aGVyZSBpcyBubyBleHByZXNzaW9uIHZhbHVlXG4gICAqL1xuICB0aGlzLmNsYXNzTmFtZUZpbHRlciA9IGZ1bmN0aW9uKGV4cHJlc3Npb24pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2xhc3NOYW1lRmlsdGVyID0gKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBSZWdFeHApID8gZXhwcmVzc2lvbiA6IG51bGw7XG4gICAgICBpZiAoY2xhc3NOYW1lRmlsdGVyKSB7XG4gICAgICAgIHZhciByZXNlcnZlZFJlZ2V4ID0gbmV3IFJlZ0V4cCgnWyhcXFxcc3xcXFxcLyldJyArIE5HX0FOSU1BVEVfQ0xBU1NOQU1FICsgJ1soXFxcXHN8XFxcXC8pXScpO1xuICAgICAgICBpZiAocmVzZXJ2ZWRSZWdleC50ZXN0KGNsYXNzTmFtZUZpbHRlci50b1N0cmluZygpKSkge1xuICAgICAgICAgIGNsYXNzTmFtZUZpbHRlciA9IG51bGw7XG4gICAgICAgICAgdGhyb3cgJGFuaW1hdGVNaW5FcnIoJ25vbmdjbHMnLCAnJGFuaW1hdGVQcm92aWRlci5jbGFzc05hbWVGaWx0ZXIocmVnZXgpIHByb2hpYml0cyBhY2NlcHRpbmcgYSByZWdleCB2YWx1ZSB3aGljaCBtYXRjaGVzL2NvbnRhaW5zIHRoZSBcInswfVwiIENTUyBjbGFzcy4nLCBOR19BTklNQVRFX0NMQVNTTkFNRSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNsYXNzTmFtZUZpbHRlcjtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbJyQkYW5pbWF0ZVF1ZXVlJywgZnVuY3Rpb24oJCRhbmltYXRlUXVldWUpIHtcbiAgICBmdW5jdGlvbiBkb21JbnNlcnQoZWxlbWVudCwgcGFyZW50RWxlbWVudCwgYWZ0ZXJFbGVtZW50KSB7XG4gICAgICAvLyBpZiBmb3Igc29tZSByZWFzb24gdGhlIHByZXZpb3VzIGVsZW1lbnQgd2FzIHJlbW92ZWRcbiAgICAgIC8vIGZyb20gdGhlIGRvbSBzb21ldGltZSBiZWZvcmUgdGhpcyBjb2RlIHJ1bnMgdGhlbiBsZXQnc1xuICAgICAgLy8ganVzdCBzdGljayB0byB1c2luZyB0aGUgcGFyZW50IGVsZW1lbnQgYXMgdGhlIGFuY2hvclxuICAgICAgaWYgKGFmdGVyRWxlbWVudCkge1xuICAgICAgICB2YXIgYWZ0ZXJOb2RlID0gZXh0cmFjdEVsZW1lbnROb2RlKGFmdGVyRWxlbWVudCk7XG4gICAgICAgIGlmIChhZnRlck5vZGUgJiYgIWFmdGVyTm9kZS5wYXJlbnROb2RlICYmICFhZnRlck5vZGUucHJldmlvdXNFbGVtZW50U2libGluZykge1xuICAgICAgICAgIGFmdGVyRWxlbWVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhZnRlckVsZW1lbnQpIHtcbiAgICAgICAgYWZ0ZXJFbGVtZW50LmFmdGVyKGVsZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50RWxlbWVudC5wcmVwZW5kKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJGFuaW1hdGVcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhlICRhbmltYXRlIHNlcnZpY2UgZXhwb3NlcyBhIHNlcmllcyBvZiBET00gdXRpbGl0eSBtZXRob2RzIHRoYXQgcHJvdmlkZSBzdXBwb3J0XG4gICAgICogZm9yIGFuaW1hdGlvbiBob29rcy4gVGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgdGhlIGFwcGxpY2F0aW9uIG9mIERPTSBvcGVyYXRpb25zLCBob3dldmVyLFxuICAgICAqIHdoZW4gYW4gYW5pbWF0aW9uIGlzIGRldGVjdGVkIChhbmQgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZCksICRhbmltYXRlIHdpbGwgZG8gdGhlIGhlYXZ5IGxpZnRpbmdcbiAgICAgKiB0byBlbnN1cmUgdGhhdCBhbmltYXRpb24gcnVucyB3aXRoIHRoZSB0cmlnZ2VyZWQgRE9NIG9wZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgJGFuaW1hdGUgZG9lc24ndCB0cmlnZ2VyIGFueSBhbmltYXRpb25zLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSBpc24ndFxuICAgICAqIGluY2x1ZGVkIGFuZCBvbmx5IHdoZW4gaXQgaXMgYWN0aXZlIHRoZW4gdGhlIGFuaW1hdGlvbiBob29rcyB0aGF0IGAkYW5pbWF0ZWAgdHJpZ2dlcnMgd2lsbCBiZVxuICAgICAqIGZ1bmN0aW9uYWwuIE9uY2UgYWN0aXZlIHRoZW4gYWxsIHN0cnVjdHVyYWwgYG5nLWAgZGlyZWN0aXZlcyB3aWxsIHRyaWdnZXIgYW5pbWF0aW9ucyBhcyB0aGV5IHBlcmZvcm1cbiAgICAgKiB0aGVpciBET00tcmVsYXRlZCBvcGVyYXRpb25zIChlbnRlciwgbGVhdmUgYW5kIG1vdmUpLiBPdGhlciBkaXJlY3RpdmVzIHN1Y2ggYXMgYG5nQ2xhc3NgLFxuICAgICAqIGBuZ1Nob3dgLCBgbmdIaWRlYCBhbmQgYG5nTWVzc2FnZXNgIGFsc28gcHJvdmlkZSBzdXBwb3J0IGZvciBhbmltYXRpb25zLlxuICAgICAqXG4gICAgICogSXQgaXMgcmVjb21tZW5kZWQgdGhhdCB0aGVgJGFuaW1hdGVgIHNlcnZpY2UgaXMgYWx3YXlzIHVzZWQgd2hlbiBleGVjdXRpbmcgRE9NLXJlbGF0ZWQgcHJvY2VkdXJlcyB3aXRoaW4gZGlyZWN0aXZlcy5cbiAgICAgKlxuICAgICAqIFRvIGxlYXJuIG1vcmUgYWJvdXQgZW5hYmxpbmcgYW5pbWF0aW9uIHN1cHBvcnQsIGNsaWNrIGhlcmUgdG8gdmlzaXQgdGhlXG4gICAgICoge0BsaW5rIG5nQW5pbWF0ZSBuZ0FuaW1hdGUgbW9kdWxlIHBhZ2V9LlxuICAgICAqL1xuICAgIHJldHVybiB7XG4gICAgICAvLyB3ZSBkb24ndCBjYWxsIGl0IGRpcmVjdGx5IHNpbmNlIG5vbi1leGlzdGFudCBhcmd1bWVudHMgbWF5XG4gICAgICAvLyBiZSBpbnRlcnByZXRlZCBhcyBudWxsIHdpdGhpbiB0aGUgc3ViIGVuYWJsZWQgZnVuY3Rpb25cblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjb25cbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gU2V0cyB1cCBhbiBldmVudCBsaXN0ZW5lciB0byBmaXJlIHdoZW5ldmVyIHRoZSBhbmltYXRpb24gZXZlbnQgKGVudGVyLCBsZWF2ZSwgbW92ZSwgZXRjLi4uKVxuICAgICAgICogICAgaGFzIGZpcmVkIG9uIHRoZSBnaXZlbiBlbGVtZW50IG9yIGFtb25nIGFueSBvZiBpdHMgY2hpbGRyZW4uIE9uY2UgdGhlIGxpc3RlbmVyIGlzIGZpcmVkLCB0aGUgcHJvdmlkZWQgY2FsbGJhY2tcbiAgICAgICAqICAgIGlzIGZpcmVkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbXM6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICRhbmltYXRlLm9uKCdlbnRlcicsIGNvbnRhaW5lcixcbiAgICAgICAqICAgIGZ1bmN0aW9uIGNhbGxiYWNrKGVsZW1lbnQsIHBoYXNlKSB7XG4gICAgICAgKiAgICAgIC8vIGNvb2wgd2UgZGV0ZWN0ZWQgYW4gZW50ZXIgYW5pbWF0aW9uIHdpdGhpbiB0aGUgY29udGFpbmVyXG4gICAgICAgKiAgICB9XG4gICAgICAgKiApO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IHRoZSBhbmltYXRpb24gZXZlbnQgdGhhdCB3aWxsIGJlIGNhcHR1cmVkIChlLmcuIGVudGVyLCBsZWF2ZSwgbW92ZSwgYWRkQ2xhc3MsIHJlbW92ZUNsYXNzLCBldGMuLi4pXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciB0aGUgY29udGFpbmVyIGVsZW1lbnQgdGhhdCB3aWxsIGNhcHR1cmUgZWFjaCBvZiB0aGUgYW5pbWF0aW9uIGV2ZW50cyB0aGF0IGFyZSBmaXJlZCBvbiBpdHNlbGZcbiAgICAgICAqICAgICBhcyB3ZWxsIGFzIGFtb25nIGl0cyBjaGlsZHJlblxuICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIHRoZSBsaXN0ZW5lciBpcyB0cmlnZ2VyZWRcbiAgICAgICAqXG4gICAgICAgKiBUaGUgYXJndW1lbnRzIHByZXNlbnQgaW4gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGFyZTpcbiAgICAgICAqICogYGVsZW1lbnRgIC0gVGhlIGNhcHR1cmVkIERPTSBlbGVtZW50IHRoYXQgdGhlIGFuaW1hdGlvbiB3YXMgZmlyZWQgb24uXG4gICAgICAgKiAqIGBwaGFzZWAgLSBUaGUgcGhhc2Ugb2YgdGhlIGFuaW1hdGlvbi4gVGhlIHR3byBwb3NzaWJsZSBwaGFzZXMgYXJlICoqc3RhcnQqKiAod2hlbiB0aGUgYW5pbWF0aW9uIHN0YXJ0cykgYW5kICoqY2xvc2UqKiAod2hlbiBpdCBlbmRzKS5cbiAgICAgICAqL1xuICAgICAgb246ICQkYW5pbWF0ZVF1ZXVlLm9uLFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNvZmZcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gRGVyZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgYmFzZWQgb24gdGhlIGV2ZW50IHdoaWNoIGhhcyBiZWVuIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgZWxlbWVudC4gVGhpcyBtZXRob2RcbiAgICAgICAqIGNhbiBiZSB1c2VkIGluIHRocmVlIGRpZmZlcmVudCB3YXlzIGRlcGVuZGluZyBvbiB0aGUgYXJndW1lbnRzOlxuICAgICAgICpcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAvLyByZW1vdmUgYWxsIHRoZSBhbmltYXRpb24gZXZlbnQgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgYGVudGVyYFxuICAgICAgICogJGFuaW1hdGUub2ZmKCdlbnRlcicpO1xuICAgICAgICpcbiAgICAgICAqIC8vIHJlbW92ZSBsaXN0ZW5lcnMgZm9yIGFsbCBhbmltYXRpb24gZXZlbnRzIGZyb20gdGhlIGNvbnRhaW5lciBlbGVtZW50XG4gICAgICAgKiAkYW5pbWF0ZS5vZmYoY29udGFpbmVyKTtcbiAgICAgICAqXG4gICAgICAgKiAvLyByZW1vdmUgYWxsIHRoZSBhbmltYXRpb24gZXZlbnQgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgYGVudGVyYCBvbiB0aGUgZ2l2ZW4gZWxlbWVudCBhbmQgaXRzIGNoaWxkcmVuXG4gICAgICAgKiAkYW5pbWF0ZS5vZmYoJ2VudGVyJywgY29udGFpbmVyKTtcbiAgICAgICAqXG4gICAgICAgKiAvLyByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uIHByb3ZpZGVkIGJ5IGBjYWxsYmFja2AgdGhhdCBpcyBzZXRcbiAgICAgICAqIC8vIHRvIGxpc3RlbiBmb3IgYGVudGVyYCBvbiB0aGUgZ2l2ZW4gYGNvbnRhaW5lcmAgYXMgd2VsbCBhcyBpdHMgY2hpbGRyZW5cbiAgICAgICAqICRhbmltYXRlLm9mZignZW50ZXInLCBjb250YWluZXIsIGNhbGxiYWNrKTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfERPTUVsZW1lbnR9IGV2ZW50fGNvbnRhaW5lciB0aGUgYW5pbWF0aW9uIGV2ZW50IChlLmcuIGVudGVyLCBsZWF2ZSwgbW92ZSxcbiAgICAgICAqIGFkZENsYXNzLCByZW1vdmVDbGFzcywgZXRjLi4uKSwgb3IgdGhlIGNvbnRhaW5lciBlbGVtZW50LiBJZiBpdCBpcyB0aGUgZWxlbWVudCwgYWxsIG90aGVyXG4gICAgICAgKiBhcmd1bWVudHMgYXJlIGlnbm9yZWQuXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSBjb250YWluZXIgdGhlIGNvbnRhaW5lciBlbGVtZW50IHRoZSBldmVudCBsaXN0ZW5lciB3YXMgcGxhY2VkIG9uXG4gICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2FzIHJlZ2lzdGVyZWQgYXMgdGhlIGxpc3RlbmVyXG4gICAgICAgKi9cbiAgICAgIG9mZjogJCRhbmltYXRlUXVldWUub2ZmLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI3BpblxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBBc3NvY2lhdGVzIHRoZSBwcm92aWRlZCBlbGVtZW50IHdpdGggYSBob3N0IHBhcmVudCBlbGVtZW50IHRvIGFsbG93IHRoZSBlbGVtZW50IHRvIGJlIGFuaW1hdGVkIGV2ZW4gaWYgaXQgZXhpc3RzXG4gICAgICAgKiAgICBvdXRzaWRlIG9mIHRoZSBET00gc3RydWN0dXJlIG9mIHRoZSBBbmd1bGFySlMgYXBwbGljYXRpb24uIEJ5IGRvaW5nIHNvLCBhbnkgYW5pbWF0aW9uIHRyaWdnZXJlZCB2aWEgYCRhbmltYXRlYCBjYW4gYmUgaXNzdWVkIG9uIHRoZVxuICAgICAgICogICAgZWxlbWVudCBkZXNwaXRlIGJlaW5nIG91dHNpZGUgdGhlIHJlYWxtIG9mIHRoZSBhcHBsaWNhdGlvbiBvciB3aXRoaW4gYW5vdGhlciBhcHBsaWNhdGlvbi4gU2F5IGZvciBleGFtcGxlIGlmIHRoZSBhcHBsaWNhdGlvblxuICAgICAgICogICAgd2FzIGJvb3RzdHJhcHBlZCBvbiBhbiBlbGVtZW50IHRoYXQgaXMgc29tZXdoZXJlIGluc2lkZSBvZiB0aGUgYDxib2R5PmAgdGFnLCBidXQgd2Ugd2FudGVkIHRvIGFsbG93IGZvciBhbiBlbGVtZW50IHRvIGJlIHNpdHVhdGVkXG4gICAgICAgKiAgICBhcyBhIGRpcmVjdCBjaGlsZCBvZiBgZG9jdW1lbnQuYm9keWAsIHRoZW4gdGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcGlubmluZyB0aGUgZWxlbWVudCB2aWEgYCRhbmltYXRlLnBpbihlbGVtZW50KWAuIEtlZXAgaW4gbWluZFxuICAgICAgICogICAgdGhhdCBjYWxsaW5nIGAkYW5pbWF0ZS5waW4oZWxlbWVudCwgcGFyZW50RWxlbWVudClgIHdpbGwgbm90IGFjdHVhbGx5IGluc2VydCBpbnRvIHRoZSBET00gYW55d2hlcmU7IGl0IHdpbGwganVzdCBjcmVhdGUgdGhlIGFzc29jaWF0aW9uLlxuICAgICAgICpcbiAgICAgICAqICAgIE5vdGUgdGhhdCB0aGlzIGZlYXR1cmUgaXMgb25seSBhY3RpdmUgd2hlbiB0aGUgYG5nQW5pbWF0ZWAgbW9kdWxlIGlzIHVzZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBleHRlcm5hbCBlbGVtZW50IHRoYXQgd2lsbCBiZSBwaW5uZWRcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50RWxlbWVudCB0aGUgaG9zdCBwYXJlbnQgZWxlbWVudCB0aGF0IHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBleHRlcm5hbCBlbGVtZW50XG4gICAgICAgKi9cbiAgICAgIHBpbjogJCRhbmltYXRlUXVldWUucGluLFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNlbmFibGVkXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICogQGRlc2NyaXB0aW9uIFVzZWQgdG8gZ2V0IGFuZCBzZXQgd2hldGhlciBhbmltYXRpb25zIGFyZSBlbmFibGVkIG9yIG5vdCBvbiB0aGUgZW50aXJlIGFwcGxpY2F0aW9uIG9yIG9uIGFuIGVsZW1lbnQgYW5kIGl0cyBjaGlsZHJlbi4gVGhpc1xuICAgICAgICogZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBpbiBmb3VyIHdheXM6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqIC8vIHJldHVybnMgdHJ1ZSBvciBmYWxzZVxuICAgICAgICogJGFuaW1hdGUuZW5hYmxlZCgpO1xuICAgICAgICpcbiAgICAgICAqIC8vIGNoYW5nZXMgdGhlIGVuYWJsZWQgc3RhdGUgZm9yIGFsbCBhbmltYXRpb25zXG4gICAgICAgKiAkYW5pbWF0ZS5lbmFibGVkKGZhbHNlKTtcbiAgICAgICAqICRhbmltYXRlLmVuYWJsZWQodHJ1ZSk7XG4gICAgICAgKlxuICAgICAgICogLy8gcmV0dXJucyB0cnVlIG9yIGZhbHNlIGlmIGFuaW1hdGlvbnMgYXJlIGVuYWJsZWQgZm9yIGFuIGVsZW1lbnRcbiAgICAgICAqICRhbmltYXRlLmVuYWJsZWQoZWxlbWVudCk7XG4gICAgICAgKlxuICAgICAgICogLy8gY2hhbmdlcyB0aGUgZW5hYmxlZCBzdGF0ZSBmb3IgYW4gZWxlbWVudCBhbmQgaXRzIGNoaWxkcmVuXG4gICAgICAgKiAkYW5pbWF0ZS5lbmFibGVkKGVsZW1lbnQsIHRydWUpO1xuICAgICAgICogJGFuaW1hdGUuZW5hYmxlZChlbGVtZW50LCBmYWxzZSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSBlbGVtZW50IHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSBjb25zaWRlcmVkIGZvciBjaGVja2luZy9zZXR0aW5nIHRoZSBlbmFibGVkIHN0YXRlXG4gICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBlbmFibGVkIHdoZXRoZXIgb3Igbm90IHRoZSBhbmltYXRpb25zIHdpbGwgYmUgZW5hYmxlZCBmb3IgdGhlIGVsZW1lbnRcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtib29sZWFufSB3aGV0aGVyIG9yIG5vdCBhbmltYXRpb25zIGFyZSBlbmFibGVkXG4gICAgICAgKi9cbiAgICAgIGVuYWJsZWQ6ICQkYW5pbWF0ZVF1ZXVlLmVuYWJsZWQsXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjY2FuY2VsXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICogQGRlc2NyaXB0aW9uIENhbmNlbHMgdGhlIHByb3ZpZGVkIGFuaW1hdGlvbiBhbmQgYXBwbGllcyB0aGUgZW5kIHN0YXRlIG9mIHRoZSBhbmltYXRpb24uXG4gICAgICAgKiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdCBjYW5jZWwgdGhlIHVuZGVybHlpbmcgb3BlcmF0aW9uLCBlLmcuIHRoZSBzZXR0aW5nIG9mIGNsYXNzZXMgb3JcbiAgICAgICAqIGFkZGluZyB0aGUgZWxlbWVudCB0byB0aGUgRE9NLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7YW5pbWF0aW9uUnVubmVyfSBhbmltYXRpb25SdW5uZXIgQW4gYW5pbWF0aW9uIHJ1bm5lciByZXR1cm5lZCBieSBhbiAkYW5pbWF0ZSBmdW5jdGlvbi5cbiAgICAgICAqXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICA8ZXhhbXBsZSBtb2R1bGU9XCJhbmltYXRpb25FeGFtcGxlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cImFuaW1hdGUtY2FuY2VsXCI+XG4gICAgICAgICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2FuaW1hdGlvbkV4YW1wbGUnLCBbJ25nQW5pbWF0ZSddKS5jb21wb25lbnQoJ2NhbmNlbEV4YW1wbGUnLCB7XG4gICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUuaHRtbCcsXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRlbGVtZW50LCAkYW5pbWF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucnVubmVyID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2xhc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMucnVubmVyID0gJGFuaW1hdGUuYWRkQ2xhc3MoJGVsZW1lbnQuZmluZCgnZGl2JyksICdyZWQnKTtcbiAgICAgICAgICAgICAgICAgIHZhciBjdHJsID0gdGhpcztcbiAgICAgICAgICAgICAgICAgIHRoaXMucnVubmVyLmZpbmFsbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0cmwucnVubmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnJ1bm5lciA9ICRhbmltYXRlLnJlbW92ZUNsYXNzKCRlbGVtZW50LmZpbmQoJ2RpdicpLCAncmVkJyk7XG4gICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICB0aGlzLnJ1bm5lci5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBjdHJsLnJ1bm5lciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICRhbmltYXRlLmNhbmNlbCh0aGlzLnJ1bm5lcik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgPC9maWxlPlxuICAgICAgICAgIDxmaWxlIG5hbWU9XCJ0ZW1wbGF0ZS5odG1sXCI+XG4gICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImFkZFwiIG5nLWNsaWNrPVwiJGN0cmwuYWRkQ2xhc3MoKVwiPkFkZDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGN0cmwucmVtb3ZlQ2xhc3MoKVwiPlJlbW92ZTwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnI+XG4gICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjYW5jZWxcIiBuZy1jbGljaz1cIiRjdHJsLmNhbmNlbCgpXCIgbmctZGlzYWJsZWQ9XCIhJGN0cmwucnVubmVyXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICAgIDxicj5cbiAgICAgICAgICAgICAgPGRpdiBpZD1cInRhcmdldFwiPkNTUy1BbmltYXRlZCBUZXh0PC9kaXY+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9maWxlPlxuICAgICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICAgICA8Y2FuY2VsLWV4YW1wbGU+PC9jYW5jZWwtZXhhbXBsZT5cbiAgICAgICAgICA8L2ZpbGU+XG4gICAgICAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgICAgICAgLnJlZC1hZGQsIC5yZWQtcmVtb3ZlIHtcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDRzIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5yZWQsXG4gICAgICAgICAgICAucmVkLWFkZC5yZWQtYWRkLWFjdGl2ZSB7XG4gICAgICAgICAgICAgIGNvbG9yOiAjRkYwMDAwO1xuICAgICAgICAgICAgICBmb250LXNpemU6IDQwcHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5yZWQtcmVtb3ZlLnJlZC1yZW1vdmUtYWN0aXZlIHtcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICAgICAgICBjb2xvcjogYmxhY2s7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICA8L2ZpbGU+XG4gICAgICAgIDwvZXhhbXBsZT5cbiAgICAgICAqL1xuICAgICAgY2FuY2VsOiBmdW5jdGlvbihydW5uZXIpIHtcbiAgICAgICAgaWYgKHJ1bm5lci5jYW5jZWwpIHtcbiAgICAgICAgICBydW5uZXIuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICpcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI2VudGVyXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICogQGRlc2NyaXB0aW9uIEluc2VydHMgdGhlIGVsZW1lbnQgaW50byB0aGUgRE9NIGVpdGhlciBhZnRlciB0aGUgYGFmdGVyYCBlbGVtZW50IChpZiBwcm92aWRlZCkgb3JcbiAgICAgICAqICAgYXMgdGhlIGZpcnN0IGNoaWxkIHdpdGhpbiB0aGUgYHBhcmVudGAgZWxlbWVudCBhbmQgdGhlbiB0cmlnZ2VycyBhbiBhbmltYXRpb24uXG4gICAgICAgKiAgIEEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgZHVyaW5nIHRoZSBuZXh0IGRpZ2VzdCBvbmNlIHRoZSBhbmltYXRpb25cbiAgICAgICAqICAgaGFzIGNvbXBsZXRlZC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET01cbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50IHRoZSBwYXJlbnQgZWxlbWVudCB3aGljaCB3aWxsIGFwcGVuZCB0aGUgZWxlbWVudCBhc1xuICAgICAgICogICBhIGNoaWxkIChzbyBsb25nIGFzIHRoZSBhZnRlciBlbGVtZW50IGlzIG5vdCBwcmVzZW50KVxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gYWZ0ZXIgdGhlIHNpYmxpbmcgZWxlbWVudCBhZnRlciB3aGljaCB0aGUgZWxlbWVudCB3aWxsIGJlIGFwcGVuZGVkXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1J1bm5lcn0gdGhlIGFuaW1hdGlvbiBydW5uZXJcbiAgICAgICAqL1xuICAgICAgZW50ZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50ICYmIGpxTGl0ZShwYXJlbnQpO1xuICAgICAgICBhZnRlciA9IGFmdGVyICYmIGpxTGl0ZShhZnRlcik7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudCB8fCBhZnRlci5wYXJlbnQoKTtcbiAgICAgICAgZG9tSW5zZXJ0KGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIpO1xuICAgICAgICByZXR1cm4gJCRhbmltYXRlUXVldWUucHVzaChlbGVtZW50LCAnZW50ZXInLCBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucykpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjbW92ZVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBJbnNlcnRzIChtb3ZlcykgdGhlIGVsZW1lbnQgaW50byBpdHMgbmV3IHBvc2l0aW9uIGluIHRoZSBET00gZWl0aGVyIGFmdGVyXG4gICAgICAgKiAgIHRoZSBgYWZ0ZXJgIGVsZW1lbnQgKGlmIHByb3ZpZGVkKSBvciBhcyB0aGUgZmlyc3QgY2hpbGQgd2l0aGluIHRoZSBgcGFyZW50YCBlbGVtZW50XG4gICAgICAgKiAgIGFuZCB0aGVuIHRyaWdnZXJzIGFuIGFuaW1hdGlvbi4gQSBwcm9taXNlIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZFxuICAgICAgICogICBkdXJpbmcgdGhlIG5leHQgZGlnZXN0IG9uY2UgdGhlIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGJlIG1vdmVkIGludG8gdGhlIG5ldyBET00gcG9zaXRpb25cbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50IHRoZSBwYXJlbnQgZWxlbWVudCB3aGljaCB3aWxsIGFwcGVuZCB0aGUgZWxlbWVudCBhc1xuICAgICAgICogICBhIGNoaWxkIChzbyBsb25nIGFzIHRoZSBhZnRlciBlbGVtZW50IGlzIG5vdCBwcmVzZW50KVxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gYWZ0ZXIgdGhlIHNpYmxpbmcgZWxlbWVudCBhZnRlciB3aGljaCB0aGUgZWxlbWVudCB3aWxsIGJlIGFwcGVuZGVkXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1J1bm5lcn0gdGhlIGFuaW1hdGlvbiBydW5uZXJcbiAgICAgICAqL1xuICAgICAgbW92ZTogZnVuY3Rpb24oZWxlbWVudCwgcGFyZW50LCBhZnRlciwgb3B0aW9ucykge1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQgJiYganFMaXRlKHBhcmVudCk7XG4gICAgICAgIGFmdGVyID0gYWZ0ZXIgJiYganFMaXRlKGFmdGVyKTtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50IHx8IGFmdGVyLnBhcmVudCgpO1xuICAgICAgICBkb21JbnNlcnQoZWxlbWVudCwgcGFyZW50LCBhZnRlcik7XG4gICAgICAgIHJldHVybiAkJGFuaW1hdGVRdWV1ZS5wdXNoKGVsZW1lbnQsICdtb3ZlJywgcHJlcGFyZUFuaW1hdGVPcHRpb25zKG9wdGlvbnMpKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjbGVhdmVcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gVHJpZ2dlcnMgYW4gYW5pbWF0aW9uIGFuZCB0aGVuIHJlbW92ZXMgdGhlIGVsZW1lbnQgZnJvbSB0aGUgRE9NLlxuICAgICAgICogV2hlbiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIGEgcHJvbWlzZSBpcyByZXR1cm5lZCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgZHVyaW5nIHRoZSBuZXh0XG4gICAgICAgKiBkaWdlc3Qgb25jZSB0aGUgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMvc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICBUaGUgb2JqZWN0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gKiphZGRDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQgdG8gZWxlbWVudFxuICAgICAgICogICAtICoqZnJvbSoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYHRvYFxuICAgICAgICogICAtICoqcmVtb3ZlQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gcmVtb3ZlIGZyb20gZWxlbWVudFxuICAgICAgICogICAtICoqdG8qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCBlbmQgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYGZyb21gXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7UnVubmVyfSB0aGUgYW5pbWF0aW9uIHJ1bm5lclxuICAgICAgICovXG4gICAgICBsZWF2ZTogZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gJCRhbmltYXRlUXVldWUucHVzaChlbGVtZW50LCAnbGVhdmUnLCBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNhZGRDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gVHJpZ2dlcnMgYW4gYWRkQ2xhc3MgYW5pbWF0aW9uIHN1cnJvdW5kaW5nIHRoZSBhZGRpdGlvbiBvZiB0aGUgcHJvdmlkZWQgQ1NTIGNsYXNzKGVzKS4gVXBvblxuICAgICAgICogICBleGVjdXRpb24sIHRoZSBhZGRDbGFzcyBvcGVyYXRpb24gd2lsbCBvbmx5IGJlIGhhbmRsZWQgYWZ0ZXIgdGhlIG5leHQgZGlnZXN0IGFuZCBpdCB3aWxsIG5vdCB0cmlnZ2VyIGFuXG4gICAgICAgKiAgIGFuaW1hdGlvbiBpZiBlbGVtZW50IGFscmVhZHkgY29udGFpbnMgdGhlIENTUyBjbGFzcyBvciBpZiB0aGUgY2xhc3MgaXMgcmVtb3ZlZCBhdCBhIGxhdGVyIHN0ZXAuXG4gICAgICAgKiAgIE5vdGUgdGhhdCBjbGFzcy1iYXNlZCBhbmltYXRpb25zIGFyZSB0cmVhdGVkIGRpZmZlcmVudGx5IGNvbXBhcmVkIHRvIHN0cnVjdHVyYWwgYW5pbWF0aW9uc1xuICAgICAgICogICAobGlrZSBlbnRlciwgbW92ZSBhbmQgbGVhdmUpIHNpbmNlIHRoZSBDU1MgY2xhc3NlcyBtYXkgYmUgYWRkZWQvcmVtb3ZlZCBhdCBkaWZmZXJlbnQgcG9pbnRzXG4gICAgICAgKiAgIGRlcGVuZGluZyBpZiBDU1Mgb3IgSmF2YVNjcmlwdCBhbmltYXRpb25zIGFyZSB1c2VkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB0aGUgQ1NTIGNsYXNzZXMgd2lsbCBiZSBhcHBsaWVkIHRvXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIHRoZSBDU1MgY2xhc3MoZXMpIHRoYXQgd2lsbCBiZSBhZGRlZCAobXVsdGlwbGUgY2xhc3NlcyBhcmUgc2VwYXJhdGVkIHZpYSBzcGFjZXMpXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1J1bm5lcn0gYW5pbWF0aW9uUnVubmVyIHRoZSBhbmltYXRpb24gcnVubmVyXG4gICAgICAgKi9cbiAgICAgIGFkZENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IHByZXBhcmVBbmltYXRlT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgb3B0aW9ucy5hZGRDbGFzcyA9IG1lcmdlQ2xhc3NlcyhvcHRpb25zLmFkZGNsYXNzLCBjbGFzc05hbWUpO1xuICAgICAgICByZXR1cm4gJCRhbmltYXRlUXVldWUucHVzaChlbGVtZW50LCAnYWRkQ2xhc3MnLCBvcHRpb25zKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjcmVtb3ZlQ2xhc3NcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFRyaWdnZXJzIGEgcmVtb3ZlQ2xhc3MgYW5pbWF0aW9uIHN1cnJvdW5kaW5nIHRoZSByZW1vdmFsIG9mIHRoZSBwcm92aWRlZCBDU1MgY2xhc3MoZXMpLiBVcG9uXG4gICAgICAgKiAgIGV4ZWN1dGlvbiwgdGhlIHJlbW92ZUNsYXNzIG9wZXJhdGlvbiB3aWxsIG9ubHkgYmUgaGFuZGxlZCBhZnRlciB0aGUgbmV4dCBkaWdlc3QgYW5kIGl0IHdpbGwgbm90IHRyaWdnZXIgYW5cbiAgICAgICAqICAgYW5pbWF0aW9uIGlmIGVsZW1lbnQgZG9lcyBub3QgY29udGFpbiB0aGUgQ1NTIGNsYXNzIG9yIGlmIHRoZSBjbGFzcyBpcyBhZGRlZCBhdCBhIGxhdGVyIHN0ZXAuXG4gICAgICAgKiAgIE5vdGUgdGhhdCBjbGFzcy1iYXNlZCBhbmltYXRpb25zIGFyZSB0cmVhdGVkIGRpZmZlcmVudGx5IGNvbXBhcmVkIHRvIHN0cnVjdHVyYWwgYW5pbWF0aW9uc1xuICAgICAgICogICAobGlrZSBlbnRlciwgbW92ZSBhbmQgbGVhdmUpIHNpbmNlIHRoZSBDU1MgY2xhc3NlcyBtYXkgYmUgYWRkZWQvcmVtb3ZlZCBhdCBkaWZmZXJlbnQgcG9pbnRzXG4gICAgICAgKiAgIGRlcGVuZGluZyBpZiBDU1Mgb3IgSmF2YVNjcmlwdCBhbmltYXRpb25zIGFyZSB1c2VkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB0aGUgQ1NTIGNsYXNzZXMgd2lsbCBiZSBhcHBsaWVkIHRvXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIHRoZSBDU1MgY2xhc3MoZXMpIHRoYXQgd2lsbCBiZSByZW1vdmVkIChtdWx0aXBsZSBjbGFzc2VzIGFyZSBzZXBhcmF0ZWQgdmlhIHNwYWNlcylcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMvc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICBUaGUgb2JqZWN0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gKiphZGRDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQgdG8gZWxlbWVudFxuICAgICAgICogICAtICoqZnJvbSoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYHRvYFxuICAgICAgICogICAtICoqcmVtb3ZlQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gcmVtb3ZlIGZyb20gZWxlbWVudFxuICAgICAgICogICAtICoqdG8qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCBlbmQgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYGZyb21gXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7UnVubmVyfSB0aGUgYW5pbWF0aW9uIHJ1bm5lclxuICAgICAgICovXG4gICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIG9wdGlvbnMucmVtb3ZlQ2xhc3MgPSBtZXJnZUNsYXNzZXMob3B0aW9ucy5yZW1vdmVDbGFzcywgY2xhc3NOYW1lKTtcbiAgICAgICAgcmV0dXJuICQkYW5pbWF0ZVF1ZXVlLnB1c2goZWxlbWVudCwgJ3JlbW92ZUNsYXNzJywgb3B0aW9ucyk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI3NldENsYXNzXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBQZXJmb3JtcyBib3RoIHRoZSBhZGRpdGlvbiBhbmQgcmVtb3ZhbCBvZiBhIENTUyBjbGFzc2VzIG9uIGFuIGVsZW1lbnQgYW5kIChkdXJpbmcgdGhlIHByb2Nlc3MpXG4gICAgICAgKiAgICB0cmlnZ2VycyBhbiBhbmltYXRpb24gc3Vycm91bmRpbmcgdGhlIGNsYXNzIGFkZGl0aW9uL3JlbW92YWwuIE11Y2ggbGlrZSBgJGFuaW1hdGUuYWRkQ2xhc3NgIGFuZFxuICAgICAgICogICAgYCRhbmltYXRlLnJlbW92ZUNsYXNzYCwgYHNldENsYXNzYCB3aWxsIG9ubHkgZXZhbHVhdGUgdGhlIGNsYXNzZXMgYmVpbmcgYWRkZWQvcmVtb3ZlZCBvbmNlIGEgZGlnZXN0IGhhc1xuICAgICAgICogICAgcGFzc2VkLiBOb3RlIHRoYXQgY2xhc3MtYmFzZWQgYW5pbWF0aW9ucyBhcmUgdHJlYXRlZCBkaWZmZXJlbnRseSBjb21wYXJlZCB0byBzdHJ1Y3R1cmFsIGFuaW1hdGlvbnNcbiAgICAgICAqICAgIChsaWtlIGVudGVyLCBtb3ZlIGFuZCBsZWF2ZSkgc2luY2UgdGhlIENTUyBjbGFzc2VzIG1heSBiZSBhZGRlZC9yZW1vdmVkIGF0IGRpZmZlcmVudCBwb2ludHNcbiAgICAgICAqICAgIGRlcGVuZGluZyBpZiBDU1Mgb3IgSmF2YVNjcmlwdCBhbmltYXRpb25zIGFyZSB1c2VkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB0aGUgQ1NTIGNsYXNzZXMgd2lsbCBiZSBhcHBsaWVkIHRvXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWRkIHRoZSBDU1MgY2xhc3MoZXMpIHRoYXQgd2lsbCBiZSBhZGRlZCAobXVsdGlwbGUgY2xhc3NlcyBhcmUgc2VwYXJhdGVkIHZpYSBzcGFjZXMpXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVtb3ZlIHRoZSBDU1MgY2xhc3MoZXMpIHRoYXQgd2lsbCBiZSByZW1vdmVkIChtdWx0aXBsZSBjbGFzc2VzIGFyZSBzZXBhcmF0ZWQgdmlhIHNwYWNlcylcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMvc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICBUaGUgb2JqZWN0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gKiphZGRDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQgdG8gZWxlbWVudFxuICAgICAgICogICAtICoqZnJvbSoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYHRvYFxuICAgICAgICogICAtICoqcmVtb3ZlQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gcmVtb3ZlIGZyb20gZWxlbWVudFxuICAgICAgICogICAtICoqdG8qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCBlbmQgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYGZyb21gXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7UnVubmVyfSB0aGUgYW5pbWF0aW9uIHJ1bm5lclxuICAgICAgICovXG4gICAgICBzZXRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgYWRkLCByZW1vdmUsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IHByZXBhcmVBbmltYXRlT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgb3B0aW9ucy5hZGRDbGFzcyA9IG1lcmdlQ2xhc3NlcyhvcHRpb25zLmFkZENsYXNzLCBhZGQpO1xuICAgICAgICBvcHRpb25zLnJlbW92ZUNsYXNzID0gbWVyZ2VDbGFzc2VzKG9wdGlvbnMucmVtb3ZlQ2xhc3MsIHJlbW92ZSk7XG4gICAgICAgIHJldHVybiAkJGFuaW1hdGVRdWV1ZS5wdXNoKGVsZW1lbnQsICdzZXRDbGFzcycsIG9wdGlvbnMpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNhbmltYXRlXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBQZXJmb3JtcyBhbiBpbmxpbmUgYW5pbWF0aW9uIG9uIHRoZSBlbGVtZW50IHdoaWNoIGFwcGxpZXMgdGhlIHByb3ZpZGVkIHRvIGFuZCBmcm9tIENTUyBzdHlsZXMgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiBJZiBhbnkgZGV0ZWN0ZWQgQ1NTIHRyYW5zaXRpb24sIGtleWZyYW1lIG9yIEphdmFTY3JpcHQgbWF0Y2hlcyB0aGUgcHJvdmlkZWQgY2xhc3NOYW1lIHZhbHVlLCB0aGVuIHRoZSBhbmltYXRpb24gd2lsbCB0YWtlXG4gICAgICAgKiBvbiB0aGUgcHJvdmlkZWQgc3R5bGVzLiBGb3IgZXhhbXBsZSwgaWYgYSB0cmFuc2l0aW9uIGFuaW1hdGlvbiBpcyBzZXQgZm9yIHRoZSBnaXZlbiBjbGFzc05hbWUsIHRoZW4gdGhlIHByb3ZpZGVkIGBmcm9tYCBhbmRcbiAgICAgICAqIGB0b2Agc3R5bGVzIHdpbGwgYmUgYXBwbGllZCBhbG9uZ3NpZGUgdGhlIGdpdmVuIHRyYW5zaXRpb24uIElmIHRoZSBDU1Mgc3R5bGUgcHJvdmlkZWQgaW4gYGZyb21gIGRvZXMgbm90IGhhdmUgYSBjb3JyZXNwb25kaW5nXG4gICAgICAgKiBzdHlsZSBpbiBgdG9gLCB0aGUgc3R5bGUgaW4gYGZyb21gIGlzIGFwcGxpZWQgaW1tZWRpYXRlbHksIGFuZCBubyBhbmltYXRpb24gaXMgcnVuLlxuICAgICAgICogSWYgYSBKYXZhU2NyaXB0IGFuaW1hdGlvbiBpcyBkZXRlY3RlZCB0aGVuIHRoZSBwcm92aWRlZCBzdHlsZXMgd2lsbCBiZSBnaXZlbiBpbiBhcyBmdW5jdGlvbiBwYXJhbWV0ZXJzIGludG8gdGhlIGBhbmltYXRlYFxuICAgICAgICogbWV0aG9kIChvciBhcyBwYXJ0IG9mIHRoZSBgb3B0aW9uc2AgcGFyYW1ldGVyKTpcbiAgICAgICAqXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogbmdNb2R1bGUuYW5pbWF0aW9uKCcubXktaW5saW5lLWFuaW1hdGlvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICogICByZXR1cm4ge1xuICAgICAgICogICAgIGFuaW1hdGUgOiBmdW5jdGlvbihlbGVtZW50LCBmcm9tLCB0bywgZG9uZSwgb3B0aW9ucykge1xuICAgICAgICogICAgICAgLy9hbmltYXRpb25cbiAgICAgICAqICAgICAgIGRvbmUoKTtcbiAgICAgICAqICAgICB9XG4gICAgICAgKiAgIH1cbiAgICAgICAqIH0pO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHRoZSBDU1Mgc3R5bGVzIHdpbGwgYmUgYXBwbGllZCB0b1xuICAgICAgICogQHBhcmFtIHtvYmplY3R9IGZyb20gdGhlIGZyb20gKHN0YXJ0aW5nKSBDU1Mgc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50IGFuZCBhY3Jvc3MgdGhlIGFuaW1hdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0byB0aGUgdG8gKGRlc3RpbmF0aW9uKSBDU1Mgc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50IGFuZCBhY3Jvc3MgdGhlIGFuaW1hdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gY2xhc3NOYW1lIGFuIG9wdGlvbmFsIENTUyBjbGFzcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24uIElmXG4gICAgICAgKiAgICB0aGlzIHZhbHVlIGlzIGxlZnQgYXMgZW1wdHkgdGhlbiBhIENTUyBjbGFzcyBvZiBgbmctaW5saW5lLWFuaW1hdGVgIHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgIChOb3RlIHRoYXQgaWYgbm8gYW5pbWF0aW9uIGlzIGRldGVjdGVkIHRoZW4gdGhpcyB2YWx1ZSB3aWxsIG5vdCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LilcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMvc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICBUaGUgb2JqZWN0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gKiphZGRDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQgdG8gZWxlbWVudFxuICAgICAgICogICAtICoqZnJvbSoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYHRvYFxuICAgICAgICogICAtICoqcmVtb3ZlQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gcmVtb3ZlIGZyb20gZWxlbWVudFxuICAgICAgICogICAtICoqdG8qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCBlbmQgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYGZyb21gXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7UnVubmVyfSB0aGUgYW5pbWF0aW9uIHJ1bm5lclxuICAgICAgICovXG4gICAgICBhbmltYXRlOiBmdW5jdGlvbihlbGVtZW50LCBmcm9tLCB0bywgY2xhc3NOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIG9wdGlvbnMuZnJvbSA9IG9wdGlvbnMuZnJvbSA/IGV4dGVuZChvcHRpb25zLmZyb20sIGZyb20pIDogZnJvbTtcbiAgICAgICAgb3B0aW9ucy50byAgID0gb3B0aW9ucy50byAgID8gZXh0ZW5kKG9wdGlvbnMudG8sIHRvKSAgICAgOiB0bztcblxuICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUgfHwgJ25nLWlubGluZS1hbmltYXRlJztcbiAgICAgICAgb3B0aW9ucy50ZW1wQ2xhc3NlcyA9IG1lcmdlQ2xhc3NlcyhvcHRpb25zLnRlbXBDbGFzc2VzLCBjbGFzc05hbWUpO1xuICAgICAgICByZXR1cm4gJCRhbmltYXRlUXVldWUucHVzaChlbGVtZW50LCAnYW5pbWF0ZScsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH07XG4gIH1dO1xufV07XG5cbnZhciAkJEFuaW1hdGVBc3luY1J1bkZhY3RvcnlQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckJHJBRicsIGZ1bmN0aW9uKCQkckFGKSB7XG4gICAgdmFyIHdhaXRRdWV1ZSA9IFtdO1xuXG4gICAgZnVuY3Rpb24gd2FpdEZvclRpY2soZm4pIHtcbiAgICAgIHdhaXRRdWV1ZS5wdXNoKGZuKTtcbiAgICAgIGlmICh3YWl0UXVldWUubGVuZ3RoID4gMSkgcmV0dXJuO1xuICAgICAgJCRyQUYoZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2FpdFF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgd2FpdFF1ZXVlW2ldKCk7XG4gICAgICAgIH1cbiAgICAgICAgd2FpdFF1ZXVlID0gW107XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFzc2VkID0gZmFsc2U7XG4gICAgICB3YWl0Rm9yVGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgcGFzc2VkID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChwYXNzZWQpIHtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdhaXRGb3JUaWNrKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICB9XTtcbn07XG5cbnZhciAkJEFuaW1hdGVSdW5uZXJGYWN0b3J5UHJvdmlkZXIgPSAvKiogQHRoaXMgKi8gZnVuY3Rpb24oKSB7XG4gIHRoaXMuJGdldCA9IFsnJHEnLCAnJHNuaWZmZXInLCAnJCRhbmltYXRlQXN5bmNSdW4nLCAnJCRpc0RvY3VtZW50SGlkZGVuJywgJyR0aW1lb3V0JyxcbiAgICAgICBmdW5jdGlvbigkcSwgICAkc25pZmZlciwgICAkJGFuaW1hdGVBc3luY1J1biwgICAkJGlzRG9jdW1lbnRIaWRkZW4sICAgJHRpbWVvdXQpIHtcblxuICAgIHZhciBJTklUSUFMX1NUQVRFID0gMDtcbiAgICB2YXIgRE9ORV9QRU5ESU5HX1NUQVRFID0gMTtcbiAgICB2YXIgRE9ORV9DT01QTEVURV9TVEFURSA9IDI7XG5cbiAgICBBbmltYXRlUnVubmVyLmNoYWluID0gZnVuY3Rpb24oY2hhaW4sIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgaW5kZXggPSAwO1xuXG4gICAgICBuZXh0KCk7XG4gICAgICBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICBpZiAoaW5kZXggPT09IGNoYWluLmxlbmd0aCkge1xuICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoYWluW2luZGV4XShmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBBbmltYXRlUnVubmVyLmFsbCA9IGZ1bmN0aW9uKHJ1bm5lcnMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgdmFyIHN0YXR1cyA9IHRydWU7XG4gICAgICBmb3JFYWNoKHJ1bm5lcnMsIGZ1bmN0aW9uKHJ1bm5lcikge1xuICAgICAgICBydW5uZXIuZG9uZShvblByb2dyZXNzKTtcbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBvblByb2dyZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgIHN0YXR1cyA9IHN0YXR1cyAmJiByZXNwb25zZTtcbiAgICAgICAgaWYgKCsrY291bnQgPT09IHJ1bm5lcnMubGVuZ3RoKSB7XG4gICAgICAgICAgY2FsbGJhY2soc3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBBbmltYXRlUnVubmVyKGhvc3QpIHtcbiAgICAgIHRoaXMuc2V0SG9zdChob3N0KTtcblxuICAgICAgdmFyIHJhZlRpY2sgPSAkJGFuaW1hdGVBc3luY1J1bigpO1xuICAgICAgdmFyIHRpbWVvdXRUaWNrID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgJHRpbWVvdXQoZm4sIDAsIGZhbHNlKTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuX2RvbmVDYWxsYmFja3MgPSBbXTtcbiAgICAgIHRoaXMuX3RpY2sgPSBmdW5jdGlvbihmbikge1xuICAgICAgICBpZiAoJCRpc0RvY3VtZW50SGlkZGVuKCkpIHtcbiAgICAgICAgICB0aW1lb3V0VGljayhmbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmFmVGljayhmbik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB0aGlzLl9zdGF0ZSA9IDA7XG4gICAgfVxuXG4gICAgQW5pbWF0ZVJ1bm5lci5wcm90b3R5cGUgPSB7XG4gICAgICBzZXRIb3N0OiBmdW5jdGlvbihob3N0KSB7XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3QgfHwge307XG4gICAgICB9LFxuXG4gICAgICBkb25lOiBmdW5jdGlvbihmbikge1xuICAgICAgICBpZiAodGhpcy5fc3RhdGUgPT09IERPTkVfQ09NUExFVEVfU1RBVEUpIHtcbiAgICAgICAgICBmbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2RvbmVDYWxsYmFja3MucHVzaChmbik7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHByb2dyZXNzOiBub29wLFxuXG4gICAgICBnZXRQcm9taXNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByb21pc2UpIHtcbiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgdGhpcy5wcm9taXNlID0gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBzZWxmLmRvbmUoZnVuY3Rpb24oc3RhdHVzKSB7XG4gICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlO1xuICAgICAgfSxcblxuICAgICAgdGhlbjogZnVuY3Rpb24ocmVzb2x2ZUhhbmRsZXIsIHJlamVjdEhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpLnRoZW4ocmVzb2x2ZUhhbmRsZXIsIHJlamVjdEhhbmRsZXIpO1xuICAgICAgfSxcblxuICAgICAgJ2NhdGNoJzogZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9taXNlKClbJ2NhdGNoJ10oaGFuZGxlcik7XG4gICAgICB9LFxuXG4gICAgICAnZmluYWxseSc6IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpWydmaW5hbGx5J10oaGFuZGxlcik7XG4gICAgICB9LFxuXG4gICAgICBwYXVzZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmhvc3QucGF1c2UpIHtcbiAgICAgICAgICB0aGlzLmhvc3QucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgcmVzdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaG9zdC5yZXN1bWUpIHtcbiAgICAgICAgICB0aGlzLmhvc3QucmVzdW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGVuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmhvc3QuZW5kKSB7XG4gICAgICAgICAgdGhpcy5ob3N0LmVuZCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodHJ1ZSk7XG4gICAgICB9LFxuXG4gICAgICBjYW5jZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5ob3N0LmNhbmNlbCkge1xuICAgICAgICAgIHRoaXMuaG9zdC5jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZXNvbHZlKGZhbHNlKTtcbiAgICAgIH0sXG5cbiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSA9PT0gSU5JVElBTF9TVEFURSkge1xuICAgICAgICAgIHNlbGYuX3N0YXRlID0gRE9ORV9QRU5ESU5HX1NUQVRFO1xuICAgICAgICAgIHNlbGYuX3RpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgX3Jlc29sdmU6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gRE9ORV9DT01QTEVURV9TVEFURSkge1xuICAgICAgICAgIGZvckVhY2godGhpcy5fZG9uZUNhbGxiYWNrcywgZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIGZuKHJlc3BvbnNlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLl9kb25lQ2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgdGhpcy5fc3RhdGUgPSBET05FX0NPTVBMRVRFX1NUQVRFO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBBbmltYXRlUnVubmVyO1xuICB9XTtcbn07XG5cbi8qIGV4cG9ydGVkICRDb3JlQW5pbWF0ZUNzc1Byb3ZpZGVyICovXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRhbmltYXRlQ3NzXG4gKiBAa2luZCBvYmplY3RcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGlzIGlzIHRoZSBjb3JlIHZlcnNpb24gb2YgYCRhbmltYXRlQ3NzYC4gQnkgZGVmYXVsdCwgb25seSB3aGVuIHRoZSBgbmdBbmltYXRlYCBpcyBpbmNsdWRlZCxcbiAqIHRoZW4gdGhlIGAkYW5pbWF0ZUNzc2Agc2VydmljZSB3aWxsIGFjdHVhbGx5IHBlcmZvcm0gYW5pbWF0aW9ucy5cbiAqXG4gKiBDbGljayBoZXJlIHtAbGluayBuZ0FuaW1hdGUuJGFuaW1hdGVDc3MgdG8gcmVhZCB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgJGFuaW1hdGVDc3N9LlxuICovXG52YXIgJENvcmVBbmltYXRlQ3NzUHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckJHJBRicsICckcScsICckJEFuaW1hdGVSdW5uZXInLCBmdW5jdGlvbigkJHJBRiwgJHEsICQkQW5pbWF0ZVJ1bm5lcikge1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGVsZW1lbnQsIGluaXRpYWxPcHRpb25zKSB7XG4gICAgICAvLyBhbGwgb2YgdGhlIGFuaW1hdGlvbiBmdW5jdGlvbnMgc2hvdWxkIGNyZWF0ZVxuICAgICAgLy8gYSBjb3B5IG9mIHRoZSBvcHRpb25zIGRhdGEsIGhvd2V2ZXIsIGlmIGFcbiAgICAgIC8vIHBhcmVudCBzZXJ2aWNlIGhhcyBhbHJlYWR5IGNyZWF0ZWQgYSBjb3B5IHRoZW5cbiAgICAgIC8vIHdlIHNob3VsZCBzdGljayB0byB1c2luZyB0aGF0XG4gICAgICB2YXIgb3B0aW9ucyA9IGluaXRpYWxPcHRpb25zIHx8IHt9O1xuICAgICAgaWYgKCFvcHRpb25zLiQkcHJlcGFyZWQpIHtcbiAgICAgICAgb3B0aW9ucyA9IGNvcHkob3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8vIHRoZXJlIGlzIG5vIHBvaW50IGluIGFwcGx5aW5nIHRoZSBzdHlsZXMgc2luY2VcbiAgICAgIC8vIHRoZXJlIGlzIG5vIGFuaW1hdGlvbiB0aGF0IGdvZXMgb24gYXQgYWxsIGluXG4gICAgICAvLyB0aGlzIHZlcnNpb24gb2YgJGFuaW1hdGVDc3MuXG4gICAgICBpZiAob3B0aW9ucy5jbGVhbnVwU3R5bGVzKSB7XG4gICAgICAgIG9wdGlvbnMuZnJvbSA9IG9wdGlvbnMudG8gPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5mcm9tKSB7XG4gICAgICAgIGVsZW1lbnQuY3NzKG9wdGlvbnMuZnJvbSk7XG4gICAgICAgIG9wdGlvbnMuZnJvbSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBjbG9zZWQsIHJ1bm5lciA9IG5ldyAkJEFuaW1hdGVSdW5uZXIoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0OiBydW4sXG4gICAgICAgIGVuZDogcnVuXG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBydW4oKSB7XG4gICAgICAgICQkckFGKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFwcGx5QW5pbWF0aW9uQ29udGVudHMoKTtcbiAgICAgICAgICBpZiAoIWNsb3NlZCkge1xuICAgICAgICAgICAgcnVubmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNsb3NlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcnVubmVyO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBhcHBseUFuaW1hdGlvbkNvbnRlbnRzKCkge1xuICAgICAgICBpZiAob3B0aW9ucy5hZGRDbGFzcykge1xuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3Mob3B0aW9ucy5hZGRDbGFzcyk7XG4gICAgICAgICAgb3B0aW9ucy5hZGRDbGFzcyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMucmVtb3ZlQ2xhc3MpIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKG9wdGlvbnMucmVtb3ZlQ2xhc3MpO1xuICAgICAgICAgIG9wdGlvbnMucmVtb3ZlQ2xhc3MgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRvKSB7XG4gICAgICAgICAgZWxlbWVudC5jc3Mob3B0aW9ucy50byk7XG4gICAgICAgICAgb3B0aW9ucy50byA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XTtcbn07XG5cbi8qIGdsb2JhbCBzdHJpcEhhc2g6IHRydWUgKi9cblxuLyoqXG4gKiAhIFRoaXMgaXMgYSBwcml2YXRlIHVuZG9jdW1lbnRlZCBzZXJ2aWNlICFcbiAqXG4gKiBAbmFtZSAkYnJvd3NlclxuICogQHJlcXVpcmVzICRsb2dcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBvYmplY3QgaGFzIHR3byBnb2FsczpcbiAqXG4gKiAtIGhpZGUgYWxsIHRoZSBnbG9iYWwgc3RhdGUgaW4gdGhlIGJyb3dzZXIgY2F1c2VkIGJ5IHRoZSB3aW5kb3cgb2JqZWN0XG4gKiAtIGFic3RyYWN0IGF3YXkgYWxsIHRoZSBicm93c2VyIHNwZWNpZmljIGZlYXR1cmVzIGFuZCBpbmNvbnNpc3RlbmNpZXNcbiAqXG4gKiBGb3IgdGVzdHMgd2UgcHJvdmlkZSB7QGxpbmsgbmdNb2NrLiRicm93c2VyIG1vY2sgaW1wbGVtZW50YXRpb259IG9mIHRoZSBgJGJyb3dzZXJgXG4gKiBzZXJ2aWNlLCB3aGljaCBjYW4gYmUgdXNlZCBmb3IgY29udmVuaWVudCB0ZXN0aW5nIG9mIHRoZSBhcHBsaWNhdGlvbiB3aXRob3V0IHRoZSBpbnRlcmFjdGlvbiB3aXRoXG4gKiB0aGUgcmVhbCBicm93c2VyIGFwaXMuXG4gKi9cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IHdpbmRvdyBUaGUgZ2xvYmFsIHdpbmRvdyBvYmplY3QuXG4gKiBAcGFyYW0ge29iamVjdH0gZG9jdW1lbnQgalF1ZXJ5IHdyYXBwZWQgZG9jdW1lbnQuXG4gKiBAcGFyYW0ge29iamVjdH0gJGxvZyB3aW5kb3cuY29uc29sZSBvciBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBpbnRlcmZhY2UuXG4gKiBAcGFyYW0ge29iamVjdH0gJHNuaWZmZXIgJHNuaWZmZXIgc2VydmljZVxuICovXG5mdW5jdGlvbiBCcm93c2VyKHdpbmRvdywgZG9jdW1lbnQsICRsb2csICRzbmlmZmVyKSB7XG4gIHZhciBzZWxmID0gdGhpcyxcbiAgICAgIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLFxuICAgICAgaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5LFxuICAgICAgc2V0VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0LFxuICAgICAgY2xlYXJUaW1lb3V0ID0gd2luZG93LmNsZWFyVGltZW91dCxcbiAgICAgIHBlbmRpbmdEZWZlcklkcyA9IHt9O1xuXG4gIHNlbGYuaXNNb2NrID0gZmFsc2U7XG5cbiAgdmFyIG91dHN0YW5kaW5nUmVxdWVzdENvdW50ID0gMDtcbiAgdmFyIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcyA9IFtdO1xuXG4gIC8vIFRPRE8odm9qdGEpOiByZW1vdmUgdGhpcyB0ZW1wb3JhcnkgYXBpXG4gIHNlbGYuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCA9IGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0O1xuICBzZWxmLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPSBmdW5jdGlvbigpIHsgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrKzsgfTtcblxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIGBmbmAgZnVuY3Rpb24oc3VwcG9ydHMgY3VycnlpbmcpIGFuZCBkZWNyZW1lbnRzIHRoZSBgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzYFxuICAgKiBjb3VudGVyLiBJZiB0aGUgY291bnRlciByZWFjaGVzIDAsIGFsbCB0aGUgYG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrc2AgYXJlIGV4ZWN1dGVkLlxuICAgKi9cbiAgZnVuY3Rpb24gY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoZm4pIHtcbiAgICB0cnkge1xuICAgICAgZm4uYXBwbHkobnVsbCwgc2xpY2VBcmdzKGFyZ3VtZW50cywgMSkpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudC0tO1xuICAgICAgaWYgKG91dHN0YW5kaW5nUmVxdWVzdENvdW50ID09PSAwKSB7XG4gICAgICAgIHdoaWxlIChvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MubGVuZ3RoKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5wb3AoKSgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICRsb2cuZXJyb3IoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SGFzaCh1cmwpIHtcbiAgICB2YXIgaW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xuICAgIHJldHVybiBpbmRleCA9PT0gLTEgPyAnJyA6IHVybC5zdWJzdHIoaW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIFRPRE8odm9qdGEpOiBwcmVmaXggdGhpcyBtZXRob2Qgd2l0aCAkJCA/XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2sgRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIG5vIG91dHN0YW5kaW5nIHJlcXVlc3RcbiAgICovXG4gIHNlbGYubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgaWYgKG91dHN0YW5kaW5nUmVxdWVzdENvdW50ID09PSAwKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgfVxuICB9O1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIFVSTCBBUElcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICB2YXIgY2FjaGVkU3RhdGUsIGxhc3RIaXN0b3J5U3RhdGUsXG4gICAgICBsYXN0QnJvd3NlclVybCA9IGxvY2F0aW9uLmhyZWYsXG4gICAgICBiYXNlRWxlbWVudCA9IGRvY3VtZW50LmZpbmQoJ2Jhc2UnKSxcbiAgICAgIHBlbmRpbmdMb2NhdGlvbiA9IG51bGwsXG4gICAgICBnZXRDdXJyZW50U3RhdGUgPSAhJHNuaWZmZXIuaGlzdG9yeSA/IG5vb3AgOiBmdW5jdGlvbiBnZXRDdXJyZW50U3RhdGUoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIGhpc3Rvcnkuc3RhdGU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBNU0lFIGNhbiByZXBvcnRlZGx5IHRocm93IHdoZW4gdGhlcmUgaXMgbm8gc3RhdGUgKFVOQ09ORklSTUVEKS5cbiAgICAgICAgfVxuICAgICAgfTtcblxuICBjYWNoZVN0YXRlKCk7XG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI3VybFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogR0VUVEVSOlxuICAgKiBXaXRob3V0IGFueSBhcmd1bWVudCwgdGhpcyBtZXRob2QganVzdCByZXR1cm5zIGN1cnJlbnQgdmFsdWUgb2YgbG9jYXRpb24uaHJlZi5cbiAgICpcbiAgICogU0VUVEVSOlxuICAgKiBXaXRoIGF0IGxlYXN0IG9uZSBhcmd1bWVudCwgdGhpcyBtZXRob2Qgc2V0cyB1cmwgdG8gbmV3IHZhbHVlLlxuICAgKiBJZiBodG1sNSBoaXN0b3J5IGFwaSBzdXBwb3J0ZWQsIHB1c2hTdGF0ZS9yZXBsYWNlU3RhdGUgaXMgdXNlZCwgb3RoZXJ3aXNlXG4gICAqIGxvY2F0aW9uLmhyZWYvbG9jYXRpb24ucmVwbGFjZSBpcyB1c2VkLlxuICAgKiBSZXR1cm5zIGl0cyBvd24gaW5zdGFuY2UgdG8gYWxsb3cgY2hhaW5pbmdcbiAgICpcbiAgICogTk9URTogdGhpcyBhcGkgaXMgaW50ZW5kZWQgZm9yIHVzZSBvbmx5IGJ5IHRoZSAkbG9jYXRpb24gc2VydmljZS4gUGxlYXNlIHVzZSB0aGVcbiAgICoge0BsaW5rIG5nLiRsb2NhdGlvbiAkbG9jYXRpb24gc2VydmljZX0gdG8gY2hhbmdlIHVybC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBOZXcgdXJsICh3aGVuIHVzZWQgYXMgc2V0dGVyKVxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSByZXBsYWNlIFNob3VsZCBuZXcgdXJsIHJlcGxhY2UgY3VycmVudCBoaXN0b3J5IHJlY29yZD9cbiAgICogQHBhcmFtIHtvYmplY3Q9fSBzdGF0ZSBvYmplY3QgdG8gdXNlIHdpdGggcHVzaFN0YXRlL3JlcGxhY2VTdGF0ZVxuICAgKi9cbiAgc2VsZi51cmwgPSBmdW5jdGlvbih1cmwsIHJlcGxhY2UsIHN0YXRlKSB7XG4gICAgLy8gSW4gbW9kZXJuIGJyb3dzZXJzIGBoaXN0b3J5LnN0YXRlYCBpcyBgbnVsbGAgYnkgZGVmYXVsdDsgdHJlYXRpbmcgaXQgc2VwYXJhdGVseVxuICAgIC8vIGZyb20gYHVuZGVmaW5lZGAgd291bGQgY2F1c2UgYCRicm93c2VyLnVybCgnL2ZvbycpYCB0byBjaGFuZ2UgYGhpc3Rvcnkuc3RhdGVgXG4gICAgLy8gdG8gdW5kZWZpbmVkIHZpYSBgcHVzaFN0YXRlYC4gSW5zdGVhZCwgbGV0J3MgY2hhbmdlIGB1bmRlZmluZWRgIHRvIGBudWxsYCBoZXJlLlxuICAgIGlmIChpc1VuZGVmaW5lZChzdGF0ZSkpIHtcbiAgICAgIHN0YXRlID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBBbmRyb2lkIEJyb3dzZXIgQkZDYWNoZSBjYXVzZXMgbG9jYXRpb24sIGhpc3RvcnkgcmVmZXJlbmNlIHRvIGJlY29tZSBzdGFsZS5cbiAgICBpZiAobG9jYXRpb24gIT09IHdpbmRvdy5sb2NhdGlvbikgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgaWYgKGhpc3RvcnkgIT09IHdpbmRvdy5oaXN0b3J5KSBoaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG5cbiAgICAvLyBzZXR0ZXJcbiAgICBpZiAodXJsKSB7XG4gICAgICB2YXIgc2FtZVN0YXRlID0gbGFzdEhpc3RvcnlTdGF0ZSA9PT0gc3RhdGU7XG5cbiAgICAgIC8vIERvbid0IGNoYW5nZSBhbnl0aGluZyBpZiBwcmV2aW91cyBhbmQgY3VycmVudCBVUkxzIGFuZCBzdGF0ZXMgbWF0Y2guIFRoaXMgYWxzbyBwcmV2ZW50c1xuICAgICAgLy8gSUU8MTAgZnJvbSBnZXR0aW5nIGludG8gcmVkaXJlY3QgbG9vcCB3aGVuIGluIExvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsIG1vZGUuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9jb21taXQvZmZiMjcwMVxuICAgICAgaWYgKGxhc3RCcm93c2VyVXJsID09PSB1cmwgJiYgKCEkc25pZmZlci5oaXN0b3J5IHx8IHNhbWVTdGF0ZSkpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG4gICAgICB2YXIgc2FtZUJhc2UgPSBsYXN0QnJvd3NlclVybCAmJiBzdHJpcEhhc2gobGFzdEJyb3dzZXJVcmwpID09PSBzdHJpcEhhc2godXJsKTtcbiAgICAgIGxhc3RCcm93c2VyVXJsID0gdXJsO1xuICAgICAgbGFzdEhpc3RvcnlTdGF0ZSA9IHN0YXRlO1xuICAgICAgLy8gRG9uJ3QgdXNlIGhpc3RvcnkgQVBJIGlmIG9ubHkgdGhlIGhhc2ggY2hhbmdlZFxuICAgICAgLy8gZHVlIHRvIGEgYnVnIGluIElFMTAvSUUxMSB3aGljaCBsZWFkc1xuICAgICAgLy8gdG8gbm90IGZpcmluZyBhIGBoYXNoY2hhbmdlYCBub3IgYHBvcHN0YXRlYCBldmVudFxuICAgICAgLy8gaW4gc29tZSBjYXNlcyAoc2VlICM5MTQzKS5cbiAgICAgIGlmICgkc25pZmZlci5oaXN0b3J5ICYmICghc2FtZUJhc2UgfHwgIXNhbWVTdGF0ZSkpIHtcbiAgICAgICAgaGlzdG9yeVtyZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oc3RhdGUsICcnLCB1cmwpO1xuICAgICAgICBjYWNoZVN0YXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXNhbWVCYXNlKSB7XG4gICAgICAgICAgcGVuZGluZ0xvY2F0aW9uID0gdXJsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgICAgbG9jYXRpb24ucmVwbGFjZSh1cmwpO1xuICAgICAgICB9IGVsc2UgaWYgKCFzYW1lQmFzZSkge1xuICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSB1cmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbG9jYXRpb24uaGFzaCA9IGdldEhhc2godXJsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobG9jYXRpb24uaHJlZiAhPT0gdXJsKSB7XG4gICAgICAgICAgcGVuZGluZ0xvY2F0aW9uID0gdXJsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocGVuZGluZ0xvY2F0aW9uKSB7XG4gICAgICAgIHBlbmRpbmdMb2NhdGlvbiA9IHVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIC8vIGdldHRlclxuICAgIH0gZWxzZSB7XG4gICAgICAvLyAtIHBlbmRpbmdMb2NhdGlvbiBpcyBuZWVkZWQgYXMgYnJvd3NlcnMgZG9uJ3QgYWxsb3cgdG8gcmVhZCBvdXRcbiAgICAgIC8vICAgdGhlIG5ldyBsb2NhdGlvbi5ocmVmIGlmIGEgcmVsb2FkIGhhcHBlbmVkIG9yIGlmIHRoZXJlIGlzIGEgYnVnIGxpa2UgaW4gaU9TIDkgKHNlZVxuICAgICAgLy8gICBodHRwczovL29wZW5yYWRhci5hcHBzcG90LmNvbS8yMjE4NjEwOSkuXG4gICAgICByZXR1cm4gcGVuZGluZ0xvY2F0aW9uIHx8IGxvY2F0aW9uLmhyZWY7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNzdGF0ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgYSBnZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiBoaXN0b3J5LnN0YXRlIG9yIG51bGwgaWYgaGlzdG9yeS5zdGF0ZSBpcyB1bmRlZmluZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IHN0YXRlXG4gICAqL1xuICBzZWxmLnN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGNhY2hlZFN0YXRlO1xuICB9O1xuXG4gIHZhciB1cmxDaGFuZ2VMaXN0ZW5lcnMgPSBbXSxcbiAgICAgIHVybENoYW5nZUluaXQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBjYWNoZVN0YXRlQW5kRmlyZVVybENoYW5nZSgpIHtcbiAgICBwZW5kaW5nTG9jYXRpb24gPSBudWxsO1xuICAgIGZpcmVTdGF0ZU9yVXJsQ2hhbmdlKCk7XG4gIH1cblxuICAvLyBUaGlzIHZhcmlhYmxlIHNob3VsZCBiZSB1c2VkICpvbmx5KiBpbnNpZGUgdGhlIGNhY2hlU3RhdGUgZnVuY3Rpb24uXG4gIHZhciBsYXN0Q2FjaGVkU3RhdGUgPSBudWxsO1xuICBmdW5jdGlvbiBjYWNoZVN0YXRlKCkge1xuICAgIC8vIFRoaXMgc2hvdWxkIGJlIHRoZSBvbmx5IHBsYWNlIGluICRicm93c2VyIHdoZXJlIGBoaXN0b3J5LnN0YXRlYCBpcyByZWFkLlxuICAgIGNhY2hlZFN0YXRlID0gZ2V0Q3VycmVudFN0YXRlKCk7XG4gICAgY2FjaGVkU3RhdGUgPSBpc1VuZGVmaW5lZChjYWNoZWRTdGF0ZSkgPyBudWxsIDogY2FjaGVkU3RhdGU7XG5cbiAgICAvLyBQcmV2ZW50IGNhbGxiYWNrcyBmbyBmaXJlIHR3aWNlIGlmIGJvdGggaGFzaGNoYW5nZSAmIHBvcHN0YXRlIHdlcmUgZmlyZWQuXG4gICAgaWYgKGVxdWFscyhjYWNoZWRTdGF0ZSwgbGFzdENhY2hlZFN0YXRlKSkge1xuICAgICAgY2FjaGVkU3RhdGUgPSBsYXN0Q2FjaGVkU3RhdGU7XG4gICAgfVxuXG4gICAgbGFzdENhY2hlZFN0YXRlID0gY2FjaGVkU3RhdGU7XG4gICAgbGFzdEhpc3RvcnlTdGF0ZSA9IGNhY2hlZFN0YXRlO1xuICB9XG5cbiAgZnVuY3Rpb24gZmlyZVN0YXRlT3JVcmxDaGFuZ2UoKSB7XG4gICAgdmFyIHByZXZMYXN0SGlzdG9yeVN0YXRlID0gbGFzdEhpc3RvcnlTdGF0ZTtcbiAgICBjYWNoZVN0YXRlKCk7XG5cbiAgICBpZiAobGFzdEJyb3dzZXJVcmwgPT09IHNlbGYudXJsKCkgJiYgcHJldkxhc3RIaXN0b3J5U3RhdGUgPT09IGNhY2hlZFN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGFzdEJyb3dzZXJVcmwgPSBzZWxmLnVybCgpO1xuICAgIGxhc3RIaXN0b3J5U3RhdGUgPSBjYWNoZWRTdGF0ZTtcbiAgICBmb3JFYWNoKHVybENoYW5nZUxpc3RlbmVycywgZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICAgIGxpc3RlbmVyKHNlbGYudXJsKCksIGNhY2hlZFN0YXRlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNvblVybENoYW5nZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXIgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCwgd2hlbiB1cmwgY2hhbmdlcy5cbiAgICpcbiAgICogSXQncyBvbmx5IGNhbGxlZCB3aGVuIHRoZSB1cmwgaXMgY2hhbmdlZCBmcm9tIG91dHNpZGUgb2YgQW5ndWxhckpTOlxuICAgKiAtIHVzZXIgdHlwZXMgZGlmZmVyZW50IHVybCBpbnRvIGFkZHJlc3MgYmFyXG4gICAqIC0gdXNlciBjbGlja3Mgb24gaGlzdG9yeSAoZm9yd2FyZC9iYWNrKSBidXR0b25cbiAgICogLSB1c2VyIGNsaWNrcyBvbiBhIGxpbmtcbiAgICpcbiAgICogSXQncyBub3QgY2FsbGVkIHdoZW4gdXJsIGlzIGNoYW5nZWQgYnkgJGJyb3dzZXIudXJsKCkgbWV0aG9kXG4gICAqXG4gICAqIFRoZSBsaXN0ZW5lciBnZXRzIGNhbGxlZCB3aXRoIG5ldyB1cmwgYXMgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBOT1RFOiB0aGlzIGFwaSBpcyBpbnRlbmRlZCBmb3IgdXNlIG9ubHkgYnkgdGhlICRsb2NhdGlvbiBzZXJ2aWNlLiBQbGVhc2UgdXNlIHRoZVxuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uICRsb2NhdGlvbiBzZXJ2aWNlfSB0byBtb25pdG9yIHVybCBjaGFuZ2VzIGluIEFuZ3VsYXJKUyBhcHBzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyl9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHVybCBjaGFuZ2VzLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihzdHJpbmcpfSBSZXR1cm5zIHRoZSByZWdpc3RlcmVkIGxpc3RlbmVyIGZuIC0gaGFuZHkgaWYgdGhlIGZuIGlzIGFub255bW91cy5cbiAgICovXG4gIHNlbGYub25VcmxDaGFuZ2UgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIC8vIFRPRE8odm9qdGEpOiByZWZhY3RvciB0byB1c2Ugbm9kZSdzIHN5bnRheCBmb3IgZXZlbnRzXG4gICAgaWYgKCF1cmxDaGFuZ2VJbml0KSB7XG4gICAgICAvLyBXZSBsaXN0ZW4gb24gYm90aCAoaGFzaGNoYW5nZS9wb3BzdGF0ZSkgd2hlbiBhdmFpbGFibGUsIGFzIHNvbWUgYnJvd3NlcnMgZG9uJ3RcbiAgICAgIC8vIGZpcmUgcG9wc3RhdGUgd2hlbiB1c2VyIGNoYW5nZXMgdGhlIGFkZHJlc3MgYmFyIGFuZCBkb24ndCBmaXJlIGhhc2hjaGFuZ2Ugd2hlbiB1cmxcbiAgICAgIC8vIGNoYW5nZWQgYnkgcHVzaC9yZXBsYWNlU3RhdGVcblxuICAgICAgLy8gaHRtbDUgaGlzdG9yeSBhcGkgLSBwb3BzdGF0ZSBldmVudFxuICAgICAgaWYgKCRzbmlmZmVyLmhpc3RvcnkpIGpxTGl0ZSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGNhY2hlU3RhdGVBbmRGaXJlVXJsQ2hhbmdlKTtcbiAgICAgIC8vIGhhc2hjaGFuZ2UgZXZlbnRcbiAgICAgIGpxTGl0ZSh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgY2FjaGVTdGF0ZUFuZEZpcmVVcmxDaGFuZ2UpO1xuXG4gICAgICB1cmxDaGFuZ2VJbml0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB1cmxDaGFuZ2VMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIGNhbGxiYWNrO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBSZW1vdmUgcG9wc3RhdGUgYW5kIGhhc2hjaGFuZ2UgaGFuZGxlciBmcm9tIHdpbmRvdy5cbiAgICpcbiAgICogTk9URTogdGhpcyBhcGkgaXMgaW50ZW5kZWQgZm9yIHVzZSBvbmx5IGJ5ICRyb290U2NvcGUuXG4gICAqL1xuICBzZWxmLiQkYXBwbGljYXRpb25EZXN0cm95ZWQgPSBmdW5jdGlvbigpIHtcbiAgICBqcUxpdGUod2luZG93KS5vZmYoJ2hhc2hjaGFuZ2UgcG9wc3RhdGUnLCBjYWNoZVN0YXRlQW5kRmlyZVVybENoYW5nZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSB1cmwgaGFzIGNoYW5nZWQgb3V0c2lkZSBvZiBBbmd1bGFySlMuXG4gICAqIE5lZWRzIHRvIGJlIGV4cG9ydGVkIHRvIGJlIGFibGUgdG8gY2hlY2sgZm9yIGNoYW5nZXMgdGhhdCBoYXZlIGJlZW4gZG9uZSBpbiBzeW5jLFxuICAgKiBhcyBoYXNoY2hhbmdlL3BvcHN0YXRlIGV2ZW50cyBmaXJlIGluIGFzeW5jLlxuICAgKi9cbiAgc2VsZi4kJGNoZWNrVXJsQ2hhbmdlID0gZmlyZVN0YXRlT3JVcmxDaGFuZ2U7XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gTWlzYyBBUElcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjYmFzZUhyZWZcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHVybnMgY3VycmVudCA8YmFzZSBocmVmPlxuICAgKiAoYWx3YXlzIHJlbGF0aXZlIC0gd2l0aG91dCBkb21haW4pXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjdXJyZW50IGJhc2UgaHJlZlxuICAgKi9cbiAgc2VsZi5iYXNlSHJlZiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBocmVmID0gYmFzZUVsZW1lbnQuYXR0cignaHJlZicpO1xuICAgIHJldHVybiBocmVmID8gaHJlZi5yZXBsYWNlKC9eKGh0dHBzPzopP1xcL1xcL1teL10qLywgJycpIDogJyc7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI2RlZmVyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gQSBmdW5jdGlvbiwgd2hvJ3MgZXhlY3V0aW9uIHNob3VsZCBiZSBkZWZlcnJlZC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBbZGVsYXk9MF0gb2YgbWlsbGlzZWNvbmRzIHRvIGRlZmVyIHRoZSBmdW5jdGlvbiBleGVjdXRpb24uXG4gICAqIEByZXR1cm5zIHsqfSBEZWZlcklkIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2FuY2VsIHRoZSB0YXNrIHZpYSBgJGJyb3dzZXIuZGVmZXIuY2FuY2VsKClgLlxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRXhlY3V0ZXMgYSBmbiBhc3luY2hyb25vdXNseSB2aWEgYHNldFRpbWVvdXQoZm4sIGRlbGF5KWAuXG4gICAqXG4gICAqIFVubGlrZSB3aGVuIGNhbGxpbmcgYHNldFRpbWVvdXRgIGRpcmVjdGx5LCBpbiB0ZXN0IHRoaXMgZnVuY3Rpb24gaXMgbW9ja2VkIGFuZCBpbnN0ZWFkIG9mIHVzaW5nXG4gICAqIGBzZXRUaW1lb3V0YCBpbiB0ZXN0cywgdGhlIGZucyBhcmUgcXVldWVkIGluIGFuIGFycmF5LCB3aGljaCBjYW4gYmUgcHJvZ3JhbW1hdGljYWxseSBmbHVzaGVkXG4gICAqIHZpYSBgJGJyb3dzZXIuZGVmZXIuZmx1c2goKWAuXG4gICAqXG4gICAqL1xuICBzZWxmLmRlZmVyID0gZnVuY3Rpb24oZm4sIGRlbGF5KSB7XG4gICAgdmFyIHRpbWVvdXRJZDtcbiAgICBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCsrO1xuICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBkZWxldGUgcGVuZGluZ0RlZmVySWRzW3RpbWVvdXRJZF07XG4gICAgICBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChmbik7XG4gICAgfSwgZGVsYXkgfHwgMCk7XG4gICAgcGVuZGluZ0RlZmVySWRzW3RpbWVvdXRJZF0gPSB0cnVlO1xuICAgIHJldHVybiB0aW1lb3V0SWQ7XG4gIH07XG5cblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjZGVmZXIuY2FuY2VsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDYW5jZWxzIGEgZGVmZXJyZWQgdGFzayBpZGVudGlmaWVkIHdpdGggYGRlZmVySWRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGRlZmVySWQgVG9rZW4gcmV0dXJuZWQgYnkgdGhlIGAkYnJvd3Nlci5kZWZlcmAgZnVuY3Rpb24uXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdGFzayBoYXNuJ3QgZXhlY3V0ZWQgeWV0IGFuZCB3YXMgc3VjY2Vzc2Z1bGx5XG4gICAqICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZC5cbiAgICovXG4gIHNlbGYuZGVmZXIuY2FuY2VsID0gZnVuY3Rpb24oZGVmZXJJZCkge1xuICAgIGlmIChwZW5kaW5nRGVmZXJJZHNbZGVmZXJJZF0pIHtcbiAgICAgIGRlbGV0ZSBwZW5kaW5nRGVmZXJJZHNbZGVmZXJJZF07XG4gICAgICBjbGVhclRpbWVvdXQoZGVmZXJJZCk7XG4gICAgICBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbn1cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkQnJvd3NlclByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCAnJGxvZycsICckc25pZmZlcicsICckZG9jdW1lbnQnLFxuICAgICAgZnVuY3Rpb24oJHdpbmRvdywgJGxvZywgJHNuaWZmZXIsICRkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IEJyb3dzZXIoJHdpbmRvdywgJGRvY3VtZW50LCAkbG9nLCAkc25pZmZlcik7XG4gICAgICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGNhY2hlRmFjdG9yeVxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZhY3RvcnkgdGhhdCBjb25zdHJ1Y3RzIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3RzIGFuZCBnaXZlcyBhY2Nlc3MgdG9cbiAqIHRoZW0uXG4gKlxuICogYGBganNcbiAqXG4gKiAgdmFyIGNhY2hlID0gJGNhY2hlRmFjdG9yeSgnY2FjaGVJZCcpO1xuICogIGV4cGVjdCgkY2FjaGVGYWN0b3J5LmdldCgnY2FjaGVJZCcpKS50b0JlKGNhY2hlKTtcbiAqICBleHBlY3QoJGNhY2hlRmFjdG9yeS5nZXQoJ25vU3VjaENhY2hlSWQnKSkubm90LnRvQmVEZWZpbmVkKCk7XG4gKlxuICogIGNhY2hlLnB1dChcImtleVwiLCBcInZhbHVlXCIpO1xuICogIGNhY2hlLnB1dChcImFub3RoZXIga2V5XCIsIFwiYW5vdGhlciB2YWx1ZVwiKTtcbiAqXG4gKiAgLy8gV2UndmUgc3BlY2lmaWVkIG5vIG9wdGlvbnMgb24gY3JlYXRpb25cbiAqICBleHBlY3QoY2FjaGUuaW5mbygpKS50b0VxdWFsKHtpZDogJ2NhY2hlSWQnLCBzaXplOiAyfSk7XG4gKlxuICogYGBgXG4gKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZUlkIE5hbWUgb3IgaWQgb2YgdGhlIG5ld2x5IGNyZWF0ZWQgY2FjaGUuXG4gKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgT3B0aW9ucyBvYmplY3QgdGhhdCBzcGVjaWZpZXMgdGhlIGNhY2hlIGJlaGF2aW9yLiBQcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBge251bWJlcj19YCBgY2FwYWNpdHlgIOKAlCB0dXJucyB0aGUgY2FjaGUgaW50byBMUlUgY2FjaGUuXG4gKlxuICogQHJldHVybnMge29iamVjdH0gTmV3bHkgY3JlYXRlZCBjYWNoZSBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHNldCBvZiBtZXRob2RzOlxuICpcbiAqIC0gYHtvYmplY3R9YCBgaW5mbygpYCDigJQgUmV0dXJucyBpZCwgc2l6ZSwgYW5kIG9wdGlvbnMgb2YgY2FjaGUuXG4gKiAtIGB7eyp9fWAgYHB1dCh7c3RyaW5nfSBrZXksIHsqfSB2YWx1ZSlgIOKAlCBQdXRzIGEgbmV3IGtleS12YWx1ZSBwYWlyIGludG8gdGhlIGNhY2hlIGFuZCByZXR1cm5zXG4gKiAgIGl0LlxuICogLSBge3sqfX1gIGBnZXQoe3N0cmluZ30ga2V5KWAg4oCUIFJldHVybnMgY2FjaGVkIHZhbHVlIGZvciBga2V5YCBvciB1bmRlZmluZWQgZm9yIGNhY2hlIG1pc3MuXG4gKiAtIGB7dm9pZH1gIGByZW1vdmUoe3N0cmluZ30ga2V5KWAg4oCUIFJlbW92ZXMgYSBrZXktdmFsdWUgcGFpciBmcm9tIHRoZSBjYWNoZS5cbiAqIC0gYHt2b2lkfWAgYHJlbW92ZUFsbCgpYCDigJQgUmVtb3ZlcyBhbGwgY2FjaGVkIHZhbHVlcy5cbiAqIC0gYHt2b2lkfWAgYGRlc3Ryb3koKWAg4oCUIFJlbW92ZXMgcmVmZXJlbmNlcyB0byB0aGlzIGNhY2hlIGZyb20gJGNhY2hlRmFjdG9yeS5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwiY2FjaGVFeGFtcGxlQXBwXCIgbmFtZT1cImNhY2hlLWZhY3RvcnlcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJDYWNoZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5ld0NhY2hlS2V5XCIgcGxhY2Vob2xkZXI9XCJLZXlcIj5cbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5ld0NhY2hlVmFsdWVcIiBwbGFjZWhvbGRlcj1cIlZhbHVlXCI+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwicHV0KG5ld0NhY2hlS2V5LCBuZXdDYWNoZVZhbHVlKVwiPkNhY2hlPC9idXR0b24+XG5cbiAgICAgICAgIDxwIG5nLWlmPVwia2V5cy5sZW5ndGhcIj5DYWNoZWQgVmFsdWVzPC9wPlxuICAgICAgICAgPGRpdiBuZy1yZXBlYXQ9XCJrZXkgaW4ga2V5c1wiPlxuICAgICAgICAgICA8c3BhbiBuZy1iaW5kPVwia2V5XCI+PC9zcGFuPlxuICAgICAgICAgICA8c3Bhbj46IDwvc3Bhbj5cbiAgICAgICAgICAgPGIgbmctYmluZD1cImNhY2hlLmdldChrZXkpXCI+PC9iPlxuICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgIDxwPkNhY2hlIEluZm88L3A+XG4gICAgICAgICA8ZGl2IG5nLXJlcGVhdD1cIihrZXksIHZhbHVlKSBpbiBjYWNoZS5pbmZvKClcIj5cbiAgICAgICAgICAgPHNwYW4gbmctYmluZD1cImtleVwiPjwvc3Bhbj5cbiAgICAgICAgICAgPHNwYW4+OiA8L3NwYW4+XG4gICAgICAgICAgIDxiIG5nLWJpbmQ9XCJ2YWx1ZVwiPjwvYj5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnY2FjaGVFeGFtcGxlQXBwJywgW10pLlxuICAgICAgICAgY29udHJvbGxlcignQ2FjaGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRzY29wZSwgJGNhY2hlRmFjdG9yeSkge1xuICAgICAgICAgICAkc2NvcGUua2V5cyA9IFtdO1xuICAgICAgICAgICAkc2NvcGUuY2FjaGUgPSAkY2FjaGVGYWN0b3J5KCdjYWNoZUlkJyk7XG4gICAgICAgICAgICRzY29wZS5wdXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLmNhY2hlLmdldChrZXkpKSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAkc2NvcGUuY2FjaGUucHV0KGtleSwgYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkgPyBudWxsIDogdmFsdWUpO1xuICAgICAgICAgICB9O1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICBwIHtcbiAgICAgICAgIG1hcmdpbjogMTBweCAwIDNweDtcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuZnVuY3Rpb24gJENhY2hlRmFjdG9yeVByb3ZpZGVyKCkge1xuXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjYWNoZXMgPSB7fTtcblxuICAgIGZ1bmN0aW9uIGNhY2hlRmFjdG9yeShjYWNoZUlkLCBvcHRpb25zKSB7XG4gICAgICBpZiAoY2FjaGVJZCBpbiBjYWNoZXMpIHtcbiAgICAgICAgdGhyb3cgbWluRXJyKCckY2FjaGVGYWN0b3J5JykoJ2lpZCcsICdDYWNoZUlkIFxcJ3swfVxcJyBpcyBhbHJlYWR5IHRha2VuIScsIGNhY2hlSWQpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2l6ZSA9IDAsXG4gICAgICAgICAgc3RhdHMgPSBleHRlbmQoe30sIG9wdGlvbnMsIHtpZDogY2FjaGVJZH0pLFxuICAgICAgICAgIGRhdGEgPSBjcmVhdGVNYXAoKSxcbiAgICAgICAgICBjYXBhY2l0eSA9IChvcHRpb25zICYmIG9wdGlvbnMuY2FwYWNpdHkpIHx8IE51bWJlci5NQVhfVkFMVUUsXG4gICAgICAgICAgbHJ1SGFzaCA9IGNyZWF0ZU1hcCgpLFxuICAgICAgICAgIGZyZXNoRW5kID0gbnVsbCxcbiAgICAgICAgICBzdGFsZUVuZCA9IG51bGw7XG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIHR5cGVcbiAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGVcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEEgY2FjaGUgb2JqZWN0IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIGRhdGEsIHByaW1hcmlseSB1c2VkIGJ5XG4gICAgICAgKiB7QGxpbmsgJHRlbXBsYXRlUmVxdWVzdCAkdGVtcGxhdGVSZXF1ZXN0fSBhbmQgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6c2NyaXB0IHNjcmlwdH1cbiAgICAgICAqIGRpcmVjdGl2ZSB0byBjYWNoZSB0ZW1wbGF0ZXMgYW5kIG90aGVyIGRhdGEuXG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICBhbmd1bGFyLm1vZHVsZSgnc3VwZXJDYWNoZScpXG4gICAgICAgKiAgICAuZmFjdG9yeSgnc3VwZXJDYWNoZScsIFsnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRjYWNoZUZhY3RvcnkpIHtcbiAgICAgICAqICAgICAgcmV0dXJuICRjYWNoZUZhY3RvcnkoJ3N1cGVyLWNhY2hlJyk7XG4gICAgICAgKiAgICB9XSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBFeGFtcGxlIHRlc3Q6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICBpdCgnc2hvdWxkIGJlaGF2ZSBsaWtlIGEgY2FjaGUnLCBpbmplY3QoZnVuY3Rpb24oc3VwZXJDYWNoZSkge1xuICAgICAgICogICAgc3VwZXJDYWNoZS5wdXQoJ2tleScsICd2YWx1ZScpO1xuICAgICAgICogICAgc3VwZXJDYWNoZS5wdXQoJ2Fub3RoZXIga2V5JywgJ2Fub3RoZXIgdmFsdWUnKTtcbiAgICAgICAqXG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5pbmZvKCkpLnRvRXF1YWwoe1xuICAgICAgICogICAgICBpZDogJ3N1cGVyLWNhY2hlJyxcbiAgICAgICAqICAgICAgc2l6ZTogMlxuICAgICAgICogICAgfSk7XG4gICAgICAgKlxuICAgICAgICogICAgc3VwZXJDYWNoZS5yZW1vdmUoJ2Fub3RoZXIga2V5Jyk7XG4gICAgICAgKiAgICBleHBlY3Qoc3VwZXJDYWNoZS5nZXQoJ2Fub3RoZXIga2V5JykpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgICAqXG4gICAgICAgKiAgICBzdXBlckNhY2hlLnJlbW92ZUFsbCgpO1xuICAgICAgICogICAgZXhwZWN0KHN1cGVyQ2FjaGUuaW5mbygpKS50b0VxdWFsKHtcbiAgICAgICAqICAgICAgaWQ6ICdzdXBlci1jYWNoZScsXG4gICAgICAgKiAgICAgIHNpemU6IDBcbiAgICAgICAqICAgIH0pO1xuICAgICAgICogIH0pKTtcbiAgICAgICAqIGBgYFxuICAgICAgICovXG4gICAgICByZXR1cm4gKGNhY2hlc1tjYWNoZUlkXSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI3B1dFxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogSW5zZXJ0cyBhIG5hbWVkIGVudHJ5IGludG8gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3QgdG8gYmVcbiAgICAgICAgICogcmV0cmlldmVkIGxhdGVyLCBhbmQgaW5jcmVtZW50aW5nIHRoZSBzaXplIG9mIHRoZSBjYWNoZSBpZiB0aGUga2V5IHdhcyBub3QgYWxyZWFkeVxuICAgICAgICAgKiBwcmVzZW50IGluIHRoZSBjYWNoZS4gSWYgYmVoYXZpbmcgbGlrZSBhbiBMUlUgY2FjaGUsIGl0IHdpbGwgYWxzbyByZW1vdmUgc3RhbGVcbiAgICAgICAgICogZW50cmllcyBmcm9tIHRoZSBzZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEl0IHdpbGwgbm90IGluc2VydCB1bmRlZmluZWQgdmFsdWVzIGludG8gdGhlIGNhY2hlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IHRoZSBrZXkgdW5kZXIgd2hpY2ggdGhlIGNhY2hlZCBkYXRhIGlzIHN0b3JlZC5cbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSB0aGUgdmFsdWUgdG8gc3RvcmUgYWxvbmdzaWRlIHRoZSBrZXkuIElmIGl0IGlzIHVuZGVmaW5lZCwgdGhlIGtleVxuICAgICAgICAgKiAgICB3aWxsIG5vdCBiZSBzdG9yZWQuXG4gICAgICAgICAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgc3RvcmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgcHV0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuO1xuICAgICAgICAgIGlmIChjYXBhY2l0eSA8IE51bWJlci5NQVhfVkFMVUUpIHtcbiAgICAgICAgICAgIHZhciBscnVFbnRyeSA9IGxydUhhc2hba2V5XSB8fCAobHJ1SGFzaFtrZXldID0ge2tleToga2V5fSk7XG5cbiAgICAgICAgICAgIHJlZnJlc2gobHJ1RW50cnkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghKGtleSBpbiBkYXRhKSkgc2l6ZSsrO1xuICAgICAgICAgIGRhdGFba2V5XSA9IHZhbHVlO1xuXG4gICAgICAgICAgaWYgKHNpemUgPiBjYXBhY2l0eSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3RhbGVFbmQua2V5KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNnZXRcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIFJldHJpZXZlcyBuYW1lZCBkYXRhIHN0b3JlZCBpbiB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9IG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSB0aGUga2V5IG9mIHRoZSBkYXRhIHRvIGJlIHJldHJpZXZlZFxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIHN0b3JlZC5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgaWYgKGNhcGFjaXR5IDwgTnVtYmVyLk1BWF9WQUxVRSkge1xuICAgICAgICAgICAgdmFyIGxydUVudHJ5ID0gbHJ1SGFzaFtrZXldO1xuXG4gICAgICAgICAgICBpZiAoIWxydUVudHJ5KSByZXR1cm47XG5cbiAgICAgICAgICAgIHJlZnJlc2gobHJ1RW50cnkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBkYXRhW2tleV07XG4gICAgICAgIH0sXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI3JlbW92ZVxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogUmVtb3ZlcyBhbiBlbnRyeSBmcm9tIHRoZSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IHRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGJlIHJlbW92ZWRcbiAgICAgICAgICovXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgaWYgKGNhcGFjaXR5IDwgTnVtYmVyLk1BWF9WQUxVRSkge1xuICAgICAgICAgICAgdmFyIGxydUVudHJ5ID0gbHJ1SGFzaFtrZXldO1xuXG4gICAgICAgICAgICBpZiAoIWxydUVudHJ5KSByZXR1cm47XG5cbiAgICAgICAgICAgIGlmIChscnVFbnRyeSA9PT0gZnJlc2hFbmQpIGZyZXNoRW5kID0gbHJ1RW50cnkucDtcbiAgICAgICAgICAgIGlmIChscnVFbnRyeSA9PT0gc3RhbGVFbmQpIHN0YWxlRW5kID0gbHJ1RW50cnkubjtcbiAgICAgICAgICAgIGxpbmsobHJ1RW50cnkubixscnVFbnRyeS5wKTtcblxuICAgICAgICAgICAgZGVsZXRlIGxydUhhc2hba2V5XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIShrZXkgaW4gZGF0YSkpIHJldHVybjtcblxuICAgICAgICAgIGRlbGV0ZSBkYXRhW2tleV07XG4gICAgICAgICAgc2l6ZS0tO1xuICAgICAgICB9LFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNyZW1vdmVBbGxcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIENsZWFycyB0aGUgY2FjaGUgb2JqZWN0IG9mIGFueSBlbnRyaWVzLlxuICAgICAgICAgKi9cbiAgICAgICAgcmVtb3ZlQWxsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBkYXRhID0gY3JlYXRlTWFwKCk7XG4gICAgICAgICAgc2l6ZSA9IDA7XG4gICAgICAgICAgbHJ1SGFzaCA9IGNyZWF0ZU1hcCgpO1xuICAgICAgICAgIGZyZXNoRW5kID0gc3RhbGVFbmQgPSBudWxsO1xuICAgICAgICB9LFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNkZXN0cm95XG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBEZXN0cm95cyB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9IG9iamVjdCBlbnRpcmVseSxcbiAgICAgICAgICogcmVtb3ZpbmcgaXQgZnJvbSB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkgJGNhY2hlRmFjdG9yeX0gc2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZGF0YSA9IG51bGw7XG4gICAgICAgICAgc3RhdHMgPSBudWxsO1xuICAgICAgICAgIGxydUhhc2ggPSBudWxsO1xuICAgICAgICAgIGRlbGV0ZSBjYWNoZXNbY2FjaGVJZF07XG4gICAgICAgIH0sXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlI2luZm9cbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIFJldHJpZXZlIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBhIHBhcnRpY3VsYXIge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgICAqICAgPHVsPlxuICAgICAgICAgKiAgICAgPGxpPioqaWQqKjogdGhlIGlkIG9mIHRoZSBjYWNoZSBpbnN0YW5jZTwvbGk+XG4gICAgICAgICAqICAgICA8bGk+KipzaXplKio6IHRoZSBudW1iZXIgb2YgZW50cmllcyBrZXB0IGluIHRoZSBjYWNoZSBpbnN0YW5jZTwvbGk+XG4gICAgICAgICAqICAgICA8bGk+KiouLi4qKjogYW55IGFkZGl0aW9uYWwgcHJvcGVydGllcyBmcm9tIHRoZSBvcHRpb25zIG9iamVjdCB3aGVuIGNyZWF0aW5nIHRoZVxuICAgICAgICAgKiAgICAgICBjYWNoZS48L2xpPlxuICAgICAgICAgKiAgIDwvdWw+XG4gICAgICAgICAqL1xuICAgICAgICBpbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBzdGF0cywge3NpemU6IHNpemV9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cblxuICAgICAgLyoqXG4gICAgICAgKiBtYWtlcyB0aGUgYGVudHJ5YCB0aGUgZnJlc2hFbmQgb2YgdGhlIExSVSBsaW5rZWQgbGlzdFxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiByZWZyZXNoKGVudHJ5KSB7XG4gICAgICAgIGlmIChlbnRyeSAhPT0gZnJlc2hFbmQpIHtcbiAgICAgICAgICBpZiAoIXN0YWxlRW5kKSB7XG4gICAgICAgICAgICBzdGFsZUVuZCA9IGVudHJ5O1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3RhbGVFbmQgPT09IGVudHJ5KSB7XG4gICAgICAgICAgICBzdGFsZUVuZCA9IGVudHJ5Lm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGluayhlbnRyeS5uLCBlbnRyeS5wKTtcbiAgICAgICAgICBsaW5rKGVudHJ5LCBmcmVzaEVuZCk7XG4gICAgICAgICAgZnJlc2hFbmQgPSBlbnRyeTtcbiAgICAgICAgICBmcmVzaEVuZC5uID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8qKlxuICAgICAgICogYmlkaXJlY3Rpb25hbGx5IGxpbmtzIHR3byBlbnRyaWVzIG9mIHRoZSBMUlUgbGlua2VkIGxpc3RcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gbGluayhuZXh0RW50cnksIHByZXZFbnRyeSkge1xuICAgICAgICBpZiAobmV4dEVudHJ5ICE9PSBwcmV2RW50cnkpIHtcbiAgICAgICAgICBpZiAobmV4dEVudHJ5KSBuZXh0RW50cnkucCA9IHByZXZFbnRyeTsgLy9wIHN0YW5kcyBmb3IgcHJldmlvdXMsICdwcmV2JyBkaWRuJ3QgbWluaWZ5XG4gICAgICAgICAgaWYgKHByZXZFbnRyeSkgcHJldkVudHJ5Lm4gPSBuZXh0RW50cnk7IC8vbiBzdGFuZHMgZm9yIG5leHQsICduZXh0JyBkaWRuJ3QgbWluaWZ5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5I2luZm9cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEdldCBpbmZvcm1hdGlvbiBhYm91dCBhbGwgdGhlIGNhY2hlcyB0aGF0IGhhdmUgYmVlbiBjcmVhdGVkXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IC0ga2V5LXZhbHVlIG1hcCBvZiBgY2FjaGVJZGAgdG8gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGBjYWNoZSNpbmZvYFxuICAgKi9cbiAgICBjYWNoZUZhY3RvcnkuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGluZm8gPSB7fTtcbiAgICAgIGZvckVhY2goY2FjaGVzLCBmdW5jdGlvbihjYWNoZSwgY2FjaGVJZCkge1xuICAgICAgICBpbmZvW2NhY2hlSWRdID0gY2FjaGUuaW5mbygpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNhY2hlRmFjdG9yeSNnZXRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEdldCBhY2Nlc3MgdG8gYSBjYWNoZSBvYmplY3QgYnkgdGhlIGBjYWNoZUlkYCB1c2VkIHdoZW4gaXQgd2FzIGNyZWF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZUlkIE5hbWUgb3IgaWQgb2YgYSBjYWNoZSB0byBhY2Nlc3MuXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IENhY2hlIG9iamVjdCBpZGVudGlmaWVkIGJ5IHRoZSBjYWNoZUlkIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoIGNhY2hlLlxuICAgKi9cbiAgICBjYWNoZUZhY3RvcnkuZ2V0ID0gZnVuY3Rpb24oY2FjaGVJZCkge1xuICAgICAgcmV0dXJuIGNhY2hlc1tjYWNoZUlkXTtcbiAgICB9O1xuXG5cbiAgICByZXR1cm4gY2FjaGVGYWN0b3J5O1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkdGVtcGxhdGVDYWNoZVxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIGAkdGVtcGxhdGVDYWNoZWAgaXMgYSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZSBvYmplY3R9IGNyZWF0ZWQgYnkgdGhlXG4gKiB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSAkY2FjaGVGYWN0b3J5fS5cbiAqXG4gKiBUaGUgZmlyc3QgdGltZSBhIHRlbXBsYXRlIGlzIHVzZWQsIGl0IGlzIGxvYWRlZCBpbiB0aGUgdGVtcGxhdGUgY2FjaGUgZm9yIHF1aWNrIHJldHJpZXZhbC4gWW91XG4gKiBjYW4gbG9hZCB0ZW1wbGF0ZXMgZGlyZWN0bHkgaW50byB0aGUgY2FjaGUgaW4gYSBgc2NyaXB0YCB0YWcsIGJ5IHVzaW5nIHtAbGluayAkdGVtcGxhdGVSZXF1ZXN0fSxcbiAqIG9yIGJ5IGNvbnN1bWluZyB0aGUgYCR0ZW1wbGF0ZUNhY2hlYCBzZXJ2aWNlIGRpcmVjdGx5LlxuICpcbiAqIEFkZGluZyB2aWEgdGhlIGBzY3JpcHRgIHRhZzpcbiAqXG4gKiBgYGBodG1sXG4gKiAgIDxzY3JpcHQgdHlwZT1cInRleHQvbmctdGVtcGxhdGVcIiBpZD1cInRlbXBsYXRlSWQuaHRtbFwiPlxuICogICAgIDxwPlRoaXMgaXMgdGhlIGNvbnRlbnQgb2YgdGhlIHRlbXBsYXRlPC9wPlxuICogICA8L3NjcmlwdD5cbiAqIGBgYFxuICpcbiAqICoqTm90ZToqKiB0aGUgYHNjcmlwdGAgdGFnIGNvbnRhaW5pbmcgdGhlIHRlbXBsYXRlIGRvZXMgbm90IG5lZWQgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGBoZWFkYCBvZlxuICogdGhlIGRvY3VtZW50LCBidXQgaXQgbXVzdCBiZSBhIGRlc2NlbmRlbnQgb2YgdGhlIHtAbGluayBuZy4kcm9vdEVsZW1lbnQgJHJvb3RFbGVtZW50fSAoZS5nLlxuICogZWxlbWVudCB3aXRoIHtAbGluayBuZ0FwcH0gYXR0cmlidXRlKSwgb3RoZXJ3aXNlIHRoZSB0ZW1wbGF0ZSB3aWxsIGJlIGlnbm9yZWQuXG4gKlxuICogQWRkaW5nIHZpYSB0aGUgYCR0ZW1wbGF0ZUNhY2hlYCBzZXJ2aWNlOlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgbXlBcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbXSk7XG4gKiBteUFwcC5ydW4oZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAqICAgJHRlbXBsYXRlQ2FjaGUucHV0KCd0ZW1wbGF0ZUlkLmh0bWwnLCAnVGhpcyBpcyB0aGUgY29udGVudCBvZiB0aGUgdGVtcGxhdGUnKTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICogVG8gcmV0cmlldmUgdGhlIHRlbXBsYXRlIGxhdGVyLCBzaW1wbHkgdXNlIGl0IGluIHlvdXIgY29tcG9uZW50OlxuICogYGBganNcbiAqIG15QXBwLmNvbXBvbmVudCgnbXlDb21wb25lbnQnLCB7XG4gKiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlSWQuaHRtbCdcbiAqIH0pO1xuICogYGBgXG4gKlxuICogb3IgZ2V0IGl0IHZpYSB0aGUgYCR0ZW1wbGF0ZUNhY2hlYCBzZXJ2aWNlOlxuICogYGBganNcbiAqICR0ZW1wbGF0ZUNhY2hlLmdldCgndGVtcGxhdGVJZC5odG1sJylcbiAqIGBgYFxuICpcbiAqL1xuZnVuY3Rpb24gJFRlbXBsYXRlQ2FjaGVQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckY2FjaGVGYWN0b3J5JywgZnVuY3Rpb24oJGNhY2hlRmFjdG9yeSkge1xuICAgIHJldHVybiAkY2FjaGVGYWN0b3J5KCd0ZW1wbGF0ZXMnKTtcbiAgfV07XG59XG5cbi8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICpcbiAqICAgICBBbnkgY29tbWl0cyB0byB0aGlzIGZpbGUgc2hvdWxkIGJlIHJldmlld2VkIHdpdGggc2VjdXJpdHkgaW4gbWluZC4gICpcbiAqICAgQ2hhbmdlcyB0byB0aGlzIGZpbGUgY2FuIHBvdGVudGlhbGx5IGNyZWF0ZSBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMuICpcbiAqICAgICAgICAgIEFuIGFwcHJvdmFsIGZyb20gMiBDb3JlIG1lbWJlcnMgd2l0aCBoaXN0b3J5IG9mIG1vZGlmeWluZyAgICAgICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMgZmlsZSBpcyByZXF1aXJlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAqICBEb2VzIHRoZSBjaGFuZ2Ugc29tZWhvdyBhbGxvdyBmb3IgYXJiaXRyYXJ5IGphdmFzY3JpcHQgdG8gYmUgZXhlY3V0ZWQ/ICpcbiAqICAgIE9yIGFsbG93cyBmb3Igc29tZW9uZSB0byBjaGFuZ2UgdGhlIHByb3RvdHlwZSBvZiBidWlsdC1pbiBvYmplY3RzPyAgICpcbiAqICAgICBPciBnaXZlcyB1bmRlc2lyZWQgYWNjZXNzIHRvIHZhcmlhYmxlcyBsaWtlIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxuLyogISBWQVJJQUJMRS9GVU5DVElPTiBOQU1JTkcgQ09OVkVOVElPTlMgVEhBVCBBUFBMWSBUTyBUSElTIEZJTEUhXG4gKlxuICogRE9NLXJlbGF0ZWQgdmFyaWFibGVzOlxuICpcbiAqIC0gXCJub2RlXCIgLSBET00gTm9kZVxuICogLSBcImVsZW1lbnRcIiAtIERPTSBFbGVtZW50IG9yIE5vZGVcbiAqIC0gXCIkbm9kZVwiIG9yIFwiJGVsZW1lbnRcIiAtIGpxTGl0ZS13cmFwcGVkIG5vZGUgb3IgZWxlbWVudFxuICpcbiAqXG4gKiBDb21waWxlciByZWxhdGVkIHN0dWZmOlxuICpcbiAqIC0gXCJsaW5rRm5cIiAtIGxpbmtpbmcgZm4gb2YgYSBzaW5nbGUgZGlyZWN0aXZlXG4gKiAtIFwibm9kZUxpbmtGblwiIC0gZnVuY3Rpb24gdGhhdCBhZ2dyZWdhdGVzIGFsbCBsaW5raW5nIGZucyBmb3IgYSBwYXJ0aWN1bGFyIG5vZGVcbiAqIC0gXCJjaGlsZExpbmtGblwiIC0gIGZ1bmN0aW9uIHRoYXQgYWdncmVnYXRlcyBhbGwgbGlua2luZyBmbnMgZm9yIGNoaWxkIG5vZGVzIG9mIGEgcGFydGljdWxhciBub2RlXG4gKiAtIFwiY29tcG9zaXRlTGlua0ZuXCIgLSBmdW5jdGlvbiB0aGF0IGFnZ3JlZ2F0ZXMgYWxsIGxpbmtpbmcgZm5zIGZvciBhIGNvbXBpbGF0aW9uIHJvb3QgKG5vZGVMaXN0KVxuICovXG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGNvbXBpbGVcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb21waWxlcyBhbiBIVE1MIHN0cmluZyBvciBET00gaW50byBhIHRlbXBsYXRlIGFuZCBwcm9kdWNlcyBhIHRlbXBsYXRlIGZ1bmN0aW9uLCB3aGljaFxuICogY2FuIHRoZW4gYmUgdXNlZCB0byBsaW5rIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIGBzY29wZWB9IGFuZCB0aGUgdGVtcGxhdGUgdG9nZXRoZXIuXG4gKlxuICogVGhlIGNvbXBpbGF0aW9uIGlzIGEgcHJvY2VzcyBvZiB3YWxraW5nIHRoZSBET00gdHJlZSBhbmQgbWF0Y2hpbmcgRE9NIGVsZW1lbnRzIHRvXG4gKiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlc30uXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBUaGlzIGRvY3VtZW50IGlzIGFuIGluLWRlcHRoIHJlZmVyZW5jZSBvZiBhbGwgZGlyZWN0aXZlIG9wdGlvbnMuXG4gKiBGb3IgYSBnZW50bGUgaW50cm9kdWN0aW9uIHRvIGRpcmVjdGl2ZXMgd2l0aCBleGFtcGxlcyBvZiBjb21tb24gdXNlIGNhc2VzLFxuICogc2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlIGRpcmVjdGl2ZSBndWlkZX0uXG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyBDb21wcmVoZW5zaXZlIERpcmVjdGl2ZSBBUElcbiAqXG4gKiBUaGVyZSBhcmUgbWFueSBkaWZmZXJlbnQgb3B0aW9ucyBmb3IgYSBkaXJlY3RpdmUuXG4gKlxuICogVGhlIGRpZmZlcmVuY2UgcmVzaWRlcyBpbiB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmYWN0b3J5IGZ1bmN0aW9uLlxuICogWW91IGNhbiBlaXRoZXIgcmV0dXJuIGEge0BsaW5rICRjb21waWxlI2RpcmVjdGl2ZS1kZWZpbml0aW9uLW9iamVjdCBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3QgKHNlZSBiZWxvdyl9XG4gKiB0aGF0IGRlZmluZXMgdGhlIGRpcmVjdGl2ZSBwcm9wZXJ0aWVzLCBvciBqdXN0IHRoZSBgcG9zdExpbmtgIGZ1bmN0aW9uIChhbGwgb3RoZXIgcHJvcGVydGllcyB3aWxsIGhhdmVcbiAqIHRoZSBkZWZhdWx0IHZhbHVlcykuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cbiAqICoqQmVzdCBQcmFjdGljZToqKiBJdCdzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgXCJkaXJlY3RpdmUgZGVmaW5pdGlvbiBvYmplY3RcIiBmb3JtLlxuICogPC9kaXY+XG4gKlxuICogSGVyZSdzIGFuIGV4YW1wbGUgZGlyZWN0aXZlIGRlY2xhcmVkIHdpdGggYSBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3Q6XG4gKlxuICogYGBganNcbiAqICAgdmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoLi4uKTtcbiAqXG4gKiAgIG15TW9kdWxlLmRpcmVjdGl2ZSgnZGlyZWN0aXZlTmFtZScsIGZ1bmN0aW9uIGZhY3RvcnkoaW5qZWN0YWJsZXMpIHtcbiAqICAgICB2YXIgZGlyZWN0aXZlRGVmaW5pdGlvbk9iamVjdCA9IHtcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtcHJpb3JpdHktIHByaW9yaXR5fTogMCxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtdGVtcGxhdGUtIHRlbXBsYXRlfTogJzxkaXY+PC9kaXY+JywgLy8gb3IgLy8gZnVuY3Rpb24odEVsZW1lbnQsIHRBdHRycykgeyAuLi4gfSxcbiAqICAgICAgIC8vIG9yXG4gKiAgICAgICAvLyB7QGxpbmsgJGNvbXBpbGUjLXRlbXBsYXRldXJsLSB0ZW1wbGF0ZVVybH06ICdkaXJlY3RpdmUuaHRtbCcsIC8vIG9yIC8vIGZ1bmN0aW9uKHRFbGVtZW50LCB0QXR0cnMpIHsgLi4uIH0sXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLXRyYW5zY2x1ZGUtIHRyYW5zY2x1ZGV9OiBmYWxzZSxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtcmVzdHJpY3QtIHJlc3RyaWN0fTogJ0EnLFxuICogICAgICAge0BsaW5rICRjb21waWxlIy10ZW1wbGF0ZW5hbWVzcGFjZS0gdGVtcGxhdGVOYW1lc3BhY2V9OiAnaHRtbCcsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLXNjb3BlLSBzY29wZX06IGZhbHNlLFxuICogICAgICAge0BsaW5rICRjb21waWxlIy1jb250cm9sbGVyLSBjb250cm9sbGVyfTogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkdHJhbnNjbHVkZSwgb3RoZXJJbmplY3RhYmxlcykgeyAuLi4gfSxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtY29udHJvbGxlcmFzLSBjb250cm9sbGVyQXN9OiAnc3RyaW5nSWRlbnRpZmllcicsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLWJpbmR0b2NvbnRyb2xsZXItIGJpbmRUb0NvbnRyb2xsZXJ9OiBmYWxzZSxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtcmVxdWlyZS0gcmVxdWlyZX06ICdzaWJsaW5nRGlyZWN0aXZlTmFtZScsIC8vIG9yIC8vIFsnXnBhcmVudERpcmVjdGl2ZU5hbWUnLCAnP29wdGlvbmFsRGlyZWN0aXZlTmFtZScsICc/Xm9wdGlvbmFsUGFyZW50J10sXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLW11bHRpZWxlbWVudC0gbXVsdGlFbGVtZW50fTogZmFsc2UsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLWNvbXBpbGUtIGNvbXBpbGV9OiBmdW5jdGlvbiBjb21waWxlKHRFbGVtZW50LCB0QXR0cnMsIHRyYW5zY2x1ZGUpIHtcbiAqICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICAge0BsaW5rICRjb21waWxlI3ByZS1saW5raW5nLWZ1bmN0aW9uIHByZX06IGZ1bmN0aW9uIHByZUxpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpIHsgLi4uIH0sXG4gKiAgICAgICAgICAgIHtAbGluayAkY29tcGlsZSNwb3N0LWxpbmtpbmctZnVuY3Rpb24gcG9zdH06IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyKSB7IC4uLiB9XG4gKiAgICAgICAgIH1cbiAqICAgICAgICAgLy8gb3JcbiAqICAgICAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uIHBvc3RMaW5rKCAuLi4gKSB7IC4uLiB9XG4gKiAgICAgICB9LFxuICogICAgICAgLy8gb3JcbiAqICAgICAgIC8vIHtAbGluayAkY29tcGlsZSMtbGluay0gbGlua306IHtcbiAqICAgICAgIC8vICB7QGxpbmsgJGNvbXBpbGUjcHJlLWxpbmtpbmctZnVuY3Rpb24gcHJlfTogZnVuY3Rpb24gcHJlTGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlcikgeyAuLi4gfSxcbiAqICAgICAgIC8vICB7QGxpbmsgJGNvbXBpbGUjcG9zdC1saW5raW5nLWZ1bmN0aW9uIHBvc3R9OiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlcikgeyAuLi4gfVxuICogICAgICAgLy8gfVxuICogICAgICAgLy8gb3JcbiAqICAgICAgIC8vIHtAbGluayAkY29tcGlsZSMtbGluay0gbGlua306IGZ1bmN0aW9uIHBvc3RMaW5rKCAuLi4gKSB7IC4uLiB9XG4gKiAgICAgfTtcbiAqICAgICByZXR1cm4gZGlyZWN0aXZlRGVmaW5pdGlvbk9iamVjdDtcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogKipOb3RlOioqIEFueSB1bnNwZWNpZmllZCBvcHRpb25zIHdpbGwgdXNlIHRoZSBkZWZhdWx0IHZhbHVlLiBZb3UgY2FuIHNlZSB0aGUgZGVmYXVsdCB2YWx1ZXMgYmVsb3cuXG4gKiA8L2Rpdj5cbiAqXG4gKiBUaGVyZWZvcmUgdGhlIGFib3ZlIGNhbiBiZSBzaW1wbGlmaWVkIGFzOlxuICpcbiAqIGBgYGpzXG4gKiAgIHZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKC4uLik7XG4gKlxuICogICBteU1vZHVsZS5kaXJlY3RpdmUoJ2RpcmVjdGl2ZU5hbWUnLCBmdW5jdGlvbiBmYWN0b3J5KGluamVjdGFibGVzKSB7XG4gKiAgICAgdmFyIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3QgPSB7XG4gKiAgICAgICBsaW5rOiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycykgeyAuLi4gfVxuICogICAgIH07XG4gKiAgICAgcmV0dXJuIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3Q7XG4gKiAgICAgLy8gb3JcbiAqICAgICAvLyByZXR1cm4gZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMpIHsgLi4uIH1cbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMgTGlmZS1jeWNsZSBob29rc1xuICogRGlyZWN0aXZlIGNvbnRyb2xsZXJzIGNhbiBwcm92aWRlIHRoZSBmb2xsb3dpbmcgbWV0aG9kcyB0aGF0IGFyZSBjYWxsZWQgYnkgQW5ndWxhckpTIGF0IHBvaW50cyBpbiB0aGUgbGlmZS1jeWNsZSBvZiB0aGVcbiAqIGRpcmVjdGl2ZTpcbiAqICogYCRvbkluaXQoKWAgLSBDYWxsZWQgb24gZWFjaCBjb250cm9sbGVyIGFmdGVyIGFsbCB0aGUgY29udHJvbGxlcnMgb24gYW4gZWxlbWVudCBoYXZlIGJlZW4gY29uc3RydWN0ZWQgYW5kXG4gKiAgIGhhZCB0aGVpciBiaW5kaW5ncyBpbml0aWFsaXplZCAoYW5kIGJlZm9yZSB0aGUgcHJlICZhbXA7IHBvc3QgbGlua2luZyBmdW5jdGlvbnMgZm9yIHRoZSBkaXJlY3RpdmVzIG9uXG4gKiAgIHRoaXMgZWxlbWVudCkuIFRoaXMgaXMgYSBnb29kIHBsYWNlIHRvIHB1dCBpbml0aWFsaXphdGlvbiBjb2RlIGZvciB5b3VyIGNvbnRyb2xsZXIuXG4gKiAqIGAkb25DaGFuZ2VzKGNoYW5nZXNPYmopYCAtIENhbGxlZCB3aGVuZXZlciBvbmUtd2F5IChgPGApIG9yIGludGVycG9sYXRpb24gKGBAYCkgYmluZGluZ3MgYXJlIHVwZGF0ZWQuIFRoZVxuICogICBgY2hhbmdlc09iamAgaXMgYSBoYXNoIHdob3NlIGtleXMgYXJlIHRoZSBuYW1lcyBvZiB0aGUgYm91bmQgcHJvcGVydGllcyB0aGF0IGhhdmUgY2hhbmdlZCwgYW5kIHRoZSB2YWx1ZXMgYXJlIGFuXG4gKiAgIG9iamVjdCBvZiB0aGUgZm9ybSBgeyBjdXJyZW50VmFsdWUsIHByZXZpb3VzVmFsdWUsIGlzRmlyc3RDaGFuZ2UoKSB9YC4gVXNlIHRoaXMgaG9vayB0byB0cmlnZ2VyIHVwZGF0ZXMgd2l0aGluIGFcbiAqICAgY29tcG9uZW50IHN1Y2ggYXMgY2xvbmluZyB0aGUgYm91bmQgdmFsdWUgdG8gcHJldmVudCBhY2NpZGVudGFsIG11dGF0aW9uIG9mIHRoZSBvdXRlciB2YWx1ZS4gTm90ZSB0aGF0IHRoaXMgd2lsbFxuICogICBhbHNvIGJlIGNhbGxlZCB3aGVuIHlvdXIgYmluZGluZ3MgYXJlIGluaXRpYWxpemVkLlxuICogKiBgJGRvQ2hlY2soKWAgLSBDYWxsZWQgb24gZWFjaCB0dXJuIG9mIHRoZSBkaWdlc3QgY3ljbGUuIFByb3ZpZGVzIGFuIG9wcG9ydHVuaXR5IHRvIGRldGVjdCBhbmQgYWN0IG9uXG4gKiAgIGNoYW5nZXMuIEFueSBhY3Rpb25zIHRoYXQgeW91IHdpc2ggdG8gdGFrZSBpbiByZXNwb25zZSB0byB0aGUgY2hhbmdlcyB0aGF0IHlvdSBkZXRlY3QgbXVzdCBiZVxuICogICBpbnZva2VkIGZyb20gdGhpcyBob29rOyBpbXBsZW1lbnRpbmcgdGhpcyBoYXMgbm8gZWZmZWN0IG9uIHdoZW4gYCRvbkNoYW5nZXNgIGlzIGNhbGxlZC4gRm9yIGV4YW1wbGUsIHRoaXMgaG9va1xuICogICBjb3VsZCBiZSB1c2VmdWwgaWYgeW91IHdpc2ggdG8gcGVyZm9ybSBhIGRlZXAgZXF1YWxpdHkgY2hlY2ssIG9yIHRvIGNoZWNrIGEgRGF0ZSBvYmplY3QsIGNoYW5nZXMgdG8gd2hpY2ggd291bGQgbm90XG4gKiAgIGJlIGRldGVjdGVkIGJ5IEFuZ3VsYXJKUydzIGNoYW5nZSBkZXRlY3RvciBhbmQgdGh1cyBub3QgdHJpZ2dlciBgJG9uQ2hhbmdlc2AuIFRoaXMgaG9vayBpcyBpbnZva2VkIHdpdGggbm8gYXJndW1lbnRzO1xuICogICBpZiBkZXRlY3RpbmcgY2hhbmdlcywgeW91IG11c3Qgc3RvcmUgdGhlIHByZXZpb3VzIHZhbHVlKHMpIGZvciBjb21wYXJpc29uIHRvIHRoZSBjdXJyZW50IHZhbHVlcy5cbiAqICogYCRvbkRlc3Ryb3koKWAgLSBDYWxsZWQgb24gYSBjb250cm9sbGVyIHdoZW4gaXRzIGNvbnRhaW5pbmcgc2NvcGUgaXMgZGVzdHJveWVkLiBVc2UgdGhpcyBob29rIGZvciByZWxlYXNpbmdcbiAqICAgZXh0ZXJuYWwgcmVzb3VyY2VzLCB3YXRjaGVzIGFuZCBldmVudCBoYW5kbGVycy4gTm90ZSB0aGF0IGNvbXBvbmVudHMgaGF2ZSB0aGVpciBgJG9uRGVzdHJveSgpYCBob29rcyBjYWxsZWQgaW5cbiAqICAgdGhlIHNhbWUgb3JkZXIgYXMgdGhlIGAkc2NvcGUuJGJyb2FkY2FzdGAgZXZlbnRzIGFyZSB0cmlnZ2VyZWQsIHdoaWNoIGlzIHRvcCBkb3duLiBUaGlzIG1lYW5zIHRoYXQgcGFyZW50XG4gKiAgIGNvbXBvbmVudHMgd2lsbCBoYXZlIHRoZWlyIGAkb25EZXN0cm95KClgIGhvb2sgY2FsbGVkIGJlZm9yZSBjaGlsZCBjb21wb25lbnRzLlxuICogKiBgJHBvc3RMaW5rKClgIC0gQ2FsbGVkIGFmdGVyIHRoaXMgY29udHJvbGxlcidzIGVsZW1lbnQgYW5kIGl0cyBjaGlsZHJlbiBoYXZlIGJlZW4gbGlua2VkLiBTaW1pbGFyIHRvIHRoZSBwb3N0LWxpbmtcbiAqICAgZnVuY3Rpb24gdGhpcyBob29rIGNhbiBiZSB1c2VkIHRvIHNldCB1cCBET00gZXZlbnQgaGFuZGxlcnMgYW5kIGRvIGRpcmVjdCBET00gbWFuaXB1bGF0aW9uLlxuICogICBOb3RlIHRoYXQgY2hpbGQgZWxlbWVudHMgdGhhdCBjb250YWluIGB0ZW1wbGF0ZVVybGAgZGlyZWN0aXZlcyB3aWxsIG5vdCBoYXZlIGJlZW4gY29tcGlsZWQgYW5kIGxpbmtlZCBzaW5jZVxuICogICB0aGV5IGFyZSB3YWl0aW5nIGZvciB0aGVpciB0ZW1wbGF0ZSB0byBsb2FkIGFzeW5jaHJvbm91c2x5IGFuZCB0aGVpciBvd24gY29tcGlsYXRpb24gYW5kIGxpbmtpbmcgaGFzIGJlZW5cbiAqICAgc3VzcGVuZGVkIHVudGlsIHRoYXQgb2NjdXJzLlxuICpcbiAqICMjIyMgQ29tcGFyaXNvbiB3aXRoIGxpZmUtY3ljbGUgaG9va3MgaW4gdGhlIG5ldyBBbmd1bGFyXG4gKiBUaGUgbmV3IEFuZ3VsYXIgYWxzbyB1c2VzIGxpZmUtY3ljbGUgaG9va3MgZm9yIGl0cyBjb21wb25lbnRzLiBXaGlsZSB0aGUgQW5ndWxhckpTIGxpZmUtY3ljbGUgaG9va3MgYXJlIHNpbWlsYXIgdGhlcmUgYXJlXG4gKiBzb21lIGRpZmZlcmVuY2VzIHRoYXQgeW91IHNob3VsZCBiZSBhd2FyZSBvZiwgZXNwZWNpYWxseSB3aGVuIGl0IGNvbWVzIHRvIG1vdmluZyB5b3VyIGNvZGUgZnJvbSBBbmd1bGFySlMgdG8gQW5ndWxhcjpcbiAqXG4gKiAqIEFuZ3VsYXJKUyBob29rcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGAsIHN1Y2ggYXMgYCRvbkluaXRgLiBBbmd1bGFyIGhvb2tzIGFyZSBwcmVmaXhlZCB3aXRoIGBuZ2AsIHN1Y2ggYXMgYG5nT25Jbml0YC5cbiAqICogQW5ndWxhckpTIGhvb2tzIGNhbiBiZSBkZWZpbmVkIG9uIHRoZSBjb250cm9sbGVyIHByb3RvdHlwZSBvciBhZGRlZCB0byB0aGUgY29udHJvbGxlciBpbnNpZGUgaXRzIGNvbnN0cnVjdG9yLlxuICogICBJbiBBbmd1bGFyIHlvdSBjYW4gb25seSBkZWZpbmUgaG9va3Mgb24gdGhlIHByb3RvdHlwZSBvZiB0aGUgQ29tcG9uZW50IGNsYXNzLlxuICogKiBEdWUgdG8gdGhlIGRpZmZlcmVuY2VzIGluIGNoYW5nZS1kZXRlY3Rpb24sIHlvdSBtYXkgZ2V0IG1hbnkgbW9yZSBjYWxscyB0byBgJGRvQ2hlY2tgIGluIEFuZ3VsYXJKUyB0aGFuIHlvdSB3b3VsZCB0b1xuICogICBgbmdEb0NoZWNrYCBpbiBBbmd1bGFyLlxuICogKiBDaGFuZ2VzIHRvIHRoZSBtb2RlbCBpbnNpZGUgYCRkb0NoZWNrYCB3aWxsIHRyaWdnZXIgbmV3IHR1cm5zIG9mIHRoZSBkaWdlc3QgbG9vcCwgd2hpY2ggd2lsbCBjYXVzZSB0aGUgY2hhbmdlcyB0byBiZVxuICogICBwcm9wYWdhdGVkIHRocm91Z2hvdXQgdGhlIGFwcGxpY2F0aW9uLlxuICogICBBbmd1bGFyIGRvZXMgbm90IGFsbG93IHRoZSBgbmdEb0NoZWNrYCBob29rIHRvIHRyaWdnZXIgYSBjaGFuZ2Ugb3V0c2lkZSBvZiB0aGUgY29tcG9uZW50LiBJdCB3aWxsIGVpdGhlciB0aHJvdyBhblxuICogICBlcnJvciBvciBkbyBub3RoaW5nIGRlcGVuZGluZyB1cG9uIHRoZSBzdGF0ZSBvZiBgZW5hYmxlUHJvZE1vZGUoKWAuXG4gKlxuICogIyMjIyBMaWZlLWN5Y2xlIGhvb2sgZXhhbXBsZXNcbiAqXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHlvdSBjYW4gY2hlY2sgZm9yIG11dGF0aW9ucyB0byBhIERhdGUgb2JqZWN0IGV2ZW4gdGhvdWdoIHRoZSBpZGVudGl0eSBvZiB0aGUgb2JqZWN0XG4gKiBoYXMgbm90IGNoYW5nZWQuXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cImRvQ2hlY2tEYXRlRXhhbXBsZVwiIG1vZHVsZT1cImRvLWNoZWNrLW1vZHVsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgYW5ndWxhci5tb2R1bGUoJ2RvLWNoZWNrLW1vZHVsZScsIFtdKVxuICogICAgICAgLmNvbXBvbmVudCgnYXBwJywge1xuICogICAgICAgICB0ZW1wbGF0ZTpcbiAqICAgICAgICAgICAnTW9udGg6IDxpbnB1dCBuZy1tb2RlbD1cIiRjdHJsLm1vbnRoXCIgbmctY2hhbmdlPVwiJGN0cmwudXBkYXRlRGF0ZSgpXCI+JyArXG4gKiAgICAgICAgICAgJ0RhdGU6IHt7ICRjdHJsLmRhdGUgfX0nICtcbiAqICAgICAgICAgICAnPHRlc3QgZGF0ZT1cIiRjdHJsLmRhdGVcIj48L3Rlc3Q+JyxcbiAqICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgdGhpcy5kYXRlID0gbmV3IERhdGUoKTtcbiAqICAgICAgICAgICB0aGlzLm1vbnRoID0gdGhpcy5kYXRlLmdldE1vbnRoKCk7XG4gKiAgICAgICAgICAgdGhpcy51cGRhdGVEYXRlID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICB0aGlzLmRhdGUuc2V0TW9udGgodGhpcy5tb250aCk7XG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfVxuICogICAgICAgfSlcbiAqICAgICAgIC5jb21wb25lbnQoJ3Rlc3QnLCB7XG4gKiAgICAgICAgIGJpbmRpbmdzOiB7IGRhdGU6ICc8JyB9LFxuICogICAgICAgICB0ZW1wbGF0ZTpcbiAqICAgICAgICAgICAnPHByZT57eyAkY3RybC5sb2cgfCBqc29uIH19PC9wcmU+JyxcbiAqICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgdmFyIHByZXZpb3VzVmFsdWU7XG4gKiAgICAgICAgICAgdGhpcy5sb2cgPSBbXTtcbiAqICAgICAgICAgICB0aGlzLiRkb0NoZWNrID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gdGhpcy5kYXRlICYmIHRoaXMuZGF0ZS52YWx1ZU9mKCk7XG4gKiAgICAgICAgICAgICBpZiAocHJldmlvdXNWYWx1ZSAhPT0gY3VycmVudFZhbHVlKSB7XG4gKiAgICAgICAgICAgICAgIHRoaXMubG9nLnB1c2goJ2RvQ2hlY2s6IGRhdGUgbXV0YXRlZDogJyArIHRoaXMuZGF0ZSk7XG4gKiAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gKiAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfVxuICogICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8YXBwPjwvYXBwPlxuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogVGhpcyBleGFtcGxlIHNob3cgaG93IHlvdSBtaWdodCB1c2UgYCRkb0NoZWNrYCB0byB0cmlnZ2VyIGNoYW5nZXMgaW4geW91ciBjb21wb25lbnQncyBpbnB1dHMgZXZlbiBpZiB0aGVcbiAqIGFjdHVhbCBpZGVudGl0eSBvZiB0aGUgY29tcG9uZW50IGRvZXNuJ3QgY2hhbmdlLiAoQmUgYXdhcmUgdGhhdCBjbG9uaW5nIGFuZCBkZWVwIGVxdWFsaXR5IGNoZWNrcyBvbiBsYXJnZVxuICogYXJyYXlzIG9yIG9iamVjdHMgY2FuIGhhdmUgYSBuZWdhdGl2ZSBpbXBhY3Qgb24geW91ciBhcHBsaWNhdGlvbiBwZXJmb3JtYW5jZSlcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwiZG9DaGVja0FycmF5RXhhbXBsZVwiIG1vZHVsZT1cImRvLWNoZWNrLW1vZHVsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxkaXYgbmctaW5pdD1cIml0ZW1zID0gW11cIj5cbiAqICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJpdGVtcy5wdXNoKGl0ZW1zLmxlbmd0aClcIj5BZGQgSXRlbTwvYnV0dG9uPlxuICogICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIml0ZW1zID0gW11cIj5SZXNldCBJdGVtczwvYnV0dG9uPlxuICogICAgICAgPHByZT57eyBpdGVtcyB9fTwvcHJlPlxuICogICAgICAgPHRlc3QgaXRlbXM9XCJpdGVtc1wiPjwvdGVzdD5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgIGFuZ3VsYXIubW9kdWxlKCdkby1jaGVjay1tb2R1bGUnLCBbXSlcbiAqICAgICAgICAuY29tcG9uZW50KCd0ZXN0Jywge1xuICogICAgICAgICAgYmluZGluZ3M6IHsgaXRlbXM6ICc8JyB9LFxuICogICAgICAgICAgdGVtcGxhdGU6XG4gKiAgICAgICAgICAgICc8cHJlPnt7ICRjdHJsLmxvZyB8IGpzb24gfX08L3ByZT4nLFxuICogICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgIHRoaXMubG9nID0gW107XG4gKlxuICogICAgICAgICAgICB0aGlzLiRkb0NoZWNrID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNfcmVmICE9PSB0aGlzLml0ZW1zKSB7XG4gKiAgICAgICAgICAgICAgICB0aGlzLmxvZy5wdXNoKCdkb0NoZWNrOiBpdGVtcyBjaGFuZ2VkJyk7XG4gKiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zX3JlZiA9IHRoaXMuaXRlbXM7XG4gKiAgICAgICAgICAgICAgfVxuICogICAgICAgICAgICAgIGlmICghYW5ndWxhci5lcXVhbHModGhpcy5pdGVtc19jbG9uZSwgdGhpcy5pdGVtcykpIHtcbiAqICAgICAgICAgICAgICAgIHRoaXMubG9nLnB1c2goJ2RvQ2hlY2s6IGl0ZW1zIG11dGF0ZWQnKTtcbiAqICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNfY2xvbmUgPSBhbmd1bGFyLmNvcHkodGhpcy5pdGVtcyk7XG4gKiAgICAgICAgICAgICAgfVxuICogICAgICAgICAgICB9O1xuICogICAgICAgICAgfVxuICogICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICpcbiAqICMjIyBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3RcbiAqXG4gKiBUaGUgZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0IHByb3ZpZGVzIGluc3RydWN0aW9ucyB0byB0aGUge0BsaW5rIG5nLiRjb21waWxlXG4gKiBjb21waWxlcn0uIFRoZSBhdHRyaWJ1dGVzIGFyZTpcbiAqXG4gKiAjIyMjIGBtdWx0aUVsZW1lbnRgXG4gKiBXaGVuIHRoaXMgcHJvcGVydHkgaXMgc2V0IHRvIHRydWUgKGRlZmF1bHQgaXMgYGZhbHNlYCksIHRoZSBIVE1MIGNvbXBpbGVyIHdpbGwgY29sbGVjdCBET00gbm9kZXMgYmV0d2VlblxuICogbm9kZXMgd2l0aCB0aGUgYXR0cmlidXRlcyBgZGlyZWN0aXZlLW5hbWUtc3RhcnRgIGFuZCBgZGlyZWN0aXZlLW5hbWUtZW5kYCwgYW5kIGdyb3VwIHRoZW1cbiAqIHRvZ2V0aGVyIGFzIHRoZSBkaXJlY3RpdmUgZWxlbWVudHMuIEl0IGlzIHJlY29tbWVuZGVkIHRoYXQgdGhpcyBmZWF0dXJlIGJlIHVzZWQgb24gZGlyZWN0aXZlc1xuICogd2hpY2ggYXJlIG5vdCBzdHJpY3RseSBiZWhhdmlvcmFsIChzdWNoIGFzIHtAbGluayBuZ0NsaWNrfSksIGFuZCB3aGljaFxuICogZG8gbm90IG1hbmlwdWxhdGUgb3IgcmVwbGFjZSBjaGlsZCBub2RlcyAoc3VjaCBhcyB7QGxpbmsgbmdJbmNsdWRlfSkuXG4gKlxuICogIyMjIyBgcHJpb3JpdHlgXG4gKiBXaGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBkaXJlY3RpdmVzIGRlZmluZWQgb24gYSBzaW5nbGUgRE9NIGVsZW1lbnQsIHNvbWV0aW1lcyBpdFxuICogaXMgbmVjZXNzYXJ5IHRvIHNwZWNpZnkgdGhlIG9yZGVyIGluIHdoaWNoIHRoZSBkaXJlY3RpdmVzIGFyZSBhcHBsaWVkLiBUaGUgYHByaW9yaXR5YCBpcyB1c2VkXG4gKiB0byBzb3J0IHRoZSBkaXJlY3RpdmVzIGJlZm9yZSB0aGVpciBgY29tcGlsZWAgZnVuY3Rpb25zIGdldCBjYWxsZWQuIFByaW9yaXR5IGlzIGRlZmluZWQgYXMgYVxuICogbnVtYmVyLiBEaXJlY3RpdmVzIHdpdGggZ3JlYXRlciBudW1lcmljYWwgYHByaW9yaXR5YCBhcmUgY29tcGlsZWQgZmlyc3QuIFByZS1saW5rIGZ1bmN0aW9uc1xuICogYXJlIGFsc28gcnVuIGluIHByaW9yaXR5IG9yZGVyLCBidXQgcG9zdC1saW5rIGZ1bmN0aW9ucyBhcmUgcnVuIGluIHJldmVyc2Ugb3JkZXIuIFRoZSBvcmRlclxuICogb2YgZGlyZWN0aXZlcyB3aXRoIHRoZSBzYW1lIHByaW9yaXR5IGlzIHVuZGVmaW5lZC4gVGhlIGRlZmF1bHQgcHJpb3JpdHkgaXMgYDBgLlxuICpcbiAqICMjIyMgYHRlcm1pbmFsYFxuICogSWYgc2V0IHRvIHRydWUgdGhlbiB0aGUgY3VycmVudCBgcHJpb3JpdHlgIHdpbGwgYmUgdGhlIGxhc3Qgc2V0IG9mIGRpcmVjdGl2ZXNcbiAqIHdoaWNoIHdpbGwgZXhlY3V0ZSAoYW55IGRpcmVjdGl2ZXMgYXQgdGhlIGN1cnJlbnQgcHJpb3JpdHkgd2lsbCBzdGlsbCBleGVjdXRlXG4gKiBhcyB0aGUgb3JkZXIgb2YgZXhlY3V0aW9uIG9uIHNhbWUgYHByaW9yaXR5YCBpcyB1bmRlZmluZWQpLiBOb3RlIHRoYXQgZXhwcmVzc2lvbnNcbiAqIGFuZCBvdGhlciBkaXJlY3RpdmVzIHVzZWQgaW4gdGhlIGRpcmVjdGl2ZSdzIHRlbXBsYXRlIHdpbGwgYWxzbyBiZSBleGNsdWRlZCBmcm9tIGV4ZWN1dGlvbi5cbiAqXG4gKiAjIyMjIGBzY29wZWBcbiAqIFRoZSBzY29wZSBwcm9wZXJ0eSBjYW4gYmUgYGZhbHNlYCwgYHRydWVgLCBvciBhbiBvYmplY3Q6XG4gKlxuICogKiAqKmBmYWxzZWAgKGRlZmF1bHQpOioqIE5vIHNjb3BlIHdpbGwgYmUgY3JlYXRlZCBmb3IgdGhlIGRpcmVjdGl2ZS4gVGhlIGRpcmVjdGl2ZSB3aWxsIHVzZSBpdHNcbiAqIHBhcmVudCdzIHNjb3BlLlxuICpcbiAqICogKipgdHJ1ZWA6KiogQSBuZXcgY2hpbGQgc2NvcGUgdGhhdCBwcm90b3R5cGljYWxseSBpbmhlcml0cyBmcm9tIGl0cyBwYXJlbnQgd2lsbCBiZSBjcmVhdGVkIGZvclxuICogdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQuIElmIG11bHRpcGxlIGRpcmVjdGl2ZXMgb24gdGhlIHNhbWUgZWxlbWVudCByZXF1ZXN0IGEgbmV3IHNjb3BlLFxuICogb25seSBvbmUgbmV3IHNjb3BlIGlzIGNyZWF0ZWQuXG4gKlxuICogKiAqKmB7Li4ufWAgKGFuIG9iamVjdCBoYXNoKToqKiBBIG5ldyBcImlzb2xhdGVcIiBzY29wZSBpcyBjcmVhdGVkIGZvciB0aGUgZGlyZWN0aXZlJ3MgdGVtcGxhdGUuXG4gKiBUaGUgJ2lzb2xhdGUnIHNjb3BlIGRpZmZlcnMgZnJvbSBub3JtYWwgc2NvcGUgaW4gdGhhdCBpdCBkb2VzIG5vdCBwcm90b3R5cGljYWxseVxuICogaW5oZXJpdCBmcm9tIGl0cyBwYXJlbnQgc2NvcGUuIFRoaXMgaXMgdXNlZnVsIHdoZW4gY3JlYXRpbmcgcmV1c2FibGUgY29tcG9uZW50cywgd2hpY2ggc2hvdWxkIG5vdFxuICogYWNjaWRlbnRhbGx5IHJlYWQgb3IgbW9kaWZ5IGRhdGEgaW4gdGhlIHBhcmVudCBzY29wZS4gTm90ZSB0aGF0IGFuIGlzb2xhdGUgc2NvcGVcbiAqIGRpcmVjdGl2ZSB3aXRob3V0IGEgYHRlbXBsYXRlYCBvciBgdGVtcGxhdGVVcmxgIHdpbGwgbm90IGFwcGx5IHRoZSBpc29sYXRlIHNjb3BlXG4gKiB0byBpdHMgY2hpbGRyZW4gZWxlbWVudHMuXG4gKlxuICogVGhlICdpc29sYXRlJyBzY29wZSBvYmplY3QgaGFzaCBkZWZpbmVzIGEgc2V0IG9mIGxvY2FsIHNjb3BlIHByb3BlcnRpZXMgZGVyaXZlZCBmcm9tIGF0dHJpYnV0ZXMgb24gdGhlXG4gKiBkaXJlY3RpdmUncyBlbGVtZW50LiBUaGVzZSBsb2NhbCBwcm9wZXJ0aWVzIGFyZSB1c2VmdWwgZm9yIGFsaWFzaW5nIHZhbHVlcyBmb3IgdGVtcGxhdGVzLiBUaGUga2V5cyBpblxuICogdGhlIG9iamVjdCBoYXNoIG1hcCB0byB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgb24gdGhlIGlzb2xhdGUgc2NvcGU7IHRoZSB2YWx1ZXMgZGVmaW5lIGhvdyB0aGUgcHJvcGVydHlcbiAqIGlzIGJvdW5kIHRvIHRoZSBwYXJlbnQgc2NvcGUsIHZpYSBtYXRjaGluZyBhdHRyaWJ1dGVzIG9uIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50OlxuICpcbiAqICogYEBgIG9yIGBAYXR0cmAgLSBiaW5kIGEgbG9jYWwgc2NvcGUgcHJvcGVydHkgdG8gdGhlIHZhbHVlIG9mIERPTSBhdHRyaWJ1dGUuIFRoZSByZXN1bHQgaXNcbiAqICAgYWx3YXlzIGEgc3RyaW5nIHNpbmNlIERPTSBhdHRyaWJ1dGVzIGFyZSBzdHJpbmdzLiBJZiBubyBgYXR0cmAgbmFtZSBpcyBzcGVjaWZpZWQgdGhlbiB0aGVcbiAqICAgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGUgbG9jYWwgbmFtZS4gR2l2ZW4gYDxteS1jb21wb25lbnRcbiAqICAgbXktYXR0cj1cImhlbGxvIHt7bmFtZX19XCI+YCBhbmQgdGhlIGlzb2xhdGUgc2NvcGUgZGVmaW5pdGlvbiBgc2NvcGU6IHsgbG9jYWxOYW1lOidAbXlBdHRyJyB9YCxcbiAqICAgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIHByb3BlcnR5IGBsb2NhbE5hbWVgIHdpbGwgcmVmbGVjdCB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIGBoZWxsb1xuICogICB7e25hbWV9fWAuIEFzIHRoZSBgbmFtZWAgYXR0cmlidXRlIGNoYW5nZXMgc28gd2lsbCB0aGUgYGxvY2FsTmFtZWAgcHJvcGVydHkgb24gdGhlIGRpcmVjdGl2ZSdzXG4gKiAgIHNjb3BlLiBUaGUgYG5hbWVgIGlzIHJlYWQgZnJvbSB0aGUgcGFyZW50IHNjb3BlIChub3QgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlKS5cbiAqXG4gKiAqIGA9YCBvciBgPWF0dHJgIC0gc2V0IHVwIGEgYmlkaXJlY3Rpb25hbCBiaW5kaW5nIGJldHdlZW4gYSBsb2NhbCBzY29wZSBwcm9wZXJ0eSBhbmQgYW4gZXhwcmVzc2lvblxuICogICBwYXNzZWQgdmlhIHRoZSBhdHRyaWJ1dGUgYGF0dHJgLiBUaGUgZXhwcmVzc2lvbiBpcyBldmFsdWF0ZWQgaW4gdGhlIGNvbnRleHQgb2YgdGhlIHBhcmVudCBzY29wZS5cbiAqICAgSWYgbm8gYGF0dHJgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIGxvY2FsXG4gKiAgIG5hbWUuIEdpdmVuIGA8bXktY29tcG9uZW50IG15LWF0dHI9XCJwYXJlbnRNb2RlbFwiPmAgYW5kIHRoZSBpc29sYXRlIHNjb3BlIGRlZmluaXRpb24gYHNjb3BlOiB7XG4gKiAgIGxvY2FsTW9kZWw6ICc9bXlBdHRyJyB9YCwgdGhlIHByb3BlcnR5IGBsb2NhbE1vZGVsYCBvbiB0aGUgZGlyZWN0aXZlJ3Mgc2NvcGUgd2lsbCByZWZsZWN0IHRoZVxuICogICB2YWx1ZSBvZiBgcGFyZW50TW9kZWxgIG9uIHRoZSBwYXJlbnQgc2NvcGUuIENoYW5nZXMgdG8gYHBhcmVudE1vZGVsYCB3aWxsIGJlIHJlZmxlY3RlZCBpblxuICogICBgbG9jYWxNb2RlbGAgYW5kIHZpY2UgdmVyc2EuIElmIHRoZSBiaW5kaW5nIGV4cHJlc3Npb24gaXMgbm9uLWFzc2lnbmFibGUsIG9yIGlmIHRoZSBhdHRyaWJ1dGVcbiAqICAgaXNuJ3QgIG9wdGlvbmFsIGFuZCBkb2Vzbid0IGV4aXN0LCBhbiBleGNlcHRpb25cbiAqICAgKHtAbGluayBlcnJvci8kY29tcGlsZS9ub25hc3NpZ24gYCRjb21waWxlOm5vbmFzc2lnbmB9KSB3aWxsIGJlIHRocm93biB1cG9uIGRpc2NvdmVyaW5nIGNoYW5nZXNcbiAqICAgdG8gdGhlIGxvY2FsIHZhbHVlLCBzaW5jZSBpdCB3aWxsIGJlIGltcG9zc2libGUgdG8gc3luYyB0aGVtIGJhY2sgdG8gdGhlIHBhcmVudCBzY29wZS5cbiAqXG4gKiAgIEJ5IGRlZmF1bHQsIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggYCR3YXRjaGB9XG4gKiAgIG1ldGhvZCBpcyB1c2VkIGZvciB0cmFja2luZyBjaGFuZ2VzLCBhbmQgdGhlIGVxdWFsaXR5IGNoZWNrIGlzIGJhc2VkIG9uIG9iamVjdCBpZGVudGl0eS5cbiAqICAgSG93ZXZlciwgaWYgYW4gb2JqZWN0IGxpdGVyYWwgb3IgYW4gYXJyYXkgbGl0ZXJhbCBpcyBwYXNzZWQgYXMgdGhlIGJpbmRpbmcgZXhwcmVzc2lvbiwgdGhlXG4gKiAgIGVxdWFsaXR5IGNoZWNrIGlzIGRvbmUgYnkgdmFsdWUgKHVzaW5nIHRoZSB7QGxpbmsgYW5ndWxhci5lcXVhbHN9IGZ1bmN0aW9uKS4gSXQncyBhbHNvIHBvc3NpYmxlXG4gKiAgIHRvIHdhdGNoIHRoZSBldmFsdWF0ZWQgdmFsdWUgc2hhbGxvd2x5IHdpdGgge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoQ29sbGVjdGlvblxuICogICBgJHdhdGNoQ29sbGVjdGlvbmB9OiB1c2UgYD0qYCBvciBgPSphdHRyYFxuICpcbiAgKiAqIGA8YCBvciBgPGF0dHJgIC0gc2V0IHVwIGEgb25lLXdheSAob25lLWRpcmVjdGlvbmFsKSBiaW5kaW5nIGJldHdlZW4gYSBsb2NhbCBzY29wZSBwcm9wZXJ0eSBhbmQgYW5cbiAqICAgZXhwcmVzc2lvbiBwYXNzZWQgdmlhIHRoZSBhdHRyaWJ1dGUgYGF0dHJgLiBUaGUgZXhwcmVzc2lvbiBpcyBldmFsdWF0ZWQgaW4gdGhlIGNvbnRleHQgb2YgdGhlXG4gKiAgIHBhcmVudCBzY29wZS4gSWYgbm8gYGF0dHJgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlXG4gKiAgIGxvY2FsIG5hbWUuXG4gKlxuICogICBGb3IgZXhhbXBsZSwgZ2l2ZW4gYDxteS1jb21wb25lbnQgbXktYXR0cj1cInBhcmVudE1vZGVsXCI+YCBhbmQgZGlyZWN0aXZlIGRlZmluaXRpb24gb2ZcbiAqICAgYHNjb3BlOiB7IGxvY2FsTW9kZWw6JzxteUF0dHInIH1gLCB0aGVuIHRoZSBpc29sYXRlZCBzY29wZSBwcm9wZXJ0eSBgbG9jYWxNb2RlbGAgd2lsbCByZWZsZWN0IHRoZVxuICogICB2YWx1ZSBvZiBgcGFyZW50TW9kZWxgIG9uIHRoZSBwYXJlbnQgc2NvcGUuIEFueSBjaGFuZ2VzIHRvIGBwYXJlbnRNb2RlbGAgd2lsbCBiZSByZWZsZWN0ZWRcbiAqICAgaW4gYGxvY2FsTW9kZWxgLCBidXQgY2hhbmdlcyBpbiBgbG9jYWxNb2RlbGAgd2lsbCBub3QgcmVmbGVjdCBpbiBgcGFyZW50TW9kZWxgLiBUaGVyZSBhcmUgaG93ZXZlclxuICogICB0d28gY2F2ZWF0czpcbiAqICAgICAxLiBvbmUtd2F5IGJpbmRpbmcgZG9lcyBub3QgY29weSB0aGUgdmFsdWUgZnJvbSB0aGUgcGFyZW50IHRvIHRoZSBpc29sYXRlIHNjb3BlLCBpdCBzaW1wbHlcbiAqICAgICBzZXRzIHRoZSBzYW1lIHZhbHVlLiBUaGF0IG1lYW5zIGlmIHlvdXIgYm91bmQgdmFsdWUgaXMgYW4gb2JqZWN0LCBjaGFuZ2VzIHRvIGl0cyBwcm9wZXJ0aWVzXG4gKiAgICAgaW4gdGhlIGlzb2xhdGVkIHNjb3BlIHdpbGwgYmUgcmVmbGVjdGVkIGluIHRoZSBwYXJlbnQgc2NvcGUgKGJlY2F1c2UgYm90aCByZWZlcmVuY2UgdGhlIHNhbWUgb2JqZWN0KS5cbiAqICAgICAyLiBvbmUtd2F5IGJpbmRpbmcgd2F0Y2hlcyBjaGFuZ2VzIHRvIHRoZSAqKmlkZW50aXR5Kiogb2YgdGhlIHBhcmVudCB2YWx1ZS4gVGhhdCBtZWFucyB0aGVcbiAqICAgICB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggYCR3YXRjaGB9IG9uIHRoZSBwYXJlbnQgdmFsdWUgb25seSBmaXJlcyBpZiB0aGUgcmVmZXJlbmNlXG4gKiAgICAgdG8gdGhlIHZhbHVlIGhhcyBjaGFuZ2VkLiBJbiBtb3N0IGNhc2VzLCB0aGlzIHNob3VsZCBub3QgYmUgb2YgY29uY2VybiwgYnV0IGNhbiBiZSBpbXBvcnRhbnRcbiAqICAgICB0byBrbm93IGlmIHlvdSBvbmUtd2F5IGJpbmQgdG8gYW4gb2JqZWN0LCBhbmQgdGhlbiByZXBsYWNlIHRoYXQgb2JqZWN0IGluIHRoZSBpc29sYXRlZCBzY29wZS5cbiAqICAgICBJZiB5b3Ugbm93IGNoYW5nZSBhIHByb3BlcnR5IG9mIHRoZSBvYmplY3QgaW4geW91ciBwYXJlbnQgc2NvcGUsIHRoZSBjaGFuZ2Ugd2lsbCBub3QgYmVcbiAqICAgICBwcm9wYWdhdGVkIHRvIHRoZSBpc29sYXRlZCBzY29wZSwgYmVjYXVzZSB0aGUgaWRlbnRpdHkgb2YgdGhlIG9iamVjdCBvbiB0aGUgcGFyZW50IHNjb3BlXG4gKiAgICAgaGFzIG5vdCBjaGFuZ2VkLiBJbnN0ZWFkIHlvdSBtdXN0IGFzc2lnbiBhIG5ldyBvYmplY3QuXG4gKlxuICogICBPbmUtd2F5IGJpbmRpbmcgaXMgdXNlZnVsIGlmIHlvdSBkbyBub3QgcGxhbiB0byBwcm9wYWdhdGUgY2hhbmdlcyB0byB5b3VyIGlzb2xhdGVkIHNjb3BlIGJpbmRpbmdzXG4gKiAgIGJhY2sgdG8gdGhlIHBhcmVudC4gSG93ZXZlciwgaXQgZG9lcyBub3QgbWFrZSB0aGlzIGNvbXBsZXRlbHkgaW1wb3NzaWJsZS5cbiAqXG4gKiAqIGAmYCBvciBgJmF0dHJgIC0gcHJvdmlkZXMgYSB3YXkgdG8gZXhlY3V0ZSBhbiBleHByZXNzaW9uIGluIHRoZSBjb250ZXh0IG9mIHRoZSBwYXJlbnQgc2NvcGUuIElmXG4gKiAgIG5vIGBhdHRyYCBuYW1lIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBhdHRyaWJ1dGUgbmFtZSBpcyBhc3N1bWVkIHRvIGJlIHRoZSBzYW1lIGFzIHRoZSBsb2NhbCBuYW1lLlxuICogICBHaXZlbiBgPG15LWNvbXBvbmVudCBteS1hdHRyPVwiY291bnQgPSBjb3VudCArIHZhbHVlXCI+YCBhbmQgdGhlIGlzb2xhdGUgc2NvcGUgZGVmaW5pdGlvbiBgc2NvcGU6IHtcbiAqICAgbG9jYWxGbjonJm15QXR0cicgfWAsIHRoZSBpc29sYXRlIHNjb3BlIHByb3BlcnR5IGBsb2NhbEZuYCB3aWxsIHBvaW50IHRvIGEgZnVuY3Rpb24gd3JhcHBlciBmb3JcbiAqICAgdGhlIGBjb3VudCA9IGNvdW50ICsgdmFsdWVgIGV4cHJlc3Npb24uIE9mdGVuIGl0J3MgZGVzaXJhYmxlIHRvIHBhc3MgZGF0YSBmcm9tIHRoZSBpc29sYXRlZCBzY29wZVxuICogICB2aWEgYW4gZXhwcmVzc2lvbiB0byB0aGUgcGFyZW50IHNjb3BlLiBUaGlzIGNhbiBiZSBkb25lIGJ5IHBhc3NpbmcgYSBtYXAgb2YgbG9jYWwgdmFyaWFibGUgbmFtZXNcbiAqICAgYW5kIHZhbHVlcyBpbnRvIHRoZSBleHByZXNzaW9uIHdyYXBwZXIgZm4uIEZvciBleGFtcGxlLCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBgaW5jcmVtZW50KGFtb3VudClgXG4gKiAgIHRoZW4gd2UgY2FuIHNwZWNpZnkgdGhlIGFtb3VudCB2YWx1ZSBieSBjYWxsaW5nIHRoZSBgbG9jYWxGbmAgYXMgYGxvY2FsRm4oe2Ftb3VudDogMjJ9KWAuXG4gKlxuICogQWxsIDQga2luZHMgb2YgYmluZGluZ3MgKGBAYCwgYD1gLCBgPGAsIGFuZCBgJmApIGNhbiBiZSBtYWRlIG9wdGlvbmFsIGJ5IGFkZGluZyBgP2AgdG8gdGhlIGV4cHJlc3Npb24uXG4gKiBUaGUgbWFya2VyIG11c3QgY29tZSBhZnRlciB0aGUgbW9kZSBhbmQgYmVmb3JlIHRoZSBhdHRyaWJ1dGUgbmFtZS5cbiAqIFNlZSB0aGUge0BsaW5rIGVycm9yLyRjb21waWxlL2lzY3AgSW52YWxpZCBJc29sYXRlIFNjb3BlIERlZmluaXRpb24gZXJyb3J9IGZvciBkZWZpbml0aW9uIGV4YW1wbGVzLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gcmVmaW5lIHRoZSBpbnRlcmZhY2UgZGlyZWN0aXZlcyBwcm92aWRlLlxuICogT25lIHN1YnRsZSBkaWZmZXJlbmNlIGJldHdlZW4gb3B0aW9uYWwgYW5kIG5vbi1vcHRpb25hbCBoYXBwZW5zICoqd2hlbiB0aGUgYmluZGluZyBhdHRyaWJ1dGUgaXMgbm90XG4gKiBzZXQqKjpcbiAqIC0gdGhlIGJpbmRpbmcgaXMgb3B0aW9uYWw6IHRoZSBwcm9wZXJ0eSB3aWxsIG5vdCBiZSBkZWZpbmVkXG4gKiAtIHRoZSBiaW5kaW5nIGlzIG5vdCBvcHRpb25hbDogdGhlIHByb3BlcnR5IGlzIGRlZmluZWRcbiAqXG4gKiBgYGBqc1xuICphcHAuZGlyZWN0aXZlKCd0ZXN0RGlyJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIG5vdG9wdGlvbmFsOiAnPScsXG4gICAgICAgIG9wdGlvbmFsOiAnPT8nLFxuICAgICAgfSxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy4kb25Jbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2codGhpcy5oYXNPd25Qcm9wZXJ0eSgnbm90b3B0aW9uYWwnKSkgLy8gdHJ1ZVxuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaGFzT3duUHJvcGVydHkoJ29wdGlvbmFsJykpIC8vIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gKmBgYFxuICpcbiAqXG4gKiAjIyMjIyBDb21iaW5pbmcgZGlyZWN0aXZlcyB3aXRoIGRpZmZlcmVudCBzY29wZSBkZWZpbnRpb25zXG4gKlxuICogSW4gZ2VuZXJhbCBpdCdzIHBvc3NpYmxlIHRvIGFwcGx5IG1vcmUgdGhhbiBvbmUgZGlyZWN0aXZlIHRvIG9uZSBlbGVtZW50LCBidXQgdGhlcmUgbWlnaHQgYmUgbGltaXRhdGlvbnNcbiAqIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiBzY29wZSByZXF1aXJlZCBieSB0aGUgZGlyZWN0aXZlcy4gVGhlIGZvbGxvd2luZyBwb2ludHMgd2lsbCBoZWxwIGV4cGxhaW4gdGhlc2UgbGltaXRhdGlvbnMuXG4gKiBGb3Igc2ltcGxpY2l0eSBvbmx5IHR3byBkaXJlY3RpdmVzIGFyZSB0YWtlbiBpbnRvIGFjY291bnQsIGJ1dCBpdCBpcyBhbHNvIGFwcGxpY2FibGUgZm9yIHNldmVyYWwgZGlyZWN0aXZlczpcbiAqXG4gKiAqICoqbm8gc2NvcGUqKiArICoqbm8gc2NvcGUqKiA9PiBUd28gZGlyZWN0aXZlcyB3aGljaCBkb24ndCByZXF1aXJlIHRoZWlyIG93biBzY29wZSB3aWxsIHVzZSB0aGVpciBwYXJlbnQncyBzY29wZVxuICogKiAqKmNoaWxkIHNjb3BlKiogKyAqKm5vIHNjb3BlKiogPT4gIEJvdGggZGlyZWN0aXZlcyB3aWxsIHNoYXJlIG9uZSBzaW5nbGUgY2hpbGQgc2NvcGVcbiAqICogKipjaGlsZCBzY29wZSoqICsgKipjaGlsZCBzY29wZSoqID0+ICBCb3RoIGRpcmVjdGl2ZXMgd2lsbCBzaGFyZSBvbmUgc2luZ2xlIGNoaWxkIHNjb3BlXG4gKiAqICoqaXNvbGF0ZWQgc2NvcGUqKiArICoqbm8gc2NvcGUqKiA9PiAgVGhlIGlzb2xhdGVkIGRpcmVjdGl2ZSB3aWxsIHVzZSBpdCdzIG93biBjcmVhdGVkIGlzb2xhdGVkIHNjb3BlLiBUaGUgb3RoZXIgZGlyZWN0aXZlIHdpbGwgdXNlXG4gKiBpdHMgcGFyZW50J3Mgc2NvcGVcbiAqICogKippc29sYXRlZCBzY29wZSoqICsgKipjaGlsZCBzY29wZSoqID0+ICAqKldvbid0IHdvcmshKiogT25seSBvbmUgc2NvcGUgY2FuIGJlIHJlbGF0ZWQgdG8gb25lIGVsZW1lbnQuIFRoZXJlZm9yZSB0aGVzZSBkaXJlY3RpdmVzIGNhbm5vdFxuICogYmUgYXBwbGllZCB0byB0aGUgc2FtZSBlbGVtZW50LlxuICogKiAqKmlzb2xhdGVkIHNjb3BlKiogKyAqKmlzb2xhdGVkIHNjb3BlKiogID0+ICAqKldvbid0IHdvcmshKiogT25seSBvbmUgc2NvcGUgY2FuIGJlIHJlbGF0ZWQgdG8gb25lIGVsZW1lbnQuIFRoZXJlZm9yZSB0aGVzZSBkaXJlY3RpdmVzXG4gKiBjYW5ub3QgYmUgYXBwbGllZCB0byB0aGUgc2FtZSBlbGVtZW50LlxuICpcbiAqXG4gKiAjIyMjIGBiaW5kVG9Db250cm9sbGVyYFxuICogVGhpcyBwcm9wZXJ0eSBpcyB1c2VkIHRvIGJpbmQgc2NvcGUgcHJvcGVydGllcyBkaXJlY3RseSB0byB0aGUgY29udHJvbGxlci4gSXQgY2FuIGJlIGVpdGhlclxuICogYHRydWVgIG9yIGFuIG9iamVjdCBoYXNoIHdpdGggdGhlIHNhbWUgZm9ybWF0IGFzIHRoZSBgc2NvcGVgIHByb3BlcnR5LlxuICpcbiAqIFdoZW4gYW4gaXNvbGF0ZSBzY29wZSBpcyB1c2VkIGZvciBhIGRpcmVjdGl2ZSAoc2VlIGFib3ZlKSwgYGJpbmRUb0NvbnRyb2xsZXI6IHRydWVgIHdpbGxcbiAqIGFsbG93IGEgY29tcG9uZW50IHRvIGhhdmUgaXRzIHByb3BlcnRpZXMgYm91bmQgdG8gdGhlIGNvbnRyb2xsZXIsIHJhdGhlciB0aGFuIHRvIHNjb3BlLlxuICpcbiAqIEFmdGVyIHRoZSBjb250cm9sbGVyIGlzIGluc3RhbnRpYXRlZCwgdGhlIGluaXRpYWwgdmFsdWVzIG9mIHRoZSBpc29sYXRlIHNjb3BlIGJpbmRpbmdzIHdpbGwgYmUgYm91bmQgdG8gdGhlIGNvbnRyb2xsZXJcbiAqIHByb3BlcnRpZXMuIFlvdSBjYW4gYWNjZXNzIHRoZXNlIGJpbmRpbmdzIG9uY2UgdGhleSBoYXZlIGJlZW4gaW5pdGlhbGl6ZWQgYnkgcHJvdmlkaW5nIGEgY29udHJvbGxlciBtZXRob2QgY2FsbGVkXG4gKiBgJG9uSW5pdGAsIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBhbGwgdGhlIGNvbnRyb2xsZXJzIG9uIGFuIGVsZW1lbnQgaGF2ZSBiZWVuIGNvbnN0cnVjdGVkIGFuZCBoYWQgdGhlaXIgYmluZGluZ3NcbiAqIGluaXRpYWxpemVkLlxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gc2V0IGBiaW5kVG9Db250cm9sbGVyYCB0byBhbiBvYmplY3QgaGFzaCB3aXRoIHRoZSBzYW1lIGZvcm1hdCBhcyB0aGUgYHNjb3BlYCBwcm9wZXJ0eS5cbiAqIFRoaXMgd2lsbCBzZXQgdXAgdGhlIHNjb3BlIGJpbmRpbmdzIHRvIHRoZSBjb250cm9sbGVyIGRpcmVjdGx5LiBOb3RlIHRoYXQgYHNjb3BlYCBjYW4gc3RpbGwgYmUgdXNlZFxuICogdG8gZGVmaW5lIHdoaWNoIGtpbmQgb2Ygc2NvcGUgaXMgY3JlYXRlZC4gQnkgZGVmYXVsdCwgbm8gc2NvcGUgaXMgY3JlYXRlZC4gVXNlIGBzY29wZToge31gIHRvIGNyZWF0ZSBhbiBpc29sYXRlXG4gKiBzY29wZSAodXNlZnVsIGZvciBjb21wb25lbnQgZGlyZWN0aXZlcykuXG4gKlxuICogSWYgYm90aCBgYmluZFRvQ29udHJvbGxlcmAgYW5kIGBzY29wZWAgYXJlIGRlZmluZWQgYW5kIGhhdmUgb2JqZWN0IGhhc2hlcywgYGJpbmRUb0NvbnRyb2xsZXJgIG92ZXJyaWRlcyBgc2NvcGVgLlxuICpcbiAqXG4gKiAjIyMjIGBjb250cm9sbGVyYFxuICogQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gVGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGJlZm9yZSB0aGVcbiAqIHByZS1saW5raW5nIHBoYXNlIGFuZCBjYW4gYmUgYWNjZXNzZWQgYnkgb3RoZXIgZGlyZWN0aXZlcyAoc2VlXG4gKiBgcmVxdWlyZWAgYXR0cmlidXRlKS4gVGhpcyBhbGxvd3MgdGhlIGRpcmVjdGl2ZXMgdG8gY29tbXVuaWNhdGUgd2l0aCBlYWNoIG90aGVyIGFuZCBhdWdtZW50XG4gKiBlYWNoIG90aGVyJ3MgYmVoYXZpb3IuIFRoZSBjb250cm9sbGVyIGlzIGluamVjdGFibGUgKGFuZCBzdXBwb3J0cyBicmFja2V0IG5vdGF0aW9uKSB3aXRoIHRoZSBmb2xsb3dpbmcgbG9jYWxzOlxuICpcbiAqICogYCRzY29wZWAgLSBDdXJyZW50IHNjb3BlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZWxlbWVudFxuICogKiBgJGVsZW1lbnRgIC0gQ3VycmVudCBlbGVtZW50XG4gKiAqIGAkYXR0cnNgIC0gQ3VycmVudCBhdHRyaWJ1dGVzIG9iamVjdCBmb3IgdGhlIGVsZW1lbnRcbiAqICogYCR0cmFuc2NsdWRlYCAtIEEgdHJhbnNjbHVkZSBsaW5raW5nIGZ1bmN0aW9uIHByZS1ib3VuZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGU6XG4gKiAgIGBmdW5jdGlvbihbc2NvcGVdLCBjbG9uZUxpbmtpbmdGbiwgZnV0dXJlUGFyZW50RWxlbWVudCwgc2xvdE5hbWUpYDpcbiAqICAgICogYHNjb3BlYDogKG9wdGlvbmFsKSBvdmVycmlkZSB0aGUgc2NvcGUuXG4gKiAgICAqIGBjbG9uZUxpbmtpbmdGbmA6IChvcHRpb25hbCkgYXJndW1lbnQgdG8gY3JlYXRlIGNsb25lcyBvZiB0aGUgb3JpZ2luYWwgdHJhbnNjbHVkZWQgY29udGVudC5cbiAqICAgICogYGZ1dHVyZVBhcmVudEVsZW1lbnRgIChvcHRpb25hbCk6XG4gKiAgICAgICAgKiBkZWZpbmVzIHRoZSBwYXJlbnQgdG8gd2hpY2ggdGhlIGBjbG9uZUxpbmtpbmdGbmAgd2lsbCBhZGQgdGhlIGNsb25lZCBlbGVtZW50cy5cbiAqICAgICAgICAqIGRlZmF1bHQ6IGAkZWxlbWVudC5wYXJlbnQoKWAgcmVzcC4gYCRlbGVtZW50YCBmb3IgYHRyYW5zY2x1ZGU6J2VsZW1lbnQnYCByZXNwLiBgdHJhbnNjbHVkZTp0cnVlYC5cbiAqICAgICAgICAqIG9ubHkgbmVlZGVkIGZvciB0cmFuc2NsdWRlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIGNvbnRhaW4gbm9uIGh0bWwgZWxlbWVudHMgKGUuZy4gU1ZHIGVsZW1lbnRzKVxuICogICAgICAgICAgYW5kIHdoZW4gdGhlIGBjbG9uZUxpbmtpbmdGbmAgaXMgcGFzc2VkLFxuICogICAgICAgICAgYXMgdGhvc2UgZWxlbWVudHMgbmVlZCB0byBjcmVhdGVkIGFuZCBjbG9uZWQgaW4gYSBzcGVjaWFsIHdheSB3aGVuIHRoZXkgYXJlIGRlZmluZWQgb3V0c2lkZSB0aGVpclxuICogICAgICAgICAgdXN1YWwgY29udGFpbmVycyAoZS5nLiBsaWtlIGA8c3ZnPmApLlxuICogICAgICAgICogU2VlIGFsc28gdGhlIGBkaXJlY3RpdmUudGVtcGxhdGVOYW1lc3BhY2VgIHByb3BlcnR5LlxuICogICAgKiBgc2xvdE5hbWVgOiAob3B0aW9uYWwpIHRoZSBuYW1lIG9mIHRoZSBzbG90IHRvIHRyYW5zY2x1ZGUuIElmIGZhbHN5IChlLmcuIGBudWxsYCwgYHVuZGVmaW5lZGAgb3IgYCcnYClcbiAqICAgICAgdGhlbiB0aGUgZGVmYXVsdCB0cmFuc2NsdXNpb24gaXMgcHJvdmlkZWQuXG4gKiAgICBUaGUgYCR0cmFuc2NsdWRlYCBmdW5jdGlvbiBhbHNvIGhhcyBhIG1ldGhvZCBvbiBpdCwgYCR0cmFuc2NsdWRlLmlzU2xvdEZpbGxlZChzbG90TmFtZSlgLCB3aGljaCByZXR1cm5zXG4gKiAgICBgdHJ1ZWAgaWYgdGhlIHNwZWNpZmllZCBzbG90IGNvbnRhaW5zIGNvbnRlbnQgKGkuZS4gb25lIG9yIG1vcmUgRE9NIG5vZGVzKS5cbiAqXG4gKiAjIyMjIGByZXF1aXJlYFxuICogUmVxdWlyZSBhbm90aGVyIGRpcmVjdGl2ZSBhbmQgaW5qZWN0IGl0cyBjb250cm9sbGVyIGFzIHRoZSBmb3VydGggYXJndW1lbnQgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb24uIFRoZVxuICogYHJlcXVpcmVgIHByb3BlcnR5IGNhbiBiZSBhIHN0cmluZywgYW4gYXJyYXkgb3IgYW4gb2JqZWN0OlxuICogKiBhICoqc3RyaW5nKiogY29udGFpbmluZyB0aGUgbmFtZSBvZiB0aGUgZGlyZWN0aXZlIHRvIHBhc3MgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb25cbiAqICogYW4gKiphcnJheSoqIGNvbnRhaW5pbmcgdGhlIG5hbWVzIG9mIGRpcmVjdGl2ZXMgdG8gcGFzcyB0byB0aGUgbGlua2luZyBmdW5jdGlvbi4gVGhlIGFyZ3VtZW50IHBhc3NlZCB0byB0aGVcbiAqIGxpbmtpbmcgZnVuY3Rpb24gd2lsbCBiZSBhbiBhcnJheSBvZiBjb250cm9sbGVycyBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGUgbmFtZXMgaW4gdGhlIGByZXF1aXJlYCBwcm9wZXJ0eVxuICogKiBhbiAqKm9iamVjdCoqIHdob3NlIHByb3BlcnR5IHZhbHVlcyBhcmUgdGhlIG5hbWVzIG9mIHRoZSBkaXJlY3RpdmVzIHRvIHBhc3MgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb24uIFRoZSBhcmd1bWVudFxuICogcGFzc2VkIHRvIHRoZSBsaW5raW5nIGZ1bmN0aW9uIHdpbGwgYWxzbyBiZSBhbiBvYmplY3Qgd2l0aCBtYXRjaGluZyBrZXlzLCB3aG9zZSB2YWx1ZXMgd2lsbCBob2xkIHRoZSBjb3JyZXNwb25kaW5nXG4gKiBjb250cm9sbGVycy5cbiAqXG4gKiBJZiB0aGUgYHJlcXVpcmVgIHByb3BlcnR5IGlzIGFuIG9iamVjdCBhbmQgYGJpbmRUb0NvbnRyb2xsZXJgIGlzIHRydXRoeSwgdGhlbiB0aGUgcmVxdWlyZWQgY29udHJvbGxlcnMgYXJlXG4gKiBib3VuZCB0byB0aGUgY29udHJvbGxlciB1c2luZyB0aGUga2V5cyBvZiB0aGUgYHJlcXVpcmVgIHByb3BlcnR5LiBUaGlzIGJpbmRpbmcgb2NjdXJzIGFmdGVyIGFsbCB0aGUgY29udHJvbGxlcnNcbiAqIGhhdmUgYmVlbiBjb25zdHJ1Y3RlZCBidXQgYmVmb3JlIGAkb25Jbml0YCBpcyBjYWxsZWQuXG4gKiBJZiB0aGUgbmFtZSBvZiB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBpcyB0aGUgc2FtZSBhcyB0aGUgbG9jYWwgbmFtZSAodGhlIGtleSksIHRoZSBuYW1lIGNhbiBiZVxuICogb21pdHRlZC4gRm9yIGV4YW1wbGUsIGB7cGFyZW50RGlyOiAnXl4nfWAgaXMgZXF1aXZhbGVudCB0byBge3BhcmVudERpcjogJ15ecGFyZW50RGlyJ31gLlxuICogU2VlIHRoZSB7QGxpbmsgJGNvbXBpbGVQcm92aWRlciNjb21wb25lbnR9IGhlbHBlciBmb3IgYW4gZXhhbXBsZSBvZiBob3cgdGhpcyBjYW4gYmUgdXNlZC5cbiAqIElmIG5vIHN1Y2ggcmVxdWlyZWQgZGlyZWN0aXZlKHMpIGNhbiBiZSBmb3VuZCwgb3IgaWYgdGhlIGRpcmVjdGl2ZSBkb2VzIG5vdCBoYXZlIGEgY29udHJvbGxlciwgdGhlbiBhbiBlcnJvciBpc1xuICogcmFpc2VkICh1bmxlc3Mgbm8gbGluayBmdW5jdGlvbiBpcyBzcGVjaWZpZWQgYW5kIHRoZSByZXF1aXJlZCBjb250cm9sbGVycyBhcmUgbm90IGJlaW5nIGJvdW5kIHRvIHRoZSBkaXJlY3RpdmVcbiAqIGNvbnRyb2xsZXIsIGluIHdoaWNoIGNhc2UgZXJyb3IgY2hlY2tpbmcgaXMgc2tpcHBlZCkuIFRoZSBuYW1lIGNhbiBiZSBwcmVmaXhlZCB3aXRoOlxuICpcbiAqICogKG5vIHByZWZpeCkgLSBMb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgb24gdGhlIGN1cnJlbnQgZWxlbWVudC4gVGhyb3cgYW4gZXJyb3IgaWYgbm90IGZvdW5kLlxuICogKiBgP2AgLSBBdHRlbXB0IHRvIGxvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBvciBwYXNzIGBudWxsYCB0byB0aGUgYGxpbmtgIGZuIGlmIG5vdCBmb3VuZC5cbiAqICogYF5gIC0gTG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCBhbmQgaXRzIHBhcmVudHMuIFRocm93IGFuIGVycm9yIGlmIG5vdCBmb3VuZC5cbiAqICogYF5eYCAtIExvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBieSBzZWFyY2hpbmcgdGhlIGVsZW1lbnQncyBwYXJlbnRzLiBUaHJvdyBhbiBlcnJvciBpZiBub3QgZm91bmQuXG4gKiAqIGA/XmAgLSBBdHRlbXB0IHRvIGxvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBieSBzZWFyY2hpbmcgdGhlIGVsZW1lbnQgYW5kIGl0cyBwYXJlbnRzIG9yIHBhc3NcbiAqICAgYG51bGxgIHRvIHRoZSBgbGlua2AgZm4gaWYgbm90IGZvdW5kLlxuICogKiBgP15eYCAtIEF0dGVtcHQgdG8gbG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCdzIHBhcmVudHMsIG9yIHBhc3NcbiAqICAgYG51bGxgIHRvIHRoZSBgbGlua2AgZm4gaWYgbm90IGZvdW5kLlxuICpcbiAqXG4gKiAjIyMjIGBjb250cm9sbGVyQXNgXG4gKiBJZGVudGlmaWVyIG5hbWUgZm9yIGEgcmVmZXJlbmNlIHRvIHRoZSBjb250cm9sbGVyIGluIHRoZSBkaXJlY3RpdmUncyBzY29wZS5cbiAqIFRoaXMgYWxsb3dzIHRoZSBjb250cm9sbGVyIHRvIGJlIHJlZmVyZW5jZWQgZnJvbSB0aGUgZGlyZWN0aXZlIHRlbXBsYXRlLiBUaGlzIGlzIGVzcGVjaWFsbHlcbiAqIHVzZWZ1bCB3aGVuIGEgZGlyZWN0aXZlIGlzIHVzZWQgYXMgY29tcG9uZW50LCBpLmUuIHdpdGggYW4gYGlzb2xhdGVgIHNjb3BlLiBJdCdzIGFsc28gcG9zc2libGVcbiAqIHRvIHVzZSBpdCBpbiBhIGRpcmVjdGl2ZSB3aXRob3V0IGFuIGBpc29sYXRlYCAvIGBuZXdgIHNjb3BlLCBidXQgeW91IG5lZWQgdG8gYmUgYXdhcmUgdGhhdCB0aGVcbiAqIGBjb250cm9sbGVyQXNgIHJlZmVyZW5jZSBtaWdodCBvdmVyd3JpdGUgYSBwcm9wZXJ0eSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBwYXJlbnQgc2NvcGUuXG4gKlxuICpcbiAqICMjIyMgYHJlc3RyaWN0YFxuICogU3RyaW5nIG9mIHN1YnNldCBvZiBgRUFDTWAgd2hpY2ggcmVzdHJpY3RzIHRoZSBkaXJlY3RpdmUgdG8gYSBzcGVjaWZpYyBkaXJlY3RpdmVcbiAqIGRlY2xhcmF0aW9uIHN0eWxlLiBJZiBvbWl0dGVkLCB0aGUgZGVmYXVsdHMgKGVsZW1lbnRzIGFuZCBhdHRyaWJ1dGVzKSBhcmUgdXNlZC5cbiAqXG4gKiAqIGBFYCAtIEVsZW1lbnQgbmFtZSAoZGVmYXVsdCk6IGA8bXktZGlyZWN0aXZlPjwvbXktZGlyZWN0aXZlPmBcbiAqICogYEFgIC0gQXR0cmlidXRlIChkZWZhdWx0KTogYDxkaXYgbXktZGlyZWN0aXZlPVwiZXhwXCI+PC9kaXY+YFxuICogKiBgQ2AgLSBDbGFzczogYDxkaXYgY2xhc3M9XCJteS1kaXJlY3RpdmU6IGV4cDtcIj48L2Rpdj5gXG4gKiAqIGBNYCAtIENvbW1lbnQ6IGA8IS0tIGRpcmVjdGl2ZTogbXktZGlyZWN0aXZlIGV4cCAtLT5gXG4gKlxuICpcbiAqICMjIyMgYHRlbXBsYXRlTmFtZXNwYWNlYFxuICogU3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZG9jdW1lbnQgdHlwZSB1c2VkIGJ5IHRoZSBtYXJrdXAgaW4gdGhlIHRlbXBsYXRlLlxuICogQW5ndWxhckpTIG5lZWRzIHRoaXMgaW5mb3JtYXRpb24gYXMgdGhvc2UgZWxlbWVudHMgbmVlZCB0byBiZSBjcmVhdGVkIGFuZCBjbG9uZWRcbiAqIGluIGEgc3BlY2lhbCB3YXkgd2hlbiB0aGV5IGFyZSBkZWZpbmVkIG91dHNpZGUgdGhlaXIgdXN1YWwgY29udGFpbmVycyBsaWtlIGA8c3ZnPmAgYW5kIGA8bWF0aD5gLlxuICpcbiAqICogYGh0bWxgIC0gQWxsIHJvb3Qgbm9kZXMgaW4gdGhlIHRlbXBsYXRlIGFyZSBIVE1MLiBSb290IG5vZGVzIG1heSBhbHNvIGJlXG4gKiAgIHRvcC1sZXZlbCBlbGVtZW50cyBzdWNoIGFzIGA8c3ZnPmAgb3IgYDxtYXRoPmAuXG4gKiAqIGBzdmdgIC0gVGhlIHJvb3Qgbm9kZXMgaW4gdGhlIHRlbXBsYXRlIGFyZSBTVkcgZWxlbWVudHMgKGV4Y2x1ZGluZyBgPG1hdGg+YCkuXG4gKiAqIGBtYXRoYCAtIFRoZSByb290IG5vZGVzIGluIHRoZSB0ZW1wbGF0ZSBhcmUgTWF0aE1MIGVsZW1lbnRzIChleGNsdWRpbmcgYDxzdmc+YCkuXG4gKlxuICogSWYgbm8gYHRlbXBsYXRlTmFtZXNwYWNlYCBpcyBzcGVjaWZpZWQsIHRoZW4gdGhlIG5hbWVzcGFjZSBpcyBjb25zaWRlcmVkIHRvIGJlIGBodG1sYC5cbiAqXG4gKiAjIyMjIGB0ZW1wbGF0ZWBcbiAqIEhUTUwgbWFya3VwIHRoYXQgbWF5OlxuICogKiBSZXBsYWNlIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCAoZGVmYXVsdCkuXG4gKiAqIFJlcGxhY2UgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQgaXRzZWxmIChpZiBgcmVwbGFjZWAgaXMgdHJ1ZSAtIERFUFJFQ0FURUQpLlxuICogKiBXcmFwIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCAoaWYgYHRyYW5zY2x1ZGVgIGlzIHRydWUpLlxuICpcbiAqIFZhbHVlIG1heSBiZTpcbiAqXG4gKiAqIEEgc3RyaW5nLiBGb3IgZXhhbXBsZSBgPGRpdiByZWQtb24taG92ZXI+e3tkZWxldGVfc3RyfX08L2Rpdj5gLlxuICogKiBBIGZ1bmN0aW9uIHdoaWNoIHRha2VzIHR3byBhcmd1bWVudHMgYHRFbGVtZW50YCBhbmQgYHRBdHRyc2AgKGRlc2NyaWJlZCBpbiB0aGUgYGNvbXBpbGVgXG4gKiAgIGZ1bmN0aW9uIGFwaSBiZWxvdykgYW5kIHJldHVybnMgYSBzdHJpbmcgdmFsdWUuXG4gKlxuICpcbiAqICMjIyMgYHRlbXBsYXRlVXJsYFxuICogVGhpcyBpcyBzaW1pbGFyIHRvIGB0ZW1wbGF0ZWAgYnV0IHRoZSB0ZW1wbGF0ZSBpcyBsb2FkZWQgZnJvbSB0aGUgc3BlY2lmaWVkIFVSTCwgYXN5bmNocm9ub3VzbHkuXG4gKlxuICogQmVjYXVzZSB0ZW1wbGF0ZSBsb2FkaW5nIGlzIGFzeW5jaHJvbm91cyB0aGUgY29tcGlsZXIgd2lsbCBzdXNwZW5kIGNvbXBpbGF0aW9uIG9mIGRpcmVjdGl2ZXMgb24gdGhhdCBlbGVtZW50XG4gKiBmb3IgbGF0ZXIgd2hlbiB0aGUgdGVtcGxhdGUgaGFzIGJlZW4gcmVzb2x2ZWQuICBJbiB0aGUgbWVhbnRpbWUgaXQgd2lsbCBjb250aW51ZSB0byBjb21waWxlIGFuZCBsaW5rXG4gKiBzaWJsaW5nIGFuZCBwYXJlbnQgZWxlbWVudHMgYXMgdGhvdWdoIHRoaXMgZWxlbWVudCBoYWQgbm90IGNvbnRhaW5lZCBhbnkgZGlyZWN0aXZlcy5cbiAqXG4gKiBUaGUgY29tcGlsZXIgZG9lcyBub3Qgc3VzcGVuZCB0aGUgZW50aXJlIGNvbXBpbGF0aW9uIHRvIHdhaXQgZm9yIHRlbXBsYXRlcyB0byBiZSBsb2FkZWQgYmVjYXVzZSB0aGlzXG4gKiB3b3VsZCByZXN1bHQgaW4gdGhlIHdob2xlIGFwcCBcInN0YWxsaW5nXCIgdW50aWwgYWxsIHRlbXBsYXRlcyBhcmUgbG9hZGVkIGFzeW5jaHJvbm91c2x5IC0gZXZlbiBpbiB0aGVcbiAqIGNhc2Ugd2hlbiBvbmx5IG9uZSBkZWVwbHkgbmVzdGVkIGRpcmVjdGl2ZSBoYXMgYHRlbXBsYXRlVXJsYC5cbiAqXG4gKiBUZW1wbGF0ZSBsb2FkaW5nIGlzIGFzeW5jaHJvbm91cyBldmVuIGlmIHRoZSB0ZW1wbGF0ZSBoYXMgYmVlbiBwcmVsb2FkZWQgaW50byB0aGUge0BsaW5rICR0ZW1wbGF0ZUNhY2hlfVxuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSBgdGVtcGxhdGVVcmxgIGFzIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgVVJMIG9yIGFzIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdHdvXG4gKiBhcmd1bWVudHMgYHRFbGVtZW50YCBhbmQgYHRBdHRyc2AgKGRlc2NyaWJlZCBpbiB0aGUgYGNvbXBpbGVgIGZ1bmN0aW9uIGFwaSBiZWxvdykgYW5kIHJldHVybnNcbiAqIGEgc3RyaW5nIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgdXJsLiAgSW4gZWl0aGVyIGNhc2UsIHRoZSB0ZW1wbGF0ZSBVUkwgaXMgcGFzc2VkIHRocm91Z2gge0BsaW5rXG4gKiAkc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybCAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybH0uXG4gKlxuICpcbiAqICMjIyMgYHJlcGxhY2VgXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gKiAqKk5vdGU6KiogYHJlcGxhY2VgIGlzIGRlcHJlY2F0ZWQgaW4gQW5ndWxhckpTIGFuZCBoYXMgYmVlbiByZW1vdmVkIGluIHRoZSBuZXcgQW5ndWxhciAodjIrKS5cbiAqIDwvZGl2PlxuICpcbiAqIFNwZWNpZmllcyB3aGF0IHRoZSB0ZW1wbGF0ZSBzaG91bGQgcmVwbGFjZS4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAqXG4gKiAqIGB0cnVlYCAtIHRoZSB0ZW1wbGF0ZSB3aWxsIHJlcGxhY2UgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQuXG4gKiAqIGBmYWxzZWAgLSB0aGUgdGVtcGxhdGUgd2lsbCByZXBsYWNlIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudC5cbiAqXG4gKiBUaGUgcmVwbGFjZW1lbnQgcHJvY2VzcyBtaWdyYXRlcyBhbGwgb2YgdGhlIGF0dHJpYnV0ZXMgLyBjbGFzc2VzIGZyb20gdGhlIG9sZCBlbGVtZW50IHRvIHRoZSBuZXdcbiAqIG9uZS4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlI3RlbXBsYXRlLWV4cGFuZGluZy1kaXJlY3RpdmVcbiAqIERpcmVjdGl2ZXMgR3VpZGV9IGZvciBhbiBleGFtcGxlLlxuICpcbiAqIFRoZXJlIGFyZSB2ZXJ5IGZldyBzY2VuYXJpb3Mgd2hlcmUgZWxlbWVudCByZXBsYWNlbWVudCBpcyByZXF1aXJlZCBmb3IgdGhlIGFwcGxpY2F0aW9uIGZ1bmN0aW9uLFxuICogdGhlIG1haW4gb25lIGJlaW5nIHJldXNhYmxlIGN1c3RvbSBjb21wb25lbnRzIHRoYXQgYXJlIHVzZWQgd2l0aGluIFNWRyBjb250ZXh0c1xuICogKGJlY2F1c2UgU1ZHIGRvZXNuJ3Qgd29yayB3aXRoIGN1c3RvbSBlbGVtZW50cyBpbiB0aGUgRE9NIHRyZWUpLlxuICpcbiAqICMjIyMgYHRyYW5zY2x1ZGVgXG4gKiBFeHRyYWN0IHRoZSBjb250ZW50cyBvZiB0aGUgZWxlbWVudCB3aGVyZSB0aGUgZGlyZWN0aXZlIGFwcGVhcnMgYW5kIG1ha2UgaXQgYXZhaWxhYmxlIHRvIHRoZSBkaXJlY3RpdmUuXG4gKiBUaGUgY29udGVudHMgYXJlIGNvbXBpbGVkIGFuZCBwcm92aWRlZCB0byB0aGUgZGlyZWN0aXZlIGFzIGEgKip0cmFuc2NsdXNpb24gZnVuY3Rpb24qKi4gU2VlIHRoZVxuICoge0BsaW5rICRjb21waWxlI3RyYW5zY2x1c2lvbiBUcmFuc2NsdXNpb259IHNlY3Rpb24gYmVsb3cuXG4gKlxuICpcbiAqICMjIyMgYGNvbXBpbGVgXG4gKlxuICogYGBganNcbiAqICAgZnVuY3Rpb24gY29tcGlsZSh0RWxlbWVudCwgdEF0dHJzLCB0cmFuc2NsdWRlKSB7IC4uLiB9XG4gKiBgYGBcbiAqXG4gKiBUaGUgY29tcGlsZSBmdW5jdGlvbiBkZWFscyB3aXRoIHRyYW5zZm9ybWluZyB0aGUgdGVtcGxhdGUgRE9NLiBTaW5jZSBtb3N0IGRpcmVjdGl2ZXMgZG8gbm90IGRvXG4gKiB0ZW1wbGF0ZSB0cmFuc2Zvcm1hdGlvbiwgaXQgaXMgbm90IHVzZWQgb2Z0ZW4uIFRoZSBjb21waWxlIGZ1bmN0aW9uIHRha2VzIHRoZSBmb2xsb3dpbmcgYXJndW1lbnRzOlxuICpcbiAqICAgKiBgdEVsZW1lbnRgIC0gdGVtcGxhdGUgZWxlbWVudCAtIFRoZSBlbGVtZW50IHdoZXJlIHRoZSBkaXJlY3RpdmUgaGFzIGJlZW4gZGVjbGFyZWQuIEl0IGlzXG4gKiAgICAgc2FmZSB0byBkbyB0ZW1wbGF0ZSB0cmFuc2Zvcm1hdGlvbiBvbiB0aGUgZWxlbWVudCBhbmQgY2hpbGQgZWxlbWVudHMgb25seS5cbiAqXG4gKiAgICogYHRBdHRyc2AgLSB0ZW1wbGF0ZSBhdHRyaWJ1dGVzIC0gTm9ybWFsaXplZCBsaXN0IG9mIGF0dHJpYnV0ZXMgZGVjbGFyZWQgb24gdGhpcyBlbGVtZW50IHNoYXJlZFxuICogICAgIGJldHdlZW4gYWxsIGRpcmVjdGl2ZSBjb21waWxlIGZ1bmN0aW9ucy5cbiAqXG4gKiAgICogYHRyYW5zY2x1ZGVgIC0gIFsqREVQUkVDQVRFRCohXSBBIHRyYW5zY2x1ZGUgbGlua2luZyBmdW5jdGlvbjogYGZ1bmN0aW9uKHNjb3BlLCBjbG9uZUxpbmtpbmdGbilgXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBUaGUgdGVtcGxhdGUgaW5zdGFuY2UgYW5kIHRoZSBsaW5rIGluc3RhbmNlIG1heSBiZSBkaWZmZXJlbnQgb2JqZWN0cyBpZiB0aGUgdGVtcGxhdGUgaGFzXG4gKiBiZWVuIGNsb25lZC4gRm9yIHRoaXMgcmVhc29uIGl0IGlzICoqbm90Kiogc2FmZSB0byBkbyBhbnl0aGluZyBvdGhlciB0aGFuIERPTSB0cmFuc2Zvcm1hdGlvbnMgdGhhdFxuICogYXBwbHkgdG8gYWxsIGNsb25lZCBET00gbm9kZXMgd2l0aGluIHRoZSBjb21waWxlIGZ1bmN0aW9uLiBTcGVjaWZpY2FsbHksIERPTSBsaXN0ZW5lciByZWdpc3RyYXRpb25cbiAqIHNob3VsZCBiZSBkb25lIGluIGEgbGlua2luZyBmdW5jdGlvbiByYXRoZXIgdGhhbiBpbiBhIGNvbXBpbGUgZnVuY3Rpb24uXG4gKiA8L2Rpdj5cblxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBUaGUgY29tcGlsZSBmdW5jdGlvbiBjYW5ub3QgaGFuZGxlIGRpcmVjdGl2ZXMgdGhhdCByZWN1cnNpdmVseSB1c2UgdGhlbXNlbHZlcyBpbiB0aGVpclxuICogb3duIHRlbXBsYXRlcyBvciBjb21waWxlIGZ1bmN0aW9ucy4gQ29tcGlsaW5nIHRoZXNlIGRpcmVjdGl2ZXMgcmVzdWx0cyBpbiBhbiBpbmZpbml0ZSBsb29wIGFuZFxuICogc3RhY2sgb3ZlcmZsb3cgZXJyb3JzLlxuICpcbiAqIFRoaXMgY2FuIGJlIGF2b2lkZWQgYnkgbWFudWFsbHkgdXNpbmcgJGNvbXBpbGUgaW4gdGhlIHBvc3RMaW5rIGZ1bmN0aW9uIHRvIGltcGVyYXRpdmVseSBjb21waWxlXG4gKiBhIGRpcmVjdGl2ZSdzIHRlbXBsYXRlIGluc3RlYWQgb2YgcmVseWluZyBvbiBhdXRvbWF0aWMgdGVtcGxhdGUgY29tcGlsYXRpb24gdmlhIGB0ZW1wbGF0ZWAgb3JcbiAqIGB0ZW1wbGF0ZVVybGAgZGVjbGFyYXRpb24gb3IgbWFudWFsIGNvbXBpbGF0aW9uIGluc2lkZSB0aGUgY29tcGlsZSBmdW5jdGlvbi5cbiAqIDwvZGl2PlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqICoqTm90ZToqKiBUaGUgYHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIHRoYXQgaXMgcGFzc2VkIHRvIHRoZSBjb21waWxlIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQsIGFzIGl0XG4gKiAgIGUuZy4gZG9lcyBub3Qga25vdyBhYm91dCB0aGUgcmlnaHQgb3V0ZXIgc2NvcGUuIFBsZWFzZSB1c2UgdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gdGhhdCBpcyBwYXNzZWRcbiAqICAgdG8gdGhlIGxpbmsgZnVuY3Rpb24gaW5zdGVhZC5cbiAqIDwvZGl2PlxuXG4gKiBBIGNvbXBpbGUgZnVuY3Rpb24gY2FuIGhhdmUgYSByZXR1cm4gdmFsdWUgd2hpY2ggY2FuIGJlIGVpdGhlciBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdC5cbiAqXG4gKiAqIHJldHVybmluZyBhIChwb3N0LWxpbmspIGZ1bmN0aW9uIC0gaXMgZXF1aXZhbGVudCB0byByZWdpc3RlcmluZyB0aGUgbGlua2luZyBmdW5jdGlvbiB2aWEgdGhlXG4gKiAgIGBsaW5rYCBwcm9wZXJ0eSBvZiB0aGUgY29uZmlnIG9iamVjdCB3aGVuIHRoZSBjb21waWxlIGZ1bmN0aW9uIGlzIGVtcHR5LlxuICpcbiAqICogcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGZ1bmN0aW9uKHMpIHJlZ2lzdGVyZWQgdmlhIGBwcmVgIGFuZCBgcG9zdGAgcHJvcGVydGllcyAtIGFsbG93cyB5b3UgdG9cbiAqICAgY29udHJvbCB3aGVuIGEgbGlua2luZyBmdW5jdGlvbiBzaG91bGQgYmUgY2FsbGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS4gU2VlIGluZm8gYWJvdXRcbiAqICAgcHJlLWxpbmtpbmcgYW5kIHBvc3QtbGlua2luZyBmdW5jdGlvbnMgYmVsb3cuXG4gKlxuICpcbiAqICMjIyMgYGxpbmtgXG4gKiBUaGlzIHByb3BlcnR5IGlzIHVzZWQgb25seSBpZiB0aGUgYGNvbXBpbGVgIHByb3BlcnR5IGlzIG5vdCBkZWZpbmVkLlxuICpcbiAqIGBgYGpzXG4gKiAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIsIHRyYW5zY2x1ZGVGbikgeyAuLi4gfVxuICogYGBgXG4gKlxuICogVGhlIGxpbmsgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIHJlZ2lzdGVyaW5nIERPTSBsaXN0ZW5lcnMgYXMgd2VsbCBhcyB1cGRhdGluZyB0aGUgRE9NLiBJdCBpc1xuICogZXhlY3V0ZWQgYWZ0ZXIgdGhlIHRlbXBsYXRlIGhhcyBiZWVuIGNsb25lZC4gVGhpcyBpcyB3aGVyZSBtb3N0IG9mIHRoZSBkaXJlY3RpdmUgbG9naWMgd2lsbCBiZVxuICogcHV0LlxuICpcbiAqICAgKiBgc2NvcGVgIC0ge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgU2NvcGV9IC0gVGhlIHNjb3BlIHRvIGJlIHVzZWQgYnkgdGhlXG4gKiAgICAgZGlyZWN0aXZlIGZvciByZWdpc3RlcmluZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlc30uXG4gKlxuICogICAqIGBpRWxlbWVudGAgLSBpbnN0YW5jZSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgd2hlcmUgdGhlIGRpcmVjdGl2ZSBpcyB0byBiZSB1c2VkLiBJdCBpcyBzYWZlIHRvXG4gKiAgICAgbWFuaXB1bGF0ZSB0aGUgY2hpbGRyZW4gb2YgdGhlIGVsZW1lbnQgb25seSBpbiBgcG9zdExpbmtgIGZ1bmN0aW9uIHNpbmNlIHRoZSBjaGlsZHJlbiBoYXZlXG4gKiAgICAgYWxyZWFkeSBiZWVuIGxpbmtlZC5cbiAqXG4gKiAgICogYGlBdHRyc2AgLSBpbnN0YW5jZSBhdHRyaWJ1dGVzIC0gTm9ybWFsaXplZCBsaXN0IG9mIGF0dHJpYnV0ZXMgZGVjbGFyZWQgb24gdGhpcyBlbGVtZW50IHNoYXJlZFxuICogICAgIGJldHdlZW4gYWxsIGRpcmVjdGl2ZSBsaW5raW5nIGZ1bmN0aW9ucy5cbiAqXG4gKiAgICogYGNvbnRyb2xsZXJgIC0gdGhlIGRpcmVjdGl2ZSdzIHJlcXVpcmVkIGNvbnRyb2xsZXIgaW5zdGFuY2UocykgLSBJbnN0YW5jZXMgYXJlIHNoYXJlZFxuICogICAgIGFtb25nIGFsbCBkaXJlY3RpdmVzLCB3aGljaCBhbGxvd3MgdGhlIGRpcmVjdGl2ZXMgdG8gdXNlIHRoZSBjb250cm9sbGVycyBhcyBhIGNvbW11bmljYXRpb25cbiAqICAgICBjaGFubmVsLiBUaGUgZXhhY3QgdmFsdWUgZGVwZW5kcyBvbiB0aGUgZGlyZWN0aXZlJ3MgYHJlcXVpcmVgIHByb3BlcnR5OlxuICogICAgICAgKiBubyBjb250cm9sbGVyKHMpIHJlcXVpcmVkOiB0aGUgZGlyZWN0aXZlJ3Mgb3duIGNvbnRyb2xsZXIsIG9yIGB1bmRlZmluZWRgIGlmIGl0IGRvZXNuJ3QgaGF2ZSBvbmVcbiAqICAgICAgICogYHN0cmluZ2A6IHRoZSBjb250cm9sbGVyIGluc3RhbmNlXG4gKiAgICAgICAqIGBhcnJheWA6IGFycmF5IG9mIGNvbnRyb2xsZXIgaW5zdGFuY2VzXG4gKlxuICogICAgIElmIGEgcmVxdWlyZWQgY29udHJvbGxlciBjYW5ub3QgYmUgZm91bmQsIGFuZCBpdCBpcyBvcHRpb25hbCwgdGhlIGluc3RhbmNlIGlzIGBudWxsYCxcbiAqICAgICBvdGhlcndpc2UgdGhlIHtAbGluayBlcnJvcjokY29tcGlsZTpjdHJlcSBNaXNzaW5nIFJlcXVpcmVkIENvbnRyb2xsZXJ9IGVycm9yIGlzIHRocm93bi5cbiAqXG4gKiAgICAgTm90ZSB0aGF0IHlvdSBjYW4gYWxzbyByZXF1aXJlIHRoZSBkaXJlY3RpdmUncyBvd24gY29udHJvbGxlciAtIGl0IHdpbGwgYmUgbWFkZSBhdmFpbGFibGUgbGlrZVxuICogICAgIGFueSBvdGhlciBjb250cm9sbGVyLlxuICpcbiAqICAgKiBgdHJhbnNjbHVkZUZuYCAtIEEgdHJhbnNjbHVkZSBsaW5raW5nIGZ1bmN0aW9uIHByZS1ib3VuZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKiAgICAgVGhpcyBpcyB0aGUgc2FtZSBhcyB0aGUgYCR0cmFuc2NsdWRlYCBwYXJhbWV0ZXIgb2YgZGlyZWN0aXZlIGNvbnRyb2xsZXJzLFxuICogICAgIHNlZSB7QGxpbmsgbmcuJGNvbXBpbGUjLWNvbnRyb2xsZXItIHRoZSBjb250cm9sbGVyIHNlY3Rpb24gZm9yIGRldGFpbHN9LlxuICogICAgIGBmdW5jdGlvbihbc2NvcGVdLCBjbG9uZUxpbmtpbmdGbiwgZnV0dXJlUGFyZW50RWxlbWVudClgLlxuICpcbiAqICMjIyMgUHJlLWxpbmtpbmcgZnVuY3Rpb25cbiAqXG4gKiBFeGVjdXRlZCBiZWZvcmUgdGhlIGNoaWxkIGVsZW1lbnRzIGFyZSBsaW5rZWQuIE5vdCBzYWZlIHRvIGRvIERPTSB0cmFuc2Zvcm1hdGlvbiBzaW5jZSB0aGVcbiAqIGNvbXBpbGVyIGxpbmtpbmcgZnVuY3Rpb24gd2lsbCBmYWlsIHRvIGxvY2F0ZSB0aGUgY29ycmVjdCBlbGVtZW50cyBmb3IgbGlua2luZy5cbiAqXG4gKiAjIyMjIFBvc3QtbGlua2luZyBmdW5jdGlvblxuICpcbiAqIEV4ZWN1dGVkIGFmdGVyIHRoZSBjaGlsZCBlbGVtZW50cyBhcmUgbGlua2VkLlxuICpcbiAqIE5vdGUgdGhhdCBjaGlsZCBlbGVtZW50cyB0aGF0IGNvbnRhaW4gYHRlbXBsYXRlVXJsYCBkaXJlY3RpdmVzIHdpbGwgbm90IGhhdmUgYmVlbiBjb21waWxlZFxuICogYW5kIGxpbmtlZCBzaW5jZSB0aGV5IGFyZSB3YWl0aW5nIGZvciB0aGVpciB0ZW1wbGF0ZSB0byBsb2FkIGFzeW5jaHJvbm91c2x5IGFuZCB0aGVpciBvd25cbiAqIGNvbXBpbGF0aW9uIGFuZCBsaW5raW5nIGhhcyBiZWVuIHN1c3BlbmRlZCB1bnRpbCB0aGF0IG9jY3Vycy5cbiAqXG4gKiBJdCBpcyBzYWZlIHRvIGRvIERPTSB0cmFuc2Zvcm1hdGlvbiBpbiB0aGUgcG9zdC1saW5raW5nIGZ1bmN0aW9uIG9uIGVsZW1lbnRzIHRoYXQgYXJlIG5vdCB3YWl0aW5nXG4gKiBmb3IgdGhlaXIgYXN5bmMgdGVtcGxhdGVzIHRvIGJlIHJlc29sdmVkLlxuICpcbiAqXG4gKiAjIyMgVHJhbnNjbHVzaW9uXG4gKlxuICogVHJhbnNjbHVzaW9uIGlzIHRoZSBwcm9jZXNzIG9mIGV4dHJhY3RpbmcgYSBjb2xsZWN0aW9uIG9mIERPTSBlbGVtZW50cyBmcm9tIG9uZSBwYXJ0IG9mIHRoZSBET00gYW5kXG4gKiBjb3B5aW5nIHRoZW0gdG8gYW5vdGhlciBwYXJ0IG9mIHRoZSBET00sIHdoaWxlIG1haW50YWluaW5nIHRoZWlyIGNvbm5lY3Rpb24gdG8gdGhlIG9yaWdpbmFsIEFuZ3VsYXJKU1xuICogc2NvcGUgZnJvbSB3aGVyZSB0aGV5IHdlcmUgdGFrZW4uXG4gKlxuICogVHJhbnNjbHVzaW9uIGlzIHVzZWQgKG9mdGVuIHdpdGgge0BsaW5rIG5nVHJhbnNjbHVkZX0pIHRvIGluc2VydCB0aGVcbiAqIG9yaWdpbmFsIGNvbnRlbnRzIG9mIGEgZGlyZWN0aXZlJ3MgZWxlbWVudCBpbnRvIGEgc3BlY2lmaWVkIHBsYWNlIGluIHRoZSB0ZW1wbGF0ZSBvZiB0aGUgZGlyZWN0aXZlLlxuICogVGhlIGJlbmVmaXQgb2YgdHJhbnNjbHVzaW9uLCBvdmVyIHNpbXBseSBtb3ZpbmcgdGhlIERPTSBlbGVtZW50cyBtYW51YWxseSwgaXMgdGhhdCB0aGUgdHJhbnNjbHVkZWRcbiAqIGNvbnRlbnQgaGFzIGFjY2VzcyB0byB0aGUgcHJvcGVydGllcyBvbiB0aGUgc2NvcGUgZnJvbSB3aGljaCBpdCB3YXMgdGFrZW4sIGV2ZW4gaWYgdGhlIGRpcmVjdGl2ZVxuICogaGFzIGlzb2xhdGVkIHNjb3BlLlxuICogU2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlI2NyZWF0aW5nLWEtZGlyZWN0aXZlLXRoYXQtd3JhcHMtb3RoZXItZWxlbWVudHMgRGlyZWN0aXZlcyBHdWlkZX0uXG4gKlxuICogVGhpcyBtYWtlcyBpdCBwb3NzaWJsZSBmb3IgdGhlIHdpZGdldCB0byBoYXZlIHByaXZhdGUgc3RhdGUgZm9yIGl0cyB0ZW1wbGF0ZSwgd2hpbGUgdGhlIHRyYW5zY2x1ZGVkXG4gKiBjb250ZW50IGhhcyBhY2Nlc3MgdG8gaXRzIG9yaWdpbmF0aW5nIHNjb3BlLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogV2hlbiB0ZXN0aW5nIGFuIGVsZW1lbnQgdHJhbnNjbHVkZSBkaXJlY3RpdmUgeW91IG11c3Qgbm90IHBsYWNlIHRoZSBkaXJlY3RpdmUgYXQgdGhlIHJvb3Qgb2YgdGhlXG4gKiBET00gZnJhZ21lbnQgdGhhdCBpcyBiZWluZyBjb21waWxlZC4gU2VlIHtAbGluayBndWlkZS91bml0LXRlc3RpbmcjdGVzdGluZy10cmFuc2NsdXNpb24tZGlyZWN0aXZlc1xuICogVGVzdGluZyBUcmFuc2NsdXNpb24gRGlyZWN0aXZlc30uXG4gKiA8L2Rpdj5cbiAqXG4gKiBUaGVyZSBhcmUgdGhyZWUga2luZHMgb2YgdHJhbnNjbHVzaW9uIGRlcGVuZGluZyB1cG9uIHdoZXRoZXIgeW91IHdhbnQgdG8gdHJhbnNjbHVkZSBqdXN0IHRoZSBjb250ZW50cyBvZiB0aGVcbiAqIGRpcmVjdGl2ZSdzIGVsZW1lbnQsIHRoZSBlbnRpcmUgZWxlbWVudCBvciBtdWx0aXBsZSBwYXJ0cyBvZiB0aGUgZWxlbWVudCBjb250ZW50czpcbiAqXG4gKiAqIGB0cnVlYCAtIHRyYW5zY2x1ZGUgdGhlIGNvbnRlbnQgKGkuZS4gdGhlIGNoaWxkIG5vZGVzKSBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudC5cbiAqICogYCdlbGVtZW50J2AgLSB0cmFuc2NsdWRlIHRoZSB3aG9sZSBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCBpbmNsdWRpbmcgYW55IGRpcmVjdGl2ZXMgb24gdGhpc1xuICogICBlbGVtZW50IHRoYXQgZGVmaW5lZCBhdCBhIGxvd2VyIHByaW9yaXR5IHRoYW4gdGhpcyBkaXJlY3RpdmUuIFdoZW4gdXNlZCwgdGhlIGB0ZW1wbGF0ZWBcbiAqICAgcHJvcGVydHkgaXMgaWdub3JlZC5cbiAqICogKipgey4uLn1gIChhbiBvYmplY3QgaGFzaCk6KiogLSBtYXAgZWxlbWVudHMgb2YgdGhlIGNvbnRlbnQgb250byB0cmFuc2NsdXNpb24gXCJzbG90c1wiIGluIHRoZSB0ZW1wbGF0ZS5cbiAqXG4gKiAqKk11bHQtc2xvdCB0cmFuc2NsdXNpb24qKiBpcyBkZWNsYXJlZCBieSBwcm92aWRpbmcgYW4gb2JqZWN0IGZvciB0aGUgYHRyYW5zY2x1ZGVgIHByb3BlcnR5LlxuICpcbiAqIFRoaXMgb2JqZWN0IGlzIGEgbWFwIHdoZXJlIHRoZSBrZXlzIGFyZSB0aGUgbmFtZSBvZiB0aGUgc2xvdCB0byBmaWxsIGFuZCB0aGUgdmFsdWUgaXMgYW4gZWxlbWVudCBzZWxlY3RvclxuICogdXNlZCB0byBtYXRjaCB0aGUgSFRNTCB0byB0aGUgc2xvdC4gVGhlIGVsZW1lbnQgc2VsZWN0b3Igc2hvdWxkIGJlIGluIG5vcm1hbGl6ZWQgZm9ybSAoZS5nLiBgbXlFbGVtZW50YClcbiAqIGFuZCB3aWxsIG1hdGNoIHRoZSBzdGFuZGFyZCBlbGVtZW50IHZhcmlhbnRzIChlLmcuIGBteS1lbGVtZW50YCwgYG15OmVsZW1lbnRgLCBgZGF0YS1teS1lbGVtZW50YCwgZXRjKS5cbiAqXG4gKiBGb3IgZnVydGhlciBpbmZvcm1hdGlvbiBjaGVjayBvdXQgdGhlIGd1aWRlIG9uIHtAbGluayBndWlkZS9kaXJlY3RpdmUjbWF0Y2hpbmctZGlyZWN0aXZlcyBNYXRjaGluZyBEaXJlY3RpdmVzfVxuICpcbiAqIElmIHRoZSBlbGVtZW50IHNlbGVjdG9yIGlzIHByZWZpeGVkIHdpdGggYSBgP2AgdGhlbiB0aGF0IHNsb3QgaXMgb3B0aW9uYWwuXG4gKlxuICogRm9yIGV4YW1wbGUsIHRoZSB0cmFuc2NsdWRlIG9iamVjdCBgeyBzbG90QTogJz9teUN1c3RvbUVsZW1lbnQnIH1gIG1hcHMgYDxteS1jdXN0b20tZWxlbWVudD5gIGVsZW1lbnRzIHRvXG4gKiB0aGUgYHNsb3RBYCBzbG90LCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgdmlhIHRoZSBgJHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIG9yIHZpYSB0aGUge0BsaW5rIG5nVHJhbnNjbHVkZX0gZGlyZWN0aXZlLlxuICpcbiAqIFNsb3RzIHRoYXQgYXJlIG5vdCBtYXJrZWQgYXMgb3B0aW9uYWwgKGA/YCkgd2lsbCB0cmlnZ2VyIGEgY29tcGlsZSB0aW1lIGVycm9yIGlmIHRoZXJlIGFyZSBubyBtYXRjaGluZyBlbGVtZW50c1xuICogaW4gdGhlIHRyYW5zY2x1ZGUgY29udGVudC4gSWYgeW91IHdpc2ggdG8ga25vdyBpZiBhbiBvcHRpb25hbCBzbG90IHdhcyBmaWxsZWQgd2l0aCBjb250ZW50LCB0aGVuIHlvdSBjYW4gY2FsbFxuICogYCR0cmFuc2NsdWRlLmlzU2xvdEZpbGxlZChzbG90TmFtZSlgIG9uIHRoZSB0cmFuc2NsdWRlIGZ1bmN0aW9uIHBhc3NlZCB0byB0aGUgZGlyZWN0aXZlJ3MgbGluayBmdW5jdGlvbiBhbmRcbiAqIGluamVjdGFibGUgaW50byB0aGUgZGlyZWN0aXZlJ3MgY29udHJvbGxlci5cbiAqXG4gKlxuICogIyMjIyBUcmFuc2NsdXNpb24gRnVuY3Rpb25zXG4gKlxuICogV2hlbiBhIGRpcmVjdGl2ZSByZXF1ZXN0cyB0cmFuc2NsdXNpb24sIHRoZSBjb21waWxlciBleHRyYWN0cyBpdHMgY29udGVudHMgYW5kIHByb3ZpZGVzIGEgKip0cmFuc2NsdXNpb25cbiAqIGZ1bmN0aW9uKiogdG8gdGhlIGRpcmVjdGl2ZSdzIGBsaW5rYCBmdW5jdGlvbiBhbmQgYGNvbnRyb2xsZXJgLiBUaGlzIHRyYW5zY2x1c2lvbiBmdW5jdGlvbiBpcyBhIHNwZWNpYWxcbiAqICoqbGlua2luZyBmdW5jdGlvbioqIHRoYXQgd2lsbCByZXR1cm4gdGhlIGNvbXBpbGVkIGNvbnRlbnRzIGxpbmtlZCB0byBhIG5ldyB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqIElmIHlvdSBhcmUganVzdCB1c2luZyB7QGxpbmsgbmdUcmFuc2NsdWRlfSB0aGVuIHlvdSBkb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoaXMgZnVuY3Rpb24sIHNpbmNlXG4gKiBuZ1RyYW5zY2x1ZGUgd2lsbCBkZWFsIHdpdGggaXQgZm9yIHVzLlxuICogPC9kaXY+XG4gKlxuICogSWYgeW91IHdhbnQgdG8gbWFudWFsbHkgY29udHJvbCB0aGUgaW5zZXJ0aW9uIGFuZCByZW1vdmFsIG9mIHRoZSB0cmFuc2NsdWRlZCBjb250ZW50IGluIHlvdXIgZGlyZWN0aXZlXG4gKiB0aGVuIHlvdSBtdXN0IHVzZSB0aGlzIHRyYW5zY2x1ZGUgZnVuY3Rpb24uIFdoZW4geW91IGNhbGwgYSB0cmFuc2NsdWRlIGZ1bmN0aW9uIGl0IHJldHVybnMgYSBhIGpxTGl0ZS9KUXVlcnlcbiAqIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBjb21waWxlZCBET00sIHdoaWNoIGlzIGxpbmtlZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKlxuICogV2hlbiB5b3UgY2FsbCBhIHRyYW5zY2x1c2lvbiBmdW5jdGlvbiB5b3UgY2FuIHBhc3MgaW4gYSAqKmNsb25lIGF0dGFjaCBmdW5jdGlvbioqLiBUaGlzIGZ1bmN0aW9uIGFjY2VwdHNcbiAqIHR3byBwYXJhbWV0ZXJzLCBgZnVuY3Rpb24oY2xvbmUsIHNjb3BlKSB7IC4uLiB9YCwgd2hlcmUgdGhlIGBjbG9uZWAgaXMgYSBmcmVzaCBjb21waWxlZCBjb3B5IG9mIHlvdXIgdHJhbnNjbHVkZWRcbiAqIGNvbnRlbnQgYW5kIHRoZSBgc2NvcGVgIGlzIHRoZSBuZXdseSBjcmVhdGVkIHRyYW5zY2x1c2lvbiBzY29wZSwgd2hpY2ggdGhlIGNsb25lIHdpbGwgYmUgbGlua2VkIHRvLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAqKkJlc3QgUHJhY3RpY2UqKjogQWx3YXlzIHByb3ZpZGUgYSBgY2xvbmVGbmAgKGNsb25lIGF0dGFjaCBmdW5jdGlvbikgd2hlbiB5b3UgY2FsbCBhIHRyYW5zY2x1ZGUgZnVuY3Rpb25cbiAqIHNpbmNlIHlvdSB0aGVuIGdldCBhIGZyZXNoIGNsb25lIG9mIHRoZSBvcmlnaW5hbCBET00gYW5kIGFsc28gaGF2ZSBhY2Nlc3MgdG8gdGhlIG5ldyB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKiA8L2Rpdj5cbiAqXG4gKiBJdCBpcyBub3JtYWwgcHJhY3RpY2UgdG8gYXR0YWNoIHlvdXIgdHJhbnNjbHVkZWQgY29udGVudCAoYGNsb25lYCkgdG8gdGhlIERPTSBpbnNpZGUgeW91ciAqKmNsb25lXG4gKiBhdHRhY2ggZnVuY3Rpb24qKjpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHRyYW5zY2x1ZGVkQ29udGVudCwgdHJhbnNjbHVzaW9uU2NvcGU7XG4gKlxuICogJHRyYW5zY2x1ZGUoZnVuY3Rpb24oY2xvbmUsIHNjb3BlKSB7XG4gKiAgIGVsZW1lbnQuYXBwZW5kKGNsb25lKTtcbiAqICAgdHJhbnNjbHVkZWRDb250ZW50ID0gY2xvbmU7XG4gKiAgIHRyYW5zY2x1c2lvblNjb3BlID0gc2NvcGU7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIExhdGVyLCBpZiB5b3Ugd2FudCB0byByZW1vdmUgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnQgZnJvbSB5b3VyIERPTSB0aGVuIHlvdSBzaG91bGQgYWxzbyBkZXN0cm95IHRoZVxuICogYXNzb2NpYXRlZCB0cmFuc2NsdXNpb24gc2NvcGU6XG4gKlxuICogYGBganNcbiAqIHRyYW5zY2x1ZGVkQ29udGVudC5yZW1vdmUoKTtcbiAqIHRyYW5zY2x1c2lvblNjb3BlLiRkZXN0cm95KCk7XG4gKiBgYGBcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipCZXN0IFByYWN0aWNlKio6IGlmIHlvdSBpbnRlbmQgdG8gYWRkIGFuZCByZW1vdmUgdHJhbnNjbHVkZWQgY29udGVudCBtYW51YWxseSBpbiB5b3VyIGRpcmVjdGl2ZVxuICogKGJ5IGNhbGxpbmcgdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBET00gYW5kIGNhbGxpbmcgYGVsZW1lbnQucmVtb3ZlKClgIHRvIHJlbW92ZSBpdCksXG4gKiB0aGVuIHlvdSBhcmUgYWxzbyByZXNwb25zaWJsZSBmb3IgY2FsbGluZyBgJGRlc3Ryb3lgIG9uIHRoZSB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKiA8L2Rpdj5cbiAqXG4gKiBUaGUgYnVpbHQtaW4gRE9NIG1hbmlwdWxhdGlvbiBkaXJlY3RpdmVzLCBzdWNoIGFzIHtAbGluayBuZ0lmfSwge0BsaW5rIG5nU3dpdGNofSBhbmQge0BsaW5rIG5nUmVwZWF0fVxuICogYXV0b21hdGljYWxseSBkZXN0cm95IHRoZWlyIHRyYW5zY2x1ZGVkIGNsb25lcyBhcyBuZWNlc3Nhcnkgc28geW91IGRvIG5vdCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoaXMgaWZcbiAqIHlvdSBhcmUgc2ltcGx5IHVzaW5nIHtAbGluayBuZ1RyYW5zY2x1ZGV9IHRvIGluamVjdCB0aGUgdHJhbnNjbHVzaW9uIGludG8geW91ciBkaXJlY3RpdmUuXG4gKlxuICpcbiAqICMjIyMgVHJhbnNjbHVzaW9uIFNjb3Blc1xuICpcbiAqIFdoZW4geW91IGNhbGwgYSB0cmFuc2NsdWRlIGZ1bmN0aW9uIGl0IHJldHVybnMgYSBET00gZnJhZ21lbnQgdGhhdCBpcyBwcmUtYm91bmQgdG8gYSAqKnRyYW5zY2x1c2lvblxuICogc2NvcGUqKi4gVGhpcyBzY29wZSBpcyBzcGVjaWFsLCBpbiB0aGF0IGl0IGlzIGEgY2hpbGQgb2YgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIChhbmQgc28gZ2V0cyBkZXN0cm95ZWRcbiAqIHdoZW4gdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIGdldHMgZGVzdHJveWVkKSBidXQgaXQgaW5oZXJpdHMgdGhlIHByb3BlcnRpZXMgb2YgdGhlIHNjb3BlIGZyb20gd2hpY2ggaXRcbiAqIHdhcyB0YWtlbi5cbiAqXG4gKiBGb3IgZXhhbXBsZSBjb25zaWRlciBhIGRpcmVjdGl2ZSB0aGF0IHVzZXMgdHJhbnNjbHVzaW9uIGFuZCBpc29sYXRlZCBzY29wZS4gVGhlIERPTSBoaWVyYXJjaHkgbWlnaHQgbG9va1xuICogbGlrZSB0aGlzOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgbmctYXBwPlxuICogICA8ZGl2IGlzb2xhdGU+XG4gKiAgICAgPGRpdiB0cmFuc2NsdXNpb24+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZGl2PlxuICogPC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBUaGUgYCRwYXJlbnRgIHNjb3BlIGhpZXJhcmNoeSB3aWxsIGxvb2sgbGlrZSB0aGlzOlxuICpcbiAgIGBgYFxuICAgLSAkcm9vdFNjb3BlXG4gICAgIC0gaXNvbGF0ZVxuICAgICAgIC0gdHJhbnNjbHVzaW9uXG4gICBgYGBcbiAqXG4gKiBidXQgdGhlIHNjb3BlcyB3aWxsIGluaGVyaXQgcHJvdG90eXBpY2FsbHkgZnJvbSBkaWZmZXJlbnQgc2NvcGVzIHRvIHRoZWlyIGAkcGFyZW50YC5cbiAqXG4gICBgYGBcbiAgIC0gJHJvb3RTY29wZVxuICAgICAtIHRyYW5zY2x1c2lvblxuICAgLSBpc29sYXRlXG4gICBgYGBcbiAqXG4gKlxuICogIyMjIEF0dHJpYnV0ZXNcbiAqXG4gKiBUaGUge0BsaW5rIG5nLiRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIEF0dHJpYnV0ZXN9IG9iamVjdCAtIHBhc3NlZCBhcyBhIHBhcmFtZXRlciBpbiB0aGVcbiAqIGBsaW5rKClgIG9yIGBjb21waWxlKClgIGZ1bmN0aW9ucy4gSXQgaGFzIGEgdmFyaWV0eSBvZiB1c2VzLlxuICpcbiAqICogKkFjY2Vzc2luZyBub3JtYWxpemVkIGF0dHJpYnV0ZSBuYW1lczoqIERpcmVjdGl2ZXMgbGlrZSAnbmdCaW5kJyBjYW4gYmUgZXhwcmVzc2VkIGluIG1hbnkgd2F5czpcbiAqICAgJ25nOmJpbmQnLCBgZGF0YS1uZy1iaW5kYCwgb3IgJ3gtbmctYmluZCcuIFRoZSBhdHRyaWJ1dGVzIG9iamVjdCBhbGxvd3MgZm9yIG5vcm1hbGl6ZWQgYWNjZXNzXG4gKiAgIHRvIHRoZSBhdHRyaWJ1dGVzLlxuICpcbiAqICogKkRpcmVjdGl2ZSBpbnRlci1jb21tdW5pY2F0aW9uOiogQWxsIGRpcmVjdGl2ZXMgc2hhcmUgdGhlIHNhbWUgaW5zdGFuY2Ugb2YgdGhlIGF0dHJpYnV0ZXNcbiAqICAgb2JqZWN0IHdoaWNoIGFsbG93cyB0aGUgZGlyZWN0aXZlcyB0byB1c2UgdGhlIGF0dHJpYnV0ZXMgb2JqZWN0IGFzIGludGVyIGRpcmVjdGl2ZVxuICogICBjb21tdW5pY2F0aW9uLlxuICpcbiAqICogKlN1cHBvcnRzIGludGVycG9sYXRpb246KiBJbnRlcnBvbGF0aW9uIGF0dHJpYnV0ZXMgYXJlIGFzc2lnbmVkIHRvIHRoZSBhdHRyaWJ1dGUgb2JqZWN0XG4gKiAgIGFsbG93aW5nIG90aGVyIGRpcmVjdGl2ZXMgdG8gcmVhZCB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlLlxuICpcbiAqICogKk9ic2VydmluZyBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlczoqIFVzZSBgJG9ic2VydmVgIHRvIG9ic2VydmUgdGhlIHZhbHVlIGNoYW5nZXMgb2YgYXR0cmlidXRlc1xuICogICB0aGF0IGNvbnRhaW4gaW50ZXJwb2xhdGlvbiAoZS5nLiBgc3JjPVwie3tiYXJ9fVwiYCkuIE5vdCBvbmx5IGlzIHRoaXMgdmVyeSBlZmZpY2llbnQgYnV0IGl0J3MgYWxzb1xuICogICB0aGUgb25seSB3YXkgdG8gZWFzaWx5IGdldCB0aGUgYWN0dWFsIHZhbHVlIGJlY2F1c2UgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlIHRoZSBpbnRlcnBvbGF0aW9uXG4gKiAgIGhhc24ndCBiZWVuIGV2YWx1YXRlZCB5ZXQgYW5kIHNvIHRoZSB2YWx1ZSBpcyBhdCB0aGlzIHRpbWUgc2V0IHRvIGB1bmRlZmluZWRgLlxuICpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBsaW5raW5nRm4oc2NvcGUsIGVsbSwgYXR0cnMsIGN0cmwpIHtcbiAqICAgLy8gZ2V0IHRoZSBhdHRyaWJ1dGUgdmFsdWVcbiAqICAgY29uc29sZS5sb2coYXR0cnMubmdNb2RlbCk7XG4gKlxuICogICAvLyBjaGFuZ2UgdGhlIGF0dHJpYnV0ZVxuICogICBhdHRycy4kc2V0KCduZ01vZGVsJywgJ25ldyB2YWx1ZScpO1xuICpcbiAqICAgLy8gb2JzZXJ2ZSBjaGFuZ2VzIHRvIGludGVycG9sYXRlZCBhdHRyaWJ1dGVcbiAqICAgYXR0cnMuJG9ic2VydmUoJ25nTW9kZWwnLCBmdW5jdGlvbih2YWx1ZSkge1xuICogICAgIGNvbnNvbGUubG9nKCduZ01vZGVsIGhhcyBjaGFuZ2VkIHZhbHVlIHRvICcgKyB2YWx1ZSk7XG4gKiAgIH0pO1xuICogfVxuICogYGBgXG4gKlxuICogIyMgRXhhbXBsZVxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGUqKjogVHlwaWNhbGx5IGRpcmVjdGl2ZXMgYXJlIHJlZ2lzdGVyZWQgd2l0aCBgbW9kdWxlLmRpcmVjdGl2ZWAuIFRoZSBleGFtcGxlIGJlbG93IGlzXG4gKiB0byBpbGx1c3RyYXRlIGhvdyBgJGNvbXBpbGVgIHdvcmtzLlxuICogPC9kaXY+XG4gKlxuIDxleGFtcGxlIG1vZHVsZT1cImNvbXBpbGVFeGFtcGxlXCIgbmFtZT1cImNvbXBpbGVcIj5cbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgPHNjcmlwdD5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdjb21waWxlRXhhbXBsZScsIFtdLCBmdW5jdGlvbigkY29tcGlsZVByb3ZpZGVyKSB7XG4gICAgICAgIC8vIGNvbmZpZ3VyZSBuZXcgJ2NvbXBpbGUnIGRpcmVjdGl2ZSBieSBwYXNzaW5nIGEgZGlyZWN0aXZlXG4gICAgICAgIC8vIGZhY3RvcnkgZnVuY3Rpb24uIFRoZSBmYWN0b3J5IGZ1bmN0aW9uIGluamVjdHMgdGhlICckY29tcGlsZSdcbiAgICAgICAgJGNvbXBpbGVQcm92aWRlci5kaXJlY3RpdmUoJ2NvbXBpbGUnLCBmdW5jdGlvbigkY29tcGlsZSkge1xuICAgICAgICAgIC8vIGRpcmVjdGl2ZSBmYWN0b3J5IGNyZWF0ZXMgYSBsaW5rIGZ1bmN0aW9uXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKFxuICAgICAgICAgICAgICBmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgICAgICAgICAvLyB3YXRjaCB0aGUgJ2NvbXBpbGUnIGV4cHJlc3Npb24gZm9yIGNoYW5nZXNcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGV2YWwoYXR0cnMuY29tcGlsZSk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgJ2NvbXBpbGUnIGV4cHJlc3Npb24gY2hhbmdlc1xuICAgICAgICAgICAgICAgIC8vIGFzc2lnbiBpdCBpbnRvIHRoZSBjdXJyZW50IERPTVxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaHRtbCh2YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBjb21waWxlIHRoZSBuZXcgRE9NIGFuZCBsaW5rIGl0IHRvIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gc2NvcGUuXG4gICAgICAgICAgICAgICAgLy8gTk9URTogd2Ugb25seSBjb21waWxlIC5jaGlsZE5vZGVzIHNvIHRoYXRcbiAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCBnZXQgaW50byBpbmZpbml0ZSBsb29wIGNvbXBpbGluZyBvdXJzZWx2ZXNcbiAgICAgICAgICAgICAgICAkY29tcGlsZShlbGVtZW50LmNvbnRlbnRzKCkpKHNjb3BlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignR3JlZXRlckNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAkc2NvcGUubmFtZSA9ICdBbmd1bGFySlMnO1xuICAgICAgICAkc2NvcGUuaHRtbCA9ICdIZWxsbyB7e25hbWV9fSc7XG4gICAgICB9XSk7XG4gICAgPC9zY3JpcHQ+XG4gICAgPGRpdiBuZy1jb250cm9sbGVyPVwiR3JlZXRlckNvbnRyb2xsZXJcIj5cbiAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm5hbWVcIj4gPGJyLz5cbiAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cImh0bWxcIj48L3RleHRhcmVhPiA8YnIvPlxuICAgICAgPGRpdiBjb21waWxlPVwiaHRtbFwiPjwvZGl2PlxuICAgIDwvZGl2PlxuICAgPC9maWxlPlxuICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICBpdCgnc2hvdWxkIGF1dG8gY29tcGlsZScsIGZ1bmN0aW9uKCkge1xuICAgICAgIHZhciB0ZXh0YXJlYSA9ICQoJ3RleHRhcmVhJyk7XG4gICAgICAgdmFyIG91dHB1dCA9ICQoJ2Rpdltjb21waWxlXScpO1xuICAgICAgIC8vIFRoZSBpbml0aWFsIHN0YXRlIHJlYWRzICdIZWxsbyBBbmd1bGFySlMnLlxuICAgICAgIGV4cGVjdChvdXRwdXQuZ2V0VGV4dCgpKS50b0JlKCdIZWxsbyBBbmd1bGFySlMnKTtcbiAgICAgICB0ZXh0YXJlYS5jbGVhcigpO1xuICAgICAgIHRleHRhcmVhLnNlbmRLZXlzKCd7e25hbWV9fSEnKTtcbiAgICAgICBleHBlY3Qob3V0cHV0LmdldFRleHQoKSkudG9CZSgnQW5ndWxhckpTIScpO1xuICAgICB9KTtcbiAgIDwvZmlsZT5cbiA8L2V4YW1wbGU+XG5cbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8RE9NRWxlbWVudH0gZWxlbWVudCBFbGVtZW50IG9yIEhUTUwgc3RyaW5nIHRvIGNvbXBpbGUgaW50byBhIHRlbXBsYXRlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihhbmd1bGFyLlNjb3BlLCBjbG9uZUF0dGFjaEZuPSl9IHRyYW5zY2x1ZGUgZnVuY3Rpb24gYXZhaWxhYmxlIHRvIGRpcmVjdGl2ZXMgLSBERVBSRUNBVEVELlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqICoqTm90ZToqKiBQYXNzaW5nIGEgYHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIHRvIHRoZSAkY29tcGlsZSBmdW5jdGlvbiBpcyBkZXByZWNhdGVkLCBhcyBpdFxuICogICBlLmcuIHdpbGwgbm90IHVzZSB0aGUgcmlnaHQgb3V0ZXIgc2NvcGUuIFBsZWFzZSBwYXNzIHRoZSB0cmFuc2NsdWRlIGZ1bmN0aW9uIGFzIGFcbiAqICAgYHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuYCB0byB0aGUgbGluayBmdW5jdGlvbiBpbnN0ZWFkLlxuICogPC9kaXY+XG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFByaW9yaXR5IG9ubHkgYXBwbHkgZGlyZWN0aXZlcyBsb3dlciB0aGFuIGdpdmVuIHByaW9yaXR5IChPbmx5IGVmZmVjdHMgdGhlXG4gKiAgICAgICAgICAgICAgICAgcm9vdCBlbGVtZW50KHMpLCBub3QgdGhlaXIgY2hpbGRyZW4pXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oc2NvcGUsIGNsb25lQXR0YWNoRm49LCBvcHRpb25zPSl9IGEgbGluayBmdW5jdGlvbiB3aGljaCBpcyB1c2VkIHRvIGJpbmQgdGVtcGxhdGVcbiAqIChhIERPTSBlbGVtZW50L3RyZWUpIHRvIGEgc2NvcGUuIFdoZXJlOlxuICpcbiAqICAqIGBzY29wZWAgLSBBIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIFNjb3BlfSB0byBiaW5kIHRvLlxuICogICogYGNsb25lQXR0YWNoRm5gIC0gSWYgYGNsb25lQXR0YWNoRm5gIGlzIHByb3ZpZGVkLCB0aGVuIHRoZSBsaW5rIGZ1bmN0aW9uIHdpbGwgY2xvbmUgdGhlXG4gKiAgYHRlbXBsYXRlYCBhbmQgY2FsbCB0aGUgYGNsb25lQXR0YWNoRm5gIGZ1bmN0aW9uIGFsbG93aW5nIHRoZSBjYWxsZXIgdG8gYXR0YWNoIHRoZVxuICogIGNsb25lZCBlbGVtZW50cyB0byB0aGUgRE9NIGRvY3VtZW50IGF0IHRoZSBhcHByb3ByaWF0ZSBwbGFjZS4gVGhlIGBjbG9uZUF0dGFjaEZuYCBpc1xuICogIGNhbGxlZCBhczogPGJyLz4gYGNsb25lQXR0YWNoRm4oY2xvbmVkRWxlbWVudCwgc2NvcGUpYCB3aGVyZTpcbiAqXG4gKiAgICAgICogYGNsb25lZEVsZW1lbnRgIC0gaXMgYSBjbG9uZSBvZiB0aGUgb3JpZ2luYWwgYGVsZW1lbnRgIHBhc3NlZCBpbnRvIHRoZSBjb21waWxlci5cbiAqICAgICAgKiBgc2NvcGVgIC0gaXMgdGhlIGN1cnJlbnQgc2NvcGUgd2l0aCB3aGljaCB0aGUgbGlua2luZyBmdW5jdGlvbiBpcyB3b3JraW5nIHdpdGguXG4gKlxuICogICogYG9wdGlvbnNgIC0gQW4gb3B0aW9uYWwgb2JqZWN0IGhhc2ggd2l0aCBsaW5raW5nIG9wdGlvbnMuIElmIGBvcHRpb25zYCBpcyBwcm92aWRlZCwgdGhlbiB0aGUgZm9sbG93aW5nXG4gKiAga2V5cyBtYXkgYmUgdXNlZCB0byBjb250cm9sIGxpbmtpbmcgYmVoYXZpb3I6XG4gKlxuICogICAgICAqIGBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbmAgLSB0aGUgdHJhbnNjbHVkZSBmdW5jdGlvbiBtYWRlIGF2YWlsYWJsZSB0b1xuICogICAgICAgIGRpcmVjdGl2ZXM7IGlmIGdpdmVuLCBpdCB3aWxsIGJlIHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBsaW5rIGZ1bmN0aW9ucyBvZlxuICogICAgICAgIGRpcmVjdGl2ZXMgZm91bmQgaW4gYGVsZW1lbnRgIGR1cmluZyBjb21waWxhdGlvbi5cbiAqICAgICAgKiBgdHJhbnNjbHVkZUNvbnRyb2xsZXJzYCAtIGFuIG9iamVjdCBoYXNoIHdpdGgga2V5cyB0aGF0IG1hcCBjb250cm9sbGVyIG5hbWVzXG4gKiAgICAgICAgdG8gYSBoYXNoIHdpdGggdGhlIGtleSBgaW5zdGFuY2VgLCB3aGljaCBtYXBzIHRvIHRoZSBjb250cm9sbGVyIGluc3RhbmNlO1xuICogICAgICAgIGlmIGdpdmVuLCBpdCB3aWxsIG1ha2UgdGhlIGNvbnRyb2xsZXJzIGF2YWlsYWJsZSB0byBkaXJlY3RpdmVzIG9uIHRoZSBjb21waWxlTm9kZTpcbiAqICAgICAgICBgYGBcbiAqICAgICAgICB7XG4gKiAgICAgICAgICBwYXJlbnQ6IHtcbiAqICAgICAgICAgICAgaW5zdGFuY2U6IHBhcmVudENvbnRyb2xsZXJJbnN0YW5jZVxuICogICAgICAgICAgfVxuICogICAgICAgIH1cbiAqICAgICAgICBgYGBcbiAqICAgICAgKiBgZnV0dXJlUGFyZW50RWxlbWVudGAgLSBkZWZpbmVzIHRoZSBwYXJlbnQgdG8gd2hpY2ggdGhlIGBjbG9uZUF0dGFjaEZuYCB3aWxsIGFkZFxuICogICAgICAgIHRoZSBjbG9uZWQgZWxlbWVudHM7IG9ubHkgbmVlZGVkIGZvciB0cmFuc2NsdWRlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIGNvbnRhaW4gbm9uIGh0bWxcbiAqICAgICAgICBlbGVtZW50cyAoZS5nLiBTVkcgZWxlbWVudHMpLiBTZWUgYWxzbyB0aGUgZGlyZWN0aXZlLmNvbnRyb2xsZXIgcHJvcGVydHkuXG4gKlxuICogQ2FsbGluZyB0aGUgbGlua2luZyBmdW5jdGlvbiByZXR1cm5zIHRoZSBlbGVtZW50IG9mIHRoZSB0ZW1wbGF0ZS4gSXQgaXMgZWl0aGVyIHRoZSBvcmlnaW5hbFxuICogZWxlbWVudCBwYXNzZWQgaW4sIG9yIHRoZSBjbG9uZSBvZiB0aGUgZWxlbWVudCBpZiB0aGUgYGNsb25lQXR0YWNoRm5gIGlzIHByb3ZpZGVkLlxuICpcbiAqIEFmdGVyIGxpbmtpbmcgdGhlIHZpZXcgaXMgbm90IHVwZGF0ZWQgdW50aWwgYWZ0ZXIgYSBjYWxsIHRvICRkaWdlc3Qgd2hpY2ggdHlwaWNhbGx5IGlzIGRvbmUgYnlcbiAqIEFuZ3VsYXJKUyBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIElmIHlvdSBuZWVkIGFjY2VzcyB0byB0aGUgYm91bmQgdmlldywgdGhlcmUgYXJlIHR3byB3YXlzIHRvIGRvIGl0OlxuICpcbiAqIC0gSWYgeW91IGFyZSBub3QgYXNraW5nIHRoZSBsaW5raW5nIGZ1bmN0aW9uIHRvIGNsb25lIHRoZSB0ZW1wbGF0ZSwgY3JlYXRlIHRoZSBET00gZWxlbWVudChzKVxuICogICBiZWZvcmUgeW91IHNlbmQgdGhlbSB0byB0aGUgY29tcGlsZXIgYW5kIGtlZXAgdGhpcyByZWZlcmVuY2UgYXJvdW5kLlxuICogICBgYGBqc1xuICogICAgIHZhciBlbGVtZW50ID0gJGNvbXBpbGUoJzxwPnt7dG90YWx9fTwvcD4nKShzY29wZSk7XG4gKiAgIGBgYFxuICpcbiAqIC0gaWYgb24gdGhlIG90aGVyIGhhbmQsIHlvdSBuZWVkIHRoZSBlbGVtZW50IHRvIGJlIGNsb25lZCwgdGhlIHZpZXcgcmVmZXJlbmNlIGZyb20gdGhlIG9yaWdpbmFsXG4gKiAgIGV4YW1wbGUgd291bGQgbm90IHBvaW50IHRvIHRoZSBjbG9uZSwgYnV0IHJhdGhlciB0byB0aGUgb3JpZ2luYWwgdGVtcGxhdGUgdGhhdCB3YXMgY2xvbmVkLiBJblxuICogICB0aGlzIGNhc2UsIHlvdSBjYW4gYWNjZXNzIHRoZSBjbG9uZSB2aWEgdGhlIGNsb25lQXR0YWNoRm46XG4gKiAgIGBgYGpzXG4gKiAgICAgdmFyIHRlbXBsYXRlRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudCgnPHA+e3t0b3RhbH19PC9wPicpLFxuICogICAgICAgICBzY29wZSA9IC4uLi47XG4gKlxuICogICAgIHZhciBjbG9uZWRFbGVtZW50ID0gJGNvbXBpbGUodGVtcGxhdGVFbGVtZW50KShzY29wZSwgZnVuY3Rpb24oY2xvbmVkRWxlbWVudCwgc2NvcGUpIHtcbiAqICAgICAgIC8vYXR0YWNoIHRoZSBjbG9uZSB0byBET00gZG9jdW1lbnQgYXQgdGhlIHJpZ2h0IHBsYWNlXG4gKiAgICAgfSk7XG4gKlxuICogICAgIC8vbm93IHdlIGhhdmUgcmVmZXJlbmNlIHRvIHRoZSBjbG9uZWQgRE9NIHZpYSBgY2xvbmVkRWxlbWVudGBcbiAqICAgYGBgXG4gKlxuICpcbiAqIEZvciBpbmZvcm1hdGlvbiBvbiBob3cgdGhlIGNvbXBpbGVyIHdvcmtzLCBzZWUgdGhlXG4gKiB7QGxpbmsgZ3VpZGUvY29tcGlsZXIgQW5ndWxhckpTIEhUTUwgQ29tcGlsZXJ9IHNlY3Rpb24gb2YgdGhlIERldmVsb3BlciBHdWlkZS5cbiAqXG4gKiBAa25vd25Jc3N1ZVxuICpcbiAqICMjIyBEb3VibGUgQ29tcGlsYXRpb25cbiAqXG4gICBEb3VibGUgY29tcGlsYXRpb24gb2NjdXJzIHdoZW4gYW4gYWxyZWFkeSBjb21waWxlZCBwYXJ0IG9mIHRoZSBET00gZ2V0c1xuICAgY29tcGlsZWQgYWdhaW4uIFRoaXMgaXMgYW4gdW5kZXNpcmVkIGVmZmVjdCBhbmQgY2FuIGxlYWQgdG8gbWlzYmVoYXZpbmcgZGlyZWN0aXZlcywgcGVyZm9ybWFuY2UgaXNzdWVzLFxuICAgYW5kIG1lbW9yeSBsZWFrcy4gUmVmZXIgdG8gdGhlIENvbXBpbGVyIEd1aWRlIHtAbGluayBndWlkZS9jb21waWxlciNkb3VibGUtY29tcGlsYXRpb24tYW5kLWhvdy10by1hdm9pZC1pdFxuICAgc2VjdGlvbiBvbiBkb3VibGUgY29tcGlsYXRpb259IGZvciBhbiBpbi1kZXB0aCBleHBsYW5hdGlvbiBhbmQgd2F5cyB0byBhdm9pZCBpdC5cblxuICogQGtub3duSXNzdWVcblxuICAgIyMjIElzc3VlcyB3aXRoIGByZXBsYWNlOiB0cnVlYFxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqICAgKipOb3RlKio6IHtAbGluayAkY29tcGlsZSMtcmVwbGFjZS0gYHJlcGxhY2U6IHRydWVgfSBpcyBkZXByZWNhdGVkIGFuZCBub3QgcmVjb21tZW5kZWQgdG8gdXNlLFxuICogICBtYWlubHkgZHVlIHRvIHRoZSBpc3N1ZXMgbGlzdGVkIGhlcmUuIEl0IGhhcyBiZWVuIGNvbXBsZXRlbHkgcmVtb3ZlZCBpbiB0aGUgbmV3IEFuZ3VsYXIuXG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyMjIEF0dHJpYnV0ZSB2YWx1ZXMgYXJlIG5vdCBtZXJnZWRcbiAqXG4gKiBXaGVuIGEgYHJlcGxhY2VgIGRpcmVjdGl2ZSBlbmNvdW50ZXJzIHRoZSBzYW1lIGF0dHJpYnV0ZSBvbiB0aGUgb3JpZ2luYWwgYW5kIHRoZSByZXBsYWNlIG5vZGUsXG4gKiBpdCB3aWxsIHNpbXBseSBkZWR1cGxpY2F0ZSB0aGUgYXR0cmlidXRlIGFuZCBqb2luIHRoZSB2YWx1ZXMgd2l0aCBhIHNwYWNlIG9yIHdpdGggYSBgO2AgaW4gY2FzZSBvZlxuICogdGhlIGBzdHlsZWAgYXR0cmlidXRlLlxuICogYGBgaHRtbFxuICogT3JpZ2luYWwgTm9kZTogPHNwYW4gY2xhc3M9XCJvcmlnaW5hbFwiIHN0eWxlPVwiY29sb3I6IHJlZDtcIj48L3NwYW4+XG4gKiBSZXBsYWNlIFRlbXBsYXRlOiA8c3BhbiBjbGFzcz1cInJlcGxhY2VkXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiBibHVlO1wiPjwvc3Bhbj5cbiAqIFJlc3VsdDogPHNwYW4gY2xhc3M9XCJvcmlnaW5hbCByZXBsYWNlZFwiIHN0eWxlPVwiY29sb3I6IHJlZDsgYmFja2dyb3VuZDogYmx1ZTtcIj48L3NwYW4+XG4gKiBgYGBcbiAqXG4gKiBUaGF0IG1lYW5zIGF0dHJpYnV0ZXMgdGhhdCBjb250YWluIEFuZ3VsYXJKUyBleHByZXNzaW9ucyB3aWxsIG5vdCBiZSBtZXJnZWQgY29ycmVjdGx5LCBlLmcuXG4gKiB7QGxpbmsgbmdTaG93fSBvciB7QGxpbmsgbmdDbGFzc30gd2lsbCBjYXVzZSBhIHtAbGluayAkcGFyc2V9IGVycm9yOlxuICpcbiAqIGBgYGh0bWxcbiAqIE9yaWdpbmFsIE5vZGU6IDxzcGFuIG5nLWNsYXNzPVwieydzb21ldGhpbmcnOiBzb21ldGhpbmd9XCIgbmctc2hvdz1cIiFjb25kaXRpb25cIj48L3NwYW4+XG4gKiBSZXBsYWNlIFRlbXBsYXRlOiA8c3BhbiBuZy1jbGFzcz1cInsnZWxzZSc6IGVsc2V9XCIgbmctc2hvdz1cIm90aGVyQ29uZGl0aW9uXCI+PC9zcGFuPlxuICogUmVzdWx0OiA8c3BhbiBuZy1jbGFzcz1cInsnc29tZXRoaW5nJzogc29tZXRoaW5nfSB7J2Vsc2UnOiBlbHNlfVwiIG5nLXNob3c9XCIhY29uZGl0aW9uIG90aGVyQ29uZGl0aW9uXCI+PC9zcGFuPlxuICogYGBgXG4gKlxuICogU2VlIGlzc3VlIFsjNTY5NV0oaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvNTY5NSkuXG4gKlxuICogIyMjIyBEaXJlY3RpdmVzIGFyZSBub3QgZGVkdXBsaWNhdGVkIGJlZm9yZSBjb21waWxhdGlvblxuICpcbiAqIFdoZW4gdGhlIG9yaWdpbmFsIG5vZGUgYW5kIHRoZSByZXBsYWNlIHRlbXBsYXRlIGRlY2xhcmUgdGhlIHNhbWUgZGlyZWN0aXZlKHMpLCB0aGV5IHdpbGwgYmVcbiAqIHtAbGluayBndWlkZS9jb21waWxlciNkb3VibGUtY29tcGlsYXRpb24tYW5kLWhvdy10by1hdm9pZC1pdCBjb21waWxlZCB0d2ljZX0gYmVjYXVzZSB0aGUgY29tcGlsZXJcbiAqIGRvZXMgbm90IGRlZHVwbGljYXRlIHRoZW0uIEluIG1hbnkgY2FzZXMsIHRoaXMgaXMgbm90IG5vdGljYWJsZSwgYnV0IGUuZy4ge0BsaW5rIG5nTW9kZWx9IHdpbGxcbiAqIGF0dGFjaCBgJGZvcm1hdHRlcnNgIGFuZCBgJHBhcnNlcnNgIHR3aWNlLlxuICpcbiAqIFNlZSBpc3N1ZSBbIzI1NzNdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzI1NzMpLlxuICpcbiAqICMjIyMgYHRyYW5zY2x1ZGU6IGVsZW1lbnRgIGluIHRoZSByZXBsYWNlIHRlbXBsYXRlIHJvb3QgY2FuIGhhdmVcbiAqIHVuZXhwZWN0ZWQgZWZmZWN0c1xuICpcbiAqIFdoZW4gdGhlIHJlcGxhY2UgdGVtcGxhdGUgaGFzIGEgZGlyZWN0aXZlIGF0IHRoZSByb290IG5vZGUgdGhhdCB1c2VzXG4gKiB7QGxpbmsgJGNvbXBpbGUjLXRyYW5zY2x1ZGUtIGB0cmFuc2NsdWRlOiBlbGVtZW50YH0sIGUuZy5cbiAqIHtAbGluayBuZ0lmfSBvciB7QGxpbmsgbmdSZXBlYXR9LCB0aGUgRE9NIHN0cnVjdHVyZSBvciBzY29wZSBpbmhlcml0YW5jZSBjYW4gYmUgaW5jb3JyZWN0LlxuICogU2VlIHRoZSBmb2xsb3dpbmcgaXNzdWVzOlxuICpcbiAqIC0gSW5jb3JyZWN0IHNjb3BlIG9uIHJlcGxhY2VkIGVsZW1lbnQ6XG4gKiBbIzk4MzddKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzk4MzcpXG4gKiAtIERpZmZlcmVudCBET00gYmV0d2VlbiBgdGVtcGxhdGVgIGFuZCBgdGVtcGxhdGVVcmxgOlxuICogWyMxMDYxMl0oaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTQzMjYpXG4gKlxuICovXG5cbnZhciAkY29tcGlsZU1pbkVyciA9IG1pbkVycignJGNvbXBpbGUnKTtcblxuZnVuY3Rpb24gVU5JTklUSUFMSVpFRF9WQUxVRSgpIHt9XG52YXIgX1VOSU5JVElBTElaRURfVkFMVUUgPSBuZXcgVU5JTklUSUFMSVpFRF9WQUxVRSgpO1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGNvbXBpbGVQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICovXG4kQ29tcGlsZVByb3ZpZGVyLiRpbmplY3QgPSBbJyRwcm92aWRlJywgJyQkc2FuaXRpemVVcmlQcm92aWRlciddO1xuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkQ29tcGlsZVByb3ZpZGVyKCRwcm92aWRlLCAkJHNhbml0aXplVXJpUHJvdmlkZXIpIHtcbiAgdmFyIGhhc0RpcmVjdGl2ZXMgPSB7fSxcbiAgICAgIFN1ZmZpeCA9ICdEaXJlY3RpdmUnLFxuICAgICAgQ09NTUVOVF9ESVJFQ1RJVkVfUkVHRVhQID0gL15cXHMqZGlyZWN0aXZlOlxccyooW1xcdy1dKylcXHMrKC4qKSQvLFxuICAgICAgQ0xBU1NfRElSRUNUSVZFX1JFR0VYUCA9IC8oKFtcXHctXSspKD86OihbXjtdKykpPzs/KS8sXG4gICAgICBBTExfT1JfTk9USElOR19BVFRSUyA9IG1ha2VNYXAoJ25nU3JjLG5nU3Jjc2V0LHNyYyxzcmNzZXQnKSxcbiAgICAgIFJFUVVJUkVfUFJFRklYX1JFR0VYUCA9IC9eKD86KFxcXlxcXj8pPyhcXD8pPyhcXF5cXF4/KT8pPy87XG5cbiAgLy8gUmVmOiBodHRwOi8vZGV2ZWxvcGVycy53aGF0d2cub3JnL3dlYmFwcGFwaXMuaHRtbCNldmVudC1oYW5kbGVyLWlkbC1hdHRyaWJ1dGVzXG4gIC8vIFRoZSBhc3N1bXB0aW9uIGlzIHRoYXQgZnV0dXJlIERPTSBldmVudCBhdHRyaWJ1dGUgbmFtZXMgd2lsbCBiZWdpbiB3aXRoXG4gIC8vICdvbicgYW5kIGJlIGNvbXBvc2VkIG9mIG9ubHkgRW5nbGlzaCBsZXR0ZXJzLlxuICB2YXIgRVZFTlRfSEFORExFUl9BVFRSX1JFR0VYUCA9IC9eKG9uW2Etel0rfGZvcm1hY3Rpb24pJC87XG4gIHZhciBiaW5kaW5nQ2FjaGUgPSBjcmVhdGVNYXAoKTtcblxuICBmdW5jdGlvbiBwYXJzZUlzb2xhdGVCaW5kaW5ncyhzY29wZSwgZGlyZWN0aXZlTmFtZSwgaXNDb250cm9sbGVyKSB7XG4gICAgdmFyIExPQ0FMX1JFR0VYUCA9IC9eKFtAJjxdfD0oXFwqPykpKFxcPz8pXFxzKihbXFx3JF0qKSQvO1xuXG4gICAgdmFyIGJpbmRpbmdzID0gY3JlYXRlTWFwKCk7XG5cbiAgICBmb3JFYWNoKHNjb3BlLCBmdW5jdGlvbihkZWZpbml0aW9uLCBzY29wZU5hbWUpIHtcbiAgICAgIGRlZmluaXRpb24gPSBkZWZpbml0aW9uLnRyaW0oKTtcblxuICAgICAgaWYgKGRlZmluaXRpb24gaW4gYmluZGluZ0NhY2hlKSB7XG4gICAgICAgIGJpbmRpbmdzW3Njb3BlTmFtZV0gPSBiaW5kaW5nQ2FjaGVbZGVmaW5pdGlvbl07XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBtYXRjaCA9IGRlZmluaXRpb24ubWF0Y2goTE9DQUxfUkVHRVhQKTtcblxuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignaXNjcCcsXG4gICAgICAgICAgICAnSW52YWxpZCB7M30gZm9yIGRpcmVjdGl2ZSBcXCd7MH1cXCcuJyArXG4gICAgICAgICAgICAnIERlZmluaXRpb246IHsuLi4gezF9OiBcXCd7Mn1cXCcgLi4ufScsXG4gICAgICAgICAgICBkaXJlY3RpdmVOYW1lLCBzY29wZU5hbWUsIGRlZmluaXRpb24sXG4gICAgICAgICAgICAoaXNDb250cm9sbGVyID8gJ2NvbnRyb2xsZXIgYmluZGluZ3MgZGVmaW5pdGlvbicgOlxuICAgICAgICAgICAgJ2lzb2xhdGUgc2NvcGUgZGVmaW5pdGlvbicpKTtcbiAgICAgIH1cblxuICAgICAgYmluZGluZ3Nbc2NvcGVOYW1lXSA9IHtcbiAgICAgICAgbW9kZTogbWF0Y2hbMV1bMF0sXG4gICAgICAgIGNvbGxlY3Rpb246IG1hdGNoWzJdID09PSAnKicsXG4gICAgICAgIG9wdGlvbmFsOiBtYXRjaFszXSA9PT0gJz8nLFxuICAgICAgICBhdHRyTmFtZTogbWF0Y2hbNF0gfHwgc2NvcGVOYW1lXG4gICAgICB9O1xuICAgICAgaWYgKG1hdGNoWzRdKSB7XG4gICAgICAgIGJpbmRpbmdDYWNoZVtkZWZpbml0aW9uXSA9IGJpbmRpbmdzW3Njb3BlTmFtZV07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYmluZGluZ3M7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZURpcmVjdGl2ZUJpbmRpbmdzKGRpcmVjdGl2ZSwgZGlyZWN0aXZlTmFtZSkge1xuICAgIHZhciBiaW5kaW5ncyA9IHtcbiAgICAgIGlzb2xhdGVTY29wZTogbnVsbCxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IG51bGxcbiAgICB9O1xuICAgIGlmIChpc09iamVjdChkaXJlY3RpdmUuc2NvcGUpKSB7XG4gICAgICBpZiAoZGlyZWN0aXZlLmJpbmRUb0NvbnRyb2xsZXIgPT09IHRydWUpIHtcbiAgICAgICAgYmluZGluZ3MuYmluZFRvQ29udHJvbGxlciA9IHBhcnNlSXNvbGF0ZUJpbmRpbmdzKGRpcmVjdGl2ZS5zY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZU5hbWUsIHRydWUpO1xuICAgICAgICBiaW5kaW5ncy5pc29sYXRlU2NvcGUgPSB7fTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJpbmRpbmdzLmlzb2xhdGVTY29wZSA9IHBhcnNlSXNvbGF0ZUJpbmRpbmdzKGRpcmVjdGl2ZS5zY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlTmFtZSwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNPYmplY3QoZGlyZWN0aXZlLmJpbmRUb0NvbnRyb2xsZXIpKSB7XG4gICAgICBiaW5kaW5ncy5iaW5kVG9Db250cm9sbGVyID1cbiAgICAgICAgICBwYXJzZUlzb2xhdGVCaW5kaW5ncyhkaXJlY3RpdmUuYmluZFRvQ29udHJvbGxlciwgZGlyZWN0aXZlTmFtZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmIChiaW5kaW5ncy5iaW5kVG9Db250cm9sbGVyICYmICFkaXJlY3RpdmUuY29udHJvbGxlcikge1xuICAgICAgLy8gVGhlcmUgaXMgbm8gY29udHJvbGxlclxuICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vY3RybCcsXG4gICAgICAgICAgICAnQ2Fubm90IGJpbmQgdG8gY29udHJvbGxlciB3aXRob3V0IGRpcmVjdGl2ZSBcXCd7MH1cXCdzIGNvbnRyb2xsZXIuJyxcbiAgICAgICAgICAgIGRpcmVjdGl2ZU5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gYmluZGluZ3M7XG4gIH1cblxuICBmdW5jdGlvbiBhc3NlcnRWYWxpZERpcmVjdGl2ZU5hbWUobmFtZSkge1xuICAgIHZhciBsZXR0ZXIgPSBuYW1lLmNoYXJBdCgwKTtcbiAgICBpZiAoIWxldHRlciB8fCBsZXR0ZXIgIT09IGxvd2VyY2FzZShsZXR0ZXIpKSB7XG4gICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignYmFkZGlyJywgJ0RpcmVjdGl2ZS9Db21wb25lbnQgbmFtZSBcXCd7MH1cXCcgaXMgaW52YWxpZC4gVGhlIGZpcnN0IGNoYXJhY3RlciBtdXN0IGJlIGEgbG93ZXJjYXNlIGxldHRlcicsIG5hbWUpO1xuICAgIH1cbiAgICBpZiAobmFtZSAhPT0gbmFtZS50cmltKCkpIHtcbiAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdiYWRkaXInLFxuICAgICAgICAgICAgJ0RpcmVjdGl2ZS9Db21wb25lbnQgbmFtZSBcXCd7MH1cXCcgaXMgaW52YWxpZC4gVGhlIG5hbWUgc2hvdWxkIG5vdCBjb250YWluIGxlYWRpbmcgb3IgdHJhaWxpbmcgd2hpdGVzcGFjZXMnLFxuICAgICAgICAgICAgbmFtZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RGlyZWN0aXZlUmVxdWlyZShkaXJlY3RpdmUpIHtcbiAgICB2YXIgcmVxdWlyZSA9IGRpcmVjdGl2ZS5yZXF1aXJlIHx8IChkaXJlY3RpdmUuY29udHJvbGxlciAmJiBkaXJlY3RpdmUubmFtZSk7XG5cbiAgICBpZiAoIWlzQXJyYXkocmVxdWlyZSkgJiYgaXNPYmplY3QocmVxdWlyZSkpIHtcbiAgICAgIGZvckVhY2gocmVxdWlyZSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICB2YXIgbWF0Y2ggPSB2YWx1ZS5tYXRjaChSRVFVSVJFX1BSRUZJWF9SRUdFWFApO1xuICAgICAgICB2YXIgbmFtZSA9IHZhbHVlLnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICBpZiAoIW5hbWUpIHJlcXVpcmVba2V5XSA9IG1hdGNoWzBdICsga2V5O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcXVpcmU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXREaXJlY3RpdmVSZXN0cmljdChyZXN0cmljdCwgbmFtZSkge1xuICAgIGlmIChyZXN0cmljdCAmJiAhKGlzU3RyaW5nKHJlc3RyaWN0KSAmJiAvW0VBQ01dLy50ZXN0KHJlc3RyaWN0KSkpIHtcbiAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdiYWRyZXN0cmljdCcsXG4gICAgICAgICAgJ1Jlc3RyaWN0IHByb3BlcnR5IFxcJ3swfVxcJyBvZiBkaXJlY3RpdmUgXFwnezF9XFwnIGlzIGludmFsaWQnLFxuICAgICAgICAgIHJlc3RyaWN0LFxuICAgICAgICAgIG5hbWUpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN0cmljdCB8fCAnRUEnO1xuICB9XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmVcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJlZ2lzdGVyIGEgbmV3IGRpcmVjdGl2ZSB3aXRoIHRoZSBjb21waWxlci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIE5hbWUgb2YgdGhlIGRpcmVjdGl2ZSBpbiBjYW1lbC1jYXNlIChpLmUuIDxjb2RlPm5nQmluZDwvY29kZT4gd2hpY2hcbiAgICogICAgd2lsbCBtYXRjaCBhcyA8Y29kZT5uZy1iaW5kPC9jb2RlPiksIG9yIGFuIG9iamVjdCBtYXAgb2YgZGlyZWN0aXZlcyB3aGVyZSB0aGUga2V5cyBhcmUgdGhlXG4gICAqICAgIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgZmFjdG9yaWVzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5fSBkaXJlY3RpdmVGYWN0b3J5IEFuIGluamVjdGFibGUgZGlyZWN0aXZlIGZhY3RvcnkgZnVuY3Rpb24uIFNlZSB0aGVcbiAgICogICAge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmUgZ3VpZGV9IGFuZCB0aGUge0BsaW5rICRjb21waWxlIGNvbXBpbGUgQVBJfSBmb3IgbW9yZSBpbmZvLlxuICAgKiBAcmV0dXJucyB7bmcuJGNvbXBpbGVQcm92aWRlcn0gU2VsZiBmb3IgY2hhaW5pbmcuXG4gICAqL1xuICB0aGlzLmRpcmVjdGl2ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVyRGlyZWN0aXZlKG5hbWUsIGRpcmVjdGl2ZUZhY3RvcnkpIHtcbiAgICBhc3NlcnRBcmcobmFtZSwgJ25hbWUnKTtcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnZGlyZWN0aXZlJyk7XG4gICAgaWYgKGlzU3RyaW5nKG5hbWUpKSB7XG4gICAgICBhc3NlcnRWYWxpZERpcmVjdGl2ZU5hbWUobmFtZSk7XG4gICAgICBhc3NlcnRBcmcoZGlyZWN0aXZlRmFjdG9yeSwgJ2RpcmVjdGl2ZUZhY3RvcnknKTtcbiAgICAgIGlmICghaGFzRGlyZWN0aXZlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBoYXNEaXJlY3RpdmVzW25hbWVdID0gW107XG4gICAgICAgICRwcm92aWRlLmZhY3RvcnkobmFtZSArIFN1ZmZpeCwgWyckaW5qZWN0b3InLCAnJGV4Y2VwdGlvbkhhbmRsZXInLFxuICAgICAgICAgIGZ1bmN0aW9uKCRpbmplY3RvciwgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcbiAgICAgICAgICAgIHZhciBkaXJlY3RpdmVzID0gW107XG4gICAgICAgICAgICBmb3JFYWNoKGhhc0RpcmVjdGl2ZXNbbmFtZV0sIGZ1bmN0aW9uKGRpcmVjdGl2ZUZhY3RvcnksIGluZGV4KSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZSA9ICRpbmplY3Rvci5pbnZva2UoZGlyZWN0aXZlRmFjdG9yeSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oZGlyZWN0aXZlKSkge1xuICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlID0geyBjb21waWxlOiB2YWx1ZUZuKGRpcmVjdGl2ZSkgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFkaXJlY3RpdmUuY29tcGlsZSAmJiBkaXJlY3RpdmUubGluaykge1xuICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlLmNvbXBpbGUgPSB2YWx1ZUZuKGRpcmVjdGl2ZS5saW5rKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLnByaW9yaXR5ID0gZGlyZWN0aXZlLnByaW9yaXR5IHx8IDA7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLmluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLm5hbWUgPSBkaXJlY3RpdmUubmFtZSB8fCBuYW1lO1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5yZXF1aXJlID0gZ2V0RGlyZWN0aXZlUmVxdWlyZShkaXJlY3RpdmUpO1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5yZXN0cmljdCA9IGdldERpcmVjdGl2ZVJlc3RyaWN0KGRpcmVjdGl2ZS5yZXN0cmljdCwgbmFtZSk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLiQkbW9kdWxlTmFtZSA9IGRpcmVjdGl2ZUZhY3RvcnkuJCRtb2R1bGVOYW1lO1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZXMucHVzaChkaXJlY3RpdmUpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZXM7XG4gICAgICAgICAgfV0pO1xuICAgICAgfVxuICAgICAgaGFzRGlyZWN0aXZlc1tuYW1lXS5wdXNoKGRpcmVjdGl2ZUZhY3RvcnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3JFYWNoKG5hbWUsIHJldmVyc2VQYXJhbXMocmVnaXN0ZXJEaXJlY3RpdmUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNjb21wb25lbnRcbiAgICogQG1vZHVsZSBuZ1xuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgTmFtZSBvZiB0aGUgY29tcG9uZW50IGluIGNhbWVsQ2FzZSAoaS5lLiBgbXlDb21wYCB3aGljaCB3aWxsIG1hdGNoIGA8bXktY29tcD5gKSxcbiAgICogICAgb3IgYW4gb2JqZWN0IG1hcCBvZiBjb21wb25lbnRzIHdoZXJlIHRoZSBrZXlzIGFyZSB0aGUgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBjb21wb25lbnQgZGVmaW5pdGlvbiBvYmplY3RzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDb21wb25lbnQgZGVmaW5pdGlvbiBvYmplY3QgKGEgc2ltcGxpZmllZFxuICAgKiAgICB7QGxpbmsgbmcuJGNvbXBpbGUjZGlyZWN0aXZlLWRlZmluaXRpb24tb2JqZWN0IGRpcmVjdGl2ZSBkZWZpbml0aW9uIG9iamVjdH0pLFxuICAgKiAgICB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyAoYWxsIG9wdGlvbmFsKTpcbiAgICpcbiAgICogICAgLSBgY29udHJvbGxlcmAg4oCTIGB7KHN0cmluZ3xmdW5jdGlvbigpPX1gIOKAkyBjb250cm9sbGVyIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlXG4gICAqICAgICAgYXNzb2NpYXRlZCB3aXRoIG5ld2x5IGNyZWF0ZWQgc2NvcGUgb3IgdGhlIG5hbWUgb2YgYSB7QGxpbmsgbmcuJGNvbXBpbGUjLWNvbnRyb2xsZXItXG4gICAqICAgICAgcmVnaXN0ZXJlZCBjb250cm9sbGVyfSBpZiBwYXNzZWQgYXMgYSBzdHJpbmcuIEFuIGVtcHR5IGBub29wYCBmdW5jdGlvbiBieSBkZWZhdWx0LlxuICAgKiAgICAtIGBjb250cm9sbGVyQXNgIOKAkyBge3N0cmluZz19YCDigJMgaWRlbnRpZmllciBuYW1lIGZvciB0byByZWZlcmVuY2UgdGhlIGNvbnRyb2xsZXIgaW4gdGhlIGNvbXBvbmVudCdzIHNjb3BlLlxuICAgKiAgICAgIElmIHByZXNlbnQsIHRoZSBjb250cm9sbGVyIHdpbGwgYmUgcHVibGlzaGVkIHRvIHNjb3BlIHVuZGVyIHRoZSBgY29udHJvbGxlckFzYCBuYW1lLlxuICAgKiAgICAgIElmIG5vdCBwcmVzZW50LCB0aGlzIHdpbGwgZGVmYXVsdCB0byBiZSBgJGN0cmxgLlxuICAgKiAgICAtIGB0ZW1wbGF0ZWAg4oCTIGB7c3RyaW5nPXxmdW5jdGlvbigpPX1gIOKAkyBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nIG9yIGEgZnVuY3Rpb24gdGhhdFxuICAgKiAgICAgIHJldHVybnMgYW4gaHRtbCB0ZW1wbGF0ZSBhcyBhIHN0cmluZyB3aGljaCBzaG91bGQgYmUgdXNlZCBhcyB0aGUgY29udGVudHMgb2YgdGhpcyBjb21wb25lbnQuXG4gICAqICAgICAgRW1wdHkgc3RyaW5nIGJ5IGRlZmF1bHQuXG4gICAqXG4gICAqICAgICAgSWYgYHRlbXBsYXRlYCBpcyBhIGZ1bmN0aW9uLCB0aGVuIGl0IGlzIHtAbGluayBhdXRvLiRpbmplY3RvciNpbnZva2UgaW5qZWN0ZWR9IHdpdGhcbiAgICogICAgICB0aGUgZm9sbG93aW5nIGxvY2FsczpcbiAgICpcbiAgICogICAgICAtIGAkZWxlbWVudGAgLSBDdXJyZW50IGVsZW1lbnRcbiAgICogICAgICAtIGAkYXR0cnNgIC0gQ3VycmVudCBhdHRyaWJ1dGVzIG9iamVjdCBmb3IgdGhlIGVsZW1lbnRcbiAgICpcbiAgICogICAgLSBgdGVtcGxhdGVVcmxgIOKAkyBge3N0cmluZz18ZnVuY3Rpb24oKT19YCDigJMgcGF0aCBvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBwYXRoIHRvIGFuIGh0bWxcbiAgICogICAgICB0ZW1wbGF0ZSB0aGF0IHNob3VsZCBiZSB1c2VkICBhcyB0aGUgY29udGVudHMgb2YgdGhpcyBjb21wb25lbnQuXG4gICAqXG4gICAqICAgICAgSWYgYHRlbXBsYXRlVXJsYCBpcyBhIGZ1bmN0aW9uLCB0aGVuIGl0IGlzIHtAbGluayBhdXRvLiRpbmplY3RvciNpbnZva2UgaW5qZWN0ZWR9IHdpdGhcbiAgICogICAgICB0aGUgZm9sbG93aW5nIGxvY2FsczpcbiAgICpcbiAgICogICAgICAtIGAkZWxlbWVudGAgLSBDdXJyZW50IGVsZW1lbnRcbiAgICogICAgICAtIGAkYXR0cnNgIC0gQ3VycmVudCBhdHRyaWJ1dGVzIG9iamVjdCBmb3IgdGhlIGVsZW1lbnRcbiAgICpcbiAgICogICAgLSBgYmluZGluZ3NgIOKAkyBge29iamVjdD19YCDigJMgZGVmaW5lcyBiaW5kaW5ncyBiZXR3ZWVuIERPTSBhdHRyaWJ1dGVzIGFuZCBjb21wb25lbnQgcHJvcGVydGllcy5cbiAgICogICAgICBDb21wb25lbnQgcHJvcGVydGllcyBhcmUgYWx3YXlzIGJvdW5kIHRvIHRoZSBjb21wb25lbnQgY29udHJvbGxlciBhbmQgbm90IHRvIHRoZSBzY29wZS5cbiAgICogICAgICBTZWUge0BsaW5rIG5nLiRjb21waWxlIy1iaW5kdG9jb250cm9sbGVyLSBgYmluZFRvQ29udHJvbGxlcmB9LlxuICAgKiAgICAtIGB0cmFuc2NsdWRlYCDigJMgYHtib29sZWFuPX1gIOKAkyB3aGV0aGVyIHtAbGluayAkY29tcGlsZSN0cmFuc2NsdXNpb24gY29udGVudCB0cmFuc2NsdXNpb259IGlzIGVuYWJsZWQuXG4gICAqICAgICAgRGlzYWJsZWQgYnkgZGVmYXVsdC5cbiAgICogICAgLSBgcmVxdWlyZWAgLSBge09iamVjdDxzdHJpbmcsIHN0cmluZz49fWAgLSByZXF1aXJlcyB0aGUgY29udHJvbGxlcnMgb2Ygb3RoZXIgZGlyZWN0aXZlcyBhbmQgYmluZHMgdGhlbSB0b1xuICAgKiAgICAgIHRoaXMgY29tcG9uZW50J3MgY29udHJvbGxlci4gVGhlIG9iamVjdCBrZXlzIHNwZWNpZnkgdGhlIHByb3BlcnR5IG5hbWVzIHVuZGVyIHdoaWNoIHRoZSByZXF1aXJlZFxuICAgKiAgICAgIGNvbnRyb2xsZXJzIChvYmplY3QgdmFsdWVzKSB3aWxsIGJlIGJvdW5kLiBTZWUge0BsaW5rIG5nLiRjb21waWxlIy1yZXF1aXJlLSBgcmVxdWlyZWB9LlxuICAgKiAgICAtIGAkLi4uYCDigJMgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIHRvIGF0dGFjaCB0byB0aGUgZGlyZWN0aXZlIGZhY3RvcnkgZnVuY3Rpb24gYW5kIHRoZSBjb250cm9sbGVyXG4gICAqICAgICAgY29uc3RydWN0b3IgZnVuY3Rpb24uIChUaGlzIGlzIHVzZWQgYnkgdGhlIGNvbXBvbmVudCByb3V0ZXIgdG8gYW5ub3RhdGUpXG4gICAqXG4gICAqIEByZXR1cm5zIHtuZy4kY29tcGlsZVByb3ZpZGVyfSB0aGUgY29tcGlsZSBwcm92aWRlciBpdHNlbGYsIGZvciBjaGFpbmluZyBvZiBmdW5jdGlvbiBjYWxscy5cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJlZ2lzdGVyIGEgKipjb21wb25lbnQgZGVmaW5pdGlvbioqIHdpdGggdGhlIGNvbXBpbGVyLiBUaGlzIGlzIGEgc2hvcnRoYW5kIGZvciByZWdpc3RlcmluZyBhIHNwZWNpYWxcbiAgICogdHlwZSBvZiBkaXJlY3RpdmUsIHdoaWNoIHJlcHJlc2VudHMgYSBzZWxmLWNvbnRhaW5lZCBVSSBjb21wb25lbnQgaW4geW91ciBhcHBsaWNhdGlvbi4gU3VjaCBjb21wb25lbnRzXG4gICAqIGFyZSBhbHdheXMgaXNvbGF0ZWQgKGkuZS4gYHNjb3BlOiB7fWApIGFuZCBhcmUgYWx3YXlzIHJlc3RyaWN0ZWQgdG8gZWxlbWVudHMgKGkuZS4gYHJlc3RyaWN0OiAnRSdgKS5cbiAgICpcbiAgICogQ29tcG9uZW50IGRlZmluaXRpb25zIGFyZSB2ZXJ5IHNpbXBsZSBhbmQgZG8gbm90IHJlcXVpcmUgYXMgbXVjaCBjb25maWd1cmF0aW9uIGFzIGRlZmluaW5nIGdlbmVyYWxcbiAgICogZGlyZWN0aXZlcy4gQ29tcG9uZW50IGRlZmluaXRpb25zIHVzdWFsbHkgY29uc2lzdCBvbmx5IG9mIGEgdGVtcGxhdGUgYW5kIGEgY29udHJvbGxlciBiYWNraW5nIGl0LlxuICAgKlxuICAgKiBJbiBvcmRlciB0byBtYWtlIHRoZSBkZWZpbml0aW9uIGVhc2llciwgY29tcG9uZW50cyBlbmZvcmNlIGJlc3QgcHJhY3RpY2VzIGxpa2UgdXNlIG9mIGBjb250cm9sbGVyQXNgLFxuICAgKiBgYmluZFRvQ29udHJvbGxlcmAuIFRoZXkgYWx3YXlzIGhhdmUgKippc29sYXRlIHNjb3BlKiogYW5kIGFyZSByZXN0cmljdGVkIHRvIGVsZW1lbnRzLlxuICAgKlxuICAgKiBIZXJlIGFyZSBhIGZldyBleGFtcGxlcyBvZiBob3cgeW91IHdvdWxkIHVzdWFsbHkgZGVmaW5lIGNvbXBvbmVudHM6XG4gICAqXG4gICAqIGBgYGpzXG4gICAqICAgdmFyIG15TW9kID0gYW5ndWxhci5tb2R1bGUoLi4uKTtcbiAgICogICBteU1vZC5jb21wb25lbnQoJ215Q29tcCcsIHtcbiAgICogICAgIHRlbXBsYXRlOiAnPGRpdj5NeSBuYW1lIGlzIHt7JGN0cmwubmFtZX19PC9kaXY+JyxcbiAgICogICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkge1xuICAgKiAgICAgICB0aGlzLm5hbWUgPSAnc2hhaGFyJztcbiAgICogICAgIH1cbiAgICogICB9KTtcbiAgICpcbiAgICogICBteU1vZC5jb21wb25lbnQoJ215Q29tcCcsIHtcbiAgICogICAgIHRlbXBsYXRlOiAnPGRpdj5NeSBuYW1lIGlzIHt7JGN0cmwubmFtZX19PC9kaXY+JyxcbiAgICogICAgIGJpbmRpbmdzOiB7bmFtZTogJ0AnfVxuICAgKiAgIH0pO1xuICAgKlxuICAgKiAgIG15TW9kLmNvbXBvbmVudCgnbXlDb21wJywge1xuICAgKiAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9teS1jb21wLmh0bWwnLFxuICAgKiAgICAgY29udHJvbGxlcjogJ015Q3RybCcsXG4gICAqICAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICogICAgIGJpbmRpbmdzOiB7bmFtZTogJ0AnfVxuICAgKiAgIH0pO1xuICAgKlxuICAgKiBgYGBcbiAgICogRm9yIG1vcmUgZXhhbXBsZXMsIGFuZCBhbiBpbi1kZXB0aCBndWlkZSwgc2VlIHRoZSB7QGxpbmsgZ3VpZGUvY29tcG9uZW50IGNvbXBvbmVudCBndWlkZX0uXG4gICAqXG4gICAqIDxiciAvPlxuICAgKiBTZWUgYWxzbyB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgJGNvbXBpbGVQcm92aWRlci5kaXJlY3RpdmUoKX0uXG4gICAqL1xuICB0aGlzLmNvbXBvbmVudCA9IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50KG5hbWUsIG9wdGlvbnMpIHtcbiAgICBpZiAoIWlzU3RyaW5nKG5hbWUpKSB7XG4gICAgICBmb3JFYWNoKG5hbWUsIHJldmVyc2VQYXJhbXMoYmluZCh0aGlzLCByZWdpc3RlckNvbXBvbmVudCkpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHZhciBjb250cm9sbGVyID0gb3B0aW9ucy5jb250cm9sbGVyIHx8IGZ1bmN0aW9uKCkge307XG5cbiAgICBmdW5jdGlvbiBmYWN0b3J5KCRpbmplY3Rvcikge1xuICAgICAgZnVuY3Rpb24gbWFrZUluamVjdGFibGUoZm4pIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pIHx8IGlzQXJyYXkoZm4pKSB7XG4gICAgICAgICAgcmV0dXJuIC8qKiBAdGhpcyAqLyBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7XG4gICAgICAgICAgICByZXR1cm4gJGluamVjdG9yLmludm9rZShmbiwgdGhpcywgeyRlbGVtZW50OiB0RWxlbWVudCwgJGF0dHJzOiB0QXR0cnN9KTtcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBmbjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgdGVtcGxhdGUgPSAoIW9wdGlvbnMudGVtcGxhdGUgJiYgIW9wdGlvbnMudGVtcGxhdGVVcmwgPyAnJyA6IG9wdGlvbnMudGVtcGxhdGUpO1xuICAgICAgdmFyIGRkbyA9IHtcbiAgICAgICAgY29udHJvbGxlcjogY29udHJvbGxlcixcbiAgICAgICAgY29udHJvbGxlckFzOiBpZGVudGlmaWVyRm9yQ29udHJvbGxlcihvcHRpb25zLmNvbnRyb2xsZXIpIHx8IG9wdGlvbnMuY29udHJvbGxlckFzIHx8ICckY3RybCcsXG4gICAgICAgIHRlbXBsYXRlOiBtYWtlSW5qZWN0YWJsZSh0ZW1wbGF0ZSksXG4gICAgICAgIHRlbXBsYXRlVXJsOiBtYWtlSW5qZWN0YWJsZShvcHRpb25zLnRlbXBsYXRlVXJsKSxcbiAgICAgICAgdHJhbnNjbHVkZTogb3B0aW9ucy50cmFuc2NsdWRlLFxuICAgICAgICBzY29wZToge30sXG4gICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IG9wdGlvbnMuYmluZGluZ3MgfHwge30sXG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHJlcXVpcmU6IG9wdGlvbnMucmVxdWlyZVxuICAgICAgfTtcblxuICAgICAgLy8gQ29weSBhbm5vdGF0aW9ucyAoc3RhcnRpbmcgd2l0aCAkKSBvdmVyIHRvIHRoZSBERE9cbiAgICAgIGZvckVhY2gob3B0aW9ucywgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleS5jaGFyQXQoMCkgPT09ICckJykgZGRvW2tleV0gPSB2YWw7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRkbztcbiAgICB9XG5cbiAgICAvLyBUT0RPKHBldGUpIHJlbW92ZSB0aGUgZm9sbG93aW5nIGBmb3JFYWNoYCBiZWZvcmUgd2UgcmVsZWFzZSAxLjYuMFxuICAgIC8vIFRoZSBjb21wb25lbnQtcm91dGVyQDAuMi4wIGxvb2tzIGZvciB0aGUgYW5ub3RhdGlvbnMgb24gdGhlIGNvbnRyb2xsZXIgY29uc3RydWN0b3JcbiAgICAvLyBOb3RoaW5nIGluIEFuZ3VsYXJKUyBsb29rcyBmb3IgYW5ub3RhdGlvbnMgb24gdGhlIGZhY3RvcnkgZnVuY3Rpb24gYnV0IHdlIGNhbid0IHJlbW92ZVxuICAgIC8vIGl0IGZyb20gMS41LnggeWV0LlxuXG4gICAgLy8gQ29weSBhbnkgYW5ub3RhdGlvbiBwcm9wZXJ0aWVzIChzdGFydGluZyB3aXRoICQpIG92ZXIgdG8gdGhlIGZhY3RvcnkgYW5kIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgZnVuY3Rpb25zXG4gICAgLy8gVGhlc2UgY291bGQgYmUgdXNlZCBieSBsaWJyYXJpZXMgc3VjaCBhcyB0aGUgbmV3IGNvbXBvbmVudCByb3V0ZXJcbiAgICBmb3JFYWNoKG9wdGlvbnMsIGZ1bmN0aW9uKHZhbCwga2V5KSB7XG4gICAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyQnKSB7XG4gICAgICAgIGZhY3Rvcnlba2V5XSA9IHZhbDtcbiAgICAgICAgLy8gRG9uJ3QgdHJ5IHRvIGNvcHkgb3ZlciBhbm5vdGF0aW9ucyB0byBuYW1lZCBjb250cm9sbGVyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXIpKSBjb250cm9sbGVyW2tleV0gPSB2YWw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBmYWN0b3J5LiRpbmplY3QgPSBbJyRpbmplY3RvciddO1xuXG4gICAgcmV0dXJuIHRoaXMuZGlyZWN0aXZlKG5hbWUsIGZhY3RvcnkpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmV0cmlldmVzIG9yIG92ZXJyaWRlcyB0aGUgZGVmYXVsdCByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIGZvciB3aGl0ZWxpc3Rpbmcgb2Ygc2FmZVxuICAgKiB1cmxzIGR1cmluZyBhW2hyZWZdIHNhbml0aXphdGlvbi5cbiAgICpcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudGluZyBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cbiAgICpcbiAgICogQW55IHVybCBhYm91dCB0byBiZSBhc3NpZ25lZCB0byBhW2hyZWZdIHZpYSBkYXRhLWJpbmRpbmcgaXMgZmlyc3Qgbm9ybWFsaXplZCBhbmQgdHVybmVkIGludG9cbiAgICogYW4gYWJzb2x1dGUgdXJsLiBBZnRlcndhcmRzLCB0aGUgdXJsIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgYGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0YFxuICAgKiByZWd1bGFyIGV4cHJlc3Npb24uIElmIGEgbWF0Y2ggaXMgZm91bmQsIHRoZSBvcmlnaW5hbCB1cmwgaXMgd3JpdHRlbiBpbnRvIHRoZSBkb20uIE90aGVyd2lzZSxcbiAgICogdGhlIGFic29sdXRlIHVybCBpcyBwcmVmaXhlZCB3aXRoIGAndW5zYWZlOidgIHN0cmluZyBhbmQgb25seSB0aGVuIGlzIGl0IHdyaXR0ZW4gaW50byB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlZ0V4cD19IHJlZ2V4cCBOZXcgcmVnZXhwIHRvIHdoaXRlbGlzdCB1cmxzIHdpdGguXG4gICAqIEByZXR1cm5zIHtSZWdFeHB8bmcuJGNvbXBpbGVQcm92aWRlcn0gQ3VycmVudCBSZWdFeHAgaWYgY2FsbGVkIHdpdGhvdXQgdmFsdWUgb3Igc2VsZiBmb3JcbiAgICogICAgY2hhaW5pbmcgb3RoZXJ3aXNlLlxuICAgKi9cbiAgdGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IGZ1bmN0aW9uKHJlZ2V4cCkge1xuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xuICAgICAgJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KHJlZ2V4cCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICQkc2FuaXRpemVVcmlQcm92aWRlci5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCgpO1xuICAgIH1cbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0XG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXG4gICAqIHVybHMgZHVyaW5nIGltZ1tzcmNdIHNhbml0aXphdGlvbi5cbiAgICpcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudCBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cbiAgICpcbiAgICogQW55IHVybCBhYm91dCB0byBiZSBhc3NpZ25lZCB0byBpbWdbc3JjXSB2aWEgZGF0YS1iaW5kaW5nIGlzIGZpcnN0IG5vcm1hbGl6ZWQgYW5kIHR1cm5lZCBpbnRvXG4gICAqIGFuIGFic29sdXRlIHVybC4gQWZ0ZXJ3YXJkcywgdGhlIHVybCBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXG4gICAqIHJlZ3VsYXIgZXhwcmVzc2lvbi4gSWYgYSBtYXRjaCBpcyBmb3VuZCwgdGhlIG9yaWdpbmFsIHVybCBpcyB3cml0dGVuIGludG8gdGhlIGRvbS4gT3RoZXJ3aXNlLFxuICAgKiB0aGUgYWJzb2x1dGUgdXJsIGlzIHByZWZpeGVkIHdpdGggYCd1bnNhZmU6J2Agc3RyaW5nIGFuZCBvbmx5IHRoZW4gaXMgaXQgd3JpdHRlbiBpbnRvIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA9IGZ1bmN0aW9uKHJlZ2V4cCkge1xuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xuICAgICAgJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdChyZWdleHApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAkJHNhbml0aXplVXJpUHJvdmlkZXIuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICAkY29tcGlsZVByb3ZpZGVyI2RlYnVnSW5mb0VuYWJsZWRcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFuPX0gZW5hYmxlZCB1cGRhdGUgdGhlIGRlYnVnSW5mb0VuYWJsZWQgc3RhdGUgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBqdXN0IHJldHVybiB0aGVcbiAgICogY3VycmVudCBkZWJ1Z0luZm9FbmFibGVkIHN0YXRlXG4gICAqIEByZXR1cm5zIHsqfSBjdXJyZW50IHZhbHVlIGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXG4gICAqXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDYWxsIHRoaXMgbWV0aG9kIHRvIGVuYWJsZS9kaXNhYmxlIHZhcmlvdXMgZGVidWcgcnVudGltZSBpbmZvcm1hdGlvbiBpbiB0aGUgY29tcGlsZXIgc3VjaCBhcyBhZGRpbmdcbiAgICogYmluZGluZyBpbmZvcm1hdGlvbiBhbmQgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgc2NvcGUgb24gdG8gRE9NIGVsZW1lbnRzLlxuICAgKiBJZiBlbmFibGVkLCB0aGUgY29tcGlsZXIgd2lsbCBhZGQgdGhlIGZvbGxvd2luZyB0byBET00gZWxlbWVudHMgdGhhdCBoYXZlIGJlZW4gYm91bmQgdG8gdGhlIHNjb3BlXG4gICAqICogYG5nLWJpbmRpbmdgIENTUyBjbGFzc1xuICAgKiAqIGBuZy1zY29wZWAgYW5kIGBuZy1pc29sYXRlZC1zY29wZWAgQ1NTIGNsYXNzZXNcbiAgICogKiBgJGJpbmRpbmdgIGRhdGEgcHJvcGVydHkgY29udGFpbmluZyBhbiBhcnJheSBvZiB0aGUgYmluZGluZyBleHByZXNzaW9uc1xuICAgKiAqIERhdGEgcHJvcGVydGllcyB1c2VkIGJ5IHRoZSB7QGxpbmsgYW5ndWxhci5lbGVtZW50I21ldGhvZHMgYHNjb3BlKClgL2Bpc29sYXRlU2NvcGUoKWAgbWV0aG9kc30gdG8gcmV0dXJuXG4gICAqICAgdGhlIGVsZW1lbnQncyBzY29wZS5cbiAgICogKiBQbGFjZWhvbGRlciBjb21tZW50cyB3aWxsIGNvbnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBkaXJlY3RpdmUgYW5kIGJpbmRpbmcgY2F1c2VkIHRoZSBwbGFjZWhvbGRlci5cbiAgICogICBFLmcuIGA8IS0tIG5nSWY6IHNob3VsZFNob3coKSAtLT5gLlxuICAgKlxuICAgKiBZb3UgbWF5IHdhbnQgdG8gZGlzYWJsZSB0aGlzIGluIHByb2R1Y3Rpb24gZm9yIGEgc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgYm9vc3QuIFNlZVxuICAgKiB7QGxpbmsgZ3VpZGUvcHJvZHVjdGlvbiNkaXNhYmxpbmctZGVidWctZGF0YSBEaXNhYmxpbmcgRGVidWcgRGF0YX0gZm9yIG1vcmUuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRydWUuXG4gICAqL1xuICB2YXIgZGVidWdJbmZvRW5hYmxlZCA9IHRydWU7XG4gIHRoaXMuZGVidWdJbmZvRW5hYmxlZCA9IGZ1bmN0aW9uKGVuYWJsZWQpIHtcbiAgICBpZiAoaXNEZWZpbmVkKGVuYWJsZWQpKSB7XG4gICAgICBkZWJ1Z0luZm9FbmFibGVkID0gZW5hYmxlZDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gZGVidWdJbmZvRW5hYmxlZDtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAgJGNvbXBpbGVQcm92aWRlciNzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWRcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFuPX0gZW5hYmxlZCB1cGRhdGUgdGhlIHN0cmljdENvbXBvbmVudEJpbmRpbmdzRW5hYmxlZCBzdGF0ZSBpZiBwcm92aWRlZCxcbiAgICogb3RoZXJ3aXNlIHJldHVybiB0aGUgY3VycmVudCBzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQgc3RhdGUuXG4gICAqIEByZXR1cm5zIHsqfSBjdXJyZW50IHZhbHVlIGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXG4gICAqXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDYWxsIHRoaXMgbWV0aG9kIHRvIGVuYWJsZSAvIGRpc2FibGUgdGhlIHN0cmljdCBjb21wb25lbnQgYmluZGluZ3MgY2hlY2suIElmIGVuYWJsZWQsIHRoZVxuICAgKiBjb21waWxlciB3aWxsIGVuZm9yY2UgdGhhdCBhbGwgc2NvcGUgLyBjb250cm9sbGVyIGJpbmRpbmdzIG9mIGFcbiAgICoge0BsaW5rICRjb21waWxlUHJvdmlkZXIjZGlyZWN0aXZlIGRpcmVjdGl2ZX0gLyB7QGxpbmsgJGNvbXBpbGVQcm92aWRlciNjb21wb25lbnQgY29tcG9uZW50fVxuICAgKiB0aGF0IGFyZSBub3Qgc2V0IGFzIG9wdGlvbmFsIHdpdGggYD9gLCBtdXN0IGJlIHByb3ZpZGVkIHdoZW4gdGhlIGRpcmVjdGl2ZSBpcyBpbnN0YW50aWF0ZWQuXG4gICAqIElmIG5vdCBwcm92aWRlZCwgdGhlIGNvbXBpbGVyIHdpbGwgdGhyb3cgdGhlXG4gICAqIHtAbGluayBlcnJvci8kY29tcGlsZS9taXNzaW5nYXR0ciAkY29tcGlsZTptaXNzaW5nYXR0ciBlcnJvcn0uXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGZhbHNlLlxuICAgKi9cbiAgdmFyIHN0cmljdENvbXBvbmVudEJpbmRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICB0aGlzLnN0cmljdENvbXBvbmVudEJpbmRpbmdzRW5hYmxlZCA9IGZ1bmN0aW9uKGVuYWJsZWQpIHtcbiAgICBpZiAoaXNEZWZpbmVkKGVuYWJsZWQpKSB7XG4gICAgICBzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQgPSBlbmFibGVkO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQ7XG4gIH07XG5cbiAgdmFyIFRUTCA9IDEwO1xuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI29uQ2hhbmdlc1R0bFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogU2V0cyB0aGUgbnVtYmVyIG9mIHRpbWVzIGAkb25DaGFuZ2VzYCBob29rcyBjYW4gdHJpZ2dlciBuZXcgY2hhbmdlcyBiZWZvcmUgZ2l2aW5nIHVwIGFuZFxuICAgKiBhc3N1bWluZyB0aGF0IHRoZSBtb2RlbCBpcyB1bnN0YWJsZS5cbiAgICpcbiAgICogVGhlIGN1cnJlbnQgZGVmYXVsdCBpcyAxMCBpdGVyYXRpb25zLlxuICAgKlxuICAgKiBJbiBjb21wbGV4IGFwcGxpY2F0aW9ucyBpdCdzIHBvc3NpYmxlIHRoYXQgZGVwZW5kZW5jaWVzIGJldHdlZW4gYCRvbkNoYW5nZXNgIGhvb2tzIGFuZCBiaW5kaW5ncyB3aWxsIHJlc3VsdFxuICAgKiBpbiBzZXZlcmFsIGl0ZXJhdGlvbnMgb2YgY2FsbHMgdG8gdGhlc2UgaG9va3MuIEhvd2V2ZXIgaWYgYW4gYXBwbGljYXRpb24gbmVlZHMgbW9yZSB0aGFuIHRoZSBkZWZhdWx0IDEwXG4gICAqIGl0ZXJhdGlvbnMgdG8gc3RhYmlsaXplIHRoZW4geW91IHNob3VsZCBpbnZlc3RpZ2F0ZSB3aGF0IGlzIGNhdXNpbmcgdGhlIG1vZGVsIHRvIGNvbnRpbnVvdXNseSBjaGFuZ2UgZHVyaW5nXG4gICAqIHRoZSBgJG9uQ2hhbmdlc2AgaG9vayBleGVjdXRpb24uXG4gICAqXG4gICAqIEluY3JlYXNpbmcgdGhlIFRUTCBjb3VsZCBoYXZlIHBlcmZvcm1hbmNlIGltcGxpY2F0aW9ucywgc28geW91IHNob3VsZCBub3QgY2hhbmdlIGl0IHdpdGhvdXQgcHJvcGVyIGp1c3RpZmljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCBUaGUgbnVtYmVyIG9mIGAkb25DaGFuZ2VzYCBob29rIGl0ZXJhdGlvbnMuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ8b2JqZWN0fSB0aGUgY3VycmVudCBsaW1pdCAob3IgYHRoaXNgIGlmIGNhbGxlZCBhcyBhIHNldHRlciBmb3IgY2hhaW5pbmcpXG4gICAqL1xuICB0aGlzLm9uQ2hhbmdlc1R0bCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIFRUTCA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBUVEw7XG4gIH07XG5cbiAgdmFyIGNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZENvbmZpZyA9IHRydWU7XG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjY29tbWVudERpcmVjdGl2ZXNFbmFibGVkXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBJdCBpbmRpY2F0ZXMgdG8gdGhlIGNvbXBpbGVyXG4gICAqIHdoZXRoZXIgb3Igbm90IGRpcmVjdGl2ZXMgb24gY29tbWVudHMgc2hvdWxkIGJlIGNvbXBpbGVkLlxuICAgKiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG4gICAqXG4gICAqIENhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aXRoIGZhbHNlIGRpc2FibGVzIHRoZSBjb21waWxhdGlvbiBvZiBkaXJlY3RpdmVzXG4gICAqIG9uIGNvbW1lbnRzIGZvciB0aGUgd2hvbGUgYXBwbGljYXRpb24uXG4gICAqIFRoaXMgcmVzdWx0cyBpbiBhIGNvbXBpbGF0aW9uIHBlcmZvcm1hbmNlIGdhaW4sXG4gICAqIGFzIHRoZSBjb21waWxlciBkb2Vzbid0IGhhdmUgdG8gY2hlY2sgY29tbWVudHMgd2hlbiBsb29raW5nIGZvciBkaXJlY3RpdmVzLlxuICAgKiBUaGlzIHNob3VsZCBob3dldmVyIG9ubHkgYmUgdXNlZCBpZiB5b3UgYXJlIHN1cmUgdGhhdCBubyBjb21tZW50IGRpcmVjdGl2ZXMgYXJlIHVzZWQgaW5cbiAgICogdGhlIGFwcGxpY2F0aW9uIChpbmNsdWRpbmcgYW55IDNyZCBwYXJ0eSBkaXJlY3RpdmVzKS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVkIGBmYWxzZWAgaWYgdGhlIGNvbXBpbGVyIG1heSBpZ25vcmUgZGlyZWN0aXZlcyBvbiBjb21tZW50c1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbnxvYmplY3R9IHRoZSBjdXJyZW50IHZhbHVlIChvciBgdGhpc2AgaWYgY2FsbGVkIGFzIGEgc2V0dGVyIGZvciBjaGFpbmluZylcbiAgICovXG4gIHRoaXMuY29tbWVudERpcmVjdGl2ZXNFbmFibGVkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgY29tbWVudERpcmVjdGl2ZXNFbmFibGVkQ29uZmlnID0gdmFsdWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIGNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZENvbmZpZztcbiAgfTtcblxuXG4gIHZhciBjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkQ29uZmlnID0gdHJ1ZTtcbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBJdCBpbmRpY2F0ZXMgdG8gdGhlIGNvbXBpbGVyXG4gICAqIHdoZXRoZXIgb3Igbm90IGRpcmVjdGl2ZXMgb24gZWxlbWVudCBjbGFzc2VzIHNob3VsZCBiZSBjb21waWxlZC5cbiAgICogRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgKlxuICAgKiBDYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2l0aCBmYWxzZSBkaXNhYmxlcyB0aGUgY29tcGlsYXRpb24gb2YgZGlyZWN0aXZlc1xuICAgKiBvbiBlbGVtZW50IGNsYXNzZXMgZm9yIHRoZSB3aG9sZSBhcHBsaWNhdGlvbi5cbiAgICogVGhpcyByZXN1bHRzIGluIGEgY29tcGlsYXRpb24gcGVyZm9ybWFuY2UgZ2FpbixcbiAgICogYXMgdGhlIGNvbXBpbGVyIGRvZXNuJ3QgaGF2ZSB0byBjaGVjayBlbGVtZW50IGNsYXNzZXMgd2hlbiBsb29raW5nIGZvciBkaXJlY3RpdmVzLlxuICAgKiBUaGlzIHNob3VsZCBob3dldmVyIG9ubHkgYmUgdXNlZCBpZiB5b3UgYXJlIHN1cmUgdGhhdCBubyBjbGFzcyBkaXJlY3RpdmVzIGFyZSB1c2VkIGluXG4gICAqIHRoZSBhcHBsaWNhdGlvbiAoaW5jbHVkaW5nIGFueSAzcmQgcGFydHkgZGlyZWN0aXZlcykuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBgZmFsc2VgIGlmIHRoZSBjb21waWxlciBtYXkgaWdub3JlIGRpcmVjdGl2ZXMgb24gZWxlbWVudCBjbGFzc2VzXG4gICAqIEByZXR1cm5zIHtib29sZWFufG9iamVjdH0gdGhlIGN1cnJlbnQgdmFsdWUgKG9yIGB0aGlzYCBpZiBjYWxsZWQgYXMgYSBzZXR0ZXIgZm9yIGNoYWluaW5nKVxuICAgKi9cbiAgdGhpcy5jc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZENvbmZpZyA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkQ29uZmlnO1xuICB9O1xuXG4gIHRoaXMuJGdldCA9IFtcbiAgICAgICAgICAgICckaW5qZWN0b3InLCAnJGludGVycG9sYXRlJywgJyRleGNlcHRpb25IYW5kbGVyJywgJyR0ZW1wbGF0ZVJlcXVlc3QnLCAnJHBhcnNlJyxcbiAgICAgICAgICAgICckY29udHJvbGxlcicsICckcm9vdFNjb3BlJywgJyRzY2UnLCAnJGFuaW1hdGUnLFxuICAgIGZ1bmN0aW9uKCRpbmplY3RvciwgICAkaW50ZXJwb2xhdGUsICAgJGV4Y2VwdGlvbkhhbmRsZXIsICAgJHRlbXBsYXRlUmVxdWVzdCwgICAkcGFyc2UsXG4gICAgICAgICAgICAgJGNvbnRyb2xsZXIsICAgJHJvb3RTY29wZSwgICAkc2NlLCAgICRhbmltYXRlKSB7XG5cbiAgICB2YXIgU0lNUExFX0FUVFJfTkFNRSA9IC9eXFx3LztcbiAgICB2YXIgc3BlY2lhbEF0dHJIb2xkZXIgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cblxuICAgIHZhciBjb21tZW50RGlyZWN0aXZlc0VuYWJsZWQgPSBjb21tZW50RGlyZWN0aXZlc0VuYWJsZWRDb25maWc7XG4gICAgdmFyIGNzc0NsYXNzRGlyZWN0aXZlc0VuYWJsZWQgPSBjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkQ29uZmlnO1xuXG5cbiAgICB2YXIgb25DaGFuZ2VzVHRsID0gVFRMO1xuICAgIC8vIFRoZSBvbkNoYW5nZXMgaG9va3Mgc2hvdWxkIGFsbCBiZSBydW4gdG9nZXRoZXIgaW4gYSBzaW5nbGUgZGlnZXN0XG4gICAgLy8gV2hlbiBjaGFuZ2VzIG9jY3VyLCB0aGUgY2FsbCB0byB0cmlnZ2VyIHRoZWlyIGhvb2tzIHdpbGwgYmUgYWRkZWQgdG8gdGhpcyBxdWV1ZVxuICAgIHZhciBvbkNoYW5nZXNRdWV1ZTtcblxuICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGluIGEgJCRwb3N0RGlnZXN0IHRvIHRyaWdnZXIgYWxsIHRoZSBvbkNoYW5nZXMgaG9va3MgaW4gYSBzaW5nbGUgZGlnZXN0XG4gICAgZnVuY3Rpb24gZmx1c2hPbkNoYW5nZXNRdWV1ZSgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghKC0tb25DaGFuZ2VzVHRsKSkge1xuICAgICAgICAgIC8vIFdlIGhhdmUgaGl0IHRoZSBUVEwgbGltaXQgc28gcmVzZXQgZXZlcnl0aGluZ1xuICAgICAgICAgIG9uQ2hhbmdlc1F1ZXVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdpbmZjaG5nJywgJ3swfSAkb25DaGFuZ2VzKCkgaXRlcmF0aW9ucyByZWFjaGVkLiBBYm9ydGluZyFcXG4nLCBUVEwpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIG11c3QgcnVuIHRoaXMgaG9vayBpbiBhbiBhcHBseSBzaW5jZSB0aGUgJCRwb3N0RGlnZXN0IHJ1bnMgb3V0c2lkZSBhcHBseVxuICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBvbkNoYW5nZXNRdWV1ZS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBvbkNoYW5nZXNRdWV1ZVtpXSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHF1ZXVlIHRvIHRyaWdnZXIgYSBuZXcgc2NoZWR1bGUgbmV4dCB0aW1lIHRoZXJlIGlzIGEgY2hhbmdlXG4gICAgICAgICAgb25DaGFuZ2VzUXVldWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgb25DaGFuZ2VzVHRsKys7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBBdHRyaWJ1dGVzKGVsZW1lbnQsIGF0dHJpYnV0ZXNUb0NvcHkpIHtcbiAgICAgIGlmIChhdHRyaWJ1dGVzVG9Db3B5KSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlc1RvQ29weSk7XG4gICAgICAgIHZhciBpLCBsLCBrZXk7XG5cbiAgICAgICAgZm9yIChpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICB0aGlzW2tleV0gPSBhdHRyaWJ1dGVzVG9Db3B5W2tleV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuJGF0dHIgPSB7fTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kJGVsZW1lbnQgPSBlbGVtZW50O1xuICAgIH1cblxuICAgIEF0dHJpYnV0ZXMucHJvdG90eXBlID0ge1xuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkbm9ybWFsaXplXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQ29udmVydHMgYW4gYXR0cmlidXRlIG5hbWUgKGUuZy4gZGFzaC9jb2xvbi91bmRlcnNjb3JlLWRlbGltaXRlZCBzdHJpbmcsIG9wdGlvbmFsbHkgcHJlZml4ZWQgd2l0aCBgeC1gIG9yXG4gICAgICAgKiBgZGF0YS1gKSB0byBpdHMgbm9ybWFsaXplZCwgY2FtZWxDYXNlIGZvcm0uXG4gICAgICAgKlxuICAgICAgICogQWxzbyB0aGVyZSBpcyBzcGVjaWFsIGNhc2UgZm9yIE1veiBwcmVmaXggc3RhcnRpbmcgd2l0aCB1cHBlciBjYXNlIGxldHRlci5cbiAgICAgICAqXG4gICAgICAgKiBGb3IgZnVydGhlciBpbmZvcm1hdGlvbiBjaGVjayBvdXQgdGhlIGd1aWRlIG9uIHtAbGluayBndWlkZS9kaXJlY3RpdmUjbWF0Y2hpbmctZGlyZWN0aXZlcyBNYXRjaGluZyBEaXJlY3RpdmVzfVxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXG4gICAgICAgKi9cbiAgICAgICRub3JtYWxpemU6IGRpcmVjdGl2ZU5vcm1hbGl6ZSxcblxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRhZGRDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEFkZHMgdGhlIENTUyBjbGFzcyB2YWx1ZSBzcGVjaWZpZWQgYnkgdGhlIGNsYXNzVmFsIHBhcmFtZXRlciB0byB0aGUgZWxlbWVudC4gSWYgYW5pbWF0aW9uc1xuICAgICAgICogYXJlIGVuYWJsZWQgdGhlbiBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQgZm9yIHRoZSBjbGFzcyBhZGRpdGlvbi5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NWYWwgVGhlIGNsYXNzTmFtZSB2YWx1ZSB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAqL1xuICAgICAgJGFkZENsYXNzOiBmdW5jdGlvbihjbGFzc1ZhbCkge1xuICAgICAgICBpZiAoY2xhc3NWYWwgJiYgY2xhc3NWYWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LCBjbGFzc1ZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJHJlbW92ZUNsYXNzXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmVtb3ZlcyB0aGUgQ1NTIGNsYXNzIHZhbHVlIHNwZWNpZmllZCBieSB0aGUgY2xhc3NWYWwgcGFyYW1ldGVyIGZyb20gdGhlIGVsZW1lbnQuIElmXG4gICAgICAgKiBhbmltYXRpb25zIGFyZSBlbmFibGVkIHRoZW4gYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkIGZvciB0aGUgY2xhc3MgcmVtb3ZhbC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NWYWwgVGhlIGNsYXNzTmFtZSB2YWx1ZSB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XG4gICAgICAgKi9cbiAgICAgICRyZW1vdmVDbGFzczogZnVuY3Rpb24oY2xhc3NWYWwpIHtcbiAgICAgICAgaWYgKGNsYXNzVmFsICYmIGNsYXNzVmFsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCwgY2xhc3NWYWwpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyR1cGRhdGVDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEFkZHMgYW5kIHJlbW92ZXMgdGhlIGFwcHJvcHJpYXRlIENTUyBjbGFzcyB2YWx1ZXMgdG8gdGhlIGVsZW1lbnQgYmFzZWQgb24gdGhlIGRpZmZlcmVuY2VcbiAgICAgICAqIGJldHdlZW4gdGhlIG5ldyBhbmQgb2xkIENTUyBjbGFzcyB2YWx1ZXMgKHNwZWNpZmllZCBhcyBuZXdDbGFzc2VzIGFuZCBvbGRDbGFzc2VzKS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3Q2xhc3NlcyBUaGUgY3VycmVudCBDU1MgY2xhc3NOYW1lIHZhbHVlXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gb2xkQ2xhc3NlcyBUaGUgZm9ybWVyIENTUyBjbGFzc05hbWUgdmFsdWVcbiAgICAgICAqL1xuICAgICAgJHVwZGF0ZUNsYXNzOiBmdW5jdGlvbihuZXdDbGFzc2VzLCBvbGRDbGFzc2VzKSB7XG4gICAgICAgIHZhciB0b0FkZCA9IHRva2VuRGlmZmVyZW5jZShuZXdDbGFzc2VzLCBvbGRDbGFzc2VzKTtcbiAgICAgICAgaWYgKHRvQWRkICYmIHRvQWRkLmxlbmd0aCkge1xuICAgICAgICAgICRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LCB0b0FkZCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG9SZW1vdmUgPSB0b2tlbkRpZmZlcmVuY2Uob2xkQ2xhc3NlcywgbmV3Q2xhc3Nlcyk7XG4gICAgICAgIGlmICh0b1JlbW92ZSAmJiB0b1JlbW92ZS5sZW5ndGgpIHtcbiAgICAgICAgICAkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCwgdG9SZW1vdmUpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIFNldCBhIG5vcm1hbGl6ZWQgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50IGluIGEgd2F5IHN1Y2ggdGhhdCBhbGwgZGlyZWN0aXZlc1xuICAgICAgICogY2FuIHNoYXJlIHRoZSBhdHRyaWJ1dGUuIFRoaXMgZnVuY3Rpb24gcHJvcGVybHkgaGFuZGxlcyBib29sZWFuIGF0dHJpYnV0ZXMuXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IE5vcm1hbGl6ZWQga2V5LiAoaWUgbmdBdHRyaWJ1dGUpXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ3xib29sZWFufSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LiBJZiBgbnVsbGAgYXR0cmlidXRlIHdpbGwgYmUgZGVsZXRlZC5cbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHdyaXRlQXR0ciBJZiBmYWxzZSwgZG9lcyBub3Qgd3JpdGUgdGhlIHZhbHVlIHRvIERPTSBlbGVtZW50IGF0dHJpYnV0ZS5cbiAgICAgICAqICAgICBEZWZhdWx0cyB0byB0cnVlLlxuICAgICAgICogQHBhcmFtIHtzdHJpbmc9fSBhdHRyTmFtZSBPcHRpb25hbCBub25lIG5vcm1hbGl6ZWQgbmFtZS4gRGVmYXVsdHMgdG8ga2V5LlxuICAgICAgICovXG4gICAgICAkc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlLCB3cml0ZUF0dHIsIGF0dHJOYW1lKSB7XG4gICAgICAgIC8vIFRPRE86IGRlY2lkZSB3aGV0aGVyIG9yIG5vdCB0byB0aHJvdyBhbiBlcnJvciBpZiBcImNsYXNzXCJcbiAgICAgICAgLy8gaXMgc2V0IHRocm91Z2ggdGhpcyBmdW5jdGlvbiBzaW5jZSBpdCBtYXkgY2F1c2UgJHVwZGF0ZUNsYXNzIHRvXG4gICAgICAgIC8vIGJlY29tZSB1bnN0YWJsZS5cblxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuJCRlbGVtZW50WzBdLFxuICAgICAgICAgICAgYm9vbGVhbktleSA9IGdldEJvb2xlYW5BdHRyTmFtZShub2RlLCBrZXkpLFxuICAgICAgICAgICAgYWxpYXNlZEtleSA9IGdldEFsaWFzZWRBdHRyTmFtZShrZXkpLFxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBrZXksXG4gICAgICAgICAgICBub2RlTmFtZTtcblxuICAgICAgICBpZiAoYm9vbGVhbktleSkge1xuICAgICAgICAgIHRoaXMuJCRlbGVtZW50LnByb3Aoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgYXR0ck5hbWUgPSBib29sZWFuS2V5O1xuICAgICAgICB9IGVsc2UgaWYgKGFsaWFzZWRLZXkpIHtcbiAgICAgICAgICB0aGlzW2FsaWFzZWRLZXldID0gdmFsdWU7XG4gICAgICAgICAgb2JzZXJ2ZXIgPSBhbGlhc2VkS2V5O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG5cbiAgICAgICAgLy8gdHJhbnNsYXRlIG5vcm1hbGl6ZWQga2V5IHRvIGFjdHVhbCBrZXlcbiAgICAgICAgaWYgKGF0dHJOYW1lKSB7XG4gICAgICAgICAgdGhpcy4kYXR0cltrZXldID0gYXR0ck5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXR0ck5hbWUgPSB0aGlzLiRhdHRyW2tleV07XG4gICAgICAgICAgaWYgKCFhdHRyTmFtZSkge1xuICAgICAgICAgICAgdGhpcy4kYXR0cltrZXldID0gYXR0ck5hbWUgPSBzbmFrZV9jYXNlKGtleSwgJy0nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBub2RlTmFtZSA9IG5vZGVOYW1lXyh0aGlzLiQkZWxlbWVudCk7XG5cbiAgICAgICAgLy8gU2FuaXRpemUgaW1nW3NyY3NldF0gdmFsdWVzLlxuICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdpbWcnICYmIGtleSA9PT0gJ3NyY3NldCcgJiYgdmFsdWUpIHtcbiAgICAgICAgICBpZiAoIWlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3NyY3NldCcsICdDYW5cXCd0IHBhc3MgdHJ1c3RlZCB2YWx1ZXMgdG8gYCRzZXQoXFwnc3Jjc2V0XFwnLCB2YWx1ZSlgOiBcInswfVwiJywgdmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU3VjaCB2YWx1ZXMgYXJlIGEgYml0IHRvbyBjb21wbGV4IHRvIGhhbmRsZSBhdXRvbWF0aWNhbGx5IGluc2lkZSAkc2NlLlxuICAgICAgICAgIC8vIEluc3RlYWQsIHdlIHNhbml0aXplIGVhY2ggb2YgdGhlIFVSSXMgaW5kaXZpZHVhbGx5LCB3aGljaCB3b3JrcywgZXZlbiBkeW5hbWljYWxseS5cblxuICAgICAgICAgIC8vIEl0J3Mgbm90IHBvc3NpYmxlIHRvIHdvcmsgYXJvdW5kIHRoaXMgdXNpbmcgYCRzY2UudHJ1c3RBc01lZGlhVXJsYC5cbiAgICAgICAgICAvLyBJZiB5b3Ugd2FudCB0byBwcm9ncmFtbWF0aWNhbGx5IHNldCBleHBsaWNpdGx5IHRydXN0ZWQgdW5zYWZlIFVSTHMsIHlvdSBzaG91bGQgdXNlXG4gICAgICAgICAgLy8gYCRzY2UudHJ1c3RBc0h0bWxgIG9uIHRoZSB3aG9sZSBgaW1nYCB0YWcgYW5kIGluamVjdCBpdCBpbnRvIHRoZSBET00gdXNpbmcgdGhlXG4gICAgICAgICAgLy8gYG5nLWJpbmQtaHRtbGAgZGlyZWN0aXZlLlxuXG4gICAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuXG4gICAgICAgICAgLy8gZmlyc3QgY2hlY2sgaWYgdGhlcmUgYXJlIHNwYWNlcyBiZWNhdXNlIGl0J3Mgbm90IHRoZSBzYW1lIHBhdHRlcm5cbiAgICAgICAgICB2YXIgdHJpbW1lZFNyY3NldCA9IHRyaW0odmFsdWUpO1xuICAgICAgICAgIC8vICAgICAgICAgICAgICAgICggICA5OTl4ICAgLHwgICA5OTl3ICAgLHwgICAsfCwgICApXG4gICAgICAgICAgdmFyIHNyY1BhdHRlcm4gPSAvKFxccytcXGQreFxccyosfFxccytcXGQrd1xccyosfFxccyssfCxcXHMrKS87XG4gICAgICAgICAgdmFyIHBhdHRlcm4gPSAvXFxzLy50ZXN0KHRyaW1tZWRTcmNzZXQpID8gc3JjUGF0dGVybiA6IC8oLCkvO1xuXG4gICAgICAgICAgLy8gc3BsaXQgc3Jjc2V0IGludG8gdHVwbGUgb2YgdXJpIGFuZCBkZXNjcmlwdG9yIGV4Y2VwdCBmb3IgdGhlIGxhc3QgaXRlbVxuICAgICAgICAgIHZhciByYXdVcmlzID0gdHJpbW1lZFNyY3NldC5zcGxpdChwYXR0ZXJuKTtcblxuICAgICAgICAgIC8vIGZvciBlYWNoIHR1cGxlc1xuICAgICAgICAgIHZhciBuYnJVcmlzV2l0aDJwYXJ0cyA9IE1hdGguZmxvb3IocmF3VXJpcy5sZW5ndGggLyAyKTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5iclVyaXNXaXRoMnBhcnRzOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpbm5lcklkeCA9IGkgKiAyO1xuICAgICAgICAgICAgLy8gc2FuaXRpemUgdGhlIHVyaVxuICAgICAgICAgICAgcmVzdWx0ICs9ICRzY2UuZ2V0VHJ1c3RlZE1lZGlhVXJsKHRyaW0ocmF3VXJpc1tpbm5lcklkeF0pKTtcbiAgICAgICAgICAgIC8vIGFkZCB0aGUgZGVzY3JpcHRvclxuICAgICAgICAgICAgcmVzdWx0ICs9ICcgJyArIHRyaW0ocmF3VXJpc1tpbm5lcklkeCArIDFdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBzcGxpdCB0aGUgbGFzdCBpdGVtIGludG8gdXJpIGFuZCBkZXNjcmlwdG9yXG4gICAgICAgICAgdmFyIGxhc3RUdXBsZSA9IHRyaW0ocmF3VXJpc1tpICogMl0pLnNwbGl0KC9cXHMvKTtcblxuICAgICAgICAgIC8vIHNhbml0aXplIHRoZSBsYXN0IHVyaVxuICAgICAgICAgIHJlc3VsdCArPSAkc2NlLmdldFRydXN0ZWRNZWRpYVVybCh0cmltKGxhc3RUdXBsZVswXSkpO1xuXG4gICAgICAgICAgLy8gYW5kIGFkZCB0aGUgbGFzdCBkZXNjcmlwdG9yIGlmIGFueVxuICAgICAgICAgIGlmIChsYXN0VHVwbGUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gKCcgJyArIHRyaW0obGFzdFR1cGxlWzFdKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlID0gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdyaXRlQXR0ciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLiQkZWxlbWVudC5yZW1vdmVBdHRyKGF0dHJOYW1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKFNJTVBMRV9BVFRSX05BTUUudGVzdChhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgdGhpcy4kJGVsZW1lbnQuYXR0cihhdHRyTmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0U3BlY2lhbEF0dHIodGhpcy4kJGVsZW1lbnRbMF0sIGF0dHJOYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmlyZSBvYnNlcnZlcnNcbiAgICAgICAgdmFyICQkb2JzZXJ2ZXJzID0gdGhpcy4kJG9ic2VydmVycztcbiAgICAgICAgaWYgKCQkb2JzZXJ2ZXJzKSB7XG4gICAgICAgICAgZm9yRWFjaCgkJG9ic2VydmVyc1tvYnNlcnZlcl0sIGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBmbih2YWx1ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJG9ic2VydmVcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBPYnNlcnZlcyBhbiBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBvYnNlcnZlciBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgb25jZSBkdXJpbmcgdGhlIG5leHQgYCRkaWdlc3RgIGZvbGxvd2luZ1xuICAgICAgICogY29tcGlsYXRpb24uIFRoZSBvYnNlcnZlciBpcyB0aGVuIGludm9rZWQgd2hlbmV2ZXIgdGhlIGludGVycG9sYXRlZCB2YWx1ZVxuICAgICAgICogY2hhbmdlcy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IE5vcm1hbGl6ZWQga2V5LiAoaWUgbmdBdHRyaWJ1dGUpIC5cbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW50ZXJwb2xhdGVkVmFsdWUpfSBmbiBGdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW5ldmVyXG4gICAgICAgICAgICAgICAgdGhlIGludGVycG9sYXRlZCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlIGNoYW5nZXMuXG4gICAgICAgKiAgICAgICAgU2VlIHRoZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiNob3ctdGV4dC1hbmQtYXR0cmlidXRlLWJpbmRpbmdzLXdvcmsgSW50ZXJwb2xhdGlvblxuICAgICAgICogICAgICAgIGd1aWRlfSBmb3IgbW9yZSBpbmZvLlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgdGhpcyBvYnNlcnZlci5cbiAgICAgICAqL1xuICAgICAgJG9ic2VydmU6IGZ1bmN0aW9uKGtleSwgZm4pIHtcbiAgICAgICAgdmFyIGF0dHJzID0gdGhpcyxcbiAgICAgICAgICAgICQkb2JzZXJ2ZXJzID0gKGF0dHJzLiQkb2JzZXJ2ZXJzIHx8IChhdHRycy4kJG9ic2VydmVycyA9IGNyZWF0ZU1hcCgpKSksXG4gICAgICAgICAgICBsaXN0ZW5lcnMgPSAoJCRvYnNlcnZlcnNba2V5XSB8fCAoJCRvYnNlcnZlcnNba2V5XSA9IFtdKSk7XG5cbiAgICAgICAgbGlzdGVuZXJzLnB1c2goZm4pO1xuICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCFsaXN0ZW5lcnMuJCRpbnRlciAmJiBhdHRycy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICFpc1VuZGVmaW5lZChhdHRyc1trZXldKSkge1xuICAgICAgICAgICAgLy8gbm8gb25lIHJlZ2lzdGVyZWQgYXR0cmlidXRlIGludGVycG9sYXRpb24gZnVuY3Rpb24sIHNvIGxldHMgY2FsbCBpdCBtYW51YWxseVxuICAgICAgICAgICAgZm4oYXR0cnNba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgYXJyYXlSZW1vdmUobGlzdGVuZXJzLCBmbik7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNldFNwZWNpYWxBdHRyKGVsZW1lbnQsIGF0dHJOYW1lLCB2YWx1ZSkge1xuICAgICAgLy8gQXR0cmlidXRlcyBuYW1lcyB0aGF0IGRvIG5vdCBzdGFydCB3aXRoIGxldHRlcnMgKHN1Y2ggYXMgYChjbGljaylgKSBjYW5ub3QgYmUgc2V0IHVzaW5nIGBzZXRBdHRyaWJ1dGVgXG4gICAgICAvLyBzbyB3ZSBoYXZlIHRvIGp1bXAgdGhyb3VnaCBzb21lIGhvb3BzIHRvIGdldCBzdWNoIGFuIGF0dHJpYnV0ZVxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9wdWxsLzEzMzE4XG4gICAgICBzcGVjaWFsQXR0ckhvbGRlci5pbm5lckhUTUwgPSAnPHNwYW4gJyArIGF0dHJOYW1lICsgJz4nO1xuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBzcGVjaWFsQXR0ckhvbGRlci5maXJzdENoaWxkLmF0dHJpYnV0ZXM7XG4gICAgICB2YXIgYXR0cmlidXRlID0gYXR0cmlidXRlc1swXTtcbiAgICAgIC8vIFdlIGhhdmUgdG8gcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgZnJvbSBpdHMgY29udGFpbmVyIGVsZW1lbnQgYmVmb3JlIHdlIGNhbiBhZGQgaXQgdG8gdGhlIGRlc3RpbmF0aW9uIGVsZW1lbnRcbiAgICAgIGF0dHJpYnV0ZXMucmVtb3ZlTmFtZWRJdGVtKGF0dHJpYnV0ZS5uYW1lKTtcbiAgICAgIGF0dHJpYnV0ZS52YWx1ZSA9IHZhbHVlO1xuICAgICAgZWxlbWVudC5hdHRyaWJ1dGVzLnNldE5hbWVkSXRlbShhdHRyaWJ1dGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICB0cnkge1xuICAgICAgICAkZWxlbWVudC5hZGRDbGFzcyhjbGFzc05hbWUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpZ25vcmUsIHNpbmNlIGl0IG1lYW5zIHRoYXQgd2UgYXJlIHRyeWluZyB0byBzZXQgY2xhc3Mgb25cbiAgICAgICAgLy8gU1ZHIGVsZW1lbnQsIHdoZXJlIGNsYXNzIG5hbWUgaXMgcmVhZC1vbmx5LlxuICAgICAgfVxuICAgIH1cblxuXG4gICAgdmFyIHN0YXJ0U3ltYm9sID0gJGludGVycG9sYXRlLnN0YXJ0U3ltYm9sKCksXG4gICAgICAgIGVuZFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2woKSxcbiAgICAgICAgZGVub3JtYWxpemVUZW1wbGF0ZSA9IChzdGFydFN5bWJvbCA9PT0gJ3t7JyAmJiBlbmRTeW1ib2wgID09PSAnfX0nKVxuICAgICAgICAgICAgPyBpZGVudGl0eVxuICAgICAgICAgICAgOiBmdW5jdGlvbiBkZW5vcm1hbGl6ZVRlbXBsYXRlKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHtcXHsvZywgc3RhcnRTeW1ib2wpLnJlcGxhY2UoL319L2csIGVuZFN5bWJvbCk7XG4gICAgICAgIH0sXG4gICAgICAgIE5HX0FUVFJfQklORElORyA9IC9ebmdBdHRyW0EtWl0vO1xuICAgIHZhciBNVUxUSV9FTEVNRU5UX0RJUl9SRSA9IC9eKC4rKVN0YXJ0JC87XG5cbiAgICBjb21waWxlLiQkYWRkQmluZGluZ0luZm8gPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRCaW5kaW5nSW5mbygkZWxlbWVudCwgYmluZGluZykge1xuICAgICAgdmFyIGJpbmRpbmdzID0gJGVsZW1lbnQuZGF0YSgnJGJpbmRpbmcnKSB8fCBbXTtcblxuICAgICAgaWYgKGlzQXJyYXkoYmluZGluZykpIHtcbiAgICAgICAgYmluZGluZ3MgPSBiaW5kaW5ncy5jb25jYXQoYmluZGluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5kaW5ncy5wdXNoKGJpbmRpbmcpO1xuICAgICAgfVxuXG4gICAgICAkZWxlbWVudC5kYXRhKCckYmluZGluZycsIGJpbmRpbmdzKTtcbiAgICB9IDogbm9vcDtcblxuICAgIGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3MgPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRCaW5kaW5nQ2xhc3MoJGVsZW1lbnQpIHtcbiAgICAgIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgJ25nLWJpbmRpbmcnKTtcbiAgICB9IDogbm9vcDtcblxuICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8gPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRTY29wZUluZm8oJGVsZW1lbnQsIHNjb3BlLCBpc29sYXRlZCwgbm9UZW1wbGF0ZSkge1xuICAgICAgdmFyIGRhdGFOYW1lID0gaXNvbGF0ZWQgPyAobm9UZW1wbGF0ZSA/ICckaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZScgOiAnJGlzb2xhdGVTY29wZScpIDogJyRzY29wZSc7XG4gICAgICAkZWxlbWVudC5kYXRhKGRhdGFOYW1lLCBzY29wZSk7XG4gICAgfSA6IG5vb3A7XG5cbiAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcyA9IGRlYnVnSW5mb0VuYWJsZWQgPyBmdW5jdGlvbiAkJGFkZFNjb3BlQ2xhc3MoJGVsZW1lbnQsIGlzb2xhdGVkKSB7XG4gICAgICBzYWZlQWRkQ2xhc3MoJGVsZW1lbnQsIGlzb2xhdGVkID8gJ25nLWlzb2xhdGUtc2NvcGUnIDogJ25nLXNjb3BlJyk7XG4gICAgfSA6IG5vb3A7XG5cbiAgICBjb21waWxlLiQkY3JlYXRlQ29tbWVudCA9IGZ1bmN0aW9uKGRpcmVjdGl2ZU5hbWUsIGNvbW1lbnQpIHtcbiAgICAgIHZhciBjb250ZW50ID0gJyc7XG4gICAgICBpZiAoZGVidWdJbmZvRW5hYmxlZCkge1xuICAgICAgICBjb250ZW50ID0gJyAnICsgKGRpcmVjdGl2ZU5hbWUgfHwgJycpICsgJzogJztcbiAgICAgICAgaWYgKGNvbW1lbnQpIGNvbnRlbnQgKz0gY29tbWVudCArICcgJztcbiAgICAgIH1cbiAgICAgIHJldHVybiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGNvbXBpbGU7XG5cbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICBmdW5jdGlvbiBjb21waWxlKCRjb21waWxlTm9kZXMsIHRyYW5zY2x1ZGVGbiwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcbiAgICAgIGlmICghKCRjb21waWxlTm9kZXMgaW5zdGFuY2VvZiBqcUxpdGUpKSB7XG4gICAgICAgIC8vIGpxdWVyeSBhbHdheXMgcmV3cmFwcywgd2hlcmVhcyB3ZSBuZWVkIHRvIHByZXNlcnZlIHRoZSBvcmlnaW5hbCBzZWxlY3RvciBzbyB0aGF0IHdlIGNhblxuICAgICAgICAvLyBtb2RpZnkgaXQuXG4gICAgICAgICRjb21waWxlTm9kZXMgPSBqcUxpdGUoJGNvbXBpbGVOb2Rlcyk7XG4gICAgICB9XG4gICAgICB2YXIgY29tcG9zaXRlTGlua0ZuID1cbiAgICAgICAgICAgICAgY29tcGlsZU5vZGVzKCRjb21waWxlTm9kZXMsIHRyYW5zY2x1ZGVGbiwgJGNvbXBpbGVOb2RlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpO1xuICAgICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MoJGNvbXBpbGVOb2Rlcyk7XG4gICAgICB2YXIgbmFtZXNwYWNlID0gbnVsbDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBwdWJsaWNMaW5rRm4oc2NvcGUsIGNsb25lQ29ubmVjdEZuLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghJGNvbXBpbGVOb2Rlcykge1xuICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdtdWx0aWxpbmsnLCAnVGhpcyBlbGVtZW50IGhhcyBhbHJlYWR5IGJlZW4gbGlua2VkLicpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydEFyZyhzY29wZSwgJ3Njb3BlJyk7XG5cbiAgICAgICAgaWYgKHByZXZpb3VzQ29tcGlsZUNvbnRleHQgJiYgcHJldmlvdXNDb21waWxlQ29udGV4dC5uZWVkc05ld1Njb3BlKSB7XG4gICAgICAgICAgLy8gQSBwYXJlbnQgZGlyZWN0aXZlIGRpZCBhIHJlcGxhY2UgYW5kIGEgZGlyZWN0aXZlIG9uIHRoaXMgZWxlbWVudCBhc2tlZFxuICAgICAgICAgIC8vIGZvciB0cmFuc2NsdXNpb24sIHdoaWNoIGNhdXNlZCB1cyB0byBsb3NlIGEgbGF5ZXIgb2YgZWxlbWVudCBvbiB3aGljaFxuICAgICAgICAgIC8vIHdlIGNvdWxkIGhvbGQgdGhlIG5ldyB0cmFuc2NsdXNpb24gc2NvcGUsIHNvIHdlIHdpbGwgY3JlYXRlIGl0IG1hbnVhbGx5XG4gICAgICAgICAgLy8gaGVyZS5cbiAgICAgICAgICBzY29wZSA9IHNjb3BlLiRwYXJlbnQuJG5ldygpO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiA9IG9wdGlvbnMucGFyZW50Qm91bmRUcmFuc2NsdWRlRm4sXG4gICAgICAgICAgdHJhbnNjbHVkZUNvbnRyb2xsZXJzID0gb3B0aW9ucy50cmFuc2NsdWRlQ29udHJvbGxlcnMsXG4gICAgICAgICAgZnV0dXJlUGFyZW50RWxlbWVudCA9IG9wdGlvbnMuZnV0dXJlUGFyZW50RWxlbWVudDtcblxuICAgICAgICAvLyBXaGVuIGBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbmAgaXMgcGFzc2VkLCBpdCBpcyBhXG4gICAgICAgIC8vIGBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZWAgZnVuY3Rpb24gKGl0IHdhcyBwcmV2aW91c2x5IHBhc3NlZFxuICAgICAgICAvLyBhcyBgdHJhbnNjbHVkZWAgdG8gZGlyZWN0aXZlLmxpbmspIHNvIHdlIG11c3QgdW53cmFwIGl0IHRvIGdldFxuICAgICAgICAvLyBpdHMgYGJvdW5kVHJhbnNjbHVkZUZuYFxuICAgICAgICBpZiAocGFyZW50Qm91bmRUcmFuc2NsdWRlRm4gJiYgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4uJCRib3VuZFRyYW5zY2x1ZGUpIHtcbiAgICAgICAgICBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiA9IHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuLiQkYm91bmRUcmFuc2NsdWRlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFuYW1lc3BhY2UpIHtcbiAgICAgICAgICBuYW1lc3BhY2UgPSBkZXRlY3ROYW1lc3BhY2VGb3JDaGlsZEVsZW1lbnRzKGZ1dHVyZVBhcmVudEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciAkbGlua05vZGU7XG4gICAgICAgIGlmIChuYW1lc3BhY2UgIT09ICdodG1sJykge1xuICAgICAgICAgIC8vIFdoZW4gdXNpbmcgYSBkaXJlY3RpdmUgd2l0aCByZXBsYWNlOnRydWUgYW5kIHRlbXBsYXRlVXJsIHRoZSAkY29tcGlsZU5vZGVzXG4gICAgICAgICAgLy8gKG9yIGEgY2hpbGQgZWxlbWVudCBpbnNpZGUgb2YgdGhlbSlcbiAgICAgICAgICAvLyBtaWdodCBjaGFuZ2UsIHNvIHdlIG5lZWQgdG8gcmVjcmVhdGUgdGhlIG5hbWVzcGFjZSBhZGFwdGVkIGNvbXBpbGVOb2Rlc1xuICAgICAgICAgIC8vIGZvciBjYWxsIHRvIHRoZSBsaW5rIGZ1bmN0aW9uLlxuICAgICAgICAgIC8vIE5vdGU6IFRoaXMgd2lsbCBhbHJlYWR5IGNsb25lIHRoZSBub2Rlcy4uLlxuICAgICAgICAgICRsaW5rTm9kZSA9IGpxTGl0ZShcbiAgICAgICAgICAgIHdyYXBUZW1wbGF0ZShuYW1lc3BhY2UsIGpxTGl0ZSgnPGRpdj48L2Rpdj4nKS5hcHBlbmQoJGNvbXBpbGVOb2RlcykuaHRtbCgpKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2xvbmVDb25uZWN0Rm4pIHtcbiAgICAgICAgICAvLyBpbXBvcnRhbnQhITogd2UgbXVzdCBjYWxsIG91ciBqcUxpdGUuY2xvbmUoKSBzaW5jZSB0aGUgalF1ZXJ5IG9uZSBpcyB0cnlpbmcgdG8gYmUgc21hcnRcbiAgICAgICAgICAvLyBhbmQgc29tZXRpbWVzIGNoYW5nZXMgdGhlIHN0cnVjdHVyZSBvZiB0aGUgRE9NLlxuICAgICAgICAgICRsaW5rTm9kZSA9IEpRTGl0ZVByb3RvdHlwZS5jbG9uZS5jYWxsKCRjb21waWxlTm9kZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRsaW5rTm9kZSA9ICRjb21waWxlTm9kZXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhbnNjbHVkZUNvbnRyb2xsZXJzKSB7XG4gICAgICAgICAgZm9yICh2YXIgY29udHJvbGxlck5hbWUgaW4gdHJhbnNjbHVkZUNvbnRyb2xsZXJzKSB7XG4gICAgICAgICAgICAkbGlua05vZGUuZGF0YSgnJCcgKyBjb250cm9sbGVyTmFtZSArICdDb250cm9sbGVyJywgdHJhbnNjbHVkZUNvbnRyb2xsZXJzW2NvbnRyb2xsZXJOYW1lXS5pbnN0YW5jZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlSW5mbygkbGlua05vZGUsIHNjb3BlKTtcblxuICAgICAgICBpZiAoY2xvbmVDb25uZWN0Rm4pIGNsb25lQ29ubmVjdEZuKCRsaW5rTm9kZSwgc2NvcGUpO1xuICAgICAgICBpZiAoY29tcG9zaXRlTGlua0ZuKSBjb21wb3NpdGVMaW5rRm4oc2NvcGUsICRsaW5rTm9kZSwgJGxpbmtOb2RlLCBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgaWYgKCFjbG9uZUNvbm5lY3RGbikge1xuICAgICAgICAgICRjb21waWxlTm9kZXMgPSBjb21wb3NpdGVMaW5rRm4gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAkbGlua05vZGU7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRldGVjdE5hbWVzcGFjZUZvckNoaWxkRWxlbWVudHMocGFyZW50RWxlbWVudCkge1xuICAgICAgLy8gVE9ETzogTWFrZSB0aGlzIGRldGVjdCBNYXRoTUwgYXMgd2VsbC4uLlxuICAgICAgdmFyIG5vZGUgPSBwYXJlbnRFbGVtZW50ICYmIHBhcmVudEVsZW1lbnRbMF07XG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgcmV0dXJuICdodG1sJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBub2RlTmFtZV8obm9kZSkgIT09ICdmb3JlaWdub2JqZWN0JyAmJiB0b1N0cmluZy5jYWxsKG5vZGUpLm1hdGNoKC9TVkcvKSA/ICdzdmcnIDogJ2h0bWwnO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBpbGUgZnVuY3Rpb24gbWF0Y2hlcyBlYWNoIG5vZGUgaW4gbm9kZUxpc3QgYWdhaW5zdCB0aGUgZGlyZWN0aXZlcy4gT25jZSBhbGwgZGlyZWN0aXZlc1xuICAgICAqIGZvciBhIHBhcnRpY3VsYXIgbm9kZSBhcmUgY29sbGVjdGVkIHRoZWlyIGNvbXBpbGUgZnVuY3Rpb25zIGFyZSBleGVjdXRlZC4gVGhlIGNvbXBpbGVcbiAgICAgKiBmdW5jdGlvbnMgcmV0dXJuIHZhbHVlcyAtIHRoZSBsaW5raW5nIGZ1bmN0aW9ucyAtIGFyZSBjb21iaW5lZCBpbnRvIGEgY29tcG9zaXRlIGxpbmtpbmdcbiAgICAgKiBmdW5jdGlvbiwgd2hpY2ggaXMgdGhlIGEgbGlua2luZyBmdW5jdGlvbiBmb3IgdGhlIG5vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGVMaXN0fSBub2RlTGlzdCBhbiBhcnJheSBvZiBub2RlcyBvciBOb2RlTGlzdCB0byBjb21waWxlXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihhbmd1bGFyLlNjb3BlLCBjbG9uZUF0dGFjaEZuPSl9IHRyYW5zY2x1ZGVGbiBBIGxpbmtpbmcgZnVuY3Rpb24sIHdoZXJlIHRoZVxuICAgICAqICAgICAgICBzY29wZSBhcmd1bWVudCBpcyBhdXRvLWdlbmVyYXRlZCB0byB0aGUgbmV3IGNoaWxkIG9mIHRoZSB0cmFuc2NsdWRlZCBwYXJlbnQgc2NvcGUuXG4gICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gJHJvb3RFbGVtZW50IElmIHRoZSBub2RlTGlzdCBpcyB0aGUgcm9vdCBvZiB0aGUgY29tcGlsYXRpb24gdHJlZSB0aGVuXG4gICAgICogICAgICAgIHRoZSByb290RWxlbWVudCBtdXN0IGJlIHNldCB0aGUganFMaXRlIGNvbGxlY3Rpb24gb2YgdGhlIGNvbXBpbGUgcm9vdC4gVGhpcyBpc1xuICAgICAqICAgICAgICBuZWVkZWQgc28gdGhhdCB0aGUganFMaXRlIGNvbGxlY3Rpb24gaXRlbXMgY2FuIGJlIHJlcGxhY2VkIHdpdGggd2lkZ2V0cy5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG1heFByaW9yaXR5IE1heCBkaXJlY3RpdmUgcHJpb3JpdHkuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGNvbXBvc2l0ZSBsaW5raW5nIGZ1bmN0aW9uIG9mIGFsbCBvZiB0aGUgbWF0Y2hlZCBkaXJlY3RpdmVzIG9yIG51bGwuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGlsZU5vZGVzKG5vZGVMaXN0LCB0cmFuc2NsdWRlRm4sICRyb290RWxlbWVudCwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0KSB7XG4gICAgICB2YXIgbGlua0ZucyA9IFtdLFxuICAgICAgICAgIC8vIGBub2RlTGlzdGAgY2FuIGJlIGVpdGhlciBhbiBlbGVtZW50J3MgYC5jaGlsZE5vZGVzYCAobGl2ZSBOb2RlTGlzdClcbiAgICAgICAgICAvLyBvciBhIGpxTGl0ZS9qUXVlcnkgY29sbGVjdGlvbiBvciBhbiBhcnJheVxuICAgICAgICAgIG5vdExpdmVMaXN0ID0gaXNBcnJheShub2RlTGlzdCkgfHwgKG5vZGVMaXN0IGluc3RhbmNlb2YganFMaXRlKSxcbiAgICAgICAgICBhdHRycywgZGlyZWN0aXZlcywgbm9kZUxpbmtGbiwgY2hpbGROb2RlcywgY2hpbGRMaW5rRm4sIGxpbmtGbkZvdW5kLCBub2RlTGlua0ZuRm91bmQ7XG5cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBhdHRycyA9IG5ldyBBdHRyaWJ1dGVzKCk7XG5cbiAgICAgICAgLy8gU3VwcG9ydDogSUUgMTEgb25seVxuICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciAjMTE3ODEgYW5kICMxNDkyNFxuICAgICAgICBpZiAobXNpZSA9PT0gMTEpIHtcbiAgICAgICAgICBtZXJnZUNvbnNlY3V0aXZlVGV4dE5vZGVzKG5vZGVMaXN0LCBpLCBub3RMaXZlTGlzdCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBtdXN0IGFsd2F5cyByZWZlciB0byBgbm9kZUxpc3RbaV1gIGhlcmVhZnRlcixcbiAgICAgICAgLy8gc2luY2UgdGhlIG5vZGVzIGNhbiBiZSByZXBsYWNlZCB1bmRlcm5lYXRoIHVzLlxuICAgICAgICBkaXJlY3RpdmVzID0gY29sbGVjdERpcmVjdGl2ZXMobm9kZUxpc3RbaV0sIFtdLCBhdHRycywgaSA9PT0gMCA/IG1heFByaW9yaXR5IDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlnbm9yZURpcmVjdGl2ZSk7XG5cbiAgICAgICAgbm9kZUxpbmtGbiA9IChkaXJlY3RpdmVzLmxlbmd0aClcbiAgICAgICAgICAgID8gYXBwbHlEaXJlY3RpdmVzVG9Ob2RlKGRpcmVjdGl2ZXMsIG5vZGVMaXN0W2ldLCBhdHRycywgdHJhbnNjbHVkZUZuLCAkcm9vdEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsIFtdLCBbXSwgcHJldmlvdXNDb21waWxlQ29udGV4dClcbiAgICAgICAgICAgIDogbnVsbDtcblxuICAgICAgICBpZiAobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnNjb3BlKSB7XG4gICAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MoYXR0cnMuJCRlbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoaWxkTGlua0ZuID0gKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCB8fFxuICAgICAgICAgICAgICAgICAgICAgICEoY2hpbGROb2RlcyA9IG5vZGVMaXN0W2ldLmNoaWxkTm9kZXMpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgIWNoaWxkTm9kZXMubGVuZ3RoKVxuICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICA6IGNvbXBpbGVOb2RlcyhjaGlsZE5vZGVzLFxuICAgICAgICAgICAgICAgICBub2RlTGlua0ZuID8gKFxuICAgICAgICAgICAgICAgICAgKG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQgfHwgIW5vZGVMaW5rRm4udGVtcGxhdGVPblRoaXNFbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICAgJiYgbm9kZUxpbmtGbi50cmFuc2NsdWRlKSA6IHRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgaWYgKG5vZGVMaW5rRm4gfHwgY2hpbGRMaW5rRm4pIHtcbiAgICAgICAgICBsaW5rRm5zLnB1c2goaSwgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pO1xuICAgICAgICAgIGxpbmtGbkZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICBub2RlTGlua0ZuRm91bmQgPSBub2RlTGlua0ZuRm91bmQgfHwgbm9kZUxpbmtGbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vdXNlIHRoZSBwcmV2aW91cyBjb250ZXh0IG9ubHkgZm9yIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSB2aXJ0dWFsIGdyb3VwXG4gICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyByZXR1cm4gYSBsaW5raW5nIGZ1bmN0aW9uIGlmIHdlIGhhdmUgZm91bmQgYW55dGhpbmcsIG51bGwgb3RoZXJ3aXNlXG4gICAgICByZXR1cm4gbGlua0ZuRm91bmQgPyBjb21wb3NpdGVMaW5rRm4gOiBudWxsO1xuXG4gICAgICBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4oc2NvcGUsIG5vZGVMaXN0LCAkcm9vdEVsZW1lbnQsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICAgIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZSwgY2hpbGRTY29wZSwgaSwgaWksIGlkeCwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbjtcbiAgICAgICAgdmFyIHN0YWJsZU5vZGVMaXN0O1xuXG5cbiAgICAgICAgaWYgKG5vZGVMaW5rRm5Gb3VuZCkge1xuICAgICAgICAgIC8vIGNvcHkgbm9kZUxpc3Qgc28gdGhhdCBpZiBhIG5vZGVMaW5rRm4gcmVtb3ZlcyBvciBhZGRzIGFuIGVsZW1lbnQgYXQgdGhpcyBET00gbGV2ZWwgb3VyXG4gICAgICAgICAgLy8gb2Zmc2V0cyBkb24ndCBnZXQgc2NyZXdlZCB1cFxuICAgICAgICAgIHZhciBub2RlTGlzdExlbmd0aCA9IG5vZGVMaXN0Lmxlbmd0aDtcbiAgICAgICAgICBzdGFibGVOb2RlTGlzdCA9IG5ldyBBcnJheShub2RlTGlzdExlbmd0aCk7XG5cbiAgICAgICAgICAvLyBjcmVhdGUgYSBzcGFyc2UgYXJyYXkgYnkgb25seSBjb3B5aW5nIHRoZSBlbGVtZW50cyB3aGljaCBoYXZlIGEgbGlua0ZuXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxpbmtGbnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgICAgIGlkeCA9IGxpbmtGbnNbaV07XG4gICAgICAgICAgICBzdGFibGVOb2RlTGlzdFtpZHhdID0gbm9kZUxpc3RbaWR4XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhYmxlTm9kZUxpc3QgPSBub2RlTGlzdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gbGlua0Zucy5sZW5ndGg7IGkgPCBpaTspIHtcbiAgICAgICAgICBub2RlID0gc3RhYmxlTm9kZUxpc3RbbGlua0Zuc1tpKytdXTtcbiAgICAgICAgICBub2RlTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuICAgICAgICAgIGNoaWxkTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuXG4gICAgICAgICAgaWYgKG5vZGVMaW5rRm4pIHtcbiAgICAgICAgICAgIGlmIChub2RlTGlua0ZuLnNjb3BlKSB7XG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBzY29wZS4kbmV3KCk7XG4gICAgICAgICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8oanFMaXRlKG5vZGUpLCBjaGlsZFNjb3BlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBzY29wZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IGNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuKFxuICAgICAgICAgICAgICAgICAgc2NvcGUsIG5vZGVMaW5rRm4udHJhbnNjbHVkZSwgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFub2RlTGlua0ZuLnRlbXBsYXRlT25UaGlzRWxlbWVudCAmJiBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbikge1xuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gcGFyZW50Qm91bmRUcmFuc2NsdWRlRm47XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXBhcmVudEJvdW5kVHJhbnNjbHVkZUZuICYmIHRyYW5zY2x1ZGVGbikge1xuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIHRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBub2RlTGlua0ZuKGNoaWxkTGlua0ZuLCBjaGlsZFNjb3BlLCBub2RlLCAkcm9vdEVsZW1lbnQsIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO1xuXG4gICAgICAgICAgfSBlbHNlIGlmIChjaGlsZExpbmtGbikge1xuICAgICAgICAgICAgY2hpbGRMaW5rRm4oc2NvcGUsIG5vZGUuY2hpbGROb2RlcywgdW5kZWZpbmVkLCBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWVyZ2VDb25zZWN1dGl2ZVRleHROb2Rlcyhub2RlTGlzdCwgaWR4LCBub3RMaXZlTGlzdCkge1xuICAgICAgdmFyIG5vZGUgPSBub2RlTGlzdFtpZHhdO1xuICAgICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgIHZhciBzaWJsaW5nO1xuXG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSAhPT0gTk9ERV9UWVBFX1RFWFQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBzaWJsaW5nID0gcGFyZW50ID8gbm9kZS5uZXh0U2libGluZyA6IG5vZGVMaXN0W2lkeCArIDFdO1xuICAgICAgICBpZiAoIXNpYmxpbmcgfHwgc2libGluZy5ub2RlVHlwZSAhPT0gTk9ERV9UWVBFX1RFWFQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUubm9kZVZhbHVlID0gbm9kZS5ub2RlVmFsdWUgKyBzaWJsaW5nLm5vZGVWYWx1ZTtcblxuICAgICAgICBpZiAoc2libGluZy5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgc2libGluZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub3RMaXZlTGlzdCAmJiBzaWJsaW5nID09PSBub2RlTGlzdFtpZHggKyAxXSkge1xuICAgICAgICAgIG5vZGVMaXN0LnNwbGljZShpZHggKyAxLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLCB0cmFuc2NsdWRlRm4sIHByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4pIHtcbiAgICAgIGZ1bmN0aW9uIGJvdW5kVHJhbnNjbHVkZUZuKHRyYW5zY2x1ZGVkU2NvcGUsIGNsb25lRm4sIGNvbnRyb2xsZXJzLCBmdXR1cmVQYXJlbnRFbGVtZW50LCBjb250YWluaW5nU2NvcGUpIHtcblxuICAgICAgICBpZiAoIXRyYW5zY2x1ZGVkU2NvcGUpIHtcbiAgICAgICAgICB0cmFuc2NsdWRlZFNjb3BlID0gc2NvcGUuJG5ldyhmYWxzZSwgY29udGFpbmluZ1Njb3BlKTtcbiAgICAgICAgICB0cmFuc2NsdWRlZFNjb3BlLiQkdHJhbnNjbHVkZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRyYW5zY2x1ZGVGbih0cmFuc2NsdWRlZFNjb3BlLCBjbG9uZUZuLCB7XG4gICAgICAgICAgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm46IHByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4sXG4gICAgICAgICAgdHJhbnNjbHVkZUNvbnRyb2xsZXJzOiBjb250cm9sbGVycyxcbiAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50OiBmdXR1cmVQYXJlbnRFbGVtZW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBXZSBuZWVkICB0byBhdHRhY2ggdGhlIHRyYW5zY2x1c2lvbiBzbG90cyBvbnRvIHRoZSBgYm91bmRUcmFuc2NsdWRlRm5gXG4gICAgICAvLyBzbyB0aGF0IHRoZXkgYXJlIGF2YWlsYWJsZSBpbnNpZGUgdGhlIGBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZWAgZnVuY3Rpb25cbiAgICAgIHZhciBib3VuZFNsb3RzID0gYm91bmRUcmFuc2NsdWRlRm4uJCRzbG90cyA9IGNyZWF0ZU1hcCgpO1xuICAgICAgZm9yICh2YXIgc2xvdE5hbWUgaW4gdHJhbnNjbHVkZUZuLiQkc2xvdHMpIHtcbiAgICAgICAgaWYgKHRyYW5zY2x1ZGVGbi4kJHNsb3RzW3Nsb3ROYW1lXSkge1xuICAgICAgICAgIGJvdW5kU2xvdHNbc2xvdE5hbWVdID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIHRyYW5zY2x1ZGVGbi4kJHNsb3RzW3Nsb3ROYW1lXSwgcHJldmlvdXNCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYm91bmRTbG90c1tzbG90TmFtZV0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBib3VuZFRyYW5zY2x1ZGVGbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb29rcyBmb3IgZGlyZWN0aXZlcyBvbiB0aGUgZ2l2ZW4gbm9kZSBhbmQgYWRkcyB0aGVtIHRvIHRoZSBkaXJlY3RpdmUgY29sbGVjdGlvbiB3aGljaCBpc1xuICAgICAqIHNvcnRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBub2RlIE5vZGUgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSBkaXJlY3RpdmVzIEFuIGFycmF5IHRvIHdoaWNoIHRoZSBkaXJlY3RpdmVzIGFyZSBhZGRlZCB0by4gVGhpcyBhcnJheSBpcyBzb3J0ZWQgYmVmb3JlXG4gICAgICogICAgICAgIHRoZSBmdW5jdGlvbiByZXR1cm5zLlxuICAgICAqIEBwYXJhbSBhdHRycyBUaGUgc2hhcmVkIGF0dHJzIG9iamVjdCB3aGljaCBpcyB1c2VkIHRvIHBvcHVsYXRlIHRoZSBub3JtYWxpemVkIGF0dHJpYnV0ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBtYXhQcmlvcml0eSBNYXggZGlyZWN0aXZlIHByaW9yaXR5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbGxlY3REaXJlY3RpdmVzKG5vZGUsIGRpcmVjdGl2ZXMsIGF0dHJzLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKSB7XG4gICAgICB2YXIgbm9kZVR5cGUgPSBub2RlLm5vZGVUeXBlLFxuICAgICAgICAgIGF0dHJzTWFwID0gYXR0cnMuJGF0dHIsXG4gICAgICAgICAgbWF0Y2gsXG4gICAgICAgICAgbm9kZU5hbWUsXG4gICAgICAgICAgY2xhc3NOYW1lO1xuXG4gICAgICBzd2l0Y2ggKG5vZGVUeXBlKSB7XG4gICAgICAgIGNhc2UgTk9ERV9UWVBFX0VMRU1FTlQ6IC8qIEVsZW1lbnQgKi9cblxuICAgICAgICAgIG5vZGVOYW1lID0gbm9kZU5hbWVfKG5vZGUpO1xuXG4gICAgICAgICAgLy8gdXNlIHRoZSBub2RlIG5hbWU6IDxkaXJlY3RpdmU+XG4gICAgICAgICAgYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsXG4gICAgICAgICAgICAgIGRpcmVjdGl2ZU5vcm1hbGl6ZShub2RlTmFtZSksICdFJywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSk7XG5cbiAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGF0dHJpYnV0ZXNcbiAgICAgICAgICBmb3IgKHZhciBhdHRyLCBuYW1lLCBuTmFtZSwgbmdBdHRyTmFtZSwgdmFsdWUsIGlzTmdBdHRyLCBuQXR0cnMgPSBub2RlLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICAgaiA9IDAsIGpqID0gbkF0dHJzICYmIG5BdHRycy5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICB2YXIgYXR0clN0YXJ0TmFtZSA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGF0dHJFbmROYW1lID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGF0dHIgPSBuQXR0cnNbal07XG4gICAgICAgICAgICBuYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuXG4gICAgICAgICAgICAvLyBzdXBwb3J0IG5nQXR0ciBhdHRyaWJ1dGUgYmluZGluZ1xuICAgICAgICAgICAgbmdBdHRyTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lKTtcbiAgICAgICAgICAgIGlzTmdBdHRyID0gTkdfQVRUUl9CSU5ESU5HLnRlc3QobmdBdHRyTmFtZSk7XG4gICAgICAgICAgICBpZiAoaXNOZ0F0dHIpIHtcbiAgICAgICAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShQUkVGSVhfUkVHRVhQLCAnJylcbiAgICAgICAgICAgICAgICAuc3Vic3RyKDgpLnJlcGxhY2UoL18oLikvZywgZnVuY3Rpb24obWF0Y2gsIGxldHRlcikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbXVsdGlFbGVtZW50TWF0Y2ggPSBuZ0F0dHJOYW1lLm1hdGNoKE1VTFRJX0VMRU1FTlRfRElSX1JFKTtcbiAgICAgICAgICAgIGlmIChtdWx0aUVsZW1lbnRNYXRjaCAmJiBkaXJlY3RpdmVJc011bHRpRWxlbWVudChtdWx0aUVsZW1lbnRNYXRjaFsxXSkpIHtcbiAgICAgICAgICAgICAgYXR0clN0YXJ0TmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgIGF0dHJFbmROYW1lID0gbmFtZS5zdWJzdHIoMCwgbmFtZS5sZW5ndGggLSA1KSArICdlbmQnO1xuICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMCwgbmFtZS5sZW5ndGggLSA2KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbk5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUobmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIGF0dHJzTWFwW25OYW1lXSA9IG5hbWU7XG4gICAgICAgICAgICBpZiAoaXNOZ0F0dHIgfHwgIWF0dHJzLmhhc093blByb3BlcnR5KG5OYW1lKSkge1xuICAgICAgICAgICAgICAgIGF0dHJzW25OYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChnZXRCb29sZWFuQXR0ck5hbWUobm9kZSwgbk5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICBhdHRyc1tuTmFtZV0gPSB0cnVlOyAvLyBwcmVzZW5jZSBtZWFucyB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkQXR0ckludGVycG9sYXRlRGlyZWN0aXZlKG5vZGUsIGRpcmVjdGl2ZXMsIHZhbHVlLCBuTmFtZSwgaXNOZ0F0dHIpO1xuICAgICAgICAgICAgYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5OYW1lLCAnQScsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIGF0dHJTdGFydE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJFbmROYW1lKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ2hpZGRlbicpIHtcbiAgICAgICAgICAgIC8vIEhpZGRlbiBpbnB1dCBlbGVtZW50cyBjYW4gaGF2ZSBzdHJhbmdlIGJlaGF2aW91ciB3aGVuIG5hdmlnYXRpbmcgYmFjayB0byB0aGUgcGFnZVxuICAgICAgICAgICAgLy8gVGhpcyB0ZWxscyB0aGUgYnJvd3NlciBub3QgdG8gdHJ5IHRvIGNhY2hlIGFuZCByZWluc3RhdGUgcHJldmlvdXMgdmFsdWVzXG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXV0b2NvbXBsZXRlJywgJ29mZicpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHVzZSBjbGFzcyBhcyBkaXJlY3RpdmVcbiAgICAgICAgICBpZiAoIWNzc0NsYXNzRGlyZWN0aXZlc0VuYWJsZWQpIGJyZWFrO1xuICAgICAgICAgIGNsYXNzTmFtZSA9IG5vZGUuY2xhc3NOYW1lO1xuICAgICAgICAgIGlmIChpc09iamVjdChjbGFzc05hbWUpKSB7XG4gICAgICAgICAgICAgIC8vIE1heWJlIFNWR0FuaW1hdGVkU3RyaW5nXG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5hbmltVmFsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNTdHJpbmcoY2xhc3NOYW1lKSAmJiBjbGFzc05hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICB3aGlsZSAoKG1hdGNoID0gQ0xBU1NfRElSRUNUSVZFX1JFR0VYUC5leGVjKGNsYXNzTmFtZSkpKSB7XG4gICAgICAgICAgICAgIG5OYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG1hdGNoWzJdKTtcbiAgICAgICAgICAgICAgaWYgKGFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLCBuTmFtZSwgJ0MnLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKSkge1xuICAgICAgICAgICAgICAgIGF0dHJzW25OYW1lXSA9IHRyaW0obWF0Y2hbM10pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zdWJzdHIobWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOT0RFX1RZUEVfVEVYVDogLyogVGV4dCBOb2RlICovXG4gICAgICAgICAgYWRkVGV4dEludGVycG9sYXRlRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5vZGUubm9kZVZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOT0RFX1RZUEVfQ09NTUVOVDogLyogQ29tbWVudCAqL1xuICAgICAgICAgIGlmICghY29tbWVudERpcmVjdGl2ZXNFbmFibGVkKSBicmVhaztcbiAgICAgICAgICBjb2xsZWN0Q29tbWVudERpcmVjdGl2ZXMobm9kZSwgZGlyZWN0aXZlcywgYXR0cnMsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBkaXJlY3RpdmVzLnNvcnQoYnlQcmlvcml0eSk7XG4gICAgICByZXR1cm4gZGlyZWN0aXZlcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb2xsZWN0Q29tbWVudERpcmVjdGl2ZXMobm9kZSwgZGlyZWN0aXZlcywgYXR0cnMsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpIHtcbiAgICAgIC8vIGZ1bmN0aW9uIGNyZWF0ZWQgYmVjYXVzZSBvZiBwZXJmb3JtYW5jZSwgdHJ5L2NhdGNoIGRpc2FibGVzXG4gICAgICAvLyB0aGUgb3B0aW1pemF0aW9uIG9mIHRoZSB3aG9sZSBmdW5jdGlvbiAjMTQ4NDhcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBtYXRjaCA9IENPTU1FTlRfRElSRUNUSVZFX1JFR0VYUC5leGVjKG5vZGUubm9kZVZhbHVlKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgdmFyIG5OYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG1hdGNoWzFdKTtcbiAgICAgICAgICBpZiAoYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5OYW1lLCAnTScsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpKSB7XG4gICAgICAgICAgICBhdHRyc1tuTmFtZV0gPSB0cmltKG1hdGNoWzJdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gdHVybnMgb3V0IHRoYXQgdW5kZXIgc29tZSBjaXJjdW1zdGFuY2VzIElFOSB0aHJvd3MgZXJyb3JzIHdoZW4gb25lIGF0dGVtcHRzIHRvIHJlYWRcbiAgICAgICAgLy8gY29tbWVudCdzIG5vZGUgdmFsdWUuXG4gICAgICAgIC8vIEp1c3QgaWdub3JlIGl0IGFuZCBjb250aW51ZS4gKENhbid0IHNlZW0gdG8gcmVwcm9kdWNlIGluIHRlc3QgY2FzZS4pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBub2RlIHdpdGggYSBkaXJlY3RpdmUtc3RhcnQgaXQgY29sbGVjdHMgYWxsIG9mIHRoZSBzaWJsaW5ncyB1bnRpbCBpdCBmaW5kc1xuICAgICAqIGRpcmVjdGl2ZS1lbmQuXG4gICAgICogQHBhcmFtIG5vZGVcbiAgICAgKiBAcGFyYW0gYXR0clN0YXJ0XG4gICAgICogQHBhcmFtIGF0dHJFbmRcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBncm91cFNjYW4obm9kZSwgYXR0clN0YXJ0LCBhdHRyRW5kKSB7XG4gICAgICB2YXIgbm9kZXMgPSBbXTtcbiAgICAgIHZhciBkZXB0aCA9IDA7XG4gICAgICBpZiAoYXR0clN0YXJ0ICYmIG5vZGUuaGFzQXR0cmlidXRlICYmIG5vZGUuaGFzQXR0cmlidXRlKGF0dHJTdGFydCkpIHtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3V0ZXJkaXInLFxuICAgICAgICAgICAgICAgICAgICAgICdVbnRlcm1pbmF0ZWQgYXR0cmlidXRlLCBmb3VuZCBcXCd7MH1cXCcgYnV0IG5vIG1hdGNoaW5nIFxcJ3sxfVxcJyBmb3VuZC4nLFxuICAgICAgICAgICAgICAgICAgICAgIGF0dHJTdGFydCwgYXR0ckVuZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOT0RFX1RZUEVfRUxFTUVOVCkge1xuICAgICAgICAgICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlKGF0dHJTdGFydCkpIGRlcHRoKys7XG4gICAgICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoYXR0ckVuZCkpIGRlcHRoLS07XG4gICAgICAgICAgfVxuICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH0gd2hpbGUgKGRlcHRoID4gMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ganFMaXRlKG5vZGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwcGVyIGZvciBsaW5raW5nIGZ1bmN0aW9uIHdoaWNoIGNvbnZlcnRzIG5vcm1hbCBsaW5raW5nIGZ1bmN0aW9uIGludG8gYSBncm91cGVkXG4gICAgICogbGlua2luZyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gbGlua0ZuXG4gICAgICogQHBhcmFtIGF0dHJTdGFydFxuICAgICAqIEBwYXJhbSBhdHRyRW5kXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKGxpbmtGbiwgYXR0clN0YXJ0LCBhdHRyRW5kKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gZ3JvdXBlZEVsZW1lbnRzTGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pIHtcbiAgICAgICAgZWxlbWVudCA9IGdyb3VwU2NhbihlbGVtZW50WzBdLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICByZXR1cm4gbGlua0ZuKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMsIHRyYW5zY2x1ZGVGbik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gZ2VuZXJhdG9yIHRoYXQgaXMgdXNlZCB0byBzdXBwb3J0IGJvdGggZWFnZXIgYW5kIGxhenkgY29tcGlsYXRpb25cbiAgICAgKiBsaW5raW5nIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBlYWdlclxuICAgICAqIEBwYXJhbSAkY29tcGlsZU5vZGVzXG4gICAgICogQHBhcmFtIHRyYW5zY2x1ZGVGblxuICAgICAqIEBwYXJhbSBtYXhQcmlvcml0eVxuICAgICAqIEBwYXJhbSBpZ25vcmVEaXJlY3RpdmVcbiAgICAgKiBAcGFyYW0gcHJldmlvdXNDb21waWxlQ29udGV4dFxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21waWxhdGlvbkdlbmVyYXRvcihlYWdlciwgJGNvbXBpbGVOb2RlcywgdHJhbnNjbHVkZUZuLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBwcmV2aW91c0NvbXBpbGVDb250ZXh0KSB7XG4gICAgICB2YXIgY29tcGlsZWQ7XG5cbiAgICAgIGlmIChlYWdlcikge1xuICAgICAgICByZXR1cm4gY29tcGlsZSgkY29tcGlsZU5vZGVzLCB0cmFuc2NsdWRlRm4sIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIC8qKiBAdGhpcyAqLyBmdW5jdGlvbiBsYXp5Q29tcGlsYXRpb24oKSB7XG4gICAgICAgIGlmICghY29tcGlsZWQpIHtcbiAgICAgICAgICBjb21waWxlZCA9IGNvbXBpbGUoJGNvbXBpbGVOb2RlcywgdHJhbnNjbHVkZUZuLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBwcmV2aW91c0NvbXBpbGVDb250ZXh0KTtcblxuICAgICAgICAgIC8vIE51bGwgb3V0IGFsbCBvZiB0aGVzZSByZWZlcmVuY2VzIGluIG9yZGVyIHRvIG1ha2UgdGhlbSBlbGlnaWJsZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uXG4gICAgICAgICAgLy8gc2luY2UgdGhpcyBpcyBhIHBvdGVudGlhbGx5IGxvbmcgbGl2ZWQgY2xvc3VyZVxuICAgICAgICAgICRjb21waWxlTm9kZXMgPSB0cmFuc2NsdWRlRm4gPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcGlsZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT25jZSB0aGUgZGlyZWN0aXZlcyBoYXZlIGJlZW4gY29sbGVjdGVkLCB0aGVpciBjb21waWxlIGZ1bmN0aW9ucyBhcmUgZXhlY3V0ZWQuIFRoaXMgbWV0aG9kXG4gICAgICogaXMgcmVzcG9uc2libGUgZm9yIGlubGluaW5nIGRpcmVjdGl2ZSB0ZW1wbGF0ZXMgYXMgd2VsbCBhcyB0ZXJtaW5hdGluZyB0aGUgYXBwbGljYXRpb25cbiAgICAgKiBvZiB0aGUgZGlyZWN0aXZlcyBpZiB0aGUgdGVybWluYWwgZGlyZWN0aXZlIGhhcyBiZWVuIHJlYWNoZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkaXJlY3RpdmVzIEFycmF5IG9mIGNvbGxlY3RlZCBkaXJlY3RpdmVzIHRvIGV4ZWN1dGUgdGhlaXIgY29tcGlsZSBmdW5jdGlvbi5cbiAgICAgKiAgICAgICAgdGhpcyBuZWVkcyB0byBiZSBwcmUtc29ydGVkIGJ5IHByaW9yaXR5IG9yZGVyLlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gY29tcGlsZU5vZGUgVGhlIHJhdyBET00gbm9kZSB0byBhcHBseSB0aGUgY29tcGlsZSBmdW5jdGlvbnMgdG9cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdGVtcGxhdGVBdHRycyBUaGUgc2hhcmVkIGF0dHJpYnV0ZSBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oYW5ndWxhci5TY29wZSwgY2xvbmVBdHRhY2hGbj0pfSB0cmFuc2NsdWRlRm4gQSBsaW5raW5nIGZ1bmN0aW9uLCB3aGVyZSB0aGVcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUgYXJndW1lbnQgaXMgYXV0by1nZW5lcmF0ZWQgdG8gdGhlIG5ld1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCBvZiB0aGUgdHJhbnNjbHVkZWQgcGFyZW50IHNjb3BlLlxuICAgICAqIEBwYXJhbSB7SlFMaXRlfSBqcUNvbGxlY3Rpb24gSWYgd2UgYXJlIHdvcmtpbmcgb24gdGhlIHJvb3Qgb2YgdGhlIGNvbXBpbGUgdHJlZSB0aGVuIHRoaXNcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50IGhhcyB0aGUgcm9vdCBqcUxpdGUgYXJyYXkgc28gdGhhdCB3ZSBjYW4gcmVwbGFjZSBub2Rlc1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb24gaXQuXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBvcmlnaW5hbFJlcGxhY2VEaXJlY3RpdmUgQW4gb3B0aW9uYWwgZGlyZWN0aXZlIHRoYXQgd2lsbCBiZSBpZ25vcmVkIHdoZW5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21waWxpbmcgdGhlIHRyYW5zY2x1c2lvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5LjxGdW5jdGlvbj59IHByZUxpbmtGbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5LjxGdW5jdGlvbj59IHBvc3RMaW5rRm5zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQgQ29udGV4dCB1c2VkIGZvciBwcmV2aW91cyBjb21waWxhdGlvbiBvZiB0aGUgY3VycmVudFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IGxpbmtGblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFwcGx5RGlyZWN0aXZlc1RvTm9kZShkaXJlY3RpdmVzLCBjb21waWxlTm9kZSwgdGVtcGxhdGVBdHRycywgdHJhbnNjbHVkZUZuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqcUNvbGxlY3Rpb24sIG9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSwgcHJlTGlua0ZucywgcG9zdExpbmtGbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcbiAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0IHx8IHt9O1xuXG4gICAgICB2YXIgdGVybWluYWxQcmlvcml0eSA9IC1OdW1iZXIuTUFYX1ZBTFVFLFxuICAgICAgICAgIG5ld1Njb3BlRGlyZWN0aXZlID0gcHJldmlvdXNDb21waWxlQ29udGV4dC5uZXdTY29wZURpcmVjdGl2ZSxcbiAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlcyA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQuY29udHJvbGxlckRpcmVjdGl2ZXMsXG4gICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID0gcHJldmlvdXNDb21waWxlQ29udGV4dC5uZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsXG4gICAgICAgICAgdGVtcGxhdGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0LnRlbXBsYXRlRGlyZWN0aXZlLFxuICAgICAgICAgIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0Lm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUsXG4gICAgICAgICAgaGFzVHJhbnNjbHVkZURpcmVjdGl2ZSA9IGZhbHNlLFxuICAgICAgICAgIGhhc1RlbXBsYXRlID0gZmFsc2UsXG4gICAgICAgICAgaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0Lmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlLFxuICAgICAgICAgICRjb21waWxlTm9kZSA9IHRlbXBsYXRlQXR0cnMuJCRlbGVtZW50ID0ganFMaXRlKGNvbXBpbGVOb2RlKSxcbiAgICAgICAgICBkaXJlY3RpdmUsXG4gICAgICAgICAgZGlyZWN0aXZlTmFtZSxcbiAgICAgICAgICAkdGVtcGxhdGUsXG4gICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSA9IG9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSxcbiAgICAgICAgICBjaGlsZFRyYW5zY2x1ZGVGbiA9IHRyYW5zY2x1ZGVGbixcbiAgICAgICAgICBsaW5rRm4sXG4gICAgICAgICAgZGlkU2NhbkZvck11bHRpcGxlVHJhbnNjbHVzaW9uID0gZmFsc2UsXG4gICAgICAgICAgbWlnaHRIYXZlTXVsdGlwbGVUcmFuc2NsdXNpb25FcnJvciA9IGZhbHNlLFxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlO1xuXG4gICAgICAvLyBleGVjdXRlcyBhbGwgZGlyZWN0aXZlcyBvbiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgZGlyZWN0aXZlID0gZGlyZWN0aXZlc1tpXTtcbiAgICAgICAgdmFyIGF0dHJTdGFydCA9IGRpcmVjdGl2ZS4kJHN0YXJ0O1xuICAgICAgICB2YXIgYXR0ckVuZCA9IGRpcmVjdGl2ZS4kJGVuZDtcblxuICAgICAgICAvLyBjb2xsZWN0IG11bHRpYmxvY2sgc2VjdGlvbnNcbiAgICAgICAgaWYgKGF0dHJTdGFydCkge1xuICAgICAgICAgICRjb21waWxlTm9kZSA9IGdyb3VwU2Nhbihjb21waWxlTm9kZSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgfVxuICAgICAgICAkdGVtcGxhdGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRlcm1pbmFsUHJpb3JpdHkgPiBkaXJlY3RpdmUucHJpb3JpdHkpIHtcbiAgICAgICAgICBicmVhazsgLy8gcHJldmVudCBmdXJ0aGVyIHByb2Nlc3Npbmcgb2YgZGlyZWN0aXZlc1xuICAgICAgICB9XG5cbiAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSBkaXJlY3RpdmUuc2NvcGU7XG5cbiAgICAgICAgaWYgKGRpcmVjdGl2ZVZhbHVlKSB7XG5cbiAgICAgICAgICAvLyBza2lwIHRoZSBjaGVjayBmb3IgZGlyZWN0aXZlcyB3aXRoIGFzeW5jIHRlbXBsYXRlcywgd2UnbGwgY2hlY2sgdGhlIGRlcml2ZWQgc3luY1xuICAgICAgICAgIC8vIGRpcmVjdGl2ZSB3aGVuIHRoZSB0ZW1wbGF0ZSBhcnJpdmVzXG4gICAgICAgICAgaWYgKCFkaXJlY3RpdmUudGVtcGxhdGVVcmwpIHtcbiAgICAgICAgICAgIGlmIChpc09iamVjdChkaXJlY3RpdmVWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyBkaXJlY3RpdmUgaXMgdHJ5aW5nIHRvIGFkZCBhbiBpc29sYXRlZCBzY29wZS5cbiAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGVyZSBpcyBubyBzY29wZSBvZiBhbnkga2luZCBhbHJlYWR5XG4gICAgICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCduZXcvaXNvbGF0ZWQgc2NvcGUnLCBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgfHwgbmV3U2NvcGVEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyBkaXJlY3RpdmUgaXMgdHJ5aW5nIHRvIGFkZCBhIGNoaWxkIHNjb3BlLlxuICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRoZXJlIGlzIG5vIGlzb2xhdGVkIHNjb3BlIGFscmVhZHlcbiAgICAgICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ25ldy9pc29sYXRlZCBzY29wZScsIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSwgZGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY29tcGlsZU5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5ld1Njb3BlRGlyZWN0aXZlID0gbmV3U2NvcGVEaXJlY3RpdmUgfHwgZGlyZWN0aXZlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZS5uYW1lO1xuXG4gICAgICAgIC8vIElmIHdlIGVuY291bnRlciBhIGNvbmRpdGlvbiB0aGF0IGNhbiByZXN1bHQgaW4gdHJhbnNjbHVzaW9uIG9uIHRoZSBkaXJlY3RpdmUsXG4gICAgICAgIC8vIHRoZW4gc2NhbiBhaGVhZCBpbiB0aGUgcmVtYWluaW5nIGRpcmVjdGl2ZXMgZm9yIG90aGVycyB0aGF0IG1heSBjYXVzZSBhIG11bHRpcGxlXG4gICAgICAgIC8vIHRyYW5zY2x1c2lvbiBlcnJvciB0byBiZSB0aHJvd24gZHVyaW5nIHRoZSBjb21waWxhdGlvbiBwcm9jZXNzLiAgSWYgYSBtYXRjaGluZyBkaXJlY3RpdmVcbiAgICAgICAgLy8gaXMgZm91bmQsIHRoZW4gd2Uga25vdyB0aGF0IHdoZW4gd2UgZW5jb3VudGVyIGEgdHJhbnNjbHVkZWQgZGlyZWN0aXZlLCB3ZSBuZWVkIHRvIGVhZ2VybHlcbiAgICAgICAgLy8gY29tcGlsZSB0aGUgYHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIHJhdGhlciB0aGFuIGRvaW5nIGl0IGxhemlseSBpbiBvcmRlciB0byB0aHJvd1xuICAgICAgICAvLyBleGNlcHRpb25zIGF0IHRoZSBjb3JyZWN0IHRpbWVcbiAgICAgICAgaWYgKCFkaWRTY2FuRm9yTXVsdGlwbGVUcmFuc2NsdXNpb24gJiYgKChkaXJlY3RpdmUucmVwbGFjZSAmJiAoZGlyZWN0aXZlLnRlbXBsYXRlVXJsIHx8IGRpcmVjdGl2ZS50ZW1wbGF0ZSkpXG4gICAgICAgICAgICB8fCAoZGlyZWN0aXZlLnRyYW5zY2x1ZGUgJiYgIWRpcmVjdGl2ZS4kJHRsYikpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZURpcmVjdGl2ZTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNjYW5uaW5nSW5kZXggPSBpICsgMTsgKGNhbmRpZGF0ZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbc2Nhbm5pbmdJbmRleCsrXSk7KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoY2FuZGlkYXRlRGlyZWN0aXZlLnRyYW5zY2x1ZGUgJiYgIWNhbmRpZGF0ZURpcmVjdGl2ZS4kJHRsYilcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IChjYW5kaWRhdGVEaXJlY3RpdmUucmVwbGFjZSAmJiAoY2FuZGlkYXRlRGlyZWN0aXZlLnRlbXBsYXRlVXJsIHx8IGNhbmRpZGF0ZURpcmVjdGl2ZS50ZW1wbGF0ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaWdodEhhdmVNdWx0aXBsZVRyYW5zY2x1c2lvbkVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGlkU2NhbkZvck11bHRpcGxlVHJhbnNjbHVzaW9uID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZGlyZWN0aXZlLnRlbXBsYXRlVXJsICYmIGRpcmVjdGl2ZS5jb250cm9sbGVyKSB7XG4gICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXMgPSBjb250cm9sbGVyRGlyZWN0aXZlcyB8fCBjcmVhdGVNYXAoKTtcbiAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgnXFwnJyArIGRpcmVjdGl2ZU5hbWUgKyAnXFwnIGNvbnRyb2xsZXInLFxuICAgICAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xuICAgICAgICAgIGNvbnRyb2xsZXJEaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdID0gZGlyZWN0aXZlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSBkaXJlY3RpdmUudHJhbnNjbHVkZTtcblxuICAgICAgICBpZiAoZGlyZWN0aXZlVmFsdWUpIHtcbiAgICAgICAgICBoYXNUcmFuc2NsdWRlRGlyZWN0aXZlID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBuZ0lmIGFuZCBuZ1JlcGVhdCBzbyB0aGF0IHdlIGRvbid0IGNvbXBsYWluIGFib3V0IGR1cGxpY2F0ZSB0cmFuc2NsdXNpb24uXG4gICAgICAgICAgLy8gVGhpcyBvcHRpb24gc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBkaXJlY3RpdmVzIHRoYXQga25vdyBob3cgdG8gc2FmZWx5IGhhbmRsZSBlbGVtZW50IHRyYW5zY2x1c2lvbixcbiAgICAgICAgICAvLyB3aGVyZSB0aGUgdHJhbnNjbHVkZWQgbm9kZXMgYXJlIGFkZGVkIG9yIHJlcGxhY2VkIGFmdGVyIGxpbmtpbmcuXG4gICAgICAgICAgaWYgKCFkaXJlY3RpdmUuJCR0bGIpIHtcbiAgICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCd0cmFuc2NsdXNpb24nLCBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLCBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XG4gICAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChkaXJlY3RpdmVWYWx1ZSA9PT0gJ2VsZW1lbnQnKSB7XG4gICAgICAgICAgICBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB0ZXJtaW5hbFByaW9yaXR5ID0gZGlyZWN0aXZlLnByaW9yaXR5O1xuICAgICAgICAgICAgJHRlbXBsYXRlID0gJGNvbXBpbGVOb2RlO1xuICAgICAgICAgICAgJGNvbXBpbGVOb2RlID0gdGVtcGxhdGVBdHRycy4kJGVsZW1lbnQgPVxuICAgICAgICAgICAgICAgIGpxTGl0ZShjb21waWxlLiQkY3JlYXRlQ29tbWVudChkaXJlY3RpdmVOYW1lLCB0ZW1wbGF0ZUF0dHJzW2RpcmVjdGl2ZU5hbWVdKSk7XG4gICAgICAgICAgICBjb21waWxlTm9kZSA9ICRjb21waWxlTm9kZVswXTtcbiAgICAgICAgICAgIHJlcGxhY2VXaXRoKGpxQ29sbGVjdGlvbiwgc2xpY2VBcmdzKCR0ZW1wbGF0ZSksIGNvbXBpbGVOb2RlKTtcblxuICAgICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4gPSBjb21waWxhdGlvbkdlbmVyYXRvcihtaWdodEhhdmVNdWx0aXBsZVRyYW5zY2x1c2lvbkVycm9yLCAkdGVtcGxhdGUsIHRyYW5zY2x1ZGVGbiwgdGVybWluYWxQcmlvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlRGlyZWN0aXZlICYmIHJlcGxhY2VEaXJlY3RpdmUubmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgcGFzcyBpbjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gY29udHJvbGxlckRpcmVjdGl2ZXMgLSBvdGhlcndpc2Ugd2UnbGwgY3JlYXRlIGR1cGxpY2F0ZXMgY29udHJvbGxlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIG9yIHRlbXBsYXRlRGlyZWN0aXZlIC0gY29tYmluaW5nIHRlbXBsYXRlcyB3aXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVsZW1lbnQgdHJhbnNjbHVzaW9uIGRvZXNuJ3QgbWFrZSBzZW5zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIG9ubHkgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSBzbyB0aGF0IHdlIHByZXZlbnQgcHV0dGluZyB0cmFuc2NsdXNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBzYW1lIGVsZW1lbnQgbW9yZSB0aGFuIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOiBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgdmFyIHNsb3RzID0gY3JlYXRlTWFwKCk7XG5cbiAgICAgICAgICAgIGlmICghaXNPYmplY3QoZGlyZWN0aXZlVmFsdWUpKSB7XG4gICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IGpxTGl0ZShqcUxpdGVDbG9uZShjb21waWxlTm9kZSkpLmNvbnRlbnRzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgIC8vIFdlIGhhdmUgdHJhbnNjbHVzaW9uIHNsb3RzLFxuICAgICAgICAgICAgICAvLyBjb2xsZWN0IHRoZW0gdXAsIGNvbXBpbGUgdGhlbSBhbmQgc3RvcmUgdGhlaXIgdHJhbnNjbHVzaW9uIGZ1bmN0aW9uc1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBbXTtcblxuICAgICAgICAgICAgICB2YXIgc2xvdE1hcCA9IGNyZWF0ZU1hcCgpO1xuICAgICAgICAgICAgICB2YXIgZmlsbGVkU2xvdHMgPSBjcmVhdGVNYXAoKTtcblxuICAgICAgICAgICAgICAvLyBQYXJzZSB0aGUgZWxlbWVudCBzZWxlY3RvcnNcbiAgICAgICAgICAgICAgZm9yRWFjaChkaXJlY3RpdmVWYWx1ZSwgZnVuY3Rpb24oZWxlbWVudFNlbGVjdG9yLCBzbG90TmFtZSkge1xuICAgICAgICAgICAgICAgIC8vIElmIGFuIGVsZW1lbnQgc2VsZWN0b3Igc3RhcnRzIHdpdGggYSA/IHRoZW4gaXQgaXMgb3B0aW9uYWxcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9uYWwgPSAoZWxlbWVudFNlbGVjdG9yLmNoYXJBdCgwKSA9PT0gJz8nKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50U2VsZWN0b3IgPSBvcHRpb25hbCA/IGVsZW1lbnRTZWxlY3Rvci5zdWJzdHJpbmcoMSkgOiBlbGVtZW50U2VsZWN0b3I7XG5cbiAgICAgICAgICAgICAgICBzbG90TWFwW2VsZW1lbnRTZWxlY3Rvcl0gPSBzbG90TmFtZTtcblxuICAgICAgICAgICAgICAgIC8vIFdlIGV4cGxpY2l0bHkgYXNzaWduIGBudWxsYCBzaW5jZSB0aGlzIGltcGxpZXMgdGhhdCBhIHNsb3Qgd2FzIGRlZmluZWQgYnV0IG5vdCBmaWxsZWQuXG4gICAgICAgICAgICAgICAgLy8gTGF0ZXIgd2hlbiBjYWxsaW5nIGJvdW5kVHJhbnNjbHVzaW9uIGZ1bmN0aW9ucyB3aXRoIGEgc2xvdCBuYW1lIHdlIG9ubHkgZXJyb3IgaWYgdGhlXG4gICAgICAgICAgICAgICAgLy8gc2xvdCBpcyBgdW5kZWZpbmVkYFxuICAgICAgICAgICAgICAgIHNsb3RzW3Nsb3ROYW1lXSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvLyBmaWxsZWRTbG90cyBjb250YWlucyBgdHJ1ZWAgZm9yIGFsbCBzbG90cyB0aGF0IGFyZSBlaXRoZXIgb3B0aW9uYWwgb3IgaGF2ZSBiZWVuXG4gICAgICAgICAgICAgICAgLy8gZmlsbGVkLiBUaGlzIGlzIHVzZWQgdG8gY2hlY2sgdGhhdCB3ZSBoYXZlIG5vdCBtaXNzZWQgYW55IHJlcXVpcmVkIHNsb3RzXG4gICAgICAgICAgICAgICAgZmlsbGVkU2xvdHNbc2xvdE5hbWVdID0gb3B0aW9uYWw7XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIC8vIEFkZCB0aGUgbWF0Y2hpbmcgZWxlbWVudHMgaW50byB0aGVpciBzbG90XG4gICAgICAgICAgICAgIGZvckVhY2goJGNvbXBpbGVOb2RlLmNvbnRlbnRzKCksIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2xvdE5hbWUgPSBzbG90TWFwW2RpcmVjdGl2ZU5vcm1hbGl6ZShub2RlTmFtZV8obm9kZSkpXTtcbiAgICAgICAgICAgICAgICBpZiAoc2xvdE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgIGZpbGxlZFNsb3RzW3Nsb3ROYW1lXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBzbG90c1tzbG90TmFtZV0gPSBzbG90c1tzbG90TmFtZV0gfHwgW107XG4gICAgICAgICAgICAgICAgICBzbG90c1tzbG90TmFtZV0ucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgcmVxdWlyZWQgc2xvdHMgdGhhdCB3ZXJlIG5vdCBmaWxsZWRcbiAgICAgICAgICAgICAgZm9yRWFjaChmaWxsZWRTbG90cywgZnVuY3Rpb24oZmlsbGVkLCBzbG90TmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICghZmlsbGVkKSB7XG4gICAgICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycigncmVxc2xvdCcsICdSZXF1aXJlZCB0cmFuc2NsdXNpb24gc2xvdCBgezB9YCB3YXMgbm90IGZpbGxlZC4nLCBzbG90TmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBmb3IgKHZhciBzbG90TmFtZSBpbiBzbG90cykge1xuICAgICAgICAgICAgICAgIGlmIChzbG90c1tzbG90TmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgIC8vIE9ubHkgZGVmaW5lIGEgdHJhbnNjbHVzaW9uIGZ1bmN0aW9uIGlmIHRoZSBzbG90IHdhcyBmaWxsZWRcbiAgICAgICAgICAgICAgICAgIHNsb3RzW3Nsb3ROYW1lXSA9IGNvbXBpbGF0aW9uR2VuZXJhdG9yKG1pZ2h0SGF2ZU11bHRpcGxlVHJhbnNjbHVzaW9uRXJyb3IsIHNsb3RzW3Nsb3ROYW1lXSwgdHJhbnNjbHVkZUZuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJGNvbXBpbGVOb2RlLmVtcHR5KCk7IC8vIGNsZWFyIGNvbnRlbnRzXG4gICAgICAgICAgICBjaGlsZFRyYW5zY2x1ZGVGbiA9IGNvbXBpbGF0aW9uR2VuZXJhdG9yKG1pZ2h0SGF2ZU11bHRpcGxlVHJhbnNjbHVzaW9uRXJyb3IsICR0ZW1wbGF0ZSwgdHJhbnNjbHVkZUZuLCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLCB7IG5lZWRzTmV3U2NvcGU6IGRpcmVjdGl2ZS4kJGlzb2xhdGVTY29wZSB8fCBkaXJlY3RpdmUuJCRuZXdTY29wZX0pO1xuICAgICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4uJCRzbG90cyA9IHNsb3RzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXJlY3RpdmUudGVtcGxhdGUpIHtcbiAgICAgICAgICBoYXNUZW1wbGF0ZSA9IHRydWU7XG4gICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ3RlbXBsYXRlJywgdGVtcGxhdGVEaXJlY3RpdmUsIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICB0ZW1wbGF0ZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcblxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlID0gKGlzRnVuY3Rpb24oZGlyZWN0aXZlLnRlbXBsYXRlKSlcbiAgICAgICAgICAgICAgPyBkaXJlY3RpdmUudGVtcGxhdGUoJGNvbXBpbGVOb2RlLCB0ZW1wbGF0ZUF0dHJzKVxuICAgICAgICAgICAgICA6IGRpcmVjdGl2ZS50ZW1wbGF0ZTtcblxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlID0gZGVub3JtYWxpemVUZW1wbGF0ZShkaXJlY3RpdmVWYWx1ZSk7XG5cbiAgICAgICAgICBpZiAoZGlyZWN0aXZlLnJlcGxhY2UpIHtcbiAgICAgICAgICAgIHJlcGxhY2VEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XG4gICAgICAgICAgICBpZiAoanFMaXRlSXNUZXh0Tm9kZShkaXJlY3RpdmVWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgJHRlbXBsYXRlID0gW107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSByZW1vdmVDb21tZW50cyh3cmFwVGVtcGxhdGUoZGlyZWN0aXZlLnRlbXBsYXRlTmFtZXNwYWNlLCB0cmltKGRpcmVjdGl2ZVZhbHVlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkdGVtcGxhdGVbMF07XG5cbiAgICAgICAgICAgIGlmICgkdGVtcGxhdGUubGVuZ3RoICE9PSAxIHx8IGNvbXBpbGVOb2RlLm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfRUxFTUVOVCkge1xuICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycigndHBscnQnLFxuICAgICAgICAgICAgICAgICAgJ1RlbXBsYXRlIGZvciBkaXJlY3RpdmUgXFwnezB9XFwnIG11c3QgaGF2ZSBleGFjdGx5IG9uZSByb290IGVsZW1lbnQuIHsxfScsXG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmVOYW1lLCAnJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlcGxhY2VXaXRoKGpxQ29sbGVjdGlvbiwgJGNvbXBpbGVOb2RlLCBjb21waWxlTm9kZSk7XG5cbiAgICAgICAgICAgIHZhciBuZXdUZW1wbGF0ZUF0dHJzID0geyRhdHRyOiB7fX07XG5cbiAgICAgICAgICAgIC8vIGNvbWJpbmUgZGlyZWN0aXZlcyBmcm9tIHRoZSBvcmlnaW5hbCBub2RlIGFuZCBmcm9tIHRoZSB0ZW1wbGF0ZTpcbiAgICAgICAgICAgIC8vIC0gdGFrZSB0aGUgYXJyYXkgb2YgZGlyZWN0aXZlcyBmb3IgdGhpcyBlbGVtZW50XG4gICAgICAgICAgICAvLyAtIHNwbGl0IGl0IGludG8gdHdvIHBhcnRzLCB0aG9zZSB0aGF0IGFscmVhZHkgYXBwbGllZCAocHJvY2Vzc2VkKSBhbmQgdGhvc2UgdGhhdCB3ZXJlbid0ICh1bnByb2Nlc3NlZClcbiAgICAgICAgICAgIC8vIC0gY29sbGVjdCBkaXJlY3RpdmVzIGZyb20gdGhlIHRlbXBsYXRlIGFuZCBzb3J0IHRoZW0gYnkgcHJpb3JpdHlcbiAgICAgICAgICAgIC8vIC0gY29tYmluZSBkaXJlY3RpdmVzIGFzOiBwcm9jZXNzZWQgKyB0ZW1wbGF0ZSArIHVucHJvY2Vzc2VkXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVEaXJlY3RpdmVzID0gY29sbGVjdERpcmVjdGl2ZXMoY29tcGlsZU5vZGUsIFtdLCBuZXdUZW1wbGF0ZUF0dHJzKTtcbiAgICAgICAgICAgIHZhciB1bnByb2Nlc3NlZERpcmVjdGl2ZXMgPSBkaXJlY3RpdmVzLnNwbGljZShpICsgMSwgZGlyZWN0aXZlcy5sZW5ndGggLSAoaSArIDEpKTtcblxuICAgICAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSB8fCBuZXdTY29wZURpcmVjdGl2ZSkge1xuICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgZGlyZWN0aXZlIGNhdXNlZCB0aGUgY3VycmVudCBlbGVtZW50IHRvIGJlIHJlcGxhY2VkIGJ1dCB0aGlzIGVsZW1lbnRcbiAgICAgICAgICAgICAgLy8gYWxzbyBuZWVkcyB0byBoYXZlIGEgbmV3IHNjb3BlLCBzbyB3ZSBuZWVkIHRvIHRlbGwgdGhlIHRlbXBsYXRlIGRpcmVjdGl2ZXNcbiAgICAgICAgICAgICAgLy8gdGhhdCB0aGV5IHdvdWxkIG5lZWQgdG8gZ2V0IHRoZWlyIHNjb3BlIGZyb20gZnVydGhlciB1cCwgaWYgdGhleSByZXF1aXJlIHRyYW5zY2x1c2lvblxuICAgICAgICAgICAgICBtYXJrRGlyZWN0aXZlU2NvcGUodGVtcGxhdGVEaXJlY3RpdmVzLCBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsIG5ld1Njb3BlRGlyZWN0aXZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpcmVjdGl2ZXMgPSBkaXJlY3RpdmVzLmNvbmNhdCh0ZW1wbGF0ZURpcmVjdGl2ZXMpLmNvbmNhdCh1bnByb2Nlc3NlZERpcmVjdGl2ZXMpO1xuICAgICAgICAgICAgbWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXModGVtcGxhdGVBdHRycywgbmV3VGVtcGxhdGVBdHRycyk7XG5cbiAgICAgICAgICAgIGlpID0gZGlyZWN0aXZlcy5sZW5ndGg7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRjb21waWxlTm9kZS5odG1sKGRpcmVjdGl2ZVZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aXZlLnRlbXBsYXRlVXJsKSB7XG4gICAgICAgICAgaGFzVGVtcGxhdGUgPSB0cnVlO1xuICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCd0ZW1wbGF0ZScsIHRlbXBsYXRlRGlyZWN0aXZlLCBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XG4gICAgICAgICAgdGVtcGxhdGVEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XG5cbiAgICAgICAgICBpZiAoZGlyZWN0aXZlLnJlcGxhY2UpIHtcbiAgICAgICAgICAgIHJlcGxhY2VEaXJlY3RpdmUgPSBkaXJlY3RpdmU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWZ1bmMtYXNzaWduXG4gICAgICAgICAgbm9kZUxpbmtGbiA9IGNvbXBpbGVUZW1wbGF0ZVVybChkaXJlY3RpdmVzLnNwbGljZShpLCBkaXJlY3RpdmVzLmxlbmd0aCAtIGkpLCAkY29tcGlsZU5vZGUsXG4gICAgICAgICAgICAgIHRlbXBsYXRlQXR0cnMsIGpxQ29sbGVjdGlvbiwgaGFzVHJhbnNjbHVkZURpcmVjdGl2ZSAmJiBjaGlsZFRyYW5zY2x1ZGVGbiwgcHJlTGlua0ZucywgcG9zdExpbmtGbnMsIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlczogY29udHJvbGxlckRpcmVjdGl2ZXMsXG4gICAgICAgICAgICAgICAgbmV3U2NvcGVEaXJlY3RpdmU6IChuZXdTY29wZURpcmVjdGl2ZSAhPT0gZGlyZWN0aXZlKSAmJiBuZXdTY29wZURpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmU6IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZURpcmVjdGl2ZTogdGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTogbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGl2ZS5jb21waWxlKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxpbmtGbiA9IGRpcmVjdGl2ZS5jb21waWxlKCRjb21waWxlTm9kZSwgdGVtcGxhdGVBdHRycywgY2hpbGRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBkaXJlY3RpdmUuJCRvcmlnaW5hbERpcmVjdGl2ZSB8fCBkaXJlY3RpdmU7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihsaW5rRm4pKSB7XG4gICAgICAgICAgICAgIGFkZExpbmtGbnMobnVsbCwgYmluZChjb250ZXh0LCBsaW5rRm4pLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5rRm4pIHtcbiAgICAgICAgICAgICAgYWRkTGlua0ZucyhiaW5kKGNvbnRleHQsIGxpbmtGbi5wcmUpLCBiaW5kKGNvbnRleHQsIGxpbmtGbi5wb3N0KSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlLCBzdGFydGluZ1RhZygkY29tcGlsZU5vZGUpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aXZlLnRlcm1pbmFsKSB7XG4gICAgICAgICAgbm9kZUxpbmtGbi50ZXJtaW5hbCA9IHRydWU7XG4gICAgICAgICAgdGVybWluYWxQcmlvcml0eSA9IE1hdGgubWF4KHRlcm1pbmFsUHJpb3JpdHksIGRpcmVjdGl2ZS5wcmlvcml0eSk7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBub2RlTGlua0ZuLnNjb3BlID0gbmV3U2NvcGVEaXJlY3RpdmUgJiYgbmV3U2NvcGVEaXJlY3RpdmUuc2NvcGUgPT09IHRydWU7XG4gICAgICBub2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50ID0gaGFzVHJhbnNjbHVkZURpcmVjdGl2ZTtcbiAgICAgIG5vZGVMaW5rRm4udGVtcGxhdGVPblRoaXNFbGVtZW50ID0gaGFzVGVtcGxhdGU7XG4gICAgICBub2RlTGlua0ZuLnRyYW5zY2x1ZGUgPSBjaGlsZFRyYW5zY2x1ZGVGbjtcblxuICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA9IGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlO1xuXG4gICAgICAvLyBtaWdodCBiZSBub3JtYWwgb3IgZGVsYXllZCBub2RlTGlua0ZuIGRlcGVuZGluZyBvbiBpZiB0ZW1wbGF0ZVVybCBpcyBwcmVzZW50XG4gICAgICByZXR1cm4gbm9kZUxpbmtGbjtcblxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgZnVuY3Rpb24gYWRkTGlua0ZucyhwcmUsIHBvc3QsIGF0dHJTdGFydCwgYXR0ckVuZCkge1xuICAgICAgICBpZiAocHJlKSB7XG4gICAgICAgICAgaWYgKGF0dHJTdGFydCkgcHJlID0gZ3JvdXBFbGVtZW50c0xpbmtGbldyYXBwZXIocHJlLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICAgIHByZS5yZXF1aXJlID0gZGlyZWN0aXZlLnJlcXVpcmU7XG4gICAgICAgICAgcHJlLmRpcmVjdGl2ZU5hbWUgPSBkaXJlY3RpdmVOYW1lO1xuICAgICAgICAgIGlmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgPT09IGRpcmVjdGl2ZSB8fCBkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUpIHtcbiAgICAgICAgICAgIHByZSA9IGNsb25lQW5kQW5ub3RhdGVGbihwcmUsIHtpc29sYXRlU2NvcGU6IHRydWV9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJlTGlua0Zucy5wdXNoKHByZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc3QpIHtcbiAgICAgICAgICBpZiAoYXR0clN0YXJ0KSBwb3N0ID0gZ3JvdXBFbGVtZW50c0xpbmtGbldyYXBwZXIocG9zdCwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgICBwb3N0LnJlcXVpcmUgPSBkaXJlY3RpdmUucmVxdWlyZTtcbiAgICAgICAgICBwb3N0LmRpcmVjdGl2ZU5hbWUgPSBkaXJlY3RpdmVOYW1lO1xuICAgICAgICAgIGlmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgPT09IGRpcmVjdGl2ZSB8fCBkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUpIHtcbiAgICAgICAgICAgIHBvc3QgPSBjbG9uZUFuZEFubm90YXRlRm4ocG9zdCwge2lzb2xhdGVTY29wZTogdHJ1ZX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwb3N0TGlua0Zucy5wdXNoKHBvc3QpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG5vZGVMaW5rRm4oY2hpbGRMaW5rRm4sIHNjb3BlLCBsaW5rTm9kZSwgJHJvb3RFbGVtZW50LCBib3VuZFRyYW5zY2x1ZGVGbikge1xuICAgICAgICB2YXIgaSwgaWksIGxpbmtGbiwgaXNvbGF0ZVNjb3BlLCBjb250cm9sbGVyU2NvcGUsIGVsZW1lbnRDb250cm9sbGVycywgdHJhbnNjbHVkZUZuLCAkZWxlbWVudCxcbiAgICAgICAgICAgIGF0dHJzLCBzY29wZUJpbmRpbmdJbmZvO1xuXG4gICAgICAgIGlmIChjb21waWxlTm9kZSA9PT0gbGlua05vZGUpIHtcbiAgICAgICAgICBhdHRycyA9IHRlbXBsYXRlQXR0cnM7XG4gICAgICAgICAgJGVsZW1lbnQgPSB0ZW1wbGF0ZUF0dHJzLiQkZWxlbWVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkZWxlbWVudCA9IGpxTGl0ZShsaW5rTm9kZSk7XG4gICAgICAgICAgYXR0cnMgPSBuZXcgQXR0cmlidXRlcygkZWxlbWVudCwgdGVtcGxhdGVBdHRycyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb250cm9sbGVyU2NvcGUgPSBzY29wZTtcbiAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSkge1xuICAgICAgICAgIGlzb2xhdGVTY29wZSA9IHNjb3BlLiRuZXcodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAobmV3U2NvcGVEaXJlY3RpdmUpIHtcbiAgICAgICAgICBjb250cm9sbGVyU2NvcGUgPSBzY29wZS4kcGFyZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICAgICAgLy8gdHJhY2sgYGJvdW5kVHJhbnNjbHVkZUZuYCBzbyBpdCBjYW4gYmUgdW53cmFwcGVkIGlmIGB0cmFuc2NsdWRlRm5gXG4gICAgICAgICAgLy8gaXMgbGF0ZXIgcGFzc2VkIGFzIGBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbmAgdG8gYHB1YmxpY0xpbmtGbmBcbiAgICAgICAgICB0cmFuc2NsdWRlRm4gPSBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZTtcbiAgICAgICAgICB0cmFuc2NsdWRlRm4uJCRib3VuZFRyYW5zY2x1ZGUgPSBib3VuZFRyYW5zY2x1ZGVGbjtcbiAgICAgICAgICAvLyBleHBvc2UgdGhlIHNsb3RzIG9uIHRoZSBgJHRyYW5zY2x1ZGVgIGZ1bmN0aW9uXG4gICAgICAgICAgdHJhbnNjbHVkZUZuLmlzU2xvdEZpbGxlZCA9IGZ1bmN0aW9uKHNsb3ROYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gISFib3VuZFRyYW5zY2x1ZGVGbi4kJHNsb3RzW3Nsb3ROYW1lXTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRyb2xsZXJEaXJlY3RpdmVzKSB7XG4gICAgICAgICAgZWxlbWVudENvbnRyb2xsZXJzID0gc2V0dXBDb250cm9sbGVycygkZWxlbWVudCwgYXR0cnMsIHRyYW5zY2x1ZGVGbiwgY29udHJvbGxlckRpcmVjdGl2ZXMsIGlzb2xhdGVTY29wZSwgc2NvcGUsIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKSB7XG4gICAgICAgICAgLy8gSW5pdGlhbGl6ZSBpc29sYXRlIHNjb3BlIGJpbmRpbmdzIGZvciBuZXcgaXNvbGF0ZSBzY29wZSBkaXJlY3RpdmUuXG4gICAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlSW5mbygkZWxlbWVudCwgaXNvbGF0ZVNjb3BlLCB0cnVlLCAhKHRlbXBsYXRlRGlyZWN0aXZlICYmICh0ZW1wbGF0ZURpcmVjdGl2ZSA9PT0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIHx8XG4gICAgICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID09PSBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUuJCRvcmlnaW5hbERpcmVjdGl2ZSkpKTtcbiAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcygkZWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgICAgaXNvbGF0ZVNjb3BlLiQkaXNvbGF0ZUJpbmRpbmdzID1cbiAgICAgICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLiQkaXNvbGF0ZUJpbmRpbmdzO1xuICAgICAgICAgIHNjb3BlQmluZGluZ0luZm8gPSBpbml0aWFsaXplRGlyZWN0aXZlQmluZGluZ3Moc2NvcGUsIGF0dHJzLCBpc29sYXRlU2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNvbGF0ZVNjb3BlLiQkaXNvbGF0ZUJpbmRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSk7XG4gICAgICAgICAgaWYgKHNjb3BlQmluZGluZ0luZm8ucmVtb3ZlV2F0Y2hlcykge1xuICAgICAgICAgICAgaXNvbGF0ZVNjb3BlLiRvbignJGRlc3Ryb3knLCBzY29wZUJpbmRpbmdJbmZvLnJlbW92ZVdhdGNoZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluaXRpYWxpemUgYmluZFRvQ29udHJvbGxlciBiaW5kaW5nc1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIGVsZW1lbnRDb250cm9sbGVycykge1xuICAgICAgICAgIHZhciBjb250cm9sbGVyRGlyZWN0aXZlID0gY29udHJvbGxlckRpcmVjdGl2ZXNbbmFtZV07XG4gICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBlbGVtZW50Q29udHJvbGxlcnNbbmFtZV07XG4gICAgICAgICAgdmFyIGJpbmRpbmdzID0gY29udHJvbGxlckRpcmVjdGl2ZS4kJGJpbmRpbmdzLmJpbmRUb0NvbnRyb2xsZXI7XG5cbiAgICAgICAgICBjb250cm9sbGVyLmluc3RhbmNlID0gY29udHJvbGxlcigpO1xuICAgICAgICAgICRlbGVtZW50LmRhdGEoJyQnICsgY29udHJvbGxlckRpcmVjdGl2ZS5uYW1lICsgJ0NvbnRyb2xsZXInLCBjb250cm9sbGVyLmluc3RhbmNlKTtcbiAgICAgICAgICBjb250cm9sbGVyLmJpbmRpbmdJbmZvID1cbiAgICAgICAgICAgIGluaXRpYWxpemVEaXJlY3RpdmVCaW5kaW5ncyhjb250cm9sbGVyU2NvcGUsIGF0dHJzLCBjb250cm9sbGVyLmluc3RhbmNlLCBiaW5kaW5ncywgY29udHJvbGxlckRpcmVjdGl2ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIC8vIEJpbmQgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXJzIHRvIHRoZSBjb250cm9sbGVyLCBpZiBgcmVxdWlyZWAgaXMgYW4gb2JqZWN0IGFuZCBgYmluZFRvQ29udHJvbGxlcmAgaXMgdHJ1dGh5XG4gICAgICAgIGZvckVhY2goY29udHJvbGxlckRpcmVjdGl2ZXMsIGZ1bmN0aW9uKGNvbnRyb2xsZXJEaXJlY3RpdmUsIG5hbWUpIHtcbiAgICAgICAgICB2YXIgcmVxdWlyZSA9IGNvbnRyb2xsZXJEaXJlY3RpdmUucmVxdWlyZTtcbiAgICAgICAgICBpZiAoY29udHJvbGxlckRpcmVjdGl2ZS5iaW5kVG9Db250cm9sbGVyICYmICFpc0FycmF5KHJlcXVpcmUpICYmIGlzT2JqZWN0KHJlcXVpcmUpKSB7XG4gICAgICAgICAgICBleHRlbmQoZWxlbWVudENvbnRyb2xsZXJzW25hbWVdLmluc3RhbmNlLCBnZXRDb250cm9sbGVycyhuYW1lLCByZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBIYW5kbGUgdGhlIGluaXQgYW5kIGRlc3Ryb3kgbGlmZWN5Y2xlIGhvb2tzIG9uIGFsbCBjb250cm9sbGVycyB0aGF0IGhhdmUgdGhlbVxuICAgICAgICBmb3JFYWNoKGVsZW1lbnRDb250cm9sbGVycywgZnVuY3Rpb24oY29udHJvbGxlcikge1xuICAgICAgICAgIHZhciBjb250cm9sbGVySW5zdGFuY2UgPSBjb250cm9sbGVyLmluc3RhbmNlO1xuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS4kb25DaGFuZ2VzKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29udHJvbGxlckluc3RhbmNlLiRvbkNoYW5nZXMoY29udHJvbGxlci5iaW5kaW5nSW5mby5pbml0aWFsQ2hhbmdlcyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250cm9sbGVySW5zdGFuY2UuJG9uSW5pdCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXJJbnN0YW5jZS4kb25Jbml0KCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250cm9sbGVySW5zdGFuY2UuJGRvQ2hlY2spKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyU2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCkgeyBjb250cm9sbGVySW5zdGFuY2UuJGRvQ2hlY2soKTsgfSk7XG4gICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UuJGRvQ2hlY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLiRvbkRlc3Ryb3kpKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyU2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uIGNhbGxPbkRlc3Ryb3lIb29rKCkge1xuICAgICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UuJG9uRGVzdHJveSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQUkVMSU5LSU5HXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gcHJlTGlua0Zucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgbGlua0ZuID0gcHJlTGlua0Zuc1tpXTtcbiAgICAgICAgICBpbnZva2VMaW5rRm4obGlua0ZuLFxuICAgICAgICAgICAgICBsaW5rRm4uaXNvbGF0ZVNjb3BlID8gaXNvbGF0ZVNjb3BlIDogc2NvcGUsXG4gICAgICAgICAgICAgICRlbGVtZW50LFxuICAgICAgICAgICAgICBhdHRycyxcbiAgICAgICAgICAgICAgbGlua0ZuLnJlcXVpcmUgJiYgZ2V0Q29udHJvbGxlcnMobGlua0ZuLmRpcmVjdGl2ZU5hbWUsIGxpbmtGbi5yZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSxcbiAgICAgICAgICAgICAgdHJhbnNjbHVkZUZuXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJFQ1VSU0lPTlxuICAgICAgICAvLyBXZSBvbmx5IHBhc3MgdGhlIGlzb2xhdGUgc2NvcGUsIGlmIHRoZSBpc29sYXRlIGRpcmVjdGl2ZSBoYXMgYSB0ZW1wbGF0ZSxcbiAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBjaGlsZCBlbGVtZW50cyBkbyBub3QgYmVsb25nIHRvIHRoZSBpc29sYXRlIGRpcmVjdGl2ZS5cbiAgICAgICAgdmFyIHNjb3BlVG9DaGlsZCA9IHNjb3BlO1xuICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlICYmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUudGVtcGxhdGUgfHwgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnRlbXBsYXRlVXJsID09PSBudWxsKSkge1xuICAgICAgICAgIHNjb3BlVG9DaGlsZCA9IGlzb2xhdGVTY29wZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGRMaW5rRm4pIHtcbiAgICAgICAgICBjaGlsZExpbmtGbihzY29wZVRvQ2hpbGQsIGxpbmtOb2RlLmNoaWxkTm9kZXMsIHVuZGVmaW5lZCwgYm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUE9TVExJTktJTkdcbiAgICAgICAgZm9yIChpID0gcG9zdExpbmtGbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICBsaW5rRm4gPSBwb3N0TGlua0Zuc1tpXTtcbiAgICAgICAgICBpbnZva2VMaW5rRm4obGlua0ZuLFxuICAgICAgICAgICAgICBsaW5rRm4uaXNvbGF0ZVNjb3BlID8gaXNvbGF0ZVNjb3BlIDogc2NvcGUsXG4gICAgICAgICAgICAgICRlbGVtZW50LFxuICAgICAgICAgICAgICBhdHRycyxcbiAgICAgICAgICAgICAgbGlua0ZuLnJlcXVpcmUgJiYgZ2V0Q29udHJvbGxlcnMobGlua0ZuLmRpcmVjdGl2ZU5hbWUsIGxpbmtGbi5yZXF1aXJlLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKSxcbiAgICAgICAgICAgICAgdHJhbnNjbHVkZUZuXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyaWdnZXIgJHBvc3RMaW5rIGxpZmVjeWNsZSBob29rc1xuICAgICAgICBmb3JFYWNoKGVsZW1lbnRDb250cm9sbGVycywgZnVuY3Rpb24oY29udHJvbGxlcikge1xuICAgICAgICAgIHZhciBjb250cm9sbGVySW5zdGFuY2UgPSBjb250cm9sbGVyLmluc3RhbmNlO1xuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS4kcG9zdExpbmspKSB7XG4gICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UuJHBvc3RMaW5rKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmdW5jdGlvbiB0aGF0IGlzIGluamVjdGVkIGFzIGAkdHJhbnNjbHVkZWAuXG4gICAgICAgIC8vIE5vdGU6IGFsbCBhcmd1bWVudHMgYXJlIG9wdGlvbmFsIVxuICAgICAgICBmdW5jdGlvbiBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZShzY29wZSwgY2xvbmVBdHRhY2hGbiwgZnV0dXJlUGFyZW50RWxlbWVudCwgc2xvdE5hbWUpIHtcbiAgICAgICAgICB2YXIgdHJhbnNjbHVkZUNvbnRyb2xsZXJzO1xuICAgICAgICAgIC8vIE5vIHNjb3BlIHBhc3NlZCBpbjpcbiAgICAgICAgICBpZiAoIWlzU2NvcGUoc2NvcGUpKSB7XG4gICAgICAgICAgICBzbG90TmFtZSA9IGZ1dHVyZVBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50ID0gY2xvbmVBdHRhY2hGbjtcbiAgICAgICAgICAgIGNsb25lQXR0YWNoRm4gPSBzY29wZTtcbiAgICAgICAgICAgIHNjb3BlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSkge1xuICAgICAgICAgICAgdHJhbnNjbHVkZUNvbnRyb2xsZXJzID0gZWxlbWVudENvbnRyb2xsZXJzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWZ1dHVyZVBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGZ1dHVyZVBhcmVudEVsZW1lbnQgPSBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA/ICRlbGVtZW50LnBhcmVudCgpIDogJGVsZW1lbnQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzbG90TmFtZSkge1xuICAgICAgICAgICAgLy8gc2xvdFRyYW5zY2x1ZGVGbiBjYW4gYmUgb25lIG9mIHRocmVlIHRoaW5nczpcbiAgICAgICAgICAgIC8vICAqIGEgdHJhbnNjbHVkZSBmdW5jdGlvbiAtIGEgZmlsbGVkIHNsb3RcbiAgICAgICAgICAgIC8vICAqIGBudWxsYCAtIGFuIG9wdGlvbmFsIHNsb3QgdGhhdCB3YXMgbm90IGZpbGxlZFxuICAgICAgICAgICAgLy8gICogYHVuZGVmaW5lZGAgLSBhIHNsb3QgdGhhdCB3YXMgbm90IGRlY2xhcmVkIChpLmUuIGludmFsaWQpXG4gICAgICAgICAgICB2YXIgc2xvdFRyYW5zY2x1ZGVGbiA9IGJvdW5kVHJhbnNjbHVkZUZuLiQkc2xvdHNbc2xvdE5hbWVdO1xuICAgICAgICAgICAgaWYgKHNsb3RUcmFuc2NsdWRlRm4pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNsb3RUcmFuc2NsdWRlRm4oc2NvcGUsIGNsb25lQXR0YWNoRm4sIHRyYW5zY2x1ZGVDb250cm9sbGVycywgZnV0dXJlUGFyZW50RWxlbWVudCwgc2NvcGVUb0NoaWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNVbmRlZmluZWQoc2xvdFRyYW5zY2x1ZGVGbikpIHtcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vc2xvdCcsXG4gICAgICAgICAgICAgICAnTm8gcGFyZW50IGRpcmVjdGl2ZSB0aGF0IHJlcXVpcmVzIGEgdHJhbnNjbHVzaW9uIHdpdGggc2xvdCBuYW1lIFwiezB9XCIuICcgK1xuICAgICAgICAgICAgICAgJ0VsZW1lbnQ6IHsxfScsXG4gICAgICAgICAgICAgICBzbG90TmFtZSwgc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLCBjbG9uZUF0dGFjaEZuLCB0cmFuc2NsdWRlQ29udHJvbGxlcnMsIGZ1dHVyZVBhcmVudEVsZW1lbnQsIHNjb3BlVG9DaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29udHJvbGxlcnMoZGlyZWN0aXZlTmFtZSwgcmVxdWlyZSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycykge1xuICAgICAgdmFyIHZhbHVlO1xuXG4gICAgICBpZiAoaXNTdHJpbmcocmVxdWlyZSkpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gcmVxdWlyZS5tYXRjaChSRVFVSVJFX1BSRUZJWF9SRUdFWFApO1xuICAgICAgICB2YXIgbmFtZSA9IHJlcXVpcmUuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgIHZhciBpbmhlcml0VHlwZSA9IG1hdGNoWzFdIHx8IG1hdGNoWzNdO1xuICAgICAgICB2YXIgb3B0aW9uYWwgPSBtYXRjaFsyXSA9PT0gJz8nO1xuXG4gICAgICAgIC8vSWYgb25seSBwYXJlbnRzIHRoZW4gc3RhcnQgYXQgdGhlIHBhcmVudCBlbGVtZW50XG4gICAgICAgIGlmIChpbmhlcml0VHlwZSA9PT0gJ15eJykge1xuICAgICAgICAgICRlbGVtZW50ID0gJGVsZW1lbnQucGFyZW50KCk7XG4gICAgICAgIC8vT3RoZXJ3aXNlIGF0dGVtcHQgZ2V0dGluZyB0aGUgY29udHJvbGxlciBmcm9tIGVsZW1lbnRDb250cm9sbGVycyBpbiBjYXNlXG4gICAgICAgIC8vdGhlIGVsZW1lbnQgaXMgdHJhbnNjbHVkZWQgKGFuZCBoYXMgbm8gZGF0YSkgYW5kIHRvIGF2b2lkIC5kYXRhIGlmIHBvc3NpYmxlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWUgPSBlbGVtZW50Q29udHJvbGxlcnMgJiYgZWxlbWVudENvbnRyb2xsZXJzW25hbWVdO1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUgJiYgdmFsdWUuaW5zdGFuY2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgdmFyIGRhdGFOYW1lID0gJyQnICsgbmFtZSArICdDb250cm9sbGVyJztcbiAgICAgICAgICB2YWx1ZSA9IGluaGVyaXRUeXBlID8gJGVsZW1lbnQuaW5oZXJpdGVkRGF0YShkYXRhTmFtZSkgOiAkZWxlbWVudC5kYXRhKGRhdGFOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmFsdWUgJiYgIW9wdGlvbmFsKSB7XG4gICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2N0cmVxJyxcbiAgICAgICAgICAgICAgJ0NvbnRyb2xsZXIgXFwnezB9XFwnLCByZXF1aXJlZCBieSBkaXJlY3RpdmUgXFwnezF9XFwnLCBjYW5cXCd0IGJlIGZvdW5kIScsXG4gICAgICAgICAgICAgIG5hbWUsIGRpcmVjdGl2ZU5hbWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzQXJyYXkocmVxdWlyZSkpIHtcbiAgICAgICAgdmFsdWUgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcmVxdWlyZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgdmFsdWVbaV0gPSBnZXRDb250cm9sbGVycyhkaXJlY3RpdmVOYW1lLCByZXF1aXJlW2ldLCAkZWxlbWVudCwgZWxlbWVudENvbnRyb2xsZXJzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChyZXF1aXJlKSkge1xuICAgICAgICB2YWx1ZSA9IHt9O1xuICAgICAgICBmb3JFYWNoKHJlcXVpcmUsIGZ1bmN0aW9uKGNvbnRyb2xsZXIsIHByb3BlcnR5KSB7XG4gICAgICAgICAgdmFsdWVbcHJvcGVydHldID0gZ2V0Q29udHJvbGxlcnMoZGlyZWN0aXZlTmFtZSwgY29udHJvbGxlciwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWUgfHwgbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXR1cENvbnRyb2xsZXJzKCRlbGVtZW50LCBhdHRycywgdHJhbnNjbHVkZUZuLCBjb250cm9sbGVyRGlyZWN0aXZlcywgaXNvbGF0ZVNjb3BlLCBzY29wZSwgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKSB7XG4gICAgICB2YXIgZWxlbWVudENvbnRyb2xsZXJzID0gY3JlYXRlTWFwKCk7XG4gICAgICBmb3IgKHZhciBjb250cm9sbGVyS2V5IGluIGNvbnRyb2xsZXJEaXJlY3RpdmVzKSB7XG4gICAgICAgIHZhciBkaXJlY3RpdmUgPSBjb250cm9sbGVyRGlyZWN0aXZlc1tjb250cm9sbGVyS2V5XTtcbiAgICAgICAgdmFyIGxvY2FscyA9IHtcbiAgICAgICAgICAkc2NvcGU6IGRpcmVjdGl2ZSA9PT0gbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIHx8IGRpcmVjdGl2ZS4kJGlzb2xhdGVTY29wZSA/IGlzb2xhdGVTY29wZSA6IHNjb3BlLFxuICAgICAgICAgICRlbGVtZW50OiAkZWxlbWVudCxcbiAgICAgICAgICAkYXR0cnM6IGF0dHJzLFxuICAgICAgICAgICR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlRm5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgY29udHJvbGxlciA9IGRpcmVjdGl2ZS5jb250cm9sbGVyO1xuICAgICAgICBpZiAoY29udHJvbGxlciA9PT0gJ0AnKSB7XG4gICAgICAgICAgY29udHJvbGxlciA9IGF0dHJzW2RpcmVjdGl2ZS5uYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb250cm9sbGVySW5zdGFuY2UgPSAkY29udHJvbGxlcihjb250cm9sbGVyLCBsb2NhbHMsIHRydWUsIGRpcmVjdGl2ZS5jb250cm9sbGVyQXMpO1xuXG4gICAgICAgIC8vIEZvciBkaXJlY3RpdmVzIHdpdGggZWxlbWVudCB0cmFuc2NsdXNpb24gdGhlIGVsZW1lbnQgaXMgYSBjb21tZW50LlxuICAgICAgICAvLyBJbiB0aGlzIGNhc2UgLmRhdGEgd2lsbCBub3QgYXR0YWNoIGFueSBkYXRhLlxuICAgICAgICAvLyBJbnN0ZWFkLCB3ZSBzYXZlIHRoZSBjb250cm9sbGVycyBmb3IgdGhlIGVsZW1lbnQgaW4gYSBsb2NhbCBoYXNoIGFuZCBhdHRhY2ggdG8gLmRhdGFcbiAgICAgICAgLy8gbGF0ZXIsIG9uY2Ugd2UgaGF2ZSB0aGUgYWN0dWFsIGVsZW1lbnQuXG4gICAgICAgIGVsZW1lbnRDb250cm9sbGVyc1tkaXJlY3RpdmUubmFtZV0gPSBjb250cm9sbGVySW5zdGFuY2U7XG4gICAgICAgICRlbGVtZW50LmRhdGEoJyQnICsgZGlyZWN0aXZlLm5hbWUgKyAnQ29udHJvbGxlcicsIGNvbnRyb2xsZXJJbnN0YW5jZS5pbnN0YW5jZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZWxlbWVudENvbnRyb2xsZXJzO1xuICAgIH1cblxuICAgIC8vIERlcGVuZGluZyB1cG9uIHRoZSBjb250ZXh0IGluIHdoaWNoIGEgZGlyZWN0aXZlIGZpbmRzIGl0c2VsZiBpdCBtaWdodCBuZWVkIHRvIGhhdmUgYSBuZXcgaXNvbGF0ZWRcbiAgICAvLyBvciBjaGlsZCBzY29wZSBjcmVhdGVkLiBGb3IgaW5zdGFuY2U6XG4gICAgLy8gKiBpZiB0aGUgZGlyZWN0aXZlIGhhcyBiZWVuIHB1bGxlZCBpbnRvIGEgdGVtcGxhdGUgYmVjYXVzZSBhbm90aGVyIGRpcmVjdGl2ZSB3aXRoIGEgaGlnaGVyIHByaW9yaXR5XG4gICAgLy8gYXNrZWQgZm9yIGVsZW1lbnQgdHJhbnNjbHVzaW9uXG4gICAgLy8gKiBpZiB0aGUgZGlyZWN0aXZlIGl0c2VsZiBhc2tzIGZvciB0cmFuc2NsdXNpb24gYnV0IGl0IGlzIGF0IHRoZSByb290IG9mIGEgdGVtcGxhdGUgYW5kIHRoZSBvcmlnaW5hbFxuICAgIC8vIGVsZW1lbnQgd2FzIHJlcGxhY2VkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTI5MzZcbiAgICBmdW5jdGlvbiBtYXJrRGlyZWN0aXZlU2NvcGUoZGlyZWN0aXZlcywgaXNvbGF0ZVNjb3BlLCBuZXdTY29wZSkge1xuICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZGlyZWN0aXZlcy5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgIGRpcmVjdGl2ZXNbal0gPSBpbmhlcml0KGRpcmVjdGl2ZXNbal0sIHskJGlzb2xhdGVTY29wZTogaXNvbGF0ZVNjb3BlLCAkJG5ld1Njb3BlOiBuZXdTY29wZX0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGxvb2tzIHVwIHRoZSBkaXJlY3RpdmUgYW5kIGRlY29yYXRlcyBpdCB3aXRoIGV4Y2VwdGlvbiBoYW5kbGluZyBhbmQgcHJvcGVyIHBhcmFtZXRlcnMuIFdlXG4gICAgICogY2FsbCB0aGlzIHRoZSBib3VuZERpcmVjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGRpcmVjdGl2ZSB0byBsb29rIHVwLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiBUaGUgZGlyZWN0aXZlIG11c3QgYmUgZm91bmQgaW4gc3BlY2lmaWMgZm9ybWF0LlxuICAgICAqICAgU3RyaW5nIGNvbnRhaW5pbmcgYW55IG9mIHRoZXNlcyBjaGFyYWN0ZXJzOlxuICAgICAqXG4gICAgICogICAqIGBFYDogZWxlbWVudCBuYW1lXG4gICAgICogICAqIGBBJzogYXR0cmlidXRlXG4gICAgICogICAqIGBDYDogY2xhc3NcbiAgICAgKiAgICogYE1gOiBjb21tZW50XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgZGlyZWN0aXZlIHdhcyBhZGRlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGREaXJlY3RpdmUodERpcmVjdGl2ZXMsIG5hbWUsIGxvY2F0aW9uLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBzdGFydEF0dHJOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRBdHRyTmFtZSkge1xuICAgICAgaWYgKG5hbWUgPT09IGlnbm9yZURpcmVjdGl2ZSkgcmV0dXJuIG51bGw7XG4gICAgICB2YXIgbWF0Y2ggPSBudWxsO1xuICAgICAgaWYgKGhhc0RpcmVjdGl2ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgZm9yICh2YXIgZGlyZWN0aXZlLCBkaXJlY3RpdmVzID0gJGluamVjdG9yLmdldChuYW1lICsgU3VmZml4KSxcbiAgICAgICAgICAgIGkgPSAwLCBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGRpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbaV07XG4gICAgICAgICAgaWYgKChpc1VuZGVmaW5lZChtYXhQcmlvcml0eSkgfHwgbWF4UHJpb3JpdHkgPiBkaXJlY3RpdmUucHJpb3JpdHkpICYmXG4gICAgICAgICAgICAgICBkaXJlY3RpdmUucmVzdHJpY3QuaW5kZXhPZihsb2NhdGlvbikgIT09IC0xKSB7XG4gICAgICAgICAgICBpZiAoc3RhcnRBdHRyTmFtZSkge1xuICAgICAgICAgICAgICBkaXJlY3RpdmUgPSBpbmhlcml0KGRpcmVjdGl2ZSwgeyQkc3RhcnQ6IHN0YXJ0QXR0ck5hbWUsICQkZW5kOiBlbmRBdHRyTmFtZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkaXJlY3RpdmUuJCRiaW5kaW5ncykge1xuICAgICAgICAgICAgICB2YXIgYmluZGluZ3MgPSBkaXJlY3RpdmUuJCRiaW5kaW5ncyA9XG4gICAgICAgICAgICAgICAgICBwYXJzZURpcmVjdGl2ZUJpbmRpbmdzKGRpcmVjdGl2ZSwgZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICAgICAgICBpZiAoaXNPYmplY3QoYmluZGluZ3MuaXNvbGF0ZVNjb3BlKSkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS4kJGlzb2xhdGVCaW5kaW5ncyA9IGJpbmRpbmdzLmlzb2xhdGVTY29wZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdERpcmVjdGl2ZXMucHVzaChkaXJlY3RpdmUpO1xuICAgICAgICAgICAgbWF0Y2ggPSBkaXJlY3RpdmU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBsb29rcyB1cCB0aGUgZGlyZWN0aXZlIGFuZCByZXR1cm5zIHRydWUgaWYgaXQgaXMgYSBtdWx0aS1lbGVtZW50IGRpcmVjdGl2ZSxcbiAgICAgKiBhbmQgdGhlcmVmb3JlIHJlcXVpcmVzIERPTSBub2RlcyBiZXR3ZWVuIC1zdGFydCBhbmQgLWVuZCBtYXJrZXJzIHRvIGJlIGdyb3VwZWRcbiAgICAgKiB0b2dldGhlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGRpcmVjdGl2ZSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgZGlyZWN0aXZlIHdhcyByZWdpc3RlcmVkIGFzIG11bHRpLWVsZW1lbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlSXNNdWx0aUVsZW1lbnQobmFtZSkge1xuICAgICAgaWYgKGhhc0RpcmVjdGl2ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgZm9yICh2YXIgZGlyZWN0aXZlLCBkaXJlY3RpdmVzID0gJGluamVjdG9yLmdldChuYW1lICsgU3VmZml4KSxcbiAgICAgICAgICAgIGkgPSAwLCBpaSA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGRpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbaV07XG4gICAgICAgICAgaWYgKGRpcmVjdGl2ZS5tdWx0aUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIGVsZW1lbnQgaXMgcmVwbGFjZWQgd2l0aCBIVE1MIHRlbXBsYXRlIHRoZW4gdGhlIG5ldyBhdHRyaWJ1dGVzXG4gICAgICogb24gdGhlIHRlbXBsYXRlIG5lZWQgdG8gYmUgbWVyZ2VkIHdpdGggdGhlIGV4aXN0aW5nIGF0dHJpYnV0ZXMgaW4gdGhlIERPTS5cbiAgICAgKiBUaGUgZGVzaXJlZCBlZmZlY3QgaXMgdG8gaGF2ZSBib3RoIG9mIHRoZSBhdHRyaWJ1dGVzIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZHN0IGRlc3RpbmF0aW9uIGF0dHJpYnV0ZXMgKG9yaWdpbmFsIERPTSlcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gc3JjIHNvdXJjZSBhdHRyaWJ1dGVzIChmcm9tIHRoZSBkaXJlY3RpdmUgdGVtcGxhdGUpXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXMoZHN0LCBzcmMpIHtcbiAgICAgIHZhciBzcmNBdHRyID0gc3JjLiRhdHRyLFxuICAgICAgICAgIGRzdEF0dHIgPSBkc3QuJGF0dHI7XG5cbiAgICAgIC8vIHJlYXBwbHkgdGhlIG9sZCBhdHRyaWJ1dGVzIHRvIHRoZSBuZXcgZWxlbWVudFxuICAgICAgZm9yRWFjaChkc3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleS5jaGFyQXQoMCkgIT09ICckJykge1xuICAgICAgICAgIGlmIChzcmNba2V5XSAmJiBzcmNba2V5XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdmFsdWUgKz0gKGtleSA9PT0gJ3N0eWxlJyA/ICc7JyA6ICcgJykgKyBzcmNba2V5XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gc3JjW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRzdC4kc2V0KGtleSwgdmFsdWUsIHRydWUsIHNyY0F0dHJba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBjb3B5IHRoZSBuZXcgYXR0cmlidXRlcyBvbiB0aGUgb2xkIGF0dHJzIG9iamVjdFxuICAgICAgZm9yRWFjaChzcmMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBzZXQgdGhpcyBhdHRyaWJ1dGUgaW4gdGhlIGxvb3AgYWJvdmUuXG4gICAgICAgIC8vIGBkc3RgIHdpbGwgbmV2ZXIgY29udGFpbiBoYXNPd25Qcm9wZXJ0eSBhcyBET00gcGFyc2VyIHdvbid0IGxldCBpdC5cbiAgICAgICAgLy8gWW91IHdpbGwgZ2V0IGFuIFwiSW52YWxpZENoYXJhY3RlckVycm9yOiBET00gRXhjZXB0aW9uIDVcIiBlcnJvciBpZiB5b3VcbiAgICAgICAgLy8gaGF2ZSBhbiBhdHRyaWJ1dGUgbGlrZSBcImhhcy1vd24tcHJvcGVydHlcIiBvciBcImRhdGEtaGFzLW93bi1wcm9wZXJ0eVwiLCBldGMuXG4gICAgICAgIGlmICghZHN0Lmhhc093blByb3BlcnR5KGtleSkgJiYga2V5LmNoYXJBdCgwKSAhPT0gJyQnKSB7XG4gICAgICAgICAgZHN0W2tleV0gPSB2YWx1ZTtcblxuICAgICAgICAgIGlmIChrZXkgIT09ICdjbGFzcycgJiYga2V5ICE9PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICBkc3RBdHRyW2tleV0gPSBzcmNBdHRyW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNvbXBpbGVUZW1wbGF0ZVVybChkaXJlY3RpdmVzLCAkY29tcGlsZU5vZGUsIHRBdHRycyxcbiAgICAgICAgJHJvb3RFbGVtZW50LCBjaGlsZFRyYW5zY2x1ZGVGbiwgcHJlTGlua0ZucywgcG9zdExpbmtGbnMsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcbiAgICAgIHZhciBsaW5rUXVldWUgPSBbXSxcbiAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbixcbiAgICAgICAgICBhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sXG4gICAgICAgICAgYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZSA9ICRjb21waWxlTm9kZVswXSxcbiAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUgPSBkaXJlY3RpdmVzLnNoaWZ0KCksXG4gICAgICAgICAgZGVyaXZlZFN5bmNEaXJlY3RpdmUgPSBpbmhlcml0KG9yaWdBc3luY0RpcmVjdGl2ZSwge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IG51bGwsIHRyYW5zY2x1ZGU6IG51bGwsIHJlcGxhY2U6IG51bGwsICQkb3JpZ2luYWxEaXJlY3RpdmU6IG9yaWdBc3luY0RpcmVjdGl2ZVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHRlbXBsYXRlVXJsID0gKGlzRnVuY3Rpb24ob3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsKSlcbiAgICAgICAgICAgICAgPyBvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwoJGNvbXBpbGVOb2RlLCB0QXR0cnMpXG4gICAgICAgICAgICAgIDogb3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsLFxuICAgICAgICAgIHRlbXBsYXRlTmFtZXNwYWNlID0gb3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlTmFtZXNwYWNlO1xuXG4gICAgICAkY29tcGlsZU5vZGUuZW1wdHkoKTtcblxuICAgICAgJHRlbXBsYXRlUmVxdWVzdCh0ZW1wbGF0ZVVybClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIHZhciBjb21waWxlTm9kZSwgdGVtcFRlbXBsYXRlQXR0cnMsICR0ZW1wbGF0ZSwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbjtcblxuICAgICAgICAgIGNvbnRlbnQgPSBkZW5vcm1hbGl6ZVRlbXBsYXRlKGNvbnRlbnQpO1xuXG4gICAgICAgICAgaWYgKG9yaWdBc3luY0RpcmVjdGl2ZS5yZXBsYWNlKSB7XG4gICAgICAgICAgICBpZiAoanFMaXRlSXNUZXh0Tm9kZShjb250ZW50KSkge1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IHJlbW92ZUNvbW1lbnRzKHdyYXBUZW1wbGF0ZSh0ZW1wbGF0ZU5hbWVzcGFjZSwgdHJpbShjb250ZW50KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSAkdGVtcGxhdGVbMF07XG5cbiAgICAgICAgICAgIGlmICgkdGVtcGxhdGUubGVuZ3RoICE9PSAxIHx8IGNvbXBpbGVOb2RlLm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfRUxFTUVOVCkge1xuICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycigndHBscnQnLFxuICAgICAgICAgICAgICAgICAgJ1RlbXBsYXRlIGZvciBkaXJlY3RpdmUgXFwnezB9XFwnIG11c3QgaGF2ZSBleGFjdGx5IG9uZSByb290IGVsZW1lbnQuIHsxfScsXG4gICAgICAgICAgICAgICAgICBvcmlnQXN5bmNEaXJlY3RpdmUubmFtZSwgdGVtcGxhdGVVcmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZW1wVGVtcGxhdGVBdHRycyA9IHskYXR0cjoge319O1xuICAgICAgICAgICAgcmVwbGFjZVdpdGgoJHJvb3RFbGVtZW50LCAkY29tcGlsZU5vZGUsIGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZURpcmVjdGl2ZXMgPSBjb2xsZWN0RGlyZWN0aXZlcyhjb21waWxlTm9kZSwgW10sIHRlbXBUZW1wbGF0ZUF0dHJzKTtcblxuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KG9yaWdBc3luY0RpcmVjdGl2ZS5zY29wZSkpIHtcbiAgICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIGRpcmVjdGl2ZSB0aGF0IGNhdXNlZCB0aGUgdGVtcGxhdGUgdG8gYmUgbG9hZGVkIGFzeW5jIHJlcXVpcmVkXG4gICAgICAgICAgICAgIC8vIGFuIGlzb2xhdGUgc2NvcGVcbiAgICAgICAgICAgICAgbWFya0RpcmVjdGl2ZVNjb3BlKHRlbXBsYXRlRGlyZWN0aXZlcywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXJlY3RpdmVzID0gdGVtcGxhdGVEaXJlY3RpdmVzLmNvbmNhdChkaXJlY3RpdmVzKTtcbiAgICAgICAgICAgIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKHRBdHRycywgdGVtcFRlbXBsYXRlQXR0cnMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb21waWxlTm9kZSA9IGJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGU7XG4gICAgICAgICAgICAkY29tcGlsZU5vZGUuaHRtbChjb250ZW50KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkaXJlY3RpdmVzLnVuc2hpZnQoZGVyaXZlZFN5bmNEaXJlY3RpdmUpO1xuXG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4gPSBhcHBseURpcmVjdGl2ZXNUb05vZGUoZGlyZWN0aXZlcywgY29tcGlsZU5vZGUsIHRBdHRycyxcbiAgICAgICAgICAgICAgY2hpbGRUcmFuc2NsdWRlRm4sICRjb21waWxlTm9kZSwgb3JpZ0FzeW5jRGlyZWN0aXZlLCBwcmVMaW5rRm5zLCBwb3N0TGlua0ZucyxcbiAgICAgICAgICAgICAgcHJldmlvdXNDb21waWxlQ29udGV4dCk7XG4gICAgICAgICAgZm9yRWFjaCgkcm9vdEVsZW1lbnQsIGZ1bmN0aW9uKG5vZGUsIGkpIHtcbiAgICAgICAgICAgIGlmIChub2RlID09PSBjb21waWxlTm9kZSkge1xuICAgICAgICAgICAgICAkcm9vdEVsZW1lbnRbaV0gPSAkY29tcGlsZU5vZGVbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuID0gY29tcGlsZU5vZGVzKCRjb21waWxlTm9kZVswXS5jaGlsZE5vZGVzLCBjaGlsZFRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgICB3aGlsZSAobGlua1F1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHNjb3BlID0gbGlua1F1ZXVlLnNoaWZ0KCksXG4gICAgICAgICAgICAgICAgYmVmb3JlVGVtcGxhdGVMaW5rTm9kZSA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxuICAgICAgICAgICAgICAgIGxpbmtSb290RWxlbWVudCA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxuICAgICAgICAgICAgICAgIGJvdW5kVHJhbnNjbHVkZUZuID0gbGlua1F1ZXVlLnNoaWZ0KCksXG4gICAgICAgICAgICAgICAgbGlua05vZGUgPSAkY29tcGlsZU5vZGVbMF07XG5cbiAgICAgICAgICAgIGlmIChzY29wZS4kJGRlc3Ryb3llZCkgY29udGludWU7XG5cbiAgICAgICAgICAgIGlmIChiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlICE9PSBiZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlKSB7XG4gICAgICAgICAgICAgIHZhciBvbGRDbGFzc2VzID0gYmVmb3JlVGVtcGxhdGVMaW5rTm9kZS5jbGFzc05hbWU7XG5cbiAgICAgICAgICAgICAgaWYgKCEocHJldmlvdXNDb21waWxlQ29udGV4dC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSAmJlxuICAgICAgICAgICAgICAgICAgb3JpZ0FzeW5jRGlyZWN0aXZlLnJlcGxhY2UpKSB7XG4gICAgICAgICAgICAgICAgLy8gaXQgd2FzIGNsb25lZCB0aGVyZWZvcmUgd2UgaGF2ZSB0byBjbG9uZSBhcyB3ZWxsLlxuICAgICAgICAgICAgICAgIGxpbmtOb2RlID0ganFMaXRlQ2xvbmUoY29tcGlsZU5vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlcGxhY2VXaXRoKGxpbmtSb290RWxlbWVudCwganFMaXRlKGJlZm9yZVRlbXBsYXRlTGlua05vZGUpLCBsaW5rTm9kZSk7XG5cbiAgICAgICAgICAgICAgLy8gQ29weSBpbiBDU1MgY2xhc3NlcyBmcm9tIG9yaWdpbmFsIG5vZGVcbiAgICAgICAgICAgICAgc2FmZUFkZENsYXNzKGpxTGl0ZShsaW5rTm9kZSksIG9sZENsYXNzZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50KSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSwgYm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IGJvdW5kVHJhbnNjbHVkZUZuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4oYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuLCBzY29wZSwgbGlua05vZGUsICRyb290RWxlbWVudCxcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmtRdWV1ZSA9IG51bGw7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgaWYgKGlzRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlbGF5ZWROb2RlTGlua0ZuKGlnbm9yZUNoaWxkTGlua0ZuLCBzY29wZSwgbm9kZSwgcm9vdEVsZW1lbnQsIGJvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICAgIHZhciBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gYm91bmRUcmFuc2NsdWRlRm47XG4gICAgICAgIGlmIChzY29wZS4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICBpZiAobGlua1F1ZXVlKSB7XG4gICAgICAgICAgbGlua1F1ZXVlLnB1c2goc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICByb290RWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBjcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSwgYm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhZnRlclRlbXBsYXRlTm9kZUxpbmtGbihhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sIHNjb3BlLCBub2RlLCByb290RWxlbWVudCwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBTb3J0aW5nIGZ1bmN0aW9uIGZvciBib3VuZCBkaXJlY3RpdmVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJ5UHJpb3JpdHkoYSwgYikge1xuICAgICAgdmFyIGRpZmYgPSBiLnByaW9yaXR5IC0gYS5wcmlvcml0eTtcbiAgICAgIGlmIChkaWZmICE9PSAwKSByZXR1cm4gZGlmZjtcbiAgICAgIGlmIChhLm5hbWUgIT09IGIubmFtZSkgcmV0dXJuIChhLm5hbWUgPCBiLm5hbWUpID8gLTEgOiAxO1xuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFzc2VydE5vRHVwbGljYXRlKHdoYXQsIHByZXZpb3VzRGlyZWN0aXZlLCBkaXJlY3RpdmUsIGVsZW1lbnQpIHtcblxuICAgICAgZnVuY3Rpb24gd3JhcE1vZHVsZU5hbWVJZkRlZmluZWQobW9kdWxlTmFtZSkge1xuICAgICAgICByZXR1cm4gbW9kdWxlTmFtZSA/XG4gICAgICAgICAgKCcgKG1vZHVsZTogJyArIG1vZHVsZU5hbWUgKyAnKScpIDpcbiAgICAgICAgICAnJztcbiAgICAgIH1cblxuICAgICAgaWYgKHByZXZpb3VzRGlyZWN0aXZlKSB7XG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdtdWx0aWRpcicsICdNdWx0aXBsZSBkaXJlY3RpdmVzIFt7MH17MX0sIHsyfXszfV0gYXNraW5nIGZvciB7NH0gb246IHs1fScsXG4gICAgICAgICAgICBwcmV2aW91c0RpcmVjdGl2ZS5uYW1lLCB3cmFwTW9kdWxlTmFtZUlmRGVmaW5lZChwcmV2aW91c0RpcmVjdGl2ZS4kJG1vZHVsZU5hbWUpLFxuICAgICAgICAgICAgZGlyZWN0aXZlLm5hbWUsIHdyYXBNb2R1bGVOYW1lSWZEZWZpbmVkKGRpcmVjdGl2ZS4kJG1vZHVsZU5hbWUpLCB3aGF0LCBzdGFydGluZ1RhZyhlbGVtZW50KSk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBhZGRUZXh0SW50ZXJwb2xhdGVEaXJlY3RpdmUoZGlyZWN0aXZlcywgdGV4dCkge1xuICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUodGV4dCwgdHJ1ZSk7XG4gICAgICBpZiAoaW50ZXJwb2xhdGVGbikge1xuICAgICAgICBkaXJlY3RpdmVzLnB1c2goe1xuICAgICAgICAgIHByaW9yaXR5OiAwLFxuICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIHRleHRJbnRlcnBvbGF0ZUNvbXBpbGVGbih0ZW1wbGF0ZU5vZGUpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZU5vZGVQYXJlbnQgPSB0ZW1wbGF0ZU5vZGUucGFyZW50KCksXG4gICAgICAgICAgICAgICAgaGFzQ29tcGlsZVBhcmVudCA9ICEhdGVtcGxhdGVOb2RlUGFyZW50Lmxlbmd0aDtcblxuICAgICAgICAgICAgLy8gV2hlbiB0cmFuc2NsdWRpbmcgYSB0ZW1wbGF0ZSB0aGF0IGhhcyBiaW5kaW5ncyBpbiB0aGUgcm9vdFxuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgaGF2ZSBhIHBhcmVudCBhbmQgdGh1cyBuZWVkIHRvIGFkZCB0aGUgY2xhc3MgZHVyaW5nIGxpbmtpbmcgZm4uXG4gICAgICAgICAgICBpZiAoaGFzQ29tcGlsZVBhcmVudCkgY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyh0ZW1wbGF0ZU5vZGVQYXJlbnQpO1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdGV4dEludGVycG9sYXRlTGlua0ZuKHNjb3BlLCBub2RlKSB7XG4gICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudCgpO1xuICAgICAgICAgICAgICBpZiAoIWhhc0NvbXBpbGVQYXJlbnQpIGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3MocGFyZW50KTtcbiAgICAgICAgICAgICAgY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvKHBhcmVudCwgaW50ZXJwb2xhdGVGbi5leHByZXNzaW9ucyk7XG4gICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChpbnRlcnBvbGF0ZUZuLCBmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICBub2RlWzBdLm5vZGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHdyYXBUZW1wbGF0ZSh0eXBlLCB0ZW1wbGF0ZSkge1xuICAgICAgdHlwZSA9IGxvd2VyY2FzZSh0eXBlIHx8ICdodG1sJyk7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3N2Zyc6XG4gICAgICBjYXNlICdtYXRoJzpcbiAgICAgICAgdmFyIHdyYXBwZXIgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gJzwnICsgdHlwZSArICc+JyArIHRlbXBsYXRlICsgJzwvJyArIHR5cGUgKyAnPic7XG4gICAgICAgIHJldHVybiB3cmFwcGVyLmNoaWxkTm9kZXNbMF0uY2hpbGROb2RlcztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGdldFRydXN0ZWRDb250ZXh0KG5vZGUsIGF0dHJOb3JtYWxpemVkTmFtZSkge1xuICAgICAgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ3NyY2RvYycpIHtcbiAgICAgICAgcmV0dXJuICRzY2UuSFRNTDtcbiAgICAgIH1cbiAgICAgIHZhciB0YWcgPSBub2RlTmFtZV8obm9kZSk7XG4gICAgICAvLyBBbGwgdGFncyB3aXRoIHNyYyBhdHRyaWJ1dGVzIHJlcXVpcmUgYSBSRVNPVVJDRV9VUkwgdmFsdWUsIGV4Y2VwdCBmb3JcbiAgICAgIC8vIGltZyBhbmQgdmFyaW91cyBodG1sNSBtZWRpYSB0YWdzLCB3aGljaCByZXF1aXJlIHRoZSBNRURJQV9VUkwgY29udGV4dC5cbiAgICAgIGlmIChhdHRyTm9ybWFsaXplZE5hbWUgPT09ICdzcmMnIHx8IGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ25nU3JjJykge1xuICAgICAgICBpZiAoWydpbWcnLCAndmlkZW8nLCAnYXVkaW8nLCAnc291cmNlJywgJ3RyYWNrJ10uaW5kZXhPZih0YWcpID09PSAtMSkge1xuICAgICAgICAgIHJldHVybiAkc2NlLlJFU09VUkNFX1VSTDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHNjZS5NRURJQV9VUkw7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ3hsaW5rSHJlZicpIHtcbiAgICAgICAgLy8gU29tZSB4bGluazpocmVmIGFyZSBva2F5LCBtb3N0IGFyZW4ndFxuICAgICAgICBpZiAodGFnID09PSAnaW1hZ2UnKSByZXR1cm4gJHNjZS5NRURJQV9VUkw7XG4gICAgICAgIGlmICh0YWcgPT09ICdhJykgcmV0dXJuICRzY2UuVVJMO1xuICAgICAgICByZXR1cm4gJHNjZS5SRVNPVVJDRV9VUkw7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIC8vIEZvcm1hY3Rpb25cbiAgICAgICAgICAodGFnID09PSAnZm9ybScgJiYgYXR0ck5vcm1hbGl6ZWROYW1lID09PSAnYWN0aW9uJykgfHxcbiAgICAgICAgICAvLyBJZiByZWxhdGl2ZSBVUkxzIGNhbiBnbyB3aGVyZSB0aGV5IGFyZSBub3QgZXhwZWN0ZWQgdG8sIHRoZW5cbiAgICAgICAgICAvLyBhbGwgc29ydHMgb2YgdHJ1c3QgaXNzdWVzIGNhbiBhcmlzZS5cbiAgICAgICAgICAodGFnID09PSAnYmFzZScgJiYgYXR0ck5vcm1hbGl6ZWROYW1lID09PSAnaHJlZicpIHx8XG4gICAgICAgICAgLy8gbGlua3MgY2FuIGJlIHN0eWxlc2hlZXRzIG9yIGltcG9ydHMsIHdoaWNoIGNhbiBydW4gc2NyaXB0IGluIHRoZSBjdXJyZW50IG9yaWdpblxuICAgICAgICAgICh0YWcgPT09ICdsaW5rJyAmJiBhdHRyTm9ybWFsaXplZE5hbWUgPT09ICdocmVmJylcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gJHNjZS5SRVNPVVJDRV9VUkw7XG4gICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2EnICYmIChhdHRyTm9ybWFsaXplZE5hbWUgPT09ICdocmVmJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ck5vcm1hbGl6ZWROYW1lID09PSAnbmdIcmVmJykpIHtcbiAgICAgICAgcmV0dXJuICRzY2UuVVJMO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYWRkQXR0ckludGVycG9sYXRlRGlyZWN0aXZlKG5vZGUsIGRpcmVjdGl2ZXMsIHZhbHVlLCBuYW1lLCBpc05nQXR0cikge1xuICAgICAgdmFyIHRydXN0ZWRDb250ZXh0ID0gZ2V0VHJ1c3RlZENvbnRleHQobm9kZSwgbmFtZSk7XG4gICAgICB2YXIgbXVzdEhhdmVFeHByZXNzaW9uID0gIWlzTmdBdHRyO1xuICAgICAgdmFyIGFsbE9yTm90aGluZyA9IEFMTF9PUl9OT1RISU5HX0FUVFJTW25hbWVdIHx8IGlzTmdBdHRyO1xuXG4gICAgICB2YXIgaW50ZXJwb2xhdGVGbiA9ICRpbnRlcnBvbGF0ZSh2YWx1ZSwgbXVzdEhhdmVFeHByZXNzaW9uLCB0cnVzdGVkQ29udGV4dCwgYWxsT3JOb3RoaW5nKTtcblxuICAgICAgLy8gbm8gaW50ZXJwb2xhdGlvbiBmb3VuZCAtPiBpZ25vcmVcbiAgICAgIGlmICghaW50ZXJwb2xhdGVGbikgcmV0dXJuO1xuXG4gICAgICBpZiAobmFtZSA9PT0gJ211bHRpcGxlJyAmJiBub2RlTmFtZV8obm9kZSkgPT09ICdzZWxlY3QnKSB7XG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdzZWxtdWx0aScsXG4gICAgICAgICAgICAnQmluZGluZyB0byB0aGUgXFwnbXVsdGlwbGVcXCcgYXR0cmlidXRlIGlzIG5vdCBzdXBwb3J0ZWQuIEVsZW1lbnQ6IHswfScsXG4gICAgICAgICAgICBzdGFydGluZ1RhZyhub2RlKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQLnRlc3QobmFtZSkpIHtcbiAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vZG9tZXZlbnRzJyxcbiAgICAgICAgICAgICdJbnRlcnBvbGF0aW9ucyBmb3IgSFRNTCBET00gZXZlbnQgYXR0cmlidXRlcyBhcmUgZGlzYWxsb3dlZC4gIFBsZWFzZSB1c2UgdGhlICcgK1xuICAgICAgICAgICAgICAgICduZy0gdmVyc2lvbnMgKHN1Y2ggYXMgbmctY2xpY2sgaW5zdGVhZCBvZiBvbmNsaWNrKSBpbnN0ZWFkLicpO1xuICAgICAgfVxuXG4gICAgICBkaXJlY3RpdmVzLnB1c2goe1xuICAgICAgICBwcmlvcml0eTogMTAwLFxuICAgICAgICBjb21waWxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHByZTogZnVuY3Rpb24gYXR0ckludGVycG9sYXRlUHJlTGlua0ZuKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgICAgICAgICAgdmFyICQkb2JzZXJ2ZXJzID0gKGF0dHIuJCRvYnNlcnZlcnMgfHwgKGF0dHIuJCRvYnNlcnZlcnMgPSBjcmVhdGVNYXAoKSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGF0dHJpYnV0ZSBoYXMgY2hhbmdlZCBzaW5jZSBsYXN0ICRpbnRlcnBvbGF0ZSgpZWRcbiAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBhdHRyW25hbWVdO1xuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gaW50ZXJwb2xhdGUgYWdhaW4gc2luY2UgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBoYXMgYmVlbiB1cGRhdGVkXG4gICAgICAgICAgICAgICAgICAvLyAoZS5nLiBieSBhbm90aGVyIGRpcmVjdGl2ZSdzIGNvbXBpbGUgZnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgICAvLyBlbnN1cmUgdW5zZXQvZW1wdHkgdmFsdWVzIG1ha2UgaW50ZXJwb2xhdGVGbiBmYWxzeVxuICAgICAgICAgICAgICAgICAgaW50ZXJwb2xhdGVGbiA9IG5ld1ZhbHVlICYmICRpbnRlcnBvbGF0ZShuZXdWYWx1ZSwgdHJ1ZSwgdHJ1c3RlZENvbnRleHQsIGFsbE9yTm90aGluZyk7XG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGlmIGF0dHJpYnV0ZSB3YXMgdXBkYXRlZCBzbyB0aGF0IHRoZXJlIGlzIG5vIGludGVycG9sYXRpb24gZ29pbmcgb24gd2UgZG9uJ3Qgd2FudCB0b1xuICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIGFueSBvYnNlcnZlcnNcbiAgICAgICAgICAgICAgICBpZiAoIWludGVycG9sYXRlRm4pIHJldHVybjtcblxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgYXR0ciBvYmplY3Qgc28gdGhhdCBpdCdzIHJlYWR5IGluIGNhc2Ugd2UgbmVlZCB0aGUgdmFsdWUgZm9yIGlzb2xhdGVcbiAgICAgICAgICAgICAgICAvLyBzY29wZSBpbml0aWFsaXphdGlvbiwgb3RoZXJ3aXNlIHRoZSB2YWx1ZSB3b3VsZCBub3QgYmUgYXZhaWxhYmxlIGZyb20gaXNvbGF0ZVxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdGl2ZSdzIGxpbmtpbmcgZm4gZHVyaW5nIGxpbmtpbmcgcGhhc2VcbiAgICAgICAgICAgICAgICBhdHRyW25hbWVdID0gaW50ZXJwb2xhdGVGbihzY29wZSk7XG5cbiAgICAgICAgICAgICAgICAoJCRvYnNlcnZlcnNbbmFtZV0gfHwgKCQkb2JzZXJ2ZXJzW25hbWVdID0gW10pKS4kJGludGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAoYXR0ci4kJG9ic2VydmVycyAmJiBhdHRyLiQkb2JzZXJ2ZXJzW25hbWVdLiQkc2NvcGUgfHwgc2NvcGUpLlxuICAgICAgICAgICAgICAgICAgJHdhdGNoKGludGVycG9sYXRlRm4sIGZ1bmN0aW9uIGludGVycG9sYXRlRm5XYXRjaEFjdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9zcGVjaWFsIGNhc2UgZm9yIGNsYXNzIGF0dHJpYnV0ZSBhZGRpdGlvbiArIHJlbW92YWxcbiAgICAgICAgICAgICAgICAgICAgLy9zbyB0aGF0IGNsYXNzIGNoYW5nZXMgY2FuIHRhcCBpbnRvIHRoZSBhbmltYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy9ob29rcyBwcm92aWRlZCBieSB0aGUgJGFuaW1hdGUgc2VydmljZS4gQmUgc3VyZSB0b1xuICAgICAgICAgICAgICAgICAgICAvL3NraXAgYW5pbWF0aW9ucyB3aGVuIHRoZSBmaXJzdCBkaWdlc3Qgb2NjdXJzICh3aGVuXG4gICAgICAgICAgICAgICAgICAgIC8vYm90aCB0aGUgbmV3IGFuZCB0aGUgb2xkIHZhbHVlcyBhcmUgdGhlIHNhbWUpIHNpbmNlXG4gICAgICAgICAgICAgICAgICAgIC8vdGhlIENTUyBjbGFzc2VzIGFyZSB0aGUgbm9uLWludGVycG9sYXRlZCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgbmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYXR0ci4kdXBkYXRlQ2xhc3MobmV3VmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyLiRzZXQobmFtZSwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgYSBzcGVjaWFsIGpxTGl0ZS5yZXBsYWNlV2l0aCwgd2hpY2ggY2FuIHJlcGxhY2UgaXRlbXMgd2hpY2hcbiAgICAgKiBoYXZlIG5vIHBhcmVudHMsIHByb3ZpZGVkIHRoYXQgdGhlIGNvbnRhaW5pbmcganFMaXRlIGNvbGxlY3Rpb24gaXMgcHJvdmlkZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0pxTGl0ZT19ICRyb290RWxlbWVudCBUaGUgcm9vdCBvZiB0aGUgY29tcGlsZSB0cmVlLiBVc2VkIHNvIHRoYXQgd2UgY2FuIHJlcGxhY2Ugbm9kZXNcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0aGUgcm9vdCBvZiB0aGUgdHJlZS5cbiAgICAgKiBAcGFyYW0ge0pxTGl0ZX0gZWxlbWVudHNUb1JlbW92ZSBUaGUganFMaXRlIGVsZW1lbnQgd2hpY2ggd2UgYXJlIGdvaW5nIHRvIHJlcGxhY2UuIFdlIGtlZXBcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgc2hlbGwsIGJ1dCByZXBsYWNlIGl0cyBET00gbm9kZSByZWZlcmVuY2UuXG4gICAgICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlIFRoZSBuZXcgRE9NIG5vZGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVwbGFjZVdpdGgoJHJvb3RFbGVtZW50LCBlbGVtZW50c1RvUmVtb3ZlLCBuZXdOb2RlKSB7XG4gICAgICB2YXIgZmlyc3RFbGVtZW50VG9SZW1vdmUgPSBlbGVtZW50c1RvUmVtb3ZlWzBdLFxuICAgICAgICAgIHJlbW92ZUNvdW50ID0gZWxlbWVudHNUb1JlbW92ZS5sZW5ndGgsXG4gICAgICAgICAgcGFyZW50ID0gZmlyc3RFbGVtZW50VG9SZW1vdmUucGFyZW50Tm9kZSxcbiAgICAgICAgICBpLCBpaTtcblxuICAgICAgaWYgKCRyb290RWxlbWVudCkge1xuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9ICRyb290RWxlbWVudC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgaWYgKCRyb290RWxlbWVudFtpXSA9PT0gZmlyc3RFbGVtZW50VG9SZW1vdmUpIHtcbiAgICAgICAgICAgICRyb290RWxlbWVudFtpKytdID0gbmV3Tm9kZTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBpLCBqMiA9IGogKyByZW1vdmVDb3VudCAtIDEsXG4gICAgICAgICAgICAgICAgICAgICBqaiA9ICRyb290RWxlbWVudC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgIGogPCBqajsgaisrLCBqMisrKSB7XG4gICAgICAgICAgICAgIGlmIChqMiA8IGpqKSB7XG4gICAgICAgICAgICAgICAgJHJvb3RFbGVtZW50W2pdID0gJHJvb3RFbGVtZW50W2oyXTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgJHJvb3RFbGVtZW50W2pdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkcm9vdEVsZW1lbnQubGVuZ3RoIC09IHJlbW92ZUNvdW50IC0gMTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHJlcGxhY2VkIGVsZW1lbnQgaXMgYWxzbyB0aGUgalF1ZXJ5IC5jb250ZXh0IHRoZW4gcmVwbGFjZSBpdFxuICAgICAgICAgICAgLy8gLmNvbnRleHQgaXMgYSBkZXByZWNhdGVkIGpRdWVyeSBhcGksIHNvIHdlIHNob3VsZCBzZXQgaXQgb25seSB3aGVuIGpRdWVyeSBzZXQgaXRcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jb250ZXh0L1xuICAgICAgICAgICAgaWYgKCRyb290RWxlbWVudC5jb250ZXh0ID09PSBmaXJzdEVsZW1lbnRUb1JlbW92ZSkge1xuICAgICAgICAgICAgICAkcm9vdEVsZW1lbnQuY29udGV4dCA9IG5ld05vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5ld05vZGUsIGZpcnN0RWxlbWVudFRvUmVtb3ZlKTtcbiAgICAgIH1cblxuICAgICAgLy8gQXBwZW5kIGFsbCB0aGUgYGVsZW1lbnRzVG9SZW1vdmVgIHRvIGEgZnJhZ21lbnQuIFRoaXMgd2lsbC4uLlxuICAgICAgLy8gLSByZW1vdmUgdGhlbSBmcm9tIHRoZSBET01cbiAgICAgIC8vIC0gYWxsb3cgdGhlbSB0byBzdGlsbCBiZSB0cmF2ZXJzZWQgd2l0aCAubmV4dFNpYmxpbmdcbiAgICAgIC8vIC0gYWxsb3cgYSBzaW5nbGUgZnJhZ21lbnQucVNBIHRvIGZldGNoIGFsbCBlbGVtZW50cyBiZWluZyByZW1vdmVkXG4gICAgICB2YXIgZnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHJlbW92ZUNvdW50OyBpKyspIHtcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudHNUb1JlbW92ZVtpXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChqcUxpdGUuaGFzRGF0YShmaXJzdEVsZW1lbnRUb1JlbW92ZSkpIHtcbiAgICAgICAgLy8gQ29weSBvdmVyIHVzZXIgZGF0YSAodGhhdCBpbmNsdWRlcyBBbmd1bGFySlMncyAkc2NvcGUgZXRjLikuIERvbid0IGNvcHkgcHJpdmF0ZVxuICAgICAgICAvLyBkYXRhIGhlcmUgYmVjYXVzZSB0aGVyZSdzIG5vIHB1YmxpYyBpbnRlcmZhY2UgaW4galF1ZXJ5IHRvIGRvIHRoYXQgYW5kIGNvcHlpbmcgb3ZlclxuICAgICAgICAvLyBldmVudCBsaXN0ZW5lcnMgKHdoaWNoIGlzIHRoZSBtYWluIHVzZSBvZiBwcml2YXRlIGRhdGEpIHdvdWxkbid0IHdvcmsgYW55d2F5LlxuICAgICAgICBqcUxpdGUuZGF0YShuZXdOb2RlLCBqcUxpdGUuZGF0YShmaXJzdEVsZW1lbnRUb1JlbW92ZSkpO1xuXG4gICAgICAgIC8vIFJlbW92ZSAkZGVzdHJveSBldmVudCBsaXN0ZW5lcnMgZnJvbSBgZmlyc3RFbGVtZW50VG9SZW1vdmVgXG4gICAgICAgIGpxTGl0ZShmaXJzdEVsZW1lbnRUb1JlbW92ZSkub2ZmKCckZGVzdHJveScpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhbnVwIGFueSBkYXRhL2xpc3RlbmVycyBvbiB0aGUgZWxlbWVudHMgYW5kIGNoaWxkcmVuLlxuICAgICAgLy8gVGhpcyBpbmNsdWRlcyBpbnZva2luZyB0aGUgJGRlc3Ryb3kgZXZlbnQgb24gYW55IGVsZW1lbnRzIHdpdGggbGlzdGVuZXJzLlxuICAgICAganFMaXRlLmNsZWFuRGF0YShmcmFnbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqJykpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGpxTGl0ZSBjb2xsZWN0aW9uIHRvIG9ubHkgY29udGFpbiB0aGUgYG5ld05vZGVgXG4gICAgICBmb3IgKGkgPSAxOyBpIDwgcmVtb3ZlQ291bnQ7IGkrKykge1xuICAgICAgICBkZWxldGUgZWxlbWVudHNUb1JlbW92ZVtpXTtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnRzVG9SZW1vdmVbMF0gPSBuZXdOb2RlO1xuICAgICAgZWxlbWVudHNUb1JlbW92ZS5sZW5ndGggPSAxO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gY2xvbmVBbmRBbm5vdGF0ZUZuKGZuLCBhbm5vdGF0aW9uKSB7XG4gICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKCkgeyByZXR1cm4gZm4uYXBwbHkobnVsbCwgYXJndW1lbnRzKTsgfSwgZm4sIGFubm90YXRpb24pO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gaW52b2tlTGlua0ZuKGxpbmtGbiwgc2NvcGUsICRlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMsIHRyYW5zY2x1ZGVGbikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGlua0ZuKHNjb3BlLCAkZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlLCBzdGFydGluZ1RhZygkZWxlbWVudCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0cmljdEJpbmRpbmdzQ2hlY2soYXR0ck5hbWUsIGRpcmVjdGl2ZU5hbWUpIHtcbiAgICAgIGlmIChzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQpIHtcbiAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ21pc3NpbmdhdHRyJyxcbiAgICAgICAgICAnQXR0cmlidXRlIFxcJ3swfVxcJyBvZiBcXCd7MX1cXCcgaXMgbm9uLW9wdGlvbmFsIGFuZCBtdXN0IGJlIHNldCEnLFxuICAgICAgICAgIGF0dHJOYW1lLCBkaXJlY3RpdmVOYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgJHdhdGNoZXMgZm9yIGlzb2xhdGUgc2NvcGUgYW5kIGNvbnRyb2xsZXIgYmluZGluZ3MuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZURpcmVjdGl2ZUJpbmRpbmdzKHNjb3BlLCBhdHRycywgZGVzdGluYXRpb24sIGJpbmRpbmdzLCBkaXJlY3RpdmUpIHtcbiAgICAgIHZhciByZW1vdmVXYXRjaENvbGxlY3Rpb24gPSBbXTtcbiAgICAgIHZhciBpbml0aWFsQ2hhbmdlcyA9IHt9O1xuICAgICAgdmFyIGNoYW5nZXM7XG5cbiAgICAgIGZvckVhY2goYmluZGluZ3MsIGZ1bmN0aW9uIGluaXRpYWxpemVCaW5kaW5nKGRlZmluaXRpb24sIHNjb3BlTmFtZSkge1xuICAgICAgICB2YXIgYXR0ck5hbWUgPSBkZWZpbml0aW9uLmF0dHJOYW1lLFxuICAgICAgICBvcHRpb25hbCA9IGRlZmluaXRpb24ub3B0aW9uYWwsXG4gICAgICAgIG1vZGUgPSBkZWZpbml0aW9uLm1vZGUsIC8vIEAsID0sIDwsIG9yICZcbiAgICAgICAgbGFzdFZhbHVlLFxuICAgICAgICBwYXJlbnRHZXQsIHBhcmVudFNldCwgY29tcGFyZSwgcmVtb3ZlV2F0Y2g7XG5cbiAgICAgICAgc3dpdGNoIChtb2RlKSB7XG5cbiAgICAgICAgICBjYXNlICdAJzpcbiAgICAgICAgICAgIGlmICghb3B0aW9uYWwgJiYgIWhhc093blByb3BlcnR5LmNhbGwoYXR0cnMsIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICAgIGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSBhdHRyc1thdHRyTmFtZV0gPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbW92ZVdhdGNoID0gYXR0cnMuJG9ic2VydmUoYXR0ck5hbWUsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmIChpc1N0cmluZyh2YWx1ZSkgfHwgaXNCb29sZWFuKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IGRlc3RpbmF0aW9uW3Njb3BlTmFtZV07XG4gICAgICAgICAgICAgICAgcmVjb3JkQ2hhbmdlcyhzY29wZU5hbWUsIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF0dHJzLiQkb2JzZXJ2ZXJzW2F0dHJOYW1lXS4kJHNjb3BlID0gc2NvcGU7XG4gICAgICAgICAgICBsYXN0VmFsdWUgPSBhdHRyc1thdHRyTmFtZV07XG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcobGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICAvLyBJZiB0aGUgYXR0cmlidXRlIGhhcyBiZWVuIHByb3ZpZGVkIHRoZW4gd2UgdHJpZ2dlciBhbiBpbnRlcnBvbGF0aW9uIHRvIGVuc3VyZVxuICAgICAgICAgICAgICAvLyB0aGUgdmFsdWUgaXMgdGhlcmUgZm9yIHVzZSBpbiB0aGUgbGluayBmblxuICAgICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gJGludGVycG9sYXRlKGxhc3RWYWx1ZSkoc2NvcGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0Jvb2xlYW4obGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICAvLyBJZiB0aGUgYXR0cmlidXRlcyBpcyBvbmUgb2YgdGhlIEJPT0xFQU5fQVRUUiB0aGVuIEFuZ3VsYXJKUyB3aWxsIGhhdmUgY29udmVydGVkXG4gICAgICAgICAgICAgIC8vIHRoZSB2YWx1ZSB0byBib29sZWFuIHJhdGhlciB0aGFuIGEgc3RyaW5nLCBzbyB3ZSBzcGVjaWFsIGNhc2UgdGhpcyBzaXR1YXRpb25cbiAgICAgICAgICAgICAgZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9IGxhc3RWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluaXRpYWxDaGFuZ2VzW3Njb3BlTmFtZV0gPSBuZXcgU2ltcGxlQ2hhbmdlKF9VTklOSVRJQUxJWkVEX1ZBTFVFLCBkZXN0aW5hdGlvbltzY29wZU5hbWVdKTtcbiAgICAgICAgICAgIHJlbW92ZVdhdGNoQ29sbGVjdGlvbi5wdXNoKHJlbW92ZVdhdGNoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnPSc6XG4gICAgICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwoYXR0cnMsIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIGJyZWFrO1xuICAgICAgICAgICAgICBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICAgIGF0dHJzW2F0dHJOYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25hbCAmJiAhYXR0cnNbYXR0ck5hbWVdKSBicmVhaztcblxuICAgICAgICAgICAgcGFyZW50R2V0ID0gJHBhcnNlKGF0dHJzW2F0dHJOYW1lXSk7XG4gICAgICAgICAgICBpZiAocGFyZW50R2V0LmxpdGVyYWwpIHtcbiAgICAgICAgICAgICAgY29tcGFyZSA9IGVxdWFscztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbXBhcmUgPSBzaW1wbGVDb21wYXJlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50U2V0ID0gcGFyZW50R2V0LmFzc2lnbiB8fCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGNoYW5nZSwgb3Igd2Ugd2lsbCB0aHJvdyB0aGlzIGV4Y2VwdGlvbiBvbiBldmVyeSAkZGlnZXN0XG4gICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSBwYXJlbnRHZXQoc2NvcGUpO1xuICAgICAgICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignbm9uYXNzaWduJyxcbiAgICAgICAgICAgICAgICAgICdFeHByZXNzaW9uIFxcJ3swfVxcJyBpbiBhdHRyaWJ1dGUgXFwnezF9XFwnIHVzZWQgd2l0aCBkaXJlY3RpdmUgXFwnezJ9XFwnIGlzIG5vbi1hc3NpZ25hYmxlIScsXG4gICAgICAgICAgICAgICAgICBhdHRyc1thdHRyTmFtZV0sIGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGFzdFZhbHVlID0gZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9IHBhcmVudEdldChzY29wZSk7XG4gICAgICAgICAgICB2YXIgcGFyZW50VmFsdWVXYXRjaCA9IGZ1bmN0aW9uIHBhcmVudFZhbHVlV2F0Y2gocGFyZW50VmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKCFjb21wYXJlKHBhcmVudFZhbHVlLCBkZXN0aW5hdGlvbltzY29wZU5hbWVdKSkge1xuICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBvdXQgb2Ygc3luYyBhbmQgbmVlZCB0byBjb3B5XG4gICAgICAgICAgICAgICAgaWYgKCFjb21wYXJlKHBhcmVudFZhbHVlLCBsYXN0VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAvLyBwYXJlbnQgY2hhbmdlZCBhbmQgaXQgaGFzIHByZWNlZGVuY2VcbiAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSBwYXJlbnRWYWx1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHBhcmVudCBjYW4gYmUgYXNzaWduZWQgdGhlbiBkbyBzb1xuICAgICAgICAgICAgICAgICAgcGFyZW50U2V0KHNjb3BlLCBwYXJlbnRWYWx1ZSA9IGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBsYXN0VmFsdWUgPSBwYXJlbnRWYWx1ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGxhc3RWYWx1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwYXJlbnRWYWx1ZVdhdGNoLiRzdGF0ZWZ1bCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5jb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgIHJlbW92ZVdhdGNoID0gc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihhdHRyc1thdHRyTmFtZV0sIHBhcmVudFZhbHVlV2F0Y2gpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVtb3ZlV2F0Y2ggPSBzY29wZS4kd2F0Y2goJHBhcnNlKGF0dHJzW2F0dHJOYW1lXSwgcGFyZW50VmFsdWVXYXRjaCksIG51bGwsIHBhcmVudEdldC5saXRlcmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbW92ZVdhdGNoQ29sbGVjdGlvbi5wdXNoKHJlbW92ZVdhdGNoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnPCc6XG4gICAgICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwoYXR0cnMsIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIGJyZWFrO1xuICAgICAgICAgICAgICBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICAgIGF0dHJzW2F0dHJOYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25hbCAmJiAhYXR0cnNbYXR0ck5hbWVdKSBicmVhaztcblxuICAgICAgICAgICAgcGFyZW50R2V0ID0gJHBhcnNlKGF0dHJzW2F0dHJOYW1lXSk7XG4gICAgICAgICAgICB2YXIgaXNMaXRlcmFsID0gcGFyZW50R2V0LmxpdGVyYWw7XG5cbiAgICAgICAgICAgIHZhciBpbml0aWFsVmFsdWUgPSBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gcGFyZW50R2V0KHNjb3BlKTtcbiAgICAgICAgICAgIGluaXRpYWxDaGFuZ2VzW3Njb3BlTmFtZV0gPSBuZXcgU2ltcGxlQ2hhbmdlKF9VTklOSVRJQUxJWkVEX1ZBTFVFLCBkZXN0aW5hdGlvbltzY29wZU5hbWVdKTtcblxuICAgICAgICAgICAgcmVtb3ZlV2F0Y2ggPSBzY29wZS4kd2F0Y2gocGFyZW50R2V0LCBmdW5jdGlvbiBwYXJlbnRWYWx1ZVdhdGNoQWN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICBpZiAob2xkVmFsdWUgPT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09PSBpbml0aWFsVmFsdWUgfHwgKGlzTGl0ZXJhbCAmJiBlcXVhbHMob2xkVmFsdWUsIGluaXRpYWxWYWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlY29yZENoYW5nZXMoc2NvcGVOYW1lLCBuZXdWYWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVtb3ZlV2F0Y2hDb2xsZWN0aW9uLnB1c2gocmVtb3ZlV2F0Y2gpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICcmJzpcbiAgICAgICAgICAgIGlmICghb3B0aW9uYWwgJiYgIWhhc093blByb3BlcnR5LmNhbGwoYXR0cnMsIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEb24ndCBhc3NpZ24gT2JqZWN0LnByb3RvdHlwZSBtZXRob2QgdG8gc2NvcGVcbiAgICAgICAgICAgIHBhcmVudEdldCA9IGF0dHJzLmhhc093blByb3BlcnR5KGF0dHJOYW1lKSA/ICRwYXJzZShhdHRyc1thdHRyTmFtZV0pIDogbm9vcDtcblxuICAgICAgICAgICAgLy8gRG9uJ3QgYXNzaWduIG5vb3AgdG8gZGVzdGluYXRpb24gaWYgZXhwcmVzc2lvbiBpcyBub3QgdmFsaWRcbiAgICAgICAgICAgIGlmIChwYXJlbnRHZXQgPT09IG5vb3AgJiYgb3B0aW9uYWwpIGJyZWFrO1xuXG4gICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gZnVuY3Rpb24obG9jYWxzKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwYXJlbnRHZXQoc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiByZWNvcmRDaGFuZ2VzKGtleSwgY3VycmVudFZhbHVlLCBwcmV2aW91c1ZhbHVlKSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGRlc3RpbmF0aW9uLiRvbkNoYW5nZXMpICYmICFzaW1wbGVDb21wYXJlKGN1cnJlbnRWYWx1ZSwgcHJldmlvdXNWYWx1ZSkpIHtcbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vdCBhbHJlYWR5IHNjaGVkdWxlZCB0aGUgdG9wIGxldmVsIG9uQ2hhbmdlc1F1ZXVlIGhhbmRsZXIgdGhlbiBkbyBzbyBub3dcbiAgICAgICAgICBpZiAoIW9uQ2hhbmdlc1F1ZXVlKSB7XG4gICAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZmx1c2hPbkNoYW5nZXNRdWV1ZSk7XG4gICAgICAgICAgICBvbkNoYW5nZXNRdWV1ZSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vdCBhbHJlYWR5IHF1ZXVlZCBhIHRyaWdnZXIgb2Ygb25DaGFuZ2VzIGZvciB0aGlzIGNvbnRyb2xsZXIgdGhlbiBkbyBzbyBub3dcbiAgICAgICAgICBpZiAoIWNoYW5nZXMpIHtcbiAgICAgICAgICAgIGNoYW5nZXMgPSB7fTtcbiAgICAgICAgICAgIG9uQ2hhbmdlc1F1ZXVlLnB1c2godHJpZ2dlck9uQ2hhbmdlc0hvb2spO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBJZiB0aGUgaGFzIGJlZW4gYSBjaGFuZ2Ugb24gdGhpcyBwcm9wZXJ0eSBhbHJlYWR5IHRoZW4gd2UgbmVlZCB0byByZXVzZSB0aGUgcHJldmlvdXMgdmFsdWVcbiAgICAgICAgICBpZiAoY2hhbmdlc1trZXldKSB7XG4gICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gY2hhbmdlc1trZXldLnByZXZpb3VzVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFN0b3JlIHRoaXMgY2hhbmdlXG4gICAgICAgICAgY2hhbmdlc1trZXldID0gbmV3IFNpbXBsZUNoYW5nZShwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJPbkNoYW5nZXNIb29rKCkge1xuICAgICAgICBkZXN0aW5hdGlvbi4kb25DaGFuZ2VzKGNoYW5nZXMpO1xuICAgICAgICAvLyBOb3cgY2xlYXIgdGhlIGNoYW5nZXMgc28gdGhhdCB3ZSBzY2hlZHVsZSBvbkNoYW5nZXMgd2hlbiBtb3JlIGNoYW5nZXMgYXJyaXZlXG4gICAgICAgIGNoYW5nZXMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluaXRpYWxDaGFuZ2VzOiBpbml0aWFsQ2hhbmdlcyxcbiAgICAgICAgcmVtb3ZlV2F0Y2hlczogcmVtb3ZlV2F0Y2hDb2xsZWN0aW9uLmxlbmd0aCAmJiBmdW5jdGlvbiByZW1vdmVXYXRjaGVzKCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlbW92ZVdhdGNoQ29sbGVjdGlvbi5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICByZW1vdmVXYXRjaENvbGxlY3Rpb25baV0oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9XTtcbn1cblxuZnVuY3Rpb24gU2ltcGxlQ2hhbmdlKHByZXZpb3VzLCBjdXJyZW50KSB7XG4gIHRoaXMucHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzO1xuICB0aGlzLmN1cnJlbnRWYWx1ZSA9IGN1cnJlbnQ7XG59XG5TaW1wbGVDaGFuZ2UucHJvdG90eXBlLmlzRmlyc3RDaGFuZ2UgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZSA9PT0gX1VOSU5JVElBTElaRURfVkFMVUU7IH07XG5cblxudmFyIFBSRUZJWF9SRUdFWFAgPSAvXigoPzp4fGRhdGEpWzpcXC1fXSkvaTtcbnZhciBTUEVDSUFMX0NIQVJTX1JFR0VYUCA9IC9bOlxcLV9dKyguKS9nO1xuXG4vKipcbiAqIENvbnZlcnRzIGFsbCBhY2NlcHRlZCBkaXJlY3RpdmVzIGZvcm1hdCBpbnRvIHByb3BlciBkaXJlY3RpdmUgbmFtZS5cbiAqIEBwYXJhbSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXG4gKi9cbmZ1bmN0aW9uIGRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lKSB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoUFJFRklYX1JFR0VYUCwgJycpXG4gICAgLnJlcGxhY2UoU1BFQ0lBTF9DSEFSU19SRUdFWFAsIGZ1bmN0aW9uKF8sIGxldHRlciwgb2Zmc2V0KSB7XG4gICAgICByZXR1cm4gb2Zmc2V0ID8gbGV0dGVyLnRvVXBwZXJDYXNlKCkgOiBsZXR0ZXI7XG4gICAgfSk7XG59XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHNoYXJlZCBvYmplY3QgYmV0d2VlbiBkaXJlY3RpdmUgY29tcGlsZSAvIGxpbmtpbmcgZnVuY3Rpb25zIHdoaWNoIGNvbnRhaW5zIG5vcm1hbGl6ZWQgRE9NXG4gKiBlbGVtZW50IGF0dHJpYnV0ZXMuIFRoZSB2YWx1ZXMgcmVmbGVjdCBjdXJyZW50IGJpbmRpbmcgc3RhdGUgYHt7IH19YC4gVGhlIG5vcm1hbGl6YXRpb24gaXNcbiAqIG5lZWRlZCBzaW5jZSBhbGwgb2YgdGhlc2UgYXJlIHRyZWF0ZWQgYXMgZXF1aXZhbGVudCBpbiBBbmd1bGFySlM6XG4gKlxuICogYGBgXG4gKiAgICA8c3BhbiBuZzpiaW5kPVwiYVwiIG5nLWJpbmQ9XCJhXCIgZGF0YS1uZy1iaW5kPVwiYVwiIHgtbmctYmluZD1cImFcIj5cbiAqIGBgYFxuICovXG5cbi8qKlxuICogQG5nZG9jIHByb3BlcnR5XG4gKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkYXR0clxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSBtYXAgb2YgRE9NIGVsZW1lbnQgYXR0cmlidXRlIG5hbWVzIHRvIHRoZSBub3JtYWxpemVkIG5hbWUuIFRoaXMgaXNcbiAqIG5lZWRlZCB0byBkbyByZXZlcnNlIGxvb2t1cCBmcm9tIG5vcm1hbGl6ZWQgbmFtZSBiYWNrIHRvIGFjdHVhbCBuYW1lLlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkc2V0XG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU2V0IERPTSBlbGVtZW50IGF0dHJpYnV0ZSB2YWx1ZS5cbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTm9ybWFsaXplZCBlbGVtZW50IGF0dHJpYnV0ZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBtb2RpZnkuIFRoZSBuYW1lIGlzXG4gKiAgICAgICAgICByZXZlcnNlLXRyYW5zbGF0ZWQgdXNpbmcgdGhlIHtAbGluayBuZy4kY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkYXR0ciAkYXR0cn1cbiAqICAgICAgICAgIHByb3BlcnR5IHRvIHRoZSBvcmlnaW5hbCBuYW1lLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFZhbHVlIHRvIHNldCB0aGUgYXR0cmlidXRlIHRvLiBUaGUgdmFsdWUgY2FuIGJlIGFuIGludGVycG9sYXRlZCBzdHJpbmcuXG4gKi9cblxuXG5cbi8qKlxuICogQ2xvc3VyZSBjb21waWxlciB0eXBlIGluZm9ybWF0aW9uXG4gKi9cblxuZnVuY3Rpb24gbm9kZXNldExpbmtpbmdGbihcbiAgLyogYW5ndWxhci5TY29wZSAqLyBzY29wZSxcbiAgLyogTm9kZUxpc3QgKi8gbm9kZUxpc3QsXG4gIC8qIEVsZW1lbnQgKi8gcm9vdEVsZW1lbnQsXG4gIC8qIGZ1bmN0aW9uKEZ1bmN0aW9uKSAqLyBib3VuZFRyYW5zY2x1ZGVGblxuKSB7fVxuXG5mdW5jdGlvbiBkaXJlY3RpdmVMaW5raW5nRm4oXG4gIC8qIG5vZGVzZXRMaW5raW5nRm4gKi8gbm9kZXNldExpbmtpbmdGbixcbiAgLyogYW5ndWxhci5TY29wZSAqLyBzY29wZSxcbiAgLyogTm9kZSAqLyBub2RlLFxuICAvKiBFbGVtZW50ICovIHJvb3RFbGVtZW50LFxuICAvKiBmdW5jdGlvbihGdW5jdGlvbikgKi8gYm91bmRUcmFuc2NsdWRlRm5cbikge31cblxuZnVuY3Rpb24gdG9rZW5EaWZmZXJlbmNlKHN0cjEsIHN0cjIpIHtcbiAgdmFyIHZhbHVlcyA9ICcnLFxuICAgICAgdG9rZW5zMSA9IHN0cjEuc3BsaXQoL1xccysvKSxcbiAgICAgIHRva2VuczIgPSBzdHIyLnNwbGl0KC9cXHMrLyk7XG5cbiAgb3V0ZXI6XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zMS5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0b2tlbiA9IHRva2VuczFbaV07XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB0b2tlbnMyLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAodG9rZW4gPT09IHRva2VuczJbal0pIGNvbnRpbnVlIG91dGVyO1xuICAgIH1cbiAgICB2YWx1ZXMgKz0gKHZhbHVlcy5sZW5ndGggPiAwID8gJyAnIDogJycpICsgdG9rZW47XG4gIH1cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ29tbWVudHMoanFOb2Rlcykge1xuICBqcU5vZGVzID0ganFMaXRlKGpxTm9kZXMpO1xuICB2YXIgaSA9IGpxTm9kZXMubGVuZ3RoO1xuXG4gIGlmIChpIDw9IDEpIHtcbiAgICByZXR1cm4ganFOb2RlcztcbiAgfVxuXG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgbm9kZSA9IGpxTm9kZXNbaV07XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5PREVfVFlQRV9DT01NRU5UIHx8XG4gICAgICAgKG5vZGUubm9kZVR5cGUgPT09IE5PREVfVFlQRV9URVhUICYmIG5vZGUubm9kZVZhbHVlLnRyaW0oKSA9PT0gJycpKSB7XG4gICAgICAgICBzcGxpY2UuY2FsbChqcU5vZGVzLCBpLCAxKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGpxTm9kZXM7XG59XG5cbnZhciAkY29udHJvbGxlck1pbkVyciA9IG1pbkVycignJGNvbnRyb2xsZXInKTtcblxuXG52YXIgQ05UUkxfUkVHID0gL14oXFxTKykoXFxzK2FzXFxzKyhbXFx3JF0rKSk/JC87XG5mdW5jdGlvbiBpZGVudGlmaWVyRm9yQ29udHJvbGxlcihjb250cm9sbGVyLCBpZGVudCkge1xuICBpZiAoaWRlbnQgJiYgaXNTdHJpbmcoaWRlbnQpKSByZXR1cm4gaWRlbnQ7XG4gIGlmIChpc1N0cmluZyhjb250cm9sbGVyKSkge1xuICAgIHZhciBtYXRjaCA9IENOVFJMX1JFRy5leGVjKGNvbnRyb2xsZXIpO1xuICAgIGlmIChtYXRjaCkgcmV0dXJuIG1hdGNoWzNdO1xuICB9XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRjb250cm9sbGVyUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUge0BsaW5rIG5nLiRjb250cm9sbGVyICRjb250cm9sbGVyIHNlcnZpY2V9IGlzIHVzZWQgYnkgQW5ndWxhckpTIHRvIGNyZWF0ZSBuZXdcbiAqIGNvbnRyb2xsZXJzLlxuICpcbiAqIFRoaXMgcHJvdmlkZXIgYWxsb3dzIGNvbnRyb2xsZXIgcmVnaXN0cmF0aW9uIHZpYSB0aGVcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyI3JlZ2lzdGVyIHJlZ2lzdGVyfSBtZXRob2QuXG4gKi9cbmZ1bmN0aW9uICRDb250cm9sbGVyUHJvdmlkZXIoKSB7XG4gIHZhciBjb250cm9sbGVycyA9IHt9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb250cm9sbGVyUHJvdmlkZXIjaGFzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIENvbnRyb2xsZXIgbmFtZSB0byBjaGVjay5cbiAgICovXG4gIHRoaXMuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBjb250cm9sbGVycy5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29udHJvbGxlclByb3ZpZGVyI3JlZ2lzdGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBDb250cm9sbGVyIG5hbWUsIG9yIGFuIG9iamVjdCBtYXAgb2YgY29udHJvbGxlcnMgd2hlcmUgdGhlIGtleXMgYXJlXG4gICAqICAgIHRoZSBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGNvbnN0cnVjdG9ycy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheX0gY29uc3RydWN0b3IgQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmbiAob3B0aW9uYWxseSBkZWNvcmF0ZWQgd2l0aCBESVxuICAgKiAgICBhbm5vdGF0aW9ucyBpbiB0aGUgYXJyYXkgbm90YXRpb24pLlxuICAgKi9cbiAgdGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uKG5hbWUsIGNvbnN0cnVjdG9yKSB7XG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ2NvbnRyb2xsZXInKTtcbiAgICBpZiAoaXNPYmplY3QobmFtZSkpIHtcbiAgICAgIGV4dGVuZChjb250cm9sbGVycywgbmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRyb2xsZXJzW25hbWVdID0gY29uc3RydWN0b3I7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgZnVuY3Rpb24oJGluamVjdG9yKSB7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAqIEBuYW1lICRjb250cm9sbGVyXG4gICAgICogQHJlcXVpcmVzICRpbmplY3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxzdHJpbmd9IGNvbnN0cnVjdG9yIElmIGNhbGxlZCB3aXRoIGEgZnVuY3Rpb24gdGhlbiBpdCdzIGNvbnNpZGVyZWQgdG8gYmUgdGhlXG4gICAgICogICAgY29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gT3RoZXJ3aXNlIGl0J3MgY29uc2lkZXJlZCB0byBiZSBhIHN0cmluZyB3aGljaCBpcyB1c2VkXG4gICAgICogICAgdG8gcmV0cmlldmUgdGhlIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgdXNpbmcgdGhlIGZvbGxvd2luZyBzdGVwczpcbiAgICAgKlxuICAgICAqICAgICogY2hlY2sgaWYgYSBjb250cm9sbGVyIHdpdGggZ2l2ZW4gbmFtZSBpcyByZWdpc3RlcmVkIHZpYSBgJGNvbnRyb2xsZXJQcm92aWRlcmBcbiAgICAgKiAgICAqIGNoZWNrIGlmIGV2YWx1YXRpbmcgdGhlIHN0cmluZyBvbiB0aGUgY3VycmVudCBzY29wZSByZXR1cm5zIGEgY29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqICAgIFRoZSBzdHJpbmcgY2FuIHVzZSB0aGUgYGNvbnRyb2xsZXIgYXMgcHJvcGVydHlgIHN5bnRheCwgd2hlcmUgdGhlIGNvbnRyb2xsZXIgaW5zdGFuY2UgaXMgcHVibGlzaGVkXG4gICAgICogICAgYXMgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBvbiB0aGUgYHNjb3BlYDsgdGhlIGBzY29wZWAgbXVzdCBiZSBpbmplY3RlZCBpbnRvIGBsb2NhbHNgIHBhcmFtIGZvciB0aGlzXG4gICAgICogICAgdG8gd29yayBjb3JyZWN0bHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbG9jYWxzIEluamVjdGlvbiBsb2NhbHMgZm9yIENvbnRyb2xsZXIuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBJbnN0YW5jZSBvZiBnaXZlbiBjb250cm9sbGVyLlxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogYCRjb250cm9sbGVyYCBzZXJ2aWNlIGlzIHJlc3BvbnNpYmxlIGZvciBpbnN0YW50aWF0aW5nIGNvbnRyb2xsZXJzLlxuICAgICAqXG4gICAgICogSXQncyBqdXN0IGEgc2ltcGxlIGNhbGwgdG8ge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0sIGJ1dCBleHRyYWN0ZWQgaW50b1xuICAgICAqIGEgc2VydmljZSwgc28gdGhhdCBvbmUgY2FuIG92ZXJyaWRlIHRoaXMgc2VydmljZSB3aXRoIFtCQyB2ZXJzaW9uXShodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xNjQ5Nzg4KS5cbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gJGNvbnRyb2xsZXIoZXhwcmVzc2lvbiwgbG9jYWxzLCBsYXRlciwgaWRlbnQpIHtcbiAgICAgIC8vIFBSSVZBVEUgQVBJOlxuICAgICAgLy8gICBwYXJhbSBgbGF0ZXJgIC0tLSBpbmRpY2F0ZXMgdGhhdCB0aGUgY29udHJvbGxlcidzIGNvbnN0cnVjdG9yIGlzIGludm9rZWQgYXQgYSBsYXRlciB0aW1lLlxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBJZiB0cnVlLCAkY29udHJvbGxlciB3aWxsIGFsbG9jYXRlIHRoZSBvYmplY3Qgd2l0aCB0aGUgY29ycmVjdFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwcm90b3R5cGUgY2hhaW4sIGJ1dCB3aWxsIG5vdCBpbnZva2UgdGhlIGNvbnRyb2xsZXIgdW50aWwgYSByZXR1cm5lZFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayBpcyBpbnZva2VkLlxuICAgICAgLy8gICBwYXJhbSBgaWRlbnRgIC0tLSBBbiBvcHRpb25hbCBsYWJlbCB3aGljaCBvdmVycmlkZXMgdGhlIGxhYmVsIHBhcnNlZCBmcm9tIHRoZSBjb250cm9sbGVyXG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24sIGlmIGFueS5cbiAgICAgIHZhciBpbnN0YW5jZSwgbWF0Y2gsIGNvbnN0cnVjdG9yLCBpZGVudGlmaWVyO1xuICAgICAgbGF0ZXIgPSBsYXRlciA9PT0gdHJ1ZTtcbiAgICAgIGlmIChpZGVudCAmJiBpc1N0cmluZyhpZGVudCkpIHtcbiAgICAgICAgaWRlbnRpZmllciA9IGlkZW50O1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNTdHJpbmcoZXhwcmVzc2lvbikpIHtcbiAgICAgICAgbWF0Y2ggPSBleHByZXNzaW9uLm1hdGNoKENOVFJMX1JFRyk7XG4gICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICB0aHJvdyAkY29udHJvbGxlck1pbkVycignY3RybGZtdCcsXG4gICAgICAgICAgICAnQmFkbHkgZm9ybWVkIGNvbnRyb2xsZXIgc3RyaW5nIFxcJ3swfVxcJy4gJyArXG4gICAgICAgICAgICAnTXVzdCBtYXRjaCBgX19uYW1lX18gYXMgX19pZF9fYCBvciBgX19uYW1lX19gLicsIGV4cHJlc3Npb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0cnVjdG9yID0gbWF0Y2hbMV07XG4gICAgICAgIGlkZW50aWZpZXIgPSBpZGVudGlmaWVyIHx8IG1hdGNoWzNdO1xuICAgICAgICBleHByZXNzaW9uID0gY29udHJvbGxlcnMuaGFzT3duUHJvcGVydHkoY29uc3RydWN0b3IpXG4gICAgICAgICAgICA/IGNvbnRyb2xsZXJzW2NvbnN0cnVjdG9yXVxuICAgICAgICAgICAgOiBnZXR0ZXIobG9jYWxzLiRzY29wZSwgY29uc3RydWN0b3IsIHRydWUpO1xuXG4gICAgICAgIGlmICghZXhwcmVzc2lvbikge1xuICAgICAgICAgIHRocm93ICRjb250cm9sbGVyTWluRXJyKCdjdHJscmVnJyxcbiAgICAgICAgICAgICdUaGUgY29udHJvbGxlciB3aXRoIHRoZSBuYW1lIFxcJ3swfVxcJyBpcyBub3QgcmVnaXN0ZXJlZC4nLCBjb25zdHJ1Y3Rvcik7XG4gICAgICAgIH1cblxuICAgICAgICBhc3NlcnRBcmdGbihleHByZXNzaW9uLCBjb25zdHJ1Y3RvciwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChsYXRlcikge1xuICAgICAgICAvLyBJbnN0YW50aWF0ZSBjb250cm9sbGVyIGxhdGVyOlxuICAgICAgICAvLyBUaGlzIG1hY2hpbmVyeSBpcyB1c2VkIHRvIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgb2JqZWN0IGJlZm9yZSBjYWxsaW5nIHRoZVxuICAgICAgICAvLyBjb250cm9sbGVyJ3MgY29uc3RydWN0b3IgaXRzZWxmLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIGFsbG93cyBwcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBjb250cm9sbGVyIGJlZm9yZSB0aGUgY29uc3RydWN0b3IgaXNcbiAgICAgICAgLy8gaW52b2tlZC4gUHJpbWFyaWx5LCB0aGlzIGlzIHVzZWQgZm9yIGlzb2xhdGUgc2NvcGUgYmluZGluZ3MgaW4gJGNvbXBpbGUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoaXMgZmVhdHVyZSBpcyBub3QgaW50ZW5kZWQgZm9yIHVzZSBieSBhcHBsaWNhdGlvbnMsIGFuZCBpcyB0aHVzIG5vdCBkb2N1bWVudGVkXG4gICAgICAgIC8vIHB1YmxpY2x5LlxuICAgICAgICAvLyBPYmplY3QgY3JlYXRpb246IGh0dHA6Ly9qc3BlcmYuY29tL2NyZWF0ZS1jb25zdHJ1Y3Rvci8yXG4gICAgICAgIHZhciBjb250cm9sbGVyUHJvdG90eXBlID0gKGlzQXJyYXkoZXhwcmVzc2lvbikgP1xuICAgICAgICAgIGV4cHJlc3Npb25bZXhwcmVzc2lvbi5sZW5ndGggLSAxXSA6IGV4cHJlc3Npb24pLnByb3RvdHlwZTtcbiAgICAgICAgaW5zdGFuY2UgPSBPYmplY3QuY3JlYXRlKGNvbnRyb2xsZXJQcm90b3R5cGUgfHwgbnVsbCk7XG5cbiAgICAgICAgaWYgKGlkZW50aWZpZXIpIHtcbiAgICAgICAgICBhZGRJZGVudGlmaWVyKGxvY2FscywgaWRlbnRpZmllciwgaW5zdGFuY2UsIGNvbnN0cnVjdG9yIHx8IGV4cHJlc3Npb24ubmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uICRjb250cm9sbGVySW5pdCgpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gJGluamVjdG9yLmludm9rZShleHByZXNzaW9uLCBpbnN0YW5jZSwgbG9jYWxzLCBjb25zdHJ1Y3Rvcik7XG4gICAgICAgICAgaWYgKHJlc3VsdCAhPT0gaW5zdGFuY2UgJiYgKGlzT2JqZWN0KHJlc3VsdCkgfHwgaXNGdW5jdGlvbihyZXN1bHQpKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UgPSByZXN1bHQ7XG4gICAgICAgICAgICBpZiAoaWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAvLyBJZiByZXN1bHQgY2hhbmdlZCwgcmUtYXNzaWduIGNvbnRyb2xsZXJBcyB2YWx1ZSB0byBzY29wZS5cbiAgICAgICAgICAgICAgYWRkSWRlbnRpZmllcihsb2NhbHMsIGlkZW50aWZpZXIsIGluc3RhbmNlLCBjb25zdHJ1Y3RvciB8fCBleHByZXNzaW9uLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBpbnN0YW5jZTogaW5zdGFuY2UsXG4gICAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllclxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaW5zdGFuY2UgPSAkaW5qZWN0b3IuaW5zdGFudGlhdGUoZXhwcmVzc2lvbiwgbG9jYWxzLCBjb25zdHJ1Y3Rvcik7XG5cbiAgICAgIGlmIChpZGVudGlmaWVyKSB7XG4gICAgICAgIGFkZElkZW50aWZpZXIobG9jYWxzLCBpZGVudGlmaWVyLCBpbnN0YW5jZSwgY29uc3RydWN0b3IgfHwgZXhwcmVzc2lvbi5uYW1lKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBhZGRJZGVudGlmaWVyKGxvY2FscywgaWRlbnRpZmllciwgaW5zdGFuY2UsIG5hbWUpIHtcbiAgICAgIGlmICghKGxvY2FscyAmJiBpc09iamVjdChsb2NhbHMuJHNjb3BlKSkpIHtcbiAgICAgICAgdGhyb3cgbWluRXJyKCckY29udHJvbGxlcicpKCdub3NjcCcsXG4gICAgICAgICAgJ0Nhbm5vdCBleHBvcnQgY29udHJvbGxlciBcXCd7MH1cXCcgYXMgXFwnezF9XFwnISBObyAkc2NvcGUgb2JqZWN0IHByb3ZpZGVkIHZpYSBgbG9jYWxzYC4nLFxuICAgICAgICAgIG5hbWUsIGlkZW50aWZpZXIpO1xuICAgICAgfVxuXG4gICAgICBsb2NhbHMuJHNjb3BlW2lkZW50aWZpZXJdID0gaW5zdGFuY2U7XG4gICAgfVxuICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGRvY3VtZW50XG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEEge0BsaW5rIGFuZ3VsYXIuZWxlbWVudCBqUXVlcnkgb3IganFMaXRlfSB3cmFwcGVyIGZvciB0aGUgYnJvd3NlcidzIGB3aW5kb3cuZG9jdW1lbnRgIG9iamVjdC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwiZG9jdW1lbnRFeGFtcGxlXCIgbmFtZT1cImRvY3VtZW50XCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxwPiRkb2N1bWVudCB0aXRsZTogPGIgbmctYmluZD1cInRpdGxlXCI+PC9iPjwvcD5cbiAgICAgICAgIDxwPndpbmRvdy5kb2N1bWVudCB0aXRsZTogPGIgbmctYmluZD1cIndpbmRvd1RpdGxlXCI+PC9iPjwvcD5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2RvY3VtZW50RXhhbXBsZScsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGRvY3VtZW50JywgZnVuY3Rpb24oJHNjb3BlLCAkZG9jdW1lbnQpIHtcbiAgICAgICAgICAgJHNjb3BlLnRpdGxlID0gJGRvY3VtZW50WzBdLnRpdGxlO1xuICAgICAgICAgICAkc2NvcGUud2luZG93VGl0bGUgPSBhbmd1bGFyLmVsZW1lbnQod2luZG93LmRvY3VtZW50KVswXS50aXRsZTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiAkRG9jdW1lbnRQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgZnVuY3Rpb24od2luZG93KSB7XG4gICAgcmV0dXJuIGpxTGl0ZSh3aW5kb3cuZG9jdW1lbnQpO1xuICB9XTtcbn1cblxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdGhpc1xuICogTGlzdGVucyBmb3IgZG9jdW1lbnQgdmlzaWJpbGl0eSBjaGFuZ2UgYW5kIG1ha2VzIHRoZSBjdXJyZW50IHN0YXR1cyBhY2Nlc3NpYmxlLlxuICovXG5mdW5jdGlvbiAkJElzRG9jdW1lbnRIaWRkZW5Qcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckZG9jdW1lbnQnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRkb2N1bWVudCwgJHJvb3RTY29wZSkge1xuICAgIHZhciBkb2MgPSAkZG9jdW1lbnRbMF07XG4gICAgdmFyIGhpZGRlbiA9IGRvYyAmJiBkb2MuaGlkZGVuO1xuXG4gICAgJGRvY3VtZW50Lm9uKCd2aXNpYmlsaXR5Y2hhbmdlJywgY2hhbmdlTGlzdGVuZXIpO1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAkZG9jdW1lbnQub2ZmKCd2aXNpYmlsaXR5Y2hhbmdlJywgY2hhbmdlTGlzdGVuZXIpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gY2hhbmdlTGlzdGVuZXIoKSB7XG4gICAgICBoaWRkZW4gPSBkb2MuaGlkZGVuO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBoaWRkZW47XG4gICAgfTtcbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRleGNlcHRpb25IYW5kbGVyXG4gKiBAcmVxdWlyZXMgbmcuJGxvZ1xuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFueSB1bmNhdWdodCBleGNlcHRpb24gaW4gQW5ndWxhckpTIGV4cHJlc3Npb25zIGlzIGRlbGVnYXRlZCB0byB0aGlzIHNlcnZpY2UuXG4gKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBzaW1wbHkgZGVsZWdhdGVzIHRvIGAkbG9nLmVycm9yYCB3aGljaCBsb2dzIGl0IGludG9cbiAqIHRoZSBicm93c2VyIGNvbnNvbGUuXG4gKlxuICogSW4gdW5pdCB0ZXN0cywgaWYgYGFuZ3VsYXItbW9ja3MuanNgIGlzIGxvYWRlZCwgdGhpcyBzZXJ2aWNlIGlzIG92ZXJyaWRkZW4gYnlcbiAqIHtAbGluayBuZ01vY2suJGV4Y2VwdGlvbkhhbmRsZXIgbW9jayAkZXhjZXB0aW9uSGFuZGxlcn0gd2hpY2ggYWlkcyBpbiB0ZXN0aW5nLlxuICpcbiAqICMjIEV4YW1wbGU6XG4gKlxuICogVGhlIGV4YW1wbGUgYmVsb3cgd2lsbCBvdmVyd3JpdGUgdGhlIGRlZmF1bHQgYCRleGNlcHRpb25IYW5kbGVyYCBpbiBvcmRlciB0byAoYSkgbG9nIHVuY2F1Z2h0XG4gKiBlcnJvcnMgdG8gdGhlIGJhY2tlbmQgZm9yIGxhdGVyIGluc3BlY3Rpb24gYnkgdGhlIGRldmVsb3BlcnMgYW5kIChiKSB0byB1c2UgYCRsb2cud2FybigpYCBpbnN0ZWFkXG4gKiBvZiBgJGxvZy5lcnJvcigpYC5cbiAqXG4gKiBgYGBqc1xuICogICBhbmd1bGFyLlxuICogICAgIG1vZHVsZSgnZXhjZXB0aW9uT3ZlcndyaXRlJywgW10pLlxuICogICAgIGZhY3RvcnkoJyRleGNlcHRpb25IYW5kbGVyJywgWyckbG9nJywgJ2xvZ0Vycm9yc1RvQmFja2VuZCcsIGZ1bmN0aW9uKCRsb2csIGxvZ0Vycm9yc1RvQmFja2VuZCkge1xuICogICAgICAgcmV0dXJuIGZ1bmN0aW9uIG15RXhjZXB0aW9uSGFuZGxlcihleGNlcHRpb24sIGNhdXNlKSB7XG4gKiAgICAgICAgIGxvZ0Vycm9yc1RvQmFja2VuZChleGNlcHRpb24sIGNhdXNlKTtcbiAqICAgICAgICAgJGxvZy53YXJuKGV4Y2VwdGlvbiwgY2F1c2UpO1xuICogICAgICAgfTtcbiAqICAgICB9XSk7XG4gKiBgYGBcbiAqXG4gKiA8aHIgLz5cbiAqIE5vdGUsIHRoYXQgY29kZSBleGVjdXRlZCBpbiBldmVudC1saXN0ZW5lcnMgKGV2ZW4gdGhvc2UgcmVnaXN0ZXJlZCB1c2luZyBqcUxpdGUncyBgb25gL2BiaW5kYFxuICogbWV0aG9kcykgZG9lcyBub3QgZGVsZWdhdGUgZXhjZXB0aW9ucyB0byB0aGUge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfVxuICogKHVubGVzcyBleGVjdXRlZCBkdXJpbmcgYSBkaWdlc3QpLlxuICpcbiAqIElmIHlvdSB3aXNoLCB5b3UgY2FuIG1hbnVhbGx5IGRlbGVnYXRlIGV4Y2VwdGlvbnMsIGUuZy5cbiAqIGB0cnkgeyAuLi4gfSBjYXRjaChlKSB7ICRleGNlcHRpb25IYW5kbGVyKGUpOyB9YFxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGV4Y2VwdGlvbiBFeGNlcHRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBlcnJvci5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gY2F1c2UgT3B0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbnRleHQgaW4gd2hpY2hcbiAqICAgICAgIHRoZSBlcnJvciB3YXMgdGhyb3duLlxuICpcbiAqL1xuZnVuY3Rpb24gJEV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckbG9nJywgZnVuY3Rpb24oJGxvZykge1xuICAgIHJldHVybiBmdW5jdGlvbihleGNlcHRpb24sIGNhdXNlKSB7XG4gICAgICAkbG9nLmVycm9yLmFwcGx5KCRsb2csIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfV07XG59XG5cbnZhciAkJEZvcmNlUmVmbG93UHJvdmlkZXIgPSAvKiogQHRoaXMgKi8gZnVuY3Rpb24oKSB7XG4gIHRoaXMuJGdldCA9IFsnJGRvY3VtZW50JywgZnVuY3Rpb24oJGRvY3VtZW50KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRvbU5vZGUpIHtcbiAgICAgIC8vdGhlIGxpbmUgYmVsb3cgd2lsbCBmb3JjZSB0aGUgYnJvd3NlciB0byBwZXJmb3JtIGEgcmVwYWludCBzb1xuICAgICAgLy90aGF0IGFsbCB0aGUgYW5pbWF0ZWQgZWxlbWVudHMgd2l0aGluIHRoZSBhbmltYXRpb24gZnJhbWUgd2lsbFxuICAgICAgLy9iZSBwcm9wZXJseSB1cGRhdGVkIGFuZCBkcmF3biBvbiBzY3JlZW4uIFRoaXMgaXMgcmVxdWlyZWQgdG9cbiAgICAgIC8vZW5zdXJlIHRoYXQgdGhlIHByZXBhcmF0aW9uIGFuaW1hdGlvbiBpcyBwcm9wZXJseSBmbHVzaGVkIHNvIHRoYXRcbiAgICAgIC8vdGhlIGFjdGl2ZSBzdGF0ZSBwaWNrcyB1cCBmcm9tIHRoZXJlLiBETyBOT1QgUkVNT1ZFIFRISVMgTElORS5cbiAgICAgIC8vRE8gTk9UIE9QVElNSVpFIFRISVMgTElORS4gVEhFIE1JTklGSUVSIFdJTEwgUkVNT1ZFIElUIE9USEVSV0lTRSBXSElDSFxuICAgICAgLy9XSUxMIFJFU1VMVCBJTiBBTiBVTlBSRURJQ1RBQkxFIEJVRyBUSEFUIElTIFZFUlkgSEFSRCBUTyBUUkFDSyBET1dOIEFORFxuICAgICAgLy9XSUxMIFRBS0UgWUVBUlMgQVdBWSBGUk9NIFlPVVIgTElGRS5cbiAgICAgIGlmIChkb21Ob2RlKSB7XG4gICAgICAgIGlmICghZG9tTm9kZS5ub2RlVHlwZSAmJiBkb21Ob2RlIGluc3RhbmNlb2YganFMaXRlKSB7XG4gICAgICAgICAgZG9tTm9kZSA9IGRvbU5vZGVbMF07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvbU5vZGUgPSAkZG9jdW1lbnRbMF0uYm9keTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkb21Ob2RlLm9mZnNldFdpZHRoICsgMTtcbiAgICB9O1xuICB9XTtcbn07XG5cbnZhciBBUFBMSUNBVElPTl9KU09OID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xudmFyIENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OID0geydDb250ZW50LVR5cGUnOiBBUFBMSUNBVElPTl9KU09OICsgJztjaGFyc2V0PXV0Zi04J307XG52YXIgSlNPTl9TVEFSVCA9IC9eXFxbfF5cXHsoPyFcXHspLztcbnZhciBKU09OX0VORFMgPSB7XG4gICdbJzogL10kLyxcbiAgJ3snOiAvfSQvXG59O1xudmFyIEpTT05fUFJPVEVDVElPTl9QUkVGSVggPSAvXlxcKV1cXH0nLD9cXG4vO1xudmFyICRodHRwTWluRXJyID0gbWluRXJyKCckaHR0cCcpO1xuXG5mdW5jdGlvbiBzZXJpYWxpemVWYWx1ZSh2KSB7XG4gIGlmIChpc09iamVjdCh2KSkge1xuICAgIHJldHVybiBpc0RhdGUodikgPyB2LnRvSVNPU3RyaW5nKCkgOiB0b0pzb24odik7XG4gIH1cbiAgcmV0dXJuIHY7XG59XG5cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkSHR0cFBhcmFtU2VyaWFsaXplclByb3ZpZGVyKCkge1xuICAvKipcbiAgICogQG5nZG9jIHNlcnZpY2VcbiAgICogQG5hbWUgJGh0dHBQYXJhbVNlcmlhbGl6ZXJcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmF1bHQge0BsaW5rICRodHRwIGAkaHR0cGB9IHBhcmFtcyBzZXJpYWxpemVyIHRoYXQgY29udmVydHMgb2JqZWN0cyB0byBzdHJpbmdzXG4gICAqIGFjY29yZGluZyB0byB0aGUgZm9sbG93aW5nIHJ1bGVzOlxuICAgKlxuICAgKiAqIGB7J2Zvbyc6ICdiYXInfWAgcmVzdWx0cyBpbiBgZm9vPWJhcmBcbiAgICogKiBgeydmb28nOiBEYXRlLm5vdygpfWAgcmVzdWx0cyBpbiBgZm9vPTIwMTUtMDQtMDFUMDklM0E1MCUzQTQ5LjI2MlpgIChgdG9JU09TdHJpbmcoKWAgYW5kIGVuY29kZWQgcmVwcmVzZW50YXRpb24gb2YgYSBEYXRlIG9iamVjdClcbiAgICogKiBgeydmb28nOiBbJ2JhcicsICdiYXonXX1gIHJlc3VsdHMgaW4gYGZvbz1iYXImZm9vPWJhemAgKHJlcGVhdGVkIGtleSBmb3IgZWFjaCBhcnJheSBlbGVtZW50KVxuICAgKiAqIGB7J2Zvbyc6IHsnYmFyJzonYmF6J319YCByZXN1bHRzIGluIGBmb289JTdCJTIyYmFyJTIyJTNBJTIyYmF6JTIyJTdEYCAoc3RyaW5naWZpZWQgYW5kIGVuY29kZWQgcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0KVxuICAgKlxuICAgKiBOb3RlIHRoYXQgc2VyaWFsaXplciB3aWxsIHNvcnQgdGhlIHJlcXVlc3QgcGFyYW1ldGVycyBhbHBoYWJldGljYWxseS5cbiAgICovXG5cbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5nUGFyYW1TZXJpYWxpemVyKHBhcmFtcykge1xuICAgICAgaWYgKCFwYXJhbXMpIHJldHVybiAnJztcbiAgICAgIHZhciBwYXJ0cyA9IFtdO1xuICAgICAgZm9yRWFjaFNvcnRlZChwYXJhbXMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IGlzVW5kZWZpbmVkKHZhbHVlKSB8fCBpc0Z1bmN0aW9uKHZhbHVlKSkgcmV0dXJuO1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBmb3JFYWNoKHZhbHVlLCBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSkgICsgJz0nICsgZW5jb2RlVXJpUXVlcnkoc2VyaWFsaXplVmFsdWUodikpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSkgKyAnPScgKyBlbmNvZGVVcmlRdWVyeShzZXJpYWxpemVWYWx1ZSh2YWx1ZSkpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBwYXJ0cy5qb2luKCcmJyk7XG4gICAgfTtcbiAgfTtcbn1cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkSHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZVByb3ZpZGVyKCkge1xuICAvKipcbiAgICogQG5nZG9jIHNlcnZpY2VcbiAgICogQG5hbWUgJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2VcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEFsdGVybmF0aXZlIHtAbGluayAkaHR0cCBgJGh0dHBgfSBwYXJhbXMgc2VyaWFsaXplciB0aGF0IGZvbGxvd3NcbiAgICogalF1ZXJ5J3MgW2BwYXJhbSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2pxdWVyeS5wYXJhbS8pIG1ldGhvZCBsb2dpYy5cbiAgICogVGhlIHNlcmlhbGl6ZXIgd2lsbCBhbHNvIHNvcnQgdGhlIHBhcmFtcyBhbHBoYWJldGljYWxseS5cbiAgICpcbiAgICogVG8gdXNlIGl0IGZvciBzZXJpYWxpemluZyBgJGh0dHBgIHJlcXVlc3QgcGFyYW1ldGVycywgc2V0IGl0IGFzIHRoZSBgcGFyYW1TZXJpYWxpemVyYCBwcm9wZXJ0eTpcbiAgICpcbiAgICogYGBganNcbiAgICogJGh0dHAoe1xuICAgKiAgIHVybDogbXlVcmwsXG4gICAqICAgbWV0aG9kOiAnR0VUJyxcbiAgICogICBwYXJhbXM6IG15UGFyYW1zLFxuICAgKiAgIHBhcmFtU2VyaWFsaXplcjogJyRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlJ1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gc2V0IGl0IGFzIHRoZSBkZWZhdWx0IGBwYXJhbVNlcmlhbGl6ZXJgIGluIHRoZVxuICAgKiB7QGxpbmsgJGh0dHBQcm92aWRlciNkZWZhdWx0cyBgJGh0dHBQcm92aWRlcmB9LlxuICAgKlxuICAgKiBBZGRpdGlvbmFsbHksIHlvdSBjYW4gaW5qZWN0IHRoZSBzZXJpYWxpemVyIGFuZCB1c2UgaXQgZXhwbGljaXRseSwgZm9yIGV4YW1wbGUgdG8gc2VyaWFsaXplXG4gICAqIGZvcm0gZGF0YSBmb3Igc3VibWlzc2lvbjpcbiAgICpcbiAgICogYGBganNcbiAgICogLmNvbnRyb2xsZXIoZnVuY3Rpb24oJGh0dHAsICRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlKSB7XG4gICAqICAgLy8uLi5cbiAgICpcbiAgICogICAkaHR0cCh7XG4gICAqICAgICB1cmw6IG15VXJsLFxuICAgKiAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAqICAgICBkYXRhOiAkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZShteURhdGEpLFxuICAgKiAgICAgaGVhZGVyczoge1xuICAgKiAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbiAgICogICAgIH1cbiAgICogICB9KTtcbiAgICpcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKi9cbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGpRdWVyeUxpa2VQYXJhbVNlcmlhbGl6ZXIocGFyYW1zKSB7XG4gICAgICBpZiAoIXBhcmFtcykgcmV0dXJuICcnO1xuICAgICAgdmFyIHBhcnRzID0gW107XG4gICAgICBzZXJpYWxpemUocGFyYW1zLCAnJywgdHJ1ZSk7XG4gICAgICByZXR1cm4gcGFydHMuam9pbignJicpO1xuXG4gICAgICBmdW5jdGlvbiBzZXJpYWxpemUodG9TZXJpYWxpemUsIHByZWZpeCwgdG9wTGV2ZWwpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkodG9TZXJpYWxpemUpKSB7XG4gICAgICAgICAgZm9yRWFjaCh0b1NlcmlhbGl6ZSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICBzZXJpYWxpemUodmFsdWUsIHByZWZpeCArICdbJyArIChpc09iamVjdCh2YWx1ZSkgPyBpbmRleCA6ICcnKSArICddJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodG9TZXJpYWxpemUpICYmICFpc0RhdGUodG9TZXJpYWxpemUpKSB7XG4gICAgICAgICAgZm9yRWFjaFNvcnRlZCh0b1NlcmlhbGl6ZSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgc2VyaWFsaXplKHZhbHVlLCBwcmVmaXggK1xuICAgICAgICAgICAgICAgICh0b3BMZXZlbCA/ICcnIDogJ1snKSArXG4gICAgICAgICAgICAgICAga2V5ICtcbiAgICAgICAgICAgICAgICAodG9wTGV2ZWwgPyAnJyA6ICddJykpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHRvU2VyaWFsaXplKSkge1xuICAgICAgICAgICAgdG9TZXJpYWxpemUgPSB0b1NlcmlhbGl6ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KHByZWZpeCkgKyAnPScgK1xuICAgICAgICAgICAgICAodG9TZXJpYWxpemUgPT0gbnVsbCA/ICcnIDogZW5jb2RlVXJpUXVlcnkoc2VyaWFsaXplVmFsdWUodG9TZXJpYWxpemUpKSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdEh0dHBSZXNwb25zZVRyYW5zZm9ybShkYXRhLCBoZWFkZXJzKSB7XG4gIGlmIChpc1N0cmluZyhkYXRhKSkge1xuICAgIC8vIFN0cmlwIGpzb24gdnVsbmVyYWJpbGl0eSBwcm90ZWN0aW9uIHByZWZpeCBhbmQgdHJpbSB3aGl0ZXNwYWNlXG4gICAgdmFyIHRlbXBEYXRhID0gZGF0YS5yZXBsYWNlKEpTT05fUFJPVEVDVElPTl9QUkVGSVgsICcnKS50cmltKCk7XG5cbiAgICBpZiAodGVtcERhdGEpIHtcbiAgICAgIHZhciBjb250ZW50VHlwZSA9IGhlYWRlcnMoJ0NvbnRlbnQtVHlwZScpO1xuICAgICAgdmFyIGhhc0pzb25Db250ZW50VHlwZSA9IGNvbnRlbnRUeXBlICYmIChjb250ZW50VHlwZS5pbmRleE9mKEFQUExJQ0FUSU9OX0pTT04pID09PSAwKTtcblxuICAgICAgaWYgKGhhc0pzb25Db250ZW50VHlwZSB8fCBpc0pzb25MaWtlKHRlbXBEYXRhKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGRhdGEgPSBmcm9tSnNvbih0ZW1wRGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBpZiAoIWhhc0pzb25Db250ZW50VHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93ICRodHRwTWluRXJyKCdiYWRkYXRhJywgJ0RhdGEgbXVzdCBiZSBhIHZhbGlkIEpTT04gb2JqZWN0LiBSZWNlaXZlZDogXCJ7MH1cIi4gJyArXG4gICAgICAgICAgJ1BhcnNlIGVycm9yOiBcInsxfVwiJywgZGF0YSwgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gaXNKc29uTGlrZShzdHIpIHtcbiAgICB2YXIganNvblN0YXJ0ID0gc3RyLm1hdGNoKEpTT05fU1RBUlQpO1xuICAgIHJldHVybiBqc29uU3RhcnQgJiYgSlNPTl9FTkRTW2pzb25TdGFydFswXV0udGVzdChzdHIpO1xufVxuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBrZXkgdmFsdWUgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGhlYWRlcnMgUmF3IGhlYWRlcnMgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtPYmplY3R9IFBhcnNlZCBoZWFkZXJzIGFzIGtleSB2YWx1ZSBvYmplY3RcbiAqL1xuZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcbiAgdmFyIHBhcnNlZCA9IGNyZWF0ZU1hcCgpLCBpO1xuXG4gIGZ1bmN0aW9uIGZpbGxJblBhcnNlZChrZXksIHZhbCkge1xuICAgIGlmIChrZXkpIHtcbiAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XG4gICAgfVxuICB9XG5cbiAgaWYgKGlzU3RyaW5nKGhlYWRlcnMpKSB7XG4gICAgZm9yRWFjaChoZWFkZXJzLnNwbGl0KCdcXG4nKSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgICAgZmlsbEluUGFyc2VkKGxvd2VyY2FzZSh0cmltKGxpbmUuc3Vic3RyKDAsIGkpKSksIHRyaW0obGluZS5zdWJzdHIoaSArIDEpKSk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoaGVhZGVycykpIHtcbiAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKGhlYWRlclZhbCwgaGVhZGVyS2V5KSB7XG4gICAgICBmaWxsSW5QYXJzZWQobG93ZXJjYXNlKGhlYWRlcktleSksIHRyaW0oaGVhZGVyVmFsKSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcGFyc2VkO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIHBhcnNlZCBoZWFkZXJzLlxuICpcbiAqIEhlYWRlcnMgYXJlIGxhenkgcGFyc2VkIHdoZW4gZmlyc3QgcmVxdWVzdGVkLlxuICogQHNlZSBwYXJzZUhlYWRlcnNcbiAqXG4gKiBAcGFyYW0geyhzdHJpbmd8T2JqZWN0KX0gaGVhZGVycyBIZWFkZXJzIHRvIHByb3ZpZGUgYWNjZXNzIHRvLlxuICogQHJldHVybnMge2Z1bmN0aW9uKHN0cmluZz0pfSBSZXR1cm5zIGEgZ2V0dGVyIGZ1bmN0aW9uIHdoaWNoIGlmIGNhbGxlZCB3aXRoOlxuICpcbiAqICAgLSBpZiBjYWxsZWQgd2l0aCBhbiBhcmd1bWVudCByZXR1cm5zIGEgc2luZ2xlIGhlYWRlciB2YWx1ZSBvciBudWxsXG4gKiAgIC0gaWYgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIGhlYWRlcnMuXG4gKi9cbmZ1bmN0aW9uIGhlYWRlcnNHZXR0ZXIoaGVhZGVycykge1xuICB2YXIgaGVhZGVyc09iajtcblxuICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xuICAgIGlmICghaGVhZGVyc09iaikgaGVhZGVyc09iaiA9ICBwYXJzZUhlYWRlcnMoaGVhZGVycyk7XG5cbiAgICBpZiAobmFtZSkge1xuICAgICAgdmFyIHZhbHVlID0gaGVhZGVyc09ialtsb3dlcmNhc2UobmFtZSldO1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiBoZWFkZXJzT2JqO1xuICB9O1xufVxuXG5cbi8qKlxuICogQ2hhaW4gYWxsIGdpdmVuIGZ1bmN0aW9uc1xuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBmb3IgYm90aCByZXF1ZXN0IGFuZCByZXNwb25zZSB0cmFuc2Zvcm1pbmdcbiAqXG4gKiBAcGFyYW0geyp9IGRhdGEgRGF0YSB0byB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZz0pfSBoZWFkZXJzIEhUVFAgaGVhZGVycyBnZXR0ZXIgZm4uXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhdHVzIEhUVFAgc3RhdHVzIGNvZGUgb2YgdGhlIHJlc3BvbnNlLlxuICogQHBhcmFtIHsoRnVuY3Rpb258QXJyYXkuPEZ1bmN0aW9uPil9IGZucyBGdW5jdGlvbiBvciBhbiBhcnJheSBvZiBmdW5jdGlvbnMuXG4gKiBAcmV0dXJucyB7Kn0gVHJhbnNmb3JtZWQgZGF0YS5cbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBzdGF0dXMsIGZucykge1xuICBpZiAoaXNGdW5jdGlvbihmbnMpKSB7XG4gICAgcmV0dXJuIGZucyhkYXRhLCBoZWFkZXJzLCBzdGF0dXMpO1xuICB9XG5cbiAgZm9yRWFjaChmbnMsIGZ1bmN0aW9uKGZuKSB7XG4gICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMsIHN0YXR1cyk7XG4gIH0pO1xuXG4gIHJldHVybiBkYXRhO1xufVxuXG5cbmZ1bmN0aW9uIGlzU3VjY2VzcyhzdGF0dXMpIHtcbiAgcmV0dXJuIDIwMCA8PSBzdGF0dXMgJiYgc3RhdHVzIDwgMzAwO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkaHR0cFByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIGAkaHR0cFByb3ZpZGVyYCB0byBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gc2VydmljZS5cbiAqL1xuZnVuY3Rpb24gJEh0dHBQcm92aWRlcigpIHtcbiAgLyoqXG4gICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgKiBAbmFtZSAkaHR0cFByb3ZpZGVyI2RlZmF1bHRzXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBPYmplY3QgY29udGFpbmluZyBkZWZhdWx0IHZhbHVlcyBmb3IgYWxsIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gcmVxdWVzdHMuXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMuY2FjaGVgKiogLSB7Ym9vbGVhbnxPYmplY3R9IC0gQSBib29sZWFuIHZhbHVlIG9yIG9iamVjdCBjcmVhdGVkIHdpdGhcbiAgICoge0BsaW5rIG5nLiRjYWNoZUZhY3RvcnkgYCRjYWNoZUZhY3RvcnlgfSB0byBlbmFibGUgb3IgZGlzYWJsZSBjYWNoaW5nIG9mIEhUVFAgcmVzcG9uc2VzXG4gICAqIGJ5IGRlZmF1bHQuIFNlZSB7QGxpbmsgJGh0dHAjY2FjaGluZyAkaHR0cCBDYWNoaW5nfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy5oZWFkZXJzYCoqIC0ge09iamVjdH0gLSBEZWZhdWx0IGhlYWRlcnMgZm9yIGFsbCAkaHR0cCByZXF1ZXN0cy5cbiAgICogUmVmZXIgdG8ge0BsaW5rIG5nLiRodHRwI3NldHRpbmctaHR0cC1oZWFkZXJzICRodHRwfSBmb3IgZG9jdW1lbnRhdGlvbiBvblxuICAgKiBzZXR0aW5nIGRlZmF1bHQgaGVhZGVycy5cbiAgICogICAgIC0gKipgZGVmYXVsdHMuaGVhZGVycy5jb21tb25gKipcbiAgICogICAgIC0gKipgZGVmYXVsdHMuaGVhZGVycy5wb3N0YCoqXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMucHV0YCoqXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMucGF0Y2hgKipcbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy5qc29ucENhbGxiYWNrUGFyYW1gKiogLSBge3N0cmluZ31gIC0gdGhlIG5hbWUgb2YgdGhlIHF1ZXJ5IHBhcmFtZXRlciB0aGF0IHBhc3NlcyB0aGUgbmFtZSBvZiB0aGVcbiAgICogY2FsbGJhY2sgaW4gYSBKU09OUCByZXF1ZXN0LiBUaGUgdmFsdWUgb2YgdGhpcyBwYXJhbWV0ZXIgd2lsbCBiZSByZXBsYWNlZCB3aXRoIHRoZSBleHByZXNzaW9uIGdlbmVyYXRlZCBieSB0aGVcbiAgICoge0BsaW5rICRqc29ucENhbGxiYWNrc30gc2VydmljZS4gRGVmYXVsdHMgdG8gYCdjYWxsYmFjaydgLlxuICAgKlxuICAgKiAtICoqYGRlZmF1bHRzLnBhcmFtU2VyaWFsaXplcmAqKiAtIGB7c3RyaW5nfGZ1bmN0aW9uKE9iamVjdDxzdHJpbmcsc3RyaW5nPik6c3RyaW5nfWAgLSBBIGZ1bmN0aW9uXG4gICAqICB1c2VkIHRvIHRoZSBwcmVwYXJlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiByZXF1ZXN0IHBhcmFtZXRlcnMgKHNwZWNpZmllZCBhcyBhbiBvYmplY3QpLlxuICAgKiAgSWYgc3BlY2lmaWVkIGFzIHN0cmluZywgaXQgaXMgaW50ZXJwcmV0ZWQgYXMgYSBmdW5jdGlvbiByZWdpc3RlcmVkIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LlxuICAgKiAgRGVmYXVsdHMgdG8ge0BsaW5rIG5nLiRodHRwUGFyYW1TZXJpYWxpemVyICRodHRwUGFyYW1TZXJpYWxpemVyfS5cbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0YCoqIC1cbiAgICogYHtBcnJheTxmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyKT58ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcil9YCAtXG4gICAqIEFuIGFycmF5IG9mIGZ1bmN0aW9ucyAob3IgYSBzaW5nbGUgZnVuY3Rpb24pIHdoaWNoIGFyZSBhcHBsaWVkIHRvIHRoZSByZXF1ZXN0IGRhdGEuXG4gICAqIEJ5IGRlZmF1bHQsIHRoaXMgaXMgYW4gYXJyYXkgd2l0aCBvbmUgcmVxdWVzdCB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbjpcbiAgICpcbiAgICogICAtIElmIHRoZSBgZGF0YWAgcHJvcGVydHkgb2YgdGhlIHJlcXVlc3QgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbnMgYW4gb2JqZWN0LCBzZXJpYWxpemUgaXRcbiAgICogICAgIGludG8gSlNPTiBmb3JtYXQuXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2VgKiogLVxuICAgKiBge0FycmF5PGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIsIHN0YXR1cyk+fGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIsIHN0YXR1cyl9YCAtXG4gICAqIEFuIGFycmF5IG9mIGZ1bmN0aW9ucyAob3IgYSBzaW5nbGUgZnVuY3Rpb24pIHdoaWNoIGFyZSBhcHBsaWVkIHRvIHRoZSByZXNwb25zZSBkYXRhLiBCeSBkZWZhdWx0LFxuICAgKiB0aGlzIGlzIGFuIGFycmF5IHdoaWNoIGFwcGxpZXMgb25lIHJlc3BvbnNlIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uIHRoYXQgZG9lcyB0d28gdGhpbmdzOlxuICAgKlxuICAgKiAgLSBJZiBYU1JGIHByZWZpeCBpcyBkZXRlY3RlZCwgc3RyaXAgaXRcbiAgICogICAgKHNlZSB7QGxpbmsgbmcuJGh0dHAjc2VjdXJpdHktY29uc2lkZXJhdGlvbnMgU2VjdXJpdHkgQ29uc2lkZXJhdGlvbnMgaW4gdGhlICRodHRwIGRvY3N9KS5cbiAgICogIC0gSWYgdGhlIGBDb250ZW50LVR5cGVgIGlzIGBhcHBsaWNhdGlvbi9qc29uYCBvciB0aGUgcmVzcG9uc2UgbG9va3MgbGlrZSBKU09OLFxuICAgKiAgICBkZXNlcmlhbGl6ZSBpdCB1c2luZyBhIEpTT04gcGFyc2VyLlxuICAgKlxuICAgKiAtICoqYGRlZmF1bHRzLnhzcmZDb29raWVOYW1lYCoqIC0ge3N0cmluZ30gLSBOYW1lIG9mIGNvb2tpZSBjb250YWluaW5nIHRoZSBYU1JGIHRva2VuLlxuICAgKiBEZWZhdWx0cyB2YWx1ZSBpcyBgJ1hTUkYtVE9LRU4nYC5cbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy54c3JmSGVhZGVyTmFtZWAqKiAtIHtzdHJpbmd9IC0gTmFtZSBvZiBIVFRQIGhlYWRlciB0byBwb3B1bGF0ZSB3aXRoIHRoZVxuICAgKiBYU1JGIHRva2VuLiBEZWZhdWx0cyB2YWx1ZSBpcyBgJ1gtWFNSRi1UT0tFTidgLlxuICAgKlxuICAgKi9cbiAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyA9IHtcbiAgICAvLyB0cmFuc2Zvcm0gaW5jb21pbmcgcmVzcG9uc2UgZGF0YVxuICAgIHRyYW5zZm9ybVJlc3BvbnNlOiBbZGVmYXVsdEh0dHBSZXNwb25zZVRyYW5zZm9ybV0sXG5cbiAgICAvLyB0cmFuc2Zvcm0gb3V0Z29pbmcgcmVxdWVzdCBkYXRhXG4gICAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uKGQpIHtcbiAgICAgIHJldHVybiBpc09iamVjdChkKSAmJiAhaXNGaWxlKGQpICYmICFpc0Jsb2IoZCkgJiYgIWlzRm9ybURhdGEoZCkgPyB0b0pzb24oZCkgOiBkO1xuICAgIH1dLFxuXG4gICAgLy8gZGVmYXVsdCBoZWFkZXJzXG4gICAgaGVhZGVyczoge1xuICAgICAgY29tbW9uOiB7XG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuICAgICAgfSxcbiAgICAgIHBvc3Q6ICAgc2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pLFxuICAgICAgcHV0OiAgICBzaGFsbG93Q29weShDT05URU5UX1RZUEVfQVBQTElDQVRJT05fSlNPTiksXG4gICAgICBwYXRjaDogIHNoYWxsb3dDb3B5KENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OKVxuICAgIH0sXG5cbiAgICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxuICAgIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblxuICAgIHBhcmFtU2VyaWFsaXplcjogJyRodHRwUGFyYW1TZXJpYWxpemVyJyxcblxuICAgIGpzb25wQ2FsbGJhY2tQYXJhbTogJ2NhbGxiYWNrJ1xuICB9O1xuXG4gIHZhciB1c2VBcHBseUFzeW5jID0gZmFsc2U7XG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwUHJvdmlkZXIjdXNlQXBwbHlBc3luY1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogQ29uZmlndXJlICRodHRwIHNlcnZpY2UgdG8gY29tYmluZSBwcm9jZXNzaW5nIG9mIG11bHRpcGxlIGh0dHAgcmVzcG9uc2VzIHJlY2VpdmVkIGF0IGFyb3VuZFxuICAgKiB0aGUgc2FtZSB0aW1lIHZpYSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHlBc3luYyAkcm9vdFNjb3BlLiRhcHBseUFzeW5jfS4gVGhpcyBjYW4gcmVzdWx0IGluXG4gICAqIHNpZ25pZmljYW50IHBlcmZvcm1hbmNlIGltcHJvdmVtZW50IGZvciBiaWdnZXIgYXBwbGljYXRpb25zIHRoYXQgbWFrZSBtYW55IEhUVFAgcmVxdWVzdHNcbiAgICogY29uY3VycmVudGx5IChjb21tb24gZHVyaW5nIGFwcGxpY2F0aW9uIGJvb3RzdHJhcCkuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGZhbHNlLiBJZiBubyB2YWx1ZSBpcyBzcGVjaWZpZWQsIHJldHVybnMgdGhlIGN1cnJlbnQgY29uZmlndXJlZCB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFuPX0gdmFsdWUgSWYgdHJ1ZSwgd2hlbiByZXF1ZXN0cyBhcmUgbG9hZGVkLCB0aGV5IHdpbGwgc2NoZWR1bGUgYSBkZWZlcnJlZFxuICAgKiAgICBcImFwcGx5XCIgb24gdGhlIG5leHQgdGljaywgZ2l2aW5nIHRpbWUgZm9yIHN1YnNlcXVlbnQgcmVxdWVzdHMgaW4gYSByb3VnaGx5IH4xMG1zIHdpbmRvd1xuICAgKiAgICB0byBsb2FkIGFuZCBzaGFyZSB0aGUgc2FtZSBkaWdlc3QgY3ljbGUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufE9iamVjdH0gSWYgYSB2YWx1ZSBpcyBzcGVjaWZpZWQsIHJldHVybnMgdGhlICRodHRwUHJvdmlkZXIgZm9yIGNoYWluaW5nLlxuICAgKiAgICBvdGhlcndpc2UsIHJldHVybnMgdGhlIGN1cnJlbnQgY29uZmlndXJlZCB2YWx1ZS5cbiAgICovXG4gIHRoaXMudXNlQXBwbHlBc3luYyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHVzZUFwcGx5QXN5bmMgPSAhIXZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiB1c2VBcHBseUFzeW5jO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICogQG5hbWUgJGh0dHBQcm92aWRlciNpbnRlcmNlcHRvcnNcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEFycmF5IGNvbnRhaW5pbmcgc2VydmljZSBmYWN0b3JpZXMgZm9yIGFsbCBzeW5jaHJvbm91cyBvciBhc3luY2hyb25vdXMge0BsaW5rIG5nLiRodHRwICRodHRwfVxuICAgKiBwcmUtcHJvY2Vzc2luZyBvZiByZXF1ZXN0IG9yIHBvc3Rwcm9jZXNzaW5nIG9mIHJlc3BvbnNlcy5cbiAgICpcbiAgICogVGhlc2Ugc2VydmljZSBmYWN0b3JpZXMgYXJlIG9yZGVyZWQgYnkgcmVxdWVzdCwgaS5lLiB0aGV5IGFyZSBhcHBsaWVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuICAgKiBhcnJheSwgb24gcmVxdWVzdCwgYnV0IHJldmVyc2Ugb3JkZXIsIG9uIHJlc3BvbnNlLlxuICAgKlxuICAgKiB7QGxpbmsgbmcuJGh0dHAjaW50ZXJjZXB0b3JzIEludGVyY2VwdG9ycyBkZXRhaWxlZCBpbmZvfVxuICAgKi9cbiAgdmFyIGludGVyY2VwdG9yRmFjdG9yaWVzID0gdGhpcy5pbnRlcmNlcHRvcnMgPSBbXTtcblxuICAvKipcbiAgICogQG5nZG9jIHByb3BlcnR5XG4gICAqIEBuYW1lICRodHRwUHJvdmlkZXIjeHNyZldoaXRlbGlzdGVkT3JpZ2luc1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogQXJyYXkgY29udGFpbmluZyBVUkxzIHdob3NlIG9yaWdpbnMgYXJlIHRydXN0ZWQgdG8gcmVjZWl2ZSB0aGUgWFNSRiB0b2tlbi4gU2VlIHRoZVxuICAgKiB7QGxpbmsgbmcuJGh0dHAjc2VjdXJpdHktY29uc2lkZXJhdGlvbnMgU2VjdXJpdHkgQ29uc2lkZXJhdGlvbnN9IHNlY3Rpb25zIGZvciBtb3JlIGRldGFpbHMgb25cbiAgICogWFNSRi5cbiAgICpcbiAgICogKipOb3RlOioqIEFuIFwib3JpZ2luXCIgY29uc2lzdHMgb2YgdGhlIFtVUkkgc2NoZW1lXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VUklfc2NoZW1lKSxcbiAgICogdGhlIFtob3N0bmFtZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSG9zdG5hbWUpIGFuZCB0aGVcbiAgICogW3BvcnQgbnVtYmVyXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Qb3J0Xyhjb21wdXRlcl9uZXR3b3JraW5nKS4gRm9yIGBodHRwOmAgYW5kXG4gICAqIGBodHRwczpgLCB0aGUgcG9ydCBudW1iZXIgY2FuIGJlIG9taXR0ZWQgaWYgdXNpbmcgdGggZGVmYXVsdCBwb3J0cyAoODAgYW5kIDQ0MyByZXNwZWN0aXZlbHkpLlxuICAgKiBFeGFtcGxlczogYGh0dHA6Ly9leGFtcGxlLmNvbWAsIGBodHRwczovL2FwaS5leGFtcGxlLmNvbTo5ODc2YFxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAgIEl0IGlzIG5vdCBwb3NzaWJsZSB0byB3aGl0ZWxpc3Qgc3BlY2lmaWMgVVJMcy9wYXRocy4gVGhlIGBwYXRoYCwgYHF1ZXJ5YCBhbmQgYGZyYWdtZW50YCBwYXJ0c1xuICAgKiAgIG9mIGEgVVJMIHdpbGwgYmUgaWdub3JlZC4gRm9yIGV4YW1wbGUsIGBodHRwczovL2Zvby5jb20vcGF0aC9iYXI/cXVlcnk9YmF6I2ZyYWdtZW50YCB3aWxsIGJlXG4gICAqICAgdHJlYXRlZCBhcyBgaHR0cHM6Ly9mb28uY29tYCwgbWVhbmluZyB0aGF0ICoqYWxsKiogcmVxdWVzdHMgdG8gVVJMcyBzdGFydGluZyB3aXRoXG4gICAqICAgYGh0dHBzOi8vZm9vLmNvbS9gIHdpbGwgaW5jbHVkZSB0aGUgWFNSRiB0b2tlbi5cbiAgICogPC9kaXY+XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIEFwcCBzZXJ2ZWQgZnJvbSBgaHR0cHM6Ly9leGFtcGxlLmNvbS9gLlxuICAgKiBhbmd1bGFyLlxuICAgKiAgIG1vZHVsZSgneHNyZldoaXRlbGlzdGVkT3JpZ2luc0V4YW1wbGUnLCBbXSkuXG4gICAqICAgY29uZmlnKFsnJGh0dHBQcm92aWRlcicsIGZ1bmN0aW9uKCRodHRwUHJvdmlkZXIpIHtcbiAgICogICAgICRodHRwUHJvdmlkZXIueHNyZldoaXRlbGlzdGVkT3JpZ2lucy5wdXNoKCdodHRwczovL2FwaS5leGFtcGxlLmNvbScpO1xuICAgKiAgIH1dKS5cbiAgICogICBydW4oWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gICAqICAgICAvLyBUaGUgWFNSRiB0b2tlbiB3aWxsIGJlIHNlbnQuXG4gICAqICAgICAkaHR0cC5nZXQoJ2h0dHBzOi8vYXBpLmV4YW1wbGUuY29tL3ByZWZlcmVuY2VzJykudGhlbiguLi4pO1xuICAgKlxuICAgKiAgICAgLy8gVGhlIFhTUkYgdG9rZW4gd2lsbCBOT1QgYmUgc2VudC5cbiAgICogICAgICRodHRwLmdldCgnaHR0cHM6Ly9zdGF0cy5leGFtcGxlLmNvbS9hY3Rpdml0eScpLnRoZW4oLi4uKTtcbiAgICogICB9XSk7XG4gICAqIGBgYFxuICAgKi9cbiAgdmFyIHhzcmZXaGl0ZWxpc3RlZE9yaWdpbnMgPSB0aGlzLnhzcmZXaGl0ZWxpc3RlZE9yaWdpbnMgPSBbXTtcblxuICB0aGlzLiRnZXQgPSBbJyRicm93c2VyJywgJyRodHRwQmFja2VuZCcsICckJGNvb2tpZVJlYWRlcicsICckY2FjaGVGYWN0b3J5JywgJyRyb290U2NvcGUnLCAnJHEnLCAnJGluamVjdG9yJywgJyRzY2UnLFxuICAgICAgZnVuY3Rpb24oJGJyb3dzZXIsICRodHRwQmFja2VuZCwgJCRjb29raWVSZWFkZXIsICRjYWNoZUZhY3RvcnksICRyb290U2NvcGUsICRxLCAkaW5qZWN0b3IsICRzY2UpIHtcblxuICAgIHZhciBkZWZhdWx0Q2FjaGUgPSAkY2FjaGVGYWN0b3J5KCckaHR0cCcpO1xuXG4gICAgLyoqXG4gICAgICogTWFrZSBzdXJlIHRoYXQgZGVmYXVsdCBwYXJhbSBzZXJpYWxpemVyIGlzIGV4cG9zZWQgYXMgYSBmdW5jdGlvblxuICAgICAqL1xuICAgIGRlZmF1bHRzLnBhcmFtU2VyaWFsaXplciA9IGlzU3RyaW5nKGRlZmF1bHRzLnBhcmFtU2VyaWFsaXplcikgP1xuICAgICAgJGluamVjdG9yLmdldChkZWZhdWx0cy5wYXJhbVNlcmlhbGl6ZXIpIDogZGVmYXVsdHMucGFyYW1TZXJpYWxpemVyO1xuXG4gICAgLyoqXG4gICAgICogSW50ZXJjZXB0b3JzIHN0b3JlZCBpbiByZXZlcnNlIG9yZGVyLiBJbm5lciBpbnRlcmNlcHRvcnMgYmVmb3JlIG91dGVyIGludGVyY2VwdG9ycy5cbiAgICAgKiBUaGUgcmV2ZXJzYWwgaXMgbmVlZGVkIHNvIHRoYXQgd2UgY2FuIGJ1aWxkIHVwIHRoZSBpbnRlcmNlcHRpb24gY2hhaW4gYXJvdW5kIHRoZVxuICAgICAqIHNlcnZlciByZXF1ZXN0LlxuICAgICAqL1xuICAgIHZhciByZXZlcnNlZEludGVyY2VwdG9ycyA9IFtdO1xuXG4gICAgZm9yRWFjaChpbnRlcmNlcHRvckZhY3RvcmllcywgZnVuY3Rpb24oaW50ZXJjZXB0b3JGYWN0b3J5KSB7XG4gICAgICByZXZlcnNlZEludGVyY2VwdG9ycy51bnNoaWZ0KGlzU3RyaW5nKGludGVyY2VwdG9yRmFjdG9yeSlcbiAgICAgICAgICA/ICRpbmplY3Rvci5nZXQoaW50ZXJjZXB0b3JGYWN0b3J5KSA6ICRpbmplY3Rvci5pbnZva2UoaW50ZXJjZXB0b3JGYWN0b3J5KSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIGNoZWNrIHJlcXVlc3QgVVJMcyBhZ2FpbnN0IGEgbGlzdCBvZiBhbGxvd2VkIG9yaWdpbnMuXG4gICAgICovXG4gICAgdmFyIHVybElzQWxsb3dlZE9yaWdpbiA9IHVybElzQWxsb3dlZE9yaWdpbkZhY3RvcnkoeHNyZldoaXRlbGlzdGVkT3JpZ2lucyk7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICogQG5hbWUgJGh0dHBcbiAgICAgKiBAcmVxdWlyZXMgbmcuJGh0dHBCYWNrZW5kXG4gICAgICogQHJlcXVpcmVzICRjYWNoZUZhY3RvcnlcbiAgICAgKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxuICAgICAqIEByZXF1aXJlcyAkcVxuICAgICAqIEByZXF1aXJlcyAkaW5qZWN0b3JcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFRoZSBgJGh0dHBgIHNlcnZpY2UgaXMgYSBjb3JlIEFuZ3VsYXJKUyBzZXJ2aWNlIHRoYXQgZmFjaWxpdGF0ZXMgY29tbXVuaWNhdGlvbiB3aXRoIHRoZSByZW1vdGVcbiAgICAgKiBIVFRQIHNlcnZlcnMgdmlhIHRoZSBicm93c2VyJ3MgW1hNTEh0dHBSZXF1ZXN0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi94bWxodHRwcmVxdWVzdClcbiAgICAgKiBvYmplY3Qgb3IgdmlhIFtKU09OUF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9KU09OUCkuXG4gICAgICpcbiAgICAgKiBGb3IgdW5pdCB0ZXN0aW5nIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSBgJGh0dHBgIHNlcnZpY2UsIHNlZVxuICAgICAqIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAgICAgKlxuICAgICAqIEZvciBhIGhpZ2hlciBsZXZlbCBvZiBhYnN0cmFjdGlvbiwgcGxlYXNlIGNoZWNrIG91dCB0aGUge0BsaW5rIG5nUmVzb3VyY2UuJHJlc291cmNlXG4gICAgICogJHJlc291cmNlfSBzZXJ2aWNlLlxuICAgICAqXG4gICAgICogVGhlICRodHRwIEFQSSBpcyBiYXNlZCBvbiB0aGUge0BsaW5rIG5nLiRxIGRlZmVycmVkL3Byb21pc2UgQVBJc30gZXhwb3NlZCBieVxuICAgICAqIHRoZSAkcSBzZXJ2aWNlLiBXaGlsZSBmb3Igc2ltcGxlIHVzYWdlIHBhdHRlcm5zIHRoaXMgZG9lc24ndCBtYXR0ZXIgbXVjaCwgZm9yIGFkdmFuY2VkIHVzYWdlXG4gICAgICogaXQgaXMgaW1wb3J0YW50IHRvIGZhbWlsaWFyaXplIHlvdXJzZWxmIHdpdGggdGhlc2UgQVBJcyBhbmQgdGhlIGd1YXJhbnRlZXMgdGhleSBwcm92aWRlLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyBHZW5lcmFsIHVzYWdlXG4gICAgICogVGhlIGAkaHR0cGAgc2VydmljZSBpcyBhIGZ1bmN0aW9uIHdoaWNoIHRha2VzIGEgc2luZ2xlIGFyZ3VtZW50IOKAlCBhIHtAbGluayAkaHR0cCN1c2FnZSBjb25maWd1cmF0aW9uIG9iamVjdH0g4oCUXG4gICAgICogdGhhdCBpcyB1c2VkIHRvIGdlbmVyYXRlIGFuIEhUVFAgcmVxdWVzdCBhbmQgcmV0dXJucyAgYSB7QGxpbmsgbmcuJHEgcHJvbWlzZX0gdGhhdCBpc1xuICAgICAqIHJlc29sdmVkIChyZXF1ZXN0IHN1Y2Nlc3MpIG9yIHJlamVjdGVkIChyZXF1ZXN0IGZhaWx1cmUpIHdpdGggYVxuICAgICAqIHtAbGluayBuZy4kaHR0cCMkaHR0cC1yZXR1cm5zIHJlc3BvbnNlfSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgLy8gU2ltcGxlIEdFVCByZXF1ZXN0IGV4YW1wbGU6XG4gICAgICogICAkaHR0cCh7XG4gICAgICogICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICogICAgIHVybDogJy9zb21lVXJsJ1xuICAgICAqICAgfSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgKiAgICAgICAvLyB0aGlzIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5XG4gICAgICogICAgICAgLy8gd2hlbiB0aGUgcmVzcG9uc2UgaXMgYXZhaWxhYmxlXG4gICAgICogICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgKiAgICAgICAvLyBjYWxsZWQgYXN5bmNocm9ub3VzbHkgaWYgYW4gZXJyb3Igb2NjdXJzXG4gICAgICogICAgICAgLy8gb3Igc2VydmVyIHJldHVybnMgcmVzcG9uc2Ugd2l0aCBhbiBlcnJvciBzdGF0dXMuXG4gICAgICogICAgIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyBTaG9ydGN1dCBtZXRob2RzXG4gICAgICpcbiAgICAgKiBTaG9ydGN1dCBtZXRob2RzIGFyZSBhbHNvIGF2YWlsYWJsZS4gQWxsIHNob3J0Y3V0IG1ldGhvZHMgcmVxdWlyZSBwYXNzaW5nIGluIHRoZSBVUkwsIGFuZFxuICAgICAqIHJlcXVlc3QgZGF0YSBtdXN0IGJlIHBhc3NlZCBpbiBmb3IgUE9TVC9QVVQgcmVxdWVzdHMuIEFuIG9wdGlvbmFsIGNvbmZpZyBjYW4gYmUgcGFzc2VkIGFzIHRoZVxuICAgICAqIGxhc3QgYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgJGh0dHAuZ2V0KCcvc29tZVVybCcsIGNvbmZpZykudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgICAqICAgJGh0dHAucG9zdCgnL3NvbWVVcmwnLCBkYXRhLCBjb25maWcpLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIENvbXBsZXRlIGxpc3Qgb2Ygc2hvcnRjdXQgbWV0aG9kczpcbiAgICAgKlxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2dldCAkaHR0cC5nZXR9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjaGVhZCAkaHR0cC5oZWFkfVxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI3Bvc3QgJGh0dHAucG9zdH1cbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNwdXQgJGh0dHAucHV0fVxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2RlbGV0ZSAkaHR0cC5kZWxldGV9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjanNvbnAgJGh0dHAuanNvbnB9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjcGF0Y2ggJGh0dHAucGF0Y2h9XG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIFdyaXRpbmcgVW5pdCBUZXN0cyB0aGF0IHVzZSAkaHR0cFxuICAgICAqIFdoZW4gdW5pdCB0ZXN0aW5nICh1c2luZyB7QGxpbmsgbmdNb2NrIG5nTW9ja30pLCBpdCBpcyBuZWNlc3NhcnkgdG8gY2FsbFxuICAgICAqIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kI2ZsdXNoICRodHRwQmFja2VuZC5mbHVzaCgpfSB0byBmbHVzaCBlYWNoIHBlbmRpbmdcbiAgICAgKiByZXF1ZXN0IHVzaW5nIHRyYWluZWQgcmVzcG9uc2VzLlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogJGh0dHBCYWNrZW5kLmV4cGVjdEdFVCguLi4pO1xuICAgICAqICRodHRwLmdldCguLi4pO1xuICAgICAqICRodHRwQmFja2VuZC5mbHVzaCgpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMgU2V0dGluZyBIVFRQIEhlYWRlcnNcbiAgICAgKlxuICAgICAqIFRoZSAkaHR0cCBzZXJ2aWNlIHdpbGwgYXV0b21hdGljYWxseSBhZGQgY2VydGFpbiBIVFRQIGhlYWRlcnMgdG8gYWxsIHJlcXVlc3RzLiBUaGVzZSBkZWZhdWx0c1xuICAgICAqIGNhbiBiZSBmdWxseSBjb25maWd1cmVkIGJ5IGFjY2Vzc2luZyB0aGUgYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVyc2AgY29uZmlndXJhdGlvblxuICAgICAqIG9iamVjdCwgd2hpY2ggY3VycmVudGx5IGNvbnRhaW5zIHRoaXMgZGVmYXVsdCBjb25maWd1cmF0aW9uOlxuICAgICAqXG4gICAgICogLSBgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbmAgKGhlYWRlcnMgdGhhdCBhcmUgY29tbW9uIGZvciBhbGwgcmVxdWVzdHMpOlxuICAgICAqICAgLSA8Y29kZT5BY2NlcHQ6IGFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sIFxcKiYjNjUyNzk7LyYjNjUyNzk7XFwqPC9jb2RlPlxuICAgICAqIC0gYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wb3N0YDogKGhlYWRlciBkZWZhdWx0cyBmb3IgUE9TVCByZXF1ZXN0cylcbiAgICAgKiAgIC0gYENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbmBcbiAgICAgKiAtIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucHV0YCAoaGVhZGVyIGRlZmF1bHRzIGZvciBQVVQgcmVxdWVzdHMpXG4gICAgICogICAtIGBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25gXG4gICAgICpcbiAgICAgKiBUbyBhZGQgb3Igb3ZlcndyaXRlIHRoZXNlIGRlZmF1bHRzLCBzaW1wbHkgYWRkIG9yIHJlbW92ZSBhIHByb3BlcnR5IGZyb20gdGhlc2UgY29uZmlndXJhdGlvblxuICAgICAqIG9iamVjdHMuIFRvIGFkZCBoZWFkZXJzIGZvciBhbiBIVFRQIG1ldGhvZCBvdGhlciB0aGFuIFBPU1Qgb3IgUFVULCBzaW1wbHkgYWRkIGEgbmV3IG9iamVjdFxuICAgICAqIHdpdGggdGhlIGxvd2VyY2FzZWQgSFRUUCBtZXRob2QgbmFtZSBhcyB0aGUga2V5LCBlLmcuXG4gICAgICogYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQgPSB7ICdNeS1IZWFkZXInIDogJ3ZhbHVlJyB9YC5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0cyBjYW4gYWxzbyBiZSBzZXQgYXQgcnVudGltZSB2aWEgdGhlIGAkaHR0cC5kZWZhdWx0c2Agb2JqZWN0IGluIHRoZSBzYW1lXG4gICAgICogZmFzaGlvbi4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBtb2R1bGUucnVuKGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgICogICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gJ0Jhc2ljIFltVmxjRHBpYjI5dyc7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBJbiBhZGRpdGlvbiwgeW91IGNhbiBzdXBwbHkgYSBgaGVhZGVyc2AgcHJvcGVydHkgaW4gdGhlIGNvbmZpZyBvYmplY3QgcGFzc2VkIHdoZW5cbiAgICAgKiBjYWxsaW5nIGAkaHR0cChjb25maWcpYCwgd2hpY2ggb3ZlcnJpZGVzIHRoZSBkZWZhdWx0cyB3aXRob3V0IGNoYW5naW5nIHRoZW0gZ2xvYmFsbHkuXG4gICAgICpcbiAgICAgKiBUbyBleHBsaWNpdGx5IHJlbW92ZSBhIGhlYWRlciBhdXRvbWF0aWNhbGx5IGFkZGVkIHZpYSAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMgb24gYSBwZXIgcmVxdWVzdCBiYXNpcyxcbiAgICAgKiBVc2UgdGhlIGBoZWFkZXJzYCBwcm9wZXJ0eSwgc2V0dGluZyB0aGUgZGVzaXJlZCBoZWFkZXIgdG8gYHVuZGVmaW5lZGAuIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB2YXIgcmVxID0ge1xuICAgICAqICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgKiAgdXJsOiAnaHR0cDovL2V4YW1wbGUuY29tJyxcbiAgICAgKiAgaGVhZGVyczoge1xuICAgICAqICAgICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWRcbiAgICAgKiAgfSxcbiAgICAgKiAgZGF0YTogeyB0ZXN0OiAndGVzdCcgfVxuICAgICAqIH1cbiAgICAgKlxuICAgICAqICRodHRwKHJlcSkudGhlbihmdW5jdGlvbigpey4uLn0sIGZ1bmN0aW9uKCl7Li4ufSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyBUcmFuc2Zvcm1pbmcgUmVxdWVzdHMgYW5kIFJlc3BvbnNlc1xuICAgICAqXG4gICAgICogQm90aCByZXF1ZXN0cyBhbmQgcmVzcG9uc2VzIGNhbiBiZSB0cmFuc2Zvcm1lZCB1c2luZyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnM6IGB0cmFuc2Zvcm1SZXF1ZXN0YFxuICAgICAqIGFuZCBgdHJhbnNmb3JtUmVzcG9uc2VgLiBUaGVzZSBwcm9wZXJ0aWVzIGNhbiBiZSBhIHNpbmdsZSBmdW5jdGlvbiB0aGF0IHJldHVybnNcbiAgICAgKiB0aGUgdHJhbnNmb3JtZWQgdmFsdWUgKGBmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpYCkgb3IgYW4gYXJyYXkgb2Ygc3VjaCB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMsXG4gICAgICogd2hpY2ggYWxsb3dzIHlvdSB0byBgcHVzaGAgb3IgYHVuc2hpZnRgIGEgbmV3IHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uIGludG8gdGhlIHRyYW5zZm9ybWF0aW9uIGNoYWluLlxuICAgICAqXG4gICAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICAgKiAqKk5vdGU6KiogQW5ndWxhckpTIGRvZXMgbm90IG1ha2UgYSBjb3B5IG9mIHRoZSBgZGF0YWAgcGFyYW1ldGVyIGJlZm9yZSBpdCBpcyBwYXNzZWQgaW50byB0aGUgYHRyYW5zZm9ybVJlcXVlc3RgIHBpcGVsaW5lLlxuICAgICAqIFRoYXQgbWVhbnMgY2hhbmdlcyB0byB0aGUgcHJvcGVydGllcyBvZiBgZGF0YWAgYXJlIG5vdCBsb2NhbCB0byB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIChzaW5jZSBKYXZhc2NyaXB0IHBhc3NlcyBvYmplY3RzIGJ5IHJlZmVyZW5jZSkuXG4gICAgICogRm9yIGV4YW1wbGUsIHdoZW4gY2FsbGluZyBgJGh0dHAuZ2V0KHVybCwgJHNjb3BlLm15T2JqZWN0KWAsIG1vZGlmaWNhdGlvbnMgdG8gdGhlIG9iamVjdCdzIHByb3BlcnRpZXMgaW4gYSB0cmFuc2Zvcm1SZXF1ZXN0XG4gICAgICogZnVuY3Rpb24gd2lsbCBiZSByZWZsZWN0ZWQgb24gdGhlIHNjb3BlIGFuZCBpbiBhbnkgdGVtcGxhdGVzIHdoZXJlIHRoZSBvYmplY3QgaXMgZGF0YS1ib3VuZC5cbiAgICAgKiBUbyBwcmV2ZW50IHRoaXMsIHRyYW5zZm9ybSBmdW5jdGlvbnMgc2hvdWxkIGhhdmUgbm8gc2lkZS1lZmZlY3RzLlxuICAgICAqIElmIHlvdSBuZWVkIHRvIG1vZGlmeSBwcm9wZXJ0aWVzLCBpdCBpcyByZWNvbW1lbmRlZCB0byBtYWtlIGEgY29weSBvZiB0aGUgZGF0YSwgb3IgY3JlYXRlIG5ldyBvYmplY3QgdG8gcmV0dXJuLlxuICAgICAqIDwvZGl2PlxuICAgICAqXG4gICAgICogIyMjIERlZmF1bHQgVHJhbnNmb3JtYXRpb25zXG4gICAgICpcbiAgICAgKiBUaGUgYCRodHRwUHJvdmlkZXJgIHByb3ZpZGVyIGFuZCBgJGh0dHBgIHNlcnZpY2UgZXhwb3NlIGBkZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0YCBhbmRcbiAgICAgKiBgZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2VgIHByb3BlcnRpZXMuIElmIGEgcmVxdWVzdCBkb2VzIG5vdCBwcm92aWRlIGl0cyBvd24gdHJhbnNmb3JtYXRpb25zXG4gICAgICogdGhlbiB0aGVzZSB3aWxsIGJlIGFwcGxpZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGF1Z21lbnQgb3IgcmVwbGFjZSB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgYnkgbW9kaWZ5aW5nIHRoZXNlIHByb3BlcnRpZXMgYnkgYWRkaW5nIHRvIG9yXG4gICAgICogcmVwbGFjaW5nIHRoZSBhcnJheS5cbiAgICAgKlxuICAgICAqIEFuZ3VsYXJKUyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGRlZmF1bHQgdHJhbnNmb3JtYXRpb25zOlxuICAgICAqXG4gICAgICogUmVxdWVzdCB0cmFuc2Zvcm1hdGlvbnMgKGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3RgIGFuZCBgJGh0dHAuZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdGApIGlzXG4gICAgICogYW4gYXJyYXkgd2l0aCBvbmUgZnVuY3Rpb24gdGhhdCBkb2VzIHRoZSBmb2xsb3dpbmc6XG4gICAgICpcbiAgICAgKiAtIElmIHRoZSBgZGF0YWAgcHJvcGVydHkgb2YgdGhlIHJlcXVlc3QgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbnMgYW4gb2JqZWN0LCBzZXJpYWxpemUgaXRcbiAgICAgKiAgIGludG8gSlNPTiBmb3JtYXQuXG4gICAgICpcbiAgICAgKiBSZXNwb25zZSB0cmFuc2Zvcm1hdGlvbnMgKGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCBhbmQgYCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCkgaXNcbiAgICAgKiBhbiBhcnJheSB3aXRoIG9uZSBmdW5jdGlvbiB0aGF0IGRvZXMgdGhlIGZvbGxvd2luZzpcbiAgICAgKlxuICAgICAqICAtIElmIFhTUkYgcHJlZml4IGlzIGRldGVjdGVkLCBzdHJpcCBpdCAoc2VlIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zIHNlY3Rpb24gYmVsb3cpLlxuICAgICAqICAtIElmIHRoZSBgQ29udGVudC1UeXBlYCBpcyBgYXBwbGljYXRpb24vanNvbmAgb3IgdGhlIHJlc3BvbnNlIGxvb2tzIGxpa2UgSlNPTixcbiAgICogICAgICBkZXNlcmlhbGl6ZSBpdCB1c2luZyBhIEpTT04gcGFyc2VyLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyMgT3ZlcnJpZGluZyB0aGUgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnMgUGVyIFJlcXVlc3RcbiAgICAgKlxuICAgICAqIElmIHlvdSB3aXNoIHRvIG92ZXJyaWRlIHRoZSByZXF1ZXN0L3Jlc3BvbnNlIHRyYW5zZm9ybWF0aW9ucyBvbmx5IGZvciBhIHNpbmdsZSByZXF1ZXN0IHRoZW4gcHJvdmlkZVxuICAgICAqIGB0cmFuc2Zvcm1SZXF1ZXN0YCBhbmQvb3IgYHRyYW5zZm9ybVJlc3BvbnNlYCBwcm9wZXJ0aWVzIG9uIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBwYXNzZWRcbiAgICAgKiBpbnRvIGAkaHR0cGAuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgaWYgeW91IHByb3ZpZGUgdGhlc2UgcHJvcGVydGllcyBvbiB0aGUgY29uZmlnIG9iamVjdCB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgd2lsbCBiZVxuICAgICAqIG92ZXJ3cml0dGVuLiBJZiB5b3Ugd2lzaCB0byBhdWdtZW50IHRoZSBkZWZhdWx0IHRyYW5zZm9ybWF0aW9ucyB0aGVuIHlvdSBtdXN0IGluY2x1ZGUgdGhlbSBpbiB5b3VyXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24gYXJyYXkuXG4gICAgICpcbiAgICAgKiBUaGUgZm9sbG93aW5nIGNvZGUgZGVtb25zdHJhdGVzIGFkZGluZyBhIG5ldyByZXNwb25zZSB0cmFuc2Zvcm1hdGlvbiB0byBiZSBydW4gYWZ0ZXIgdGhlIGRlZmF1bHQgcmVzcG9uc2VcbiAgICAgKiB0cmFuc2Zvcm1hdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZnVuY3Rpb24gYXBwZW5kVHJhbnNmb3JtKGRlZmF1bHRzLCB0cmFuc2Zvcm0pIHtcbiAgICAgKlxuICAgICAqICAgLy8gV2UgY2FuJ3QgZ3VhcmFudGVlIHRoYXQgdGhlIGRlZmF1bHQgdHJhbnNmb3JtYXRpb24gaXMgYW4gYXJyYXlcbiAgICAgKiAgIGRlZmF1bHRzID0gYW5ndWxhci5pc0FycmF5KGRlZmF1bHRzKSA/IGRlZmF1bHRzIDogW2RlZmF1bHRzXTtcbiAgICAgKlxuICAgICAqICAgLy8gQXBwZW5kIHRoZSBuZXcgdHJhbnNmb3JtYXRpb24gdG8gdGhlIGRlZmF1bHRzXG4gICAgICogICByZXR1cm4gZGVmYXVsdHMuY29uY2F0KHRyYW5zZm9ybSk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogJGh0dHAoe1xuICAgICAqICAgdXJsOiAnLi4uJyxcbiAgICAgKiAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICogICB0cmFuc2Zvcm1SZXNwb25zZTogYXBwZW5kVHJhbnNmb3JtKCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgICByZXR1cm4gZG9UcmFuc2Zvcm0odmFsdWUpO1xuICAgICAqICAgfSlcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqXG4gICAgICogIyMgQ2FjaGluZ1xuICAgICAqXG4gICAgICoge0BsaW5rIG5nLiRodHRwIGAkaHR0cGB9IHJlc3BvbnNlcyBhcmUgbm90IGNhY2hlZCBieSBkZWZhdWx0LiBUbyBlbmFibGUgY2FjaGluZywgeW91IG11c3RcbiAgICAgKiBzZXQgdGhlIGNvbmZpZy5jYWNoZSB2YWx1ZSBvciB0aGUgZGVmYXVsdCBjYWNoZSB2YWx1ZSB0byBUUlVFIG9yIHRvIGEgY2FjaGUgb2JqZWN0IChjcmVhdGVkXG4gICAgICogd2l0aCB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSBgJGNhY2hlRmFjdG9yeWB9KS4gSWYgZGVmaW5lZCwgdGhlIHZhbHVlIG9mIGNvbmZpZy5jYWNoZSB0YWtlc1xuICAgICAqIHByZWNlZGVuY2Ugb3ZlciB0aGUgZGVmYXVsdCBjYWNoZSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEluIG9yZGVyIHRvOlxuICAgICAqICAgKiBjYWNoZSBhbGwgcmVzcG9uc2VzIC0gc2V0IHRoZSBkZWZhdWx0IGNhY2hlIHZhbHVlIHRvIFRSVUUgb3IgdG8gYSBjYWNoZSBvYmplY3RcbiAgICAgKiAgICogY2FjaGUgYSBzcGVjaWZpYyByZXNwb25zZSAtIHNldCBjb25maWcuY2FjaGUgdmFsdWUgdG8gVFJVRSBvciB0byBhIGNhY2hlIG9iamVjdFxuICAgICAqXG4gICAgICogSWYgY2FjaGluZyBpcyBlbmFibGVkLCBidXQgbmVpdGhlciB0aGUgZGVmYXVsdCBjYWNoZSBub3IgY29uZmlnLmNhY2hlIGFyZSBzZXQgdG8gYSBjYWNoZSBvYmplY3QsXG4gICAgICogdGhlbiB0aGUgZGVmYXVsdCBgJGNhY2hlRmFjdG9yeShcIiRodHRwXCIpYCBvYmplY3QgaXMgdXNlZC5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGNhY2hlIHZhbHVlIGNhbiBiZSBzZXQgYnkgdXBkYXRpbmcgdGhlXG4gICAgICoge0BsaW5rIG5nLiRodHRwI2RlZmF1bHRzIGAkaHR0cC5kZWZhdWx0cy5jYWNoZWB9IHByb3BlcnR5IG9yIHRoZVxuICAgICAqIHtAbGluayAkaHR0cFByb3ZpZGVyI2RlZmF1bHRzIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmNhY2hlYH0gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBXaGVuIGNhY2hpbmcgaXMgZW5hYmxlZCwge0BsaW5rIG5nLiRodHRwIGAkaHR0cGB9IHN0b3JlcyB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIHVzaW5nXG4gICAgICogdGhlIHJlbGV2YW50IGNhY2hlIG9iamVjdC4gVGhlIG5leHQgdGltZSB0aGUgc2FtZSByZXF1ZXN0IGlzIG1hZGUsIHRoZSByZXNwb25zZSBpcyByZXR1cm5lZFxuICAgICAqIGZyb20gdGhlIGNhY2hlIHdpdGhvdXQgc2VuZGluZyBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIFRha2Ugbm90ZSB0aGF0OlxuICAgICAqXG4gICAgICogICAqIE9ubHkgR0VUIGFuZCBKU09OUCByZXF1ZXN0cyBhcmUgY2FjaGVkLlxuICAgICAqICAgKiBUaGUgY2FjaGUga2V5IGlzIHRoZSByZXF1ZXN0IFVSTCBpbmNsdWRpbmcgc2VhcmNoIHBhcmFtZXRlcnM7IGhlYWRlcnMgYXJlIG5vdCBjb25zaWRlcmVkLlxuICAgICAqICAgKiBDYWNoZWQgcmVzcG9uc2VzIGFyZSByZXR1cm5lZCBhc3luY2hyb25vdXNseSwgaW4gdGhlIHNhbWUgd2F5IGFzIHJlc3BvbnNlcyBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICogICAqIElmIG11bHRpcGxlIGlkZW50aWNhbCByZXF1ZXN0cyBhcmUgbWFkZSB1c2luZyB0aGUgc2FtZSBjYWNoZSwgd2hpY2ggaXMgbm90IHlldCBwb3B1bGF0ZWQsXG4gICAgICogICAgIG9uZSByZXF1ZXN0IHdpbGwgYmUgbWFkZSB0byB0aGUgc2VydmVyIGFuZCByZW1haW5pbmcgcmVxdWVzdHMgd2lsbCByZXR1cm4gdGhlIHNhbWUgcmVzcG9uc2UuXG4gICAgICogICAqIEEgY2FjaGUtY29udHJvbCBoZWFkZXIgb24gdGhlIHJlc3BvbnNlIGRvZXMgbm90IGFmZmVjdCBpZiBvciBob3cgcmVzcG9uc2VzIGFyZSBjYWNoZWQuXG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIEludGVyY2VwdG9yc1xuICAgICAqXG4gICAgICogQmVmb3JlIHlvdSBzdGFydCBjcmVhdGluZyBpbnRlcmNlcHRvcnMsIGJlIHN1cmUgdG8gdW5kZXJzdGFuZCB0aGVcbiAgICAgKiB7QGxpbmsgbmcuJHEgJHEgYW5kIGRlZmVycmVkL3Byb21pc2UgQVBJc30uXG4gICAgICpcbiAgICAgKiBGb3IgcHVycG9zZXMgb2YgZ2xvYmFsIGVycm9yIGhhbmRsaW5nLCBhdXRoZW50aWNhdGlvbiwgb3IgYW55IGtpbmQgb2Ygc3luY2hyb25vdXMgb3JcbiAgICAgKiBhc3luY2hyb25vdXMgcHJlLXByb2Nlc3Npbmcgb2YgcmVxdWVzdCBvciBwb3N0cHJvY2Vzc2luZyBvZiByZXNwb25zZXMsIGl0IGlzIGRlc2lyYWJsZSB0byBiZVxuICAgICAqIGFibGUgdG8gaW50ZXJjZXB0IHJlcXVlc3RzIGJlZm9yZSB0aGV5IGFyZSBoYW5kZWQgdG8gdGhlIHNlcnZlciBhbmRcbiAgICAgKiByZXNwb25zZXMgYmVmb3JlIHRoZXkgYXJlIGhhbmRlZCBvdmVyIHRvIHRoZSBhcHBsaWNhdGlvbiBjb2RlIHRoYXRcbiAgICAgKiBpbml0aWF0ZWQgdGhlc2UgcmVxdWVzdHMuIFRoZSBpbnRlcmNlcHRvcnMgbGV2ZXJhZ2UgdGhlIHtAbGluayBuZy4kcVxuICAgICAqIHByb21pc2UgQVBJc30gdG8gZnVsZmlsbCB0aGlzIG5lZWQgZm9yIGJvdGggc3luY2hyb25vdXMgYW5kIGFzeW5jaHJvbm91cyBwcmUtcHJvY2Vzc2luZy5cbiAgICAgKlxuICAgICAqIFRoZSBpbnRlcmNlcHRvcnMgYXJlIHNlcnZpY2UgZmFjdG9yaWVzIHRoYXQgYXJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgYCRodHRwUHJvdmlkZXJgIGJ5XG4gICAgICogYWRkaW5nIHRoZW0gdG8gdGhlIGAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9yc2AgYXJyYXkuIFRoZSBmYWN0b3J5IGlzIGNhbGxlZCBhbmRcbiAgICAgKiBpbmplY3RlZCB3aXRoIGRlcGVuZGVuY2llcyAoaWYgc3BlY2lmaWVkKSBhbmQgcmV0dXJucyB0aGUgaW50ZXJjZXB0b3IuXG4gICAgICpcbiAgICAgKiBUaGVyZSBhcmUgdHdvIGtpbmRzIG9mIGludGVyY2VwdG9ycyAoYW5kIHR3byBraW5kcyBvZiByZWplY3Rpb24gaW50ZXJjZXB0b3JzKTpcbiAgICAgKlxuICAgICAqICAgKiBgcmVxdWVzdGA6IGludGVyY2VwdG9ycyBnZXQgY2FsbGVkIHdpdGggYSBodHRwIHtAbGluayAkaHR0cCN1c2FnZSBjb25maWd9IG9iamVjdC4gVGhlIGZ1bmN0aW9uIGlzIGZyZWUgdG9cbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgY29uZmlnYCBvYmplY3Qgb3IgY3JlYXRlIGEgbmV3IG9uZS4gVGhlIGZ1bmN0aW9uIG5lZWRzIHRvIHJldHVybiB0aGUgYGNvbmZpZ2BcbiAgICAgKiAgICAgb2JqZWN0IGRpcmVjdGx5LCBvciBhIHByb21pc2UgY29udGFpbmluZyB0aGUgYGNvbmZpZ2Agb3IgYSBuZXcgYGNvbmZpZ2Agb2JqZWN0LlxuICAgICAqICAgKiBgcmVxdWVzdEVycm9yYDogaW50ZXJjZXB0b3IgZ2V0cyBjYWxsZWQgd2hlbiBhIHByZXZpb3VzIGludGVyY2VwdG9yIHRocmV3IGFuIGVycm9yIG9yXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXG4gICAgICogICAqIGByZXNwb25zZWA6IGludGVyY2VwdG9ycyBnZXQgY2FsbGVkIHdpdGggaHR0cCBgcmVzcG9uc2VgIG9iamVjdC4gVGhlIGZ1bmN0aW9uIGlzIGZyZWUgdG9cbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgcmVzcG9uc2VgIG9iamVjdCBvciBjcmVhdGUgYSBuZXcgb25lLiBUaGUgZnVuY3Rpb24gbmVlZHMgdG8gcmV0dXJuIHRoZSBgcmVzcG9uc2VgXG4gICAgICogICAgIG9iamVjdCBkaXJlY3RseSwgb3IgYXMgYSBwcm9taXNlIGNvbnRhaW5pbmcgdGhlIGByZXNwb25zZWAgb3IgYSBuZXcgYHJlc3BvbnNlYCBvYmplY3QuXG4gICAgICogICAqIGByZXNwb25zZUVycm9yYDogaW50ZXJjZXB0b3IgZ2V0cyBjYWxsZWQgd2hlbiBhIHByZXZpb3VzIGludGVyY2VwdG9yIHRocmV3IGFuIGVycm9yIG9yXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXG4gICAgICpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAvLyByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgYXMgYSBzZXJ2aWNlXG4gICAgICogICAkcHJvdmlkZS5mYWN0b3J5KCdteUh0dHBJbnRlcmNlcHRvcicsIGZ1bmN0aW9uKCRxLCBkZXBlbmRlbmN5MSwgZGVwZW5kZW5jeTIpIHtcbiAgICAgKiAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICAvLyBvcHRpb25hbCBtZXRob2RcbiAgICAgKiAgICAgICAncmVxdWVzdCc6IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIHN1Y2Nlc3NcbiAgICAgKiAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICogICAgICAgfSxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxuICAgICAqICAgICAgJ3JlcXVlc3RFcnJvcic6IGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIGVycm9yXG4gICAgICogICAgICAgICBpZiAoY2FuUmVjb3ZlcihyZWplY3Rpb24pKSB7XG4gICAgICogICAgICAgICAgIHJldHVybiByZXNwb25zZU9yTmV3UHJvbWlzZVxuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xuICAgICAqICAgICAgIH0sXG4gICAgICpcbiAgICAgKlxuICAgICAqXG4gICAgICogICAgICAgLy8gb3B0aW9uYWwgbWV0aG9kXG4gICAgICogICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBzdWNjZXNzXG4gICAgICogICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICogICAgICAgfSxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxuICAgICAqICAgICAgJ3Jlc3BvbnNlRXJyb3InOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBlcnJvclxuICAgICAqICAgICAgICAgaWYgKGNhblJlY292ZXIocmVqZWN0aW9uKSkge1xuICAgICAqICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VPck5ld1Byb21pc2VcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH07XG4gICAgICogICB9KTtcbiAgICAgKlxuICAgICAqICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnbXlIdHRwSW50ZXJjZXB0b3InKTtcbiAgICAgKlxuICAgICAqXG4gICAgICogICAvLyBhbHRlcm5hdGl2ZWx5LCByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgdmlhIGFuIGFub255bW91cyBmYWN0b3J5XG4gICAgICogICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGZ1bmN0aW9uKCRxLCBkZXBlbmRlbmN5MSwgZGVwZW5kZW5jeTIpIHtcbiAgICAgKiAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICogICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZVxuICAgICAqICAgICAgIH0sXG4gICAgICpcbiAgICAgKiAgICAgICAncmVzcG9uc2UnOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAqICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmVcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH07XG4gICAgICogICB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zXG4gICAgICpcbiAgICAgKiBXaGVuIGRlc2lnbmluZyB3ZWIgYXBwbGljYXRpb25zLCBjb25zaWRlciBzZWN1cml0eSB0aHJlYXRzIGZyb206XG4gICAgICpcbiAgICAgKiAtIFtKU09OIHZ1bG5lcmFiaWxpdHldKGh0dHA6Ly9oYWFja2VkLmNvbS9hcmNoaXZlLzIwMDgvMTEvMjAvYW5hdG9teS1vZi1hLXN1YnRsZS1qc29uLXZ1bG5lcmFiaWxpdHkuYXNweClcbiAgICAgKiAtIFtYU1JGXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb3NzLXNpdGVfcmVxdWVzdF9mb3JnZXJ5KVxuICAgICAqXG4gICAgICogQm90aCBzZXJ2ZXIgYW5kIHRoZSBjbGllbnQgbXVzdCBjb29wZXJhdGUgaW4gb3JkZXIgdG8gZWxpbWluYXRlIHRoZXNlIHRocmVhdHMuIEFuZ3VsYXJKUyBjb21lc1xuICAgICAqIHByZS1jb25maWd1cmVkIHdpdGggc3RyYXRlZ2llcyB0aGF0IGFkZHJlc3MgdGhlc2UgaXNzdWVzLCBidXQgZm9yIHRoaXMgdG8gd29yayBiYWNrZW5kIHNlcnZlclxuICAgICAqIGNvb3BlcmF0aW9uIGlzIHJlcXVpcmVkLlxuICAgICAqXG4gICAgICogIyMjIEpTT04gVnVsbmVyYWJpbGl0eSBQcm90ZWN0aW9uXG4gICAgICpcbiAgICAgKiBBIFtKU09OIHZ1bG5lcmFiaWxpdHldKGh0dHA6Ly9oYWFja2VkLmNvbS9hcmNoaXZlLzIwMDgvMTEvMjAvYW5hdG9teS1vZi1hLXN1YnRsZS1qc29uLXZ1bG5lcmFiaWxpdHkuYXNweClcbiAgICAgKiBhbGxvd3MgdGhpcmQgcGFydHkgd2Vic2l0ZSB0byB0dXJuIHlvdXIgSlNPTiByZXNvdXJjZSBVUkwgaW50b1xuICAgICAqIFtKU09OUF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9KU09OUCkgcmVxdWVzdCB1bmRlciBzb21lIGNvbmRpdGlvbnMuIFRvXG4gICAgICogY291bnRlciB0aGlzIHlvdXIgc2VydmVyIGNhbiBwcmVmaXggYWxsIEpTT04gcmVxdWVzdHMgd2l0aCBmb2xsb3dpbmcgc3RyaW5nIGBcIildfScsXFxuXCJgLlxuICAgICAqIEFuZ3VsYXJKUyB3aWxsIGF1dG9tYXRpY2FsbHkgc3RyaXAgdGhlIHByZWZpeCBiZWZvcmUgcHJvY2Vzc2luZyBpdCBhcyBKU09OLlxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGUgaWYgeW91ciBzZXJ2ZXIgbmVlZHMgdG8gcmV0dXJuOlxuICAgICAqIGBgYGpzXG4gICAgICogWydvbmUnLCd0d28nXVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogd2hpY2ggaXMgdnVsbmVyYWJsZSB0byBhdHRhY2ssIHlvdXIgc2VydmVyIGNhbiByZXR1cm46XG4gICAgICogYGBganNcbiAgICAgKiApXX0nLFxuICAgICAqIFsnb25lJywndHdvJ11cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEFuZ3VsYXJKUyB3aWxsIHN0cmlwIHRoZSBwcmVmaXgsIGJlZm9yZSBwcm9jZXNzaW5nIHRoZSBKU09OLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyMgQ3Jvc3MgU2l0ZSBSZXF1ZXN0IEZvcmdlcnkgKFhTUkYpIFByb3RlY3Rpb25cbiAgICAgKlxuICAgICAqIFtYU1JGXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb3NzLXNpdGVfcmVxdWVzdF9mb3JnZXJ5KSBpcyBhbiBhdHRhY2sgdGVjaG5pcXVlIGJ5XG4gICAgICogd2hpY2ggdGhlIGF0dGFja2VyIGNhbiB0cmljayBhbiBhdXRoZW50aWNhdGVkIHVzZXIgaW50byB1bmtub3dpbmdseSBleGVjdXRpbmcgYWN0aW9ucyBvbiB5b3VyXG4gICAgICogd2Vic2l0ZS4gQW5ndWxhckpTIHByb3ZpZGVzIGEgbWVjaGFuaXNtIHRvIGNvdW50ZXIgWFNSRi4gV2hlbiBwZXJmb3JtaW5nIFhIUiByZXF1ZXN0cywgdGhlXG4gICAgICogJGh0dHAgc2VydmljZSByZWFkcyBhIHRva2VuIGZyb20gYSBjb29raWUgKGJ5IGRlZmF1bHQsIGBYU1JGLVRPS0VOYCkgYW5kIHNldHMgaXQgYXMgYW4gSFRUUFxuICAgICAqIGhlYWRlciAoYnkgZGVmYXVsdCBgWC1YU1JGLVRPS0VOYCkuIFNpbmNlIG9ubHkgSmF2YVNjcmlwdCB0aGF0IHJ1bnMgb24geW91ciBkb21haW4gY291bGQgcmVhZFxuICAgICAqIHRoZSBjb29raWUsIHlvdXIgc2VydmVyIGNhbiBiZSBhc3N1cmVkIHRoYXQgdGhlIFhIUiBjYW1lIGZyb20gSmF2YVNjcmlwdCBydW5uaW5nIG9uIHlvdXJcbiAgICAgKiBkb21haW4uXG4gICAgICpcbiAgICAgKiBUbyB0YWtlIGFkdmFudGFnZSBvZiB0aGlzLCB5b3VyIHNlcnZlciBuZWVkcyB0byBzZXQgYSB0b2tlbiBpbiBhIEphdmFTY3JpcHQgcmVhZGFibGUgc2Vzc2lvblxuICAgICAqIGNvb2tpZSBjYWxsZWQgYFhTUkYtVE9LRU5gIG9uIHRoZSBmaXJzdCBIVFRQIEdFVCByZXF1ZXN0LiBPbiBzdWJzZXF1ZW50IFhIUiByZXF1ZXN0cyB0aGVcbiAgICAgKiBzZXJ2ZXIgY2FuIHZlcmlmeSB0aGF0IHRoZSBjb29raWUgbWF0Y2hlcyB0aGUgYFgtWFNSRi1UT0tFTmAgSFRUUCBoZWFkZXIsIGFuZCB0aGVyZWZvcmUgYmVcbiAgICAgKiBzdXJlIHRoYXQgb25seSBKYXZhU2NyaXB0IHJ1bm5pbmcgb24geW91ciBkb21haW4gY291bGQgaGF2ZSBzZW50IHRoZSByZXF1ZXN0LiBUaGUgdG9rZW4gbXVzdFxuICAgICAqIGJlIHVuaXF1ZSBmb3IgZWFjaCB1c2VyIGFuZCBtdXN0IGJlIHZlcmlmaWFibGUgYnkgdGhlIHNlcnZlciAodG8gcHJldmVudCB0aGUgSmF2YVNjcmlwdCBmcm9tXG4gICAgICogbWFraW5nIHVwIGl0cyBvd24gdG9rZW5zKS4gV2UgcmVjb21tZW5kIHRoYXQgdGhlIHRva2VuIGlzIGEgZGlnZXN0IG9mIHlvdXIgc2l0ZSdzXG4gICAgICogYXV0aGVudGljYXRpb24gY29va2llIHdpdGggYSBbc2FsdF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2FsdF8oY3J5cHRvZ3JhcGh5JiM0MTspXG4gICAgICogZm9yIGFkZGVkIHNlY3VyaXR5LlxuICAgICAqXG4gICAgICogVGhlIGhlYWRlciB3aWxsICZtZGFzaDsgYnkgZGVmYXVsdCAmbWRhc2g7ICoqbm90KiogYmUgc2V0IGZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMuIFRoaXNcbiAgICAgKiBwcmV2ZW50cyB1bmF1dGhvcml6ZWQgc2VydmVycyAoZS5nLiBtYWxpY2lvdXMgb3IgY29tcHJvbWlzZWQgM3JkLXBhcnR5IEFQSXMpIGZyb20gZ2FpbmluZ1xuICAgICAqIGFjY2VzcyB0byB5b3VyIHVzZXJzJyBYU1JGIHRva2VucyBhbmQgZXhwb3NpbmcgdGhlbSB0byBDcm9zcyBTaXRlIFJlcXVlc3QgRm9yZ2VyeS4gSWYgeW91XG4gICAgICogd2FudCB0bywgeW91IGNhbiB3aGl0ZWxpc3QgYWRkaXRpb25hbCBvcmlnaW5zIHRvIGFsc28gcmVjZWl2ZSB0aGUgWFNSRiB0b2tlbiwgYnkgYWRkaW5nIHRoZW1cbiAgICAgKiB0byB7QGxpbmsgbmcuJGh0dHBQcm92aWRlciN4c3JmV2hpdGVsaXN0ZWRPcmlnaW5zIHhzcmZXaGl0ZWxpc3RlZE9yaWdpbnN9LiBUaGlzIG1pZ2h0IGJlXG4gICAgICogdXNlZnVsLCBmb3IgZXhhbXBsZSwgaWYgeW91ciBhcHBsaWNhdGlvbiwgc2VydmVkIGZyb20gYGV4YW1wbGUuY29tYCwgbmVlZHMgdG8gYWNjZXNzIHlvdXIgQVBJXG4gICAgICogYXQgYGFwaS5leGFtcGxlLmNvbWAuXG4gICAgICogU2VlIHtAbGluayBuZy4kaHR0cFByb3ZpZGVyI3hzcmZXaGl0ZWxpc3RlZE9yaWdpbnMgJGh0dHBQcm92aWRlci54c3JmV2hpdGVsaXN0ZWRPcmlnaW5zfSBmb3JcbiAgICAgKiBtb3JlIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gICAgICogICAqKldhcm5pbmcqKjxiciAvPlxuICAgICAqICAgT25seSB3aGl0ZWxpc3Qgb3JpZ2lucyB0aGF0IHlvdSBoYXZlIGNvbnRyb2wgb3ZlciBhbmQgbWFrZSBzdXJlIHlvdSB1bmRlcnN0YW5kIHRoZVxuICAgICAqICAgaW1wbGljYXRpb25zIG9mIGRvaW5nIHNvLlxuICAgICAqIDwvZGl2PlxuICAgICAqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGNvb2tpZSBhbmQgdGhlIGhlYWRlciBjYW4gYmUgc3BlY2lmaWVkIHVzaW5nIHRoZSBgeHNyZkNvb2tpZU5hbWVgIGFuZFxuICAgICAqIGB4c3JmSGVhZGVyTmFtZWAgcHJvcGVydGllcyBvZiBlaXRoZXIgYCRodHRwUHJvdmlkZXIuZGVmYXVsdHNgIGF0IGNvbmZpZy10aW1lLFxuICAgICAqIGAkaHR0cC5kZWZhdWx0c2AgYXQgcnVuLXRpbWUsIG9yIHRoZSBwZXItcmVxdWVzdCBjb25maWcgb2JqZWN0LlxuICAgICAqXG4gICAgICogSW4gb3JkZXIgdG8gcHJldmVudCBjb2xsaXNpb25zIGluIGVudmlyb25tZW50cyB3aGVyZSBtdWx0aXBsZSBBbmd1bGFySlMgYXBwcyBzaGFyZSB0aGVcbiAgICAgKiBzYW1lIGRvbWFpbiBvciBzdWJkb21haW4sIHdlIHJlY29tbWVuZCB0aGF0IGVhY2ggYXBwbGljYXRpb24gdXNlcyBhIHVuaXF1ZSBjb29raWUgbmFtZS5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBPYmplY3QgZGVzY3JpYmluZyB0aGUgcmVxdWVzdCB0byBiZSBtYWRlIGFuZCBob3cgaXQgc2hvdWxkIGJlXG4gICAgICogICAgcHJvY2Vzc2VkLiBUaGUgb2JqZWN0IGhhcyBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgKlxuICAgICAqICAgIC0gKiptZXRob2QqKiDigJMgYHtzdHJpbmd9YCDigJMgSFRUUCBtZXRob2QgKGUuZy4gJ0dFVCcsICdQT1NUJywgZXRjKVxuICAgICAqICAgIC0gKip1cmwqKiDigJMgYHtzdHJpbmd8VHJ1c3RlZE9iamVjdH1gIOKAkyBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkO1xuICAgICAqICAgICAgb3IgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgYSBjYWxsIHRvIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCh1cmwpYC5cbiAgICAgKiAgICAtICoqcGFyYW1zKiog4oCTIGB7T2JqZWN0LjxzdHJpbmd8T2JqZWN0Pn1gIOKAkyBNYXAgb2Ygc3RyaW5ncyBvciBvYmplY3RzIHdoaWNoIHdpbGwgYmUgc2VyaWFsaXplZFxuICAgICAqICAgICAgd2l0aCB0aGUgYHBhcmFtU2VyaWFsaXplcmAgYW5kIGFwcGVuZGVkIGFzIEdFVCBwYXJhbWV0ZXJzLlxuICAgICAqICAgIC0gKipkYXRhKiog4oCTIGB7c3RyaW5nfE9iamVjdH1gIOKAkyBEYXRhIHRvIGJlIHNlbnQgYXMgdGhlIHJlcXVlc3QgbWVzc2FnZSBkYXRhLlxuICAgICAqICAgIC0gKipoZWFkZXJzKiog4oCTIGB7T2JqZWN0fWAg4oCTIE1hcCBvZiBzdHJpbmdzIG9yIGZ1bmN0aW9ucyB3aGljaCByZXR1cm4gc3RyaW5ncyByZXByZXNlbnRpbmdcbiAgICAgKiAgICAgIEhUVFAgaGVhZGVycyB0byBzZW5kIHRvIHRoZSBzZXJ2ZXIuIElmIHRoZSByZXR1cm4gdmFsdWUgb2YgYSBmdW5jdGlvbiBpcyBudWxsLCB0aGVcbiAgICAgKiAgICAgIGhlYWRlciB3aWxsIG5vdCBiZSBzZW50LiBGdW5jdGlvbnMgYWNjZXB0IGEgY29uZmlnIG9iamVjdCBhcyBhbiBhcmd1bWVudC5cbiAgICAgKiAgICAtICoqZXZlbnRIYW5kbGVycyoqIC0gYHtPYmplY3R9YCAtIEV2ZW50IGxpc3RlbmVycyB0byBiZSBib3VuZCB0byB0aGUgWE1MSHR0cFJlcXVlc3Qgb2JqZWN0LlxuICAgICAqICAgICAgVG8gYmluZCBldmVudHMgdG8gdGhlIFhNTEh0dHBSZXF1ZXN0IHVwbG9hZCBvYmplY3QsIHVzZSBgdXBsb2FkRXZlbnRIYW5kbGVyc2AuXG4gICAgICogICAgICBUaGUgaGFuZGxlciB3aWxsIGJlIGNhbGxlZCBpbiB0aGUgY29udGV4dCBvZiBhIGAkYXBwbHlgIGJsb2NrLlxuICAgICAqICAgIC0gKip1cGxvYWRFdmVudEhhbmRsZXJzKiogLSBge09iamVjdH1gIC0gRXZlbnQgbGlzdGVuZXJzIHRvIGJlIGJvdW5kIHRvIHRoZSBYTUxIdHRwUmVxdWVzdCB1cGxvYWRcbiAgICAgKiAgICAgIG9iamVjdC4gVG8gYmluZCBldmVudHMgdG8gdGhlIFhNTEh0dHBSZXF1ZXN0IG9iamVjdCwgdXNlIGBldmVudEhhbmRsZXJzYC5cbiAgICAgKiAgICAgIFRoZSBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIGluIHRoZSBjb250ZXh0IG9mIGEgYCRhcHBseWAgYmxvY2suXG4gICAgICogICAgLSAqKnhzcmZIZWFkZXJOYW1lKiog4oCTIGB7c3RyaW5nfWAg4oCTIE5hbWUgb2YgSFRUUCBoZWFkZXIgdG8gcG9wdWxhdGUgd2l0aCB0aGUgWFNSRiB0b2tlbi5cbiAgICAgKiAgICAtICoqeHNyZkNvb2tpZU5hbWUqKiDigJMgYHtzdHJpbmd9YCDigJMgTmFtZSBvZiBjb29raWUgY29udGFpbmluZyB0aGUgWFNSRiB0b2tlbi5cbiAgICAgKiAgICAtICoqdHJhbnNmb3JtUmVxdWVzdCoqIOKAk1xuICAgICAqICAgICAgYHtmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyKXxBcnJheS48ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcik+fWAg4oCTXG4gICAgICogICAgICB0cmFuc2Zvcm0gZnVuY3Rpb24gb3IgYW4gYXJyYXkgb2Ygc3VjaCBmdW5jdGlvbnMuIFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gdGFrZXMgdGhlIGh0dHBcbiAgICAgKiAgICAgIHJlcXVlc3QgYm9keSBhbmQgaGVhZGVycyBhbmQgcmV0dXJucyBpdHMgdHJhbnNmb3JtZWQgKHR5cGljYWxseSBzZXJpYWxpemVkKSB2ZXJzaW9uLlxuICAgICAqICAgICAgU2VlIHtAbGluayBuZy4kaHR0cCNvdmVycmlkaW5nLXRoZS1kZWZhdWx0LXRyYW5zZm9ybWF0aW9ucy1wZXItcmVxdWVzdFxuICAgICAqICAgICAgT3ZlcnJpZGluZyB0aGUgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnN9XG4gICAgICogICAgLSAqKnRyYW5zZm9ybVJlc3BvbnNlKiog4oCTXG4gICAgICogICAgICBge2Z1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIsIHN0YXR1cyl8QXJyYXkuPGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIsIHN0YXR1cyk+fWAg4oCTXG4gICAgICogICAgICB0cmFuc2Zvcm0gZnVuY3Rpb24gb3IgYW4gYXJyYXkgb2Ygc3VjaCBmdW5jdGlvbnMuIFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gdGFrZXMgdGhlIGh0dHBcbiAgICAgKiAgICAgIHJlc3BvbnNlIGJvZHksIGhlYWRlcnMgYW5kIHN0YXR1cyBhbmQgcmV0dXJucyBpdHMgdHJhbnNmb3JtZWQgKHR5cGljYWxseSBkZXNlcmlhbGl6ZWQpIHZlcnNpb24uXG4gICAgICogICAgICBTZWUge0BsaW5rIG5nLiRodHRwI292ZXJyaWRpbmctdGhlLWRlZmF1bHQtdHJhbnNmb3JtYXRpb25zLXBlci1yZXF1ZXN0XG4gICAgICogICAgICBPdmVycmlkaW5nIHRoZSBEZWZhdWx0IFRyYW5zZm9ybWF0aW9uc31cbiAgICAgKiAgICAtICoqcGFyYW1TZXJpYWxpemVyKiogLSBge3N0cmluZ3xmdW5jdGlvbihPYmplY3Q8c3RyaW5nLHN0cmluZz4pOnN0cmluZ31gIC0gQSBmdW5jdGlvbiB1c2VkIHRvXG4gICAgICogICAgICBwcmVwYXJlIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgcmVxdWVzdCBwYXJhbWV0ZXJzIChzcGVjaWZpZWQgYXMgYW4gb2JqZWN0KS5cbiAgICAgKiAgICAgIElmIHNwZWNpZmllZCBhcyBzdHJpbmcsIGl0IGlzIGludGVycHJldGVkIGFzIGZ1bmN0aW9uIHJlZ2lzdGVyZWQgd2l0aCB0aGVcbiAgICAgKiAgICAgIHtAbGluayAkaW5qZWN0b3IgJGluamVjdG9yfSwgd2hpY2ggbWVhbnMgeW91IGNhbiBjcmVhdGUgeW91ciBvd24gc2VyaWFsaXplclxuICAgICAqICAgICAgYnkgcmVnaXN0ZXJpbmcgaXQgYXMgYSB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlIHNlcnZpY2V9LlxuICAgICAqICAgICAgVGhlIGRlZmF1bHQgc2VyaWFsaXplciBpcyB0aGUge0BsaW5rICRodHRwUGFyYW1TZXJpYWxpemVyICRodHRwUGFyYW1TZXJpYWxpemVyfTtcbiAgICAgKiAgICAgIGFsdGVybmF0aXZlbHksIHlvdSBjYW4gdXNlIHRoZSB7QGxpbmsgJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2UgJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2V9XG4gICAgICogICAgLSAqKmNhY2hlKiog4oCTIGB7Ym9vbGVhbnxPYmplY3R9YCDigJMgQSBib29sZWFuIHZhbHVlIG9yIG9iamVjdCBjcmVhdGVkIHdpdGhcbiAgICAgKiAgICAgIHtAbGluayBuZy4kY2FjaGVGYWN0b3J5IGAkY2FjaGVGYWN0b3J5YH0gdG8gZW5hYmxlIG9yIGRpc2FibGUgY2FjaGluZyBvZiB0aGUgSFRUUCByZXNwb25zZS5cbiAgICAgKiAgICAgIFNlZSB7QGxpbmsgJGh0dHAjY2FjaGluZyAkaHR0cCBDYWNoaW5nfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKiAgICAtICoqdGltZW91dCoqIOKAkyBge251bWJlcnxQcm9taXNlfWAg4oCTIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzLCBvciB7QGxpbmsgbmcuJHEgcHJvbWlzZX1cbiAgICAgKiAgICAgIHRoYXQgc2hvdWxkIGFib3J0IHRoZSByZXF1ZXN0IHdoZW4gcmVzb2x2ZWQuXG4gICAgICpcbiAgICAgKiAgICAgIEEgbnVtZXJpY2FsIHRpbWVvdXQgb3IgYSBwcm9taXNlIHJldHVybmVkIGZyb20ge0BsaW5rIG5nLiR0aW1lb3V0ICR0aW1lb3V0fSwgd2lsbCBzZXRcbiAgICAgKiAgICAgIHRoZSBgeGhyU3RhdHVzYCBpbiB0aGUge0BsaW5rICRodHRwIyRodHRwLXJldHVybnMgcmVzcG9uc2V9IHRvIFwidGltZW91dFwiLCBhbmQgYW55IG90aGVyXG4gICAgICogICAgICByZXNvbHZlZCBwcm9taXNlIHdpbGwgc2V0IGl0IHRvIFwiYWJvcnRcIiwgZm9sbG93aW5nIHN0YW5kYXJkIFhNTEh0dHBSZXF1ZXN0IGJlaGF2aW9yLlxuICAgICAqXG4gICAgICogICAgLSAqKndpdGhDcmVkZW50aWFscyoqIC0gYHtib29sZWFufWAgLSB3aGV0aGVyIHRvIHNldCB0aGUgYHdpdGhDcmVkZW50aWFsc2AgZmxhZyBvbiB0aGVcbiAgICAgKiAgICAgIFhIUiBvYmplY3QuIFNlZSBbcmVxdWVzdHMgd2l0aCBjcmVkZW50aWFsc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSFRUUC9BY2Nlc3NfY29udHJvbF9DT1JTI1JlcXVlc3RzX3dpdGhfY3JlZGVudGlhbHMpXG4gICAgICogICAgICBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKiAgICAtICoqcmVzcG9uc2VUeXBlKiogLSBge3N0cmluZ31gIC0gc2VlXG4gICAgICogICAgICBbWE1MSHR0cFJlcXVlc3QucmVzcG9uc2VUeXBlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvWE1MSHR0cFJlcXVlc3QjeG1saHR0cHJlcXVlc3QtcmVzcG9uc2V0eXBlKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gQSB7QGxpbmsgbmcuJHEgYFByb21pc2V9YCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgKHJlcXVlc3Qgc3VjY2VzcylcbiAgICAgKiAgIG9yIHJlamVjdGVkIChyZXF1ZXN0IGZhaWx1cmUpIHdpdGggYSByZXNwb25zZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiAgIFRoZSByZXNwb25zZSBvYmplY3QgaGFzIHRoZXNlIHByb3BlcnRpZXM6XG4gICAgICpcbiAgICAgKiAgIC0gKipkYXRhKiog4oCTIGB7c3RyaW5nfE9iamVjdH1gIOKAkyBUaGUgcmVzcG9uc2UgYm9keSB0cmFuc2Zvcm1lZCB3aXRoXG4gICAgICogICAgIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb25zLlxuICAgICAqICAgLSAqKnN0YXR1cyoqIOKAkyBge251bWJlcn1gIOKAkyBIVFRQIHN0YXR1cyBjb2RlIG9mIHRoZSByZXNwb25zZS5cbiAgICAgKiAgIC0gKipoZWFkZXJzKiog4oCTIGB7ZnVuY3Rpb24oW2hlYWRlck5hbWVdKX1gIOKAkyBIZWFkZXIgZ2V0dGVyIGZ1bmN0aW9uLlxuICAgICAqICAgLSAqKmNvbmZpZyoqIOKAkyBge09iamVjdH1gIOKAkyBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgdGhhdCB3YXMgdXNlZFxuICAgICAqICAgICB0byBnZW5lcmF0ZSB0aGUgcmVxdWVzdC5cbiAgICAgKiAgIC0gKipzdGF0dXNUZXh0Kiog4oCTIGB7c3RyaW5nfWAg4oCTIEhUVFAgc3RhdHVzIHRleHQgb2YgdGhlIHJlc3BvbnNlLlxuICAgICAqICAgLSAqKnhoclN0YXR1cyoqIOKAkyBge3N0cmluZ31gIOKAkyBTdGF0dXMgb2YgdGhlIFhNTEh0dHBSZXF1ZXN0XG4gICAgICogICAgIChgY29tcGxldGVgLCBgZXJyb3JgLCBgdGltZW91dGAgb3IgYGFib3J0YCkuXG4gICAgICpcbiAgICAgKlxuICAgICAqICAgQSByZXNwb25zZSBzdGF0dXMgY29kZSBiZXR3ZWVuIDIwMCBhbmQgMjk5IGlzIGNvbnNpZGVyZWQgYSBzdWNjZXNzIHN0YXR1c1xuICAgICAqICAgYW5kIHdpbGwgcmVzdWx0IGluIHRoZSBzdWNjZXNzIGNhbGxiYWNrIGJlaW5nIGNhbGxlZC4gQW55IHJlc3BvbnNlIHN0YXR1c1xuICAgICAqICAgY29kZSBvdXRzaWRlIG9mIHRoYXQgcmFuZ2UgaXMgY29uc2lkZXJlZCBhbiBlcnJvciBzdGF0dXMgYW5kIHdpbGwgcmVzdWx0XG4gICAgICogICBpbiB0aGUgZXJyb3IgY2FsbGJhY2sgYmVpbmcgY2FsbGVkLlxuICAgICAqICAgQWxzbywgc3RhdHVzIGNvZGVzIGxlc3MgdGhhbiAtMSBhcmUgbm9ybWFsaXplZCB0byB6ZXJvLiAtMSB1c3VhbGx5IG1lYW5zXG4gICAgICogICB0aGUgcmVxdWVzdCB3YXMgYWJvcnRlZCwgZS5nLiB1c2luZyBhIGBjb25maWcudGltZW91dGAuIE1vcmUgaW5mb3JtYXRpb25cbiAgICAgKiAgIGFib3V0IHRoZSBzdGF0dXMgbWlnaHQgYmUgYXZhaWxhYmxlIGluIHRoZSBgeGhyU3RhdHVzYCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqICAgTm90ZSB0aGF0IGlmIHRoZSByZXNwb25zZSBpcyBhIHJlZGlyZWN0LCBYTUxIdHRwUmVxdWVzdCB3aWxsIHRyYW5zcGFyZW50bHlcbiAgICAgKiAgIGZvbGxvdyBpdCwgbWVhbmluZyB0aGF0IHRoZSBvdXRjb21lIChzdWNjZXNzIG9yIGVycm9yKSB3aWxsIGJlIGRldGVybWluZWRcbiAgICAgKiAgIGJ5IHRoZSBmaW5hbCByZXNwb25zZSBzdGF0dXMgY29kZS5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHtBcnJheS48T2JqZWN0Pn0gcGVuZGluZ1JlcXVlc3RzIEFycmF5IG9mIGNvbmZpZyBvYmplY3RzIGZvciBjdXJyZW50bHkgcGVuZGluZ1xuICAgICAqICAgcmVxdWVzdHMuIFRoaXMgaXMgcHJpbWFyaWx5IG1lYW50IHRvIGJlIHVzZWQgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy5cbiAgICAgKlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbjxleGFtcGxlIG1vZHVsZT1cImh0dHBFeGFtcGxlXCIgbmFtZT1cImh0dHAtc2VydmljZVwiPlxuPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgPGRpdiBuZy1jb250cm9sbGVyPVwiRmV0Y2hDb250cm9sbGVyXCI+XG4gICAgPHNlbGVjdCBuZy1tb2RlbD1cIm1ldGhvZFwiIGFyaWEtbGFiZWw9XCJSZXF1ZXN0IG1ldGhvZFwiPlxuICAgICAgPG9wdGlvbj5HRVQ8L29wdGlvbj5cbiAgICAgIDxvcHRpb24+SlNPTlA8L29wdGlvbj5cbiAgICA8L3NlbGVjdD5cbiAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVybFwiIHNpemU9XCI4MFwiIGFyaWEtbGFiZWw9XCJVUkxcIiAvPlxuICAgIDxidXR0b24gaWQ9XCJmZXRjaGJ0blwiIG5nLWNsaWNrPVwiZmV0Y2goKVwiPmZldGNoPC9idXR0b24+PGJyPlxuICAgIDxidXR0b24gaWQ9XCJzYW1wbGVnZXRidG5cIiBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdHRVQnLCAnaHR0cC1oZWxsby5odG1sJylcIj5TYW1wbGUgR0VUPC9idXR0b24+XG4gICAgPGJ1dHRvbiBpZD1cInNhbXBsZWpzb25wYnRuXCJcbiAgICAgIG5nLWNsaWNrPVwidXBkYXRlTW9kZWwoJ0pTT05QJyxcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vYW5ndWxhcmpzLm9yZy9ncmVldC5waHA/bmFtZT1TdXBlciUyMEhlcm8nKVwiPlxuICAgICAgU2FtcGxlIEpTT05QXG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvbiBpZD1cImludmFsaWRqc29ucGJ0blwiXG4gICAgICBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdKU09OUCcsICdodHRwczovL2FuZ3VsYXJqcy5vcmcvZG9lc250ZXhpc3QnKVwiPlxuICAgICAgICBJbnZhbGlkIEpTT05QXG4gICAgICA8L2J1dHRvbj5cbiAgICA8cHJlPmh0dHAgc3RhdHVzIGNvZGU6IHt7c3RhdHVzfX08L3ByZT5cbiAgICA8cHJlPmh0dHAgcmVzcG9uc2UgZGF0YToge3tkYXRhfX08L3ByZT5cbiAgPC9kaXY+XG48L2ZpbGU+XG48ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gIGFuZ3VsYXIubW9kdWxlKCdodHRwRXhhbXBsZScsIFtdKVxuICAgIC5jb25maWcoWyckc2NlRGVsZWdhdGVQcm92aWRlcicsIGZ1bmN0aW9uKCRzY2VEZWxlZ2F0ZVByb3ZpZGVyKSB7XG4gICAgICAvLyBXZSBtdXN0IHdoaXRlbGlzdCB0aGUgSlNPTlAgZW5kcG9pbnQgdGhhdCB3ZSBhcmUgdXNpbmcgdG8gc2hvdyB0aGF0IHdlIHRydXN0IGl0XG4gICAgICAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdChbXG4gICAgICAgICdzZWxmJyxcbiAgICAgICAgJ2h0dHBzOi8vYW5ndWxhcmpzLm9yZy8qKidcbiAgICAgIF0pO1xuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdGZXRjaENvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICckdGVtcGxhdGVDYWNoZScsXG4gICAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICAkc2NvcGUubWV0aG9kID0gJ0dFVCc7XG4gICAgICAgICRzY29wZS51cmwgPSAnaHR0cC1oZWxsby5odG1sJztcblxuICAgICAgICAkc2NvcGUuZmV0Y2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuY29kZSA9IG51bGw7XG4gICAgICAgICAgJHNjb3BlLnJlc3BvbnNlID0gbnVsbDtcblxuICAgICAgICAgICRodHRwKHttZXRob2Q6ICRzY29wZS5tZXRob2QsIHVybDogJHNjb3BlLnVybCwgY2FjaGU6ICR0ZW1wbGF0ZUNhY2hlfSkuXG4gICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG4gICAgICAgICAgICAgICRzY29wZS5kYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kYXRhID0gcmVzcG9uc2UuZGF0YSB8fCAnUmVxdWVzdCBmYWlsZWQnO1xuICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsKSB7XG4gICAgICAgICAgJHNjb3BlLm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgICAgICAkc2NvcGUudXJsID0gdXJsO1xuICAgICAgICB9O1xuICAgICAgfV0pO1xuPC9maWxlPlxuPGZpbGUgbmFtZT1cImh0dHAtaGVsbG8uaHRtbFwiPlxuICBIZWxsbywgJGh0dHAhXG48L2ZpbGU+XG48ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gIHZhciBzdGF0dXMgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3N0YXR1cycpKTtcbiAgdmFyIGRhdGEgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2RhdGEnKSk7XG4gIHZhciBmZXRjaEJ0biA9IGVsZW1lbnQoYnkuaWQoJ2ZldGNoYnRuJykpO1xuICB2YXIgc2FtcGxlR2V0QnRuID0gZWxlbWVudChieS5pZCgnc2FtcGxlZ2V0YnRuJykpO1xuICB2YXIgaW52YWxpZEpzb25wQnRuID0gZWxlbWVudChieS5pZCgnaW52YWxpZGpzb25wYnRuJykpO1xuXG4gIGl0KCdzaG91bGQgbWFrZSBhbiB4aHIgR0VUIHJlcXVlc3QnLCBmdW5jdGlvbigpIHtcbiAgICBzYW1wbGVHZXRCdG4uY2xpY2soKTtcbiAgICBmZXRjaEJ0bi5jbGljaygpO1xuICAgIGV4cGVjdChzdGF0dXMuZ2V0VGV4dCgpKS50b01hdGNoKCcyMDAnKTtcbiAgICBleHBlY3QoZGF0YS5nZXRUZXh0KCkpLnRvTWF0Y2goL0hlbGxvLCBcXCRodHRwIS8pO1xuICB9KTtcblxuLy8gQ29tbWVudGVkIG91dCBkdWUgdG8gZmxha2VzLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvOTE4NVxuLy8gaXQoJ3Nob3VsZCBtYWtlIGEgSlNPTlAgcmVxdWVzdCB0byBhbmd1bGFyanMub3JnJywgZnVuY3Rpb24oKSB7XG4vLyAgIHZhciBzYW1wbGVKc29ucEJ0biA9IGVsZW1lbnQoYnkuaWQoJ3NhbXBsZWpzb25wYnRuJykpO1xuLy8gICBzYW1wbGVKc29ucEJ0bi5jbGljaygpO1xuLy8gICBmZXRjaEJ0bi5jbGljaygpO1xuLy8gICBleHBlY3Qoc3RhdHVzLmdldFRleHQoKSkudG9NYXRjaCgnMjAwJyk7XG4vLyAgIGV4cGVjdChkYXRhLmdldFRleHQoKSkudG9NYXRjaCgvU3VwZXIgSGVybyEvKTtcbi8vIH0pO1xuXG4gIGl0KCdzaG91bGQgbWFrZSBKU09OUCByZXF1ZXN0IHRvIGludmFsaWQgVVJMIGFuZCBpbnZva2UgdGhlIGVycm9yIGhhbmRsZXInLFxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgaW52YWxpZEpzb25wQnRuLmNsaWNrKCk7XG4gICAgZmV0Y2hCdG4uY2xpY2soKTtcbiAgICBleHBlY3Qoc3RhdHVzLmdldFRleHQoKSkudG9NYXRjaCgnMCcpO1xuICAgIGV4cGVjdChkYXRhLmdldFRleHQoKSkudG9NYXRjaCgnUmVxdWVzdCBmYWlsZWQnKTtcbiAgfSk7XG48L2ZpbGU+XG48L2V4YW1wbGU+XG4gICAgICovXG4gICAgZnVuY3Rpb24gJGh0dHAocmVxdWVzdENvbmZpZykge1xuXG4gICAgICBpZiAoIWlzT2JqZWN0KHJlcXVlc3RDb25maWcpKSB7XG4gICAgICAgIHRocm93IG1pbkVycignJGh0dHAnKSgnYmFkcmVxJywgJ0h0dHAgcmVxdWVzdCBjb25maWd1cmF0aW9uIG11c3QgYmUgYW4gb2JqZWN0LiAgUmVjZWl2ZWQ6IHswfScsIHJlcXVlc3RDb25maWcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzU3RyaW5nKCRzY2UudmFsdWVPZihyZXF1ZXN0Q29uZmlnLnVybCkpKSB7XG4gICAgICAgIHRocm93IG1pbkVycignJGh0dHAnKSgnYmFkcmVxJywgJ0h0dHAgcmVxdWVzdCBjb25maWd1cmF0aW9uIHVybCBtdXN0IGJlIGEgc3RyaW5nIG9yIGEgJHNjZSB0cnVzdGVkIG9iamVjdC4gIFJlY2VpdmVkOiB7MH0nLCByZXF1ZXN0Q29uZmlnLnVybCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjb25maWcgPSBleHRlbmQoe1xuICAgICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBkZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0LFxuICAgICAgICB0cmFuc2Zvcm1SZXNwb25zZTogZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2UsXG4gICAgICAgIHBhcmFtU2VyaWFsaXplcjogZGVmYXVsdHMucGFyYW1TZXJpYWxpemVyLFxuICAgICAgICBqc29ucENhbGxiYWNrUGFyYW06IGRlZmF1bHRzLmpzb25wQ2FsbGJhY2tQYXJhbVxuICAgICAgfSwgcmVxdWVzdENvbmZpZyk7XG5cbiAgICAgIGNvbmZpZy5oZWFkZXJzID0gbWVyZ2VIZWFkZXJzKHJlcXVlc3RDb25maWcpO1xuICAgICAgY29uZmlnLm1ldGhvZCA9IHVwcGVyY2FzZShjb25maWcubWV0aG9kKTtcbiAgICAgIGNvbmZpZy5wYXJhbVNlcmlhbGl6ZXIgPSBpc1N0cmluZyhjb25maWcucGFyYW1TZXJpYWxpemVyKSA/XG4gICAgICAgICAgJGluamVjdG9yLmdldChjb25maWcucGFyYW1TZXJpYWxpemVyKSA6IGNvbmZpZy5wYXJhbVNlcmlhbGl6ZXI7XG5cbiAgICAgICRicm93c2VyLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTtcblxuICAgICAgdmFyIHJlcXVlc3RJbnRlcmNlcHRvcnMgPSBbXTtcbiAgICAgIHZhciByZXNwb25zZUludGVyY2VwdG9ycyA9IFtdO1xuICAgICAgdmFyIHByb21pc2UgPSAkcS5yZXNvbHZlKGNvbmZpZyk7XG5cbiAgICAgIC8vIGFwcGx5IGludGVyY2VwdG9yc1xuICAgICAgZm9yRWFjaChyZXZlcnNlZEludGVyY2VwdG9ycywgZnVuY3Rpb24oaW50ZXJjZXB0b3IpIHtcbiAgICAgICAgaWYgKGludGVyY2VwdG9yLnJlcXVlc3QgfHwgaW50ZXJjZXB0b3IucmVxdWVzdEVycm9yKSB7XG4gICAgICAgICAgcmVxdWVzdEludGVyY2VwdG9ycy51bnNoaWZ0KGludGVyY2VwdG9yLnJlcXVlc3QsIGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVyY2VwdG9yLnJlc3BvbnNlIHx8IGludGVyY2VwdG9yLnJlc3BvbnNlRXJyb3IpIHtcbiAgICAgICAgICByZXNwb25zZUludGVyY2VwdG9ycy5wdXNoKGludGVyY2VwdG9yLnJlc3BvbnNlLCBpbnRlcmNlcHRvci5yZXNwb25zZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHByb21pc2UgPSBjaGFpbkludGVyY2VwdG9ycyhwcm9taXNlLCByZXF1ZXN0SW50ZXJjZXB0b3JzKTtcbiAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oc2VydmVyUmVxdWVzdCk7XG4gICAgICBwcm9taXNlID0gY2hhaW5JbnRlcmNlcHRvcnMocHJvbWlzZSwgcmVzcG9uc2VJbnRlcmNlcHRvcnMpO1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UuZmluYWxseShjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCk7XG5cbiAgICAgIHJldHVybiBwcm9taXNlO1xuXG5cbiAgICAgIGZ1bmN0aW9uIGNoYWluSW50ZXJjZXB0b3JzKHByb21pc2UsIGludGVyY2VwdG9ycykge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnRlcmNlcHRvcnMubGVuZ3RoOyBpIDwgaWk7KSB7XG4gICAgICAgICAgdmFyIHRoZW5GbiA9IGludGVyY2VwdG9yc1tpKytdO1xuICAgICAgICAgIHZhciByZWplY3RGbiA9IGludGVyY2VwdG9yc1tpKytdO1xuXG4gICAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbih0aGVuRm4sIHJlamVjdEZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGludGVyY2VwdG9ycy5sZW5ndGggPSAwO1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCgpIHtcbiAgICAgICAgJGJyb3dzZXIuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZXhlY3V0ZUhlYWRlckZucyhoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgdmFyIGhlYWRlckNvbnRlbnQsIHByb2Nlc3NlZEhlYWRlcnMgPSB7fTtcblxuICAgICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKGhlYWRlckZuLCBoZWFkZXIpIHtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihoZWFkZXJGbikpIHtcbiAgICAgICAgICAgIGhlYWRlckNvbnRlbnQgPSBoZWFkZXJGbihjb25maWcpO1xuICAgICAgICAgICAgaWYgKGhlYWRlckNvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBwcm9jZXNzZWRIZWFkZXJzW2hlYWRlcl0gPSBoZWFkZXJDb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzZWRIZWFkZXJzW2hlYWRlcl0gPSBoZWFkZXJGbjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcm9jZXNzZWRIZWFkZXJzO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBtZXJnZUhlYWRlcnMoY29uZmlnKSB7XG4gICAgICAgIHZhciBkZWZIZWFkZXJzID0gZGVmYXVsdHMuaGVhZGVycyxcbiAgICAgICAgICAgIHJlcUhlYWRlcnMgPSBleHRlbmQoe30sIGNvbmZpZy5oZWFkZXJzKSxcbiAgICAgICAgICAgIGRlZkhlYWRlck5hbWUsIGxvd2VyY2FzZURlZkhlYWRlck5hbWUsIHJlcUhlYWRlck5hbWU7XG5cbiAgICAgICAgZGVmSGVhZGVycyA9IGV4dGVuZCh7fSwgZGVmSGVhZGVycy5jb21tb24sIGRlZkhlYWRlcnNbbG93ZXJjYXNlKGNvbmZpZy5tZXRob2QpXSk7XG5cbiAgICAgICAgLy8gdXNpbmcgZm9yLWluIGluc3RlYWQgb2YgZm9yRWFjaCB0byBhdm9pZCB1bm5lY2Vzc2FyeSBpdGVyYXRpb24gYWZ0ZXIgaGVhZGVyIGhhcyBiZWVuIGZvdW5kXG4gICAgICAgIGRlZmF1bHRIZWFkZXJzSXRlcmF0aW9uOlxuICAgICAgICBmb3IgKGRlZkhlYWRlck5hbWUgaW4gZGVmSGVhZGVycykge1xuICAgICAgICAgIGxvd2VyY2FzZURlZkhlYWRlck5hbWUgPSBsb3dlcmNhc2UoZGVmSGVhZGVyTmFtZSk7XG5cbiAgICAgICAgICBmb3IgKHJlcUhlYWRlck5hbWUgaW4gcmVxSGVhZGVycykge1xuICAgICAgICAgICAgaWYgKGxvd2VyY2FzZShyZXFIZWFkZXJOYW1lKSA9PT0gbG93ZXJjYXNlRGVmSGVhZGVyTmFtZSkge1xuICAgICAgICAgICAgICBjb250aW51ZSBkZWZhdWx0SGVhZGVyc0l0ZXJhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXFIZWFkZXJzW2RlZkhlYWRlck5hbWVdID0gZGVmSGVhZGVyc1tkZWZIZWFkZXJOYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGV4ZWN1dGUgaWYgaGVhZGVyIHZhbHVlIGlzIGEgZnVuY3Rpb24gZm9yIG1lcmdlZCBoZWFkZXJzXG4gICAgICAgIHJldHVybiBleGVjdXRlSGVhZGVyRm5zKHJlcUhlYWRlcnMsIHNoYWxsb3dDb3B5KGNvbmZpZykpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXJ2ZXJSZXF1ZXN0KGNvbmZpZykge1xuICAgICAgICB2YXIgaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xuICAgICAgICB2YXIgcmVxRGF0YSA9IHRyYW5zZm9ybURhdGEoY29uZmlnLmRhdGEsIGhlYWRlcnNHZXR0ZXIoaGVhZGVycyksIHVuZGVmaW5lZCwgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3QpO1xuXG4gICAgICAgIC8vIHN0cmlwIGNvbnRlbnQtdHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICAgICAgICBpZiAoaXNVbmRlZmluZWQocmVxRGF0YSkpIHtcbiAgICAgICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKHZhbHVlLCBoZWFkZXIpIHtcbiAgICAgICAgICAgIGlmIChsb3dlcmNhc2UoaGVhZGVyKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcbiAgICAgICAgICAgICAgZGVsZXRlIGhlYWRlcnNbaGVhZGVyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSAmJiAhaXNVbmRlZmluZWQoZGVmYXVsdHMud2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgICAgIGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgPSBkZWZhdWx0cy53aXRoQ3JlZGVudGlhbHM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZW5kIHJlcXVlc3RcbiAgICAgICAgcmV0dXJuIHNlbmRSZXEoY29uZmlnLCByZXFEYXRhKS50aGVuKHRyYW5zZm9ybVJlc3BvbnNlLCB0cmFuc2Zvcm1SZXNwb25zZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIC8vIG1ha2UgYSBjb3B5IHNpbmNlIHRoZSByZXNwb25zZSBtdXN0IGJlIGNhY2hlYWJsZVxuICAgICAgICB2YXIgcmVzcCA9IGV4dGVuZCh7fSwgcmVzcG9uc2UpO1xuICAgICAgICByZXNwLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmhlYWRlcnMsIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2UpO1xuICAgICAgICByZXR1cm4gKGlzU3VjY2VzcyhyZXNwb25zZS5zdGF0dXMpKVxuICAgICAgICAgID8gcmVzcFxuICAgICAgICAgIDogJHEucmVqZWN0KHJlc3ApO1xuICAgICAgfVxuICAgIH1cblxuICAgICRodHRwLnBlbmRpbmdSZXF1ZXN0cyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI2dldFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYEdFVGAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfFRydXN0ZWRPYmplY3R9IHVybCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkO1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBhbiBvYmplY3QgY3JlYXRlZCBieSBhIGNhbGwgdG8gYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHVybClgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLWFyZ3VtZW50cyBgJGh0dHAoKWAgYXJndW1lbnRzfS5cbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9ICBBIFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIHdpdGggYSByZXNwb25zZSBvYmplY3QuXG4gICAgICogU2VlIHtAbGluayBuZy4kaHR0cCMkaHR0cC1yZXR1cm5zIGAkaHR0cCgpYCByZXR1cm4gdmFsdWV9LlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI2RlbGV0ZVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYERFTEVURWAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfFRydXN0ZWRPYmplY3R9IHVybCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkO1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBhbiBvYmplY3QgY3JlYXRlZCBieSBhIGNhbGwgdG8gYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHVybClgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLWFyZ3VtZW50cyBgJGh0dHAoKWAgYXJndW1lbnRzfS5cbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9ICBBIFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIHdpdGggYSByZXNwb25zZSBvYmplY3QuXG4gICAgICogU2VlIHtAbGluayBuZy4kaHR0cCMkaHR0cC1yZXR1cm5zIGAkaHR0cCgpYCByZXR1cm4gdmFsdWV9LlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI2hlYWRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBIRUFEYCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8VHJ1c3RlZE9iamVjdH0gdXJsIEFic29sdXRlIG9yIHJlbGF0aXZlIFVSTCBvZiB0aGUgcmVzb3VyY2UgdGhhdCBpcyBiZWluZyByZXF1ZXN0ZWQ7XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIGFuIG9iamVjdCBjcmVhdGVkIGJ5IGEgY2FsbCB0byBgJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodXJsKWAuXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QuIFNlZSB7QGxpbmsgbmcuJGh0dHAjJGh0dHAtYXJndW1lbnRzIGAkaHR0cCgpYCBhcmd1bWVudHN9LlxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gIEEgUHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgd2l0aCBhIHJlc3BvbnNlIG9iamVjdC5cbiAgICAgKiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLXJldHVybnMgYCRodHRwKClgIHJldHVybiB2YWx1ZX0uXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGh0dHAjanNvbnBcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBKU09OUGAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCwgc2luY2UgSlNPTlAgcmVxdWVzdHMgYXJlIHNlbnNpdGl2ZSBiZWNhdXNlIHRoZSByZXNwb25zZSBpcyBnaXZlbiBmdWxsIGFjY2VzcyB0byB0aGUgYnJvd3NlcixcbiAgICAgKiB0aGUgdXJsIG11c3QgYmUgZGVjbGFyZWQsIHZpYSB7QGxpbmsgJHNjZX0gYXMgYSB0cnVzdGVkIHJlc291cmNlIFVSTC5cbiAgICAgKiBZb3UgY2FuIHRydXN0IGEgVVJMIGJ5IGFkZGluZyBpdCB0byB0aGUgd2hpdGVsaXN0IHZpYVxuICAgICAqIHtAbGluayAkc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCAgYCRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsV2hpdGVsaXN0YH0gb3JcbiAgICAgKiBieSBleHBsaWNpdGx5IHRydXN0aW5nIHRoZSBVUkwgdmlhIHtAbGluayAkc2NlI3RydXN0QXNSZXNvdXJjZVVybCBgJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodXJsKWB9LlxuICAgICAqXG4gICAgICogWW91IHNob3VsZCBhdm9pZCBnZW5lcmF0aW5nIHRoZSBVUkwgZm9yIHRoZSBKU09OUCByZXF1ZXN0IGZyb20gdXNlciBwcm92aWRlZCBkYXRhLlxuICAgICAqIFByb3ZpZGUgYWRkaXRpb25hbCBxdWVyeSBwYXJhbWV0ZXJzIHZpYSBgcGFyYW1zYCBwcm9wZXJ0eSBvZiB0aGUgYGNvbmZpZ2AgcGFyYW1ldGVyLCByYXRoZXIgdGhhblxuICAgICAqIG1vZGlmeWluZyB0aGUgVVJMIGl0c2VsZi5cbiAgICAgKlxuICAgICAqIEpTT05QIHJlcXVlc3RzIG11c3Qgc3BlY2lmeSBhIGNhbGxiYWNrIHRvIGJlIHVzZWQgaW4gdGhlIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlci4gVGhpcyBjYWxsYmFja1xuICAgICAqIGlzIHBhc3NlZCBhcyBhIHF1ZXJ5IHBhcmFtZXRlciBpbiB0aGUgcmVxdWVzdC4gWW91IG11c3Qgc3BlY2lmeSB0aGUgbmFtZSBvZiB0aGlzIHBhcmFtZXRlciBieVxuICAgICAqIHNldHRpbmcgdGhlIGBqc29ucENhbGxiYWNrUGFyYW1gIHByb3BlcnR5IG9uIHRoZSByZXF1ZXN0IGNvbmZpZyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiAkaHR0cC5qc29ucCgnc29tZS90cnVzdGVkL3VybCcsIHtqc29ucENhbGxiYWNrUGFyYW06ICdjYWxsYmFjayd9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogWW91IGNhbiBhbHNvIHNwZWNpZnkgYSBkZWZhdWx0IGNhbGxiYWNrIHBhcmFtZXRlciBuYW1lIGluIGAkaHR0cC5kZWZhdWx0cy5qc29ucENhbGxiYWNrUGFyYW1gLlxuICAgICAqIEluaXRpYWxseSB0aGlzIGlzIHNldCB0byBgJ2NhbGxiYWNrJ2AuXG4gICAgICpcbiAgICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gICAgICogWW91IGNhbiBubyBsb25nZXIgdXNlIHRoZSBgSlNPTl9DQUxMQkFDS2Agc3RyaW5nIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHNwZWNpZnlpbmcgd2hlcmUgdGhlIGNhbGxiYWNrXG4gICAgICogcGFyYW1ldGVyIHZhbHVlIHNob3VsZCBnby5cbiAgICAgKiA8L2Rpdj5cbiAgICAgKlxuICAgICAqIElmIHlvdSB3b3VsZCBsaWtlIHRvIGN1c3RvbWlzZSB3aGVyZSBhbmQgaG93IHRoZSBjYWxsYmFja3MgYXJlIHN0b3JlZCB0aGVuIHRyeSBvdmVycmlkaW5nXG4gICAgICogb3IgZGVjb3JhdGluZyB0aGUge0BsaW5rICRqc29ucENhbGxiYWNrc30gc2VydmljZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfFRydXN0ZWRPYmplY3R9IHVybCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkO1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBhbiBvYmplY3QgY3JlYXRlZCBieSBhIGNhbGwgdG8gYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHVybClgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLWFyZ3VtZW50cyBgJGh0dHAoKWAgYXJndW1lbnRzfS5cbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9ICBBIFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIHdpdGggYSByZXNwb25zZSBvYmplY3QuXG4gICAgICogU2VlIHtAbGluayBuZy4kaHR0cCMkaHR0cC1yZXR1cm5zIGAkaHR0cCgpYCByZXR1cm4gdmFsdWV9LlxuICAgICAqL1xuICAgIGNyZWF0ZVNob3J0TWV0aG9kcygnZ2V0JywgJ2RlbGV0ZScsICdoZWFkJywgJ2pzb25wJyk7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGh0dHAjcG9zdFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYFBPU1RgIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSBSZXF1ZXN0IGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdC4gU2VlIHtAbGluayBuZy4kaHR0cCMkaHR0cC1hcmd1bWVudHMgYCRodHRwKClgIGFyZ3VtZW50c30uXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSAgQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBvciByZWplY3RlZCB3aXRoIGEgcmVzcG9uc2Ugb2JqZWN0LlxuICAgICAqIFNlZSB7QGxpbmsgbmcuJGh0dHAjJGh0dHAtcmV0dXJucyBgJGh0dHAoKWAgcmV0dXJuIHZhbHVlfS5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaHR0cCNwdXRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBQVVRgIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gZGF0YSBSZXF1ZXN0IGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdC4gU2VlIHtAbGluayBuZy4kaHR0cCMkaHR0cC1hcmd1bWVudHMgYCRodHRwKClgIGFyZ3VtZW50c30uXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSAgQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBvciByZWplY3RlZCB3aXRoIGEgcmVzcG9uc2Ugb2JqZWN0LlxuICAgICAqIFNlZSB7QGxpbmsgbmcuJGh0dHAjJGh0dHAtcmV0dXJucyBgJGh0dHAoKWAgcmV0dXJuIHZhbHVlfS5cbiAgICAgKi9cblxuICAgICAvKipcbiAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgKiBAbmFtZSAkaHR0cCNwYXRjaFxuICAgICAgKlxuICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYFBBVENIYCByZXF1ZXN0LlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxuICAgICAgKiBAcGFyYW0geyp9IGRhdGEgUmVxdWVzdCBjb250ZW50XG4gICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLWFyZ3VtZW50cyBgJGh0dHAoKWAgYXJndW1lbnRzfS5cbiAgICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSAgQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBvciByZWplY3RlZCB3aXRoIGEgcmVzcG9uc2Ugb2JqZWN0LlxuICAgICAgKiBTZWUge0BsaW5rIG5nLiRodHRwIyRodHRwLXJldHVybnMgYCRodHRwKClgIHJldHVybiB2YWx1ZX0uXG4gICAgICAqL1xuICAgIGNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhKCdwb3N0JywgJ3B1dCcsICdwYXRjaCcpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAgICogQG5hbWUgJGh0dHAjZGVmYXVsdHNcbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIFJ1bnRpbWUgZXF1aXZhbGVudCBvZiB0aGUgYCRodHRwUHJvdmlkZXIuZGVmYXVsdHNgIHByb3BlcnR5LiBBbGxvd3MgY29uZmlndXJhdGlvbiBvZlxuICAgICAgICAgKiBkZWZhdWx0IGhlYWRlcnMsIHdpdGhDcmVkZW50aWFscyBhcyB3ZWxsIGFzIHJlcXVlc3QgYW5kIHJlc3BvbnNlIHRyYW5zZm9ybWF0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogU2VlIFwiU2V0dGluZyBIVFRQIEhlYWRlcnNcIiBhbmQgXCJUcmFuc2Zvcm1pbmcgUmVxdWVzdHMgYW5kIFJlc3BvbnNlc1wiIHNlY3Rpb25zIGFib3ZlLlxuICAgICAgICAgKi9cbiAgICAkaHR0cC5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuXG5cbiAgICByZXR1cm4gJGh0dHA7XG5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kcyhuYW1lcykge1xuICAgICAgZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgJGh0dHBbbmFtZV0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykge1xuICAgICAgICAgIHJldHVybiAkaHR0cChleHRlbmQoe30sIGNvbmZpZyB8fCB7fSwge1xuICAgICAgICAgICAgbWV0aG9kOiBuYW1lLFxuICAgICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhKG5hbWUpIHtcbiAgICAgIGZvckVhY2goYXJndW1lbnRzLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICRodHRwW25hbWVdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICAgICAgICByZXR1cm4gJGh0dHAoZXh0ZW5kKHt9LCBjb25maWcgfHwge30sIHtcbiAgICAgICAgICAgIG1ldGhvZDogbmFtZSxcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogTWFrZXMgdGhlIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiAhISEgQUNDRVNTRVMgQ0xPU1VSRSBWQVJTOlxuICAgICAqICRodHRwQmFja2VuZCwgZGVmYXVsdHMsICRsb2csICRyb290U2NvcGUsIGRlZmF1bHRDYWNoZSwgJGh0dHAucGVuZGluZ1JlcXVlc3RzXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2VuZFJlcShjb25maWcsIHJlcURhdGEpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCksXG4gICAgICAgICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2UsXG4gICAgICAgICAgY2FjaGUsXG4gICAgICAgICAgY2FjaGVkUmVzcCxcbiAgICAgICAgICByZXFIZWFkZXJzID0gY29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgaXNKc29ucCA9IGxvd2VyY2FzZShjb25maWcubWV0aG9kKSA9PT0gJ2pzb25wJyxcbiAgICAgICAgICB1cmwgPSBjb25maWcudXJsO1xuXG4gICAgICBpZiAoaXNKc29ucCkge1xuICAgICAgICAvLyBKU09OUCBpcyBhIHByZXR0eSBzZW5zaXRpdmUgb3BlcmF0aW9uIHdoZXJlIHdlJ3JlIGFsbG93aW5nIGEgc2NyaXB0IHRvIGhhdmUgZnVsbCBhY2Nlc3MgdG9cbiAgICAgICAgLy8gb3VyIERPTSBhbmQgSlMgc3BhY2UuICBTbyB3ZSByZXF1aXJlIHRoYXQgdGhlIFVSTCBzYXRpc2ZpZXMgU0NFLlJFU09VUkNFX1VSTC5cbiAgICAgICAgdXJsID0gJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwodXJsKTtcbiAgICAgIH0gZWxzZSBpZiAoIWlzU3RyaW5nKHVybCkpIHtcbiAgICAgICAgLy8gSWYgaXQgaXMgbm90IGEgc3RyaW5nIHRoZW4gdGhlIFVSTCBtdXN0IGJlIGEgJHNjZSB0cnVzdGVkIG9iamVjdFxuICAgICAgICB1cmwgPSAkc2NlLnZhbHVlT2YodXJsKTtcbiAgICAgIH1cblxuICAgICAgdXJsID0gYnVpbGRVcmwodXJsLCBjb25maWcucGFyYW1TZXJpYWxpemVyKGNvbmZpZy5wYXJhbXMpKTtcblxuICAgICAgaWYgKGlzSnNvbnApIHtcbiAgICAgICAgLy8gQ2hlY2sgdGhlIHVybCBhbmQgYWRkIHRoZSBKU09OUCBjYWxsYmFjayBwbGFjZWhvbGRlclxuICAgICAgICB1cmwgPSBzYW5pdGl6ZUpzb25wQ2FsbGJhY2tQYXJhbSh1cmwsIGNvbmZpZy5qc29ucENhbGxiYWNrUGFyYW0pO1xuICAgICAgfVxuXG4gICAgICAkaHR0cC5wZW5kaW5nUmVxdWVzdHMucHVzaChjb25maWcpO1xuICAgICAgcHJvbWlzZS50aGVuKHJlbW92ZVBlbmRpbmdSZXEsIHJlbW92ZVBlbmRpbmdSZXEpO1xuXG4gICAgICBpZiAoKGNvbmZpZy5jYWNoZSB8fCBkZWZhdWx0cy5jYWNoZSkgJiYgY29uZmlnLmNhY2hlICE9PSBmYWxzZSAmJlxuICAgICAgICAgIChjb25maWcubWV0aG9kID09PSAnR0VUJyB8fCBjb25maWcubWV0aG9kID09PSAnSlNPTlAnKSkge1xuICAgICAgICBjYWNoZSA9IGlzT2JqZWN0KGNvbmZpZy5jYWNoZSkgPyBjb25maWcuY2FjaGVcbiAgICAgICAgICAgIDogaXNPYmplY3QoLyoqIEB0eXBlIHs/fSAqLyAoZGVmYXVsdHMpLmNhY2hlKVxuICAgICAgICAgICAgICA/IC8qKiBAdHlwZSB7P30gKi8gKGRlZmF1bHRzKS5jYWNoZVxuICAgICAgICAgICAgICA6IGRlZmF1bHRDYWNoZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGNhY2hlZFJlc3AgPSBjYWNoZS5nZXQodXJsKTtcbiAgICAgICAgaWYgKGlzRGVmaW5lZChjYWNoZWRSZXNwKSkge1xuICAgICAgICAgIGlmIChpc1Byb21pc2VMaWtlKGNhY2hlZFJlc3ApKSB7XG4gICAgICAgICAgICAvLyBjYWNoZWQgcmVxdWVzdCBoYXMgYWxyZWFkeSBiZWVuIHNlbnQsIGJ1dCB0aGVyZSBpcyBubyByZXNwb25zZSB5ZXRcbiAgICAgICAgICAgIGNhY2hlZFJlc3AudGhlbihyZXNvbHZlUHJvbWlzZVdpdGhSZXN1bHQsIHJlc29sdmVQcm9taXNlV2l0aFJlc3VsdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHNlcnZpbmcgZnJvbSBjYWNoZVxuICAgICAgICAgICAgaWYgKGlzQXJyYXkoY2FjaGVkUmVzcCkpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcFsxXSwgY2FjaGVkUmVzcFswXSwgc2hhbGxvd0NvcHkoY2FjaGVkUmVzcFsyXSksIGNhY2hlZFJlc3BbM10sIGNhY2hlZFJlc3BbNF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcCwgMjAwLCB7fSwgJ09LJywgJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHB1dCB0aGUgcHJvbWlzZSBmb3IgdGhlIG5vbi10cmFuc2Zvcm1lZCByZXNwb25zZSBpbnRvIGNhY2hlIGFzIGEgcGxhY2Vob2xkZXJcbiAgICAgICAgICBjYWNoZS5wdXQodXJsLCBwcm9taXNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8vIGlmIHdlIHdvbid0IGhhdmUgdGhlIHJlc3BvbnNlIGluIGNhY2hlLCBzZXQgdGhlIHhzcmYgaGVhZGVycyBhbmRcbiAgICAgIC8vIHNlbmQgdGhlIHJlcXVlc3QgdG8gdGhlIGJhY2tlbmRcbiAgICAgIGlmIChpc1VuZGVmaW5lZChjYWNoZWRSZXNwKSkge1xuICAgICAgICB2YXIgeHNyZlZhbHVlID0gdXJsSXNBbGxvd2VkT3JpZ2luKGNvbmZpZy51cmwpXG4gICAgICAgICAgICA/ICQkY29va2llUmVhZGVyKClbY29uZmlnLnhzcmZDb29raWVOYW1lIHx8IGRlZmF1bHRzLnhzcmZDb29raWVOYW1lXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh4c3JmVmFsdWUpIHtcbiAgICAgICAgICByZXFIZWFkZXJzWyhjb25maWcueHNyZkhlYWRlck5hbWUgfHwgZGVmYXVsdHMueHNyZkhlYWRlck5hbWUpXSA9IHhzcmZWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgICRodHRwQmFja2VuZChjb25maWcubWV0aG9kLCB1cmwsIHJlcURhdGEsIGRvbmUsIHJlcUhlYWRlcnMsIGNvbmZpZy50aW1lb3V0LFxuICAgICAgICAgICAgY29uZmlnLndpdGhDcmVkZW50aWFscywgY29uZmlnLnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgIGNyZWF0ZUFwcGx5SGFuZGxlcnMoY29uZmlnLmV2ZW50SGFuZGxlcnMpLFxuICAgICAgICAgICAgY3JlYXRlQXBwbHlIYW5kbGVycyhjb25maWcudXBsb2FkRXZlbnRIYW5kbGVycykpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcblxuICAgICAgZnVuY3Rpb24gY3JlYXRlQXBwbHlIYW5kbGVycyhldmVudEhhbmRsZXJzKSB7XG4gICAgICAgIGlmIChldmVudEhhbmRsZXJzKSB7XG4gICAgICAgICAgdmFyIGFwcGx5SGFuZGxlcnMgPSB7fTtcbiAgICAgICAgICBmb3JFYWNoKGV2ZW50SGFuZGxlcnMsIGZ1bmN0aW9uKGV2ZW50SGFuZGxlciwga2V5KSB7XG4gICAgICAgICAgICBhcHBseUhhbmRsZXJzW2tleV0gPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICBpZiAodXNlQXBwbHlBc3luYykge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5QXN5bmMoY2FsbEV2ZW50SGFuZGxlcik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJvb3RTY29wZS4kJHBoYXNlKSB7XG4gICAgICAgICAgICAgICAgY2FsbEV2ZW50SGFuZGxlcigpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGNhbGxFdmVudEhhbmRsZXIpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZnVuY3Rpb24gY2FsbEV2ZW50SGFuZGxlcigpIHtcbiAgICAgICAgICAgICAgICBldmVudEhhbmRsZXIoZXZlbnQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBhcHBseUhhbmRsZXJzO1xuICAgICAgICB9XG4gICAgICB9XG5cblxuICAgICAgLyoqXG4gICAgICAgKiBDYWxsYmFjayByZWdpc3RlcmVkIHRvICRodHRwQmFja2VuZCgpOlxuICAgICAgICogIC0gY2FjaGVzIHRoZSByZXNwb25zZSBpZiBkZXNpcmVkXG4gICAgICAgKiAgLSByZXNvbHZlcyB0aGUgcmF3ICRodHRwIHByb21pc2VcbiAgICAgICAqICAtIGNhbGxzICRhcHBseVxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBkb25lKHN0YXR1cywgcmVzcG9uc2UsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQsIHhoclN0YXR1cykge1xuICAgICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgICBpZiAoaXNTdWNjZXNzKHN0YXR1cykpIHtcbiAgICAgICAgICAgIGNhY2hlLnB1dCh1cmwsIFtzdGF0dXMsIHJlc3BvbnNlLCBwYXJzZUhlYWRlcnMoaGVhZGVyc1N0cmluZyksIHN0YXR1c1RleHQsIHhoclN0YXR1c10pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgcHJvbWlzZSBmcm9tIHRoZSBjYWNoZVxuICAgICAgICAgICAgY2FjaGUucmVtb3ZlKHVybCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZUh0dHBQcm9taXNlKCkge1xuICAgICAgICAgIHJlc29sdmVQcm9taXNlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQsIHhoclN0YXR1cyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlQXBwbHlBc3luYykge1xuICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5QXN5bmMocmVzb2x2ZUh0dHBQcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlSHR0cFByb21pc2UoKTtcbiAgICAgICAgICBpZiAoISRyb290U2NvcGUuJCRwaGFzZSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8qKlxuICAgICAgICogUmVzb2x2ZXMgdGhlIHJhdyAkaHR0cCBwcm9taXNlLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiByZXNvbHZlUHJvbWlzZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzLCBzdGF0dXNUZXh0LCB4aHJTdGF0dXMpIHtcbiAgICAgICAgLy9zdGF0dXM6IEhUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGUsIDAsIC0xIChhYm9ydGVkIGJ5IHRpbWVvdXQgLyBwcm9taXNlKVxuICAgICAgICBzdGF0dXMgPSBzdGF0dXMgPj0gLTEgPyBzdGF0dXMgOiAwO1xuXG4gICAgICAgIChpc1N1Y2Nlc3Moc3RhdHVzKSA/IGRlZmVycmVkLnJlc29sdmUgOiBkZWZlcnJlZC5yZWplY3QpKHtcbiAgICAgICAgICBkYXRhOiByZXNwb25zZSxcbiAgICAgICAgICBzdGF0dXM6IHN0YXR1cyxcbiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzR2V0dGVyKGhlYWRlcnMpLFxuICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICAgIHN0YXR1c1RleHQ6IHN0YXR1c1RleHQsXG4gICAgICAgICAgeGhyU3RhdHVzOiB4aHJTdGF0dXNcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlV2l0aFJlc3VsdChyZXN1bHQpIHtcbiAgICAgICAgcmVzb2x2ZVByb21pc2UocmVzdWx0LmRhdGEsIHJlc3VsdC5zdGF0dXMsIHNoYWxsb3dDb3B5KHJlc3VsdC5oZWFkZXJzKCkpLCByZXN1bHQuc3RhdHVzVGV4dCwgcmVzdWx0LnhoclN0YXR1cyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJlbW92ZVBlbmRpbmdSZXEoKSB7XG4gICAgICAgIHZhciBpZHggPSAkaHR0cC5wZW5kaW5nUmVxdWVzdHMuaW5kZXhPZihjb25maWcpO1xuICAgICAgICBpZiAoaWR4ICE9PSAtMSkgJGh0dHAucGVuZGluZ1JlcXVlc3RzLnNwbGljZShpZHgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYnVpbGRVcmwodXJsLCBzZXJpYWxpemVkUGFyYW1zKSB7XG4gICAgICBpZiAoc2VyaWFsaXplZFBhcmFtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHVybCArPSAoKHVybC5pbmRleE9mKCc/JykgPT09IC0xKSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzYW5pdGl6ZUpzb25wQ2FsbGJhY2tQYXJhbSh1cmwsIGNiS2V5KSB7XG4gICAgICB2YXIgcGFydHMgPSB1cmwuc3BsaXQoJz8nKTtcbiAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAyKSB7XG4gICAgICAgIC8vIFRocm93IGlmIHRoZSB1cmwgY29udGFpbnMgbW9yZSB0aGFuIG9uZSBgP2AgcXVlcnkgaW5kaWNhdG9yXG4gICAgICAgIHRocm93ICRodHRwTWluRXJyKCdiYWRqc29ucCcsICdJbGxlZ2FsIHVzZSBtb3JlIHRoYW4gb25lIFwiP1wiLCBpbiB1cmwsIFwiezF9XCInLCB1cmwpO1xuICAgICAgfVxuICAgICAgdmFyIHBhcmFtcyA9IHBhcnNlS2V5VmFsdWUocGFydHNbMV0pO1xuICAgICAgZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnSlNPTl9DQUxMQkFDSycpIHtcbiAgICAgICAgICAvLyBUaHJvdyBpZiB0aGUgdXJsIGFscmVhZHkgY29udGFpbnMgYSByZWZlcmVuY2UgdG8gSlNPTl9DQUxMQkFDS1xuICAgICAgICAgIHRocm93ICRodHRwTWluRXJyKCdiYWRqc29ucCcsICdJbGxlZ2FsIHVzZSBvZiBKU09OX0NBTExCQUNLIGluIHVybCwgXCJ7MH1cIicsIHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gY2JLZXkpIHtcbiAgICAgICAgICAvLyBUaHJvdyBpZiB0aGUgY2FsbGJhY2sgcGFyYW0gd2FzIGFscmVhZHkgcHJvdmlkZWRcbiAgICAgICAgICB0aHJvdyAkaHR0cE1pbkVycignYmFkanNvbnAnLCAnSWxsZWdhbCB1c2Ugb2YgY2FsbGJhY2sgcGFyYW0sIFwiezB9XCIsIGluIHVybCwgXCJ7MX1cIicsIGNiS2V5LCB1cmwpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIGluIHRoZSBKU09OX0NBTExCQUNLIGNhbGxiYWNrIHBhcmFtIHZhbHVlXG4gICAgICB1cmwgKz0gKCh1cmwuaW5kZXhPZignPycpID09PSAtMSkgPyAnPycgOiAnJicpICsgY2JLZXkgKyAnPUpTT05fQ0FMTEJBQ0snO1xuXG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICR4aHJGYWN0b3J5XG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRmFjdG9yeSBmdW5jdGlvbiB1c2VkIHRvIGNyZWF0ZSBYTUxIdHRwUmVxdWVzdCBvYmplY3RzLlxuICpcbiAqIFJlcGxhY2Ugb3IgZGVjb3JhdGUgdGhpcyBzZXJ2aWNlIHRvIGNyZWF0ZSB5b3VyIG93biBjdXN0b20gWE1MSHR0cFJlcXVlc3Qgb2JqZWN0cy5cbiAqXG4gKiBgYGBcbiAqIGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFtdKVxuICogLmZhY3RvcnkoJyR4aHJGYWN0b3J5JywgZnVuY3Rpb24oKSB7XG4gKiAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVYaHIobWV0aG9kLCB1cmwpIHtcbiAqICAgICByZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCh7bW96U3lzdGVtOiB0cnVlfSk7XG4gKiAgIH07XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgSFRUUCBtZXRob2Qgb2YgdGhlIHJlcXVlc3QgKEdFVCwgUE9TVCwgUFVULCAuLilcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVVJMIG9mIHRoZSByZXF1ZXN0LlxuICovXG5mdW5jdGlvbiAkeGhyRmFjdG9yeVByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlWGhyKCkge1xuICAgICAgcmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9O1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmRcbiAqIEByZXF1aXJlcyAkanNvbnBDYWxsYmFja3NcbiAqIEByZXF1aXJlcyAkZG9jdW1lbnRcbiAqIEByZXF1aXJlcyAkeGhyRmFjdG9yeVxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEhUVFAgYmFja2VuZCB1c2VkIGJ5IHRoZSB7QGxpbmsgbmcuJGh0dHAgc2VydmljZX0gdGhhdCBkZWxlZ2F0ZXMgdG9cbiAqIFhNTEh0dHBSZXF1ZXN0IG9iamVjdCBvciBKU09OUCBhbmQgZGVhbHMgd2l0aCBicm93c2VyIGluY29tcGF0aWJpbGl0aWVzLlxuICpcbiAqIFlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byB1c2UgdGhpcyBzZXJ2aWNlIGRpcmVjdGx5LCBpbnN0ZWFkIHVzZSB0aGUgaGlnaGVyLWxldmVsIGFic3RyYWN0aW9uczpcbiAqIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gb3Ige0BsaW5rIG5nUmVzb3VyY2UuJHJlc291cmNlICRyZXNvdXJjZX0uXG4gKlxuICogRHVyaW5nIHRlc3RpbmcgdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBzd2FwcGVkIHdpdGgge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgbW9ja1xuICogJGh0dHBCYWNrZW5kfSB3aGljaCBjYW4gYmUgdHJhaW5lZCB3aXRoIHJlc3BvbnNlcy5cbiAqL1xuZnVuY3Rpb24gJEh0dHBCYWNrZW5kUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJGJyb3dzZXInLCAnJGpzb25wQ2FsbGJhY2tzJywgJyRkb2N1bWVudCcsICckeGhyRmFjdG9yeScsIGZ1bmN0aW9uKCRicm93c2VyLCAkanNvbnBDYWxsYmFja3MsICRkb2N1bWVudCwgJHhockZhY3RvcnkpIHtcbiAgICByZXR1cm4gY3JlYXRlSHR0cEJhY2tlbmQoJGJyb3dzZXIsICR4aHJGYWN0b3J5LCAkYnJvd3Nlci5kZWZlciwgJGpzb25wQ2FsbGJhY2tzLCAkZG9jdW1lbnRbMF0pO1xuICB9XTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSHR0cEJhY2tlbmQoJGJyb3dzZXIsIGNyZWF0ZVhociwgJGJyb3dzZXJEZWZlciwgY2FsbGJhY2tzLCByYXdEb2N1bWVudCkge1xuICAvLyBUT0RPKHZvanRhKTogZml4IHRoZSBzaWduYXR1cmVcbiAgcmV0dXJuIGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBwb3N0LCBjYWxsYmFjaywgaGVhZGVycywgdGltZW91dCwgd2l0aENyZWRlbnRpYWxzLCByZXNwb25zZVR5cGUsIGV2ZW50SGFuZGxlcnMsIHVwbG9hZEV2ZW50SGFuZGxlcnMpIHtcbiAgICB1cmwgPSB1cmwgfHwgJGJyb3dzZXIudXJsKCk7XG5cbiAgICBpZiAobG93ZXJjYXNlKG1ldGhvZCkgPT09ICdqc29ucCcpIHtcbiAgICAgIHZhciBjYWxsYmFja1BhdGggPSBjYWxsYmFja3MuY3JlYXRlQ2FsbGJhY2sodXJsKTtcbiAgICAgIHZhciBqc29ucERvbmUgPSBqc29ucFJlcSh1cmwsIGNhbGxiYWNrUGF0aCwgZnVuY3Rpb24oc3RhdHVzLCB0ZXh0KSB7XG4gICAgICAgIC8vIGpzb25wUmVxIG9ubHkgZXZlciBzZXRzIHN0YXR1cyB0byAyMDAgKE9LKSwgNDA0IChFUlJPUikgb3IgLTEgKFdBSVRJTkcpXG4gICAgICAgIHZhciByZXNwb25zZSA9IChzdGF0dXMgPT09IDIwMCkgJiYgY2FsbGJhY2tzLmdldFJlc3BvbnNlKGNhbGxiYWNrUGF0aCk7XG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgc3RhdHVzLCByZXNwb25zZSwgJycsIHRleHQsICdjb21wbGV0ZScpO1xuICAgICAgICBjYWxsYmFja3MucmVtb3ZlQ2FsbGJhY2soY2FsbGJhY2tQYXRoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgIHZhciB4aHIgPSBjcmVhdGVYaHIobWV0aG9kLCB1cmwpO1xuICAgICAgdmFyIGFib3J0ZWRCeVRpbWVvdXQgPSBmYWxzZTtcblxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuICAgICAgZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiByZXF1ZXN0TG9hZGVkKCkge1xuICAgICAgICB2YXIgc3RhdHVzVGV4dCA9IHhoci5zdGF0dXNUZXh0IHx8ICcnO1xuXG4gICAgICAgIC8vIHJlc3BvbnNlVGV4dCBpcyB0aGUgb2xkLXNjaG9vbCB3YXkgb2YgcmV0cmlldmluZyByZXNwb25zZSAoc3VwcG9ydGVkIGJ5IElFOSlcbiAgICAgICAgLy8gcmVzcG9uc2UvcmVzcG9uc2VUeXBlIHByb3BlcnRpZXMgd2VyZSBpbnRyb2R1Y2VkIGluIFhIUiBMZXZlbDIgc3BlYyAoc3VwcG9ydGVkIGJ5IElFMTApXG4gICAgICAgIHZhciByZXNwb25zZSA9ICgncmVzcG9uc2UnIGluIHhocikgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0O1xuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBJRTkgYnVnIChodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xNDUwKVxuICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHhoci5zdGF0dXM7XG5cbiAgICAgICAgLy8gZml4IHN0YXR1cyBjb2RlIHdoZW4gaXQgaXMgMCAoMCBzdGF0dXMgaXMgdW5kb2N1bWVudGVkKS5cbiAgICAgICAgLy8gT2NjdXJzIHdoZW4gYWNjZXNzaW5nIGZpbGUgcmVzb3VyY2VzIG9yIG9uIEFuZHJvaWQgNC4xIHN0b2NrIGJyb3dzZXJcbiAgICAgICAgLy8gd2hpbGUgcmV0cmlldmluZyBmaWxlcyBmcm9tIGFwcGxpY2F0aW9uIGNhY2hlLlxuICAgICAgICBpZiAoc3RhdHVzID09PSAwKSB7XG4gICAgICAgICAgc3RhdHVzID0gcmVzcG9uc2UgPyAyMDAgOiB1cmxSZXNvbHZlKHVybCkucHJvdG9jb2wgPT09ICdmaWxlJyA/IDQwNCA6IDA7XG4gICAgICAgIH1cblxuICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssXG4gICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICByZXNwb25zZSxcbiAgICAgICAgICAgIHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxcbiAgICAgICAgICAgIHN0YXR1c1RleHQsXG4gICAgICAgICAgICAnY29tcGxldGUnKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciByZXF1ZXN0RXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVGhlIHJlc3BvbnNlIGlzIGFsd2F5cyBlbXB0eVxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly94aHIuc3BlYy53aGF0d2cub3JnLyNyZXF1ZXN0LWVycm9yLXN0ZXBzIGFuZCBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1uZXR3b3JrLWVycm9yXG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgLTEsIG51bGwsIG51bGwsICcnLCAnZXJyb3InKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciByZXF1ZXN0QWJvcnRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIC0xLCBudWxsLCBudWxsLCAnJywgYWJvcnRlZEJ5VGltZW91dCA/ICd0aW1lb3V0JyA6ICdhYm9ydCcpO1xuICAgICAgfTtcblxuICAgICAgdmFyIHJlcXVlc3RUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFRoZSByZXNwb25zZSBpcyBhbHdheXMgZW1wdHlcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8veGhyLnNwZWMud2hhdHdnLm9yZy8jcmVxdWVzdC1lcnJvci1zdGVwcyBhbmQgaHR0cHM6Ly9mZXRjaC5zcGVjLndoYXR3Zy5vcmcvI2NvbmNlcHQtbmV0d29yay1lcnJvclxuICAgICAgICBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIC0xLCBudWxsLCBudWxsLCAnJywgJ3RpbWVvdXQnKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmVycm9yID0gcmVxdWVzdEVycm9yO1xuICAgICAgeGhyLm9udGltZW91dCA9IHJlcXVlc3RUaW1lb3V0O1xuICAgICAgeGhyLm9uYWJvcnQgPSByZXF1ZXN0QWJvcnRlZDtcblxuICAgICAgZm9yRWFjaChldmVudEhhbmRsZXJzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKGtleSwgdmFsdWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGZvckVhY2godXBsb2FkRXZlbnRIYW5kbGVycywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoa2V5LCB2YWx1ZSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHdpdGhDcmVkZW50aWFscykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3BvbnNlVHlwZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBXZWJLaXQgYWRkZWQgc3VwcG9ydCBmb3IgdGhlIGpzb24gcmVzcG9uc2VUeXBlIHZhbHVlIG9uIDA5LzAzLzIwMTNcbiAgICAgICAgICAvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NzM2NDguIFZlcnNpb25zIG9mIFNhZmFyaSBwcmlvciB0byA3IGFyZVxuICAgICAgICAgIC8vIGtub3duIHRvIHRocm93IHdoZW4gc2V0dGluZyB0aGUgdmFsdWUgXCJqc29uXCIgYXMgdGhlIHJlc3BvbnNlIHR5cGUuIE90aGVyIG9sZGVyXG4gICAgICAgICAgLy8gYnJvd3NlcnMgaW1wbGVtZW50aW5nIHRoZSByZXNwb25zZVR5cGVcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIFRoZSBqc29uIHJlc3BvbnNlIHR5cGUgY2FuIGJlIGlnbm9yZWQgaWYgbm90IHN1cHBvcnRlZCwgYmVjYXVzZSBKU09OIHBheWxvYWRzIGFyZVxuICAgICAgICAgIC8vIHBhcnNlZCBvbiB0aGUgY2xpZW50LXNpZGUgcmVnYXJkbGVzcy5cbiAgICAgICAgICBpZiAocmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHhoci5zZW5kKGlzVW5kZWZpbmVkKHBvc3QpID8gbnVsbCA6IHBvc3QpO1xuICAgIH1cblxuICAgIC8vIFNpbmNlIHdlIGFyZSB1c2luZyB4aHIuYWJvcnQoKSB3aGVuIGEgcmVxdWVzdCB0aW1lcyBvdXQsIHdlIGhhdmUgdG8gc2V0IGEgZmxhZyB0aGF0XG4gICAgLy8gaW5kaWNhdGVzIHRvIHJlcXVlc3RBYm9ydGVkIGlmIHRoZSByZXF1ZXN0IHRpbWVkIG91dCBvciB3YXMgYWJvcnRlZC5cbiAgICAvL1xuICAgIC8vIGh0dHAudGltZW91dCA9IG51bWVyaWNhbCB0aW1lb3V0ICAgdGltZW91dFxuICAgIC8vIGh0dHAudGltZW91dCA9ICR0aW1lb3V0ICAgICAgICAgICAgdGltZW91dFxuICAgIC8vIGh0dHAudGltZW91dCA9IHByb21pc2UgICAgICAgICAgICAgYWJvcnRcbiAgICAvLyB4aHIuYWJvcnQoKSAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0IChUaGUgeGhyIG9iamVjdCBpcyBub3JtYWxseSBpbmFjY2Vzc2libGUsIGJ1dFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuIGJlIGV4cG9zZWQgd2l0aCB0aGUgeGhyRmFjdG9yeSlcbiAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgIHZhciB0aW1lb3V0SWQgPSAkYnJvd3NlckRlZmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICB0aW1lb3V0UmVxdWVzdCgndGltZW91dCcpO1xuICAgICAgfSwgdGltZW91dCk7XG4gICAgfSBlbHNlIGlmIChpc1Byb21pc2VMaWtlKHRpbWVvdXQpKSB7XG4gICAgICB0aW1lb3V0LnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVvdXRSZXF1ZXN0KGlzRGVmaW5lZCh0aW1lb3V0LiQkdGltZW91dElkKSA/ICd0aW1lb3V0JyA6ICdhYm9ydCcpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdGltZW91dFJlcXVlc3QocmVhc29uKSB7XG4gICAgICBhYm9ydGVkQnlUaW1lb3V0ID0gcmVhc29uID09PSAndGltZW91dCc7XG4gICAgICBpZiAoanNvbnBEb25lKSB7XG4gICAgICAgIGpzb25wRG9uZSgpO1xuICAgICAgfVxuICAgICAgaWYgKHhocikge1xuICAgICAgICB4aHIuYWJvcnQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssIHN0YXR1cywgcmVzcG9uc2UsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQsIHhoclN0YXR1cykge1xuICAgICAgLy8gY2FuY2VsIHRpbWVvdXQgYW5kIHN1YnNlcXVlbnQgdGltZW91dCBwcm9taXNlIHJlc29sdXRpb25cbiAgICAgIGlmIChpc0RlZmluZWQodGltZW91dElkKSkge1xuICAgICAgICAkYnJvd3NlckRlZmVyLmNhbmNlbCh0aW1lb3V0SWQpO1xuICAgICAgfVxuICAgICAganNvbnBEb25lID0geGhyID0gbnVsbDtcblxuICAgICAgY2FsbGJhY2soc3RhdHVzLCByZXNwb25zZSwgaGVhZGVyc1N0cmluZywgc3RhdHVzVGV4dCwgeGhyU3RhdHVzKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24ganNvbnBSZXEodXJsLCBjYWxsYmFja1BhdGgsIGRvbmUpIHtcbiAgICB1cmwgPSB1cmwucmVwbGFjZSgnSlNPTl9DQUxMQkFDSycsIGNhbGxiYWNrUGF0aCk7XG4gICAgLy8gd2UgY2FuJ3QgdXNlIGpRdWVyeS9qcUxpdGUgaGVyZSBiZWNhdXNlIGpRdWVyeSBkb2VzIGNyYXp5IHN0dWZmIHdpdGggc2NyaXB0IGVsZW1lbnRzLCBlLmcuOlxuICAgIC8vIC0gZmV0Y2hlcyBsb2NhbCBzY3JpcHRzIHZpYSBYSFIgYW5kIGV2YWxzIHRoZW1cbiAgICAvLyAtIGFkZHMgYW5kIGltbWVkaWF0ZWx5IHJlbW92ZXMgc2NyaXB0IGVsZW1lbnRzIGZyb20gdGhlIGRvY3VtZW50XG4gICAgdmFyIHNjcmlwdCA9IHJhd0RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpLCBjYWxsYmFjayA9IG51bGw7XG4gICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICBzY3JpcHQuc3JjID0gdXJsO1xuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG5cbiAgICBjYWxsYmFjayA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBzY3JpcHQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIGNhbGxiYWNrKTtcbiAgICAgIHNjcmlwdC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGNhbGxiYWNrKTtcbiAgICAgIHJhd0RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICB2YXIgc3RhdHVzID0gLTE7XG4gICAgICB2YXIgdGV4dCA9ICd1bmtub3duJztcblxuICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAnbG9hZCcgJiYgIWNhbGxiYWNrcy53YXNDYWxsZWQoY2FsbGJhY2tQYXRoKSkge1xuICAgICAgICAgIGV2ZW50ID0geyB0eXBlOiAnZXJyb3InIH07XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCA9IGV2ZW50LnR5cGU7XG4gICAgICAgIHN0YXR1cyA9IGV2ZW50LnR5cGUgPT09ICdlcnJvcicgPyA0MDQgOiAyMDA7XG4gICAgICB9XG5cbiAgICAgIGlmIChkb25lKSB7XG4gICAgICAgIGRvbmUoc3RhdHVzLCB0ZXh0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBjYWxsYmFjayk7XG4gICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgY2FsbGJhY2spO1xuICAgIHJhd0RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICByZXR1cm4gY2FsbGJhY2s7XG4gIH1cbn1cblxudmFyICRpbnRlcnBvbGF0ZU1pbkVyciA9IGFuZ3VsYXIuJGludGVycG9sYXRlTWluRXJyID0gbWluRXJyKCckaW50ZXJwb2xhdGUnKTtcbiRpbnRlcnBvbGF0ZU1pbkVyci50aHJvd05vY29uY2F0ID0gZnVuY3Rpb24odGV4dCkge1xuICB0aHJvdyAkaW50ZXJwb2xhdGVNaW5FcnIoJ25vY29uY2F0JyxcbiAgICAgICdFcnJvciB3aGlsZSBpbnRlcnBvbGF0aW5nOiB7MH1cXG5TdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBkaXNhbGxvd3MgJyArXG4gICAgICAnaW50ZXJwb2xhdGlvbnMgdGhhdCBjb25jYXRlbmF0ZSBtdWx0aXBsZSBleHByZXNzaW9ucyB3aGVuIGEgdHJ1c3RlZCB2YWx1ZSBpcyAnICtcbiAgICAgICdyZXF1aXJlZC4gIFNlZSBodHRwOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy4kc2NlJywgdGV4dCk7XG59O1xuXG4kaW50ZXJwb2xhdGVNaW5FcnIuaW50ZXJyID0gZnVuY3Rpb24odGV4dCwgZXJyKSB7XG4gIHJldHVybiAkaW50ZXJwb2xhdGVNaW5FcnIoJ2ludGVycicsICdDYW5cXCd0IGludGVycG9sYXRlOiB7MH1cXG57MX0nLCB0ZXh0LCBlcnIudG9TdHJpbmcoKSk7XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGludGVycG9sYXRlUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVXNlZCBmb3IgY29uZmlndXJpbmcgdGhlIGludGVycG9sYXRpb24gbWFya3VwLiBEZWZhdWx0cyB0byBge3tgIGFuZCBgfX1gLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqIFRoaXMgZmVhdHVyZSBpcyBzb21ldGltZXMgdXNlZCB0byBtaXggZGlmZmVyZW50IG1hcmt1cCBsYW5ndWFnZXMsIGUuZy4gdG8gd3JhcCBhbiBBbmd1bGFySlNcbiAqIHRlbXBsYXRlIHdpdGhpbiBhIFB5dGhvbiBKaW5qYSB0ZW1wbGF0ZSAob3IgYW55IG90aGVyIHRlbXBsYXRlIGxhbmd1YWdlKS4gTWl4aW5nIHRlbXBsYXRpbmdcbiAqIGxhbmd1YWdlcyBpcyAqKnZlcnkgZGFuZ2Vyb3VzKiouIFRoZSBlbWJlZGRpbmcgdGVtcGxhdGUgbGFuZ3VhZ2Ugd2lsbCBub3Qgc2FmZWx5IGVzY2FwZSBBbmd1bGFySlNcbiAqIGV4cHJlc3Npb25zLCBzbyBhbnkgdXNlci1jb250cm9sbGVkIHZhbHVlcyBpbiB0aGUgdGVtcGxhdGUgd2lsbCBjYXVzZSBDcm9zcyBTaXRlIFNjcmlwdGluZyAoWFNTKVxuICogc2VjdXJpdHkgYnVncyFcbiAqIDwvZGl2PlxuICpcbiAqIEBleGFtcGxlXG48ZXhhbXBsZSBuYW1lPVwiY3VzdG9tLWludGVycG9sYXRpb24tbWFya3VwXCIgbW9kdWxlPVwiY3VzdG9tSW50ZXJwb2xhdGlvbkFwcFwiPlxuPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbjxzY3JpcHQ+XG4gIHZhciBjdXN0b21JbnRlcnBvbGF0aW9uQXBwID0gYW5ndWxhci5tb2R1bGUoJ2N1c3RvbUludGVycG9sYXRpb25BcHAnLCBbXSk7XG5cbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb25maWcoZnVuY3Rpb24oJGludGVycG9sYXRlUHJvdmlkZXIpIHtcbiAgICAkaW50ZXJwb2xhdGVQcm92aWRlci5zdGFydFN5bWJvbCgnLy8nKTtcbiAgICAkaW50ZXJwb2xhdGVQcm92aWRlci5lbmRTeW1ib2woJy8vJyk7XG4gIH0pO1xuXG5cbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb250cm9sbGVyKCdEZW1vQ29udHJvbGxlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5sYWJlbCA9IFwiVGhpcyBiaW5kaW5nIGlzIGJyb3VnaHQgeW91IGJ5IC8vIGludGVycG9sYXRpb24gc3ltYm9scy5cIjtcbiAgfSk7XG48L3NjcmlwdD5cbjxkaXYgbmctY29udHJvbGxlcj1cIkRlbW9Db250cm9sbGVyIGFzIGRlbW9cIj5cbiAgICAvL2RlbW8ubGFiZWwvL1xuPC9kaXY+XG48L2ZpbGU+XG48ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gIGl0KCdzaG91bGQgaW50ZXJwb2xhdGUgYmluZGluZyB3aXRoIGN1c3RvbSBzeW1ib2xzJywgZnVuY3Rpb24oKSB7XG4gICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnZGVtby5sYWJlbCcpKS5nZXRUZXh0KCkpLnRvQmUoJ1RoaXMgYmluZGluZyBpcyBicm91Z2h0IHlvdSBieSAvLyBpbnRlcnBvbGF0aW9uIHN5bWJvbHMuJyk7XG4gIH0pO1xuPC9maWxlPlxuPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiAkSW50ZXJwb2xhdGVQcm92aWRlcigpIHtcbiAgdmFyIHN0YXJ0U3ltYm9sID0gJ3t7JztcbiAgdmFyIGVuZFN5bWJvbCA9ICd9fSc7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGludGVycG9sYXRlUHJvdmlkZXIjc3RhcnRTeW1ib2xcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFN5bWJvbCB0byBkZW5vdGUgc3RhcnQgb2YgZXhwcmVzc2lvbiBpbiB0aGUgaW50ZXJwb2xhdGVkIHN0cmluZy4gRGVmYXVsdHMgdG8gYHt7YC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB2YWx1ZSBuZXcgdmFsdWUgdG8gc2V0IHRoZSBzdGFydGluZyBzeW1ib2wgdG8uXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8c2VsZn0gUmV0dXJucyB0aGUgc3ltYm9sIHdoZW4gdXNlZCBhcyBnZXR0ZXIgYW5kIHNlbGYgaWYgdXNlZCBhcyBzZXR0ZXIuXG4gICAqL1xuICB0aGlzLnN0YXJ0U3ltYm9sID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHN0YXJ0U3ltYm9sID0gdmFsdWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0U3ltYm9sO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRpbnRlcnBvbGF0ZVByb3ZpZGVyI2VuZFN5bWJvbFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU3ltYm9sIHRvIGRlbm90ZSB0aGUgZW5kIG9mIGV4cHJlc3Npb24gaW4gdGhlIGludGVycG9sYXRlZCBzdHJpbmcuIERlZmF1bHRzIHRvIGB9fWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdmFsdWUgbmV3IHZhbHVlIHRvIHNldCB0aGUgZW5kaW5nIHN5bWJvbCB0by5cbiAgICogQHJldHVybnMge3N0cmluZ3xzZWxmfSBSZXR1cm5zIHRoZSBzeW1ib2wgd2hlbiB1c2VkIGFzIGdldHRlciBhbmQgc2VsZiBpZiB1c2VkIGFzIHNldHRlci5cbiAgICovXG4gIHRoaXMuZW5kU3ltYm9sID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGVuZFN5bWJvbCA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBlbmRTeW1ib2w7XG4gIH07XG5cblxuICB0aGlzLiRnZXQgPSBbJyRwYXJzZScsICckZXhjZXB0aW9uSGFuZGxlcicsICckc2NlJywgZnVuY3Rpb24oJHBhcnNlLCAkZXhjZXB0aW9uSGFuZGxlciwgJHNjZSkge1xuICAgIHZhciBzdGFydFN5bWJvbExlbmd0aCA9IHN0YXJ0U3ltYm9sLmxlbmd0aCxcbiAgICAgICAgZW5kU3ltYm9sTGVuZ3RoID0gZW5kU3ltYm9sLmxlbmd0aCxcbiAgICAgICAgZXNjYXBlZFN0YXJ0UmVnZXhwID0gbmV3IFJlZ0V4cChzdGFydFN5bWJvbC5yZXBsYWNlKC8uL2csIGVzY2FwZSksICdnJyksXG4gICAgICAgIGVzY2FwZWRFbmRSZWdleHAgPSBuZXcgUmVnRXhwKGVuZFN5bWJvbC5yZXBsYWNlKC8uL2csIGVzY2FwZSksICdnJyk7XG5cbiAgICBmdW5jdGlvbiBlc2NhcGUoY2gpIHtcbiAgICAgIHJldHVybiAnXFxcXFxcXFxcXFxcJyArIGNoO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVuZXNjYXBlVGV4dCh0ZXh0KSB7XG4gICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKGVzY2FwZWRTdGFydFJlZ2V4cCwgc3RhcnRTeW1ib2wpLlxuICAgICAgICByZXBsYWNlKGVzY2FwZWRFbmRSZWdleHAsIGVuZFN5bWJvbCk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogdGhpcyBpcyB0aGUgc2FtZSBhcyB0aGUgY29uc3RhbnRXYXRjaERlbGVnYXRlIGluIHBhcnNlLmpzXG4gICAgZnVuY3Rpb24gY29uc3RhbnRXYXRjaERlbGVnYXRlKHNjb3BlLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIGNvbnN0YW50SW50ZXJwKSB7XG4gICAgICB2YXIgdW53YXRjaCA9IHNjb3BlLiR3YXRjaChmdW5jdGlvbiBjb25zdGFudEludGVycG9sYXRlV2F0Y2goc2NvcGUpIHtcbiAgICAgICAgdW53YXRjaCgpO1xuICAgICAgICByZXR1cm4gY29uc3RhbnRJbnRlcnAoc2NvcGUpO1xuICAgICAgfSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5KTtcbiAgICAgIHJldHVybiB1bndhdGNoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJGludGVycG9sYXRlXG4gICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgKlxuICAgICAqIEByZXF1aXJlcyAkcGFyc2VcbiAgICAgKiBAcmVxdWlyZXMgJHNjZVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBDb21waWxlcyBhIHN0cmluZyB3aXRoIG1hcmt1cCBpbnRvIGFuIGludGVycG9sYXRpb24gZnVuY3Rpb24uIFRoaXMgc2VydmljZSBpcyB1c2VkIGJ5IHRoZVxuICAgICAqIEhUTUwge0BsaW5rIG5nLiRjb21waWxlICRjb21waWxlfSBzZXJ2aWNlIGZvciBkYXRhIGJpbmRpbmcuIFNlZVxuICAgICAqIHtAbGluayBuZy4kaW50ZXJwb2xhdGVQcm92aWRlciAkaW50ZXJwb2xhdGVQcm92aWRlcn0gZm9yIGNvbmZpZ3VyaW5nIHRoZVxuICAgICAqIGludGVycG9sYXRpb24gbWFya3VwLlxuICAgICAqXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgdmFyICRpbnRlcnBvbGF0ZSA9IC4uLjsgLy8gaW5qZWN0ZWRcbiAgICAgKiAgIHZhciBleHAgPSAkaW50ZXJwb2xhdGUoJ0hlbGxvIHt7bmFtZSB8IHVwcGVyY2FzZX19IScpO1xuICAgICAqICAgZXhwZWN0KGV4cCh7bmFtZTonQW5ndWxhckpTJ30pKS50b0VxdWFsKCdIZWxsbyBBTkdVTEFSSlMhJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBgJGludGVycG9sYXRlYCB0YWtlcyBhbiBvcHRpb25hbCBmb3VydGggYXJndW1lbnQsIGBhbGxPck5vdGhpbmdgLiBJZiBgYWxsT3JOb3RoaW5nYCBpc1xuICAgICAqIGB0cnVlYCwgdGhlIGludGVycG9sYXRpb24gZnVuY3Rpb24gd2lsbCByZXR1cm4gYHVuZGVmaW5lZGAgdW5sZXNzIGFsbCBlbWJlZGRlZCBleHByZXNzaW9uc1xuICAgICAqIGV2YWx1YXRlIHRvIGEgdmFsdWUgb3RoZXIgdGhhbiBgdW5kZWZpbmVkYC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICB2YXIgJGludGVycG9sYXRlID0gLi4uOyAvLyBpbmplY3RlZFxuICAgICAqICAgdmFyIGNvbnRleHQgPSB7Z3JlZXRpbmc6ICdIZWxsbycsIG5hbWU6IHVuZGVmaW5lZCB9O1xuICAgICAqXG4gICAgICogICAvLyBkZWZhdWx0IFwiZm9yZ2l2aW5nXCIgbW9kZVxuICAgICAqICAgdmFyIGV4cCA9ICRpbnRlcnBvbGF0ZSgne3tncmVldGluZ319IHt7bmFtZX19IScpO1xuICAgICAqICAgZXhwZWN0KGV4cChjb250ZXh0KSkudG9FcXVhbCgnSGVsbG8gIScpO1xuICAgICAqXG4gICAgICogICAvLyBcImFsbE9yTm90aGluZ1wiIG1vZGVcbiAgICAgKiAgIGV4cCA9ICRpbnRlcnBvbGF0ZSgne3tncmVldGluZ319IHt7bmFtZX19IScsIGZhbHNlLCBudWxsLCB0cnVlKTtcbiAgICAgKiAgIGV4cGVjdChleHAoY29udGV4dCkpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgKiAgIGNvbnRleHQubmFtZSA9ICdBbmd1bGFySlMnO1xuICAgICAqICAgZXhwZWN0KGV4cChjb250ZXh0KSkudG9FcXVhbCgnSGVsbG8gQW5ndWxhckpTIScpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogYGFsbE9yTm90aGluZ2AgaXMgdXNlZnVsIGZvciBpbnRlcnBvbGF0aW5nIFVSTHMuIGBuZ1NyY2AgYW5kIGBuZ1NyY3NldGAgdXNlIHRoaXMgYmVoYXZpb3IuXG4gICAgICpcbiAgICAgKiAjIyMjIEVzY2FwZWQgSW50ZXJwb2xhdGlvblxuICAgICAqICRpbnRlcnBvbGF0ZSBwcm92aWRlcyBhIG1lY2hhbmlzbSBmb3IgZXNjYXBpbmcgaW50ZXJwb2xhdGlvbiBtYXJrZXJzLiBTdGFydCBhbmQgZW5kIG1hcmtlcnNcbiAgICAgKiBjYW4gYmUgZXNjYXBlZCBieSBwcmVjZWRpbmcgZWFjaCBvZiB0aGVpciBjaGFyYWN0ZXJzIHdpdGggYSBSRVZFUlNFIFNPTElEVVMgVSswMDVDIChiYWNrc2xhc2gpLlxuICAgICAqIEl0IHdpbGwgYmUgcmVuZGVyZWQgYXMgYSByZWd1bGFyIHN0YXJ0L2VuZCBtYXJrZXIsIGFuZCB3aWxsIG5vdCBiZSBpbnRlcnByZXRlZCBhcyBhbiBleHByZXNzaW9uXG4gICAgICogb3IgYmluZGluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgZW5hYmxlcyB3ZWItc2VydmVycyB0byBwcmV2ZW50IHNjcmlwdCBpbmplY3Rpb24gYXR0YWNrcyBhbmQgZGVmYWNpbmcgYXR0YWNrcywgdG8gc29tZVxuICAgICAqIGRlZ3JlZSwgd2hpbGUgYWxzbyBlbmFibGluZyBjb2RlIGV4YW1wbGVzIHRvIHdvcmsgd2l0aG91dCByZWx5aW5nIG9uIHRoZVxuICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdOb25CaW5kYWJsZSBuZ05vbkJpbmRhYmxlfSBkaXJlY3RpdmUuXG4gICAgICpcbiAgICAgKiAqKkZvciBzZWN1cml0eSBwdXJwb3NlcywgaXQgaXMgc3Ryb25nbHkgZW5jb3VyYWdlZCB0aGF0IHdlYiBzZXJ2ZXJzIGVzY2FwZSB1c2VyLXN1cHBsaWVkIGRhdGEsXG4gICAgICogcmVwbGFjaW5nIGFuZ2xlIGJyYWNrZXRzICgmbHQ7LCAmZ3Q7KSB3aXRoICZhbXA7bHQ7IGFuZCAmYW1wO2d0OyByZXNwZWN0aXZlbHksIGFuZCByZXBsYWNpbmcgYWxsXG4gICAgICogaW50ZXJwb2xhdGlvbiBzdGFydC9lbmQgbWFya2VycyB3aXRoIHRoZWlyIGVzY2FwZWQgY291bnRlcnBhcnRzLioqXG4gICAgICpcbiAgICAgKiBFc2NhcGVkIGludGVycG9sYXRpb24gbWFya2VycyBhcmUgb25seSByZXBsYWNlZCB3aXRoIHRoZSBhY3R1YWwgaW50ZXJwb2xhdGlvbiBtYXJrZXJzIGluIHJlbmRlcmVkXG4gICAgICogb3V0cHV0IHdoZW4gdGhlICRpbnRlcnBvbGF0ZSBzZXJ2aWNlIHByb2Nlc3NlcyB0aGUgdGV4dC4gU28sIGZvciBIVE1MIGVsZW1lbnRzIGludGVycG9sYXRlZFxuICAgICAqIGJ5IHtAbGluayBuZy4kY29tcGlsZSAkY29tcGlsZX0sIG9yIG90aGVyd2lzZSBpbnRlcnBvbGF0ZWQgd2l0aCB0aGUgYG11c3RIYXZlRXhwcmVzc2lvbmAgcGFyYW1ldGVyXG4gICAgICogc2V0IHRvIGB0cnVlYCwgdGhlIGludGVycG9sYXRlZCB0ZXh0IG11c3QgY29udGFpbiBhbiB1bmVzY2FwZWQgaW50ZXJwb2xhdGlvbiBleHByZXNzaW9uLiBBcyBzdWNoLFxuICAgICAqIHRoaXMgaXMgdHlwaWNhbGx5IHVzZWZ1bCBvbmx5IHdoZW4gdXNlci1kYXRhIGlzIHVzZWQgaW4gcmVuZGVyaW5nIGEgdGVtcGxhdGUgZnJvbSB0aGUgc2VydmVyLCBvclxuICAgICAqIHdoZW4gb3RoZXJ3aXNlIHVudHJ1c3RlZCBkYXRhIGlzIHVzZWQgYnkgYSBkaXJlY3RpdmUuXG4gICAgICpcbiAgICAgKiA8ZXhhbXBsZSBuYW1lPVwiaW50ZXJwb2xhdGlvblwiPlxuICAgICAqICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAqICAgIDxkaXYgbmctaW5pdD1cInVzZXJuYW1lPSdBIHVzZXInXCI+XG4gICAgICogICAgICA8cCBuZy1pbml0PVwiYXBwdGl0bGU9J0VzY2FwaW5nIGRlbW8nXCI+e3thcHB0aXRsZX19OiBcXHtcXHsgdXNlcm5hbWUgPSBcImRlZmFjZWQgdmFsdWVcIjsgXFx9XFx9XG4gICAgICogICAgICAgIDwvcD5cbiAgICAgKiAgICAgIDxwPjxzdHJvbmc+e3t1c2VybmFtZX19PC9zdHJvbmc+IGF0dGVtcHRzIHRvIGluamVjdCBjb2RlIHdoaWNoIHdpbGwgZGVmYWNlIHRoZVxuICAgICAqICAgICAgICBhcHBsaWNhdGlvbiwgYnV0IGZhaWxzIHRvIGFjY29tcGxpc2ggdGhlaXIgdGFzaywgYmVjYXVzZSB0aGUgc2VydmVyIGhhcyBjb3JyZWN0bHlcbiAgICAgKiAgICAgICAgZXNjYXBlZCB0aGUgaW50ZXJwb2xhdGlvbiBzdGFydC9lbmQgbWFya2VycyB3aXRoIFJFVkVSU0UgU09MSURVUyBVKzAwNUMgKGJhY2tzbGFzaClcbiAgICAgKiAgICAgICAgY2hhcmFjdGVycy48L3A+XG4gICAgICogICAgICA8cD5JbnN0ZWFkLCB0aGUgcmVzdWx0IG9mIHRoZSBhdHRlbXB0ZWQgc2NyaXB0IGluamVjdGlvbiBpcyB2aXNpYmxlLCBhbmQgY2FuIGJlIHJlbW92ZWRcbiAgICAgKiAgICAgICAgZnJvbSB0aGUgZGF0YWJhc2UgYnkgYW4gYWRtaW5pc3RyYXRvci48L3A+XG4gICAgICogICAgPC9kaXY+XG4gICAgICogIDwvZmlsZT5cbiAgICAgKiA8L2V4YW1wbGU+XG4gICAgICpcbiAgICAgKiBAa25vd25Jc3N1ZVxuICAgICAqIEl0IGlzIGN1cnJlbnRseSBub3QgcG9zc2libGUgZm9yIGFuIGludGVycG9sYXRlZCBleHByZXNzaW9uIHRvIGNvbnRhaW4gdGhlIGludGVycG9sYXRpb24gZW5kXG4gICAgICogc3ltYm9sLiBGb3IgZXhhbXBsZSwgYHt7ICd9fScgfX1gIHdpbGwgYmUgaW5jb3JyZWN0bHkgaW50ZXJwcmV0ZWQgYXMgYHt7ICcgfX1gICsgYCcgfX1gLCBpLmUuXG4gICAgICogYW4gaW50ZXJwb2xhdGVkIGV4cHJlc3Npb24gY29uc2lzdGluZyBvZiBhIHNpbmdsZS1xdW90ZSAoYCdgKSBhbmQgdGhlIGAnIH19YCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAa25vd25Jc3N1ZVxuICAgICAqIEFsbCBkaXJlY3RpdmVzIGFuZCBjb21wb25lbnRzIG11c3QgdXNlIHRoZSBzdGFuZGFyZCBge3tgIGB9fWAgaW50ZXJwb2xhdGlvbiBzeW1ib2xzXG4gICAgICogaW4gdGhlaXIgdGVtcGxhdGVzLiBJZiB5b3UgY2hhbmdlIHRoZSBhcHBsaWNhdGlvbiBpbnRlcnBvbGF0aW9uIHN5bWJvbHMgdGhlIHtAbGluayAkY29tcGlsZX1cbiAgICAgKiBzZXJ2aWNlIHdpbGwgYXR0ZW1wdCB0byBkZW5vcm1hbGl6ZSB0aGUgc3RhbmRhcmQgc3ltYm9scyB0byB0aGUgY3VzdG9tIHN5bWJvbHMuXG4gICAgICogVGhlIGRlbm9ybWFsaXphdGlvbiBwcm9jZXNzIGlzIG5vdCBjbGV2ZXIgZW5vdWdoIHRvIGtub3cgbm90IHRvIHJlcGxhY2UgaW5zdGFuY2VzIG9mIHRoZSBzdGFuZGFyZFxuICAgICAqIHN5bWJvbHMgd2hlcmUgdGhleSB3b3VsZCBub3Qgbm9ybWFsbHkgYmUgdHJlYXRlZCBhcyBpbnRlcnBvbGF0aW9uIHN5bWJvbHMuIEZvciBleGFtcGxlIGluIHRoZSBmb2xsb3dpbmdcbiAgICAgKiBjb2RlIHNuaXBwZXQgdGhlIGNsb3NpbmcgYnJhY2VzIG9mIHRoZSBsaXRlcmFsIG9iamVjdCB3aWxsIGdldCBpbmNvcnJlY3RseSBkZW5vcm1hbGl6ZWQ6XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiA8ZGl2IGRhdGEtY29udGV4dD0ne1wiY29udGV4dFwiOntcImlkXCI6MyxcInR5cGVcIjpcInBhZ2VcIn19XCI+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGUgd29ya2Fyb3VuZCBpcyB0byBlbnN1cmUgdGhhdCBzdWNoIGluc3RhbmNlcyBhcmUgc2VwYXJhdGVkIGJ5IHdoaXRlc3BhY2U6XG4gICAgICogYGBgXG4gICAgICogPGRpdiBkYXRhLWNvbnRleHQ9J3tcImNvbnRleHRcIjp7XCJpZFwiOjMsXCJ0eXBlXCI6XCJwYWdlXCJ9IH1cIj5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3B1bGwvMTQ2MTAjaXNzdWVjb21tZW50LTIxOTQwMTA5OSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHdpdGggbWFya3VwIHRvIGludGVycG9sYXRlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG11c3RIYXZlRXhwcmVzc2lvbiBpZiBzZXQgdG8gdHJ1ZSB0aGVuIHRoZSBpbnRlcnBvbGF0aW9uIHN0cmluZyBtdXN0IGhhdmVcbiAgICAgKiAgICBlbWJlZGRlZCBleHByZXNzaW9uIGluIG9yZGVyIHRvIHJldHVybiBhbiBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLiBTdHJpbmdzIHdpdGggbm9cbiAgICAgKiAgICBlbWJlZGRlZCBleHByZXNzaW9uIHdpbGwgcmV0dXJuIG51bGwgZm9yIHRoZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gdHJ1c3RlZENvbnRleHQgd2hlbiBwcm92aWRlZCwgdGhlIHJldHVybmVkIGZ1bmN0aW9uIHBhc3NlcyB0aGUgaW50ZXJwb2xhdGVkXG4gICAgICogICAgcmVzdWx0IHRocm91Z2gge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZCAkc2NlLmdldFRydXN0ZWQoaW50ZXJwb2xhdGVkUmVzdWx0LFxuICAgICAqICAgIHRydXN0ZWRDb250ZXh0KX0gYmVmb3JlIHJldHVybmluZyBpdC4gIFJlZmVyIHRvIHRoZSB7QGxpbmsgbmcuJHNjZSAkc2NlfSBzZXJ2aWNlIHRoYXRcbiAgICAgKiAgICBwcm92aWRlcyBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBmb3IgZGV0YWlscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBhbGxPck5vdGhpbmcgaWYgYHRydWVgLCB0aGVuIHRoZSByZXR1cm5lZCBmdW5jdGlvbiByZXR1cm5zIHVuZGVmaW5lZFxuICAgICAqICAgIHVubGVzcyBhbGwgZW1iZWRkZWQgZXhwcmVzc2lvbnMgZXZhbHVhdGUgdG8gYSB2YWx1ZSBvdGhlciB0aGFuIGB1bmRlZmluZWRgLlxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0KX0gYW4gaW50ZXJwb2xhdGlvbiBmdW5jdGlvbiB3aGljaCBpcyB1c2VkIHRvIGNvbXB1dGUgdGhlXG4gICAgICogICAgaW50ZXJwb2xhdGVkIHN0cmluZy4gVGhlIGZ1bmN0aW9uIGhhcyB0aGVzZSBwYXJhbWV0ZXJzOlxuICAgICAqXG4gICAgICogLSBgY29udGV4dGA6IGV2YWx1YXRpb24gY29udGV4dCBmb3IgYWxsIGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBpbnRlcnBvbGF0ZWQgdGV4dFxuICAgICAqL1xuICAgIGZ1bmN0aW9uICRpbnRlcnBvbGF0ZSh0ZXh0LCBtdXN0SGF2ZUV4cHJlc3Npb24sIHRydXN0ZWRDb250ZXh0LCBhbGxPck5vdGhpbmcpIHtcbiAgICAgIHZhciBjb250ZXh0QWxsb3dzQ29uY2F0ZW5hdGlvbiA9IHRydXN0ZWRDb250ZXh0ID09PSAkc2NlLlVSTCB8fCB0cnVzdGVkQ29udGV4dCA9PT0gJHNjZS5NRURJQV9VUkw7XG5cbiAgICAgIC8vIFByb3ZpZGUgYSBxdWljayBleGl0IGFuZCBzaW1wbGlmaWVkIHJlc3VsdCBmdW5jdGlvbiBmb3IgdGV4dCB3aXRoIG5vIGludGVycG9sYXRpb25cbiAgICAgIGlmICghdGV4dC5sZW5ndGggfHwgdGV4dC5pbmRleE9mKHN0YXJ0U3ltYm9sKSA9PT0gLTEpIHtcbiAgICAgICAgaWYgKG11c3RIYXZlRXhwcmVzc2lvbiAmJiAhY29udGV4dEFsbG93c0NvbmNhdGVuYXRpb24pIHJldHVybjtcblxuICAgICAgICB2YXIgdW5lc2NhcGVkVGV4dCA9IHVuZXNjYXBlVGV4dCh0ZXh0KTtcbiAgICAgICAgaWYgKGNvbnRleHRBbGxvd3NDb25jYXRlbmF0aW9uKSB7XG4gICAgICAgICAgdW5lc2NhcGVkVGV4dCA9ICRzY2UuZ2V0VHJ1c3RlZCh0cnVzdGVkQ29udGV4dCwgdW5lc2NhcGVkVGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbnN0YW50SW50ZXJwID0gdmFsdWVGbih1bmVzY2FwZWRUZXh0KTtcbiAgICAgICAgY29uc3RhbnRJbnRlcnAuZXhwID0gdGV4dDtcbiAgICAgICAgY29uc3RhbnRJbnRlcnAuZXhwcmVzc2lvbnMgPSBbXTtcbiAgICAgICAgY29uc3RhbnRJbnRlcnAuJCR3YXRjaERlbGVnYXRlID0gY29uc3RhbnRXYXRjaERlbGVnYXRlO1xuXG4gICAgICAgIHJldHVybiBjb25zdGFudEludGVycDtcbiAgICAgIH1cblxuICAgICAgYWxsT3JOb3RoaW5nID0gISFhbGxPck5vdGhpbmc7XG4gICAgICB2YXIgc3RhcnRJbmRleCxcbiAgICAgICAgICBlbmRJbmRleCxcbiAgICAgICAgICBpbmRleCA9IDAsXG4gICAgICAgICAgZXhwcmVzc2lvbnMgPSBbXSxcbiAgICAgICAgICBwYXJzZUZucyxcbiAgICAgICAgICB0ZXh0TGVuZ3RoID0gdGV4dC5sZW5ndGgsXG4gICAgICAgICAgZXhwLFxuICAgICAgICAgIGNvbmNhdCA9IFtdLFxuICAgICAgICAgIGV4cHJlc3Npb25Qb3NpdGlvbnMgPSBbXSxcbiAgICAgICAgICBzaW5nbGVFeHByZXNzaW9uO1xuXG5cbiAgICAgIHdoaWxlIChpbmRleCA8IHRleHRMZW5ndGgpIHtcbiAgICAgICAgaWYgKCgoc3RhcnRJbmRleCA9IHRleHQuaW5kZXhPZihzdGFydFN5bWJvbCwgaW5kZXgpKSAhPT0gLTEpICYmXG4gICAgICAgICAgICAgKChlbmRJbmRleCA9IHRleHQuaW5kZXhPZihlbmRTeW1ib2wsIHN0YXJ0SW5kZXggKyBzdGFydFN5bWJvbExlbmd0aCkpICE9PSAtMSkpIHtcbiAgICAgICAgICBpZiAoaW5kZXggIT09IHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIGNvbmNhdC5wdXNoKHVuZXNjYXBlVGV4dCh0ZXh0LnN1YnN0cmluZyhpbmRleCwgc3RhcnRJbmRleCkpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZXhwID0gdGV4dC5zdWJzdHJpbmcoc3RhcnRJbmRleCArIHN0YXJ0U3ltYm9sTGVuZ3RoLCBlbmRJbmRleCk7XG4gICAgICAgICAgZXhwcmVzc2lvbnMucHVzaChleHApO1xuICAgICAgICAgIGluZGV4ID0gZW5kSW5kZXggKyBlbmRTeW1ib2xMZW5ndGg7XG4gICAgICAgICAgZXhwcmVzc2lvblBvc2l0aW9ucy5wdXNoKGNvbmNhdC5sZW5ndGgpO1xuICAgICAgICAgIGNvbmNhdC5wdXNoKCcnKTsgLy8gUGxhY2Vob2xkZXIgdGhhdCB3aWxsIGdldCByZXBsYWNlZCB3aXRoIHRoZSBldmFsdWF0ZWQgZXhwcmVzc2lvbi5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB3ZSBkaWQgbm90IGZpbmQgYW4gaW50ZXJwb2xhdGlvbiwgc28gd2UgaGF2ZSB0byBhZGQgdGhlIHJlbWFpbmRlciB0byB0aGUgc2VwYXJhdG9ycyBhcnJheVxuICAgICAgICAgIGlmIChpbmRleCAhPT0gdGV4dExlbmd0aCkge1xuICAgICAgICAgICAgY29uY2F0LnB1c2godW5lc2NhcGVUZXh0KHRleHQuc3Vic3RyaW5nKGluZGV4KSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzaW5nbGVFeHByZXNzaW9uID0gY29uY2F0Lmxlbmd0aCA9PT0gMSAmJiBleHByZXNzaW9uUG9zaXRpb25zLmxlbmd0aCA9PT0gMTtcbiAgICAgIC8vIEludGVyY2VwdCBleHByZXNzaW9uIGlmIHdlIG5lZWQgdG8gc3RyaW5naWZ5IGNvbmNhdGVuYXRlZCBpbnB1dHMsIHdoaWNoIG1heSBiZSBTQ0UgdHJ1c3RlZFxuICAgICAgLy8gb2JqZWN0cyByYXRoZXIgdGhhbiBzaW1wbGUgc3RyaW5nc1xuICAgICAgLy8gKHdlIGRvbid0IG1vZGlmeSB0aGUgZXhwcmVzc2lvbiBpZiB0aGUgaW5wdXQgY29uc2lzdHMgb2Ygb25seSBhIHNpbmdsZSB0cnVzdGVkIGlucHV0KVxuICAgICAgdmFyIGludGVyY2VwdG9yID0gY29udGV4dEFsbG93c0NvbmNhdGVuYXRpb24gJiYgc2luZ2xlRXhwcmVzc2lvbiA/IHVuZGVmaW5lZCA6IHBhcnNlU3RyaW5naWZ5SW50ZXJjZXB0b3I7XG4gICAgICBwYXJzZUZucyA9IGV4cHJlc3Npb25zLm1hcChmdW5jdGlvbihleHApIHsgcmV0dXJuICRwYXJzZShleHAsIGludGVyY2VwdG9yKTsgfSk7XG5cbiAgICAgIC8vIENvbmNhdGVuYXRpbmcgZXhwcmVzc2lvbnMgbWFrZXMgaXQgaGFyZCB0byByZWFzb24gYWJvdXQgd2hldGhlciBzb21lIGNvbWJpbmF0aW9uIG9mXG4gICAgICAvLyBjb25jYXRlbmF0ZWQgdmFsdWVzIGFyZSB1bnNhZmUgdG8gdXNlIGFuZCBjb3VsZCBlYXNpbHkgbGVhZCB0byBYU1MuICBCeSByZXF1aXJpbmcgdGhhdCBhXG4gICAgICAvLyBzaW5nbGUgZXhwcmVzc2lvbiBiZSB1c2VkIGZvciBzb21lICRzY2UtbWFuYWdlZCBzZWN1cmUgY29udGV4dHMgKFJFU09VUkNFX1VSTHMgbW9zdGx5KSxcbiAgICAgIC8vIHdlIGVuc3VyZSB0aGF0IHRoZSB2YWx1ZSB0aGF0J3MgdXNlZCBpcyBhc3NpZ25lZCBvciBjb25zdHJ1Y3RlZCBieSBzb21lIEpTIGNvZGUgc29tZXdoZXJlXG4gICAgICAvLyB0aGF0IGlzIG1vcmUgdGVzdGFibGUgb3IgbWFrZSBpdCBvYnZpb3VzIHRoYXQgeW91IGJvdW5kIHRoZSB2YWx1ZSB0byBzb21lIHVzZXIgY29udHJvbGxlZFxuICAgICAgLy8gdmFsdWUuICBUaGlzIGhlbHBzIHJlZHVjZSB0aGUgbG9hZCB3aGVuIGF1ZGl0aW5nIGZvciBYU1MgaXNzdWVzLlxuXG4gICAgICAvLyBOb3RlIHRoYXQgVVJMIGFuZCBNRURJQV9VUkwgJHNjZSBjb250ZXh0cyBkbyBub3QgbmVlZCB0aGlzLCBzaW5jZSBgJHNjZWAgY2FuIHNhbml0aXplIHRoZSB2YWx1ZXNcbiAgICAgIC8vIHBhc3NlZCB0byBpdC4gSW4gdGhhdCBjYXNlLCBgJHNjZS5nZXRUcnVzdGVkYCB3aWxsIGJlIGNhbGxlZCBvbiBlaXRoZXIgdGhlIHNpbmdsZSBleHByZXNzaW9uXG4gICAgICAvLyBvciBvbiB0aGUgb3ZlcmFsbCBjb25jYXRlbmF0ZWQgc3RyaW5nIChsb3NpbmcgdHJ1c3RlZCB0eXBlcyB1c2VkIGluIHRoZSBtaXgsIGJ5IGRlc2lnbikuXG4gICAgICAvLyBCb3RoIHRoZXNlIG1ldGhvZHMgd2lsbCBzYW5pdGl6ZSBwbGFpbiBzdHJpbmdzLiBBbHNvLCBIVE1MIGNvdWxkIGJlIGluY2x1ZGVkLCBidXQgc2luY2UgaXQnc1xuICAgICAgLy8gb25seSB1c2VkIGluIHNyY2RvYyBhdHRyaWJ1dGVzLCB0aGlzIHdvdWxkIG5vdCBiZSB2ZXJ5IHVzZWZ1bC5cblxuICAgICAgaWYgKCFtdXN0SGF2ZUV4cHJlc3Npb24gfHwgZXhwcmVzc2lvbnMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBjb21wdXRlID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgaWYgKGFsbE9yTm90aGluZyAmJiBpc1VuZGVmaW5lZCh2YWx1ZXNbaV0pKSByZXR1cm47XG4gICAgICAgICAgICBjb25jYXRbZXhwcmVzc2lvblBvc2l0aW9uc1tpXV0gPSB2YWx1ZXNbaV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGNvbnRleHRBbGxvd3NDb25jYXRlbmF0aW9uKSB7XG4gICAgICAgICAgICAvLyBJZiBgc2luZ2xlRXhwcmVzc2lvbmAgdGhlbiBgY29uY2F0WzBdYCBtaWdodCBiZSBhIFwidHJ1c3RlZFwiIHZhbHVlIG9yIGBudWxsYCwgcmF0aGVyIHRoYW4gYSBzdHJpbmdcbiAgICAgICAgICAgIHJldHVybiAkc2NlLmdldFRydXN0ZWQodHJ1c3RlZENvbnRleHQsIHNpbmdsZUV4cHJlc3Npb24gPyBjb25jYXRbMF0gOiBjb25jYXQuam9pbignJykpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHJ1c3RlZENvbnRleHQgJiYgY29uY2F0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgY29udGV4dCBkb2VzIG5vdCBhbGxvdyBtb3JlIHRoYW4gb25lIHBhcnQsIGUuZy4gZXhwciArIHN0cmluZyBvciBleHAgKyBleHAuXG4gICAgICAgICAgICAkaW50ZXJwb2xhdGVNaW5FcnIudGhyb3dOb2NvbmNhdCh0ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gSW4gYW4gdW5wcml2aWxlZ2VkIGNvbnRleHQgb3Igb25seSBvbmUgcGFydDoganVzdCBjb25jYXRlbmF0ZSBhbmQgcmV0dXJuLlxuICAgICAgICAgIHJldHVybiBjb25jYXQuam9pbignJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiBpbnRlcnBvbGF0aW9uRm4oY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgdmFyIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IG5ldyBBcnJheShpaSk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZvciAoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbHVlc1tpXSA9IHBhcnNlRm5zW2ldKGNvbnRleHQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGUodmFsdWVzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcigkaW50ZXJwb2xhdGVNaW5FcnIuaW50ZXJyKHRleHQsIGVycikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSwge1xuICAgICAgICAgIC8vIGFsbCBvZiB0aGVzZSBwcm9wZXJ0aWVzIGFyZSB1bmRvY3VtZW50ZWQgZm9yIG5vd1xuICAgICAgICAgIGV4cDogdGV4dCwgLy9qdXN0IGZvciBjb21wYXRpYmlsaXR5IHdpdGggcmVndWxhciB3YXRjaGVycyBjcmVhdGVkIHZpYSAkd2F0Y2hcbiAgICAgICAgICBleHByZXNzaW9uczogZXhwcmVzc2lvbnMsXG4gICAgICAgICAgJCR3YXRjaERlbGVnYXRlOiBmdW5jdGlvbihzY29wZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHZhciBsYXN0VmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gc2NvcGUuJHdhdGNoR3JvdXAocGFyc2VGbnMsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hlcih2YWx1ZXMsIG9sZFZhbHVlcykge1xuICAgICAgICAgICAgICB2YXIgY3VyclZhbHVlID0gY29tcHV0ZSh2YWx1ZXMpO1xuICAgICAgICAgICAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIGN1cnJWYWx1ZSwgdmFsdWVzICE9PSBvbGRWYWx1ZXMgPyBsYXN0VmFsdWUgOiBjdXJyVmFsdWUsIHNjb3BlKTtcbiAgICAgICAgICAgICAgbGFzdFZhbHVlID0gY3VyclZhbHVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGFyc2VTdHJpbmdpZnlJbnRlcmNlcHRvcih2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEluIGNvbmNhdGVuYWJsZSBjb250ZXh0cywgZ2V0VHJ1c3RlZCBjb21lcyBhdCB0aGUgZW5kLCB0byBhdm9pZCBzYW5pdGl6aW5nIGluZGl2aWR1YWxcbiAgICAgICAgICAvLyBwYXJ0cyBvZiBhIGZ1bGwgVVJMLiBXZSBkb24ndCBjYXJlIGFib3V0IGxvc2luZyB0aGUgdHJ1c3RlZG5lc3MgaGVyZS5cbiAgICAgICAgICAvLyBJbiBub24tY29uY2F0ZW5hYmxlIGNvbnRleHRzLCB3aGVyZSB0aGVyZSBpcyBvbmx5IG9uZSBleHByZXNzaW9uLCB0aGlzIGludGVyY2VwdG9yIGlzXG4gICAgICAgICAgLy8gbm90IGFwcGxpZWQgdG8gdGhlIGV4cHJlc3Npb24uXG4gICAgICAgICAgdmFsdWUgPSAodHJ1c3RlZENvbnRleHQgJiYgIWNvbnRleHRBbGxvd3NDb25jYXRlbmF0aW9uKSA/XG4gICAgICAgICAgICAgICAgICAgICRzY2UuZ2V0VHJ1c3RlZCh0cnVzdGVkQ29udGV4dCwgdmFsdWUpIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjZS52YWx1ZU9mKHZhbHVlKTtcbiAgICAgICAgICByZXR1cm4gYWxsT3JOb3RoaW5nICYmICFpc0RlZmluZWQodmFsdWUpID8gdmFsdWUgOiBzdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcigkaW50ZXJwb2xhdGVNaW5FcnIuaW50ZXJyKHRleHQsIGVycikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGludGVycG9sYXRlI3N0YXJ0U3ltYm9sXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU3ltYm9sIHRvIGRlbm90ZSB0aGUgc3RhcnQgb2YgZXhwcmVzc2lvbiBpbiB0aGUgaW50ZXJwb2xhdGVkIHN0cmluZy4gRGVmYXVsdHMgdG8gYHt7YC5cbiAgICAgKlxuICAgICAqIFVzZSB7QGxpbmsgbmcuJGludGVycG9sYXRlUHJvdmlkZXIjc3RhcnRTeW1ib2wgYCRpbnRlcnBvbGF0ZVByb3ZpZGVyLnN0YXJ0U3ltYm9sYH0gdG8gY2hhbmdlXG4gICAgICogdGhlIHN5bWJvbC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHN0YXJ0IHN5bWJvbC5cbiAgICAgKi9cbiAgICAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2wgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzdGFydFN5bWJvbDtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGludGVycG9sYXRlI2VuZFN5bWJvbFxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFN5bWJvbCB0byBkZW5vdGUgdGhlIGVuZCBvZiBleHByZXNzaW9uIGluIHRoZSBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBEZWZhdWx0cyB0byBgfX1gLlxuICAgICAqXG4gICAgICogVXNlIHtAbGluayBuZy4kaW50ZXJwb2xhdGVQcm92aWRlciNlbmRTeW1ib2wgYCRpbnRlcnBvbGF0ZVByb3ZpZGVyLmVuZFN5bWJvbGB9IHRvIGNoYW5nZVxuICAgICAqIHRoZSBzeW1ib2wuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBlbmQgc3ltYm9sLlxuICAgICAqL1xuICAgICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2wgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBlbmRTeW1ib2w7XG4gICAgfTtcblxuICAgIHJldHVybiAkaW50ZXJwb2xhdGU7XG4gIH1dO1xufVxuXG52YXIgJGludGVydmFsTWluRXJyID0gbWluRXJyKCckaW50ZXJ2YWwnKTtcblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkSW50ZXJ2YWxQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyR3aW5kb3cnLCAnJHEnLCAnJCRxJywgJyRicm93c2VyJyxcbiAgICAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAgICR3aW5kb3csICAgJHEsICAgJCRxLCAgICRicm93c2VyKSB7XG4gICAgdmFyIGludGVydmFscyA9IHt9O1xuXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAqIEBuYW1lICRpbnRlcnZhbFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQW5ndWxhckpTJ3Mgd3JhcHBlciBmb3IgYHdpbmRvdy5zZXRJbnRlcnZhbGAuIFRoZSBgZm5gIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGV2ZXJ5IGBkZWxheWBcbiAgICAgKiBtaWxsaXNlY29uZHMuXG4gICAgICpcbiAgICAgKiBUaGUgcmV0dXJuIHZhbHVlIG9mIHJlZ2lzdGVyaW5nIGFuIGludGVydmFsIGZ1bmN0aW9uIGlzIGEgcHJvbWlzZS4gVGhpcyBwcm9taXNlIHdpbGwgYmVcbiAgICAgKiBub3RpZmllZCB1cG9uIGVhY2ggdGljayBvZiB0aGUgaW50ZXJ2YWwsIGFuZCB3aWxsIGJlIHJlc29sdmVkIGFmdGVyIGBjb3VudGAgaXRlcmF0aW9ucywgb3JcbiAgICAgKiBydW4gaW5kZWZpbml0ZWx5IGlmIGBjb3VudGAgaXMgbm90IGRlZmluZWQuIFRoZSB2YWx1ZSBvZiB0aGUgbm90aWZpY2F0aW9uIHdpbGwgYmUgdGhlXG4gICAgICogbnVtYmVyIG9mIGl0ZXJhdGlvbnMgdGhhdCBoYXZlIHJ1bi5cbiAgICAgKiBUbyBjYW5jZWwgYW4gaW50ZXJ2YWwsIGNhbGwgYCRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSlgLlxuICAgICAqXG4gICAgICogSW4gdGVzdHMgeW91IGNhbiB1c2Uge0BsaW5rIG5nTW9jay4kaW50ZXJ2YWwjZmx1c2ggYCRpbnRlcnZhbC5mbHVzaChtaWxsaXMpYH0gdG9cbiAgICAgKiBtb3ZlIGZvcndhcmQgYnkgYG1pbGxpc2AgbWlsbGlzZWNvbmRzIGFuZCB0cmlnZ2VyIGFueSBmdW5jdGlvbnMgc2NoZWR1bGVkIHRvIHJ1biBpbiB0aGF0XG4gICAgICogdGltZS5cbiAgICAgKlxuICAgICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAgICogKipOb3RlKio6IEludGVydmFscyBjcmVhdGVkIGJ5IHRoaXMgc2VydmljZSBtdXN0IGJlIGV4cGxpY2l0bHkgZGVzdHJveWVkIHdoZW4geW91IGFyZSBmaW5pc2hlZFxuICAgICAqIHdpdGggdGhlbS4gIEluIHBhcnRpY3VsYXIgdGhleSBhcmUgbm90IGF1dG9tYXRpY2FsbHkgZGVzdHJveWVkIHdoZW4gYSBjb250cm9sbGVyJ3Mgc2NvcGUgb3IgYVxuICAgICAqIGRpcmVjdGl2ZSdzIGVsZW1lbnQgYXJlIGRlc3Ryb3llZC5cbiAgICAgKiBZb3Ugc2hvdWxkIHRha2UgdGhpcyBpbnRvIGNvbnNpZGVyYXRpb24gYW5kIG1ha2Ugc3VyZSB0byBhbHdheXMgY2FuY2VsIHRoZSBpbnRlcnZhbCBhdCB0aGVcbiAgICAgKiBhcHByb3ByaWF0ZSBtb21lbnQuICBTZWUgdGhlIGV4YW1wbGUgYmVsb3cgZm9yIG1vcmUgZGV0YWlscyBvbiBob3cgYW5kIHdoZW4gdG8gZG8gdGhpcy5cbiAgICAgKiA8L2Rpdj5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgcmVwZWF0ZWRseS4gSWYgbm8gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICAgKiAgIGFyZSBwYXNzZWQgKHNlZSBiZWxvdyksIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCB0aGUgY3VycmVudCBpdGVyYXRpb24gY291bnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5IE51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiBlYWNoIGZ1bmN0aW9uIGNhbGwuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBbY291bnQ9MF0gTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdC4gSWYgbm90IHNldCwgb3IgMCwgd2lsbCByZXBlYXRcbiAgICAgKiAgIGluZGVmaW5pdGVseS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbaW52b2tlQXBwbHk9dHJ1ZV0gSWYgc2V0IHRvIGBmYWxzZWAgc2tpcHMgbW9kZWwgZGlydHkgY2hlY2tpbmcsIG90aGVyd2lzZVxuICAgICAqICAgd2lsbCBpbnZva2UgYGZuYCB3aXRoaW4gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHl9IGJsb2NrLlxuICAgICAqIEBwYXJhbSB7Li4uKj19IFBhc3MgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHRoZSBleGVjdXRlZCBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7cHJvbWlzZX0gQSBwcm9taXNlIHdoaWNoIHdpbGwgYmUgbm90aWZpZWQgb24gZWFjaCBpdGVyYXRpb24uIEl0IHdpbGwgcmVzb2x2ZSBvbmNlIGFsbCBpdGVyYXRpb25zIG9mIHRoZSBpbnRlcnZhbCBjb21wbGV0ZS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogPGV4YW1wbGUgbW9kdWxlPVwiaW50ZXJ2YWxFeGFtcGxlXCIgbmFtZT1cImludGVydmFsLXNlcnZpY2VcIj5cbiAgICAgKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAqICAgPHNjcmlwdD5cbiAgICAgKiAgICAgYW5ndWxhci5tb2R1bGUoJ2ludGVydmFsRXhhbXBsZScsIFtdKVxuICAgICAqICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsXG4gICAgICogICAgICAgICBmdW5jdGlvbigkc2NvcGUsICRpbnRlcnZhbCkge1xuICAgICAqICAgICAgICAgICAkc2NvcGUuZm9ybWF0ID0gJ00vZC95eSBoOm1tOnNzIGEnO1xuICAgICAqICAgICAgICAgICAkc2NvcGUuYmxvb2RfMSA9IDEwMDtcbiAgICAgKiAgICAgICAgICAgJHNjb3BlLmJsb29kXzIgPSAxMjA7XG4gICAgICpcbiAgICAgKiAgICAgICAgICAgdmFyIHN0b3A7XG4gICAgICogICAgICAgICAgICRzY29wZS5maWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICAgICAgICAgIC8vIERvbid0IHN0YXJ0IGEgbmV3IGZpZ2h0IGlmIHdlIGFyZSBhbHJlYWR5IGZpZ2h0aW5nXG4gICAgICogICAgICAgICAgICAgaWYgKCBhbmd1bGFyLmlzRGVmaW5lZChzdG9wKSApIHJldHVybjtcbiAgICAgKlxuICAgICAqICAgICAgICAgICAgIHN0b3AgPSAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICogICAgICAgICAgICAgICBpZiAoJHNjb3BlLmJsb29kXzEgPiAwICYmICRzY29wZS5ibG9vZF8yID4gMCkge1xuICAgICAqICAgICAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMSA9ICRzY29wZS5ibG9vZF8xIC0gMztcbiAgICAgKiAgICAgICAgICAgICAgICAgJHNjb3BlLmJsb29kXzIgPSAkc2NvcGUuYmxvb2RfMiAtIDQ7XG4gICAgICogICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAqICAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0KCk7XG4gICAgICogICAgICAgICAgICAgICB9XG4gICAgICogICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgKiAgICAgICAgICAgfTtcbiAgICAgKlxuICAgICAqICAgICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICogICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHN0b3ApKSB7XG4gICAgICogICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHN0b3ApO1xuICAgICAqICAgICAgICAgICAgICAgc3RvcCA9IHVuZGVmaW5lZDtcbiAgICAgKiAgICAgICAgICAgICB9XG4gICAgICogICAgICAgICAgIH07XG4gICAgICpcbiAgICAgKiAgICAgICAgICAgJHNjb3BlLnJlc2V0RmlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMSA9IDEwMDtcbiAgICAgKiAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMiA9IDEyMDtcbiAgICAgKiAgICAgICAgICAgfTtcbiAgICAgKlxuICAgICAqICAgICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAqICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBpbnRlcnZhbCBpcyBkZXN0cm95ZWQgdG9vXG4gICAgICogICAgICAgICAgICAgJHNjb3BlLnN0b3BGaWdodCgpO1xuICAgICAqICAgICAgICAgICB9KTtcbiAgICAgKiAgICAgICAgIH1dKVxuICAgICAqICAgICAgIC8vIFJlZ2lzdGVyIHRoZSAnbXlDdXJyZW50VGltZScgZGlyZWN0aXZlIGZhY3RvcnkgbWV0aG9kLlxuICAgICAqICAgICAgIC8vIFdlIGluamVjdCAkaW50ZXJ2YWwgYW5kIGRhdGVGaWx0ZXIgc2VydmljZSBzaW5jZSB0aGUgZmFjdG9yeSBtZXRob2QgaXMgREkuXG4gICAgICogICAgICAgLmRpcmVjdGl2ZSgnbXlDdXJyZW50VGltZScsIFsnJGludGVydmFsJywgJ2RhdGVGaWx0ZXInLFxuICAgICAqICAgICAgICAgZnVuY3Rpb24oJGludGVydmFsLCBkYXRlRmlsdGVyKSB7XG4gICAgICogICAgICAgICAgIC8vIHJldHVybiB0aGUgZGlyZWN0aXZlIGxpbmsgZnVuY3Rpb24uIChjb21waWxlIGZ1bmN0aW9uIG5vdCBuZWVkZWQpXG4gICAgICogICAgICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgKiAgICAgICAgICAgICB2YXIgZm9ybWF0LCAgLy8gZGF0ZSBmb3JtYXRcbiAgICAgKiAgICAgICAgICAgICAgICAgc3RvcFRpbWU7IC8vIHNvIHRoYXQgd2UgY2FuIGNhbmNlbCB0aGUgdGltZSB1cGRhdGVzXG4gICAgICpcbiAgICAgKiAgICAgICAgICAgICAvLyB1c2VkIHRvIHVwZGF0ZSB0aGUgVUlcbiAgICAgKiAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKCkge1xuICAgICAqICAgICAgICAgICAgICAgZWxlbWVudC50ZXh0KGRhdGVGaWx0ZXIobmV3IERhdGUoKSwgZm9ybWF0KSk7XG4gICAgICogICAgICAgICAgICAgfVxuICAgICAqXG4gICAgICogICAgICAgICAgICAgLy8gd2F0Y2ggdGhlIGV4cHJlc3Npb24sIGFuZCB1cGRhdGUgdGhlIFVJIG9uIGNoYW5nZS5cbiAgICAgKiAgICAgICAgICAgICBzY29wZS4kd2F0Y2goYXR0cnMubXlDdXJyZW50VGltZSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgKiAgICAgICAgICAgICAgIGZvcm1hdCA9IHZhbHVlO1xuICAgICAqICAgICAgICAgICAgICAgdXBkYXRlVGltZSgpO1xuICAgICAqICAgICAgICAgICAgIH0pO1xuICAgICAqXG4gICAgICogICAgICAgICAgICAgc3RvcFRpbWUgPSAkaW50ZXJ2YWwodXBkYXRlVGltZSwgMTAwMCk7XG4gICAgICpcbiAgICAgKiAgICAgICAgICAgICAvLyBsaXN0ZW4gb24gRE9NIGRlc3Ryb3kgKHJlbW92YWwpIGV2ZW50LCBhbmQgY2FuY2VsIHRoZSBuZXh0IFVJIHVwZGF0ZVxuICAgICAqICAgICAgICAgICAgIC8vIHRvIHByZXZlbnQgdXBkYXRpbmcgdGltZSBhZnRlciB0aGUgRE9NIGVsZW1lbnQgd2FzIHJlbW92ZWQuXG4gICAgICogICAgICAgICAgICAgZWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoc3RvcFRpbWUpO1xuICAgICAqICAgICAgICAgICAgIH0pO1xuICAgICAqICAgICAgICAgICB9XG4gICAgICogICAgICAgICB9XSk7XG4gICAgICogICA8L3NjcmlwdD5cbiAgICAgKlxuICAgICAqICAgPGRpdj5cbiAgICAgKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgKiAgICAgICA8bGFiZWw+RGF0ZSBmb3JtYXQ6IDxpbnB1dCBuZy1tb2RlbD1cImZvcm1hdFwiPjwvbGFiZWw+IDxoci8+XG4gICAgICogICAgICAgQ3VycmVudCB0aW1lIGlzOiA8c3BhbiBteS1jdXJyZW50LXRpbWU9XCJmb3JtYXRcIj48L3NwYW4+XG4gICAgICogICAgICAgPGhyLz5cbiAgICAgKiAgICAgICBCbG9vZCAxIDogPGZvbnQgY29sb3I9J3JlZCc+e3tibG9vZF8xfX08L2ZvbnQ+XG4gICAgICogICAgICAgQmxvb2QgMiA6IDxmb250IGNvbG9yPSdyZWQnPnt7Ymxvb2RfMn19PC9mb250PlxuICAgICAqICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtbmctY2xpY2s9XCJmaWdodCgpXCI+RmlnaHQ8L2J1dHRvbj5cbiAgICAgKiAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLW5nLWNsaWNrPVwic3RvcEZpZ2h0KClcIj5TdG9wRmlnaHQ8L2J1dHRvbj5cbiAgICAgKiAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLW5nLWNsaWNrPVwicmVzZXRGaWdodCgpXCI+cmVzZXRGaWdodDwvYnV0dG9uPlxuICAgICAqICAgICA8L2Rpdj5cbiAgICAgKiAgIDwvZGl2PlxuICAgICAqXG4gICAgICogPC9maWxlPlxuICAgICAqIDwvZXhhbXBsZT5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnRlcnZhbChmbiwgZGVsYXksIGNvdW50LCBpbnZva2VBcHBseSkge1xuICAgICAgdmFyIGhhc1BhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0LFxuICAgICAgICAgIGFyZ3MgPSBoYXNQYXJhbXMgPyBzbGljZUFyZ3MoYXJndW1lbnRzLCA0KSA6IFtdLFxuICAgICAgICAgIHNldEludGVydmFsID0gJHdpbmRvdy5zZXRJbnRlcnZhbCxcbiAgICAgICAgICBjbGVhckludGVydmFsID0gJHdpbmRvdy5jbGVhckludGVydmFsLFxuICAgICAgICAgIGl0ZXJhdGlvbiA9IDAsXG4gICAgICAgICAgc2tpcEFwcGx5ID0gKGlzRGVmaW5lZChpbnZva2VBcHBseSkgJiYgIWludm9rZUFwcGx5KSxcbiAgICAgICAgICBkZWZlcnJlZCA9IChza2lwQXBwbHkgPyAkJHEgOiAkcSkuZGVmZXIoKSxcbiAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgICAgY291bnQgPSBpc0RlZmluZWQoY291bnQpID8gY291bnQgOiAwO1xuXG4gICAgICBwcm9taXNlLiQkaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgICAgIGlmIChza2lwQXBwbHkpIHtcbiAgICAgICAgICAkYnJvd3Nlci5kZWZlcihjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBkZWZlcnJlZC5ub3RpZnkoaXRlcmF0aW9uKyspO1xuXG4gICAgICAgIGlmIChjb3VudCA+IDAgJiYgaXRlcmF0aW9uID49IGNvdW50KSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpdGVyYXRpb24pO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwocHJvbWlzZS4kJGludGVydmFsSWQpO1xuICAgICAgICAgIGRlbGV0ZSBpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFza2lwQXBwbHkpICRyb290U2NvcGUuJGFwcGx5KCk7XG5cbiAgICAgIH0sIGRlbGF5KTtcblxuICAgICAgaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXSA9IGRlZmVycmVkO1xuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcblxuICAgICAgZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICAgIGlmICghaGFzUGFyYW1zKSB7XG4gICAgICAgICAgZm4oaXRlcmF0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRpbnRlcnZhbCNjYW5jZWxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIENhbmNlbHMgYSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgYHByb21pc2VgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQcm9taXNlPX0gcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgYCRpbnRlcnZhbGAgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB0YXNrIHdhcyBzdWNjZXNzZnVsbHkgY2FuY2VsZWQuXG4gICAgICovXG4gICAgaW50ZXJ2YWwuY2FuY2VsID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgaWYgKCFwcm9taXNlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIGlmICghcHJvbWlzZS5oYXNPd25Qcm9wZXJ0eSgnJCRpbnRlcnZhbElkJykpIHtcbiAgICAgICAgdGhyb3cgJGludGVydmFsTWluRXJyKCdiYWRwcm9tJyxcbiAgICAgICAgICAgICdgJGludGVydmFsLmNhbmNlbCgpYCBjYWxsZWQgd2l0aCBhIHByb21pc2UgdGhhdCB3YXMgbm90IGdlbmVyYXRlZCBieSBgJGludGVydmFsKClgLicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWludGVydmFscy5oYXNPd25Qcm9wZXJ0eShwcm9taXNlLiQkaW50ZXJ2YWxJZCkpIHJldHVybiBmYWxzZTtcblxuICAgICAgdmFyIGlkID0gcHJvbWlzZS4kJGludGVydmFsSWQ7XG4gICAgICB2YXIgZGVmZXJyZWQgPSBpbnRlcnZhbHNbaWRdO1xuXG4gICAgICAvLyBJbnRlcnZhbCBjYW5jZWxzIHNob3VsZCBub3QgcmVwb3J0IGFuIHVuaGFuZGxlZCBwcm9taXNlLlxuICAgICAgbWFya1FFeGNlcHRpb25IYW5kbGVkKGRlZmVycmVkLnByb21pc2UpO1xuICAgICAgZGVmZXJyZWQucmVqZWN0KCdjYW5jZWxlZCcpO1xuICAgICAgJHdpbmRvdy5jbGVhckludGVydmFsKGlkKTtcbiAgICAgIGRlbGV0ZSBpbnRlcnZhbHNbaWRdO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGludGVydmFsO1xuICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzXG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xuICogQGRlc2NyaXB0aW9uXG4gKiBUaGlzIHNlcnZpY2UgaGFuZGxlcyB0aGUgbGlmZWN5Y2xlIG9mIGNhbGxiYWNrcyB0byBoYW5kbGUgSlNPTlAgcmVxdWVzdHMuXG4gKiBPdmVycmlkZSB0aGlzIHNlcnZpY2UgaWYgeW91IHdpc2ggdG8gY3VzdG9taXNlIHdoZXJlIHRoZSBjYWxsYmFja3MgYXJlIHN0b3JlZCBhbmRcbiAqIGhvdyB0aGV5IHZhcnkgY29tcGFyZWQgdG8gdGhlIHJlcXVlc3RlZCB1cmwuXG4gKi9cbnZhciAkanNvbnBDYWxsYmFja3NQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNhbGxiYWNrcyA9IGFuZ3VsYXIuY2FsbGJhY2tzO1xuICAgIHZhciBjYWxsYmFja01hcCA9IHt9O1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2tJZCkge1xuICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjYWxsYmFjay5kYXRhID0gZGF0YTtcbiAgICAgICAgY2FsbGJhY2suY2FsbGVkID0gdHJ1ZTtcbiAgICAgIH07XG4gICAgICBjYWxsYmFjay5pZCA9IGNhbGxiYWNrSWQ7XG4gICAgICByZXR1cm4gY2FsbGJhY2s7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzI2NyZWF0ZUNhbGxiYWNrXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIHRoZSB1cmwgb2YgdGhlIEpTT05QIHJlcXVlc3RcbiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBjYWxsYmFjayBwYXRoIHRvIHNlbmQgdG8gdGhlIHNlcnZlciBhcyBwYXJ0IG9mIHRoZSBKU09OUCByZXF1ZXN0XG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIHtAbGluayAkaHR0cEJhY2tlbmR9IGNhbGxzIHRoaXMgbWV0aG9kIHRvIGNyZWF0ZSBhIGNhbGxiYWNrIGFuZCBnZXQgaG9sZCBvZiB0aGUgcGF0aCB0byB0aGUgY2FsbGJhY2tcbiAgICAgICAqIHRvIHBhc3MgdG8gdGhlIHNlcnZlciwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGNhbGwgdGhlIGNhbGxiYWNrIHdpdGggaXRzIHBheWxvYWQgaW4gdGhlIEpTT05QIHJlc3BvbnNlLlxuICAgICAgICovXG4gICAgICBjcmVhdGVDYWxsYmFjazogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciBjYWxsYmFja0lkID0gJ18nICsgKGNhbGxiYWNrcy4kJGNvdW50ZXIrKykudG9TdHJpbmcoMzYpO1xuICAgICAgICB2YXIgY2FsbGJhY2tQYXRoID0gJ2FuZ3VsYXIuY2FsbGJhY2tzLicgKyBjYWxsYmFja0lkO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBjcmVhdGVDYWxsYmFjayhjYWxsYmFja0lkKTtcbiAgICAgICAgY2FsbGJhY2tNYXBbY2FsbGJhY2tQYXRoXSA9IGNhbGxiYWNrc1tjYWxsYmFja0lkXSA9IGNhbGxiYWNrO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2tQYXRoO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzI3dhc0NhbGxlZFxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNhbGxiYWNrUGF0aCB0aGUgcGF0aCB0byB0aGUgY2FsbGJhY2sgdGhhdCB3YXMgc2VudCBpbiB0aGUgSlNPTlAgcmVxdWVzdFxuICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgdGhlIGNhbGxiYWNrIGhhcyBiZWVuIGNhbGxlZCwgYXMgYSByZXN1bHQgb2YgdGhlIEpTT05QIHJlc3BvbnNlXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIHtAbGluayAkaHR0cEJhY2tlbmR9IGNhbGxzIHRoaXMgbWV0aG9kIHRvIGZpbmQgb3V0IHdoZXRoZXIgdGhlIEpTT05QIHJlc3BvbnNlIGFjdHVhbGx5IGNhbGxlZCB0aGVcbiAgICAgICAqIGNhbGxiYWNrIHRoYXQgd2FzIHBhc3NlZCBpbiB0aGUgcmVxdWVzdC5cbiAgICAgICAqL1xuICAgICAgd2FzQ2FsbGVkOiBmdW5jdGlvbihjYWxsYmFja1BhdGgpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrTWFwW2NhbGxiYWNrUGF0aF0uY2FsbGVkO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGpzb25wQ2FsbGJhY2tzI2dldFJlc3BvbnNlXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbGJhY2tQYXRoIHRoZSBwYXRoIHRvIHRoZSBjYWxsYmFjayB0aGF0IHdhcyBzZW50IGluIHRoZSBKU09OUCByZXF1ZXN0XG4gICAgICAgKiBAcmV0dXJucyB7Kn0gdGhlIGRhdGEgcmVjZWl2ZWQgZnJvbSB0aGUgcmVzcG9uc2UgdmlhIHRoZSByZWdpc3RlcmVkIGNhbGxiYWNrXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIHtAbGluayAkaHR0cEJhY2tlbmR9IGNhbGxzIHRoaXMgbWV0aG9kIHRvIGdldCBob2xkIG9mIHRoZSBkYXRhIHRoYXQgd2FzIHByb3ZpZGVkIHRvIHRoZSBjYWxsYmFja1xuICAgICAgICogaW4gdGhlIEpTT05QIHJlc3BvbnNlLlxuICAgICAgICovXG4gICAgICBnZXRSZXNwb25zZTogZnVuY3Rpb24oY2FsbGJhY2tQYXRoKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFja01hcFtjYWxsYmFja1BhdGhdLmRhdGE7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkanNvbnBDYWxsYmFja3MjcmVtb3ZlQ2FsbGJhY2tcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsYmFja1BhdGggdGhlIHBhdGggdG8gdGhlIGNhbGxiYWNrIHRoYXQgd2FzIHNlbnQgaW4gdGhlIEpTT05QIHJlcXVlc3RcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICoge0BsaW5rICRodHRwQmFja2VuZH0gY2FsbHMgdGhpcyBtZXRob2QgdG8gcmVtb3ZlIHRoZSBjYWxsYmFjayBhZnRlciB0aGUgSlNPTlAgcmVxdWVzdCBoYXNcbiAgICAgICAqIGNvbXBsZXRlZCBvciB0aW1lZC1vdXQuXG4gICAgICAgKi9cbiAgICAgIHJlbW92ZUNhbGxiYWNrOiBmdW5jdGlvbihjYWxsYmFja1BhdGgpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gY2FsbGJhY2tNYXBbY2FsbGJhY2tQYXRoXTtcbiAgICAgICAgZGVsZXRlIGNhbGxiYWNrc1tjYWxsYmFjay5pZF07XG4gICAgICAgIGRlbGV0ZSBjYWxsYmFja01hcFtjYWxsYmFja1BhdGhdO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkbG9jYWxlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiAkbG9jYWxlIHNlcnZpY2UgcHJvdmlkZXMgbG9jYWxpemF0aW9uIHJ1bGVzIGZvciB2YXJpb3VzIEFuZ3VsYXJKUyBjb21wb25lbnRzLiBBcyBvZiByaWdodCBub3cgdGhlXG4gKiBvbmx5IHB1YmxpYyBhcGkgaXM6XG4gKlxuICogKiBgaWRgIOKAkyBge3N0cmluZ31gIOKAkyBsb2NhbGUgaWQgZm9ybWF0dGVkIGFzIGBsYW5ndWFnZUlkLWNvdW50cnlJZGAgKGUuZy4gYGVuLXVzYClcbiAqL1xuXG52YXIgUEFUSF9NQVRDSCA9IC9eKFtePyNdKikoXFw/KFteI10qKSk/KCMoLiopKT8kLyxcbiAgICBERUZBVUxUX1BPUlRTID0geydodHRwJzogODAsICdodHRwcyc6IDQ0MywgJ2Z0cCc6IDIxfTtcbnZhciAkbG9jYXRpb25NaW5FcnIgPSBtaW5FcnIoJyRsb2NhdGlvbicpO1xuXG5cbi8qKlxuICogRW5jb2RlIHBhdGggdXNpbmcgZW5jb2RlVXJpU2VnbWVudCwgaWdub3JpbmcgZm9yd2FyZCBzbGFzaGVzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCB0byBlbmNvZGVcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVuY29kZVBhdGgocGF0aCkge1xuICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcvJyksXG4gICAgICBpID0gc2VnbWVudHMubGVuZ3RoO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICAvLyBkZWNvZGUgZm9yd2FyZCBzbGFzaGVzIHRvIHByZXZlbnQgdGhlbSBmcm9tIGJlaW5nIGRvdWJsZSBlbmNvZGVkXG4gICAgc2VnbWVudHNbaV0gPSBlbmNvZGVVcmlTZWdtZW50KHNlZ21lbnRzW2ldLnJlcGxhY2UoLyUyRi9nLCAnLycpKTtcbiAgfVxuXG4gIHJldHVybiBzZWdtZW50cy5qb2luKCcvJyk7XG59XG5cbmZ1bmN0aW9uIGRlY29kZVBhdGgocGF0aCwgaHRtbDVNb2RlKSB7XG4gIHZhciBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy8nKSxcbiAgICAgIGkgPSBzZWdtZW50cy5sZW5ndGg7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIHNlZ21lbnRzW2ldID0gZGVjb2RlVVJJQ29tcG9uZW50KHNlZ21lbnRzW2ldKTtcbiAgICBpZiAoaHRtbDVNb2RlKSB7XG4gICAgICAvLyBlbmNvZGUgZm9yd2FyZCBzbGFzaGVzIHRvIHByZXZlbnQgdGhlbSBmcm9tIGJlaW5nIG1pc3Rha2VuIGZvciBwYXRoIHNlcGFyYXRvcnNcbiAgICAgIHNlZ21lbnRzW2ldID0gc2VnbWVudHNbaV0ucmVwbGFjZSgvXFwvL2csICclMkYnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc2VnbWVudHMuam9pbignLycpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUFic29sdXRlVXJsKGFic29sdXRlVXJsLCBsb2NhdGlvbk9iaikge1xuICB2YXIgcGFyc2VkVXJsID0gdXJsUmVzb2x2ZShhYnNvbHV0ZVVybCk7XG5cbiAgbG9jYXRpb25PYmouJCRwcm90b2NvbCA9IHBhcnNlZFVybC5wcm90b2NvbDtcbiAgbG9jYXRpb25PYmouJCRob3N0ID0gcGFyc2VkVXJsLmhvc3RuYW1lO1xuICBsb2NhdGlvbk9iai4kJHBvcnQgPSB0b0ludChwYXJzZWRVcmwucG9ydCkgfHwgREVGQVVMVF9QT1JUU1twYXJzZWRVcmwucHJvdG9jb2xdIHx8IG51bGw7XG59XG5cbnZhciBET1VCTEVfU0xBU0hfUkVHRVggPSAvXlxccypbXFxcXC9dezIsfS87XG5mdW5jdGlvbiBwYXJzZUFwcFVybCh1cmwsIGxvY2F0aW9uT2JqLCBodG1sNU1vZGUpIHtcblxuICBpZiAoRE9VQkxFX1NMQVNIX1JFR0VYLnRlc3QodXJsKSkge1xuICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignYmFkcGF0aCcsICdJbnZhbGlkIHVybCBcInswfVwiLicsIHVybCk7XG4gIH1cblxuICB2YXIgcHJlZml4ZWQgPSAodXJsLmNoYXJBdCgwKSAhPT0gJy8nKTtcbiAgaWYgKHByZWZpeGVkKSB7XG4gICAgdXJsID0gJy8nICsgdXJsO1xuICB9XG4gIHZhciBtYXRjaCA9IHVybFJlc29sdmUodXJsKTtcbiAgdmFyIHBhdGggPSBwcmVmaXhlZCAmJiBtYXRjaC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyA/IG1hdGNoLnBhdGhuYW1lLnN1YnN0cmluZygxKSA6IG1hdGNoLnBhdGhuYW1lO1xuICBsb2NhdGlvbk9iai4kJHBhdGggPSBkZWNvZGVQYXRoKHBhdGgsIGh0bWw1TW9kZSk7XG4gIGxvY2F0aW9uT2JqLiQkc2VhcmNoID0gcGFyc2VLZXlWYWx1ZShtYXRjaC5zZWFyY2gpO1xuICBsb2NhdGlvbk9iai4kJGhhc2ggPSBkZWNvZGVVUklDb21wb25lbnQobWF0Y2guaGFzaCk7XG5cbiAgLy8gbWFrZSBzdXJlIHBhdGggc3RhcnRzIHdpdGggJy8nO1xuICBpZiAobG9jYXRpb25PYmouJCRwYXRoICYmIGxvY2F0aW9uT2JqLiQkcGF0aC5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgIGxvY2F0aW9uT2JqLiQkcGF0aCA9ICcvJyArIGxvY2F0aW9uT2JqLiQkcGF0aDtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdGFydHNXaXRoKHN0ciwgc2VhcmNoKSB7XG4gIHJldHVybiBzdHIuc2xpY2UoMCwgc2VhcmNoLmxlbmd0aCkgPT09IHNlYXJjaDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHJldHVybnMgdGV4dCBmcm9tIGB1cmxgIGFmdGVyIGBiYXNlYCBvciBgdW5kZWZpbmVkYCBpZiBpdCBkb2VzIG5vdCBiZWdpbiB3aXRoXG4gKiAgICAgICAgICAgICAgICAgICB0aGUgZXhwZWN0ZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBzdHJpcEJhc2VVcmwoYmFzZSwgdXJsKSB7XG4gIGlmIChzdGFydHNXaXRoKHVybCwgYmFzZSkpIHtcbiAgICByZXR1cm4gdXJsLnN1YnN0cihiYXNlLmxlbmd0aCk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzdHJpcEhhc2godXJsKSB7XG4gIHZhciBpbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG4gIHJldHVybiBpbmRleCA9PT0gLTEgPyB1cmwgOiB1cmwuc3Vic3RyKDAsIGluZGV4KTtcbn1cblxuZnVuY3Rpb24gdHJpbUVtcHR5SGFzaCh1cmwpIHtcbiAgcmV0dXJuIHVybC5yZXBsYWNlKC8oIy4rKXwjJC8sICckMScpO1xufVxuXG5cbmZ1bmN0aW9uIHN0cmlwRmlsZSh1cmwpIHtcbiAgcmV0dXJuIHVybC5zdWJzdHIoMCwgc3RyaXBIYXNoKHVybCkubGFzdEluZGV4T2YoJy8nKSArIDEpO1xufVxuXG4vKiByZXR1cm4gdGhlIHNlcnZlciBvbmx5IChzY2hlbWU6Ly9ob3N0OnBvcnQpICovXG5mdW5jdGlvbiBzZXJ2ZXJCYXNlKHVybCkge1xuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCB1cmwuaW5kZXhPZignLycsIHVybC5pbmRleE9mKCcvLycpICsgMikpO1xufVxuXG5cbi8qKlxuICogTG9jYXRpb25IdG1sNVVybCByZXByZXNlbnRzIGEgVVJMXG4gKiBUaGlzIG9iamVjdCBpcyBleHBvc2VkIGFzICRsb2NhdGlvbiBzZXJ2aWNlIHdoZW4gSFRNTDUgbW9kZSBpcyBlbmFibGVkIGFuZCBzdXBwb3J0ZWRcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcHBCYXNlIGFwcGxpY2F0aW9uIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZU5vRmlsZSBhcHBsaWNhdGlvbiBiYXNlIFVSTCBzdHJpcHBlZCBvZiBhbnkgZmlsZW5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlUHJlZml4IFVSTCBwYXRoIHByZWZpeFxuICovXG5mdW5jdGlvbiBMb2NhdGlvbkh0bWw1VXJsKGFwcEJhc2UsIGFwcEJhc2VOb0ZpbGUsIGJhc2VQcmVmaXgpIHtcbiAgdGhpcy4kJGh0bWw1ID0gdHJ1ZTtcbiAgYmFzZVByZWZpeCA9IGJhc2VQcmVmaXggfHwgJyc7XG4gIHBhcnNlQWJzb2x1dGVVcmwoYXBwQmFzZSwgdGhpcyk7XG5cblxuICAvKipcbiAgICogUGFyc2UgZ2l2ZW4gSFRNTDUgKHJlZ3VsYXIpIFVSTCBzdHJpbmcgaW50byBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgSFRNTDUgVVJMXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkcGFyc2UgPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgcGF0aFVybCA9IHN0cmlwQmFzZVVybChhcHBCYXNlTm9GaWxlLCB1cmwpO1xuICAgIGlmICghaXNTdHJpbmcocGF0aFVybCkpIHtcbiAgICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignaXB0aHByZngnLCAnSW52YWxpZCB1cmwgXCJ7MH1cIiwgbWlzc2luZyBwYXRoIHByZWZpeCBcInsxfVwiLicsIHVybCxcbiAgICAgICAgICBhcHBCYXNlTm9GaWxlKTtcbiAgICB9XG5cbiAgICBwYXJzZUFwcFVybChwYXRoVXJsLCB0aGlzLCB0cnVlKTtcblxuICAgIGlmICghdGhpcy4kJHBhdGgpIHtcbiAgICAgIHRoaXMuJCRwYXRoID0gJy8nO1xuICAgIH1cblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbXBvc2UgdXJsIGFuZCB1cGRhdGUgYGFic1VybGAgcHJvcGVydHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuJCRjb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlYXJjaCA9IHRvS2V5VmFsdWUodGhpcy4kJHNlYXJjaCksXG4gICAgICAgIGhhc2ggPSB0aGlzLiQkaGFzaCA/ICcjJyArIGVuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpIDogJyc7XG5cbiAgICB0aGlzLiQkdXJsID0gZW5jb2RlUGF0aCh0aGlzLiQkcGF0aCkgKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgaGFzaDtcbiAgICB0aGlzLiQkYWJzVXJsID0gYXBwQmFzZU5vRmlsZSArIHRoaXMuJCR1cmwuc3Vic3RyKDEpOyAvLyBmaXJzdCBjaGFyIGlzIGFsd2F5cyAnLydcblxuICAgIHRoaXMuJCR1cmxVcGRhdGVkQnlMb2NhdGlvbiA9IHRydWU7XG4gIH07XG5cbiAgdGhpcy4kJHBhcnNlTGlua1VybCA9IGZ1bmN0aW9uKHVybCwgcmVsSHJlZikge1xuICAgIGlmIChyZWxIcmVmICYmIHJlbEhyZWZbMF0gPT09ICcjJykge1xuICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBsaW5rcyB0byBoYXNoIGZyYWdtZW50czpcbiAgICAgIC8vIGtlZXAgdGhlIG9sZCB1cmwgYW5kIG9ubHkgcmVwbGFjZSB0aGUgaGFzaCBmcmFnbWVudFxuICAgICAgdGhpcy5oYXNoKHJlbEhyZWYuc2xpY2UoMSkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBhcHBVcmwsIHByZXZBcHBVcmw7XG4gICAgdmFyIHJld3JpdHRlblVybDtcblxuXG4gICAgaWYgKGlzRGVmaW5lZChhcHBVcmwgPSBzdHJpcEJhc2VVcmwoYXBwQmFzZSwgdXJsKSkpIHtcbiAgICAgIHByZXZBcHBVcmwgPSBhcHBVcmw7XG4gICAgICBpZiAoYmFzZVByZWZpeCAmJiBpc0RlZmluZWQoYXBwVXJsID0gc3RyaXBCYXNlVXJsKGJhc2VQcmVmaXgsIGFwcFVybCkpKSB7XG4gICAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGUgKyAoc3RyaXBCYXNlVXJsKCcvJywgYXBwVXJsKSB8fCBhcHBVcmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZSArIHByZXZBcHBVcmw7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0RlZmluZWQoYXBwVXJsID0gc3RyaXBCYXNlVXJsKGFwcEJhc2VOb0ZpbGUsIHVybCkpKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlICsgYXBwVXJsO1xuICAgIH0gZWxzZSBpZiAoYXBwQmFzZU5vRmlsZSA9PT0gdXJsICsgJy8nKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlO1xuICAgIH1cbiAgICBpZiAocmV3cml0dGVuVXJsKSB7XG4gICAgICB0aGlzLiQkcGFyc2UocmV3cml0dGVuVXJsKTtcbiAgICB9XG4gICAgcmV0dXJuICEhcmV3cml0dGVuVXJsO1xuICB9O1xufVxuXG5cbi8qKlxuICogTG9jYXRpb25IYXNoYmFuZ1VybCByZXByZXNlbnRzIFVSTFxuICogVGhpcyBvYmplY3QgaXMgZXhwb3NlZCBhcyAkbG9jYXRpb24gc2VydmljZSB3aGVuIGRldmVsb3BlciBkb2Vzbid0IG9wdCBpbnRvIGh0bWw1IG1vZGUuXG4gKiBJdCBhbHNvIHNlcnZlcyBhcyB0aGUgYmFzZSBjbGFzcyBmb3IgaHRtbDUgbW9kZSBmYWxsYmFjayBvbiBsZWdhY3kgYnJvd3NlcnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZSBhcHBsaWNhdGlvbiBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IGFwcEJhc2VOb0ZpbGUgYXBwbGljYXRpb24gYmFzZSBVUkwgc3RyaXBwZWQgb2YgYW55IGZpbGVuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaFByZWZpeCBoYXNoYmFuZyBwcmVmaXhcbiAqL1xuZnVuY3Rpb24gTG9jYXRpb25IYXNoYmFuZ1VybChhcHBCYXNlLCBhcHBCYXNlTm9GaWxlLCBoYXNoUHJlZml4KSB7XG5cbiAgcGFyc2VBYnNvbHV0ZVVybChhcHBCYXNlLCB0aGlzKTtcblxuXG4gIC8qKlxuICAgKiBQYXJzZSBnaXZlbiBoYXNoYmFuZyBVUkwgaW50byBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgSGFzaGJhbmcgVVJMXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkcGFyc2UgPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgd2l0aG91dEJhc2VVcmwgPSBzdHJpcEJhc2VVcmwoYXBwQmFzZSwgdXJsKSB8fCBzdHJpcEJhc2VVcmwoYXBwQmFzZU5vRmlsZSwgdXJsKTtcbiAgICB2YXIgd2l0aG91dEhhc2hVcmw7XG5cbiAgICBpZiAoIWlzVW5kZWZpbmVkKHdpdGhvdXRCYXNlVXJsKSAmJiB3aXRob3V0QmFzZVVybC5jaGFyQXQoMCkgPT09ICcjJykge1xuXG4gICAgICAvLyBUaGUgcmVzdCBvZiB0aGUgVVJMIHN0YXJ0cyB3aXRoIGEgaGFzaCBzbyB3ZSBoYXZlXG4gICAgICAvLyBnb3QgZWl0aGVyIGEgaGFzaGJhbmcgcGF0aCBvciBhIHBsYWluIGhhc2ggZnJhZ21lbnRcbiAgICAgIHdpdGhvdXRIYXNoVXJsID0gc3RyaXBCYXNlVXJsKGhhc2hQcmVmaXgsIHdpdGhvdXRCYXNlVXJsKTtcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh3aXRob3V0SGFzaFVybCkpIHtcbiAgICAgICAgLy8gVGhlcmUgd2FzIG5vIGhhc2hiYW5nIHByZWZpeCBzbyB3ZSBqdXN0IGhhdmUgYSBoYXNoIGZyYWdtZW50XG4gICAgICAgIHdpdGhvdXRIYXNoVXJsID0gd2l0aG91dEJhc2VVcmw7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlcmUgd2FzIG5vIGhhc2hiYW5nIHBhdGggbm9yIGhhc2ggZnJhZ21lbnQ6XG4gICAgICAvLyBJZiB3ZSBhcmUgaW4gSFRNTDUgbW9kZSB3ZSB1c2Ugd2hhdCBpcyBsZWZ0IGFzIHRoZSBwYXRoO1xuICAgICAgLy8gT3RoZXJ3aXNlIHdlIGlnbm9yZSB3aGF0IGlzIGxlZnRcbiAgICAgIGlmICh0aGlzLiQkaHRtbDUpIHtcbiAgICAgICAgd2l0aG91dEhhc2hVcmwgPSB3aXRob3V0QmFzZVVybDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpdGhvdXRIYXNoVXJsID0gJyc7XG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh3aXRob3V0QmFzZVVybCkpIHtcbiAgICAgICAgICBhcHBCYXNlID0gdXJsO1xuICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi8gKHRoaXMpLnJlcGxhY2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHBhcnNlQXBwVXJsKHdpdGhvdXRIYXNoVXJsLCB0aGlzLCBmYWxzZSk7XG5cbiAgICB0aGlzLiQkcGF0aCA9IHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUodGhpcy4kJHBhdGgsIHdpdGhvdXRIYXNoVXJsLCBhcHBCYXNlKTtcblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG5cbiAgICAvKlxuICAgICAqIEluIFdpbmRvd3MsIG9uIGFuIGFuY2hvciBub2RlIG9uIGRvY3VtZW50cyBsb2FkZWQgZnJvbVxuICAgICAqIHRoZSBmaWxlc3lzdGVtLCB0aGUgYnJvd3NlciB3aWxsIHJldHVybiBhIHBhdGhuYW1lXG4gICAgICogcHJlZml4ZWQgd2l0aCB0aGUgZHJpdmUgbmFtZSAoJy9DOi9wYXRoJykgd2hlbiBhXG4gICAgICogcGF0aG5hbWUgd2l0aG91dCBhIGRyaXZlIGlzIHNldDpcbiAgICAgKiAgKiBhLnNldEF0dHJpYnV0ZSgnaHJlZicsICcvZm9vJylcbiAgICAgKiAgICogYS5wYXRobmFtZSA9PT0gJy9DOi9mb28nIC8vdHJ1ZVxuICAgICAqXG4gICAgICogSW5zaWRlIG9mIEFuZ3VsYXJKUywgd2UncmUgYWx3YXlzIHVzaW5nIHBhdGhuYW1lcyB0aGF0XG4gICAgICogZG8gbm90IGluY2x1ZGUgZHJpdmUgbmFtZXMgZm9yIHJvdXRpbmcuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlV2luZG93c0RyaXZlTmFtZShwYXRoLCB1cmwsIGJhc2UpIHtcbiAgICAgIC8qXG4gICAgICBNYXRjaGVzIHBhdGhzIGZvciBmaWxlIHByb3RvY29sIG9uIHdpbmRvd3MsXG4gICAgICBzdWNoIGFzIC9DOi9mb28vYmFyLCBhbmQgY2FwdHVyZXMgb25seSAvZm9vL2Jhci5cbiAgICAgICovXG4gICAgICB2YXIgd2luZG93c0ZpbGVQYXRoRXhwID0gL15cXC9bQS1aXTooXFwvLiopLztcblxuICAgICAgdmFyIGZpcnN0UGF0aFNlZ21lbnRNYXRjaDtcblxuICAgICAgLy9HZXQgdGhlIHJlbGF0aXZlIHBhdGggZnJvbSB0aGUgaW5wdXQgVVJMLlxuICAgICAgaWYgKHN0YXJ0c1dpdGgodXJsLCBiYXNlKSkge1xuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShiYXNlLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBpbnB1dCBVUkwgaW50ZW50aW9uYWxseSBjb250YWlucyBhIGZpcnN0IHBhdGggc2VnbWVudCB0aGF0IGVuZHMgd2l0aCBhIGNvbG9uLlxuICAgICAgaWYgKHdpbmRvd3NGaWxlUGF0aEV4cC5leGVjKHVybCkpIHtcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICB9XG5cbiAgICAgIGZpcnN0UGF0aFNlZ21lbnRNYXRjaCA9IHdpbmRvd3NGaWxlUGF0aEV4cC5leGVjKHBhdGgpO1xuICAgICAgcmV0dXJuIGZpcnN0UGF0aFNlZ21lbnRNYXRjaCA/IGZpcnN0UGF0aFNlZ21lbnRNYXRjaFsxXSA6IHBhdGg7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDb21wb3NlIGhhc2hiYW5nIFVSTCBhbmQgdXBkYXRlIGBhYnNVcmxgIHByb3BlcnR5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWFyY2ggPSB0b0tleVZhbHVlKHRoaXMuJCRzZWFyY2gpLFxuICAgICAgICBoYXNoID0gdGhpcy4kJGhhc2ggPyAnIycgKyBlbmNvZGVVcmlTZWdtZW50KHRoaXMuJCRoYXNoKSA6ICcnO1xuXG4gICAgdGhpcy4kJHVybCA9IGVuY29kZVBhdGgodGhpcy4kJHBhdGgpICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIGhhc2g7XG4gICAgdGhpcy4kJGFic1VybCA9IGFwcEJhc2UgKyAodGhpcy4kJHVybCA/IGhhc2hQcmVmaXggKyB0aGlzLiQkdXJsIDogJycpO1xuXG4gICAgdGhpcy4kJHVybFVwZGF0ZWRCeUxvY2F0aW9uID0gdHJ1ZTtcbiAgfTtcblxuICB0aGlzLiQkcGFyc2VMaW5rVXJsID0gZnVuY3Rpb24odXJsLCByZWxIcmVmKSB7XG4gICAgaWYgKHN0cmlwSGFzaChhcHBCYXNlKSA9PT0gc3RyaXBIYXNoKHVybCkpIHtcbiAgICAgIHRoaXMuJCRwYXJzZSh1cmwpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbn1cblxuXG4vKipcbiAqIExvY2F0aW9uSGFzaGJhbmdVcmwgcmVwcmVzZW50cyBVUkxcbiAqIFRoaXMgb2JqZWN0IGlzIGV4cG9zZWQgYXMgJGxvY2F0aW9uIHNlcnZpY2Ugd2hlbiBodG1sNSBoaXN0b3J5IGFwaSBpcyBlbmFibGVkIGJ1dCB0aGUgYnJvd3NlclxuICogZG9lcyBub3Qgc3VwcG9ydCBpdC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcHBCYXNlIGFwcGxpY2F0aW9uIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZU5vRmlsZSBhcHBsaWNhdGlvbiBiYXNlIFVSTCBzdHJpcHBlZCBvZiBhbnkgZmlsZW5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoUHJlZml4IGhhc2hiYW5nIHByZWZpeFxuICovXG5mdW5jdGlvbiBMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybChhcHBCYXNlLCBhcHBCYXNlTm9GaWxlLCBoYXNoUHJlZml4KSB7XG4gIHRoaXMuJCRodG1sNSA9IHRydWU7XG4gIExvY2F0aW9uSGFzaGJhbmdVcmwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICB0aGlzLiQkcGFyc2VMaW5rVXJsID0gZnVuY3Rpb24odXJsLCByZWxIcmVmKSB7XG4gICAgaWYgKHJlbEhyZWYgJiYgcmVsSHJlZlswXSA9PT0gJyMnKSB7XG4gICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIGxpbmtzIHRvIGhhc2ggZnJhZ21lbnRzOlxuICAgICAgLy8ga2VlcCB0aGUgb2xkIHVybCBhbmQgb25seSByZXBsYWNlIHRoZSBoYXNoIGZyYWdtZW50XG4gICAgICB0aGlzLmhhc2gocmVsSHJlZi5zbGljZSgxKSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgcmV3cml0dGVuVXJsO1xuICAgIHZhciBhcHBVcmw7XG5cbiAgICBpZiAoYXBwQmFzZSA9PT0gc3RyaXBIYXNoKHVybCkpIHtcbiAgICAgIHJld3JpdHRlblVybCA9IHVybDtcbiAgICB9IGVsc2UgaWYgKChhcHBVcmwgPSBzdHJpcEJhc2VVcmwoYXBwQmFzZU5vRmlsZSwgdXJsKSkpIHtcbiAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2UgKyBoYXNoUHJlZml4ICsgYXBwVXJsO1xuICAgIH0gZWxzZSBpZiAoYXBwQmFzZU5vRmlsZSA9PT0gdXJsICsgJy8nKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlO1xuICAgIH1cbiAgICBpZiAocmV3cml0dGVuVXJsKSB7XG4gICAgICB0aGlzLiQkcGFyc2UocmV3cml0dGVuVXJsKTtcbiAgICB9XG4gICAgcmV0dXJuICEhcmV3cml0dGVuVXJsO1xuICB9O1xuXG4gIHRoaXMuJCRjb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlYXJjaCA9IHRvS2V5VmFsdWUodGhpcy4kJHNlYXJjaCksXG4gICAgICAgIGhhc2ggPSB0aGlzLiQkaGFzaCA/ICcjJyArIGVuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpIDogJyc7XG5cbiAgICB0aGlzLiQkdXJsID0gZW5jb2RlUGF0aCh0aGlzLiQkcGF0aCkgKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgaGFzaDtcbiAgICAvLyBpbmNsdWRlIGhhc2hQcmVmaXggaW4gJCRhYnNVcmwgd2hlbiAkJHVybCBpcyBlbXB0eSBzbyBJRTkgZG9lcyBub3QgcmVsb2FkIHBhZ2UgYmVjYXVzZSBvZiByZW1vdmFsIG9mICcjJ1xuICAgIHRoaXMuJCRhYnNVcmwgPSBhcHBCYXNlICsgaGFzaFByZWZpeCArIHRoaXMuJCR1cmw7XG5cbiAgICB0aGlzLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24gPSB0cnVlO1xuICB9O1xuXG59XG5cblxudmFyIGxvY2F0aW9uUHJvdG90eXBlID0ge1xuXG4gIC8qKlxuICAgKiBFbnN1cmUgYWJzb2x1dGUgVVJMIGlzIGluaXRpYWxpemVkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgJCRhYnNVcmw6JycsXG5cbiAgLyoqXG4gICAqIEFyZSB3ZSBpbiBodG1sNSBtb2RlP1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgJCRodG1sNTogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEhhcyBhbnkgY2hhbmdlIGJlZW4gcmVwbGFjaW5nP1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgJCRyZXBsYWNlOiBmYWxzZSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jYWJzVXJsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgb25seS5cbiAgICpcbiAgICogUmV0dXJuIGZ1bGwgVVJMIHJlcHJlc2VudGF0aW9uIHdpdGggYWxsIHNlZ21lbnRzIGVuY29kZWQgYWNjb3JkaW5nIHRvIHJ1bGVzIHNwZWNpZmllZCBpblxuICAgKiBbUkZDIDM5ODZdKGh0dHA6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzM5ODYudHh0KS5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBhYnNVcmwgPSAkbG9jYXRpb24uYWJzVXJsKCk7XG4gICAqIC8vID0+IFwiaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfSBmdWxsIFVSTFxuICAgKi9cbiAgYWJzVXJsOiBsb2NhdGlvbkdldHRlcignJCRhYnNVcmwnKSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jdXJsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiBVUkwgKGUuZy4gYC9wYXRoP2E9YiNoYXNoYCkgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBDaGFuZ2UgcGF0aCwgc2VhcmNoIGFuZCBoYXNoLCB3aGVuIGNhbGxlZCB3aXRoIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxuICAgKlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBnaXZlbiBVUkwgaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cbiAgICogdmFyIHVybCA9ICRsb2NhdGlvbi51cmwoKTtcbiAgICogLy8gPT4gXCIvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB1cmwgTmV3IFVSTCB3aXRob3V0IGJhc2UgcHJlZml4IChlLmcuIGAvcGF0aD9hPWIjaGFzaGApXG4gICAqIEByZXR1cm4ge3N0cmluZ30gdXJsXG4gICAqL1xuICB1cmw6IGZ1bmN0aW9uKHVybCkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh1cmwpKSB7XG4gICAgICByZXR1cm4gdGhpcy4kJHVybDtcbiAgICB9XG5cbiAgICB2YXIgbWF0Y2ggPSBQQVRIX01BVENILmV4ZWModXJsKTtcbiAgICBpZiAobWF0Y2hbMV0gfHwgdXJsID09PSAnJykgdGhpcy5wYXRoKGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFsxXSkpO1xuICAgIGlmIChtYXRjaFsyXSB8fCBtYXRjaFsxXSB8fCB1cmwgPT09ICcnKSB0aGlzLnNlYXJjaChtYXRjaFszXSB8fCAnJyk7XG4gICAgdGhpcy5oYXNoKG1hdGNoWzVdIHx8ICcnKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNwcm90b2NvbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIG9ubHkuXG4gICAqXG4gICAqIFJldHVybiBwcm90b2NvbCBvZiBjdXJyZW50IFVSTC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBwcm90b2NvbCA9ICRsb2NhdGlvbi5wcm90b2NvbCgpO1xuICAgKiAvLyA9PiBcImh0dHBcIlxuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfSBwcm90b2NvbCBvZiBjdXJyZW50IFVSTFxuICAgKi9cbiAgcHJvdG9jb2w6IGxvY2F0aW9uR2V0dGVyKCckJHByb3RvY29sJyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI2hvc3RcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxuICAgKlxuICAgKiBSZXR1cm4gaG9zdCBvZiBjdXJyZW50IFVSTC5cbiAgICpcbiAgICogTm90ZTogY29tcGFyZWQgdG8gdGhlIG5vbi1Bbmd1bGFySlMgdmVyc2lvbiBgbG9jYXRpb24uaG9zdGAgd2hpY2ggcmV0dXJucyBgaG9zdG5hbWU6cG9ydGAsIHRoaXMgcmV0dXJucyB0aGUgYGhvc3RuYW1lYCBwb3J0aW9uIG9ubHkuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgaG9zdCA9ICRsb2NhdGlvbi5ob3N0KCk7XG4gICAqIC8vID0+IFwiZXhhbXBsZS5jb21cIlxuICAgKlxuICAgKiAvLyBnaXZlbiBVUkwgaHR0cDovL3VzZXI6cGFzc3dvcmRAZXhhbXBsZS5jb206ODA4MC8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIGhvc3QgPSAkbG9jYXRpb24uaG9zdCgpO1xuICAgKiAvLyA9PiBcImV4YW1wbGUuY29tXCJcbiAgICogaG9zdCA9IGxvY2F0aW9uLmhvc3Q7XG4gICAqIC8vID0+IFwiZXhhbXBsZS5jb206ODA4MFwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IGhvc3Qgb2YgY3VycmVudCBVUkwuXG4gICAqL1xuICBob3N0OiBsb2NhdGlvbkdldHRlcignJCRob3N0JyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3BvcnRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxuICAgKlxuICAgKiBSZXR1cm4gcG9ydCBvZiBjdXJyZW50IFVSTC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBwb3J0ID0gJGxvY2F0aW9uLnBvcnQoKTtcbiAgICogLy8gPT4gODBcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4ge051bWJlcn0gcG9ydFxuICAgKi9cbiAgcG9ydDogbG9jYXRpb25HZXR0ZXIoJyQkcG9ydCcpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNwYXRoXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiBwYXRoIG9mIGN1cnJlbnQgVVJMIHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlci5cbiAgICpcbiAgICogQ2hhbmdlIHBhdGggd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICpcbiAgICogTm90ZTogUGF0aCBzaG91bGQgYWx3YXlzIGJlZ2luIHdpdGggZm9yd2FyZCBzbGFzaCAoLyksIHRoaXMgbWV0aG9kIHdpbGwgYWRkIHRoZSBmb3J3YXJkIHNsYXNoXG4gICAqIGlmIGl0IGlzIG1pc3NpbmcuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgcGF0aCA9ICRsb2NhdGlvbi5wYXRoKCk7XG4gICAqIC8vID0+IFwiL3NvbWUvcGF0aFwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKT19IHBhdGggTmV3IHBhdGhcbiAgICogQHJldHVybiB7KHN0cmluZ3xvYmplY3QpfSBwYXRoIGlmIGNhbGxlZCB3aXRoIG5vIHBhcmFtZXRlcnMsIG9yIGAkbG9jYXRpb25gIGlmIGNhbGxlZCB3aXRoIGEgcGFyYW1ldGVyXG4gICAqL1xuICBwYXRoOiBsb2NhdGlvbkdldHRlclNldHRlcignJCRwYXRoJywgZnVuY3Rpb24ocGF0aCkge1xuICAgIHBhdGggPSBwYXRoICE9PSBudWxsID8gcGF0aC50b1N0cmluZygpIDogJyc7XG4gICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogJy8nICsgcGF0aDtcbiAgfSksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3NlYXJjaFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gc2VhcmNoIHBhcnQgKGFzIG9iamVjdCkgb2YgY3VycmVudCBVUkwgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBDaGFuZ2Ugc2VhcmNoIHBhcnQgd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBzZWFyY2hPYmplY3QgPSAkbG9jYXRpb24uc2VhcmNoKCk7XG4gICAqIC8vID0+IHtmb286ICdiYXInLCBiYXo6ICd4b3hvJ31cbiAgICpcbiAgICogLy8gc2V0IGZvbyB0byAneWlwZWUnXG4gICAqICRsb2NhdGlvbi5zZWFyY2goJ2ZvbycsICd5aXBlZScpO1xuICAgKiAvLyAkbG9jYXRpb24uc2VhcmNoKCkgPT4ge2ZvbzogJ3lpcGVlJywgYmF6OiAneG94byd9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3QuPHN0cmluZz58T2JqZWN0LjxBcnJheS48c3RyaW5nPj59IHNlYXJjaCBOZXcgc2VhcmNoIHBhcmFtcyAtIHN0cmluZyBvclxuICAgKiBoYXNoIG9iamVjdC5cbiAgICpcbiAgICogV2hlbiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCB0aGUgbWV0aG9kIGFjdHMgYXMgYSBzZXR0ZXIsIHNldHRpbmcgdGhlIGBzZWFyY2hgIGNvbXBvbmVudFxuICAgKiBvZiBgJGxvY2F0aW9uYCB0byB0aGUgc3BlY2lmaWVkIHZhbHVlLlxuICAgKlxuICAgKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBoYXNoIG9iamVjdCBjb250YWluaW5nIGFuIGFycmF5IG9mIHZhbHVlcywgdGhlc2UgdmFsdWVzIHdpbGwgYmUgZW5jb2RlZFxuICAgKiBhcyBkdXBsaWNhdGUgc2VhcmNoIHBhcmFtZXRlcnMgaW4gdGhlIFVSTC5cbiAgICpcbiAgICogQHBhcmFtIHsoc3RyaW5nfE51bWJlcnxBcnJheTxzdHJpbmc+fGJvb2xlYW4pPX0gcGFyYW1WYWx1ZSBJZiBgc2VhcmNoYCBpcyBhIHN0cmluZyBvciBudW1iZXIsIHRoZW4gYHBhcmFtVmFsdWVgXG4gICAqIHdpbGwgb3ZlcnJpZGUgb25seSBhIHNpbmdsZSBzZWFyY2ggcHJvcGVydHkuXG4gICAqXG4gICAqIElmIGBwYXJhbVZhbHVlYCBpcyBhbiBhcnJheSwgaXQgd2lsbCBvdmVycmlkZSB0aGUgcHJvcGVydHkgb2YgdGhlIGBzZWFyY2hgIGNvbXBvbmVudCBvZlxuICAgKiBgJGxvY2F0aW9uYCBzcGVjaWZpZWQgdmlhIHRoZSBmaXJzdCBhcmd1bWVudC5cbiAgICpcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGBudWxsYCwgdGhlIHByb3BlcnR5IHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgYmUgZGVsZXRlZC5cbiAgICpcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGB0cnVlYCwgdGhlIHByb3BlcnR5IHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50IHdpbGwgYmUgYWRkZWQgd2l0aCBub1xuICAgKiB2YWx1ZSBub3IgdHJhaWxpbmcgZXF1YWwgc2lnbi5cbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fSBJZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMgcmV0dXJucyB0aGUgcGFyc2VkIGBzZWFyY2hgIG9iamVjdC4gSWYgY2FsbGVkIHdpdGhcbiAgICogb25lIG9yIG1vcmUgYXJndW1lbnRzIHJldHVybnMgYCRsb2NhdGlvbmAgb2JqZWN0IGl0c2VsZi5cbiAgICovXG4gIHNlYXJjaDogZnVuY3Rpb24oc2VhcmNoLCBwYXJhbVZhbHVlKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiB0aGlzLiQkc2VhcmNoO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBpZiAoaXNTdHJpbmcoc2VhcmNoKSB8fCBpc051bWJlcihzZWFyY2gpKSB7XG4gICAgICAgICAgc2VhcmNoID0gc2VhcmNoLnRvU3RyaW5nKCk7XG4gICAgICAgICAgdGhpcy4kJHNlYXJjaCA9IHBhcnNlS2V5VmFsdWUoc2VhcmNoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdChzZWFyY2gpKSB7XG4gICAgICAgICAgc2VhcmNoID0gY29weShzZWFyY2gsIHt9KTtcbiAgICAgICAgICAvLyByZW1vdmUgb2JqZWN0IHVuZGVmaW5lZCBvciBudWxsIHByb3BlcnRpZXNcbiAgICAgICAgICBmb3JFYWNoKHNlYXJjaCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIGRlbGV0ZSBzZWFyY2hba2V5XTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRoaXMuJCRzZWFyY2ggPSBzZWFyY2g7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgJGxvY2F0aW9uTWluRXJyKCdpc3JjaGFyZycsXG4gICAgICAgICAgICAgICdUaGUgZmlyc3QgYXJndW1lbnQgb2YgdGhlIGAkbG9jYXRpb24jc2VhcmNoKClgIGNhbGwgbXVzdCBiZSBhIHN0cmluZyBvciBhbiBvYmplY3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaXNVbmRlZmluZWQocGFyYW1WYWx1ZSkgfHwgcGFyYW1WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLiQkc2VhcmNoW3NlYXJjaF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kJHNlYXJjaFtzZWFyY2hdID0gcGFyYW1WYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI2hhc2hcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciAvIHNldHRlci5cbiAgICpcbiAgICogUmV0dXJucyB0aGUgaGFzaCBmcmFnbWVudCB3aGVuIGNhbGxlZCB3aXRob3V0IGFueSBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKiBDaGFuZ2VzIHRoZSBoYXNoIGZyYWdtZW50IHdoZW4gY2FsbGVkIHdpdGggYSBwYXJhbWV0ZXIgYW5kIHJldHVybnMgYCRsb2NhdGlvbmAuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94byNoYXNoVmFsdWVcbiAgICogdmFyIGhhc2ggPSAkbG9jYXRpb24uaGFzaCgpO1xuICAgKiAvLyA9PiBcImhhc2hWYWx1ZVwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKT19IGhhc2ggTmV3IGhhc2ggZnJhZ21lbnRcbiAgICogQHJldHVybiB7c3RyaW5nfSBoYXNoXG4gICAqL1xuICBoYXNoOiBsb2NhdGlvbkdldHRlclNldHRlcignJCRoYXNoJywgZnVuY3Rpb24oaGFzaCkge1xuICAgIHJldHVybiBoYXNoICE9PSBudWxsID8gaGFzaC50b1N0cmluZygpIDogJyc7XG4gIH0pLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNyZXBsYWNlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBJZiBjYWxsZWQsIGFsbCBjaGFuZ2VzIHRvICRsb2NhdGlvbiBkdXJpbmcgdGhlIGN1cnJlbnQgYCRkaWdlc3RgIHdpbGwgcmVwbGFjZSB0aGUgY3VycmVudCBoaXN0b3J5XG4gICAqIHJlY29yZCwgaW5zdGVhZCBvZiBhZGRpbmcgYSBuZXcgb25lLlxuICAgKi9cbiAgcmVwbGFjZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kJHJlcGxhY2UgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59O1xuXG5mb3JFYWNoKFtMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybCwgTG9jYXRpb25IYXNoYmFuZ1VybCwgTG9jYXRpb25IdG1sNVVybF0sIGZ1bmN0aW9uKExvY2F0aW9uKSB7XG4gIExvY2F0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUobG9jYXRpb25Qcm90b3R5cGUpO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNzdGF0ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gdGhlIGhpc3Rvcnkgc3RhdGUgb2JqZWN0IHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlci5cbiAgICpcbiAgICogQ2hhbmdlIHRoZSBoaXN0b3J5IHN0YXRlIG9iamVjdCB3aGVuIGNhbGxlZCB3aXRoIG9uZSBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICogVGhlIHN0YXRlIG9iamVjdCBpcyBsYXRlciBwYXNzZWQgdG8gYHB1c2hTdGF0ZWAgb3IgYHJlcGxhY2VTdGF0ZWAuXG4gICAqXG4gICAqIE5PVEU6IFRoaXMgbWV0aG9kIGlzIHN1cHBvcnRlZCBvbmx5IGluIEhUTUw1IG1vZGUgYW5kIG9ubHkgaW4gYnJvd3NlcnMgc3VwcG9ydGluZ1xuICAgKiB0aGUgSFRNTDUgSGlzdG9yeSBBUEkgKGkuZS4gbWV0aG9kcyBgcHVzaFN0YXRlYCBhbmQgYHJlcGxhY2VTdGF0ZWApLiBJZiB5b3UgbmVlZCB0byBzdXBwb3J0XG4gICAqIG9sZGVyIGJyb3dzZXJzIChsaWtlIElFOSBvciBBbmRyb2lkIDwgNC4wKSwgZG9uJ3QgdXNlIHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdD19IHN0YXRlIFN0YXRlIG9iamVjdCBmb3IgcHVzaFN0YXRlIG9yIHJlcGxhY2VTdGF0ZVxuICAgKiBAcmV0dXJuIHtvYmplY3R9IHN0YXRlXG4gICAqL1xuICBMb2NhdGlvbi5wcm90b3R5cGUuc3RhdGUgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMuJCRzdGF0ZTtcbiAgICB9XG5cbiAgICBpZiAoTG9jYXRpb24gIT09IExvY2F0aW9uSHRtbDVVcmwgfHwgIXRoaXMuJCRodG1sNSkge1xuICAgICAgdGhyb3cgJGxvY2F0aW9uTWluRXJyKCdub3N0YXRlJywgJ0hpc3RvcnkgQVBJIHN0YXRlIHN1cHBvcnQgaXMgYXZhaWxhYmxlIG9ubHkgJyArXG4gICAgICAgICdpbiBIVE1MNSBtb2RlIGFuZCBvbmx5IGluIGJyb3dzZXJzIHN1cHBvcnRpbmcgSFRNTDUgSGlzdG9yeSBBUEknKTtcbiAgICB9XG4gICAgLy8gVGhlIHVzZXIgbWlnaHQgbW9kaWZ5IGBzdGF0ZU9iamVjdGAgYWZ0ZXIgaW52b2tpbmcgYCRsb2NhdGlvbi5zdGF0ZShzdGF0ZU9iamVjdClgXG4gICAgLy8gYnV0IHdlJ3JlIGNoYW5naW5nIHRoZSAkJHN0YXRlIHJlZmVyZW5jZSB0byAkYnJvd3Nlci5zdGF0ZSgpIGR1cmluZyB0aGUgJGRpZ2VzdFxuICAgIC8vIHNvIHRoZSBtb2RpZmljYXRpb24gd2luZG93IGlzIG5hcnJvdy5cbiAgICB0aGlzLiQkc3RhdGUgPSBpc1VuZGVmaW5lZChzdGF0ZSkgPyBudWxsIDogc3RhdGU7XG4gICAgdGhpcy4kJHVybFVwZGF0ZWRCeUxvY2F0aW9uID0gdHJ1ZTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xufSk7XG5cblxuZnVuY3Rpb24gbG9jYXRpb25HZXR0ZXIocHJvcGVydHkpIHtcbiAgcmV0dXJuIC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpc1twcm9wZXJ0eV07XG4gIH07XG59XG5cblxuZnVuY3Rpb24gbG9jYXRpb25HZXR0ZXJTZXR0ZXIocHJvcGVydHksIHByZXByb2Nlc3MpIHtcbiAgcmV0dXJuIC8qKiBAdGhpcyAqLyBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB0aGlzW3Byb3BlcnR5XTtcbiAgICB9XG5cbiAgICB0aGlzW3Byb3BlcnR5XSA9IHByZXByb2Nlc3ModmFsdWUpO1xuICAgIHRoaXMuJCRjb21wb3NlKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkbG9jYXRpb25cbiAqXG4gKiBAcmVxdWlyZXMgJHJvb3RFbGVtZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgJGxvY2F0aW9uIHNlcnZpY2UgcGFyc2VzIHRoZSBVUkwgaW4gdGhlIGJyb3dzZXIgYWRkcmVzcyBiYXIgKGJhc2VkIG9uIHRoZVxuICogW3dpbmRvdy5sb2NhdGlvbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vd2luZG93LmxvY2F0aW9uKSkgYW5kIG1ha2VzIHRoZSBVUkxcbiAqIGF2YWlsYWJsZSB0byB5b3VyIGFwcGxpY2F0aW9uLiBDaGFuZ2VzIHRvIHRoZSBVUkwgaW4gdGhlIGFkZHJlc3MgYmFyIGFyZSByZWZsZWN0ZWQgaW50b1xuICogJGxvY2F0aW9uIHNlcnZpY2UgYW5kIGNoYW5nZXMgdG8gJGxvY2F0aW9uIGFyZSByZWZsZWN0ZWQgaW50byB0aGUgYnJvd3NlciBhZGRyZXNzIGJhci5cbiAqXG4gKiAqKlRoZSAkbG9jYXRpb24gc2VydmljZToqKlxuICpcbiAqIC0gRXhwb3NlcyB0aGUgY3VycmVudCBVUkwgaW4gdGhlIGJyb3dzZXIgYWRkcmVzcyBiYXIsIHNvIHlvdSBjYW5cbiAqICAgLSBXYXRjaCBhbmQgb2JzZXJ2ZSB0aGUgVVJMLlxuICogICAtIENoYW5nZSB0aGUgVVJMLlxuICogLSBTeW5jaHJvbml6ZXMgdGhlIFVSTCB3aXRoIHRoZSBicm93c2VyIHdoZW4gdGhlIHVzZXJcbiAqICAgLSBDaGFuZ2VzIHRoZSBhZGRyZXNzIGJhci5cbiAqICAgLSBDbGlja3MgdGhlIGJhY2sgb3IgZm9yd2FyZCBidXR0b24gKG9yIGNsaWNrcyBhIEhpc3RvcnkgbGluaykuXG4gKiAgIC0gQ2xpY2tzIG9uIGEgbGluay5cbiAqIC0gUmVwcmVzZW50cyB0aGUgVVJMIG9iamVjdCBhcyBhIHNldCBvZiBtZXRob2RzIChwcm90b2NvbCwgaG9zdCwgcG9ydCwgcGF0aCwgc2VhcmNoLCBoYXNoKS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWUge0BsaW5rIGd1aWRlLyRsb2NhdGlvbiBEZXZlbG9wZXIgR3VpZGU6IFVzaW5nICRsb2NhdGlvbn1cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2UgdGhlIGAkbG9jYXRpb25Qcm92aWRlcmAgdG8gY29uZmlndXJlIGhvdyB0aGUgYXBwbGljYXRpb24gZGVlcCBsaW5raW5nIHBhdGhzIGFyZSBzdG9yZWQuXG4gKi9cbmZ1bmN0aW9uICRMb2NhdGlvblByb3ZpZGVyKCkge1xuICB2YXIgaGFzaFByZWZpeCA9ICchJyxcbiAgICAgIGh0bWw1TW9kZSA9IHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgIHJlcXVpcmVCYXNlOiB0cnVlLFxuICAgICAgICByZXdyaXRlTGlua3M6IHRydWVcbiAgICAgIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXIjaGFzaFByZWZpeFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBwcmVmaXggaXMgYCchJ2AuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcHJlZml4IFByZWZpeCBmb3IgaGFzaCBwYXJ0IChjb250YWluaW5nIHBhdGggYW5kIHNlYXJjaClcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcbiAgICovXG4gIHRoaXMuaGFzaFByZWZpeCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuICAgIGlmIChpc0RlZmluZWQocHJlZml4KSkge1xuICAgICAgaGFzaFByZWZpeCA9IHByZWZpeDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaGFzaFByZWZpeDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uUHJvdmlkZXIjaHRtbDVNb2RlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBAcGFyYW0geyhib29sZWFufE9iamVjdCk9fSBtb2RlIElmIGJvb2xlYW4sIHNldHMgYGh0bWw1TW9kZS5lbmFibGVkYCB0byB2YWx1ZS5cbiAgICogICBJZiBvYmplY3QsIHNldHMgYGVuYWJsZWRgLCBgcmVxdWlyZUJhc2VgIGFuZCBgcmV3cml0ZUxpbmtzYCB0byByZXNwZWN0aXZlIHZhbHVlcy4gU3VwcG9ydGVkXG4gICAqICAgcHJvcGVydGllczpcbiAgICogICAtICoqZW5hYmxlZCoqIOKAkyBge2Jvb2xlYW59YCDigJMgKGRlZmF1bHQ6IGZhbHNlKSBJZiB0cnVlLCB3aWxsIHJlbHkgb24gYGhpc3RvcnkucHVzaFN0YXRlYCB0b1xuICAgKiAgICAgY2hhbmdlIHVybHMgd2hlcmUgc3VwcG9ydGVkLiBXaWxsIGZhbGwgYmFjayB0byBoYXNoLXByZWZpeGVkIHBhdGhzIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90XG4gICAqICAgICBzdXBwb3J0IGBwdXNoU3RhdGVgLlxuICAgKiAgIC0gKipyZXF1aXJlQmFzZSoqIC0gYHtib29sZWFufWAgLSAoZGVmYXVsdDogYHRydWVgKSBXaGVuIGh0bWw1TW9kZSBpcyBlbmFibGVkLCBzcGVjaWZpZXNcbiAgICogICAgIHdoZXRoZXIgb3Igbm90IGEgPGJhc2U+IHRhZyBpcyByZXF1aXJlZCB0byBiZSBwcmVzZW50LiBJZiBgZW5hYmxlZGAgYW5kIGByZXF1aXJlQmFzZWAgYXJlXG4gICAqICAgICB0cnVlLCBhbmQgYSBiYXNlIHRhZyBpcyBub3QgcHJlc2VudCwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24gd2hlbiBgJGxvY2F0aW9uYCBpcyBpbmplY3RlZC5cbiAgICogICAgIFNlZSB0aGUge0BsaW5rIGd1aWRlLyRsb2NhdGlvbiAkbG9jYXRpb24gZ3VpZGUgZm9yIG1vcmUgaW5mb3JtYXRpb259XG4gICAqICAgLSAqKnJld3JpdGVMaW5rcyoqIC0gYHtib29sZWFufHN0cmluZ31gIC0gKGRlZmF1bHQ6IGB0cnVlYCkgV2hlbiBodG1sNU1vZGUgaXMgZW5hYmxlZCxcbiAgICogICAgIGVuYWJsZXMvZGlzYWJsZXMgVVJMIHJld3JpdGluZyBmb3IgcmVsYXRpdmUgbGlua3MuIElmIHNldCB0byBhIHN0cmluZywgVVJMIHJld3JpdGluZyB3aWxsXG4gICAqICAgICBvbmx5IGhhcHBlbiBvbiBsaW5rcyB3aXRoIGFuIGF0dHJpYnV0ZSB0aGF0IG1hdGNoZXMgdGhlIGdpdmVuIHN0cmluZy4gRm9yIGV4YW1wbGUsIGlmIHNldFxuICAgKiAgICAgdG8gYCdpbnRlcm5hbC1saW5rJ2AsIHRoZW4gdGhlIFVSTCB3aWxsIG9ubHkgYmUgcmV3cml0dGVuIGZvciBgPGEgaW50ZXJuYWwtbGluaz5gIGxpbmtzLlxuICAgKiAgICAgTm90ZSB0aGF0IFthdHRyaWJ1dGUgbmFtZSBub3JtYWxpemF0aW9uXShndWlkZS9kaXJlY3RpdmUjbm9ybWFsaXphdGlvbikgZG9lcyBub3QgYXBwbHlcbiAgICogICAgIGhlcmUsIHNvIGAnaW50ZXJuYWxMaW5rJ2Agd2lsbCAqKm5vdCoqIG1hdGNoIGAnaW50ZXJuYWwtbGluaydgLlxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBodG1sNU1vZGUgb2JqZWN0IGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXG4gICAqL1xuICB0aGlzLmh0bWw1TW9kZSA9IGZ1bmN0aW9uKG1vZGUpIHtcbiAgICBpZiAoaXNCb29sZWFuKG1vZGUpKSB7XG4gICAgICBodG1sNU1vZGUuZW5hYmxlZCA9IG1vZGU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG1vZGUpKSB7XG5cbiAgICAgIGlmIChpc0Jvb2xlYW4obW9kZS5lbmFibGVkKSkge1xuICAgICAgICBodG1sNU1vZGUuZW5hYmxlZCA9IG1vZGUuZW5hYmxlZDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQm9vbGVhbihtb2RlLnJlcXVpcmVCYXNlKSkge1xuICAgICAgICBodG1sNU1vZGUucmVxdWlyZUJhc2UgPSBtb2RlLnJlcXVpcmVCYXNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNCb29sZWFuKG1vZGUucmV3cml0ZUxpbmtzKSB8fCBpc1N0cmluZyhtb2RlLnJld3JpdGVMaW5rcykpIHtcbiAgICAgICAgaHRtbDVNb2RlLnJld3JpdGVMaW5rcyA9IG1vZGUucmV3cml0ZUxpbmtzO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGh0bWw1TW9kZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBldmVudFxuICAgKiBAbmFtZSAkbG9jYXRpb24jJGxvY2F0aW9uQ2hhbmdlU3RhcnRcbiAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnJvYWRjYXN0ZWQgYmVmb3JlIGEgVVJMIHdpbGwgY2hhbmdlLlxuICAgKlxuICAgKiBUaGlzIGNoYW5nZSBjYW4gYmUgcHJldmVudGVkIGJ5IGNhbGxpbmdcbiAgICogYHByZXZlbnREZWZhdWx0YCBtZXRob2Qgb2YgdGhlIGV2ZW50LiBTZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSBmb3IgbW9yZVxuICAgKiBkZXRhaWxzIGFib3V0IGV2ZW50IG9iamVjdC4gVXBvbiBzdWNjZXNzZnVsIGNoYW5nZVxuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uIyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MgJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc30gaXMgZmlyZWQuXG4gICAqXG4gICAqIFRoZSBgbmV3U3RhdGVgIGFuZCBgb2xkU3RhdGVgIHBhcmFtZXRlcnMgbWF5IGJlIGRlZmluZWQgb25seSBpbiBIVE1MNSBtb2RlIGFuZCB3aGVuXG4gICAqIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBIVE1MNSBIaXN0b3J5IEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXJsIE5ldyBVUkxcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRVcmwgVVJMIHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZXdTdGF0ZSBOZXcgaGlzdG9yeSBzdGF0ZSBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRTdGF0ZSBIaXN0b3J5IHN0YXRlIG9iamVjdCB0aGF0IHdhcyBiZWZvcmUgaXQgd2FzIGNoYW5nZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgZXZlbnRcbiAgICogQG5hbWUgJGxvY2F0aW9uIyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcbiAgICogQGV2ZW50VHlwZSBicm9hZGNhc3Qgb24gcm9vdCBzY29wZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnJvYWRjYXN0ZWQgYWZ0ZXIgYSBVUkwgd2FzIGNoYW5nZWQuXG4gICAqXG4gICAqIFRoZSBgbmV3U3RhdGVgIGFuZCBgb2xkU3RhdGVgIHBhcmFtZXRlcnMgbWF5IGJlIGRlZmluZWQgb25seSBpbiBIVE1MNSBtb2RlIGFuZCB3aGVuXG4gICAqIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBIVE1MNSBIaXN0b3J5IEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VXJsIE5ldyBVUkxcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRVcmwgVVJMIHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZXdTdGF0ZSBOZXcgaGlzdG9yeSBzdGF0ZSBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvbGRTdGF0ZSBIaXN0b3J5IHN0YXRlIG9iamVjdCB0aGF0IHdhcyBiZWZvcmUgaXQgd2FzIGNoYW5nZWQuXG4gICAqL1xuXG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckc25pZmZlcicsICckcm9vdEVsZW1lbnQnLCAnJHdpbmRvdycsXG4gICAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAkYnJvd3NlciwgJHNuaWZmZXIsICRyb290RWxlbWVudCwgJHdpbmRvdykge1xuICAgIHZhciAkbG9jYXRpb24sXG4gICAgICAgIExvY2F0aW9uTW9kZSxcbiAgICAgICAgYmFzZUhyZWYgPSAkYnJvd3Nlci5iYXNlSHJlZigpLCAvLyBpZiBiYXNlW2hyZWZdIGlzIHVuZGVmaW5lZCwgaXQgZGVmYXVsdHMgdG8gJydcbiAgICAgICAgaW5pdGlhbFVybCA9ICRicm93c2VyLnVybCgpLFxuICAgICAgICBhcHBCYXNlO1xuXG4gICAgaWYgKGh0bWw1TW9kZS5lbmFibGVkKSB7XG4gICAgICBpZiAoIWJhc2VIcmVmICYmIGh0bWw1TW9kZS5yZXF1aXJlQmFzZSkge1xuICAgICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ25vYmFzZScsXG4gICAgICAgICAgJyRsb2NhdGlvbiBpbiBIVE1MNSBtb2RlIHJlcXVpcmVzIGEgPGJhc2U+IHRhZyB0byBiZSBwcmVzZW50IScpO1xuICAgICAgfVxuICAgICAgYXBwQmFzZSA9IHNlcnZlckJhc2UoaW5pdGlhbFVybCkgKyAoYmFzZUhyZWYgfHwgJy8nKTtcbiAgICAgIExvY2F0aW9uTW9kZSA9ICRzbmlmZmVyLmhpc3RvcnkgPyBMb2NhdGlvbkh0bWw1VXJsIDogTG9jYXRpb25IYXNoYmFuZ0luSHRtbDVVcmw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcEJhc2UgPSBzdHJpcEhhc2goaW5pdGlhbFVybCk7XG4gICAgICBMb2NhdGlvbk1vZGUgPSBMb2NhdGlvbkhhc2hiYW5nVXJsO1xuICAgIH1cbiAgICB2YXIgYXBwQmFzZU5vRmlsZSA9IHN0cmlwRmlsZShhcHBCYXNlKTtcblxuICAgICRsb2NhdGlvbiA9IG5ldyBMb2NhdGlvbk1vZGUoYXBwQmFzZSwgYXBwQmFzZU5vRmlsZSwgJyMnICsgaGFzaFByZWZpeCk7XG4gICAgJGxvY2F0aW9uLiQkcGFyc2VMaW5rVXJsKGluaXRpYWxVcmwsIGluaXRpYWxVcmwpO1xuXG4gICAgJGxvY2F0aW9uLiQkc3RhdGUgPSAkYnJvd3Nlci5zdGF0ZSgpO1xuXG4gICAgdmFyIElHTk9SRV9VUklfUkVHRVhQID0gL15cXHMqKGphdmFzY3JpcHR8bWFpbHRvKTovaTtcblxuICAgIGZ1bmN0aW9uIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sodXJsLCByZXBsYWNlLCBzdGF0ZSkge1xuICAgICAgdmFyIG9sZFVybCA9ICRsb2NhdGlvbi51cmwoKTtcbiAgICAgIHZhciBvbGRTdGF0ZSA9ICRsb2NhdGlvbi4kJHN0YXRlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgJGJyb3dzZXIudXJsKHVybCwgcmVwbGFjZSwgc3RhdGUpO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSAkbG9jYXRpb24uc3RhdGUoKSByZXR1cm5zIHJlZmVyZW50aWFsbHkgaWRlbnRpY2FsIChub3QganVzdCBkZWVwbHkgZXF1YWwpXG4gICAgICAgIC8vIHN0YXRlIG9iamVjdDsgdGhpcyBtYWtlcyBwb3NzaWJsZSBxdWljayBjaGVja2luZyBpZiB0aGUgc3RhdGUgY2hhbmdlZCBpbiB0aGUgZGlnZXN0XG4gICAgICAgIC8vIGxvb3AuIENoZWNraW5nIGRlZXAgZXF1YWxpdHkgd291bGQgYmUgdG9vIGV4cGVuc2l2ZS5cbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSAkYnJvd3Nlci5zdGF0ZSgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBSZXN0b3JlIG9sZCB2YWx1ZXMgaWYgcHVzaFN0YXRlIGZhaWxzXG4gICAgICAgICRsb2NhdGlvbi51cmwob2xkVXJsKTtcbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSBvbGRTdGF0ZTtcblxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cblxuICAgICRyb290RWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgdmFyIHJld3JpdGVMaW5rcyA9IGh0bWw1TW9kZS5yZXdyaXRlTGlua3M7XG4gICAgICAvLyBUT0RPKHZvanRhKTogcmV3cml0ZSBsaW5rIHdoZW4gb3BlbmluZyBpbiBuZXcgdGFiL3dpbmRvdyAoaW4gbGVnYWN5IGJyb3dzZXIpXG4gICAgICAvLyBjdXJyZW50bHkgd2Ugb3BlbiBuaWNlIHVybCBsaW5rIGFuZCByZWRpcmVjdCB0aGVuXG5cbiAgICAgIGlmICghcmV3cml0ZUxpbmtzIHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5zaGlmdEtleSB8fCBldmVudC53aGljaCA9PT0gMiB8fCBldmVudC5idXR0b24gPT09IDIpIHJldHVybjtcblxuICAgICAgdmFyIGVsbSA9IGpxTGl0ZShldmVudC50YXJnZXQpO1xuXG4gICAgICAvLyB0cmF2ZXJzZSB0aGUgRE9NIHVwIHRvIGZpbmQgZmlyc3QgQSB0YWdcbiAgICAgIHdoaWxlIChub2RlTmFtZV8oZWxtWzBdKSAhPT0gJ2EnKSB7XG4gICAgICAgIC8vIGlnbm9yZSByZXdyaXRpbmcgaWYgbm8gQSB0YWcgKHJlYWNoZWQgcm9vdCBlbGVtZW50LCBvciBubyBwYXJlbnQgLSByZW1vdmVkIGZyb20gZG9jdW1lbnQpXG4gICAgICAgIGlmIChlbG1bMF0gPT09ICRyb290RWxlbWVudFswXSB8fCAhKGVsbSA9IGVsbS5wYXJlbnQoKSlbMF0pIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzU3RyaW5nKHJld3JpdGVMaW5rcykgJiYgaXNVbmRlZmluZWQoZWxtLmF0dHIocmV3cml0ZUxpbmtzKSkpIHJldHVybjtcblxuICAgICAgdmFyIGFic0hyZWYgPSBlbG0ucHJvcCgnaHJlZicpO1xuICAgICAgLy8gZ2V0IHRoZSBhY3R1YWwgaHJlZiBhdHRyaWJ1dGUgLSBzZWVcbiAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kZDM0NzE0OCh2PXZzLjg1KS5hc3B4XG4gICAgICB2YXIgcmVsSHJlZiA9IGVsbS5hdHRyKCdocmVmJykgfHwgZWxtLmF0dHIoJ3hsaW5rOmhyZWYnKTtcblxuICAgICAgaWYgKGlzT2JqZWN0KGFic0hyZWYpICYmIGFic0hyZWYudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJykge1xuICAgICAgICAvLyBTVkdBbmltYXRlZFN0cmluZy5hbmltVmFsIHNob3VsZCBiZSBpZGVudGljYWwgdG8gU1ZHQW5pbWF0ZWRTdHJpbmcuYmFzZVZhbCwgdW5sZXNzIGR1cmluZ1xuICAgICAgICAvLyBhbiBhbmltYXRpb24uXG4gICAgICAgIGFic0hyZWYgPSB1cmxSZXNvbHZlKGFic0hyZWYuYW5pbVZhbCkuaHJlZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWdub3JlIHdoZW4gdXJsIGlzIHN0YXJ0ZWQgd2l0aCBqYXZhc2NyaXB0OiBvciBtYWlsdG86XG4gICAgICBpZiAoSUdOT1JFX1VSSV9SRUdFWFAudGVzdChhYnNIcmVmKSkgcmV0dXJuO1xuXG4gICAgICBpZiAoYWJzSHJlZiAmJiAhZWxtLmF0dHIoJ3RhcmdldCcpICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICBpZiAoJGxvY2F0aW9uLiQkcGFyc2VMaW5rVXJsKGFic0hyZWYsIHJlbEhyZWYpKSB7XG4gICAgICAgICAgLy8gV2UgZG8gYSBwcmV2ZW50RGVmYXVsdCBmb3IgYWxsIHVybHMgdGhhdCBhcmUgcGFydCBvZiB0aGUgQW5ndWxhckpTIGFwcGxpY2F0aW9uLFxuICAgICAgICAgIC8vIGluIGh0bWw1bW9kZSBhbmQgYWxzbyB3aXRob3V0LCBzbyB0aGF0IHdlIGFyZSBhYmxlIHRvIGFib3J0IG5hdmlnYXRpb24gd2l0aG91dFxuICAgICAgICAgIC8vIGdldHRpbmcgZG91YmxlIGVudHJpZXMgaW4gdGhlIGxvY2F0aW9uIGhpc3RvcnkuXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAvLyB1cGRhdGUgbG9jYXRpb24gbWFudWFsbHlcbiAgICAgICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9PSAkYnJvd3Nlci51cmwoKSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgLy8gcmV3cml0ZSBoYXNoYmFuZyB1cmwgPD4gaHRtbDUgdXJsXG4gICAgaWYgKHRyaW1FbXB0eUhhc2goJGxvY2F0aW9uLmFic1VybCgpKSAhPT0gdHJpbUVtcHR5SGFzaChpbml0aWFsVXJsKSkge1xuICAgICAgJGJyb3dzZXIudXJsKCRsb2NhdGlvbi5hYnNVcmwoKSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdmFyIGluaXRpYWxpemluZyA9IHRydWU7XG5cbiAgICAvLyB1cGRhdGUgJGxvY2F0aW9uIHdoZW4gJGJyb3dzZXIgdXJsIGNoYW5nZXNcbiAgICAkYnJvd3Nlci5vblVybENoYW5nZShmdW5jdGlvbihuZXdVcmwsIG5ld1N0YXRlKSB7XG5cbiAgICAgIGlmICghc3RhcnRzV2l0aChuZXdVcmwsIGFwcEJhc2VOb0ZpbGUpKSB7XG4gICAgICAgIC8vIElmIHdlIGFyZSBuYXZpZ2F0aW5nIG91dHNpZGUgb2YgdGhlIGFwcCB0aGVuIGZvcmNlIGEgcmVsb2FkXG4gICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5ld1VybDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvbGRVcmwgPSAkbG9jYXRpb24uYWJzVXJsKCk7XG4gICAgICAgIHZhciBvbGRTdGF0ZSA9ICRsb2NhdGlvbi4kJHN0YXRlO1xuICAgICAgICB2YXIgZGVmYXVsdFByZXZlbnRlZDtcbiAgICAgICAgbmV3VXJsID0gdHJpbUVtcHR5SGFzaChuZXdVcmwpO1xuICAgICAgICAkbG9jYXRpb24uJCRwYXJzZShuZXdVcmwpO1xuICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9IG5ld1N0YXRlO1xuXG4gICAgICAgIGRlZmF1bHRQcmV2ZW50ZWQgPSAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgbmV3VXJsLCBvbGRVcmwsXG4gICAgICAgICAgICBuZXdTdGF0ZSwgb2xkU3RhdGUpLmRlZmF1bHRQcmV2ZW50ZWQ7XG5cbiAgICAgICAgLy8gaWYgdGhlIGxvY2F0aW9uIHdhcyBjaGFuZ2VkIGJ5IGEgYCRsb2NhdGlvbkNoYW5nZVN0YXJ0YCBoYW5kbGVyIHRoZW4gc3RvcFxuICAgICAgICAvLyBwcm9jZXNzaW5nIHRoaXMgbG9jYXRpb24gY2hhbmdlXG4gICAgICAgIGlmICgkbG9jYXRpb24uYWJzVXJsKCkgIT09IG5ld1VybCkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTtcbiAgICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9IG9sZFN0YXRlO1xuICAgICAgICAgIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sob2xkVXJsLCBmYWxzZSwgb2xkU3RhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluaXRpYWxpemluZyA9IGZhbHNlO1xuICAgICAgICAgIGFmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsLCBvbGRTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICAgIH0pO1xuXG4gICAgLy8gdXBkYXRlIGJyb3dzZXJcbiAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiAkbG9jYXRpb25XYXRjaCgpIHtcbiAgICAgIGlmIChpbml0aWFsaXppbmcgfHwgJGxvY2F0aW9uLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24pIHtcbiAgICAgICAgJGxvY2F0aW9uLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24gPSBmYWxzZTtcblxuICAgICAgICB2YXIgb2xkVXJsID0gdHJpbUVtcHR5SGFzaCgkYnJvd3Nlci51cmwoKSk7XG4gICAgICAgIHZhciBuZXdVcmwgPSB0cmltRW1wdHlIYXNoKCRsb2NhdGlvbi5hYnNVcmwoKSk7XG4gICAgICAgIHZhciBvbGRTdGF0ZSA9ICRicm93c2VyLnN0YXRlKCk7XG4gICAgICAgIHZhciBjdXJyZW50UmVwbGFjZSA9ICRsb2NhdGlvbi4kJHJlcGxhY2U7XG4gICAgICAgIHZhciB1cmxPclN0YXRlQ2hhbmdlZCA9IG9sZFVybCAhPT0gbmV3VXJsIHx8XG4gICAgICAgICAgKCRsb2NhdGlvbi4kJGh0bWw1ICYmICRzbmlmZmVyLmhpc3RvcnkgJiYgb2xkU3RhdGUgIT09ICRsb2NhdGlvbi4kJHN0YXRlKTtcblxuICAgICAgICBpZiAoaW5pdGlhbGl6aW5nIHx8IHVybE9yU3RhdGVDaGFuZ2VkKSB7XG4gICAgICAgICAgaW5pdGlhbGl6aW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbmV3VXJsID0gJGxvY2F0aW9uLmFic1VybCgpO1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRQcmV2ZW50ZWQgPSAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgbmV3VXJsLCBvbGRVcmwsXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUsIG9sZFN0YXRlKS5kZWZhdWx0UHJldmVudGVkO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGUgbG9jYXRpb24gd2FzIGNoYW5nZWQgYnkgYSBgJGxvY2F0aW9uQ2hhbmdlU3RhcnRgIGhhbmRsZXIgdGhlbiBzdG9wXG4gICAgICAgICAgICAvLyBwcm9jZXNzaW5nIHRoaXMgbG9jYXRpb24gY2hhbmdlXG4gICAgICAgICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9PSBuZXdVcmwpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTtcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSBvbGRTdGF0ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICh1cmxPclN0YXRlQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sobmV3VXJsLCBjdXJyZW50UmVwbGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFN0YXRlID09PSAkbG9jYXRpb24uJCRzdGF0ZSA/IG51bGwgOiAkbG9jYXRpb24uJCRzdGF0ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwsIG9sZFN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkbG9jYXRpb24uJCRyZXBsYWNlID0gZmFsc2U7XG5cbiAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gcmV0dXJuIGFueXRoaW5nIGJlY2F1c2UgJGV2YWxBc3luYyB3aWxsIG1ha2UgdGhlIGRpZ2VzdCBsb29wIGRpcnR5IHdoZW5cbiAgICAgIC8vIHRoZXJlIGlzIGEgY2hhbmdlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gJGxvY2F0aW9uO1xuXG4gICAgZnVuY3Rpb24gYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwsIG9sZFN0YXRlKSB7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCAkbG9jYXRpb24uYWJzVXJsKCksIG9sZFVybCxcbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUsIG9sZFN0YXRlKTtcbiAgICB9XG59XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGxvZ1xuICogQHJlcXVpcmVzICR3aW5kb3dcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNpbXBsZSBzZXJ2aWNlIGZvciBsb2dnaW5nLiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIHNhZmVseSB3cml0ZXMgdGhlIG1lc3NhZ2VcbiAqIGludG8gdGhlIGJyb3dzZXIncyBjb25zb2xlIChpZiBwcmVzZW50KS5cbiAqXG4gKiBUaGUgbWFpbiBwdXJwb3NlIG9mIHRoaXMgc2VydmljZSBpcyB0byBzaW1wbGlmeSBkZWJ1Z2dpbmcgYW5kIHRyb3VibGVzaG9vdGluZy5cbiAqXG4gKiBUbyByZXZlYWwgdGhlIGxvY2F0aW9uIG9mIHRoZSBjYWxscyB0byBgJGxvZ2AgaW4gdGhlIEphdmFTY3JpcHQgY29uc29sZSxcbiAqIHlvdSBjYW4gXCJibGFja2JveFwiIHRoZSBBbmd1bGFySlMgc291cmNlIGluIHlvdXIgYnJvd3NlcjpcbiAqXG4gKiBbTW96aWxsYSBkZXNjcmlwdGlvbiBvZiBibGFja2JveGluZ10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9EZWJ1Z2dlci9Ib3dfdG8vQmxhY2tfYm94X2Ffc291cmNlKS5cbiAqIFtDaHJvbWUgZGVzY3JpcHRpb24gb2YgYmxhY2tib3hpbmddKGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZGV2dG9vbHMvZG9jcy9ibGFja2JveGluZykuXG4gKlxuICogTm90ZTogTm90IGFsbCBicm93c2VycyBzdXBwb3J0IGJsYWNrYm94aW5nLlxuICpcbiAqIFRoZSBkZWZhdWx0IGlzIHRvIGxvZyBgZGVidWdgIG1lc3NhZ2VzLiBZb3UgY2FuIHVzZVxuICoge0BsaW5rIG5nLiRsb2dQcm92aWRlciBuZy4kbG9nUHJvdmlkZXIjZGVidWdFbmFibGVkfSB0byBjaGFuZ2UgdGhpcy5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwibG9nRXhhbXBsZVwiIG5hbWU9XCJsb2ctc2VydmljZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2xvZ0V4YW1wbGUnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdMb2dDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvZycsIGZ1bmN0aW9uKCRzY29wZSwgJGxvZykge1xuICAgICAgICAgICAkc2NvcGUuJGxvZyA9ICRsb2c7XG4gICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gJ0hlbGxvIFdvcmxkISc7XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJMb2dDb250cm9sbGVyXCI+XG4gICAgICAgICA8cD5SZWxvYWQgdGhpcyBwYWdlIHdpdGggb3BlbiBjb25zb2xlLCBlbnRlciB0ZXh0IGFuZCBoaXQgdGhlIGxvZyBidXR0b24uLi48L3A+XG4gICAgICAgICA8bGFiZWw+TWVzc2FnZTpcbiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibWVzc2FnZVwiIC8+PC9sYWJlbD5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmxvZyhtZXNzYWdlKVwiPmxvZzwvYnV0dG9uPlxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIiRsb2cud2FybihtZXNzYWdlKVwiPndhcm48L2J1dHRvbj5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmluZm8obWVzc2FnZSlcIj5pbmZvPC9idXR0b24+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5lcnJvcihtZXNzYWdlKVwiPmVycm9yPC9idXR0b24+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5kZWJ1ZyhtZXNzYWdlKVwiPmRlYnVnPC9idXR0b24+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGxvZ1Byb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIHRoZSBgJGxvZ1Byb3ZpZGVyYCB0byBjb25maWd1cmUgaG93IHRoZSBhcHBsaWNhdGlvbiBsb2dzIG1lc3NhZ2VzXG4gKi9cbmZ1bmN0aW9uICRMb2dQcm92aWRlcigpIHtcbiAgdmFyIGRlYnVnID0gdHJ1ZSxcbiAgICAgIHNlbGYgPSB0aGlzO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2dQcm92aWRlciNkZWJ1Z0VuYWJsZWRcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGZsYWcgZW5hYmxlIG9yIGRpc2FibGUgZGVidWcgbGV2ZWwgbWVzc2FnZXNcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcbiAgICovXG4gIHRoaXMuZGVidWdFbmFibGVkID0gZnVuY3Rpb24oZmxhZykge1xuICAgIGlmIChpc0RlZmluZWQoZmxhZykpIHtcbiAgICAgIGRlYnVnID0gZmxhZztcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcbiAgICAvLyBTdXBwb3J0OiBJRSA5LTExLCBFZGdlIDEyLTE0K1xuICAgIC8vIElFL0VkZ2UgZGlzcGxheSBlcnJvcnMgaW4gc3VjaCBhIHdheSB0aGF0IGl0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGNsaWNrIGluIDQgcGxhY2VzXG4gICAgLy8gdG8gc2VlIHRoZSBzdGFjayB0cmFjZS4gVGhlcmUgaXMgbm8gd2F5IHRvIGZlYXR1cmUtZGV0ZWN0IGl0IHNvIHRoZXJlJ3MgYSBjaGFuY2VcbiAgICAvLyBvZiB0aGUgdXNlciBhZ2VudCBzbmlmZmluZyB0byBnbyB3cm9uZyBidXQgc2luY2UgaXQncyBvbmx5IGFib3V0IGxvZ2dpbmcsIHRoaXMgc2hvdWxkbid0XG4gICAgLy8gYnJlYWsgYXBwcy4gT3RoZXIgYnJvd3NlcnMgZGlzcGxheSBlcnJvcnMgaW4gYSBzZW5zaWJsZSB3YXkgYW5kIHNvbWUgb2YgdGhlbSBtYXAgc3RhY2tcbiAgICAvLyB0cmFjZXMgYWxvbmcgc291cmNlIG1hcHMgaWYgYXZhaWxhYmxlIHNvIGl0IG1ha2VzIHNlbnNlIHRvIGxldCBicm93c2VycyBkaXNwbGF5IGl0XG4gICAgLy8gYXMgdGhleSB3YW50LlxuICAgIHZhciBmb3JtYXRTdGFja1RyYWNlID0gbXNpZSB8fCAvXFxiRWRnZVxcLy8udGVzdCgkd2luZG93Lm5hdmlnYXRvciAmJiAkd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGxvZyNsb2dcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGEgbG9nIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgbG9nOiBjb25zb2xlTG9nKCdsb2cnKSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkbG9nI2luZm9cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGFuIGluZm9ybWF0aW9uIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgaW5mbzogY29uc29sZUxvZygnaW5mbycpLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRsb2cjd2FyblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogV3JpdGUgYSB3YXJuaW5nIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgd2FybjogY29uc29sZUxvZygnd2FybicpLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRsb2cjZXJyb3JcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGFuIGVycm9yIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgZXJyb3I6IGNvbnNvbGVMb2coJ2Vycm9yJyksXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGxvZyNkZWJ1Z1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogV3JpdGUgYSBkZWJ1ZyBtZXNzYWdlXG4gICAgICAgKi9cbiAgICAgIGRlYnVnOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmbiA9IGNvbnNvbGVMb2coJ2RlYnVnJyk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgICAgZm4uYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSgpXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGZvcm1hdEVycm9yKGFyZykge1xuICAgICAgaWYgKGlzRXJyb3IoYXJnKSkge1xuICAgICAgICBpZiAoYXJnLnN0YWNrICYmIGZvcm1hdFN0YWNrVHJhY2UpIHtcbiAgICAgICAgICBhcmcgPSAoYXJnLm1lc3NhZ2UgJiYgYXJnLnN0YWNrLmluZGV4T2YoYXJnLm1lc3NhZ2UpID09PSAtMSlcbiAgICAgICAgICAgICAgPyAnRXJyb3I6ICcgKyBhcmcubWVzc2FnZSArICdcXG4nICsgYXJnLnN0YWNrXG4gICAgICAgICAgICAgIDogYXJnLnN0YWNrO1xuICAgICAgICB9IGVsc2UgaWYgKGFyZy5zb3VyY2VVUkwpIHtcbiAgICAgICAgICBhcmcgPSBhcmcubWVzc2FnZSArICdcXG4nICsgYXJnLnNvdXJjZVVSTCArICc6JyArIGFyZy5saW5lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbnNvbGVMb2codHlwZSkge1xuICAgICAgdmFyIGNvbnNvbGUgPSAkd2luZG93LmNvbnNvbGUgfHwge30sXG4gICAgICAgICAgbG9nRm4gPSBjb25zb2xlW3R5cGVdIHx8IGNvbnNvbGUubG9nIHx8IG5vb3A7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgIGFyZ3MucHVzaChmb3JtYXRFcnJvcihhcmcpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFN1cHBvcnQ6IElFIDkgb25seVxuICAgICAgICAvLyBjb25zb2xlIG1ldGhvZHMgZG9uJ3QgaW5oZXJpdCBmcm9tIEZ1bmN0aW9uLnByb3RvdHlwZSBpbiBJRSA5IHNvIHdlIGNhbid0XG4gICAgICAgIC8vIGNhbGwgYGxvZ0ZuLmFwcGx5KGNvbnNvbGUsIGFyZ3MpYCBkaXJlY3RseS5cbiAgICAgICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGxvZ0ZuLCBjb25zb2xlLCBhcmdzKTtcbiAgICAgIH07XG4gICAgfVxuICB9XTtcbn1cblxuLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKlxuICogICAgIEFueSBjb21taXRzIHRvIHRoaXMgZmlsZSBzaG91bGQgYmUgcmV2aWV3ZWQgd2l0aCBzZWN1cml0eSBpbiBtaW5kLiAgKlxuICogICBDaGFuZ2VzIHRvIHRoaXMgZmlsZSBjYW4gcG90ZW50aWFsbHkgY3JlYXRlIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4gKlxuICogICAgICAgICAgQW4gYXBwcm92YWwgZnJvbSAyIENvcmUgbWVtYmVycyB3aXRoIGhpc3Rvcnkgb2YgbW9kaWZ5aW5nICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyBmaWxlIGlzIHJlcXVpcmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogIERvZXMgdGhlIGNoYW5nZSBzb21laG93IGFsbG93IGZvciBhcmJpdHJhcnkgamF2YXNjcmlwdCB0byBiZSBleGVjdXRlZD8gKlxuICogICAgT3IgYWxsb3dzIGZvciBzb21lb25lIHRvIGNoYW5nZSB0aGUgcHJvdG90eXBlIG9mIGJ1aWx0LWluIG9iamVjdHM/ICAgKlxuICogICAgIE9yIGdpdmVzIHVuZGVzaXJlZCBhY2Nlc3MgdG8gdmFyaWFibGVzIGxpa2VzIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxudmFyICRwYXJzZU1pbkVyciA9IG1pbkVycignJHBhcnNlJyk7XG5cbnZhciBvYmplY3RWYWx1ZU9mID0ge30uY29uc3RydWN0b3IucHJvdG90eXBlLnZhbHVlT2Y7XG5cbi8vIFNhbmRib3hpbmcgQW5ndWxhckpTIEV4cHJlc3Npb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEFuZ3VsYXJKUyBleHByZXNzaW9ucyBhcmUgbm8gbG9uZ2VyIHNhbmRib3hlZC4gU28gaXQgaXMgbm93IGV2ZW4gZWFzaWVyIHRvIGFjY2VzcyBhcmJpdHJhcnkgSlMgY29kZSBieVxuLy8gdmFyaW91cyBtZWFucyBzdWNoIGFzIG9idGFpbmluZyBhIHJlZmVyZW5jZSB0byBuYXRpdmUgSlMgZnVuY3Rpb25zIGxpa2UgdGhlIEZ1bmN0aW9uIGNvbnN0cnVjdG9yLlxuLy9cbi8vIEFzIGFuIGV4YW1wbGUsIGNvbnNpZGVyIHRoZSBmb2xsb3dpbmcgQW5ndWxhckpTIGV4cHJlc3Npb246XG4vL1xuLy8gICB7fS50b1N0cmluZy5jb25zdHJ1Y3RvcignYWxlcnQoXCJldmlsIEpTIGNvZGVcIiknKVxuLy9cbi8vIEl0IGlzIGltcG9ydGFudCB0byByZWFsaXplIHRoYXQgaWYgeW91IGNyZWF0ZSBhbiBleHByZXNzaW9uIGZyb20gYSBzdHJpbmcgdGhhdCBjb250YWlucyB1c2VyIHByb3ZpZGVkXG4vLyBjb250ZW50IHRoZW4gaXQgaXMgcG9zc2libGUgdGhhdCB5b3VyIGFwcGxpY2F0aW9uIGNvbnRhaW5zIGEgc2VjdXJpdHkgdnVsbmVyYWJpbGl0eSB0byBhbiBYU1Mgc3R5bGUgYXR0YWNrLlxuLy9cbi8vIFNlZSBodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9ndWlkZS9zZWN1cml0eVxuXG5cbmZ1bmN0aW9uIGdldFN0cmluZ1ZhbHVlKG5hbWUpIHtcbiAgLy8gUHJvcGVydHkgbmFtZXMgbXVzdCBiZSBzdHJpbmdzLiBUaGlzIG1lYW5zIHRoYXQgbm9uLXN0cmluZyBvYmplY3RzIGNhbm5vdCBiZSB1c2VkXG4gIC8vIGFzIGtleXMgaW4gYW4gb2JqZWN0LiBBbnkgbm9uLXN0cmluZyBvYmplY3QsIGluY2x1ZGluZyBhIG51bWJlciwgaXMgdHlwZWNhc3RlZFxuICAvLyBpbnRvIGEgc3RyaW5nIHZpYSB0aGUgdG9TdHJpbmcgbWV0aG9kLlxuICAvLyAtLSBNRE4sIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL09wZXJhdG9ycy9Qcm9wZXJ0eV9hY2Nlc3NvcnMjUHJvcGVydHlfbmFtZXNcbiAgLy9cbiAgLy8gU28sIHRvIGVuc3VyZSB0aGF0IHdlIGFyZSBjaGVja2luZyB0aGUgc2FtZSBgbmFtZWAgdGhhdCBKYXZhU2NyaXB0IHdvdWxkIHVzZSwgd2UgY2FzdCBpdFxuICAvLyB0byBhIHN0cmluZy4gSXQncyBub3QgYWx3YXlzIHBvc3NpYmxlLiBJZiBgbmFtZWAgaXMgYW4gb2JqZWN0IGFuZCBpdHMgYHRvU3RyaW5nYCBtZXRob2QgaXNcbiAgLy8gJ2Jyb2tlbicgKGRvZXNuJ3QgcmV0dXJuIGEgc3RyaW5nLCBpc24ndCBhIGZ1bmN0aW9uLCBldGMuKSwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd246XG4gIC8vXG4gIC8vIFR5cGVFcnJvcjogQ2Fubm90IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVxuICAvL1xuICAvLyBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgd2UgZG9uJ3QgY2F0Y2ggdGhpcyBlcnJvciBoZXJlIGFuZCBhbGxvdyBpdCB0byBwcm9wYWdhdGUgdXAgdGhlIGNhbGxcbiAgLy8gc3RhY2suIE5vdGUgdGhhdCB5b3UnbGwgZ2V0IHRoZSBzYW1lIGVycm9yIGluIEphdmFTY3JpcHQgaWYgeW91IHRyeSB0byBhY2Nlc3MgYSBwcm9wZXJ0eSB1c2luZ1xuICAvLyBzdWNoIGEgJ2Jyb2tlbicgb2JqZWN0IGFzIGEga2V5LlxuICByZXR1cm4gbmFtZSArICcnO1xufVxuXG5cbnZhciBPUEVSQVRPUlMgPSBjcmVhdGVNYXAoKTtcbmZvckVhY2goJysgLSAqIC8gJSA9PT0gIT09ID09ICE9IDwgPiA8PSA+PSAmJiB8fCAhID0gfCcuc3BsaXQoJyAnKSwgZnVuY3Rpb24ob3BlcmF0b3IpIHsgT1BFUkFUT1JTW29wZXJhdG9yXSA9IHRydWU7IH0pO1xudmFyIEVTQ0FQRSA9IHsnbic6J1xcbicsICdmJzonXFxmJywgJ3InOidcXHInLCAndCc6J1xcdCcsICd2JzonXFx2JywgJ1xcJyc6J1xcJycsICdcIic6J1wiJ307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52YXIgTGV4ZXIgPSBmdW5jdGlvbiBMZXhlcihvcHRpb25zKSB7XG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG59O1xuXG5MZXhlci5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBMZXhlcixcblxuICBsZXg6IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIHRoaXMudG9rZW5zID0gW107XG5cbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XG4gICAgICBpZiAoY2ggPT09ICdcIicgfHwgY2ggPT09ICdcXCcnKSB7XG4gICAgICAgIHRoaXMucmVhZFN0cmluZyhjaCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNOdW1iZXIoY2gpIHx8IGNoID09PSAnLicgJiYgdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpIHtcbiAgICAgICAgdGhpcy5yZWFkTnVtYmVyKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNJZGVudGlmaWVyU3RhcnQodGhpcy5wZWVrTXVsdGljaGFyKCkpKSB7XG4gICAgICAgIHRoaXMucmVhZElkZW50KCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXMoY2gsICcoKXt9W10uLDs6PycpKSB7XG4gICAgICAgIHRoaXMudG9rZW5zLnB1c2goe2luZGV4OiB0aGlzLmluZGV4LCB0ZXh0OiBjaH0pO1xuICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNXaGl0ZXNwYWNlKGNoKSkge1xuICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2gyID0gY2ggKyB0aGlzLnBlZWsoKTtcbiAgICAgICAgdmFyIGNoMyA9IGNoMiArIHRoaXMucGVlaygyKTtcbiAgICAgICAgdmFyIG9wMSA9IE9QRVJBVE9SU1tjaF07XG4gICAgICAgIHZhciBvcDIgPSBPUEVSQVRPUlNbY2gyXTtcbiAgICAgICAgdmFyIG9wMyA9IE9QRVJBVE9SU1tjaDNdO1xuICAgICAgICBpZiAob3AxIHx8IG9wMiB8fCBvcDMpIHtcbiAgICAgICAgICB2YXIgdG9rZW4gPSBvcDMgPyBjaDMgOiAob3AyID8gY2gyIDogY2gpO1xuICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goe2luZGV4OiB0aGlzLmluZGV4LCB0ZXh0OiB0b2tlbiwgb3BlcmF0b3I6IHRydWV9KTtcbiAgICAgICAgICB0aGlzLmluZGV4ICs9IHRva2VuLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnRocm93RXJyb3IoJ1VuZXhwZWN0ZWQgbmV4dCBjaGFyYWN0ZXIgJywgdGhpcy5pbmRleCwgdGhpcy5pbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRva2VucztcbiAgfSxcblxuICBpczogZnVuY3Rpb24oY2gsIGNoYXJzKSB7XG4gICAgcmV0dXJuIGNoYXJzLmluZGV4T2YoY2gpICE9PSAtMTtcbiAgfSxcblxuICBwZWVrOiBmdW5jdGlvbihpKSB7XG4gICAgdmFyIG51bSA9IGkgfHwgMTtcbiAgICByZXR1cm4gKHRoaXMuaW5kZXggKyBudW0gPCB0aGlzLnRleHQubGVuZ3RoKSA/IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCArIG51bSkgOiBmYWxzZTtcbiAgfSxcblxuICBpc051bWJlcjogZnVuY3Rpb24oY2gpIHtcbiAgICByZXR1cm4gKCcwJyA8PSBjaCAmJiBjaCA8PSAnOScpICYmIHR5cGVvZiBjaCA9PT0gJ3N0cmluZyc7XG4gIH0sXG5cbiAgaXNXaGl0ZXNwYWNlOiBmdW5jdGlvbihjaCkge1xuICAgIC8vIElFIHRyZWF0cyBub24tYnJlYWtpbmcgc3BhY2UgYXMgXFx1MDBBMFxuICAgIHJldHVybiAoY2ggPT09ICcgJyB8fCBjaCA9PT0gJ1xccicgfHwgY2ggPT09ICdcXHQnIHx8XG4gICAgICAgICAgICBjaCA9PT0gJ1xcbicgfHwgY2ggPT09ICdcXHYnIHx8IGNoID09PSAnXFx1MDBBMCcpO1xuICB9LFxuXG4gIGlzSWRlbnRpZmllclN0YXJ0OiBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaXNJZGVudGlmaWVyU3RhcnQgP1xuICAgICAgICB0aGlzLm9wdGlvbnMuaXNJZGVudGlmaWVyU3RhcnQoY2gsIHRoaXMuY29kZVBvaW50QXQoY2gpKSA6XG4gICAgICAgIHRoaXMuaXNWYWxpZElkZW50aWZpZXJTdGFydChjaCk7XG4gIH0sXG5cbiAgaXNWYWxpZElkZW50aWZpZXJTdGFydDogZnVuY3Rpb24oY2gpIHtcbiAgICByZXR1cm4gKCdhJyA8PSBjaCAmJiBjaCA8PSAneicgfHxcbiAgICAgICAgICAgICdBJyA8PSBjaCAmJiBjaCA8PSAnWicgfHxcbiAgICAgICAgICAgICdfJyA9PT0gY2ggfHwgY2ggPT09ICckJyk7XG4gIH0sXG5cbiAgaXNJZGVudGlmaWVyQ29udGludWU6IGZ1bmN0aW9uKGNoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJDb250aW51ZSA/XG4gICAgICAgIHRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJDb250aW51ZShjaCwgdGhpcy5jb2RlUG9pbnRBdChjaCkpIDpcbiAgICAgICAgdGhpcy5pc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlKGNoKTtcbiAgfSxcblxuICBpc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlOiBmdW5jdGlvbihjaCwgY3ApIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkSWRlbnRpZmllclN0YXJ0KGNoLCBjcCkgfHwgdGhpcy5pc051bWJlcihjaCk7XG4gIH0sXG5cbiAgY29kZVBvaW50QXQ6IGZ1bmN0aW9uKGNoKSB7XG4gICAgaWYgKGNoLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGNoLmNoYXJDb2RlQXQoMCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgICByZXR1cm4gKGNoLmNoYXJDb2RlQXQoMCkgPDwgMTApICsgY2guY2hhckNvZGVBdCgxKSAtIDB4MzVGREMwMDtcbiAgfSxcblxuICBwZWVrTXVsdGljaGFyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2ggPSB0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO1xuICAgIHZhciBwZWVrID0gdGhpcy5wZWVrKCk7XG4gICAgaWYgKCFwZWVrKSB7XG4gICAgICByZXR1cm4gY2g7XG4gICAgfVxuICAgIHZhciBjcDEgPSBjaC5jaGFyQ29kZUF0KDApO1xuICAgIHZhciBjcDIgPSBwZWVrLmNoYXJDb2RlQXQoMCk7XG4gICAgaWYgKGNwMSA+PSAweEQ4MDAgJiYgY3AxIDw9IDB4REJGRiAmJiBjcDIgPj0gMHhEQzAwICYmIGNwMiA8PSAweERGRkYpIHtcbiAgICAgIHJldHVybiBjaCArIHBlZWs7XG4gICAgfVxuICAgIHJldHVybiBjaDtcbiAgfSxcblxuICBpc0V4cE9wZXJhdG9yOiBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiAoY2ggPT09ICctJyB8fCBjaCA9PT0gJysnIHx8IHRoaXMuaXNOdW1iZXIoY2gpKTtcbiAgfSxcblxuICB0aHJvd0Vycm9yOiBmdW5jdGlvbihlcnJvciwgc3RhcnQsIGVuZCkge1xuICAgIGVuZCA9IGVuZCB8fCB0aGlzLmluZGV4O1xuICAgIHZhciBjb2xTdHIgPSAoaXNEZWZpbmVkKHN0YXJ0KVxuICAgICAgICAgICAgPyAncyAnICsgc3RhcnQgKyAgJy0nICsgdGhpcy5pbmRleCArICcgWycgKyB0aGlzLnRleHQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpICsgJ10nXG4gICAgICAgICAgICA6ICcgJyArIGVuZCk7XG4gICAgdGhyb3cgJHBhcnNlTWluRXJyKCdsZXhlcnInLCAnTGV4ZXIgRXJyb3I6IHswfSBhdCBjb2x1bW57MX0gaW4gZXhwcmVzc2lvbiBbezJ9XS4nLFxuICAgICAgICBlcnJvciwgY29sU3RyLCB0aGlzLnRleHQpO1xuICB9LFxuXG4gIHJlYWROdW1iZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBudW1iZXIgPSAnJztcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xuICAgICAgdmFyIGNoID0gbG93ZXJjYXNlKHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCkpO1xuICAgICAgaWYgKGNoID09PSAnLicgfHwgdGhpcy5pc051bWJlcihjaCkpIHtcbiAgICAgICAgbnVtYmVyICs9IGNoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHBlZWtDaCA9IHRoaXMucGVlaygpO1xuICAgICAgICBpZiAoY2ggPT09ICdlJyAmJiB0aGlzLmlzRXhwT3BlcmF0b3IocGVla0NoKSkge1xuICAgICAgICAgIG51bWJlciArPSBjaDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRXhwT3BlcmF0b3IoY2gpICYmXG4gICAgICAgICAgICBwZWVrQ2ggJiYgdGhpcy5pc051bWJlcihwZWVrQ2gpICYmXG4gICAgICAgICAgICBudW1iZXIuY2hhckF0KG51bWJlci5sZW5ndGggLSAxKSA9PT0gJ2UnKSB7XG4gICAgICAgICAgbnVtYmVyICs9IGNoO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNFeHBPcGVyYXRvcihjaCkgJiZcbiAgICAgICAgICAgICghcGVla0NoIHx8ICF0aGlzLmlzTnVtYmVyKHBlZWtDaCkpICYmXG4gICAgICAgICAgICBudW1iZXIuY2hhckF0KG51bWJlci5sZW5ndGggLSAxKSA9PT0gJ2UnKSB7XG4gICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJbnZhbGlkIGV4cG9uZW50Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICB9XG4gICAgdGhpcy50b2tlbnMucHVzaCh7XG4gICAgICBpbmRleDogc3RhcnQsXG4gICAgICB0ZXh0OiBudW1iZXIsXG4gICAgICBjb25zdGFudDogdHJ1ZSxcbiAgICAgIHZhbHVlOiBOdW1iZXIobnVtYmVyKVxuICAgIH0pO1xuICB9LFxuXG4gIHJlYWRJZGVudDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5pbmRleDtcbiAgICB0aGlzLmluZGV4ICs9IHRoaXMucGVla011bHRpY2hhcigpLmxlbmd0aDtcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMucGVla011bHRpY2hhcigpO1xuICAgICAgaWYgKCF0aGlzLmlzSWRlbnRpZmllckNvbnRpbnVlKGNoKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXggKz0gY2gubGVuZ3RoO1xuICAgIH1cbiAgICB0aGlzLnRva2Vucy5wdXNoKHtcbiAgICAgIGluZGV4OiBzdGFydCxcbiAgICAgIHRleHQ6IHRoaXMudGV4dC5zbGljZShzdGFydCwgdGhpcy5pbmRleCksXG4gICAgICBpZGVudGlmaWVyOiB0cnVlXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVhZFN0cmluZzogZnVuY3Rpb24ocXVvdGUpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgIHRoaXMuaW5kZXgrKztcbiAgICB2YXIgc3RyaW5nID0gJyc7XG4gICAgdmFyIHJhd1N0cmluZyA9IHF1b3RlO1xuICAgIHZhciBlc2NhcGUgPSBmYWxzZTtcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XG4gICAgICByYXdTdHJpbmcgKz0gY2g7XG4gICAgICBpZiAoZXNjYXBlKSB7XG4gICAgICAgIGlmIChjaCA9PT0gJ3UnKSB7XG4gICAgICAgICAgdmFyIGhleCA9IHRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCArIDEsIHRoaXMuaW5kZXggKyA1KTtcbiAgICAgICAgICBpZiAoIWhleC5tYXRjaCgvW1xcZGEtZl17NH0vaSkpIHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dFcnJvcignSW52YWxpZCB1bmljb2RlIGVzY2FwZSBbXFxcXHUnICsgaGV4ICsgJ10nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5pbmRleCArPSA0O1xuICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGhleCwgMTYpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcmVwID0gRVNDQVBFW2NoXTtcbiAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcgKyAocmVwIHx8IGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlc2NhcGUgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICdcXFxcJykge1xuICAgICAgICBlc2NhcGUgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChjaCA9PT0gcXVvdGUpIHtcbiAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHtcbiAgICAgICAgICBpbmRleDogc3RhcnQsXG4gICAgICAgICAgdGV4dDogcmF3U3RyaW5nLFxuICAgICAgICAgIGNvbnN0YW50OiB0cnVlLFxuICAgICAgICAgIHZhbHVlOiBzdHJpbmdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0cmluZyArPSBjaDtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICB9XG4gICAgdGhpcy50aHJvd0Vycm9yKCdVbnRlcm1pbmF0ZWQgcXVvdGUnLCBzdGFydCk7XG4gIH1cbn07XG5cbnZhciBBU1QgPSBmdW5jdGlvbiBBU1QobGV4ZXIsIG9wdGlvbnMpIHtcbiAgdGhpcy5sZXhlciA9IGxleGVyO1xuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xufTtcblxuQVNULlByb2dyYW0gPSAnUHJvZ3JhbSc7XG5BU1QuRXhwcmVzc2lvblN0YXRlbWVudCA9ICdFeHByZXNzaW9uU3RhdGVtZW50JztcbkFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbiA9ICdBc3NpZ25tZW50RXhwcmVzc2lvbic7XG5BU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uID0gJ0NvbmRpdGlvbmFsRXhwcmVzc2lvbic7XG5BU1QuTG9naWNhbEV4cHJlc3Npb24gPSAnTG9naWNhbEV4cHJlc3Npb24nO1xuQVNULkJpbmFyeUV4cHJlc3Npb24gPSAnQmluYXJ5RXhwcmVzc2lvbic7XG5BU1QuVW5hcnlFeHByZXNzaW9uID0gJ1VuYXJ5RXhwcmVzc2lvbic7XG5BU1QuQ2FsbEV4cHJlc3Npb24gPSAnQ2FsbEV4cHJlc3Npb24nO1xuQVNULk1lbWJlckV4cHJlc3Npb24gPSAnTWVtYmVyRXhwcmVzc2lvbic7XG5BU1QuSWRlbnRpZmllciA9ICdJZGVudGlmaWVyJztcbkFTVC5MaXRlcmFsID0gJ0xpdGVyYWwnO1xuQVNULkFycmF5RXhwcmVzc2lvbiA9ICdBcnJheUV4cHJlc3Npb24nO1xuQVNULlByb3BlcnR5ID0gJ1Byb3BlcnR5JztcbkFTVC5PYmplY3RFeHByZXNzaW9uID0gJ09iamVjdEV4cHJlc3Npb24nO1xuQVNULlRoaXNFeHByZXNzaW9uID0gJ1RoaXNFeHByZXNzaW9uJztcbkFTVC5Mb2NhbHNFeHByZXNzaW9uID0gJ0xvY2Fsc0V4cHJlc3Npb24nO1xuXG4vLyBJbnRlcm5hbCB1c2Ugb25seVxuQVNULk5HVmFsdWVQYXJhbWV0ZXIgPSAnTkdWYWx1ZVBhcmFtZXRlcic7XG5cbkFTVC5wcm90b3R5cGUgPSB7XG4gIGFzdDogZnVuY3Rpb24odGV4dCkge1xuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgdGhpcy50b2tlbnMgPSB0aGlzLmxleGVyLmxleCh0ZXh0KTtcblxuICAgIHZhciB2YWx1ZSA9IHRoaXMucHJvZ3JhbSgpO1xuXG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCAhPT0gMCkge1xuICAgICAgdGhpcy50aHJvd0Vycm9yKCdpcyBhbiB1bmV4cGVjdGVkIHRva2VuJywgdGhpcy50b2tlbnNbMF0pO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcblxuICBwcm9ncmFtOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm9keSA9IFtdO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBpZiAodGhpcy50b2tlbnMubGVuZ3RoID4gMCAmJiAhdGhpcy5wZWVrKCd9JywgJyknLCAnOycsICddJykpXG4gICAgICAgIGJvZHkucHVzaCh0aGlzLmV4cHJlc3Npb25TdGF0ZW1lbnQoKSk7XG4gICAgICBpZiAoIXRoaXMuZXhwZWN0KCc7JykpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogQVNULlByb2dyYW0sIGJvZHk6IGJvZHl9O1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBleHByZXNzaW9uU3RhdGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyB0eXBlOiBBU1QuRXhwcmVzc2lvblN0YXRlbWVudCwgZXhwcmVzc2lvbjogdGhpcy5maWx0ZXJDaGFpbigpIH07XG4gIH0sXG5cbiAgZmlsdGVyQ2hhaW46IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsZWZ0ID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgd2hpbGUgKHRoaXMuZXhwZWN0KCd8JykpIHtcbiAgICAgIGxlZnQgPSB0aGlzLmZpbHRlcihsZWZ0KTtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH0sXG5cbiAgZXhwcmVzc2lvbjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNzaWdubWVudCgpO1xuICB9LFxuXG4gIGFzc2lnbm1lbnQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXN1bHQgPSB0aGlzLnRlcm5hcnkoKTtcbiAgICBpZiAodGhpcy5leHBlY3QoJz0nKSkge1xuICAgICAgaWYgKCFpc0Fzc2lnbmFibGUocmVzdWx0KSkge1xuICAgICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2x2YWwnLCAnVHJ5aW5nIHRvIGFzc2lnbiBhIHZhbHVlIHRvIGEgbm9uIGwtdmFsdWUnKTtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0ID0geyB0eXBlOiBBU1QuQXNzaWdubWVudEV4cHJlc3Npb24sIGxlZnQ6IHJlc3VsdCwgcmlnaHQ6IHRoaXMuYXNzaWdubWVudCgpLCBvcGVyYXRvcjogJz0nfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcblxuICB0ZXJuYXJ5OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGVzdCA9IHRoaXMubG9naWNhbE9SKCk7XG4gICAgdmFyIGFsdGVybmF0ZTtcbiAgICB2YXIgY29uc2VxdWVudDtcbiAgICBpZiAodGhpcy5leHBlY3QoJz8nKSkge1xuICAgICAgYWx0ZXJuYXRlID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICBpZiAodGhpcy5jb25zdW1lKCc6JykpIHtcbiAgICAgICAgY29uc2VxdWVudCA9IHRoaXMuZXhwcmVzc2lvbigpO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBBU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uLCB0ZXN0OiB0ZXN0LCBhbHRlcm5hdGU6IGFsdGVybmF0ZSwgY29uc2VxdWVudDogY29uc2VxdWVudH07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZXN0O1xuICB9LFxuXG4gIGxvZ2ljYWxPUjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLmxvZ2ljYWxBTkQoKTtcbiAgICB3aGlsZSAodGhpcy5leHBlY3QoJ3x8JykpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5Mb2dpY2FsRXhwcmVzc2lvbiwgb3BlcmF0b3I6ICd8fCcsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLmxvZ2ljYWxBTkQoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBsb2dpY2FsQU5EOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXMuZXF1YWxpdHkoKTtcbiAgICB3aGlsZSAodGhpcy5leHBlY3QoJyYmJykpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5Mb2dpY2FsRXhwcmVzc2lvbiwgb3BlcmF0b3I6ICcmJicsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLmVxdWFsaXR5KCl9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBlcXVhbGl0eTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLnJlbGF0aW9uYWwoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc9PScsJyE9JywnPT09JywnIT09JykpKSB7XG4gICAgICBsZWZ0ID0geyB0eXBlOiBBU1QuQmluYXJ5RXhwcmVzc2lvbiwgb3BlcmF0b3I6IHRva2VuLnRleHQsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLnJlbGF0aW9uYWwoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICByZWxhdGlvbmFsOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXMuYWRkaXRpdmUoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc8JywgJz4nLCAnPD0nLCAnPj0nKSkpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5CaW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgbGVmdDogbGVmdCwgcmlnaHQ6IHRoaXMuYWRkaXRpdmUoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBhZGRpdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLm11bHRpcGxpY2F0aXZlKCk7XG4gICAgdmFyIHRva2VuO1xuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnKycsJy0nKSkpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5CaW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgbGVmdDogbGVmdCwgcmlnaHQ6IHRoaXMubXVsdGlwbGljYXRpdmUoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBtdWx0aXBsaWNhdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLnVuYXJ5KCk7XG4gICAgdmFyIHRva2VuO1xuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnKicsJy8nLCclJykpKSB7XG4gICAgICBsZWZ0ID0geyB0eXBlOiBBU1QuQmluYXJ5RXhwcmVzc2lvbiwgb3BlcmF0b3I6IHRva2VuLnRleHQsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLnVuYXJ5KCkgfTtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH0sXG5cbiAgdW5hcnk6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbjtcbiAgICBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJysnLCAnLScsICchJykpKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBBU1QuVW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgcHJlZml4OiB0cnVlLCBhcmd1bWVudDogdGhpcy51bmFyeSgpIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnByaW1hcnkoKTtcbiAgICB9XG4gIH0sXG5cbiAgcHJpbWFyeTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHByaW1hcnk7XG4gICAgaWYgKHRoaXMuZXhwZWN0KCcoJykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmZpbHRlckNoYWluKCk7XG4gICAgICB0aGlzLmNvbnN1bWUoJyknKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZXhwZWN0KCdbJykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmFycmF5RGVjbGFyYXRpb24oKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZXhwZWN0KCd7JykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLm9iamVjdCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zZWxmUmVmZXJlbnRpYWwuaGFzT3duUHJvcGVydHkodGhpcy5wZWVrKCkudGV4dCkpIHtcbiAgICAgIHByaW1hcnkgPSBjb3B5KHRoaXMuc2VsZlJlZmVyZW50aWFsW3RoaXMuY29uc3VtZSgpLnRleHRdKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5saXRlcmFscy5oYXNPd25Qcm9wZXJ0eSh0aGlzLnBlZWsoKS50ZXh0KSkge1xuICAgICAgcHJpbWFyeSA9IHsgdHlwZTogQVNULkxpdGVyYWwsIHZhbHVlOiB0aGlzLm9wdGlvbnMubGl0ZXJhbHNbdGhpcy5jb25zdW1lKCkudGV4dF19O1xuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuaWRlbnRpZmllcikge1xuICAgICAgcHJpbWFyeSA9IHRoaXMuaWRlbnRpZmllcigpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuY29uc3RhbnQpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmNvbnN0YW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGhyb3dFcnJvcignbm90IGEgcHJpbWFyeSBleHByZXNzaW9uJywgdGhpcy5wZWVrKCkpO1xuICAgIH1cblxuICAgIHZhciBuZXh0O1xuICAgIHdoaWxlICgobmV4dCA9IHRoaXMuZXhwZWN0KCcoJywgJ1snLCAnLicpKSkge1xuICAgICAgaWYgKG5leHQudGV4dCA9PT0gJygnKSB7XG4gICAgICAgIHByaW1hcnkgPSB7dHlwZTogQVNULkNhbGxFeHByZXNzaW9uLCBjYWxsZWU6IHByaW1hcnksIGFyZ3VtZW50czogdGhpcy5wYXJzZUFyZ3VtZW50cygpIH07XG4gICAgICAgIHRoaXMuY29uc3VtZSgnKScpO1xuICAgICAgfSBlbHNlIGlmIChuZXh0LnRleHQgPT09ICdbJykge1xuICAgICAgICBwcmltYXJ5ID0geyB0eXBlOiBBU1QuTWVtYmVyRXhwcmVzc2lvbiwgb2JqZWN0OiBwcmltYXJ5LCBwcm9wZXJ0eTogdGhpcy5leHByZXNzaW9uKCksIGNvbXB1dGVkOiB0cnVlIH07XG4gICAgICAgIHRoaXMuY29uc3VtZSgnXScpO1xuICAgICAgfSBlbHNlIGlmIChuZXh0LnRleHQgPT09ICcuJykge1xuICAgICAgICBwcmltYXJ5ID0geyB0eXBlOiBBU1QuTWVtYmVyRXhwcmVzc2lvbiwgb2JqZWN0OiBwcmltYXJ5LCBwcm9wZXJ0eTogdGhpcy5pZGVudGlmaWVyKCksIGNvbXB1dGVkOiBmYWxzZSB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJTVBPU1NJQkxFJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcmltYXJ5O1xuICB9LFxuXG4gIGZpbHRlcjogZnVuY3Rpb24oYmFzZUV4cHJlc3Npb24pIHtcbiAgICB2YXIgYXJncyA9IFtiYXNlRXhwcmVzc2lvbl07XG4gICAgdmFyIHJlc3VsdCA9IHt0eXBlOiBBU1QuQ2FsbEV4cHJlc3Npb24sIGNhbGxlZTogdGhpcy5pZGVudGlmaWVyKCksIGFyZ3VtZW50czogYXJncywgZmlsdGVyOiB0cnVlfTtcblxuICAgIHdoaWxlICh0aGlzLmV4cGVjdCgnOicpKSB7XG4gICAgICBhcmdzLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG5cbiAgcGFyc2VBcmd1bWVudHM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgaWYgKHRoaXMucGVla1Rva2VuKCkudGV4dCAhPT0gJyknKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGFyZ3MucHVzaCh0aGlzLmZpbHRlckNoYWluKCkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHJldHVybiBhcmdzO1xuICB9LFxuXG4gIGlkZW50aWZpZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbiA9IHRoaXMuY29uc3VtZSgpO1xuICAgIGlmICghdG9rZW4uaWRlbnRpZmllcikge1xuICAgICAgdGhpcy50aHJvd0Vycm9yKCdpcyBub3QgYSB2YWxpZCBpZGVudGlmaWVyJywgdG9rZW4pO1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiBBU1QuSWRlbnRpZmllciwgbmFtZTogdG9rZW4udGV4dCB9O1xuICB9LFxuXG4gIGNvbnN0YW50OiBmdW5jdGlvbigpIHtcbiAgICAvLyBUT0RPIGNoZWNrIHRoYXQgaXQgaXMgYSBjb25zdGFudFxuICAgIHJldHVybiB7IHR5cGU6IEFTVC5MaXRlcmFsLCB2YWx1ZTogdGhpcy5jb25zdW1lKCkudmFsdWUgfTtcbiAgfSxcblxuICBhcnJheURlY2xhcmF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBbXTtcbiAgICBpZiAodGhpcy5wZWVrVG9rZW4oKS50ZXh0ICE9PSAnXScpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHRoaXMucGVlaygnXScpKSB7XG4gICAgICAgICAgLy8gU3VwcG9ydCB0cmFpbGluZyBjb21tYXMgcGVyIEVTNS4xLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnRzLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHRoaXMuY29uc3VtZSgnXScpO1xuXG4gICAgcmV0dXJuIHsgdHlwZTogQVNULkFycmF5RXhwcmVzc2lvbiwgZWxlbWVudHM6IGVsZW1lbnRzIH07XG4gIH0sXG5cbiAgb2JqZWN0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJvcGVydGllcyA9IFtdLCBwcm9wZXJ0eTtcbiAgICBpZiAodGhpcy5wZWVrVG9rZW4oKS50ZXh0ICE9PSAnfScpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHRoaXMucGVlaygnfScpKSB7XG4gICAgICAgICAgLy8gU3VwcG9ydCB0cmFpbGluZyBjb21tYXMgcGVyIEVTNS4xLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHByb3BlcnR5ID0ge3R5cGU6IEFTVC5Qcm9wZXJ0eSwga2luZDogJ2luaXQnfTtcbiAgICAgICAgaWYgKHRoaXMucGVlaygpLmNvbnN0YW50KSB7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5jb25zdGFudCgpO1xuICAgICAgICAgIHByb3BlcnR5LmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCc6Jyk7XG4gICAgICAgICAgcHJvcGVydHkudmFsdWUgPSB0aGlzLmV4cHJlc3Npb24oKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBlZWsoKS5pZGVudGlmaWVyKSB7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5pZGVudGlmaWVyKCk7XG4gICAgICAgICAgcHJvcGVydHkuY29tcHV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICBpZiAodGhpcy5wZWVrKCc6JykpIHtcbiAgICAgICAgICAgIHRoaXMuY29uc3VtZSgnOicpO1xuICAgICAgICAgICAgcHJvcGVydHkudmFsdWUgPSB0aGlzLmV4cHJlc3Npb24oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvcGVydHkudmFsdWUgPSBwcm9wZXJ0eS5rZXk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGVlaygnWycpKSB7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCdbJyk7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCddJyk7XG4gICAgICAgICAgcHJvcGVydHkuY29tcHV0ZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuY29uc3VtZSgnOicpO1xuICAgICAgICAgIHByb3BlcnR5LnZhbHVlID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdpbnZhbGlkIGtleScsIHRoaXMucGVlaygpKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHRoaXMuY29uc3VtZSgnfScpO1xuXG4gICAgcmV0dXJuIHt0eXBlOiBBU1QuT2JqZWN0RXhwcmVzc2lvbiwgcHJvcGVydGllczogcHJvcGVydGllcyB9O1xuICB9LFxuXG4gIHRocm93RXJyb3I6IGZ1bmN0aW9uKG1zZywgdG9rZW4pIHtcbiAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ3N5bnRheCcsXG4gICAgICAgICdTeW50YXggRXJyb3I6IFRva2VuIFxcJ3swfVxcJyB7MX0gYXQgY29sdW1uIHsyfSBvZiB0aGUgZXhwcmVzc2lvbiBbezN9XSBzdGFydGluZyBhdCBbezR9XS4nLFxuICAgICAgICAgIHRva2VuLnRleHQsIG1zZywgKHRva2VuLmluZGV4ICsgMSksIHRoaXMudGV4dCwgdGhpcy50ZXh0LnN1YnN0cmluZyh0b2tlbi5pbmRleCkpO1xuICB9LFxuXG4gIGNvbnN1bWU6IGZ1bmN0aW9uKGUxKSB7XG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCd1ZW9lJywgJ1VuZXhwZWN0ZWQgZW5kIG9mIGV4cHJlc3Npb246IHswfScsIHRoaXMudGV4dCk7XG4gICAgfVxuXG4gICAgdmFyIHRva2VuID0gdGhpcy5leHBlY3QoZTEpO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHRoaXMudGhyb3dFcnJvcignaXMgdW5leHBlY3RlZCwgZXhwZWN0aW5nIFsnICsgZTEgKyAnXScsIHRoaXMucGVlaygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRva2VuO1xuICB9LFxuXG4gIHBlZWtUb2tlbjogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCd1ZW9lJywgJ1VuZXhwZWN0ZWQgZW5kIG9mIGV4cHJlc3Npb246IHswfScsIHRoaXMudGV4dCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRva2Vuc1swXTtcbiAgfSxcblxuICBwZWVrOiBmdW5jdGlvbihlMSwgZTIsIGUzLCBlNCkge1xuICAgIHJldHVybiB0aGlzLnBlZWtBaGVhZCgwLCBlMSwgZTIsIGUzLCBlNCk7XG4gIH0sXG5cbiAgcGVla0FoZWFkOiBmdW5jdGlvbihpLCBlMSwgZTIsIGUzLCBlNCkge1xuICAgIGlmICh0aGlzLnRva2Vucy5sZW5ndGggPiBpKSB7XG4gICAgICB2YXIgdG9rZW4gPSB0aGlzLnRva2Vuc1tpXTtcbiAgICAgIHZhciB0ID0gdG9rZW4udGV4dDtcbiAgICAgIGlmICh0ID09PSBlMSB8fCB0ID09PSBlMiB8fCB0ID09PSBlMyB8fCB0ID09PSBlNCB8fFxuICAgICAgICAgICghZTEgJiYgIWUyICYmICFlMyAmJiAhZTQpKSB7XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIGV4cGVjdDogZnVuY3Rpb24oZTEsIGUyLCBlMywgZTQpIHtcbiAgICB2YXIgdG9rZW4gPSB0aGlzLnBlZWsoZTEsIGUyLCBlMywgZTQpO1xuICAgIGlmICh0b2tlbikge1xuICAgICAgdGhpcy50b2tlbnMuc2hpZnQoKTtcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIHNlbGZSZWZlcmVudGlhbDoge1xuICAgICd0aGlzJzoge3R5cGU6IEFTVC5UaGlzRXhwcmVzc2lvbiB9LFxuICAgICckbG9jYWxzJzoge3R5cGU6IEFTVC5Mb2NhbHNFeHByZXNzaW9uIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gaWZEZWZpbmVkKHYsIGQpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ICE9PSAndW5kZWZpbmVkJyA/IHYgOiBkO1xufVxuXG5mdW5jdGlvbiBwbHVzRm4obCwgcikge1xuICBpZiAodHlwZW9mIGwgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gcjtcbiAgaWYgKHR5cGVvZiByID09PSAndW5kZWZpbmVkJykgcmV0dXJuIGw7XG4gIHJldHVybiBsICsgcjtcbn1cblxuZnVuY3Rpb24gaXNTdGF0ZWxlc3MoJGZpbHRlciwgZmlsdGVyTmFtZSkge1xuICB2YXIgZm4gPSAkZmlsdGVyKGZpbHRlck5hbWUpO1xuICByZXR1cm4gIWZuLiRzdGF0ZWZ1bDtcbn1cblxudmFyIFBVUklUWV9BQlNPTFVURSA9IDE7XG52YXIgUFVSSVRZX1JFTEFUSVZFID0gMjtcblxuLy8gRGV0ZWN0IG5vZGVzIHdoaWNoIGNvdWxkIGRlcGVuZCBvbiBub24tc2hhbGxvdyBzdGF0ZSBvZiBvYmplY3RzXG5mdW5jdGlvbiBpc1B1cmUobm9kZSwgcGFyZW50SXNQdXJlKSB7XG4gIHN3aXRjaCAobm9kZS50eXBlKSB7XG4gICAgLy8gQ29tcHV0ZWQgbWVtYmVycyBtaWdodCBpbnZva2UgYSBzdGF0ZWZ1bCB0b1N0cmluZygpXG4gICAgY2FzZSBBU1QuTWVtYmVyRXhwcmVzc2lvbjpcbiAgICAgIGlmIChub2RlLmNvbXB1dGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gVW5hcnkgYWx3YXlzIGNvbnZlcnQgdG8gcHJpbWF0aXZlXG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIFBVUklUWV9BQlNPTFVURTtcblxuICAgIC8vIFRoZSBiaW5hcnkgKyBvcGVyYXRvciBjYW4gaW52b2tlIGEgc3RhdGVmdWwgdG9TdHJpbmcoKS5cbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIG5vZGUub3BlcmF0b3IgIT09ICcrJyA/IFBVUklUWV9BQlNPTFVURSA6IGZhbHNlO1xuXG4gICAgLy8gRnVuY3Rpb25zIC8gZmlsdGVycyBwcm9iYWJseSByZWFkIHN0YXRlIGZyb20gd2l0aGluIG9iamVjdHNcbiAgICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiAodW5kZWZpbmVkID09PSBwYXJlbnRJc1B1cmUpID8gUFVSSVRZX1JFTEFUSVZFIDogcGFyZW50SXNQdXJlO1xufVxuXG5mdW5jdGlvbiBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdCwgJGZpbHRlciwgcGFyZW50SXNQdXJlKSB7XG4gIHZhciBhbGxDb25zdGFudHM7XG4gIHZhciBhcmdzVG9XYXRjaDtcbiAgdmFyIGlzU3RhdGVsZXNzRmlsdGVyO1xuXG4gIHZhciBhc3RJc1B1cmUgPSBhc3QuaXNQdXJlID0gaXNQdXJlKGFzdCwgcGFyZW50SXNQdXJlKTtcblxuICBzd2l0Y2ggKGFzdC50eXBlKSB7XG4gIGNhc2UgQVNULlByb2dyYW06XG4gICAgYWxsQ29uc3RhbnRzID0gdHJ1ZTtcbiAgICBmb3JFYWNoKGFzdC5ib2R5LCBmdW5jdGlvbihleHByKSB7XG4gICAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGV4cHIuZXhwcmVzc2lvbiwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmV4cHJlc3Npb24uY29uc3RhbnQ7XG4gICAgfSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYWxsQ29uc3RhbnRzO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5MaXRlcmFsOlxuICAgIGFzdC5jb25zdGFudCA9IHRydWU7XG4gICAgYXN0LnRvV2F0Y2ggPSBbXTtcbiAgICBicmVhaztcbiAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmFyZ3VtZW50LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC5hcmd1bWVudC5jb25zdGFudDtcbiAgICBhc3QudG9XYXRjaCA9IGFzdC5hcmd1bWVudC50b1dhdGNoO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmxlZnQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3QucmlnaHQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYXN0LmxlZnQuY29uc3RhbnQgJiYgYXN0LnJpZ2h0LmNvbnN0YW50O1xuICAgIGFzdC50b1dhdGNoID0gYXN0LmxlZnQudG9XYXRjaC5jb25jYXQoYXN0LnJpZ2h0LnRvV2F0Y2gpO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5Mb2dpY2FsRXhwcmVzc2lvbjpcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC5sZWZ0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LnJpZ2h0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC5sZWZ0LmNvbnN0YW50ICYmIGFzdC5yaWdodC5jb25zdGFudDtcbiAgICBhc3QudG9XYXRjaCA9IGFzdC5jb25zdGFudCA/IFtdIDogW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC50ZXN0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmFsdGVybmF0ZSwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC5jb25zZXF1ZW50LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC50ZXN0LmNvbnN0YW50ICYmIGFzdC5hbHRlcm5hdGUuY29uc3RhbnQgJiYgYXN0LmNvbnNlcXVlbnQuY29uc3RhbnQ7XG4gICAgYXN0LnRvV2F0Y2ggPSBhc3QuY29uc3RhbnQgPyBbXSA6IFthc3RdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5JZGVudGlmaWVyOlxuICAgIGFzdC5jb25zdGFudCA9IGZhbHNlO1xuICAgIGFzdC50b1dhdGNoID0gW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULk1lbWJlckV4cHJlc3Npb246XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3Qub2JqZWN0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGlmIChhc3QuY29tcHV0ZWQpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LnByb3BlcnR5LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIH1cbiAgICBhc3QuY29uc3RhbnQgPSBhc3Qub2JqZWN0LmNvbnN0YW50ICYmICghYXN0LmNvbXB1dGVkIHx8IGFzdC5wcm9wZXJ0eS5jb25zdGFudCk7XG4gICAgYXN0LnRvV2F0Y2ggPSBhc3QuY29uc3RhbnQgPyBbXSA6IFthc3RdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICBpc1N0YXRlbGVzc0ZpbHRlciA9IGFzdC5maWx0ZXIgPyBpc1N0YXRlbGVzcygkZmlsdGVyLCBhc3QuY2FsbGVlLm5hbWUpIDogZmFsc2U7XG4gICAgYWxsQ29uc3RhbnRzID0gaXNTdGF0ZWxlc3NGaWx0ZXI7XG4gICAgYXJnc1RvV2F0Y2ggPSBbXTtcbiAgICBmb3JFYWNoKGFzdC5hcmd1bWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoZXhwciwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmNvbnN0YW50O1xuICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgZXhwci50b1dhdGNoKTtcbiAgICB9KTtcbiAgICBhc3QuY29uc3RhbnQgPSBhbGxDb25zdGFudHM7XG4gICAgYXN0LnRvV2F0Y2ggPSBpc1N0YXRlbGVzc0ZpbHRlciA/IGFyZ3NUb1dhdGNoIDogW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkFzc2lnbm1lbnRFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmxlZnQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3QucmlnaHQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYXN0LmxlZnQuY29uc3RhbnQgJiYgYXN0LnJpZ2h0LmNvbnN0YW50O1xuICAgIGFzdC50b1dhdGNoID0gW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkFycmF5RXhwcmVzc2lvbjpcbiAgICBhbGxDb25zdGFudHMgPSB0cnVlO1xuICAgIGFyZ3NUb1dhdGNoID0gW107XG4gICAgZm9yRWFjaChhc3QuZWxlbWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoZXhwciwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmNvbnN0YW50O1xuICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgZXhwci50b1dhdGNoKTtcbiAgICB9KTtcbiAgICBhc3QuY29uc3RhbnQgPSBhbGxDb25zdGFudHM7XG4gICAgYXN0LnRvV2F0Y2ggPSBhcmdzVG9XYXRjaDtcbiAgICBicmVhaztcbiAgY2FzZSBBU1QuT2JqZWN0RXhwcmVzc2lvbjpcbiAgICBhbGxDb25zdGFudHMgPSB0cnVlO1xuICAgIGFyZ3NUb1dhdGNoID0gW107XG4gICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMocHJvcGVydHkudmFsdWUsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgICBhbGxDb25zdGFudHMgPSBhbGxDb25zdGFudHMgJiYgcHJvcGVydHkudmFsdWUuY29uc3RhbnQ7XG4gICAgICBhcmdzVG9XYXRjaC5wdXNoLmFwcGx5KGFyZ3NUb1dhdGNoLCBwcm9wZXJ0eS52YWx1ZS50b1dhdGNoKTtcbiAgICAgIGlmIChwcm9wZXJ0eS5jb21wdXRlZCkge1xuICAgICAgICAvL2B7W2tleV06IHZhbHVlfWAgaW1wbGljaXRseSBkb2VzIGBrZXkudG9TdHJpbmcoKWAgd2hpY2ggbWF5IGJlIG5vbi1wdXJlXG4gICAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMocHJvcGVydHkua2V5LCAkZmlsdGVyLCAvKnBhcmVudElzUHVyZT0qL2ZhbHNlKTtcbiAgICAgICAgYWxsQ29uc3RhbnRzID0gYWxsQ29uc3RhbnRzICYmIHByb3BlcnR5LmtleS5jb25zdGFudDtcbiAgICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgcHJvcGVydHkua2V5LnRvV2F0Y2gpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGFzdC5jb25zdGFudCA9IGFsbENvbnN0YW50cztcbiAgICBhc3QudG9XYXRjaCA9IGFyZ3NUb1dhdGNoO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5UaGlzRXhwcmVzc2lvbjpcbiAgICBhc3QuY29uc3RhbnQgPSBmYWxzZTtcbiAgICBhc3QudG9XYXRjaCA9IFtdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgIGFzdC5jb25zdGFudCA9IGZhbHNlO1xuICAgIGFzdC50b1dhdGNoID0gW107XG4gICAgYnJlYWs7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0SW5wdXRzKGJvZHkpIHtcbiAgaWYgKGJvZHkubGVuZ3RoICE9PSAxKSByZXR1cm47XG4gIHZhciBsYXN0RXhwcmVzc2lvbiA9IGJvZHlbMF0uZXhwcmVzc2lvbjtcbiAgdmFyIGNhbmRpZGF0ZSA9IGxhc3RFeHByZXNzaW9uLnRvV2F0Y2g7XG4gIGlmIChjYW5kaWRhdGUubGVuZ3RoICE9PSAxKSByZXR1cm4gY2FuZGlkYXRlO1xuICByZXR1cm4gY2FuZGlkYXRlWzBdICE9PSBsYXN0RXhwcmVzc2lvbiA/IGNhbmRpZGF0ZSA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNBc3NpZ25hYmxlKGFzdCkge1xuICByZXR1cm4gYXN0LnR5cGUgPT09IEFTVC5JZGVudGlmaWVyIHx8IGFzdC50eXBlID09PSBBU1QuTWVtYmVyRXhwcmVzc2lvbjtcbn1cblxuZnVuY3Rpb24gYXNzaWduYWJsZUFTVChhc3QpIHtcbiAgaWYgKGFzdC5ib2R5Lmxlbmd0aCA9PT0gMSAmJiBpc0Fzc2lnbmFibGUoYXN0LmJvZHlbMF0uZXhwcmVzc2lvbikpIHtcbiAgICByZXR1cm4ge3R5cGU6IEFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbiwgbGVmdDogYXN0LmJvZHlbMF0uZXhwcmVzc2lvbiwgcmlnaHQ6IHt0eXBlOiBBU1QuTkdWYWx1ZVBhcmFtZXRlcn0sIG9wZXJhdG9yOiAnPSd9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzTGl0ZXJhbChhc3QpIHtcbiAgcmV0dXJuIGFzdC5ib2R5Lmxlbmd0aCA9PT0gMCB8fFxuICAgICAgYXN0LmJvZHkubGVuZ3RoID09PSAxICYmIChcbiAgICAgIGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSA9PT0gQVNULkxpdGVyYWwgfHxcbiAgICAgIGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSA9PT0gQVNULkFycmF5RXhwcmVzc2lvbiB8fFxuICAgICAgYXN0LmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlID09PSBBU1QuT2JqZWN0RXhwcmVzc2lvbik7XG59XG5cbmZ1bmN0aW9uIGlzQ29uc3RhbnQoYXN0KSB7XG4gIHJldHVybiBhc3QuY29uc3RhbnQ7XG59XG5cbmZ1bmN0aW9uIEFTVENvbXBpbGVyKCRmaWx0ZXIpIHtcbiAgdGhpcy4kZmlsdGVyID0gJGZpbHRlcjtcbn1cblxuQVNUQ29tcGlsZXIucHJvdG90eXBlID0ge1xuICBjb21waWxlOiBmdW5jdGlvbihhc3QpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5leHRJZDogMCxcbiAgICAgIGZpbHRlcnM6IHt9LFxuICAgICAgZm46IHt2YXJzOiBbXSwgYm9keTogW10sIG93bjoge319LFxuICAgICAgYXNzaWduOiB7dmFyczogW10sIGJvZHk6IFtdLCBvd246IHt9fSxcbiAgICAgIGlucHV0czogW11cbiAgICB9O1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LCBzZWxmLiRmaWx0ZXIpO1xuICAgIHZhciBleHRyYSA9ICcnO1xuICAgIHZhciBhc3NpZ25hYmxlO1xuICAgIHRoaXMuc3RhZ2UgPSAnYXNzaWduJztcbiAgICBpZiAoKGFzc2lnbmFibGUgPSBhc3NpZ25hYmxlQVNUKGFzdCkpKSB7XG4gICAgICB0aGlzLnN0YXRlLmNvbXB1dGluZyA9ICdhc3NpZ24nO1xuICAgICAgdmFyIHJlc3VsdCA9IHRoaXMubmV4dElkKCk7XG4gICAgICB0aGlzLnJlY3Vyc2UoYXNzaWduYWJsZSwgcmVzdWx0KTtcbiAgICAgIHRoaXMucmV0dXJuXyhyZXN1bHQpO1xuICAgICAgZXh0cmEgPSAnZm4uYXNzaWduPScgKyB0aGlzLmdlbmVyYXRlRnVuY3Rpb24oJ2Fzc2lnbicsICdzLHYsbCcpO1xuICAgIH1cbiAgICB2YXIgdG9XYXRjaCA9IGdldElucHV0cyhhc3QuYm9keSk7XG4gICAgc2VsZi5zdGFnZSA9ICdpbnB1dHMnO1xuICAgIGZvckVhY2godG9XYXRjaCwgZnVuY3Rpb24od2F0Y2gsIGtleSkge1xuICAgICAgdmFyIGZuS2V5ID0gJ2ZuJyArIGtleTtcbiAgICAgIHNlbGYuc3RhdGVbZm5LZXldID0ge3ZhcnM6IFtdLCBib2R5OiBbXSwgb3duOiB7fX07XG4gICAgICBzZWxmLnN0YXRlLmNvbXB1dGluZyA9IGZuS2V5O1xuICAgICAgdmFyIGludG9JZCA9IHNlbGYubmV4dElkKCk7XG4gICAgICBzZWxmLnJlY3Vyc2Uod2F0Y2gsIGludG9JZCk7XG4gICAgICBzZWxmLnJldHVybl8oaW50b0lkKTtcbiAgICAgIHNlbGYuc3RhdGUuaW5wdXRzLnB1c2goe25hbWU6IGZuS2V5LCBpc1B1cmU6IHdhdGNoLmlzUHVyZX0pO1xuICAgICAgd2F0Y2gud2F0Y2hJZCA9IGtleTtcbiAgICB9KTtcbiAgICB0aGlzLnN0YXRlLmNvbXB1dGluZyA9ICdmbic7XG4gICAgdGhpcy5zdGFnZSA9ICdtYWluJztcbiAgICB0aGlzLnJlY3Vyc2UoYXN0KTtcbiAgICB2YXIgZm5TdHJpbmcgPVxuICAgICAgLy8gVGhlIGJ1aWxkIGFuZCBtaW5pZmljYXRpb24gc3RlcHMgcmVtb3ZlIHRoZSBzdHJpbmcgXCJ1c2Ugc3RyaWN0XCIgZnJvbSB0aGUgY29kZSwgYnV0IHRoaXMgaXMgZG9uZSB1c2luZyBhIHJlZ2V4LlxuICAgICAgLy8gVGhpcyBpcyBhIHdvcmthcm91bmQgZm9yIHRoaXMgdW50aWwgd2UgZG8gYSBiZXR0ZXIgam9iIGF0IG9ubHkgcmVtb3ZpbmcgdGhlIHByZWZpeCBvbmx5IHdoZW4gd2Ugc2hvdWxkLlxuICAgICAgJ1wiJyArIHRoaXMuVVNFICsgJyAnICsgdGhpcy5TVFJJQ1QgKyAnXCI7XFxuJyArXG4gICAgICB0aGlzLmZpbHRlclByZWZpeCgpICtcbiAgICAgICd2YXIgZm49JyArIHRoaXMuZ2VuZXJhdGVGdW5jdGlvbignZm4nLCAncyxsLGEsaScpICtcbiAgICAgIGV4dHJhICtcbiAgICAgIHRoaXMud2F0Y2hGbnMoKSArXG4gICAgICAncmV0dXJuIGZuOyc7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcbiAgICB2YXIgZm4gPSAobmV3IEZ1bmN0aW9uKCckZmlsdGVyJyxcbiAgICAgICAgJ2dldFN0cmluZ1ZhbHVlJyxcbiAgICAgICAgJ2lmRGVmaW5lZCcsXG4gICAgICAgICdwbHVzJyxcbiAgICAgICAgZm5TdHJpbmcpKShcbiAgICAgICAgICB0aGlzLiRmaWx0ZXIsXG4gICAgICAgICAgZ2V0U3RyaW5nVmFsdWUsXG4gICAgICAgICAgaWZEZWZpbmVkLFxuICAgICAgICAgIHBsdXNGbik7XG4gICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhZ2UgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIGZuO1xuICB9LFxuXG4gIFVTRTogJ3VzZScsXG5cbiAgU1RSSUNUOiAnc3RyaWN0JyxcblxuICB3YXRjaEZuczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBpbnB1dHMgPSB0aGlzLnN0YXRlLmlucHV0cztcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yRWFjaChpbnB1dHMsIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICByZXN1bHQucHVzaCgndmFyICcgKyBpbnB1dC5uYW1lICsgJz0nICsgc2VsZi5nZW5lcmF0ZUZ1bmN0aW9uKGlucHV0Lm5hbWUsICdzJykpO1xuICAgICAgaWYgKGlucHV0LmlzUHVyZSkge1xuICAgICAgICByZXN1bHQucHVzaChpbnB1dC5uYW1lLCAnLmlzUHVyZT0nICsgSlNPTi5zdHJpbmdpZnkoaW5wdXQuaXNQdXJlKSArICc7Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGlucHV0cy5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdC5wdXNoKCdmbi5pbnB1dHM9WycgKyBpbnB1dHMubWFwKGZ1bmN0aW9uKGkpIHsgcmV0dXJuIGkubmFtZTsgfSkuam9pbignLCcpICsgJ107Jyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuam9pbignJyk7XG4gIH0sXG5cbiAgZ2VuZXJhdGVGdW5jdGlvbjogZnVuY3Rpb24obmFtZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuICdmdW5jdGlvbignICsgcGFyYW1zICsgJyl7JyArXG4gICAgICAgIHRoaXMudmFyc1ByZWZpeChuYW1lKSArXG4gICAgICAgIHRoaXMuYm9keShuYW1lKSArXG4gICAgICAgICd9Oyc7XG4gIH0sXG5cbiAgZmlsdGVyUHJlZml4OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGFydHMgPSBbXTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yRWFjaCh0aGlzLnN0YXRlLmZpbHRlcnMsIGZ1bmN0aW9uKGlkLCBmaWx0ZXIpIHtcbiAgICAgIHBhcnRzLnB1c2goaWQgKyAnPSRmaWx0ZXIoJyArIHNlbGYuZXNjYXBlKGZpbHRlcikgKyAnKScpO1xuICAgIH0pO1xuICAgIGlmIChwYXJ0cy5sZW5ndGgpIHJldHVybiAndmFyICcgKyBwYXJ0cy5qb2luKCcsJykgKyAnOyc7XG4gICAgcmV0dXJuICcnO1xuICB9LFxuXG4gIHZhcnNQcmVmaXg6IGZ1bmN0aW9uKHNlY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZVtzZWN0aW9uXS52YXJzLmxlbmd0aCA/ICd2YXIgJyArIHRoaXMuc3RhdGVbc2VjdGlvbl0udmFycy5qb2luKCcsJykgKyAnOycgOiAnJztcbiAgfSxcblxuICBib2R5OiBmdW5jdGlvbihzZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVbc2VjdGlvbl0uYm9keS5qb2luKCcnKTtcbiAgfSxcblxuICByZWN1cnNlOiBmdW5jdGlvbihhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKSB7XG4gICAgdmFyIGxlZnQsIHJpZ2h0LCBzZWxmID0gdGhpcywgYXJncywgZXhwcmVzc2lvbiwgY29tcHV0ZWQ7XG4gICAgcmVjdXJzaW9uRm4gPSByZWN1cnNpb25GbiB8fCBub29wO1xuICAgIGlmICghc2tpcFdhdGNoSWRDaGVjayAmJiBpc0RlZmluZWQoYXN0LndhdGNoSWQpKSB7XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHRoaXMuaWZfKCdpJyxcbiAgICAgICAgdGhpcy5sYXp5QXNzaWduKGludG9JZCwgdGhpcy5jb21wdXRlZE1lbWJlcignaScsIGFzdC53YXRjaElkKSksXG4gICAgICAgIHRoaXMubGF6eVJlY3Vyc2UoYXN0LCBpbnRvSWQsIG5hbWVJZCwgcmVjdXJzaW9uRm4sIGNyZWF0ZSwgdHJ1ZSlcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAoYXN0LnR5cGUpIHtcbiAgICBjYXNlIEFTVC5Qcm9ncmFtOlxuICAgICAgZm9yRWFjaChhc3QuYm9keSwgZnVuY3Rpb24oZXhwcmVzc2lvbiwgcG9zKSB7XG4gICAgICAgIHNlbGYucmVjdXJzZShleHByZXNzaW9uLmV4cHJlc3Npb24sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmdW5jdGlvbihleHByKSB7IHJpZ2h0ID0gZXhwcjsgfSk7XG4gICAgICAgIGlmIChwb3MgIT09IGFzdC5ib2R5Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBzZWxmLmN1cnJlbnQoKS5ib2R5LnB1c2gocmlnaHQsICc7Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5yZXR1cm5fKHJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5MaXRlcmFsOlxuICAgICAgZXhwcmVzc2lvbiA9IHRoaXMuZXNjYXBlKGFzdC52YWx1ZSk7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8IGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgdGhpcy5yZWN1cnNlKGFzdC5hcmd1bWVudCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGZ1bmN0aW9uKGV4cHIpIHsgcmlnaHQgPSBleHByOyB9KTtcbiAgICAgIGV4cHJlc3Npb24gPSBhc3Qub3BlcmF0b3IgKyAnKCcgKyB0aGlzLmlmRGVmaW5lZChyaWdodCwgMCkgKyAnKSc7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oZXhwcmVzc2lvbik7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgdGhpcy5yZWN1cnNlKGFzdC5sZWZ0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikgeyBsZWZ0ID0gZXhwcjsgfSk7XG4gICAgICB0aGlzLnJlY3Vyc2UoYXN0LnJpZ2h0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikgeyByaWdodCA9IGV4cHI7IH0pO1xuICAgICAgaWYgKGFzdC5vcGVyYXRvciA9PT0gJysnKSB7XG4gICAgICAgIGV4cHJlc3Npb24gPSB0aGlzLnBsdXMobGVmdCwgcmlnaHQpO1xuICAgICAgfSBlbHNlIGlmIChhc3Qub3BlcmF0b3IgPT09ICctJykge1xuICAgICAgICBleHByZXNzaW9uID0gdGhpcy5pZkRlZmluZWQobGVmdCwgMCkgKyBhc3Qub3BlcmF0b3IgKyB0aGlzLmlmRGVmaW5lZChyaWdodCwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleHByZXNzaW9uID0gJygnICsgbGVmdCArICcpJyArIGFzdC5vcGVyYXRvciArICcoJyArIHJpZ2h0ICsgJyknO1xuICAgICAgfVxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuTG9naWNhbEV4cHJlc3Npb246XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QubGVmdCwgaW50b0lkKTtcbiAgICAgIHNlbGYuaWZfKGFzdC5vcGVyYXRvciA9PT0gJyYmJyA/IGludG9JZCA6IHNlbGYubm90KGludG9JZCksIHNlbGYubGF6eVJlY3Vyc2UoYXN0LnJpZ2h0LCBpbnRvSWQpKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Db25kaXRpb25hbEV4cHJlc3Npb246XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QudGVzdCwgaW50b0lkKTtcbiAgICAgIHNlbGYuaWZfKGludG9JZCwgc2VsZi5sYXp5UmVjdXJzZShhc3QuYWx0ZXJuYXRlLCBpbnRvSWQpLCBzZWxmLmxhenlSZWN1cnNlKGFzdC5jb25zZXF1ZW50LCBpbnRvSWQpKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5JZGVudGlmaWVyOlxuICAgICAgaW50b0lkID0gaW50b0lkIHx8IHRoaXMubmV4dElkKCk7XG4gICAgICBpZiAobmFtZUlkKSB7XG4gICAgICAgIG5hbWVJZC5jb250ZXh0ID0gc2VsZi5zdGFnZSA9PT0gJ2lucHV0cycgPyAncycgOiB0aGlzLmFzc2lnbih0aGlzLm5leHRJZCgpLCB0aGlzLmdldEhhc093blByb3BlcnR5KCdsJywgYXN0Lm5hbWUpICsgJz9sOnMnKTtcbiAgICAgICAgbmFtZUlkLmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgIG5hbWVJZC5uYW1lID0gYXN0Lm5hbWU7XG4gICAgICB9XG4gICAgICBzZWxmLmlmXyhzZWxmLnN0YWdlID09PSAnaW5wdXRzJyB8fCBzZWxmLm5vdChzZWxmLmdldEhhc093blByb3BlcnR5KCdsJywgYXN0Lm5hbWUpKSxcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5pZl8oc2VsZi5zdGFnZSA9PT0gJ2lucHV0cycgfHwgJ3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgICAgIHNlbGYuaWZfKFxuICAgICAgICAgICAgICAgIHNlbGYuaXNOdWxsKHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIoJ3MnLCBhc3QubmFtZSkpLFxuICAgICAgICAgICAgICAgIHNlbGYubGF6eUFzc2lnbihzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKCdzJywgYXN0Lm5hbWUpLCAne30nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIoJ3MnLCBhc3QubmFtZSkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBpbnRvSWQgJiYgc2VsZi5sYXp5QXNzaWduKGludG9JZCwgc2VsZi5ub25Db21wdXRlZE1lbWJlcignbCcsIGFzdC5uYW1lKSlcbiAgICAgICAgKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5NZW1iZXJFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IG5hbWVJZCAmJiAobmFtZUlkLmNvbnRleHQgPSB0aGlzLm5leHRJZCgpKSB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgaW50b0lkID0gaW50b0lkIHx8IHRoaXMubmV4dElkKCk7XG4gICAgICBzZWxmLnJlY3Vyc2UoYXN0Lm9iamVjdCwgbGVmdCwgdW5kZWZpbmVkLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5pZl8oc2VsZi5ub3ROdWxsKGxlZnQpLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoYXN0LmNvbXB1dGVkKSB7XG4gICAgICAgICAgICByaWdodCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgICBzZWxmLnJlY3Vyc2UoYXN0LnByb3BlcnR5LCByaWdodCk7XG4gICAgICAgICAgICBzZWxmLmdldFN0cmluZ1ZhbHVlKHJpZ2h0KTtcbiAgICAgICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgICAgIHNlbGYuaWZfKHNlbGYubm90KHNlbGYuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQpKSwgc2VsZi5sYXp5QXNzaWduKHNlbGYuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQpLCAne30nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleHByZXNzaW9uID0gc2VsZi5jb21wdXRlZE1lbWJlcihsZWZ0LCByaWdodCk7XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgaWYgKG5hbWVJZCkge1xuICAgICAgICAgICAgICBuYW1lSWQuY29tcHV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBuYW1lSWQubmFtZSA9IHJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoY3JlYXRlICYmIGNyZWF0ZSAhPT0gMSkge1xuICAgICAgICAgICAgICBzZWxmLmlmXyhzZWxmLmlzTnVsbChzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIGFzdC5wcm9wZXJ0eS5uYW1lKSksIHNlbGYubGF6eUFzc2lnbihzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIGFzdC5wcm9wZXJ0eS5uYW1lKSwgJ3t9JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIobGVmdCwgYXN0LnByb3BlcnR5Lm5hbWUpO1xuICAgICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgIGlmIChuYW1lSWQpIHtcbiAgICAgICAgICAgICAgbmFtZUlkLmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgIG5hbWVJZC5uYW1lID0gYXN0LnByb3BlcnR5Lm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsICd1bmRlZmluZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICB9LCAhIWNyZWF0ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICAgIGludG9JZCA9IGludG9JZCB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgaWYgKGFzdC5maWx0ZXIpIHtcbiAgICAgICAgcmlnaHQgPSBzZWxmLmZpbHRlcihhc3QuY2FsbGVlLm5hbWUpO1xuICAgICAgICBhcmdzID0gW107XG4gICAgICAgIGZvckVhY2goYXN0LmFyZ3VtZW50cywgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICAgIHZhciBhcmd1bWVudCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgc2VsZi5yZWN1cnNlKGV4cHIsIGFyZ3VtZW50KTtcbiAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgZXhwcmVzc2lvbiA9IHJpZ2h0ICsgJygnICsgYXJncy5qb2luKCcsJykgKyAnKSc7XG4gICAgICAgIHNlbGYuYXNzaWduKGludG9JZCwgZXhwcmVzc2lvbik7XG4gICAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByaWdodCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgIGxlZnQgPSB7fTtcbiAgICAgICAgYXJncyA9IFtdO1xuICAgICAgICBzZWxmLnJlY3Vyc2UoYXN0LmNhbGxlZSwgcmlnaHQsIGxlZnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuaWZfKHNlbGYubm90TnVsbChyaWdodCksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yRWFjaChhc3QuYXJndW1lbnRzLCBmdW5jdGlvbihleHByKSB7XG4gICAgICAgICAgICAgIHNlbGYucmVjdXJzZShleHByLCBhc3QuY29uc3RhbnQgPyB1bmRlZmluZWQgOiBzZWxmLm5leHRJZCgpLCB1bmRlZmluZWQsIGZ1bmN0aW9uKGFyZ3VtZW50KSB7XG4gICAgICAgICAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChsZWZ0Lm5hbWUpIHtcbiAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHNlbGYubWVtYmVyKGxlZnQuY29udGV4dCwgbGVmdC5uYW1lLCBsZWZ0LmNvbXB1dGVkKSArICcoJyArIGFyZ3Muam9pbignLCcpICsgJyknO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHJpZ2h0ICsgJygnICsgYXJncy5qb2luKCcsJykgKyAnKSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCAndW5kZWZpbmVkJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVjdXJzaW9uRm4oaW50b0lkKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbjpcbiAgICAgIHJpZ2h0ID0gdGhpcy5uZXh0SWQoKTtcbiAgICAgIGxlZnQgPSB7fTtcbiAgICAgIHRoaXMucmVjdXJzZShhc3QubGVmdCwgdW5kZWZpbmVkLCBsZWZ0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5pZl8oc2VsZi5ub3ROdWxsKGxlZnQuY29udGV4dCksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYucmVjdXJzZShhc3QucmlnaHQsIHJpZ2h0KTtcbiAgICAgICAgICBleHByZXNzaW9uID0gc2VsZi5tZW1iZXIobGVmdC5jb250ZXh0LCBsZWZ0Lm5hbWUsIGxlZnQuY29tcHV0ZWQpICsgYXN0Lm9wZXJhdG9yICsgcmlnaHQ7XG4gICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgICAgICByZWN1cnNpb25GbihpbnRvSWQgfHwgZXhwcmVzc2lvbik7XG4gICAgICAgIH0pO1xuICAgICAgfSwgMSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5BcnJheUV4cHJlc3Npb246XG4gICAgICBhcmdzID0gW107XG4gICAgICBmb3JFYWNoKGFzdC5lbGVtZW50cywgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICBzZWxmLnJlY3Vyc2UoZXhwciwgYXN0LmNvbnN0YW50ID8gdW5kZWZpbmVkIDogc2VsZi5uZXh0SWQoKSwgdW5kZWZpbmVkLCBmdW5jdGlvbihhcmd1bWVudCkge1xuICAgICAgICAgIGFyZ3MucHVzaChhcmd1bWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBleHByZXNzaW9uID0gJ1snICsgYXJncy5qb2luKCcsJykgKyAnXSc7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8IGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuT2JqZWN0RXhwcmVzc2lvbjpcbiAgICAgIGFyZ3MgPSBbXTtcbiAgICAgIGNvbXB1dGVkID0gZmFsc2U7XG4gICAgICBmb3JFYWNoKGFzdC5wcm9wZXJ0aWVzLCBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICAgICAgICBpZiAocHJvcGVydHkuY29tcHV0ZWQpIHtcbiAgICAgICAgICBjb21wdXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICAgIGludG9JZCA9IGludG9JZCB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgICB0aGlzLmFzc2lnbihpbnRvSWQsICd7fScpO1xuICAgICAgICBmb3JFYWNoKGFzdC5wcm9wZXJ0aWVzLCBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICAgICAgICAgIGlmIChwcm9wZXJ0eS5jb21wdXRlZCkge1xuICAgICAgICAgICAgbGVmdCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgICBzZWxmLnJlY3Vyc2UocHJvcGVydHkua2V5LCBsZWZ0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGVmdCA9IHByb3BlcnR5LmtleS50eXBlID09PSBBU1QuSWRlbnRpZmllciA/XG4gICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LmtleS5uYW1lIDpcbiAgICAgICAgICAgICAgICAgICAgICAgKCcnICsgcHJvcGVydHkua2V5LnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmlnaHQgPSBzZWxmLm5leHRJZCgpO1xuICAgICAgICAgIHNlbGYucmVjdXJzZShwcm9wZXJ0eS52YWx1ZSwgcmlnaHQpO1xuICAgICAgICAgIHNlbGYuYXNzaWduKHNlbGYubWVtYmVyKGludG9JZCwgbGVmdCwgcHJvcGVydHkuY29tcHV0ZWQpLCByaWdodCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgICAgICBzZWxmLnJlY3Vyc2UocHJvcGVydHkudmFsdWUsIGFzdC5jb25zdGFudCA/IHVuZGVmaW5lZCA6IHNlbGYubmV4dElkKCksIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICAgICAgYXJncy5wdXNoKHNlbGYuZXNjYXBlKFxuICAgICAgICAgICAgICAgIHByb3BlcnR5LmtleS50eXBlID09PSBBU1QuSWRlbnRpZmllciA/IHByb3BlcnR5LmtleS5uYW1lIDpcbiAgICAgICAgICAgICAgICAgICgnJyArIHByb3BlcnR5LmtleS52YWx1ZSkpICtcbiAgICAgICAgICAgICAgICAnOicgKyBleHByKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGV4cHJlc3Npb24gPSAneycgKyBhcmdzLmpvaW4oJywnKSArICd9JztcbiAgICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgIH1cbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCB8fCBleHByZXNzaW9uKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQVNULlRoaXNFeHByZXNzaW9uOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAncycpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICdzJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAnbCcpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICdsJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5OR1ZhbHVlUGFyYW1ldGVyOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAndicpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICd2Jyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH0sXG5cbiAgZ2V0SGFzT3duUHJvcGVydHk6IGZ1bmN0aW9uKGVsZW1lbnQsIHByb3BlcnR5KSB7XG4gICAgdmFyIGtleSA9IGVsZW1lbnQgKyAnLicgKyBwcm9wZXJ0eTtcbiAgICB2YXIgb3duID0gdGhpcy5jdXJyZW50KCkub3duO1xuICAgIGlmICghb3duLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIG93bltrZXldID0gdGhpcy5uZXh0SWQoZmFsc2UsIGVsZW1lbnQgKyAnJiYoJyArIHRoaXMuZXNjYXBlKHByb3BlcnR5KSArICcgaW4gJyArIGVsZW1lbnQgKyAnKScpO1xuICAgIH1cbiAgICByZXR1cm4gb3duW2tleV07XG4gIH0sXG5cbiAgYXNzaWduOiBmdW5jdGlvbihpZCwgdmFsdWUpIHtcbiAgICBpZiAoIWlkKSByZXR1cm47XG4gICAgdGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKGlkLCAnPScsIHZhbHVlLCAnOycpO1xuICAgIHJldHVybiBpZDtcbiAgfSxcblxuICBmaWx0ZXI6IGZ1bmN0aW9uKGZpbHRlck5hbWUpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuZmlsdGVycy5oYXNPd25Qcm9wZXJ0eShmaWx0ZXJOYW1lKSkge1xuICAgICAgdGhpcy5zdGF0ZS5maWx0ZXJzW2ZpbHRlck5hbWVdID0gdGhpcy5uZXh0SWQodHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlLmZpbHRlcnNbZmlsdGVyTmFtZV07XG4gIH0sXG5cbiAgaWZEZWZpbmVkOiBmdW5jdGlvbihpZCwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuICdpZkRlZmluZWQoJyArIGlkICsgJywnICsgdGhpcy5lc2NhcGUoZGVmYXVsdFZhbHVlKSArICcpJztcbiAgfSxcblxuICBwbHVzOiBmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiAncGx1cygnICsgbGVmdCArICcsJyArIHJpZ2h0ICsgJyknO1xuICB9LFxuXG4gIHJldHVybl86IGZ1bmN0aW9uKGlkKSB7XG4gICAgdGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKCdyZXR1cm4gJywgaWQsICc7Jyk7XG4gIH0sXG5cbiAgaWZfOiBmdW5jdGlvbih0ZXN0LCBhbHRlcm5hdGUsIGNvbnNlcXVlbnQpIHtcbiAgICBpZiAodGVzdCA9PT0gdHJ1ZSkge1xuICAgICAgYWx0ZXJuYXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBib2R5ID0gdGhpcy5jdXJyZW50KCkuYm9keTtcbiAgICAgIGJvZHkucHVzaCgnaWYoJywgdGVzdCwgJyl7Jyk7XG4gICAgICBhbHRlcm5hdGUoKTtcbiAgICAgIGJvZHkucHVzaCgnfScpO1xuICAgICAgaWYgKGNvbnNlcXVlbnQpIHtcbiAgICAgICAgYm9keS5wdXNoKCdlbHNleycpO1xuICAgICAgICBjb25zZXF1ZW50KCk7XG4gICAgICAgIGJvZHkucHVzaCgnfScpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBub3Q6IGZ1bmN0aW9uKGV4cHJlc3Npb24pIHtcbiAgICByZXR1cm4gJyEoJyArIGV4cHJlc3Npb24gKyAnKSc7XG4gIH0sXG5cbiAgaXNOdWxsOiBmdW5jdGlvbihleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIGV4cHJlc3Npb24gKyAnPT1udWxsJztcbiAgfSxcblxuICBub3ROdWxsOiBmdW5jdGlvbihleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIGV4cHJlc3Npb24gKyAnIT1udWxsJztcbiAgfSxcblxuICBub25Db21wdXRlZE1lbWJlcjogZnVuY3Rpb24obGVmdCwgcmlnaHQpIHtcbiAgICB2YXIgU0FGRV9JREVOVElGSUVSID0gL15bJF9hLXpBLVpdWyRfYS16QS1aMC05XSokLztcbiAgICB2YXIgVU5TQUZFX0NIQVJBQ1RFUlMgPSAvW14kX2EtekEtWjAtOV0vZztcbiAgICBpZiAoU0FGRV9JREVOVElGSUVSLnRlc3QocmlnaHQpKSB7XG4gICAgICByZXR1cm4gbGVmdCArICcuJyArIHJpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbGVmdCAgKyAnW1wiJyArIHJpZ2h0LnJlcGxhY2UoVU5TQUZFX0NIQVJBQ1RFUlMsIHRoaXMuc3RyaW5nRXNjYXBlRm4pICsgJ1wiXSc7XG4gICAgfVxuICB9LFxuXG4gIGNvbXB1dGVkTWVtYmVyOiBmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiBsZWZ0ICsgJ1snICsgcmlnaHQgKyAnXSc7XG4gIH0sXG5cbiAgbWVtYmVyOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29tcHV0ZWQpIHtcbiAgICBpZiAoY29tcHV0ZWQpIHJldHVybiB0aGlzLmNvbXB1dGVkTWVtYmVyKGxlZnQsIHJpZ2h0KTtcbiAgICByZXR1cm4gdGhpcy5ub25Db21wdXRlZE1lbWJlcihsZWZ0LCByaWdodCk7XG4gIH0sXG5cbiAgZ2V0U3RyaW5nVmFsdWU6IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICB0aGlzLmFzc2lnbihpdGVtLCAnZ2V0U3RyaW5nVmFsdWUoJyArIGl0ZW0gKyAnKScpO1xuICB9LFxuXG4gIGxhenlSZWN1cnNlOiBmdW5jdGlvbihhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKTtcbiAgICB9O1xuICB9LFxuXG4gIGxhenlBc3NpZ246IGZ1bmN0aW9uKGlkLCB2YWx1ZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLmFzc2lnbihpZCwgdmFsdWUpO1xuICAgIH07XG4gIH0sXG5cbiAgc3RyaW5nRXNjYXBlUmVnZXg6IC9bXiBhLXpBLVowLTldL2csXG5cbiAgc3RyaW5nRXNjYXBlRm46IGZ1bmN0aW9uKGMpIHtcbiAgICByZXR1cm4gJ1xcXFx1JyArICgnMDAwMCcgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7XG4gIH0sXG5cbiAgZXNjYXBlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHJldHVybiAnXFwnJyArIHZhbHVlLnJlcGxhY2UodGhpcy5zdHJpbmdFc2NhcGVSZWdleCwgdGhpcy5zdHJpbmdFc2NhcGVGbikgKyAnXFwnJztcbiAgICBpZiAoaXNOdW1iZXIodmFsdWUpKSByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICBpZiAodmFsdWUgPT09IHRydWUpIHJldHVybiAndHJ1ZSc7XG4gICAgaWYgKHZhbHVlID09PSBmYWxzZSkgcmV0dXJuICdmYWxzZSc7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gJ251bGwnO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gJ3VuZGVmaW5lZCc7XG5cbiAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2VzYycsICdJTVBPU1NJQkxFJyk7XG4gIH0sXG5cbiAgbmV4dElkOiBmdW5jdGlvbihza2lwLCBpbml0KSB7XG4gICAgdmFyIGlkID0gJ3YnICsgKHRoaXMuc3RhdGUubmV4dElkKyspO1xuICAgIGlmICghc2tpcCkge1xuICAgICAgdGhpcy5jdXJyZW50KCkudmFycy5wdXNoKGlkICsgKGluaXQgPyAnPScgKyBpbml0IDogJycpKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkO1xuICB9LFxuXG4gIGN1cnJlbnQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlW3RoaXMuc3RhdGUuY29tcHV0aW5nXTtcbiAgfVxufTtcblxuXG5mdW5jdGlvbiBBU1RJbnRlcnByZXRlcigkZmlsdGVyKSB7XG4gIHRoaXMuJGZpbHRlciA9ICRmaWx0ZXI7XG59XG5cbkFTVEludGVycHJldGVyLnByb3RvdHlwZSA9IHtcbiAgY29tcGlsZTogZnVuY3Rpb24oYXN0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LCBzZWxmLiRmaWx0ZXIpO1xuICAgIHZhciBhc3NpZ25hYmxlO1xuICAgIHZhciBhc3NpZ247XG4gICAgaWYgKChhc3NpZ25hYmxlID0gYXNzaWduYWJsZUFTVChhc3QpKSkge1xuICAgICAgYXNzaWduID0gdGhpcy5yZWN1cnNlKGFzc2lnbmFibGUpO1xuICAgIH1cbiAgICB2YXIgdG9XYXRjaCA9IGdldElucHV0cyhhc3QuYm9keSk7XG4gICAgdmFyIGlucHV0cztcbiAgICBpZiAodG9XYXRjaCkge1xuICAgICAgaW5wdXRzID0gW107XG4gICAgICBmb3JFYWNoKHRvV2F0Y2gsIGZ1bmN0aW9uKHdhdGNoLCBrZXkpIHtcbiAgICAgICAgdmFyIGlucHV0ID0gc2VsZi5yZWN1cnNlKHdhdGNoKTtcbiAgICAgICAgaW5wdXQuaXNQdXJlID0gd2F0Y2guaXNQdXJlO1xuICAgICAgICB3YXRjaC5pbnB1dCA9IGlucHV0O1xuICAgICAgICBpbnB1dHMucHVzaChpbnB1dCk7XG4gICAgICAgIHdhdGNoLndhdGNoSWQgPSBrZXk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdmFyIGV4cHJlc3Npb25zID0gW107XG4gICAgZm9yRWFjaChhc3QuYm9keSwgZnVuY3Rpb24oZXhwcmVzc2lvbikge1xuICAgICAgZXhwcmVzc2lvbnMucHVzaChzZWxmLnJlY3Vyc2UoZXhwcmVzc2lvbi5leHByZXNzaW9uKSk7XG4gICAgfSk7XG4gICAgdmFyIGZuID0gYXN0LmJvZHkubGVuZ3RoID09PSAwID8gbm9vcCA6XG4gICAgICAgICAgICAgYXN0LmJvZHkubGVuZ3RoID09PSAxID8gZXhwcmVzc2lvbnNbMF0gOlxuICAgICAgICAgICAgIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMpIHtcbiAgICAgICAgICAgICAgIHZhciBsYXN0VmFsdWU7XG4gICAgICAgICAgICAgICBmb3JFYWNoKGV4cHJlc3Npb25zLCBmdW5jdGlvbihleHApIHtcbiAgICAgICAgICAgICAgICAgbGFzdFZhbHVlID0gZXhwKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICByZXR1cm4gbGFzdFZhbHVlO1xuICAgICAgICAgICAgIH07XG4gICAgaWYgKGFzc2lnbikge1xuICAgICAgZm4uYXNzaWduID0gZnVuY3Rpb24oc2NvcGUsIHZhbHVlLCBsb2NhbHMpIHtcbiAgICAgICAgcmV0dXJuIGFzc2lnbihzY29wZSwgbG9jYWxzLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoaW5wdXRzKSB7XG4gICAgICBmbi5pbnB1dHMgPSBpbnB1dHM7XG4gICAgfVxuICAgIHJldHVybiBmbjtcbiAgfSxcblxuICByZWN1cnNlOiBmdW5jdGlvbihhc3QsIGNvbnRleHQsIGNyZWF0ZSkge1xuICAgIHZhciBsZWZ0LCByaWdodCwgc2VsZiA9IHRoaXMsIGFyZ3M7XG4gICAgaWYgKGFzdC5pbnB1dCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5wdXRzKGFzdC5pbnB1dCwgYXN0LndhdGNoSWQpO1xuICAgIH1cbiAgICBzd2l0Y2ggKGFzdC50eXBlKSB7XG4gICAgY2FzZSBBU1QuTGl0ZXJhbDpcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlKGFzdC52YWx1ZSwgY29udGV4dCk7XG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LmFyZ3VtZW50KTtcbiAgICAgIHJldHVybiB0aGlzWyd1bmFyeScgKyBhc3Qub3BlcmF0b3JdKHJpZ2h0LCBjb250ZXh0KTtcbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IHRoaXMucmVjdXJzZShhc3QubGVmdCk7XG4gICAgICByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucmlnaHQpO1xuICAgICAgcmV0dXJuIHRoaXNbJ2JpbmFyeScgKyBhc3Qub3BlcmF0b3JdKGxlZnQsIHJpZ2h0LCBjb250ZXh0KTtcbiAgICBjYXNlIEFTVC5Mb2dpY2FsRXhwcmVzc2lvbjpcbiAgICAgIGxlZnQgPSB0aGlzLnJlY3Vyc2UoYXN0LmxlZnQpO1xuICAgICAgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LnJpZ2h0KTtcbiAgICAgIHJldHVybiB0aGlzWydiaW5hcnknICsgYXN0Lm9wZXJhdG9yXShsZWZ0LCByaWdodCwgY29udGV4dCk7XG4gICAgY2FzZSBBU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIHRoaXNbJ3Rlcm5hcnk/OiddKFxuICAgICAgICB0aGlzLnJlY3Vyc2UoYXN0LnRlc3QpLFxuICAgICAgICB0aGlzLnJlY3Vyc2UoYXN0LmFsdGVybmF0ZSksXG4gICAgICAgIHRoaXMucmVjdXJzZShhc3QuY29uc2VxdWVudCksXG4gICAgICAgIGNvbnRleHRcbiAgICAgICk7XG4gICAgY2FzZSBBU1QuSWRlbnRpZmllcjpcbiAgICAgIHJldHVybiBzZWxmLmlkZW50aWZpZXIoYXN0Lm5hbWUsIGNvbnRleHQsIGNyZWF0ZSk7XG4gICAgY2FzZSBBU1QuTWVtYmVyRXhwcmVzc2lvbjpcbiAgICAgIGxlZnQgPSB0aGlzLnJlY3Vyc2UoYXN0Lm9iamVjdCwgZmFsc2UsICEhY3JlYXRlKTtcbiAgICAgIGlmICghYXN0LmNvbXB1dGVkKSB7XG4gICAgICAgIHJpZ2h0ID0gYXN0LnByb3BlcnR5Lm5hbWU7XG4gICAgICB9XG4gICAgICBpZiAoYXN0LmNvbXB1dGVkKSByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucHJvcGVydHkpO1xuICAgICAgcmV0dXJuIGFzdC5jb21wdXRlZCA/XG4gICAgICAgIHRoaXMuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQsIGNvbnRleHQsIGNyZWF0ZSkgOlxuICAgICAgICB0aGlzLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIHJpZ2h0LCBjb250ZXh0LCBjcmVhdGUpO1xuICAgIGNhc2UgQVNULkNhbGxFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QuYXJndW1lbnRzLCBmdW5jdGlvbihleHByKSB7XG4gICAgICAgIGFyZ3MucHVzaChzZWxmLnJlY3Vyc2UoZXhwcikpO1xuICAgICAgfSk7XG4gICAgICBpZiAoYXN0LmZpbHRlcikgcmlnaHQgPSB0aGlzLiRmaWx0ZXIoYXN0LmNhbGxlZS5uYW1lKTtcbiAgICAgIGlmICghYXN0LmZpbHRlcikgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LmNhbGxlZSwgdHJ1ZSk7XG4gICAgICByZXR1cm4gYXN0LmZpbHRlciA/XG4gICAgICAgIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFsdWVzLnB1c2goYXJnc1tpXShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgdmFsdWUgPSByaWdodC5hcHBseSh1bmRlZmluZWQsIHZhbHVlcywgaW5wdXRzKTtcbiAgICAgICAgICByZXR1cm4gY29udGV4dCA/IHtjb250ZXh0OiB1bmRlZmluZWQsIG5hbWU6IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgICB9IDpcbiAgICAgICAgZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICBpZiAocmhzLnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICB2YWx1ZXMucHVzaChhcmdzW2ldKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSA9IHJocy52YWx1ZS5hcHBseShyaHMuY29udGV4dCwgdmFsdWVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgICB9O1xuICAgIGNhc2UgQVNULkFzc2lnbm1lbnRFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IHRoaXMucmVjdXJzZShhc3QubGVmdCwgdHJ1ZSwgMSk7XG4gICAgICByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucmlnaHQpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgIHZhciBsaHMgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgdmFyIHJocyA9IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgbGhzLmNvbnRleHRbbGhzLm5hbWVdID0gcmhzO1xuICAgICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogcmhzfSA6IHJocztcbiAgICAgIH07XG4gICAgY2FzZSBBU1QuQXJyYXlFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QuZWxlbWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgICAgYXJncy5wdXNoKHNlbGYucmVjdXJzZShleHByKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgICB2YXIgdmFsdWUgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgdmFsdWUucHVzaChhcmdzW2ldKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgfTtcbiAgICBjYXNlIEFTVC5PYmplY3RFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgICAgaWYgKHByb3BlcnR5LmNvbXB1dGVkKSB7XG4gICAgICAgICAgYXJncy5wdXNoKHtrZXk6IHNlbGYucmVjdXJzZShwcm9wZXJ0eS5rZXkpLFxuICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5yZWN1cnNlKHByb3BlcnR5LnZhbHVlKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFyZ3MucHVzaCh7a2V5OiBwcm9wZXJ0eS5rZXkudHlwZSA9PT0gQVNULklkZW50aWZpZXIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS5rZXkubmFtZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICgnJyArIHByb3BlcnR5LmtleS52YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgICBjb21wdXRlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5yZWN1cnNlKHByb3BlcnR5LnZhbHVlKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgICB2YXIgdmFsdWUgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgaWYgKGFyZ3NbaV0uY29tcHV0ZWQpIHtcbiAgICAgICAgICAgIHZhbHVlW2FyZ3NbaV0ua2V5KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKV0gPSBhcmdzW2ldLnZhbHVlKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWVbYXJnc1tpXS5rZXldID0gYXJnc1tpXS52YWx1ZShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiB2YWx1ZX0gOiB2YWx1ZTtcbiAgICAgIH07XG4gICAgY2FzZSBBU1QuVGhpc0V4cHJlc3Npb246XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHNjb3BlfSA6IHNjb3BlO1xuICAgICAgfTtcbiAgICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGxvY2Fsc30gOiBsb2NhbHM7XG4gICAgICB9O1xuICAgIGNhc2UgQVNULk5HVmFsdWVQYXJhbWV0ZXI6XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhc3NpZ259IDogYXNzaWduO1xuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgJ3VuYXJ5Kyc6IGZ1bmN0aW9uKGFyZ3VtZW50LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gYXJndW1lbnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgaWYgKGlzRGVmaW5lZChhcmcpKSB7XG4gICAgICAgIGFyZyA9ICthcmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmcgPSAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ3VuYXJ5LSc6IGZ1bmN0aW9uKGFyZ3VtZW50LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gYXJndW1lbnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgaWYgKGlzRGVmaW5lZChhcmcpKSB7XG4gICAgICAgIGFyZyA9IC1hcmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmcgPSAtMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICd1bmFyeSEnOiBmdW5jdGlvbihhcmd1bWVudCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9ICFhcmd1bWVudChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Kyc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgbGhzID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIGFyZyA9IHBsdXNGbihsaHMsIHJocyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5LSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgbGhzID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIGFyZyA9IChpc0RlZmluZWQobGhzKSA/IGxocyA6IDApIC0gKGlzRGVmaW5lZChyaHMpID8gcmhzIDogMCk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Kic6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgKiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Lyc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgLyByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5JSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgJSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PT09JzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSA9PT0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSE9PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgIT09IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICdiaW5hcnk9PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXFlcWVxXG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPT0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSE9JzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSAhPSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PCc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPCByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Pic6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PD0nOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIDw9IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICdiaW5hcnk+PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPj0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSYmJzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSAmJiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5fHwnOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHx8IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICd0ZXJuYXJ5PzonOiBmdW5jdGlvbih0ZXN0LCBhbHRlcm5hdGUsIGNvbnNlcXVlbnQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSB0ZXN0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSA/IGFsdGVybmF0ZShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgOiBjb25zZXF1ZW50KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gIHZhbHVlOiBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIGNvbnRleHQgPyB7Y29udGV4dDogdW5kZWZpbmVkLCBuYW1lOiB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX0gOiB2YWx1ZTsgfTtcbiAgfSxcbiAgaWRlbnRpZmllcjogZnVuY3Rpb24obmFtZSwgY29udGV4dCwgY3JlYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYmFzZSA9IGxvY2FscyAmJiAobmFtZSBpbiBsb2NhbHMpID8gbG9jYWxzIDogc2NvcGU7XG4gICAgICBpZiAoY3JlYXRlICYmIGNyZWF0ZSAhPT0gMSAmJiBiYXNlICYmIGJhc2VbbmFtZV0gPT0gbnVsbCkge1xuICAgICAgICBiYXNlW25hbWVdID0ge307XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWUgPSBiYXNlID8gYmFzZVtuYW1lXSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiB7Y29udGV4dDogYmFzZSwgbmFtZTogbmFtZSwgdmFsdWU6IHZhbHVlfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuICBjb21wdXRlZE1lbWJlcjogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQsIGNyZWF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGxocyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIHJocztcbiAgICAgIHZhciB2YWx1ZTtcbiAgICAgIGlmIChsaHMgIT0gbnVsbCkge1xuICAgICAgICByaHMgPSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICAgIHJocyA9IGdldFN0cmluZ1ZhbHVlKHJocyk7XG4gICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgaWYgKGxocyAmJiAhKGxoc1tyaHNdKSkge1xuICAgICAgICAgICAgbGhzW3Joc10gPSB7fTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSBsaHNbcmhzXTtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiB7Y29udGV4dDogbGhzLCBuYW1lOiByaHMsIHZhbHVlOiB2YWx1ZX07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgbm9uQ29tcHV0ZWRNZW1iZXI6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0LCBjcmVhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBsaHMgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgIGlmIChsaHMgJiYgbGhzW3JpZ2h0XSA9PSBudWxsKSB7XG4gICAgICAgICAgbGhzW3JpZ2h0XSA9IHt9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWUgPSBsaHMgIT0gbnVsbCA/IGxoc1tyaWdodF0gOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICByZXR1cm4ge2NvbnRleHQ6IGxocywgbmFtZTogcmlnaHQsIHZhbHVlOiB2YWx1ZX07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgaW5wdXRzOiBmdW5jdGlvbihpbnB1dCwgd2F0Y2hJZCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgdmFsdWUsIGxvY2FscywgaW5wdXRzKSB7XG4gICAgICBpZiAoaW5wdXRzKSByZXR1cm4gaW5wdXRzW3dhdGNoSWRdO1xuICAgICAgcmV0dXJuIGlucHV0KHNjb3BlLCB2YWx1ZSwgbG9jYWxzKTtcbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBQYXJzZXIobGV4ZXIsICRmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgdGhpcy5hc3QgPSBuZXcgQVNUKGxleGVyLCBvcHRpb25zKTtcbiAgdGhpcy5hc3RDb21waWxlciA9IG9wdGlvbnMuY3NwID8gbmV3IEFTVEludGVycHJldGVyKCRmaWx0ZXIpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEFTVENvbXBpbGVyKCRmaWx0ZXIpO1xufVxuXG5QYXJzZXIucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogUGFyc2VyLFxuXG4gIHBhcnNlOiBmdW5jdGlvbih0ZXh0KSB7XG4gICAgdmFyIGFzdCA9IHRoaXMuZ2V0QXN0KHRleHQpO1xuICAgIHZhciBmbiA9IHRoaXMuYXN0Q29tcGlsZXIuY29tcGlsZShhc3QuYXN0KTtcbiAgICBmbi5saXRlcmFsID0gaXNMaXRlcmFsKGFzdC5hc3QpO1xuICAgIGZuLmNvbnN0YW50ID0gaXNDb25zdGFudChhc3QuYXN0KTtcbiAgICBmbi5vbmVUaW1lID0gYXN0Lm9uZVRpbWU7XG4gICAgcmV0dXJuIGZuO1xuICB9LFxuXG4gIGdldEFzdDogZnVuY3Rpb24oZXhwKSB7XG4gICAgdmFyIG9uZVRpbWUgPSBmYWxzZTtcbiAgICBleHAgPSBleHAudHJpbSgpO1xuXG4gICAgaWYgKGV4cC5jaGFyQXQoMCkgPT09ICc6JyAmJiBleHAuY2hhckF0KDEpID09PSAnOicpIHtcbiAgICAgIG9uZVRpbWUgPSB0cnVlO1xuICAgICAgZXhwID0gZXhwLnN1YnN0cmluZygyKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGFzdDogdGhpcy5hc3QuYXN0KGV4cCksXG4gICAgICBvbmVUaW1lOiBvbmVUaW1lXG4gICAgfTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0VmFsdWVPZih2YWx1ZSkge1xuICByZXR1cm4gaXNGdW5jdGlvbih2YWx1ZS52YWx1ZU9mKSA/IHZhbHVlLnZhbHVlT2YoKSA6IG9iamVjdFZhbHVlT2YuY2FsbCh2YWx1ZSk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRwYXJzZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBDb252ZXJ0cyBBbmd1bGFySlMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaW50byBhIGZ1bmN0aW9uLlxuICpcbiAqIGBgYGpzXG4gKiAgIHZhciBnZXR0ZXIgPSAkcGFyc2UoJ3VzZXIubmFtZScpO1xuICogICB2YXIgc2V0dGVyID0gZ2V0dGVyLmFzc2lnbjtcbiAqICAgdmFyIGNvbnRleHQgPSB7dXNlcjp7bmFtZTonQW5ndWxhckpTJ319O1xuICogICB2YXIgbG9jYWxzID0ge3VzZXI6e25hbWU6J2xvY2FsJ319O1xuICpcbiAqICAgZXhwZWN0KGdldHRlcihjb250ZXh0KSkudG9FcXVhbCgnQW5ndWxhckpTJyk7XG4gKiAgIHNldHRlcihjb250ZXh0LCAnbmV3VmFsdWUnKTtcbiAqICAgZXhwZWN0KGNvbnRleHQudXNlci5uYW1lKS50b0VxdWFsKCduZXdWYWx1ZScpO1xuICogICBleHBlY3QoZ2V0dGVyKGNvbnRleHQsIGxvY2FscykpLnRvRXF1YWwoJ2xvY2FsJyk7XG4gKiBgYGBcbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gKlxuICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xuICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXG4gKiAgICAgIGBjb250ZXh0YC5cbiAqXG4gKiAgICBUaGUgcmV0dXJuZWQgZnVuY3Rpb24gYWxzbyBoYXMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogICAgICAqIGBsaXRlcmFsYCDigJMgYHtib29sZWFufWAg4oCTIHdoZXRoZXIgdGhlIGV4cHJlc3Npb24ncyB0b3AtbGV2ZWwgbm9kZSBpcyBhIEphdmFTY3JpcHRcbiAqICAgICAgICBsaXRlcmFsLlxuICogICAgICAqIGBjb25zdGFudGAg4oCTIGB7Ym9vbGVhbn1gIOKAkyB3aGV0aGVyIHRoZSBleHByZXNzaW9uIGlzIG1hZGUgZW50aXJlbHkgb2YgSmF2YVNjcmlwdFxuICogICAgICAgIGNvbnN0YW50IGxpdGVyYWxzLlxuICogICAgICAqIGBhc3NpZ25gIOKAkyBgez9mdW5jdGlvbihjb250ZXh0LCB2YWx1ZSl9YCDigJMgaWYgdGhlIGV4cHJlc3Npb24gaXMgYXNzaWduYWJsZSwgdGhpcyB3aWxsIGJlXG4gKiAgICAgICAgc2V0IHRvIGEgZnVuY3Rpb24gdG8gY2hhbmdlIGl0cyB2YWx1ZSBvbiB0aGUgZ2l2ZW4gY29udGV4dC5cbiAqXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJHBhcnNlUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgJHBhcnNlUHJvdmlkZXJgIGNhbiBiZSB1c2VkIGZvciBjb25maWd1cmluZyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUge0BsaW5rIG5nLiRwYXJzZSAkcGFyc2V9XG4gKiAgc2VydmljZS5cbiAqL1xuZnVuY3Rpb24gJFBhcnNlUHJvdmlkZXIoKSB7XG4gIHZhciBjYWNoZSA9IGNyZWF0ZU1hcCgpO1xuICB2YXIgbGl0ZXJhbHMgPSB7XG4gICAgJ3RydWUnOiB0cnVlLFxuICAgICdmYWxzZSc6IGZhbHNlLFxuICAgICdudWxsJzogbnVsbCxcbiAgICAndW5kZWZpbmVkJzogdW5kZWZpbmVkXG4gIH07XG4gIHZhciBpZGVudFN0YXJ0LCBpZGVudENvbnRpbnVlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRwYXJzZVByb3ZpZGVyI2FkZExpdGVyYWxcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIENvbmZpZ3VyZSAkcGFyc2Ugc2VydmljZSB0byBhZGQgbGl0ZXJhbCB2YWx1ZXMgdGhhdCB3aWxsIGJlIHByZXNlbnQgYXMgbGl0ZXJhbCBhdCBleHByZXNzaW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxpdGVyYWxOYW1lIFRva2VuIGZvciB0aGUgbGl0ZXJhbCB2YWx1ZS4gVGhlIGxpdGVyYWwgbmFtZSB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgbGl0ZXJhbCBuYW1lLlxuICAgKiBAcGFyYW0geyp9IGxpdGVyYWxWYWx1ZSBWYWx1ZSBmb3IgdGhpcyBsaXRlcmFsLiBBbGwgbGl0ZXJhbCB2YWx1ZXMgbXVzdCBiZSBwcmltaXRpdmVzIG9yIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiovXG4gIHRoaXMuYWRkTGl0ZXJhbCA9IGZ1bmN0aW9uKGxpdGVyYWxOYW1lLCBsaXRlcmFsVmFsdWUpIHtcbiAgICBsaXRlcmFsc1tsaXRlcmFsTmFtZV0gPSBsaXRlcmFsVmFsdWU7XG4gIH07XG5cbiAvKipcbiAgKiBAbmdkb2MgbWV0aG9kXG4gICogQG5hbWUgJHBhcnNlUHJvdmlkZXIjc2V0SWRlbnRpZmllckZuc1xuICAqXG4gICogQGRlc2NyaXB0aW9uXG4gICpcbiAgKiBBbGxvd3MgZGVmaW5pbmcgdGhlIHNldCBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIGFsbG93ZWQgaW4gQW5ndWxhckpTIGV4cHJlc3Npb25zLiBUaGUgZnVuY3Rpb25cbiAgKiBgaWRlbnRpZmllclN0YXJ0YCB3aWxsIGdldCBjYWxsZWQgdG8ga25vdyBpZiBhIGdpdmVuIGNoYXJhY3RlciBpcyBhIHZhbGlkIGNoYXJhY3RlciB0byBiZSB0aGVcbiAgKiBmaXJzdCBjaGFyYWN0ZXIgZm9yIGFuIGlkZW50aWZpZXIuIFRoZSBmdW5jdGlvbiBgaWRlbnRpZmllckNvbnRpbnVlYCB3aWxsIGdldCBjYWxsZWQgdG8ga25vdyBpZlxuICAqIGEgZ2l2ZW4gY2hhcmFjdGVyIGlzIGEgdmFsaWQgY2hhcmFjdGVyIHRvIGJlIGEgZm9sbG93LXVwIGlkZW50aWZpZXIgY2hhcmFjdGVyLiBUaGUgZnVuY3Rpb25zXG4gICogYGlkZW50aWZpZXJTdGFydGAgYW5kIGBpZGVudGlmaWVyQ29udGludWVgIHdpbGwgcmVjZWl2ZSBhcyBhcmd1bWVudHMgdGhlIHNpbmdsZSBjaGFyYWN0ZXIgdG8gYmVcbiAgKiBpZGVudGlmaWVyIGFuZCB0aGUgY2hhcmFjdGVyIGNvZGUgcG9pbnQuIFRoZXNlIGFyZ3VtZW50cyB3aWxsIGJlIGBzdHJpbmdgIGFuZCBgbnVtZXJpY2AuIEtlZXAgaW5cbiAgKiBtaW5kIHRoYXQgdGhlIGBzdHJpbmdgIHBhcmFtZXRlciBjYW4gYmUgdHdvIGNoYXJhY3RlcnMgbG9uZyBkZXBlbmRpbmcgb24gdGhlIGNoYXJhY3RlclxuICAqIHJlcHJlc2VudGF0aW9uLiBJdCBpcyBleHBlY3RlZCBmb3IgdGhlIGZ1bmN0aW9uIHRvIHJldHVybiBgdHJ1ZWAgb3IgYGZhbHNlYCwgd2hldGhlciB0aGF0XG4gICogY2hhcmFjdGVyIGlzIGFsbG93ZWQgb3Igbm90LlxuICAqXG4gICogU2luY2UgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBleHRlbnNpdmVseSwga2VlcCB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlc2UgZnVuY3Rpb25zIGZhc3QsXG4gICogYXMgdGhlIHBlcmZvcm1hbmNlIG9mIHRoZXNlIGZ1bmN0aW9ucyBoYXZlIGEgZGlyZWN0IGltcGFjdCBvbiB0aGUgZXhwcmVzc2lvbnMgcGFyc2luZyBzcGVlZC5cbiAgKlxuICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBpZGVudGlmaWVyU3RhcnQgVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBkZWNpZGUgd2hldGhlciB0aGUgZ2l2ZW4gY2hhcmFjdGVyIGlzXG4gICogICBhIHZhbGlkIGlkZW50aWZpZXIgc3RhcnQgY2hhcmFjdGVyLlxuICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBpZGVudGlmaWVyQ29udGludWUgVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBkZWNpZGUgd2hldGhlciB0aGUgZ2l2ZW4gY2hhcmFjdGVyIGlzXG4gICogICBhIHZhbGlkIGlkZW50aWZpZXIgY29udGludWUgY2hhcmFjdGVyLlxuICAqL1xuICB0aGlzLnNldElkZW50aWZpZXJGbnMgPSBmdW5jdGlvbihpZGVudGlmaWVyU3RhcnQsIGlkZW50aWZpZXJDb250aW51ZSkge1xuICAgIGlkZW50U3RhcnQgPSBpZGVudGlmaWVyU3RhcnQ7XG4gICAgaWRlbnRDb250aW51ZSA9IGlkZW50aWZpZXJDb250aW51ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbJyRmaWx0ZXInLCBmdW5jdGlvbigkZmlsdGVyKSB7XG4gICAgdmFyIG5vVW5zYWZlRXZhbCA9IGNzcCgpLm5vVW5zYWZlRXZhbDtcbiAgICB2YXIgJHBhcnNlT3B0aW9ucyA9IHtcbiAgICAgICAgICBjc3A6IG5vVW5zYWZlRXZhbCxcbiAgICAgICAgICBsaXRlcmFsczogY29weShsaXRlcmFscyksXG4gICAgICAgICAgaXNJZGVudGlmaWVyU3RhcnQ6IGlzRnVuY3Rpb24oaWRlbnRTdGFydCkgJiYgaWRlbnRTdGFydCxcbiAgICAgICAgICBpc0lkZW50aWZpZXJDb250aW51ZTogaXNGdW5jdGlvbihpZGVudENvbnRpbnVlKSAmJiBpZGVudENvbnRpbnVlXG4gICAgICAgIH07XG4gICAgJHBhcnNlLiQkZ2V0QXN0ID0gJCRnZXRBc3Q7XG4gICAgcmV0dXJuICRwYXJzZTtcblxuICAgIGZ1bmN0aW9uICRwYXJzZShleHAsIGludGVyY2VwdG9yRm4pIHtcbiAgICAgIHZhciBwYXJzZWRFeHByZXNzaW9uLCBjYWNoZUtleTtcblxuICAgICAgc3dpdGNoICh0eXBlb2YgZXhwKSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgZXhwID0gZXhwLnRyaW0oKTtcbiAgICAgICAgICBjYWNoZUtleSA9IGV4cDtcblxuICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBjYWNoZVtjYWNoZUtleV07XG5cbiAgICAgICAgICBpZiAoIXBhcnNlZEV4cHJlc3Npb24pIHtcbiAgICAgICAgICAgIHZhciBsZXhlciA9IG5ldyBMZXhlcigkcGFyc2VPcHRpb25zKTtcbiAgICAgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgUGFyc2VyKGxleGVyLCAkZmlsdGVyLCAkcGFyc2VPcHRpb25zKTtcbiAgICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBwYXJzZXIucGFyc2UoZXhwKTtcblxuICAgICAgICAgICAgY2FjaGVbY2FjaGVLZXldID0gYWRkV2F0Y2hEZWxlZ2F0ZShwYXJzZWRFeHByZXNzaW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGFkZEludGVyY2VwdG9yKHBhcnNlZEV4cHJlc3Npb24sIGludGVyY2VwdG9yRm4pO1xuXG4gICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICByZXR1cm4gYWRkSW50ZXJjZXB0b3IoZXhwLCBpbnRlcmNlcHRvckZuKTtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBhZGRJbnRlcmNlcHRvcihub29wLCBpbnRlcmNlcHRvckZuKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiAkJGdldEFzdChleHApIHtcbiAgICAgIHZhciBsZXhlciA9IG5ldyBMZXhlcigkcGFyc2VPcHRpb25zKTtcbiAgICAgIHZhciBwYXJzZXIgPSBuZXcgUGFyc2VyKGxleGVyLCAkZmlsdGVyLCAkcGFyc2VPcHRpb25zKTtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0QXN0KGV4cCkuYXN0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2sobmV3VmFsdWUsIG9sZFZhbHVlT2ZWYWx1ZSwgY29tcGFyZU9iamVjdElkZW50aXR5KSB7XG5cbiAgICAgIGlmIChuZXdWYWx1ZSA9PSBudWxsIHx8IG9sZFZhbHVlT2ZWYWx1ZSA9PSBudWxsKSB7IC8vIG51bGwvdW5kZWZpbmVkXG4gICAgICAgIHJldHVybiBuZXdWYWx1ZSA9PT0gb2xkVmFsdWVPZlZhbHVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG5ld1ZhbHVlID09PSAnb2JqZWN0Jykge1xuXG4gICAgICAgIC8vIGF0dGVtcHQgdG8gY29udmVydCB0aGUgdmFsdWUgdG8gYSBwcmltaXRpdmUgdHlwZVxuICAgICAgICAvLyBUT0RPKGRvY3MpOiBhZGQgYSBub3RlIHRvIGRvY3MgdGhhdCBieSBpbXBsZW1lbnRpbmcgdmFsdWVPZiBldmVuIG9iamVjdHMgYW5kIGFycmF5cyBjYW5cbiAgICAgICAgLy8gICAgICAgICAgICAgYmUgY2hlYXBseSBkaXJ0eS1jaGVja2VkXG4gICAgICAgIG5ld1ZhbHVlID0gZ2V0VmFsdWVPZihuZXdWYWx1ZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ29iamVjdCcgJiYgIWNvbXBhcmVPYmplY3RJZGVudGl0eSkge1xuICAgICAgICAgIC8vIG9iamVjdHMvYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkIC0gZGVlcC13YXRjaGluZyB0aGVtIHdvdWxkIGJlIHRvbyBleHBlbnNpdmVcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmYWxsLXRocm91Z2ggdG8gdGhlIHByaW1pdGl2ZSBlcXVhbGl0eSBjaGVja1xuICAgICAgfVxuXG4gICAgICAvL1ByaW1pdGl2ZSBvciBOYU5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICAgIHJldHVybiBuZXdWYWx1ZSA9PT0gb2xkVmFsdWVPZlZhbHVlIHx8IChuZXdWYWx1ZSAhPT0gbmV3VmFsdWUgJiYgb2xkVmFsdWVPZlZhbHVlICE9PSBvbGRWYWx1ZU9mVmFsdWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlucHV0c1dhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbiwgcHJldHR5UHJpbnRFeHByZXNzaW9uKSB7XG4gICAgICB2YXIgaW5wdXRFeHByZXNzaW9ucyA9IHBhcnNlZEV4cHJlc3Npb24uaW5wdXRzO1xuICAgICAgdmFyIGxhc3RSZXN1bHQ7XG5cbiAgICAgIGlmIChpbnB1dEV4cHJlc3Npb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB2YXIgb2xkSW5wdXRWYWx1ZU9mID0gZXhwcmVzc2lvbklucHV0RGlydHlDaGVjazsgLy8gaW5pdCB0byBzb21ldGhpbmcgdW5pcXVlIHNvIHRoYXQgZXF1YWxzIGNoZWNrIGZhaWxzXG4gICAgICAgIGlucHV0RXhwcmVzc2lvbnMgPSBpbnB1dEV4cHJlc3Npb25zWzBdO1xuICAgICAgICByZXR1cm4gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGV4cHJlc3Npb25JbnB1dFdhdGNoKHNjb3BlKSB7XG4gICAgICAgICAgdmFyIG5ld0lucHV0VmFsdWUgPSBpbnB1dEV4cHJlc3Npb25zKHNjb3BlKTtcbiAgICAgICAgICBpZiAoIWV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2sobmV3SW5wdXRWYWx1ZSwgb2xkSW5wdXRWYWx1ZU9mLCBpbnB1dEV4cHJlc3Npb25zLmlzUHVyZSkpIHtcbiAgICAgICAgICAgIGxhc3RSZXN1bHQgPSBwYXJzZWRFeHByZXNzaW9uKHNjb3BlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgW25ld0lucHV0VmFsdWVdKTtcbiAgICAgICAgICAgIG9sZElucHV0VmFsdWVPZiA9IG5ld0lucHV0VmFsdWUgJiYgZ2V0VmFsdWVPZihuZXdJbnB1dFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gICAgICAgIH0sIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcHJldHR5UHJpbnRFeHByZXNzaW9uKTtcbiAgICAgIH1cblxuICAgICAgdmFyIG9sZElucHV0VmFsdWVPZlZhbHVlcyA9IFtdO1xuICAgICAgdmFyIG9sZElucHV0VmFsdWVzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dEV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgb2xkSW5wdXRWYWx1ZU9mVmFsdWVzW2ldID0gZXhwcmVzc2lvbklucHV0RGlydHlDaGVjazsgLy8gaW5pdCB0byBzb21ldGhpbmcgdW5pcXVlIHNvIHRoYXQgZXF1YWxzIGNoZWNrIGZhaWxzXG4gICAgICAgIG9sZElucHV0VmFsdWVzW2ldID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNjb3BlLiR3YXRjaChmdW5jdGlvbiBleHByZXNzaW9uSW5wdXRzV2F0Y2goc2NvcGUpIHtcbiAgICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dEV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICB2YXIgbmV3SW5wdXRWYWx1ZSA9IGlucHV0RXhwcmVzc2lvbnNbaV0oc2NvcGUpO1xuICAgICAgICAgIGlmIChjaGFuZ2VkIHx8IChjaGFuZ2VkID0gIWV4cHJlc3Npb25JbnB1dERpcnR5Q2hlY2sobmV3SW5wdXRWYWx1ZSwgb2xkSW5wdXRWYWx1ZU9mVmFsdWVzW2ldLCBpbnB1dEV4cHJlc3Npb25zW2ldLmlzUHVyZSkpKSB7XG4gICAgICAgICAgICBvbGRJbnB1dFZhbHVlc1tpXSA9IG5ld0lucHV0VmFsdWU7XG4gICAgICAgICAgICBvbGRJbnB1dFZhbHVlT2ZWYWx1ZXNbaV0gPSBuZXdJbnB1dFZhbHVlICYmIGdldFZhbHVlT2YobmV3SW5wdXRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICBsYXN0UmVzdWx0ID0gcGFyc2VkRXhwcmVzc2lvbihzY29wZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG9sZElucHV0VmFsdWVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgICAgfSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwcmV0dHlQcmludEV4cHJlc3Npb24pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uZVRpbWVXYXRjaERlbGVnYXRlKHNjb3BlLCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHBhcnNlZEV4cHJlc3Npb24sIHByZXR0eVByaW50RXhwcmVzc2lvbikge1xuICAgICAgdmFyIGlzRG9uZSA9IHBhcnNlZEV4cHJlc3Npb24ubGl0ZXJhbCA/IGlzQWxsRGVmaW5lZCA6IGlzRGVmaW5lZDtcbiAgICAgIHZhciB1bndhdGNoLCBsYXN0VmFsdWU7XG5cbiAgICAgIHZhciBleHAgPSBwYXJzZWRFeHByZXNzaW9uLiQkaW50ZXJjZXB0ZWQgfHwgcGFyc2VkRXhwcmVzc2lvbjtcbiAgICAgIHZhciBwb3N0ID0gcGFyc2VkRXhwcmVzc2lvbi4kJGludGVyY2VwdG9yIHx8IGlkZW50aXR5O1xuXG4gICAgICB2YXIgdXNlSW5wdXRzID0gcGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMgJiYgIWV4cC5pbnB1dHM7XG5cbiAgICAgIC8vIFByb3BvZ2F0ZSB0aGUgbGl0ZXJhbC9pbnB1dHMvY29uc3RhbnQgYXR0cmlidXRlc1xuICAgICAgLy8gLi4uIGJ1dCBub3Qgb25lVGltZSBzaW5jZSB3ZSBhcmUgaGFuZGxpbmcgaXRcbiAgICAgIG9uZVRpbWVXYXRjaC5saXRlcmFsID0gcGFyc2VkRXhwcmVzc2lvbi5saXRlcmFsO1xuICAgICAgb25lVGltZVdhdGNoLmNvbnN0YW50ID0gcGFyc2VkRXhwcmVzc2lvbi5jb25zdGFudDtcbiAgICAgIG9uZVRpbWVXYXRjaC5pbnB1dHMgPSBwYXJzZWRFeHByZXNzaW9uLmlucHV0cztcblxuICAgICAgLy8gQWxsb3cgb3RoZXIgZGVsZWdhdGVzIHRvIHJ1biBvbiB0aGlzIHdyYXBwZWQgZXhwcmVzc2lvblxuICAgICAgYWRkV2F0Y2hEZWxlZ2F0ZShvbmVUaW1lV2F0Y2gpO1xuXG4gICAgICB1bndhdGNoID0gc2NvcGUuJHdhdGNoKG9uZVRpbWVXYXRjaCwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwcmV0dHlQcmludEV4cHJlc3Npb24pO1xuXG4gICAgICByZXR1cm4gdW53YXRjaDtcblxuICAgICAgZnVuY3Rpb24gdW53YXRjaElmRG9uZSgpIHtcbiAgICAgICAgaWYgKGlzRG9uZShsYXN0VmFsdWUpKSB7XG4gICAgICAgICAgdW53YXRjaCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uZVRpbWVXYXRjaChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgICBsYXN0VmFsdWUgPSB1c2VJbnB1dHMgJiYgaW5wdXRzID8gaW5wdXRzWzBdIDogZXhwKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgaWYgKGlzRG9uZShsYXN0VmFsdWUpKSB7XG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KHVud2F0Y2hJZkRvbmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3N0KGxhc3RWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBbGxEZWZpbmVkKHZhbHVlKSB7XG4gICAgICB2YXIgYWxsRGVmaW5lZCA9IHRydWU7XG4gICAgICBmb3JFYWNoKHZhbHVlLCBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQodmFsKSkgYWxsRGVmaW5lZCA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWxsRGVmaW5lZDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb25zdGFudFdhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbikge1xuICAgICAgdmFyIHVud2F0Y2ggPSBzY29wZS4kd2F0Y2goZnVuY3Rpb24gY29uc3RhbnRXYXRjaChzY29wZSkge1xuICAgICAgICB1bndhdGNoKCk7XG4gICAgICAgIHJldHVybiBwYXJzZWRFeHByZXNzaW9uKHNjb3BlKTtcbiAgICAgIH0sIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSk7XG4gICAgICByZXR1cm4gdW53YXRjaDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRXYXRjaERlbGVnYXRlKHBhcnNlZEV4cHJlc3Npb24pIHtcbiAgICAgIGlmIChwYXJzZWRFeHByZXNzaW9uLmNvbnN0YW50KSB7XG4gICAgICAgIHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlID0gY29uc3RhbnRXYXRjaERlbGVnYXRlO1xuICAgICAgfSBlbHNlIGlmIChwYXJzZWRFeHByZXNzaW9uLm9uZVRpbWUpIHtcbiAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgPSBvbmVUaW1lV2F0Y2hEZWxlZ2F0ZTtcbiAgICAgIH0gZWxzZSBpZiAocGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMpIHtcbiAgICAgICAgcGFyc2VkRXhwcmVzc2lvbi4kJHdhdGNoRGVsZWdhdGUgPSBpbnB1dHNXYXRjaERlbGVnYXRlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGFpbkludGVyY2VwdG9ycyhmaXJzdCwgc2Vjb25kKSB7XG4gICAgICBmdW5jdGlvbiBjaGFpbmVkSW50ZXJjZXB0b3IodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHNlY29uZChmaXJzdCh2YWx1ZSkpO1xuICAgICAgfVxuICAgICAgY2hhaW5lZEludGVyY2VwdG9yLiRzdGF0ZWZ1bCA9IGZpcnN0LiRzdGF0ZWZ1bCB8fCBzZWNvbmQuJHN0YXRlZnVsO1xuICAgICAgY2hhaW5lZEludGVyY2VwdG9yLiQkcHVyZSA9IGZpcnN0LiQkcHVyZSAmJiBzZWNvbmQuJCRwdXJlO1xuXG4gICAgICByZXR1cm4gY2hhaW5lZEludGVyY2VwdG9yO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZEludGVyY2VwdG9yKHBhcnNlZEV4cHJlc3Npb24sIGludGVyY2VwdG9yRm4pIHtcbiAgICAgIGlmICghaW50ZXJjZXB0b3JGbikgcmV0dXJuIHBhcnNlZEV4cHJlc3Npb247XG5cbiAgICAgIC8vIEV4dHJhY3QgYW55IGV4aXN0aW5nIGludGVyY2VwdG9ycyBvdXQgb2YgdGhlIHBhcnNlZEV4cHJlc3Npb25cbiAgICAgIC8vIHRvIGVuc3VyZSB0aGUgb3JpZ2luYWwgcGFyc2VkRXhwcmVzc2lvbiBpcyBhbHdheXMgdGhlICQkaW50ZXJjZXB0ZWRcbiAgICAgIGlmIChwYXJzZWRFeHByZXNzaW9uLiQkaW50ZXJjZXB0b3IpIHtcbiAgICAgICAgaW50ZXJjZXB0b3JGbiA9IGNoYWluSW50ZXJjZXB0b3JzKHBhcnNlZEV4cHJlc3Npb24uJCRpbnRlcmNlcHRvciwgaW50ZXJjZXB0b3JGbik7XG4gICAgICAgIHBhcnNlZEV4cHJlc3Npb24gPSBwYXJzZWRFeHByZXNzaW9uLiQkaW50ZXJjZXB0ZWQ7XG4gICAgICB9XG5cbiAgICAgIHZhciB1c2VJbnB1dHMgPSBmYWxzZTtcblxuICAgICAgdmFyIGZuID0gZnVuY3Rpb24gaW50ZXJjZXB0ZWRFeHByZXNzaW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHVzZUlucHV0cyAmJiBpbnB1dHMgPyBpbnB1dHNbMF0gOiBwYXJzZWRFeHByZXNzaW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgcmV0dXJuIGludGVyY2VwdG9yRm4odmFsdWUpO1xuICAgICAgfTtcblxuICAgICAgLy8gTWFpbnRhaW4gcmVmZXJlbmNlcyB0byB0aGUgaW50ZXJjZXB0b3IvaW50ZXJjZXB0ZWRcbiAgICAgIGZuLiQkaW50ZXJjZXB0ZWQgPSBwYXJzZWRFeHByZXNzaW9uO1xuICAgICAgZm4uJCRpbnRlcmNlcHRvciA9IGludGVyY2VwdG9yRm47XG5cbiAgICAgIC8vIFByb3BvZ2F0ZSB0aGUgbGl0ZXJhbC9vbmVUaW1lL2NvbnN0YW50IGF0dHJpYnV0ZXNcbiAgICAgIGZuLmxpdGVyYWwgPSBwYXJzZWRFeHByZXNzaW9uLmxpdGVyYWw7XG4gICAgICBmbi5vbmVUaW1lID0gcGFyc2VkRXhwcmVzc2lvbi5vbmVUaW1lO1xuICAgICAgZm4uY29uc3RhbnQgPSBwYXJzZWRFeHByZXNzaW9uLmNvbnN0YW50O1xuXG4gICAgICAvLyBUcmVhdCB0aGUgaW50ZXJjZXB0b3IgbGlrZSBmaWx0ZXJzLlxuICAgICAgLy8gSWYgaXQgaXMgbm90ICRzdGF0ZWZ1bCB0aGVuIG9ubHkgd2F0Y2ggaXRzIGlucHV0cy5cbiAgICAgIC8vIElmIHRoZSBleHByZXNzaW9uIGl0c2VsZiBoYXMgbm8gaW5wdXRzIHRoZW4gdXNlIHRoZSBmdWxsIGV4cHJlc3Npb24gYXMgYW4gaW5wdXQuXG4gICAgICBpZiAoIWludGVyY2VwdG9yRm4uJHN0YXRlZnVsKSB7XG4gICAgICAgIHVzZUlucHV0cyA9ICFwYXJzZWRFeHByZXNzaW9uLmlucHV0cztcbiAgICAgICAgZm4uaW5wdXRzID0gcGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMgPyBwYXJzZWRFeHByZXNzaW9uLmlucHV0cyA6IFtwYXJzZWRFeHByZXNzaW9uXTtcblxuICAgICAgICBpZiAoIWludGVyY2VwdG9yRm4uJCRwdXJlKSB7XG4gICAgICAgICAgZm4uaW5wdXRzID0gZm4uaW5wdXRzLm1hcChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgaXNQdXJlIGZsYWcgb2YgaW5wdXRzIHdoZW4gaXQgaXMgbm90IGFic29sdXRlIGJlY2F1c2UgdGhleSBhcmUgbm93IHdyYXBwZWQgaW4gYVxuICAgICAgICAgICAgICAvLyBub24tcHVyZSBpbnRlcmNlcHRvciBmdW5jdGlvbi5cbiAgICAgICAgICAgICAgaWYgKGUuaXNQdXJlID09PSBQVVJJVFlfUkVMQVRJVkUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVwdXJpZmllcihzKSB7IHJldHVybiBlKHMpOyB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFkZFdhdGNoRGVsZWdhdGUoZm4pO1xuICAgIH1cbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRxXG4gKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSBzZXJ2aWNlIHRoYXQgaGVscHMgeW91IHJ1biBmdW5jdGlvbnMgYXN5bmNocm9ub3VzbHksIGFuZCB1c2UgdGhlaXIgcmV0dXJuIHZhbHVlcyAob3IgZXhjZXB0aW9ucylcbiAqIHdoZW4gdGhleSBhcmUgZG9uZSBwcm9jZXNzaW5nLlxuICpcbiAqIFRoaXMgaXMgYSBbUHJvbWlzZXMvQStdKGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vKS1jb21wbGlhbnQgaW1wbGVtZW50YXRpb24gb2YgcHJvbWlzZXMvZGVmZXJyZWRcbiAqIG9iamVjdHMgaW5zcGlyZWQgYnkgW0tyaXMgS293YWwncyBRXShodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3EpLlxuICpcbiAqICRxIGNhbiBiZSB1c2VkIGluIHR3byBmYXNoaW9ucyAtLS0gb25lIHdoaWNoIGlzIG1vcmUgc2ltaWxhciB0byBLcmlzIEtvd2FsJ3MgUSBvciBqUXVlcnkncyBEZWZlcnJlZFxuICogaW1wbGVtZW50YXRpb25zLCBhbmQgdGhlIG90aGVyIHdoaWNoIHJlc2VtYmxlcyBFUzYgKEVTMjAxNSkgcHJvbWlzZXMgdG8gc29tZSBkZWdyZWUuXG4gKlxuICogIyMgJHEgY29uc3RydWN0b3JcbiAqXG4gKiBUaGUgc3RyZWFtbGluZWQgRVM2IHN0eWxlIHByb21pc2UgaXMgZXNzZW50aWFsbHkganVzdCB1c2luZyAkcSBhcyBhIGNvbnN0cnVjdG9yIHdoaWNoIHRha2VzIGEgYHJlc29sdmVyYFxuICogZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50LiBUaGlzIGlzIHNpbWlsYXIgdG8gdGhlIG5hdGl2ZSBQcm9taXNlIGltcGxlbWVudGF0aW9uIGZyb20gRVM2LFxuICogc2VlIFtNRE5dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1Byb21pc2UpLlxuICpcbiAqIFdoaWxlIHRoZSBjb25zdHJ1Y3Rvci1zdHlsZSB1c2UgaXMgc3VwcG9ydGVkLCBub3QgYWxsIG9mIHRoZSBzdXBwb3J0aW5nIG1ldGhvZHMgZnJvbSBFUzYgcHJvbWlzZXMgYXJlXG4gKiBhdmFpbGFibGUgeWV0LlxuICpcbiAqIEl0IGNhbiBiZSB1c2VkIGxpa2Ugc286XG4gKlxuICogYGBganNcbiAqICAgLy8gZm9yIHRoZSBwdXJwb3NlIG9mIHRoaXMgZXhhbXBsZSBsZXQncyBhc3N1bWUgdGhhdCB2YXJpYWJsZXMgYCRxYCBhbmQgYG9rVG9HcmVldGBcbiAqICAgLy8gYXJlIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBsZXhpY2FsIHNjb3BlICh0aGV5IGNvdWxkIGhhdmUgYmVlbiBpbmplY3RlZCBvciBwYXNzZWQgaW4pLlxuICpcbiAqICAgZnVuY3Rpb24gYXN5bmNHcmVldChuYW1lKSB7XG4gKiAgICAgLy8gcGVyZm9ybSBzb21lIGFzeW5jaHJvbm91cyBvcGVyYXRpb24sIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBwcm9taXNlIHdoZW4gYXBwcm9wcmlhdGUuXG4gKiAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICogICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAqICAgICAgICAgaWYgKG9rVG9HcmVldChuYW1lKSkge1xuICogICAgICAgICAgIHJlc29sdmUoJ0hlbGxvLCAnICsgbmFtZSArICchJyk7XG4gKiAgICAgICAgIH0gZWxzZSB7XG4gKiAgICAgICAgICAgcmVqZWN0KCdHcmVldGluZyAnICsgbmFtZSArICcgaXMgbm90IGFsbG93ZWQuJyk7XG4gKiAgICAgICAgIH1cbiAqICAgICAgIH0sIDEwMDApO1xuICogICAgIH0pO1xuICogICB9XG4gKlxuICogICB2YXIgcHJvbWlzZSA9IGFzeW5jR3JlZXQoJ1JvYmluIEhvb2QnKTtcbiAqICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGdyZWV0aW5nKSB7XG4gKiAgICAgYWxlcnQoJ1N1Y2Nlc3M6ICcgKyBncmVldGluZyk7XG4gKiAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICogICAgIGFsZXJ0KCdGYWlsZWQ6ICcgKyByZWFzb24pO1xuICogICB9KTtcbiAqIGBgYFxuICpcbiAqIE5vdGU6IHByb2dyZXNzL25vdGlmeSBjYWxsYmFja3MgYXJlIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIHZpYSB0aGUgRVM2LXN0eWxlIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiB1bmxpa2UgRVM2IGJlaGF2aW9yLCBhbiBleGNlcHRpb24gdGhyb3duIGluIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB3aWxsIE5PVCBpbXBsaWNpdGx5IHJlamVjdCB0aGUgcHJvbWlzZS5cbiAqXG4gKiBIb3dldmVyLCB0aGUgbW9yZSB0cmFkaXRpb25hbCBDb21tb25KUy1zdHlsZSB1c2FnZSBpcyBzdGlsbCBhdmFpbGFibGUsIGFuZCBkb2N1bWVudGVkIGJlbG93LlxuICpcbiAqIFtUaGUgQ29tbW9uSlMgUHJvbWlzZSBwcm9wb3NhbF0oaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvUHJvbWlzZXMpIGRlc2NyaWJlcyBhIHByb21pc2UgYXMgYW5cbiAqIGludGVyZmFjZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBhbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSByZXN1bHQgb2YgYW4gYWN0aW9uIHRoYXQgaXNcbiAqIHBlcmZvcm1lZCBhc3luY2hyb25vdXNseSwgYW5kIG1heSBvciBtYXkgbm90IGJlIGZpbmlzaGVkIGF0IGFueSBnaXZlbiBwb2ludCBpbiB0aW1lLlxuICpcbiAqIEZyb20gdGhlIHBlcnNwZWN0aXZlIG9mIGRlYWxpbmcgd2l0aCBlcnJvciBoYW5kbGluZywgZGVmZXJyZWQgYW5kIHByb21pc2UgQVBJcyBhcmUgdG9cbiAqIGFzeW5jaHJvbm91cyBwcm9ncmFtbWluZyB3aGF0IGB0cnlgLCBgY2F0Y2hgIGFuZCBgdGhyb3dgIGtleXdvcmRzIGFyZSB0byBzeW5jaHJvbm91cyBwcm9ncmFtbWluZy5cbiAqXG4gKiBgYGBqc1xuICogICAvLyBmb3IgdGhlIHB1cnBvc2Ugb2YgdGhpcyBleGFtcGxlIGxldCdzIGFzc3VtZSB0aGF0IHZhcmlhYmxlcyBgJHFgIGFuZCBgb2tUb0dyZWV0YFxuICogICAvLyBhcmUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGxleGljYWwgc2NvcGUgKHRoZXkgY291bGQgaGF2ZSBiZWVuIGluamVjdGVkIG9yIHBhc3NlZCBpbikuXG4gKlxuICogICBmdW5jdGlvbiBhc3luY0dyZWV0KG5hbWUpIHtcbiAqICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICpcbiAqICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICogICAgICAgZGVmZXJyZWQubm90aWZ5KCdBYm91dCB0byBncmVldCAnICsgbmFtZSArICcuJyk7XG4gKlxuICogICAgICAgaWYgKG9rVG9HcmVldChuYW1lKSkge1xuICogICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdIZWxsbywgJyArIG5hbWUgKyAnIScpO1xuICogICAgICAgfSBlbHNlIHtcbiAqICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCdHcmVldGluZyAnICsgbmFtZSArICcgaXMgbm90IGFsbG93ZWQuJyk7XG4gKiAgICAgICB9XG4gKiAgICAgfSwgMTAwMCk7XG4gKlxuICogICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICogICB9XG4gKlxuICogICB2YXIgcHJvbWlzZSA9IGFzeW5jR3JlZXQoJ1JvYmluIEhvb2QnKTtcbiAqICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGdyZWV0aW5nKSB7XG4gKiAgICAgYWxlcnQoJ1N1Y2Nlc3M6ICcgKyBncmVldGluZyk7XG4gKiAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICogICAgIGFsZXJ0KCdGYWlsZWQ6ICcgKyByZWFzb24pO1xuICogICB9LCBmdW5jdGlvbih1cGRhdGUpIHtcbiAqICAgICBhbGVydCgnR290IG5vdGlmaWNhdGlvbjogJyArIHVwZGF0ZSk7XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogQXQgZmlyc3QgaXQgbWlnaHQgbm90IGJlIG9idmlvdXMgd2h5IHRoaXMgZXh0cmEgY29tcGxleGl0eSBpcyB3b3J0aCB0aGUgdHJvdWJsZS4gVGhlIHBheW9mZlxuICogY29tZXMgaW4gdGhlIHdheSBvZiBndWFyYW50ZWVzIHRoYXQgcHJvbWlzZSBhbmQgZGVmZXJyZWQgQVBJcyBtYWtlLCBzZWVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvdW5jb21tb25qcy9ibG9iL21hc3Rlci9wcm9taXNlcy9zcGVjaWZpY2F0aW9uLm1kLlxuICpcbiAqIEFkZGl0aW9uYWxseSB0aGUgcHJvbWlzZSBhcGkgYWxsb3dzIGZvciBjb21wb3NpdGlvbiB0aGF0IGlzIHZlcnkgaGFyZCB0byBkbyB3aXRoIHRoZVxuICogdHJhZGl0aW9uYWwgY2FsbGJhY2sgKFtDUFNdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29udGludWF0aW9uLXBhc3Npbmdfc3R5bGUpKSBhcHByb2FjaC5cbiAqIEZvciBtb3JlIG9uIHRoaXMgcGxlYXNlIHNlZSB0aGUgW1EgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xKSBlc3BlY2lhbGx5IHRoZVxuICogc2VjdGlvbiBvbiBzZXJpYWwgb3IgcGFyYWxsZWwgam9pbmluZyBvZiBwcm9taXNlcy5cbiAqXG4gKiAjIyBUaGUgRGVmZXJyZWQgQVBJXG4gKlxuICogQSBuZXcgaW5zdGFuY2Ugb2YgZGVmZXJyZWQgaXMgY29uc3RydWN0ZWQgYnkgY2FsbGluZyBgJHEuZGVmZXIoKWAuXG4gKlxuICogVGhlIHB1cnBvc2Ugb2YgdGhlIGRlZmVycmVkIG9iamVjdCBpcyB0byBleHBvc2UgdGhlIGFzc29jaWF0ZWQgUHJvbWlzZSBpbnN0YW5jZSBhcyB3ZWxsIGFzIEFQSXNcbiAqIHRoYXQgY2FuIGJlIHVzZWQgZm9yIHNpZ25hbGluZyB0aGUgc3VjY2Vzc2Z1bCBvciB1bnN1Y2Nlc3NmdWwgY29tcGxldGlvbiwgYXMgd2VsbCBhcyB0aGUgc3RhdHVzXG4gKiBvZiB0aGUgdGFzay5cbiAqXG4gKiAqKk1ldGhvZHMqKlxuICpcbiAqIC0gYHJlc29sdmUodmFsdWUpYCDigJMgcmVzb2x2ZXMgdGhlIGRlcml2ZWQgcHJvbWlzZSB3aXRoIHRoZSBgdmFsdWVgLiBJZiB0aGUgdmFsdWUgaXMgYSByZWplY3Rpb25cbiAqICAgY29uc3RydWN0ZWQgdmlhIGAkcS5yZWplY3RgLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIGluc3RlYWQuXG4gKiAtIGByZWplY3QocmVhc29uKWAg4oCTIHJlamVjdHMgdGhlIGRlcml2ZWQgcHJvbWlzZSB3aXRoIHRoZSBgcmVhc29uYC4gVGhpcyBpcyBlcXVpdmFsZW50IHRvXG4gKiAgIHJlc29sdmluZyBpdCB3aXRoIGEgcmVqZWN0aW9uIGNvbnN0cnVjdGVkIHZpYSBgJHEucmVqZWN0YC5cbiAqIC0gYG5vdGlmeSh2YWx1ZSlgIC0gcHJvdmlkZXMgdXBkYXRlcyBvbiB0aGUgc3RhdHVzIG9mIHRoZSBwcm9taXNlJ3MgZXhlY3V0aW9uLiBUaGlzIG1heSBiZSBjYWxsZWRcbiAqICAgbXVsdGlwbGUgdGltZXMgYmVmb3JlIHRoZSBwcm9taXNlIGlzIGVpdGhlciByZXNvbHZlZCBvciByZWplY3RlZC5cbiAqXG4gKiAqKlByb3BlcnRpZXMqKlxuICpcbiAqIC0gcHJvbWlzZSDigJMgYHtQcm9taXNlfWAg4oCTIHByb21pc2Ugb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGRlZmVycmVkLlxuICpcbiAqXG4gKiAjIyBUaGUgUHJvbWlzZSBBUElcbiAqXG4gKiBBIG5ldyBwcm9taXNlIGluc3RhbmNlIGlzIGNyZWF0ZWQgd2hlbiBhIGRlZmVycmVkIGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIGNhbiBiZSByZXRyaWV2ZWQgYnlcbiAqIGNhbGxpbmcgYGRlZmVycmVkLnByb21pc2VgLlxuICpcbiAqIFRoZSBwdXJwb3NlIG9mIHRoZSBwcm9taXNlIG9iamVjdCBpcyB0byBhbGxvdyBmb3IgaW50ZXJlc3RlZCBwYXJ0aWVzIHRvIGdldCBhY2Nlc3MgdG8gdGhlIHJlc3VsdFxuICogb2YgdGhlIGRlZmVycmVkIHRhc2sgd2hlbiBpdCBjb21wbGV0ZXMuXG4gKlxuICogKipNZXRob2RzKipcbiAqXG4gKiAtIGB0aGVuKHN1Y2Nlc3NDYWxsYmFjaywgW2Vycm9yQ2FsbGJhY2tdLCBbbm90aWZ5Q2FsbGJhY2tdKWAg4oCTIHJlZ2FyZGxlc3Mgb2Ygd2hlbiB0aGUgcHJvbWlzZSB3YXMgb3JcbiAqICAgd2lsbCBiZSByZXNvbHZlZCBvciByZWplY3RlZCwgYHRoZW5gIGNhbGxzIG9uZSBvZiB0aGUgc3VjY2VzcyBvciBlcnJvciBjYWxsYmFja3MgYXN5bmNocm9ub3VzbHlcbiAqICAgYXMgc29vbiBhcyB0aGUgcmVzdWx0IGlzIGF2YWlsYWJsZS4gVGhlIGNhbGxiYWNrcyBhcmUgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQ6IHRoZSByZXN1bHRcbiAqICAgb3IgcmVqZWN0aW9uIHJlYXNvbi4gQWRkaXRpb25hbGx5LCB0aGUgbm90aWZ5IGNhbGxiYWNrIG1heSBiZSBjYWxsZWQgemVybyBvciBtb3JlIHRpbWVzIHRvXG4gKiAgIHByb3ZpZGUgYSBwcm9ncmVzcyBpbmRpY2F0aW9uLCBiZWZvcmUgdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXG4gKlxuICogICBUaGlzIG1ldGhvZCAqcmV0dXJucyBhIG5ldyBwcm9taXNlKiB3aGljaCBpcyByZXNvbHZlZCBvciByZWplY3RlZCB2aWEgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGVcbiAqICAgYHN1Y2Nlc3NDYWxsYmFja2AsIGBlcnJvckNhbGxiYWNrYCAodW5sZXNzIHRoYXQgdmFsdWUgaXMgYSBwcm9taXNlLCBpbiB3aGljaCBjYXNlIGl0IGlzIHJlc29sdmVkXG4gKiAgIHdpdGggdGhlIHZhbHVlIHdoaWNoIGlzIHJlc29sdmVkIGluIHRoYXQgcHJvbWlzZSB1c2luZ1xuICogICBbcHJvbWlzZSBjaGFpbmluZ10oaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvZXM2L3Byb21pc2VzLyN0b2MtcHJvbWlzZXMtcXVldWVzKSkuXG4gKiAgIEl0IGFsc28gbm90aWZpZXMgdmlhIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGBub3RpZnlDYWxsYmFja2AgbWV0aG9kLiBUaGUgcHJvbWlzZSBjYW5ub3QgYmVcbiAqICAgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgZnJvbSB0aGUgbm90aWZ5Q2FsbGJhY2sgbWV0aG9kLiBUaGUgZXJyb3JDYWxsYmFjayBhbmQgbm90aWZ5Q2FsbGJhY2tcbiAqICAgYXJndW1lbnRzIGFyZSBvcHRpb25hbC5cbiAqXG4gKiAtIGBjYXRjaChlcnJvckNhbGxiYWNrKWAg4oCTIHNob3J0aGFuZCBmb3IgYHByb21pc2UudGhlbihudWxsLCBlcnJvckNhbGxiYWNrKWBcbiAqXG4gKiAtIGBmaW5hbGx5KGNhbGxiYWNrLCBub3RpZnlDYWxsYmFjaylgIOKAkyBhbGxvd3MgeW91IHRvIG9ic2VydmUgZWl0aGVyIHRoZSBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gb2YgYSBwcm9taXNlLFxuICogICBidXQgdG8gZG8gc28gd2l0aG91dCBtb2RpZnlpbmcgdGhlIGZpbmFsIHZhbHVlLiBUaGlzIGlzIHVzZWZ1bCB0byByZWxlYXNlIHJlc291cmNlcyBvciBkbyBzb21lXG4gKiAgIGNsZWFuLXVwIHRoYXQgbmVlZHMgdG8gYmUgZG9uZSB3aGV0aGVyIHRoZSBwcm9taXNlIHdhcyByZWplY3RlZCBvciByZXNvbHZlZC4gU2VlIHRoZSBbZnVsbFxuICogICBzcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3Evd2lraS9BUEktUmVmZXJlbmNlI3Byb21pc2VmaW5hbGx5Y2FsbGJhY2spIGZvclxuICogICBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqICMjIENoYWluaW5nIHByb21pc2VzXG4gKlxuICogQmVjYXVzZSBjYWxsaW5nIHRoZSBgdGhlbmAgbWV0aG9kIG9mIGEgcHJvbWlzZSByZXR1cm5zIGEgbmV3IGRlcml2ZWQgcHJvbWlzZSwgaXQgaXMgZWFzaWx5XG4gKiBwb3NzaWJsZSB0byBjcmVhdGUgYSBjaGFpbiBvZiBwcm9taXNlczpcbiAqXG4gKiBgYGBqc1xuICogICBwcm9taXNlQiA9IHByb21pc2VBLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gKiAgICAgcmV0dXJuIHJlc3VsdCArIDE7XG4gKiAgIH0pO1xuICpcbiAqICAgLy8gcHJvbWlzZUIgd2lsbCBiZSByZXNvbHZlZCBpbW1lZGlhdGVseSBhZnRlciBwcm9taXNlQSBpcyByZXNvbHZlZCBhbmQgaXRzIHZhbHVlXG4gKiAgIC8vIHdpbGwgYmUgdGhlIHJlc3VsdCBvZiBwcm9taXNlQSBpbmNyZW1lbnRlZCBieSAxXG4gKiBgYGBcbiAqXG4gKiBJdCBpcyBwb3NzaWJsZSB0byBjcmVhdGUgY2hhaW5zIG9mIGFueSBsZW5ndGggYW5kIHNpbmNlIGEgcHJvbWlzZSBjYW4gYmUgcmVzb2x2ZWQgd2l0aCBhbm90aGVyXG4gKiBwcm9taXNlICh3aGljaCB3aWxsIGRlZmVyIGl0cyByZXNvbHV0aW9uIGZ1cnRoZXIpLCBpdCBpcyBwb3NzaWJsZSB0byBwYXVzZS9kZWZlciByZXNvbHV0aW9uIG9mXG4gKiB0aGUgcHJvbWlzZXMgYXQgYW55IHBvaW50IGluIHRoZSBjaGFpbi4gVGhpcyBtYWtlcyBpdCBwb3NzaWJsZSB0byBpbXBsZW1lbnQgcG93ZXJmdWwgQVBJcyBsaWtlXG4gKiAkaHR0cCdzIHJlc3BvbnNlIGludGVyY2VwdG9ycy5cbiAqXG4gKlxuICogIyMgRGlmZmVyZW5jZXMgYmV0d2VlbiBLcmlzIEtvd2FsJ3MgUSBhbmQgJHFcbiAqXG4gKiAgVGhlcmUgYXJlIHR3byBtYWluIGRpZmZlcmVuY2VzOlxuICpcbiAqIC0gJHEgaXMgaW50ZWdyYXRlZCB3aXRoIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZX0gU2NvcGUgbW9kZWwgb2JzZXJ2YXRpb25cbiAqICAgbWVjaGFuaXNtIGluIEFuZ3VsYXJKUywgd2hpY2ggbWVhbnMgZmFzdGVyIHByb3BhZ2F0aW9uIG9mIHJlc29sdXRpb24gb3IgcmVqZWN0aW9uIGludG8geW91clxuICogICBtb2RlbHMgYW5kIGF2b2lkaW5nIHVubmVjZXNzYXJ5IGJyb3dzZXIgcmVwYWludHMsIHdoaWNoIHdvdWxkIHJlc3VsdCBpbiBmbGlja2VyaW5nIFVJLlxuICogLSBRIGhhcyBtYW55IG1vcmUgZmVhdHVyZXMgdGhhbiAkcSwgYnV0IHRoYXQgY29tZXMgYXQgYSBjb3N0IG9mIGJ5dGVzLiAkcSBpcyB0aW55LCBidXQgY29udGFpbnNcbiAqICAgYWxsIHRoZSBpbXBvcnRhbnQgZnVuY3Rpb25hbGl0eSBuZWVkZWQgZm9yIGNvbW1vbiBhc3luYyB0YXNrcy5cbiAqXG4gKiAjIyBUZXN0aW5nXG4gKlxuICogIGBgYGpzXG4gKiAgICBpdCgnc2hvdWxkIHNpbXVsYXRlIHByb21pc2UnLCBpbmplY3QoZnVuY3Rpb24oJHEsICRyb290U2NvcGUpIHtcbiAqICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAqICAgICAgdmFyIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlO1xuICogICAgICB2YXIgcmVzb2x2ZWRWYWx1ZTtcbiAqXG4gKiAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkgeyByZXNvbHZlZFZhbHVlID0gdmFsdWU7IH0pO1xuICogICAgICBleHBlY3QocmVzb2x2ZWRWYWx1ZSkudG9CZVVuZGVmaW5lZCgpO1xuICpcbiAqICAgICAgLy8gU2ltdWxhdGUgcmVzb2x2aW5nIG9mIHByb21pc2VcbiAqICAgICAgZGVmZXJyZWQucmVzb2x2ZSgxMjMpO1xuICogICAgICAvLyBOb3RlIHRoYXQgdGhlICd0aGVuJyBmdW5jdGlvbiBkb2VzIG5vdCBnZXQgY2FsbGVkIHN5bmNocm9ub3VzbHkuXG4gKiAgICAgIC8vIFRoaXMgaXMgYmVjYXVzZSB3ZSB3YW50IHRoZSBwcm9taXNlIEFQSSB0byBhbHdheXMgYmUgYXN5bmMsIHdoZXRoZXIgb3Igbm90XG4gKiAgICAgIC8vIGl0IGdvdCBjYWxsZWQgc3luY2hyb25vdXNseSBvciBhc3luY2hyb25vdXNseS5cbiAqICAgICAgZXhwZWN0KHJlc29sdmVkVmFsdWUpLnRvQmVVbmRlZmluZWQoKTtcbiAqXG4gKiAgICAgIC8vIFByb3BhZ2F0ZSBwcm9taXNlIHJlc29sdXRpb24gdG8gJ3RoZW4nIGZ1bmN0aW9ucyB1c2luZyAkYXBwbHkoKS5cbiAqICAgICAgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAqICAgICAgZXhwZWN0KHJlc29sdmVkVmFsdWUpLnRvRXF1YWwoMTIzKTtcbiAqICAgIH0pKTtcbiAqICBgYGBcbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGZ1bmN0aW9uLCBmdW5jdGlvbil9IHJlc29sdmVyIEZ1bmN0aW9uIHdoaWNoIGlzIHJlc3BvbnNpYmxlIGZvciByZXNvbHZpbmcgb3JcbiAqICAgcmVqZWN0aW5nIHRoZSBuZXdseSBjcmVhdGVkIHByb21pc2UuIFRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgYSBmdW5jdGlvbiB3aGljaCByZXNvbHZlcyB0aGVcbiAqICAgcHJvbWlzZSwgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgYSBmdW5jdGlvbiB3aGljaCByZWplY3RzIHRoZSBwcm9taXNlLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgbmV3bHkgY3JlYXRlZCBwcm9taXNlLlxuICovXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJHFQcm92aWRlclxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqL1xuZnVuY3Rpb24gJFFQcm92aWRlcigpIHtcbiAgdmFyIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zID0gdHJ1ZTtcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyRleGNlcHRpb25IYW5kbGVyJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcbiAgICByZXR1cm4gcUZhY3RvcnkoZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhjYWxsYmFjayk7XG4gICAgfSwgJGV4Y2VwdGlvbkhhbmRsZXIsIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zKTtcbiAgfV07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHFQcm92aWRlciNlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9uc1xuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmV0cmlldmVzIG9yIG92ZXJyaWRlcyB3aGV0aGVyIHRvIGdlbmVyYXRlIGFuIGVycm9yIHdoZW4gYSByZWplY3RlZCBwcm9taXNlIGlzIG5vdCBoYW5kbGVkLlxuICAgKiBUaGlzIGZlYXR1cmUgaXMgZW5hYmxlZCBieSBkZWZhdWx0LlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBXaGV0aGVyIHRvIGdlbmVyYXRlIGFuIGVycm9yIHdoZW4gYSByZWplY3RlZCBwcm9taXNlIGlzIG5vdCBoYW5kbGVkLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbnxuZy4kcVByb3ZpZGVyfSBDdXJyZW50IHZhbHVlIHdoZW4gY2FsbGVkIHdpdGhvdXQgYSBuZXcgdmFsdWUgb3Igc2VsZiBmb3JcbiAgICogICAgY2hhaW5pbmcgb3RoZXJ3aXNlLlxuICAgKi9cbiAgdGhpcy5lcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zID0gdmFsdWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkJFFQcm92aWRlcigpIHtcbiAgdmFyIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zID0gdHJ1ZTtcbiAgdGhpcy4kZ2V0ID0gWyckYnJvd3NlcicsICckZXhjZXB0aW9uSGFuZGxlcicsIGZ1bmN0aW9uKCRicm93c2VyLCAkZXhjZXB0aW9uSGFuZGxlcikge1xuICAgIHJldHVybiBxRmFjdG9yeShmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgJGJyb3dzZXIuZGVmZXIoY2FsbGJhY2spO1xuICAgIH0sICRleGNlcHRpb25IYW5kbGVyLCBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyk7XG4gIH1dO1xuXG4gIHRoaXMuZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucztcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIHByb21pc2UgbWFuYWdlci5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGZ1bmN0aW9uKX0gbmV4dFRpY2sgRnVuY3Rpb24gZm9yIGV4ZWN1dGluZyBmdW5jdGlvbnMgaW4gdGhlIG5leHQgdHVybi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uKil9IGV4Y2VwdGlvbkhhbmRsZXIgRnVuY3Rpb24gaW50byB3aGljaCB1bmV4cGVjdGVkIGV4Y2VwdGlvbnMgYXJlIHBhc3NlZCBmb3JcbiAqICAgICBkZWJ1Z2dpbmcgcHVycG9zZXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyBXaGV0aGVyIGFuIGVycm9yIHNob3VsZCBiZSBnZW5lcmF0ZWQgb24gdW5oYW5kbGVkXG4gKiAgICAgcHJvbWlzZXMgcmVqZWN0aW9ucy5cbiAqIEByZXR1cm5zIHtvYmplY3R9IFByb21pc2UgbWFuYWdlci5cbiAqL1xuZnVuY3Rpb24gcUZhY3RvcnkobmV4dFRpY2ssIGV4Y2VwdGlvbkhhbmRsZXIsIGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zKSB7XG4gIHZhciAkcU1pbkVyciA9IG1pbkVycignJHEnLCBUeXBlRXJyb3IpO1xuICB2YXIgcXVldWVTaXplID0gMDtcbiAgdmFyIGNoZWNrUXVldWUgPSBbXTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZy4kcSNkZWZlclxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIGBEZWZlcnJlZGAgb2JqZWN0IHdoaWNoIHJlcHJlc2VudHMgYSB0YXNrIHdoaWNoIHdpbGwgZmluaXNoIGluIHRoZSBmdXR1cmUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtEZWZlcnJlZH0gUmV0dXJucyBhIG5ldyBpbnN0YW5jZSBvZiBkZWZlcnJlZC5cbiAgICovXG4gIGZ1bmN0aW9uIGRlZmVyKCkge1xuICAgIHJldHVybiBuZXcgRGVmZXJyZWQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIERlZmVycmVkKCkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKTtcbiAgICAvL05vbiBwcm90b3R5cGUgbWV0aG9kcyBuZWNlc3NhcnkgdG8gc3VwcG9ydCB1bmJvdW5kIGV4ZWN1dGlvbiA6L1xuICAgIHRoaXMucmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbCkgeyByZXNvbHZlUHJvbWlzZShwcm9taXNlLCB2YWwpOyB9O1xuICAgIHRoaXMucmVqZWN0ID0gZnVuY3Rpb24ocmVhc29uKSB7IHJlamVjdFByb21pc2UocHJvbWlzZSwgcmVhc29uKTsgfTtcbiAgICB0aGlzLm5vdGlmeSA9IGZ1bmN0aW9uKHByb2dyZXNzKSB7IG5vdGlmeVByb21pc2UocHJvbWlzZSwgcHJvZ3Jlc3MpOyB9O1xuICB9XG5cblxuICBmdW5jdGlvbiBQcm9taXNlKCkge1xuICAgIHRoaXMuJCRzdGF0ZSA9IHsgc3RhdHVzOiAwIH07XG4gIH1cblxuICBleHRlbmQoUHJvbWlzZS5wcm90b3R5cGUsIHtcbiAgICB0aGVuOiBmdW5jdGlvbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgcHJvZ3Jlc3NCYWNrKSB7XG4gICAgICBpZiAoaXNVbmRlZmluZWQob25GdWxmaWxsZWQpICYmIGlzVW5kZWZpbmVkKG9uUmVqZWN0ZWQpICYmIGlzVW5kZWZpbmVkKHByb2dyZXNzQmFjaykpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IFByb21pc2UoKTtcblxuICAgICAgdGhpcy4kJHN0YXRlLnBlbmRpbmcgPSB0aGlzLiQkc3RhdGUucGVuZGluZyB8fCBbXTtcbiAgICAgIHRoaXMuJCRzdGF0ZS5wZW5kaW5nLnB1c2goW3Jlc3VsdCwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb2dyZXNzQmFja10pO1xuICAgICAgaWYgKHRoaXMuJCRzdGF0ZS5zdGF0dXMgPiAwKSBzY2hlZHVsZVByb2Nlc3NRdWV1ZSh0aGlzLiQkc3RhdGUpO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICAnY2F0Y2gnOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBjYWxsYmFjayk7XG4gICAgfSxcblxuICAgICdmaW5hbGx5JzogZnVuY3Rpb24oY2FsbGJhY2ssIHByb2dyZXNzQmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gaGFuZGxlQ2FsbGJhY2sodmFsdWUsIHJlc29sdmUsIGNhbGxiYWNrKTtcbiAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVDYWxsYmFjayhlcnJvciwgcmVqZWN0LCBjYWxsYmFjayk7XG4gICAgICB9LCBwcm9ncmVzc0JhY2spO1xuICAgIH1cbiAgfSk7XG5cbiAgZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKHN0YXRlKSB7XG4gICAgdmFyIGZuLCBwcm9taXNlLCBwZW5kaW5nO1xuXG4gICAgcGVuZGluZyA9IHN0YXRlLnBlbmRpbmc7XG4gICAgc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCA9IGZhbHNlO1xuICAgIHN0YXRlLnBlbmRpbmcgPSB1bmRlZmluZWQ7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBlbmRpbmcubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBtYXJrUVN0YXRlRXhjZXB0aW9uSGFuZGxlZChzdGF0ZSk7XG4gICAgICAgIHByb21pc2UgPSBwZW5kaW5nW2ldWzBdO1xuICAgICAgICBmbiA9IHBlbmRpbmdbaV1bc3RhdGUuc3RhdHVzXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIGZuKHN0YXRlLnZhbHVlKSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5zdGF0dXMgPT09IDEpIHtcbiAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHN0YXRlLnZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0UHJvbWlzZShwcm9taXNlLCBzdGF0ZS52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmVqZWN0UHJvbWlzZShwcm9taXNlLCBlKTtcbiAgICAgICAgICAvLyBUaGlzIGVycm9yIGlzIGV4cGxpY2l0bHkgbWFya2VkIGZvciBiZWluZyBwYXNzZWQgdG8gdGhlICRleGNlcHRpb25IYW5kbGVyXG4gICAgICAgICAgaWYgKGUgJiYgZS4kJHBhc3NUb0V4Y2VwdGlvbkhhbmRsZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC0tcXVldWVTaXplO1xuICAgICAgaWYgKGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zICYmIHF1ZXVlU2l6ZSA9PT0gMCkge1xuICAgICAgICBuZXh0VGljayhwcm9jZXNzQ2hlY2tzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwcm9jZXNzQ2hlY2tzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bm1vZGlmaWVkLWxvb3AtY29uZGl0aW9uXG4gICAgd2hpbGUgKCFxdWV1ZVNpemUgJiYgY2hlY2tRdWV1ZS5sZW5ndGgpIHtcbiAgICAgIHZhciB0b0NoZWNrID0gY2hlY2tRdWV1ZS5zaGlmdCgpO1xuICAgICAgaWYgKCFpc1N0YXRlRXhjZXB0aW9uSGFuZGxlZCh0b0NoZWNrKSkge1xuICAgICAgICBtYXJrUVN0YXRlRXhjZXB0aW9uSGFuZGxlZCh0b0NoZWNrKTtcbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9ICdQb3NzaWJseSB1bmhhbmRsZWQgcmVqZWN0aW9uOiAnICsgdG9EZWJ1Z1N0cmluZyh0b0NoZWNrLnZhbHVlKTtcbiAgICAgICAgaWYgKGlzRXJyb3IodG9DaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICBleGNlcHRpb25IYW5kbGVyKHRvQ2hlY2sudmFsdWUsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXhjZXB0aW9uSGFuZGxlcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGVQcm9jZXNzUXVldWUoc3RhdGUpIHtcbiAgICBpZiAoZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMgJiYgIXN0YXRlLnBlbmRpbmcgJiYgc3RhdGUuc3RhdHVzID09PSAyICYmICFpc1N0YXRlRXhjZXB0aW9uSGFuZGxlZChzdGF0ZSkpIHtcbiAgICAgIGlmIChxdWV1ZVNpemUgPT09IDAgJiYgY2hlY2tRdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV4dFRpY2socHJvY2Vzc0NoZWNrcyk7XG4gICAgICB9XG4gICAgICBjaGVja1F1ZXVlLnB1c2goc3RhdGUpO1xuICAgIH1cbiAgICBpZiAoc3RhdGUucHJvY2Vzc1NjaGVkdWxlZCB8fCAhc3RhdGUucGVuZGluZykgcmV0dXJuO1xuICAgIHN0YXRlLnByb2Nlc3NTY2hlZHVsZWQgPSB0cnVlO1xuICAgICsrcXVldWVTaXplO1xuICAgIG5leHRUaWNrKGZ1bmN0aW9uKCkgeyBwcm9jZXNzUXVldWUoc3RhdGUpOyB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHZhbCkge1xuICAgIGlmIChwcm9taXNlLiQkc3RhdGUuc3RhdHVzKSByZXR1cm47XG4gICAgaWYgKHZhbCA9PT0gcHJvbWlzZSkge1xuICAgICAgJCRyZWplY3QocHJvbWlzZSwgJHFNaW5FcnIoXG4gICAgICAgICdxY3ljbGUnLFxuICAgICAgICAnRXhwZWN0ZWQgcHJvbWlzZSB0byBiZSByZXNvbHZlZCB3aXRoIHZhbHVlIG90aGVyIHRoYW4gaXRzZWxmIFxcJ3swfVxcJycsXG4gICAgICAgIHZhbCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkJHJlc29sdmUocHJvbWlzZSwgdmFsKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uICQkcmVzb2x2ZShwcm9taXNlLCB2YWwpIHtcbiAgICB2YXIgdGhlbjtcbiAgICB2YXIgZG9uZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBpZiAoaXNPYmplY3QodmFsKSB8fCBpc0Z1bmN0aW9uKHZhbCkpIHRoZW4gPSB2YWwudGhlbjtcbiAgICAgIGlmIChpc0Z1bmN0aW9uKHRoZW4pKSB7XG4gICAgICAgIHByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPSAtMTtcbiAgICAgICAgdGhlbi5jYWxsKHZhbCwgZG9SZXNvbHZlLCBkb1JlamVjdCwgZG9Ob3RpZnkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbWlzZS4kJHN0YXRlLnZhbHVlID0gdmFsO1xuICAgICAgICBwcm9taXNlLiQkc3RhdGUuc3RhdHVzID0gMTtcbiAgICAgICAgc2NoZWR1bGVQcm9jZXNzUXVldWUocHJvbWlzZS4kJHN0YXRlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBkb1JlamVjdChlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkb1Jlc29sdmUodmFsKSB7XG4gICAgICBpZiAoZG9uZSkgcmV0dXJuO1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAkJHJlc29sdmUocHJvbWlzZSwgdmFsKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZG9SZWplY3QodmFsKSB7XG4gICAgICBpZiAoZG9uZSkgcmV0dXJuO1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAkJHJlamVjdChwcm9taXNlLCB2YWwpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkb05vdGlmeShwcm9ncmVzcykge1xuICAgICAgbm90aWZ5UHJvbWlzZShwcm9taXNlLCBwcm9ncmVzcyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShwcm9taXNlLCByZWFzb24pIHtcbiAgICBpZiAocHJvbWlzZS4kJHN0YXRlLnN0YXR1cykgcmV0dXJuO1xuICAgICQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIH1cblxuICBmdW5jdGlvbiAkJHJlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgICBwcm9taXNlLiQkc3RhdGUudmFsdWUgPSByZWFzb247XG4gICAgcHJvbWlzZS4kJHN0YXRlLnN0YXR1cyA9IDI7XG4gICAgc2NoZWR1bGVQcm9jZXNzUXVldWUocHJvbWlzZS4kJHN0YXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGlmeVByb21pc2UocHJvbWlzZSwgcHJvZ3Jlc3MpIHtcbiAgICB2YXIgY2FsbGJhY2tzID0gcHJvbWlzZS4kJHN0YXRlLnBlbmRpbmc7XG5cbiAgICBpZiAoKHByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPD0gMCkgJiYgY2FsbGJhY2tzICYmIGNhbGxiYWNrcy5sZW5ndGgpIHtcbiAgICAgIG5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2FsbGJhY2ssIHJlc3VsdDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY2FsbGJhY2tzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICByZXN1bHQgPSBjYWxsYmFja3NbaV1bMF07XG4gICAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFja3NbaV1bM107XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5vdGlmeVByb21pc2UocmVzdWx0LCBpc0Z1bmN0aW9uKGNhbGxiYWNrKSA/IGNhbGxiYWNrKHByb2dyZXNzKSA6IHByb2dyZXNzKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHEjcmVqZWN0XG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIGFzIHJlamVjdGVkIHdpdGggdGhlIHNwZWNpZmllZCBgcmVhc29uYC4gVGhpcyBhcGkgc2hvdWxkIGJlXG4gICAqIHVzZWQgdG8gZm9yd2FyZCByZWplY3Rpb24gaW4gYSBjaGFpbiBvZiBwcm9taXNlcy4gSWYgeW91IGFyZSBkZWFsaW5nIHdpdGggdGhlIGxhc3QgcHJvbWlzZSBpblxuICAgKiBhIHByb21pc2UgY2hhaW4sIHlvdSBkb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IGl0LlxuICAgKlxuICAgKiBXaGVuIGNvbXBhcmluZyBkZWZlcnJlZHMvcHJvbWlzZXMgdG8gdGhlIGZhbWlsaWFyIGJlaGF2aW9yIG9mIHRyeS9jYXRjaC90aHJvdywgdGhpbmsgb2ZcbiAgICogYHJlamVjdGAgYXMgdGhlIGB0aHJvd2Aga2V5d29yZCBpbiBKYXZhU2NyaXB0LiBUaGlzIGFsc28gbWVhbnMgdGhhdCBpZiB5b3UgXCJjYXRjaFwiIGFuIGVycm9yIHZpYVxuICAgKiBhIHByb21pc2UgZXJyb3IgY2FsbGJhY2sgYW5kIHlvdSB3YW50IHRvIGZvcndhcmQgdGhlIGVycm9yIHRvIHRoZSBwcm9taXNlIGRlcml2ZWQgZnJvbSB0aGVcbiAgICogY3VycmVudCBwcm9taXNlLCB5b3UgaGF2ZSB0byBcInJldGhyb3dcIiB0aGUgZXJyb3IgYnkgcmV0dXJuaW5nIGEgcmVqZWN0aW9uIGNvbnN0cnVjdGVkIHZpYVxuICAgKiBgcmVqZWN0YC5cbiAgICpcbiAgICogYGBganNcbiAgICogICBwcm9taXNlQiA9IHByb21pc2VBLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAqICAgICAvLyBzdWNjZXNzOiBkbyBzb21ldGhpbmcgYW5kIHJlc29sdmUgcHJvbWlzZUJcbiAgICogICAgIC8vICAgICAgICAgIHdpdGggdGhlIG9sZCBvciBhIG5ldyByZXN1bHRcbiAgICogICAgIHJldHVybiByZXN1bHQ7XG4gICAqICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAqICAgICAvLyBlcnJvcjogaGFuZGxlIHRoZSBlcnJvciBpZiBwb3NzaWJsZSBhbmRcbiAgICogICAgIC8vICAgICAgICByZXNvbHZlIHByb21pc2VCIHdpdGggbmV3UHJvbWlzZU9yVmFsdWUsXG4gICAqICAgICAvLyAgICAgICAgb3RoZXJ3aXNlIGZvcndhcmQgdGhlIHJlamVjdGlvbiB0byBwcm9taXNlQlxuICAgKiAgICAgaWYgKGNhbkhhbmRsZShyZWFzb24pKSB7XG4gICAqICAgICAgLy8gaGFuZGxlIHRoZSBlcnJvciBhbmQgcmVjb3ZlclxuICAgKiAgICAgIHJldHVybiBuZXdQcm9taXNlT3JWYWx1ZTtcbiAgICogICAgIH1cbiAgICogICAgIHJldHVybiAkcS5yZWplY3QocmVhc29uKTtcbiAgICogICB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gcmVhc29uIENvbnN0YW50LCBtZXNzYWdlLCBleGNlcHRpb24gb3IgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcmVqZWN0aW9uIHJlYXNvbi5cbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBwcm9taXNlIHRoYXQgd2FzIGFscmVhZHkgcmVzb2x2ZWQgYXMgcmVqZWN0ZWQgd2l0aCB0aGUgYHJlYXNvbmAuXG4gICAqL1xuICBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBQcm9taXNlKCk7XG4gICAgcmVqZWN0UHJvbWlzZShyZXN1bHQsIHJlYXNvbik7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUNhbGxiYWNrKHZhbHVlLCByZXNvbHZlciwgY2FsbGJhY2spIHtcbiAgICB2YXIgY2FsbGJhY2tPdXRwdXQgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIGNhbGxiYWNrT3V0cHV0ID0gY2FsbGJhY2soKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KGUpO1xuICAgIH1cbiAgICBpZiAoaXNQcm9taXNlTGlrZShjYWxsYmFja091dHB1dCkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFja091dHB1dC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZXIodmFsdWUpO1xuICAgICAgfSwgcmVqZWN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlc29sdmVyKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcSN3aGVuXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBXcmFwcyBhbiBvYmplY3QgdGhhdCBtaWdodCBiZSBhIHZhbHVlIG9yIGEgKDNyZCBwYXJ0eSkgdGhlbi1hYmxlIHByb21pc2UgaW50byBhICRxIHByb21pc2UuXG4gICAqIFRoaXMgaXMgdXNlZnVsIHdoZW4geW91IGFyZSBkZWFsaW5nIHdpdGggYW4gb2JqZWN0IHRoYXQgbWlnaHQgb3IgbWlnaHQgbm90IGJlIGEgcHJvbWlzZSwgb3IgaWZcbiAgICogdGhlIHByb21pc2UgY29tZXMgZnJvbSBhIHNvdXJjZSB0aGF0IGNhbid0IGJlIHRydXN0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgb3IgYSBwcm9taXNlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBzdWNjZXNzQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbj19IGVycm9yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbj19IHByb2dyZXNzQ2FsbGJhY2tcbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBwcm9taXNlIG9mIHRoZSBwYXNzZWQgdmFsdWUgb3IgcHJvbWlzZVxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIHdoZW4odmFsdWUsIGNhbGxiYWNrLCBlcnJiYWNrLCBwcm9ncmVzc0JhY2spIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IFByb21pc2UoKTtcbiAgICByZXNvbHZlUHJvbWlzZShyZXN1bHQsIHZhbHVlKTtcbiAgICByZXR1cm4gcmVzdWx0LnRoZW4oY2FsbGJhY2ssIGVycmJhY2ssIHByb2dyZXNzQmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcSNyZXNvbHZlXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBBbGlhcyBvZiB7QGxpbmsgbmcuJHEjd2hlbiB3aGVufSB0byBtYWludGFpbiBuYW1pbmcgY29uc2lzdGVuY3kgd2l0aCBFUzYuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgb3IgYSBwcm9taXNlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBzdWNjZXNzQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbj19IGVycm9yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbj19IHByb2dyZXNzQ2FsbGJhY2tcbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBwcm9taXNlIG9mIHRoZSBwYXNzZWQgdmFsdWUgb3IgcHJvbWlzZVxuICAgKi9cbiAgdmFyIHJlc29sdmUgPSB3aGVuO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRxI2FsbFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ29tYmluZXMgbXVsdGlwbGUgcHJvbWlzZXMgaW50byBhIHNpbmdsZSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiBhbGwgb2YgdGhlIGlucHV0XG4gICAqIHByb21pc2VzIGFyZSByZXNvbHZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheS48UHJvbWlzZT58T2JqZWN0LjxQcm9taXNlPn0gcHJvbWlzZXMgQW4gYXJyYXkgb3IgaGFzaCBvZiBwcm9taXNlcy5cbiAgICogQHJldHVybnMge1Byb21pc2V9IFJldHVybnMgYSBzaW5nbGUgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCBhbiBhcnJheS9oYXNoIG9mIHZhbHVlcyxcbiAgICogICBlYWNoIHZhbHVlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb21pc2UgYXQgdGhlIHNhbWUgaW5kZXgva2V5IGluIHRoZSBgcHJvbWlzZXNgIGFycmF5L2hhc2guXG4gICAqICAgSWYgYW55IG9mIHRoZSBwcm9taXNlcyBpcyByZXNvbHZlZCB3aXRoIGEgcmVqZWN0aW9uLCB0aGlzIHJlc3VsdGluZyBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWRcbiAgICogICB3aXRoIHRoZSBzYW1lIHJlamVjdGlvbiB2YWx1ZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBQcm9taXNlKCksXG4gICAgICAgIGNvdW50ZXIgPSAwLFxuICAgICAgICByZXN1bHRzID0gaXNBcnJheShwcm9taXNlcykgPyBbXSA6IHt9O1xuXG4gICAgZm9yRWFjaChwcm9taXNlcywgZnVuY3Rpb24ocHJvbWlzZSwga2V5KSB7XG4gICAgICBjb3VudGVyKys7XG4gICAgICB3aGVuKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmVzdWx0c1trZXldID0gdmFsdWU7XG4gICAgICAgIGlmICghKC0tY291bnRlcikpIHJlc29sdmVQcm9taXNlKHJlc3VsdCwgcmVzdWx0cyk7XG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgcmVqZWN0UHJvbWlzZShyZXN1bHQsIHJlYXNvbik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGlmIChjb3VudGVyID09PSAwKSB7XG4gICAgICByZXNvbHZlUHJvbWlzZShyZXN1bHQsIHJlc3VsdHMpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcSNyYWNlXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIG9yIHJlamVjdHMgYXMgc29vbiBhcyBvbmUgb2YgdGhvc2UgcHJvbWlzZXNcbiAgICogcmVzb2x2ZXMgb3IgcmVqZWN0cywgd2l0aCB0aGUgdmFsdWUgb3IgcmVhc29uIGZyb20gdGhhdCBwcm9taXNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5LjxQcm9taXNlPnxPYmplY3QuPFByb21pc2U+fSBwcm9taXNlcyBBbiBhcnJheSBvciBoYXNoIG9mIHByb21pc2VzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb3IgcmVqZWN0cyBhcyBzb29uIGFzIG9uZSBvZiB0aGUgYHByb21pc2VzYFxuICAgKiByZXNvbHZlcyBvciByZWplY3RzLCB3aXRoIHRoZSB2YWx1ZSBvciByZWFzb24gZnJvbSB0aGF0IHByb21pc2UuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJhY2UocHJvbWlzZXMpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuXG4gICAgZm9yRWFjaChwcm9taXNlcywgZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgd2hlbihwcm9taXNlKS50aGVuKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uICRRKHJlc29sdmVyKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKHJlc29sdmVyKSkge1xuICAgICAgdGhyb3cgJHFNaW5FcnIoJ25vcnNsdnInLCAnRXhwZWN0ZWQgcmVzb2x2ZXJGbiwgZ290IFxcJ3swfVxcJycsIHJlc29sdmVyKTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKCk7XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlRm4odmFsdWUpIHtcbiAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWplY3RGbihyZWFzb24pIHtcbiAgICAgIHJlamVjdFByb21pc2UocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9XG5cbiAgICByZXNvbHZlcihyZXNvbHZlRm4sIHJlamVjdEZuKTtcblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgLy8gTGV0J3MgbWFrZSB0aGUgaW5zdGFuY2VvZiBvcGVyYXRvciB3b3JrIGZvciBwcm9taXNlcywgc28gdGhhdFxuICAvLyBgbmV3ICRxKGZuKSBpbnN0YW5jZW9mICRxYCB3b3VsZCBldmFsdWF0ZSB0byB0cnVlLlxuICAkUS5wcm90b3R5cGUgPSBQcm9taXNlLnByb3RvdHlwZTtcblxuICAkUS5kZWZlciA9IGRlZmVyO1xuICAkUS5yZWplY3QgPSByZWplY3Q7XG4gICRRLndoZW4gPSB3aGVuO1xuICAkUS5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgJFEuYWxsID0gYWxsO1xuICAkUS5yYWNlID0gcmFjZTtcblxuICByZXR1cm4gJFE7XG59XG5cbmZ1bmN0aW9uIGlzU3RhdGVFeGNlcHRpb25IYW5kbGVkKHN0YXRlKSB7XG4gIHJldHVybiAhIXN0YXRlLnB1cjtcbn1cbmZ1bmN0aW9uIG1hcmtRU3RhdGVFeGNlcHRpb25IYW5kbGVkKHN0YXRlKSB7XG4gIHN0YXRlLnB1ciA9IHRydWU7XG59XG5mdW5jdGlvbiBtYXJrUUV4Y2VwdGlvbkhhbmRsZWQocSkge1xuICBtYXJrUVN0YXRlRXhjZXB0aW9uSGFuZGxlZChxLiQkc3RhdGUpO1xufVxuXG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICQkUkFGUHJvdmlkZXIoKSB7IC8vckFGXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsICckdGltZW91dCcsIGZ1bmN0aW9uKCR3aW5kb3csICR0aW1lb3V0KSB7XG4gICAgdmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9ICR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuXG4gICAgdmFyIGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gJHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZTtcblxuICAgIHZhciByYWZTdXBwb3J0ZWQgPSAhIXJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICB2YXIgcmFmID0gcmFmU3VwcG9ydGVkXG4gICAgICA/IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgdmFyIGlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZuKTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpZCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgOiBmdW5jdGlvbihmbikge1xuICAgICAgICAgIHZhciB0aW1lciA9ICR0aW1lb3V0KGZuLCAxNi42NiwgZmFsc2UpOyAvLyAxMDAwIC8gNjAgPSAxNi42NjZcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICByYWYuc3VwcG9ydGVkID0gcmFmU3VwcG9ydGVkO1xuXG4gICAgcmV0dXJuIHJhZjtcbiAgfV07XG59XG5cbi8qKlxuICogREVTSUdOIE5PVEVTXG4gKlxuICogVGhlIGRlc2lnbiBkZWNpc2lvbnMgYmVoaW5kIHRoZSBzY29wZSBhcmUgaGVhdmlseSBmYXZvcmVkIGZvciBzcGVlZCBhbmQgbWVtb3J5IGNvbnN1bXB0aW9uLlxuICpcbiAqIFRoZSB0eXBpY2FsIHVzZSBvZiBzY29wZSBpcyB0byB3YXRjaCB0aGUgZXhwcmVzc2lvbnMsIHdoaWNoIG1vc3Qgb2YgdGhlIHRpbWUgcmV0dXJuIHRoZSBzYW1lXG4gKiB2YWx1ZSBhcyBsYXN0IHRpbWUgc28gd2Ugb3B0aW1pemUgdGhlIG9wZXJhdGlvbi5cbiAqXG4gKiBDbG9zdXJlcyBjb25zdHJ1Y3Rpb24gaXMgZXhwZW5zaXZlIGluIHRlcm1zIG9mIHNwZWVkIGFzIHdlbGwgYXMgbWVtb3J5OlxuICogICAtIE5vIGNsb3N1cmVzLCBpbnN0ZWFkIHVzZSBwcm90b3R5cGljYWwgaW5oZXJpdGFuY2UgZm9yIEFQSVxuICogICAtIEludGVybmFsIHN0YXRlIG5lZWRzIHRvIGJlIHN0b3JlZCBvbiBzY29wZSBkaXJlY3RseSwgd2hpY2ggbWVhbnMgdGhhdCBwcml2YXRlIHN0YXRlIGlzXG4gKiAgICAgZXhwb3NlZCBhcyAkJF9fX18gcHJvcGVydGllc1xuICpcbiAqIExvb3Agb3BlcmF0aW9ucyBhcmUgb3B0aW1pemVkIGJ5IHVzaW5nIHdoaWxlKGNvdW50LS0pIHsgLi4uIH1cbiAqICAgLSBUaGlzIG1lYW5zIHRoYXQgaW4gb3JkZXIgdG8ga2VlcCB0aGUgc2FtZSBvcmRlciBvZiBleGVjdXRpb24gYXMgYWRkaXRpb24gd2UgaGF2ZSB0byBhZGRcbiAqICAgICBpdGVtcyB0byB0aGUgYXJyYXkgYXQgdGhlIGJlZ2lubmluZyAodW5zaGlmdCkgaW5zdGVhZCBvZiBhdCB0aGUgZW5kIChwdXNoKVxuICpcbiAqIENoaWxkIHNjb3BlcyBhcmUgY3JlYXRlZCBhbmQgcmVtb3ZlZCBvZnRlblxuICogICAtIFVzaW5nIGFuIGFycmF5IHdvdWxkIGJlIHNsb3cgc2luY2UgaW5zZXJ0cyBpbiB0aGUgbWlkZGxlIGFyZSBleHBlbnNpdmU7IHNvIHdlIHVzZSBsaW5rZWQgbGlzdHNcbiAqXG4gKiBUaGVyZSBhcmUgZmV3ZXIgd2F0Y2hlcyB0aGFuIG9ic2VydmVycy4gVGhpcyBpcyB3aHkgeW91IGRvbid0IHdhbnQgdGhlIG9ic2VydmVyIHRvIGJlIGltcGxlbWVudGVkXG4gKiBpbiB0aGUgc2FtZSB3YXkgYXMgd2F0Y2guIFdhdGNoIHJlcXVpcmVzIHJldHVybiBvZiB0aGUgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gd2hpY2ggaXMgZXhwZW5zaXZlXG4gKiB0byBjb25zdHJ1Y3QuXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJHJvb3RTY29wZVByb3ZpZGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBQcm92aWRlciBmb3IgdGhlICRyb290U2NvcGUgc2VydmljZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRyb290U2NvcGVQcm92aWRlciNkaWdlc3RUdGxcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFNldHMgdGhlIG51bWJlciBvZiBgJGRpZ2VzdGAgaXRlcmF0aW9ucyB0aGUgc2NvcGUgc2hvdWxkIGF0dGVtcHQgdG8gZXhlY3V0ZSBiZWZvcmUgZ2l2aW5nIHVwIGFuZFxuICogYXNzdW1pbmcgdGhhdCB0aGUgbW9kZWwgaXMgdW5zdGFibGUuXG4gKlxuICogVGhlIGN1cnJlbnQgZGVmYXVsdCBpcyAxMCBpdGVyYXRpb25zLlxuICpcbiAqIEluIGNvbXBsZXggYXBwbGljYXRpb25zIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgZGVwZW5kZW5jaWVzIGJldHdlZW4gYCR3YXRjaGBzIHdpbGwgcmVzdWx0IGluXG4gKiBzZXZlcmFsIGRpZ2VzdCBpdGVyYXRpb25zLiBIb3dldmVyIGlmIGFuIGFwcGxpY2F0aW9uIG5lZWRzIG1vcmUgdGhhbiB0aGUgZGVmYXVsdCAxMCBkaWdlc3RcbiAqIGl0ZXJhdGlvbnMgZm9yIGl0cyBtb2RlbCB0byBzdGFiaWxpemUgdGhlbiB5b3Ugc2hvdWxkIGludmVzdGlnYXRlIHdoYXQgaXMgY2F1c2luZyB0aGUgbW9kZWwgdG9cbiAqIGNvbnRpbnVvdXNseSBjaGFuZ2UgZHVyaW5nIHRoZSBkaWdlc3QuXG4gKlxuICogSW5jcmVhc2luZyB0aGUgVFRMIGNvdWxkIGhhdmUgcGVyZm9ybWFuY2UgaW1wbGljYXRpb25zLCBzbyB5b3Ugc2hvdWxkIG5vdCBjaGFuZ2UgaXQgd2l0aG91dFxuICogcHJvcGVyIGp1c3RpZmljYXRpb24uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGxpbWl0IFRoZSBudW1iZXIgb2YgZGlnZXN0IGl0ZXJhdGlvbnMuXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkcm9vdFNjb3BlXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEV2ZXJ5IGFwcGxpY2F0aW9uIGhhcyBhIHNpbmdsZSByb290IHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIHNjb3BlfS5cbiAqIEFsbCBvdGhlciBzY29wZXMgYXJlIGRlc2NlbmRhbnQgc2NvcGVzIG9mIHRoZSByb290IHNjb3BlLiBTY29wZXMgcHJvdmlkZSBzZXBhcmF0aW9uXG4gKiBiZXR3ZWVuIHRoZSBtb2RlbCBhbmQgdGhlIHZpZXcsIHZpYSBhIG1lY2hhbmlzbSBmb3Igd2F0Y2hpbmcgdGhlIG1vZGVsIGZvciBjaGFuZ2VzLlxuICogVGhleSBhbHNvIHByb3ZpZGUgZXZlbnQgZW1pc3Npb24vYnJvYWRjYXN0IGFuZCBzdWJzY3JpcHRpb24gZmFjaWxpdHkuIFNlZSB0aGVcbiAqIHtAbGluayBndWlkZS9zY29wZSBkZXZlbG9wZXIgZ3VpZGUgb24gc2NvcGVzfS5cbiAqL1xuZnVuY3Rpb24gJFJvb3RTY29wZVByb3ZpZGVyKCkge1xuICB2YXIgVFRMID0gMTA7XG4gIHZhciAkcm9vdFNjb3BlTWluRXJyID0gbWluRXJyKCckcm9vdFNjb3BlJyk7XG4gIHZhciBsYXN0RGlydHlXYXRjaCA9IG51bGw7XG4gIHZhciBhcHBseUFzeW5jSWQgPSBudWxsO1xuXG4gIHRoaXMuZGlnZXN0VHRsID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgVFRMID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBUVEw7XG4gIH07XG5cbiAgZnVuY3Rpb24gY3JlYXRlQ2hpbGRTY29wZUNsYXNzKHBhcmVudCkge1xuICAgIGZ1bmN0aW9uIENoaWxkU2NvcGUoKSB7XG4gICAgICB0aGlzLiQkd2F0Y2hlcnMgPSB0aGlzLiQkbmV4dFNpYmxpbmcgPVxuICAgICAgICAgIHRoaXMuJCRjaGlsZEhlYWQgPSB0aGlzLiQkY2hpbGRUYWlsID0gbnVsbDtcbiAgICAgIHRoaXMuJCRsaXN0ZW5lcnMgPSB7fTtcbiAgICAgIHRoaXMuJCRsaXN0ZW5lckNvdW50ID0ge307XG4gICAgICB0aGlzLiQkd2F0Y2hlcnNDb3VudCA9IDA7XG4gICAgICB0aGlzLiRpZCA9IG5leHRVaWQoKTtcbiAgICAgIHRoaXMuJCRDaGlsZFNjb3BlID0gbnVsbDtcbiAgICAgIHRoaXMuJCRzdXNwZW5kZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgQ2hpbGRTY29wZS5wcm90b3R5cGUgPSBwYXJlbnQ7XG4gICAgcmV0dXJuIENoaWxkU2NvcGU7XG4gIH1cblxuICB0aGlzLiRnZXQgPSBbJyRleGNlcHRpb25IYW5kbGVyJywgJyRwYXJzZScsICckYnJvd3NlcicsXG4gICAgICBmdW5jdGlvbigkZXhjZXB0aW9uSGFuZGxlciwgJHBhcnNlLCAkYnJvd3Nlcikge1xuXG4gICAgZnVuY3Rpb24gZGVzdHJveUNoaWxkU2NvcGUoJGV2ZW50KSB7XG4gICAgICAgICRldmVudC5jdXJyZW50U2NvcGUuJCRkZXN0cm95ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFuVXBTY29wZSgkc2NvcGUpIHtcblxuICAgICAgLy8gU3VwcG9ydDogSUUgOSBvbmx5XG4gICAgICBpZiAobXNpZSA9PT0gOSkge1xuICAgICAgICAvLyBUaGVyZSBpcyBhIG1lbW9yeSBsZWFrIGluIElFOSBpZiBhbGwgY2hpbGQgc2NvcGVzIGFyZSBub3QgZGlzY29ubmVjdGVkXG4gICAgICAgIC8vIGNvbXBsZXRlbHkgd2hlbiBhIHNjb3BlIGlzIGRlc3Ryb3llZC4gU28gdGhpcyBjb2RlIHdpbGwgcmVjdXJzZSB1cCB0aHJvdWdoXG4gICAgICAgIC8vIGFsbCB0aGlzIHNjb3BlcyBjaGlsZHJlblxuICAgICAgICAvL1xuICAgICAgICAvLyBTZWUgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTA3MDZcbiAgICAgICAgaWYgKCRzY29wZS4kJGNoaWxkSGVhZCkge1xuICAgICAgICAgIGNsZWFuVXBTY29wZSgkc2NvcGUuJCRjaGlsZEhlYWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkc2NvcGUuJCRuZXh0U2libGluZykge1xuICAgICAgICAgIGNsZWFuVXBTY29wZSgkc2NvcGUuJCRuZXh0U2libGluZyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvZGUgYmVsb3cgd29ya3MgYXJvdW5kIElFOSBhbmQgVjgncyBtZW1vcnkgbGVha3NcbiAgICAgIC8vXG4gICAgICAvLyBTZWU6XG4gICAgICAvLyAtIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMDczI2MyNlxuICAgICAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy82Nzk0I2lzc3VlY29tbWVudC0zODY0ODkwOVxuICAgICAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xMzEzI2lzc3VlY29tbWVudC0xMDM3ODQ1MVxuXG4gICAgICAkc2NvcGUuJHBhcmVudCA9ICRzY29wZS4kJG5leHRTaWJsaW5nID0gJHNjb3BlLiQkcHJldlNpYmxpbmcgPSAkc2NvcGUuJCRjaGlsZEhlYWQgPVxuICAgICAgICAgICRzY29wZS4kJGNoaWxkVGFpbCA9ICRzY29wZS4kcm9vdCA9ICRzY29wZS4kJHdhdGNoZXJzID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgdHlwZVxuICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGVcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIEEgcm9vdCBzY29wZSBjYW4gYmUgcmV0cmlldmVkIHVzaW5nIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZSAkcm9vdFNjb3BlfSBrZXkgZnJvbSB0aGVcbiAgICAgKiB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gQ2hpbGQgc2NvcGVzIGFyZSBjcmVhdGVkIHVzaW5nIHRoZVxuICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRuZXcgJG5ldygpfSBtZXRob2QuIChNb3N0IHNjb3BlcyBhcmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IHdoZW5cbiAgICAgKiBjb21waWxlZCBIVE1MIHRlbXBsYXRlIGlzIGV4ZWN1dGVkLikgU2VlIGFsc28gdGhlIHtAbGluayBndWlkZS9zY29wZSBTY29wZXMgZ3VpZGV9IGZvclxuICAgICAqIGFuIGluLWRlcHRoIGludHJvZHVjdGlvbiBhbmQgdXNhZ2UgZXhhbXBsZXMuXG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIEluaGVyaXRhbmNlXG4gICAgICogQSBzY29wZSBjYW4gaW5oZXJpdCBmcm9tIGEgcGFyZW50IHNjb3BlLCBhcyBpbiB0aGlzIGV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgICAgIHZhciBwYXJlbnQgPSAkcm9vdFNjb3BlO1xuICAgICAgICAgdmFyIGNoaWxkID0gcGFyZW50LiRuZXcoKTtcblxuICAgICAgICAgcGFyZW50LnNhbHV0YXRpb24gPSBcIkhlbGxvXCI7XG4gICAgICAgICBleHBlY3QoY2hpbGQuc2FsdXRhdGlvbikudG9FcXVhbCgnSGVsbG8nKTtcblxuICAgICAgICAgY2hpbGQuc2FsdXRhdGlvbiA9IFwiV2VsY29tZVwiO1xuICAgICAgICAgZXhwZWN0KGNoaWxkLnNhbHV0YXRpb24pLnRvRXF1YWwoJ1dlbGNvbWUnKTtcbiAgICAgICAgIGV4cGVjdChwYXJlbnQuc2FsdXRhdGlvbikudG9FcXVhbCgnSGVsbG8nKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFdoZW4gaW50ZXJhY3Rpbmcgd2l0aCBgU2NvcGVgIGluIHRlc3RzLCBhZGRpdGlvbmFsIGhlbHBlciBtZXRob2RzIGFyZSBhdmFpbGFibGUgb24gdGhlXG4gICAgICogaW5zdGFuY2VzIG9mIGBTY29wZWAgdHlwZS4gU2VlIHtAbGluayBuZ01vY2suJHJvb3RTY29wZS5TY29wZSBuZ01vY2sgU2NvcGV9IGZvciBhZGRpdGlvbmFsXG4gICAgICogZGV0YWlscy5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24oKT49fSBwcm92aWRlcnMgTWFwIG9mIHNlcnZpY2UgZmFjdG9yeSB3aGljaCBuZWVkIHRvIGJlXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlZCBmb3IgdGhlIGN1cnJlbnQgc2NvcGUuIERlZmF1bHRzIHRvIHtAbGluayBuZ30uXG4gICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgKj49fSBpbnN0YW5jZUNhY2hlIFByb3ZpZGVzIHByZS1pbnN0YW50aWF0ZWQgc2VydmljZXMgd2hpY2ggc2hvdWxkXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmQvb3ZlcnJpZGUgc2VydmljZXMgcHJvdmlkZWQgYnkgYHByb3ZpZGVyc2AuIFRoaXMgaXMgaGFuZHlcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoZW4gdW5pdC10ZXN0aW5nIGFuZCBoYXZpbmcgdGhlIG5lZWQgdG8gb3ZlcnJpZGUgYSBkZWZhdWx0XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IE5ld2x5IGNyZWF0ZWQgc2NvcGUuXG4gICAgICpcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTY29wZSgpIHtcbiAgICAgIHRoaXMuJGlkID0gbmV4dFVpZCgpO1xuICAgICAgdGhpcy4kJHBoYXNlID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kJHdhdGNoZXJzID1cbiAgICAgICAgICAgICAgICAgICAgIHRoaXMuJCRuZXh0U2libGluZyA9IHRoaXMuJCRwcmV2U2libGluZyA9XG4gICAgICAgICAgICAgICAgICAgICB0aGlzLiQkY2hpbGRIZWFkID0gdGhpcy4kJGNoaWxkVGFpbCA9IG51bGw7XG4gICAgICB0aGlzLiRyb290ID0gdGhpcztcbiAgICAgIHRoaXMuJCRkZXN0cm95ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuJCRzdXNwZW5kZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuJCRsaXN0ZW5lcnMgPSB7fTtcbiAgICAgIHRoaXMuJCRsaXN0ZW5lckNvdW50ID0ge307XG4gICAgICB0aGlzLiQkd2F0Y2hlcnNDb3VudCA9IDA7XG4gICAgICB0aGlzLiQkaXNvbGF0ZUJpbmRpbmdzID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRpZFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogVW5pcXVlIHNjb3BlIElEIChtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcpIHVzZWZ1bCBmb3IgZGVidWdnaW5nLlxuICAgICAqL1xuXG4gICAgIC8qKlxuICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkcGFyZW50XG4gICAgICAqXG4gICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHBhcmVudCBzY29wZS5cbiAgICAgICovXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRyb290XG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHJvb3Qgc2NvcGUuXG4gICAgICAgKi9cblxuICAgIFNjb3BlLnByb3RvdHlwZSA9IHtcbiAgICAgIGNvbnN0cnVjdG9yOiBTY29wZSxcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkbmV3XG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQ3JlYXRlcyBhIG5ldyBjaGlsZCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0uXG4gICAgICAgKlxuICAgICAgICogVGhlIHBhcmVudCBzY29wZSB3aWxsIHByb3BhZ2F0ZSB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9IGV2ZW50LlxuICAgICAgICogVGhlIHNjb3BlIGNhbiBiZSByZW1vdmVkIGZyb20gdGhlIHNjb3BlIGhpZXJhcmNoeSB1c2luZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveSAkZGVzdHJveSgpfS5cbiAgICAgICAqXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveSAkZGVzdHJveSgpfSBtdXN0IGJlIGNhbGxlZCBvbiBhIHNjb3BlIHdoZW4gaXQgaXNcbiAgICAgICAqIGRlc2lyZWQgZm9yIHRoZSBzY29wZSBhbmQgaXRzIGNoaWxkIHNjb3BlcyB0byBiZSBwZXJtYW5lbnRseSBkZXRhY2hlZCBmcm9tIHRoZSBwYXJlbnQgYW5kXG4gICAgICAgKiB0aHVzIHN0b3AgcGFydGljaXBhdGluZyBpbiBtb2RlbCBjaGFuZ2UgZGV0ZWN0aW9uIGFuZCBsaXN0ZW5lciBub3RpZmljYXRpb24gYnkgaW52b2tpbmcuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBpc29sYXRlIElmIHRydWUsIHRoZW4gdGhlIHNjb3BlIGRvZXMgbm90IHByb3RvdHlwaWNhbGx5IGluaGVyaXQgZnJvbSB0aGVcbiAgICAgICAqICAgICAgICAgcGFyZW50IHNjb3BlLiBUaGUgc2NvcGUgaXMgaXNvbGF0ZWQsIGFzIGl0IGNhbiBub3Qgc2VlIHBhcmVudCBzY29wZSBwcm9wZXJ0aWVzLlxuICAgICAgICogICAgICAgICBXaGVuIGNyZWF0aW5nIHdpZGdldHMsIGl0IGlzIHVzZWZ1bCBmb3IgdGhlIHdpZGdldCB0byBub3QgYWNjaWRlbnRhbGx5IHJlYWQgcGFyZW50XG4gICAgICAgKiAgICAgICAgIHN0YXRlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7U2NvcGV9IFtwYXJlbnQ9dGhpc10gVGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIGBTY29wZWB9IHRoYXQgd2lsbCBiZSB0aGUgYCRwYXJlbnRgXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mIHRoZSBuZXdseSBjcmVhdGVkIHNjb3BlLiBEZWZhdWx0cyB0byBgdGhpc2Agc2NvcGUgaWYgbm90IHByb3ZpZGVkLlxuICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIGlzIHVzZWQgd2hlbiBjcmVhdGluZyBhIHRyYW5zY2x1ZGUgc2NvcGUgdG8gY29ycmVjdGx5IHBsYWNlIGl0XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRoZSBzY29wZSBoaWVyYXJjaHkgd2hpbGUgbWFpbnRhaW5pbmcgdGhlIGNvcnJlY3QgcHJvdG90eXBpY2FsXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRhbmNlLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBuZXdseSBjcmVhdGVkIGNoaWxkIHNjb3BlLlxuICAgICAgICpcbiAgICAgICAqL1xuICAgICAgJG5ldzogZnVuY3Rpb24oaXNvbGF0ZSwgcGFyZW50KSB7XG4gICAgICAgIHZhciBjaGlsZDtcblxuICAgICAgICBwYXJlbnQgPSBwYXJlbnQgfHwgdGhpcztcblxuICAgICAgICBpZiAoaXNvbGF0ZSkge1xuICAgICAgICAgIGNoaWxkID0gbmV3IFNjb3BlKCk7XG4gICAgICAgICAgY2hpbGQuJHJvb3QgPSB0aGlzLiRyb290O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE9ubHkgY3JlYXRlIGEgY2hpbGQgc2NvcGUgY2xhc3MgaWYgc29tZWJvZHkgYXNrcyBmb3Igb25lLFxuICAgICAgICAgIC8vIGJ1dCBjYWNoZSBpdCB0byBhbGxvdyB0aGUgVk0gdG8gb3B0aW1pemUgbG9va3Vwcy5cbiAgICAgICAgICBpZiAoIXRoaXMuJCRDaGlsZFNjb3BlKSB7XG4gICAgICAgICAgICB0aGlzLiQkQ2hpbGRTY29wZSA9IGNyZWF0ZUNoaWxkU2NvcGVDbGFzcyh0aGlzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2hpbGQgPSBuZXcgdGhpcy4kJENoaWxkU2NvcGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjaGlsZC4kcGFyZW50ID0gcGFyZW50O1xuICAgICAgICBjaGlsZC4kJHByZXZTaWJsaW5nID0gcGFyZW50LiQkY2hpbGRUYWlsO1xuICAgICAgICBpZiAocGFyZW50LiQkY2hpbGRIZWFkKSB7XG4gICAgICAgICAgcGFyZW50LiQkY2hpbGRUYWlsLiQkbmV4dFNpYmxpbmcgPSBjaGlsZDtcbiAgICAgICAgICBwYXJlbnQuJCRjaGlsZFRhaWwgPSBjaGlsZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJlbnQuJCRjaGlsZEhlYWQgPSBwYXJlbnQuJCRjaGlsZFRhaWwgPSBjaGlsZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gdGhlIG5ldyBzY29wZSBpcyBub3QgaXNvbGF0ZWQgb3Igd2UgaW5oZXJpdCBmcm9tIGB0aGlzYCwgYW5kXG4gICAgICAgIC8vIHRoZSBwYXJlbnQgc2NvcGUgaXMgZGVzdHJveWVkLCB0aGUgcHJvcGVydHkgYCQkZGVzdHJveWVkYCBpcyBpbmhlcml0ZWRcbiAgICAgICAgLy8gcHJvdG90eXBpY2FsbHkuIEluIGFsbCBvdGhlciBjYXNlcywgdGhpcyBwcm9wZXJ0eSBuZWVkcyB0byBiZSBzZXRcbiAgICAgICAgLy8gd2hlbiB0aGUgcGFyZW50IHNjb3BlIGlzIGRlc3Ryb3llZC5cbiAgICAgICAgLy8gVGhlIGxpc3RlbmVyIG5lZWRzIHRvIGJlIGFkZGVkIGFmdGVyIHRoZSBwYXJlbnQgaXMgc2V0XG4gICAgICAgIGlmIChpc29sYXRlIHx8IHBhcmVudCAhPT0gdGhpcykgY2hpbGQuJG9uKCckZGVzdHJveScsIGRlc3Ryb3lDaGlsZFNjb3BlKTtcblxuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHdhdGNoXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmVnaXN0ZXJzIGEgYGxpc3RlbmVyYCBjYWxsYmFjayB0byBiZSBleGVjdXRlZCB3aGVuZXZlciB0aGUgYHdhdGNoRXhwcmVzc2lvbmAgY2hhbmdlcy5cbiAgICAgICAqXG4gICAgICAgKiAtIFRoZSBgd2F0Y2hFeHByZXNzaW9uYCBpcyBjYWxsZWQgb24gZXZlcnkgY2FsbCB0byB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0XG4gICAgICAgKiAgICRkaWdlc3QoKX0gYW5kIHNob3VsZCByZXR1cm4gdGhlIHZhbHVlIHRoYXQgd2lsbCBiZSB3YXRjaGVkLiAoYHdhdGNoRXhwcmVzc2lvbmAgc2hvdWxkIG5vdCBjaGFuZ2VcbiAgICAgICAqICAgaXRzIHZhbHVlIHdoZW4gZXhlY3V0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCB0aGUgc2FtZSBpbnB1dCBiZWNhdXNlIGl0IG1heSBiZSBleGVjdXRlZCBtdWx0aXBsZVxuICAgICAgICogICB0aW1lcyBieSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QoKX0uIFRoYXQgaXMsIGB3YXRjaEV4cHJlc3Npb25gIHNob3VsZCBiZVxuICAgICAgICogICBbaWRlbXBvdGVudF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JZGVtcG90ZW5jZSkuKVxuICAgICAgICogLSBUaGUgYGxpc3RlbmVyYCBpcyBjYWxsZWQgb25seSB3aGVuIHRoZSB2YWx1ZSBmcm9tIHRoZSBjdXJyZW50IGB3YXRjaEV4cHJlc3Npb25gIGFuZCB0aGVcbiAgICAgICAqICAgcHJldmlvdXMgY2FsbCB0byBgd2F0Y2hFeHByZXNzaW9uYCBhcmUgbm90IGVxdWFsICh3aXRoIHRoZSBleGNlcHRpb24gb2YgdGhlIGluaXRpYWwgcnVuLFxuICAgICAgICogICBzZWUgYmVsb3cpLiBJbmVxdWFsaXR5IGlzIGRldGVybWluZWQgYWNjb3JkaW5nIHRvIHJlZmVyZW5jZSBpbmVxdWFsaXR5LFxuICAgICAgICogICBbc3RyaWN0IGNvbXBhcmlzb25dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL09wZXJhdG9ycy9Db21wYXJpc29uX09wZXJhdG9ycylcbiAgICAgICAqICAgIHZpYSB0aGUgYCE9PWAgSmF2YXNjcmlwdCBvcGVyYXRvciwgdW5sZXNzIGBvYmplY3RFcXVhbGl0eSA9PSB0cnVlYFxuICAgICAgICogICAoc2VlIG5leHQgcG9pbnQpXG4gICAgICAgKiAtIFdoZW4gYG9iamVjdEVxdWFsaXR5ID09IHRydWVgLCBpbmVxdWFsaXR5IG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uYCBpcyBkZXRlcm1pbmVkXG4gICAgICAgKiAgIGFjY29yZGluZyB0byB0aGUge0BsaW5rIGFuZ3VsYXIuZXF1YWxzfSBmdW5jdGlvbi4gVG8gc2F2ZSB0aGUgdmFsdWUgb2YgdGhlIG9iamVjdCBmb3JcbiAgICAgICAqICAgbGF0ZXIgY29tcGFyaXNvbiwgdGhlIHtAbGluayBhbmd1bGFyLmNvcHl9IGZ1bmN0aW9uIGlzIHVzZWQuIFRoaXMgdGhlcmVmb3JlIG1lYW5zIHRoYXRcbiAgICAgICAqICAgd2F0Y2hpbmcgY29tcGxleCBvYmplY3RzIHdpbGwgaGF2ZSBhZHZlcnNlIG1lbW9yeSBhbmQgcGVyZm9ybWFuY2UgaW1wbGljYXRpb25zLlxuICAgICAgICogLSBUaGlzIHNob3VsZCBub3QgYmUgdXNlZCB0byB3YXRjaCBmb3IgY2hhbmdlcyBpbiBvYmplY3RzIHRoYXQgYXJlIChvciBjb250YWluKVxuICAgICAgICogICBbRmlsZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0ZpbGUpIG9iamVjdHMgZHVlIHRvIGxpbWl0YXRpb25zIHdpdGgge0BsaW5rIGFuZ3VsYXIuY29weSBgYW5ndWxhci5jb3B5YH0uXG4gICAgICAgKiAtIFRoZSB3YXRjaCBgbGlzdGVuZXJgIG1heSBjaGFuZ2UgdGhlIG1vZGVsLCB3aGljaCBtYXkgdHJpZ2dlciBvdGhlciBgbGlzdGVuZXJgcyB0byBmaXJlLlxuICAgICAgICogICBUaGlzIGlzIGFjaGlldmVkIGJ5IHJlcnVubmluZyB0aGUgd2F0Y2hlcnMgdW50aWwgbm8gY2hhbmdlcyBhcmUgZGV0ZWN0ZWQuIFRoZSByZXJ1blxuICAgICAgICogICBpdGVyYXRpb24gbGltaXQgaXMgMTAgdG8gcHJldmVudCBhbiBpbmZpbml0ZSBsb29wIGRlYWRsb2NrLlxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBJZiB5b3Ugd2FudCB0byBiZSBub3RpZmllZCB3aGVuZXZlciB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3R9IGlzIGNhbGxlZCxcbiAgICAgICAqIHlvdSBjYW4gcmVnaXN0ZXIgYSBgd2F0Y2hFeHByZXNzaW9uYCBmdW5jdGlvbiB3aXRoIG5vIGBsaXN0ZW5lcmAuIChCZSBwcmVwYXJlZCBmb3JcbiAgICAgICAqIG11bHRpcGxlIGNhbGxzIHRvIHlvdXIgYHdhdGNoRXhwcmVzc2lvbmAgYmVjYXVzZSBpdCB3aWxsIGV4ZWN1dGUgbXVsdGlwbGUgdGltZXMgaW4gYVxuICAgICAgICogc2luZ2xlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUgaWYgYSBjaGFuZ2UgaXMgZGV0ZWN0ZWQuKVxuICAgICAgICpcbiAgICAgICAqIEFmdGVyIGEgd2F0Y2hlciBpcyByZWdpc3RlcmVkIHdpdGggdGhlIHNjb3BlLCB0aGUgYGxpc3RlbmVyYCBmbiBpcyBjYWxsZWQgYXN5bmNocm9ub3VzbHlcbiAgICAgICAqICh2aWEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGV2YWxBc3luYyAkZXZhbEFzeW5jfSkgdG8gaW5pdGlhbGl6ZSB0aGVcbiAgICAgICAqIHdhdGNoZXIuIEluIHJhcmUgY2FzZXMsIHRoaXMgaXMgdW5kZXNpcmFibGUgYmVjYXVzZSB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkIHdoZW4gdGhlIHJlc3VsdFxuICAgICAgICogb2YgYHdhdGNoRXhwcmVzc2lvbmAgZGlkbid0IGNoYW5nZS4gVG8gZGV0ZWN0IHRoaXMgc2NlbmFyaW8gd2l0aGluIHRoZSBgbGlzdGVuZXJgIGZuLCB5b3VcbiAgICAgICAqIGNhbiBjb21wYXJlIHRoZSBgbmV3VmFsYCBhbmQgYG9sZFZhbGAuIElmIHRoZXNlIHR3byB2YWx1ZXMgYXJlIGlkZW50aWNhbCAoYD09PWApIHRoZW4gdGhlXG4gICAgICAgKiBsaXN0ZW5lciB3YXMgY2FsbGVkIGR1ZSB0byBpbml0aWFsaXphdGlvbi5cbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICAvLyBsZXQncyBhc3N1bWUgdGhhdCBzY29wZSB3YXMgZGVwZW5kZW5jeSBpbmplY3RlZCBhcyB0aGUgJHJvb3RTY29wZVxuICAgICAgICAgICB2YXIgc2NvcGUgPSAkcm9vdFNjb3BlO1xuICAgICAgICAgICBzY29wZS5uYW1lID0gJ21pc2tvJztcbiAgICAgICAgICAgc2NvcGUuY291bnRlciA9IDA7XG5cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSBzY29wZS5jb3VudGVyICsgMTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xuXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyIGlzIGFsd2F5cyBjYWxsZWQgZHVyaW5nIHRoZSBmaXJzdCAkZGlnZXN0IGxvb3AgYWZ0ZXIgaXQgd2FzIHJlZ2lzdGVyZWRcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAvLyBidXQgbm93IGl0IHdpbGwgbm90IGJlIGNhbGxlZCB1bmxlc3MgdGhlIHZhbHVlIGNoYW5nZXNcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdhZGFtJztcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgyKTtcblxuXG5cbiAgICAgICAgICAgLy8gVXNpbmcgYSBmdW5jdGlvbiBhcyBhIHdhdGNoRXhwcmVzc2lvblxuICAgICAgICAgICB2YXIgZm9vZDtcbiAgICAgICAgICAgc2NvcGUuZm9vZENvdW50ZXIgPSAwO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgIHNjb3BlLiR3YXRjaChcbiAgICAgICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHZhbHVlIGJlaW5nIHdhdGNoZWQuIEl0IGlzIGNhbGxlZCBmb3IgZWFjaCB0dXJuIG9mIHRoZSAkZGlnZXN0IGxvb3BcbiAgICAgICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIGZvb2Q7IH0sXG4gICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgY2hhbmdlIGxpc3RlbmVyLCBjYWxsZWQgd2hlbiB0aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgYWJvdmUgZnVuY3Rpb24gY2hhbmdlc1xuICAgICAgICAgICAgIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgaWYgKCBuZXdWYWx1ZSAhPT0gb2xkVmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgIC8vIE9ubHkgaW5jcmVtZW50IHRoZSBjb3VudGVyIGlmIHRoZSB2YWx1ZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgIHNjb3BlLmZvb2RDb3VudGVyID0gc2NvcGUuZm9vZENvdW50ZXIgKyAxO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgKTtcbiAgICAgICAgICAgLy8gTm8gZGlnZXN0IGhhcyBiZWVuIHJ1biBzbyB0aGUgY291bnRlciB3aWxsIGJlIHplcm9cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmZvb2RDb3VudGVyKS50b0VxdWFsKDApO1xuXG4gICAgICAgICAgIC8vIFJ1biB0aGUgZGlnZXN0IGJ1dCBzaW5jZSBmb29kIGhhcyBub3QgY2hhbmdlZCBjb3VudCB3aWxsIHN0aWxsIGJlIHplcm9cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XG5cbiAgICAgICAgICAgLy8gVXBkYXRlIGZvb2QgYW5kIHJ1biBkaWdlc3QuICBOb3cgdGhlIGNvdW50ZXIgd2lsbCBpbmNyZW1lbnRcbiAgICAgICAgICAgZm9vZCA9ICdjaGVlc2VidXJnZXInO1xuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5mb29kQ291bnRlcikudG9FcXVhbCgxKTtcblxuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhmdW5jdGlvbigpfHN0cmluZyl9IHdhdGNoRXhwcmVzc2lvbiBFeHByZXNzaW9uIHRoYXQgaXMgZXZhbHVhdGVkIG9uIGVhY2hcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUuIEEgY2hhbmdlIGluIHRoZSByZXR1cm4gdmFsdWUgdHJpZ2dlcnNcbiAgICAgICAqICAgIGEgY2FsbCB0byB0aGUgYGxpc3RlbmVyYC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBFdmFsdWF0ZWQgYXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn1cbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGNhbGxlZCB3aXRoIGN1cnJlbnQgYHNjb3BlYCBhcyBhIHBhcmFtZXRlci5cbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwsIHNjb3BlKX0gbGlzdGVuZXIgQ2FsbGJhY2sgY2FsbGVkIHdoZW5ldmVyIHRoZSB2YWx1ZVxuICAgICAgICogICAgb2YgYHdhdGNoRXhwcmVzc2lvbmAgY2hhbmdlcy5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBuZXdWYWxgIGNvbnRhaW5zIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uYFxuICAgICAgICogICAgLSBgb2xkVmFsYCBjb250YWlucyB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25gXG4gICAgICAgKiAgICAtIGBzY29wZWAgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlXG4gICAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbb2JqZWN0RXF1YWxpdHk9ZmFsc2VdIENvbXBhcmUgZm9yIG9iamVjdCBlcXVhbGl0eSB1c2luZyB7QGxpbmsgYW5ndWxhci5lcXVhbHN9IGluc3RlYWQgb2ZcbiAgICAgICAqICAgICBjb21wYXJpbmcgZm9yIHJlZmVyZW5jZSBlcXVhbGl0eS5cbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGVyZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgKi9cbiAgICAgICR3YXRjaDogZnVuY3Rpb24od2F0Y2hFeHAsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcHJldHR5UHJpbnRFeHByZXNzaW9uKSB7XG4gICAgICAgIHZhciBnZXQgPSAkcGFyc2Uod2F0Y2hFeHApO1xuICAgICAgICB2YXIgZm4gPSBpc0Z1bmN0aW9uKGxpc3RlbmVyKSA/IGxpc3RlbmVyIDogbm9vcDtcblxuICAgICAgICBpZiAoZ2V0LiQkd2F0Y2hEZWxlZ2F0ZSkge1xuICAgICAgICAgIHJldHVybiBnZXQuJCR3YXRjaERlbGVnYXRlKHRoaXMsIGZuLCBvYmplY3RFcXVhbGl0eSwgZ2V0LCB3YXRjaEV4cCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcyxcbiAgICAgICAgICAgIGFycmF5ID0gc2NvcGUuJCR3YXRjaGVycyxcbiAgICAgICAgICAgIHdhdGNoZXIgPSB7XG4gICAgICAgICAgICAgIGZuOiBmbixcbiAgICAgICAgICAgICAgbGFzdDogaW5pdFdhdGNoVmFsLFxuICAgICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgICAgZXhwOiBwcmV0dHlQcmludEV4cHJlc3Npb24gfHwgd2F0Y2hFeHAsXG4gICAgICAgICAgICAgIGVxOiAhIW9iamVjdEVxdWFsaXR5XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcblxuICAgICAgICBpZiAoIWFycmF5KSB7XG4gICAgICAgICAgYXJyYXkgPSBzY29wZS4kJHdhdGNoZXJzID0gW107XG4gICAgICAgICAgYXJyYXkuJCRkaWdlc3RXYXRjaEluZGV4ID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2UgdXNlIHVuc2hpZnQgc2luY2Ugd2UgdXNlIGEgd2hpbGUgbG9vcCBpbiAkZGlnZXN0IGZvciBzcGVlZC5cbiAgICAgICAgLy8gdGhlIHdoaWxlIGxvb3AgcmVhZHMgaW4gcmV2ZXJzZSBvcmRlci5cbiAgICAgICAgYXJyYXkudW5zaGlmdCh3YXRjaGVyKTtcbiAgICAgICAgYXJyYXkuJCRkaWdlc3RXYXRjaEluZGV4Kys7XG4gICAgICAgIGluY3JlbWVudFdhdGNoZXJzQ291bnQodGhpcywgMSk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJXYXRjaCgpIHtcbiAgICAgICAgICB2YXIgaW5kZXggPSBhcnJheVJlbW92ZShhcnJheSwgd2F0Y2hlcik7XG4gICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGluY3JlbWVudFdhdGNoZXJzQ291bnQoc2NvcGUsIC0xKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA8IGFycmF5LiQkZGlnZXN0V2F0Y2hJbmRleCkge1xuICAgICAgICAgICAgICBhcnJheS4kJGRpZ2VzdFdhdGNoSW5kZXgtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaEdyb3VwXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQSB2YXJpYW50IG9mIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCAkd2F0Y2goKX0gd2hlcmUgaXQgd2F0Y2hlcyBhbiBhcnJheSBvZiBgd2F0Y2hFeHByZXNzaW9uc2AuXG4gICAgICAgKiBJZiBhbnkgb25lIGV4cHJlc3Npb24gaW4gdGhlIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgYGxpc3RlbmVyYCBpcyBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAtIFRoZSBpdGVtcyBpbiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgIGFycmF5IGFyZSBvYnNlcnZlZCB2aWEgdGhlIHN0YW5kYXJkIGAkd2F0Y2hgIG9wZXJhdGlvbi4gVGhlaXIgcmV0dXJuXG4gICAgICAgKiAgIHZhbHVlcyBhcmUgZXhhbWluZWQgZm9yIGNoYW5nZXMgb24gZXZlcnkgY2FsbCB0byBgJGRpZ2VzdGAuXG4gICAgICAgKiAtIFRoZSBgbGlzdGVuZXJgIGlzIGNhbGxlZCB3aGVuZXZlciBhbnkgZXhwcmVzc2lvbiBpbiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgIGFycmF5IGNoYW5nZXMuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtBcnJheS48c3RyaW5nfEZ1bmN0aW9uKHNjb3BlKT59IHdhdGNoRXhwcmVzc2lvbnMgQXJyYXkgb2YgZXhwcmVzc2lvbnMgdGhhdCB3aWxsIGJlIGluZGl2aWR1YWxseVxuICAgICAgICogd2F0Y2hlZCB1c2luZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggJHdhdGNoKCl9XG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXdWYWx1ZXMsIG9sZFZhbHVlcywgc2NvcGUpfSBsaXN0ZW5lciBDYWxsYmFjayBjYWxsZWQgd2hlbmV2ZXIgdGhlIHJldHVybiB2YWx1ZSBvZiBhbnlcbiAgICAgICAqICAgIGV4cHJlc3Npb24gaW4gYHdhdGNoRXhwcmVzc2lvbnNgIGNoYW5nZXNcbiAgICAgICAqICAgIFRoZSBgbmV3VmFsdWVzYCBhcnJheSBjb250YWlucyB0aGUgY3VycmVudCB2YWx1ZXMgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25zYCwgd2l0aCB0aGUgaW5kZXhlcyBtYXRjaGluZ1xuICAgICAgICogICAgdGhvc2Ugb2YgYHdhdGNoRXhwcmVzc2lvbmBcbiAgICAgICAqICAgIGFuZCB0aGUgYG9sZFZhbHVlc2AgYXJyYXkgY29udGFpbnMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbnNgLCB3aXRoIHRoZSBpbmRleGVzIG1hdGNoaW5nXG4gICAgICAgKiAgICB0aG9zZSBvZiBgd2F0Y2hFeHByZXNzaW9uYFxuICAgICAgICogICAgVGhlIGBzY29wZWAgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHNjb3BlLlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIGFsbCBsaXN0ZW5lcnMuXG4gICAgICAgKi9cbiAgICAgICR3YXRjaEdyb3VwOiBmdW5jdGlvbih3YXRjaEV4cHJlc3Npb25zLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgb2xkVmFsdWVzID0gbmV3IEFycmF5KHdhdGNoRXhwcmVzc2lvbnMubGVuZ3RoKTtcbiAgICAgICAgdmFyIG5ld1ZhbHVlcyA9IG5ldyBBcnJheSh3YXRjaEV4cHJlc3Npb25zLmxlbmd0aCk7XG4gICAgICAgIHZhciBkZXJlZ2lzdGVyRm5zID0gW107XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBmaXJzdFJ1biA9IHRydWU7XG5cbiAgICAgICAgaWYgKCF3YXRjaEV4cHJlc3Npb25zLmxlbmd0aCkge1xuICAgICAgICAgIC8vIE5vIGV4cHJlc3Npb25zIG1lYW5zIHdlIGNhbGwgdGhlIGxpc3RlbmVyIEFTQVBcbiAgICAgICAgICB2YXIgc2hvdWxkQ2FsbCA9IHRydWU7XG4gICAgICAgICAgc2VsZi4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNob3VsZENhbGwpIGxpc3RlbmVyKG5ld1ZhbHVlcywgbmV3VmFsdWVzLCBzZWxmKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoR3JvdXAoKSB7XG4gICAgICAgICAgICBzaG91bGRDYWxsID0gZmFsc2U7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3YXRjaEV4cHJlc3Npb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBzaXplIG9mIG9uZVxuICAgICAgICAgIHJldHVybiB0aGlzLiR3YXRjaCh3YXRjaEV4cHJlc3Npb25zWzBdLCBmdW5jdGlvbiB3YXRjaEdyb3VwQWN0aW9uKHZhbHVlLCBvbGRWYWx1ZSwgc2NvcGUpIHtcbiAgICAgICAgICAgIG5ld1ZhbHVlc1swXSA9IHZhbHVlO1xuICAgICAgICAgICAgb2xkVmFsdWVzWzBdID0gb2xkVmFsdWU7XG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZXMsICh2YWx1ZSA9PT0gb2xkVmFsdWUpID8gbmV3VmFsdWVzIDogb2xkVmFsdWVzLCBzY29wZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JFYWNoKHdhdGNoRXhwcmVzc2lvbnMsIGZ1bmN0aW9uKGV4cHIsIGkpIHtcbiAgICAgICAgICB2YXIgdW53YXRjaEZuID0gc2VsZi4kd2F0Y2goZXhwciwgZnVuY3Rpb24gd2F0Y2hHcm91cFN1YkFjdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgbmV3VmFsdWVzW2ldID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoIWNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc2VsZi4kZXZhbEFzeW5jKHdhdGNoR3JvdXBBY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRlcmVnaXN0ZXJGbnMucHVzaCh1bndhdGNoRm4pO1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiB3YXRjaEdyb3VwQWN0aW9uKCkge1xuICAgICAgICAgIGNoYW5nZVJlYWN0aW9uU2NoZWR1bGVkID0gZmFsc2U7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGZpcnN0UnVuKSB7XG4gICAgICAgICAgICAgIGZpcnN0UnVuID0gZmFsc2U7XG4gICAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlcywgbmV3VmFsdWVzLCBzZWxmKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlcywgb2xkVmFsdWVzLCBzZWxmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3YXRjaEV4cHJlc3Npb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIG9sZFZhbHVlc1tpXSA9IG5ld1ZhbHVlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoR3JvdXAoKSB7XG4gICAgICAgICAgd2hpbGUgKGRlcmVnaXN0ZXJGbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBkZXJlZ2lzdGVyRm5zLnNoaWZ0KCkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkd2F0Y2hDb2xsZWN0aW9uXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogU2hhbGxvdyB3YXRjaGVzIHRoZSBwcm9wZXJ0aWVzIG9mIGFuIG9iamVjdCBhbmQgZmlyZXMgd2hlbmV2ZXIgYW55IG9mIHRoZSBwcm9wZXJ0aWVzIGNoYW5nZVxuICAgICAgICogKGZvciBhcnJheXMsIHRoaXMgaW1wbGllcyB3YXRjaGluZyB0aGUgYXJyYXkgaXRlbXM7IGZvciBvYmplY3QgbWFwcywgdGhpcyBpbXBsaWVzIHdhdGNoaW5nXG4gICAgICAgKiB0aGUgcHJvcGVydGllcykuIElmIGEgY2hhbmdlIGlzIGRldGVjdGVkLCB0aGUgYGxpc3RlbmVyYCBjYWxsYmFjayBpcyBmaXJlZC5cbiAgICAgICAqXG4gICAgICAgKiAtIFRoZSBgb2JqYCBjb2xsZWN0aW9uIGlzIG9ic2VydmVkIHZpYSBzdGFuZGFyZCAkd2F0Y2ggb3BlcmF0aW9uIGFuZCBpcyBleGFtaW5lZCBvbiBldmVyeVxuICAgICAgICogICBjYWxsIHRvICRkaWdlc3QoKSB0byBzZWUgaWYgYW55IGl0ZW1zIGhhdmUgYmVlbiBhZGRlZCwgcmVtb3ZlZCwgb3IgbW92ZWQuXG4gICAgICAgKiAtIFRoZSBgbGlzdGVuZXJgIGlzIGNhbGxlZCB3aGVuZXZlciBhbnl0aGluZyB3aXRoaW4gdGhlIGBvYmpgIGhhcyBjaGFuZ2VkLiBFeGFtcGxlcyBpbmNsdWRlXG4gICAgICAgKiAgIGFkZGluZywgcmVtb3ZpbmcsIGFuZCBtb3ZpbmcgaXRlbXMgYmVsb25naW5nIHRvIGFuIG9iamVjdCBvciBhcnJheS5cbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgICAgJHNjb3BlLm5hbWVzID0gWydpZ29yJywgJ21hdGlhcycsICdtaXNrbycsICdqYW1lcyddO1xuICAgICAgICAgICRzY29wZS5kYXRhQ291bnQgPSA0O1xuXG4gICAgICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oJ25hbWVzJywgZnVuY3Rpb24obmV3TmFtZXMsIG9sZE5hbWVzKSB7XG4gICAgICAgICAgICAkc2NvcGUuZGF0YUNvdW50ID0gbmV3TmFtZXMubGVuZ3RoO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgZXhwZWN0KCRzY29wZS5kYXRhQ291bnQpLnRvRXF1YWwoNCk7XG4gICAgICAgICAgJHNjb3BlLiRkaWdlc3QoKTtcblxuICAgICAgICAgIC8vc3RpbGwgYXQgNCAuLi4gbm8gY2hhbmdlc1xuICAgICAgICAgIGV4cGVjdCgkc2NvcGUuZGF0YUNvdW50KS50b0VxdWFsKDQpO1xuXG4gICAgICAgICAgJHNjb3BlLm5hbWVzLnBvcCgpO1xuICAgICAgICAgICRzY29wZS4kZGlnZXN0KCk7XG5cbiAgICAgICAgICAvL25vdyB0aGVyZSdzIGJlZW4gYSBjaGFuZ2VcbiAgICAgICAgICBleHBlY3QoJHNjb3BlLmRhdGFDb3VudCkudG9FcXVhbCgzKTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbihzY29wZSl9IG9iaiBFdmFsdWF0ZWQgYXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0uIFRoZVxuICAgICAgICogICAgZXhwcmVzc2lvbiB2YWx1ZSBzaG91bGQgZXZhbHVhdGUgdG8gYW4gb2JqZWN0IG9yIGFuIGFycmF5IHdoaWNoIGlzIG9ic2VydmVkIG9uIGVhY2hcbiAgICAgICAqICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gY3ljbGUuIEFueSBzaGFsbG93IGNoYW5nZSB3aXRoaW4gdGhlXG4gICAgICAgKiAgICBjb2xsZWN0aW9uIHdpbGwgdHJpZ2dlciBhIGNhbGwgdG8gdGhlIGBsaXN0ZW5lcmAuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXdDb2xsZWN0aW9uLCBvbGRDb2xsZWN0aW9uLCBzY29wZSl9IGxpc3RlbmVyIGEgY2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkXG4gICAgICAgKiAgICB3aGVuIGEgY2hhbmdlIGlzIGRldGVjdGVkLlxuICAgICAgICogICAgLSBUaGUgYG5ld0NvbGxlY3Rpb25gIG9iamVjdCBpcyB0aGUgbmV3bHkgbW9kaWZpZWQgZGF0YSBvYnRhaW5lZCBmcm9tIHRoZSBgb2JqYCBleHByZXNzaW9uXG4gICAgICAgKiAgICAtIFRoZSBgb2xkQ29sbGVjdGlvbmAgb2JqZWN0IGlzIGEgY29weSBvZiB0aGUgZm9ybWVyIGNvbGxlY3Rpb24gZGF0YS5cbiAgICAgICAqICAgICAgRHVlIHRvIHBlcmZvcm1hbmNlIGNvbnNpZGVyYXRpb25zLCB0aGVgb2xkQ29sbGVjdGlvbmAgdmFsdWUgaXMgY29tcHV0ZWQgb25seSBpZiB0aGVcbiAgICAgICAqICAgICAgYGxpc3RlbmVyYCBmdW5jdGlvbiBkZWNsYXJlcyB0d28gb3IgbW9yZSBhcmd1bWVudHMuXG4gICAgICAgKiAgICAtIFRoZSBgc2NvcGVgIGFyZ3VtZW50IHJlZmVycyB0byB0aGUgY3VycmVudCBzY29wZS5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gUmV0dXJucyBhIGRlLXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgdGhpcyBsaXN0ZW5lci4gV2hlbiB0aGVcbiAgICAgICAqICAgIGRlLXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBpcyBleGVjdXRlZCwgdGhlIGludGVybmFsIHdhdGNoIG9wZXJhdGlvbiBpcyB0ZXJtaW5hdGVkLlxuICAgICAgICovXG4gICAgICAkd2F0Y2hDb2xsZWN0aW9uOiBmdW5jdGlvbihvYmosIGxpc3RlbmVyKSB7XG4gICAgICAgIC8vIE1hcmsgdGhlIGludGVyY2VwdG9yIGFzXG4gICAgICAgIC8vIC4uLiAkJHB1cmUgd2hlbiBsaXRlcmFsIHNpbmNlIHRoZSBpbnN0YW5jZSB3aWxsIGNoYW5nZSB3aGVuIGFueSBpbnB1dCBjaGFuZ2VzXG4gICAgICAgICR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvci4kJHB1cmUgPSAkcGFyc2Uob2JqKS5saXRlcmFsO1xuICAgICAgICAvLyAuLi4gJHN0YXRlZnVsIHdoZW4gbm9uLWxpdGVyYWwgc2luY2Ugd2UgbXVzdCByZWFkIHRoZSBzdGF0ZSBvZiB0aGUgY29sbGVjdGlvblxuICAgICAgICAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IuJHN0YXRlZnVsID0gISR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvci4kJHB1cmU7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAvLyB0aGUgY3VycmVudCB2YWx1ZSwgdXBkYXRlZCBvbiBlYWNoIGRpcnR5LWNoZWNrIHJ1blxuICAgICAgICB2YXIgbmV3VmFsdWU7XG4gICAgICAgIC8vIGEgc2hhbGxvdyBjb3B5IG9mIHRoZSBuZXdWYWx1ZSBmcm9tIHRoZSBsYXN0IGRpcnR5LWNoZWNrIHJ1bixcbiAgICAgICAgLy8gdXBkYXRlZCB0byBtYXRjaCBuZXdWYWx1ZSBkdXJpbmcgZGlydHktY2hlY2sgcnVuXG4gICAgICAgIHZhciBvbGRWYWx1ZTtcbiAgICAgICAgLy8gYSBzaGFsbG93IGNvcHkgb2YgdGhlIG5ld1ZhbHVlIGZyb20gd2hlbiB0aGUgbGFzdCBjaGFuZ2UgaGFwcGVuZWRcbiAgICAgICAgdmFyIHZlcnlPbGRWYWx1ZTtcbiAgICAgICAgLy8gb25seSB0cmFjayB2ZXJ5T2xkVmFsdWUgaWYgdGhlIGxpc3RlbmVyIGlzIGFza2luZyBmb3IgaXRcbiAgICAgICAgdmFyIHRyYWNrVmVyeU9sZFZhbHVlID0gKGxpc3RlbmVyLmxlbmd0aCA+IDEpO1xuICAgICAgICB2YXIgY2hhbmdlRGV0ZWN0ZWQgPSAwO1xuICAgICAgICB2YXIgY2hhbmdlRGV0ZWN0b3IgPSAkcGFyc2Uob2JqLCAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IpO1xuICAgICAgICB2YXIgaW50ZXJuYWxBcnJheSA9IFtdO1xuICAgICAgICB2YXIgaW50ZXJuYWxPYmplY3QgPSB7fTtcbiAgICAgICAgdmFyIGluaXRSdW4gPSB0cnVlO1xuICAgICAgICB2YXIgb2xkTGVuZ3RoID0gMDtcblxuICAgICAgICBmdW5jdGlvbiAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IoX3ZhbHVlKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBfdmFsdWU7XG4gICAgICAgICAgdmFyIG5ld0xlbmd0aCwga2V5LCBib3RoTmFOLCBuZXdJdGVtLCBvbGRJdGVtO1xuXG4gICAgICAgICAgLy8gSWYgdGhlIG5ldyB2YWx1ZSBpcyB1bmRlZmluZWQsIHRoZW4gcmV0dXJuIHVuZGVmaW5lZCBhcyB0aGUgd2F0Y2ggbWF5IGJlIGEgb25lLXRpbWUgd2F0Y2hcbiAgICAgICAgICBpZiAoaXNVbmRlZmluZWQobmV3VmFsdWUpKSByZXR1cm47XG5cbiAgICAgICAgICBpZiAoIWlzT2JqZWN0KG5ld1ZhbHVlKSkgeyAvLyBpZiBwcmltaXRpdmVcbiAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXlMaWtlKG5ld1ZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBpbnRlcm5hbEFycmF5KSB7XG4gICAgICAgICAgICAgIC8vIHdlIGFyZSB0cmFuc2l0aW9uaW5nIGZyb20gc29tZXRoaW5nIHdoaWNoIHdhcyBub3QgYW4gYXJyYXkgaW50byBhcnJheS5cbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBpbnRlcm5hbEFycmF5O1xuICAgICAgICAgICAgICBvbGRMZW5ndGggPSBvbGRWYWx1ZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXdMZW5ndGggPSBuZXdWYWx1ZS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChvbGRMZW5ndGggIT09IG5ld0xlbmd0aCkge1xuICAgICAgICAgICAgICAvLyBpZiBsZW5ndGhzIGRvIG5vdCBtYXRjaCB3ZSBuZWVkIHRvIHRyaWdnZXIgY2hhbmdlIG5vdGlmaWNhdGlvblxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICBvbGRWYWx1ZS5sZW5ndGggPSBvbGRMZW5ndGggPSBuZXdMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjb3B5IHRoZSBpdGVtcyB0byBvbGRWYWx1ZSBhbmQgbG9vayBmb3IgY2hhbmdlcy5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgb2xkSXRlbSA9IG9sZFZhbHVlW2ldO1xuICAgICAgICAgICAgICBuZXdJdGVtID0gbmV3VmFsdWVbaV07XG5cbiAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgICAgICAgICBib3RoTmFOID0gKG9sZEl0ZW0gIT09IG9sZEl0ZW0pICYmIChuZXdJdGVtICE9PSBuZXdJdGVtKTtcbiAgICAgICAgICAgICAgaWYgKCFib3RoTmFOICYmIChvbGRJdGVtICE9PSBuZXdJdGVtKSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XG4gICAgICAgICAgICAgICAgb2xkVmFsdWVbaV0gPSBuZXdJdGVtO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gaW50ZXJuYWxPYmplY3QpIHtcbiAgICAgICAgICAgICAgLy8gd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBzb21ldGhpbmcgd2hpY2ggd2FzIG5vdCBhbiBvYmplY3QgaW50byBvYmplY3QuXG4gICAgICAgICAgICAgIG9sZFZhbHVlID0gaW50ZXJuYWxPYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgb2xkTGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvcHkgdGhlIGl0ZW1zIHRvIG9sZFZhbHVlIGFuZCBsb29rIGZvciBjaGFuZ2VzLlxuICAgICAgICAgICAgbmV3TGVuZ3RoID0gMDtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG5ld1ZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgbmV3TGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgbmV3SXRlbSA9IG5ld1ZhbHVlW2tleV07XG4gICAgICAgICAgICAgICAgb2xkSXRlbSA9IG9sZFZhbHVlW2tleV07XG5cbiAgICAgICAgICAgICAgICBpZiAoa2V5IGluIG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgICAgICAgICAgICAgICBib3RoTmFOID0gKG9sZEl0ZW0gIT09IG9sZEl0ZW0pICYmIChuZXdJdGVtICE9PSBuZXdJdGVtKTtcbiAgICAgICAgICAgICAgICAgIGlmICghYm90aE5hTiAmJiAob2xkSXRlbSAhPT0gbmV3SXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWVba2V5XSA9IG5ld0l0ZW07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9sZExlbmd0aCsrO1xuICAgICAgICAgICAgICAgICAgb2xkVmFsdWVba2V5XSA9IG5ld0l0ZW07XG4gICAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZExlbmd0aCA+IG5ld0xlbmd0aCkge1xuICAgICAgICAgICAgICAvLyB3ZSB1c2VkIHRvIGhhdmUgbW9yZSBrZXlzLCBuZWVkIHRvIGZpbmQgdGhlbSBhbmQgZGVzdHJveSB0aGVtLlxuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICBmb3IgKGtleSBpbiBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChuZXdWYWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgb2xkTGVuZ3RoLS07XG4gICAgICAgICAgICAgICAgICBkZWxldGUgb2xkVmFsdWVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNoYW5nZURldGVjdGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gJHdhdGNoQ29sbGVjdGlvbkFjdGlvbigpIHtcbiAgICAgICAgICBpZiAoaW5pdFJ1bikge1xuICAgICAgICAgICAgaW5pdFJ1biA9IGZhbHNlO1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUsIG5ld1ZhbHVlLCBzZWxmKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUsIHZlcnlPbGRWYWx1ZSwgc2VsZik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbWFrZSBhIGNvcHkgZm9yIHRoZSBuZXh0IHRpbWUgYSBjb2xsZWN0aW9uIGlzIGNoYW5nZWRcbiAgICAgICAgICBpZiAodHJhY2tWZXJ5T2xkVmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghaXNPYmplY3QobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICAgIC8vcHJpbWl0aXZlXG4gICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5TGlrZShuZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlID0gbmV3IEFycmF5KG5ld1ZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3VmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2ZXJ5T2xkVmFsdWVbaV0gPSBuZXdWYWx1ZVtpXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gaWYgb2JqZWN0XG4gICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZSA9IHt9O1xuICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChuZXdWYWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlW2tleV0gPSBuZXdWYWx1ZVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiR3YXRjaChjaGFuZ2VEZXRlY3RvciwgJHdhdGNoQ29sbGVjdGlvbkFjdGlvbik7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFByb2Nlc3NlcyBhbGwgb2YgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVyc30gb2YgdGhlIGN1cnJlbnQgc2NvcGUgYW5kXG4gICAgICAgKiBpdHMgY2hpbGRyZW4uIEJlY2F1c2UgYSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlcn0ncyBsaXN0ZW5lciBjYW4gY2hhbmdlXG4gICAgICAgKiB0aGUgbW9kZWwsIHRoZSBgJGRpZ2VzdCgpYCBrZWVwcyBjYWxsaW5nIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlcnN9XG4gICAgICAgKiB1bnRpbCBubyBtb3JlIGxpc3RlbmVycyBhcmUgZmlyaW5nLiBUaGlzIG1lYW5zIHRoYXQgaXQgaXMgcG9zc2libGUgdG8gZ2V0IGludG8gYW4gaW5maW5pdGVcbiAgICAgICAqIGxvb3AuIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBgJ01heGltdW0gaXRlcmF0aW9uIGxpbWl0IGV4Y2VlZGVkLidgIGlmIHRoZSBudW1iZXIgb2ZcbiAgICAgICAqIGl0ZXJhdGlvbnMgZXhjZWVkcyAxMC5cbiAgICAgICAqXG4gICAgICAgKiBVc3VhbGx5LCB5b3UgZG9uJ3QgY2FsbCBgJGRpZ2VzdCgpYCBkaXJlY3RseSBpblxuICAgICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NvbnRyb2xsZXIgY29udHJvbGxlcnN9IG9yIGluXG4gICAgICAgKiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgZGlyZWN0aXZlc30uXG4gICAgICAgKiBJbnN0ZWFkLCB5b3Ugc2hvdWxkIGNhbGwge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGFwcGx5ICRhcHBseSgpfSAodHlwaWNhbGx5IGZyb20gd2l0aGluXG4gICAgICAgKiBhIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSBkaXJlY3RpdmV9KSwgd2hpY2ggd2lsbCBmb3JjZSBhIGAkZGlnZXN0KClgLlxuICAgICAgICpcbiAgICAgICAqIElmIHlvdSB3YW50IHRvIGJlIG5vdGlmaWVkIHdoZW5ldmVyIGAkZGlnZXN0KClgIGlzIGNhbGxlZCxcbiAgICAgICAqIHlvdSBjYW4gcmVnaXN0ZXIgYSBgd2F0Y2hFeHByZXNzaW9uYCBmdW5jdGlvbiB3aXRoXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggJHdhdGNoKCl9IHdpdGggbm8gYGxpc3RlbmVyYC5cbiAgICAgICAqXG4gICAgICAgKiBJbiB1bml0IHRlc3RzLCB5b3UgbWF5IG5lZWQgdG8gY2FsbCBgJGRpZ2VzdCgpYCB0byBzaW11bGF0ZSB0aGUgc2NvcGUgbGlmZSBjeWNsZS5cbiAgICAgICAqXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICogYGBganNcbiAgICAgICAgICAgdmFyIHNjb3BlID0gLi4uO1xuICAgICAgICAgICBzY29wZS5uYW1lID0gJ21pc2tvJztcbiAgICAgICAgICAgc2NvcGUuY291bnRlciA9IDA7XG5cbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XG4gICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbmFtZScsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgIHNjb3BlLmNvdW50ZXIgPSBzY29wZS5jb3VudGVyICsgMTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDApO1xuXG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyIGlzIGFsd2F5cyBjYWxsZWQgZHVyaW5nIHRoZSBmaXJzdCAkZGlnZXN0IGxvb3AgYWZ0ZXIgaXQgd2FzIHJlZ2lzdGVyZWRcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAvLyBidXQgbm93IGl0IHdpbGwgbm90IGJlIGNhbGxlZCB1bmxlc3MgdGhlIHZhbHVlIGNoYW5nZXNcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMSk7XG5cbiAgICAgICAgICAgc2NvcGUubmFtZSA9ICdhZGFtJztcbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgyKTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqL1xuICAgICAgJGRpZ2VzdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB3YXRjaCwgdmFsdWUsIGxhc3QsIGZuLCBnZXQsXG4gICAgICAgICAgICB3YXRjaGVycyxcbiAgICAgICAgICAgIGRpcnR5LCB0dGwgPSBUVEwsXG4gICAgICAgICAgICBuZXh0LCBjdXJyZW50LCB0YXJnZXQgPSBhc3luY1F1ZXVlLmxlbmd0aCA/ICRyb290U2NvcGUgOiB0aGlzLFxuICAgICAgICAgICAgd2F0Y2hMb2cgPSBbXSxcbiAgICAgICAgICAgIGxvZ0lkeCwgYXN5bmNUYXNrO1xuXG4gICAgICAgIGJlZ2luUGhhc2UoJyRkaWdlc3QnKTtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNoYW5nZXMgdG8gYnJvd3NlciB1cmwgdGhhdCBoYXBwZW5lZCBpbiBzeW5jIGJlZm9yZSB0aGUgY2FsbCB0byAkZGlnZXN0XG4gICAgICAgICRicm93c2VyLiQkY2hlY2tVcmxDaGFuZ2UoKTtcblxuICAgICAgICBpZiAodGhpcyA9PT0gJHJvb3RTY29wZSAmJiBhcHBseUFzeW5jSWQgIT09IG51bGwpIHtcbiAgICAgICAgICAvLyBJZiB0aGlzIGlzIHRoZSByb290IHNjb3BlLCBhbmQgJGFwcGx5QXN5bmMgaGFzIHNjaGVkdWxlZCBhIGRlZmVycmVkICRhcHBseSgpLCB0aGVuXG4gICAgICAgICAgLy8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgJGFwcGx5IGFuZCBmbHVzaCB0aGUgcXVldWUgb2YgZXhwcmVzc2lvbnMgdG8gYmUgZXZhbHVhdGVkLlxuICAgICAgICAgICRicm93c2VyLmRlZmVyLmNhbmNlbChhcHBseUFzeW5jSWQpO1xuICAgICAgICAgIGZsdXNoQXBwbHlBc3luYygpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xuXG4gICAgICAgIGRvIHsgLy8gXCJ3aGlsZSBkaXJ0eVwiIGxvb3BcbiAgICAgICAgICBkaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgIGN1cnJlbnQgPSB0YXJnZXQ7XG5cbiAgICAgICAgICAvLyBJdCdzIHNhZmUgZm9yIGFzeW5jUXVldWVQb3NpdGlvbiB0byBiZSBhIGxvY2FsIHZhcmlhYmxlIGhlcmUgYmVjYXVzZSB0aGlzIGxvb3AgY2FuJ3RcbiAgICAgICAgICAvLyBiZSByZWVudGVyZWQgcmVjdXJzaXZlbHkuIENhbGxpbmcgJGRpZ2VzdCBmcm9tIGEgZnVuY3Rpb24gcGFzc2VkIHRvICRldmFsQXN5bmMgd291bGRcbiAgICAgICAgICAvLyBsZWFkIHRvIGEgJyRkaWdlc3QgYWxyZWFkeSBpbiBwcm9ncmVzcycgZXJyb3IuXG4gICAgICAgICAgZm9yICh2YXIgYXN5bmNRdWV1ZVBvc2l0aW9uID0gMDsgYXN5bmNRdWV1ZVBvc2l0aW9uIDwgYXN5bmNRdWV1ZS5sZW5ndGg7IGFzeW5jUXVldWVQb3NpdGlvbisrKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhc3luY1Rhc2sgPSBhc3luY1F1ZXVlW2FzeW5jUXVldWVQb3NpdGlvbl07XG4gICAgICAgICAgICAgIGZuID0gYXN5bmNUYXNrLmZuO1xuICAgICAgICAgICAgICBmbihhc3luY1Rhc2suc2NvcGUsIGFzeW5jVGFzay5sb2NhbHMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3REaXJ0eVdhdGNoID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXN5bmNRdWV1ZS5sZW5ndGggPSAwO1xuXG4gICAgICAgICAgdHJhdmVyc2VTY29wZXNMb29wOlxuICAgICAgICAgIGRvIHsgLy8gXCJ0cmF2ZXJzZSB0aGUgc2NvcGVzXCIgbG9vcFxuICAgICAgICAgICAgaWYgKCh3YXRjaGVycyA9ICFjdXJyZW50LiQkc3VzcGVuZGVkICYmIGN1cnJlbnQuJCR3YXRjaGVycykpIHtcbiAgICAgICAgICAgICAgLy8gcHJvY2VzcyBvdXIgd2F0Y2hlc1xuICAgICAgICAgICAgICB3YXRjaGVycy4kJGRpZ2VzdFdhdGNoSW5kZXggPSB3YXRjaGVycy5sZW5ndGg7XG4gICAgICAgICAgICAgIHdoaWxlICh3YXRjaGVycy4kJGRpZ2VzdFdhdGNoSW5kZXgtLSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICB3YXRjaCA9IHdhdGNoZXJzW3dhdGNoZXJzLiQkZGlnZXN0V2F0Y2hJbmRleF07XG4gICAgICAgICAgICAgICAgICAvLyBNb3N0IGNvbW1vbiB3YXRjaGVzIGFyZSBvbiBwcmltaXRpdmVzLCBpbiB3aGljaCBjYXNlIHdlIGNhbiBzaG9ydFxuICAgICAgICAgICAgICAgICAgLy8gY2lyY3VpdCBpdCB3aXRoID09PSBvcGVyYXRvciwgb25seSB3aGVuID09PSBmYWlscyBkbyB3ZSB1c2UgLmVxdWFsc1xuICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldCA9IHdhdGNoLmdldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSA9IGdldChjdXJyZW50KSkgIT09IChsYXN0ID0gd2F0Y2gubGFzdCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICEod2F0Y2guZXFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGVxdWFscyh2YWx1ZSwgbGFzdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChpc051bWJlck5hTih2YWx1ZSkgJiYgaXNOdW1iZXJOYU4obGFzdCkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICBsYXN0RGlydHlXYXRjaCA9IHdhdGNoO1xuICAgICAgICAgICAgICAgICAgICAgIHdhdGNoLmxhc3QgPSB3YXRjaC5lcSA/IGNvcHkodmFsdWUsIG51bGwpIDogdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgZm4gPSB3YXRjaC5mbjtcbiAgICAgICAgICAgICAgICAgICAgICBmbih2YWx1ZSwgKChsYXN0ID09PSBpbml0V2F0Y2hWYWwpID8gdmFsdWUgOiBsYXN0KSwgY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHR0bCA8IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0lkeCA9IDQgLSB0dGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdhdGNoTG9nW2xvZ0lkeF0pIHdhdGNoTG9nW2xvZ0lkeF0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoTG9nW2xvZ0lkeF0ucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogaXNGdW5jdGlvbih3YXRjaC5leHApID8gJ2ZuOiAnICsgKHdhdGNoLmV4cC5uYW1lIHx8IHdhdGNoLmV4cC50b1N0cmluZygpKSA6IHdhdGNoLmV4cCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsOiBsYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2F0Y2ggPT09IGxhc3REaXJ0eVdhdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1vc3QgcmVjZW50bHkgZGlydHkgd2F0Y2hlciBpcyBub3cgY2xlYW4sIHNob3J0IGNpcmN1aXQgc2luY2UgdGhlIHJlbWFpbmluZyB3YXRjaGVyc1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgYWxyZWFkeSBiZWVuIHRlc3RlZC5cbiAgICAgICAgICAgICAgICAgICAgICBkaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHRyYXZlcnNlU2NvcGVzTG9vcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJbnNhbml0eSBXYXJuaW5nOiBzY29wZSBkZXB0aC1maXJzdCB0cmF2ZXJzYWxcbiAgICAgICAgICAgIC8vIHllcywgdGhpcyBjb2RlIGlzIGEgYml0IGNyYXp5LCBidXQgaXQgd29ya3MgYW5kIHdlIGhhdmUgdGVzdHMgdG8gcHJvdmUgaXQhXG4gICAgICAgICAgICAvLyB0aGlzIHBpZWNlIHNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgdHJhdmVyc2FsIGluICRicm9hZGNhc3RcbiAgICAgICAgICAgIC8vICh0aG91Z2ggaXQgZGlmZmVycyBkdWUgdG8gaGF2aW5nIHRoZSBleHRyYSBjaGVjayBmb3IgJCRzdXNwZW5kZWQgYW5kIGRvZXMgbm90XG4gICAgICAgICAgICAvLyBjaGVjayAkJGxpc3RlbmVyQ291bnQpXG4gICAgICAgICAgICBpZiAoIShuZXh0ID0gKCghY3VycmVudC4kJHN1c3BlbmRlZCAmJiBjdXJyZW50LiQkd2F0Y2hlcnNDb3VudCAmJiBjdXJyZW50LiQkY2hpbGRIZWFkKSB8fFxuICAgICAgICAgICAgICAgIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgY3VycmVudC4kJG5leHRTaWJsaW5nKSkpKSB7XG4gICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgIShuZXh0ID0gY3VycmVudC4kJG5leHRTaWJsaW5nKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IHdoaWxlICgoY3VycmVudCA9IG5leHQpKTtcblxuICAgICAgICAgIC8vIGBicmVhayB0cmF2ZXJzZVNjb3Blc0xvb3A7YCB0YWtlcyB1cyB0byBoZXJlXG5cbiAgICAgICAgICBpZiAoKGRpcnR5IHx8IGFzeW5jUXVldWUubGVuZ3RoKSAmJiAhKHR0bC0tKSkge1xuICAgICAgICAgICAgY2xlYXJQaGFzZSgpO1xuICAgICAgICAgICAgdGhyb3cgJHJvb3RTY29wZU1pbkVycignaW5mZGlnJyxcbiAgICAgICAgICAgICAgICAnezB9ICRkaWdlc3QoKSBpdGVyYXRpb25zIHJlYWNoZWQuIEFib3J0aW5nIVxcbicgK1xuICAgICAgICAgICAgICAgICdXYXRjaGVycyBmaXJlZCBpbiB0aGUgbGFzdCA1IGl0ZXJhdGlvbnM6IHsxfScsXG4gICAgICAgICAgICAgICAgVFRMLCB3YXRjaExvZyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0gd2hpbGUgKGRpcnR5IHx8IGFzeW5jUXVldWUubGVuZ3RoKTtcblxuICAgICAgICBjbGVhclBoYXNlKCk7XG5cbiAgICAgICAgLy8gcG9zdERpZ2VzdFF1ZXVlUG9zaXRpb24gaXNuJ3QgbG9jYWwgaGVyZSBiZWNhdXNlIHRoaXMgbG9vcCBjYW4gYmUgcmVlbnRlcmVkIHJlY3Vyc2l2ZWx5LlxuICAgICAgICB3aGlsZSAocG9zdERpZ2VzdFF1ZXVlUG9zaXRpb24gPCBwb3N0RGlnZXN0UXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBvc3REaWdlc3RRdWV1ZVtwb3N0RGlnZXN0UXVldWVQb3NpdGlvbisrXSgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwb3N0RGlnZXN0UXVldWUubGVuZ3RoID0gcG9zdERpZ2VzdFF1ZXVlUG9zaXRpb24gPSAwO1xuXG4gICAgICAgIC8vIENoZWNrIGZvciBjaGFuZ2VzIHRvIGJyb3dzZXIgdXJsIHRoYXQgaGFwcGVuZWQgZHVyaW5nIHRoZSAkZGlnZXN0XG4gICAgICAgIC8vIChmb3Igd2hpY2ggbm8gZXZlbnQgaXMgZmlyZWQ7IGUuZy4gdmlhIGBoaXN0b3J5LnB1c2hTdGF0ZSgpYClcbiAgICAgICAgJGJyb3dzZXIuJCRjaGVja1VybENoYW5nZSgpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRzdXNwZW5kXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogU3VzcGVuZCB3YXRjaGVycyBvZiB0aGlzIHNjb3BlIHN1YnRyZWUgc28gdGhhdCB0aGV5IHdpbGwgbm90IGJlIGludm9rZWQgZHVyaW5nIGRpZ2VzdC5cbiAgICAgICAqXG4gICAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIG9wdGltaXplIHlvdXIgYXBwbGljYXRpb24gd2hlbiB5b3Uga25vdyB0aGF0IHJ1bm5pbmcgdGhvc2Ugd2F0Y2hlcnNcbiAgICAgICAqIGlzIHJlZHVuZGFudC5cbiAgICAgICAqXG4gICAgICAgKiAqKldhcm5pbmcqKlxuICAgICAgICpcbiAgICAgICAqIFN1c3BlbmRpbmcgc2NvcGVzIGZyb20gdGhlIGRpZ2VzdCBjeWNsZSBjYW4gaGF2ZSB1bndhbnRlZCBhbmQgZGlmZmljdWx0IHRvIGRlYnVnIHJlc3VsdHMuXG4gICAgICAgKiBPbmx5IHVzZSB0aGlzIGFwcHJvYWNoIGlmIHlvdSBhcmUgY29uZmlkZW50IHRoYXQgeW91IGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nIGFuZCBoYXZlXG4gICAgICAgKiBhbXBsZSB0ZXN0cyB0byBlbnN1cmUgdGhhdCBiaW5kaW5ncyBnZXQgdXBkYXRlZCBhcyB5b3UgZXhwZWN0LlxuICAgICAgICpcbiAgICAgICAqIFNvbWUgb2YgdGhlIHRoaW5ncyB0byBjb25zaWRlciBhcmU6XG4gICAgICAgKlxuICAgICAgICogKiBBbnkgZXh0ZXJuYWwgZXZlbnQgb24gYSBkaXJlY3RpdmUvY29tcG9uZW50IHdpbGwgbm90IHRyaWdnZXIgYSBkaWdlc3Qgd2hpbGUgdGhlIGhvc3RpbmdcbiAgICAgICAqICAgc2NvcGUgaXMgc3VzcGVuZGVkIC0gZXZlbiBpZiB0aGUgZXZlbnQgaGFuZGxlciBjYWxscyBgJGFwcGx5KClgIG9yIGAkcm9vdFNjb3BlLiRkaWdlc3QoKWAuXG4gICAgICAgKiAqIFRyYW5zY2x1ZGVkIGNvbnRlbnQgZXhpc3RzIG9uIGEgc2NvcGUgdGhhdCBpbmhlcml0cyBmcm9tIG91dHNpZGUgYSBkaXJlY3RpdmUgYnV0IGV4aXN0c1xuICAgICAgICogICBhcyBhIGNoaWxkIG9mIHRoZSBkaXJlY3RpdmUncyBjb250YWluaW5nIHNjb3BlLiBJZiB0aGUgY29udGFpbmluZyBzY29wZSBpcyBzdXNwZW5kZWQgdGhlXG4gICAgICAgKiAgIHRyYW5zY2x1ZGVkIHNjb3BlIHdpbGwgYWxzbyBiZSBzdXNwZW5kZWQsIGV2ZW4gaWYgdGhlIHNjb3BlIGZyb20gd2hpY2ggdGhlIHRyYW5zY2x1ZGVkXG4gICAgICAgKiAgIHNjb3BlIGluaGVyaXRzIGlzIG5vdCBzdXNwZW5kZWQuXG4gICAgICAgKiAqIE11bHRpcGxlIGRpcmVjdGl2ZXMgdHJ5aW5nIHRvIG1hbmFnZSB0aGUgc3VzcGVuZGVkIHN0YXR1cyBvZiBhIHNjb3BlIGNhbiBjb25mdXNlIGVhY2ggb3RoZXI6XG4gICAgICAgKiAgICAqIEEgY2FsbCB0byBgJHN1c3BlbmQoKWAgb24gYW4gYWxyZWFkeSBzdXNwZW5kZWQgc2NvcGUgaXMgYSBuby1vcC5cbiAgICAgICAqICAgICogQSBjYWxsIHRvIGAkcmVzdW1lKClgIG9uIGEgbm9uLXN1c3BlbmRlZCBzY29wZSBpcyBhIG5vLW9wLlxuICAgICAgICogICAgKiBJZiB0d28gZGlyZWN0aXZlcyBzdXNwZW5kIGEgc2NvcGUsIHRoZW4gb25lIG9mIHRoZW0gcmVzdW1lcyB0aGUgc2NvcGUsIHRoZSBzY29wZSB3aWxsIG5vXG4gICAgICAgKiAgICAgIGxvbmdlciBiZSBzdXNwZW5kZWQuIFRoaXMgY291bGQgcmVzdWx0IGluIHRoZSBvdGhlciBkaXJlY3RpdmUgYmVsaWV2aW5nIGEgc2NvcGUgdG8gYmVcbiAgICAgICAqICAgICAgc3VzcGVuZGVkIHdoZW4gaXQgaXMgbm90LlxuICAgICAgICogKiBJZiBhIHBhcmVudCBzY29wZSBpcyBzdXNwZW5kZWQgdGhlbiBhbGwgaXRzIGRlc2NlbmRhbnRzIHdpbGwgYmUgYWxzbyBleGNsdWRlZCBmcm9tIGZ1dHVyZVxuICAgICAgICogICBkaWdlc3RzIHdoZXRoZXIgb3Igbm90IHRoZXkgaGF2ZSBiZWVuIHN1c3BlbmRlZCB0aGVtc2VsdmVzLiBOb3RlIHRoYXQgdGhpcyBhbHNvIGFwcGxpZXMgdG9cbiAgICAgICAqICAgaXNvbGF0ZSBjaGlsZCBzY29wZXMuXG4gICAgICAgKiAqIENhbGxpbmcgYCRkaWdlc3QoKWAgZGlyZWN0bHkgb24gYSBkZXNjZW5kYW50IG9mIGEgc3VzcGVuZGVkIHNjb3BlIHdpbGwgc3RpbGwgcnVuIHRoZSB3YXRjaGVyc1xuICAgICAgICogICBmb3IgdGhhdCBzY29wZSBhbmQgaXRzIGRlc2NlbmRhbnRzLiBXaGVuIGRpZ2VzdGluZyB3ZSBvbmx5IGNoZWNrIHdoZXRoZXIgdGhlIGN1cnJlbnQgc2NvcGUgaXNcbiAgICAgICAqICAgbG9jYWxseSBzdXNwZW5kZWQsIHJhdGhlciB0aGFuIGNoZWNraW5nIHdoZXRoZXIgaXQgaGFzIGEgc3VzcGVuZGVkIGFuY2VzdG9yLlxuICAgICAgICogKiBDYWxsaW5nIGAkcmVzdW1lKClgIG9uIGEgc2NvcGUgdGhhdCBoYXMgYSBzdXNwZW5kZWQgYW5jZXN0b3Igd2lsbCBub3QgY2F1c2UgdGhlIHNjb3BlIHRvIGJlXG4gICAgICAgKiAgIGluY2x1ZGVkIGluIGZ1dHVyZSBkaWdlc3RzIHVudGlsIGFsbCBpdHMgYW5jZXN0b3JzIGhhdmUgYmVlbiByZXN1bWVkLlxuICAgICAgICogKiBSZXNvbHZlZCBwcm9taXNlcywgZS5nLiBmcm9tIGV4cGxpY2l0IGAkcWAgZGVmZXJyZWRzIGFuZCBgJGh0dHBgIGNhbGxzLCB0cmlnZ2VyIGAkYXBwbHkoKWBcbiAgICAgICAqICAgYWdhaW5zdCB0aGUgYCRyb290U2NvcGVgIGFuZCBzbyB3aWxsIHN0aWxsIHRyaWdnZXIgYSBnbG9iYWwgZGlnZXN0IGV2ZW4gaWYgdGhlIHByb21pc2Ugd2FzXG4gICAgICAgKiAgIGluaXRpYXRlZCBieSBhIGNvbXBvbmVudCB0aGF0IGxpdmVzIG9uIGEgc3VzcGVuZGVkIHNjb3BlLlxuICAgICAgICovXG4gICAgICAkc3VzcGVuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuJCRzdXNwZW5kZWQgPSB0cnVlO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRpc1N1c3BlbmRlZFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIENhbGwgdGhpcyBtZXRob2QgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgc2NvcGUgaGFzIGJlZW4gZXhwbGljaXRseSBzdXNwZW5kZWQuIEl0IHdpbGwgbm90XG4gICAgICAgKiB0ZWxsIHlvdSB3aGV0aGVyIGFuIGFuY2VzdG9yIGhhcyBiZWVuIHN1c3BlbmRlZC5cbiAgICAgICAqIFRvIGRldGVybWluZSBpZiB0aGlzIHNjb3BlIHdpbGwgYmUgZXhjbHVkZWQgZnJvbSBhIGRpZ2VzdCB0cmlnZ2VyZWQgYXQgdGhlICRyb290U2NvcGUsXG4gICAgICAgKiBmb3IgZXhhbXBsZSwgeW91IG11c3QgY2hlY2sgYWxsIGl0cyBhbmNlc3RvcnM6XG4gICAgICAgKlxuICAgICAgICogYGBgXG4gICAgICAgKiBmdW5jdGlvbiBpc0V4Y2x1ZGVkRnJvbURpZ2VzdChzY29wZSkge1xuICAgICAgICogICB3aGlsZShzY29wZSkge1xuICAgICAgICogICAgIGlmIChzY29wZS4kaXNTdXNwZW5kZWQoKSkgcmV0dXJuIHRydWU7XG4gICAgICAgKiAgICAgc2NvcGUgPSBzY29wZS4kcGFyZW50O1xuICAgICAgICogICB9XG4gICAgICAgKiAgIHJldHVybiBmYWxzZTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqIEJlIGF3YXJlIHRoYXQgYSBzY29wZSBtYXkgbm90IGJlIGluY2x1ZGVkIGluIGRpZ2VzdHMgaWYgaXQgaGFzIGEgc3VzcGVuZGVkIGFuY2VzdG9yLFxuICAgICAgICogZXZlbiBpZiBgJGlzU3VzcGVuZGVkKClgIHJldHVybnMgZmFsc2UuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgY3VycmVudCBzY29wZSBoYXMgYmVlbiBzdXNwZW5kZWQuXG4gICAgICAgKi9cbiAgICAgICRpc1N1c3BlbmRlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiQkc3VzcGVuZGVkO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRyZXN1bWVcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBSZXN1bWUgd2F0Y2hlcnMgb2YgdGhpcyBzY29wZSBzdWJ0cmVlIGluIGNhc2UgaXQgd2FzIHN1c3BlbmRlZC5cbiAgICAgICAqXG4gICAgICAgKiBTZWUge0BsaW5rICRyb290U2NvcGUuU2NvcGUjJHN1c3BlbmR9IGZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZGFuZ2VycyBvZiB1c2luZyB0aGlzIGFwcHJvYWNoLlxuICAgICAgICovXG4gICAgICAkcmVzdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy4kJHN1c3BlbmRlZCA9IGZhbHNlO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgZXZlbnRcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3lcbiAgICAgICAqIEBldmVudFR5cGUgYnJvYWRjYXN0IG9uIHNjb3BlIGJlaW5nIGRlc3Ryb3llZFxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQnJvYWRjYXN0ZWQgd2hlbiBhIHNjb3BlIGFuZCBpdHMgY2hpbGRyZW4gYXJlIGJlaW5nIGRlc3Ryb3llZC5cbiAgICAgICAqXG4gICAgICAgKiBOb3RlIHRoYXQsIGluIEFuZ3VsYXJKUywgdGhlcmUgaXMgYWxzbyBhIGAkZGVzdHJveWAgalF1ZXJ5IGV2ZW50LCB3aGljaCBjYW4gYmUgdXNlZCB0b1xuICAgICAgICogY2xlYW4gdXAgRE9NIGJpbmRpbmdzIGJlZm9yZSBhbiBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxuICAgICAgICovXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFJlbW92ZXMgdGhlIGN1cnJlbnQgc2NvcGUgKGFuZCBhbGwgb2YgaXRzIGNoaWxkcmVuKSBmcm9tIHRoZSBwYXJlbnQgc2NvcGUuIFJlbW92YWwgaW1wbGllc1xuICAgICAgICogdGhhdCBjYWxscyB0byB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QoKX0gd2lsbCBubyBsb25nZXJcbiAgICAgICAqIHByb3BhZ2F0ZSB0byB0aGUgY3VycmVudCBzY29wZSBhbmQgaXRzIGNoaWxkcmVuLiBSZW1vdmFsIGFsc28gaW1wbGllcyB0aGF0IHRoZSBjdXJyZW50XG4gICAgICAgKiBzY29wZSBpcyBlbGlnaWJsZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBgJGRlc3Ryb3koKWAgaXMgdXN1YWxseSB1c2VkIGJ5IGRpcmVjdGl2ZXMgc3VjaCBhc1xuICAgICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBuZ1JlcGVhdH0gZm9yIG1hbmFnaW5nIHRoZVxuICAgICAgICogdW5yb2xsaW5nIG9mIHRoZSBsb29wLlxuICAgICAgICpcbiAgICAgICAqIEp1c3QgYmVmb3JlIGEgc2NvcGUgaXMgZGVzdHJveWVkLCBhIGAkZGVzdHJveWAgZXZlbnQgaXMgYnJvYWRjYXN0ZWQgb24gdGhpcyBzY29wZS5cbiAgICAgICAqIEFwcGxpY2F0aW9uIGNvZGUgY2FuIHJlZ2lzdGVyIGEgYCRkZXN0cm95YCBldmVudCBoYW5kbGVyIHRoYXQgd2lsbCBnaXZlIGl0IGEgY2hhbmNlIHRvXG4gICAgICAgKiBwZXJmb3JtIGFueSBuZWNlc3NhcnkgY2xlYW51cC5cbiAgICAgICAqXG4gICAgICAgKiBOb3RlIHRoYXQsIGluIEFuZ3VsYXJKUywgdGhlcmUgaXMgYWxzbyBhIGAkZGVzdHJveWAgalF1ZXJ5IGV2ZW50LCB3aGljaCBjYW4gYmUgdXNlZCB0b1xuICAgICAgICogY2xlYW4gdXAgRE9NIGJpbmRpbmdzIGJlZm9yZSBhbiBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxuICAgICAgICovXG4gICAgICAkZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFdlIGNhbid0IGRlc3Ryb3kgYSBzY29wZSB0aGF0IGhhcyBiZWVuIGFscmVhZHkgZGVzdHJveWVkLlxuICAgICAgICBpZiAodGhpcy4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuXG4gICAgICAgIHRoaXMuJGJyb2FkY2FzdCgnJGRlc3Ryb3knKTtcbiAgICAgICAgdGhpcy4kJGRlc3Ryb3llZCA9IHRydWU7XG5cbiAgICAgICAgaWYgKHRoaXMgPT09ICRyb290U2NvcGUpIHtcbiAgICAgICAgICAvL1JlbW92ZSBoYW5kbGVycyBhdHRhY2hlZCB0byB3aW5kb3cgd2hlbiAkcm9vdFNjb3BlIGlzIHJlbW92ZWRcbiAgICAgICAgICAkYnJvd3Nlci4kJGFwcGxpY2F0aW9uRGVzdHJveWVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpbmNyZW1lbnRXYXRjaGVyc0NvdW50KHRoaXMsIC10aGlzLiQkd2F0Y2hlcnNDb3VudCk7XG4gICAgICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiB0aGlzLiQkbGlzdGVuZXJDb3VudCkge1xuICAgICAgICAgIGRlY3JlbWVudExpc3RlbmVyQ291bnQodGhpcywgdGhpcy4kJGxpc3RlbmVyQ291bnRbZXZlbnROYW1lXSwgZXZlbnROYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldmVyIGFsbCB0aGUgcmVmZXJlbmNlcyB0byBwYXJlbnQgc2NvcGVzIChhZnRlciB0aGlzIGNsZWFudXAsIHRoZSBjdXJyZW50IHNjb3BlIHNob3VsZFxuICAgICAgICAvLyBub3QgYmUgcmV0YWluZWQgYnkgYW55IG9mIG91ciByZWZlcmVuY2VzIGFuZCBzaG91bGQgYmUgZWxpZ2libGUgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbilcbiAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuJCRjaGlsZEhlYWQgPT09IHRoaXMpIHBhcmVudC4kJGNoaWxkSGVhZCA9IHRoaXMuJCRuZXh0U2libGluZztcbiAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuJCRjaGlsZFRhaWwgPT09IHRoaXMpIHBhcmVudC4kJGNoaWxkVGFpbCA9IHRoaXMuJCRwcmV2U2libGluZztcbiAgICAgICAgaWYgKHRoaXMuJCRwcmV2U2libGluZykgdGhpcy4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmcgPSB0aGlzLiQkbmV4dFNpYmxpbmc7XG4gICAgICAgIGlmICh0aGlzLiQkbmV4dFNpYmxpbmcpIHRoaXMuJCRuZXh0U2libGluZy4kJHByZXZTaWJsaW5nID0gdGhpcy4kJHByZXZTaWJsaW5nO1xuXG4gICAgICAgIC8vIERpc2FibGUgbGlzdGVuZXJzLCB3YXRjaGVycyBhbmQgYXBwbHkvZGlnZXN0IG1ldGhvZHNcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9IHRoaXMuJGRpZ2VzdCA9IHRoaXMuJGFwcGx5ID0gdGhpcy4kZXZhbEFzeW5jID0gdGhpcy4kYXBwbHlBc3luYyA9IG5vb3A7XG4gICAgICAgIHRoaXMuJG9uID0gdGhpcy4kd2F0Y2ggPSB0aGlzLiR3YXRjaEdyb3VwID0gZnVuY3Rpb24oKSB7IHJldHVybiBub29wOyB9O1xuICAgICAgICB0aGlzLiQkbGlzdGVuZXJzID0ge307XG5cbiAgICAgICAgLy8gRGlzY29ubmVjdCB0aGUgbmV4dCBzaWJsaW5nIHRvIHByZXZlbnQgYGNsZWFuVXBTY29wZWAgZGVzdHJveWluZyB0aG9zZSB0b29cbiAgICAgICAgdGhpcy4kJG5leHRTaWJsaW5nID0gbnVsbDtcbiAgICAgICAgY2xlYW5VcFNjb3BlKHRoaXMpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRldmFsXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogRXhlY3V0ZXMgdGhlIGBleHByZXNzaW9uYCBvbiB0aGUgY3VycmVudCBzY29wZSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LiBBbnkgZXhjZXB0aW9ucyBpblxuICAgICAgICogdGhlIGV4cHJlc3Npb24gYXJlIHByb3BhZ2F0ZWQgKHVuY2F1Z2h0KS4gVGhpcyBpcyB1c2VmdWwgd2hlbiBldmFsdWF0aW5nIEFuZ3VsYXJKU1xuICAgICAgICogZXhwcmVzc2lvbnMuXG4gICAgICAgKlxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgICAgIHZhciBzY29wZSA9IG5nLiRyb290U2NvcGUuU2NvcGUoKTtcbiAgICAgICAgICAgc2NvcGUuYSA9IDE7XG4gICAgICAgICAgIHNjb3BlLmIgPSAyO1xuXG4gICAgICAgICAgIGV4cGVjdChzY29wZS4kZXZhbCgnYStiJykpLnRvRXF1YWwoMyk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS4kZXZhbChmdW5jdGlvbihzY29wZSl7IHJldHVybiBzY29wZS5hICsgc2NvcGUuYjsgfSkpLnRvRXF1YWwoMyk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24oKSk9fSBleHByZXNzaW9uIEFuIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAgICpcbiAgICAgICAqICAgIC0gYHN0cmluZ2A6IGV4ZWN1dGUgdXNpbmcgdGhlIHJ1bGVzIGFzIGRlZmluZWQgaW4gIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhvYmplY3QpPX0gbG9jYWxzIExvY2FsIHZhcmlhYmxlcyBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW4gc2NvcGUuXG4gICAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIHRoZSBleHByZXNzaW9uLlxuICAgICAgICovXG4gICAgICAkZXZhbDogZnVuY3Rpb24oZXhwciwgbG9jYWxzKSB7XG4gICAgICAgIHJldHVybiAkcGFyc2UoZXhwcikodGhpcywgbG9jYWxzKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZXZhbEFzeW5jXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogRXhlY3V0ZXMgdGhlIGV4cHJlc3Npb24gb24gdGhlIGN1cnJlbnQgc2NvcGUgYXQgYSBsYXRlciBwb2ludCBpbiB0aW1lLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBgJGV2YWxBc3luY2AgbWFrZXMgbm8gZ3VhcmFudGVlcyBhcyB0byB3aGVuIHRoZSBgZXhwcmVzc2lvbmAgd2lsbCBiZSBleGVjdXRlZCwgb25seVxuICAgICAgICogdGhhdDpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gaXQgd2lsbCBleGVjdXRlIGFmdGVyIHRoZSBmdW5jdGlvbiB0aGF0IHNjaGVkdWxlZCB0aGUgZXZhbHVhdGlvbiAocHJlZmVyYWJseSBiZWZvcmUgRE9NXG4gICAgICAgKiAgICAgcmVuZGVyaW5nKS5cbiAgICAgICAqICAgLSBhdCBsZWFzdCBvbmUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0IGN5Y2xlfSB3aWxsIGJlIHBlcmZvcm1lZCBhZnRlclxuICAgICAgICogICAgIGBleHByZXNzaW9uYCBleGVjdXRpb24uXG4gICAgICAgKlxuICAgICAgICogQW55IGV4Y2VwdGlvbnMgZnJvbSB0aGUgZXhlY3V0aW9uIG9mIHRoZSBleHByZXNzaW9uIGFyZSBmb3J3YXJkZWQgdG8gdGhlXG4gICAgICAgKiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICAgKlxuICAgICAgICogX19Ob3RlOl9fIGlmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG91dHNpZGUgb2YgYSBgJGRpZ2VzdGAgY3ljbGUsIGEgbmV3IGAkZGlnZXN0YCBjeWNsZVxuICAgICAgICogd2lsbCBiZSBzY2hlZHVsZWQuIEhvd2V2ZXIsIGl0IGlzIGVuY291cmFnZWQgdG8gYWx3YXlzIGNhbGwgY29kZSB0aGF0IGNoYW5nZXMgdGhlIG1vZGVsXG4gICAgICAgKiBmcm9tIHdpdGhpbiBhbiBgJGFwcGx5YCBjYWxsLiBUaGF0IGluY2x1ZGVzIGNvZGUgZXZhbHVhdGVkIHZpYSBgJGV2YWxBc3luY2AuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwcmVzc2lvbiBBbiBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhvYmplY3QpPX0gbG9jYWxzIExvY2FsIHZhcmlhYmxlcyBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW4gc2NvcGUuXG4gICAgICAgKi9cbiAgICAgICRldmFsQXN5bmM6IGZ1bmN0aW9uKGV4cHIsIGxvY2Fscykge1xuICAgICAgICAvLyBpZiB3ZSBhcmUgb3V0c2lkZSBvZiBhbiAkZGlnZXN0IGxvb3AgYW5kIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgd2UgYXJlIHNjaGVkdWxpbmcgYXN5bmNcbiAgICAgICAgLy8gdGFzayBhbHNvIHNjaGVkdWxlIGFzeW5jIGF1dG8tZmx1c2hcbiAgICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UgJiYgIWFzeW5jUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoYXN5bmNRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhc3luY1F1ZXVlLnB1c2goe3Njb3BlOiB0aGlzLCBmbjogJHBhcnNlKGV4cHIpLCBsb2NhbHM6IGxvY2Fsc30pO1xuICAgICAgfSxcblxuICAgICAgJCRwb3N0RGlnZXN0OiBmdW5jdGlvbihmbikge1xuICAgICAgICBwb3N0RGlnZXN0UXVldWUucHVzaChmbik7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGFwcGx5XG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogYCRhcHBseSgpYCBpcyB1c2VkIHRvIGV4ZWN1dGUgYW4gZXhwcmVzc2lvbiBpbiBBbmd1bGFySlMgZnJvbSBvdXRzaWRlIG9mIHRoZSBBbmd1bGFySlNcbiAgICAgICAqIGZyYW1ld29yay4gKEZvciBleGFtcGxlIGZyb20gYnJvd3NlciBET00gZXZlbnRzLCBzZXRUaW1lb3V0LCBYSFIgb3IgdGhpcmQgcGFydHkgbGlicmFyaWVzKS5cbiAgICAgICAqIEJlY2F1c2Ugd2UgYXJlIGNhbGxpbmcgaW50byB0aGUgQW5ndWxhckpTIGZyYW1ld29yayB3ZSBuZWVkIHRvIHBlcmZvcm0gcHJvcGVyIHNjb3BlIGxpZmVcbiAgICAgICAqIGN5Y2xlIG9mIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciBleGNlcHRpb24gaGFuZGxpbmd9LFxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCBleGVjdXRpbmcgd2F0Y2hlc30uXG4gICAgICAgKlxuICAgICAgICogKipMaWZlIGN5Y2xlOiBQc2V1ZG8tQ29kZSBvZiBgJGFwcGx5KClgKipcbiAgICAgICAqXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICBmdW5jdGlvbiAkYXBwbHkoZXhwcikge1xuICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICByZXR1cm4gJGV2YWwoZXhwcik7XG4gICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICRyb290LiRkaWdlc3QoKTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgIH1cbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBTY29wZSdzIGAkYXBwbHkoKWAgbWV0aG9kIHRyYW5zaXRpb25zIHRocm91Z2ggdGhlIGZvbGxvd2luZyBzdGFnZXM6XG4gICAgICAgKlxuICAgICAgICogMS4gVGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIGV4ZWN1dGVkIHVzaW5nIHRoZVxuICAgICAgICogICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGV2YWwgJGV2YWwoKX0gbWV0aG9kLlxuICAgICAgICogMi4gQW55IGV4Y2VwdGlvbnMgZnJvbSB0aGUgZXhlY3V0aW9uIG9mIHRoZSBleHByZXNzaW9uIGFyZSBmb3J3YXJkZWQgdG8gdGhlXG4gICAgICAgKiAgICB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICAgKiAzLiBUaGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoIHdhdGNofSBsaXN0ZW5lcnMgYXJlIGZpcmVkIGltbWVkaWF0ZWx5IGFmdGVyIHRoZVxuICAgICAgICogICAgZXhwcmVzc2lvbiB3YXMgZXhlY3V0ZWQgdXNpbmcgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSBtZXRob2QuXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbigpKT19IGV4cCBBbiBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCBjdXJyZW50IGBzY29wZWAgcGFyYW1ldGVyLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHsqfSBUaGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgdGhlIGV4cHJlc3Npb24uXG4gICAgICAgKi9cbiAgICAgICRhcHBseTogZnVuY3Rpb24oZXhwcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGJlZ2luUGhhc2UoJyRhcHBseScpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kZXZhbChleHByKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgY2xlYXJQaGFzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnNhZmUtZmluYWxseVxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkYXBwbHlBc3luY1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFNjaGVkdWxlIHRoZSBpbnZvY2F0aW9uIG9mICRhcHBseSB0byBvY2N1ciBhdCBhIGxhdGVyIHRpbWUuIFRoZSBhY3R1YWwgdGltZSBkaWZmZXJlbmNlXG4gICAgICAgKiB2YXJpZXMgYWNyb3NzIGJyb3dzZXJzLCBidXQgaXMgdHlwaWNhbGx5IGFyb3VuZCB+MTAgbWlsbGlzZWNvbmRzLlxuICAgICAgICpcbiAgICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gcXVldWUgdXAgbXVsdGlwbGUgZXhwcmVzc2lvbnMgd2hpY2ggbmVlZCB0byBiZSBldmFsdWF0ZWQgaW4gdGhlIHNhbWVcbiAgICAgICAqIGRpZ2VzdC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24oKSk9fSBleHAgQW4gQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICAgKlxuICAgICAgICogICAgLSBgc3RyaW5nYDogZXhlY3V0ZSB1c2luZyB0aGUgcnVsZXMgYXMgZGVmaW5lZCBpbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS5cbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cbiAgICAgICAqL1xuICAgICAgJGFwcGx5QXN5bmM6IGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcztcbiAgICAgICAgaWYgKGV4cHIpIHtcbiAgICAgICAgICBhcHBseUFzeW5jUXVldWUucHVzaCgkYXBwbHlBc3luY0V4cHJlc3Npb24pO1xuICAgICAgICB9XG4gICAgICAgIGV4cHIgPSAkcGFyc2UoZXhwcik7XG4gICAgICAgIHNjaGVkdWxlQXBwbHlBc3luYygpO1xuXG4gICAgICAgIGZ1bmN0aW9uICRhcHBseUFzeW5jRXhwcmVzc2lvbigpIHtcbiAgICAgICAgICBzY29wZS4kZXZhbChleHByKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRvblxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIExpc3RlbnMgb24gZXZlbnRzIG9mIGEgZ2l2ZW4gdHlwZS4gU2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRlbWl0ICRlbWl0fSBmb3JcbiAgICAgICAqIGRpc2N1c3Npb24gb2YgZXZlbnQgbGlmZSBjeWNsZS5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgZXZlbnQgbGlzdGVuZXIgZnVuY3Rpb24gZm9ybWF0IGlzOiBgZnVuY3Rpb24oZXZlbnQsIGFyZ3MuLi4pYC4gVGhlIGBldmVudGAgb2JqZWN0XG4gICAgICAgKiBwYXNzZWQgaW50byB0aGUgbGlzdGVuZXIgaGFzIHRoZSBmb2xsb3dpbmcgYXR0cmlidXRlczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gYHRhcmdldFNjb3BlYCAtIGB7U2NvcGV9YDogdGhlIHNjb3BlIG9uIHdoaWNoIHRoZSBldmVudCB3YXMgYCRlbWl0YC1lZCBvclxuICAgICAgICogICAgIGAkYnJvYWRjYXN0YC1lZC5cbiAgICAgICAqICAgLSBgY3VycmVudFNjb3BlYCAtIGB7U2NvcGV9YDogdGhlIHNjb3BlIHRoYXQgaXMgY3VycmVudGx5IGhhbmRsaW5nIHRoZSBldmVudC4gT25jZSB0aGVcbiAgICAgICAqICAgICBldmVudCBwcm9wYWdhdGVzIHRocm91Z2ggdGhlIHNjb3BlIGhpZXJhcmNoeSwgdGhpcyBwcm9wZXJ0eSBpcyBzZXQgdG8gbnVsbC5cbiAgICAgICAqICAgLSBgbmFtZWAgLSBge3N0cmluZ31gOiBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgICAqICAgLSBgc3RvcFByb3BhZ2F0aW9uYCAtIGB7ZnVuY3Rpb249fWA6IGNhbGxpbmcgYHN0b3BQcm9wYWdhdGlvbmAgZnVuY3Rpb24gd2lsbCBjYW5jZWxcbiAgICAgICAqICAgICBmdXJ0aGVyIGV2ZW50IHByb3BhZ2F0aW9uIChhdmFpbGFibGUgb25seSBmb3IgZXZlbnRzIHRoYXQgd2VyZSBgJGVtaXRgLWVkKS5cbiAgICAgICAqICAgLSBgcHJldmVudERlZmF1bHRgIC0gYHtmdW5jdGlvbn1gOiBjYWxsaW5nIGBwcmV2ZW50RGVmYXVsdGAgc2V0cyBgZGVmYXVsdFByZXZlbnRlZGAgZmxhZ1xuICAgICAgICogICAgIHRvIHRydWUuXG4gICAgICAgKiAgIC0gYGRlZmF1bHRQcmV2ZW50ZWRgIC0gYHtib29sZWFufWA6IHRydWUgaWYgYHByZXZlbnREZWZhdWx0YCB3YXMgY2FsbGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEV2ZW50IG5hbWUgdG8gbGlzdGVuIG9uLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudCwgLi4uYXJncyl9IGxpc3RlbmVyIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnQgaXMgZW1pdHRlZC5cbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGVyZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgKi9cbiAgICAgICRvbjogZnVuY3Rpb24obmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIG5hbWVkTGlzdGVuZXJzID0gdGhpcy4kJGxpc3RlbmVyc1tuYW1lXTtcbiAgICAgICAgaWYgKCFuYW1lZExpc3RlbmVycykge1xuICAgICAgICAgIHRoaXMuJCRsaXN0ZW5lcnNbbmFtZV0gPSBuYW1lZExpc3RlbmVycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIG5hbWVkTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcztcbiAgICAgICAgZG8ge1xuICAgICAgICAgIGlmICghY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0pIHtcbiAgICAgICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0rKztcbiAgICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgaW5kZXhPZkxpc3RlbmVyID0gbmFtZWRMaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgICAgaWYgKGluZGV4T2ZMaXN0ZW5lciAhPT0gLTEpIHtcbiAgICAgICAgICAgIC8vIFVzZSBkZWxldGUgaW4gdGhlIGhvcGUgb2YgdGhlIGJyb3dzZXIgZGVhbGxvY2F0aW5nIHRoZSBtZW1vcnkgZm9yIHRoZSBhcnJheSBlbnRyeSxcbiAgICAgICAgICAgIC8vIHdoaWxlIG5vdCBzaGlmdGluZyB0aGUgYXJyYXkgaW5kZXhlcyBvZiBvdGhlciBsaXN0ZW5lcnMuXG4gICAgICAgICAgICAvLyBTZWUgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTYxMzVcbiAgICAgICAgICAgIGRlbGV0ZSBuYW1lZExpc3RlbmVyc1tpbmRleE9mTGlzdGVuZXJdO1xuICAgICAgICAgICAgZGVjcmVtZW50TGlzdGVuZXJDb3VudChzZWxmLCAxLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZW1pdFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYG5hbWVgIHVwd2FyZHMgdGhyb3VnaCB0aGUgc2NvcGUgaGllcmFyY2h5IG5vdGlmeWluZyB0aGVcbiAgICAgICAqIHJlZ2lzdGVyZWQge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSBsaXN0ZW5lcnMuXG4gICAgICAgKlxuICAgICAgICogVGhlIGV2ZW50IGxpZmUgY3ljbGUgc3RhcnRzIGF0IHRoZSBzY29wZSBvbiB3aGljaCBgJGVtaXRgIHdhcyBjYWxsZWQuIEFsbFxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gbGlzdGVuaW5nIGZvciBgbmFtZWAgZXZlbnQgb24gdGhpcyBzY29wZSBnZXRcbiAgICAgICAqIG5vdGlmaWVkLiBBZnRlcndhcmRzLCB0aGUgZXZlbnQgdHJhdmVyc2VzIHVwd2FyZHMgdG93YXJkIHRoZSByb290IHNjb3BlIGFuZCBjYWxscyBhbGxcbiAgICAgICAqIHJlZ2lzdGVyZWQgbGlzdGVuZXJzIGFsb25nIHRoZSB3YXkuIFRoZSBldmVudCB3aWxsIHN0b3AgcHJvcGFnYXRpbmcgaWYgb25lIG9mIHRoZSBsaXN0ZW5lcnNcbiAgICAgICAqIGNhbmNlbHMgaXQuXG4gICAgICAgKlxuICAgICAgICogQW55IGV4Y2VwdGlvbiBlbWl0dGVkIGZyb20gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IHdpbGwgYmUgcGFzc2VkXG4gICAgICAgKiBvbnRvIHRoZSB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRXZlbnQgbmFtZSB0byBlbWl0LlxuICAgICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIG9uZSBvciBtb3JlIGFyZ3VtZW50cyB3aGljaCB3aWxsIGJlIHBhc3NlZCBvbnRvIHRoZSBldmVudCBsaXN0ZW5lcnMuXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEV2ZW50IG9iamVjdCAoc2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn0pLlxuICAgICAgICovXG4gICAgICAkZW1pdDogZnVuY3Rpb24obmFtZSwgYXJncykge1xuICAgICAgICB2YXIgZW1wdHkgPSBbXSxcbiAgICAgICAgICAgIG5hbWVkTGlzdGVuZXJzLFxuICAgICAgICAgICAgc2NvcGUgPSB0aGlzLFxuICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uID0gZmFsc2UsXG4gICAgICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgdGFyZ2V0U2NvcGU6IHNjb3BlLFxuICAgICAgICAgICAgICBzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge3N0b3BQcm9wYWdhdGlvbiA9IHRydWU7fSxcbiAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkZWZhdWx0UHJldmVudGVkOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpc3RlbmVyQXJncyA9IGNvbmNhdChbZXZlbnRdLCBhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgaSwgbGVuZ3RoO1xuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBuYW1lZExpc3RlbmVycyA9IHNjb3BlLiQkbGlzdGVuZXJzW25hbWVdIHx8IGVtcHR5O1xuICAgICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IHNjb3BlO1xuICAgICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG5hbWVkTGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIC8vIGlmIGxpc3RlbmVycyB3ZXJlIGRlcmVnaXN0ZXJlZCwgZGVmcmFnbWVudCB0aGUgYXJyYXlcbiAgICAgICAgICAgIGlmICghbmFtZWRMaXN0ZW5lcnNbaV0pIHtcbiAgICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgIGxlbmd0aC0tO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIC8vYWxsb3cgYWxsIGxpc3RlbmVycyBhdHRhY2hlZCB0byB0aGUgY3VycmVudCBzY29wZSB0byBydW5cbiAgICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgbGlzdGVuZXJBcmdzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vaWYgYW55IGxpc3RlbmVyIG9uIHRoZSBjdXJyZW50IHNjb3BlIHN0b3BzIHByb3BhZ2F0aW9uLCBwcmV2ZW50IGJ1YmJsaW5nXG4gICAgICAgICAgaWYgKHN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vdHJhdmVyc2UgdXB3YXJkc1xuICAgICAgICAgIHNjb3BlID0gc2NvcGUuJHBhcmVudDtcbiAgICAgICAgfSB3aGlsZSAoc2NvcGUpO1xuXG4gICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgfSxcblxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGJyb2FkY2FzdFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYG5hbWVgIGRvd253YXJkcyB0byBhbGwgY2hpbGQgc2NvcGVzIChhbmQgdGhlaXIgY2hpbGRyZW4pIG5vdGlmeWluZyB0aGVcbiAgICAgICAqIHJlZ2lzdGVyZWQge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSBsaXN0ZW5lcnMuXG4gICAgICAgKlxuICAgICAgICogVGhlIGV2ZW50IGxpZmUgY3ljbGUgc3RhcnRzIGF0IHRoZSBzY29wZSBvbiB3aGljaCBgJGJyb2FkY2FzdGAgd2FzIGNhbGxlZC4gQWxsXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb24gbGlzdGVuZXJzfSBsaXN0ZW5pbmcgZm9yIGBuYW1lYCBldmVudCBvbiB0aGlzIHNjb3BlIGdldFxuICAgICAgICogbm90aWZpZWQuIEFmdGVyd2FyZHMsIHRoZSBldmVudCBwcm9wYWdhdGVzIHRvIGFsbCBkaXJlY3QgYW5kIGluZGlyZWN0IHNjb3BlcyBvZiB0aGUgY3VycmVudFxuICAgICAgICogc2NvcGUgYW5kIGNhbGxzIGFsbCByZWdpc3RlcmVkIGxpc3RlbmVycyBhbG9uZyB0aGUgd2F5LiBUaGUgZXZlbnQgY2Fubm90IGJlIGNhbmNlbGVkLlxuICAgICAgICpcbiAgICAgICAqIEFueSBleGNlcHRpb24gZW1pdHRlZCBmcm9tIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb24gbGlzdGVuZXJzfSB3aWxsIGJlIHBhc3NlZFxuICAgICAgICogb250byB0aGUge0BsaW5rIG5nLiRleGNlcHRpb25IYW5kbGVyICRleGNlcHRpb25IYW5kbGVyfSBzZXJ2aWNlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEV2ZW50IG5hbWUgdG8gYnJvYWRjYXN0LlxuICAgICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIG9uZSBvciBtb3JlIGFyZ3VtZW50cyB3aGljaCB3aWxsIGJlIHBhc3NlZCBvbnRvIHRoZSBldmVudCBsaXN0ZW5lcnMuXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEV2ZW50IG9iamVjdCwgc2VlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbn1cbiAgICAgICAqL1xuICAgICAgJGJyb2FkY2FzdDogZnVuY3Rpb24obmFtZSwgYXJncykge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcyxcbiAgICAgICAgICAgIGN1cnJlbnQgPSB0YXJnZXQsXG4gICAgICAgICAgICBuZXh0ID0gdGFyZ2V0LFxuICAgICAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgIHRhcmdldFNjb3BlOiB0YXJnZXQsXG4gICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBldmVudC5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGVmYXVsdFByZXZlbnRlZDogZmFsc2VcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgaWYgKCF0YXJnZXQuJCRsaXN0ZW5lckNvdW50W25hbWVdKSByZXR1cm4gZXZlbnQ7XG5cbiAgICAgICAgdmFyIGxpc3RlbmVyQXJncyA9IGNvbmNhdChbZXZlbnRdLCBhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgbGlzdGVuZXJzLCBpLCBsZW5ndGg7XG5cbiAgICAgICAgLy9kb3duIHdoaWxlIHlvdSBjYW4sIHRoZW4gdXAgYW5kIG5leHQgc2libGluZyBvciB1cCBhbmQgbmV4dCBzaWJsaW5nIHVudGlsIGJhY2sgYXQgcm9vdFxuICAgICAgICB3aGlsZSAoKGN1cnJlbnQgPSBuZXh0KSkge1xuICAgICAgICAgIGV2ZW50LmN1cnJlbnRTY29wZSA9IGN1cnJlbnQ7XG4gICAgICAgICAgbGlzdGVuZXJzID0gY3VycmVudC4kJGxpc3RlbmVyc1tuYW1lXSB8fCBbXTtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIGlmIGxpc3RlbmVycyB3ZXJlIGRlcmVnaXN0ZXJlZCwgZGVmcmFnbWVudCB0aGUgYXJyYXlcbiAgICAgICAgICAgIGlmICghbGlzdGVuZXJzW2ldKSB7XG4gICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgbGlzdGVuZXJBcmdzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSW5zYW5pdHkgV2FybmluZzogc2NvcGUgZGVwdGgtZmlyc3QgdHJhdmVyc2FsXG4gICAgICAgICAgLy8geWVzLCB0aGlzIGNvZGUgaXMgYSBiaXQgY3JhenksIGJ1dCBpdCB3b3JrcyBhbmQgd2UgaGF2ZSB0ZXN0cyB0byBwcm92ZSBpdCFcbiAgICAgICAgICAvLyB0aGlzIHBpZWNlIHNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgdHJhdmVyc2FsIGluICRkaWdlc3RcbiAgICAgICAgICAvLyAodGhvdWdoIGl0IGRpZmZlcnMgZHVlIHRvIGhhdmluZyB0aGUgZXh0cmEgY2hlY2sgZm9yICQkbGlzdGVuZXJDb3VudCBhbmRcbiAgICAgICAgICAvLyBkb2VzIG5vdCBjaGVjayAkJHN1c3BlbmRlZClcbiAgICAgICAgICBpZiAoIShuZXh0ID0gKChjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSAmJiBjdXJyZW50LiQkY2hpbGRIZWFkKSB8fFxuICAgICAgICAgICAgICAoY3VycmVudCAhPT0gdGFyZ2V0ICYmIGN1cnJlbnQuJCRuZXh0U2libGluZykpKSkge1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IHRhcmdldCAmJiAhKG5leHQgPSBjdXJyZW50LiQkbmV4dFNpYmxpbmcpKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnQuY3VycmVudFNjb3BlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgJHJvb3RTY29wZSA9IG5ldyBTY29wZSgpO1xuXG4gICAgLy9UaGUgaW50ZXJuYWwgcXVldWVzLiBFeHBvc2UgdGhlbSBvbiB0aGUgJHJvb3RTY29wZSBmb3IgZGVidWdnaW5nL3Rlc3RpbmcgcHVycG9zZXMuXG4gICAgdmFyIGFzeW5jUXVldWUgPSAkcm9vdFNjb3BlLiQkYXN5bmNRdWV1ZSA9IFtdO1xuICAgIHZhciBwb3N0RGlnZXN0UXVldWUgPSAkcm9vdFNjb3BlLiQkcG9zdERpZ2VzdFF1ZXVlID0gW107XG4gICAgdmFyIGFwcGx5QXN5bmNRdWV1ZSA9ICRyb290U2NvcGUuJCRhcHBseUFzeW5jUXVldWUgPSBbXTtcblxuICAgIHZhciBwb3N0RGlnZXN0UXVldWVQb3NpdGlvbiA9IDA7XG5cbiAgICByZXR1cm4gJHJvb3RTY29wZTtcblxuXG4gICAgZnVuY3Rpb24gYmVnaW5QaGFzZShwaGFzZSkge1xuICAgICAgaWYgKCRyb290U2NvcGUuJCRwaGFzZSkge1xuICAgICAgICB0aHJvdyAkcm9vdFNjb3BlTWluRXJyKCdpbnByb2cnLCAnezB9IGFscmVhZHkgaW4gcHJvZ3Jlc3MnLCAkcm9vdFNjb3BlLiQkcGhhc2UpO1xuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiQkcGhhc2UgPSBwaGFzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhclBoYXNlKCkge1xuICAgICAgJHJvb3RTY29wZS4kJHBoYXNlID0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbmNyZW1lbnRXYXRjaGVyc0NvdW50KGN1cnJlbnQsIGNvdW50KSB7XG4gICAgICBkbyB7XG4gICAgICAgIGN1cnJlbnQuJCR3YXRjaGVyc0NvdW50ICs9IGNvdW50O1xuICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWNyZW1lbnRMaXN0ZW5lckNvdW50KGN1cnJlbnQsIGNvdW50LCBuYW1lKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdIC09IGNvdW50O1xuXG4gICAgICAgIGlmIChjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSA9PT0gMCkge1xuICAgICAgICAgIGRlbGV0ZSBjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXTtcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBjdXJyZW50LiRwYXJlbnQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiB1c2VkIGFzIGFuIGluaXRpYWwgdmFsdWUgZm9yIHdhdGNoZXJzLlxuICAgICAqIGJlY2F1c2UgaXQncyB1bmlxdWUgd2UgY2FuIGVhc2lseSB0ZWxsIGl0IGFwYXJ0IGZyb20gb3RoZXIgdmFsdWVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdFdhdGNoVmFsKCkge31cblxuICAgIGZ1bmN0aW9uIGZsdXNoQXBwbHlBc3luYygpIHtcbiAgICAgIHdoaWxlIChhcHBseUFzeW5jUXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXBwbHlBc3luY1F1ZXVlLnNoaWZ0KCkoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhcHBseUFzeW5jSWQgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlQXBwbHlBc3luYygpIHtcbiAgICAgIGlmIChhcHBseUFzeW5jSWQgPT09IG51bGwpIHtcbiAgICAgICAgYXBwbHlBc3luY0lkID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZmx1c2hBcHBseUFzeW5jKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHJvb3RFbGVtZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgcm9vdCBlbGVtZW50IG9mIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbi4gVGhpcyBpcyBlaXRoZXIgdGhlIGVsZW1lbnQgd2hlcmUge0BsaW5rXG4gKiBuZy5kaXJlY3RpdmU6bmdBcHAgbmdBcHB9IHdhcyBkZWNsYXJlZCBvciB0aGUgZWxlbWVudCBwYXNzZWQgaW50b1xuICoge0BsaW5rIGFuZ3VsYXIuYm9vdHN0cmFwfS4gVGhlIGVsZW1lbnQgcmVwcmVzZW50cyB0aGUgcm9vdCBlbGVtZW50IG9mIGFwcGxpY2F0aW9uLiBJdCBpcyBhbHNvIHRoZVxuICogbG9jYXRpb24gd2hlcmUgdGhlIGFwcGxpY2F0aW9uJ3Mge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0gc2VydmljZSBnZXRzXG4gKiBwdWJsaXNoZWQsIGFuZCBjYW4gYmUgcmV0cmlldmVkIHVzaW5nIGAkcm9vdEVsZW1lbnQuaW5qZWN0b3IoKWAuXG4gKi9cblxuXG4vLyB0aGUgaW1wbGVtZW50YXRpb24gaXMgaW4gYW5ndWxhci5ib290c3RyYXBcblxuLyoqXG4gKiBAdGhpc1xuICogQGRlc2NyaXB0aW9uXG4gKiBQcml2YXRlIHNlcnZpY2UgdG8gc2FuaXRpemUgdXJpcyBmb3IgbGlua3MgYW5kIGltYWdlcy4gVXNlZCBieSAkY29tcGlsZSBhbmQgJHNhbml0aXplLlxuICovXG5mdW5jdGlvbiAkJFNhbml0aXplVXJpUHJvdmlkZXIoKSB7XG5cbiAgdmFyIGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gL15cXHMqKGh0dHBzP3xzP2Z0cHxtYWlsdG98dGVsfGZpbGUpOi8sXG4gICAgaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gL15cXHMqKChodHRwcz98ZnRwfGZpbGV8YmxvYik6fGRhdGE6aW1hZ2VcXC8pLztcblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcbiAgICogdXJscyBkdXJpbmcgYVtocmVmXSBzYW5pdGl6YXRpb24uXG4gICAqXG4gICAqIFRoZSBzYW5pdGl6YXRpb24gaXMgYSBzZWN1cml0eSBtZWFzdXJlIGFpbWVkIGF0IHByZXZlbnQgWFNTIGF0dGFja3MgdmlhIEhUTUwgYW5jaG9yIGxpbmtzLlxuICAgKlxuICAgKiBBbnkgdXJsIGR1ZSB0byBiZSBhc3NpZ25lZCB0byBhbiBgYVtocmVmXWAgYXR0cmlidXRlIHZpYSBpbnRlcnBvbGF0aW9uIGlzIG1hcmtlZCBhcyByZXF1aXJpbmdcbiAgICogdGhlICRzY2UuVVJMIHNlY3VyaXR5IGNvbnRleHQuIFdoZW4gaW50ZXJwb2xhdGlvbiBvY2N1cnMgYSBjYWxsIGlzIG1hZGUgdG8gYCRzY2UudHJ1c3RBc1VybCh1cmwpYFxuICAgKiB3aGljaCBpbiB0dXJuIG1heSBjYWxsIGAkJHNhbml0aXplVXJpKHVybCwgaXNNZWRpYSlgIHRvIHNhbml0aXplIHRoZSBwb3RlbnRpYWxseSBtYWxpY2lvdXMgVVJMLlxuICAgKlxuICAgKiBJZiB0aGUgVVJMIG1hdGNoZXMgdGhlIGBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdGAgcmVndWxhciBleHByZXNzaW9uLCBpdCBpcyByZXR1cm5lZCB1bmNoYW5nZWQuXG4gICAqXG4gICAqIElmIHRoZXJlIGlzIG5vIG1hdGNoIHRoZSBVUkwgaXMgcmV0dXJuZWQgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCB0byBlbnN1cmUgdGhhdCB3aGVuIGl0IGlzIHdyaXR0ZW5cbiAgICogdG8gdGhlIERPTSBpdCBpcyBpbmFjdGl2ZSBhbmQgcG90ZW50aWFsbHkgbWFsaWNpb3VzIGNvZGUgd2lsbCBub3QgYmUgZXhlY3V0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gZnVuY3Rpb24ocmVnZXhwKSB7XG4gICAgaWYgKGlzRGVmaW5lZChyZWdleHApKSB7XG4gICAgICBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IHJlZ2V4cDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XG4gIH07XG5cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcbiAgICogdXJscyBkdXJpbmcgaW1nW3NyY10gc2FuaXRpemF0aW9uLlxuICAgKlxuICAgKiBUaGUgc2FuaXRpemF0aW9uIGlzIGEgc2VjdXJpdHkgbWVhc3VyZSBhaW1lZCBhdCBwcmV2ZW50IFhTUyBhdHRhY2tzIHZpYSBIVE1MIGltYWdlIHNyYyBsaW5rcy5cbiAgICpcbiAgICogQW55IFVSTCBkdWUgdG8gYmUgYXNzaWduZWQgdG8gYW4gYGltZ1tzcmNdYCBhdHRyaWJ1dGUgdmlhIGludGVycG9sYXRpb24gaXMgbWFya2VkIGFzIHJlcXVpcmluZ1xuICAgKiB0aGUgJHNjZS5NRURJQV9VUkwgc2VjdXJpdHkgY29udGV4dC4gV2hlbiBpbnRlcnBvbGF0aW9uIG9jY3VycyBhIGNhbGwgaXMgbWFkZSB0b1xuICAgKiBgJHNjZS50cnVzdEFzTWVkaWFVcmwodXJsKWAgd2hpY2ggaW4gdHVybiBtYXkgY2FsbCBgJCRzYW5pdGl6ZVVyaSh1cmwsIGlzTWVkaWEpYCB0byBzYW5pdGl6ZVxuICAgKiB0aGUgcG90ZW50aWFsbHkgbWFsaWNpb3VzIFVSTC5cbiAgICpcbiAgICogSWYgdGhlIFVSTCBtYXRjaGVzIHRoZSBgYUltZ1Nhbml0aXphdGlvbldoaXRlbGlzdGAgcmVndWxhciBleHByZXNzaW9uLCBpdCBpcyByZXR1cm5lZCB1bmNoYW5nZWQuXG4gICAqXG4gICAqIElmIHRoZXJlIGlzIG5vIG1hdGNoIHRoZSBVUkwgaXMgcmV0dXJuZWQgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCB0byBlbnN1cmUgdGhhdCB3aGVuIGl0IGlzIHdyaXR0ZW5cbiAgICogdG8gdGhlIERPTSBpdCBpcyBpbmFjdGl2ZSBhbmQgcG90ZW50aWFsbHkgbWFsaWNpb3VzIGNvZGUgd2lsbCBub3QgYmUgZXhlY3V0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA9IGZ1bmN0aW9uKHJlZ2V4cCkge1xuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xuICAgICAgaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gcmVnZXhwO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XG4gIH07XG5cbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHNhbml0aXplVXJpKHVyaSwgaXNNZWRpYVVybCkge1xuICAgICAgLy8gaWYgKCF1cmkpIHJldHVybiB1cmk7XG4gICAgICB2YXIgcmVnZXggPSBpc01lZGlhVXJsID8gaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0IDogYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XG4gICAgICB2YXIgbm9ybWFsaXplZFZhbCA9IHVybFJlc29sdmUodXJpICYmIHVyaS50cmltKCkpLmhyZWY7XG4gICAgICBpZiAobm9ybWFsaXplZFZhbCAhPT0gJycgJiYgIW5vcm1hbGl6ZWRWYWwubWF0Y2gocmVnZXgpKSB7XG4gICAgICAgIHJldHVybiAndW5zYWZlOicgKyBub3JtYWxpemVkVmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVyaTtcbiAgICB9O1xuICB9O1xufVxuXG4vKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqXG4gKiAgICAgQW55IGNvbW1pdHMgdG8gdGhpcyBmaWxlIHNob3VsZCBiZSByZXZpZXdlZCB3aXRoIHNlY3VyaXR5IGluIG1pbmQuICAqXG4gKiAgIENoYW5nZXMgdG8gdGhpcyBmaWxlIGNhbiBwb3RlbnRpYWxseSBjcmVhdGUgc2VjdXJpdHkgdnVsbmVyYWJpbGl0aWVzLiAqXG4gKiAgICAgICAgICBBbiBhcHByb3ZhbCBmcm9tIDIgQ29yZSBtZW1iZXJzIHdpdGggaGlzdG9yeSBvZiBtb2RpZnlpbmcgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzIGZpbGUgaXMgcmVxdWlyZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgRG9lcyB0aGUgY2hhbmdlIHNvbWVob3cgYWxsb3cgZm9yIGFyYml0cmFyeSBqYXZhc2NyaXB0IHRvIGJlIGV4ZWN1dGVkPyAqXG4gKiAgICBPciBhbGxvd3MgZm9yIHNvbWVvbmUgdG8gY2hhbmdlIHRoZSBwcm90b3R5cGUgb2YgYnVpbHQtaW4gb2JqZWN0cz8gICAqXG4gKiAgICAgT3IgZ2l2ZXMgdW5kZXNpcmVkIGFjY2VzcyB0byB2YXJpYWJsZXMgbGlrZXMgZG9jdW1lbnQgb3Igd2luZG93PyAgICAqXG4gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqL1xuXG4vKiBleHBvcnRlZCAkU2NlUHJvdmlkZXIsICRTY2VEZWxlZ2F0ZVByb3ZpZGVyICovXG5cbnZhciAkc2NlTWluRXJyID0gbWluRXJyKCckc2NlJyk7XG5cbnZhciBTQ0VfQ09OVEVYVFMgPSB7XG4gIC8vIEhUTUwgaXMgdXNlZCB3aGVuIHRoZXJlJ3MgSFRNTCByZW5kZXJlZCAoZS5nLiBuZy1iaW5kLWh0bWwsIGlmcmFtZSBzcmNkb2MgYmluZGluZykuXG4gIEhUTUw6ICdodG1sJyxcblxuICAvLyBTdHlsZSBzdGF0ZW1lbnRzIG9yIHN0eWxlc2hlZXRzLiBDdXJyZW50bHkgdW51c2VkIGluIEFuZ3VsYXJKUy5cbiAgQ1NTOiAnY3NzJyxcblxuICAvLyBBbiBVUkwgdXNlZCBpbiBhIGNvbnRleHQgd2hlcmUgaXQgcmVmZXJzIHRvIHRoZSBzb3VyY2Ugb2YgbWVkaWEsIHdoaWNoIGFyZSBub3QgZXhwZWN0ZWQgdG8gYmUgcnVuXG4gIC8vIGFzIHNjcmlwdHMsIHN1Y2ggYXMgYW4gaW1hZ2UsIGF1ZGlvLCB2aWRlbywgZXRjLlxuICBNRURJQV9VUkw6ICdtZWRpYVVybCcsXG5cbiAgLy8gQW4gVVJMIHVzZWQgaW4gYSBjb250ZXh0IHdoZXJlIGl0IGRvZXMgbm90IHJlZmVyIHRvIGEgcmVzb3VyY2UgdGhhdCBsb2FkcyBjb2RlLlxuICAvLyBBIHZhbHVlIHRoYXQgY2FuIGJlIHRydXN0ZWQgYXMgYSBVUkwgY2FuIGFsc28gdHJ1c3RlZCBhcyBhIE1FRElBX1VSTC5cbiAgVVJMOiAndXJsJyxcblxuICAvLyBSRVNPVVJDRV9VUkwgaXMgYSBzdWJ0eXBlIG9mIFVSTCB1c2VkIHdoZXJlIHRoZSByZWZlcnJlZC10byByZXNvdXJjZSBjb3VsZCBiZSBpbnRlcnByZXRlZCBhc1xuICAvLyBjb2RlLiAoZS5nLiBuZy1pbmNsdWRlLCBzY3JpcHQgc3JjIGJpbmRpbmcsIHRlbXBsYXRlVXJsKVxuICAvLyBBIHZhbHVlIHRoYXQgY2FuIGJlIHRydXN0ZWQgYXMgYSBSRVNPVVJDRV9VUkwsIGNhbiBhbHNvIHRydXN0ZWQgYXMgYSBVUkwgYW5kIGEgTUVESUFfVVJMLlxuICBSRVNPVVJDRV9VUkw6ICdyZXNvdXJjZVVybCcsXG5cbiAgLy8gU2NyaXB0LiBDdXJyZW50bHkgdW51c2VkIGluIEFuZ3VsYXJKUy5cbiAgSlM6ICdqcydcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9sbG93LlxuXG52YXIgVU5ERVJTQ09SRV9MT1dFUkNBU0VfUkVHRVhQID0gL18oW2Etel0pL2c7XG5cbmZ1bmN0aW9uIHNuYWtlVG9DYW1lbChuYW1lKSB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoVU5ERVJTQ09SRV9MT1dFUkNBU0VfUkVHRVhQLCBmbkNhbWVsQ2FzZVJlcGxhY2UpO1xufVxuXG5mdW5jdGlvbiBhZGp1c3RNYXRjaGVyKG1hdGNoZXIpIHtcbiAgaWYgKG1hdGNoZXIgPT09ICdzZWxmJykge1xuICAgIHJldHVybiBtYXRjaGVyO1xuICB9IGVsc2UgaWYgKGlzU3RyaW5nKG1hdGNoZXIpKSB7XG4gICAgLy8gU3RyaW5ncyBtYXRjaCBleGFjdGx5IGV4Y2VwdCBmb3IgMiB3aWxkY2FyZHMgLSAnKicgYW5kICcqKicuXG4gICAgLy8gJyonIG1hdGNoZXMgYW55IGNoYXJhY3RlciBleGNlcHQgdGhvc2UgZnJvbSB0aGUgc2V0ICc6Ly4/JicuXG4gICAgLy8gJyoqJyBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgKGxpa2UgLiogaW4gYSBSZWdFeHApLlxuICAgIC8vIE1vcmUgdGhhbiAyIConcyByYWlzZXMgYW4gZXJyb3IgYXMgaXQncyBpbGwgZGVmaW5lZC5cbiAgICBpZiAobWF0Y2hlci5pbmRleE9mKCcqKionKSA+IC0xKSB7XG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCdpd2NhcmQnLFxuICAgICAgICAgICdJbGxlZ2FsIHNlcXVlbmNlICoqKiBpbiBzdHJpbmcgbWF0Y2hlci4gIFN0cmluZzogezB9JywgbWF0Y2hlcik7XG4gICAgfVxuICAgIG1hdGNoZXIgPSBlc2NhcGVGb3JSZWdleHAobWF0Y2hlcikuXG4gICAgICAgICAgICAgICAgICByZXBsYWNlKC9cXFxcXFwqXFxcXFxcKi9nLCAnLionKS5cbiAgICAgICAgICAgICAgICAgIHJlcGxhY2UoL1xcXFxcXCovZywgJ1teOi8uPyY7XSonKTtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyBtYXRjaGVyICsgJyQnKTtcbiAgfSBlbHNlIGlmIChpc1JlZ0V4cChtYXRjaGVyKSkge1xuICAgIC8vIFRoZSBvbmx5IG90aGVyIHR5cGUgb2YgbWF0Y2hlciBhbGxvd2VkIGlzIGEgUmVnZXhwLlxuICAgIC8vIE1hdGNoIGVudGlyZSBVUkwgLyBkaXNhbGxvdyBwYXJ0aWFsIG1hdGNoZXMuXG4gICAgLy8gRmxhZ3MgYXJlIHJlc2V0IChpLmUuIG5vIGdsb2JhbCwgaWdub3JlQ2FzZSBvciBtdWx0aWxpbmUpXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgbWF0Y2hlci5zb3VyY2UgKyAnJCcpO1xuICB9IGVsc2Uge1xuICAgIHRocm93ICRzY2VNaW5FcnIoJ2ltYXRjaGVyJyxcbiAgICAgICAgJ01hdGNoZXJzIG1heSBvbmx5IGJlIFwic2VsZlwiLCBzdHJpbmcgcGF0dGVybnMgb3IgUmVnRXhwIG9iamVjdHMnKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGFkanVzdE1hdGNoZXJzKG1hdGNoZXJzKSB7XG4gIHZhciBhZGp1c3RlZE1hdGNoZXJzID0gW107XG4gIGlmIChpc0RlZmluZWQobWF0Y2hlcnMpKSB7XG4gICAgZm9yRWFjaChtYXRjaGVycywgZnVuY3Rpb24obWF0Y2hlcikge1xuICAgICAgYWRqdXN0ZWRNYXRjaGVycy5wdXNoKGFkanVzdE1hdGNoZXIobWF0Y2hlcikpO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBhZGp1c3RlZE1hdGNoZXJzO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRzY2VEZWxlZ2F0ZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBgJHNjZURlbGVnYXRlYCBpcyBhIHNlcnZpY2UgdGhhdCBpcyB1c2VkIGJ5IHRoZSBgJHNjZWAgc2VydmljZSB0byBwcm92aWRlIHtAbGluayBuZy4kc2NlIFN0cmljdFxuICogQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKX0gc2VydmljZXMgdG8gQW5ndWxhckpTLlxuICpcbiAqIEZvciBhbiBvdmVydmlldyBvZiB0aGlzIHNlcnZpY2UgYW5kIHRoZSBmdW5jdGlvbm5hbGl0eSBpdCBwcm92aWRlcyBpbiBBbmd1bGFySlMsIHNlZSB0aGUgbWFpblxuICogcGFnZSBmb3Ige0BsaW5rIG5nLiRzY2UgU0NFfS4gVGhlIGN1cnJlbnQgcGFnZSBpcyB0YXJnZXRlZCBmb3IgZGV2ZWxvcGVycyB3aG8gbmVlZCB0byBhbHRlciBob3dcbiAqIFNDRSB3b3JrcyBpbiB0aGVpciBhcHBsaWNhdGlvbiwgd2hpY2ggc2hvdWxkbid0IGJlIG5lZWRlZCBpbiBtb3N0IGNhc2VzLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqIEFuZ3VsYXJKUyBzdHJvbmdseSByZWxpZXMgb24gY29udGV4dHVhbCBlc2NhcGluZyBmb3IgdGhlIHNlY3VyaXR5IG9mIGJpbmRpbmdzOiBkaXNhYmxpbmcgb3JcbiAqIG1vZGlmeWluZyB0aGlzIG1pZ2h0IGNhdXNlIGNyb3NzIHNpdGUgc2NyaXB0aW5nIChYU1MpIHZ1bG5lcmFiaWxpdGllcy4gRm9yIGxpYnJhcmllcyBvd25lcnMsXG4gKiBjaGFuZ2VzIHRvIHRoaXMgc2VydmljZSB3aWxsIGFsc28gaW5mbHVlbmNlIHVzZXJzLCBzbyBiZSBleHRyYSBjYXJlZnVsIGFuZCBkb2N1bWVudCB5b3VyIGNoYW5nZXMuXG4gKiA8L2Rpdj5cbiAqXG4gKiBUeXBpY2FsbHksIHlvdSB3b3VsZCBjb25maWd1cmUgb3Igb3ZlcnJpZGUgdGhlIHtAbGluayBuZy4kc2NlRGVsZWdhdGUgJHNjZURlbGVnYXRlfSBpbnN0ZWFkIG9mXG4gKiB0aGUgYCRzY2VgIHNlcnZpY2UgdG8gY3VzdG9taXplIHRoZSB3YXkgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgd29ya3MgaW4gQW5ndWxhckpTLiAgVGhpcyBpc1xuICogYmVjYXVzZSwgd2hpbGUgdGhlIGAkc2NlYCBwcm92aWRlcyBudW1lcm91cyBzaG9ydGhhbmQgbWV0aG9kcywgZXRjLiwgeW91IHJlYWxseSBvbmx5IG5lZWQgdG9cbiAqIG92ZXJyaWRlIDMgY29yZSBmdW5jdGlvbnMgKGB0cnVzdEFzYCwgYGdldFRydXN0ZWRgIGFuZCBgdmFsdWVPZmApIHRvIHJlcGxhY2UgdGhlIHdheSB0aGluZ3NcbiAqIHdvcmsgYmVjYXVzZSBgJHNjZWAgZGVsZWdhdGVzIHRvIGAkc2NlRGVsZWdhdGVgIGZvciB0aGVzZSBvcGVyYXRpb25zLlxuICpcbiAqIFJlZmVyIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciAkc2NlRGVsZWdhdGVQcm92aWRlcn0gdG8gY29uZmlndXJlIHRoaXMgc2VydmljZS5cbiAqXG4gKiBUaGUgZGVmYXVsdCBpbnN0YW5jZSBvZiBgJHNjZURlbGVnYXRlYCBzaG91bGQgd29yayBvdXQgb2YgdGhlIGJveCB3aXRoIGxpdHRsZSBwYWluLiAgV2hpbGUgeW91XG4gKiBjYW4gb3ZlcnJpZGUgaXQgY29tcGxldGVseSB0byBjaGFuZ2UgdGhlIGJlaGF2aW9yIG9mIGAkc2NlYCwgdGhlIGNvbW1vbiBjYXNlIHdvdWxkXG4gKiBpbnZvbHZlIGNvbmZpZ3VyaW5nIHRoZSB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIgJHNjZURlbGVnYXRlUHJvdmlkZXJ9IGluc3RlYWQgYnkgc2V0dGluZ1xuICogeW91ciBvd24gd2hpdGVsaXN0cyBhbmQgYmxhY2tsaXN0cyBmb3IgdHJ1c3RpbmcgVVJMcyB1c2VkIGZvciBsb2FkaW5nIEFuZ3VsYXJKUyByZXNvdXJjZXMgc3VjaCBhc1xuICogdGVtcGxhdGVzLiAgUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0XG4gKiAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdH0gYW5kIHtAbGlua1xuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRzY2VEZWxlZ2F0ZVByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoZSBgJHNjZURlbGVnYXRlUHJvdmlkZXJgIHByb3ZpZGVyIGFsbG93cyBkZXZlbG9wZXJzIHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVxuICogJHNjZURlbGVnYXRlIHNlcnZpY2V9LCB1c2VkIGFzIGEgZGVsZWdhdGUgZm9yIHtAbGluayBuZy4kc2NlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cbiAqXG4gKiBUaGUgYCRzY2VEZWxlZ2F0ZVByb3ZpZGVyYCBhbGxvd3Mgb25lIHRvIGdldC9zZXQgdGhlIHdoaXRlbGlzdHMgYW5kIGJsYWNrbGlzdHMgdXNlZCB0byBlbnN1cmVcbiAqIHRoYXQgdGhlIFVSTHMgdXNlZCBmb3Igc291cmNpbmcgQW5ndWxhckpTIHRlbXBsYXRlcyBhbmQgb3RoZXIgc2NyaXB0LXJ1bm5pbmcgVVJMcyBhcmUgc2FmZSAoYWxsXG4gKiBwbGFjZXMgdGhhdCB1c2UgdGhlIGAkc2NlLlJFU09VUkNFX1VSTGAgY29udGV4dCkuIFNlZVxuICoge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0ICRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsV2hpdGVsaXN0fVxuICogYW5kXG4gKiB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9LFxuICpcbiAqIEZvciB0aGUgZ2VuZXJhbCBkZXRhaWxzIGFib3V0IHRoaXMgc2VydmljZSBpbiBBbmd1bGFySlMsIHJlYWQgdGhlIG1haW4gcGFnZSBmb3Ige0BsaW5rIG5nLiRzY2VcbiAqIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cbiAqXG4gKiAqKkV4YW1wbGUqKjogIENvbnNpZGVyIHRoZSBmb2xsb3dpbmcgY2FzZS4gPGEgbmFtZT1cImV4YW1wbGVcIj48L2E+XG4gKlxuICogLSB5b3VyIGFwcCBpcyBob3N0ZWQgYXQgdXJsIGBodHRwOi8vbXlhcHAuZXhhbXBsZS5jb20vYFxuICogLSBidXQgc29tZSBvZiB5b3VyIHRlbXBsYXRlcyBhcmUgaG9zdGVkIG9uIG90aGVyIGRvbWFpbnMgeW91IGNvbnRyb2wgc3VjaCBhc1xuICogICBgaHR0cDovL3NydjAxLmFzc2V0cy5leGFtcGxlLmNvbS9gLCBgaHR0cDovL3NydjAyLmFzc2V0cy5leGFtcGxlLmNvbS9gLCBldGMuXG4gKiAtIGFuZCB5b3UgaGF2ZSBhbiBvcGVuIHJlZGlyZWN0IGF0IGBodHRwOi8vbXlhcHAuZXhhbXBsZS5jb20vY2xpY2tUaHJ1Py4uLmAuXG4gKlxuICogSGVyZSBpcyB3aGF0IGEgc2VjdXJlIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgc2NlbmFyaW8gbWlnaHQgbG9vayBsaWtlOlxuICpcbiAqIGBgYFxuICogIGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFtdKS5jb25maWcoZnVuY3Rpb24oJHNjZURlbGVnYXRlUHJvdmlkZXIpIHtcbiAqICAgICRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsV2hpdGVsaXN0KFtcbiAqICAgICAgLy8gQWxsb3cgc2FtZSBvcmlnaW4gcmVzb3VyY2UgbG9hZHMuXG4gKiAgICAgICdzZWxmJyxcbiAqICAgICAgLy8gQWxsb3cgbG9hZGluZyBmcm9tIG91ciBhc3NldHMgZG9tYWluLiAgTm90aWNlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gKiBhbmQgKiouXG4gKiAgICAgICdodHRwOi8vc3J2Ki5hc3NldHMuZXhhbXBsZS5jb20vKionXG4gKiAgICBdKTtcbiAqXG4gKiAgICAvLyBUaGUgYmxhY2tsaXN0IG92ZXJyaWRlcyB0aGUgd2hpdGVsaXN0IHNvIHRoZSBvcGVuIHJlZGlyZWN0IGhlcmUgaXMgYmxvY2tlZC5cbiAqICAgICRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsQmxhY2tsaXN0KFtcbiAqICAgICAgJ2h0dHA6Ly9teWFwcC5leGFtcGxlLmNvbS9jbGlja1RocnUqKidcbiAqICAgIF0pO1xuICogIH0pO1xuICogYGBgXG4gKiBOb3RlIHRoYXQgYW4gZW1wdHkgd2hpdGVsaXN0IHdpbGwgYmxvY2sgZXZlcnkgcmVzb3VyY2UgVVJMIGZyb20gYmVpbmcgbG9hZGVkLCBhbmQgd2lsbCByZXF1aXJlXG4gKiB5b3UgdG8gbWFudWFsbHkgbWFyayBlYWNoIG9uZSBhcyB0cnVzdGVkIHdpdGggYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsYC4gSG93ZXZlciwgdGVtcGxhdGVzXG4gKiByZXF1ZXN0ZWQgYnkge0BsaW5rIG5nLiR0ZW1wbGF0ZVJlcXVlc3QgJHRlbXBsYXRlUmVxdWVzdH0gdGhhdCBhcmUgcHJlc2VudCBpblxuICoge0BsaW5rIG5nLiR0ZW1wbGF0ZUNhY2hlICR0ZW1wbGF0ZUNhY2hlfSB3aWxsIG5vdCBnbyB0aHJvdWdoIHRoaXMgY2hlY2suIElmIHlvdSBoYXZlIGEgbWVjaGFuaXNtXG4gKiB0byBwb3B1bGF0ZSB5b3VyIHRlbXBsYXRlcyBpbiB0aGF0IGNhY2hlIGF0IGNvbmZpZyB0aW1lLCB0aGVuIGl0IGlzIGEgZ29vZCBpZGVhIHRvIHJlbW92ZSAnc2VsZidcbiAqIGZyb20gdGhhdCB3aGl0ZWxpc3QuIFRoaXMgaGVscHMgdG8gbWl0aWdhdGUgdGhlIHNlY3VyaXR5IGltcGFjdCBvZiBjZXJ0YWluIHR5cGVzIG9mIGlzc3VlcywgbGlrZVxuICogZm9yIGluc3RhbmNlIGF0dGFja2VyLWNvbnRyb2xsZWQgYG5nLWluY2x1ZGVzYC5cbiAqL1xuXG5mdW5jdGlvbiAkU2NlRGVsZWdhdGVQcm92aWRlcigpIHtcbiAgdGhpcy5TQ0VfQ09OVEVYVFMgPSBTQ0VfQ09OVEVYVFM7XG5cbiAgLy8gUmVzb3VyY2UgVVJMcyBjYW4gYWxzbyBiZSB0cnVzdGVkIGJ5IHBvbGljeS5cbiAgdmFyIHJlc291cmNlVXJsV2hpdGVsaXN0ID0gWydzZWxmJ10sXG4gICAgICByZXNvdXJjZVVybEJsYWNrbGlzdCA9IFtdO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0XG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXk9fSB3aGl0ZWxpc3QgV2hlbiBwcm92aWRlZCwgcmVwbGFjZXMgdGhlIHJlc291cmNlVXJsV2hpdGVsaXN0IHdpdGggdGhlIHZhbHVlXG4gICAqICAgICBwcm92aWRlZC4gIFRoaXMgbXVzdCBiZSBhbiBhcnJheSBvciBudWxsLiAgQSBzbmFwc2hvdCBvZiB0aGlzIGFycmF5IGlzIHVzZWQgc28gZnVydGhlclxuICAgKiAgICAgY2hhbmdlcyB0byB0aGUgYXJyYXkgYXJlIGlnbm9yZWQuXG4gICAqICAgICBGb2xsb3cge0BsaW5rIG5nLiRzY2UjcmVzb3VyY2VVcmxQYXR0ZXJuSXRlbSB0aGlzIGxpbmt9IGZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBpdGVtc1xuICAgKiAgICAgYWxsb3dlZCBpbiB0aGlzIGFycmF5LlxuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGN1cnJlbnRseSBzZXQgd2hpdGVsaXN0IGFycmF5LlxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cy9HZXRzIHRoZSB3aGl0ZWxpc3Qgb2YgdHJ1c3RlZCByZXNvdXJjZSBVUkxzLlxuICAgKlxuICAgKiBUaGUgKipkZWZhdWx0IHZhbHVlKiogd2hlbiBubyB3aGl0ZWxpc3QgaGFzIGJlZW4gZXhwbGljaXRseSBzZXQgaXMgYFsnc2VsZiddYCBhbGxvd2luZyBvbmx5XG4gICAqIHNhbWUgb3JpZ2luIHJlc291cmNlIHJlcXVlc3RzLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAqKk5vdGU6KiogdGhlIGRlZmF1bHQgd2hpdGVsaXN0IG9mICdzZWxmJyBpcyBub3QgcmVjb21tZW5kZWQgaWYgeW91ciBhcHAgc2hhcmVzIGl0cyBvcmlnaW5cbiAgICogd2l0aCBvdGhlciBhcHBzISBJdCBpcyBhIGdvb2QgaWRlYSB0byBsaW1pdCBpdCB0byBvbmx5IHlvdXIgYXBwbGljYXRpb24ncyBkaXJlY3RvcnkuXG4gICAqIDwvZGl2PlxuICAgKi9cbiAgdGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJlc291cmNlVXJsV2hpdGVsaXN0ID0gYWRqdXN0TWF0Y2hlcnModmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb3VyY2VVcmxXaGl0ZWxpc3Q7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3RcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheT19IGJsYWNrbGlzdCBXaGVuIHByb3ZpZGVkLCByZXBsYWNlcyB0aGUgcmVzb3VyY2VVcmxCbGFja2xpc3Qgd2l0aCB0aGUgdmFsdWVcbiAgICogICAgIHByb3ZpZGVkLiAgVGhpcyBtdXN0IGJlIGFuIGFycmF5IG9yIG51bGwuICBBIHNuYXBzaG90IG9mIHRoaXMgYXJyYXkgaXMgdXNlZCBzbyBmdXJ0aGVyXG4gICAqICAgICBjaGFuZ2VzIHRvIHRoZSBhcnJheSBhcmUgaWdub3JlZC48L3A+PHA+XG4gICAqICAgICBGb2xsb3cge0BsaW5rIG5nLiRzY2UjcmVzb3VyY2VVcmxQYXR0ZXJuSXRlbSB0aGlzIGxpbmt9IGZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBpdGVtc1xuICAgKiAgICAgYWxsb3dlZCBpbiB0aGlzIGFycmF5LjwvcD48cD5cbiAgICogICAgIFRoZSB0eXBpY2FsIHVzYWdlIGZvciB0aGUgYmxhY2tsaXN0IGlzIHRvICoqYmxvY2tcbiAgICogICAgIFtvcGVuIHJlZGlyZWN0c10oaHR0cDovL2N3ZS5taXRyZS5vcmcvZGF0YS9kZWZpbml0aW9ucy82MDEuaHRtbCkqKiBzZXJ2ZWQgYnkgeW91ciBkb21haW4gYXNcbiAgICogICAgIHRoZXNlIHdvdWxkIG90aGVyd2lzZSBiZSB0cnVzdGVkIGJ1dCBhY3R1YWxseSByZXR1cm4gY29udGVudCBmcm9tIHRoZSByZWRpcmVjdGVkIGRvbWFpbi5cbiAgICogICAgIDwvcD48cD5cbiAgICogICAgIEZpbmFsbHksICoqdGhlIGJsYWNrbGlzdCBvdmVycmlkZXMgdGhlIHdoaXRlbGlzdCoqIGFuZCBoYXMgdGhlIGZpbmFsIHNheS5cbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9IFRoZSBjdXJyZW50bHkgc2V0IGJsYWNrbGlzdCBhcnJheS5cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMvR2V0cyB0aGUgYmxhY2tsaXN0IG9mIHRydXN0ZWQgcmVzb3VyY2UgVVJMcy5cbiAgICpcbiAgICogVGhlICoqZGVmYXVsdCB2YWx1ZSoqIHdoZW4gbm8gd2hpdGVsaXN0IGhhcyBiZWVuIGV4cGxpY2l0bHkgc2V0IGlzIHRoZSBlbXB0eSBhcnJheSAoaS5lLiB0aGVyZVxuICAgKiBpcyBubyBibGFja2xpc3QuKVxuICAgKi9cblxuICB0aGlzLnJlc291cmNlVXJsQmxhY2tsaXN0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgcmVzb3VyY2VVcmxCbGFja2xpc3QgPSBhZGp1c3RNYXRjaGVycyh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXNvdXJjZVVybEJsYWNrbGlzdDtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsICckJHNhbml0aXplVXJpJywgZnVuY3Rpb24oJGluamVjdG9yLCAkJHNhbml0aXplVXJpKSB7XG5cbiAgICB2YXIgaHRtbFNhbml0aXplciA9IGZ1bmN0aW9uIGh0bWxTYW5pdGl6ZXIoaHRtbCkge1xuICAgICAgdGhyb3cgJHNjZU1pbkVycigndW5zYWZlJywgJ0F0dGVtcHRpbmcgdG8gdXNlIGFuIHVuc2FmZSB2YWx1ZSBpbiBhIHNhZmUgY29udGV4dC4nKTtcbiAgICB9O1xuXG4gICAgaWYgKCRpbmplY3Rvci5oYXMoJyRzYW5pdGl6ZScpKSB7XG4gICAgICBodG1sU2FuaXRpemVyID0gJGluamVjdG9yLmdldCgnJHNhbml0aXplJyk7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBtYXRjaFVybChtYXRjaGVyLCBwYXJzZWRVcmwpIHtcbiAgICAgIGlmIChtYXRjaGVyID09PSAnc2VsZicpIHtcbiAgICAgICAgcmV0dXJuIHVybElzU2FtZU9yaWdpbihwYXJzZWRVcmwpIHx8IHVybElzU2FtZU9yaWdpbkFzQmFzZVVybChwYXJzZWRVcmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZGVmaW5pdGVseSBhIHJlZ2V4LiAgU2VlIGFkanVzdE1hdGNoZXJzKClcbiAgICAgICAgcmV0dXJuICEhbWF0Y2hlci5leGVjKHBhcnNlZFVybC5ocmVmKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1Jlc291cmNlVXJsQWxsb3dlZEJ5UG9saWN5KHVybCkge1xuICAgICAgdmFyIHBhcnNlZFVybCA9IHVybFJlc29sdmUodXJsLnRvU3RyaW5nKCkpO1xuICAgICAgdmFyIGksIG4sIGFsbG93ZWQgPSBmYWxzZTtcbiAgICAgIC8vIEVuc3VyZSB0aGF0IGF0IGxlYXN0IG9uZSBpdGVtIGZyb20gdGhlIHdoaXRlbGlzdCBhbGxvd3MgdGhpcyB1cmwuXG4gICAgICBmb3IgKGkgPSAwLCBuID0gcmVzb3VyY2VVcmxXaGl0ZWxpc3QubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGlmIChtYXRjaFVybChyZXNvdXJjZVVybFdoaXRlbGlzdFtpXSwgcGFyc2VkVXJsKSkge1xuICAgICAgICAgIGFsbG93ZWQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYWxsb3dlZCkge1xuICAgICAgICAvLyBFbnN1cmUgdGhhdCBubyBpdGVtIGZyb20gdGhlIGJsYWNrbGlzdCBibG9ja2VkIHRoaXMgdXJsLlxuICAgICAgICBmb3IgKGkgPSAwLCBuID0gcmVzb3VyY2VVcmxCbGFja2xpc3QubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgaWYgKG1hdGNoVXJsKHJlc291cmNlVXJsQmxhY2tsaXN0W2ldLCBwYXJzZWRVcmwpKSB7XG4gICAgICAgICAgICBhbGxvd2VkID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBhbGxvd2VkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlSG9sZGVyVHlwZShCYXNlKSB7XG4gICAgICB2YXIgaG9sZGVyVHlwZSA9IGZ1bmN0aW9uIFRydXN0ZWRWYWx1ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlKSB7XG4gICAgICAgIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1c3RlZFZhbHVlO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIGlmIChCYXNlKSB7XG4gICAgICAgIGhvbGRlclR5cGUucHJvdG90eXBlID0gbmV3IEJhc2UoKTtcbiAgICAgIH1cbiAgICAgIGhvbGRlclR5cGUucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbiBzY2VWYWx1ZU9mKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpO1xuICAgICAgfTtcbiAgICAgIGhvbGRlclR5cGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gc2NlVG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCkudG9TdHJpbmcoKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gaG9sZGVyVHlwZTtcbiAgICB9XG5cbiAgICB2YXIgdHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSA9IGdlbmVyYXRlSG9sZGVyVHlwZSgpLFxuICAgICAgICBieVR5cGUgPSB7fTtcblxuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuSFRNTF0gPSBnZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7XG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5DU1NdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuTUVESUFfVVJMXSA9IGdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLlVSTF0gPSBnZW5lcmF0ZUhvbGRlclR5cGUoYnlUeXBlW1NDRV9DT05URVhUUy5NRURJQV9VUkxdKTtcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLkpTXSA9IGdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLlJFU09VUkNFX1VSTF0gPSBnZW5lcmF0ZUhvbGRlclR5cGUoYnlUeXBlW1NDRV9DT05URVhUUy5VUkxdKTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlRGVsZWdhdGUjdHJ1c3RBc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogUmV0dXJucyBhIHRydXN0ZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIHBhcmFtZXRlciBmb3IgdGhlIHNwZWNpZmllZCBjb250ZXh0LiBUaGlzIHRydXN0ZWRcbiAgICAgKiBvYmplY3Qgd2lsbCBsYXRlciBvbiBiZSB1c2VkIGFzLWlzLCB3aXRob3V0IGFueSBzZWN1cml0eSBjaGVjaywgYnkgYmluZGluZ3Mgb3IgZGlyZWN0aXZlc1xuICAgICAqIHRoYXQgcmVxdWlyZSB0aGlzIHNlY3VyaXR5IGNvbnRleHQuXG4gICAgICogRm9yIGluc3RhbmNlLCBtYXJraW5nIGEgc3RyaW5nIGFzIHRydXN0ZWQgZm9yIHRoZSBgJHNjZS5IVE1MYCBjb250ZXh0IHdpbGwgZW50aXJlbHkgYnlwYXNzXG4gICAgICogdGhlIHBvdGVudGlhbCBgJHNhbml0aXplYCBjYWxsIGluIGNvcnJlc3BvbmRpbmcgYCRzY2UuSFRNTGAgYmluZGluZ3Mgb3IgZGlyZWN0aXZlcywgc3VjaCBhc1xuICAgICAqIGBuZy1iaW5kLWh0bWxgLiBOb3RlIHRoYXQgaW4gbW9zdCBjYXNlcyB5b3Ugd29uJ3QgbmVlZCB0byBjYWxsIHRoaXMgZnVuY3Rpb246IGlmIHlvdSBoYXZlIHRoZVxuICAgICAqIHNhbml0aXplciBsb2FkZWQsIHBhc3NpbmcgdGhlIHZhbHVlIGl0c2VsZiB3aWxsIHJlbmRlciBhbGwgdGhlIEhUTUwgdGhhdCBkb2VzIG5vdCBwb3NlIGFcbiAgICAgKiBzZWN1cml0eSByaXNrLlxuICAgICAqXG4gICAgICogU2VlIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBnZXRUcnVzdGVkfSBmb3IgdGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBjb25zdW1lIHRob3NlXG4gICAgICogdHJ1c3RlZCB2YWx1ZXMsIGFuZCB7QGxpbmsgbmcuJHNjZSAkc2NlfSBmb3IgZ2VuZXJhbCBkb2N1bWVudGF0aW9uIGFib3V0IHN0cmljdCBjb250ZXh0dWFsXG4gICAgICogZXNjYXBpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHNhZmUgZm9yIHVzZSwgZS5nLiBgJHNjZS5VUkxgLFxuICAgICAqICAgICBgJHNjZS5SRVNPVVJDRV9VUkxgLCBgJHNjZS5IVE1MYCwgYCRzY2UuSlNgIG9yIGAkc2NlLkNTU2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0aGF0IHNob3VsZCBiZSBjb25zaWRlcmVkIHRydXN0ZWQuXG4gICAgICogQHJldHVybiB7Kn0gQSB0cnVzdGVkIHJlcHJlc2VudGF0aW9uIG9mIHZhbHVlLCB0aGF0IGNhbiBiZSB1c2VkIGluIHRoZSBnaXZlbiBjb250ZXh0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRydXN0QXModHlwZSwgdHJ1c3RlZFZhbHVlKSB7XG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSAoYnlUeXBlLmhhc093blByb3BlcnR5KHR5cGUpID8gYnlUeXBlW3R5cGVdIDogbnVsbCk7XG4gICAgICBpZiAoIUNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHRocm93ICRzY2VNaW5FcnIoJ2ljb250ZXh0JyxcbiAgICAgICAgICAgICdBdHRlbXB0ZWQgdG8gdHJ1c3QgYSB2YWx1ZSBpbiBpbnZhbGlkIGNvbnRleHQuIENvbnRleHQ6IHswfTsgVmFsdWU6IHsxfScsXG4gICAgICAgICAgICB0eXBlLCB0cnVzdGVkVmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKHRydXN0ZWRWYWx1ZSA9PT0gbnVsbCB8fCBpc1VuZGVmaW5lZCh0cnVzdGVkVmFsdWUpIHx8IHRydXN0ZWRWYWx1ZSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIHRydXN0ZWRWYWx1ZTtcbiAgICAgIH1cbiAgICAgIC8vIEFsbCB0aGUgY3VycmVudCBjb250ZXh0cyBpbiBTQ0VfQ09OVEVYVFMgaGFwcGVuIHRvIGJlIHN0cmluZ3MuICBJbiBvcmRlciB0byBhdm9pZCB0cnVzdGluZ1xuICAgICAgLy8gbXV0YWJsZSBvYmplY3RzLCB3ZSBlbnN1cmUgaGVyZSB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW4gaXMgYWN0dWFsbHkgYSBzdHJpbmcuXG4gICAgICBpZiAodHlwZW9mIHRydXN0ZWRWYWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaXR5cGUnLFxuICAgICAgICAgICAgJ0F0dGVtcHRlZCB0byB0cnVzdCBhIG5vbi1zdHJpbmcgdmFsdWUgaW4gYSBjb250ZW50IHJlcXVpcmluZyBhIHN0cmluZzogQ29udGV4dDogezB9JyxcbiAgICAgICAgICAgIHR5cGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0cnVzdGVkVmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlRGVsZWdhdGUjdmFsdWVPZlxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogSWYgdGhlIHBhc3NlZCBwYXJhbWV0ZXIgaGFkIGJlZW4gcmV0dXJuZWQgYnkgYSBwcmlvciBjYWxsIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBc1xuICAgICAqIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9LCByZXR1cm5zIHRoZSB2YWx1ZSB0aGF0IGhhZCBiZWVuIHBhc3NlZCB0byB7QGxpbmtcbiAgICAgKiBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfS5cbiAgICAgKlxuICAgICAqIElmIHRoZSBwYXNzZWQgcGFyYW1ldGVyIGlzIG5vdCBhIHZhbHVlIHRoYXQgaGFkIGJlZW4gcmV0dXJuZWQgYnkge0BsaW5rXG4gICAgICogbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0sIGl0IG11c3QgYmUgcmV0dXJuZWQgYXMtaXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSByZXN1bHQgb2YgYSBwcmlvciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH1cbiAgICAgKiAgICAgY2FsbCBvciBhbnl0aGluZyBlbHNlLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBgdmFsdWVgIHRoYXQgd2FzIG9yaWdpbmFsbHkgcHJvdmlkZWQgdG8ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzXG4gICAgICogICAgIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9IGlmIGB2YWx1ZWAgaXMgdGhlIHJlc3VsdCBvZiBzdWNoIGEgY2FsbC4gIE90aGVyd2lzZSwgcmV0dXJuc1xuICAgICAqICAgICBgdmFsdWVgIHVuY2hhbmdlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB2YWx1ZU9mKG1heWJlVHJ1c3RlZCkge1xuICAgICAgaWYgKG1heWJlVHJ1c3RlZCBpbnN0YW5jZW9mIHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpIHtcbiAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZC4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZURlbGVnYXRlI2dldFRydXN0ZWRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIEdpdmVuIGFuIG9iamVjdCBhbmQgYSBzZWN1cml0eSBjb250ZXh0IGluIHdoaWNoIHRvIGFzc2lnbiBpdCwgcmV0dXJucyBhIHZhbHVlIHRoYXQncyBzYWZlIHRvXG4gICAgICogdXNlIGluIHRoaXMgY29udGV4dCwgd2hpY2ggd2FzIHJlcHJlc2VudGVkIGJ5IHRoZSBwYXJhbWV0ZXIuIFRvIGRvIHNvLCB0aGlzIGZ1bmN0aW9uIGVpdGhlclxuICAgICAqIHVud3JhcHMgdGhlIHNhZmUgdHlwZSBpdCBoYXMgYmVlbiBnaXZlbiAoZm9yIGluc3RhbmNlLCBhIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBc1xuICAgICAqIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9IHJlc3VsdCksIG9yIGl0IG1pZ2h0IHRyeSB0byBzYW5pdGl6ZSB0aGUgdmFsdWUgZ2l2ZW4sIGRlcGVuZGluZyBvblxuICAgICAqIHRoZSBjb250ZXh0IGFuZCBzYW5pdGl6ZXIgYXZhaWxhYmxpbGl0eS5cbiAgICAgKlxuICAgICAqIFRoZSBjb250ZXh0cyB0aGF0IGNhbiBiZSBzYW5pdGl6ZWQgYXJlICRzY2UuTUVESUFfVVJMLCAkc2NlLlVSTCBhbmQgJHNjZS5IVE1MLiBUaGUgZmlyc3QgdHdvIGFyZSBhdmFpbGFibGVcbiAgICAgKiBieSBkZWZhdWx0LCBhbmQgdGhlIHRoaXJkIG9uZSByZWxpZXMgb24gdGhlIGAkc2FuaXRpemVgIHNlcnZpY2UgKHdoaWNoIG1heSBiZSBsb2FkZWQgdGhyb3VnaFxuICAgICAqIHRoZSBgbmdTYW5pdGl6ZWAgbW9kdWxlKS4gRnVydGhlcm1vcmUsIGZvciAkc2NlLlJFU09VUkNFX1VSTCBjb250ZXh0LCBhIHBsYWluIHN0cmluZyBtYXkgYmVcbiAgICAgKiBhY2NlcHRlZCBpZiB0aGUgcmVzb3VyY2UgdXJsIHBvbGljeSBkZWZpbmVkIGJ5IHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdFxuICAgICAqIGAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdGB9IGFuZCB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3RcbiAgICAgKiBgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3RgfSBhY2NlcHRzIHRoYXQgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgaWYgdGhlIHNhZmUgdHlwZSBpc24ndCBhcHByb3ByaWF0ZSBmb3IgdGhpcyBjb250ZXh0LCBvciBpZiB0aGVcbiAgICAgKiB2YWx1ZSBnaXZlbiBjYW5ub3QgYmUgYWNjZXB0ZWQgaW4gdGhlIGNvbnRleHQgKHdoaWNoIG1pZ2h0IGJlIGNhdXNlZCBieSBzYW5pdGl6YXRpb24gbm90XG4gICAgICogYmVpbmcgYXZhaWxhYmxlLCBvciB0aGUgdmFsdWUgbm90IGJlaW5nIHJlY29nbml6ZWQgYXMgc2FmZSkuXG4gICAgICpcbiAgICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gICAgICogRGlzYWJsaW5nIGF1dG8tZXNjYXBpbmcgaXMgZXh0cmVtZWx5IGRhbmdlcm91cywgaXQgdXN1YWxseSBjcmVhdGVzIGEgQ3Jvc3MgU2l0ZSBTY3JpcHRpbmdcbiAgICAgKiAoWFNTKSB2dWxuZXJhYmlsaXR5IGluIHlvdXIgYXBwbGljYXRpb24uXG4gICAgICogPC9kaXY+XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHRvIGJlIHVzZWQgKHN1Y2ggYXMgYCRzY2UuSFRNTGApLlxuICAgICAqIEBwYXJhbSB7Kn0gbWF5YmVUcnVzdGVkIFRoZSByZXN1bHQgb2YgYSBwcmlvciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXNcbiAgICAgKiAgICAgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0gY2FsbCwgb3IgYW55dGhpbmcgZWxzZSAod2hpY2ggd2lsbCBub3QgYmUgY29uc2lkZXJlZCB0cnVzdGVkLilcbiAgICAgKiBAcmV0dXJuIHsqfSBBIHZlcnNpb24gb2YgdGhlIHZhbHVlIHRoYXQncyBzYWZlIHRvIHVzZSBpbiB0aGUgZ2l2ZW4gY29udGV4dCwgb3IgdGhyb3dzIGFuXG4gICAgICogICAgIGV4Y2VwdGlvbiBpZiB0aGlzIGlzIGltcG9zc2libGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0VHJ1c3RlZCh0eXBlLCBtYXliZVRydXN0ZWQpIHtcbiAgICAgIGlmIChtYXliZVRydXN0ZWQgPT09IG51bGwgfHwgaXNVbmRlZmluZWQobWF5YmVUcnVzdGVkKSB8fCBtYXliZVRydXN0ZWQgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQ7XG4gICAgICB9XG4gICAgICB2YXIgY29uc3RydWN0b3IgPSAoYnlUeXBlLmhhc093blByb3BlcnR5KHR5cGUpID8gYnlUeXBlW3R5cGVdIDogbnVsbCk7XG4gICAgICAvLyBJZiBtYXliZVRydXN0ZWQgaXMgYSB0cnVzdGVkIGNsYXNzIGluc3RhbmNlIG9yIHN1YmNsYXNzIGluc3RhbmNlLCB0aGVuIHVud3JhcCBhbmQgcmV0dXJuXG4gICAgICAvLyBhcy1pcy5cbiAgICAgIGlmIChjb25zdHJ1Y3RvciAmJiBtYXliZVRydXN0ZWQgaW5zdGFuY2VvZiBjb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG1heWJlVHJ1c3RlZCBpcyBhIHRydXN0ZWQgY2xhc3MgaW5zdGFuY2UgYnV0IG5vdCBvZiB0aGUgY29ycmVjdCB0cnVzdGVkIHR5cGVcbiAgICAgIC8vIHRoZW4gdW53cmFwIGl0IGFuZCBhbGxvdyBpdCB0byBwYXNzIHRocm91Z2ggdG8gdGhlIHJlc3Qgb2YgdGhlIGNoZWNrc1xuICAgICAgaWYgKGlzRnVuY3Rpb24obWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKSkge1xuICAgICAgICBtYXliZVRydXN0ZWQgPSBtYXliZVRydXN0ZWQuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgZ2V0IGhlcmUsIHRoZW4gd2Ugd2lsbCBlaXRoZXIgc2FuaXRpemUgdGhlIHZhbHVlIG9yIHRocm93IGFuIGV4Y2VwdGlvbi5cbiAgICAgIGlmICh0eXBlID09PSBTQ0VfQ09OVEVYVFMuTUVESUFfVVJMIHx8IHR5cGUgPT09IFNDRV9DT05URVhUUy5VUkwpIHtcbiAgICAgICAgLy8gd2UgYXR0ZW1wdCB0byBzYW5pdGl6ZSBub24tcmVzb3VyY2UgVVJMc1xuICAgICAgICByZXR1cm4gJCRzYW5pdGl6ZVVyaShtYXliZVRydXN0ZWQsIHR5cGUgPT09IFNDRV9DT05URVhUUy5NRURJQV9VUkwpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBTQ0VfQ09OVEVYVFMuUkVTT1VSQ0VfVVJMKSB7XG4gICAgICAgIGlmIChpc1Jlc291cmNlVXJsQWxsb3dlZEJ5UG9saWN5KG1heWJlVHJ1c3RlZCkpIHtcbiAgICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93ICRzY2VNaW5FcnIoJ2luc2VjdXJsJyxcbiAgICAgICAgICAgICAgJ0Jsb2NrZWQgbG9hZGluZyByZXNvdXJjZSBmcm9tIHVybCBub3QgYWxsb3dlZCBieSAkc2NlRGVsZWdhdGUgcG9saWN5LiAgVVJMOiB7MH0nLFxuICAgICAgICAgICAgICBtYXliZVRydXN0ZWQudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gU0NFX0NPTlRFWFRTLkhUTUwpIHtcbiAgICAgICAgLy8gaHRtbFNhbml0aXplciB0aHJvd3MgaXRzIG93biBlcnJvciB3aGVuIG5vIHNhbml0aXplciBpcyBhdmFpbGFibGUuXG4gICAgICAgIHJldHVybiBodG1sU2FuaXRpemVyKG1heWJlVHJ1c3RlZCk7XG4gICAgICB9XG4gICAgICAvLyBEZWZhdWx0IGVycm9yIHdoZW4gdGhlICRzY2Ugc2VydmljZSBoYXMgbm8gd2F5IHRvIG1ha2UgdGhlIGlucHV0IHNhZmUuXG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCd1bnNhZmUnLCAnQXR0ZW1wdGluZyB0byB1c2UgYW4gdW5zYWZlIHZhbHVlIGluIGEgc2FmZSBjb250ZXh0LicpO1xuICAgIH1cblxuICAgIHJldHVybiB7IHRydXN0QXM6IHRydXN0QXMsXG4gICAgICAgICAgICAgZ2V0VHJ1c3RlZDogZ2V0VHJ1c3RlZCxcbiAgICAgICAgICAgICB2YWx1ZU9mOiB2YWx1ZU9mIH07XG4gIH1dO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkc2NlUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVGhlICRzY2VQcm92aWRlciBwcm92aWRlciBhbGxvd3MgZGV2ZWxvcGVycyB0byBjb25maWd1cmUgdGhlIHtAbGluayBuZy4kc2NlICRzY2V9IHNlcnZpY2UuXG4gKiAtICAgZW5hYmxlL2Rpc2FibGUgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSkgaW4gYSBtb2R1bGVcbiAqIC0gICBvdmVycmlkZSB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB3aXRoIGEgY3VzdG9tIGRlbGVnYXRlXG4gKlxuICogUmVhZCBtb3JlIGFib3V0IHtAbGluayBuZy4kc2NlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkc2NlXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIGAkc2NlYCBpcyBhIHNlcnZpY2UgdGhhdCBwcm92aWRlcyBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBzZXJ2aWNlcyB0byBBbmd1bGFySlMuXG4gKlxuICogIyMgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmdcbiAqXG4gKiBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKSBpcyBhIG1vZGUgaW4gd2hpY2ggQW5ndWxhckpTIGNvbnN0cmFpbnMgYmluZGluZ3MgdG8gb25seSByZW5kZXJcbiAqIHRydXN0ZWQgdmFsdWVzLiBJdHMgZ29hbCBpcyB0byBhc3Npc3QgaW4gd3JpdGluZyBjb2RlIGluIGEgd2F5IHRoYXQgKGEpIGlzIHNlY3VyZSBieSBkZWZhdWx0LCBhbmRcbiAqIChiKSBtYWtlcyBhdWRpdGluZyBmb3Igc2VjdXJpdHkgdnVsbmVyYWJpbGl0aWVzIHN1Y2ggYXMgWFNTLCBjbGlja2phY2tpbmcsIGV0Yy4gYSBsb3QgZWFzaWVyLlxuICpcbiAqICMjIyBPdmVydmlld1xuICpcbiAqIFRvIHN5c3RlbWF0aWNhbGx5IGJsb2NrIFhTUyBzZWN1cml0eSBidWdzLCBBbmd1bGFySlMgdHJlYXRzIGFsbCB2YWx1ZXMgYXMgdW50cnVzdGVkIGJ5IGRlZmF1bHQgaW5cbiAqIEhUTUwgb3Igc2Vuc2l0aXZlIFVSTCBiaW5kaW5ncy4gV2hlbiBiaW5kaW5nIHVudHJ1c3RlZCB2YWx1ZXMsIEFuZ3VsYXJKUyB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIHJ1biBzZWN1cml0eSBjaGVja3Mgb24gdGhlbSAoc2FuaXRpemF0aW9ucywgd2hpdGVsaXN0cywgZGVwZW5kaW5nIG9uIGNvbnRleHQpLCBvciB0aHJvdyB3aGVuIGl0XG4gKiBjYW5ub3QgZ3VhcmFudGVlIHRoZSBzZWN1cml0eSBvZiB0aGUgcmVzdWx0LiBUaGF0IGJlaGF2aW9yIGRlcGVuZHMgc3Ryb25nbHkgb24gY29udGV4dHM6IEhUTUxcbiAqIGNhbiBiZSBzYW5pdGl6ZWQsIGJ1dCB0ZW1wbGF0ZSBVUkxzIGNhbm5vdCwgZm9yIGluc3RhbmNlLlxuICpcbiAqIFRvIGlsbHVzdHJhdGUgdGhpcywgY29uc2lkZXIgdGhlIGBuZy1iaW5kLWh0bWxgIGRpcmVjdGl2ZS4gSXQgcmVuZGVycyBpdHMgdmFsdWUgZGlyZWN0bHkgYXMgSFRNTDpcbiAqIHdlIGNhbGwgdGhhdCB0aGUgKmNvbnRleHQqLiBXaGVuIGdpdmVuIGFuIHVudHJ1c3RlZCBpbnB1dCwgQW5ndWxhckpTIHdpbGwgYXR0ZW1wdCB0byBzYW5pdGl6ZSBpdFxuICogYmVmb3JlIHJlbmRlcmluZyBpZiBhIHNhbml0aXplciBpcyBhdmFpbGFibGUsIGFuZCB0aHJvdyBvdGhlcndpc2UuIFRvIGJ5cGFzcyBzYW5pdGl6YXRpb24gYW5kXG4gKiByZW5kZXIgdGhlIGlucHV0IGFzLWlzLCB5b3Ugd2lsbCBuZWVkIHRvIG1hcmsgaXQgYXMgdHJ1c3RlZCBmb3IgdGhhdCBjb250ZXh0IGJlZm9yZSBhdHRlbXB0aW5nXG4gKiB0byBiaW5kIGl0LlxuICpcbiAqIEFzIG9mIHZlcnNpb24gMS4yLCBBbmd1bGFySlMgc2hpcHMgd2l0aCBTQ0UgZW5hYmxlZCBieSBkZWZhdWx0LlxuICpcbiAqICMjIyBJbiBwcmFjdGljZVxuICpcbiAqIEhlcmUncyBhbiBleGFtcGxlIG9mIGEgYmluZGluZyBpbiBhIHByaXZpbGVnZWQgY29udGV4dDpcbiAqXG4gKiBgYGBcbiAqIDxpbnB1dCBuZy1tb2RlbD1cInVzZXJIdG1sXCIgYXJpYS1sYWJlbD1cIlVzZXIgaW5wdXRcIj5cbiAqIDxkaXYgbmctYmluZC1odG1sPVwidXNlckh0bWxcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIE5vdGljZSB0aGF0IGBuZy1iaW5kLWh0bWxgIGlzIGJvdW5kIHRvIGB1c2VySHRtbGAgY29udHJvbGxlZCBieSB0aGUgdXNlci4gIFdpdGggU0NFXG4gKiBkaXNhYmxlZCwgdGhpcyBhcHBsaWNhdGlvbiBhbGxvd3MgdGhlIHVzZXIgdG8gcmVuZGVyIGFyYml0cmFyeSBIVE1MIGludG8gdGhlIERJViwgd2hpY2ggd291bGRcbiAqIGJlIGFuIFhTUyBzZWN1cml0eSBidWcuIEluIGEgbW9yZSByZWFsaXN0aWMgZXhhbXBsZSwgb25lIG1heSBiZSByZW5kZXJpbmcgdXNlciBjb21tZW50cywgYmxvZ1xuICogYXJ0aWNsZXMsIGV0Yy4gdmlhIGJpbmRpbmdzLiAoSFRNTCBpcyBqdXN0IG9uZSBleGFtcGxlIG9mIGEgY29udGV4dCB3aGVyZSByZW5kZXJpbmcgdXNlclxuICogY29udHJvbGxlZCBpbnB1dCBjcmVhdGVzIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4pXG4gKlxuICogRm9yIHRoZSBjYXNlIG9mIEhUTUwsIHlvdSBtaWdodCB1c2UgYSBsaWJyYXJ5LCBlaXRoZXIgb24gdGhlIGNsaWVudCBzaWRlLCBvciBvbiB0aGUgc2VydmVyIHNpZGUsXG4gKiB0byBzYW5pdGl6ZSB1bnNhZmUgSFRNTCBiZWZvcmUgYmluZGluZyB0byB0aGUgdmFsdWUgYW5kIHJlbmRlcmluZyBpdCBpbiB0aGUgZG9jdW1lbnQuXG4gKlxuICogSG93IHdvdWxkIHlvdSBlbnN1cmUgdGhhdCBldmVyeSBwbGFjZSB0aGF0IHVzZWQgdGhlc2UgdHlwZXMgb2YgYmluZGluZ3Mgd2FzIGJvdW5kIHRvIGEgdmFsdWUgdGhhdFxuICogd2FzIHNhbml0aXplZCBieSB5b3VyIGxpYnJhcnkgKG9yIHJldHVybmVkIGFzIHNhZmUgZm9yIHJlbmRlcmluZyBieSB5b3VyIHNlcnZlcj8pICBIb3cgY2FuIHlvdVxuICogZW5zdXJlIHRoYXQgeW91IGRpZG4ndCBhY2NpZGVudGFsbHkgZGVsZXRlIHRoZSBsaW5lIHRoYXQgc2FuaXRpemVkIHRoZSB2YWx1ZSwgb3IgcmVuYW1lZCBzb21lXG4gKiBwcm9wZXJ0aWVzL2ZpZWxkcyBhbmQgZm9yZ290IHRvIHVwZGF0ZSB0aGUgYmluZGluZyB0byB0aGUgc2FuaXRpemVkIHZhbHVlP1xuICpcbiAqIFRvIGJlIHNlY3VyZSBieSBkZWZhdWx0LCBBbmd1bGFySlMgbWFrZXMgc3VyZSBiaW5kaW5ncyBnbyB0aHJvdWdoIHRoYXQgc2FuaXRpemF0aW9uLCBvclxuICogYW55IHNpbWlsYXIgdmFsaWRhdGlvbiBwcm9jZXNzLCB1bmxlc3MgdGhlcmUncyBhIGdvb2QgcmVhc29uIHRvIHRydXN0IHRoZSBnaXZlbiB2YWx1ZSBpbiB0aGlzXG4gKiBjb250ZXh0LiAgVGhhdCB0cnVzdCBpcyBmb3JtYWxpemVkIHdpdGggYSBmdW5jdGlvbiBjYWxsLiBUaGlzIG1lYW5zIHRoYXQgYXMgYSBkZXZlbG9wZXIsIHlvdVxuICogY2FuIGFzc3VtZSBhbGwgdW50cnVzdGVkIGJpbmRpbmdzIGFyZSBzYWZlLiBUaGVuLCB0byBhdWRpdCB5b3VyIGNvZGUgZm9yIGJpbmRpbmcgc2VjdXJpdHkgaXNzdWVzLFxuICogeW91IGp1c3QgbmVlZCB0byBlbnN1cmUgdGhlIHZhbHVlcyB5b3UgbWFyayBhcyB0cnVzdGVkIGluZGVlZCBhcmUgc2FmZSAtIGJlY2F1c2UgdGhleSB3ZXJlXG4gKiByZWNlaXZlZCBmcm9tIHlvdXIgc2VydmVyLCBzYW5pdGl6ZWQgYnkgeW91ciBsaWJyYXJ5LCBldGMuIFlvdSBjYW4gb3JnYW5pemUgeW91ciBjb2RlYmFzZSB0b1xuICogaGVscCB3aXRoIHRoaXMgLSBwZXJoYXBzIGFsbG93aW5nIG9ubHkgdGhlIGZpbGVzIGluIGEgc3BlY2lmaWMgZGlyZWN0b3J5IHRvIGRvIHRoaXMuXG4gKiBFbnN1cmluZyB0aGF0IHRoZSBpbnRlcm5hbCBBUEkgZXhwb3NlZCBieSB0aGF0IGNvZGUgZG9lc24ndCBtYXJrdXAgYXJiaXRyYXJ5IHZhbHVlcyBhcyBzYWZlIHRoZW5cbiAqIGJlY29tZXMgYSBtb3JlIG1hbmFnZWFibGUgdGFzay5cbiAqXG4gKiBJbiB0aGUgY2FzZSBvZiBBbmd1bGFySlMnIFNDRSBzZXJ2aWNlLCBvbmUgdXNlcyB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzICRzY2UudHJ1c3RBc31cbiAqIChhbmQgc2hvcnRoYW5kIG1ldGhvZHMgc3VjaCBhcyB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzSHRtbCAkc2NlLnRydXN0QXNIdG1sfSwgZXRjLikgdG9cbiAqIGJ1aWxkIHRoZSB0cnVzdGVkIHZlcnNpb25zIG9mIHlvdXIgdmFsdWVzLlxuICpcbiAqICMjIyBIb3cgZG9lcyBpdCB3b3JrP1xuICpcbiAqIEluIHByaXZpbGVnZWQgY29udGV4dHMsIGRpcmVjdGl2ZXMgYW5kIGNvZGUgd2lsbCBiaW5kIHRvIHRoZSByZXN1bHQgb2Yge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZFxuICogJHNjZS5nZXRUcnVzdGVkKGNvbnRleHQsIHZhbHVlKX0gcmF0aGVyIHRoYW4gdG8gdGhlIHZhbHVlIGRpcmVjdGx5LiAgVGhpbmsgb2YgdGhpcyBmdW5jdGlvbiBhc1xuICogYSB3YXkgdG8gZW5mb3JjZSB0aGUgcmVxdWlyZWQgc2VjdXJpdHkgY29udGV4dCBpbiB5b3VyIGRhdGEgc2luay4gRGlyZWN0aXZlcyB1c2Uge0BsaW5rXG4gKiBuZy4kc2NlI3BhcnNlQXMgJHNjZS5wYXJzZUFzfSByYXRoZXIgdGhhbiBgJHBhcnNlYCB0byB3YXRjaCBhdHRyaWJ1dGUgYmluZGluZ3MsIHdoaWNoIHBlcmZvcm1zXG4gKiB0aGUge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZCAkc2NlLmdldFRydXN0ZWR9IGJlaGluZCB0aGUgc2NlbmVzIG9uIG5vbi1jb25zdGFudCBsaXRlcmFscy4gQWxzbyxcbiAqIHdoZW4gYmluZGluZyB3aXRob3V0IGRpcmVjdGl2ZXMsIEFuZ3VsYXJKUyB3aWxsIHVuZGVyc3RhbmQgdGhlIGNvbnRleHQgb2YgeW91ciBiaW5kaW5nc1xuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBBcyBhbiBleGFtcGxlLCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQmluZEh0bWwgbmdCaW5kSHRtbH0gdXNlcyB7QGxpbmtcbiAqIG5nLiRzY2UjcGFyc2VBc0h0bWwgJHNjZS5wYXJzZUFzSHRtbChiaW5kaW5nIGV4cHJlc3Npb24pfS4gIEhlcmUncyB0aGUgYWN0dWFsIGNvZGUgKHNsaWdodGx5XG4gKiBzaW1wbGlmaWVkKTpcbiAqXG4gKiBgYGBcbiAqIHZhciBuZ0JpbmRIdG1sRGlyZWN0aXZlID0gWyckc2NlJywgZnVuY3Rpb24oJHNjZSkge1xuICogICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAqICAgICBzY29wZS4kd2F0Y2goJHNjZS5wYXJzZUFzSHRtbChhdHRyLm5nQmluZEh0bWwpLCBmdW5jdGlvbih2YWx1ZSkge1xuICogICAgICAgZWxlbWVudC5odG1sKHZhbHVlIHx8ICcnKTtcbiAqICAgICB9KTtcbiAqICAgfTtcbiAqIH1dO1xuICogYGBgXG4gKlxuICogIyMjIEltcGFjdCBvbiBsb2FkaW5nIHRlbXBsYXRlc1xuICpcbiAqIFRoaXMgYXBwbGllcyBib3RoIHRvIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSBgbmctaW5jbHVkZWB9IGRpcmVjdGl2ZSBhcyB3ZWxsIGFzXG4gKiBgdGVtcGxhdGVVcmxgJ3Mgc3BlY2lmaWVkIGJ5IHtAbGluayBndWlkZS9kaXJlY3RpdmUgZGlyZWN0aXZlc30uXG4gKlxuICogQnkgZGVmYXVsdCwgQW5ndWxhckpTIG9ubHkgbG9hZHMgdGVtcGxhdGVzIGZyb20gdGhlIHNhbWUgZG9tYWluIGFuZCBwcm90b2NvbCBhcyB0aGUgYXBwbGljYXRpb25cbiAqIGRvY3VtZW50LiAgVGhpcyBpcyBkb25lIGJ5IGNhbGxpbmcge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXG4gKiAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybH0gb24gdGhlIHRlbXBsYXRlIFVSTC4gIFRvIGxvYWQgdGVtcGxhdGVzIGZyb20gb3RoZXIgZG9tYWlucyBhbmQvb3JcbiAqIHByb3RvY29scywgeW91IG1heSBlaXRoZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0IHdoaXRlbGlzdFxuICogdGhlbX0gb3Ige0BsaW5rIG5nLiRzY2UjdHJ1c3RBc1Jlc291cmNlVXJsIHdyYXAgaXR9IGludG8gYSB0cnVzdGVkIHZhbHVlLlxuICpcbiAqICpQbGVhc2Ugbm90ZSo6XG4gKiBUaGUgYnJvd3NlcidzXG4gKiBbU2FtZSBPcmlnaW4gUG9saWN5XShodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Jyb3dzZXJzZWMvd2lraS9QYXJ0MiNTYW1lLW9yaWdpbl9wb2xpY3lfZm9yX1hNTEh0dHBSZXF1ZXN0KVxuICogYW5kIFtDcm9zcy1PcmlnaW4gUmVzb3VyY2UgU2hhcmluZyAoQ09SUyldKGh0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvKVxuICogcG9saWN5IGFwcGx5IGluIGFkZGl0aW9uIHRvIHRoaXMgYW5kIG1heSBmdXJ0aGVyIHJlc3RyaWN0IHdoZXRoZXIgdGhlIHRlbXBsYXRlIGlzIHN1Y2Nlc3NmdWxseVxuICogbG9hZGVkLiAgVGhpcyBtZWFucyB0aGF0IHdpdGhvdXQgdGhlIHJpZ2h0IENPUlMgcG9saWN5LCBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIGEgZGlmZmVyZW50IGRvbWFpblxuICogd29uJ3Qgd29yayBvbiBhbGwgYnJvd3NlcnMuICBBbHNvLCBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIGBmaWxlOi8vYCBVUkwgZG9lcyBub3Qgd29yayBvbiBzb21lXG4gKiBicm93c2Vycy5cbiAqXG4gKiAjIyMgVGhpcyBmZWVscyBsaWtlIHRvbyBtdWNoIG92ZXJoZWFkXG4gKlxuICogSXQncyBpbXBvcnRhbnQgdG8gcmVtZW1iZXIgdGhhdCBTQ0Ugb25seSBhcHBsaWVzIHRvIGludGVycG9sYXRpb24gZXhwcmVzc2lvbnMuXG4gKlxuICogSWYgeW91ciBleHByZXNzaW9ucyBhcmUgY29uc3RhbnQgbGl0ZXJhbHMsIHRoZXkncmUgYXV0b21hdGljYWxseSB0cnVzdGVkIGFuZCB5b3UgZG9uJ3QgbmVlZCB0b1xuICogY2FsbCBgJHNjZS50cnVzdEFzYCBvbiB0aGVtIChlLmcuXG4gKiBgPGRpdiBuZy1iaW5kLWh0bWw9XCInPGI+aW1wbGljaXRseSB0cnVzdGVkPC9iPidcIj48L2Rpdj5gKSBqdXN0IHdvcmtzIChyZW1lbWJlciB0byBpbmNsdWRlIHRoZVxuICogYG5nU2FuaXRpemVgIG1vZHVsZSkuIFRoZSBgJHNjZURlbGVnYXRlYCB3aWxsIGFsc28gdXNlIHRoZSBgJHNhbml0aXplYCBzZXJ2aWNlIGlmIGl0IGlzIGF2YWlsYWJsZVxuICogd2hlbiBiaW5kaW5nIHVudHJ1c3RlZCB2YWx1ZXMgdG8gYCRzY2UuSFRNTGAgY29udGV4dC5cbiAqIEFuZ3VsYXJKUyBwcm92aWRlcyBhbiBpbXBsZW1lbnRhdGlvbiBpbiBgYW5ndWxhci1zYW5pdGl6ZS5qc2AsIGFuZCBpZiB5b3VcbiAqIHdpc2ggdG8gdXNlIGl0LCB5b3Ugd2lsbCBhbHNvIG5lZWQgdG8gZGVwZW5kIG9uIHRoZSB7QGxpbmsgbmdTYW5pdGl6ZSBgbmdTYW5pdGl6ZWB9IG1vZHVsZSBpblxuICogeW91ciBhcHBsaWNhdGlvbi5cbiAqXG4gKiBUaGUgaW5jbHVkZWQge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSAkc2NlRGVsZWdhdGV9IGNvbWVzIHdpdGggc2FuZSBkZWZhdWx0cyB0byBhbGxvdyB5b3UgdG8gbG9hZFxuICogdGVtcGxhdGVzIGluIGBuZy1pbmNsdWRlYCBmcm9tIHlvdXIgYXBwbGljYXRpb24ncyBkb21haW4gd2l0aG91dCBoYXZpbmcgdG8gZXZlbiBrbm93IGFib3V0IFNDRS5cbiAqIEl0IGJsb2NrcyBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIG90aGVyIGRvbWFpbnMgb3IgbG9hZGluZyB0ZW1wbGF0ZXMgb3ZlciBodHRwIGZyb20gYW4gaHR0cHNcbiAqIHNlcnZlZCBkb2N1bWVudC4gIFlvdSBjYW4gY2hhbmdlIHRoZXNlIGJ5IHNldHRpbmcgeW91ciBvd24gY3VzdG9tIHtAbGlua1xuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0c30gYW5kIHtAbGlua1xuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgYmxhY2tsaXN0c30gZm9yIG1hdGNoaW5nIHN1Y2ggVVJMcy5cbiAqXG4gKiBUaGlzIHNpZ25pZmljYW50bHkgcmVkdWNlcyB0aGUgb3ZlcmhlYWQuICBJdCBpcyBmYXIgZWFzaWVyIHRvIHBheSB0aGUgc21hbGwgb3ZlcmhlYWQgYW5kIGhhdmUgYW5cbiAqIGFwcGxpY2F0aW9uIHRoYXQncyBzZWN1cmUgYW5kIGNhbiBiZSBhdWRpdGVkIHRvIHZlcmlmeSB0aGF0IHdpdGggbXVjaCBtb3JlIGVhc2UgdGhhbiBib2x0aW5nXG4gKiBzZWN1cml0eSBvbnRvIGFuIGFwcGxpY2F0aW9uIGxhdGVyLlxuICpcbiAqIDxhIG5hbWU9XCJjb250ZXh0c1wiPjwvYT5cbiAqICMjIyBXaGF0IHRydXN0ZWQgY29udGV4dCB0eXBlcyBhcmUgc3VwcG9ydGVkP1xuICpcbiAqIHwgQ29udGV4dCAgICAgICAgICAgICB8IE5vdGVzICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgYCRzY2UuSFRNTGAgICAgICAgICB8IEZvciBIVE1MIHRoYXQncyBzYWZlIHRvIHNvdXJjZSBpbnRvIHRoZSBhcHBsaWNhdGlvbi4gIFRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQmluZEh0bWwgbmdCaW5kSHRtbH0gZGlyZWN0aXZlIHVzZXMgdGhpcyBjb250ZXh0IGZvciBiaW5kaW5ncy4gSWYgYW4gdW5zYWZlIHZhbHVlIGlzIGVuY291bnRlcmVkIGFuZCB0aGUge0BsaW5rIG5nU2FuaXRpemUgJHNhbml0aXplfSBtb2R1bGUgaXMgcHJlc2VudCB0aGlzIHdpbGwgc2FuaXRpemUgdGhlIHZhbHVlIGluc3RlYWQgb2YgdGhyb3dpbmcgYW4gZXJyb3IuIHxcbiAqIHwgYCRzY2UuQ1NTYCAgICAgICAgICB8IEZvciBDU1MgdGhhdCdzIHNhZmUgdG8gc291cmNlIGludG8gdGhlIGFwcGxpY2F0aW9uLiAgQ3VycmVudGx5IHVudXNlZC4gIEZlZWwgZnJlZSB0byB1c2UgaXQgaW4geW91ciBvd24gZGlyZWN0aXZlcy4gfFxuICogfCBgJHNjZS5NRURJQV9VUkxgICAgIHwgRm9yIFVSTHMgdGhhdCBhcmUgc2FmZSB0byByZW5kZXIgYXMgbWVkaWEuIElzIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIGZyb20gc3RyaW5nIGJ5IHNhbml0aXppbmcgd2hlbiBuZWVkZWQuIHxcbiAqIHwgYCRzY2UuVVJMYCAgICAgICAgICB8IEZvciBVUkxzIHRoYXQgYXJlIHNhZmUgdG8gZm9sbG93IGFzIGxpbmtzLiBJcyBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCBmcm9tIHN0cmluZyBieSBzYW5pdGl6aW5nIHdoZW4gbmVlZGVkLiBOb3RlIHRoYXQgYCRzY2UuVVJMYCBtYWtlcyBhIHN0cm9uZ2VyIHN0YXRlbWVudCBhYm91dCB0aGUgVVJMIHRoYW4gYCRzY2UuTUVESUFfVVJMYCBkb2VzIGFuZCB0aGVyZWZvcmUgY29udGV4dHMgcmVxdWlyaW5nIHZhbHVlcyB0cnVzdGVkIGZvciBgJHNjZS5VUkxgIGNhbiBiZSB1c2VkIGFueXdoZXJlIHRoYXQgdmFsdWVzIHRydXN0ZWQgZm9yIGAkc2NlLk1FRElBX1VSTGAgYXJlIHJlcXVpcmVkLnxcbiAqIHwgYCRzY2UuUkVTT1VSQ0VfVVJMYCB8IEZvciBVUkxzIHRoYXQgYXJlIG5vdCBvbmx5IHNhZmUgdG8gZm9sbG93IGFzIGxpbmtzLCBidXQgd2hvc2UgY29udGVudHMgYXJlIGFsc28gc2FmZSB0byBpbmNsdWRlIGluIHlvdXIgYXBwbGljYXRpb24uICBFeGFtcGxlcyBpbmNsdWRlIGBuZy1pbmNsdWRlYCwgYHNyY2AgLyBgbmdTcmNgIGJpbmRpbmdzIGZvciB0YWdzIG90aGVyIHRoYW4gYElNR2AgKGUuZy4gYElGUkFNRWAsIGBPQkpFQ1RgLCBldGMuKSAgPGJyPjxicj5Ob3RlIHRoYXQgYCRzY2UuUkVTT1VSQ0VfVVJMYCBtYWtlcyBhIHN0cm9uZ2VyIHN0YXRlbWVudCBhYm91dCB0aGUgVVJMIHRoYW4gYCRzY2UuVVJMYCBvciBgJHNjZS5NRURJQV9VUkxgIGRvIGFuZCB0aGVyZWZvcmUgY29udGV4dHMgcmVxdWlyaW5nIHZhbHVlcyB0cnVzdGVkIGZvciBgJHNjZS5SRVNPVVJDRV9VUkxgIGNhbiBiZSB1c2VkIGFueXdoZXJlIHRoYXQgdmFsdWVzIHRydXN0ZWQgZm9yIGAkc2NlLlVSTGAgb3IgYCRzY2UuTUVESUFfVVJMYCBhcmUgcmVxdWlyZWQuIHxcbiAqIHwgYCRzY2UuSlNgICAgICAgICAgICB8IEZvciBKYXZhU2NyaXB0IHRoYXQgaXMgc2FmZSB0byBleGVjdXRlIGluIHlvdXIgYXBwbGljYXRpb24ncyBjb250ZXh0LiAgQ3VycmVudGx5IHVudXNlZC4gIEZlZWwgZnJlZSB0byB1c2UgaXQgaW4geW91ciBvd24gZGlyZWN0aXZlcy4gfFxuICpcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogQmUgYXdhcmUgdGhhdCwgYmVmb3JlIEFuZ3VsYXJKUyAxLjcuMCwgYGFbaHJlZl1gIGFuZCBgaW1nW3NyY11gIHVzZWQgdG8gc2FuaXRpemUgdGhlaXJcbiAqIGludGVycG9sYXRlZCB2YWx1ZXMgZGlyZWN0bHkgcmF0aGVyIHRoYW4gcmVseSB1cG9uIHtAbGluayBuZy4kc2NlI2dldFRydXN0ZWQgYCRzY2UuZ2V0VHJ1c3RlZGB9LlxuICpcbiAqICoqQXMgb2YgMS43LjAsIHRoaXMgaXMgbm8gbG9uZ2VyIHRoZSBjYXNlLioqXG4gKlxuICogTm93IHN1Y2ggaW50ZXJwb2xhdGlvbnMgYXJlIG1hcmtlZCBhcyByZXF1aXJpbmcgYCRzY2UuVVJMYCAoZm9yIGBhW2hyZWZdYCkgb3IgYCRzY2UuTUVESUFfVVJMYFxuICogKGZvciBgaW1nW3NyY11gKSwgc28gdGhhdCB0aGUgc2FuaXRpemF0aW9uIGhhcHBlbnMgKHZpYSBgJHNjZS5nZXRUcnVzdGVkLi4uYCkgd2hlbiB0aGUgYCRpbnRlcnBvbGF0ZWBcbiAqIHNlcnZpY2UgZXZhbHVhdGVzIHRoZSBleHByZXNzaW9ucy5cbiAqIDwvZGl2PlxuICpcbiAqIFRoZXJlIGFyZSBubyBDU1Mgb3IgSlMgY29udGV4dCBiaW5kaW5ncyBpbiBBbmd1bGFySlMgY3VycmVudGx5LCBzbyB0aGVpciBjb3JyZXNwb25kaW5nIGAkc2NlLnRydXN0QXNgXG4gKiBmdW5jdGlvbnMgYXJlbid0IHVzZWZ1bCB5ZXQuIFRoaXMgbWlnaHQgZXZvbHZlLlxuICpcbiAqICMjIyBGb3JtYXQgb2YgaXRlbXMgaW4ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0IHJlc291cmNlVXJsV2hpdGVsaXN0fS97QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgQmxhY2tsaXN0fSA8YSBuYW1lPVwicmVzb3VyY2VVcmxQYXR0ZXJuSXRlbVwiPjwvYT5cbiAqXG4gKiAgRWFjaCBlbGVtZW50IGluIHRoZXNlIGFycmF5cyBtdXN0IGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nOlxuICpcbiAqICAtICoqJ3NlbGYnKipcbiAqICAgIC0gVGhlIHNwZWNpYWwgKipzdHJpbmcqKiwgYCdzZWxmJ2AsIGNhbiBiZSB1c2VkIHRvIG1hdGNoIGFnYWluc3QgYWxsIFVSTHMgb2YgdGhlICoqc2FtZVxuICogICAgICBkb21haW4qKiBhcyB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQgdXNpbmcgdGhlICoqc2FtZSBwcm90b2NvbCoqLlxuICogIC0gKipTdHJpbmcqKiAoZXhjZXB0IHRoZSBzcGVjaWFsIHZhbHVlIGAnc2VsZidgKVxuICogICAgLSBUaGUgc3RyaW5nIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgZnVsbCAqbm9ybWFsaXplZCAvIGFic29sdXRlIFVSTCogb2YgdGhlIHJlc291cmNlXG4gKiAgICAgIGJlaW5nIHRlc3RlZCAoc3Vic3RyaW5nIG1hdGNoZXMgYXJlIG5vdCBnb29kIGVub3VnaC4pXG4gKiAgICAtIFRoZXJlIGFyZSBleGFjdGx5ICoqdHdvIHdpbGRjYXJkIHNlcXVlbmNlcyoqIC0gYCpgIGFuZCBgKipgLiAgQWxsIG90aGVyIGNoYXJhY3RlcnNcbiAqICAgICAgbWF0Y2ggdGhlbXNlbHZlcy5cbiAqICAgIC0gYCpgOiBtYXRjaGVzIHplcm8gb3IgbW9yZSBvY2N1cnJlbmNlcyBvZiBhbnkgY2hhcmFjdGVyIG90aGVyIHRoYW4gb25lIG9mIHRoZSBmb2xsb3dpbmcgNlxuICogICAgICBjaGFyYWN0ZXJzOiAnYDpgJywgJ2AvYCcsICdgLmAnLCAnYD9gJywgJ2AmYCcgYW5kICdgO2AnLiAgSXQncyBhIHVzZWZ1bCB3aWxkY2FyZCBmb3IgdXNlXG4gKiAgICAgIGluIGEgd2hpdGVsaXN0LlxuICogICAgLSBgKipgOiBtYXRjaGVzIHplcm8gb3IgbW9yZSBvY2N1cnJlbmNlcyBvZiAqYW55KiBjaGFyYWN0ZXIuICBBcyBzdWNoLCBpdCdzIG5vdFxuICogICAgICBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIGEgc2NoZW1lLCBkb21haW4sIGV0Yy4gYXMgaXQgd291bGQgbWF0Y2ggdG9vIG11Y2guICAoZS5nLlxuICogICAgICBodHRwOi8vKiouZXhhbXBsZS5jb20vIHdvdWxkIG1hdGNoIGh0dHA6Ly9ldmlsLmNvbS8/aWdub3JlPS5leGFtcGxlLmNvbS8gYW5kIHRoYXQgbWlnaHRcbiAqICAgICAgbm90IGhhdmUgYmVlbiB0aGUgaW50ZW50aW9uLikgIEl0cyB1c2FnZSBhdCB0aGUgdmVyeSBlbmQgb2YgdGhlIHBhdGggaXMgb2suICAoZS5nLlxuICogICAgICBodHRwOi8vZm9vLmV4YW1wbGUuY29tL3RlbXBsYXRlcy8qKikuXG4gKiAgLSAqKlJlZ0V4cCoqICgqc2VlIGNhdmVhdCBiZWxvdyopXG4gKiAgICAtICpDYXZlYXQqOiAgV2hpbGUgcmVndWxhciBleHByZXNzaW9ucyBhcmUgcG93ZXJmdWwgYW5kIG9mZmVyIGdyZWF0IGZsZXhpYmlsaXR5LCAgdGhlaXIgc3ludGF4XG4gKiAgICAgIChhbmQgYWxsIHRoZSBpbmV2aXRhYmxlIGVzY2FwaW5nKSBtYWtlcyB0aGVtICpoYXJkZXIgdG8gbWFpbnRhaW4qLiAgSXQncyBlYXN5IHRvXG4gKiAgICAgIGFjY2lkZW50YWxseSBpbnRyb2R1Y2UgYSBidWcgd2hlbiBvbmUgdXBkYXRlcyBhIGNvbXBsZXggZXhwcmVzc2lvbiAoaW1obywgYWxsIHJlZ2V4ZXMgc2hvdWxkXG4gKiAgICAgIGhhdmUgZ29vZCB0ZXN0IGNvdmVyYWdlKS4gIEZvciBpbnN0YW5jZSwgdGhlIHVzZSBvZiBgLmAgaW4gdGhlIHJlZ2V4IGlzIGNvcnJlY3Qgb25seSBpbiBhXG4gKiAgICAgIHNtYWxsIG51bWJlciBvZiBjYXNlcy4gIEEgYC5gIGNoYXJhY3RlciBpbiB0aGUgcmVnZXggdXNlZCB3aGVuIG1hdGNoaW5nIHRoZSBzY2hlbWUgb3IgYVxuICogICAgICBzdWJkb21haW4gY291bGQgYmUgbWF0Y2hlZCBhZ2FpbnN0IGEgYDpgIG9yIGxpdGVyYWwgYC5gIHRoYXQgd2FzIGxpa2VseSBub3QgaW50ZW5kZWQuICAgSXRcbiAqICAgICAgaXMgaGlnaGx5IHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgc3RyaW5nIHBhdHRlcm5zIGFuZCBvbmx5IGZhbGwgYmFjayB0byByZWd1bGFyIGV4cHJlc3Npb25zXG4gKiAgICAgIGFzIGEgbGFzdCByZXNvcnQuXG4gKiAgICAtIFRoZSByZWd1bGFyIGV4cHJlc3Npb24gbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBSZWdFeHAgKGkuZS4gbm90IGEgc3RyaW5nLikgIEl0IGlzXG4gKiAgICAgIG1hdGNoZWQgYWdhaW5zdCB0aGUgKiplbnRpcmUqKiAqbm9ybWFsaXplZCAvIGFic29sdXRlIFVSTCogb2YgdGhlIHJlc291cmNlIGJlaW5nIHRlc3RlZFxuICogICAgICAoZXZlbiB3aGVuIHRoZSBSZWdFeHAgZGlkIG5vdCBoYXZlIHRoZSBgXmAgYW5kIGAkYCBjb2Rlcy4pICBJbiBhZGRpdGlvbiwgYW55IGZsYWdzXG4gKiAgICAgIHByZXNlbnQgb24gdGhlIFJlZ0V4cCAoc3VjaCBhcyBtdWx0aWxpbmUsIGdsb2JhbCwgaWdub3JlQ2FzZSkgYXJlIGlnbm9yZWQuXG4gKiAgICAtIElmIHlvdSBhcmUgZ2VuZXJhdGluZyB5b3VyIEphdmFTY3JpcHQgZnJvbSBzb21lIG90aGVyIHRlbXBsYXRpbmcgZW5naW5lIChub3RcbiAqICAgICAgcmVjb21tZW5kZWQsIGUuZy4gaW4gaXNzdWUgWyM0MDA2XShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy80MDA2KSksXG4gKiAgICAgIHJlbWVtYmVyIHRvIGVzY2FwZSB5b3VyIHJlZ3VsYXIgZXhwcmVzc2lvbiAoYW5kIGJlIGF3YXJlIHRoYXQgeW91IG1pZ2h0IG5lZWQgbW9yZSB0aGFuXG4gKiAgICAgIG9uZSBsZXZlbCBvZiBlc2NhcGluZyBkZXBlbmRpbmcgb24geW91ciB0ZW1wbGF0aW5nIGVuZ2luZSBhbmQgdGhlIHdheSB5b3UgaW50ZXJwb2xhdGVkXG4gKiAgICAgIHRoZSB2YWx1ZS4pICBEbyBtYWtlIHVzZSBvZiB5b3VyIHBsYXRmb3JtJ3MgZXNjYXBpbmcgbWVjaGFuaXNtIGFzIGl0IG1pZ2h0IGJlIGdvb2RcbiAqICAgICAgZW5vdWdoIGJlZm9yZSBjb2RpbmcgeW91ciBvd24uICBFLmcuIFJ1YnkgaGFzXG4gKiAgICAgIFtSZWdleHAuZXNjYXBlKHN0cildKGh0dHA6Ly93d3cucnVieS1kb2Mub3JnL2NvcmUtMi4wLjAvUmVnZXhwLmh0bWwjbWV0aG9kLWMtZXNjYXBlKVxuICogICAgICBhbmQgUHl0aG9uIGhhcyBbcmUuZXNjYXBlXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvcmUuaHRtbCNyZS5lc2NhcGUpLlxuICogICAgICBKYXZhc2NyaXB0IGxhY2tzIGEgc2ltaWxhciBidWlsdCBpbiBmdW5jdGlvbiBmb3IgZXNjYXBpbmcuICBUYWtlIGEgbG9vayBhdCBHb29nbGVcbiAqICAgICAgQ2xvc3VyZSBsaWJyYXJ5J3MgW2dvb2cuc3RyaW5nLnJlZ0V4cEVzY2FwZShzKV0oXG4gKiAgICAgIGh0dHA6Ly9kb2NzLmNsb3N1cmUtbGlicmFyeS5nb29nbGVjb2RlLmNvbS9naXQvY2xvc3VyZV9nb29nX3N0cmluZ19zdHJpbmcuanMuc291cmNlLmh0bWwjbGluZTk2MikuXG4gKlxuICogUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyICRzY2VEZWxlZ2F0ZVByb3ZpZGVyfSBmb3IgYW4gZXhhbXBsZS5cbiAqXG4gKiAjIyMgU2hvdyBtZSBhbiBleGFtcGxlIHVzaW5nIFNDRS5cbiAqXG4gKiA8ZXhhbXBsZSBtb2R1bGU9XCJteVNjZUFwcFwiIGRlcHM9XCJhbmd1bGFyLXNhbml0aXplLmpzXCIgbmFtZT1cInNjZS1zZXJ2aWNlXCI+XG4gKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJBcHBDb250cm9sbGVyIGFzIG15Q3RybFwiPlxuICogICAgIDxpIG5nLWJpbmQtaHRtbD1cIm15Q3RybC5leHBsaWNpdGx5VHJ1c3RlZEh0bWxcIiBpZD1cImV4cGxpY2l0bHlUcnVzdGVkSHRtbFwiPjwvaT48YnI+PGJyPlxuICogICAgIDxiPlVzZXIgY29tbWVudHM8L2I+PGJyPlxuICogICAgIEJ5IGRlZmF1bHQsIEhUTUwgdGhhdCBpc24ndCBleHBsaWNpdGx5IHRydXN0ZWQgKGUuZy4gQWxpY2UncyBjb21tZW50KSBpcyBzYW5pdGl6ZWQgd2hlblxuICogICAgICRzYW5pdGl6ZSBpcyBhdmFpbGFibGUuICBJZiAkc2FuaXRpemUgaXNuJ3QgYXZhaWxhYmxlLCB0aGlzIHJlc3VsdHMgaW4gYW4gZXJyb3IgaW5zdGVhZCBvZiBhblxuICogICAgIGV4cGxvaXQuXG4gKiAgICAgPGRpdiBjbGFzcz1cIndlbGxcIj5cbiAqICAgICAgIDxkaXYgbmctcmVwZWF0PVwidXNlckNvbW1lbnQgaW4gbXlDdHJsLnVzZXJDb21tZW50c1wiPlxuICogICAgICAgICA8Yj57e3VzZXJDb21tZW50Lm5hbWV9fTwvYj46XG4gKiAgICAgICAgIDxzcGFuIG5nLWJpbmQtaHRtbD1cInVzZXJDb21tZW50Lmh0bWxDb21tZW50XCIgY2xhc3M9XCJodG1sQ29tbWVudFwiPjwvc3Bhbj5cbiAqICAgICAgICAgPGJyPlxuICogICAgICAgPC9kaXY+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZGl2PlxuICogPC9maWxlPlxuICpcbiAqIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAqICAgYW5ndWxhci5tb2R1bGUoJ215U2NlQXBwJywgWyduZ1Nhbml0aXplJ10pXG4gKiAgICAgLmNvbnRyb2xsZXIoJ0FwcENvbnRyb2xsZXInLCBbJyRodHRwJywgJyR0ZW1wbGF0ZUNhY2hlJywgJyRzY2UnLFxuICogICAgICAgZnVuY3Rpb24gQXBwQ29udHJvbGxlcigkaHR0cCwgJHRlbXBsYXRlQ2FjaGUsICRzY2UpIHtcbiAqICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICogICAgICAgICAkaHR0cC5nZXQoJ3Rlc3RfZGF0YS5qc29uJywge2NhY2hlOiAkdGVtcGxhdGVDYWNoZX0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAqICAgICAgICAgICBzZWxmLnVzZXJDb21tZW50cyA9IHJlc3BvbnNlLmRhdGE7XG4gKiAgICAgICAgIH0pO1xuICogICAgICAgICBzZWxmLmV4cGxpY2l0bHlUcnVzdGVkSHRtbCA9ICRzY2UudHJ1c3RBc0h0bWwoXG4gKiAgICAgICAgICAgICAnPHNwYW4gb25tb3VzZW92ZXI9XCJ0aGlzLnRleHRDb250ZW50PSZxdW90O0V4cGxpY2l0bHkgdHJ1c3RlZCBIVE1MIGJ5cGFzc2VzICcgK1xuICogICAgICAgICAgICAgJ3Nhbml0aXphdGlvbi4mcXVvdDtcIj5Ib3ZlciBvdmVyIHRoaXMgdGV4dC48L3NwYW4+Jyk7XG4gKiAgICAgICB9XSk7XG4gKiA8L2ZpbGU+XG4gKlxuICogPGZpbGUgbmFtZT1cInRlc3RfZGF0YS5qc29uXCI+XG4gKiBbXG4gKiAgIHsgXCJuYW1lXCI6IFwiQWxpY2VcIixcbiAqICAgICBcImh0bWxDb21tZW50XCI6XG4gKiAgICAgICAgIFwiPHNwYW4gb25tb3VzZW92ZXI9J3RoaXMudGV4dENvbnRlbnQ9XFxcIlBXTjNEIVxcXCInPklzIDxpPmFueW9uZTwvaT4gcmVhZGluZyB0aGlzPzwvc3Bhbj5cIlxuICogICB9LFxuICogICB7IFwibmFtZVwiOiBcIkJvYlwiLFxuICogICAgIFwiaHRtbENvbW1lbnRcIjogXCI8aT5ZZXMhPC9pPiAgQW0gSSB0aGUgb25seSBvdGhlciBvbmU/XCJcbiAqICAgfVxuICogXVxuICogPC9maWxlPlxuICpcbiAqIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgZGVzY3JpYmUoJ1NDRSBkb2MgZGVtbycsIGZ1bmN0aW9uKCkge1xuICogICAgIGl0KCdzaG91bGQgc2FuaXRpemUgdW50cnVzdGVkIHZhbHVlcycsIGZ1bmN0aW9uKCkge1xuICogICAgICAgZXhwZWN0KGVsZW1lbnQuYWxsKGJ5LmNzcygnLmh0bWxDb21tZW50JykpLmZpcnN0KCkuZ2V0QXR0cmlidXRlKCdpbm5lckhUTUwnKSlcbiAqICAgICAgICAgICAudG9CZSgnPHNwYW4+SXMgPGk+YW55b25lPC9pPiByZWFkaW5nIHRoaXM/PC9zcGFuPicpO1xuICogICAgIH0pO1xuICpcbiAqICAgICBpdCgnc2hvdWxkIE5PVCBzYW5pdGl6ZSBleHBsaWNpdGx5IHRydXN0ZWQgdmFsdWVzJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZXhwbGljaXRseVRydXN0ZWRIdG1sJykpLmdldEF0dHJpYnV0ZSgnaW5uZXJIVE1MJykpLnRvQmUoXG4gKiAgICAgICAgICAgJzxzcGFuIG9ubW91c2VvdmVyPVwidGhpcy50ZXh0Q29udGVudD0mcXVvdDtFeHBsaWNpdGx5IHRydXN0ZWQgSFRNTCBieXBhc3NlcyAnICtcbiAqICAgICAgICAgICAnc2FuaXRpemF0aW9uLiZxdW90O1wiPkhvdmVyIG92ZXIgdGhpcyB0ZXh0Ljwvc3Bhbj4nKTtcbiAqICAgICB9KTtcbiAqICAgfSk7XG4gKiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICpcbiAqXG4gKiAjIyBDYW4gSSBkaXNhYmxlIFNDRSBjb21wbGV0ZWx5P1xuICpcbiAqIFllcywgeW91IGNhbi4gIEhvd2V2ZXIsIHRoaXMgaXMgc3Ryb25nbHkgZGlzY291cmFnZWQuICBTQ0UgZ2l2ZXMgeW91IGEgbG90IG9mIHNlY3VyaXR5IGJlbmVmaXRzXG4gKiBmb3IgbGl0dGxlIGNvZGluZyBvdmVyaGVhZC4gIEl0IHdpbGwgYmUgbXVjaCBoYXJkZXIgdG8gdGFrZSBhbiBTQ0UgZGlzYWJsZWQgYXBwbGljYXRpb24gYW5kXG4gKiBlaXRoZXIgc2VjdXJlIGl0IG9uIHlvdXIgb3duIG9yIGVuYWJsZSBTQ0UgYXQgYSBsYXRlciBzdGFnZS4gIEl0IG1pZ2h0IG1ha2Ugc2Vuc2UgdG8gZGlzYWJsZSBTQ0VcbiAqIGZvciBjYXNlcyB3aGVyZSB5b3UgaGF2ZSBhIGxvdCBvZiBleGlzdGluZyBjb2RlIHRoYXQgd2FzIHdyaXR0ZW4gYmVmb3JlIFNDRSB3YXMgaW50cm9kdWNlZCBhbmRcbiAqIHlvdSdyZSBtaWdyYXRpbmcgdGhlbSBhIG1vZHVsZSBhdCBhIHRpbWUuIEFsc28gZG8gbm90ZSB0aGF0IHRoaXMgaXMgYW4gYXBwLXdpZGUgc2V0dGluZywgc28gaWZcbiAqIHlvdSBhcmUgd3JpdGluZyBhIGxpYnJhcnksIHlvdSB3aWxsIGNhdXNlIHNlY3VyaXR5IGJ1Z3MgYXBwbGljYXRpb25zIHVzaW5nIGl0LlxuICpcbiAqIFRoYXQgc2FpZCwgaGVyZSdzIGhvdyB5b3UgY2FuIGNvbXBsZXRlbHkgZGlzYWJsZSBTQ0U6XG4gKlxuICogYGBgXG4gKiBhbmd1bGFyLm1vZHVsZSgnbXlBcHBXaXRoU2NlRGlzYWJsZWRteUFwcCcsIFtdKS5jb25maWcoZnVuY3Rpb24oJHNjZVByb3ZpZGVyKSB7XG4gKiAgIC8vIENvbXBsZXRlbHkgZGlzYWJsZSBTQ0UuICBGb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlcyBvbmx5IVxuICogICAvLyBEbyBub3QgdXNlIGluIG5ldyBwcm9qZWN0cyBvciBsaWJyYXJpZXMuXG4gKiAgICRzY2VQcm92aWRlci5lbmFibGVkKGZhbHNlKTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICovXG5cbmZ1bmN0aW9uICRTY2VQcm92aWRlcigpIHtcbiAgdmFyIGVuYWJsZWQgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRzY2VQcm92aWRlciNlbmFibGVkXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHZhbHVlIElmIHByb3ZpZGVkLCB0aGVuIGVuYWJsZXMvZGlzYWJsZXMgU0NFIGFwcGxpY2F0aW9uLXdpZGUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgU0NFIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEVuYWJsZXMvZGlzYWJsZXMgU0NFIGFuZCByZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgKi9cbiAgdGhpcy5lbmFibGVkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgZW5hYmxlZCA9ICEhdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBlbmFibGVkO1xuICB9O1xuXG5cbiAgLyogRGVzaWduIG5vdGVzIG9uIHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGZvciBTQ0UuXG4gICAqXG4gICAqIFRoZSBBUEkgY29udHJhY3QgZm9yIHRoZSBTQ0UgZGVsZWdhdGVcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBUaGUgU0NFIGRlbGVnYXRlIG9iamVjdCBtdXN0IHByb3ZpZGUgdGhlIGZvbGxvd2luZyAzIG1ldGhvZHM6XG4gICAqXG4gICAqIC0gdHJ1c3RBcyhjb250ZXh0RW51bSwgdmFsdWUpXG4gICAqICAgICBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHRlbGwgdGhlIFNDRSBzZXJ2aWNlIHRoYXQgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIE9LIHRvIHVzZSBpbiB0aGVcbiAgICogICAgIGNvbnRleHRzIHNwZWNpZmllZCBieSBjb250ZXh0RW51bS4gIEl0IG11c3QgcmV0dXJuIGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgYWNjZXB0ZWQgYnlcbiAgICogICAgIGdldFRydXN0ZWQoKSBmb3IgYSBjb21wYXRpYmxlIGNvbnRleHRFbnVtIGFuZCByZXR1cm4gdGhpcyB2YWx1ZS5cbiAgICpcbiAgICogLSB2YWx1ZU9mKHZhbHVlKVxuICAgKiAgICAgRm9yIHZhbHVlcyB0aGF0IHdlcmUgbm90IHByb2R1Y2VkIGJ5IHRydXN0QXMoKSwgcmV0dXJuIHRoZW0gYXMgaXMuICBGb3IgdmFsdWVzIHRoYXQgd2VyZVxuICAgKiAgICAgcHJvZHVjZWQgYnkgdHJ1c3RBcygpLCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgaW5wdXQgdmFsdWUgdG8gdHJ1c3RBcy4gIEJhc2ljYWxseSwgaWZcbiAgICogICAgIHRydXN0QXMgaXMgd3JhcHBpbmcgdGhlIGdpdmVuIHZhbHVlcyBpbnRvIHNvbWUgdHlwZSwgdGhpcyBvcGVyYXRpb24gdW53cmFwcyBpdCB3aGVuIGdpdmVuXG4gICAqICAgICBzdWNoIGEgdmFsdWUuXG4gICAqXG4gICAqIC0gZ2V0VHJ1c3RlZChjb250ZXh0RW51bSwgdmFsdWUpXG4gICAqICAgICBUaGlzIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gdGhlIHZhbHVlIHRoYXQgaXMgc2FmZSB0byB1c2UgaW4gdGhlIGNvbnRleHQgc3BlY2lmaWVkIGJ5XG4gICAqICAgICBjb250ZXh0RW51bSBvciB0aHJvdyBhbmQgZXhjZXB0aW9uIG90aGVyd2lzZS5cbiAgICpcbiAgICogTk9URTogVGhpcyBjb250cmFjdCBkZWxpYmVyYXRlbHkgZG9lcyBOT1Qgc3RhdGUgdGhhdCB2YWx1ZXMgcmV0dXJuZWQgYnkgdHJ1c3RBcygpIG11c3QgYmVcbiAgICogb3BhcXVlIG9yIHdyYXBwZWQgaW4gc29tZSBob2xkZXIgb2JqZWN0LiAgVGhhdCBoYXBwZW5zIHRvIGJlIGFuIGltcGxlbWVudGF0aW9uIGRldGFpbC4gIEZvclxuICAgKiBpbnN0YW5jZSwgYW4gaW1wbGVtZW50YXRpb24gY291bGQgbWFpbnRhaW4gYSByZWdpc3RyeSBvZiBhbGwgdHJ1c3RlZCBvYmplY3RzIGJ5IGNvbnRleHQuICBJblxuICAgKiBzdWNoIGEgY2FzZSwgdHJ1c3RBcygpIHdvdWxkIHJldHVybiB0aGUgc2FtZSBvYmplY3QgdGhhdCB3YXMgcGFzc2VkIGluLiAgZ2V0VHJ1c3RlZCgpIHdvdWxkXG4gICAqIHJldHVybiB0aGUgc2FtZSBvYmplY3QgcGFzc2VkIGluIGlmIGl0IHdhcyBmb3VuZCBpbiB0aGUgcmVnaXN0cnkgdW5kZXIgYSBjb21wYXRpYmxlIGNvbnRleHQgb3JcbiAgICogdGhyb3cgYW4gZXhjZXB0aW9uIG90aGVyd2lzZS4gIEFuIGltcGxlbWVudGF0aW9uIG1pZ2h0IG9ubHkgd3JhcCB2YWx1ZXMgc29tZSBvZiB0aGUgdGltZSBiYXNlZFxuICAgKiBvbiBzb21lIGNyaXRlcmlhLiAgZ2V0VHJ1c3RlZCgpIG1pZ2h0IHJldHVybiBhIHZhbHVlIGFuZCBub3QgdGhyb3cgYW4gZXhjZXB0aW9uIGZvciBzcGVjaWFsXG4gICAqIGNvbnN0YW50cyBvciBvYmplY3RzIGV2ZW4gaWYgbm90IHdyYXBwZWQuICBBbGwgc3VjaCBpbXBsZW1lbnRhdGlvbnMgZnVsZmlsbCB0aGlzIGNvbnRyYWN0LlxuICAgKlxuICAgKlxuICAgKiBBIG5vdGUgb24gdGhlIGluaGVyaXRhbmNlIG1vZGVsIGZvciBTQ0UgY29udGV4dHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEkndmUgdXNlZCBpbmhlcml0YW5jZSBhbmQgbWFkZSBSRVNPVVJDRV9VUkwgd3JhcHBlZCB0eXBlcyBhIHN1YnR5cGUgb2YgVVJMIHdyYXBwZWQgdHlwZXMuICBUaGlzXG4gICAqIGlzIHB1cmVseSBhbiBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzLlxuICAgKlxuICAgKiBUaGUgY29udHJhY3QgaXMgc2ltcGx5IHRoaXM6XG4gICAqXG4gICAqICAgICBnZXRUcnVzdGVkKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSkgc3VjY2VlZGluZyBpbXBsaWVzIHRoYXQgZ2V0VHJ1c3RlZCgkc2NlLlVSTCwgdmFsdWUpXG4gICAqICAgICB3aWxsIGFsc28gc3VjY2VlZC5cbiAgICpcbiAgICogSW5oZXJpdGFuY2UgaGFwcGVucyB0byBjYXB0dXJlIHRoaXMgaW4gYSBuYXR1cmFsIHdheS4gSW4gc29tZSBmdXR1cmUsIHdlIG1heSBub3QgdXNlXG4gICAqIGluaGVyaXRhbmNlIGFueW1vcmUuIFRoYXQgaXMgT0sgYmVjYXVzZSBubyBjb2RlIG91dHNpZGUgb2Ygc2NlLmpzIGFuZCBzY2VTcGVjcy5qcyB3b3VsZCBuZWVkIHRvXG4gICAqIGJlIGF3YXJlIG9mIHRoaXMgZGV0YWlsLlxuICAgKi9cblxuICB0aGlzLiRnZXQgPSBbJyRwYXJzZScsICckc2NlRGVsZWdhdGUnLCBmdW5jdGlvbihcbiAgICAgICAgICAgICAgICAkcGFyc2UsICAgJHNjZURlbGVnYXRlKSB7XG4gICAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG4gICAgLy8gUHJlcmVxOiBFbnN1cmUgdGhhdCB3ZSdyZSBub3QgcnVubmluZyBpbiBJRTwxMSBxdWlya3MgbW9kZS4gIEluIHRoYXQgbW9kZSwgSUUgPCAxMSBhbGxvd1xuICAgIC8vIHRoZSBcImV4cHJlc3Npb24oamF2YXNjcmlwdCBleHByZXNzaW9uKVwiIHN5bnRheCB3aGljaCBpcyBpbnNlY3VyZS5cbiAgICBpZiAoZW5hYmxlZCAmJiBtc2llIDwgOCkge1xuICAgICAgdGhyb3cgJHNjZU1pbkVycignaWVxdWlya3MnLFxuICAgICAgICAnU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgZG9lcyBub3Qgc3VwcG9ydCBJbnRlcm5ldCBFeHBsb3JlciB2ZXJzaW9uIDwgMTEgaW4gcXVpcmtzICcgK1xuICAgICAgICAnbW9kZS4gIFlvdSBjYW4gZml4IHRoaXMgYnkgYWRkaW5nIHRoZSB0ZXh0IDwhZG9jdHlwZSBodG1sPiB0byB0aGUgdG9wIG9mIHlvdXIgSFRNTCAnICtcbiAgICAgICAgJ2RvY3VtZW50LiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2UgZm9yIG1vcmUgaW5mb3JtYXRpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIHNjZSA9IHNoYWxsb3dDb3B5KFNDRV9DT05URVhUUyk7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNpc0VuYWJsZWRcbiAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiBTQ0UgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLiAgSWYgeW91IHdhbnQgdG8gc2V0IHRoZSB2YWx1ZSwgeW91XG4gICAgICogICAgIGhhdmUgdG8gZG8gaXQgYXQgbW9kdWxlIGNvbmZpZyB0aW1lIG9uIHtAbGluayBuZy4kc2NlUHJvdmlkZXIgJHNjZVByb3ZpZGVyfS5cbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgaWYgU0NFIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgc2NlLmlzRW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgfTtcbiAgICBzY2UudHJ1c3RBcyA9ICRzY2VEZWxlZ2F0ZS50cnVzdEFzO1xuICAgIHNjZS5nZXRUcnVzdGVkID0gJHNjZURlbGVnYXRlLmdldFRydXN0ZWQ7XG4gICAgc2NlLnZhbHVlT2YgPSAkc2NlRGVsZWdhdGUudmFsdWVPZjtcblxuICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgc2NlLnRydXN0QXMgPSBzY2UuZ2V0VHJ1c3RlZCA9IGZ1bmN0aW9uKHR5cGUsIHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcbiAgICAgIHNjZS52YWx1ZU9mID0gaWRlbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQ29udmVydHMgQW5ndWxhckpTIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGludG8gYSBmdW5jdGlvbi4gIFRoaXMgaXMgbGlrZSB7QGxpbmtcbiAgICAgKiBuZy4kcGFyc2UgJHBhcnNlfSBhbmQgaXMgaWRlbnRpY2FsIHdoZW4gdGhlIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIGNvbnN0YW50LiAgT3RoZXJ3aXNlLCBpdFxuICAgICAqIHdyYXBzIHRoZSBleHByZXNzaW9uIGluIGEgY2FsbCB0byB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkICRzY2UuZ2V0VHJ1c3RlZCgqdHlwZSosXG4gICAgICogKnJlc3VsdCopfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIFNDRSBjb250ZXh0IGluIHdoaWNoIHRoaXMgcmVzdWx0IHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IEEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAgICAgKlxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlXG4gICAgICogICAgICBzdHJpbmdzIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzXG4gICAgICogICAgICBpbiBgY29udGV4dGAuXG4gICAgICovXG4gICAgc2NlLnBhcnNlQXMgPSBmdW5jdGlvbiBzY2VQYXJzZUFzKHR5cGUsIGV4cHIpIHtcbiAgICAgIHZhciBwYXJzZWQgPSAkcGFyc2UoZXhwcik7XG4gICAgICBpZiAocGFyc2VkLmxpdGVyYWwgJiYgcGFyc2VkLmNvbnN0YW50KSB7XG4gICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHBhcnNlKGV4cHIsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHNjZS5nZXRUcnVzdGVkKHR5cGUsIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIERlbGVnYXRlcyB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0uIEFzIHN1Y2gsIHJldHVybnMgYVxuICAgICAqIHdyYXBwZWQgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB5b3VyIHZhbHVlLCBhbmQgdGhlIHRydXN0IHlvdSBoYXZlIGluIGl0cyBzYWZldHkgZm9yIHRoZSBnaXZlblxuICAgICAqIGNvbnRleHQuIEFuZ3VsYXJKUyBjYW4gdGhlbiB1c2UgdGhhdCB2YWx1ZSBhcy1pcyBpbiBiaW5kaW5ncyBvZiB0aGUgc3BlY2lmaWVkIHNlY3VyZSBjb250ZXh0LlxuICAgICAqIFRoaXMgaXMgdXNlZCBpbiBiaW5kaW5ncyBmb3IgYG5nLWJpbmQtaHRtbGAsIGBuZy1pbmNsdWRlYCwgYW5kIG1vc3QgYHNyY2AgYXR0cmlidXRlXG4gICAgICogaW50ZXJwb2xhdGlvbnMuIFNlZSB7QGxpbmsgbmcuJHNjZSAkc2NlfSBmb3Igc3RyaWN0IGNvbnRleHR1YWwgZXNjYXBpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHNhZmUgZm9yIHVzZSwgZS5nLiBgJHNjZS5VUkxgLFxuICAgICAqICAgICBgJHNjZS5SRVNPVVJDRV9VUkxgLCBgJHNjZS5IVE1MYCwgYCRzY2UuSlNgIG9yIGAkc2NlLkNTU2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0aGF0IHRoYXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdHJ1c3RlZC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHdyYXBwZWQgdmVyc2lvbiBvZiB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdHJ1c3RlZCB2YXJpYW50IG9mIHlvdXIgYHZhbHVlYFxuICAgICAqICAgICBpbiB0aGUgY29udGV4dCB5b3Ugc3BlY2lmaWVkLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc0h0bWxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzSHRtbCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuSFRNTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIG1hcmsgYXMgdHJ1c3RlZCBmb3IgYCRzY2UuSFRNTGAgY29udGV4dC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHdyYXBwZWQgdmVyc2lvbiBvZiB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdHJ1c3RlZCB2YXJpYW50IG9mIHlvdXIgYHZhbHVlYFxuICAgICAqICAgICBpbiBgJHNjZS5IVE1MYCBjb250ZXh0IChsaWtlIGBuZy1iaW5kLWh0bWxgKS5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNDc3NcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzQ3NzKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5DU1MsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBtYXJrIGFzIHRydXN0ZWQgZm9yIGAkc2NlLkNTU2AgY29udGV4dC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHdyYXBwZWQgdmVyc2lvbiBvZiB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdHJ1c3RlZCB2YXJpYW50XG4gICAgICogICAgIG9mIHlvdXIgYHZhbHVlYCBpbiBgJHNjZS5DU1NgIGNvbnRleHQuIFRoaXMgY29udGV4dCBpcyBjdXJyZW50bHkgdW51c2VkLCBzbyB0aGVyZSBhcmVcbiAgICAgKiAgICAgYWxtb3N0IG5vIHJlYXNvbnMgdG8gdXNlIHRoaXMgZnVuY3Rpb24gc28gZmFyLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc1VybFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnRydXN0QXNVcmwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBcygkc2NlLlVSTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIG1hcmsgYXMgdHJ1c3RlZCBmb3IgYCRzY2UuVVJMYCBjb250ZXh0LlxuICAgICAqIEByZXR1cm4geyp9IEEgd3JhcHBlZCB2ZXJzaW9uIG9mIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSB0cnVzdGVkIHZhcmlhbnQgb2YgeW91ciBgdmFsdWVgXG4gICAgICogICAgIGluIGAkc2NlLlVSTGAgY29udGV4dC4gVGhhdCBjb250ZXh0IGlzIGN1cnJlbnRseSB1bnVzZWQsIHNvIHRoZXJlIGFyZSBhbG1vc3Qgbm8gcmVhc29uc1xuICAgICAqICAgICB0byB1c2UgdGhpcyBmdW5jdGlvbiBzbyBmYXIuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzUmVzb3VyY2VVcmxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBcygkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIG1hcmsgYXMgdHJ1c3RlZCBmb3IgYCRzY2UuUkVTT1VSQ0VfVVJMYCBjb250ZXh0LlxuICAgICAqIEByZXR1cm4geyp9IEEgd3JhcHBlZCB2ZXJzaW9uIG9mIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSB0cnVzdGVkIHZhcmlhbnQgb2YgeW91ciBgdmFsdWVgXG4gICAgICogICAgIGluIGAkc2NlLlJFU09VUkNFX1VSTGAgY29udGV4dCAodGVtcGxhdGUgVVJMcyBpbiBgbmctaW5jbHVkZWAsIG1vc3QgYHNyY2AgYXR0cmlidXRlXG4gICAgICogICAgIGJpbmRpbmdzLCAuLi4pXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzSnNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzSnModmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBcygkc2NlLkpTLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWFyayBhcyB0cnVzdGVkIGZvciBgJHNjZS5KU2AgY29udGV4dC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHdyYXBwZWQgdmVyc2lvbiBvZiB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdHJ1c3RlZCB2YXJpYW50IG9mIHlvdXIgYHZhbHVlYFxuICAgICAqICAgICBpbiBgJHNjZS5KU2AgY29udGV4dC4gVGhhdCBjb250ZXh0IGlzIGN1cnJlbnRseSB1bnVzZWQsIHNvIHRoZXJlIGFyZSBhbG1vc3Qgbm8gcmVhc29ucyB0b1xuICAgICAqICAgICB1c2UgdGhpcyBmdW5jdGlvbiBzbyBmYXIuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBEZWxlZ2F0ZXMgdG8ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZGB9LiAgQXMgc3VjaCxcbiAgICAgKiB0YWtlcyBhbnkgaW5wdXQsIGFuZCBlaXRoZXIgcmV0dXJucyBhIHZhbHVlIHRoYXQncyBzYWZlIHRvIHVzZSBpbiB0aGUgc3BlY2lmaWVkIGNvbnRleHQsXG4gICAgICogb3IgdGhyb3dzIGFuIGV4Y2VwdGlvbi4gVGhpcyBmdW5jdGlvbiBpcyBhd2FyZSBvZiB0cnVzdGVkIHZhbHVlcyBjcmVhdGVkIGJ5IHRoZSBgdHJ1c3RBc2BcbiAgICAgKiBmdW5jdGlvbiBhbmQgaXRzIHNob3J0aGFuZHMsIGFuZCB3aGVuIGNvbnRleHRzIGFyZSBhcHByb3ByaWF0ZSwgcmV0dXJucyB0aGUgdW53cmFwcGVkIHZhbHVlXG4gICAgICogYXMtaXMuIEZpbmFsbHksIHRoaXMgZnVuY3Rpb24gY2FuIGFsc28gdGhyb3cgd2hlbiB0aGVyZSBpcyBubyB3YXkgdG8gdHVybiBgbWF5YmVUcnVzdGVkYCBpbiBhXG4gICAgICogc2FmZSB2YWx1ZSAoZS5nLiwgbm8gc2FuaXRpemF0aW9uIGlzIGF2YWlsYWJsZSBvciBwb3NzaWJsZS4pXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgY29udGV4dCBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIHRvIGJlIHVzZWQuXG4gICAgICogQHBhcmFtIHsqfSBtYXliZVRydXN0ZWQgVGhlIHJlc3VsdCBvZiBhIHByaW9yIHtAbGluayBuZy4kc2NlI3RydXN0QXNcbiAgICAgKiAgICAgYCRzY2UudHJ1c3RBc2B9IGNhbGwsIG9yIGFueXRoaW5nIGVsc2UgKHdoaWNoIHdpbGwgbm90IGJlIGNvbnNpZGVyZWQgdHJ1c3RlZC4pXG4gICAgICogQHJldHVybiB7Kn0gQSB2ZXJzaW9uIG9mIHRoZSB2YWx1ZSB0aGF0J3Mgc2FmZSB0byB1c2UgaW4gdGhlIGdpdmVuIGNvbnRleHQsIG9yIHRocm93cyBhblxuICAgICAqICAgICBleGNlcHRpb24gaWYgdGhpcyBpcyBpbXBvc3NpYmxlLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZEh0bWxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5nZXRUcnVzdGVkSHRtbCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuSFRNTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuSFRNTCwgdmFsdWUpYFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZENzc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRDc3ModmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLkNTUywgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuQ1NTLCB2YWx1ZSlgXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkVXJsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZFVybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuVVJMLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZS5nZXRUcnVzdGVkYC5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGAkc2NlLmdldFRydXN0ZWQoJHNjZS5VUkwsIHZhbHVlKWBcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFzcyB0byBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWRgLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSByZXR1cm4gdmFsdWUgb2YgYCRzY2UuZ2V0VHJ1c3RlZCgkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpYFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZEpzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZEpzKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWQoJHNjZS5KUywgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuSlMsIHZhbHVlKWBcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNIdG1sXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc0h0bWwoZXhwcmVzc2lvbiBzdHJpbmcpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2VBcyBgJHNjZS5wYXJzZUFzKCRzY2UuSFRNTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gQSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxuICAgICAqXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGVcbiAgICAgKiAgICAgIHN0cmluZ3MgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXNcbiAgICAgKiAgICAgIGluIGBjb250ZXh0YC5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNDc3NcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzQ3NzKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlQXMgYCRzY2UucGFyc2VBcygkc2NlLkNTUywgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gQSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxuICAgICAqXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGVcbiAgICAgKiAgICAgIHN0cmluZ3MgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXNcbiAgICAgKiAgICAgIGluIGBjb250ZXh0YC5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNVcmxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzVXJsKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlQXMgYCRzY2UucGFyc2VBcygkc2NlLlVSTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFN0cmluZyBleHByZXNzaW9uIHRvIGNvbXBpbGUuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24oY29udGV4dCwgbG9jYWxzKX0gQSBmdW5jdGlvbiB3aGljaCByZXByZXNlbnRzIHRoZSBjb21waWxlZCBleHByZXNzaW9uOlxuICAgICAqXG4gICAgICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGVcbiAgICAgKiAgICAgIHN0cmluZ3MgYXJlIGV2YWx1YXRlZCBhZ2FpbnN0ICh0eXBpY2FsbHkgYSBzY29wZSBvYmplY3QpLlxuICAgICAqICAgICogYGxvY2Fsc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBsb2NhbCB2YXJpYWJsZXMgY29udGV4dCBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXNcbiAgICAgKiAgICAgIGluIGBjb250ZXh0YC5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3BhcnNlQXNSZXNvdXJjZVVybFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNSZXNvdXJjZVVybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZUFzIGAkc2NlLnBhcnNlQXMoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IEEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAgICAgKlxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlXG4gICAgICogICAgICBzdHJpbmdzIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzXG4gICAgICogICAgICBpbiBgY29udGV4dGAuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzSnNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzSnModmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2VBcyBgJHNjZS5wYXJzZUFzKCRzY2UuSlMsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IEEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAgICAgKlxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlXG4gICAgICogICAgICBzdHJpbmdzIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzXG4gICAgICogICAgICBpbiBgY29udGV4dGAuXG4gICAgICovXG5cbiAgICAvLyBTaG9ydGhhbmQgZGVsZWdhdGlvbnMuXG4gICAgdmFyIHBhcnNlID0gc2NlLnBhcnNlQXMsXG4gICAgICAgIGdldFRydXN0ZWQgPSBzY2UuZ2V0VHJ1c3RlZCxcbiAgICAgICAgdHJ1c3RBcyA9IHNjZS50cnVzdEFzO1xuXG4gICAgZm9yRWFjaChTQ0VfQ09OVEVYVFMsIGZ1bmN0aW9uKGVudW1WYWx1ZSwgbmFtZSkge1xuICAgICAgdmFyIGxOYW1lID0gbG93ZXJjYXNlKG5hbWUpO1xuICAgICAgc2NlW3NuYWtlVG9DYW1lbCgncGFyc2VfYXNfJyArIGxOYW1lKV0gPSBmdW5jdGlvbihleHByKSB7XG4gICAgICAgIHJldHVybiBwYXJzZShlbnVtVmFsdWUsIGV4cHIpO1xuICAgICAgfTtcbiAgICAgIHNjZVtzbmFrZVRvQ2FtZWwoJ2dldF90cnVzdGVkXycgKyBsTmFtZSldID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGdldFRydXN0ZWQoZW51bVZhbHVlLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgc2NlW3NuYWtlVG9DYW1lbCgndHJ1c3RfYXNfJyArIGxOYW1lKV0gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHJ1c3RBcyhlbnVtVmFsdWUsIHZhbHVlKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2NlO1xuICB9XTtcbn1cblxuLyogZXhwb3J0ZWQgJFNuaWZmZXJQcm92aWRlciAqL1xuXG4vKipcbiAqICEhISBUaGlzIGlzIGFuIHVuZG9jdW1lbnRlZCBcInByaXZhdGVcIiBzZXJ2aWNlICEhIVxuICpcbiAqIEBuYW1lICRzbmlmZmVyXG4gKiBAcmVxdWlyZXMgJHdpbmRvd1xuICogQHJlcXVpcmVzICRkb2N1bWVudFxuICogQHRoaXNcbiAqXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGhpc3RvcnkgRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IGh0bWw1IGhpc3RvcnkgYXBpID9cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gdHJhbnNpdGlvbnMgRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IENTUyB0cmFuc2l0aW9uIGV2ZW50cyA/XG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFuaW1hdGlvbnMgRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IENTUyBhbmltYXRpb24gZXZlbnRzID9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoaXMgaXMgdmVyeSBzaW1wbGUgaW1wbGVtZW50YXRpb24gb2YgdGVzdGluZyBicm93c2VyJ3MgZmVhdHVyZXMuXG4gKi9cbmZ1bmN0aW9uICRTbmlmZmVyUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsICckZG9jdW1lbnQnLCBmdW5jdGlvbigkd2luZG93LCAkZG9jdW1lbnQpIHtcbiAgICB2YXIgZXZlbnRTdXBwb3J0ID0ge30sXG4gICAgICAgIC8vIENocm9tZSBQYWNrYWdlZCBBcHBzIGFyZSBub3QgYWxsb3dlZCB0byBhY2Nlc3MgYGhpc3RvcnkucHVzaFN0YXRlYC5cbiAgICAgICAgLy8gSWYgbm90IHNhbmRib3hlZCwgdGhleSBjYW4gYmUgZGV0ZWN0ZWQgYnkgdGhlIHByZXNlbmNlIG9mIGBjaHJvbWUuYXBwLnJ1bnRpbWVgXG4gICAgICAgIC8vIChzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9hcHBzL2FwaV9pbmRleCkuIElmIHNhbmRib3hlZCwgdGhleSBjYW4gYmUgZGV0ZWN0ZWQgYnlcbiAgICAgICAgLy8gdGhlIHByZXNlbmNlIG9mIGFuIGV4dGVuc2lvbiBydW50aW1lIElEIGFuZCB0aGUgYWJzZW5jZSBvZiBvdGhlciBDaHJvbWUgcnVudGltZSBBUElzXG4gICAgICAgIC8vIChzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9hcHBzL21hbmlmZXN0L3NhbmRib3gpLlxuICAgICAgICAvLyAoTlcuanMgYXBwcyBoYXZlIGFjY2VzcyB0byBDaHJvbWUgQVBJcywgYnV0IGRvIHN1cHBvcnQgYGhpc3RvcnlgLilcbiAgICAgICAgaXNOdyA9ICR3aW5kb3cubncgJiYgJHdpbmRvdy5udy5wcm9jZXNzLFxuICAgICAgICBpc0Nocm9tZVBhY2thZ2VkQXBwID1cbiAgICAgICAgICAgICFpc053ICYmXG4gICAgICAgICAgICAkd2luZG93LmNocm9tZSAmJlxuICAgICAgICAgICAgKCR3aW5kb3cuY2hyb21lLmFwcCAmJiAkd2luZG93LmNocm9tZS5hcHAucnVudGltZSB8fFxuICAgICAgICAgICAgICAgICEkd2luZG93LmNocm9tZS5hcHAgJiYgJHdpbmRvdy5jaHJvbWUucnVudGltZSAmJiAkd2luZG93LmNocm9tZS5ydW50aW1lLmlkKSxcbiAgICAgICAgaGFzSGlzdG9yeVB1c2hTdGF0ZSA9ICFpc0Nocm9tZVBhY2thZ2VkQXBwICYmICR3aW5kb3cuaGlzdG9yeSAmJiAkd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlLFxuICAgICAgICBhbmRyb2lkID1cbiAgICAgICAgICB0b0ludCgoL2FuZHJvaWQgKFxcZCspLy5leGVjKGxvd2VyY2FzZSgoJHdpbmRvdy5uYXZpZ2F0b3IgfHwge30pLnVzZXJBZ2VudCkpIHx8IFtdKVsxXSksXG4gICAgICAgIGJveGVlID0gL0JveGVlL2kudGVzdCgoJHdpbmRvdy5uYXZpZ2F0b3IgfHwge30pLnVzZXJBZ2VudCksXG4gICAgICAgIGRvY3VtZW50ID0gJGRvY3VtZW50WzBdIHx8IHt9LFxuICAgICAgICBib2R5U3R5bGUgPSBkb2N1bWVudC5ib2R5ICYmIGRvY3VtZW50LmJvZHkuc3R5bGUsXG4gICAgICAgIHRyYW5zaXRpb25zID0gZmFsc2UsXG4gICAgICAgIGFuaW1hdGlvbnMgPSBmYWxzZTtcblxuICAgIGlmIChib2R5U3R5bGUpIHtcbiAgICAgIC8vIFN1cHBvcnQ6IEFuZHJvaWQgPDUsIEJsYWNrYmVycnkgQnJvd3NlciAxMCwgZGVmYXVsdCBDaHJvbWUgaW4gQW5kcm9pZCA0LjQueFxuICAgICAgLy8gTWVudGlvbmVkIGJyb3dzZXJzIG5lZWQgYSAtd2Via2l0LSBwcmVmaXggZm9yIHRyYW5zaXRpb25zICYgYW5pbWF0aW9ucy5cbiAgICAgIHRyYW5zaXRpb25zID0gISEoJ3RyYW5zaXRpb24nIGluIGJvZHlTdHlsZSB8fCAnd2Via2l0VHJhbnNpdGlvbicgaW4gYm9keVN0eWxlKTtcbiAgICAgIGFuaW1hdGlvbnMgPSAhISgnYW5pbWF0aW9uJyBpbiBib2R5U3R5bGUgfHwgJ3dlYmtpdEFuaW1hdGlvbicgaW4gYm9keVN0eWxlKTtcbiAgICB9XG5cblxuICAgIHJldHVybiB7XG4gICAgICAvLyBBbmRyb2lkIGhhcyBoaXN0b3J5LnB1c2hTdGF0ZSwgYnV0IGl0IGRvZXMgbm90IHVwZGF0ZSBsb2NhdGlvbiBjb3JyZWN0bHlcbiAgICAgIC8vIHNvIGxldCdzIG5vdCB1c2UgdGhlIGhpc3RvcnkgQVBJIGF0IGFsbC5cbiAgICAgIC8vIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9hbmRyb2lkL2lzc3Vlcy9kZXRhaWw/aWQ9MTc0NzFcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzkwNFxuXG4gICAgICAvLyBvbGRlciB3ZWJraXQgYnJvd3NlciAoNTMzLjkpIG9uIEJveGVlIGJveCBoYXMgZXhhY3RseSB0aGUgc2FtZSBwcm9ibGVtIGFzIEFuZHJvaWQgaGFzXG4gICAgICAvLyBzbyBsZXQncyBub3QgdXNlIHRoZSBoaXN0b3J5IEFQSSBhbHNvXG4gICAgICAvLyBXZSBhcmUgcHVycG9zZWZ1bGx5IHVzaW5nIGAhKGFuZHJvaWQgPCA0KWAgdG8gY292ZXIgdGhlIGNhc2Ugd2hlbiBgYW5kcm9pZGAgaXMgdW5kZWZpbmVkXG4gICAgICBoaXN0b3J5OiAhIShoYXNIaXN0b3J5UHVzaFN0YXRlICYmICEoYW5kcm9pZCA8IDQpICYmICFib3hlZSksXG4gICAgICBoYXNFdmVudDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG4gICAgICAgIC8vIElFOSBpbXBsZW1lbnRzICdpbnB1dCcgZXZlbnQgaXQncyBzbyBmdWJhcmVkIHRoYXQgd2UgcmF0aGVyIHByZXRlbmQgdGhhdCBpdCBkb2Vzbid0IGhhdmVcbiAgICAgICAgLy8gaXQuIEluIHBhcnRpY3VsYXIgdGhlIGV2ZW50IGlzIG5vdCBmaXJlZCB3aGVuIGJhY2tzcGFjZSBvciBkZWxldGUga2V5IGFyZSBwcmVzc2VkIG9yXG4gICAgICAgIC8vIHdoZW4gY3V0IG9wZXJhdGlvbiBpcyBwZXJmb3JtZWQuXG4gICAgICAgIC8vIElFMTArIGltcGxlbWVudHMgJ2lucHV0JyBldmVudCBidXQgaXQgZXJyb25lb3VzbHkgZmlyZXMgdW5kZXIgdmFyaW91cyBzaXR1YXRpb25zLFxuICAgICAgICAvLyBlLmcuIHdoZW4gcGxhY2Vob2xkZXIgY2hhbmdlcywgb3IgYSBmb3JtIGlzIGZvY3VzZWQuXG4gICAgICAgIGlmIChldmVudCA9PT0gJ2lucHV0JyAmJiBtc2llKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKGV2ZW50U3VwcG9ydFtldmVudF0pKSB7XG4gICAgICAgICAgdmFyIGRpdkVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIGV2ZW50U3VwcG9ydFtldmVudF0gPSAnb24nICsgZXZlbnQgaW4gZGl2RWxtO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGV2ZW50U3VwcG9ydFtldmVudF07XG4gICAgICB9LFxuICAgICAgY3NwOiBjc3AoKSxcbiAgICAgIHRyYW5zaXRpb25zOiB0cmFuc2l0aW9ucyxcbiAgICAgIGFuaW1hdGlvbnM6IGFuaW1hdGlvbnMsXG4gICAgICBhbmRyb2lkOiBhbmRyb2lkXG4gICAgfTtcbiAgfV07XG59XG5cbnZhciAkdGVtcGxhdGVSZXF1ZXN0TWluRXJyID0gbWluRXJyKCckdGVtcGxhdGVSZXF1ZXN0Jyk7XG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkdGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2VkIHRvIGNvbmZpZ3VyZSB0aGUgb3B0aW9ucyBwYXNzZWQgdG8gdGhlIHtAbGluayAkaHR0cH0gc2VydmljZSB3aGVuIG1ha2luZyBhIHRlbXBsYXRlIHJlcXVlc3QuXG4gKlxuICogRm9yIGV4YW1wbGUsIGl0IGNhbiBiZSB1c2VkIGZvciBzcGVjaWZ5aW5nIHRoZSBcIkFjY2VwdFwiIGhlYWRlciB0aGF0IGlzIHNlbnQgdG8gdGhlIHNlcnZlciwgd2hlblxuICogcmVxdWVzdGluZyBhIHRlbXBsYXRlLlxuICovXG5mdW5jdGlvbiAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIoKSB7XG5cbiAgdmFyIGh0dHBPcHRpb25zO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICR0ZW1wbGF0ZVJlcXVlc3RQcm92aWRlciNodHRwT3B0aW9uc1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhlIG9wdGlvbnMgdG8gYmUgcGFzc2VkIHRvIHRoZSB7QGxpbmsgJGh0dHB9IHNlcnZpY2Ugd2hlbiBtYWtpbmcgdGhlIHJlcXVlc3QuXG4gICAqIFlvdSBjYW4gdXNlIHRoaXMgdG8gb3ZlcnJpZGUgb3B0aW9ucyBzdWNoIGFzIHRoZSBcIkFjY2VwdFwiIGhlYWRlciBmb3IgdGVtcGxhdGUgcmVxdWVzdHMuXG4gICAqXG4gICAqIFRoZSB7QGxpbmsgJHRlbXBsYXRlUmVxdWVzdH0gd2lsbCBzZXQgdGhlIGBjYWNoZWAgYW5kIHRoZSBgdHJhbnNmb3JtUmVzcG9uc2VgIHByb3BlcnRpZXMgb2YgdGhlXG4gICAqIG9wdGlvbnMgaWYgbm90IG92ZXJyaWRkZW4gaGVyZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB2YWx1ZSBuZXcgdmFsdWUgZm9yIHRoZSB7QGxpbmsgJGh0dHB9IG9wdGlvbnMuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8c2VsZn0gUmV0dXJucyB0aGUge0BsaW5rICRodHRwfSBvcHRpb25zIHdoZW4gdXNlZCBhcyBnZXR0ZXIgYW5kIHNlbGYgaWYgdXNlZCBhcyBzZXR0ZXIuXG4gICAqL1xuICB0aGlzLmh0dHBPcHRpb25zID0gZnVuY3Rpb24odmFsKSB7XG4gICAgaWYgKHZhbCkge1xuICAgICAgaHR0cE9wdGlvbnMgPSB2YWw7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIGh0dHBPcHRpb25zO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2Mgc2VydmljZVxuICAgKiBAbmFtZSAkdGVtcGxhdGVSZXF1ZXN0XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGUgYCR0ZW1wbGF0ZVJlcXVlc3RgIHNlcnZpY2UgcnVucyBzZWN1cml0eSBjaGVja3MgdGhlbiBkb3dubG9hZHMgdGhlIHByb3ZpZGVkIHRlbXBsYXRlIHVzaW5nXG4gICAqIGAkaHR0cGAgYW5kLCB1cG9uIHN1Y2Nlc3MsIHN0b3JlcyB0aGUgY29udGVudHMgaW5zaWRlIG9mIGAkdGVtcGxhdGVDYWNoZWAuIElmIHRoZSBIVFRQIHJlcXVlc3RcbiAgICogZmFpbHMgb3IgdGhlIHJlc3BvbnNlIGRhdGEgb2YgdGhlIEhUVFAgcmVxdWVzdCBpcyBlbXB0eSwgYSBgJGNvbXBpbGVgIGVycm9yIHdpbGwgYmUgdGhyb3duICh0aGVcbiAgICogZXhjZXB0aW9uIGNhbiBiZSB0aHdhcnRlZCBieSBzZXR0aW5nIHRoZSAybmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiB0byB0cnVlKS4gTm90ZSB0aGF0IHRoZVxuICAgKiBjb250ZW50cyBvZiBgJHRlbXBsYXRlQ2FjaGVgIGFyZSB0cnVzdGVkLCBzbyB0aGUgY2FsbCB0byBgJHNjZS5nZXRUcnVzdGVkVXJsKHRwbClgIGlzIG9taXR0ZWRcbiAgICogd2hlbiBgdHBsYCBpcyBvZiB0eXBlIHN0cmluZyBhbmQgYCR0ZW1wbGF0ZUNhY2hlYCBoYXMgdGhlIG1hdGNoaW5nIGVudHJ5LlxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0byBwYXNzIGN1c3RvbSBvcHRpb25zIHRvIHRoZSBgJGh0dHBgIHNlcnZpY2UsIHN1Y2ggYXMgc2V0dGluZyB0aGUgQWNjZXB0IGhlYWRlciB5b3VcbiAgICogY2FuIGNvbmZpZ3VyZSB0aGlzIHZpYSB7QGxpbmsgJHRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyI2h0dHBPcHRpb25zfS5cbiAgICpcbiAgICogYCR0ZW1wbGF0ZVJlcXVlc3RgIGlzIHVzZWQgaW50ZXJuYWxseSBieSB7QGxpbmsgJGNvbXBpbGV9LCB7QGxpbmsgbmdSb3V0ZS4kcm91dGV9LCBhbmQgZGlyZWN0aXZlcyBzdWNoXG4gICAqIGFzIHtAbGluayBuZ0luY2x1ZGV9IHRvIGRvd25sb2FkIGFuZCBjYWNoZSB0ZW1wbGF0ZXMuXG4gICAqXG4gICAqIDNyZCBwYXJ0eSBtb2R1bGVzIHNob3VsZCB1c2UgYCR0ZW1wbGF0ZVJlcXVlc3RgIGlmIHRoZWlyIHNlcnZpY2VzIG9yIGRpcmVjdGl2ZXMgYXJlIGxvYWRpbmdcbiAgICogdGVtcGxhdGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xUcnVzdGVkUmVzb3VyY2VVcmx9IHRwbCBUaGUgSFRUUCByZXF1ZXN0IHRlbXBsYXRlIFVSTFxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpZ25vcmVSZXF1ZXN0RXJyb3IgV2hldGhlciBvciBub3QgdG8gaWdub3JlIHRoZSBleGNlcHRpb24gd2hlbiB0aGUgcmVxdWVzdCBmYWlscyBvciB0aGUgdGVtcGxhdGUgaXMgZW1wdHlcbiAgICpcbiAgICogQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIGZvciB0aGUgSFRUUCByZXNwb25zZSBkYXRhIG9mIHRoZSBnaXZlbiBVUkwuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0b3RhbFBlbmRpbmdSZXF1ZXN0cyB0b3RhbCBhbW91bnQgb2YgcGVuZGluZyB0ZW1wbGF0ZSByZXF1ZXN0cyBiZWluZyBkb3dubG9hZGVkLlxuICAgKi9cbiAgdGhpcy4kZ2V0ID0gWyckZXhjZXB0aW9uSGFuZGxlcicsICckdGVtcGxhdGVDYWNoZScsICckaHR0cCcsICckcScsICckc2NlJyxcbiAgICBmdW5jdGlvbigkZXhjZXB0aW9uSGFuZGxlciwgJHRlbXBsYXRlQ2FjaGUsICRodHRwLCAkcSwgJHNjZSkge1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVSZXF1ZXN0Rm4odHBsLCBpZ25vcmVSZXF1ZXN0RXJyb3IpIHtcbiAgICAgICAgaGFuZGxlUmVxdWVzdEZuLnRvdGFsUGVuZGluZ1JlcXVlc3RzKys7XG5cbiAgICAgICAgLy8gV2UgY29uc2lkZXIgdGhlIHRlbXBsYXRlIGNhY2hlIGhvbGRzIG9ubHkgdHJ1c3RlZCB0ZW1wbGF0ZXMsIHNvXG4gICAgICAgIC8vIHRoZXJlJ3Mgbm8gbmVlZCB0byBnbyB0aHJvdWdoIHdoaXRlbGlzdGluZyBhZ2FpbiBmb3Iga2V5cyB0aGF0IGFscmVhZHlcbiAgICAgICAgLy8gYXJlIGluY2x1ZGVkIGluIHRoZXJlLiBUaGlzIGFsc28gbWFrZXMgQW5ndWxhckpTIGFjY2VwdCBhbnkgc2NyaXB0XG4gICAgICAgIC8vIGRpcmVjdGl2ZSwgbm8gbWF0dGVyIGl0cyBuYW1lLiBIb3dldmVyLCB3ZSBzdGlsbCBuZWVkIHRvIHVud3JhcCB0cnVzdGVkXG4gICAgICAgIC8vIHR5cGVzLlxuICAgICAgICBpZiAoIWlzU3RyaW5nKHRwbCkgfHwgaXNVbmRlZmluZWQoJHRlbXBsYXRlQ2FjaGUuZ2V0KHRwbCkpKSB7XG4gICAgICAgICAgdHBsID0gJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwodHBsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0cmFuc2Zvcm1SZXNwb25zZSA9ICRodHRwLmRlZmF1bHRzICYmICRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlO1xuXG4gICAgICAgIGlmIChpc0FycmF5KHRyYW5zZm9ybVJlc3BvbnNlKSkge1xuICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlID0gdHJhbnNmb3JtUmVzcG9uc2UuZmlsdGVyKGZ1bmN0aW9uKHRyYW5zZm9ybWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZXIgIT09IGRlZmF1bHRIdHRwUmVzcG9uc2VUcmFuc2Zvcm07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHJhbnNmb3JtUmVzcG9uc2UgPT09IGRlZmF1bHRIdHRwUmVzcG9uc2VUcmFuc2Zvcm0pIHtcbiAgICAgICAgICB0cmFuc2Zvcm1SZXNwb25zZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHRwbCwgZXh0ZW5kKHtcbiAgICAgICAgICAgIGNhY2hlOiAkdGVtcGxhdGVDYWNoZSxcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiB0cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgICAgIH0sIGh0dHBPcHRpb25zKSlcbiAgICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGhhbmRsZVJlcXVlc3RGbi50b3RhbFBlbmRpbmdSZXF1ZXN0cy0tO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5wdXQodHBsLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICB9LCBoYW5kbGVFcnJvcik7XG5cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRXJyb3IocmVzcCkge1xuICAgICAgICAgIGlmICghaWdub3JlUmVxdWVzdEVycm9yKSB7XG4gICAgICAgICAgICByZXNwID0gJHRlbXBsYXRlUmVxdWVzdE1pbkVycigndHBsb2FkJyxcbiAgICAgICAgICAgICAgICAnRmFpbGVkIHRvIGxvYWQgdGVtcGxhdGU6IHswfSAoSFRUUCBzdGF0dXM6IHsxfSB7Mn0pJyxcbiAgICAgICAgICAgICAgICB0cGwsIHJlc3Auc3RhdHVzLCByZXNwLnN0YXR1c1RleHQpO1xuXG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihyZXNwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3ApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGhhbmRsZVJlcXVlc3RGbi50b3RhbFBlbmRpbmdSZXF1ZXN0cyA9IDA7XG5cbiAgICAgIHJldHVybiBoYW5kbGVSZXF1ZXN0Rm47XG4gICAgfVxuICBdO1xufVxuXG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICQkVGVzdGFiaWxpdHlQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyRicm93c2VyJywgJyRsb2NhdGlvbicsXG4gICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgICAkYnJvd3NlciwgICAkbG9jYXRpb24pIHtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICR0ZXN0YWJpbGl0eVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogVGhlIHByaXZhdGUgJCR0ZXN0YWJpbGl0eSBzZXJ2aWNlIHByb3ZpZGVzIGEgY29sbGVjdGlvbiBvZiBtZXRob2RzIGZvciB1c2Ugd2hlbiBkZWJ1Z2dpbmdcbiAgICAgKiBvciBieSBhdXRvbWF0ZWQgdGVzdCBhbmQgZGVidWdnaW5nIHRvb2xzLlxuICAgICAqL1xuICAgIHZhciB0ZXN0YWJpbGl0eSA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNmaW5kQmluZGluZ3NcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBhcmUgYm91bmQgKHZpYSBuZy1iaW5kIG9yIHt7fX0pXG4gICAgICogdG8gZXhwcmVzc2lvbnMgbWF0Y2hpbmcgdGhlIGlucHV0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHJvb3QgdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gVGhlIGJpbmRpbmcgZXhwcmVzc2lvbiB0byBtYXRjaC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdF9leGFjdE1hdGNoIElmIHRydWUsIG9ubHkgcmV0dXJucyBleGFjdCBtYXRjaGVzXG4gICAgICogICAgIGZvciB0aGUgZXhwcmVzc2lvbi4gRmlsdGVycyBhbmQgd2hpdGVzcGFjZSBhcmUgaWdub3JlZC5cbiAgICAgKi9cbiAgICB0ZXN0YWJpbGl0eS5maW5kQmluZGluZ3MgPSBmdW5jdGlvbihlbGVtZW50LCBleHByZXNzaW9uLCBvcHRfZXhhY3RNYXRjaCkge1xuICAgICAgdmFyIGJpbmRpbmdzID0gZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCduZy1iaW5kaW5nJyk7XG4gICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xuICAgICAgZm9yRWFjaChiaW5kaW5ncywgZnVuY3Rpb24oYmluZGluZykge1xuICAgICAgICB2YXIgZGF0YUJpbmRpbmcgPSBhbmd1bGFyLmVsZW1lbnQoYmluZGluZykuZGF0YSgnJGJpbmRpbmcnKTtcbiAgICAgICAgaWYgKGRhdGFCaW5kaW5nKSB7XG4gICAgICAgICAgZm9yRWFjaChkYXRhQmluZGluZywgZnVuY3Rpb24oYmluZGluZ05hbWUpIHtcbiAgICAgICAgICAgIGlmIChvcHRfZXhhY3RNYXRjaCkge1xuICAgICAgICAgICAgICB2YXIgbWF0Y2hlciA9IG5ldyBSZWdFeHAoJyhefFxcXFxzKScgKyBlc2NhcGVGb3JSZWdleHAoZXhwcmVzc2lvbikgKyAnKFxcXFxzfFxcXFx8fCQpJyk7XG4gICAgICAgICAgICAgIGlmIChtYXRjaGVyLnRlc3QoYmluZGluZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGJpbmRpbmcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoYmluZGluZ05hbWUuaW5kZXhPZihleHByZXNzaW9uKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVzLnB1c2goYmluZGluZyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNmaW5kTW9kZWxzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgYXJlIHR3by13YXkgZm91bmQgdmlhIG5nLW1vZGVsIHRvXG4gICAgICogZXhwcmVzc2lvbnMgbWF0Y2hpbmcgdGhlIGlucHV0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHJvb3QgdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gVGhlIG1vZGVsIGV4cHJlc3Npb24gdG8gbWF0Y2guXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRfZXhhY3RNYXRjaCBJZiB0cnVlLCBvbmx5IHJldHVybnMgZXhhY3QgbWF0Y2hlc1xuICAgICAqICAgICBmb3IgdGhlIGV4cHJlc3Npb24uXG4gICAgICovXG4gICAgdGVzdGFiaWxpdHkuZmluZE1vZGVscyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGV4cHJlc3Npb24sIG9wdF9leGFjdE1hdGNoKSB7XG4gICAgICB2YXIgcHJlZml4ZXMgPSBbJ25nLScsICdkYXRhLW5nLScsICduZ1xcXFw6J107XG4gICAgICBmb3IgKHZhciBwID0gMDsgcCA8IHByZWZpeGVzLmxlbmd0aDsgKytwKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVFcXVhbHMgPSBvcHRfZXhhY3RNYXRjaCA/ICc9JyA6ICcqPSc7XG4gICAgICAgIHZhciBzZWxlY3RvciA9ICdbJyArIHByZWZpeGVzW3BdICsgJ21vZGVsJyArIGF0dHJpYnV0ZUVxdWFscyArICdcIicgKyBleHByZXNzaW9uICsgJ1wiXSc7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gZWxlbWVudHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNnZXRMb2NhdGlvblxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgZm9yIGdldHRpbmcgdGhlIGxvY2F0aW9uIGluIGEgYnJvd3NlciBhZ25vc3RpYyB3YXkuIFJldHVybnNcbiAgICAgKiAgICAgdGhlIHBhdGgsIHNlYXJjaCwgYW5kIGhhc2guIChlLmcuIC9wYXRoP2E9YiNoYXNoKVxuICAgICAqL1xuICAgIHRlc3RhYmlsaXR5LmdldExvY2F0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJGxvY2F0aW9uLnVybCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSAkJHRlc3RhYmlsaXR5I3NldExvY2F0aW9uXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGN1dCBmb3IgbmF2aWdhdGluZyB0byBhIGxvY2F0aW9uIHdpdGhvdXQgZG9pbmcgYSBmdWxsIHBhZ2UgcmVsb2FkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgbG9jYXRpb24gdXJsIChwYXRoLCBzZWFyY2ggYW5kIGhhc2gsXG4gICAgICogICAgIGUuZy4gL3BhdGg/YT1iI2hhc2gpIHRvIGdvIHRvLlxuICAgICAqL1xuICAgIHRlc3RhYmlsaXR5LnNldExvY2F0aW9uID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICBpZiAodXJsICE9PSAkbG9jYXRpb24udXJsKCkpIHtcbiAgICAgICAgJGxvY2F0aW9uLnVybCh1cmwpO1xuICAgICAgICAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSN3aGVuU3RhYmxlXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBDYWxscyB0aGUgY2FsbGJhY2sgd2hlbiAkdGltZW91dCBhbmQgJGh0dHAgcmVxdWVzdHMgYXJlIGNvbXBsZXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICovXG4gICAgdGVzdGFiaWxpdHkud2hlblN0YWJsZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAkYnJvd3Nlci5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzKGNhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRlc3RhYmlsaXR5O1xuICB9XTtcbn1cblxudmFyICR0aW1lb3V0TWluRXJyID0gbWluRXJyKCckdGltZW91dCcpO1xuXG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICRUaW1lb3V0UHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckcScsICckJHEnLCAnJGV4Y2VwdGlvbkhhbmRsZXInLFxuICAgICAgIGZ1bmN0aW9uKCRyb290U2NvcGUsICAgJGJyb3dzZXIsICAgJHEsICAgJCRxLCAgICRleGNlcHRpb25IYW5kbGVyKSB7XG5cbiAgICB2YXIgZGVmZXJyZWRzID0ge307XG5cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJHRpbWVvdXRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIEFuZ3VsYXJKUydzIHdyYXBwZXIgZm9yIGB3aW5kb3cuc2V0VGltZW91dGAuIFRoZSBgZm5gIGZ1bmN0aW9uIGlzIHdyYXBwZWQgaW50byBhIHRyeS9jYXRjaFxuICAgICAqIGJsb2NrIGFuZCBkZWxlZ2F0ZXMgYW55IGV4Y2VwdGlvbnMgdG9cbiAgICAgKiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICpcbiAgICAgKiBUaGUgcmV0dXJuIHZhbHVlIG9mIGNhbGxpbmcgYCR0aW1lb3V0YCBpcyBhIHByb21pc2UsIHdoaWNoIHdpbGwgYmUgcmVzb2x2ZWQgd2hlblxuICAgICAqIHRoZSBkZWxheSBoYXMgcGFzc2VkIGFuZCB0aGUgdGltZW91dCBmdW5jdGlvbiwgaWYgcHJvdmlkZWQsIGlzIGV4ZWN1dGVkLlxuICAgICAqXG4gICAgICogVG8gY2FuY2VsIGEgdGltZW91dCByZXF1ZXN0LCBjYWxsIGAkdGltZW91dC5jYW5jZWwocHJvbWlzZSlgLlxuICAgICAqXG4gICAgICogSW4gdGVzdHMgeW91IGNhbiB1c2Uge0BsaW5rIG5nTW9jay4kdGltZW91dCBgJHRpbWVvdXQuZmx1c2goKWB9IHRvXG4gICAgICogc3luY2hyb25vdXNseSBmbHVzaCB0aGUgcXVldWUgb2YgZGVmZXJyZWQgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogSWYgeW91IG9ubHkgd2FudCBhIHByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGFmdGVyIHNvbWUgc3BlY2lmaWVkIGRlbGF5XG4gICAgICogdGhlbiB5b3UgY2FuIGNhbGwgYCR0aW1lb3V0YCB3aXRob3V0IHRoZSBgZm5gIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gZm4gQSBmdW5jdGlvbiwgd2hvc2UgZXhlY3V0aW9uIHNob3VsZCBiZSBkZWxheWVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gW2RlbGF5PTBdIERlbGF5IGluIG1pbGxpc2Vjb25kcy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbaW52b2tlQXBwbHk9dHJ1ZV0gSWYgc2V0IHRvIGBmYWxzZWAgc2tpcHMgbW9kZWwgZGlydHkgY2hlY2tpbmcsIG90aGVyd2lzZVxuICAgICAqICAgd2lsbCBpbnZva2UgYGZuYCB3aXRoaW4gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHl9IGJsb2NrLlxuICAgICAqIEBwYXJhbSB7Li4uKj19IFBhc3MgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHRoZSBleGVjdXRlZCBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gUHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2hlbiB0aGUgdGltZW91dCBpcyByZWFjaGVkLiBUaGUgcHJvbWlzZVxuICAgICAqICAgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGBmbmAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0aW1lb3V0KGZuLCBkZWxheSwgaW52b2tlQXBwbHkpIHtcbiAgICAgIGlmICghaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgaW52b2tlQXBwbHkgPSBkZWxheTtcbiAgICAgICAgZGVsYXkgPSBmbjtcbiAgICAgICAgZm4gPSBub29wO1xuICAgICAgfVxuXG4gICAgICB2YXIgYXJncyA9IHNsaWNlQXJncyhhcmd1bWVudHMsIDMpLFxuICAgICAgICAgIHNraXBBcHBseSA9IChpc0RlZmluZWQoaW52b2tlQXBwbHkpICYmICFpbnZva2VBcHBseSksXG4gICAgICAgICAgZGVmZXJyZWQgPSAoc2tpcEFwcGx5ID8gJCRxIDogJHEpLmRlZmVyKCksXG4gICAgICAgICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2UsXG4gICAgICAgICAgdGltZW91dElkO1xuXG4gICAgICB0aW1lb3V0SWQgPSAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGZuLmFwcGx5KG51bGwsIGFyZ3MpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlKTtcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBkZWxldGUgZGVmZXJyZWRzW3Byb21pc2UuJCR0aW1lb3V0SWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFza2lwQXBwbHkpICRyb290U2NvcGUuJGFwcGx5KCk7XG4gICAgICB9LCBkZWxheSk7XG5cbiAgICAgIHByb21pc2UuJCR0aW1lb3V0SWQgPSB0aW1lb3V0SWQ7XG4gICAgICBkZWZlcnJlZHNbdGltZW91dElkXSA9IGRlZmVycmVkO1xuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkdGltZW91dCNjYW5jZWxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIENhbmNlbHMgYSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgYHByb21pc2VgLiBBcyBhIHJlc3VsdCBvZiB0aGlzLCB0aGUgcHJvbWlzZSB3aWxsIGJlXG4gICAgICogcmVzb2x2ZWQgd2l0aCBhIHJlamVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UHJvbWlzZT19IHByb21pc2UgUHJvbWlzZSByZXR1cm5lZCBieSB0aGUgYCR0aW1lb3V0YCBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgaGFzbid0IGV4ZWN1dGVkIHlldCBhbmQgd2FzIHN1Y2Nlc3NmdWxseVxuICAgICAqICAgY2FuY2VsZWQuXG4gICAgICovXG4gICAgdGltZW91dC5jYW5jZWwgPSBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICBpZiAoIXByb21pc2UpIHJldHVybiBmYWxzZTtcblxuICAgICAgaWYgKCFwcm9taXNlLmhhc093blByb3BlcnR5KCckJHRpbWVvdXRJZCcpKSB7XG4gICAgICAgIHRocm93ICR0aW1lb3V0TWluRXJyKCdiYWRwcm9tJyxcbiAgICAgICAgICAgICdgJHRpbWVvdXQuY2FuY2VsKClgIGNhbGxlZCB3aXRoIGEgcHJvbWlzZSB0aGF0IHdhcyBub3QgZ2VuZXJhdGVkIGJ5IGAkdGltZW91dCgpYC4nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFkZWZlcnJlZHMuaGFzT3duUHJvcGVydHkocHJvbWlzZS4kJHRpbWVvdXRJZCkpIHJldHVybiBmYWxzZTtcblxuICAgICAgdmFyIGlkID0gcHJvbWlzZS4kJHRpbWVvdXRJZDtcbiAgICAgIHZhciBkZWZlcnJlZCA9IGRlZmVycmVkc1tpZF07XG5cbiAgICAgIC8vIFRpbWVvdXQgY2FuY2VscyBzaG91bGQgbm90IHJlcG9ydCBhbiB1bmhhbmRsZWQgcHJvbWlzZS5cbiAgICAgIG1hcmtRRXhjZXB0aW9uSGFuZGxlZChkZWZlcnJlZC5wcm9taXNlKTtcbiAgICAgIGRlZmVycmVkLnJlamVjdCgnY2FuY2VsZWQnKTtcbiAgICAgIGRlbGV0ZSBkZWZlcnJlZHNbaWRdO1xuXG4gICAgICByZXR1cm4gJGJyb3dzZXIuZGVmZXIuY2FuY2VsKGlkKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRpbWVvdXQ7XG4gIH1dO1xufVxuXG4vLyBOT1RFOiAgVGhlIHVzYWdlIG9mIHdpbmRvdyBhbmQgZG9jdW1lbnQgaW5zdGVhZCBvZiAkd2luZG93IGFuZCAkZG9jdW1lbnQgaGVyZSBpc1xuLy8gZGVsaWJlcmF0ZS4gIFRoaXMgc2VydmljZSBkZXBlbmRzIG9uIHRoZSBzcGVjaWZpYyBiZWhhdmlvciBvZiBhbmNob3Igbm9kZXMgY3JlYXRlZCBieSB0aGVcbi8vIGJyb3dzZXIgKHJlc29sdmluZyBhbmQgcGFyc2luZyBVUkxzKSB0aGF0IGlzIHVubGlrZWx5IHRvIGJlIHByb3ZpZGVkIGJ5IG1vY2sgb2JqZWN0cyBhbmRcbi8vIGNhdXNlIHVzIHRvIGJyZWFrIHRlc3RzLiAgSW4gYWRkaXRpb24sIHdoZW4gdGhlIGJyb3dzZXIgcmVzb2x2ZXMgYSBVUkwgZm9yIFhIUiwgaXRcbi8vIGRvZXNuJ3Qga25vdyBhYm91dCBtb2NrZWQgbG9jYXRpb25zIGFuZCByZXNvbHZlcyBVUkxzIHRvIHRoZSByZWFsIGRvY3VtZW50IC0gd2hpY2ggaXNcbi8vIGV4YWN0bHkgdGhlIGJlaGF2aW9yIG5lZWRlZCBoZXJlLiAgVGhlcmUgaXMgbGl0dGxlIHZhbHVlIGlzIG1vY2tpbmcgdGhlc2Ugb3V0IGZvciB0aGlzXG4vLyBzZXJ2aWNlLlxudmFyIHVybFBhcnNpbmdOb2RlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbnZhciBvcmlnaW5VcmwgPSB1cmxSZXNvbHZlKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbnZhciBiYXNlVXJsUGFyc2luZ05vZGU7XG5cblxuLyoqXG4gKlxuICogSW1wbGVtZW50YXRpb24gTm90ZXMgZm9yIG5vbi1JRSBicm93c2Vyc1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQXNzaWduaW5nIGEgVVJMIHRvIHRoZSBocmVmIHByb3BlcnR5IG9mIGFuIGFuY2hvciBET00gbm9kZSwgZXZlbiBvbmUgYXR0YWNoZWQgdG8gdGhlIERPTSxcbiAqIHJlc3VsdHMgYm90aCBpbiB0aGUgbm9ybWFsaXppbmcgYW5kIHBhcnNpbmcgb2YgdGhlIFVSTC4gIE5vcm1hbGl6aW5nIG1lYW5zIHRoYXQgYSByZWxhdGl2ZVxuICogVVJMIHdpbGwgYmUgcmVzb2x2ZWQgaW50byBhbiBhYnNvbHV0ZSBVUkwgaW4gdGhlIGNvbnRleHQgb2YgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50LlxuICogUGFyc2luZyBtZWFucyB0aGF0IHRoZSBhbmNob3Igbm9kZSdzIGhvc3QsIGhvc3RuYW1lLCBwcm90b2NvbCwgcG9ydCwgcGF0aG5hbWUgYW5kIHJlbGF0ZWRcbiAqIHByb3BlcnRpZXMgYXJlIGFsbCBwb3B1bGF0ZWQgdG8gcmVmbGVjdCB0aGUgbm9ybWFsaXplZCBVUkwuICBUaGlzIGFwcHJvYWNoIGhhcyB3aWRlXG4gKiBjb21wYXRpYmlsaXR5IC0gU2FmYXJpIDErLCBNb3ppbGxhIDErIGV0Yy4gIFNlZVxuICogaHR0cDovL3d3dy5hcHRhbmEuY29tL3JlZmVyZW5jZS9odG1sL2FwaS9IVE1MQW5jaG9yRWxlbWVudC5odG1sXG4gKlxuICogSW1wbGVtZW50YXRpb24gTm90ZXMgZm9yIElFXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIElFIDw9IDEwIG5vcm1hbGl6ZXMgdGhlIFVSTCB3aGVuIGFzc2lnbmVkIHRvIHRoZSBhbmNob3Igbm9kZSBzaW1pbGFyIHRvIHRoZSBvdGhlclxuICogYnJvd3NlcnMuICBIb3dldmVyLCB0aGUgcGFyc2VkIGNvbXBvbmVudHMgd2lsbCBub3QgYmUgc2V0IGlmIHRoZSBVUkwgYXNzaWduZWQgZGlkIG5vdCBzcGVjaWZ5XG4gKiB0aGVtLiAgKGUuZy4gaWYgeW91IGFzc2lnbiBhLmhyZWYgPSBcImZvb1wiLCB0aGVuIGEucHJvdG9jb2wsIGEuaG9zdCwgZXRjLiB3aWxsIGJlIGVtcHR5LikgIFdlXG4gKiB3b3JrIGFyb3VuZCB0aGF0IGJ5IHBlcmZvcm1pbmcgdGhlIHBhcnNpbmcgaW4gYSAybmQgc3RlcCBieSB0YWtpbmcgYSBwcmV2aW91c2x5IG5vcm1hbGl6ZWRcbiAqIFVSTCAoZS5nLiBieSBhc3NpZ25pbmcgdG8gYS5ocmVmKSBhbmQgYXNzaWduaW5nIGl0IGEuaHJlZiBhZ2Fpbi4gIFRoaXMgY29ycmVjdGx5IHBvcHVsYXRlcyB0aGVcbiAqIHByb3BlcnRpZXMgc3VjaCBhcyBwcm90b2NvbCwgaG9zdG5hbWUsIHBvcnQsIGV0Yy5cbiAqXG4gKiBSZWZlcmVuY2VzOlxuICogICBodHRwOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9IVE1MQW5jaG9yRWxlbWVudFxuICogICBodHRwOi8vd3d3LmFwdGFuYS5jb20vcmVmZXJlbmNlL2h0bWwvYXBpL0hUTUxBbmNob3JFbGVtZW50Lmh0bWxcbiAqICAgaHR0cDovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybHV0aWxzXG4gKiAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvcHVsbC8yOTAyXG4gKiAgIGh0dHA6Ly9qYW1lcy5wYWRvbHNleS5jb20vamF2YXNjcmlwdC9wYXJzaW5nLXVybHMtd2l0aC10aGUtZG9tL1xuICpcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZC4gSWYgYHVybGAgaXMgbm90IGEgc3RyaW5nLCBpdCB3aWxsIGJlIHJldHVybmVkXG4gKiAgICAgdW5jaGFuZ2VkLlxuICogQGRlc2NyaXB0aW9uIE5vcm1hbGl6ZXMgYW5kIHBhcnNlcyBhIFVSTC5cbiAqIEByZXR1cm5zIHtvYmplY3R9IFJldHVybnMgdGhlIG5vcm1hbGl6ZWQgVVJMIGFzIGEgZGljdGlvbmFyeS5cbiAqXG4gKiAgIHwgbWVtYmVyIG5hbWUgICB8IERlc2NyaXB0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICB8LS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqICAgfCBocmVmICAgICAgICAgIHwgQSBub3JtYWxpemVkIHZlcnNpb24gb2YgdGhlIHByb3ZpZGVkIFVSTCBpZiBpdCB3YXMgbm90IGFuIGFic29sdXRlIFVSTCB8XG4gKiAgIHwgcHJvdG9jb2wgICAgICB8IFRoZSBwcm90b2NvbCB3aXRob3V0IHRoZSB0cmFpbGluZyBjb2xvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICB8IGhvc3QgICAgICAgICAgfCBUaGUgaG9zdCBhbmQgcG9ydCAoaWYgdGhlIHBvcnQgaXMgbm9uLWRlZmF1bHQpIG9mIHRoZSBub3JtYWxpemVkVXJsICAgIHxcbiAqICAgfCBzZWFyY2ggICAgICAgIHwgVGhlIHNlYXJjaCBwYXJhbXMsIG1pbnVzIHRoZSBxdWVzdGlvbiBtYXJrICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgIHwgaGFzaCAgICAgICAgICB8IFRoZSBoYXNoIHN0cmluZywgbWludXMgdGhlIGhhc2ggc3ltYm9sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICB8IGhvc3RuYW1lICAgICAgfCBUaGUgaG9zdG5hbWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgfCBwb3J0ICAgICAgICAgIHwgVGhlIHBvcnQsIHdpdGhvdXQgXCI6XCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgfCBwYXRobmFtZSAgICAgIHwgVGhlIHBhdGhuYW1lLCBiZWdpbm5pbmcgd2l0aCBcIi9cIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqXG4gKi9cbmZ1bmN0aW9uIHVybFJlc29sdmUodXJsKSB7XG4gIGlmICghaXNTdHJpbmcodXJsKSkgcmV0dXJuIHVybDtcblxuICB2YXIgaHJlZiA9IHVybDtcblxuICAvLyBTdXBwb3J0OiBJRSA5LTExIG9ubHlcbiAgaWYgKG1zaWUpIHtcbiAgICAvLyBOb3JtYWxpemUgYmVmb3JlIHBhcnNlLiAgUmVmZXIgSW1wbGVtZW50YXRpb24gTm90ZXMgb24gd2h5IHRoaXMgaXNcbiAgICAvLyBkb25lIGluIHR3byBzdGVwcyBvbiBJRS5cbiAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcbiAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcbiAgfVxuXG4gIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXG4gIHJldHVybiB7XG4gICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZixcbiAgICBwcm90b2NvbDogdXJsUGFyc2luZ05vZGUucHJvdG9jb2wgPyB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLFxuICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsXG4gICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgIGhhc2g6IHVybFBhcnNpbmdOb2RlLmhhc2ggPyB1cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJycsXG4gICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLFxuICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsXG4gICAgcGF0aG5hbWU6ICh1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJylcbiAgICAgID8gdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcbiAgICAgIDogJy8nICsgdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcbiAgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHJlcXVlc3QgVVJMIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGlzIGlzIGEgc2FtZS1vcmlnaW4gcmVxdWVzdCBhcyB0aGUgYXBwbGljYXRpb25cbiAqIGRvY3VtZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcmVxdWVzdFVybCBUaGUgdXJsIG9mIHRoZSByZXF1ZXN0IGFzIGEgc3RyaW5nIHRoYXQgd2lsbCBiZSByZXNvbHZlZFxuICogb3IgYSBwYXJzZWQgVVJMIG9iamVjdC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSByZXF1ZXN0IGlzIGZvciB0aGUgc2FtZSBvcmlnaW4gYXMgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50LlxuICovXG5mdW5jdGlvbiB1cmxJc1NhbWVPcmlnaW4ocmVxdWVzdFVybCkge1xuICByZXR1cm4gdXJsc0FyZVNhbWVPcmlnaW4ocmVxdWVzdFVybCwgb3JpZ2luVXJsKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHJlcXVlc3QgVVJMIGFuZCBkZXRlcm1pbmUgd2hldGhlciBpdCBpcyBzYW1lLW9yaWdpbiBhcyB0aGUgY3VycmVudCBkb2N1bWVudCBiYXNlIFVSTC5cbiAqXG4gKiBOb3RlOiBUaGUgYmFzZSBVUkwgaXMgdXN1YWxseSB0aGUgc2FtZSBhcyB0aGUgZG9jdW1lbnQgbG9jYXRpb24gKGBsb2NhdGlvbi5ocmVmYCkgYnV0IGNhblxuICogYmUgb3ZlcnJpZGVuIGJ5IHVzaW5nIHRoZSBgPGJhc2U+YCB0YWcuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSByZXF1ZXN0VXJsIFRoZSB1cmwgb2YgdGhlIHJlcXVlc3QgYXMgYSBzdHJpbmcgdGhhdCB3aWxsIGJlIHJlc29sdmVkXG4gKiBvciBhIHBhcnNlZCBVUkwgb2JqZWN0LlxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIFVSTCBpcyBzYW1lLW9yaWdpbiBhcyB0aGUgZG9jdW1lbnQgYmFzZSBVUkwuXG4gKi9cbmZ1bmN0aW9uIHVybElzU2FtZU9yaWdpbkFzQmFzZVVybChyZXF1ZXN0VXJsKSB7XG4gIHJldHVybiB1cmxzQXJlU2FtZU9yaWdpbihyZXF1ZXN0VXJsLCBnZXRCYXNlVXJsKCkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgY2FuIGNoZWNrIGEgVVJMJ3Mgb3JpZ2luIGFnYWluc3QgYSBsaXN0IG9mIGFsbG93ZWQvd2hpdGVsaXN0ZWQgb3JpZ2lucy5cbiAqIFRoZSBjdXJyZW50IGxvY2F0aW9uJ3Mgb3JpZ2luIGlzIGltcGxpY2l0bHkgdHJ1c3RlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSB3aGl0ZWxpc3RlZE9yaWdpblVybHMgLSBBIGxpc3Qgb2YgVVJMcyAoc3RyaW5ncyksIHdob3NlIG9yaWdpbnMgYXJlIHRydXN0ZWQuXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufSAtIEEgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIFVSTCAoc3RyaW5nIG9yIHBhcnNlZCBVUkwgb2JqZWN0KSBhbmQgcmV0dXJuc1xuICogICAgIHdoZXRoZXIgaXQgaXMgb2YgYW4gYWxsb3dlZCBvcmlnaW4uXG4gKi9cbmZ1bmN0aW9uIHVybElzQWxsb3dlZE9yaWdpbkZhY3Rvcnkod2hpdGVsaXN0ZWRPcmlnaW5VcmxzKSB7XG4gIHZhciBwYXJzZWRBbGxvd2VkT3JpZ2luVXJscyA9IFtvcmlnaW5VcmxdLmNvbmNhdCh3aGl0ZWxpc3RlZE9yaWdpblVybHMubWFwKHVybFJlc29sdmUpKTtcblxuICAvKipcbiAgICogQ2hlY2sgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCAoc3RyaW5nIG9yIHBhcnNlZCBVUkwgb2JqZWN0KSBoYXMgYW4gb3JpZ2luIHRoYXQgaXMgYWxsb3dlZFxuICAgKiBiYXNlZCBvbiBhIGxpc3Qgb2Ygd2hpdGVsaXN0ZWQtb3JpZ2luIFVSTHMuIFRoZSBjdXJyZW50IGxvY2F0aW9uJ3Mgb3JpZ2luIGlzIGltcGxpY2l0bHlcbiAgICogdHJ1c3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSByZXF1ZXN0VXJsIC0gVGhlIFVSTCB0byBiZSBjaGVja2VkIChwcm92aWRlZCBhcyBhIHN0cmluZyB0aGF0IHdpbGwgYmVcbiAgICogICAgIHJlc29sdmVkIG9yIGEgcGFyc2VkIFVSTCBvYmplY3QpLlxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBXaGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIG9mIGFuIGFsbG93ZWQgb3JpZ2luLlxuICAgKi9cbiAgcmV0dXJuIGZ1bmN0aW9uIHVybElzQWxsb3dlZE9yaWdpbihyZXF1ZXN0VXJsKSB7XG4gICAgdmFyIHBhcnNlZFVybCA9IHVybFJlc29sdmUocmVxdWVzdFVybCk7XG4gICAgcmV0dXJuIHBhcnNlZEFsbG93ZWRPcmlnaW5VcmxzLnNvbWUodXJsc0FyZVNhbWVPcmlnaW4uYmluZChudWxsLCBwYXJzZWRVcmwpKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIFVSTHMgc2hhcmUgdGhlIHNhbWUgb3JpZ2luLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gdXJsMSAtIEZpcnN0IFVSTCB0byBjb21wYXJlIGFzIGEgc3RyaW5nIG9yIGEgbm9ybWFsaXplZCBVUkwgaW4gdGhlIGZvcm0gb2ZcbiAqICAgICBhIGRpY3Rpb25hcnkgb2JqZWN0IHJldHVybmVkIGJ5IGB1cmxSZXNvbHZlKClgLlxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSB1cmwyIC0gU2Vjb25kIFVSTCB0byBjb21wYXJlIGFzIGEgc3RyaW5nIG9yIGEgbm9ybWFsaXplZCBVUkwgaW4gdGhlIGZvcm1cbiAqICAgICBvZiBhIGRpY3Rpb25hcnkgb2JqZWN0IHJldHVybmVkIGJ5IGB1cmxSZXNvbHZlKClgLlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSAtIFRydWUgaWYgYm90aCBVUkxzIGhhdmUgdGhlIHNhbWUgb3JpZ2luLCBhbmQgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiB1cmxzQXJlU2FtZU9yaWdpbih1cmwxLCB1cmwyKSB7XG4gIHVybDEgPSB1cmxSZXNvbHZlKHVybDEpO1xuICB1cmwyID0gdXJsUmVzb2x2ZSh1cmwyKTtcblxuICByZXR1cm4gKHVybDEucHJvdG9jb2wgPT09IHVybDIucHJvdG9jb2wgJiZcbiAgICAgICAgICB1cmwxLmhvc3QgPT09IHVybDIuaG9zdCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudCBiYXNlIFVSTC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldEJhc2VVcmwoKSB7XG4gIGlmICh3aW5kb3cuZG9jdW1lbnQuYmFzZVVSSSkge1xuICAgIHJldHVybiB3aW5kb3cuZG9jdW1lbnQuYmFzZVVSSTtcbiAgfVxuXG4gIC8vIGBkb2N1bWVudC5iYXNlVVJJYCBpcyBhdmFpbGFibGUgZXZlcnl3aGVyZSBleGNlcHQgSUVcbiAgaWYgKCFiYXNlVXJsUGFyc2luZ05vZGUpIHtcbiAgICBiYXNlVXJsUGFyc2luZ05vZGUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGJhc2VVcmxQYXJzaW5nTm9kZS5ocmVmID0gJy4nO1xuXG4gICAgLy8gV29yay1hcm91bmQgZm9yIElFIGJ1ZyBkZXNjcmliZWQgaW4gSW1wbGVtZW50YXRpb24gTm90ZXMuIFRoZSBmaXggaW4gYHVybFJlc29sdmUoKWAgaXMgbm90XG4gICAgLy8gc3VpdGFibGUgaGVyZSBiZWNhdXNlIHdlIG5lZWQgdG8gdHJhY2sgY2hhbmdlcyB0byB0aGUgYmFzZSBVUkwuXG4gICAgYmFzZVVybFBhcnNpbmdOb2RlID0gYmFzZVVybFBhcnNpbmdOb2RlLmNsb25lTm9kZShmYWxzZSk7XG4gIH1cbiAgcmV0dXJuIGJhc2VVcmxQYXJzaW5nTm9kZS5ocmVmO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkd2luZG93XG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSByZWZlcmVuY2UgdG8gdGhlIGJyb3dzZXIncyBgd2luZG93YCBvYmplY3QuIFdoaWxlIGB3aW5kb3dgXG4gKiBpcyBnbG9iYWxseSBhdmFpbGFibGUgaW4gSmF2YVNjcmlwdCwgaXQgY2F1c2VzIHRlc3RhYmlsaXR5IHByb2JsZW1zLCBiZWNhdXNlXG4gKiBpdCBpcyBhIGdsb2JhbCB2YXJpYWJsZS4gSW4gQW5ndWxhckpTIHdlIGFsd2F5cyByZWZlciB0byBpdCB0aHJvdWdoIHRoZVxuICogYCR3aW5kb3dgIHNlcnZpY2UsIHNvIGl0IG1heSBiZSBvdmVycmlkZGVuLCByZW1vdmVkIG9yIG1vY2tlZCBmb3IgdGVzdGluZy5cbiAqXG4gKiBFeHByZXNzaW9ucywgbGlrZSB0aGUgb25lIGRlZmluZWQgZm9yIHRoZSBgbmdDbGlja2AgZGlyZWN0aXZlIGluIHRoZSBleGFtcGxlXG4gKiBiZWxvdywgYXJlIGV2YWx1YXRlZCB3aXRoIHJlc3BlY3QgdG8gdGhlIGN1cnJlbnQgc2NvcGUuICBUaGVyZWZvcmUsIHRoZXJlIGlzXG4gKiBubyByaXNrIG9mIGluYWR2ZXJ0ZW50bHkgY29kaW5nIGluIGEgZGVwZW5kZW5jeSBvbiBhIGdsb2JhbCB2YWx1ZSBpbiBzdWNoIGFuXG4gKiBleHByZXNzaW9uLlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJ3aW5kb3dFeGFtcGxlXCIgbmFtZT1cIndpbmRvdy1zZXJ2aWNlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd3aW5kb3dFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyR3aW5kb3cnLCBmdW5jdGlvbigkc2NvcGUsICR3aW5kb3cpIHtcbiAgICAgICAgICAgICAkc2NvcGUuZ3JlZXRpbmcgPSAnSGVsbG8sIFdvcmxkISc7XG4gICAgICAgICAgICAgJHNjb3BlLmRvR3JlZXRpbmcgPSBmdW5jdGlvbihncmVldGluZykge1xuICAgICAgICAgICAgICAgJHdpbmRvdy5hbGVydChncmVldGluZyk7XG4gICAgICAgICAgICAgfTtcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImdyZWV0aW5nXCIgYXJpYS1sYWJlbD1cImdyZWV0aW5nXCIgLz5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJkb0dyZWV0aW5nKGdyZWV0aW5nKVwiPkFMRVJUPC9idXR0b24+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHRoZSBncmVldGluZyBpbiB0aGUgaW5wdXQgYm94JywgZnVuY3Rpb24oKSB7XG4gICAgICAgZWxlbWVudChieS5tb2RlbCgnZ3JlZXRpbmcnKSkuc2VuZEtleXMoJ0hlbGxvLCBFMkUgVGVzdHMnKTtcbiAgICAgICAvLyBJZiB3ZSBjbGljayB0aGUgYnV0dG9uIGl0IHdpbGwgYmxvY2sgdGhlIHRlc3QgcnVubmVyXG4gICAgICAgLy8gZWxlbWVudCgnOmJ1dHRvbicpLmNsaWNrKCk7XG4gICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiAkV2luZG93UHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IHZhbHVlRm4od2luZG93KTtcbn1cblxuLyoqXG4gKiBAbmFtZSAkJGNvb2tpZVJlYWRlclxuICogQHJlcXVpcmVzICRkb2N1bWVudFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBpcyBhIHByaXZhdGUgc2VydmljZSBmb3IgcmVhZGluZyBjb29raWVzIHVzZWQgYnkgJGh0dHAgYW5kIG5nQ29va2llc1xuICpcbiAqIEByZXR1cm4ge09iamVjdH0gYSBrZXkvdmFsdWUgbWFwIG9mIHRoZSBjdXJyZW50IGNvb2tpZXNcbiAqL1xuZnVuY3Rpb24gJCRDb29raWVSZWFkZXIoJGRvY3VtZW50KSB7XG4gIHZhciByYXdEb2N1bWVudCA9ICRkb2N1bWVudFswXSB8fCB7fTtcbiAgdmFyIGxhc3RDb29raWVzID0ge307XG4gIHZhciBsYXN0Q29va2llU3RyaW5nID0gJyc7XG5cbiAgZnVuY3Rpb24gc2FmZUdldENvb2tpZShyYXdEb2N1bWVudCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gcmF3RG9jdW1lbnQuY29va2llIHx8ICcnO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzYWZlRGVjb2RlVVJJQ29tcG9uZW50KHN0cikge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHN0cik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvb2tpZUFycmF5LCBjb29raWUsIGksIGluZGV4LCBuYW1lO1xuICAgIHZhciBjdXJyZW50Q29va2llU3RyaW5nID0gc2FmZUdldENvb2tpZShyYXdEb2N1bWVudCk7XG5cbiAgICBpZiAoY3VycmVudENvb2tpZVN0cmluZyAhPT0gbGFzdENvb2tpZVN0cmluZykge1xuICAgICAgbGFzdENvb2tpZVN0cmluZyA9IGN1cnJlbnRDb29raWVTdHJpbmc7XG4gICAgICBjb29raWVBcnJheSA9IGxhc3RDb29raWVTdHJpbmcuc3BsaXQoJzsgJyk7XG4gICAgICBsYXN0Q29va2llcyA9IHt9O1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgY29va2llQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29va2llID0gY29va2llQXJyYXlbaV07XG4gICAgICAgIGluZGV4ID0gY29va2llLmluZGV4T2YoJz0nKTtcbiAgICAgICAgaWYgKGluZGV4ID4gMCkgeyAvL2lnbm9yZSBuYW1lbGVzcyBjb29raWVzXG4gICAgICAgICAgbmFtZSA9IHNhZmVEZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZygwLCBpbmRleCkpO1xuICAgICAgICAgIC8vIHRoZSBmaXJzdCB2YWx1ZSB0aGF0IGlzIHNlZW4gZm9yIGEgY29va2llIGlzIHRoZSBtb3N0XG4gICAgICAgICAgLy8gc3BlY2lmaWMgb25lLiAgdmFsdWVzIGZvciB0aGUgc2FtZSBjb29raWUgbmFtZSB0aGF0XG4gICAgICAgICAgLy8gZm9sbG93IGFyZSBmb3IgbGVzcyBzcGVjaWZpYyBwYXRocy5cbiAgICAgICAgICBpZiAoaXNVbmRlZmluZWQobGFzdENvb2tpZXNbbmFtZV0pKSB7XG4gICAgICAgICAgICBsYXN0Q29va2llc1tuYW1lXSA9IHNhZmVEZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhpbmRleCArIDEpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxhc3RDb29raWVzO1xuICB9O1xufVxuXG4kJENvb2tpZVJlYWRlci4kaW5qZWN0ID0gWyckZG9jdW1lbnQnXTtcblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkJENvb2tpZVJlYWRlclByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSAkJENvb2tpZVJlYWRlcjtcbn1cblxuLyogZ2xvYmFsIGN1cnJlbmN5RmlsdGVyOiB0cnVlLFxuIGRhdGVGaWx0ZXI6IHRydWUsXG4gZmlsdGVyRmlsdGVyOiB0cnVlLFxuIGpzb25GaWx0ZXI6IHRydWUsXG4gbGltaXRUb0ZpbHRlcjogdHJ1ZSxcbiBsb3dlcmNhc2VGaWx0ZXI6IHRydWUsXG4gbnVtYmVyRmlsdGVyOiB0cnVlLFxuIG9yZGVyQnlGaWx0ZXI6IHRydWUsXG4gdXBwZXJjYXNlRmlsdGVyOiB0cnVlLFxuICovXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkZmlsdGVyUHJvdmlkZXJcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEZpbHRlcnMgYXJlIGp1c3QgZnVuY3Rpb25zIHdoaWNoIHRyYW5zZm9ybSBpbnB1dCB0byBhbiBvdXRwdXQuIEhvd2V2ZXIgZmlsdGVycyBuZWVkIHRvIGJlXG4gKiBEZXBlbmRlbmN5IEluamVjdGVkLiBUbyBhY2hpZXZlIHRoaXMgYSBmaWx0ZXIgZGVmaW5pdGlvbiBjb25zaXN0cyBvZiBhIGZhY3RvcnkgZnVuY3Rpb24gd2hpY2ggaXNcbiAqIGFubm90YXRlZCB3aXRoIGRlcGVuZGVuY2llcyBhbmQgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIGEgZmlsdGVyIGZ1bmN0aW9uLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogRmlsdGVyIG5hbWVzIG11c3QgYmUgdmFsaWQgQW5ndWxhckpTIHtAbGluayBleHByZXNzaW9ufSBpZGVudGlmaWVycywgc3VjaCBhcyBgdXBwZXJjYXNlYCBvciBgb3JkZXJCeWAuXG4gKiBOYW1lcyB3aXRoIHNwZWNpYWwgY2hhcmFjdGVycywgc3VjaCBhcyBoeXBoZW5zIGFuZCBkb3RzLCBhcmUgbm90IGFsbG93ZWQuIElmIHlvdSB3aXNoIHRvIG5hbWVzcGFjZVxuICogeW91ciBmaWx0ZXJzLCB0aGVuIHlvdSBjYW4gdXNlIGNhcGl0YWxpemF0aW9uIChgbXlhcHBTdWJzZWN0aW9uRmlsdGVyeGApIG9yIHVuZGVyc2NvcmVzXG4gKiAoYG15YXBwX3N1YnNlY3Rpb25fZmlsdGVyeGApLlxuICogPC9kaXY+XG4gKlxuICogYGBganNcbiAqICAgLy8gRmlsdGVyIHJlZ2lzdHJhdGlvblxuICogICBmdW5jdGlvbiBNeU1vZHVsZSgkcHJvdmlkZSwgJGZpbHRlclByb3ZpZGVyKSB7XG4gKiAgICAgLy8gY3JlYXRlIGEgc2VydmljZSB0byBkZW1vbnN0cmF0ZSBpbmplY3Rpb24gKG5vdCBhbHdheXMgbmVlZGVkKVxuICogICAgICRwcm92aWRlLnZhbHVlKCdncmVldCcsIGZ1bmN0aW9uKG5hbWUpe1xuICogICAgICAgcmV0dXJuICdIZWxsbyAnICsgbmFtZSArICchJztcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgLy8gcmVnaXN0ZXIgYSBmaWx0ZXIgZmFjdG9yeSB3aGljaCB1c2VzIHRoZVxuICogICAgIC8vIGdyZWV0IHNlcnZpY2UgdG8gZGVtb25zdHJhdGUgREkuXG4gKiAgICAgJGZpbHRlclByb3ZpZGVyLnJlZ2lzdGVyKCdncmVldCcsIGZ1bmN0aW9uKGdyZWV0KXtcbiAqICAgICAgIC8vIHJldHVybiB0aGUgZmlsdGVyIGZ1bmN0aW9uIHdoaWNoIHVzZXMgdGhlIGdyZWV0IHNlcnZpY2VcbiAqICAgICAgIC8vIHRvIGdlbmVyYXRlIHNhbHV0YXRpb25cbiAqICAgICAgIHJldHVybiBmdW5jdGlvbih0ZXh0KSB7XG4gKiAgICAgICAgIC8vIGZpbHRlcnMgbmVlZCB0byBiZSBmb3JnaXZpbmcgc28gY2hlY2sgaW5wdXQgdmFsaWRpdHlcbiAqICAgICAgICAgcmV0dXJuIHRleHQgJiYgZ3JlZXQodGV4dCkgfHwgdGV4dDtcbiAqICAgICAgIH07XG4gKiAgICAgfSk7XG4gKiAgIH1cbiAqIGBgYFxuICpcbiAqIFRoZSBmaWx0ZXIgZnVuY3Rpb24gaXMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBgJGluamVjdG9yYCB1bmRlciB0aGUgZmlsdGVyIG5hbWUgc3VmZml4IHdpdGhcbiAqIGBGaWx0ZXJgLlxuICpcbiAqIGBgYGpzXG4gKiAgIGl0KCdzaG91bGQgYmUgdGhlIHNhbWUgaW5zdGFuY2UnLCBpbmplY3QoXG4gKiAgICAgZnVuY3Rpb24oJGZpbHRlclByb3ZpZGVyKSB7XG4gKiAgICAgICAkZmlsdGVyUHJvdmlkZXIucmVnaXN0ZXIoJ3JldmVyc2UnLCBmdW5jdGlvbigpe1xuICogICAgICAgICByZXR1cm4gLi4uO1xuICogICAgICAgfSk7XG4gKiAgICAgfSxcbiAqICAgICBmdW5jdGlvbigkZmlsdGVyLCByZXZlcnNlRmlsdGVyKSB7XG4gKiAgICAgICBleHBlY3QoJGZpbHRlcigncmV2ZXJzZScpKS50b0JlKHJldmVyc2VGaWx0ZXIpO1xuICogICAgIH0pO1xuICogYGBgXG4gKlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGhvdyBBbmd1bGFySlMgZmlsdGVycyB3b3JrLCBhbmQgaG93IHRvIGNyZWF0ZSB5b3VyIG93biBmaWx0ZXJzLCBzZWVcbiAqIHtAbGluayBndWlkZS9maWx0ZXIgRmlsdGVyc30gaW4gdGhlIEFuZ3VsYXJKUyBEZXZlbG9wZXIgR3VpZGUuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGZpbHRlclxuICogQGtpbmQgZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvblxuICogRmlsdGVycyBhcmUgdXNlZCBmb3IgZm9ybWF0dGluZyBkYXRhIGRpc3BsYXllZCB0byB0aGUgdXNlci5cbiAqXG4gKiBUaGV5IGNhbiBiZSB1c2VkIGluIHZpZXcgdGVtcGxhdGVzLCBjb250cm9sbGVycyBvciBzZXJ2aWNlcy4gQW5ndWxhckpTIGNvbWVzXG4gKiB3aXRoIGEgY29sbGVjdGlvbiBvZiBbYnVpbHQtaW4gZmlsdGVyc10oYXBpL25nL2ZpbHRlciksIGJ1dCBpdCBpcyBlYXN5IHRvXG4gKiBkZWZpbmUgeW91ciBvd24gYXMgd2VsbC5cbiAqXG4gKiBUaGUgZ2VuZXJhbCBzeW50YXggaW4gdGVtcGxhdGVzIGlzIGFzIGZvbGxvd3M6XG4gKlxuICogYGBgaHRtbFxuICoge3sgZXhwcmVzc2lvbiBbfCBmaWx0ZXJfbmFtZVs6cGFyYW1ldGVyX3ZhbHVlXSAuLi4gXSB9fVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgZmlsdGVyIGZ1bmN0aW9uIHRvIHJldHJpZXZlXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGhlIGZpbHRlciBmdW5jdGlvblxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCIkZmlsdGVyXCIgbW9kdWxlPVwiZmlsdGVyRXhhbXBsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIk1haW5DdHJsXCI+XG4gICAgICAgIDxoMz57eyBvcmlnaW5hbFRleHQgfX08L2gzPlxuICAgICAgICA8aDM+e3sgZmlsdGVyZWRUZXh0IH19PC9oMz5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuXG4gICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdmaWx0ZXJFeGFtcGxlJywgW10pXG4gICAgICAuY29udHJvbGxlcignTWFpbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRmaWx0ZXIpIHtcbiAgICAgICAgJHNjb3BlLm9yaWdpbmFsVGV4dCA9ICdoZWxsbyc7XG4gICAgICAgICRzY29wZS5maWx0ZXJlZFRleHQgPSAkZmlsdGVyKCd1cHBlcmNhc2UnKSgkc2NvcGUub3JpZ2luYWxUZXh0KTtcbiAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gICovXG4kRmlsdGVyUHJvdmlkZXIuJGluamVjdCA9IFsnJHByb3ZpZGUnXTtcbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJEZpbHRlclByb3ZpZGVyKCRwcm92aWRlKSB7XG4gIHZhciBzdWZmaXggPSAnRmlsdGVyJztcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkZmlsdGVyUHJvdmlkZXIjcmVnaXN0ZXJcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIE5hbWUgb2YgdGhlIGZpbHRlciBmdW5jdGlvbiwgb3IgYW4gb2JqZWN0IG1hcCBvZiBmaWx0ZXJzIHdoZXJlXG4gICAqICAgIHRoZSBrZXlzIGFyZSB0aGUgZmlsdGVyIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgZmlsdGVyIGZhY3Rvcmllcy5cbiAgICpcbiAgICogICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogICAgKipOb3RlOioqIEZpbHRlciBuYW1lcyBtdXN0IGJlIHZhbGlkIEFuZ3VsYXJKUyB7QGxpbmsgZXhwcmVzc2lvbn0gaWRlbnRpZmllcnMsIHN1Y2ggYXMgYHVwcGVyY2FzZWAgb3IgYG9yZGVyQnlgLlxuICAgKiAgICBOYW1lcyB3aXRoIHNwZWNpYWwgY2hhcmFjdGVycywgc3VjaCBhcyBoeXBoZW5zIGFuZCBkb3RzLCBhcmUgbm90IGFsbG93ZWQuIElmIHlvdSB3aXNoIHRvIG5hbWVzcGFjZVxuICAgKiAgICB5b3VyIGZpbHRlcnMsIHRoZW4geW91IGNhbiB1c2UgY2FwaXRhbGl6YXRpb24gKGBteWFwcFN1YnNlY3Rpb25GaWx0ZXJ4YCkgb3IgdW5kZXJzY29yZXNcbiAgICogICAgKGBteWFwcF9zdWJzZWN0aW9uX2ZpbHRlcnhgKS5cbiAgICogICAgPC9kaXY+XG4gICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmYWN0b3J5IElmIHRoZSBmaXJzdCBhcmd1bWVudCB3YXMgYSBzdHJpbmcsIGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgdGhlIGZpbHRlciB0byBiZSByZWdpc3RlcmVkLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZWdpc3RlcmVkIGZpbHRlciBpbnN0YW5jZSwgb3IgaWYgYSBtYXAgb2YgZmlsdGVycyB3YXMgcHJvdmlkZWQgdGhlbiBhIG1hcFxuICAgKiAgICBvZiB0aGUgcmVnaXN0ZXJlZCBmaWx0ZXIgaW5zdGFuY2VzLlxuICAgKi9cbiAgZnVuY3Rpb24gcmVnaXN0ZXIobmFtZSwgZmFjdG9yeSkge1xuICAgIGlmIChpc09iamVjdChuYW1lKSkge1xuICAgICAgdmFyIGZpbHRlcnMgPSB7fTtcbiAgICAgIGZvckVhY2gobmFtZSwgZnVuY3Rpb24oZmlsdGVyLCBrZXkpIHtcbiAgICAgICAgZmlsdGVyc1trZXldID0gcmVnaXN0ZXIoa2V5LCBmaWx0ZXIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZmlsdGVycztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICRwcm92aWRlLmZhY3RvcnkobmFtZSArIHN1ZmZpeCwgZmFjdG9yeSk7XG4gICAgfVxuICB9XG4gIHRoaXMucmVnaXN0ZXIgPSByZWdpc3RlcjtcblxuICB0aGlzLiRnZXQgPSBbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gJGluamVjdG9yLmdldChuYW1lICsgc3VmZml4KTtcbiAgICB9O1xuICB9XTtcblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLyogZ2xvYmFsXG4gICAgY3VycmVuY3lGaWx0ZXI6IGZhbHNlLFxuICAgIGRhdGVGaWx0ZXI6IGZhbHNlLFxuICAgIGZpbHRlckZpbHRlcjogZmFsc2UsXG4gICAganNvbkZpbHRlcjogZmFsc2UsXG4gICAgbGltaXRUb0ZpbHRlcjogZmFsc2UsXG4gICAgbG93ZXJjYXNlRmlsdGVyOiBmYWxzZSxcbiAgICBudW1iZXJGaWx0ZXI6IGZhbHNlLFxuICAgIG9yZGVyQnlGaWx0ZXI6IGZhbHNlLFxuICAgIHVwcGVyY2FzZUZpbHRlcjogZmFsc2VcbiAgKi9cblxuICByZWdpc3RlcignY3VycmVuY3knLCBjdXJyZW5jeUZpbHRlcik7XG4gIHJlZ2lzdGVyKCdkYXRlJywgZGF0ZUZpbHRlcik7XG4gIHJlZ2lzdGVyKCdmaWx0ZXInLCBmaWx0ZXJGaWx0ZXIpO1xuICByZWdpc3RlcignanNvbicsIGpzb25GaWx0ZXIpO1xuICByZWdpc3RlcignbGltaXRUbycsIGxpbWl0VG9GaWx0ZXIpO1xuICByZWdpc3RlcignbG93ZXJjYXNlJywgbG93ZXJjYXNlRmlsdGVyKTtcbiAgcmVnaXN0ZXIoJ251bWJlcicsIG51bWJlckZpbHRlcik7XG4gIHJlZ2lzdGVyKCdvcmRlckJ5Jywgb3JkZXJCeUZpbHRlcik7XG4gIHJlZ2lzdGVyKCd1cHBlcmNhc2UnLCB1cHBlcmNhc2VGaWx0ZXIpO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGZpbHRlclxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNlbGVjdHMgYSBzdWJzZXQgb2YgaXRlbXMgZnJvbSBgYXJyYXlgIGFuZCByZXR1cm5zIGl0IGFzIGEgbmV3IGFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBzb3VyY2UgYXJyYXkuXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogICAqKk5vdGUqKjogSWYgdGhlIGFycmF5IGNvbnRhaW5zIG9iamVjdHMgdGhhdCByZWZlcmVuY2UgdGhlbXNlbHZlcywgZmlsdGVyaW5nIGlzIG5vdCBwb3NzaWJsZS5cbiAqIDwvZGl2PlxuICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fGZ1bmN0aW9uKCl9IGV4cHJlc3Npb24gVGhlIHByZWRpY2F0ZSB0byBiZSB1c2VkIGZvciBzZWxlY3RpbmcgaXRlbXMgZnJvbVxuICogICBgYXJyYXlgLlxuICpcbiAqICAgQ2FuIGJlIG9uZSBvZjpcbiAqXG4gKiAgIC0gYHN0cmluZ2A6IFRoZSBzdHJpbmcgaXMgdXNlZCBmb3IgbWF0Y2hpbmcgYWdhaW5zdCB0aGUgY29udGVudHMgb2YgdGhlIGBhcnJheWAuIEFsbCBzdHJpbmdzIG9yXG4gKiAgICAgb2JqZWN0cyB3aXRoIHN0cmluZyBwcm9wZXJ0aWVzIGluIGBhcnJheWAgdGhhdCBtYXRjaCB0aGlzIHN0cmluZyB3aWxsIGJlIHJldHVybmVkLiBUaGlzIGFsc29cbiAqICAgICBhcHBsaWVzIHRvIG5lc3RlZCBvYmplY3QgcHJvcGVydGllcy5cbiAqICAgICBUaGUgcHJlZGljYXRlIGNhbiBiZSBuZWdhdGVkIGJ5IHByZWZpeGluZyB0aGUgc3RyaW5nIHdpdGggYCFgLlxuICpcbiAqICAgLSBgT2JqZWN0YDogQSBwYXR0ZXJuIG9iamVjdCBjYW4gYmUgdXNlZCB0byBmaWx0ZXIgc3BlY2lmaWMgcHJvcGVydGllcyBvbiBvYmplY3RzIGNvbnRhaW5lZFxuICogICAgIGJ5IGBhcnJheWAuIEZvciBleGFtcGxlIGB7bmFtZTpcIk1cIiwgcGhvbmU6XCIxXCJ9YCBwcmVkaWNhdGUgd2lsbCByZXR1cm4gYW4gYXJyYXkgb2YgaXRlbXNcbiAqICAgICB3aGljaCBoYXZlIHByb3BlcnR5IGBuYW1lYCBjb250YWluaW5nIFwiTVwiIGFuZCBwcm9wZXJ0eSBgcGhvbmVgIGNvbnRhaW5pbmcgXCIxXCIuIEEgc3BlY2lhbFxuICogICAgIHByb3BlcnR5IG5hbWUgKGAkYCBieSBkZWZhdWx0KSBjYW4gYmUgdXNlZCAoZS5nLiBhcyBpbiBgeyQ6IFwidGV4dFwifWApIHRvIGFjY2VwdCBhIG1hdGNoXG4gKiAgICAgYWdhaW5zdCBhbnkgcHJvcGVydHkgb2YgdGhlIG9iamVjdCBvciBpdHMgbmVzdGVkIG9iamVjdCBwcm9wZXJ0aWVzLiBUaGF0J3MgZXF1aXZhbGVudCB0byB0aGVcbiAqICAgICBzaW1wbGUgc3Vic3RyaW5nIG1hdGNoIHdpdGggYSBgc3RyaW5nYCBhcyBkZXNjcmliZWQgYWJvdmUuIFRoZSBzcGVjaWFsIHByb3BlcnR5IG5hbWUgY2FuIGJlXG4gKiAgICAgb3ZlcndyaXR0ZW4sIHVzaW5nIHRoZSBgYW55UHJvcGVydHlLZXlgIHBhcmFtZXRlci5cbiAqICAgICBUaGUgcHJlZGljYXRlIGNhbiBiZSBuZWdhdGVkIGJ5IHByZWZpeGluZyB0aGUgc3RyaW5nIHdpdGggYCFgLlxuICogICAgIEZvciBleGFtcGxlIGB7bmFtZTogXCIhTVwifWAgcHJlZGljYXRlIHdpbGwgcmV0dXJuIGFuIGFycmF5IG9mIGl0ZW1zIHdoaWNoIGhhdmUgcHJvcGVydHkgYG5hbWVgXG4gKiAgICAgbm90IGNvbnRhaW5pbmcgXCJNXCIuXG4gKlxuICogICAgIE5vdGUgdGhhdCBhIG5hbWVkIHByb3BlcnR5IHdpbGwgbWF0Y2ggcHJvcGVydGllcyBvbiB0aGUgc2FtZSBsZXZlbCBvbmx5LCB3aGlsZSB0aGUgc3BlY2lhbFxuICogICAgIGAkYCBwcm9wZXJ0eSB3aWxsIG1hdGNoIHByb3BlcnRpZXMgb24gdGhlIHNhbWUgbGV2ZWwgb3IgZGVlcGVyLiBFLmcuIGFuIGFycmF5IGl0ZW0gbGlrZVxuICogICAgIGB7bmFtZToge2ZpcnN0OiAnSm9obicsIGxhc3Q6ICdEb2UnfX1gIHdpbGwgKipub3QqKiBiZSBtYXRjaGVkIGJ5IGB7bmFtZTogJ0pvaG4nfWAsIGJ1dFxuICogICAgICoqd2lsbCoqIGJlIG1hdGNoZWQgYnkgYHskOiAnSm9obid9YC5cbiAqXG4gKiAgIC0gYGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpYDogQSBwcmVkaWNhdGUgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gd3JpdGUgYXJiaXRyYXJ5IGZpbHRlcnMuXG4gKiAgICAgVGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBmb3IgZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSwgd2l0aCB0aGUgZWxlbWVudCwgaXRzIGluZGV4LCBhbmRcbiAqICAgICB0aGUgZW50aXJlIGFycmF5IGl0c2VsZiBhcyBhcmd1bWVudHMuXG4gKlxuICogICAgIFRoZSBmaW5hbCByZXN1bHQgaXMgYW4gYXJyYXkgb2YgdGhvc2UgZWxlbWVudHMgdGhhdCB0aGUgcHJlZGljYXRlIHJldHVybmVkIHRydWUgZm9yLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oYWN0dWFsLCBleHBlY3RlZCl8dHJ1ZXxmYWxzZX0gW2NvbXBhcmF0b3JdIENvbXBhcmF0b3Igd2hpY2ggaXMgdXNlZCBpblxuICogICAgIGRldGVybWluaW5nIGlmIHZhbHVlcyByZXRyaWV2ZWQgdXNpbmcgYGV4cHJlc3Npb25gICh3aGVuIGl0IGlzIG5vdCBhIGZ1bmN0aW9uKSBzaG91bGQgYmVcbiAqICAgICBjb25zaWRlcmVkIGEgbWF0Y2ggYmFzZWQgb24gdGhlIGV4cGVjdGVkIHZhbHVlIChmcm9tIHRoZSBmaWx0ZXIgZXhwcmVzc2lvbikgYW5kIGFjdHVhbFxuICogICAgIHZhbHVlIChmcm9tIHRoZSBvYmplY3QgaW4gdGhlIGFycmF5KS5cbiAqXG4gKiAgIENhbiBiZSBvbmUgb2Y6XG4gKlxuICogICAtIGBmdW5jdGlvbihhY3R1YWwsIGV4cGVjdGVkKWA6XG4gKiAgICAgVGhlIGZ1bmN0aW9uIHdpbGwgYmUgZ2l2ZW4gdGhlIG9iamVjdCB2YWx1ZSBhbmQgdGhlIHByZWRpY2F0ZSB2YWx1ZSB0byBjb21wYXJlIGFuZFxuICogICAgIHNob3VsZCByZXR1cm4gdHJ1ZSBpZiBib3RoIHZhbHVlcyBzaG91bGQgYmUgY29uc2lkZXJlZCBlcXVhbC5cbiAqXG4gKiAgIC0gYHRydWVgOiBBIHNob3J0aGFuZCBmb3IgYGZ1bmN0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHsgcmV0dXJuIGFuZ3VsYXIuZXF1YWxzKGFjdHVhbCwgZXhwZWN0ZWQpfWAuXG4gKiAgICAgVGhpcyBpcyBlc3NlbnRpYWxseSBzdHJpY3QgY29tcGFyaXNvbiBvZiBleHBlY3RlZCBhbmQgYWN0dWFsLlxuICpcbiAqICAgLSBgZmFsc2VgOiBBIHNob3J0IGhhbmQgZm9yIGEgZnVuY3Rpb24gd2hpY2ggd2lsbCBsb29rIGZvciBhIHN1YnN0cmluZyBtYXRjaCBpbiBhIGNhc2VcbiAqICAgICBpbnNlbnNpdGl2ZSB3YXkuIFByaW1pdGl2ZSB2YWx1ZXMgYXJlIGNvbnZlcnRlZCB0byBzdHJpbmdzLiBPYmplY3RzIGFyZSBub3QgY29tcGFyZWQgYWdhaW5zdFxuICogICAgIHByaW1pdGl2ZXMsIHVubGVzcyB0aGV5IGhhdmUgYSBjdXN0b20gYHRvU3RyaW5nYCBtZXRob2QgKGUuZy4gYERhdGVgIG9iamVjdHMpLlxuICpcbiAqXG4gKiAgIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFthbnlQcm9wZXJ0eUtleV0gVGhlIHNwZWNpYWwgcHJvcGVydHkgbmFtZSB0aGF0IG1hdGNoZXMgYWdhaW5zdCBhbnkgcHJvcGVydHkuXG4gKiAgICAgQnkgZGVmYXVsdCBgJGAuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJmaWx0ZXItZmlsdGVyXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1pbml0PVwiZnJpZW5kcyA9IFt7bmFtZTonSm9obicsIHBob25lOic1NTUtMTI3Nid9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonTWFyeScsIHBob25lOic4MDAtQklHLU1BUlknfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J01pa2UnLCBwaG9uZTonNTU1LTQzMjEnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J0FkYW0nLCBwaG9uZTonNTU1LTU2NzgnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J0p1bGllJywgcGhvbmU6JzU1NS04NzY1J30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidKdWxpZXR0ZScsIHBob25lOic1NTUtNTY3OCd9XVwiPjwvZGl2PlxuXG4gICAgICAgPGxhYmVsPlNlYXJjaDogPGlucHV0IG5nLW1vZGVsPVwic2VhcmNoVGV4dFwiPjwvbGFiZWw+XG4gICAgICAgPHRhYmxlIGlkPVwic2VhcmNoVGV4dFJlc3VsdHNcIj5cbiAgICAgICAgIDx0cj48dGg+TmFtZTwvdGg+PHRoPlBob25lPC90aD48L3RyPlxuICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHwgZmlsdGVyOnNlYXJjaFRleHRcIj5cbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kLm5hbWV9fTwvdGQ+XG4gICAgICAgICAgIDx0ZD57e2ZyaWVuZC5waG9uZX19PC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgPC90YWJsZT5cbiAgICAgICA8aHI+XG4gICAgICAgPGxhYmVsPkFueTogPGlucHV0IG5nLW1vZGVsPVwic2VhcmNoLiRcIj48L2xhYmVsPiA8YnI+XG4gICAgICAgPGxhYmVsPk5hbWUgb25seSA8aW5wdXQgbmctbW9kZWw9XCJzZWFyY2gubmFtZVwiPjwvbGFiZWw+PGJyPlxuICAgICAgIDxsYWJlbD5QaG9uZSBvbmx5IDxpbnB1dCBuZy1tb2RlbD1cInNlYXJjaC5waG9uZVwiPjwvbGFiZWw+PGJyPlxuICAgICAgIDxsYWJlbD5FcXVhbGl0eSA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJzdHJpY3RcIj48L2xhYmVsPjxicj5cbiAgICAgICA8dGFibGUgaWQ9XCJzZWFyY2hPYmpSZXN1bHRzXCI+XG4gICAgICAgICA8dHI+PHRoPk5hbWU8L3RoPjx0aD5QaG9uZTwvdGg+PC90cj5cbiAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmRPYmogaW4gZnJpZW5kcyB8IGZpbHRlcjpzZWFyY2g6c3RyaWN0XCI+XG4gICAgICAgICAgIDx0ZD57e2ZyaWVuZE9iai5uYW1lfX08L3RkPlxuICAgICAgICAgICA8dGQ+e3tmcmllbmRPYmoucGhvbmV9fTwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgIDwvdGFibGU+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBleHBlY3RGcmllbmROYW1lcyA9IGZ1bmN0aW9uKGV4cGVjdGVkTmFtZXMsIGtleSkge1xuICAgICAgICAgZWxlbWVudC5hbGwoYnkucmVwZWF0ZXIoa2V5ICsgJyBpbiBmcmllbmRzJykuY29sdW1uKGtleSArICcubmFtZScpKS50aGVuKGZ1bmN0aW9uKGFycikge1xuICAgICAgICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbih3ZCwgaSkge1xuICAgICAgICAgICAgIGV4cGVjdCh3ZC5nZXRUZXh0KCkpLnRvTWF0Y2goZXhwZWN0ZWROYW1lc1tpXSk7XG4gICAgICAgICAgIH0pO1xuICAgICAgICAgfSk7XG4gICAgICAgfTtcblxuICAgICAgIGl0KCdzaG91bGQgc2VhcmNoIGFjcm9zcyBhbGwgZmllbGRzIHdoZW4gZmlsdGVyaW5nIHdpdGggYSBzdHJpbmcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBzZWFyY2hUZXh0ID0gZWxlbWVudChieS5tb2RlbCgnc2VhcmNoVGV4dCcpKTtcbiAgICAgICAgIHNlYXJjaFRleHQuY2xlYXIoKTtcbiAgICAgICAgIHNlYXJjaFRleHQuc2VuZEtleXMoJ20nKTtcbiAgICAgICAgIGV4cGVjdEZyaWVuZE5hbWVzKFsnTWFyeScsICdNaWtlJywgJ0FkYW0nXSwgJ2ZyaWVuZCcpO1xuXG4gICAgICAgICBzZWFyY2hUZXh0LmNsZWFyKCk7XG4gICAgICAgICBzZWFyY2hUZXh0LnNlbmRLZXlzKCc3NicpO1xuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydKb2huJywgJ0p1bGllJ10sICdmcmllbmQnKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgc2VhcmNoIGluIHNwZWNpZmljIGZpZWxkcyB3aGVuIGZpbHRlcmluZyB3aXRoIGEgcHJlZGljYXRlIG9iamVjdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIHNlYXJjaEFueSA9IGVsZW1lbnQoYnkubW9kZWwoJ3NlYXJjaC4kJykpO1xuICAgICAgICAgc2VhcmNoQW55LmNsZWFyKCk7XG4gICAgICAgICBzZWFyY2hBbnkuc2VuZEtleXMoJ2knKTtcbiAgICAgICAgIGV4cGVjdEZyaWVuZE5hbWVzKFsnTWFyeScsICdNaWtlJywgJ0p1bGllJywgJ0p1bGlldHRlJ10sICdmcmllbmRPYmonKTtcbiAgICAgICB9KTtcbiAgICAgICBpdCgnc2hvdWxkIHVzZSBhIGVxdWFsIGNvbXBhcmlzb24gd2hlbiBjb21wYXJhdG9yIGlzIHRydWUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBzZWFyY2hOYW1lID0gZWxlbWVudChieS5tb2RlbCgnc2VhcmNoLm5hbWUnKSk7XG4gICAgICAgICB2YXIgc3RyaWN0ID0gZWxlbWVudChieS5tb2RlbCgnc3RyaWN0JykpO1xuICAgICAgICAgc2VhcmNoTmFtZS5jbGVhcigpO1xuICAgICAgICAgc2VhcmNoTmFtZS5zZW5kS2V5cygnSnVsaWUnKTtcbiAgICAgICAgIHN0cmljdC5jbGljaygpO1xuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydKdWxpZSddLCAnZnJpZW5kT2JqJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5mdW5jdGlvbiBmaWx0ZXJGaWx0ZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbihhcnJheSwgZXhwcmVzc2lvbiwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXkpIHtcbiAgICBpZiAoIWlzQXJyYXlMaWtlKGFycmF5KSkge1xuICAgICAgaWYgKGFycmF5ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbWluRXJyKCdmaWx0ZXInKSgnbm90YXJyYXknLCAnRXhwZWN0ZWQgYXJyYXkgYnV0IHJlY2VpdmVkOiB7MH0nLCBhcnJheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYW55UHJvcGVydHlLZXkgPSBhbnlQcm9wZXJ0eUtleSB8fCAnJCc7XG4gICAgdmFyIGV4cHJlc3Npb25UeXBlID0gZ2V0VHlwZUZvckZpbHRlcihleHByZXNzaW9uKTtcbiAgICB2YXIgcHJlZGljYXRlRm47XG4gICAgdmFyIG1hdGNoQWdhaW5zdEFueVByb3A7XG5cbiAgICBzd2l0Y2ggKGV4cHJlc3Npb25UeXBlKSB7XG4gICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgIHByZWRpY2F0ZUZuID0gZXhwcmVzc2lvbjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIGNhc2UgJ251bGwnOlxuICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIG1hdGNoQWdhaW5zdEFueVByb3AgPSB0cnVlO1xuICAgICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICBwcmVkaWNhdGVGbiA9IGNyZWF0ZVByZWRpY2F0ZUZuKGV4cHJlc3Npb24sIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChhcnJheSwgcHJlZGljYXRlRm4pO1xuICB9O1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciBgZmlsdGVyRmlsdGVyYFxuZnVuY3Rpb24gY3JlYXRlUHJlZGljYXRlRm4oZXhwcmVzc2lvbiwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIG1hdGNoQWdhaW5zdEFueVByb3ApIHtcbiAgdmFyIHNob3VsZE1hdGNoUHJpbWl0aXZlcyA9IGlzT2JqZWN0KGV4cHJlc3Npb24pICYmIChhbnlQcm9wZXJ0eUtleSBpbiBleHByZXNzaW9uKTtcbiAgdmFyIHByZWRpY2F0ZUZuO1xuXG4gIGlmIChjb21wYXJhdG9yID09PSB0cnVlKSB7XG4gICAgY29tcGFyYXRvciA9IGVxdWFscztcbiAgfSBlbHNlIGlmICghaXNGdW5jdGlvbihjb21wYXJhdG9yKSkge1xuICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbihhY3R1YWwsIGV4cGVjdGVkKSB7XG4gICAgICBpZiAoaXNVbmRlZmluZWQoYWN0dWFsKSkge1xuICAgICAgICAvLyBObyBzdWJzdHJpbmcgbWF0Y2hpbmcgYWdhaW5zdCBgdW5kZWZpbmVkYFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoKGFjdHVhbCA9PT0gbnVsbCkgfHwgKGV4cGVjdGVkID09PSBudWxsKSkge1xuICAgICAgICAvLyBObyBzdWJzdHJpbmcgbWF0Y2hpbmcgYWdhaW5zdCBgbnVsbGA7IG9ubHkgbWF0Y2ggYWdhaW5zdCBgbnVsbGBcbiAgICAgICAgcmV0dXJuIGFjdHVhbCA9PT0gZXhwZWN0ZWQ7XG4gICAgICB9XG4gICAgICBpZiAoaXNPYmplY3QoZXhwZWN0ZWQpIHx8IChpc09iamVjdChhY3R1YWwpICYmICFoYXNDdXN0b21Ub1N0cmluZyhhY3R1YWwpKSkge1xuICAgICAgICAvLyBTaG91bGQgbm90IGNvbXBhcmUgcHJpbWl0aXZlcyBhZ2FpbnN0IG9iamVjdHMsIHVubGVzcyB0aGV5IGhhdmUgY3VzdG9tIGB0b1N0cmluZ2AgbWV0aG9kXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgYWN0dWFsID0gbG93ZXJjYXNlKCcnICsgYWN0dWFsKTtcbiAgICAgIGV4cGVjdGVkID0gbG93ZXJjYXNlKCcnICsgZXhwZWN0ZWQpO1xuICAgICAgcmV0dXJuIGFjdHVhbC5pbmRleE9mKGV4cGVjdGVkKSAhPT0gLTE7XG4gICAgfTtcbiAgfVxuXG4gIHByZWRpY2F0ZUZuID0gZnVuY3Rpb24oaXRlbSkge1xuICAgIGlmIChzaG91bGRNYXRjaFByaW1pdGl2ZXMgJiYgIWlzT2JqZWN0KGl0ZW0pKSB7XG4gICAgICByZXR1cm4gZGVlcENvbXBhcmUoaXRlbSwgZXhwcmVzc2lvblthbnlQcm9wZXJ0eUtleV0sIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBmYWxzZSk7XG4gICAgfVxuICAgIHJldHVybiBkZWVwQ29tcGFyZShpdGVtLCBleHByZXNzaW9uLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgbWF0Y2hBZ2FpbnN0QW55UHJvcCk7XG4gIH07XG5cbiAgcmV0dXJuIHByZWRpY2F0ZUZuO1xufVxuXG5mdW5jdGlvbiBkZWVwQ29tcGFyZShhY3R1YWwsIGV4cGVjdGVkLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgbWF0Y2hBZ2FpbnN0QW55UHJvcCwgZG9udE1hdGNoV2hvbGVPYmplY3QpIHtcbiAgdmFyIGFjdHVhbFR5cGUgPSBnZXRUeXBlRm9yRmlsdGVyKGFjdHVhbCk7XG4gIHZhciBleHBlY3RlZFR5cGUgPSBnZXRUeXBlRm9yRmlsdGVyKGV4cGVjdGVkKTtcblxuICBpZiAoKGV4cGVjdGVkVHlwZSA9PT0gJ3N0cmluZycpICYmIChleHBlY3RlZC5jaGFyQXQoMCkgPT09ICchJykpIHtcbiAgICByZXR1cm4gIWRlZXBDb21wYXJlKGFjdHVhbCwgZXhwZWN0ZWQuc3Vic3RyaW5nKDEpLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgbWF0Y2hBZ2FpbnN0QW55UHJvcCk7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShhY3R1YWwpKSB7XG4gICAgLy8gSW4gY2FzZSBgYWN0dWFsYCBpcyBhbiBhcnJheSwgY29uc2lkZXIgaXQgYSBtYXRjaFxuICAgIC8vIGlmIEFOWSBvZiBpdCdzIGl0ZW1zIG1hdGNoZXMgYGV4cGVjdGVkYFxuICAgIHJldHVybiBhY3R1YWwuc29tZShmdW5jdGlvbihpdGVtKSB7XG4gICAgICByZXR1cm4gZGVlcENvbXBhcmUoaXRlbSwgZXhwZWN0ZWQsIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN3aXRjaCAoYWN0dWFsVHlwZSkge1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICB2YXIga2V5O1xuICAgICAgaWYgKG1hdGNoQWdhaW5zdEFueVByb3ApIHtcbiAgICAgICAgZm9yIChrZXkgaW4gYWN0dWFsKSB7XG4gICAgICAgICAgLy8gVW5kZXIgY2VydGFpbiwgcmFyZSwgY2lyY3Vtc3RhbmNlcywga2V5IG1heSBub3QgYmUgYSBzdHJpbmcgYW5kIGBjaGFyQXRgIHdpbGwgYmUgdW5kZWZpbmVkXG4gICAgICAgICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xNTY0NFxuICAgICAgICAgIGlmIChrZXkuY2hhckF0ICYmIChrZXkuY2hhckF0KDApICE9PSAnJCcpICYmXG4gICAgICAgICAgICAgIGRlZXBDb21wYXJlKGFjdHVhbFtrZXldLCBleHBlY3RlZCwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIHRydWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvbnRNYXRjaFdob2xlT2JqZWN0ID8gZmFsc2UgOiBkZWVwQ29tcGFyZShhY3R1YWwsIGV4cGVjdGVkLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZvciAoa2V5IGluIGV4cGVjdGVkKSB7XG4gICAgICAgICAgdmFyIGV4cGVjdGVkVmFsID0gZXhwZWN0ZWRba2V5XTtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihleHBlY3RlZFZhbCkgfHwgaXNVbmRlZmluZWQoZXhwZWN0ZWRWYWwpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgbWF0Y2hBbnlQcm9wZXJ0eSA9IGtleSA9PT0gYW55UHJvcGVydHlLZXk7XG4gICAgICAgICAgdmFyIGFjdHVhbFZhbCA9IG1hdGNoQW55UHJvcGVydHkgPyBhY3R1YWwgOiBhY3R1YWxba2V5XTtcbiAgICAgICAgICBpZiAoIWRlZXBDb21wYXJlKGFjdHVhbFZhbCwgZXhwZWN0ZWRWYWwsIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFueVByb3BlcnR5LCBtYXRjaEFueVByb3BlcnR5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjb21wYXJhdG9yKGFjdHVhbCwgZXhwZWN0ZWQpO1xuICAgICAgfVxuICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGNvbXBhcmF0b3IoYWN0dWFsLCBleHBlY3RlZCk7XG4gIH1cbn1cblxuLy8gVXNlZCBmb3IgZWFzaWx5IGRpZmZlcmVudGlhdGluZyBiZXR3ZWVuIGBudWxsYCBhbmQgYWN0dWFsIGBvYmplY3RgXG5mdW5jdGlvbiBnZXRUeXBlRm9yRmlsdGVyKHZhbCkge1xuICByZXR1cm4gKHZhbCA9PT0gbnVsbCkgPyAnbnVsbCcgOiB0eXBlb2YgdmFsO1xufVxuXG52YXIgTUFYX0RJR0lUUyA9IDIyO1xudmFyIERFQ0lNQUxfU0VQID0gJy4nO1xudmFyIFpFUk9fQ0hBUiA9ICcwJztcblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSBjdXJyZW5jeVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZvcm1hdHMgYSBudW1iZXIgYXMgYSBjdXJyZW5jeSAoaWUgJDEsMjM0LjU2KS4gV2hlbiBubyBjdXJyZW5jeSBzeW1ib2wgaXMgcHJvdmlkZWQsIGRlZmF1bHRcbiAqIHN5bWJvbCBmb3IgY3VycmVudCBsb2NhbGUgaXMgdXNlZC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IElucHV0IHRvIGZpbHRlci5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gc3ltYm9sIEN1cnJlbmN5IHN5bWJvbCBvciBpZGVudGlmaWVyIHRvIGJlIGRpc3BsYXllZC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gZnJhY3Rpb25TaXplIE51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byByb3VuZCB0aGUgYW1vdW50IHRvLCBkZWZhdWx0cyB0byBkZWZhdWx0IG1heCBmcmFjdGlvbiBzaXplIGZvciBjdXJyZW50IGxvY2FsZVxuICogQHJldHVybnMge3N0cmluZ30gRm9ybWF0dGVkIG51bWJlci5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cImN1cnJlbmN5RXhhbXBsZVwiIG5hbWU9XCJjdXJyZW5jeS1maWx0ZXJcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2N1cnJlbmN5RXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICRzY29wZS5hbW91bnQgPSAxMjM0LjU2O1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJhbW91bnRcIiBhcmlhLWxhYmVsPVwiYW1vdW50XCI+IDxicj5cbiAgICAgICAgIGRlZmF1bHQgY3VycmVuY3kgc3ltYm9sICgkKTogPHNwYW4gaWQ9XCJjdXJyZW5jeS1kZWZhdWx0XCI+e3thbW91bnQgfCBjdXJyZW5jeX19PC9zcGFuPjxicj5cbiAgICAgICAgIGN1c3RvbSBjdXJyZW5jeSBpZGVudGlmaWVyIChVU0QkKTogPHNwYW4gaWQ9XCJjdXJyZW5jeS1jdXN0b21cIj57e2Ftb3VudCB8IGN1cnJlbmN5OlwiVVNEJFwifX08L3NwYW4+PGJyPlxuICAgICAgICAgbm8gZnJhY3Rpb25zICgwKTogPHNwYW4gaWQ9XCJjdXJyZW5jeS1uby1mcmFjdGlvbnNcIj57e2Ftb3VudCB8IGN1cnJlbmN5OlwiVVNEJFwiOjB9fTwvc3Bhbj5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBpbml0IHdpdGggMTIzNC41NicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWRlZmF1bHQnKSkuZ2V0VGV4dCgpKS50b0JlKCckMSwyMzQuNTYnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXJyZW5jeS1jdXN0b20nKSkuZ2V0VGV4dCgpKS50b0JlKCdVU0QkMSwyMzQuNTYnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXJyZW5jeS1uby1mcmFjdGlvbnMnKSkuZ2V0VGV4dCgpKS50b0JlKCdVU0QkMSwyMzUnKTtcbiAgICAgICB9KTtcbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT09ICdzYWZhcmknKSB7XG4gICAgICAgICAgIC8vIFNhZmFyaSBkb2VzIG5vdCB1bmRlcnN0YW5kIHRoZSBtaW51cyBrZXkuIFNlZVxuICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy80ODFcbiAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgfVxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnYW1vdW50JykpLmNsZWFyKCk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdhbW91bnQnKSkuc2VuZEtleXMoJy0xMjM0Jyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJy0kMSwyMzQuMDAnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXJyZW5jeS1jdXN0b20nKSkuZ2V0VGV4dCgpKS50b0JlKCctVVNEJDEsMjM0LjAwJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktbm8tZnJhY3Rpb25zJykpLmdldFRleHQoKSkudG9CZSgnLVVTRCQxLDIzNCcpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbmN1cnJlbmN5RmlsdGVyLiRpbmplY3QgPSBbJyRsb2NhbGUnXTtcbmZ1bmN0aW9uIGN1cnJlbmN5RmlsdGVyKCRsb2NhbGUpIHtcbiAgdmFyIGZvcm1hdHMgPSAkbG9jYWxlLk5VTUJFUl9GT1JNQVRTO1xuICByZXR1cm4gZnVuY3Rpb24oYW1vdW50LCBjdXJyZW5jeVN5bWJvbCwgZnJhY3Rpb25TaXplKSB7XG4gICAgaWYgKGlzVW5kZWZpbmVkKGN1cnJlbmN5U3ltYm9sKSkge1xuICAgICAgY3VycmVuY3lTeW1ib2wgPSBmb3JtYXRzLkNVUlJFTkNZX1NZTTtcbiAgICB9XG5cbiAgICBpZiAoaXNVbmRlZmluZWQoZnJhY3Rpb25TaXplKSkge1xuICAgICAgZnJhY3Rpb25TaXplID0gZm9ybWF0cy5QQVRURVJOU1sxXS5tYXhGcmFjO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBjdXJyZW5jeSBzeW1ib2wgaXMgZW1wdHksIHRyaW0gd2hpdGVzcGFjZSBhcm91bmQgdGhlIHN5bWJvbFxuICAgIHZhciBjdXJyZW5jeVN5bWJvbFJlID0gIWN1cnJlbmN5U3ltYm9sID8gL1xccypcXHUwMEE0XFxzKi9nIDogL1xcdTAwQTQvZztcblxuICAgIC8vIGlmIG51bGwgb3IgdW5kZWZpbmVkIHBhc3MgaXQgdGhyb3VnaFxuICAgIHJldHVybiAoYW1vdW50ID09IG51bGwpXG4gICAgICAgID8gYW1vdW50XG4gICAgICAgIDogZm9ybWF0TnVtYmVyKGFtb3VudCwgZm9ybWF0cy5QQVRURVJOU1sxXSwgZm9ybWF0cy5HUk9VUF9TRVAsIGZvcm1hdHMuREVDSU1BTF9TRVAsIGZyYWN0aW9uU2l6ZSkuXG4gICAgICAgICAgICByZXBsYWNlKGN1cnJlbmN5U3ltYm9sUmUsIGN1cnJlbmN5U3ltYm9sKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSBudW1iZXJcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBGb3JtYXRzIGEgbnVtYmVyIGFzIHRleHQuXG4gKlxuICogSWYgdGhlIGlucHV0IGlzIG51bGwgb3IgdW5kZWZpbmVkLCBpdCB3aWxsIGp1c3QgYmUgcmV0dXJuZWQuXG4gKiBJZiB0aGUgaW5wdXQgaXMgaW5maW5pdGUgKEluZmluaXR5IG9yIC1JbmZpbml0eSksIHRoZSBJbmZpbml0eSBzeW1ib2wgJ+KInicgb3IgJy3iiJ4nIGlzIHJldHVybmVkLCByZXNwZWN0aXZlbHkuXG4gKiBJZiB0aGUgaW5wdXQgaXMgbm90IGEgbnVtYmVyIGFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZC5cbiAqXG4gKlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBudW1iZXIgTnVtYmVyIHRvIGZvcm1hdC5cbiAqIEBwYXJhbSB7KG51bWJlcnxzdHJpbmcpPX0gZnJhY3Rpb25TaXplIE51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byByb3VuZCB0aGUgbnVtYmVyIHRvLlxuICogSWYgdGhpcyBpcyBub3QgcHJvdmlkZWQgdGhlbiB0aGUgZnJhY3Rpb24gc2l6ZSBpcyBjb21wdXRlZCBmcm9tIHRoZSBjdXJyZW50IGxvY2FsZSdzIG51bWJlclxuICogZm9ybWF0dGluZyBwYXR0ZXJuLiBJbiB0aGUgY2FzZSBvZiB0aGUgZGVmYXVsdCBsb2NhbGUsIGl0IHdpbGwgYmUgMy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IE51bWJlciByb3VuZGVkIHRvIGBmcmFjdGlvblNpemVgIGFwcHJvcHJpYXRlbHkgZm9ybWF0dGVkIGJhc2VkIG9uIHRoZSBjdXJyZW50XG4gKiAgICAgICAgICAgICAgICAgICBsb2NhbGUgKGUuZy4sIGluIHRoZSBlbl9VUyBsb2NhbGUgaXQgd2lsbCBoYXZlIFwiLlwiIGFzIHRoZSBkZWNpbWFsIHNlcGFyYXRvciBhbmRcbiAqICAgICAgICAgICAgICAgICAgIGluY2x1ZGUgXCIsXCIgZ3JvdXAgc2VwYXJhdG9ycyBhZnRlciBlYWNoIHRoaXJkIGRpZ2l0KS5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwibnVtYmVyRmlsdGVyRXhhbXBsZVwiIG5hbWU9XCJudW1iZXItZmlsdGVyXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdudW1iZXJGaWx0ZXJFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLnZhbCA9IDEyMzQuNTY3ODk7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGxhYmVsPkVudGVyIG51bWJlcjogPGlucHV0IG5nLW1vZGVsPSd2YWwnPjwvbGFiZWw+PGJyPlxuICAgICAgICAgRGVmYXVsdCBmb3JtYXR0aW5nOiA8c3BhbiBpZD0nbnVtYmVyLWRlZmF1bHQnPnt7dmFsIHwgbnVtYmVyfX08L3NwYW4+PGJyPlxuICAgICAgICAgTm8gZnJhY3Rpb25zOiA8c3Bhbj57e3ZhbCB8IG51bWJlcjowfX08L3NwYW4+PGJyPlxuICAgICAgICAgTmVnYXRpdmUgbnVtYmVyOiA8c3Bhbj57ey12YWwgfCBudW1iZXI6NH19PC9zcGFuPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGZvcm1hdCBudW1iZXJzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbnVtYmVyLWRlZmF1bHQnKSkuZ2V0VGV4dCgpKS50b0JlKCcxLDIzNC41NjgnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3ZhbCB8IG51bWJlcjowJykpLmdldFRleHQoKSkudG9CZSgnMSwyMzUnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJy12YWwgfCBudW1iZXI6NCcpKS5nZXRUZXh0KCkpLnRvQmUoJy0xLDIzNC41Njc5Jyk7XG4gICAgICAgfSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgndmFsJykpLmNsZWFyKCk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWwnKSkuc2VuZEtleXMoJzMzNzQuMzMzJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbnVtYmVyLWRlZmF1bHQnKSkuZ2V0VGV4dCgpKS50b0JlKCczLDM3NC4zMzMnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3ZhbCB8IG51bWJlcjowJykpLmdldFRleHQoKSkudG9CZSgnMywzNzQnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJy12YWwgfCBudW1iZXI6NCcpKS5nZXRUZXh0KCkpLnRvQmUoJy0zLDM3NC4zMzMwJyk7XG4gICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5udW1iZXJGaWx0ZXIuJGluamVjdCA9IFsnJGxvY2FsZSddO1xuZnVuY3Rpb24gbnVtYmVyRmlsdGVyKCRsb2NhbGUpIHtcbiAgdmFyIGZvcm1hdHMgPSAkbG9jYWxlLk5VTUJFUl9GT1JNQVRTO1xuICByZXR1cm4gZnVuY3Rpb24obnVtYmVyLCBmcmFjdGlvblNpemUpIHtcblxuICAgIC8vIGlmIG51bGwgb3IgdW5kZWZpbmVkIHBhc3MgaXQgdGhyb3VnaFxuICAgIHJldHVybiAobnVtYmVyID09IG51bGwpXG4gICAgICAgID8gbnVtYmVyXG4gICAgICAgIDogZm9ybWF0TnVtYmVyKG51bWJlciwgZm9ybWF0cy5QQVRURVJOU1swXSwgZm9ybWF0cy5HUk9VUF9TRVAsIGZvcm1hdHMuREVDSU1BTF9TRVAsXG4gICAgICAgICAgICAgICAgICAgICAgIGZyYWN0aW9uU2l6ZSk7XG4gIH07XG59XG5cbi8qKlxuICogUGFyc2UgYSBudW1iZXIgKGFzIGEgc3RyaW5nKSBpbnRvIHRocmVlIGNvbXBvbmVudHMgdGhhdCBjYW4gYmUgdXNlZFxuICogZm9yIGZvcm1hdHRpbmcgdGhlIG51bWJlci5cbiAqXG4gKiAoU2lnbmlmaWNhbnQgYml0cyBvZiB0aGlzIHBhcnNlIGFsZ29yaXRobSBjYW1lIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL01pa2VNY2wvYmlnLmpzLylcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IG51bVN0ciBUaGUgbnVtYmVyIHRvIHBhcnNlXG4gKiBAcmV0dXJuIHtvYmplY3R9IEFuIG9iamVjdCBkZXNjcmliaW5nIHRoaXMgbnVtYmVyLCBjb250YWluaW5nIHRoZSBmb2xsb3dpbmcga2V5czpcbiAqICAtIGQgOiBhbiBhcnJheSBvZiBkaWdpdHMgY29udGFpbmluZyBsZWFkaW5nIHplcm9zIGFzIG5lY2Vzc2FyeVxuICogIC0gaSA6IHRoZSBudW1iZXIgb2YgdGhlIGRpZ2l0cyBpbiBgZGAgdGhhdCBhcmUgdG8gdGhlIGxlZnQgb2YgdGhlIGRlY2ltYWwgcG9pbnRcbiAqICAtIGUgOiB0aGUgZXhwb25lbnQgZm9yIG51bWJlcnMgdGhhdCB3b3VsZCBuZWVkIG1vcmUgdGhhbiBgTUFYX0RJR0lUU2AgZGlnaXRzIGluIGBkYFxuICpcbiAqL1xuZnVuY3Rpb24gcGFyc2UobnVtU3RyKSB7XG4gIHZhciBleHBvbmVudCA9IDAsIGRpZ2l0cywgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzO1xuICB2YXIgaSwgaiwgemVyb3M7XG5cbiAgLy8gRGVjaW1hbCBwb2ludD9cbiAgaWYgKChudW1iZXJPZkludGVnZXJEaWdpdHMgPSBudW1TdHIuaW5kZXhPZihERUNJTUFMX1NFUCkpID4gLTEpIHtcbiAgICBudW1TdHIgPSBudW1TdHIucmVwbGFjZShERUNJTUFMX1NFUCwgJycpO1xuICB9XG5cbiAgLy8gRXhwb25lbnRpYWwgZm9ybT9cbiAgaWYgKChpID0gbnVtU3RyLnNlYXJjaCgvZS9pKSkgPiAwKSB7XG4gICAgLy8gV29yayBvdXQgdGhlIGV4cG9uZW50LlxuICAgIGlmIChudW1iZXJPZkludGVnZXJEaWdpdHMgPCAwKSBudW1iZXJPZkludGVnZXJEaWdpdHMgPSBpO1xuICAgIG51bWJlck9mSW50ZWdlckRpZ2l0cyArPSArbnVtU3RyLnNsaWNlKGkgKyAxKTtcbiAgICBudW1TdHIgPSBudW1TdHIuc3Vic3RyaW5nKDAsIGkpO1xuICB9IGVsc2UgaWYgKG51bWJlck9mSW50ZWdlckRpZ2l0cyA8IDApIHtcbiAgICAvLyBUaGVyZSB3YXMgbm8gZGVjaW1hbCBwb2ludCBvciBleHBvbmVudCBzbyBpdCBpcyBhbiBpbnRlZ2VyLlxuICAgIG51bWJlck9mSW50ZWdlckRpZ2l0cyA9IG51bVN0ci5sZW5ndGg7XG4gIH1cblxuICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGxlYWRpbmcgemVyb3MuXG4gIGZvciAoaSA9IDA7IG51bVN0ci5jaGFyQXQoaSkgPT09IFpFUk9fQ0hBUjsgaSsrKSB7IC8qIGVtcHR5ICovIH1cblxuICBpZiAoaSA9PT0gKHplcm9zID0gbnVtU3RyLmxlbmd0aCkpIHtcbiAgICAvLyBUaGUgZGlnaXRzIGFyZSBhbGwgemVyby5cbiAgICBkaWdpdHMgPSBbMF07XG4gICAgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzID0gMTtcbiAgfSBlbHNlIHtcbiAgICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIHRyYWlsaW5nIHplcm9zXG4gICAgemVyb3MtLTtcbiAgICB3aGlsZSAobnVtU3RyLmNoYXJBdCh6ZXJvcykgPT09IFpFUk9fQ0hBUikgemVyb3MtLTtcblxuICAgIC8vIFRyYWlsaW5nIHplcm9zIGFyZSBpbnNpZ25pZmljYW50IHNvIGlnbm9yZSB0aGVtXG4gICAgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzIC09IGk7XG4gICAgZGlnaXRzID0gW107XG4gICAgLy8gQ29udmVydCBzdHJpbmcgdG8gYXJyYXkgb2YgZGlnaXRzIHdpdGhvdXQgbGVhZGluZy90cmFpbGluZyB6ZXJvcy5cbiAgICBmb3IgKGogPSAwOyBpIDw9IHplcm9zOyBpKyssIGorKykge1xuICAgICAgZGlnaXRzW2pdID0gK251bVN0ci5jaGFyQXQoaSk7XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgdGhlIG51bWJlciBvdmVyZmxvd3MgdGhlIG1heGltdW0gYWxsb3dlZCBkaWdpdHMgdGhlbiB1c2UgYW4gZXhwb25lbnQuXG4gIGlmIChudW1iZXJPZkludGVnZXJEaWdpdHMgPiBNQVhfRElHSVRTKSB7XG4gICAgZGlnaXRzID0gZGlnaXRzLnNwbGljZSgwLCBNQVhfRElHSVRTIC0gMSk7XG4gICAgZXhwb25lbnQgPSBudW1iZXJPZkludGVnZXJEaWdpdHMgLSAxO1xuICAgIG51bWJlck9mSW50ZWdlckRpZ2l0cyA9IDE7XG4gIH1cblxuICByZXR1cm4geyBkOiBkaWdpdHMsIGU6IGV4cG9uZW50LCBpOiBudW1iZXJPZkludGVnZXJEaWdpdHMgfTtcbn1cblxuLyoqXG4gKiBSb3VuZCB0aGUgcGFyc2VkIG51bWJlciB0byB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlc1xuICogVGhpcyBmdW5jdGlvbiBjaGFuZ2VkIHRoZSBwYXJzZWROdW1iZXIgaW4tcGxhY2VcbiAqL1xuZnVuY3Rpb24gcm91bmROdW1iZXIocGFyc2VkTnVtYmVyLCBmcmFjdGlvblNpemUsIG1pbkZyYWMsIG1heEZyYWMpIHtcbiAgICB2YXIgZGlnaXRzID0gcGFyc2VkTnVtYmVyLmQ7XG4gICAgdmFyIGZyYWN0aW9uTGVuID0gZGlnaXRzLmxlbmd0aCAtIHBhcnNlZE51bWJlci5pO1xuXG4gICAgLy8gZGV0ZXJtaW5lIGZyYWN0aW9uU2l6ZSBpZiBpdCBpcyBub3Qgc3BlY2lmaWVkOyBgK2ZyYWN0aW9uU2l6ZWAgY29udmVydHMgaXQgdG8gYSBudW1iZXJcbiAgICBmcmFjdGlvblNpemUgPSAoaXNVbmRlZmluZWQoZnJhY3Rpb25TaXplKSkgPyBNYXRoLm1pbihNYXRoLm1heChtaW5GcmFjLCBmcmFjdGlvbkxlbiksIG1heEZyYWMpIDogK2ZyYWN0aW9uU2l6ZTtcblxuICAgIC8vIFRoZSBpbmRleCBvZiB0aGUgZGlnaXQgdG8gd2hlcmUgcm91bmRpbmcgaXMgdG8gb2NjdXJcbiAgICB2YXIgcm91bmRBdCA9IGZyYWN0aW9uU2l6ZSArIHBhcnNlZE51bWJlci5pO1xuICAgIHZhciBkaWdpdCA9IGRpZ2l0c1tyb3VuZEF0XTtcblxuICAgIGlmIChyb3VuZEF0ID4gMCkge1xuICAgICAgLy8gRHJvcCBmcmFjdGlvbmFsIGRpZ2l0cyBiZXlvbmQgYHJvdW5kQXRgXG4gICAgICBkaWdpdHMuc3BsaWNlKE1hdGgubWF4KHBhcnNlZE51bWJlci5pLCByb3VuZEF0KSk7XG5cbiAgICAgIC8vIFNldCBub24tZnJhY3Rpb25hbCBkaWdpdHMgYmV5b25kIGByb3VuZEF0YCB0byAwXG4gICAgICBmb3IgKHZhciBqID0gcm91bmRBdDsgaiA8IGRpZ2l0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBkaWdpdHNbal0gPSAwO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXZSByb3VuZGVkIHRvIHplcm8gc28gcmVzZXQgdGhlIHBhcnNlZE51bWJlclxuICAgICAgZnJhY3Rpb25MZW4gPSBNYXRoLm1heCgwLCBmcmFjdGlvbkxlbik7XG4gICAgICBwYXJzZWROdW1iZXIuaSA9IDE7XG4gICAgICBkaWdpdHMubGVuZ3RoID0gTWF0aC5tYXgoMSwgcm91bmRBdCA9IGZyYWN0aW9uU2l6ZSArIDEpO1xuICAgICAgZGlnaXRzWzBdID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcm91bmRBdDsgaSsrKSBkaWdpdHNbaV0gPSAwO1xuICAgIH1cblxuICAgIGlmIChkaWdpdCA+PSA1KSB7XG4gICAgICBpZiAocm91bmRBdCAtIDEgPCAwKSB7XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrID4gcm91bmRBdDsgay0tKSB7XG4gICAgICAgICAgZGlnaXRzLnVuc2hpZnQoMCk7XG4gICAgICAgICAgcGFyc2VkTnVtYmVyLmkrKztcbiAgICAgICAgfVxuICAgICAgICBkaWdpdHMudW5zaGlmdCgxKTtcbiAgICAgICAgcGFyc2VkTnVtYmVyLmkrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpZ2l0c1tyb3VuZEF0IC0gMV0rKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQYWQgb3V0IHdpdGggemVyb3MgdG8gZ2V0IHRoZSByZXF1aXJlZCBmcmFjdGlvbiBsZW5ndGhcbiAgICBmb3IgKDsgZnJhY3Rpb25MZW4gPCBNYXRoLm1heCgwLCBmcmFjdGlvblNpemUpOyBmcmFjdGlvbkxlbisrKSBkaWdpdHMucHVzaCgwKTtcblxuXG4gICAgLy8gRG8gYW55IGNhcnJ5aW5nLCBlLmcuIGEgZGlnaXQgd2FzIHJvdW5kZWQgdXAgdG8gMTBcbiAgICB2YXIgY2FycnkgPSBkaWdpdHMucmVkdWNlUmlnaHQoZnVuY3Rpb24oY2FycnksIGQsIGksIGRpZ2l0cykge1xuICAgICAgZCA9IGQgKyBjYXJyeTtcbiAgICAgIGRpZ2l0c1tpXSA9IGQgJSAxMDtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKGQgLyAxMCk7XG4gICAgfSwgMCk7XG4gICAgaWYgKGNhcnJ5KSB7XG4gICAgICBkaWdpdHMudW5zaGlmdChjYXJyeSk7XG4gICAgICBwYXJzZWROdW1iZXIuaSsrO1xuICAgIH1cbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBudW1iZXIgaW50byBhIHN0cmluZ1xuICogQHBhcmFtICB7bnVtYmVyfSBudW1iZXIgICAgICAgVGhlIG51bWJlciB0byBmb3JtYXRcbiAqIEBwYXJhbSAge3tcbiAqICAgICAgICAgICBtaW5GcmFjLCAvLyB0aGUgbWluaW11bSBudW1iZXIgb2YgZGlnaXRzIHJlcXVpcmVkIGluIHRoZSBmcmFjdGlvbiBwYXJ0IG9mIHRoZSBudW1iZXJcbiAqICAgICAgICAgICBtYXhGcmFjLCAvLyB0aGUgbWF4aW11bSBudW1iZXIgb2YgZGlnaXRzIHJlcXVpcmVkIGluIHRoZSBmcmFjdGlvbiBwYXJ0IG9mIHRoZSBudW1iZXJcbiAqICAgICAgICAgICBnU2l6ZSwgICAvLyBudW1iZXIgb2YgZGlnaXRzIGluIGVhY2ggZ3JvdXAgb2Ygc2VwYXJhdGVkIGRpZ2l0c1xuICogICAgICAgICAgIGxnU2l6ZSwgIC8vIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGxhc3QgZ3JvdXAgb2YgZGlnaXRzIGJlZm9yZSB0aGUgZGVjaW1hbCBzZXBhcmF0b3JcbiAqICAgICAgICAgICBuZWdQcmUsICAvLyB0aGUgc3RyaW5nIHRvIGdvIGluIGZyb250IG9mIGEgbmVnYXRpdmUgbnVtYmVyIChlLmcuIGAtYCBvciBgKGApKVxuICogICAgICAgICAgIHBvc1ByZSwgIC8vIHRoZSBzdHJpbmcgdG8gZ28gaW4gZnJvbnQgb2YgYSBwb3NpdGl2ZSBudW1iZXJcbiAqICAgICAgICAgICBuZWdTdWYsICAvLyB0aGUgc3RyaW5nIHRvIGdvIGFmdGVyIGEgbmVnYXRpdmUgbnVtYmVyIChlLmcuIGApYClcbiAqICAgICAgICAgICBwb3NTdWYgICAvLyB0aGUgc3RyaW5nIHRvIGdvIGFmdGVyIGEgcG9zaXRpdmUgbnVtYmVyXG4gKiAgICAgICAgIH19IHBhdHRlcm5cbiAqIEBwYXJhbSAge3N0cmluZ30gZ3JvdXBTZXAgICAgIFRoZSBzdHJpbmcgdG8gc2VwYXJhdGUgZ3JvdXBzIG9mIG51bWJlciAoZS5nLiBgLGApXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGRlY2ltYWxTZXAgICBUaGUgc3RyaW5nIHRvIGFjdCBhcyB0aGUgZGVjaW1hbCBzZXBhcmF0b3IgKGUuZy4gYC5gKVxuICogQHBhcmFtICB7W3R5cGVdfSBmcmFjdGlvblNpemUgVGhlIHNpemUgb2YgdGhlIGZyYWN0aW9uYWwgcGFydCBvZiB0aGUgbnVtYmVyXG4gKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgICAgICAgICBUaGUgbnVtYmVyIGZvcm1hdHRlZCBhcyBhIHN0cmluZ1xuICovXG5mdW5jdGlvbiBmb3JtYXROdW1iZXIobnVtYmVyLCBwYXR0ZXJuLCBncm91cFNlcCwgZGVjaW1hbFNlcCwgZnJhY3Rpb25TaXplKSB7XG5cbiAgaWYgKCEoaXNTdHJpbmcobnVtYmVyKSB8fCBpc051bWJlcihudW1iZXIpKSB8fCBpc05hTihudW1iZXIpKSByZXR1cm4gJyc7XG5cbiAgdmFyIGlzSW5maW5pdHkgPSAhaXNGaW5pdGUobnVtYmVyKTtcbiAgdmFyIGlzWmVybyA9IGZhbHNlO1xuICB2YXIgbnVtU3RyID0gTWF0aC5hYnMobnVtYmVyKSArICcnLFxuICAgICAgZm9ybWF0dGVkVGV4dCA9ICcnLFxuICAgICAgcGFyc2VkTnVtYmVyO1xuXG4gIGlmIChpc0luZmluaXR5KSB7XG4gICAgZm9ybWF0dGVkVGV4dCA9ICdcXHUyMjFlJztcbiAgfSBlbHNlIHtcbiAgICBwYXJzZWROdW1iZXIgPSBwYXJzZShudW1TdHIpO1xuXG4gICAgcm91bmROdW1iZXIocGFyc2VkTnVtYmVyLCBmcmFjdGlvblNpemUsIHBhdHRlcm4ubWluRnJhYywgcGF0dGVybi5tYXhGcmFjKTtcblxuICAgIHZhciBkaWdpdHMgPSBwYXJzZWROdW1iZXIuZDtcbiAgICB2YXIgaW50ZWdlckxlbiA9IHBhcnNlZE51bWJlci5pO1xuICAgIHZhciBleHBvbmVudCA9IHBhcnNlZE51bWJlci5lO1xuICAgIHZhciBkZWNpbWFscyA9IFtdO1xuICAgIGlzWmVybyA9IGRpZ2l0cy5yZWR1Y2UoZnVuY3Rpb24oaXNaZXJvLCBkKSB7IHJldHVybiBpc1plcm8gJiYgIWQ7IH0sIHRydWUpO1xuXG4gICAgLy8gcGFkIHplcm9zIGZvciBzbWFsbCBudW1iZXJzXG4gICAgd2hpbGUgKGludGVnZXJMZW4gPCAwKSB7XG4gICAgICBkaWdpdHMudW5zaGlmdCgwKTtcbiAgICAgIGludGVnZXJMZW4rKztcbiAgICB9XG5cbiAgICAvLyBleHRyYWN0IGRlY2ltYWxzIGRpZ2l0c1xuICAgIGlmIChpbnRlZ2VyTGVuID4gMCkge1xuICAgICAgZGVjaW1hbHMgPSBkaWdpdHMuc3BsaWNlKGludGVnZXJMZW4sIGRpZ2l0cy5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWNpbWFscyA9IGRpZ2l0cztcbiAgICAgIGRpZ2l0cyA9IFswXTtcbiAgICB9XG5cbiAgICAvLyBmb3JtYXQgdGhlIGludGVnZXIgZGlnaXRzIHdpdGggZ3JvdXBpbmcgc2VwYXJhdG9yc1xuICAgIHZhciBncm91cHMgPSBbXTtcbiAgICBpZiAoZGlnaXRzLmxlbmd0aCA+PSBwYXR0ZXJuLmxnU2l6ZSkge1xuICAgICAgZ3JvdXBzLnVuc2hpZnQoZGlnaXRzLnNwbGljZSgtcGF0dGVybi5sZ1NpemUsIGRpZ2l0cy5sZW5ndGgpLmpvaW4oJycpKTtcbiAgICB9XG4gICAgd2hpbGUgKGRpZ2l0cy5sZW5ndGggPiBwYXR0ZXJuLmdTaXplKSB7XG4gICAgICBncm91cHMudW5zaGlmdChkaWdpdHMuc3BsaWNlKC1wYXR0ZXJuLmdTaXplLCBkaWdpdHMubGVuZ3RoKS5qb2luKCcnKSk7XG4gICAgfVxuICAgIGlmIChkaWdpdHMubGVuZ3RoKSB7XG4gICAgICBncm91cHMudW5zaGlmdChkaWdpdHMuam9pbignJykpO1xuICAgIH1cbiAgICBmb3JtYXR0ZWRUZXh0ID0gZ3JvdXBzLmpvaW4oZ3JvdXBTZXApO1xuXG4gICAgLy8gYXBwZW5kIHRoZSBkZWNpbWFsIGRpZ2l0c1xuICAgIGlmIChkZWNpbWFscy5sZW5ndGgpIHtcbiAgICAgIGZvcm1hdHRlZFRleHQgKz0gZGVjaW1hbFNlcCArIGRlY2ltYWxzLmpvaW4oJycpO1xuICAgIH1cblxuICAgIGlmIChleHBvbmVudCkge1xuICAgICAgZm9ybWF0dGVkVGV4dCArPSAnZSsnICsgZXhwb25lbnQ7XG4gICAgfVxuICB9XG4gIGlmIChudW1iZXIgPCAwICYmICFpc1plcm8pIHtcbiAgICByZXR1cm4gcGF0dGVybi5uZWdQcmUgKyBmb3JtYXR0ZWRUZXh0ICsgcGF0dGVybi5uZWdTdWY7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhdHRlcm4ucG9zUHJlICsgZm9ybWF0dGVkVGV4dCArIHBhdHRlcm4ucG9zU3VmO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhZE51bWJlcihudW0sIGRpZ2l0cywgdHJpbSwgbmVnV3JhcCkge1xuICB2YXIgbmVnID0gJyc7XG4gIGlmIChudW0gPCAwIHx8IChuZWdXcmFwICYmIG51bSA8PSAwKSkge1xuICAgIGlmIChuZWdXcmFwKSB7XG4gICAgICBudW0gPSAtbnVtICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgbnVtID0gLW51bTtcbiAgICAgIG5lZyA9ICctJztcbiAgICB9XG4gIH1cbiAgbnVtID0gJycgKyBudW07XG4gIHdoaWxlIChudW0ubGVuZ3RoIDwgZGlnaXRzKSBudW0gPSBaRVJPX0NIQVIgKyBudW07XG4gIGlmICh0cmltKSB7XG4gICAgbnVtID0gbnVtLnN1YnN0cihudW0ubGVuZ3RoIC0gZGlnaXRzKTtcbiAgfVxuICByZXR1cm4gbmVnICsgbnVtO1xufVxuXG5cbmZ1bmN0aW9uIGRhdGVHZXR0ZXIobmFtZSwgc2l6ZSwgb2Zmc2V0LCB0cmltLCBuZWdXcmFwKSB7XG4gIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuICByZXR1cm4gZnVuY3Rpb24oZGF0ZSkge1xuICAgIHZhciB2YWx1ZSA9IGRhdGVbJ2dldCcgKyBuYW1lXSgpO1xuICAgIGlmIChvZmZzZXQgPiAwIHx8IHZhbHVlID4gLW9mZnNldCkge1xuICAgICAgdmFsdWUgKz0gb2Zmc2V0O1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IDAgJiYgb2Zmc2V0ID09PSAtMTIpIHZhbHVlID0gMTI7XG4gICAgcmV0dXJuIHBhZE51bWJlcih2YWx1ZSwgc2l6ZSwgdHJpbSwgbmVnV3JhcCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRhdGVTdHJHZXR0ZXIobmFtZSwgc2hvcnRGb3JtLCBzdGFuZEFsb25lKSB7XG4gIHJldHVybiBmdW5jdGlvbihkYXRlLCBmb3JtYXRzKSB7XG4gICAgdmFyIHZhbHVlID0gZGF0ZVsnZ2V0JyArIG5hbWVdKCk7XG4gICAgdmFyIHByb3BQcmVmaXggPSAoc3RhbmRBbG9uZSA/ICdTVEFOREFMT05FJyA6ICcnKSArIChzaG9ydEZvcm0gPyAnU0hPUlQnIDogJycpO1xuICAgIHZhciBnZXQgPSB1cHBlcmNhc2UocHJvcFByZWZpeCArIG5hbWUpO1xuXG4gICAgcmV0dXJuIGZvcm1hdHNbZ2V0XVt2YWx1ZV07XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRpbWVab25lR2V0dGVyKGRhdGUsIGZvcm1hdHMsIG9mZnNldCkge1xuICB2YXIgem9uZSA9IC0xICogb2Zmc2V0O1xuICB2YXIgcGFkZGVkWm9uZSA9ICh6b25lID49IDApID8gJysnIDogJyc7XG5cbiAgcGFkZGVkWm9uZSArPSBwYWROdW1iZXIoTWF0aFt6b25lID4gMCA/ICdmbG9vcicgOiAnY2VpbCddKHpvbmUgLyA2MCksIDIpICtcbiAgICAgICAgICAgICAgICBwYWROdW1iZXIoTWF0aC5hYnMoem9uZSAlIDYwKSwgMik7XG5cbiAgcmV0dXJuIHBhZGRlZFpvbmU7XG59XG5cbmZ1bmN0aW9uIGdldEZpcnN0VGh1cnNkYXlPZlllYXIoeWVhcikge1xuICAgIC8vIDAgPSBpbmRleCBvZiBKYW51YXJ5XG4gICAgdmFyIGRheU9mV2Vla09uRmlyc3QgPSAobmV3IERhdGUoeWVhciwgMCwgMSkpLmdldERheSgpO1xuICAgIC8vIDQgPSBpbmRleCBvZiBUaHVyc2RheSAoKzEgdG8gYWNjb3VudCBmb3IgMXN0ID0gNSlcbiAgICAvLyAxMSA9IGluZGV4IG9mICpuZXh0KiBUaHVyc2RheSAoKzEgYWNjb3VudCBmb3IgMXN0ID0gMTIpXG4gICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIDAsICgoZGF5T2ZXZWVrT25GaXJzdCA8PSA0KSA/IDUgOiAxMikgLSBkYXlPZldlZWtPbkZpcnN0KTtcbn1cblxuZnVuY3Rpb24gZ2V0VGh1cnNkYXlUaGlzV2VlayhkYXRldGltZSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShkYXRldGltZS5nZXRGdWxsWWVhcigpLCBkYXRldGltZS5nZXRNb250aCgpLFxuICAgICAgLy8gNCA9IGluZGV4IG9mIFRodXJzZGF5XG4gICAgICBkYXRldGltZS5nZXREYXRlKCkgKyAoNCAtIGRhdGV0aW1lLmdldERheSgpKSk7XG59XG5cbmZ1bmN0aW9uIHdlZWtHZXR0ZXIoc2l6ZSkge1xuICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgIHZhciBmaXJzdFRodXJzID0gZ2V0Rmlyc3RUaHVyc2RheU9mWWVhcihkYXRlLmdldEZ1bGxZZWFyKCkpLFxuICAgICAgICAgdGhpc1RodXJzID0gZ2V0VGh1cnNkYXlUaGlzV2VlayhkYXRlKTtcblxuICAgICAgdmFyIGRpZmYgPSArdGhpc1RodXJzIC0gK2ZpcnN0VGh1cnMsXG4gICAgICAgICByZXN1bHQgPSAxICsgTWF0aC5yb3VuZChkaWZmIC8gNi4wNDhlOCk7IC8vIDYuMDQ4ZTggbXMgcGVyIHdlZWtcblxuICAgICAgcmV0dXJuIHBhZE51bWJlcihyZXN1bHQsIHNpemUpO1xuICAgfTtcbn1cblxuZnVuY3Rpb24gYW1wbUdldHRlcihkYXRlLCBmb3JtYXRzKSB7XG4gIHJldHVybiBkYXRlLmdldEhvdXJzKCkgPCAxMiA/IGZvcm1hdHMuQU1QTVNbMF0gOiBmb3JtYXRzLkFNUE1TWzFdO1xufVxuXG5mdW5jdGlvbiBlcmFHZXR0ZXIoZGF0ZSwgZm9ybWF0cykge1xuICByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpIDw9IDAgPyBmb3JtYXRzLkVSQVNbMF0gOiBmb3JtYXRzLkVSQVNbMV07XG59XG5cbmZ1bmN0aW9uIGxvbmdFcmFHZXR0ZXIoZGF0ZSwgZm9ybWF0cykge1xuICByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpIDw9IDAgPyBmb3JtYXRzLkVSQU5BTUVTWzBdIDogZm9ybWF0cy5FUkFOQU1FU1sxXTtcbn1cblxudmFyIERBVEVfRk9STUFUUyA9IHtcbiAgeXl5eTogZGF0ZUdldHRlcignRnVsbFllYXInLCA0LCAwLCBmYWxzZSwgdHJ1ZSksXG4gICAgeXk6IGRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJywgMiwgMCwgdHJ1ZSwgdHJ1ZSksXG4gICAgIHk6IGRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJywgMSwgMCwgZmFsc2UsIHRydWUpLFxuICBNTU1NOiBkYXRlU3RyR2V0dGVyKCdNb250aCcpLFxuICAgTU1NOiBkYXRlU3RyR2V0dGVyKCdNb250aCcsIHRydWUpLFxuICAgIE1NOiBkYXRlR2V0dGVyKCdNb250aCcsIDIsIDEpLFxuICAgICBNOiBkYXRlR2V0dGVyKCdNb250aCcsIDEsIDEpLFxuICBMTExMOiBkYXRlU3RyR2V0dGVyKCdNb250aCcsIGZhbHNlLCB0cnVlKSxcbiAgICBkZDogZGF0ZUdldHRlcignRGF0ZScsIDIpLFxuICAgICBkOiBkYXRlR2V0dGVyKCdEYXRlJywgMSksXG4gICAgSEg6IGRhdGVHZXR0ZXIoJ0hvdXJzJywgMiksXG4gICAgIEg6IGRhdGVHZXR0ZXIoJ0hvdXJzJywgMSksXG4gICAgaGg6IGRhdGVHZXR0ZXIoJ0hvdXJzJywgMiwgLTEyKSxcbiAgICAgaDogZGF0ZUdldHRlcignSG91cnMnLCAxLCAtMTIpLFxuICAgIG1tOiBkYXRlR2V0dGVyKCdNaW51dGVzJywgMiksXG4gICAgIG06IGRhdGVHZXR0ZXIoJ01pbnV0ZXMnLCAxKSxcbiAgICBzczogZGF0ZUdldHRlcignU2Vjb25kcycsIDIpLFxuICAgICBzOiBkYXRlR2V0dGVyKCdTZWNvbmRzJywgMSksXG4gICAgIC8vIHdoaWxlIElTTyA4NjAxIHJlcXVpcmVzIGZyYWN0aW9ucyB0byBiZSBwcmVmaXhlZCB3aXRoIGAuYCBvciBgLGBcbiAgICAgLy8gd2UgY2FuIGJlIGp1c3Qgc2FmZWx5IHJlbHkgb24gdXNpbmcgYHNzc2Agc2luY2Ugd2UgY3VycmVudGx5IGRvbid0IHN1cHBvcnQgc2luZ2xlIG9yIHR3byBkaWdpdCBmcmFjdGlvbnNcbiAgIHNzczogZGF0ZUdldHRlcignTWlsbGlzZWNvbmRzJywgMyksXG4gIEVFRUU6IGRhdGVTdHJHZXR0ZXIoJ0RheScpLFxuICAgRUVFOiBkYXRlU3RyR2V0dGVyKCdEYXknLCB0cnVlKSxcbiAgICAgYTogYW1wbUdldHRlcixcbiAgICAgWjogdGltZVpvbmVHZXR0ZXIsXG4gICAgd3c6IHdlZWtHZXR0ZXIoMiksXG4gICAgIHc6IHdlZWtHZXR0ZXIoMSksXG4gICAgIEc6IGVyYUdldHRlcixcbiAgICAgR0c6IGVyYUdldHRlcixcbiAgICAgR0dHOiBlcmFHZXR0ZXIsXG4gICAgIEdHR0c6IGxvbmdFcmFHZXR0ZXJcbn07XG5cbnZhciBEQVRFX0ZPUk1BVFNfU1BMSVQgPSAvKCg/OlteeU1MZEhobXNhWkV3RyddKyl8KD86Jyg/OlteJ118JycpKicpfCg/OkUrfHkrfE0rfEwrfGQrfEgrfGgrfG0rfHMrfGF8WnxHK3x3KykpKFtcXHNcXFNdKikvLFxuICAgIE5VTUJFUl9TVFJJTkcgPSAvXi0/XFxkKyQvO1xuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGRhdGVcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiAgIEZvcm1hdHMgYGRhdGVgIHRvIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSByZXF1ZXN0ZWQgYGZvcm1hdGAuXG4gKlxuICogICBgZm9ybWF0YCBzdHJpbmcgY2FuIGJlIGNvbXBvc2VkIG9mIHRoZSBmb2xsb3dpbmcgZWxlbWVudHM6XG4gKlxuICogICAqIGAneXl5eSdgOiA0IGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIgKGUuZy4gQUQgMSA9PiAwMDAxLCBBRCAyMDEwID0+IDIwMTApXG4gKiAgICogYCd5eSdgOiAyIGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIsIHBhZGRlZCAoMDAtOTkpLiAoZS5nLiBBRCAyMDAxID0+IDAxLCBBRCAyMDEwID0+IDEwKVxuICogICAqIGAneSdgOiAxIGRpZ2l0IHJlcHJlc2VudGF0aW9uIG9mIHllYXIsIGUuZy4gKEFEIDEgPT4gMSwgQUQgMTk5ID0+IDE5OSlcbiAqICAgKiBgJ01NTU0nYDogTW9udGggaW4geWVhciAoSmFudWFyeS1EZWNlbWJlcilcbiAqICAgKiBgJ01NTSdgOiBNb250aCBpbiB5ZWFyIChKYW4tRGVjKVxuICogICAqIGAnTU0nYDogTW9udGggaW4geWVhciwgcGFkZGVkICgwMS0xMilcbiAqICAgKiBgJ00nYDogTW9udGggaW4geWVhciAoMS0xMilcbiAqICAgKiBgJ0xMTEwnYDogU3RhbmQtYWxvbmUgbW9udGggaW4geWVhciAoSmFudWFyeS1EZWNlbWJlcilcbiAqICAgKiBgJ2RkJ2A6IERheSBpbiBtb250aCwgcGFkZGVkICgwMS0zMSlcbiAqICAgKiBgJ2QnYDogRGF5IGluIG1vbnRoICgxLTMxKVxuICogICAqIGAnRUVFRSdgOiBEYXkgaW4gV2VlaywoU3VuZGF5LVNhdHVyZGF5KVxuICogICAqIGAnRUVFJ2A6IERheSBpbiBXZWVrLCAoU3VuLVNhdClcbiAqICAgKiBgJ0hIJ2A6IEhvdXIgaW4gZGF5LCBwYWRkZWQgKDAwLTIzKVxuICogICAqIGAnSCdgOiBIb3VyIGluIGRheSAoMC0yMylcbiAqICAgKiBgJ2hoJ2A6IEhvdXIgaW4gQU0vUE0sIHBhZGRlZCAoMDEtMTIpXG4gKiAgICogYCdoJ2A6IEhvdXIgaW4gQU0vUE0sICgxLTEyKVxuICogICAqIGAnbW0nYDogTWludXRlIGluIGhvdXIsIHBhZGRlZCAoMDAtNTkpXG4gKiAgICogYCdtJ2A6IE1pbnV0ZSBpbiBob3VyICgwLTU5KVxuICogICAqIGAnc3MnYDogU2Vjb25kIGluIG1pbnV0ZSwgcGFkZGVkICgwMC01OSlcbiAqICAgKiBgJ3MnYDogU2Vjb25kIGluIG1pbnV0ZSAoMC01OSlcbiAqICAgKiBgJ3NzcydgOiBNaWxsaXNlY29uZCBpbiBzZWNvbmQsIHBhZGRlZCAoMDAwLTk5OSlcbiAqICAgKiBgJ2EnYDogQU0vUE0gbWFya2VyXG4gKiAgICogYCdaJ2A6IDQgZGlnaXQgKCtzaWduKSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGltZXpvbmUgb2Zmc2V0ICgtMTIwMC0rMTIwMClcbiAqICAgKiBgJ3d3J2A6IFdlZWsgb2YgeWVhciwgcGFkZGVkICgwMC01MykuIFdlZWsgMDEgaXMgdGhlIHdlZWsgd2l0aCB0aGUgZmlyc3QgVGh1cnNkYXkgb2YgdGhlIHllYXJcbiAqICAgKiBgJ3cnYDogV2VlayBvZiB5ZWFyICgwLTUzKS4gV2VlayAxIGlzIHRoZSB3ZWVrIHdpdGggdGhlIGZpcnN0IFRodXJzZGF5IG9mIHRoZSB5ZWFyXG4gKiAgICogYCdHJ2AsIGAnR0cnYCwgYCdHR0cnYDogVGhlIGFiYnJldmlhdGVkIGZvcm0gb2YgdGhlIGVyYSBzdHJpbmcgKGUuZy4gJ0FEJylcbiAqICAgKiBgJ0dHR0cnYDogVGhlIGxvbmcgZm9ybSBvZiB0aGUgZXJhIHN0cmluZyAoZS5nLiAnQW5ubyBEb21pbmknKVxuICpcbiAqICAgYGZvcm1hdGAgc3RyaW5nIGNhbiBhbHNvIGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHByZWRlZmluZWRcbiAqICAge0BsaW5rIGd1aWRlL2kxOG4gbG9jYWxpemFibGUgZm9ybWF0c306XG4gKlxuICogICAqIGAnbWVkaXVtJ2A6IGVxdWl2YWxlbnQgdG8gYCdNTU0gZCwgeSBoOm1tOnNzIGEnYCBmb3IgZW5fVVMgbG9jYWxlXG4gKiAgICAgKGUuZy4gU2VwIDMsIDIwMTAgMTI6MDU6MDggUE0pXG4gKiAgICogYCdzaG9ydCdgOiBlcXVpdmFsZW50IHRvIGAnTS9kL3l5IGg6bW0gYSdgIGZvciBlbl9VUyAgbG9jYWxlIChlLmcuIDkvMy8xMCAxMjowNSBQTSlcbiAqICAgKiBgJ2Z1bGxEYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdFRUVFLCBNTU1NIGQsIHknYCBmb3IgZW5fVVMgIGxvY2FsZVxuICogICAgIChlLmcuIEZyaWRheSwgU2VwdGVtYmVyIDMsIDIwMTApXG4gKiAgICogYCdsb25nRGF0ZSdgOiBlcXVpdmFsZW50IHRvIGAnTU1NTSBkLCB5J2AgZm9yIGVuX1VTICBsb2NhbGUgKGUuZy4gU2VwdGVtYmVyIDMsIDIwMTApXG4gKiAgICogYCdtZWRpdW1EYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdNTU0gZCwgeSdgIGZvciBlbl9VUyAgbG9jYWxlIChlLmcuIFNlcCAzLCAyMDEwKVxuICogICAqIGAnc2hvcnREYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdNL2QveXknYCBmb3IgZW5fVVMgbG9jYWxlIChlLmcuIDkvMy8xMClcbiAqICAgKiBgJ21lZGl1bVRpbWUnYDogZXF1aXZhbGVudCB0byBgJ2g6bW06c3MgYSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gMTI6MDU6MDggUE0pXG4gKiAgICogYCdzaG9ydFRpbWUnYDogZXF1aXZhbGVudCB0byBgJ2g6bW0gYSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gMTI6MDUgUE0pXG4gKlxuICogICBgZm9ybWF0YCBzdHJpbmcgY2FuIGNvbnRhaW4gbGl0ZXJhbCB2YWx1ZXMuIFRoZXNlIG5lZWQgdG8gYmUgZXNjYXBlZCBieSBzdXJyb3VuZGluZyB3aXRoIHNpbmdsZSBxdW90ZXMgKGUuZy5cbiAqICAgYFwiaCAnaW4gdGhlIG1vcm5pbmcnXCJgKS4gSW4gb3JkZXIgdG8gb3V0cHV0IGEgc2luZ2xlIHF1b3RlLCBlc2NhcGUgaXQgLSBpLmUuLCB0d28gc2luZ2xlIHF1b3RlcyBpbiBhIHNlcXVlbmNlXG4gKiAgIChlLmcuIGBcImggJ28nJ2Nsb2NrJ1wiYCkuXG4gKlxuICogICBBbnkgb3RoZXIgY2hhcmFjdGVycyBpbiB0aGUgYGZvcm1hdGAgc3RyaW5nIHdpbGwgYmUgb3V0cHV0IGFzLWlzLlxuICpcbiAqIEBwYXJhbSB7KERhdGV8bnVtYmVyfHN0cmluZyl9IGRhdGUgRGF0ZSB0byBmb3JtYXQgZWl0aGVyIGFzIERhdGUgb2JqZWN0LCBtaWxsaXNlY29uZHMgKHN0cmluZyBvclxuICogICAgbnVtYmVyKSBvciB2YXJpb3VzIElTTyA4NjAxIGRhdGV0aW1lIHN0cmluZyBmb3JtYXRzIChlLmcuIHl5eXktTU0tZGRUSEg6bW06c3Muc3NzWiBhbmQgaXRzXG4gKiAgICBzaG9ydGVyIHZlcnNpb25zIGxpa2UgeXl5eS1NTS1kZFRISDptbVosIHl5eXktTU0tZGQgb3IgeXl5eU1NZGRUSEhtbXNzWikuIElmIG5vIHRpbWV6b25lIGlzXG4gKiAgICBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpbnB1dCwgdGhlIHRpbWUgaXMgY29uc2lkZXJlZCB0byBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKiBAcGFyYW0ge3N0cmluZz19IGZvcm1hdCBGb3JtYXR0aW5nIHJ1bGVzIChzZWUgRGVzY3JpcHRpb24pLiBJZiBub3Qgc3BlY2lmaWVkLFxuICogICAgYG1lZGl1bURhdGVgIGlzIHVzZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHRpbWV6b25lIFRpbWV6b25lIHRvIGJlIHVzZWQgZm9yIGZvcm1hdHRpbmcuIEl0IHVuZGVyc3RhbmRzIFVUQy9HTVQgYW5kIHRoZVxuICogICAgY29udGluZW50YWwgVVMgdGltZSB6b25lIGFiYnJldmlhdGlvbnMsIGJ1dCBmb3IgZ2VuZXJhbCB1c2UsIHVzZSBhIHRpbWUgem9uZSBvZmZzZXQsIGZvclxuICogICAgZXhhbXBsZSwgYCcrMDQzMCdgICg0IGhvdXJzLCAzMCBtaW51dGVzIGVhc3Qgb2YgdGhlIEdyZWVud2ljaCBtZXJpZGlhbilcbiAqICAgIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3NlciB3aWxsIGJlIHVzZWQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgc3RyaW5nIG9yIHRoZSBpbnB1dCBpZiBpbnB1dCBpcyBub3QgcmVjb2duaXplZCBhcyBkYXRlL21pbGxpcy5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cImZpbHRlci1kYXRlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J21lZGl1bSd9fTwvc3Bhbj46XG4gICAgICAgICAgIDxzcGFuPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J21lZGl1bSd9fTwvc3Bhbj48YnI+XG4gICAgICAgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6J3l5eXktTU0tZGQgSEg6bW06c3MgWid9fTwvc3Bhbj46XG4gICAgICAgICAgPHNwYW4+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZToneXl5eS1NTS1kZCBISDptbTpzcyBaJ319PC9zcGFuPjxicj5cbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZTonTU0vZGQveXl5eSBAIGg6bW1hJ319PC9zcGFuPjpcbiAgICAgICAgICA8c3Bhbj57eycxMjg4MzIzNjIzMDA2JyB8IGRhdGU6J01NL2RkL3l5eXkgQCBoOm1tYSd9fTwvc3Bhbj48YnI+XG4gICAgICAgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7MTI4ODMyMzYyMzAwNiB8IGRhdGU6XCJNTS9kZC95eXl5ICdhdCcgaDptbWFcIn19PC9zcGFuPjpcbiAgICAgICAgICA8c3Bhbj57eycxMjg4MzIzNjIzMDA2JyB8IGRhdGU6XCJNTS9kZC95eXl5ICdhdCcgaDptbWFcIn19PC9zcGFuPjxicj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBmb3JtYXQgZGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZyhcIjEyODgzMjM2MjMwMDYgfCBkYXRlOidtZWRpdW0nXCIpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgdG9NYXRjaCgvT2N0IDJcXGQsIDIwMTAgXFxkezEsMn06XFxkezJ9OlxcZHsyfSAoQU18UE0pLyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiMTI4ODMyMzYyMzAwNiB8IGRhdGU6J3l5eXktTU0tZGQgSEg6bW06c3MgWidcIikpLmdldFRleHQoKSkuXG4gICAgICAgICAgICB0b01hdGNoKC8yMDEwLTEwLTJcXGQgXFxkezJ9OlxcZHsyfTpcXGR7Mn0gKC18XFwrKT9cXGR7NH0vKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoXCInMTI4ODMyMzYyMzAwNicgfCBkYXRlOidNTS9kZC95eXl5IEAgaDptbWEnXCIpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgdG9NYXRjaCgvMTBcXC8yXFxkXFwvMjAxMCBAIFxcZHsxLDJ9OlxcZHsyfShBTXxQTSkvKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoXCInMTI4ODMyMzYyMzAwNicgfCBkYXRlOlxcXCJNTS9kZC95eXl5ICdhdCcgaDptbWFcXFwiXCIpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgdG9NYXRjaCgvMTBcXC8yXFxkXFwvMjAxMCBhdCBcXGR7MSwyfTpcXGR7Mn0oQU18UE0pLyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuZGF0ZUZpbHRlci4kaW5qZWN0ID0gWyckbG9jYWxlJ107XG5mdW5jdGlvbiBkYXRlRmlsdGVyKCRsb2NhbGUpIHtcblxuXG4gIHZhciBSX0lTTzg2MDFfU1RSID0gL14oXFxkezR9KS0/KFxcZFxcZCktPyhcXGRcXGQpKD86VChcXGRcXGQpKD86Oj8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzpcXC4oXFxkKykpPyk/KT8oWnwoWystXSkoXFxkXFxkKTo/KFxcZFxcZCkpPyk/JC87XG4gICAgICAgICAgICAgICAgICAgICAvLyAxICAgICAgICAyICAgICAgIDMgICAgICAgICA0ICAgICAgICAgIDUgICAgICAgICAgNiAgICAgICAgICA3ICAgICAgICAgIDggIDkgICAgIDEwICAgICAgMTFcbiAgZnVuY3Rpb24ganNvblN0cmluZ1RvRGF0ZShzdHJpbmcpIHtcbiAgICB2YXIgbWF0Y2g7XG4gICAgaWYgKChtYXRjaCA9IHN0cmluZy5tYXRjaChSX0lTTzg2MDFfU1RSKSkpIHtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoMCksXG4gICAgICAgICAgdHpIb3VyID0gMCxcbiAgICAgICAgICB0ek1pbiAgPSAwLFxuICAgICAgICAgIGRhdGVTZXR0ZXIgPSBtYXRjaFs4XSA/IGRhdGUuc2V0VVRDRnVsbFllYXIgOiBkYXRlLnNldEZ1bGxZZWFyLFxuICAgICAgICAgIHRpbWVTZXR0ZXIgPSBtYXRjaFs4XSA/IGRhdGUuc2V0VVRDSG91cnMgOiBkYXRlLnNldEhvdXJzO1xuXG4gICAgICBpZiAobWF0Y2hbOV0pIHtcbiAgICAgICAgdHpIb3VyID0gdG9JbnQobWF0Y2hbOV0gKyBtYXRjaFsxMF0pO1xuICAgICAgICB0ek1pbiA9IHRvSW50KG1hdGNoWzldICsgbWF0Y2hbMTFdKTtcbiAgICAgIH1cbiAgICAgIGRhdGVTZXR0ZXIuY2FsbChkYXRlLCB0b0ludChtYXRjaFsxXSksIHRvSW50KG1hdGNoWzJdKSAtIDEsIHRvSW50KG1hdGNoWzNdKSk7XG4gICAgICB2YXIgaCA9IHRvSW50KG1hdGNoWzRdIHx8IDApIC0gdHpIb3VyO1xuICAgICAgdmFyIG0gPSB0b0ludChtYXRjaFs1XSB8fCAwKSAtIHR6TWluO1xuICAgICAgdmFyIHMgPSB0b0ludChtYXRjaFs2XSB8fCAwKTtcbiAgICAgIHZhciBtcyA9IE1hdGgucm91bmQocGFyc2VGbG9hdCgnMC4nICsgKG1hdGNoWzddIHx8IDApKSAqIDEwMDApO1xuICAgICAgdGltZVNldHRlci5jYWxsKGRhdGUsIGgsIG0sIHMsIG1zKTtcbiAgICAgIHJldHVybiBkYXRlO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nO1xuICB9XG5cblxuICByZXR1cm4gZnVuY3Rpb24oZGF0ZSwgZm9ybWF0LCB0aW1lem9uZSkge1xuICAgIHZhciB0ZXh0ID0gJycsXG4gICAgICAgIHBhcnRzID0gW10sXG4gICAgICAgIGZuLCBtYXRjaDtcblxuICAgIGZvcm1hdCA9IGZvcm1hdCB8fCAnbWVkaXVtRGF0ZSc7XG4gICAgZm9ybWF0ID0gJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTW2Zvcm1hdF0gfHwgZm9ybWF0O1xuICAgIGlmIChpc1N0cmluZyhkYXRlKSkge1xuICAgICAgZGF0ZSA9IE5VTUJFUl9TVFJJTkcudGVzdChkYXRlKSA/IHRvSW50KGRhdGUpIDoganNvblN0cmluZ1RvRGF0ZShkYXRlKTtcbiAgICB9XG5cbiAgICBpZiAoaXNOdW1iZXIoZGF0ZSkpIHtcbiAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzRGF0ZShkYXRlKSB8fCAhaXNGaW5pdGUoZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG5cbiAgICB3aGlsZSAoZm9ybWF0KSB7XG4gICAgICBtYXRjaCA9IERBVEVfRk9STUFUU19TUExJVC5leGVjKGZvcm1hdCk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcGFydHMgPSBjb25jYXQocGFydHMsIG1hdGNoLCAxKTtcbiAgICAgICAgZm9ybWF0ID0gcGFydHMucG9wKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0cy5wdXNoKGZvcm1hdCk7XG4gICAgICAgIGZvcm1hdCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGRhdGVUaW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgICBpZiAodGltZXpvbmUpIHtcbiAgICAgIGRhdGVUaW1lem9uZU9mZnNldCA9IHRpbWV6b25lVG9PZmZzZXQodGltZXpvbmUsIGRhdGVUaW1lem9uZU9mZnNldCk7XG4gICAgICBkYXRlID0gY29udmVydFRpbWV6b25lVG9Mb2NhbChkYXRlLCB0aW1lem9uZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGZvckVhY2gocGFydHMsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBmbiA9IERBVEVfRk9STUFUU1t2YWx1ZV07XG4gICAgICB0ZXh0ICs9IGZuID8gZm4oZGF0ZSwgJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLCBkYXRlVGltZXpvbmVPZmZzZXQpXG4gICAgICAgICAgICAgICAgIDogdmFsdWUgPT09ICdcXCdcXCcnID8gJ1xcJycgOiB2YWx1ZS5yZXBsYWNlKC8oXid8JyQpL2csICcnKS5yZXBsYWNlKC8nJy9nLCAnXFwnJyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGV4dDtcbiAgfTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGpzb25cbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiAgIEFsbG93cyB5b3UgdG8gY29udmVydCBhIEphdmFTY3JpcHQgb2JqZWN0IGludG8gSlNPTiBzdHJpbmcuXG4gKlxuICogICBUaGlzIGZpbHRlciBpcyBtb3N0bHkgdXNlZnVsIGZvciBkZWJ1Z2dpbmcuIFdoZW4gdXNpbmcgdGhlIGRvdWJsZSBjdXJseSB7e3ZhbHVlfX0gbm90YXRpb25cbiAqICAgdGhlIGJpbmRpbmcgaXMgYXV0b21hdGljYWxseSBjb252ZXJ0ZWQgdG8gSlNPTi5cbiAqXG4gKiBAcGFyYW0geyp9IG9iamVjdCBBbnkgSmF2YVNjcmlwdCBvYmplY3QgKGluY2x1ZGluZyBhcnJheXMgYW5kIHByaW1pdGl2ZSB0eXBlcykgdG8gZmlsdGVyLlxuICogQHBhcmFtIHtudW1iZXI9fSBzcGFjaW5nIFRoZSBudW1iZXIgb2Ygc3BhY2VzIHRvIHVzZSBwZXIgaW5kZW50YXRpb24sIGRlZmF1bHRzIHRvIDIuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBKU09OIHN0cmluZy5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJmaWx0ZXItanNvblwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxwcmUgaWQ9XCJkZWZhdWx0LXNwYWNpbmdcIj57eyB7J25hbWUnOid2YWx1ZSd9IHwganNvbiB9fTwvcHJlPlxuICAgICAgIDxwcmUgaWQ9XCJjdXN0b20tc3BhY2luZ1wiPnt7IHsnbmFtZSc6J3ZhbHVlJ30gfCBqc29uOjQgfX08L3ByZT5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBqc29uaWZ5IGZpbHRlcmVkIG9iamVjdHMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdkZWZhdWx0LXNwYWNpbmcnKSkuZ2V0VGV4dCgpKS50b01hdGNoKC9cXHtcXG4gezJ9XCJuYW1lXCI6ID9cInZhbHVlXCJcXG59Lyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VzdG9tLXNwYWNpbmcnKSkuZ2V0VGV4dCgpKS50b01hdGNoKC9cXHtcXG4gezR9XCJuYW1lXCI6ID9cInZhbHVlXCJcXG59Lyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqXG4gKi9cbmZ1bmN0aW9uIGpzb25GaWx0ZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QsIHNwYWNpbmcpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQoc3BhY2luZykpIHtcbiAgICAgICAgc3BhY2luZyA9IDI7XG4gICAgfVxuICAgIHJldHVybiB0b0pzb24ob2JqZWN0LCBzcGFjaW5nKTtcbiAgfTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGxvd2VyY2FzZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydHMgc3RyaW5nIHRvIGxvd2VyY2FzZS5cbiAqXG4gKiBTZWUgdGhlIHtAbGluayBuZy51cHBlcmNhc2UgdXBwZXJjYXNlIGZpbHRlciBkb2N1bWVudGF0aW9ufSBmb3IgYSBmdW5jdGlvbmFsbHkgaWRlbnRpY2FsIGV4YW1wbGUuXG4gKlxuICogQHNlZSBhbmd1bGFyLmxvd2VyY2FzZVxuICovXG52YXIgbG93ZXJjYXNlRmlsdGVyID0gdmFsdWVGbihsb3dlcmNhc2UpO1xuXG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUgdXBwZXJjYXNlXG4gKiBAa2luZCBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0cyBzdHJpbmcgdG8gdXBwZXJjYXNlLlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cInVwcGVyY2FzZUZpbHRlckV4YW1wbGVcIiBuYW1lPVwiZmlsdGVyLXVwcGVyY2FzZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgndXBwZXJjYXNlRmlsdGVyRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICRzY29wZS50aXRsZSA9ICdUaGlzIGlzIGEgdGl0bGUnO1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDwhLS0gVGhpcyB0aXRsZSBzaG91bGQgYmUgZm9ybWF0dGVkIG5vcm1hbGx5IC0tPlxuICAgICAgICAgPGgxPnt7dGl0bGV9fTwvaDE+XG4gICAgICAgICA8IS0tIFRoaXMgdGl0bGUgc2hvdWxkIGJlIGNhcGl0YWxpemVkIC0tPlxuICAgICAgICAgPGgxPnt7dGl0bGUgfCB1cHBlcmNhc2V9fTwvaDE+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIHVwcGVyY2FzZUZpbHRlciA9IHZhbHVlRm4odXBwZXJjYXNlKTtcblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSBsaW1pdFRvXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBhcnJheSBvciBzdHJpbmcgY29udGFpbmluZyBvbmx5IGEgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cy4gVGhlIGVsZW1lbnRzIGFyZVxuICogdGFrZW4gZnJvbSBlaXRoZXIgdGhlIGJlZ2lubmluZyBvciB0aGUgZW5kIG9mIHRoZSBzb3VyY2UgYXJyYXksIHN0cmluZyBvciBudW1iZXIsIGFzIHNwZWNpZmllZCBieVxuICogdGhlIHZhbHVlIGFuZCBzaWduIChwb3NpdGl2ZSBvciBuZWdhdGl2ZSkgb2YgYGxpbWl0YC4gT3RoZXIgYXJyYXktbGlrZSBvYmplY3RzIGFyZSBhbHNvIHN1cHBvcnRlZFxuICogKGUuZy4gYXJyYXkgc3ViY2xhc3NlcywgTm9kZUxpc3RzLCBqcUxpdGUvalF1ZXJ5IGNvbGxlY3Rpb25zIGV0YykuIElmIGEgbnVtYmVyIGlzIHVzZWQgYXMgaW5wdXQsXG4gKiBpdCBpcyBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtBcnJheXxBcnJheUxpa2V8c3RyaW5nfG51bWJlcn0gaW5wdXQgLSBBcnJheS9hcnJheS1saWtlLCBzdHJpbmcgb3IgbnVtYmVyIHRvIGJlIGxpbWl0ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGxpbWl0IC0gVGhlIGxlbmd0aCBvZiB0aGUgcmV0dXJuZWQgYXJyYXkgb3Igc3RyaW5nLiBJZiB0aGUgYGxpbWl0YCBudW1iZXJcbiAqICAgICBpcyBwb3NpdGl2ZSwgYGxpbWl0YCBudW1iZXIgb2YgaXRlbXMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBzb3VyY2UgYXJyYXkvc3RyaW5nIGFyZSBjb3BpZWQuXG4gKiAgICAgSWYgdGhlIG51bWJlciBpcyBuZWdhdGl2ZSwgYGxpbWl0YCBudW1iZXIgIG9mIGl0ZW1zIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIGFycmF5L3N0cmluZ1xuICogICAgIGFyZSBjb3BpZWQuIFRoZSBgbGltaXRgIHdpbGwgYmUgdHJpbW1lZCBpZiBpdCBleGNlZWRzIGBhcnJheS5sZW5ndGhgLiBJZiBgbGltaXRgIGlzIHVuZGVmaW5lZCxcbiAqICAgICB0aGUgaW5wdXQgd2lsbCBiZSByZXR1cm5lZCB1bmNoYW5nZWQuXG4gKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKT19IGJlZ2luIC0gSW5kZXggYXQgd2hpY2ggdG8gYmVnaW4gbGltaXRhdGlvbi4gQXMgYSBuZWdhdGl2ZSBpbmRleCxcbiAqICAgICBgYmVnaW5gIGluZGljYXRlcyBhbiBvZmZzZXQgZnJvbSB0aGUgZW5kIG9mIGBpbnB1dGAuIERlZmF1bHRzIHRvIGAwYC5cbiAqIEByZXR1cm5zIHtBcnJheXxzdHJpbmd9IEEgbmV3IHN1Yi1hcnJheSBvciBzdWJzdHJpbmcgb2YgbGVuZ3RoIGBsaW1pdGAgb3IgbGVzcyBpZiB0aGUgaW5wdXQgaGFkXG4gKiAgICAgbGVzcyB0aGFuIGBsaW1pdGAgZWxlbWVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cImxpbWl0VG9FeGFtcGxlXCIgbmFtZT1cImxpbWl0LXRvLWZpbHRlclwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnbGltaXRUb0V4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAkc2NvcGUubnVtYmVycyA9IFsxLDIsMyw0LDUsNiw3LDgsOV07XG4gICAgICAgICAgICAgJHNjb3BlLmxldHRlcnMgPSBcImFiY2RlZmdoaVwiO1xuICAgICAgICAgICAgICRzY29wZS5sb25nTnVtYmVyID0gMjM0NTQzMjM0MjtcbiAgICAgICAgICAgICAkc2NvcGUubnVtTGltaXQgPSAzO1xuICAgICAgICAgICAgICRzY29wZS5sZXR0ZXJMaW1pdCA9IDM7XG4gICAgICAgICAgICAgJHNjb3BlLmxvbmdOdW1iZXJMaW1pdCA9IDM7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgTGltaXQge3tudW1iZXJzfX0gdG86XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIHN0ZXA9XCIxXCIgbmctbW9kZWw9XCJudW1MaW1pdFwiPlxuICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgIDxwPk91dHB1dCBudW1iZXJzOiB7eyBudW1iZXJzIHwgbGltaXRUbzpudW1MaW1pdCB9fTwvcD5cbiAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgIExpbWl0IHt7bGV0dGVyc319IHRvOlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBzdGVwPVwiMVwiIG5nLW1vZGVsPVwibGV0dGVyTGltaXRcIj5cbiAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICA8cD5PdXRwdXQgbGV0dGVyczoge3sgbGV0dGVycyB8IGxpbWl0VG86bGV0dGVyTGltaXQgfX08L3A+XG4gICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICBMaW1pdCB7e2xvbmdOdW1iZXJ9fSB0bzpcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgc3RlcD1cIjFcIiBuZy1tb2RlbD1cImxvbmdOdW1iZXJMaW1pdFwiPlxuICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgIDxwPk91dHB1dCBsb25nIG51bWJlcjoge3sgbG9uZ051bWJlciB8IGxpbWl0VG86bG9uZ051bWJlckxpbWl0IH19PC9wPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICB2YXIgbnVtTGltaXRJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ251bUxpbWl0JykpO1xuICAgICAgIHZhciBsZXR0ZXJMaW1pdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbGV0dGVyTGltaXQnKSk7XG4gICAgICAgdmFyIGxvbmdOdW1iZXJMaW1pdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbG9uZ051bWJlckxpbWl0JykpO1xuICAgICAgIHZhciBsaW1pdGVkTnVtYmVycyA9IGVsZW1lbnQoYnkuYmluZGluZygnbnVtYmVycyB8IGxpbWl0VG86bnVtTGltaXQnKSk7XG4gICAgICAgdmFyIGxpbWl0ZWRMZXR0ZXJzID0gZWxlbWVudChieS5iaW5kaW5nKCdsZXR0ZXJzIHwgbGltaXRUbzpsZXR0ZXJMaW1pdCcpKTtcbiAgICAgICB2YXIgbGltaXRlZExvbmdOdW1iZXIgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2xvbmdOdW1iZXIgfCBsaW1pdFRvOmxvbmdOdW1iZXJMaW1pdCcpKTtcblxuICAgICAgIGl0KCdzaG91bGQgbGltaXQgdGhlIG51bWJlciBhcnJheSB0byBmaXJzdCB0aHJlZSBpdGVtcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KG51bUxpbWl0SW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCczJyk7XG4gICAgICAgICBleHBlY3QobGV0dGVyTGltaXRJbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJzMnKTtcbiAgICAgICAgIGV4cGVjdChsb25nTnVtYmVyTGltaXRJbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJzMnKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTnVtYmVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBudW1iZXJzOiBbMSwyLDNdJyk7XG4gICAgICAgICBleHBlY3QobGltaXRlZExldHRlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbGV0dGVyczogYWJjJyk7XG4gICAgICAgICBleHBlY3QobGltaXRlZExvbmdOdW1iZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbG9uZyBudW1iZXI6IDIzNCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgLy8gVGhlcmUgaXMgYSBidWcgaW4gc2FmYXJpIGFuZCBwcm90cmFjdG9yIHRoYXQgZG9lc24ndCBsaWtlIHRoZSBtaW51cyBrZXlcbiAgICAgICAvLyBpdCgnc2hvdWxkIHVwZGF0ZSB0aGUgb3V0cHV0IHdoZW4gLTMgaXMgZW50ZXJlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgIC8vICAgbnVtTGltaXRJbnB1dC5jbGVhcigpO1xuICAgICAgIC8vICAgbnVtTGltaXRJbnB1dC5zZW5kS2V5cygnLTMnKTtcbiAgICAgICAvLyAgIGxldHRlckxpbWl0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAvLyAgIGxldHRlckxpbWl0SW5wdXQuc2VuZEtleXMoJy0zJyk7XG4gICAgICAgLy8gICBsb25nTnVtYmVyTGltaXRJbnB1dC5jbGVhcigpO1xuICAgICAgIC8vICAgbG9uZ051bWJlckxpbWl0SW5wdXQuc2VuZEtleXMoJy0zJyk7XG4gICAgICAgLy8gICBleHBlY3QobGltaXRlZE51bWJlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbnVtYmVyczogWzcsOCw5XScpO1xuICAgICAgIC8vICAgZXhwZWN0KGxpbWl0ZWRMZXR0ZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxldHRlcnM6IGdoaScpO1xuICAgICAgIC8vICAgZXhwZWN0KGxpbWl0ZWRMb25nTnVtYmVyLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IGxvbmcgbnVtYmVyOiAzNDInKTtcbiAgICAgICAvLyB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgbm90IGV4Y2VlZCB0aGUgbWF4aW11bSBzaXplIG9mIGlucHV0IGFycmF5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBudW1MaW1pdElucHV0LmNsZWFyKCk7XG4gICAgICAgICBudW1MaW1pdElucHV0LnNlbmRLZXlzKCcxMDAnKTtcbiAgICAgICAgIGxldHRlckxpbWl0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgIGxldHRlckxpbWl0SW5wdXQuc2VuZEtleXMoJzEwMCcpO1xuICAgICAgICAgbG9uZ051bWJlckxpbWl0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgIGxvbmdOdW1iZXJMaW1pdElucHV0LnNlbmRLZXlzKCcxMDAnKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTnVtYmVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBudW1iZXJzOiBbMSwyLDMsNCw1LDYsNyw4LDldJyk7XG4gICAgICAgICBleHBlY3QobGltaXRlZExldHRlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbGV0dGVyczogYWJjZGVmZ2hpJyk7XG4gICAgICAgICBleHBlY3QobGltaXRlZExvbmdOdW1iZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbG9uZyBudW1iZXI6IDIzNDU0MzIzNDInKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuKi9cbmZ1bmN0aW9uIGxpbWl0VG9GaWx0ZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbihpbnB1dCwgbGltaXQsIGJlZ2luKSB7XG4gICAgaWYgKE1hdGguYWJzKE51bWJlcihsaW1pdCkpID09PSBJbmZpbml0eSkge1xuICAgICAgbGltaXQgPSBOdW1iZXIobGltaXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaW1pdCA9IHRvSW50KGxpbWl0KTtcbiAgICB9XG4gICAgaWYgKGlzTnVtYmVyTmFOKGxpbWl0KSkgcmV0dXJuIGlucHV0O1xuXG4gICAgaWYgKGlzTnVtYmVyKGlucHV0KSkgaW5wdXQgPSBpbnB1dC50b1N0cmluZygpO1xuICAgIGlmICghaXNBcnJheUxpa2UoaW5wdXQpKSByZXR1cm4gaW5wdXQ7XG5cbiAgICBiZWdpbiA9ICghYmVnaW4gfHwgaXNOYU4oYmVnaW4pKSA/IDAgOiB0b0ludChiZWdpbik7XG4gICAgYmVnaW4gPSAoYmVnaW4gPCAwKSA/IE1hdGgubWF4KDAsIGlucHV0Lmxlbmd0aCArIGJlZ2luKSA6IGJlZ2luO1xuXG4gICAgaWYgKGxpbWl0ID49IDApIHtcbiAgICAgIHJldHVybiBzbGljZUZuKGlucHV0LCBiZWdpbiwgYmVnaW4gKyBsaW1pdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChiZWdpbiA9PT0gMCkge1xuICAgICAgICByZXR1cm4gc2xpY2VGbihpbnB1dCwgbGltaXQsIGlucHV0Lmxlbmd0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2xpY2VGbihpbnB1dCwgTWF0aC5tYXgoMCwgYmVnaW4gKyBsaW1pdCksIGJlZ2luKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHNsaWNlRm4oaW5wdXQsIGJlZ2luLCBlbmQpIHtcbiAgaWYgKGlzU3RyaW5nKGlucHV0KSkgcmV0dXJuIGlucHV0LnNsaWNlKGJlZ2luLCBlbmQpO1xuXG4gIHJldHVybiBzbGljZS5jYWxsKGlucHV0LCBiZWdpbiwgZW5kKTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSBvcmRlckJ5XG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJucyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBpdGVtcyBmcm9tIHRoZSBzcGVjaWZpZWQgYGNvbGxlY3Rpb25gLCBvcmRlcmVkIGJ5IGEgYGNvbXBhcmF0b3JgXG4gKiBmdW5jdGlvbiBiYXNlZCBvbiB0aGUgdmFsdWVzIGNvbXB1dGVkIHVzaW5nIHRoZSBgZXhwcmVzc2lvbmAgcHJlZGljYXRlLlxuICpcbiAqIEZvciBleGFtcGxlLCBgW3tpZDogJ2Zvbyd9LCB7aWQ6ICdiYXInfV0gfCBvcmRlckJ5OidpZCdgIHdvdWxkIHJlc3VsdCBpblxuICogYFt7aWQ6ICdiYXInfSwge2lkOiAnZm9vJ31dYC5cbiAqXG4gKiBUaGUgYGNvbGxlY3Rpb25gIGNhbiBiZSBhbiBBcnJheSBvciBhcnJheS1saWtlIG9iamVjdCAoZS5nLiBOb2RlTGlzdCwgalF1ZXJ5IG9iamVjdCwgVHlwZWRBcnJheSxcbiAqIFN0cmluZywgZXRjKS5cbiAqXG4gKiBUaGUgYGV4cHJlc3Npb25gIGNhbiBiZSBhIHNpbmdsZSBwcmVkaWNhdGUsIG9yIGEgbGlzdCBvZiBwcmVkaWNhdGVzIGVhY2ggc2VydmluZyBhcyBhIHRpZS1icmVha2VyXG4gKiBmb3IgdGhlIHByZWNlZGluZyBvbmUuIFRoZSBgZXhwcmVzc2lvbmAgaXMgZXZhbHVhdGVkIGFnYWluc3QgZWFjaCBpdGVtIGFuZCB0aGUgb3V0cHV0IGlzIHVzZWRcbiAqIGZvciBjb21wYXJpbmcgd2l0aCBvdGhlciBpdGVtcy5cbiAqXG4gKiBZb3UgY2FuIGNoYW5nZSB0aGUgc29ydGluZyBvcmRlciBieSBzZXR0aW5nIGByZXZlcnNlYCB0byBgdHJ1ZWAuIEJ5IGRlZmF1bHQsIGl0ZW1zIGFyZSBzb3J0ZWQgaW5cbiAqIGFzY2VuZGluZyBvcmRlci5cbiAqXG4gKiBUaGUgY29tcGFyaXNvbiBpcyBkb25lIHVzaW5nIHRoZSBgY29tcGFyYXRvcmAgZnVuY3Rpb24uIElmIG5vbmUgaXMgc3BlY2lmaWVkLCBhIGRlZmF1bHQsIGJ1aWx0LWluXG4gKiBjb21wYXJhdG9yIGlzIHVzZWQgKHNlZSBiZWxvdyBmb3IgZGV0YWlscyAtIGluIGEgbnV0c2hlbGwsIGl0IGNvbXBhcmVzIG51bWJlcnMgbnVtZXJpY2FsbHkgYW5kXG4gKiBzdHJpbmdzIGFscGhhYmV0aWNhbGx5KS5cbiAqXG4gKiAjIyMgVW5kZXIgdGhlIGhvb2RcbiAqXG4gKiBPcmRlcmluZyB0aGUgc3BlY2lmaWVkIGBjb2xsZWN0aW9uYCBoYXBwZW5zIGluIHR3byBwaGFzZXM6XG4gKlxuICogMS4gQWxsIGl0ZW1zIGFyZSBwYXNzZWQgdGhyb3VnaCB0aGUgcHJlZGljYXRlIChvciBwcmVkaWNhdGVzKSwgYW5kIHRoZSByZXR1cm5lZCB2YWx1ZXMgYXJlIHNhdmVkXG4gKiAgICBhbG9uZyB3aXRoIHRoZWlyIHR5cGUgKGBzdHJpbmdgLCBgbnVtYmVyYCBldGMpLiBGb3IgZXhhbXBsZSwgYW4gaXRlbSBge2xhYmVsOiAnZm9vJ31gLCBwYXNzZWRcbiAqICAgIHRocm91Z2ggYSBwcmVkaWNhdGUgdGhhdCBleHRyYWN0cyB0aGUgdmFsdWUgb2YgdGhlIGBsYWJlbGAgcHJvcGVydHksIHdvdWxkIGJlIHRyYW5zZm9ybWVkIHRvOlxuICogICAgYGBgXG4gKiAgICB7XG4gKiAgICAgIHZhbHVlOiAnZm9vJyxcbiAqICAgICAgdHlwZTogJ3N0cmluZycsXG4gKiAgICAgIGluZGV4OiAuLi5cbiAqICAgIH1cbiAqICAgIGBgYFxuICogICAgKipOb3RlOioqIGBudWxsYCB2YWx1ZXMgdXNlIGAnbnVsbCdgIGFzIHRoZWlyIHR5cGUuXG4gKiAyLiBUaGUgY29tcGFyYXRvciBmdW5jdGlvbiBpcyB1c2VkIHRvIHNvcnQgdGhlIGl0ZW1zLCBiYXNlZCBvbiB0aGUgZGVyaXZlZCB2YWx1ZXMsIHR5cGVzIGFuZFxuICogICAgaW5kaWNlcy5cbiAqXG4gKiBJZiB5b3UgdXNlIGEgY3VzdG9tIGNvbXBhcmF0b3IsIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGggcGFpcnMgb2Ygb2JqZWN0cyBvZiB0aGUgZm9ybVxuICogYHt2YWx1ZTogLi4uLCB0eXBlOiAnLi4uJywgaW5kZXg6IC4uLn1gIGFuZCBpcyBleHBlY3RlZCB0byByZXR1cm4gYDBgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVhbFxuICogKGFzIGZhciBhcyB0aGUgY29tcGFyYXRvciBpcyBjb25jZXJuZWQpLCBgLTFgIGlmIHRoZSAxc3Qgb25lIHNob3VsZCBiZSByYW5rZWQgaGlnaGVyIHRoYW4gdGhlXG4gKiBzZWNvbmQsIG9yIGAxYCBvdGhlcndpc2UuXG4gKlxuICogSW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgdGhlIHNvcnRpbmcgd2lsbCBiZSBkZXRlcm1pbmlzdGljIGFjcm9zcyBwbGF0Zm9ybXMsIGlmIG5vbmUgb2YgdGhlXG4gKiBzcGVjaWZpZWQgcHJlZGljYXRlcyBjYW4gZGlzdGluZ3Vpc2ggYmV0d2VlbiB0d28gaXRlbXMsIGBvcmRlckJ5YCB3aWxsIGF1dG9tYXRpY2FsbHkgaW50cm9kdWNlIGFcbiAqIGR1bW15IHByZWRpY2F0ZSB0aGF0IHJldHVybnMgdGhlIGl0ZW0ncyBpbmRleCBhcyBgdmFsdWVgLlxuICogKElmIHlvdSBhcmUgdXNpbmcgYSBjdXN0b20gY29tcGFyYXRvciwgbWFrZSBzdXJlIGl0IGNhbiBoYW5kbGUgdGhpcyBwcmVkaWNhdGUgYXMgd2VsbC4pXG4gKlxuICogSWYgYSBjdXN0b20gY29tcGFyYXRvciBzdGlsbCBjYW4ndCBkaXN0aW5ndWlzaCBiZXR3ZWVuIHR3byBpdGVtcywgdGhlbiB0aGV5IHdpbGwgYmUgc29ydGVkIGJhc2VkXG4gKiBvbiB0aGVpciBpbmRleCB1c2luZyB0aGUgYnVpbHQtaW4gY29tcGFyYXRvci5cbiAqXG4gKiBGaW5hbGx5LCBpbiBhbiBhdHRlbXB0IHRvIHNpbXBsaWZ5IHRoaW5ncywgaWYgYSBwcmVkaWNhdGUgcmV0dXJucyBhbiBvYmplY3QgYXMgdGhlIGV4dHJhY3RlZFxuICogdmFsdWUgZm9yIGFuIGl0ZW0sIGBvcmRlckJ5YCB3aWxsIHRyeSB0byBjb252ZXJ0IHRoYXQgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHZhbHVlLCBiZWZvcmUgcGFzc2luZ1xuICogaXQgdG8gdGhlIGNvbXBhcmF0b3IuIFRoZSBmb2xsb3dpbmcgcnVsZXMgZ292ZXJuIHRoZSBjb252ZXJzaW9uOlxuICpcbiAqIDEuIElmIHRoZSBvYmplY3QgaGFzIGEgYHZhbHVlT2YoKWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhIHByaW1pdGl2ZSwgaXRzIHJldHVybiB2YWx1ZSB3aWxsIGJlXG4gKiAgICB1c2VkIGluc3RlYWQuPGJyIC8+XG4gKiAgICAoSWYgdGhlIG9iamVjdCBoYXMgYSBgdmFsdWVPZigpYCBtZXRob2QgdGhhdCByZXR1cm5zIGFub3RoZXIgb2JqZWN0LCB0aGVuIHRoZSByZXR1cm5lZCBvYmplY3RcbiAqICAgIHdpbGwgYmUgdXNlZCBpbiBzdWJzZXF1ZW50IHN0ZXBzLilcbiAqIDIuIElmIHRoZSBvYmplY3QgaGFzIGEgY3VzdG9tIGB0b1N0cmluZygpYCBtZXRob2QgKGkuZS4gbm90IHRoZSBvbmUgaW5oZXJpdGVkIGZyb20gYE9iamVjdGApIHRoYXRcbiAqICAgIHJldHVybnMgYSBwcmltaXRpdmUsIGl0cyByZXR1cm4gdmFsdWUgd2lsbCBiZSB1c2VkIGluc3RlYWQuPGJyIC8+XG4gKiAgICAoSWYgdGhlIG9iamVjdCBoYXMgYSBgdG9TdHJpbmcoKWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhbm90aGVyIG9iamVjdCwgdGhlbiB0aGUgcmV0dXJuZWQgb2JqZWN0XG4gKiAgICB3aWxsIGJlIHVzZWQgaW4gc3Vic2VxdWVudCBzdGVwcy4pXG4gKiAzLiBObyBjb252ZXJzaW9uOyB0aGUgb2JqZWN0IGl0c2VsZiBpcyB1c2VkLlxuICpcbiAqICMjIyBUaGUgZGVmYXVsdCBjb21wYXJhdG9yXG4gKlxuICogVGhlIGRlZmF1bHQsIGJ1aWx0LWluIGNvbXBhcmF0b3Igc2hvdWxkIGJlIHN1ZmZpY2llbnQgZm9yIG1vc3QgdXNlY2FzZXMuIEluIHNob3J0LCBpdCBjb21wYXJlc1xuICogbnVtYmVycyBudW1lcmljYWxseSwgc3RyaW5ncyBhbHBoYWJldGljYWxseSAoYW5kIGNhc2UtaW5zZW5zaXRpdmVseSksIGZvciBvYmplY3RzIGZhbGxzIGJhY2sgdG9cbiAqIHVzaW5nIHRoZWlyIGluZGV4IGluIHRoZSBvcmlnaW5hbCBjb2xsZWN0aW9uLCBzb3J0cyB2YWx1ZXMgb2YgZGlmZmVyZW50IHR5cGVzIGJ5IHR5cGUgYW5kIHB1dHNcbiAqIGB1bmRlZmluZWRgIGFuZCBgbnVsbGAgdmFsdWVzIGF0IHRoZSBlbmQgb2YgdGhlIHNvcnRlZCBsaXN0LlxuICpcbiAqIE1vcmUgc3BlY2lmaWNhbGx5LCBpdCBmb2xsb3dzIHRoZXNlIHN0ZXBzIHRvIGRldGVybWluZSB0aGUgcmVsYXRpdmUgb3JkZXIgb2YgaXRlbXM6XG4gKlxuICogMS4gSWYgdGhlIGNvbXBhcmVkIHZhbHVlcyBhcmUgb2YgZGlmZmVyZW50IHR5cGVzOlxuICogICAgLSBJZiBvbmUgb2YgdGhlIHZhbHVlcyBpcyB1bmRlZmluZWQsIGNvbnNpZGVyIGl0IFwiZ3JlYXRlciB0aGFuXCIgdGhlIG90aGVyLlxuICogICAgLSBFbHNlIGlmIG9uZSBvZiB0aGUgdmFsdWVzIGlzIG51bGwsIGNvbnNpZGVyIGl0IFwiZ3JlYXRlciB0aGFuXCIgdGhlIG90aGVyLlxuICogICAgLSBFbHNlIGNvbXBhcmUgdGhlIHR5cGVzIHRoZW1zZWx2ZXMgYWxwaGFiZXRpY2FsbHkuXG4gKiAyLiBJZiBib3RoIHZhbHVlcyBhcmUgb2YgdHlwZSBgc3RyaW5nYCwgY29tcGFyZSB0aGVtIGFscGhhYmV0aWNhbGx5IGluIGEgY2FzZS0gYW5kXG4gKiAgICBsb2NhbGUtaW5zZW5zaXRpdmUgd2F5LlxuICogMy4gSWYgYm90aCB2YWx1ZXMgYXJlIG9iamVjdHMsIGNvbXBhcmUgdGhlaXIgaW5kaWNlcyBpbnN0ZWFkLlxuICogNC4gT3RoZXJ3aXNlLCByZXR1cm46XG4gKiAgICAtICBgMGAsIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWFsIChieSBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbiwgaS5lLiB1c2luZyBgPT09YCkuXG4gKiAgICAtIGAtMWAsIGlmIHRoZSAxc3QgdmFsdWUgaXMgXCJsZXNzIHRoYW5cIiB0aGUgMm5kIHZhbHVlIChjb21wYXJlZCB1c2luZyB0aGUgYDxgIG9wZXJhdG9yKS5cbiAqICAgIC0gIGAxYCwgb3RoZXJ3aXNlLlxuICpcbiAqICoqTm90ZToqKiBJZiB5b3Ugbm90aWNlIG51bWJlcnMgbm90IGJlaW5nIHNvcnRlZCBhcyBleHBlY3RlZCwgbWFrZSBzdXJlIHRoZXkgYXJlIGFjdHVhbGx5IGJlaW5nXG4gKiAgICAgICAgICAgc2F2ZWQgYXMgbnVtYmVycyBhbmQgbm90IHN0cmluZ3MuXG4gKiAqKk5vdGU6KiogRm9yIHRoZSBwdXJwb3NlIG9mIHNvcnRpbmcsIGBudWxsYCBhbmQgYHVuZGVmaW5lZGAgYXJlIGNvbnNpZGVyZWQgXCJncmVhdGVyIHRoYW5cIlxuICogICAgICAgICAgIGFueSBvdGhlciB2YWx1ZSAod2l0aCB1bmRlZmluZWQgXCJncmVhdGVyIHRoYW5cIiBudWxsKS4gVGhpcyBlZmZlY3RpdmVseSBtZWFucyB0aGF0IGBudWxsYFxuICogICAgICAgICAgIGFuZCBgdW5kZWZpbmVkYCB2YWx1ZXMgZW5kIHVwIGF0IHRoZSBlbmQgb2YgYSBsaXN0IHNvcnRlZCBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gKiAqKk5vdGU6KiogYG51bGxgIHZhbHVlcyB1c2UgYCdudWxsJ2AgYXMgdGhlaXIgdHlwZSB0byBiZSBhYmxlIHRvIGRpc3Rpbmd1aXNoIHRoZW0gZnJvbSBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8QXJyYXlMaWtlfSBjb2xsZWN0aW9uIC0gVGhlIGNvbGxlY3Rpb24gKGFycmF5IG9yIGFycmF5LWxpa2Ugb2JqZWN0KSB0byBzb3J0LlxuICogQHBhcmFtIHsoRnVuY3Rpb258c3RyaW5nfEFycmF5LjxGdW5jdGlvbnxzdHJpbmc+KT19IGV4cHJlc3Npb24gLSBBIHByZWRpY2F0ZSAob3IgbGlzdCBvZlxuICogICAgcHJlZGljYXRlcykgdG8gYmUgdXNlZCBieSB0aGUgY29tcGFyYXRvciB0byBkZXRlcm1pbmUgdGhlIG9yZGVyIG9mIGVsZW1lbnRzLlxuICpcbiAqICAgIENhbiBiZSBvbmUgb2Y6XG4gKlxuICogICAgLSBgRnVuY3Rpb25gOiBBIGdldHRlciBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIGVhY2ggaXRlbSBhcyBhcmd1bWVudCBhbmRcbiAqICAgICAgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGJlIHVzZWQgZm9yIHNvcnRpbmcuXG4gKiAgICAtIGBzdHJpbmdgOiBBbiBBbmd1bGFySlMgZXhwcmVzc2lvbi4gVGhpcyBleHByZXNzaW9uIHdpbGwgYmUgZXZhbHVhdGVkIGFnYWluc3QgZWFjaCBpdGVtIGFuZCB0aGVcbiAqICAgICAgcmVzdWx0IHdpbGwgYmUgdXNlZCBmb3Igc29ydGluZy4gRm9yIGV4YW1wbGUsIHVzZSBgJ2xhYmVsJ2AgdG8gc29ydCBieSBhIHByb3BlcnR5IGNhbGxlZFxuICogICAgICBgbGFiZWxgIG9yIGAnbGFiZWwuc3Vic3RyaW5nKDAsIDMpJ2AgdG8gc29ydCBieSB0aGUgZmlyc3QgMyBjaGFyYWN0ZXJzIG9mIHRoZSBgbGFiZWxgXG4gKiAgICAgIHByb3BlcnR5LjxiciAvPlxuICogICAgICAoVGhlIHJlc3VsdCBvZiBhIGNvbnN0YW50IGV4cHJlc3Npb24gaXMgaW50ZXJwcmV0ZWQgYXMgYSBwcm9wZXJ0eSBuYW1lIHRvIGJlIHVzZWQgZm9yXG4gKiAgICAgIGNvbXBhcmlzb24uIEZvciBleGFtcGxlLCB1c2UgYCdcInNwZWNpYWwgbmFtZVwiJ2AgKG5vdGUgdGhlIGV4dHJhIHBhaXIgb2YgcXVvdGVzKSB0byBzb3J0IGJ5IGFcbiAqICAgICAgcHJvcGVydHkgY2FsbGVkIGBzcGVjaWFsIG5hbWVgLik8YnIgLz5cbiAqICAgICAgQW4gZXhwcmVzc2lvbiBjYW4gYmUgb3B0aW9uYWxseSBwcmVmaXhlZCB3aXRoIGArYCBvciBgLWAgdG8gY29udHJvbCB0aGUgc29ydGluZyBkaXJlY3Rpb24sXG4gKiAgICAgIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nLiBGb3IgZXhhbXBsZSwgYCcrbGFiZWwnYCBvciBgJy1sYWJlbCdgLiBJZiBubyBwcm9wZXJ0eSBpcyBwcm92aWRlZCxcbiAqICAgICAgKGUuZy4gYCcrJ2Agb3IgYCctJ2ApLCB0aGUgY29sbGVjdGlvbiBlbGVtZW50IGl0c2VsZiBpcyB1c2VkIGluIGNvbXBhcmlzb25zLlxuICogICAgLSBgQXJyYXlgOiBBbiBhcnJheSBvZiBmdW5jdGlvbiBhbmQvb3Igc3RyaW5nIHByZWRpY2F0ZXMuIElmIGEgcHJlZGljYXRlIGNhbm5vdCBkZXRlcm1pbmUgdGhlXG4gKiAgICAgIHJlbGF0aXZlIG9yZGVyIG9mIHR3byBpdGVtcywgdGhlIG5leHQgcHJlZGljYXRlIGlzIHVzZWQgYXMgYSB0aWUtYnJlYWtlci5cbiAqXG4gKiAqKk5vdGU6KiogSWYgdGhlIHByZWRpY2F0ZSBpcyBtaXNzaW5nIG9yIGVtcHR5IHRoZW4gaXQgZGVmYXVsdHMgdG8gYCcrJ2AuXG4gKlxuICogQHBhcmFtIHtib29sZWFuPX0gcmV2ZXJzZSAtIElmIGB0cnVlYCwgcmV2ZXJzZSB0aGUgc29ydGluZyBvcmRlci5cbiAqIEBwYXJhbSB7KEZ1bmN0aW9uKT19IGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmdW5jdGlvbiB1c2VkIHRvIGRldGVybWluZSB0aGUgcmVsYXRpdmUgb3JkZXIgb2ZcbiAqICAgIHZhbHVlIHBhaXJzLiBJZiBvbWl0dGVkLCB0aGUgYnVpbHQtaW4gY29tcGFyYXRvciB3aWxsIGJlIHVzZWQuXG4gKlxuICogQHJldHVybnMge0FycmF5fSAtIFRoZSBzb3J0ZWQgYXJyYXkuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgT3JkZXJpbmcgYSB0YWJsZSB3aXRoIGBuZ1JlcGVhdGBcbiAqXG4gKiBUaGUgZXhhbXBsZSBiZWxvdyBkZW1vbnN0cmF0ZXMgYSBzaW1wbGUge0BsaW5rIG5nUmVwZWF0IG5nUmVwZWF0fSwgd2hlcmUgdGhlIGRhdGEgaXMgc29ydGVkIGJ5XG4gKiBhZ2UgaW4gZGVzY2VuZGluZyBvcmRlciAoZXhwcmVzc2lvbiBpcyBzZXQgdG8gYCctYWdlJ2ApLiBUaGUgYGNvbXBhcmF0b3JgIGlzIG5vdCBzZXQsIHdoaWNoIG1lYW5zXG4gKiBpdCBkZWZhdWx0cyB0byB0aGUgYnVpbHQtaW4gY29tcGFyYXRvci5cbiAqXG4gICA8ZXhhbXBsZSBuYW1lPVwib3JkZXJCeS1zdGF0aWNcIiBtb2R1bGU9XCJvcmRlckJ5RXhhbXBsZTFcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kc1wiPlxuICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgPHRoPk5hbWU8L3RoPlxuICAgICAgICAgICAgIDx0aD5QaG9uZSBOdW1iZXI8L3RoPlxuICAgICAgICAgICAgIDx0aD5BZ2U8L3RoPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBvcmRlckJ5OictYWdlJ1wiPlxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5uYW1lfX08L3RkPlxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5waG9uZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQuYWdlfX08L3RkPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgPC90YWJsZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ29yZGVyQnlFeGFtcGxlMScsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBbXG4gICAgICAgICAgICAge25hbWU6ICdKb2huJywgICBwaG9uZTogJzU1NS0xMjEyJywgIGFnZTogMTB9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWFyeScsICAgcGhvbmU6ICc1NTUtOTg3NicsICBhZ2U6IDE5fSxcbiAgICAgICAgICAgICB7bmFtZTogJ01pa2UnLCAgIHBob25lOiAnNTU1LTQzMjEnLCAgYWdlOiAyMX0sXG4gICAgICAgICAgICAge25hbWU6ICdBZGFtJywgICBwaG9uZTogJzU1NS01Njc4JywgIGFnZTogMzV9LFxuICAgICAgICAgICAgIHtuYW1lOiAnSnVsaWUnLCAgcGhvbmU6ICc1NTUtODc2NScsICBhZ2U6IDI5fVxuICAgICAgICAgICBdO1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAuZnJpZW5kcyB7XG4gICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgICAgIH1cblxuICAgICAgIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQsIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQ7XG4gICAgICAgICBwYWRkaW5nOiA1cHggMTBweDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQ6Zmlyc3QtY2hpbGQsIC5mcmllbmRzIHRoOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiBub25lO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgLy8gRWxlbWVudCBsb2NhdG9yc1xuICAgICAgIHZhciBuYW1lcyA9IGVsZW1lbnQuYWxsKGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpKTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGJ5IGFnZSBpbiByZXZlcnNlIG9yZGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCgxKS5nZXRUZXh0KCkpLnRvQmUoJ0p1bGllJyk7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDIpLmdldFRleHQoKSkudG9CZSgnTWlrZScpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCgzKS5nZXRUZXh0KCkpLnRvQmUoJ01hcnknKTtcbiAgICAgICAgIGV4cGVjdChuYW1lcy5nZXQoNCkuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqIDxociAvPlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQ2hhbmdpbmcgcGFyYW1ldGVycyBkeW5hbWljYWxseVxuICpcbiAqIEFsbCBwYXJhbWV0ZXJzIGNhbiBiZSBjaGFuZ2VkIGR5bmFtaWNhbGx5LiBUaGUgbmV4dCBleGFtcGxlIHNob3dzIGhvdyB5b3UgY2FuIG1ha2UgdGhlIGNvbHVtbnMgb2ZcbiAqIGEgdGFibGUgc29ydGFibGUsIGJ5IGJpbmRpbmcgdGhlIGBleHByZXNzaW9uYCBhbmQgYHJldmVyc2VgIHBhcmFtZXRlcnMgdG8gc2NvcGUgcHJvcGVydGllcy5cbiAqXG4gICA8ZXhhbXBsZSBuYW1lPVwib3JkZXJCeS1keW5hbWljXCIgbW9kdWxlPVwib3JkZXJCeUV4YW1wbGUyXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxwcmU+U29ydCBieSA9IHt7cHJvcGVydHlOYW1lfX07IHJldmVyc2UgPSB7e3JldmVyc2V9fTwvcHJlPlxuICAgICAgICAgPGhyLz5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJwcm9wZXJ0eU5hbWUgPSBudWxsOyByZXZlcnNlID0gZmFsc2VcIj5TZXQgdG8gdW5zb3J0ZWQ8L2J1dHRvbj5cbiAgICAgICAgIDxoci8+XG4gICAgICAgICA8dGFibGUgY2xhc3M9XCJmcmllbmRzXCI+XG4gICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KCduYW1lJylcIj5OYW1lPC9idXR0b24+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNvcnRvcmRlclwiIG5nLXNob3c9XCJwcm9wZXJ0eU5hbWUgPT09ICduYW1lJ1wiIG5nLWNsYXNzPVwie3JldmVyc2U6IHJldmVyc2V9XCI+PC9zcGFuPlxuICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNvcnRCeSgncGhvbmUnKVwiPlBob25lIE51bWJlcjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0b3JkZXJcIiBuZy1zaG93PVwicHJvcGVydHlOYW1lID09PSAncGhvbmUnXCIgbmctY2xhc3M9XCJ7cmV2ZXJzZTogcmV2ZXJzZX1cIj48L3NwYW4+XG4gICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KCdhZ2UnKVwiPkFnZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0b3JkZXJcIiBuZy1zaG93PVwicHJvcGVydHlOYW1lID09PSAnYWdlJ1wiIG5nLWNsYXNzPVwie3JldmVyc2U6IHJldmVyc2V9XCI+PC9zcGFuPlxuICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB8IG9yZGVyQnk6cHJvcGVydHlOYW1lOnJldmVyc2VcIj5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQucGhvbmV9fTwvdGQ+XG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLmFnZX19PC90ZD5cbiAgICAgICAgICAgPC90cj5cbiAgICAgICAgIDwvdGFibGU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZTInLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgIHZhciBmcmllbmRzID0gW1xuICAgICAgICAgICAgIHtuYW1lOiAnSm9obicsICAgcGhvbmU6ICc1NTUtMTIxMicsICBhZ2U6IDEwfSxcbiAgICAgICAgICAgICB7bmFtZTogJ01hcnknLCAgIHBob25lOiAnNTU1LTk4NzYnLCAgYWdlOiAxOX0sXG4gICAgICAgICAgICAge25hbWU6ICdNaWtlJywgICBwaG9uZTogJzU1NS00MzIxJywgIGFnZTogMjF9LFxuICAgICAgICAgICAgIHtuYW1lOiAnQWRhbScsICAgcGhvbmU6ICc1NTUtNTY3OCcsICBhZ2U6IDM1fSxcbiAgICAgICAgICAgICB7bmFtZTogJ0p1bGllJywgIHBob25lOiAnNTU1LTg3NjUnLCAgYWdlOiAyOX1cbiAgICAgICAgICAgXTtcblxuICAgICAgICAgICAkc2NvcGUucHJvcGVydHlOYW1lID0gJ2FnZSc7XG4gICAgICAgICAgICRzY29wZS5yZXZlcnNlID0gdHJ1ZTtcbiAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBmcmllbmRzO1xuXG4gICAgICAgICAgICRzY29wZS5zb3J0QnkgPSBmdW5jdGlvbihwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgICAkc2NvcGUucmV2ZXJzZSA9ICgkc2NvcGUucHJvcGVydHlOYW1lID09PSBwcm9wZXJ0eU5hbWUpID8gISRzY29wZS5yZXZlcnNlIDogZmFsc2U7XG4gICAgICAgICAgICAgJHNjb3BlLnByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZTtcbiAgICAgICAgICAgfTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLmZyaWVuZHMge1xuICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICB9XG5cbiAgICAgICAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkLCAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkO1xuICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkOmZpcnN0LWNoaWxkLCAuZnJpZW5kcyB0aDpmaXJzdC1jaGlsZCB7XG4gICAgICAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICAgICB9XG5cbiAgICAgICAuc29ydG9yZGVyOmFmdGVyIHtcbiAgICAgICAgIGNvbnRlbnQ6ICdcXDI1YjInOyAgIC8vIEJMQUNLIFVQLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICAgIC5zb3J0b3JkZXIucmV2ZXJzZTphZnRlciB7XG4gICAgICAgICBjb250ZW50OiAnXFwyNWJjJzsgICAvLyBCTEFDSyBET1dOLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAvLyBFbGVtZW50IGxvY2F0b3JzXG4gICAgICAgdmFyIHVuc29ydEJ1dHRvbiA9IGVsZW1lbnQoYnkucGFydGlhbEJ1dHRvblRleHQoJ3Vuc29ydGVkJykpO1xuICAgICAgIHZhciBuYW1lSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnTmFtZScpKTtcbiAgICAgICB2YXIgcGhvbmVIZWFkZXIgPSBlbGVtZW50KGJ5LnBhcnRpYWxCdXR0b25UZXh0KCdQaG9uZScpKTtcbiAgICAgICB2YXIgYWdlSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnQWdlJykpO1xuICAgICAgIHZhciBmaXJzdE5hbWUgPSBlbGVtZW50KGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpLnJvdygwKSk7XG4gICAgICAgdmFyIGxhc3ROYW1lID0gZWxlbWVudChieS5yZXBlYXRlcignZnJpZW5kcycpLmNvbHVtbignZnJpZW5kLm5hbWUnKS5yb3coNCkpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzb3J0IGZyaWVuZHMgYnkgc29tZSBwcm9wZXJ0eSwgd2hlbiBjbGlja2luZyBvbiB0aGUgY29sdW1uIGhlYWRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgcGhvbmVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNYXJ5Jyk7XG5cbiAgICAgICAgIG5hbWVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNaWtlJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGluIHJldmVyc2Ugb3JkZXIsIHdoZW4gY2xpY2tpbmcgb24gdGhlIHNhbWUgY29sdW1uJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuXG4gICAgICAgICBhZ2VIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgcmVzdG9yZSB0aGUgb3JpZ2luYWwgb3JkZXIsIHdoZW4gY2xpY2tpbmcgXCJTZXQgdG8gdW5zb3J0ZWRcIicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgdW5zb3J0QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSnVsaWUnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICogPGhyIC8+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgb3JkZXJCeWAgaW5zaWRlIGEgY29udHJvbGxlclxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gY2FsbCB0aGUgYG9yZGVyQnlgIGZpbHRlciBtYW51YWxseSwgYnkgaW5qZWN0aW5nIGBvcmRlckJ5RmlsdGVyYCwgYW5kXG4gKiBjYWxsaW5nIGl0IHdpdGggdGhlIGRlc2lyZWQgcGFyYW1ldGVycy4gKEFsdGVybmF0aXZlbHksIHlvdSBjb3VsZCBpbmplY3QgdGhlIGAkZmlsdGVyYCBmYWN0b3J5XG4gKiBhbmQgcmV0cmlldmUgdGhlIGBvcmRlckJ5YCBmaWx0ZXIgd2l0aCBgJGZpbHRlcignb3JkZXJCeScpYC4pXG4gKlxuICAgPGV4YW1wbGUgbmFtZT1cIm9yZGVyQnktY2FsbC1tYW51YWxseVwiIG1vZHVsZT1cIm9yZGVyQnlFeGFtcGxlM1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8cHJlPlNvcnQgYnkgPSB7e3Byb3BlcnR5TmFtZX19OyByZXZlcnNlID0ge3tyZXZlcnNlfX08L3ByZT5cbiAgICAgICAgIDxoci8+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KG51bGwpXCI+U2V0IHRvIHVuc29ydGVkPC9idXR0b24+XG4gICAgICAgICA8aHIvPlxuICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kc1wiPlxuICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNvcnRCeSgnbmFtZScpXCI+TmFtZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0b3JkZXJcIiBuZy1zaG93PVwicHJvcGVydHlOYW1lID09PSAnbmFtZSdcIiBuZy1jbGFzcz1cIntyZXZlcnNlOiByZXZlcnNlfVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJzb3J0QnkoJ3Bob25lJylcIj5QaG9uZSBOdW1iZXI8L2J1dHRvbj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic29ydG9yZGVyXCIgbmctc2hvdz1cInByb3BlcnR5TmFtZSA9PT0gJ3Bob25lJ1wiIG5nLWNsYXNzPVwie3JldmVyc2U6IHJldmVyc2V9XCI+PC9zcGFuPlxuICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNvcnRCeSgnYWdlJylcIj5BZ2U8L2J1dHRvbj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic29ydG9yZGVyXCIgbmctc2hvdz1cInByb3BlcnR5TmFtZSA9PT0gJ2FnZSdcIiBuZy1jbGFzcz1cIntyZXZlcnNlOiByZXZlcnNlfVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHNcIj5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQucGhvbmV9fTwvdGQ+XG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLmFnZX19PC90ZD5cbiAgICAgICAgICAgPC90cj5cbiAgICAgICAgIDwvdGFibGU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZTMnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ29yZGVyQnlGaWx0ZXInLCBmdW5jdGlvbigkc2NvcGUsIG9yZGVyQnkpIHtcbiAgICAgICAgICAgdmFyIGZyaWVuZHMgPSBbXG4gICAgICAgICAgICAge25hbWU6ICdKb2huJywgICBwaG9uZTogJzU1NS0xMjEyJywgIGFnZTogMTB9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWFyeScsICAgcGhvbmU6ICc1NTUtOTg3NicsICBhZ2U6IDE5fSxcbiAgICAgICAgICAgICB7bmFtZTogJ01pa2UnLCAgIHBob25lOiAnNTU1LTQzMjEnLCAgYWdlOiAyMX0sXG4gICAgICAgICAgICAge25hbWU6ICdBZGFtJywgICBwaG9uZTogJzU1NS01Njc4JywgIGFnZTogMzV9LFxuICAgICAgICAgICAgIHtuYW1lOiAnSnVsaWUnLCAgcGhvbmU6ICc1NTUtODc2NScsICBhZ2U6IDI5fVxuICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICRzY29wZS5wcm9wZXJ0eU5hbWUgPSAnYWdlJztcbiAgICAgICAgICAgJHNjb3BlLnJldmVyc2UgPSB0cnVlO1xuICAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IG9yZGVyQnkoZnJpZW5kcywgJHNjb3BlLnByb3BlcnR5TmFtZSwgJHNjb3BlLnJldmVyc2UpO1xuXG4gICAgICAgICAgICRzY29wZS5zb3J0QnkgPSBmdW5jdGlvbihwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgICAkc2NvcGUucmV2ZXJzZSA9IChwcm9wZXJ0eU5hbWUgIT09IG51bGwgJiYgJHNjb3BlLnByb3BlcnR5TmFtZSA9PT0gcHJvcGVydHlOYW1lKVxuICAgICAgICAgICAgICAgICA/ICEkc2NvcGUucmV2ZXJzZSA6IGZhbHNlO1xuICAgICAgICAgICAgICRzY29wZS5wcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWU7XG4gICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBvcmRlckJ5KGZyaWVuZHMsICRzY29wZS5wcm9wZXJ0eU5hbWUsICRzY29wZS5yZXZlcnNlKTtcbiAgICAgICAgICAgfTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLmZyaWVuZHMge1xuICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICB9XG5cbiAgICAgICAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkLCAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkO1xuICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkOmZpcnN0LWNoaWxkLCAuZnJpZW5kcyB0aDpmaXJzdC1jaGlsZCB7XG4gICAgICAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICAgICB9XG5cbiAgICAgICAuc29ydG9yZGVyOmFmdGVyIHtcbiAgICAgICAgIGNvbnRlbnQ6ICdcXDI1YjInOyAgIC8vIEJMQUNLIFVQLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICAgIC5zb3J0b3JkZXIucmV2ZXJzZTphZnRlciB7XG4gICAgICAgICBjb250ZW50OiAnXFwyNWJjJzsgICAvLyBCTEFDSyBET1dOLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAvLyBFbGVtZW50IGxvY2F0b3JzXG4gICAgICAgdmFyIHVuc29ydEJ1dHRvbiA9IGVsZW1lbnQoYnkucGFydGlhbEJ1dHRvblRleHQoJ3Vuc29ydGVkJykpO1xuICAgICAgIHZhciBuYW1lSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnTmFtZScpKTtcbiAgICAgICB2YXIgcGhvbmVIZWFkZXIgPSBlbGVtZW50KGJ5LnBhcnRpYWxCdXR0b25UZXh0KCdQaG9uZScpKTtcbiAgICAgICB2YXIgYWdlSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnQWdlJykpO1xuICAgICAgIHZhciBmaXJzdE5hbWUgPSBlbGVtZW50KGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpLnJvdygwKSk7XG4gICAgICAgdmFyIGxhc3ROYW1lID0gZWxlbWVudChieS5yZXBlYXRlcignZnJpZW5kcycpLmNvbHVtbignZnJpZW5kLm5hbWUnKS5yb3coNCkpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzb3J0IGZyaWVuZHMgYnkgc29tZSBwcm9wZXJ0eSwgd2hlbiBjbGlja2luZyBvbiB0aGUgY29sdW1uIGhlYWRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgcGhvbmVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNYXJ5Jyk7XG5cbiAgICAgICAgIG5hbWVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNaWtlJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGluIHJldmVyc2Ugb3JkZXIsIHdoZW4gY2xpY2tpbmcgb24gdGhlIHNhbWUgY29sdW1uJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuXG4gICAgICAgICBhZ2VIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgcmVzdG9yZSB0aGUgb3JpZ2luYWwgb3JkZXIsIHdoZW4gY2xpY2tpbmcgXCJTZXQgdG8gdW5zb3J0ZWRcIicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgdW5zb3J0QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSnVsaWUnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICogPGhyIC8+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBhIGN1c3RvbSBjb21wYXJhdG9yXG4gKlxuICogSWYgeW91IGhhdmUgdmVyeSBzcGVjaWZpYyByZXF1aXJlbWVudHMgYWJvdXQgdGhlIHdheSBpdGVtcyBhcmUgc29ydGVkLCB5b3UgY2FuIHBhc3MgeW91ciBvd25cbiAqIGNvbXBhcmF0b3IgZnVuY3Rpb24uIEZvciBleGFtcGxlLCB5b3UgbWlnaHQgbmVlZCB0byBjb21wYXJlIHNvbWUgc3RyaW5ncyBpbiBhIGxvY2FsZS1zZW5zaXRpdmVcbiAqIHdheS4gKFdoZW4gc3BlY2lmeWluZyBhIGN1c3RvbSBjb21wYXJhdG9yLCB5b3UgYWxzbyBuZWVkIHRvIHBhc3MgYSB2YWx1ZSBmb3IgdGhlIGByZXZlcnNlYFxuICogYXJndW1lbnQgLSBwYXNzaW5nIGBmYWxzZWAgcmV0YWlucyB0aGUgZGVmYXVsdCBzb3J0aW5nIG9yZGVyLCBpLmUuIGFzY2VuZGluZy4pXG4gKlxuICAgPGV4YW1wbGUgbmFtZT1cIm9yZGVyQnktY3VzdG9tLWNvbXBhcmF0b3JcIiBtb2R1bGU9XCJvcmRlckJ5RXhhbXBsZTRcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cImZyaWVuZHMtY29udGFpbmVyIGN1c3RvbS1jb21wYXJhdG9yXCI+XG4gICAgICAgICAgIDxoMz5Mb2NhbGUtc2Vuc2l0aXZlIENvbXBhcmF0b3I8L2gzPlxuICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJmcmllbmRzXCI+XG4gICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgPHRoPk5hbWU8L3RoPlxuICAgICAgICAgICAgICAgPHRoPkZhdm9yaXRlIExldHRlcjwvdGg+XG4gICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBvcmRlckJ5OidmYXZvcml0ZUxldHRlcic6ZmFsc2U6bG9jYWxlU2Vuc2l0aXZlQ29tcGFyYXRvclwiPlxuICAgICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLm5hbWV9fTwvdGQ+XG4gICAgICAgICAgICAgICA8dGQ+e3tmcmllbmQuZmF2b3JpdGVMZXR0ZXJ9fTwvdGQ+XG4gICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGRpdiBjbGFzcz1cImZyaWVuZHMtY29udGFpbmVyIGRlZmF1bHQtY29tcGFyYXRvclwiPlxuICAgICAgICAgICA8aDM+RGVmYXVsdCBDb21wYXJhdG9yPC9oMz5cbiAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kc1wiPlxuICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgIDx0aD5OYW1lPC90aD5cbiAgICAgICAgICAgICAgIDx0aD5GYXZvcml0ZSBMZXR0ZXI8L3RoPlxuICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHwgb3JkZXJCeTonZmF2b3JpdGVMZXR0ZXInXCI+XG4gICAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5mYXZvcml0ZUxldHRlcn19PC90ZD5cbiAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZTQnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICRzY29wZS5mcmllbmRzID0gW1xuICAgICAgICAgICAgIHtuYW1lOiAnSm9obicsICAgZmF2b3JpdGVMZXR0ZXI6ICfDhCd9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWFyeScsICAgZmF2b3JpdGVMZXR0ZXI6ICfDnCd9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWlrZScsICAgZmF2b3JpdGVMZXR0ZXI6ICfDlid9LFxuICAgICAgICAgICAgIHtuYW1lOiAnQWRhbScsICAgZmF2b3JpdGVMZXR0ZXI6ICdIJ30sXG4gICAgICAgICAgICAge25hbWU6ICdKdWxpZScsICBmYXZvcml0ZUxldHRlcjogJ1onfVxuICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICRzY29wZS5sb2NhbGVTZW5zaXRpdmVDb21wYXJhdG9yID0gZnVuY3Rpb24odjEsIHYyKSB7XG4gICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgZ2V0IHN0cmluZ3MsIGp1c3QgY29tcGFyZSBieSBpbmRleFxuICAgICAgICAgICAgIGlmICh2MS50eXBlICE9PSAnc3RyaW5nJyB8fCB2Mi50eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgcmV0dXJuICh2MS5pbmRleCA8IHYyLmluZGV4KSA/IC0xIDogMTtcbiAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAvLyBDb21wYXJlIHN0cmluZ3MgYWxwaGFiZXRpY2FsbHksIHRha2luZyBsb2NhbGUgaW50byBhY2NvdW50XG4gICAgICAgICAgICAgcmV0dXJuIHYxLnZhbHVlLmxvY2FsZUNvbXBhcmUodjIudmFsdWUpO1xuICAgICAgICAgICB9O1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAuZnJpZW5kcy1jb250YWluZXIge1xuICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgbWFyZ2luOiAwIDMwcHg7XG4gICAgICAgfVxuXG4gICAgICAgLmZyaWVuZHMge1xuICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICB9XG5cbiAgICAgICAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkLCAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkO1xuICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkOmZpcnN0LWNoaWxkLCAuZnJpZW5kcyB0aDpmaXJzdC1jaGlsZCB7XG4gICAgICAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIC8vIEVsZW1lbnQgbG9jYXRvcnNcbiAgICAgICB2YXIgY29udGFpbmVyID0gZWxlbWVudChieS5jc3MoJy5jdXN0b20tY29tcGFyYXRvcicpKTtcbiAgICAgICB2YXIgbmFtZXMgPSBjb250YWluZXIuYWxsKGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpKTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGJ5IGZhdm9yaXRlIGxldHRlciAoaW4gY29ycmVjdCBhbHBoYWJldGljYWwgb3JkZXIpJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCgxKS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChuYW1lcy5nZXQoMikuZ2V0VGV4dCgpKS50b0JlKCdNaWtlJyk7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDMpLmdldFRleHQoKSkudG9CZSgnTWFyeScpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCg0KS5nZXRUZXh0KCkpLnRvQmUoJ0p1bGllJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqXG4gKi9cbm9yZGVyQnlGaWx0ZXIuJGluamVjdCA9IFsnJHBhcnNlJ107XG5mdW5jdGlvbiBvcmRlckJ5RmlsdGVyKCRwYXJzZSkge1xuICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIHNvcnRQcmVkaWNhdGUsIHJldmVyc2VPcmRlciwgY29tcGFyZUZuKSB7XG5cbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIGFycmF5O1xuICAgIGlmICghaXNBcnJheUxpa2UoYXJyYXkpKSB7XG4gICAgICB0aHJvdyBtaW5FcnIoJ29yZGVyQnknKSgnbm90YXJyYXknLCAnRXhwZWN0ZWQgYXJyYXkgYnV0IHJlY2VpdmVkOiB7MH0nLCBhcnJheSk7XG4gICAgfVxuXG4gICAgaWYgKCFpc0FycmF5KHNvcnRQcmVkaWNhdGUpKSB7IHNvcnRQcmVkaWNhdGUgPSBbc29ydFByZWRpY2F0ZV07IH1cbiAgICBpZiAoc29ydFByZWRpY2F0ZS5sZW5ndGggPT09IDApIHsgc29ydFByZWRpY2F0ZSA9IFsnKyddOyB9XG5cbiAgICB2YXIgcHJlZGljYXRlcyA9IHByb2Nlc3NQcmVkaWNhdGVzKHNvcnRQcmVkaWNhdGUpO1xuXG4gICAgdmFyIGRlc2NlbmRpbmcgPSByZXZlcnNlT3JkZXIgPyAtMSA6IDE7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGBjb21wYXJlKClgIGZ1bmN0aW9uLiBVc2UgYSBkZWZhdWx0IGNvbXBhcmF0b3IgaWYgbm9uZSBpcyBzcGVjaWZpZWQuXG4gICAgdmFyIGNvbXBhcmUgPSBpc0Z1bmN0aW9uKGNvbXBhcmVGbikgPyBjb21wYXJlRm4gOiBkZWZhdWx0Q29tcGFyZTtcblxuICAgIC8vIFRoZSBuZXh0IHRocmVlIGxpbmVzIGFyZSBhIHZlcnNpb24gb2YgYSBTd2FydHppYW4gVHJhbnNmb3JtIGlkaW9tIGZyb20gUGVybFxuICAgIC8vIChzb21ldGltZXMgY2FsbGVkIHRoZSBEZWNvcmF0ZS1Tb3J0LVVuZGVjb3JhdGUgaWRpb20pXG4gICAgLy8gU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NjaHdhcnR6aWFuX3RyYW5zZm9ybVxuICAgIHZhciBjb21wYXJlVmFsdWVzID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGFycmF5LCBnZXRDb21wYXJpc29uT2JqZWN0KTtcbiAgICBjb21wYXJlVmFsdWVzLnNvcnQoZG9Db21wYXJpc29uKTtcbiAgICBhcnJheSA9IGNvbXBhcmVWYWx1ZXMubWFwKGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0udmFsdWU7IH0pO1xuXG4gICAgcmV0dXJuIGFycmF5O1xuXG4gICAgZnVuY3Rpb24gZ2V0Q29tcGFyaXNvbk9iamVjdCh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgIC8vIE5PVEU6IFdlIGFyZSBhZGRpbmcgYW4gZXh0cmEgYHRpZUJyZWFrZXJgIHZhbHVlIGJhc2VkIG9uIHRoZSBlbGVtZW50J3MgaW5kZXguXG4gICAgICAvLyBUaGlzIHdpbGwgYmUgdXNlZCB0byBrZWVwIHRoZSBzb3J0IHN0YWJsZSB3aGVuIG5vbmUgb2YgdGhlIGlucHV0IHByZWRpY2F0ZXMgY2FuXG4gICAgICAvLyBkaXN0aW5ndWlzaCBiZXR3ZWVuIHR3byBlbGVtZW50cy5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdGllQnJlYWtlcjoge3ZhbHVlOiBpbmRleCwgdHlwZTogJ251bWJlcicsIGluZGV4OiBpbmRleH0sXG4gICAgICAgIHByZWRpY2F0ZVZhbHVlczogcHJlZGljYXRlcy5tYXAoZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgICAgICAgcmV0dXJuIGdldFByZWRpY2F0ZVZhbHVlKHByZWRpY2F0ZS5nZXQodmFsdWUpLCBpbmRleCk7XG4gICAgICAgIH0pXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRvQ29tcGFyaXNvbih2MSwgdjIpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHByZWRpY2F0ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gY29tcGFyZSh2MS5wcmVkaWNhdGVWYWx1ZXNbaV0sIHYyLnByZWRpY2F0ZVZhbHVlc1tpXSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0ICogcHJlZGljYXRlc1tpXS5kZXNjZW5kaW5nICogZGVzY2VuZGluZztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gKGNvbXBhcmUodjEudGllQnJlYWtlciwgdjIudGllQnJlYWtlcikgfHwgZGVmYXVsdENvbXBhcmUodjEudGllQnJlYWtlciwgdjIudGllQnJlYWtlcikpICogZGVzY2VuZGluZztcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gcHJvY2Vzc1ByZWRpY2F0ZXMoc29ydFByZWRpY2F0ZXMpIHtcbiAgICByZXR1cm4gc29ydFByZWRpY2F0ZXMubWFwKGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xuICAgICAgdmFyIGRlc2NlbmRpbmcgPSAxLCBnZXQgPSBpZGVudGl0eTtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24ocHJlZGljYXRlKSkge1xuICAgICAgICBnZXQgPSBwcmVkaWNhdGU7XG4gICAgICB9IGVsc2UgaWYgKGlzU3RyaW5nKHByZWRpY2F0ZSkpIHtcbiAgICAgICAgaWYgKChwcmVkaWNhdGUuY2hhckF0KDApID09PSAnKycgfHwgcHJlZGljYXRlLmNoYXJBdCgwKSA9PT0gJy0nKSkge1xuICAgICAgICAgIGRlc2NlbmRpbmcgPSBwcmVkaWNhdGUuY2hhckF0KDApID09PSAnLScgPyAtMSA6IDE7XG4gICAgICAgICAgcHJlZGljYXRlID0gcHJlZGljYXRlLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlZGljYXRlICE9PSAnJykge1xuICAgICAgICAgIGdldCA9ICRwYXJzZShwcmVkaWNhdGUpO1xuICAgICAgICAgIGlmIChnZXQuY29uc3RhbnQpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBnZXQoKTtcbiAgICAgICAgICAgIGdldCA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZVtrZXldOyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHtnZXQ6IGdldCwgZGVzY2VuZGluZzogZGVzY2VuZGluZ307XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1ByaW1pdGl2ZSh2YWx1ZSkge1xuICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgICBjYXNlICdudW1iZXInOiAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlICdib29sZWFuJzogLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb2JqZWN0VmFsdWUodmFsdWUpIHtcbiAgICAvLyBJZiBgdmFsdWVPZmAgaXMgYSB2YWxpZCBmdW5jdGlvbiB1c2UgdGhhdFxuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlLnZhbHVlT2YpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnZhbHVlT2YoKTtcbiAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLy8gSWYgYHRvU3RyaW5nYCBpcyBhIHZhbGlkIGZ1bmN0aW9uIGFuZCBub3QgdGhlIG9uZSBmcm9tIGBPYmplY3QucHJvdG90eXBlYCB1c2UgdGhhdFxuICAgIGlmIChoYXNDdXN0b21Ub1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQcmVkaWNhdGVWYWx1ZSh2YWx1ZSwgaW5kZXgpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgIHR5cGUgPSAnbnVsbCc7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgdmFsdWUgPSBvYmplY3RWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB7dmFsdWU6IHZhbHVlLCB0eXBlOiB0eXBlLCBpbmRleDogaW5kZXh9O1xuICB9XG5cbiAgZnVuY3Rpb24gZGVmYXVsdENvbXBhcmUodjEsIHYyKSB7XG4gICAgdmFyIHJlc3VsdCA9IDA7XG4gICAgdmFyIHR5cGUxID0gdjEudHlwZTtcbiAgICB2YXIgdHlwZTIgPSB2Mi50eXBlO1xuXG4gICAgaWYgKHR5cGUxID09PSB0eXBlMikge1xuICAgICAgdmFyIHZhbHVlMSA9IHYxLnZhbHVlO1xuICAgICAgdmFyIHZhbHVlMiA9IHYyLnZhbHVlO1xuXG4gICAgICBpZiAodHlwZTEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIENvbXBhcmUgc3RyaW5ncyBjYXNlLWluc2Vuc2l0aXZlbHlcbiAgICAgICAgdmFsdWUxID0gdmFsdWUxLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhbHVlMiA9IHZhbHVlMi50b0xvd2VyQ2FzZSgpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlMSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gRm9yIGJhc2ljIG9iamVjdHMsIHVzZSB0aGUgcG9zaXRpb24gb2YgdGhlIG9iamVjdFxuICAgICAgICAvLyBpbiB0aGUgY29sbGVjdGlvbiBpbnN0ZWFkIG9mIHRoZSB2YWx1ZVxuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUxKSkgdmFsdWUxID0gdjEuaW5kZXg7XG4gICAgICAgIGlmIChpc09iamVjdCh2YWx1ZTIpKSB2YWx1ZTIgPSB2Mi5pbmRleDtcbiAgICAgIH1cblxuICAgICAgaWYgKHZhbHVlMSAhPT0gdmFsdWUyKSB7XG4gICAgICAgIHJlc3VsdCA9IHZhbHVlMSA8IHZhbHVlMiA/IC0xIDogMTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gKHR5cGUxID09PSAndW5kZWZpbmVkJykgPyAxIDpcbiAgICAgICAgKHR5cGUyID09PSAndW5kZWZpbmVkJykgPyAtMSA6XG4gICAgICAgICh0eXBlMSA9PT0gJ251bGwnKSA/IDEgOlxuICAgICAgICAodHlwZTIgPT09ICdudWxsJykgPyAtMSA6XG4gICAgICAgICh0eXBlMSA8IHR5cGUyKSA/IC0xIDogMTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmZ1bmN0aW9uIG5nRGlyZWN0aXZlKGRpcmVjdGl2ZSkge1xuICBpZiAoaXNGdW5jdGlvbihkaXJlY3RpdmUpKSB7XG4gICAgZGlyZWN0aXZlID0ge1xuICAgICAgbGluazogZGlyZWN0aXZlXG4gICAgfTtcbiAgfVxuICBkaXJlY3RpdmUucmVzdHJpY3QgPSBkaXJlY3RpdmUucmVzdHJpY3QgfHwgJ0FDJztcbiAgcmV0dXJuIHZhbHVlRm4oZGlyZWN0aXZlKTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBhXG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTW9kaWZpZXMgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIGh0bWwgYSB0YWcgc28gdGhhdCB0aGUgZGVmYXVsdCBhY3Rpb24gaXMgcHJldmVudGVkIHdoZW5cbiAqIHRoZSBocmVmIGF0dHJpYnV0ZSBpcyBlbXB0eS5cbiAqXG4gKiBGb3IgZHluYW1pY2FsbHkgY3JlYXRpbmcgYGhyZWZgIGF0dHJpYnV0ZXMgZm9yIGEgdGFncywgc2VlIHRoZSB7QGxpbmsgbmcubmdIcmVmIGBuZ0hyZWZgfSBkaXJlY3RpdmUuXG4gKi9cbnZhciBodG1sQW5jaG9yRGlyZWN0aXZlID0gdmFsdWVGbih7XG4gIHJlc3RyaWN0OiAnRScsXG4gIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcbiAgICBpZiAoIWF0dHIuaHJlZiAmJiAhYXR0ci54bGlua0hyZWYpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAvLyBJZiB0aGUgbGlua2VkIGVsZW1lbnQgaXMgbm90IGFuIGFuY2hvciB0YWcgYW55bW9yZSwgZG8gbm90aGluZ1xuICAgICAgICBpZiAoZWxlbWVudFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnYScpIHJldHVybjtcblxuICAgICAgICAvLyBTVkdBRWxlbWVudCBkb2VzIG5vdCB1c2UgdGhlIGhyZWYgYXR0cmlidXRlLCBidXQgcmF0aGVyIHRoZSAneGxpbmtIcmVmJyBhdHRyaWJ1dGUuXG4gICAgICAgIHZhciBocmVmID0gdG9TdHJpbmcuY2FsbChlbGVtZW50LnByb3AoJ2hyZWYnKSkgPT09ICdbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXScgP1xuICAgICAgICAgICAgICAgICAgICd4bGluazpocmVmJyA6ICdocmVmJztcbiAgICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIC8vIGlmIHdlIGhhdmUgbm8gaHJlZiB1cmwsIHRoZW4gZG9uJ3QgbmF2aWdhdGUgYW55d2hlcmUuXG4gICAgICAgICAgaWYgKCFlbGVtZW50LmF0dHIoaHJlZikpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9XG59KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0hyZWZcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgOTlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzaW5nIEFuZ3VsYXJKUyBtYXJrdXAgbGlrZSBge3toYXNofX1gIGluIGFuIGhyZWYgYXR0cmlidXRlIHdpbGxcbiAqIG1ha2UgdGhlIGxpbmsgZ28gdG8gdGhlIHdyb25nIFVSTCBpZiB0aGUgdXNlciBjbGlja3MgaXQgYmVmb3JlXG4gKiBBbmd1bGFySlMgaGFzIGEgY2hhbmNlIHRvIHJlcGxhY2UgdGhlIGB7e2hhc2h9fWAgbWFya3VwIHdpdGggaXRzXG4gKiB2YWx1ZS4gVW50aWwgQW5ndWxhckpTIHJlcGxhY2VzIHRoZSBtYXJrdXAgdGhlIGxpbmsgd2lsbCBiZSBicm9rZW5cbiAqIGFuZCB3aWxsIG1vc3QgbGlrZWx5IHJldHVybiBhIDQwNCBlcnJvci4gVGhlIGBuZ0hyZWZgIGRpcmVjdGl2ZVxuICogc29sdmVzIHRoaXMgcHJvYmxlbS5cbiAqXG4gKiBUaGUgd3Jvbmcgd2F5IHRvIHdyaXRlIGl0OlxuICogYGBgaHRtbFxuICogPGEgaHJlZj1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fVwiPmxpbmsxPC9hPlxuICogYGBgXG4gKlxuICogVGhlIGNvcnJlY3Qgd2F5IHRvIHdyaXRlIGl0OlxuICogYGBgaHRtbFxuICogPGEgbmctaHJlZj1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fVwiPmxpbmsxPC9hPlxuICogYGBgXG4gKlxuICogQGVsZW1lbnQgQVxuICogQHBhcmFtIHt0ZW1wbGF0ZX0gbmdIcmVmIGFueSBzdHJpbmcgd2hpY2ggY2FuIGNvbnRhaW4gYHt7fX1gIG1hcmt1cC5cbiAqXG4gKiBAZXhhbXBsZVxuICogVGhpcyBleGFtcGxlIHNob3dzIHZhcmlvdXMgY29tYmluYXRpb25zIG9mIGBocmVmYCwgYG5nLWhyZWZgIGFuZCBgbmctY2xpY2tgIGF0dHJpYnV0ZXNcbiAqIGluIGxpbmtzIGFuZCB0aGVpciBkaWZmZXJlbnQgYmVoYXZpb3JzOlxuICAgIDxleGFtcGxlIG5hbWU9XCJuZy1ocmVmXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ2YWx1ZVwiIC8+PGJyIC8+XG4gICAgICAgIDxhIGlkPVwibGluay0xXCIgaHJlZiBuZy1jbGljaz1cInZhbHVlID0gMVwiPmxpbmsgMTwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cbiAgICAgICAgPGEgaWQ9XCJsaW5rLTJcIiBocmVmPVwiXCIgbmctY2xpY2s9XCJ2YWx1ZSA9IDJcIj5saW5rIDI8L2E+IChsaW5rLCBkb24ndCByZWxvYWQpPGJyIC8+XG4gICAgICAgIDxhIGlkPVwibGluay0zXCIgbmctaHJlZj1cIi97eycxMjMnfX1cIj5saW5rIDM8L2E+IChsaW5rLCByZWxvYWQhKTxiciAvPlxuICAgICAgICA8YSBpZD1cImxpbmstNFwiIGhyZWY9XCJcIiBuYW1lPVwieHhcIiBuZy1jbGljaz1cInZhbHVlID0gNFwiPmFuY2hvcjwvYT4gKGxpbmssIGRvbid0IHJlbG9hZCk8YnIgLz5cbiAgICAgICAgPGEgaWQ9XCJsaW5rLTVcIiBuYW1lPVwieHh4XCIgbmctY2xpY2s9XCJ2YWx1ZSA9IDVcIj5hbmNob3I8L2E+IChubyBsaW5rKTxiciAvPlxuICAgICAgICA8YSBpZD1cImxpbmstNlwiIG5nLWhyZWY9XCJ7e3ZhbHVlfX1cIj5saW5rPC9hPiAobGluaywgY2hhbmdlIGxvY2F0aW9uKVxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYnV0IG5vdCByZWxvYWQgd2hlbiBocmVmIHdpdGhvdXQgdmFsdWUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTEnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCcxJyk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstMScpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9CZSgnJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBuZy1jbGljayBidXQgbm90IHJlbG9hZCB3aGVuIGhyZWYgZW1wdHkgc3RyaW5nJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay0yJykpLmNsaWNrKCk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnMicpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTInKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvQmUoJycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYW5kIGNoYW5nZSB1cmwgd2hlbiBuZy1ocmVmIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTMnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvTWF0Y2goL1xcLzEyMyQvKTtcblxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstMycpKS5jbGljaygpO1xuXG4gICAgICAgICAgLy8gQXQgdGhpcyBwb2ludCwgd2UgbmF2aWdhdGUgYXdheSBmcm9tIGFuIEFuZ3VsYXJKUyBwYWdlLCBzbyB3ZSBuZWVkXG4gICAgICAgICAgLy8gdG8gdXNlIGJyb3dzZXIuZHJpdmVyIHRvIGdldCB0aGUgYmFzZSB3ZWJkcml2ZXIuXG5cbiAgICAgICAgICBicm93c2VyLndhaXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gYnJvd3Nlci5kcml2ZXIuZ2V0Q3VycmVudFVybCgpLnRoZW4oZnVuY3Rpb24odXJsKSB7XG4gICAgICAgICAgICAgIHJldHVybiB1cmwubWF0Y2goL1xcLzEyMyQvKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIDUwMDAsICdwYWdlIHNob3VsZCBuYXZpZ2F0ZSB0byAvMTIzJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZXhlY3V0ZSBuZy1jbGljayBidXQgbm90IHJlbG9hZCB3aGVuIGhyZWYgZW1wdHkgc3RyaW5nIGFuZCBuYW1lIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstNCcpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJzQnKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay00JykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKCcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGJ1dCBub3QgcmVsb2FkIHdoZW4gbm8gaHJlZiBidXQgbmFtZSBzcGVjaWZpZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTUnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0VxdWFsKCc1Jyk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstNScpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9CZShudWxsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBvbmx5IGNoYW5nZSB1cmwgd2hlbiBvbmx5IG5nLWhyZWYnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5jbGVhcigpO1xuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLnNlbmRLZXlzKCc2Jyk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmstNicpKS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkudG9NYXRjaCgvXFwvNiQvKTtcblxuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstNicpKS5jbGljaygpO1xuXG4gICAgICAgICAgLy8gQXQgdGhpcyBwb2ludCwgd2UgbmF2aWdhdGUgYXdheSBmcm9tIGFuIEFuZ3VsYXJKUyBwYWdlLCBzbyB3ZSBuZWVkXG4gICAgICAgICAgLy8gdG8gdXNlIGJyb3dzZXIuZHJpdmVyIHRvIGdldCB0aGUgYmFzZSB3ZWJkcml2ZXIuXG4gICAgICAgICAgYnJvd3Nlci53YWl0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXIuZHJpdmVyLmdldEN1cnJlbnRVcmwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICByZXR1cm4gdXJsLm1hdGNoKC9cXC82JC8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgNTAwMCwgJ3BhZ2Ugc2hvdWxkIG5hdmlnYXRlIHRvIC82Jyk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU3JjXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDk5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2luZyBBbmd1bGFySlMgbWFya3VwIGxpa2UgYHt7aGFzaH19YCBpbiBhIGBzcmNgIGF0dHJpYnV0ZSBkb2Vzbid0XG4gKiB3b3JrIHJpZ2h0OiBUaGUgYnJvd3NlciB3aWxsIGZldGNoIGZyb20gdGhlIFVSTCB3aXRoIHRoZSBsaXRlcmFsXG4gKiB0ZXh0IGB7e2hhc2h9fWAgdW50aWwgQW5ndWxhckpTIHJlcGxhY2VzIHRoZSBleHByZXNzaW9uIGluc2lkZVxuICogYHt7aGFzaH19YC4gVGhlIGBuZ1NyY2AgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0uXG4gKlxuICogVGhlIGJ1Z2d5IHdheSB0byB3cml0ZSBpdDpcbiAqIGBgYGh0bWxcbiAqIDxpbWcgc3JjPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCIgYWx0PVwiRGVzY3JpcHRpb25cIi8+XG4gKiBgYGBcbiAqXG4gKiBUaGUgY29ycmVjdCB3YXkgdG8gd3JpdGUgaXQ6XG4gKiBgYGBodG1sXG4gKiA8aW1nIG5nLXNyYz1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fVwiIGFsdD1cIkRlc2NyaXB0aW9uXCIgLz5cbiAqIGBgYFxuICpcbiAqIEBlbGVtZW50IElNR1xuICogQHBhcmFtIHt0ZW1wbGF0ZX0gbmdTcmMgYW55IHN0cmluZyB3aGljaCBjYW4gY29udGFpbiBge3t9fWAgbWFya3VwLlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTcmNzZXRcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgOTlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzaW5nIEFuZ3VsYXJKUyBtYXJrdXAgbGlrZSBge3toYXNofX1gIGluIGEgYHNyY3NldGAgYXR0cmlidXRlIGRvZXNuJ3RcbiAqIHdvcmsgcmlnaHQ6IFRoZSBicm93c2VyIHdpbGwgZmV0Y2ggZnJvbSB0aGUgVVJMIHdpdGggdGhlIGxpdGVyYWxcbiAqIHRleHQgYHt7aGFzaH19YCB1bnRpbCBBbmd1bGFySlMgcmVwbGFjZXMgdGhlIGV4cHJlc3Npb24gaW5zaWRlXG4gKiBge3toYXNofX1gLiBUaGUgYG5nU3Jjc2V0YCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbS5cbiAqXG4gKiBUaGUgYnVnZ3kgd2F5IHRvIHdyaXRlIGl0OlxuICogYGBgaHRtbFxuICogPGltZyBzcmNzZXQ9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX0gMnhcIiBhbHQ9XCJEZXNjcmlwdGlvblwiLz5cbiAqIGBgYFxuICpcbiAqIFRoZSBjb3JyZWN0IHdheSB0byB3cml0ZSBpdDpcbiAqIGBgYGh0bWxcbiAqIDxpbWcgbmctc3Jjc2V0PVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19IDJ4XCIgYWx0PVwiRGVzY3JpcHRpb25cIiAvPlxuICogYGBgXG4gKlxuICogQGVsZW1lbnQgSU1HXG4gKiBAcGFyYW0ge3RlbXBsYXRlfSBuZ1NyY3NldCBhbnkgc3RyaW5nIHdoaWNoIGNhbiBjb250YWluIGB7e319YCBtYXJrdXAuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0Rpc2FibGVkXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoaXMgZGlyZWN0aXZlIHNldHMgdGhlIGBkaXNhYmxlZGAgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50ICh0eXBpY2FsbHkgYSBmb3JtIGNvbnRyb2wsXG4gKiBlLmcuIGBpbnB1dGAsIGBidXR0b25gLCBgc2VsZWN0YCBldGMuKSBpZiB0aGVcbiAqIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGluc2lkZSBgbmdEaXNhYmxlZGAgZXZhbHVhdGVzIHRvIHRydXRoeS5cbiAqXG4gKiBBIHNwZWNpYWwgZGlyZWN0aXZlIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIGNhbm5vdCB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhlIGBkaXNhYmxlZGBcbiAqIGF0dHJpYnV0ZS4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9uIGd1aWRlfSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cIm5nLWRpc2FibGVkXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8bGFiZWw+Q2xpY2sgbWUgdG8gdG9nZ2xlOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCI+PC9sYWJlbD48YnIvPlxuICAgICAgICA8YnV0dG9uIG5nLW1vZGVsPVwiYnV0dG9uXCIgbmctZGlzYWJsZWQ9XCJjaGVja2VkXCI+QnV0dG9uPC9idXR0b24+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgdG9nZ2xlIGJ1dHRvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnYnV0dG9uJykpLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSkudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQGVsZW1lbnQgSU5QVVRcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdEaXNhYmxlZCBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxuICogICAgIHRoZW4gdGhlIGBkaXNhYmxlZGAgYXR0cmlidXRlIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2hlY2tlZFxuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSAxMDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNldHMgdGhlIGBjaGVja2VkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQsIGlmIHRoZSBleHByZXNzaW9uIGluc2lkZSBgbmdDaGVja2VkYCBpcyB0cnV0aHkuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgZGlyZWN0aXZlIHNob3VsZCBub3QgYmUgdXNlZCB0b2dldGhlciB3aXRoIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0sXG4gKiBhcyB0aGlzIGNhbiBsZWFkIHRvIHVuZXhwZWN0ZWQgYmVoYXZpb3IuXG4gKlxuICogQSBzcGVjaWFsIGRpcmVjdGl2ZSBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBjYW5ub3QgdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoZSBgY2hlY2tlZGBcbiAqIGF0dHJpYnV0ZS4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9uIGd1aWRlfSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNoZWNrZWRcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxsYWJlbD5DaGVjayBtZSB0byBjaGVjayBib3RoOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJsZWFkZXJcIj48L2xhYmVsPjxici8+XG4gICAgICAgIDxpbnB1dCBpZD1cImNoZWNrRm9sbG93ZXJcIiB0eXBlPVwiY2hlY2tib3hcIiBuZy1jaGVja2VkPVwibGVhZGVyXCIgYXJpYS1sYWJlbD1cIkZvbGxvd2VyIGlucHV0XCI+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgY2hlY2sgYm90aCBjaGVja0JveGVzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2NoZWNrRm9sbG93ZXInKSkuZ2V0QXR0cmlidXRlKCdjaGVja2VkJykpLnRvQmVGYWxzeSgpO1xuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2xlYWRlcicpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjaGVja0ZvbGxvd2VyJykpLmdldEF0dHJpYnV0ZSgnY2hlY2tlZCcpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqXG4gKiBAZWxlbWVudCBJTlBVVFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NoZWNrZWQgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSxcbiAqICAgICB0aGVuIHRoZSBgY2hlY2tlZGAgYXR0cmlidXRlIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nUmVhZG9ubHlcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU2V0cyB0aGUgYHJlYWRvbmx5YCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQsIGlmIHRoZSBleHByZXNzaW9uIGluc2lkZSBgbmdSZWFkb25seWAgaXMgdHJ1dGh5LlxuICogTm90ZSB0aGF0IGByZWFkb25seWAgYXBwbGllcyBvbmx5IHRvIGBpbnB1dGAgZWxlbWVudHMgd2l0aCBzcGVjaWZpYyB0eXBlcy4gW1NlZSB0aGUgaW5wdXQgZG9jcyBvblxuICogTUROXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvaW5wdXQjYXR0ci1yZWFkb25seSkgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQSBzcGVjaWFsIGRpcmVjdGl2ZSBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBjYW5ub3QgdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoZSBgcmVhZG9ubHlgXG4gKiBhdHRyaWJ1dGUuIFNlZSB0aGUge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24gaW50ZXJwb2xhdGlvbiBndWlkZX0gZm9yIG1vcmUgaW5mby5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJuZy1yZWFkb25seVwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPGxhYmVsPkNoZWNrIG1lIHRvIG1ha2UgdGV4dCByZWFkb25seTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiPjwvbGFiZWw+PGJyLz5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctcmVhZG9ubHk9XCJjaGVja2VkXCIgdmFsdWU9XCJJJ20gQW5ndWxhckpTXCIgYXJpYS1sYWJlbD1cIlJlYWRvbmx5IGZpZWxkXCIgLz5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgaXQoJ3Nob3VsZCB0b2dnbGUgcmVhZG9ubHkgYXR0cicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnW3R5cGU9XCJ0ZXh0XCJdJykpLmdldEF0dHJpYnV0ZSgncmVhZG9ubHknKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnW3R5cGU9XCJ0ZXh0XCJdJykpLmdldEF0dHJpYnV0ZSgncmVhZG9ubHknKSkudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQGVsZW1lbnQgSU5QVVRcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdSZWFkb25seSBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJyZWFkb25seVwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU2VsZWN0ZWRcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU2V0cyB0aGUgYHNlbGVjdGVkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQsIGlmIHRoZSBleHByZXNzaW9uIGluc2lkZSBgbmdTZWxlY3RlZGAgaXMgdHJ1dGh5LlxuICpcbiAqIEEgc3BlY2lhbCBkaXJlY3RpdmUgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgY2Fubm90IHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGUgYHNlbGVjdGVkYFxuICogYXR0cmlidXRlLiBTZWUgdGhlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIGludGVycG9sYXRpb24gZ3VpZGV9IGZvciBtb3JlIGluZm8uXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICAgKipOb3RlOioqIGBuZ1NlbGVjdGVkYCBkb2VzIG5vdCBpbnRlcmFjdCB3aXRoIHRoZSBgc2VsZWN0YCBhbmQgYG5nTW9kZWxgIGRpcmVjdGl2ZXMsIGl0IG9ubHlcbiAqICAgc2V0cyB0aGUgYHNlbGVjdGVkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQuIElmIHlvdSBhcmUgdXNpbmcgYG5nTW9kZWxgIG9uIHRoZSBzZWxlY3QsIHlvdVxuICogICBzaG91bGQgbm90IHVzZSBgbmdTZWxlY3RlZGAgb24gdGhlIG9wdGlvbnMsIGFzIGBuZ01vZGVsYCB3aWxsIHNldCB0aGUgc2VsZWN0IHZhbHVlIGFuZFxuICogICBzZWxlY3RlZCBvcHRpb25zLlxuICogPC9kaXY+XG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBuYW1lPVwibmctc2VsZWN0ZWRcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxsYWJlbD5DaGVjayBtZSB0byBzZWxlY3Q6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInNlbGVjdGVkXCI+PC9sYWJlbD48YnIvPlxuICAgICAgICA8c2VsZWN0IGFyaWEtbGFiZWw9XCJuZ1NlbGVjdGVkIGRlbW9cIj5cbiAgICAgICAgICA8b3B0aW9uPkhlbGxvITwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gaWQ9XCJncmVldFwiIG5nLXNlbGVjdGVkPVwic2VsZWN0ZWRcIj5HcmVldGluZ3MhPC9vcHRpb24+XG4gICAgICAgIDwvc2VsZWN0PlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIHNlbGVjdCBHcmVldGluZ3MhJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2dyZWV0JykpLmdldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc2VsZWN0ZWQnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZ3JlZXQnKSkuZ2V0QXR0cmlidXRlKCdzZWxlY3RlZCcpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqXG4gKiBAZWxlbWVudCBPUFRJT05cbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTZWxlY3RlZCBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5LFxuICogICAgIHRoZW4gc3BlY2lhbCBhdHRyaWJ1dGUgXCJzZWxlY3RlZFwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ09wZW5cbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU2V0cyB0aGUgYG9wZW5gIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCwgaWYgdGhlIGV4cHJlc3Npb24gaW5zaWRlIGBuZ09wZW5gIGlzIHRydXRoeS5cbiAqXG4gKiBBIHNwZWNpYWwgZGlyZWN0aXZlIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIGNhbm5vdCB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhlIGBvcGVuYFxuICogYXR0cmlidXRlLiBTZWUgdGhlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIGludGVycG9sYXRpb24gZ3VpZGV9IGZvciBtb3JlIGluZm8uXG4gKlxuICogIyMgQSBub3RlIGFib3V0IGJyb3dzZXIgY29tcGF0aWJpbGl0eVxuICpcbiAqIEludGVybmV0IEV4cGxvcmVyIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0IHRoZSBgZGV0YWlsc2AgZWxlbWVudCwgaXQgaXNcbiAqIHJlY29tbWVuZGVkIHRvIHVzZSB7QGxpbmsgbmcubmdTaG93fSBhbmQge0BsaW5rIG5nLm5nSGlkZX0gaW5zdGVhZC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgICA8ZXhhbXBsZSBuYW1lPVwibmctb3BlblwiPlxuICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICA8bGFiZWw+VG9nZ2xlIGRldGFpbHM6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cIm9wZW5cIj48L2xhYmVsPjxici8+XG4gICAgICAgICA8ZGV0YWlscyBpZD1cImRldGFpbHNcIiBuZy1vcGVuPVwib3BlblwiPlxuICAgICAgICAgICAgPHN1bW1hcnk+TGlzdDwvc3VtbWFyeT5cbiAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgPGxpPkFwcGxlPC9saT5cbiAgICAgICAgICAgICAgPGxpPk9yYW5nZTwvbGk+XG4gICAgICAgICAgICAgIDxsaT5EdXJpYW48L2xpPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgIDwvZGV0YWlscz5cbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgaXQoJ3Nob3VsZCB0b2dnbGUgb3BlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZGV0YWlscycpKS5nZXRBdHRyaWJ1dGUoJ29wZW4nKSkudG9CZUZhbHN5KCk7XG4gICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ29wZW4nKSkuY2xpY2soKTtcbiAgICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2RldGFpbHMnKSkuZ2V0QXR0cmlidXRlKCdvcGVuJykpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgIH0pO1xuICAgICAgIDwvZmlsZT5cbiAgICAgPC9leGFtcGxlPlxuICpcbiAqIEBlbGVtZW50IERFVEFJTFNcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdPcGVuIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXG4gKiAgICAgdGhlbiBzcGVjaWFsIGF0dHJpYnV0ZSBcIm9wZW5cIiB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxuICovXG5cbnZhciBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyA9IHt9O1xuXG4vLyBib29sZWFuIGF0dHJzIGFyZSBldmFsdWF0ZWRcbmZvckVhY2goQk9PTEVBTl9BVFRSLCBmdW5jdGlvbihwcm9wTmFtZSwgYXR0ck5hbWUpIHtcbiAgLy8gYmluZGluZyB0byBtdWx0aXBsZSBpcyBub3Qgc3VwcG9ydGVkXG4gIGlmIChwcm9wTmFtZSA9PT0gJ211bHRpcGxlJykgcmV0dXJuO1xuXG4gIGZ1bmN0aW9uIGRlZmF1bHRMaW5rRm4oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICBzY29wZS4kd2F0Y2goYXR0cltub3JtYWxpemVkXSwgZnVuY3Rpb24gbmdCb29sZWFuQXR0cldhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICBhdHRyLiRzZXQoYXR0ck5hbWUsICEhdmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIG5vcm1hbGl6ZWQgPSBkaXJlY3RpdmVOb3JtYWxpemUoJ25nLScgKyBhdHRyTmFtZSk7XG4gIHZhciBsaW5rRm4gPSBkZWZhdWx0TGlua0ZuO1xuXG4gIGlmIChwcm9wTmFtZSA9PT0gJ2NoZWNrZWQnKSB7XG4gICAgbGlua0ZuID0gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIC8vIGVuc3VyaW5nIG5nQ2hlY2tlZCBkb2Vzbid0IGludGVyZmVyZSB3aXRoIG5nTW9kZWwgd2hlbiBib3RoIGFyZSBzZXQgb24gdGhlIHNhbWUgaW5wdXRcbiAgICAgIGlmIChhdHRyLm5nTW9kZWwgIT09IGF0dHJbbm9ybWFsaXplZF0pIHtcbiAgICAgICAgZGVmYXVsdExpbmtGbihzY29wZSwgZWxlbWVudCwgYXR0cik7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBwcmlvcml0eTogMTAwLFxuICAgICAgbGluazogbGlua0ZuXG4gICAgfTtcbiAgfTtcbn0pO1xuXG4vLyBhbGlhc2VkIGlucHV0IGF0dHJzIGFyZSBldmFsdWF0ZWRcbmZvckVhY2goQUxJQVNFRF9BVFRSLCBmdW5jdGlvbihodG1sQXR0ciwgbmdBdHRyKSB7XG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25nQXR0cl0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJpb3JpdHk6IDEwMCxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIC8vc3BlY2lhbCBjYXNlIG5nUGF0dGVybiB3aGVuIGEgbGl0ZXJhbCByZWd1bGFyIGV4cHJlc3Npb24gdmFsdWVcbiAgICAgICAgLy9pcyB1c2VkIGFzIHRoZSBleHByZXNzaW9uICh0aGlzIHdheSB3ZSBkb24ndCBoYXZlIHRvIHdhdGNoIGFueXRoaW5nKS5cbiAgICAgICAgaWYgKG5nQXR0ciA9PT0gJ25nUGF0dGVybicgJiYgYXR0ci5uZ1BhdHRlcm4uY2hhckF0KDApID09PSAnLycpIHtcbiAgICAgICAgICB2YXIgbWF0Y2ggPSBhdHRyLm5nUGF0dGVybi5tYXRjaChSRUdFWF9TVFJJTkdfUkVHRVhQKTtcbiAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGF0dHIuJHNldCgnbmdQYXR0ZXJuJywgbmV3IFJlZ0V4cChtYXRjaFsxXSwgbWF0Y2hbMl0pKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS4kd2F0Y2goYXR0cltuZ0F0dHJdLCBmdW5jdGlvbiBuZ0F0dHJBbGlhc1dhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgYXR0ci4kc2V0KG5nQXR0ciwgdmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufSk7XG5cbi8vIG5nLXNyYywgbmctc3Jjc2V0LCBuZy1ocmVmIGFyZSBpbnRlcnBvbGF0ZWRcbmZvckVhY2goWydzcmMnLCAnc3Jjc2V0JywgJ2hyZWYnXSwgZnVuY3Rpb24oYXR0ck5hbWUpIHtcbiAgdmFyIG5vcm1hbGl6ZWQgPSBkaXJlY3RpdmVOb3JtYWxpemUoJ25nLScgKyBhdHRyTmFtZSk7XG4gIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByaW9yaXR5OiA5OSwgLy8gaXQgbmVlZHMgdG8gcnVuIGFmdGVyIHRoZSBhdHRyaWJ1dGVzIGFyZSBpbnRlcnBvbGF0ZWRcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IGF0dHJOYW1lLFxuICAgICAgICAgICAgbmFtZSA9IGF0dHJOYW1lO1xuXG4gICAgICAgIGlmIChhdHRyTmFtZSA9PT0gJ2hyZWYnICYmXG4gICAgICAgICAgICB0b1N0cmluZy5jYWxsKGVsZW1lbnQucHJvcCgnaHJlZicpKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJykge1xuICAgICAgICAgIG5hbWUgPSAneGxpbmtIcmVmJztcbiAgICAgICAgICBhdHRyLiRhdHRyW25hbWVdID0gJ3hsaW5rOmhyZWYnO1xuICAgICAgICAgIHByb3BOYW1lID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHIuJG9ic2VydmUobm9ybWFsaXplZCwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoYXR0ck5hbWUgPT09ICdocmVmJykge1xuICAgICAgICAgICAgICBhdHRyLiRzZXQobmFtZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXR0ci4kc2V0KG5hbWUsIHZhbHVlKTtcblxuICAgICAgICAgIC8vIFN1cHBvcnQ6IElFIDktMTEgb25seVxuICAgICAgICAgIC8vIE9uIElFLCBpZiBcIm5nOnNyY1wiIGRpcmVjdGl2ZSBkZWNsYXJhdGlvbiBpcyB1c2VkIGFuZCBcInNyY1wiIGF0dHJpYnV0ZSBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgLy8gdGhlbiBjYWxsaW5nIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdzcmMnLCAnZm9vJykgZG9lc24ndCBkbyBhbnl0aGluZywgc28gd2UgbmVlZFxuICAgICAgICAgIC8vIHRvIHNldCB0aGUgcHJvcGVydHkgYXMgd2VsbCB0byBhY2hpZXZlIHRoZSBkZXNpcmVkIGVmZmVjdC5cbiAgICAgICAgICAvLyBXZSB1c2UgYXR0clthdHRyTmFtZV0gdmFsdWUgc2luY2UgJHNldCBtaWdodCBoYXZlIHNhbml0aXplZCB0aGUgdXJsLlxuICAgICAgICAgIGlmIChtc2llICYmIHByb3BOYW1lKSBlbGVtZW50LnByb3AocHJvcE5hbWUsIGF0dHJbbmFtZV0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufSk7XG5cbi8qIGdsb2JhbCAtbnVsbEZvcm1DdHJsLCAtUEVORElOR19DTEFTUywgLVNVQk1JVFRFRF9DTEFTU1xuICovXG52YXIgbnVsbEZvcm1DdHJsID0ge1xuICAkYWRkQ29udHJvbDogbm9vcCxcbiAgJCRyZW5hbWVDb250cm9sOiBudWxsRm9ybVJlbmFtZUNvbnRyb2wsXG4gICRyZW1vdmVDb250cm9sOiBub29wLFxuICAkc2V0VmFsaWRpdHk6IG5vb3AsXG4gICRzZXREaXJ0eTogbm9vcCxcbiAgJHNldFByaXN0aW5lOiBub29wLFxuICAkc2V0U3VibWl0dGVkOiBub29wLFxuICAkJHNldFN1Ym1pdHRlZDogbm9vcFxufSxcblBFTkRJTkdfQ0xBU1MgPSAnbmctcGVuZGluZycsXG5TVUJNSVRURURfQ0xBU1MgPSAnbmctc3VibWl0dGVkJztcblxuZnVuY3Rpb24gbnVsbEZvcm1SZW5hbWVDb250cm9sKGNvbnRyb2wsIG5hbWUpIHtcbiAgY29udHJvbC4kbmFtZSA9IG5hbWU7XG59XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXJcbiAqXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRwcmlzdGluZSBUcnVlIGlmIHVzZXIgaGFzIG5vdCBpbnRlcmFjdGVkIHdpdGggdGhlIGZvcm0geWV0LlxuICogQHByb3BlcnR5IHtib29sZWFufSAkZGlydHkgVHJ1ZSBpZiB1c2VyIGhhcyBhbHJlYWR5IGludGVyYWN0ZWQgd2l0aCB0aGUgZm9ybS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHZhbGlkIFRydWUgaWYgYWxsIG9mIHRoZSBjb250YWluaW5nIGZvcm1zIGFuZCBjb250cm9scyBhcmUgdmFsaWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRpbnZhbGlkIFRydWUgaWYgYXQgbGVhc3Qgb25lIGNvbnRhaW5pbmcgY29udHJvbCBvciBmb3JtIGlzIGludmFsaWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRzdWJtaXR0ZWQgVHJ1ZSBpZiB1c2VyIGhhcyBzdWJtaXR0ZWQgdGhlIGZvcm0gZXZlbiBpZiBpdHMgaW52YWxpZC5cbiAqXG4gKiBAcHJvcGVydHkge09iamVjdH0gJHBlbmRpbmcgQW4gb2JqZWN0IGhhc2gsIGNvbnRhaW5pbmcgcmVmZXJlbmNlcyB0byBjb250cm9scyBvciBmb3JtcyB3aXRoXG4gKiAgcGVuZGluZyB2YWxpZGF0b3JzLCB3aGVyZTpcbiAqXG4gKiAgLSBrZXlzIGFyZSB2YWxpZGF0aW9ucyB0b2tlbnMgKGVycm9yIG5hbWVzKS5cbiAqICAtIHZhbHVlcyBhcmUgYXJyYXlzIG9mIGNvbnRyb2xzIG9yIGZvcm1zIHRoYXQgaGF2ZSBhIHBlbmRpbmcgdmFsaWRhdG9yIGZvciB0aGUgZ2l2ZW4gZXJyb3IgbmFtZS5cbiAqXG4gKiBTZWUge0BsaW5rIGZvcm0uRm9ybUNvbnRyb2xsZXIjJGVycm9yICRlcnJvcn0gZm9yIGEgbGlzdCBvZiBidWlsdC1pbiB2YWxpZGF0aW9uIHRva2Vucy5cbiAqXG4gKiBAcHJvcGVydHkge09iamVjdH0gJGVycm9yIEFuIG9iamVjdCBoYXNoLCBjb250YWluaW5nIHJlZmVyZW5jZXMgdG8gY29udHJvbHMgb3IgZm9ybXMgd2l0aCBmYWlsaW5nXG4gKiAgdmFsaWRhdG9ycywgd2hlcmU6XG4gKlxuICogIC0ga2V5cyBhcmUgdmFsaWRhdGlvbiB0b2tlbnMgKGVycm9yIG5hbWVzKSxcbiAqICAtIHZhbHVlcyBhcmUgYXJyYXlzIG9mIGNvbnRyb2xzIG9yIGZvcm1zIHRoYXQgaGF2ZSBhIGZhaWxpbmcgdmFsaWRhdG9yIGZvciB0aGUgZ2l2ZW4gZXJyb3IgbmFtZS5cbiAqXG4gKiAgQnVpbHQtaW4gdmFsaWRhdGlvbiB0b2tlbnM6XG4gKiAgLSBgZW1haWxgXG4gKiAgLSBgbWF4YFxuICogIC0gYG1heGxlbmd0aGBcbiAqICAtIGBtaW5gXG4gKiAgLSBgbWlubGVuZ3RoYFxuICogIC0gYG51bWJlcmBcbiAqICAtIGBwYXR0ZXJuYFxuICogIC0gYHJlcXVpcmVkYFxuICogIC0gYHVybGBcbiAqICAtIGBkYXRlYFxuICogIC0gYGRhdGV0aW1lbG9jYWxgXG4gKiAgLSBgdGltZWBcbiAqICAtIGB3ZWVrYFxuICogIC0gYG1vbnRoYFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogYEZvcm1Db250cm9sbGVyYCBrZWVwcyB0cmFjayBvZiBhbGwgaXRzIGNvbnRyb2xzIGFuZCBuZXN0ZWQgZm9ybXMgYXMgd2VsbCBhcyB0aGUgc3RhdGUgb2YgdGhlbSxcbiAqIHN1Y2ggYXMgYmVpbmcgdmFsaWQvaW52YWxpZCBvciBkaXJ0eS9wcmlzdGluZS5cbiAqXG4gKiBFYWNoIHtAbGluayBuZy5kaXJlY3RpdmU6Zm9ybSBmb3JtfSBkaXJlY3RpdmUgY3JlYXRlcyBhbiBpbnN0YW5jZVxuICogb2YgYEZvcm1Db250cm9sbGVyYC5cbiAqXG4gKi9cbi8vYXNrcyBmb3IgJHNjb3BlIHRvIGZvb2wgdGhlIEJDIGNvbnRyb2xsZXIgbW9kdWxlXG5Gb3JtQ29udHJvbGxlci4kaW5qZWN0ID0gWyckZWxlbWVudCcsICckYXR0cnMnLCAnJHNjb3BlJywgJyRhbmltYXRlJywgJyRpbnRlcnBvbGF0ZSddO1xuZnVuY3Rpb24gRm9ybUNvbnRyb2xsZXIoJGVsZW1lbnQsICRhdHRycywgJHNjb3BlLCAkYW5pbWF0ZSwgJGludGVycG9sYXRlKSB7XG4gIHRoaXMuJCRjb250cm9scyA9IFtdO1xuXG4gIC8vIGluaXQgc3RhdGVcbiAgdGhpcy4kZXJyb3IgPSB7fTtcbiAgdGhpcy4kJHN1Y2Nlc3MgPSB7fTtcbiAgdGhpcy4kcGVuZGluZyA9IHVuZGVmaW5lZDtcbiAgdGhpcy4kbmFtZSA9ICRpbnRlcnBvbGF0ZSgkYXR0cnMubmFtZSB8fCAkYXR0cnMubmdGb3JtIHx8ICcnKSgkc2NvcGUpO1xuICB0aGlzLiRkaXJ0eSA9IGZhbHNlO1xuICB0aGlzLiRwcmlzdGluZSA9IHRydWU7XG4gIHRoaXMuJHZhbGlkID0gdHJ1ZTtcbiAgdGhpcy4kaW52YWxpZCA9IGZhbHNlO1xuICB0aGlzLiRzdWJtaXR0ZWQgPSBmYWxzZTtcbiAgdGhpcy4kJHBhcmVudEZvcm0gPSBudWxsRm9ybUN0cmw7XG5cbiAgdGhpcy4kJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgdGhpcy4kJGFuaW1hdGUgPSAkYW5pbWF0ZTtcblxuICBzZXR1cFZhbGlkaXR5KHRoaXMpO1xufVxuXG5Gb3JtQ29udHJvbGxlci5wcm90b3R5cGUgPSB7XG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHJvbGxiYWNrVmlld1ZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSb2xsYmFjayBhbGwgZm9ybSBjb250cm9scyBwZW5kaW5nIHVwZGF0ZXMgdG8gdGhlIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxuICAgKiBldmVudCBkZWZpbmVkIGluIGBuZy1tb2RlbC1vcHRpb25zYC4gVGhpcyBtZXRob2QgaXMgdHlwaWNhbGx5IG5lZWRlZCBieSB0aGUgcmVzZXQgYnV0dG9uIG9mXG4gICAqIGEgZm9ybSB0aGF0IHVzZXMgYG5nLW1vZGVsLW9wdGlvbnNgIHRvIHBlbmQgdXBkYXRlcy5cbiAgICovXG4gICRyb2xsYmFja1ZpZXdWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgZm9yRWFjaCh0aGlzLiQkY29udHJvbHMsIGZ1bmN0aW9uKGNvbnRyb2wpIHtcbiAgICAgIGNvbnRyb2wuJHJvbGxiYWNrVmlld1ZhbHVlKCk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkY29tbWl0Vmlld1ZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDb21taXQgYWxsIGZvcm0gY29udHJvbHMgcGVuZGluZyB1cGRhdGVzIHRvIHRoZSBgJG1vZGVsVmFsdWVgLlxuICAgKlxuICAgKiBVcGRhdGVzIG1heSBiZSBwZW5kaW5nIGJ5IGEgZGVib3VuY2VkIGV2ZW50IG9yIGJlY2F1c2UgdGhlIGlucHV0IGlzIHdhaXRpbmcgZm9yIGEgc29tZSBmdXR1cmVcbiAgICogZXZlbnQgZGVmaW5lZCBpbiBgbmctbW9kZWwtb3B0aW9uc2AuIFRoaXMgbWV0aG9kIGlzIHJhcmVseSBuZWVkZWQgYXMgYE5nTW9kZWxDb250cm9sbGVyYFxuICAgKiB1c3VhbGx5IGhhbmRsZXMgY2FsbGluZyB0aGlzIGluIHJlc3BvbnNlIHRvIGlucHV0IGV2ZW50cy5cbiAgICovXG4gICRjb21taXRWaWV3VmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIGZvckVhY2godGhpcy4kJGNvbnRyb2xzLCBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgICBjb250cm9sLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRhZGRDb250cm9sXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250cm9sIGNvbnRyb2wgb2JqZWN0LCBlaXRoZXIgYSB7QGxpbmsgZm9ybS5Gb3JtQ29udHJvbGxlcn0gb3IgYW5cbiAgICoge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXJ9XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZWdpc3RlciBhIGNvbnRyb2wgd2l0aCB0aGUgZm9ybS4gSW5wdXQgZWxlbWVudHMgdXNpbmcgbmdNb2RlbENvbnRyb2xsZXIgZG8gdGhpcyBhdXRvbWF0aWNhbGx5XG4gICAqIHdoZW4gdGhleSBhcmUgbGlua2VkLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGNvbnRyb2wgd2lsbCBub3QgYmUgcmVmbGVjdGVkIG9uIHRoZSBuZXcgcGFyZW50IGZvcm0uIFRoaXNcbiAgICogaXMgbm90IGFuIGlzc3VlIHdpdGggbm9ybWFsIHVzZSwgYXMgZnJlc2hseSBjb21waWxlZCBhbmQgbGlua2VkIGNvbnRyb2xzIGFyZSBpbiBhIGAkcHJpc3RpbmVgXG4gICAqIHN0YXRlLlxuICAgKlxuICAgKiBIb3dldmVyLCBpZiB0aGUgbWV0aG9kIGlzIHVzZWQgcHJvZ3JhbW1hdGljYWxseSwgZm9yIGV4YW1wbGUgYnkgYWRkaW5nIGR5bmFtaWNhbGx5IGNyZWF0ZWQgY29udHJvbHMsXG4gICAqIG9yIGNvbnRyb2xzIHRoYXQgaGF2ZSBiZWVuIHByZXZpb3VzbHkgcmVtb3ZlZCB3aXRob3V0IGRlc3Ryb3lpbmcgdGhlaXIgY29ycmVzcG9uZGluZyBET00gZWxlbWVudCxcbiAgICogaXQncyB0aGUgZGV2ZWxvcGVycyByZXNwb25zaWJpbGl0eSB0byBtYWtlIHN1cmUgdGhlIGN1cnJlbnQgc3RhdGUgcHJvcGFnYXRlcyB0byB0aGUgcGFyZW50IGZvcm0uXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiBhbiBpbnB1dCBjb250cm9sIGlzIGFkZGVkIHRoYXQgaXMgYWxyZWFkeSBgJGRpcnR5YCBhbmQgaGFzIGAkZXJyb3JgIHByb3BlcnRpZXMsXG4gICAqIGNhbGxpbmcgYCRzZXREaXJ0eSgpYCBhbmQgYCR2YWxpZGF0ZSgpYCBhZnRlcndhcmRzIHdpbGwgcHJvcGFnYXRlIHRoZSBzdGF0ZSB0byB0aGUgcGFyZW50IGZvcm0uXG4gICAqL1xuICAkYWRkQ29udHJvbDogZnVuY3Rpb24oY29udHJvbCkge1xuICAgIC8vIEJyZWFraW5nIGNoYW5nZSAtIGJlZm9yZSwgaW5wdXRzIHdob3NlIG5hbWUgd2FzIFwiaGFzT3duUHJvcGVydHlcIiB3ZXJlIHF1aWV0bHkgaWdub3JlZFxuICAgIC8vIGFuZCBub3QgYWRkZWQgdG8gdGhlIHNjb3BlLiAgTm93IHdlIHRocm93IGFuIGVycm9yLlxuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KGNvbnRyb2wuJG5hbWUsICdpbnB1dCcpO1xuICAgIHRoaXMuJCRjb250cm9scy5wdXNoKGNvbnRyb2wpO1xuXG4gICAgaWYgKGNvbnRyb2wuJG5hbWUpIHtcbiAgICAgIHRoaXNbY29udHJvbC4kbmFtZV0gPSBjb250cm9sO1xuICAgIH1cblxuICAgIGNvbnRyb2wuJCRwYXJlbnRGb3JtID0gdGhpcztcbiAgfSxcblxuICAvLyBQcml2YXRlIEFQSTogcmVuYW1lIGEgZm9ybSBjb250cm9sXG4gICQkcmVuYW1lQ29udHJvbDogZnVuY3Rpb24oY29udHJvbCwgbmV3TmFtZSkge1xuICAgIHZhciBvbGROYW1lID0gY29udHJvbC4kbmFtZTtcblxuICAgIGlmICh0aGlzW29sZE5hbWVdID09PSBjb250cm9sKSB7XG4gICAgICBkZWxldGUgdGhpc1tvbGROYW1lXTtcbiAgICB9XG4gICAgdGhpc1tuZXdOYW1lXSA9IGNvbnRyb2w7XG4gICAgY29udHJvbC4kbmFtZSA9IG5ld05hbWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkcmVtb3ZlQ29udHJvbFxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udHJvbCBjb250cm9sIG9iamVjdCwgZWl0aGVyIGEge0BsaW5rIGZvcm0uRm9ybUNvbnRyb2xsZXJ9IG9yIGFuXG4gICAqIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyfVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRGVyZWdpc3RlciBhIGNvbnRyb2wgZnJvbSB0aGUgZm9ybS5cbiAgICpcbiAgICogSW5wdXQgZWxlbWVudHMgdXNpbmcgbmdNb2RlbENvbnRyb2xsZXIgZG8gdGhpcyBhdXRvbWF0aWNhbGx5IHdoZW4gdGhleSBhcmUgZGVzdHJveWVkLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgb25seSB0aGUgcmVtb3ZlZCBjb250cm9sJ3MgdmFsaWRhdGlvbiBzdGF0ZSAoYCRlcnJvcnNgZXRjLikgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlXG4gICAqIGZvcm0uIGAkZGlydHlgLCBgJHN1Ym1pdHRlZGAgc3RhdGVzIHdpbGwgbm90IGJlIGNoYW5nZWQsIGJlY2F1c2UgdGhlIGV4cGVjdGVkIGJlaGF2aW9yIGNhbiBiZVxuICAgKiBkaWZmZXJlbnQgZnJvbSBjYXNlIHRvIGNhc2UuIEZvciBleGFtcGxlLCByZW1vdmluZyB0aGUgb25seSBgJGRpcnR5YCBjb250cm9sIGZyb20gYSBmb3JtIG1heSBvclxuICAgKiBtYXkgbm90IG1lYW4gdGhhdCB0aGUgZm9ybSBpcyBzdGlsbCBgJGRpcnR5YC5cbiAgICovXG4gICRyZW1vdmVDb250cm9sOiBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgaWYgKGNvbnRyb2wuJG5hbWUgJiYgdGhpc1tjb250cm9sLiRuYW1lXSA9PT0gY29udHJvbCkge1xuICAgICAgZGVsZXRlIHRoaXNbY29udHJvbC4kbmFtZV07XG4gICAgfVxuICAgIGZvckVhY2godGhpcy4kcGVuZGluZywgZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnZhbGlkLXRoaXNcbiAgICAgIHRoaXMuJHNldFZhbGlkaXR5KG5hbWUsIG51bGwsIGNvbnRyb2wpO1xuICAgIH0sIHRoaXMpO1xuICAgIGZvckVhY2godGhpcy4kZXJyb3IsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW52YWxpZC10aGlzXG4gICAgICB0aGlzLiRzZXRWYWxpZGl0eShuYW1lLCBudWxsLCBjb250cm9sKTtcbiAgICB9LCB0aGlzKTtcbiAgICBmb3JFYWNoKHRoaXMuJCRzdWNjZXNzLCBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWludmFsaWQtdGhpc1xuICAgICAgdGhpcy4kc2V0VmFsaWRpdHkobmFtZSwgbnVsbCwgY29udHJvbCk7XG4gICAgfSwgdGhpcyk7XG5cbiAgICBhcnJheVJlbW92ZSh0aGlzLiQkY29udHJvbHMsIGNvbnRyb2wpO1xuICAgIGNvbnRyb2wuJCRwYXJlbnRGb3JtID0gbnVsbEZvcm1DdHJsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldERpcnR5XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGEgZGlydHkgc3RhdGUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gYWRkIHRoZSAnbmctZGlydHknIGNsYXNzIGFuZCBzZXQgdGhlIGZvcm0gdG8gYSBkaXJ0eVxuICAgKiBzdGF0ZSAobmctZGlydHkgY2xhc3MpLiBUaGlzIG1ldGhvZCB3aWxsIGFsc28gcHJvcGFnYXRlIHRvIHBhcmVudCBmb3Jtcy5cbiAgICovXG4gICRzZXREaXJ0eTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTKTtcbiAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgRElSVFlfQ0xBU1MpO1xuICAgIHRoaXMuJGRpcnR5ID0gdHJ1ZTtcbiAgICB0aGlzLiRwcmlzdGluZSA9IGZhbHNlO1xuICAgIHRoaXMuJCRwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFByaXN0aW5lXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBmb3JtIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgc2V0cyB0aGUgZm9ybSdzIGAkcHJpc3RpbmVgIHN0YXRlIHRvIHRydWUsIHRoZSBgJGRpcnR5YCBzdGF0ZSB0byBmYWxzZSwgcmVtb3Zlc1xuICAgKiB0aGUgYG5nLWRpcnR5YCBjbGFzcyBhbmQgYWRkcyB0aGUgYG5nLXByaXN0aW5lYCBjbGFzcy4gQWRkaXRpb25hbGx5LCBpdCBzZXRzIHRoZSBgJHN1Ym1pdHRlZGBcbiAgICogc3RhdGUgdG8gZmFsc2UuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgYWxzbyBwcm9wYWdhdGUgdG8gYWxsIHRoZSBjb250cm9scyBjb250YWluZWQgaW4gdGhpcyBmb3JtLlxuICAgKlxuICAgKiBTZXR0aW5nIGEgZm9ybSBiYWNrIHRvIGEgcHJpc3RpbmUgc3RhdGUgaXMgb2Z0ZW4gdXNlZnVsIHdoZW4gd2Ugd2FudCB0byAncmV1c2UnIGEgZm9ybSBhZnRlclxuICAgKiBzYXZpbmcgb3IgcmVzZXR0aW5nIGl0LlxuICAgKi9cbiAgJHNldFByaXN0aW5lOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiQkYW5pbWF0ZS5zZXRDbGFzcyh0aGlzLiQkZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MsIERJUlRZX0NMQVNTICsgJyAnICsgU1VCTUlUVEVEX0NMQVNTKTtcbiAgICB0aGlzLiRkaXJ0eSA9IGZhbHNlO1xuICAgIHRoaXMuJHByaXN0aW5lID0gdHJ1ZTtcbiAgICB0aGlzLiRzdWJtaXR0ZWQgPSBmYWxzZTtcbiAgICBmb3JFYWNoKHRoaXMuJCRjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xuICAgICAgY29udHJvbC4kc2V0UHJpc3RpbmUoKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXRVbnRvdWNoZWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGZvcm0gdG8gaXRzIHVudG91Y2hlZCBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlICduZy10b3VjaGVkJyBjbGFzcyBhbmQgc2V0IHRoZSBmb3JtIGNvbnRyb2xzIHRvIHRoZWlyXG4gICAqIHVudG91Y2hlZCBzdGF0ZSAobmctdW50b3VjaGVkIGNsYXNzKS5cbiAgICpcbiAgICogU2V0dGluZyBhIGZvcm0gY29udHJvbHMgYmFjayB0byB0aGVpciB1bnRvdWNoZWQgc3RhdGUgaXMgb2Z0ZW4gdXNlZnVsIHdoZW4gc2V0dGluZyB0aGUgZm9ybVxuICAgKiBiYWNrIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cbiAgICovXG4gICRzZXRVbnRvdWNoZWQ6IGZ1bmN0aW9uKCkge1xuICAgIGZvckVhY2godGhpcy4kJGNvbnRyb2xzLCBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgICBjb250cm9sLiRzZXRVbnRvdWNoZWQoKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRzZXRTdWJtaXR0ZWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGZvcm0gdG8gaXRzIGAkc3VibWl0dGVkYCBzdGF0ZS4gVGhpcyB3aWxsIGFsc28gc2V0IGAkc3VibWl0dGVkYCBvbiBhbGwgY2hpbGQgYW5kXG4gICAqIHBhcmVudCBmb3JtcyBvZiB0aGUgZm9ybS5cbiAgICovXG4gICRzZXRTdWJtaXR0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciByb290Rm9ybSA9IHRoaXM7XG4gICAgd2hpbGUgKHJvb3RGb3JtLiQkcGFyZW50Rm9ybSAmJiAocm9vdEZvcm0uJCRwYXJlbnRGb3JtICE9PSBudWxsRm9ybUN0cmwpKSB7XG4gICAgICByb290Rm9ybSA9IHJvb3RGb3JtLiQkcGFyZW50Rm9ybTtcbiAgICB9XG4gICAgcm9vdEZvcm0uJCRzZXRTdWJtaXR0ZWQoKTtcbiAgfSxcblxuICAkJHNldFN1Ym1pdHRlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsIFNVQk1JVFRFRF9DTEFTUyk7XG4gICAgdGhpcy4kc3VibWl0dGVkID0gdHJ1ZTtcbiAgICBmb3JFYWNoKHRoaXMuJCRjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xuICAgICAgaWYgKGNvbnRyb2wuJCRzZXRTdWJtaXR0ZWQpIHtcbiAgICAgICAgY29udHJvbC4kJHNldFN1Ym1pdHRlZCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFZhbGlkaXR5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDaGFuZ2UgdGhlIHZhbGlkaXR5IHN0YXRlIG9mIHRoZSBmb3JtLCBhbmQgbm90aWZ5IHRoZSBwYXJlbnQgZm9ybSAoaWYgYW55KS5cbiAqXG4gKiBBcHBsaWNhdGlvbiBkZXZlbG9wZXJzIHdpbGwgcmFyZWx5IG5lZWQgdG8gY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseS4gSXQgaXMgdXNlZCBpbnRlcm5hbGx5LCBieVxuICoge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFZhbGlkaXR5IE5nTW9kZWxDb250cm9sbGVyLiRzZXRWYWxpZGl0eSgpfSwgdG8gcHJvcGFnYXRlIGFcbiAqIGNvbnRyb2wncyB2YWxpZGl0eSBzdGF0ZSB0byB0aGUgcGFyZW50IGBGb3JtQ29udHJvbGxlcmAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbGlkYXRpb25FcnJvcktleSBOYW1lIG9mIHRoZSB2YWxpZGF0b3IuIFRoZSBgdmFsaWRhdGlvbkVycm9yS2V5YCB3aWxsIGJlXG4gKiAgICAgICAgYXNzaWduZWQgdG8gZWl0aGVyIGAkZXJyb3JbdmFsaWRhdGlvbkVycm9yS2V5XWAgb3IgYCRwZW5kaW5nW3ZhbGlkYXRpb25FcnJvcktleV1gIChmb3JcbiAqICAgICAgICB1bmZ1bGZpbGxlZCBgJGFzeW5jVmFsaWRhdG9yc2ApLCBzbyB0aGF0IGl0IGlzIGF2YWlsYWJsZSBmb3IgZGF0YS1iaW5kaW5nLiBUaGVcbiAqICAgICAgICBgdmFsaWRhdGlvbkVycm9yS2V5YCBzaG91bGQgYmUgaW4gY2FtZWxDYXNlIGFuZCB3aWxsIGdldCBjb252ZXJ0ZWQgaW50byBkYXNoLWNhc2UgZm9yXG4gKiAgICAgICAgY2xhc3MgbmFtZS4gRXhhbXBsZTogYG15RXJyb3JgIHdpbGwgcmVzdWx0IGluIGBuZy12YWxpZC1teS1lcnJvcmAgYW5kXG4gKiAgICAgICAgYG5nLWludmFsaWQtbXktZXJyb3JgIGNsYXNzZXMgYW5kIGNhbiBiZSBib3VuZCB0byBhcyBge3sgc29tZUZvcm0uJGVycm9yLm15RXJyb3IgfX1gLlxuICogQHBhcmFtIHtib29sZWFufSBpc1ZhbGlkIFdoZXRoZXIgdGhlIGN1cnJlbnQgc3RhdGUgaXMgdmFsaWQgKHRydWUpLCBpbnZhbGlkIChmYWxzZSksIHBlbmRpbmdcbiAqICAgICAgICAodW5kZWZpbmVkKSwgIG9yIHNraXBwZWQgKG51bGwpLiBQZW5kaW5nIGlzIHVzZWQgZm9yIHVuZnVsZmlsbGVkIGAkYXN5bmNWYWxpZGF0b3JzYC5cbiAqICAgICAgICBTa2lwcGVkIGlzIHVzZWQgYnkgQW5ndWxhckpTIHdoZW4gdmFsaWRhdG9ycyBkbyBub3QgcnVuIGJlY2F1c2Ugb2YgcGFyc2UgZXJyb3JzIGFuZCB3aGVuXG4gKiAgICAgICAgYCRhc3luY1ZhbGlkYXRvcnNgIGRvIG5vdCBydW4gYmVjYXVzZSBhbnkgb2YgdGhlIGAkdmFsaWRhdG9yc2AgZmFpbGVkLlxuICogQHBhcmFtIHtOZ01vZGVsQ29udHJvbGxlciB8IEZvcm1Db250cm9sbGVyfSBjb250cm9sbGVyIC0gVGhlIGNvbnRyb2xsZXIgd2hvc2UgdmFsaWRpdHkgc3RhdGUgaXNcbiAqICAgICAgICB0cmlnZ2VyaW5nIHRoZSBjaGFuZ2UuXG4gKi9cbmFkZFNldFZhbGlkaXR5TWV0aG9kKHtcbiAgY2xheno6IEZvcm1Db250cm9sbGVyLFxuICBzZXQ6IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHksIGNvbnRyb2xsZXIpIHtcbiAgICB2YXIgbGlzdCA9IG9iamVjdFtwcm9wZXJ0eV07XG4gICAgaWYgKCFsaXN0KSB7XG4gICAgICBvYmplY3RbcHJvcGVydHldID0gW2NvbnRyb2xsZXJdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaW5kZXggPSBsaXN0LmluZGV4T2YoY29udHJvbGxlcik7XG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIGxpc3QucHVzaChjb250cm9sbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHVuc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5LCBjb250cm9sbGVyKSB7XG4gICAgdmFyIGxpc3QgPSBvYmplY3RbcHJvcGVydHldO1xuICAgIGlmICghbGlzdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhcnJheVJlbW92ZShsaXN0LCBjb250cm9sbGVyKTtcbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldO1xuICAgIH1cbiAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdGb3JtXG4gKiBAcmVzdHJpY3QgRUFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIZWxwZXIgZGlyZWN0aXZlIHRoYXQgbWFrZXMgaXQgcG9zc2libGUgdG8gY3JlYXRlIGNvbnRyb2wgZ3JvdXBzIGluc2lkZSBhXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOmZvcm0gYGZvcm1gfSBkaXJlY3RpdmUuXG4gKiBUaGVzZSBcImNoaWxkIGZvcm1zXCIgY2FuIGJlIHVzZWQsIGZvciBleGFtcGxlLCB0byBkZXRlcm1pbmUgdGhlIHZhbGlkaXR5IG9mIGEgc3ViLWdyb3VwIG9mXG4gKiBjb250cm9scy5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gKiAqKk5vdGUqKjogYG5nRm9ybWAgY2Fubm90IGJlIHVzZWQgYXMgYSByZXBsYWNlbWVudCBmb3IgYDxmb3JtPmAsIGJlY2F1c2UgaXQgbGFja3MgaXRzXG4gKiBbYnVpbHQtaW4gSFRNTCBmdW5jdGlvbmFsaXR5XShodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyN0aGUtZm9ybS1lbGVtZW50KS5cbiAqIFNwZWNpZmljYWxseSwgeW91IGNhbm5vdCBzdWJtaXQgYG5nRm9ybWAgbGlrZSBhIGA8Zm9ybT5gIHRhZy4gVGhhdCBtZWFucyxcbiAqIHlvdSBjYW5ub3Qgc2VuZCBkYXRhIHRvIHRoZSBzZXJ2ZXIgd2l0aCBgbmdGb3JtYCwgb3IgaW50ZWdyYXRlIGl0IHdpdGhcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdTdWJtaXQgYG5nU3VibWl0YH0uXG4gKiA8L2Rpdj5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nRm9ybXxuYW1lIE5hbWUgb2YgdGhlIGZvcm0uIElmIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciB3aWxsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIHB1Ymxpc2hlZCBpbnRvIHRoZSByZWxhdGVkIHNjb3BlLCB1bmRlciB0aGlzIG5hbWUuXG4gKlxuICovXG5cbiAvKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIGZvcm1cbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEaXJlY3RpdmUgdGhhdCBpbnN0YW50aWF0ZXNcbiAqIHtAbGluayBmb3JtLkZvcm1Db250cm9sbGVyIEZvcm1Db250cm9sbGVyfS5cbiAqXG4gKiBJZiB0aGUgYG5hbWVgIGF0dHJpYnV0ZSBpcyBzcGVjaWZpZWQsIHRoZSBmb3JtIGNvbnRyb2xsZXIgaXMgcHVibGlzaGVkIG9udG8gdGhlIGN1cnJlbnQgc2NvcGUgdW5kZXJcbiAqIHRoaXMgbmFtZS5cbiAqXG4gKiAjIyBBbGlhczoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0Zvcm0gYG5nRm9ybWB9XG4gKlxuICogSW4gQW5ndWxhckpTLCBmb3JtcyBjYW4gYmUgbmVzdGVkLiBUaGlzIG1lYW5zIHRoYXQgdGhlIG91dGVyIGZvcm0gaXMgdmFsaWQgd2hlbiBhbGwgb2YgdGhlIGNoaWxkXG4gKiBmb3JtcyBhcmUgdmFsaWQgYXMgd2VsbC4gSG93ZXZlciwgYnJvd3NlcnMgZG8gbm90IGFsbG93IG5lc3Rpbmcgb2YgYDxmb3JtPmAgZWxlbWVudHMsIHNvXG4gKiBBbmd1bGFySlMgcHJvdmlkZXMgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdGb3JtIGBuZ0Zvcm1gfSBkaXJlY3RpdmUsIHdoaWNoIGJlaGF2ZXMgaWRlbnRpY2FsbHkgdG9cbiAqIGBmb3JtYCBidXQgY2FuIGJlIG5lc3RlZC4gTmVzdGVkIGZvcm1zIGNhbiBiZSB1c2VmdWwsIGZvciBleGFtcGxlLCBpZiB0aGUgdmFsaWRpdHkgb2YgYSBzdWItZ3JvdXBcbiAqIG9mIGNvbnRyb2xzIG5lZWRzIHRvIGJlIGRldGVybWluZWQuXG4gKlxuICogIyMgQ1NTIGNsYXNzZXNcbiAqICAtIGBuZy12YWxpZGAgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIHZhbGlkLlxuICogIC0gYG5nLWludmFsaWRgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyBpbnZhbGlkLlxuICogIC0gYG5nLXBlbmRpbmdgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyBwZW5kaW5nLlxuICogIC0gYG5nLXByaXN0aW5lYCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgcHJpc3RpbmUuXG4gKiAgLSBgbmctZGlydHlgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyBkaXJ0eS5cbiAqICAtIGBuZy1zdWJtaXR0ZWRgIGlzIHNldCBpZiB0aGUgZm9ybSB3YXMgc3VibWl0dGVkLlxuICpcbiAqIEtlZXAgaW4gbWluZCB0aGF0IG5nQW5pbWF0ZSBjYW4gZGV0ZWN0IGVhY2ggb2YgdGhlc2UgY2xhc3NlcyB3aGVuIGFkZGVkIGFuZCByZW1vdmVkLlxuICpcbiAqXG4gKiAjIyBTdWJtaXR0aW5nIGEgZm9ybSBhbmQgcHJldmVudGluZyB0aGUgZGVmYXVsdCBhY3Rpb25cbiAqXG4gKiBTaW5jZSB0aGUgcm9sZSBvZiBmb3JtcyBpbiBjbGllbnQtc2lkZSBBbmd1bGFySlMgYXBwbGljYXRpb25zIGlzIGRpZmZlcmVudCB0aGFuIGluIGNsYXNzaWNhbFxuICogcm91bmR0cmlwIGFwcHMsIGl0IGlzIGRlc2lyYWJsZSBmb3IgdGhlIGJyb3dzZXIgbm90IHRvIHRyYW5zbGF0ZSB0aGUgZm9ybSBzdWJtaXNzaW9uIGludG8gYSBmdWxsXG4gKiBwYWdlIHJlbG9hZCB0aGF0IHNlbmRzIHRoZSBkYXRhIHRvIHRoZSBzZXJ2ZXIuIEluc3RlYWQgc29tZSBqYXZhc2NyaXB0IGxvZ2ljIHNob3VsZCBiZSB0cmlnZ2VyZWRcbiAqIHRvIGhhbmRsZSB0aGUgZm9ybSBzdWJtaXNzaW9uIGluIGFuIGFwcGxpY2F0aW9uLXNwZWNpZmljIHdheS5cbiAqXG4gKiBGb3IgdGhpcyByZWFzb24sIEFuZ3VsYXJKUyBwcmV2ZW50cyB0aGUgZGVmYXVsdCBhY3Rpb24gKGZvcm0gc3VibWlzc2lvbiB0byB0aGUgc2VydmVyKSB1bmxlc3MgdGhlXG4gKiBgPGZvcm0+YCBlbGVtZW50IGhhcyBhbiBgYWN0aW9uYCBhdHRyaWJ1dGUgc3BlY2lmaWVkLlxuICpcbiAqIFlvdSBjYW4gdXNlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHR3byB3YXlzIHRvIHNwZWNpZnkgd2hhdCBqYXZhc2NyaXB0IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIHdoZW5cbiAqIGEgZm9ybSBpcyBzdWJtaXR0ZWQ6XG4gKlxuICogLSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nU3VibWl0IG5nU3VibWl0fSBkaXJlY3RpdmUgb24gdGhlIGZvcm0gZWxlbWVudFxuICogLSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xpY2sgbmdDbGlja30gZGlyZWN0aXZlIG9uIHRoZSBmaXJzdFxuICAqICBidXR0b24gb3IgaW5wdXQgZmllbGQgb2YgdHlwZSBzdWJtaXQgKGlucHV0W3R5cGU9c3VibWl0XSlcbiAqXG4gKiBUbyBwcmV2ZW50IGRvdWJsZSBleGVjdXRpb24gb2YgdGhlIGhhbmRsZXIsIHVzZSBvbmx5IG9uZSBvZiB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1N1Ym1pdCBuZ1N1Ym1pdH1cbiAqIG9yIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfSBkaXJlY3RpdmVzLlxuICogVGhpcyBpcyBiZWNhdXNlIG9mIHRoZSBmb2xsb3dpbmcgZm9ybSBzdWJtaXNzaW9uIHJ1bGVzIGluIHRoZSBIVE1MIHNwZWNpZmljYXRpb246XG4gKlxuICogLSBJZiBhIGZvcm0gaGFzIG9ubHkgb25lIGlucHV0IGZpZWxkIHRoZW4gaGl0dGluZyBlbnRlciBpbiB0aGlzIGZpZWxkIHRyaWdnZXJzIGZvcm0gc3VibWl0XG4gKiAoYG5nU3VibWl0YClcbiAqIC0gaWYgYSBmb3JtIGhhcyAyKyBpbnB1dCBmaWVsZHMgYW5kIG5vIGJ1dHRvbnMgb3IgaW5wdXRbdHlwZT1zdWJtaXRdIHRoZW4gaGl0dGluZyBlbnRlclxuICogZG9lc24ndCB0cmlnZ2VyIHN1Ym1pdFxuICogLSBpZiBhIGZvcm0gaGFzIG9uZSBvciBtb3JlIGlucHV0IGZpZWxkcyBhbmQgb25lIG9yIG1vcmUgYnV0dG9ucyBvciBpbnB1dFt0eXBlPXN1Ym1pdF0gdGhlblxuICogaGl0dGluZyBlbnRlciBpbiBhbnkgb2YgdGhlIGlucHV0IGZpZWxkcyB3aWxsIHRyaWdnZXIgdGhlIGNsaWNrIGhhbmRsZXIgb24gdGhlICpmaXJzdCogYnV0dG9uIG9yXG4gKiBpbnB1dFt0eXBlPXN1Ym1pdF0gKGBuZ0NsaWNrYCkgKmFuZCogYSBzdWJtaXQgaGFuZGxlciBvbiB0aGUgZW5jbG9zaW5nIGZvcm0gKGBuZ1N1Ym1pdGApXG4gKlxuICogQW55IHBlbmRpbmcgYG5nTW9kZWxPcHRpb25zYCBjaGFuZ2VzIHdpbGwgdGFrZSBwbGFjZSBpbW1lZGlhdGVseSB3aGVuIGFuIGVuY2xvc2luZyBmb3JtIGlzXG4gKiBzdWJtaXR0ZWQuIE5vdGUgdGhhdCBgbmdDbGlja2AgZXZlbnRzIHdpbGwgb2NjdXIgYmVmb3JlIHRoZSBtb2RlbCBpcyB1cGRhdGVkLiBVc2UgYG5nU3VibWl0YFxuICogdG8gaGF2ZSBhY2Nlc3MgdG8gdGhlIHVwZGF0ZWQgbW9kZWwuXG4gKlxuICogQGFuaW1hdGlvbnNcbiAqIEFuaW1hdGlvbnMgaW4gbmdGb3JtIGFyZSB0cmlnZ2VyZWQgd2hlbiBhbnkgb2YgdGhlIGFzc29jaWF0ZWQgQ1NTIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkLlxuICogVGhlc2UgY2xhc3NlcyBhcmU6IGAubmctcHJpc3RpbmVgLCBgLm5nLWRpcnR5YCwgYC5uZy1pbnZhbGlkYCBhbmQgYC5uZy12YWxpZGAgYXMgd2VsbCBhcyBhbnlcbiAqIG90aGVyIHZhbGlkYXRpb25zIHRoYXQgYXJlIHBlcmZvcm1lZCB3aXRoaW4gdGhlIGZvcm0uIEFuaW1hdGlvbnMgaW4gbmdGb3JtIGFyZSBzaW1pbGFyIHRvIGhvd1xuICogdGhleSB3b3JrIGluIG5nQ2xhc3MgYW5kIGFuaW1hdGlvbnMgY2FuIGJlIGhvb2tlZCBpbnRvIHVzaW5nIENTUyB0cmFuc2l0aW9ucywga2V5ZnJhbWVzIGFzIHdlbGxcbiAqIGFzIEpTIGFuaW1hdGlvbnMuXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGEgc2ltcGxlIHdheSB0byB1dGlsaXplIENTUyB0cmFuc2l0aW9ucyB0byBzdHlsZSBhIGZvcm0gZWxlbWVudFxuICogdGhhdCBoYXMgYmVlbiByZW5kZXJlZCBhcyBpbnZhbGlkIGFmdGVyIGl0IGhhcyBiZWVuIHZhbGlkYXRlZDpcbiAqXG4gKiA8cHJlPlxuICogLy9iZSBzdXJlIHRvIGluY2x1ZGUgbmdBbmltYXRlIGFzIGEgbW9kdWxlIHRvIGhvb2sgaW50byBtb3JlXG4gKiAvL2FkdmFuY2VkIGFuaW1hdGlvbnNcbiAqIC5teS1mb3JtIHtcbiAqICAgdHJhbnNpdGlvbjowLjVzIGxpbmVhciBhbGw7XG4gKiAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICogfVxuICogLm15LWZvcm0ubmctaW52YWxpZCB7XG4gKiAgIGJhY2tncm91bmQ6IHJlZDtcbiAqICAgY29sb3I6d2hpdGU7XG4gKiB9XG4gKiA8L3ByZT5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJuZy1mb3JtXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgZml4QmFzZT1cInRydWVcIiBtb2R1bGU9XCJmb3JtRXhhbXBsZVwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2Zvcm1FeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdGb3JtQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLnVzZXJUeXBlID0gJ2d1ZXN0JztcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxzdHlsZT5cbiAgICAgICAgLm15LWZvcm0ge1xuICAgICAgICAgIHRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xuICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIC5teS1mb3JtLm5nLWludmFsaWQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHJlZDtcbiAgICAgICAgfVxuICAgICAgIDwvc3R5bGU+XG4gICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJGb3JtQ29udHJvbGxlclwiIGNsYXNzPVwibXktZm9ybVwiPlxuICAgICAgICAgdXNlclR5cGU6IDxpbnB1dCBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInVzZXJUeXBlXCIgcmVxdWlyZWQ+XG4gICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5SZXF1aXJlZCE8L3NwYW4+PGJyPlxuICAgICAgICAgPGNvZGU+dXNlclR5cGUgPSB7e3VzZXJUeXBlfX08L2NvZGU+PGJyPlxuICAgICAgICAgPGNvZGU+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC9jb2RlPjxicj5cbiAgICAgICAgIDxjb2RlPm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvY29kZT48YnI+XG4gICAgICAgICA8Y29kZT5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L2NvZGU+PGJyPlxuICAgICAgICAgPGNvZGU+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L2NvZGU+PGJyPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB1c2VyVHlwZSA9IGVsZW1lbnQoYnkuYmluZGluZygndXNlclR5cGUnKSk7XG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuXG4gICAgICAgICAgZXhwZWN0KHVzZXJUeXBlLmdldFRleHQoKSkudG9Db250YWluKCdndWVzdCcpO1xuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgdXNlclR5cGUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VzZXJUeXBlJykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgdXNlcklucHV0ID0gZWxlbWVudChieS5tb2RlbCgndXNlclR5cGUnKSk7XG5cbiAgICAgICAgICB1c2VySW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICB1c2VySW5wdXQuc2VuZEtleXMoJycpO1xuXG4gICAgICAgICAgZXhwZWN0KHVzZXJUeXBlLmdldFRleHQoKSkudG9FcXVhbCgndXNlclR5cGUgPScpO1xuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBOYW1lIG9mIHRoZSBmb3JtLiBJZiBzcGVjaWZpZWQsIHRoZSBmb3JtIGNvbnRyb2xsZXIgd2lsbCBiZSBwdWJsaXNoZWQgaW50b1xuICogICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWQgc2NvcGUsIHVuZGVyIHRoaXMgbmFtZS5cbiAqL1xudmFyIGZvcm1EaXJlY3RpdmVGYWN0b3J5ID0gZnVuY3Rpb24oaXNOZ0Zvcm0pIHtcbiAgcmV0dXJuIFsnJHRpbWVvdXQnLCAnJHBhcnNlJywgZnVuY3Rpb24oJHRpbWVvdXQsICRwYXJzZSkge1xuICAgIHZhciBmb3JtRGlyZWN0aXZlID0ge1xuICAgICAgbmFtZTogJ2Zvcm0nLFxuICAgICAgcmVzdHJpY3Q6IGlzTmdGb3JtID8gJ0VBQycgOiAnRScsXG4gICAgICByZXF1aXJlOiBbJ2Zvcm0nLCAnXl4/Zm9ybSddLCAvL2ZpcnN0IGlzIHRoZSBmb3JtJ3Mgb3duIGN0cmwsIHNlY29uZCBpcyBhbiBvcHRpb25hbCBwYXJlbnQgZm9ybVxuICAgICAgY29udHJvbGxlcjogRm9ybUNvbnRyb2xsZXIsXG4gICAgICBjb21waWxlOiBmdW5jdGlvbiBuZ0Zvcm1Db21waWxlKGZvcm1FbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIC8vIFNldHVwIGluaXRpYWwgc3RhdGUgb2YgdGhlIGNvbnRyb2xcbiAgICAgICAgZm9ybUVsZW1lbnQuYWRkQ2xhc3MoUFJJU1RJTkVfQ0xBU1MpLmFkZENsYXNzKFZBTElEX0NMQVNTKTtcblxuICAgICAgICB2YXIgbmFtZUF0dHIgPSBhdHRyLm5hbWUgPyAnbmFtZScgOiAoaXNOZ0Zvcm0gJiYgYXR0ci5uZ0Zvcm0gPyAnbmdGb3JtJyA6IGZhbHNlKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHByZTogZnVuY3Rpb24gbmdGb3JtUHJlTGluayhzY29wZSwgZm9ybUVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG4gICAgICAgICAgICB2YXIgY29udHJvbGxlciA9IGN0cmxzWzBdO1xuXG4gICAgICAgICAgICAvLyBpZiBgYWN0aW9uYCBhdHRyIGlzIG5vdCBwcmVzZW50IG9uIHRoZSBmb3JtLCBwcmV2ZW50IHRoZSBkZWZhdWx0IGFjdGlvbiAoc3VibWlzc2lvbilcbiAgICAgICAgICAgIGlmICghKCdhY3Rpb24nIGluIGF0dHIpKSB7XG4gICAgICAgICAgICAgIC8vIHdlIGNhbid0IHVzZSBqcSBldmVudHMgYmVjYXVzZSBpZiBhIGZvcm0gaXMgZGVzdHJveWVkIGR1cmluZyBzdWJtaXNzaW9uIHRoZSBkZWZhdWx0XG4gICAgICAgICAgICAgIC8vIGFjdGlvbiBpcyBub3QgcHJldmVudGVkLiBzZWUgIzEyMzhcbiAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgLy8gSUUgOSBpcyBub3QgYWZmZWN0ZWQgYmVjYXVzZSBpdCBkb2Vzbid0IGZpcmUgYSBzdWJtaXQgZXZlbnQgYW5kIHRyeSB0byBkbyBhIGZ1bGxcbiAgICAgICAgICAgICAgLy8gcGFnZSByZWxvYWQgaWYgdGhlIGZvcm0gd2FzIGRlc3Ryb3llZCBieSBzdWJtaXNzaW9uIG9mIHRoZSBmb3JtIHZpYSBhIGNsaWNrIGhhbmRsZXJcbiAgICAgICAgICAgICAgLy8gb24gYSBidXR0b24gaW4gdGhlIGZvcm0uIExvb2tzIGxpa2UgYW4gSUU5IHNwZWNpZmljIGJ1Zy5cbiAgICAgICAgICAgICAgdmFyIGhhbmRsZUZvcm1TdWJtaXNzaW9uID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFN1Ym1pdHRlZCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBmb3JtRWxlbWVudFswXS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVGb3JtU3VibWlzc2lvbik7XG5cbiAgICAgICAgICAgICAgLy8gdW5yZWdpc3RlciB0aGUgcHJldmVudERlZmF1bHQgbGlzdGVuZXIgc28gdGhhdCB3ZSBkb24ndCBub3QgbGVhayBtZW1vcnkgYnV0IGluIGFcbiAgICAgICAgICAgICAgLy8gd2F5IHRoYXQgd2lsbCBhY2hpZXZlIHRoZSBwcmV2ZW50aW9uIG9mIHRoZSBkZWZhdWx0IGFjdGlvbi5cbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBmb3JtRWxlbWVudFswXS5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVGb3JtU3VibWlzc2lvbik7XG4gICAgICAgICAgICAgICAgfSwgMCwgZmFsc2UpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBhcmVudEZvcm1DdHJsID0gY3RybHNbMV0gfHwgY29udHJvbGxlci4kJHBhcmVudEZvcm07XG4gICAgICAgICAgICBwYXJlbnRGb3JtQ3RybC4kYWRkQ29udHJvbChjb250cm9sbGVyKTtcblxuICAgICAgICAgICAgdmFyIHNldHRlciA9IG5hbWVBdHRyID8gZ2V0U2V0dGVyKGNvbnRyb2xsZXIuJG5hbWUpIDogbm9vcDtcblxuICAgICAgICAgICAgaWYgKG5hbWVBdHRyKSB7XG4gICAgICAgICAgICAgIHNldHRlcihzY29wZSwgY29udHJvbGxlcik7XG4gICAgICAgICAgICAgIGF0dHIuJG9ic2VydmUobmFtZUF0dHIsIGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIuJG5hbWUgPT09IG5ld1ZhbHVlKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc2V0dGVyKHNjb3BlLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuJCRwYXJlbnRGb3JtLiQkcmVuYW1lQ29udHJvbChjb250cm9sbGVyLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgc2V0dGVyID0gZ2V0U2V0dGVyKGNvbnRyb2xsZXIuJG5hbWUpO1xuICAgICAgICAgICAgICAgIHNldHRlcihzY29wZSwgY29udHJvbGxlcik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9ybUVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuJCRwYXJlbnRGb3JtLiRyZW1vdmVDb250cm9sKGNvbnRyb2xsZXIpO1xuICAgICAgICAgICAgICBzZXR0ZXIoc2NvcGUsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgIGV4dGVuZChjb250cm9sbGVyLCBudWxsRm9ybUN0cmwpOyAvL3N0b3AgcHJvcGFnYXRpbmcgY2hpbGQgZGVzdHJ1Y3Rpb24gaGFuZGxlcnMgdXB3YXJkc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZm9ybURpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGdldFNldHRlcihleHByZXNzaW9uKSB7XG4gICAgICBpZiAoZXhwcmVzc2lvbiA9PT0gJycpIHtcbiAgICAgICAgLy9jcmVhdGUgYW4gYXNzaWduYWJsZSBleHByZXNzaW9uLCBzbyBmb3JtcyB3aXRoIGFuIGVtcHR5IG5hbWUgY2FuIGJlIHJlbmFtZWQgbGF0ZXJcbiAgICAgICAgcmV0dXJuICRwYXJzZSgndGhpc1tcIlwiXScpLmFzc2lnbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiAkcGFyc2UoZXhwcmVzc2lvbikuYXNzaWduIHx8IG5vb3A7XG4gICAgfVxuICB9XTtcbn07XG5cbnZhciBmb3JtRGlyZWN0aXZlID0gZm9ybURpcmVjdGl2ZUZhY3RvcnkoKTtcbnZhciBuZ0Zvcm1EaXJlY3RpdmUgPSBmb3JtRGlyZWN0aXZlRmFjdG9yeSh0cnVlKTtcblxuXG5cbi8vIGhlbHBlciBtZXRob2RzXG5mdW5jdGlvbiBzZXR1cFZhbGlkaXR5KGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLiQkY2xhc3NDYWNoZSA9IHt9O1xuICBpbnN0YW5jZS4kJGNsYXNzQ2FjaGVbSU5WQUxJRF9DTEFTU10gPSAhKGluc3RhbmNlLiQkY2xhc3NDYWNoZVtWQUxJRF9DTEFTU10gPSBpbnN0YW5jZS4kJGVsZW1lbnQuaGFzQ2xhc3MoVkFMSURfQ0xBU1MpKTtcbn1cbmZ1bmN0aW9uIGFkZFNldFZhbGlkaXR5TWV0aG9kKGNvbnRleHQpIHtcbiAgdmFyIGNsYXp6ID0gY29udGV4dC5jbGF6eixcbiAgICAgIHNldCA9IGNvbnRleHQuc2V0LFxuICAgICAgdW5zZXQgPSBjb250ZXh0LnVuc2V0O1xuXG4gIGNsYXp6LnByb3RvdHlwZS4kc2V0VmFsaWRpdHkgPSBmdW5jdGlvbih2YWxpZGF0aW9uRXJyb3JLZXksIHN0YXRlLCBjb250cm9sbGVyKSB7XG4gICAgaWYgKGlzVW5kZWZpbmVkKHN0YXRlKSkge1xuICAgICAgY3JlYXRlQW5kU2V0KHRoaXMsICckcGVuZGluZycsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVuc2V0QW5kQ2xlYW51cCh0aGlzLCAnJHBlbmRpbmcnLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgIH1cbiAgICBpZiAoIWlzQm9vbGVhbihzdGF0ZSkpIHtcbiAgICAgIHVuc2V0KHRoaXMuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgdW5zZXQodGhpcy4kJHN1Y2Nlc3MsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICB1bnNldCh0aGlzLiRlcnJvciwgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcbiAgICAgICAgc2V0KHRoaXMuJCRzdWNjZXNzLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0KHRoaXMuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgICB1bnNldCh0aGlzLiQkc3VjY2VzcywgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuJHBlbmRpbmcpIHtcbiAgICAgIGNhY2hlZFRvZ2dsZUNsYXNzKHRoaXMsIFBFTkRJTkdfQ0xBU1MsIHRydWUpO1xuICAgICAgdGhpcy4kdmFsaWQgPSB0aGlzLiRpbnZhbGlkID0gdW5kZWZpbmVkO1xuICAgICAgdG9nZ2xlVmFsaWRhdGlvbkNzcyh0aGlzLCAnJywgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhY2hlZFRvZ2dsZUNsYXNzKHRoaXMsIFBFTkRJTkdfQ0xBU1MsIGZhbHNlKTtcbiAgICAgIHRoaXMuJHZhbGlkID0gaXNPYmplY3RFbXB0eSh0aGlzLiRlcnJvcik7XG4gICAgICB0aGlzLiRpbnZhbGlkID0gIXRoaXMuJHZhbGlkO1xuICAgICAgdG9nZ2xlVmFsaWRhdGlvbkNzcyh0aGlzLCAnJywgdGhpcy4kdmFsaWQpO1xuICAgIH1cblxuICAgIC8vIHJlLXJlYWQgdGhlIHN0YXRlIGFzIHRoZSBzZXQvdW5zZXQgbWV0aG9kcyBjb3VsZCBoYXZlXG4gICAgLy8gY29tYmluZWQgc3RhdGUgaW4gdGhpcy4kZXJyb3JbdmFsaWRhdGlvbkVycm9yXSAodXNlZCBmb3IgZm9ybXMpLFxuICAgIC8vIHdoZXJlIHNldHRpbmcvdW5zZXR0aW5nIG9ubHkgaW5jcmVtZW50cy9kZWNyZW1lbnRzIHRoZSB2YWx1ZSxcbiAgICAvLyBhbmQgZG9lcyBub3QgcmVwbGFjZSBpdC5cbiAgICB2YXIgY29tYmluZWRTdGF0ZTtcbiAgICBpZiAodGhpcy4kcGVuZGluZyAmJiB0aGlzLiRwZW5kaW5nW3ZhbGlkYXRpb25FcnJvcktleV0pIHtcbiAgICAgIGNvbWJpbmVkU3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLiRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldKSB7XG4gICAgICBjb21iaW5lZFN0YXRlID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmICh0aGlzLiQkc3VjY2Vzc1t2YWxpZGF0aW9uRXJyb3JLZXldKSB7XG4gICAgICBjb21iaW5lZFN0YXRlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29tYmluZWRTdGF0ZSA9IG51bGw7XG4gICAgfVxuXG4gICAgdG9nZ2xlVmFsaWRhdGlvbkNzcyh0aGlzLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbWJpbmVkU3RhdGUpO1xuICAgIHRoaXMuJCRwYXJlbnRGb3JtLiRzZXRWYWxpZGl0eSh2YWxpZGF0aW9uRXJyb3JLZXksIGNvbWJpbmVkU3RhdGUsIHRoaXMpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUFuZFNldChjdHJsLCBuYW1lLCB2YWx1ZSwgY29udHJvbGxlcikge1xuICAgIGlmICghY3RybFtuYW1lXSkge1xuICAgICAgY3RybFtuYW1lXSA9IHt9O1xuICAgIH1cbiAgICBzZXQoY3RybFtuYW1lXSwgdmFsdWUsIGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5zZXRBbmRDbGVhbnVwKGN0cmwsIG5hbWUsIHZhbHVlLCBjb250cm9sbGVyKSB7XG4gICAgaWYgKGN0cmxbbmFtZV0pIHtcbiAgICAgIHVuc2V0KGN0cmxbbmFtZV0sIHZhbHVlLCBjb250cm9sbGVyKTtcbiAgICB9XG4gICAgaWYgKGlzT2JqZWN0RW1wdHkoY3RybFtuYW1lXSkpIHtcbiAgICAgIGN0cmxbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2FjaGVkVG9nZ2xlQ2xhc3MoY3RybCwgY2xhc3NOYW1lLCBzd2l0Y2hWYWx1ZSkge1xuICAgIGlmIChzd2l0Y2hWYWx1ZSAmJiAhY3RybC4kJGNsYXNzQ2FjaGVbY2xhc3NOYW1lXSkge1xuICAgICAgY3RybC4kJGFuaW1hdGUuYWRkQ2xhc3MoY3RybC4kJGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICBjdHJsLiQkY2xhc3NDYWNoZVtjbGFzc05hbWVdID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKCFzd2l0Y2hWYWx1ZSAmJiBjdHJsLiQkY2xhc3NDYWNoZVtjbGFzc05hbWVdKSB7XG4gICAgICBjdHJsLiQkYW5pbWF0ZS5yZW1vdmVDbGFzcyhjdHJsLiQkZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgIGN0cmwuJCRjbGFzc0NhY2hlW2NsYXNzTmFtZV0gPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0b2dnbGVWYWxpZGF0aW9uQ3NzKGN0cmwsIHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCkge1xuICAgIHZhbGlkYXRpb25FcnJvcktleSA9IHZhbGlkYXRpb25FcnJvcktleSA/ICctJyArIHNuYWtlX2Nhc2UodmFsaWRhdGlvbkVycm9yS2V5LCAnLScpIDogJyc7XG5cbiAgICBjYWNoZWRUb2dnbGVDbGFzcyhjdHJsLCBWQUxJRF9DTEFTUyArIHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCA9PT0gdHJ1ZSk7XG4gICAgY2FjaGVkVG9nZ2xlQ2xhc3MoY3RybCwgSU5WQUxJRF9DTEFTUyArIHZhbGlkYXRpb25FcnJvcktleSwgaXNWYWxpZCA9PT0gZmFsc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0RW1wdHkob2JqKSB7XG4gIGlmIChvYmopIHtcbiAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKiBnbG9iYWxcbiAgVkFMSURfQ0xBU1M6IGZhbHNlLFxuICBJTlZBTElEX0NMQVNTOiBmYWxzZSxcbiAgUFJJU1RJTkVfQ0xBU1M6IGZhbHNlLFxuICBESVJUWV9DTEFTUzogZmFsc2UsXG4gIG5nTW9kZWxNaW5FcnI6IGZhbHNlXG4qL1xuXG4vLyBSZWdleCBjb2RlIHdhcyBpbml0aWFsbHkgb2J0YWluZWQgZnJvbSBTTyBwcmlvciB0byBtb2RpZmljYXRpb246IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzMxNDMwNzAvamF2YXNjcmlwdC1yZWdleC1pc28tZGF0ZXRpbWUjYW5zd2VyLTMxNDMyMzFcbnZhciBJU09fREFURV9SRUdFWFAgPSAvXlxcZHs0LH0tWzAxXVxcZC1bMC0zXVxcZFRbMC0yXVxcZDpbMC01XVxcZDpbMC01XVxcZFxcLlxcZCsoPzpbKy1dWzAtMl1cXGQ6WzAtNV1cXGR8WikkLztcbi8vIFNlZSB2YWxpZCBVUkxzIGluIFJGQzM5ODcgKGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODcpXG4vLyBOb3RlOiBXZSBhcmUgYmVpbmcgbW9yZSBsZW5pZW50LCBiZWNhdXNlIGJyb3dzZXJzIGFyZSB0b28uXG4vLyAgIDEuIFNjaGVtZVxuLy8gICAyLiBTbGFzaGVzXG4vLyAgIDMuIFVzZXJuYW1lXG4vLyAgIDQuIFBhc3N3b3JkXG4vLyAgIDUuIEhvc3RuYW1lXG4vLyAgIDYuIFBvcnRcbi8vICAgNy4gUGF0aFxuLy8gICA4LiBRdWVyeVxuLy8gICA5LiBGcmFnbWVudFxuLy8gICAgICAgICAgICAgICAgIDExMTExMTExMTExMTExMTEgMjIyICAgMzMzMzMzICAgIDQ0NDQ0ICAgICAgICA1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NSAgICAgNjY2ICAgICA3Nzc3Nzc3NyAgICAgODg4ODg4OCAgICAgOTk5XG52YXIgVVJMX1JFR0VYUCA9IC9eW2Etel1bYS16XFxkListXSo6XFwvKig/OlteOkBdKyg/OjpbXkBdKyk/QCk/KD86W15cXHM6Lz8jXSt8XFxbW2EtZlxcZDpdK10pKD86OlxcZCspPyg/OlxcL1tePyNdKik/KD86XFw/W14jXSopPyg/OiMuKik/JC9pO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbnZhciBFTUFJTF9SRUdFWFAgPSAvXig/PS57MSwyNTR9JCkoPz0uezEsNjR9QClbLSEjJCUmJyorLzAtOT0/QS1aXl9gYS16e3x9fl0rKFxcLlstISMkJSYnKisvMC05PT9BLVpeX2BhLXp7fH1+XSspKkBbQS1aYS16MC05XShbQS1aYS16MC05LV17MCw2MX1bQS1aYS16MC05XSk/KFxcLltBLVphLXowLTldKFtBLVphLXowLTktXXswLDYxfVtBLVphLXowLTldKT8pKiQvO1xudmFyIE5VTUJFUl9SRUdFWFAgPSAvXlxccyooLXxcXCspPyhcXGQrfChcXGQqKFxcLlxcZCopKSkoW2VFXVsrLV0/XFxkKyk/XFxzKiQvO1xudmFyIERBVEVfUkVHRVhQID0gL14oXFxkezQsfSktKFxcZHsyfSktKFxcZHsyfSkkLztcbnZhciBEQVRFVElNRUxPQ0FMX1JFR0VYUCA9IC9eKFxcZHs0LH0pLShcXGRcXGQpLShcXGRcXGQpVChcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvO1xudmFyIFdFRUtfUkVHRVhQID0gL14oXFxkezQsfSktVyhcXGRcXGQpJC87XG52YXIgTU9OVEhfUkVHRVhQID0gL14oXFxkezQsfSktKFxcZFxcZCkkLztcbnZhciBUSU1FX1JFR0VYUCA9IC9eKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkoXFwuXFxkezEsM30pPyk/JC87XG5cbnZhciBQQVJUSUFMX1ZBTElEQVRJT05fRVZFTlRTID0gJ2tleWRvd24gd2hlZWwgbW91c2Vkb3duJztcbnZhciBQQVJUSUFMX1ZBTElEQVRJT05fVFlQRVMgPSBjcmVhdGVNYXAoKTtcbmZvckVhY2goJ2RhdGUsZGF0ZXRpbWUtbG9jYWwsbW9udGgsdGltZSx3ZWVrJy5zcGxpdCgnLCcpLCBmdW5jdGlvbih0eXBlKSB7XG4gIFBBUlRJQUxfVkFMSURBVElPTl9UWVBFU1t0eXBlXSA9IHRydWU7XG59KTtcblxudmFyIGlucHV0VHlwZSA9IHtcblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3RleHRdXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTdGFuZGFyZCBIVE1MIHRleHQgaW5wdXQgd2l0aCBBbmd1bGFySlMgZGF0YSBiaW5kaW5nLCBpbmhlcml0ZWQgYnkgbW9zdCBvZiB0aGUgYGlucHV0YCBlbGVtZW50cy5cbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXG4gICAqICAgIG1pbmxlbmd0aC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxuICAgKiAgICBtYXhsZW5ndGguIFNldHRpbmcgdGhlIGF0dHJpYnV0ZSB0byBhIG5lZ2F0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCBhbGxvd3MgdmlldyB2YWx1ZXMgb2ZcbiAgICogICAgYW55IGxlbmd0aC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBwYXR0ZXJuIFNpbWlsYXIgdG8gYG5nUGF0dGVybmAgZXhjZXB0IHRoYXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBpcyB0aGUgYWN0dWFsIHN0cmluZ1xuICAgKiAgICB0aGF0IGNvbnRhaW5zIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gYm9keSB0aGF0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgcmVndWxhciBleHByZXNzaW9uXG4gICAqICAgIGFzIGluIHRoZSBuZ1BhdHRlcm4gZGlyZWN0aXZlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgbmdNb2RlbCB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlICR2aWV3VmFsdWV9XG4gICAqICAgIGRvZXMgbm90IG1hdGNoIGEgUmVnRXhwIGZvdW5kIGJ5IGV2YWx1YXRpbmcgdGhlIEFuZ3VsYXJKUyBleHByZXNzaW9uIGdpdmVuIGluIHRoZSBhdHRyaWJ1dGUgdmFsdWUuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIFJlZ0V4cCBvYmplY3QsIHRoZW4gdGhpcyBpcyB1c2VkIGRpcmVjdGx5LlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZW4gaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBSZWdFeHBcbiAgICogICAgYWZ0ZXIgd3JhcHBpbmcgaXQgaW4gYF5gIGFuZCBgJGAgY2hhcmFjdGVycy4gRm9yIGluc3RhbmNlLCBgXCJhYmNcImAgd2lsbCBiZSBjb252ZXJ0ZWQgdG9cbiAgICogICAgYG5ldyBSZWdFeHAoJ15hYmMkJylgLjxiciAvPlxuICAgKiAgICAqKk5vdGU6KiogQXZvaWQgdXNpbmcgdGhlIGBnYCBmbGFnIG9uIHRoZSBSZWdFeHAsIGFzIGl0IHdpbGwgY2F1c2UgZWFjaCBzdWNjZXNzaXZlIHNlYXJjaCB0b1xuICAgKiAgICBzdGFydCBhdCB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgc2VhcmNoJ3MgbWF0Y2gsIHRodXMgbm90IHRha2luZyB0aGUgd2hvbGUgaW5wdXQgdmFsdWUgaW50b1xuICAgKiAgICBhY2NvdW50LlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbbmdUcmltPXRydWVdIElmIHNldCB0byBmYWxzZSBBbmd1bGFySlMgd2lsbCBub3QgYXV0b21hdGljYWxseSB0cmltIHRoZSBpbnB1dC5cbiAgICogICAgVGhpcyBwYXJhbWV0ZXIgaXMgaWdub3JlZCBmb3IgaW5wdXRbdHlwZT1wYXNzd29yZF0gY29udHJvbHMsIHdoaWNoIHdpbGwgbmV2ZXIgdHJpbSB0aGVcbiAgICogICAgaW5wdXQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwidGV4dC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ0ZXh0SW5wdXRFeGFtcGxlXCI+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICA8c2NyaXB0PlxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgndGV4dElucHV0RXhhbXBsZScsIFtdKVxuICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcbiAgICAgICAgICAgICAgICAgdGV4dDogJ2d1ZXN0JyxcbiAgICAgICAgICAgICAgICAgd29yZDogL15cXHMqXFx3KlxccyokL1xuICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICB9XSk7XG4gICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgPGxhYmVsPlNpbmdsZSB3b3JkOlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS50ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgbmctcGF0dGVybj1cImV4YW1wbGUud29yZFwiIHJlcXVpcmVkIG5nLXRyaW09XCJmYWxzZVwiPlxuICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5wYXR0ZXJuXCI+XG4gICAgICAgICAgICAgICBTaW5nbGUgd29yZCBvbmx5ITwvc3Bhbj5cbiAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgIDxjb2RlPnRleHQgPSB7e2V4YW1wbGUudGV4dH19PC9jb2RlPjxici8+XG4gICAgICAgICAgIDxjb2RlPm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvY29kZT48YnIvPlxuICAgICAgICAgICA8Y29kZT5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L2NvZGU+PGJyLz5cbiAgICAgICAgICAgPGNvZGU+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC9jb2RlPjxici8+XG4gICAgICAgICAgIDxjb2RlPm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC9jb2RlPjxici8+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2ZpbGU+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgICB2YXIgdGV4dCA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS50ZXh0JykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdleGFtcGxlLnRleHQnKSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9Db250YWluKCdndWVzdCcpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh0ZXh0LmdldFRleHQoKSkudG9FcXVhbCgndGV4dCA9Jyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgbXVsdGkgd29yZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCdoZWxsbyB3b3JsZCcpO1xuXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICd0ZXh0JzogdGV4dElucHV0VHlwZSxcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBpbnB1dFxuICAgICAqIEBuYW1lIGlucHV0W2RhdGVdXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBJbnB1dCB3aXRoIGRhdGUgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24uIEluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHlldCBzdXBwb3J0XG4gICAgICogdGhlIEhUTUw1IGRhdGUgaW5wdXQsIGEgdGV4dCBlbGVtZW50IHdpbGwgYmUgdXNlZC4gSW4gdGhhdCBjYXNlLCB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXG4gICAgICogZGF0ZSBmb3JtYXQgKHl5eXktTU0tZGQpLCBmb3IgZXhhbXBsZTogYDIwMDktMDEtMDZgLiBTaW5jZSBtYW55XG4gICAgICogbW9kZXJuIGJyb3dzZXJzIGRvIG5vdCB5ZXQgc3VwcG9ydCB0aGlzIGlucHV0IHR5cGUsIGl0IGlzIGltcG9ydGFudCB0byBwcm92aWRlIGN1ZXMgdG8gdXNlcnMgb24gdGhlXG4gICAgICogZXhwZWN0ZWQgaW5wdXQgZm9ybWF0IHZpYSBhIHBsYWNlaG9sZGVyIG9yIGxhYmVsLlxuICAgICAqXG4gICAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFySlMgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICAgKiBJbnZhbGlkIGBEYXRlYCBvYmplY3RzIChkYXRlcyB3aG9zZSBgZ2V0VGltZSgpYCBpcyBgTmFOYCkgd2lsbCBiZSByZW5kZXJlZCBhcyBhbiBlbXB0eSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC4gVGhpcyBtdXN0IGJlIGFcbiAgICAgKiAgIHZhbGlkIElTTyBkYXRlIHN0cmluZyAoeXl5eS1NTS1kZCkuIFlvdSBjYW4gYWxzbyB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhpcyBhdHRyaWJ1dGVcbiAgICAgKiAgIChlLmcuIGBtaW49XCJ7e21pbkRhdGUgfCBkYXRlOid5eXl5LU1NLWRkJ319XCJgKS4gTm90ZSB0aGF0IGBtaW5gIHdpbGwgYWxzbyBhZGQgbmF0aXZlIEhUTUw1XG4gICAgICogICBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLiBUaGlzIG11c3QgYmVcbiAgICAgKiAgIGEgdmFsaWQgSVNPIGRhdGUgc3RyaW5nICh5eXl5LU1NLWRkKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGlzIGF0dHJpYnV0ZVxuICAgICAqICAgKGUuZy4gYG1heD1cInt7bWF4RGF0ZSB8IGRhdGU6J3l5eXktTU0tZGQnfX1cImApLiBOb3RlIHRoYXQgYG1heGAgd2lsbCBhbHNvIGFkZCBuYXRpdmUgSFRNTDVcbiAgICAgKiAgIGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gZGF0ZSBzdHJpbmdcbiAgICAgKiAgIHRoZSBgbmdNaW5gIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWluYCBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIHsoZGF0ZXxzdHJpbmcpPX0gbmdNYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvIHRoZSBEYXRlIC8gSVNPIGRhdGUgc3RyaW5nXG4gICAgICogICB0aGUgYG5nTWF4YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1heGAgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgIDxleGFtcGxlIG5hbWU9XCJkYXRlLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImRhdGVJbnB1dEV4YW1wbGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdkYXRlSW5wdXRFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoMjAxMywgOSwgMjIpXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgICAgIDxsYWJlbCBmb3I9XCJleGFtcGxlSW5wdXRcIj5QaWNrIGEgZGF0ZSBpbiAyMDEzOjwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgaWQ9XCJleGFtcGxlSW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cInl5eXktTU0tZGRcIiBtaW49XCIyMDEzLTAxLTAxXCIgbWF4PVwiMjAxMy0xMi0zMVwiIHJlcXVpcmVkIC8+XG4gICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5kYXRlXCI+XG4gICAgICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XG4gICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICA8dHQ+dmFsdWUgPSB7e2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktTU0tZGRcIn19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICAgPC9mb3JtPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCdleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NLWRkXCInKSk7XG4gICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcblxuICAgICAgICAvLyBjdXJyZW50bHkgcHJvdHJhY3Rvci93ZWJkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydFxuICAgICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXG4gICAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cbiAgICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XG4gICAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhbmQgZm9yY2UgdmFsaWRhdGlvbi5cbiAgICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXG4gICAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xuICAgICAgICAgIFwiYW5ndWxhci5lbGVtZW50KGlwdCkuc2NvcGUoKS4kYXBwbHkoZnVuY3Rpb24ocykgeyBzLm15Rm9ybVtpcHQubmFtZV0uJHNldFZpZXdWYWx1ZSgnXCIgKyB2YWwgKyBcIicpOyB9KTtcIjtcbiAgICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMy0xMC0yMicpO1xuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2V0SW5wdXQoJycpO1xuICAgICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZXRJbnB1dCgnMjAxNS0wMS0wMScpO1xuICAgICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgICAgPC9leGFtcGxlPlxuICAgICAqL1xuICAnZGF0ZSc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ2RhdGUnLCBEQVRFX1JFR0VYUCxcbiAgICAgICAgIGNyZWF0ZURhdGVQYXJzZXIoREFURV9SRUdFWFAsIFsneXl5eScsICdNTScsICdkZCddKSxcbiAgICAgICAgICd5eXl5LU1NLWRkJyksXG5cbiAgIC8qKlxuICAgICogQG5nZG9jIGlucHV0XG4gICAgKiBAbmFtZSBpbnB1dFtkYXRldGltZS1sb2NhbF1cbiAgICAqXG4gICAgKiBAZGVzY3JpcHRpb25cbiAgICAqIElucHV0IHdpdGggZGF0ZXRpbWUgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24uIEluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHlldCBzdXBwb3J0XG4gICAgKiB0aGUgSFRNTDUgZGF0ZSBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRoZSB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXG4gICAgKiBsb2NhbCBkYXRldGltZSBmb3JtYXQgKHl5eXktTU0tZGRUSEg6bW06c3MpLCBmb3IgZXhhbXBsZTogYDIwMTAtMTItMjhUMTQ6NTc6MDBgLlxuICAgICpcbiAgICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LCBvdGhlcndpc2UgQW5ndWxhckpTIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAgKiBJbnZhbGlkIGBEYXRlYCBvYmplY3RzIChkYXRlcyB3aG9zZSBgZ2V0VGltZSgpYCBpcyBgTmFOYCkgd2lsbCBiZSByZW5kZXJlZCBhcyBhbiBlbXB0eSBzdHJpbmcuXG4gICAgKlxuICAgICogVGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBjYW4gYmUgZGVmaW5lZCB1c2luZ1xuICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30uIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyLlxuICAgICpcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLlxuICAgICogICBUaGlzIG11c3QgYmUgYSB2YWxpZCBJU08gZGF0ZXRpbWUgZm9ybWF0ICh5eXl5LU1NLWRkVEhIOm1tOnNzKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uXG4gICAgKiAgIGluc2lkZSB0aGlzIGF0dHJpYnV0ZSAoZS5nLiBgbWluPVwie3ttaW5EYXRldGltZUxvY2FsIHwgZGF0ZToneXl5eS1NTS1kZFRISDptbTpzcyd9fVwiYCkuXG4gICAgKiAgIE5vdGUgdGhhdCBgbWluYCB3aWxsIGFsc28gYWRkIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuXG4gICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyBkYXRldGltZSBmb3JtYXQgKHl5eXktTU0tZGRUSEg6bW06c3MpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb25cbiAgICAqICAgaW5zaWRlIHRoaXMgYXR0cmlidXRlIChlLmcuIGBtYXg9XCJ7e21heERhdGV0aW1lTG9jYWwgfCBkYXRlOid5eXl5LU1NLWRkVEhIOm1tOnNzJ319XCJgKS5cbiAgICAqICAgTm90ZSB0aGF0IGBtYXhgIHdpbGwgYWxzbyBhZGQgbmF0aXZlIEhUTUw1IGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IHRvIHRoZSBEYXRlIC8gSVNPIGRhdGV0aW1lIHN0cmluZ1xuICAgICogICB0aGUgYG5nTWluYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1pbmAgYXR0cmlidXRlLlxuICAgICogQHBhcmFtIHsoZGF0ZXxzdHJpbmcpPX0gbmdNYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgdG8gdGhlIERhdGUgLyBJU08gZGF0ZXRpbWUgc3RyaW5nXG4gICAgKiAgIHRoZSBgbmdNYXhgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWF4YCBhdHRyaWJ1dGUuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgICpcbiAgICAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cImRhdGV0aW1lbG9jYWwtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwiZGF0ZUV4YW1wbGVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPHNjcmlwdD5cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2RhdGVFeGFtcGxlJywgW10pXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoMjAxMCwgMTEsIDI4LCAxNCwgNTcpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1dKTtcbiAgICAgIDwvc2NyaXB0PlxuICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgICA8bGFiZWwgZm9yPVwiZXhhbXBsZUlucHV0XCI+UGljayBhIGRhdGUgYmV0d2VlbiBpbiAyMDEzOjwvbGFiZWw+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZXRpbWUtbG9jYWxcIiBpZD1cImV4YW1wbGVJbnB1dFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cInl5eXktTU0tZGRUSEg6bW06c3NcIiBtaW49XCIyMDAxLTAxLTAxVDAwOjAwOjAwXCIgbWF4PVwiMjAxMy0xMi0zMVQwMDowMDowMFwiIHJlcXVpcmVkIC8+XG4gICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IuZGF0ZXRpbWVsb2NhbFwiPlxuICAgICAgICAgICAgICBOb3QgYSB2YWxpZCBkYXRlITwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTS1kZFRISDptbTpzc1wifX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgIDwvZm9ybT5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCdleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NLWRkVEhIOm1tOnNzXCInKSk7XG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG5cbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcbiAgICAgIH1cblxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMC0xMi0yOFQxNDo1NzowMCcpO1xuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSB0cnVlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldElucHV0KCcnKTtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBvdmVyIG1heCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnMjAxNS0wMS0wMVQyMzo1OTowMCcpO1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAgICAqL1xuICAnZGF0ZXRpbWUtbG9jYWwnOiBjcmVhdGVEYXRlSW5wdXRUeXBlKCdkYXRldGltZWxvY2FsJywgREFURVRJTUVMT0NBTF9SRUdFWFAsXG4gICAgICBjcmVhdGVEYXRlUGFyc2VyKERBVEVUSU1FTE9DQUxfUkVHRVhQLCBbJ3l5eXknLCAnTU0nLCAnZGQnLCAnSEgnLCAnbW0nLCAnc3MnLCAnc3NzJ10pLFxuICAgICAgJ3l5eXktTU0tZGRUSEg6bW06c3Muc3NzJyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBpbnB1dFxuICAgKiBAbmFtZSBpbnB1dFt0aW1lXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSW5wdXQgd2l0aCB0aW1lIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCB5ZXQgc3VwcG9ydFxuICAgKiB0aGUgSFRNTDUgdGltZSBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRoZSB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXG4gICAqIGxvY2FsIHRpbWUgZm9ybWF0IChISDptbTpzcyksIGZvciBleGFtcGxlOiBgMTQ6NTc6MDBgLiBNb2RlbCBtdXN0IGJlIGEgRGF0ZSBvYmplY3QuIFRoaXMgYmluZGluZyB3aWxsIGFsd2F5cyBvdXRwdXQgYVxuICAgKiBEYXRlIG9iamVjdCB0byB0aGUgbW9kZWwgb2YgSmFudWFyeSAxLCAxOTcwLCBvciBsb2NhbCBkYXRlIGBuZXcgRGF0ZSgxOTcwLCAwLCAxLCBISCwgbW0sIHNzKWAuXG4gICAqXG4gICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LCBvdGhlcndpc2UgQW5ndWxhckpTIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cbiAgICpcbiAgICogVGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBjYW4gYmUgZGVmaW5lZCB1c2luZ1xuICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC5cbiAgICogICBUaGlzIG11c3QgYmUgYSB2YWxpZCBJU08gdGltZSBmb3JtYXQgKEhIOm1tOnNzKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGlzXG4gICAqICAgYXR0cmlidXRlIChlLmcuIGBtaW49XCJ7e21pblRpbWUgfCBkYXRlOidISDptbTpzcyd9fVwiYCkuIE5vdGUgdGhhdCBgbWluYCB3aWxsIGFsc28gYWRkXG4gICAqICAgbmF0aXZlIEhUTUw1IGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLlxuICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyB0aW1lIGZvcm1hdCAoSEg6bW06c3MpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICogICBhdHRyaWJ1dGUgKGUuZy4gYG1heD1cInt7bWF4VGltZSB8IGRhdGU6J0hIOm1tOnNzJ319XCJgKS4gTm90ZSB0aGF0IGBtYXhgIHdpbGwgYWxzbyBhZGRcbiAgICogICBuYXRpdmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gdGltZSBzdHJpbmcgdGhlXG4gICAqICAgYG5nTWluYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1pbmAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gdGltZSBzdHJpbmcgdGhlXG4gICAqICAgYG5nTWF4YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1heGAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJ0aW1lLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInRpbWVFeGFtcGxlXCI+XG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICA8c2NyaXB0PlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ3RpbWVFeGFtcGxlJywgW10pXG4gICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XG4gICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoMTk3MCwgMCwgMSwgMTQsIDU3LCAwKVxuICAgICAgICAgIH07XG4gICAgICAgIH1dKTtcbiAgICAgPC9zY3JpcHQ+XG4gICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRGF0ZUNvbnRyb2xsZXIgYXMgZGF0ZUN0cmxcIj5cbiAgICAgICAgPGxhYmVsIGZvcj1cImV4YW1wbGVJbnB1dFwiPlBpY2sgYSB0aW1lIGJldHdlZW4gOGFtIGFuZCA1cG06PC9sYWJlbD5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0aW1lXCIgaWQ9XCJleGFtcGxlSW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJISDptbTpzc1wiIG1pbj1cIjA4OjAwOjAwXCIgbWF4PVwiMTc6MDA6MDBcIiByZXF1aXJlZCAvPlxuICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnRpbWVcIj5cbiAgICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8dHQ+dmFsdWUgPSB7e2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcIkhIOm1tOnNzXCJ9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICA8L2Zvcm0+XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcIkhIOm1tOnNzXCInKSk7XG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG5cbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcbiAgICAgIH1cblxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMTQ6NTc6MDAnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJzIzOjU5OjAwJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAgICovXG4gICd0aW1lJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgndGltZScsIFRJTUVfUkVHRVhQLFxuICAgICAgY3JlYXRlRGF0ZVBhcnNlcihUSU1FX1JFR0VYUCwgWydISCcsICdtbScsICdzcycsICdzc3MnXSksXG4gICAgICdISDptbTpzcy5zc3MnKSxcblxuICAgLyoqXG4gICAgKiBAbmdkb2MgaW5wdXRcbiAgICAqIEBuYW1lIGlucHV0W3dlZWtdXG4gICAgKlxuICAgICogQGRlc2NyaXB0aW9uXG4gICAgKiBJbnB1dCB3aXRoIHdlZWstb2YtdGhlLXllYXIgdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24gdG8gRGF0ZS4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcbiAgICAqIHRoZSBIVE1MNSB3ZWVrIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICAqIHdlZWsgZm9ybWF0ICh5eXl5LVcjIyksIGZvciBleGFtcGxlOiBgMjAxMy1XMDJgLlxuICAgICpcbiAgICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LCBvdGhlcndpc2UgQW5ndWxhckpTIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAgKiBJbnZhbGlkIGBEYXRlYCBvYmplY3RzIChkYXRlcyB3aG9zZSBgZ2V0VGltZSgpYCBpcyBgTmFOYCkgd2lsbCBiZSByZW5kZXJlZCBhcyBhbiBlbXB0eSBzdHJpbmcuXG4gICAgKlxuICAgICogVGhlIHZhbHVlIG9mIHRoZSByZXN1bHRpbmcgRGF0ZSBvYmplY3Qgd2lsbCBiZSBzZXQgdG8gVGh1cnNkYXkgYXQgMDA6MDA6MDAgb2YgdGhlIHJlcXVlc3RlZCB3ZWVrLFxuICAgICogZHVlIHRvIElTTy04NjAxIHdlZWsgbnVtYmVyaW5nIHN0YW5kYXJkcy4gSW5mb3JtYXRpb24gb24gSVNPJ3Mgc3lzdGVtIGZvciBudW1iZXJpbmcgdGhlIHdlZWtzIG9mIHRoZVxuICAgICogeWVhciBjYW4gYmUgZm91bmQgYXQ6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1dlZWtfZGF0ZXNcbiAgICAqXG4gICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAgKlxuICAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuXG4gICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyB3ZWVrIGZvcm1hdCAoeXl5eS1XIyMpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICAqICAgYXR0cmlidXRlIChlLmcuIGBtaW49XCJ7e21pbldlZWsgfCBkYXRlOid5eXl5LVd3dyd9fVwiYCkuIE5vdGUgdGhhdCBgbWluYCB3aWxsIGFsc28gYWRkXG4gICAgKiAgIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuXG4gICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyB3ZWVrIGZvcm1hdCAoeXl5eS1XIyMpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICAqICAgYXR0cmlidXRlIChlLmcuIGBtYXg9XCJ7e21heFdlZWsgfCBkYXRlOid5eXl5LVd3dyd9fVwiYCkuIE5vdGUgdGhhdCBgbWF4YCB3aWxsIGFsc28gYWRkXG4gICAgKiAgIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gd2VlayBzdHJpbmdcbiAgICAqICAgdGhlIGBuZ01pbmAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8uIE5vdGUgdGhhdCBpdCBkb2VzIG5vdCBzZXQgdGhlIGBtaW5gIGF0dHJpYnV0ZS5cbiAgICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyB3ZWVrIHN0cmluZ1xuICAgICogICB0aGUgYG5nTWF4YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1heGAgYXR0cmlidXRlLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICAqXG4gICAgKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJ3ZWVrLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIndlZWtFeGFtcGxlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxzY3JpcHQ+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnd2Vla0V4YW1wbGUnLCBbXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZSgyMDEzLCAwLCAzKVxuICAgICAgICAgIH07XG4gICAgICAgIH1dKTtcbiAgICAgIDwvc2NyaXB0PlxuICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgICA8bGFiZWw+UGljayBhIGRhdGUgYmV0d2VlbiBpbiAyMDEzOlxuICAgICAgICAgIDxpbnB1dCBpZD1cImV4YW1wbGVJbnB1dFwiIHR5cGU9XCJ3ZWVrXCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJleGFtcGxlLnZhbHVlXCJcbiAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJZWVlZLVcjI1wiIG1pbj1cIjIwMTItVzMyXCJcbiAgICAgICAgICAgICAgICAgbWF4PVwiMjAxMy1XNTJcIiByZXF1aXJlZCAvPlxuICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLndlZWtcIj5cbiAgICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8dHQ+dmFsdWUgPSB7e2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktV3d3XCJ9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICAgPC9mb3JtPlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktV3d3XCInKSk7XG4gICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG5cbiAgICAgIC8vIGN1cnJlbnRseSBwcm90cmFjdG9yL3dlYmRyaXZlciBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICAvLyBzZW5kaW5nIGtleXMgdG8gYWxsIGtub3duIEhUTUw1IGlucHV0IGNvbnRyb2xzXG4gICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvcHJvdHJhY3Rvci9pc3N1ZXMvNTYyKS5cbiAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xuICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFuZCBmb3JjZSB2YWxpZGF0aW9uLlxuICAgICAgICB2YXIgc2NyID0gXCJ2YXIgaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVJbnB1dCcpOyBcIiArXG4gICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcbiAgICAgICAgXCJhbmd1bGFyLmVsZW1lbnQoaXB0KS5zY29wZSgpLiRhcHBseShmdW5jdGlvbihzKSB7IHMubXlGb3JtW2lwdC5uYW1lXS4kc2V0Vmlld1ZhbHVlKCdcIiArIHZhbCArIFwiJyk7IH0pO1wiO1xuICAgICAgICBicm93c2VyLmV4ZWN1dGVTY3JpcHQoc2NyKTtcbiAgICAgIH1cblxuICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignMjAxMy1XMDEnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJzIwMTUtVzAxJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICAgICovXG4gICd3ZWVrJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnd2VlaycsIFdFRUtfUkVHRVhQLCB3ZWVrUGFyc2VyLCAneXl5eS1Xd3cnKSxcblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W21vbnRoXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSW5wdXQgd2l0aCBtb250aCB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcbiAgICogdGhlIEhUTUw1IG1vbnRoIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGhlIHRleHQgbXVzdCBiZSBlbnRlcmVkIGluIGEgdmFsaWQgSVNPLTg2MDFcbiAgICogbW9udGggZm9ybWF0ICh5eXl5LU1NKSwgZm9yIGV4YW1wbGU6IGAyMDA5LTAxYC5cbiAgICpcbiAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIGEgRGF0ZSBvYmplY3QsIG90aGVyd2lzZSBBbmd1bGFySlMgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICogSW52YWxpZCBgRGF0ZWAgb2JqZWN0cyAoZGF0ZXMgd2hvc2UgYGdldFRpbWUoKWAgaXMgYE5hTmApIHdpbGwgYmUgcmVuZGVyZWQgYXMgYW4gZW1wdHkgc3RyaW5nLlxuICAgKiBJZiB0aGUgbW9kZWwgaXMgbm90IHNldCB0byB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoLCB0aGUgbmV4dCB2aWV3IHRvIG1vZGVsIHVwZGF0ZSB3aWxsIHNldCBpdFxuICAgKiB0byB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoLlxuICAgKlxuICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLlxuICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyBtb250aCBmb3JtYXQgKHl5eXktTU0pLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICogICBhdHRyaWJ1dGUgKGUuZy4gYG1pbj1cInt7bWluTW9udGggfCBkYXRlOid5eXl5LU1NJ319XCJgKS4gTm90ZSB0aGF0IGBtaW5gIHdpbGwgYWxzbyBhZGRcbiAgICogICBuYXRpdmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuXG4gICAqICAgVGhpcyBtdXN0IGJlIGEgdmFsaWQgSVNPIG1vbnRoIGZvcm1hdCAoeXl5eS1NTSkuIFlvdSBjYW4gYWxzbyB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhpc1xuICAgKiAgIGF0dHJpYnV0ZSAoZS5nLiBgbWF4PVwie3ttYXhNb250aCB8IGRhdGU6J3l5eXktTU0nfX1cImApLiBOb3RlIHRoYXQgYG1heGAgd2lsbCBhbHNvIGFkZFxuICAgKiAgIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyB3ZWVrIHN0cmluZ1xuICAgKiAgIHRoZSBgbmdNaW5gIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWluYCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gY29uc3RyYWludCB0byB0aGUgRGF0ZSAvIElTTyB3ZWVrIHN0cmluZ1xuICAgKiAgIHRoZSBgbmdNYXhgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWF4YCBhdHRyaWJ1dGUuXG5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibW9udGgtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwibW9udGhFeGFtcGxlXCI+XG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICA8c2NyaXB0PlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ21vbnRoRXhhbXBsZScsIFtdKVxuICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDIwMTMsIDksIDEpXG4gICAgICAgICAgfTtcbiAgICAgICAgfV0pO1xuICAgICA8L3NjcmlwdD5cbiAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJEYXRlQ29udHJvbGxlciBhcyBkYXRlQ3RybFwiPlxuICAgICAgIDxsYWJlbCBmb3I9XCJleGFtcGxlSW5wdXRcIj5QaWNrIGEgbW9udGggaW4gMjAxMzo8L2xhYmVsPlxuICAgICAgIDxpbnB1dCBpZD1cImV4YW1wbGVJbnB1dFwiIHR5cGU9XCJtb250aFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZXhhbXBsZS52YWx1ZVwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJ5eXl5LU1NXCIgbWluPVwiMjAxMy0wMVwiIG1heD1cIjIwMTMtMTJcIiByZXF1aXJlZCAvPlxuICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5tb250aFwiPlxuICAgICAgICAgICAgTm90IGEgdmFsaWQgbW9udGghPC9zcGFuPlxuICAgICAgIDwvZGl2PlxuICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTVwifX08L3R0Pjxici8+XG4gICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICA8L2Zvcm0+XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICB2YXIgdmFsdWUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktTU1cIicpKTtcbiAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcblxuICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxuICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcbiAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xuICAgICAgfVxuXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEzLTEwJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJycpO1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldElucHV0KCcyMDE1LTAxJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvQ29udGFpbignJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcbiAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdtb250aCc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ21vbnRoJywgTU9OVEhfUkVHRVhQLFxuICAgICBjcmVhdGVEYXRlUGFyc2VyKE1PTlRIX1JFR0VYUCwgWyd5eXl5JywgJ01NJ10pLFxuICAgICAneXl5eS1NTScpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbbnVtYmVyXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGV4dCBpbnB1dCB3aXRoIG51bWJlciB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gU2V0cyB0aGUgYG51bWJlcmAgdmFsaWRhdGlvblxuICAgKiBlcnJvciBpZiBub3QgYSB2YWxpZCBudW1iZXIuXG4gICAqXG4gICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBvZiB0eXBlIGBudW1iZXJgIG90aGVyd2lzZSBBbmd1bGFySlMgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICogQmUgYXdhcmUgdGhhdCBhIHN0cmluZyBjb250YWluaW5nIGEgbnVtYmVyIGlzIG5vdCBlbm91Z2guIFNlZSB0aGUge0BsaW5rIG5nTW9kZWw6bnVtZm10fVxuICAgKiBlcnJvciBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9uIGFuZCBhbiBleGFtcGxlIG9mIGhvdyB0byBjb252ZXJ0IHlvdXIgbW9kZWwgaWYgbmVjZXNzYXJ5LlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogIyMgSXNzdWVzIHdpdGggSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uXG4gICAqXG4gICAqIEluIGJyb3dzZXJzIHRoYXQgZm9sbG93IHRoZVxuICAgKiBbSFRNTDUgc3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNudW1iZXItc3RhdGUtJTI4dHlwZT1udW1iZXIlMjkpLFxuICAgKiBgaW5wdXRbbnVtYmVyXWAgZG9lcyBub3Qgd29yayBhcyBleHBlY3RlZCB3aXRoIHtAbGluayBuZ01vZGVsT3B0aW9ucyBgbmdNb2RlbE9wdGlvbnMuYWxsb3dJbnZhbGlkYH0uXG4gICAqIElmIGEgbm9uLW51bWJlciBpcyBlbnRlcmVkIGluIHRoZSBpbnB1dCwgdGhlIGJyb3dzZXIgd2lsbCByZXBvcnQgdGhlIHZhbHVlIGFzIGFuIGVtcHR5IHN0cmluZyxcbiAgICogd2hpY2ggbWVhbnMgdGhlIHZpZXcgLyBtb2RlbCB2YWx1ZXMgaW4gYG5nTW9kZWxgIGFuZCBzdWJzZXF1ZW50bHkgdGhlIHNjb3BlIHZhbHVlXG4gICAqIHdpbGwgYWxzbyBiZSBhbiBlbXB0eSBzdHJpbmcuXG4gICAqXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC5cbiAgICogICAgQ2FuIGJlIGludGVycG9sYXRlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLlxuICAgKiAgICBDYW4gYmUgaW50ZXJwb2xhdGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nTWluIExpa2UgYG1pbmAsIHNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbmdNaW5gLFxuICAgKiAgICBidXQgZG9lcyBub3QgdHJpZ2dlciBIVE1MNSBuYXRpdmUgdmFsaWRhdGlvbi4gVGFrZXMgYW4gZXhwcmVzc2lvbi5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ01heCBMaWtlIGBtYXhgLCBzZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG5nTWF4YCxcbiAgICogICAgYnV0IGRvZXMgbm90IHRyaWdnZXIgSFRNTDUgbmF0aXZlIHZhbGlkYXRpb24uIFRha2VzIGFuIGV4cHJlc3Npb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gc3RlcCBTZXRzIHRoZSBgc3RlcGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgZG9lcyBub3QgZml0IHRoZSBgc3RlcGAgY29uc3RyYWludC5cbiAgICogICAgQ2FuIGJlIGludGVycG9sYXRlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1N0ZXAgTGlrZSBgc3RlcGAsIHNldHMgdGhlIGBzdGVwYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBkb2VzIG5vdCBmaXQgdGhlIGBuZ1N0ZXBgIGNvbnN0cmFpbnQsXG4gICAqICAgIGJ1dCBkb2VzIG5vdCB0cmlnZ2VyIEhUTUw1IG5hdGl2ZSB2YWxpZGF0aW9uLiBUYWtlcyBhbiBleHByZXNzaW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cbiAgICogICAgbWlubGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gICAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZlxuICAgKiAgICBhbnkgbGVuZ3RoLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXG4gICAqICAgIHRoYXQgY29udGFpbnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBib2R5IHRoYXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICogICAgYXMgaW4gdGhlIG5nUGF0dGVybiBkaXJlY3RpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgJHZpZXdWYWx1ZX1cbiAgICogICAgZG9lcyBub3QgbWF0Y2ggYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHN0cmluZywgdGhlbiBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIFJlZ0V4cFxuICAgKiAgICBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICAgKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gICAqICAgICoqTm90ZToqKiBBdm9pZCB1c2luZyB0aGUgYGdgIGZsYWcgb24gdGhlIFJlZ0V4cCwgYXMgaXQgd2lsbCBjYXVzZSBlYWNoIHN1Y2Nlc3NpdmUgc2VhcmNoIHRvXG4gICAqICAgIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gICAqICAgIGFjY291bnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwibnVtYmVyLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIm51bWJlckV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdudW1iZXJFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgICAgICB2YWx1ZTogMTJcbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfV0pO1xuICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgIDxsYWJlbD5OdW1iZXI6XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgICAgICAgICBtaW49XCIwXCIgbWF4PVwiOTlcIiByZXF1aXJlZD5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5udW1iZXJcIj5cbiAgICAgICAgICAgICAgIE5vdCB2YWxpZCBudW1iZXIhPC9zcGFuPlxuICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgPHR0PnZhbHVlID0ge3tleGFtcGxlLnZhbHVlfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZScpKTtcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG4gICAgICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnZXhhbXBsZS52YWx1ZScpKTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcxMicpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnMTIzJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdudW1iZXInOiBudW1iZXJJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3VybF1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRleHQgaW5wdXQgd2l0aCBVUkwgdmFsaWRhdGlvbi4gU2V0cyB0aGUgYHVybGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIGNvbnRlbnQgaXMgbm90IGFcbiAgICogdmFsaWQgVVJMLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAqKk5vdGU6KiogYGlucHV0W3VybF1gIHVzZXMgYSByZWdleCB0byB2YWxpZGF0ZSB1cmxzIHRoYXQgaXMgZGVyaXZlZCBmcm9tIHRoZSByZWdleFxuICAgKiB1c2VkIGluIENocm9taXVtLiBJZiB5b3UgbmVlZCBzdHJpY3RlciB2YWxpZGF0aW9uLCB5b3UgY2FuIHVzZSBgbmctcGF0dGVybmAgb3IgbW9kaWZ5XG4gICAqIHRoZSBidWlsdC1pbiB2YWxpZGF0b3JzIChzZWUgdGhlIHtAbGluayBndWlkZS9mb3JtcyBGb3JtcyBndWlkZX0pXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cbiAgICogICAgbWlubGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gICAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZlxuICAgKiAgICBhbnkgbGVuZ3RoLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXG4gICAqICAgIHRoYXQgY29udGFpbnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBib2R5IHRoYXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICogICAgYXMgaW4gdGhlIG5nUGF0dGVybiBkaXJlY3RpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgJHZpZXdWYWx1ZX1cbiAgICogICAgZG9lcyBub3QgbWF0Y2ggYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHN0cmluZywgdGhlbiBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIFJlZ0V4cFxuICAgKiAgICBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICAgKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gICAqICAgICoqTm90ZToqKiBBdm9pZCB1c2luZyB0aGUgYGdgIGZsYWcgb24gdGhlIFJlZ0V4cCwgYXMgaXQgd2lsbCBjYXVzZSBlYWNoIHN1Y2Nlc3NpdmUgc2VhcmNoIHRvXG4gICAqICAgIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gICAqICAgIGFjY291bnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwidXJsLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInVybEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd1cmxFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS51cmwgPSB7XG4gICAgICAgICAgICAgICAgIHRleHQ6ICdodHRwOi8vZ29vZ2xlLmNvbSdcbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfV0pO1xuICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgIDxsYWJlbD5VUkw6XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ1cmxcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInVybC50ZXh0XCIgcmVxdWlyZWQ+XG4gICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IudXJsXCI+XG4gICAgICAgICAgICAgICBOb3QgdmFsaWQgdXJsITwvc3Bhbj5cbiAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgIDx0dD50ZXh0ID0ge3t1cmwudGV4dH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnVybCA9IHt7ISFteUZvcm0uJGVycm9yLnVybH19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VybC50ZXh0JykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1cmwudGV4dCcpKTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2h0dHA6Ly9nb29nbGUuY29tJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcnKTtcblxuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgdXJsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2JveCcpO1xuXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICd1cmwnOiB1cmxJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W2VtYWlsXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGV4dCBpbnB1dCB3aXRoIGVtYWlsIHZhbGlkYXRpb24uIFNldHMgdGhlIGBlbWFpbGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgbm90IGEgdmFsaWQgZW1haWxcbiAgICogYWRkcmVzcy5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogKipOb3RlOioqIGBpbnB1dFtlbWFpbF1gIHVzZXMgYSByZWdleCB0byB2YWxpZGF0ZSBlbWFpbCBhZGRyZXNzZXMgdGhhdCBpcyBkZXJpdmVkIGZyb20gdGhlIHJlZ2V4XG4gICAqIHVzZWQgaW4gQ2hyb21pdW0uIElmIHlvdSBuZWVkIHN0cmljdGVyIHZhbGlkYXRpb24gKGUuZy4gcmVxdWlyaW5nIGEgdG9wLWxldmVsIGRvbWFpbiksIHlvdSBjYW5cbiAgICogdXNlIGBuZy1wYXR0ZXJuYCBvciBtb2RpZnkgdGhlIGJ1aWx0LWluIHZhbGlkYXRvcnMgKHNlZSB0aGUge0BsaW5rIGd1aWRlL2Zvcm1zIEZvcm1zIGd1aWRlfSlcbiAgICogPC9kaXY+XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxuICAgKiAgICBtaW5sZW5ndGguXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNYXhsZW5ndGggU2V0cyBgbWF4bGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbG9uZ2VyIHRoYW5cbiAgICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mXG4gICAqICAgIGFueSBsZW5ndGguXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcGF0dGVybiBTaW1pbGFyIHRvIGBuZ1BhdHRlcm5gIGV4Y2VwdCB0aGF0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgaXMgdGhlIGFjdHVhbCBzdHJpbmdcbiAgICogICAgdGhhdCBjb250YWlucyB0aGUgcmVndWxhciBleHByZXNzaW9uIGJvZHkgdGhhdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIHJlZ3VsYXIgZXhwcmVzc2lvblxuICAgKiAgICBhcyBpbiB0aGUgbmdQYXR0ZXJuIGRpcmVjdGl2ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIG5nTW9kZWwge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSAkdmlld1ZhbHVlfVxuICAgKiAgICBkb2VzIG5vdCBtYXRjaCBhIFJlZ0V4cCBmb3VuZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFySlMgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBSZWdFeHAgb2JqZWN0LCB0aGVuIHRoaXMgaXMgdXNlZCBkaXJlY3RseS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwXG4gICAqICAgIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvXG4gICAqICAgIGBuZXcgUmVnRXhwKCdeYWJjJCcpYC48YnIgLz5cbiAgICogICAgKipOb3RlOioqIEF2b2lkIHVzaW5nIHRoZSBgZ2AgZmxhZyBvbiB0aGUgUmVnRXhwLCBhcyBpdCB3aWxsIGNhdXNlIGVhY2ggc3VjY2Vzc2l2ZSBzZWFyY2ggdG9cbiAgICogICAgc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAgICogICAgYWNjb3VudC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJlbWFpbC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJlbWFpbEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdlbWFpbEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsID0ge1xuICAgICAgICAgICAgICAgICB0ZXh0OiAnbWVAZXhhbXBsZS5jb20nXG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgICAgPGxhYmVsPkVtYWlsOlxuICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJlbWFpbFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZW1haWwudGV4dFwiIHJlcXVpcmVkPlxuICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IuZW1haWxcIj5cbiAgICAgICAgICAgICAgICAgTm90IHZhbGlkIGVtYWlsITwvc3Bhbj5cbiAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICA8dHQ+dGV4dCA9IHt7ZW1haWwudGV4dH19PC90dD48YnIvPlxuICAgICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5lbWFpbCA9IHt7ISFteUZvcm0uJGVycm9yLmVtYWlsfX08L3R0Pjxici8+XG4gICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIHZhciB0ZXh0ID0gZWxlbWVudChieS5iaW5kaW5nKCdlbWFpbC50ZXh0JykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdlbWFpbC50ZXh0JykpO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvQ29udGFpbignbWVAZXhhbXBsZS5jb20nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJycpO1xuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgZW1haWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygneHh4Jyk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgPC9maWxlPlxuICAgICAgPC9leGFtcGxlPlxuICAgKi9cbiAgJ2VtYWlsJzogZW1haWxJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3JhZGlvXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSFRNTCByYWRpbyBidXR0b24uXG4gICAqXG4gICAqICoqTm90ZToqKjxicj5cbiAgICogQWxsIGlucHV0cyBjb250cm9sbGVkIGJ5IHtAbGluayBuZ01vZGVsIG5nTW9kZWx9IChpbmNsdWRpbmcgdGhvc2Ugb2YgdHlwZSBgcmFkaW9gKSB3aWxsIHVzZSB0aGVcbiAgICogdmFsdWUgb2YgdGhlaXIgYG5hbWVgIGF0dHJpYnV0ZSB0byBkZXRlcm1pbmUgdGhlIHByb3BlcnR5IHVuZGVyIHdoaWNoIHRoZWlyXG4gICAqIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIE5nTW9kZWxDb250cm9sbGVyfSB3aWxsIGJlIHB1Ymxpc2hlZCBvbiB0aGUgcGFyZW50XG4gICAqIHtAbGluayBmb3JtLkZvcm1Db250cm9sbGVyIEZvcm1Db250cm9sbGVyfS4gVGh1cywgaWYgeW91IHVzZSB0aGUgc2FtZSBgbmFtZWAgZm9yIG11bHRpcGxlXG4gICAqIGlucHV0cyBvZiBhIGZvcm0gKGUuZy4gYSBncm91cCBvZiByYWRpbyBpbnB1dHMpLCBvbmx5IF9vbmVfIGBOZ01vZGVsQ29udHJvbGxlcmAgd2lsbCBiZVxuICAgKiBwdWJsaXNoZWQgb24gdGhlIHBhcmVudCBgRm9ybUNvbnRyb2xsZXJgIHVuZGVyIHRoYXQgbmFtZS4gVGhlIHJlc3Qgb2YgdGhlIGNvbnRyb2xsZXJzIHdpbGxcbiAgICogY29udGludWUgdG8gd29yayBhcyBleHBlY3RlZCwgYnV0IHlvdSB3b24ndCBiZSBhYmxlIHRvIGFjY2VzcyB0aGVtIGFzIHByb3BlcnRpZXMgb24gdGhlIHBhcmVudFxuICAgKiBgRm9ybUNvbnRyb2xsZXJgLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICAgKiAgIDxwPlxuICAgKiAgICAgSW4gcGxhaW4gSFRNTCBmb3JtcywgdGhlIGBuYW1lYCBhdHRyaWJ1dGUgaXMgdXNlZCB0byBpZGVudGlmeSBncm91cHMgb2YgcmFkaW8gaW5wdXRzLCBzb1xuICAgKiAgICAgdGhhdCB0aGUgYnJvd3NlciBjYW4gbWFuYWdlIHRoZWlyIHN0YXRlIChjaGVja2VkL3VuY2hlY2tlZCkgYmFzZWQgb24gdGhlIHN0YXRlIG9mIG90aGVyXG4gICAqICAgICBpbnB1dHMgaW4gdGhlIHNhbWUgZ3JvdXAuXG4gICAqICAgPC9wPlxuICAgKiAgIDxwPlxuICAgKiAgICAgSW4gQW5ndWxhckpTIGZvcm1zLCB0aGlzIGlzIG5vdCBuZWNlc3NhcnkuIFRoZSBpbnB1dCdzIHN0YXRlIHdpbGwgYmUgdXBkYXRlZCBiYXNlZCBvbiB0aGVcbiAgICogICAgIHZhbHVlIG9mIHRoZSB1bmRlcmx5aW5nIG1vZGVsIGRhdGEuXG4gICAqICAgPC9wPlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cbiAgICogICBJZiB5b3Ugb21pdCB0aGUgYG5hbWVgIGF0dHJpYnV0ZSBvbiBhIHJhZGlvIGlucHV0LCBgbmdNb2RlbGAgd2lsbCBhdXRvbWF0aWNhbGx5IGFzc2lnbiBpdCBhXG4gICAqICAgdW5pcXVlIG5hbWUuXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFRoZSB2YWx1ZSB0byB3aGljaCB0aGUgYG5nTW9kZWxgIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIHNlbGVjdGVkLlxuICAgKiAgICBOb3RlIHRoYXQgYHZhbHVlYCBvbmx5IHN1cHBvcnRzIGBzdHJpbmdgIHZhbHVlcywgaS5lLiB0aGUgc2NvcGUgbW9kZWwgbmVlZHMgdG8gYmUgYSBzdHJpbmcsXG4gICAqICAgIHRvby4gVXNlIGBuZ1ZhbHVlYCBpZiB5b3UgbmVlZCBjb21wbGV4IG1vZGVscyAoYG51bWJlcmAsIGBvYmplY3RgLCAuLi4pLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ1ZhbHVlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIHdoaWNoIGBuZ01vZGVsYCB3aWxsIGJlIGJlIHNldCB3aGVuIHRoZSByYWRpb1xuICAgKiAgICBpcyBzZWxlY3RlZC4gU2hvdWxkIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgYHZhbHVlYCBhdHRyaWJ1dGUgaWYgeW91IG5lZWRcbiAgICogICAgYSBub24tc3RyaW5nIGBuZ01vZGVsYCAoYGJvb2xlYW5gLCBgYXJyYXlgLCAuLi4pLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgICAgPGV4YW1wbGUgbmFtZT1cInJhZGlvLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInJhZGlvRXhhbXBsZVwiPlxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgPHNjcmlwdD5cbiAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3JhZGlvRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAkc2NvcGUuY29sb3IgPSB7XG4gICAgICAgICAgICAgICAgIG5hbWU6ICdibHVlJ1xuICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICRzY29wZS5zcGVjaWFsVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgIFwiaWRcIjogXCIxMjM0NVwiLFxuICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiZ3JlZW5cIlxuICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICB9XSk7XG4gICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIiB2YWx1ZT1cInJlZFwiPlxuICAgICAgICAgICAgIFJlZFxuICAgICAgICAgICA8L2xhYmVsPjxici8+XG4gICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJjb2xvci5uYW1lXCIgbmctdmFsdWU9XCJzcGVjaWFsVmFsdWVcIj5cbiAgICAgICAgICAgICBHcmVlblxuICAgICAgICAgICA8L2xhYmVsPjxici8+XG4gICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJjb2xvci5uYW1lXCIgdmFsdWU9XCJibHVlXCI+XG4gICAgICAgICAgICAgQmx1ZVxuICAgICAgICAgICA8L2xhYmVsPjxici8+XG4gICAgICAgICAgIDx0dD5jb2xvciA9IHt7Y29sb3IubmFtZSB8IGpzb259fTwvdHQ+PGJyLz5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgTm90ZSB0aGF0IGBuZy12YWx1ZT1cInNwZWNpYWxWYWx1ZVwiYCBzZXRzIHJhZGlvIGl0ZW0ncyB2YWx1ZSB0byBiZSB0aGUgdmFsdWUgb2YgYCRzY29wZS5zcGVjaWFsVmFsdWVgLlxuICAgICAgICA8L2ZpbGU+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgICBpdCgnc2hvdWxkIGNoYW5nZSBzdGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGlucHV0cyA9IGVsZW1lbnQuYWxsKGJ5Lm1vZGVsKCdjb2xvci5uYW1lJykpO1xuICAgICAgICAgICAgdmFyIGNvbG9yID0gZWxlbWVudChieS5iaW5kaW5nKCdjb2xvci5uYW1lJykpO1xuXG4gICAgICAgICAgICBleHBlY3QoY29sb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2JsdWUnKTtcblxuICAgICAgICAgICAgaW5wdXRzLmdldCgwKS5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KGNvbG9yLmdldFRleHQoKSkudG9Db250YWluKCdyZWQnKTtcblxuICAgICAgICAgICAgaW5wdXRzLmdldCgxKS5jbGljaygpO1xuICAgICAgICAgICAgZXhwZWN0KGNvbG9yLmdldFRleHQoKSkudG9Db250YWluKCdncmVlbicpO1xuICAgICAgICAgIH0pO1xuICAgICAgICA8L2ZpbGU+XG4gICAgICA8L2V4YW1wbGU+XG4gICAqL1xuICAncmFkaW8nOiByYWRpb0lucHV0VHlwZSxcblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3JhbmdlXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogTmF0aXZlIHJhbmdlIGlucHV0IHdpdGggdmFsaWRhdGlvbiBhbmQgdHJhbnNmb3JtYXRpb24uXG4gICAqXG4gICAqIFRoZSBtb2RlbCBmb3IgdGhlIHJhbmdlIGlucHV0IG11c3QgYWx3YXlzIGJlIGEgYE51bWJlcmAuXG4gICAqXG4gICAqIElFOSBhbmQgb3RoZXIgYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCB0aGUgYHJhbmdlYCB0eXBlIGZhbGwgYmFja1xuICAgKiB0byBhIHRleHQgaW5wdXQgd2l0aG91dCBhbnkgZGVmYXVsdCB2YWx1ZXMgZm9yIGBtaW5gLCBgbWF4YCBhbmQgYHN0ZXBgLiBNb2RlbCBiaW5kaW5nLFxuICAgKiB2YWxpZGF0aW9uIGFuZCBudW1iZXIgcGFyc2luZyBhcmUgbmV2ZXJ0aGVsZXNzIHN1cHBvcnRlZC5cbiAgICpcbiAgICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHJhbmdlIChsYXRlc3QgQ2hyb21lLCBTYWZhcmksIEZpcmVmb3gsIEVkZ2UpIHRyZWF0IGBpbnB1dFtyYW5nZV1gXG4gICAqIGluIGEgd2F5IHRoYXQgbmV2ZXIgYWxsb3dzIHRoZSBpbnB1dCB0byBob2xkIGFuIGludmFsaWQgdmFsdWUuIFRoYXQgbWVhbnM6XG4gICAqIC0gYW55IG5vbi1udW1lcmljYWwgdmFsdWUgaXMgc2V0IHRvIGAobWF4ICsgbWluKSAvIDJgLlxuICAgKiAtIGFueSBudW1lcmljYWwgdmFsdWUgdGhhdCBpcyBsZXNzIHRoYW4gdGhlIGN1cnJlbnQgbWluIHZhbCwgb3IgZ3JlYXRlciB0aGFuIHRoZSBjdXJyZW50IG1heCB2YWxcbiAgICogaXMgc2V0IHRvIHRoZSBtaW4gLyBtYXggdmFsIHJlc3BlY3RpdmVseS5cbiAgICogLSBhZGRpdGlvbmFsbHksIHRoZSBjdXJyZW50IGBzdGVwYCBpcyByZXNwZWN0ZWQsIHNvIHRoZSBuZWFyZXN0IHZhbHVlIHRoYXQgc2F0aXNmaWVzIGEgc3RlcFxuICAgKiBpcyB1c2VkLlxuICAgKlxuICAgKiBTZWUgdGhlIFtIVE1MIFNwZWMgb24gaW5wdXRbdHlwZT1yYW5nZV1dKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9mb3Jtcy5odG1sI3JhbmdlLXN0YXRlLSh0eXBlPXJhbmdlKSlcbiAgICogZm9yIG1vcmUgaW5mby5cbiAgICpcbiAgICogVGhpcyBoYXMgdGhlIGZvbGxvd2luZyBjb25zZXF1ZW5jZXMgZm9yIEFuZ3VsYXJKUzpcbiAgICpcbiAgICogU2luY2UgdGhlIGVsZW1lbnQgdmFsdWUgc2hvdWxkIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IG1vZGVsIHZhbHVlLCBhIHJhbmdlIGlucHV0XG4gICAqIHdpbGwgc2V0IHRoZSBib3VuZCBuZ01vZGVsIGV4cHJlc3Npb24gdG8gdGhlIHZhbHVlIHRoYXQgdGhlIGJyb3dzZXIgaGFzIHNldCBmb3IgdGhlXG4gICAqIGlucHV0IGVsZW1lbnQuIEZvciBleGFtcGxlLCBpbiB0aGUgZm9sbG93aW5nIGlucHV0IGA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbmctbW9kZWw9XCJtb2RlbC52YWx1ZVwiPmAsXG4gICAqIGlmIHRoZSBhcHBsaWNhdGlvbiBzZXRzIGBtb2RlbC52YWx1ZSA9IG51bGxgLCB0aGUgYnJvd3NlciB3aWxsIHNldCB0aGUgaW5wdXQgdG8gYCc1MCdgLlxuICAgKiBBbmd1bGFySlMgd2lsbCB0aGVuIHNldCB0aGUgbW9kZWwgdG8gYDUwYCwgdG8gcHJldmVudCBpbnB1dCBhbmQgbW9kZWwgdmFsdWUgYmVpbmcgb3V0IG9mIHN5bmMuXG4gICAqXG4gICAqIFRoYXQgbWVhbnMgdGhlIG1vZGVsIGZvciByYW5nZSB3aWxsIGltbWVkaWF0ZWx5IGJlIHNldCB0byBgNTBgIGFmdGVyIGBuZ01vZGVsYCBoYXMgYmVlblxuICAgKiBpbml0aWFsaXplZC4gSXQgYWxzbyBtZWFucyBhIHJhbmdlIGlucHV0IGNhbiBuZXZlciBoYXZlIHRoZSByZXF1aXJlZCBlcnJvci5cbiAgICpcbiAgICogVGhpcyBkb2VzIG5vdCBvbmx5IGFmZmVjdCBjaGFuZ2VzIHRvIHRoZSBtb2RlbCB2YWx1ZSwgYnV0IGFsc28gdG8gdGhlIHZhbHVlcyBvZiB0aGUgYG1pbmAsXG4gICAqIGBtYXhgLCBhbmQgYHN0ZXBgIGF0dHJpYnV0ZXMuIFdoZW4gdGhlc2UgY2hhbmdlIGluIGEgd2F5IHRoYXQgd2lsbCBjYXVzZSB0aGUgYnJvd3NlciB0byBtb2RpZnlcbiAgICogdGhlIGlucHV0IHZhbHVlLCBBbmd1bGFySlMgd2lsbCBhbHNvIHVwZGF0ZSB0aGUgbW9kZWwgdmFsdWUuXG4gICAqXG4gICAqIEF1dG9tYXRpYyB2YWx1ZSBhZGp1c3RtZW50IGFsc28gbWVhbnMgdGhhdCBhIHJhbmdlIGlucHV0IGVsZW1lbnQgY2FuIG5ldmVyIGhhdmUgdGhlIGByZXF1aXJlZGAsXG4gICAqIGBtaW5gLCBvciBgbWF4YCBlcnJvcnMuXG4gICAqXG4gICAqIEhvd2V2ZXIsIGBzdGVwYCBpcyBjdXJyZW50bHkgb25seSBmdWxseSBpbXBsZW1lbnRlZCBieSBGaXJlZm94LiBPdGhlciBicm93c2VycyBoYXZlIHByb2JsZW1zXG4gICAqIHdoZW4gdGhlIHN0ZXAgdmFsdWUgY2hhbmdlcyBkeW5hbWljYWxseSAtIHRoZXkgZG8gbm90IGFkanVzdCB0aGUgZWxlbWVudCB2YWx1ZSBjb3JyZWN0bHksIGJ1dFxuICAgKiBpbnN0ZWFkIG1heSBzZXQgdGhlIGBzdGVwTWlzbWF0Y2hgIGVycm9yLiBJZiB0aGF0J3MgdGhlIGNhc2UsIHRoZSBBbmd1bGFySlMgd2lsbCBzZXQgdGhlIGBzdGVwYFxuICAgKiBlcnJvciBvbiB0aGUgaW5wdXQsIGFuZCBzZXQgdGhlIG1vZGVsIHRvIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgYGlucHV0W3JhbmdlXWAgaXMgbm90IGNvbXBhdGlibGUgd2l0aGBuZ01heGAsIGBuZ01pbmAsIGFuZCBgbmdTdGVwYCwgYmVjYXVzZSB0aGV5IGRvXG4gICAqIG5vdCBzZXQgdGhlIGBtaW5gIGFuZCBgbWF4YCBhdHRyaWJ1dGVzLCB3aGljaCBtZWFucyB0aGF0IHRoZSBicm93c2VyIHdvbid0IGF1dG9tYXRpY2FsbHkgYWRqdXN0XG4gICAqIHRoZSBpbnB1dCB2YWx1ZSBiYXNlZCBvbiB0aGVpciB2YWx1ZXMsIGFuZCB3aWxsIGFsd2F5cyBhc3N1bWUgbWluID0gMCwgbWF4ID0gMTAwLCBhbmQgc3RlcCA9IDEuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgbmdNb2RlbCBBc3NpZ25hYmxlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIHRvIGVuc3VyZSB0aGF0IHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXJcbiAgICogICAgICAgICAgICAgICAgICB0aGFuIGBtaW5gLiBDYW4gYmUgaW50ZXJwb2xhdGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIHRvIGVuc3VyZSB0aGF0IHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWF4YC5cbiAgICogICAgICAgICAgICAgICAgICBDYW4gYmUgaW50ZXJwb2xhdGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHN0ZXAgU2V0cyB0aGUgYHN0ZXBgIHZhbGlkYXRpb24gdG8gZW5zdXJlIHRoYXQgdGhlIHZhbHVlIGVudGVyZWQgbWF0Y2hlcyB0aGUgYHN0ZXBgXG4gICAqICAgICAgICAgICAgICAgICAgQ2FuIGJlIGludGVycG9sYXRlZC5cbiAgICogQHBhcmFtIHtleHByZXNzaW9uPX0gbmdDaGFuZ2UgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiB0aGUgbmdNb2RlbCB2YWx1ZSBjaGFuZ2VzIGR1ZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICB0byB1c2VyIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nQ2hlY2tlZCBJZiB0aGUgZXhwcmVzc2lvbiBpcyB0cnV0aHksIHRoZW4gdGhlIGBjaGVja2VkYCBhdHRyaWJ1dGUgd2lsbCBiZSBzZXQgb24gdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuICoqTm90ZSoqIDogYG5nQ2hlY2tlZGAgc2hvdWxkIG5vdCBiZSB1c2VkIGFsb25nc2lkZSBgbmdNb2RlbGAuXG4gICAqICAgICAgICAgICAgICAgICAgICAgIENoZWNrb3V0IHtAbGluayBuZy5kaXJlY3RpdmU6bmdDaGVja2VkIG5nQ2hlY2tlZH0gZm9yIHVzYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgICAgPGV4YW1wbGUgbmFtZT1cInJhbmdlLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInJhbmdlRXhhbXBsZVwiPlxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgncmFuZ2VFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnZhbHVlID0gNzU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1pbiA9IDEwO1xuICAgICAgICAgICAgICAgICRzY29wZS5tYXggPSA5MDtcbiAgICAgICAgICAgICAgfV0pO1xuICAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cblxuICAgICAgICAgICAgTW9kZWwgYXMgcmFuZ2U6IDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBuYW1lPVwicmFuZ2VcIiBuZy1tb2RlbD1cInZhbHVlXCIgbWluPVwie3ttaW59fVwiICBtYXg9XCJ7e21heH19XCI+XG4gICAgICAgICAgICA8aHI+XG4gICAgICAgICAgICBNb2RlbCBhcyBudW1iZXI6IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJ2YWx1ZVwiPjxicj5cbiAgICAgICAgICAgIE1pbjogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1pblwiPjxicj5cbiAgICAgICAgICAgIE1heDogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1heFwiPjxicj5cbiAgICAgICAgICAgIHZhbHVlID0gPGNvZGU+e3t2YWx1ZX19PC9jb2RlPjxici8+XG4gICAgICAgICAgICBteUZvcm0ucmFuZ2UuJHZhbGlkID0gPGNvZGU+e3tteUZvcm0ucmFuZ2UuJHZhbGlkfX08L2NvZGU+PGJyLz5cbiAgICAgICAgICAgIG15Rm9ybS5yYW5nZS4kZXJyb3IgPSA8Y29kZT57e215Rm9ybS5yYW5nZS4kZXJyb3J9fTwvY29kZT5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cblxuICAgKiAjIyBSYW5nZSBJbnB1dCB3aXRoIG5nTWluICYgbmdNYXggYXR0cmlidXRlc1xuXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwicmFuZ2UtaW5wdXQtZGlyZWN0aXZlLW5nXCIgbW9kdWxlPVwicmFuZ2VFeGFtcGxlXCI+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICAgPHNjcmlwdD5cbiAgICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdyYW5nZUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmFsdWUgPSA3NTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubWluID0gMTA7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1heCA9IDkwO1xuICAgICAgICAgICAgICB9XSk7XG4gICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICAgTW9kZWwgYXMgcmFuZ2U6IDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBuYW1lPVwicmFuZ2VcIiBuZy1tb2RlbD1cInZhbHVlXCIgbmctbWluPVwibWluXCIgbmctbWF4PVwibWF4XCI+XG4gICAgICAgICAgICA8aHI+XG4gICAgICAgICAgICBNb2RlbCBhcyBudW1iZXI6IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJ2YWx1ZVwiPjxicj5cbiAgICAgICAgICAgIE1pbjogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1pblwiPjxicj5cbiAgICAgICAgICAgIE1heDogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm1heFwiPjxicj5cbiAgICAgICAgICAgIHZhbHVlID0gPGNvZGU+e3t2YWx1ZX19PC9jb2RlPjxici8+XG4gICAgICAgICAgICBteUZvcm0ucmFuZ2UuJHZhbGlkID0gPGNvZGU+e3tteUZvcm0ucmFuZ2UuJHZhbGlkfX08L2NvZGU+PGJyLz5cbiAgICAgICAgICAgIG15Rm9ybS5yYW5nZS4kZXJyb3IgPSA8Y29kZT57e215Rm9ybS5yYW5nZS4kZXJyb3J9fTwvY29kZT5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cblxuICAgKi9cbiAgJ3JhbmdlJzogcmFuZ2VJbnB1dFR5cGUsXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBpbnB1dFxuICAgKiBAbmFtZSBpbnB1dFtjaGVja2JveF1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEhUTUwgY2hlY2tib3guXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nVHJ1ZVZhbHVlIFRoZSB2YWx1ZSB0byB3aGljaCB0aGUgZXhwcmVzc2lvbiBzaG91bGQgYmUgc2V0IHdoZW4gc2VsZWN0ZWQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nRmFsc2VWYWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdGhlIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIG5vdCBzZWxlY3RlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJjaGVja2JveC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJjaGVja2JveEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjaGVja2JveEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrYm94TW9kZWwgPSB7XG4gICAgICAgICAgICAgICAgdmFsdWUxIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTIgOiAnWUVTJ1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICA8bGFiZWw+VmFsdWUxOlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrYm94TW9kZWwudmFsdWUxXCI+XG4gICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICAgPGxhYmVsPlZhbHVlMjpcbiAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2JveE1vZGVsLnZhbHVlMlwiXG4gICAgICAgICAgICAgICAgICAgIG5nLXRydWUtdmFsdWU9XCInWUVTJ1wiIG5nLWZhbHNlLXZhbHVlPVwiJ05PJ1wiPlxuICAgICAgICAgICAgPC9sYWJlbD48YnIvPlxuICAgICAgICAgICA8dHQ+dmFsdWUxID0ge3tjaGVja2JveE1vZGVsLnZhbHVlMX19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+dmFsdWUyID0ge3tjaGVja2JveE1vZGVsLnZhbHVlMn19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2Ugc3RhdGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZTEgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NoZWNrYm94TW9kZWwudmFsdWUxJykpO1xuICAgICAgICAgICAgdmFyIHZhbHVlMiA9IGVsZW1lbnQoYnkuYmluZGluZygnY2hlY2tib3hNb2RlbC52YWx1ZTInKSk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTEuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1lFUycpO1xuXG4gICAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2JveE1vZGVsLnZhbHVlMScpKS5jbGljaygpO1xuICAgICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tib3hNb2RlbC52YWx1ZTInKSkuY2xpY2soKTtcblxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMS5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ05PJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdjaGVja2JveCc6IGNoZWNrYm94SW5wdXRUeXBlLFxuXG4gICdoaWRkZW4nOiBub29wLFxuICAnYnV0dG9uJzogbm9vcCxcbiAgJ3N1Ym1pdCc6IG5vb3AsXG4gICdyZXNldCc6IG5vb3AsXG4gICdmaWxlJzogbm9vcFxufTtcblxuZnVuY3Rpb24gc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCkge1xuICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgPyB2YWx1ZSA6IHZhbHVlLnRvU3RyaW5nKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0ZXh0SW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcbiAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcbiAgc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCk7XG59XG5cbmZ1bmN0aW9uIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICB2YXIgdHlwZSA9IGxvd2VyY2FzZShlbGVtZW50WzBdLnR5cGUpO1xuXG4gIC8vIEluIGNvbXBvc2l0aW9uIG1vZGUsIHVzZXJzIGFyZSBzdGlsbCBpbnB1dHRpbmcgaW50ZXJtZWRpYXRlIHRleHQgYnVmZmVyLFxuICAvLyBob2xkIHRoZSBsaXN0ZW5lciB1bnRpbCBjb21wb3NpdGlvbiBpcyBkb25lLlxuICAvLyBNb3JlIGFib3V0IGNvbXBvc2l0aW9uIGV2ZW50czogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NvbXBvc2l0aW9uRXZlbnRcbiAgaWYgKCEkc25pZmZlci5hbmRyb2lkKSB7XG4gICAgdmFyIGNvbXBvc2luZyA9IGZhbHNlO1xuXG4gICAgZWxlbWVudC5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIC8vIFN1cHBvcnQ6IElFOStcbiAgICBlbGVtZW50Lm9uKCdjb21wb3NpdGlvbnVwZGF0ZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAvLyBFbmQgY29tcG9zaXRpb24gd2hlbiBldi5kYXRhIGlzIGVtcHR5IHN0cmluZyBvbiAnY29tcG9zaXRpb251cGRhdGUnIGV2ZW50LlxuICAgICAgLy8gV2hlbiB0aGUgaW5wdXQgZGUtZm9jdXNzZXMgKGUuZy4gYnkgY2xpY2tpbmcgYXdheSksIElFIHRyaWdnZXJzICdjb21wb3NpdGlvbnVwZGF0ZSdcbiAgICAgIC8vIGluc3RlYWQgb2YgJ2NvbXBvc2l0aW9uZW5kJy5cbiAgICAgIGlmIChpc1VuZGVmaW5lZChldi5kYXRhKSB8fCBldi5kYXRhID09PSAnJykge1xuICAgICAgICBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGVsZW1lbnQub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgIGxpc3RlbmVyKCk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgdGltZW91dDtcblxuICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAkYnJvd3Nlci5kZWZlci5jYW5jZWwodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGNvbXBvc2luZykgcmV0dXJuO1xuICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQudmFsKCksXG4gICAgICAgIGV2ZW50ID0gZXYgJiYgZXYudHlwZTtcblxuICAgIC8vIEJ5IGRlZmF1bHQgd2Ugd2lsbCB0cmltIHRoZSB2YWx1ZVxuICAgIC8vIElmIHRoZSBhdHRyaWJ1dGUgbmctdHJpbSBleGlzdHMgd2Ugd2lsbCBhdm9pZCB0cmltbWluZ1xuICAgIC8vIElmIGlucHV0IHR5cGUgaXMgJ3Bhc3N3b3JkJywgdGhlIHZhbHVlIGlzIG5ldmVyIHRyaW1tZWRcbiAgICBpZiAodHlwZSAhPT0gJ3Bhc3N3b3JkJyAmJiAoIWF0dHIubmdUcmltIHx8IGF0dHIubmdUcmltICE9PSAnZmFsc2UnKSkge1xuICAgICAgdmFsdWUgPSB0cmltKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBJZiBhIGNvbnRyb2wgaXMgc3VmZmVyaW5nIGZyb20gYmFkIGlucHV0IChkdWUgdG8gbmF0aXZlIHZhbGlkYXRvcnMpLCBicm93c2VycyBkaXNjYXJkIGl0c1xuICAgIC8vIHZhbHVlLCBzbyBpdCBtYXkgYmUgbmVjZXNzYXJ5IHRvIHJldmFsaWRhdGUgKGJ5IGNhbGxpbmcgJHNldFZpZXdWYWx1ZSBhZ2FpbikgZXZlbiBpZiB0aGVcbiAgICAvLyBjb250cm9sJ3MgdmFsdWUgaXMgdGhlIHNhbWUgZW1wdHkgdmFsdWUgdHdpY2UgaW4gYSByb3cuXG4gICAgaWYgKGN0cmwuJHZpZXdWYWx1ZSAhPT0gdmFsdWUgfHwgKHZhbHVlID09PSAnJyAmJiBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycykpIHtcbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZSh2YWx1ZSwgZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICAvLyBpZiB0aGUgYnJvd3NlciBkb2VzIHN1cHBvcnQgXCJpbnB1dFwiIGV2ZW50LCB3ZSBhcmUgZmluZSAtIGV4Y2VwdCBvbiBJRTkgd2hpY2ggZG9lc24ndCBmaXJlIHRoZVxuICAvLyBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UsIGRlbGV0ZSBvciBjdXRcbiAgaWYgKCRzbmlmZmVyLmhhc0V2ZW50KCdpbnB1dCcpKSB7XG4gICAgZWxlbWVudC5vbignaW5wdXQnLCBsaXN0ZW5lcik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRlZmVyTGlzdGVuZXIgPSBmdW5jdGlvbihldiwgaW5wdXQsIG9yaWdWYWx1ZSkge1xuICAgICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgIHRpbWVvdXQgPSAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICBpZiAoIWlucHV0IHx8IGlucHV0LnZhbHVlICE9PSBvcmlnVmFsdWUpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKGV2KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgLyoqIEB0aGlzICovIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIga2V5ID0gZXZlbnQua2V5Q29kZTtcblxuICAgICAgLy8gaWdub3JlXG4gICAgICAvLyAgICBjb21tYW5kICAgICAgICAgICAgbW9kaWZpZXJzICAgICAgICAgICAgICAgICAgIGFycm93c1xuICAgICAgaWYgKGtleSA9PT0gOTEgfHwgKDE1IDwga2V5ICYmIGtleSA8IDE5KSB8fCAoMzcgPD0ga2V5ICYmIGtleSA8PSA0MCkpIHJldHVybjtcblxuICAgICAgZGVmZXJMaXN0ZW5lcihldmVudCwgdGhpcywgdGhpcy52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICAvLyBpZiB1c2VyIG1vZGlmaWVzIGlucHV0IHZhbHVlIHVzaW5nIGNvbnRleHQgbWVudSBpbiBJRSwgd2UgbmVlZCBcInBhc3RlXCIsIFwiY3V0XCIgYW5kIFwiZHJvcFwiIGV2ZW50cyB0byBjYXRjaCBpdFxuICAgIGlmICgkc25pZmZlci5oYXNFdmVudCgncGFzdGUnKSkge1xuICAgICAgZWxlbWVudC5vbigncGFzdGUgY3V0IGRyb3AnLCBkZWZlckxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB1c2VyIHBhc3RlIGludG8gaW5wdXQgdXNpbmcgbW91c2Ugb24gb2xkZXIgYnJvd3NlclxuICAvLyBvciBmb3JtIGF1dG9jb21wbGV0ZSBvbiBuZXdlciBicm93c2VyLCB3ZSBuZWVkIFwiY2hhbmdlXCIgZXZlbnQgdG8gY2F0Y2ggaXRcbiAgZWxlbWVudC5vbignY2hhbmdlJywgbGlzdGVuZXIpO1xuXG4gIC8vIFNvbWUgbmF0aXZlIGlucHV0IHR5cGVzIChkYXRlLWZhbWlseSkgaGF2ZSB0aGUgYWJpbGl0eSB0byBjaGFuZ2UgdmFsaWRpdHkgd2l0aG91dFxuICAvLyBmaXJpbmcgYW55IGlucHV0L2NoYW5nZSBldmVudHMuXG4gIC8vIEZvciB0aGVzZSBldmVudCB0eXBlcywgd2hlbiBuYXRpdmUgdmFsaWRhdG9ycyBhcmUgcHJlc2VudCBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIHR5cGUsXG4gIC8vIGNoZWNrIGZvciB2YWxpZGl0eSBjaGFuZ2VzIG9uIHZhcmlvdXMgRE9NIGV2ZW50cy5cbiAgaWYgKFBBUlRJQUxfVkFMSURBVElPTl9UWVBFU1t0eXBlXSAmJiBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycyAmJiB0eXBlID09PSBhdHRyLnR5cGUpIHtcbiAgICBlbGVtZW50Lm9uKFBBUlRJQUxfVkFMSURBVElPTl9FVkVOVFMsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbihldikge1xuICAgICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgIHZhciB2YWxpZGl0eSA9IHRoaXNbVkFMSURJVFlfU1RBVEVfUFJPUEVSVFldO1xuICAgICAgICB2YXIgb3JpZ0JhZElucHV0ID0gdmFsaWRpdHkuYmFkSW5wdXQ7XG4gICAgICAgIHZhciBvcmlnVHlwZU1pc21hdGNoID0gdmFsaWRpdHkudHlwZU1pc21hdGNoO1xuICAgICAgICB0aW1lb3V0ID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgaWYgKHZhbGlkaXR5LmJhZElucHV0ICE9PSBvcmlnQmFkSW5wdXQgfHwgdmFsaWRpdHkudHlwZU1pc21hdGNoICE9PSBvcmlnVHlwZU1pc21hdGNoKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihldik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFdvcmthcm91bmQgZm9yIEZpcmVmb3ggdmFsaWRhdGlvbiAjMTIxMDIuXG4gICAgdmFyIHZhbHVlID0gY3RybC4kaXNFbXB0eShjdHJsLiR2aWV3VmFsdWUpID8gJycgOiBjdHJsLiR2aWV3VmFsdWU7XG4gICAgaWYgKGVsZW1lbnQudmFsKCkgIT09IHZhbHVlKSB7XG4gICAgICBlbGVtZW50LnZhbCh2YWx1ZSk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiB3ZWVrUGFyc2VyKGlzb1dlZWssIGV4aXN0aW5nRGF0ZSkge1xuICBpZiAoaXNEYXRlKGlzb1dlZWspKSB7XG4gICAgcmV0dXJuIGlzb1dlZWs7XG4gIH1cblxuICBpZiAoaXNTdHJpbmcoaXNvV2VlaykpIHtcbiAgICBXRUVLX1JFR0VYUC5sYXN0SW5kZXggPSAwO1xuICAgIHZhciBwYXJ0cyA9IFdFRUtfUkVHRVhQLmV4ZWMoaXNvV2Vlayk7XG4gICAgaWYgKHBhcnRzKSB7XG4gICAgICB2YXIgeWVhciA9ICtwYXJ0c1sxXSxcbiAgICAgICAgICB3ZWVrID0gK3BhcnRzWzJdLFxuICAgICAgICAgIGhvdXJzID0gMCxcbiAgICAgICAgICBtaW51dGVzID0gMCxcbiAgICAgICAgICBzZWNvbmRzID0gMCxcbiAgICAgICAgICBtaWxsaXNlY29uZHMgPSAwLFxuICAgICAgICAgIGZpcnN0VGh1cnMgPSBnZXRGaXJzdFRodXJzZGF5T2ZZZWFyKHllYXIpLFxuICAgICAgICAgIGFkZERheXMgPSAod2VlayAtIDEpICogNztcblxuICAgICAgaWYgKGV4aXN0aW5nRGF0ZSkge1xuICAgICAgICBob3VycyA9IGV4aXN0aW5nRGF0ZS5nZXRIb3VycygpO1xuICAgICAgICBtaW51dGVzID0gZXhpc3RpbmdEYXRlLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgc2Vjb25kcyA9IGV4aXN0aW5nRGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgICAgIG1pbGxpc2Vjb25kcyA9IGV4aXN0aW5nRGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIDAsIGZpcnN0VGh1cnMuZ2V0RGF0ZSgpICsgYWRkRGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG1pbGxpc2Vjb25kcyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIE5hTjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGF0ZVBhcnNlcihyZWdleHAsIG1hcHBpbmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGlzbywgcHJldmlvdXNEYXRlKSB7XG4gICAgdmFyIHBhcnRzLCBtYXA7XG5cbiAgICBpZiAoaXNEYXRlKGlzbykpIHtcbiAgICAgIHJldHVybiBpc287XG4gICAgfVxuXG4gICAgaWYgKGlzU3RyaW5nKGlzbykpIHtcbiAgICAgIC8vIFdoZW4gYSBkYXRlIGlzIEpTT04naWZpZWQgdG8gd3JhcHMgaXRzZWxmIGluc2lkZSBvZiBhbiBleHRyYVxuICAgICAgLy8gc2V0IG9mIGRvdWJsZSBxdW90ZXMuIFRoaXMgbWFrZXMgdGhlIGRhdGUgcGFyc2luZyBjb2RlIHVuYWJsZVxuICAgICAgLy8gdG8gbWF0Y2ggdGhlIGRhdGUgc3RyaW5nIGFuZCBwYXJzZSBpdCBhcyBhIGRhdGUuXG4gICAgICBpZiAoaXNvLmNoYXJBdCgwKSA9PT0gJ1wiJyAmJiBpc28uY2hhckF0KGlzby5sZW5ndGggLSAxKSA9PT0gJ1wiJykge1xuICAgICAgICBpc28gPSBpc28uc3Vic3RyaW5nKDEsIGlzby5sZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChJU09fREFURV9SRUdFWFAudGVzdChpc28pKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShpc28pO1xuICAgICAgfVxuICAgICAgcmVnZXhwLmxhc3RJbmRleCA9IDA7XG4gICAgICBwYXJ0cyA9IHJlZ2V4cC5leGVjKGlzbyk7XG5cbiAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICBpZiAocHJldmlvdXNEYXRlKSB7XG4gICAgICAgICAgbWFwID0ge1xuICAgICAgICAgICAgeXl5eTogcHJldmlvdXNEYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgICBNTTogcHJldmlvdXNEYXRlLmdldE1vbnRoKCkgKyAxLFxuICAgICAgICAgICAgZGQ6IHByZXZpb3VzRGF0ZS5nZXREYXRlKCksXG4gICAgICAgICAgICBISDogcHJldmlvdXNEYXRlLmdldEhvdXJzKCksXG4gICAgICAgICAgICBtbTogcHJldmlvdXNEYXRlLmdldE1pbnV0ZXMoKSxcbiAgICAgICAgICAgIHNzOiBwcmV2aW91c0RhdGUuZ2V0U2Vjb25kcygpLFxuICAgICAgICAgICAgc3NzOiBwcmV2aW91c0RhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLyAxMDAwXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXAgPSB7IHl5eXk6IDE5NzAsIE1NOiAxLCBkZDogMSwgSEg6IDAsIG1tOiAwLCBzczogMCwgc3NzOiAwIH07XG4gICAgICAgIH1cblxuICAgICAgICBmb3JFYWNoKHBhcnRzLCBmdW5jdGlvbihwYXJ0LCBpbmRleCkge1xuICAgICAgICAgIGlmIChpbmRleCA8IG1hcHBpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICBtYXBbbWFwcGluZ1tpbmRleF1dID0gK3BhcnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKG1hcC55eXl5LCBtYXAuTU0gLSAxLCBtYXAuZGQsIG1hcC5ISCwgbWFwLm1tLCBtYXAuc3MgfHwgMCwgbWFwLnNzcyAqIDEwMDAgfHwgMCk7XG4gICAgICAgIGlmIChtYXAueXl5eSA8IDEwMCkge1xuICAgICAgICAgIC8vIEluIHRoZSBjb25zdHJ1Y3RvciwgMi1kaWdpdCB5ZWFycyBtYXAgdG8gMTkwMC0xOTk5LlxuICAgICAgICAgIC8vIFVzZSBgc2V0RnVsbFllYXIoKWAgdG8gc2V0IHRoZSBjb3JyZWN0IHllYXIuXG4gICAgICAgICAgZGF0ZS5zZXRGdWxsWWVhcihtYXAueXl5eSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gTmFOO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEYXRlSW5wdXRUeXBlKHR5cGUsIHJlZ2V4cCwgcGFyc2VEYXRlLCBmb3JtYXQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGR5bmFtaWNEYXRlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIsICRmaWx0ZXIpIHtcbiAgICBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsIHR5cGUpO1xuICAgIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG4gICAgdmFyIHByZXZpb3VzRGF0ZTtcbiAgICB2YXIgcHJldmlvdXNUaW1lem9uZTtcblxuICAgIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKGN0cmwuJGlzRW1wdHkodmFsdWUpKSByZXR1cm4gbnVsbDtcblxuICAgICAgaWYgKHJlZ2V4cC50ZXN0KHZhbHVlKSkge1xuICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgcmVhZCBjdHJsLiRtb2RlbFZhbHVlLCBhcyB0aGVyZSBtaWdodCBiZSBhIGRpZmZlcmVudFxuICAgICAgICAvLyBwYXJzZXIvZm9ybWF0dGVyIGluIHRoZSBwcm9jZXNzaW5nIGNoYWluIHNvIHRoYXQgdGhlIG1vZGVsXG4gICAgICAgIC8vIGNvbnRhaW5zIHNvbWUgZGlmZmVyZW50IGRhdGEgZm9ybWF0IVxuICAgICAgICByZXR1cm4gcGFyc2VEYXRlQW5kQ29udmVydFRpbWVab25lVG9Mb2NhbCh2YWx1ZSwgcHJldmlvdXNEYXRlKTtcbiAgICAgIH1cbiAgICAgIGN0cmwuJCRwYXJzZXJOYW1lID0gdHlwZTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSk7XG5cbiAgICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSAmJiAhaXNEYXRlKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZ01vZGVsTWluRXJyKCdkYXRlZm10JywgJ0V4cGVjdGVkIGB7MH1gIHRvIGJlIGEgZGF0ZScsIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1ZhbGlkRGF0ZSh2YWx1ZSkpIHtcbiAgICAgICAgcHJldmlvdXNEYXRlID0gdmFsdWU7XG4gICAgICAgIHZhciB0aW1lem9uZSA9IGN0cmwuJG9wdGlvbnMuZ2V0T3B0aW9uKCd0aW1lem9uZScpO1xuICAgICAgICBpZiAodGltZXpvbmUpIHtcbiAgICAgICAgICBwcmV2aW91c1RpbWV6b25lID0gdGltZXpvbmU7XG4gICAgICAgICAgcHJldmlvdXNEYXRlID0gY29udmVydFRpbWV6b25lVG9Mb2NhbChwcmV2aW91c0RhdGUsIHRpbWV6b25lLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJGZpbHRlcignZGF0ZScpKHZhbHVlLCBmb3JtYXQsIHRpbWV6b25lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXZpb3VzRGF0ZSA9IG51bGw7XG4gICAgICAgIHByZXZpb3VzVGltZXpvbmUgPSBudWxsO1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoaXNEZWZpbmVkKGF0dHIubWluKSB8fCBhdHRyLm5nTWluKSB7XG4gICAgICB2YXIgbWluVmFsO1xuICAgICAgY3RybC4kdmFsaWRhdG9ycy5taW4gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gIWlzVmFsaWREYXRlKHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtaW5WYWwpIHx8IHBhcnNlRGF0ZSh2YWx1ZSkgPj0gbWluVmFsO1xuICAgICAgfTtcbiAgICAgIGF0dHIuJG9ic2VydmUoJ21pbicsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBtaW5WYWwgPSBwYXJzZU9ic2VydmVkRGF0ZVZhbHVlKHZhbCk7XG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoaXNEZWZpbmVkKGF0dHIubWF4KSB8fCBhdHRyLm5nTWF4KSB7XG4gICAgICB2YXIgbWF4VmFsO1xuICAgICAgY3RybC4kdmFsaWRhdG9ycy5tYXggPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gIWlzVmFsaWREYXRlKHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtYXhWYWwpIHx8IHBhcnNlRGF0ZSh2YWx1ZSkgPD0gbWF4VmFsO1xuICAgICAgfTtcbiAgICAgIGF0dHIuJG9ic2VydmUoJ21heCcsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBtYXhWYWwgPSBwYXJzZU9ic2VydmVkRGF0ZVZhbHVlKHZhbCk7XG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1ZhbGlkRGF0ZSh2YWx1ZSkge1xuICAgICAgLy8gSW52YWxpZCBEYXRlOiBnZXRUaW1lKCkgcmV0dXJucyBOYU5cbiAgICAgIHJldHVybiB2YWx1ZSAmJiAhKHZhbHVlLmdldFRpbWUgJiYgdmFsdWUuZ2V0VGltZSgpICE9PSB2YWx1ZS5nZXRUaW1lKCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKSB7XG4gICAgICByZXR1cm4gaXNEZWZpbmVkKHZhbCkgJiYgIWlzRGF0ZSh2YWwpID8gcGFyc2VEYXRlQW5kQ29udmVydFRpbWVab25lVG9Mb2NhbCh2YWwpIHx8IHVuZGVmaW5lZCA6IHZhbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZURhdGVBbmRDb252ZXJ0VGltZVpvbmVUb0xvY2FsKHZhbHVlLCBwcmV2aW91c0RhdGUpIHtcbiAgICAgIHZhciB0aW1lem9uZSA9IGN0cmwuJG9wdGlvbnMuZ2V0T3B0aW9uKCd0aW1lem9uZScpO1xuXG4gICAgICBpZiAocHJldmlvdXNUaW1lem9uZSAmJiBwcmV2aW91c1RpbWV6b25lICE9PSB0aW1lem9uZSkge1xuICAgICAgICAvLyBJZiB0aGUgdGltZXpvbmUgaGFzIGNoYW5nZWQsIGFkanVzdCB0aGUgcHJldmlvdXNEYXRlIHRvIHRoZSBkZWZhdWx0IHRpbWV6b25lXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIG5ldyBkYXRlIGlzIGNvbnZlcnRlZCB3aXRoIHRoZSBjb3JyZWN0IHRpbWV6b25lIG9mZnNldFxuICAgICAgICBwcmV2aW91c0RhdGUgPSBhZGREYXRlTWludXRlcyhwcmV2aW91c0RhdGUsIHRpbWV6b25lVG9PZmZzZXQocHJldmlvdXNUaW1lem9uZSkpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGFyc2VkRGF0ZSA9IHBhcnNlRGF0ZSh2YWx1ZSwgcHJldmlvdXNEYXRlKTtcblxuICAgICAgaWYgKCFpc05hTihwYXJzZWREYXRlKSAmJiB0aW1lem9uZSkge1xuICAgICAgICBwYXJzZWREYXRlID0gY29udmVydFRpbWV6b25lVG9Mb2NhbChwYXJzZWREYXRlLCB0aW1lem9uZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyc2VkRGF0ZTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGJhZElucHV0Q2hlY2tlcihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgcGFyc2VyTmFtZSkge1xuICB2YXIgbm9kZSA9IGVsZW1lbnRbMF07XG4gIHZhciBuYXRpdmVWYWxpZGF0aW9uID0gY3RybC4kJGhhc05hdGl2ZVZhbGlkYXRvcnMgPSBpc09iamVjdChub2RlLnZhbGlkaXR5KTtcbiAgaWYgKG5hdGl2ZVZhbGlkYXRpb24pIHtcbiAgICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciB2YWxpZGl0eSA9IGVsZW1lbnQucHJvcChWQUxJRElUWV9TVEFURV9QUk9QRVJUWSkgfHwge307XG4gICAgICBpZiAodmFsaWRpdHkuYmFkSW5wdXQgfHwgdmFsaWRpdHkudHlwZU1pc21hdGNoKSB7XG4gICAgICAgIGN0cmwuJCRwYXJzZXJOYW1lID0gcGFyc2VyTmFtZTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIG51bWJlckZvcm1hdHRlclBhcnNlcihjdHJsKSB7XG4gIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChjdHJsLiRpc0VtcHR5KHZhbHVlKSkgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoTlVNQkVSX1JFR0VYUC50ZXN0KHZhbHVlKSkgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuXG4gICAgY3RybC4kJHBhcnNlck5hbWUgPSAnbnVtYmVyJztcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9KTtcblxuICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoIWN0cmwuJGlzRW1wdHkodmFsdWUpKSB7XG4gICAgICBpZiAoIWlzTnVtYmVyKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZ01vZGVsTWluRXJyKCdudW1mbXQnLCAnRXhwZWN0ZWQgYHswfWAgdG8gYmUgYSBudW1iZXInLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTnVtYmVyQXR0clZhbCh2YWwpIHtcbiAgaWYgKGlzRGVmaW5lZCh2YWwpICYmICFpc051bWJlcih2YWwpKSB7XG4gICAgdmFsID0gcGFyc2VGbG9hdCh2YWwpO1xuICB9XG4gIHJldHVybiAhaXNOdW1iZXJOYU4odmFsKSA/IHZhbCA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXJJbnRlZ2VyKG51bSkge1xuICAvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNDYzNjUzNi9ob3ctdG8tY2hlY2staWYtYS12YXJpYWJsZS1pcy1hbi1pbnRlZ2VyLWluLWphdmFzY3JpcHQjMTQ3OTQwNjZcbiAgLy8gKG1pbnVzIHRoZSBhc3N1bXB0aW9uIHRoYXQgYG51bWAgaXMgYSBudW1iZXIpXG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgcmV0dXJuIChudW0gfCAwKSA9PT0gbnVtO1xufVxuXG5mdW5jdGlvbiBjb3VudERlY2ltYWxzKG51bSkge1xuICB2YXIgbnVtU3RyaW5nID0gbnVtLnRvU3RyaW5nKCk7XG4gIHZhciBkZWNpbWFsU3ltYm9sSW5kZXggPSBudW1TdHJpbmcuaW5kZXhPZignLicpO1xuXG4gIGlmIChkZWNpbWFsU3ltYm9sSW5kZXggPT09IC0xKSB7XG4gICAgaWYgKC0xIDwgbnVtICYmIG51bSA8IDEpIHtcbiAgICAgIC8vIEl0IG1heSBiZSBpbiB0aGUgZXhwb25lbnRpYWwgbm90YXRpb24gZm9ybWF0IChgMWUtWGApXG4gICAgICB2YXIgbWF0Y2ggPSAvZS0oXFxkKykkLy5leGVjKG51bVN0cmluZyk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKG1hdGNoWzFdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHJldHVybiBudW1TdHJpbmcubGVuZ3RoIC0gZGVjaW1hbFN5bWJvbEluZGV4IC0gMTtcbn1cblxuZnVuY3Rpb24gaXNWYWxpZEZvclN0ZXAodmlld1ZhbHVlLCBzdGVwQmFzZSwgc3RlcCkge1xuICAvLyBBdCB0aGlzIHBvaW50IGBzdGVwQmFzZWAgYW5kIGBzdGVwYCBhcmUgZXhwZWN0ZWQgdG8gYmUgbm9uLU5hTiB2YWx1ZXNcbiAgLy8gYW5kIGB2aWV3VmFsdWVgIGlzIGV4cGVjdGVkIHRvIGJlIGEgdmFsaWQgc3RyaW5naWZpZWQgbnVtYmVyLlxuICB2YXIgdmFsdWUgPSBOdW1iZXIodmlld1ZhbHVlKTtcblxuICB2YXIgaXNOb25JbnRlZ2VyVmFsdWUgPSAhaXNOdW1iZXJJbnRlZ2VyKHZhbHVlKTtcbiAgdmFyIGlzTm9uSW50ZWdlclN0ZXBCYXNlID0gIWlzTnVtYmVySW50ZWdlcihzdGVwQmFzZSk7XG4gIHZhciBpc05vbkludGVnZXJTdGVwID0gIWlzTnVtYmVySW50ZWdlcihzdGVwKTtcblxuICAvLyBEdWUgdG8gbGltaXRhdGlvbnMgaW4gRmxvYXRpbmcgUG9pbnQgQXJpdGhtZXRpYyAoZS5nLiBgMC4zIC0gMC4yICE9PSAwLjFgIG9yXG4gIC8vIGAwLjUgJSAwLjEgIT09IDBgKSwgd2UgbmVlZCB0byBjb252ZXJ0IGFsbCBudW1iZXJzIHRvIGludGVnZXJzLlxuICBpZiAoaXNOb25JbnRlZ2VyVmFsdWUgfHwgaXNOb25JbnRlZ2VyU3RlcEJhc2UgfHwgaXNOb25JbnRlZ2VyU3RlcCkge1xuICAgIHZhciB2YWx1ZURlY2ltYWxzID0gaXNOb25JbnRlZ2VyVmFsdWUgPyBjb3VudERlY2ltYWxzKHZhbHVlKSA6IDA7XG4gICAgdmFyIHN0ZXBCYXNlRGVjaW1hbHMgPSBpc05vbkludGVnZXJTdGVwQmFzZSA/IGNvdW50RGVjaW1hbHMoc3RlcEJhc2UpIDogMDtcbiAgICB2YXIgc3RlcERlY2ltYWxzID0gaXNOb25JbnRlZ2VyU3RlcCA/IGNvdW50RGVjaW1hbHMoc3RlcCkgOiAwO1xuXG4gICAgdmFyIGRlY2ltYWxDb3VudCA9IE1hdGgubWF4KHZhbHVlRGVjaW1hbHMsIHN0ZXBCYXNlRGVjaW1hbHMsIHN0ZXBEZWNpbWFscyk7XG4gICAgdmFyIG11bHRpcGxpZXIgPSBNYXRoLnBvdygxMCwgZGVjaW1hbENvdW50KTtcblxuICAgIHZhbHVlID0gdmFsdWUgKiBtdWx0aXBsaWVyO1xuICAgIHN0ZXBCYXNlID0gc3RlcEJhc2UgKiBtdWx0aXBsaWVyO1xuICAgIHN0ZXAgPSBzdGVwICogbXVsdGlwbGllcjtcblxuICAgIGlmIChpc05vbkludGVnZXJWYWx1ZSkgdmFsdWUgPSBNYXRoLnJvdW5kKHZhbHVlKTtcbiAgICBpZiAoaXNOb25JbnRlZ2VyU3RlcEJhc2UpIHN0ZXBCYXNlID0gTWF0aC5yb3VuZChzdGVwQmFzZSk7XG4gICAgaWYgKGlzTm9uSW50ZWdlclN0ZXApIHN0ZXAgPSBNYXRoLnJvdW5kKHN0ZXApO1xuICB9XG5cbiAgcmV0dXJuICh2YWx1ZSAtIHN0ZXBCYXNlKSAlIHN0ZXAgPT09IDA7XG59XG5cbmZ1bmN0aW9uIG51bWJlcklucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XG4gIGJhZElucHV0Q2hlY2tlcihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJ251bWJlcicpO1xuICBudW1iZXJGb3JtYXR0ZXJQYXJzZXIoY3RybCk7XG4gIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG5cbiAgdmFyIG1pblZhbDtcbiAgdmFyIG1heFZhbDtcblxuICBpZiAoaXNEZWZpbmVkKGF0dHIubWluKSB8fCBhdHRyLm5nTWluKSB7XG4gICAgY3RybC4kdmFsaWRhdG9ycy5taW4gPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgaXNVbmRlZmluZWQobWluVmFsKSB8fCB2aWV3VmFsdWUgPj0gbWluVmFsO1xuICAgIH07XG5cbiAgICBhdHRyLiRvYnNlcnZlKCdtaW4nLCBmdW5jdGlvbih2YWwpIHtcbiAgICAgIG1pblZhbCA9IHBhcnNlTnVtYmVyQXR0clZhbCh2YWwpO1xuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXG4gICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGlzRGVmaW5lZChhdHRyLm1heCkgfHwgYXR0ci5uZ01heCkge1xuICAgIGN0cmwuJHZhbGlkYXRvcnMubWF4ID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2aWV3VmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1heFZhbCkgfHwgdmlld1ZhbHVlIDw9IG1heFZhbDtcbiAgICB9O1xuXG4gICAgYXR0ci4kb2JzZXJ2ZSgnbWF4JywgZnVuY3Rpb24odmFsKSB7XG4gICAgICBtYXhWYWwgPSBwYXJzZU51bWJlckF0dHJWYWwodmFsKTtcbiAgICAgIC8vIFRPRE8obWF0c2tvKTogaW1wbGVtZW50IHZhbGlkYXRlTGF0ZXIgdG8gcmVkdWNlIG51bWJlciBvZiB2YWxpZGF0aW9uc1xuICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChpc0RlZmluZWQoYXR0ci5zdGVwKSB8fCBhdHRyLm5nU3RlcCkge1xuICAgIHZhciBzdGVwVmFsO1xuICAgIGN0cmwuJHZhbGlkYXRvcnMuc3RlcCA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmlld1ZhbHVlKSB8fCBpc1VuZGVmaW5lZChzdGVwVmFsKSB8fFxuICAgICAgICAgICAgIGlzVmFsaWRGb3JTdGVwKHZpZXdWYWx1ZSwgbWluVmFsIHx8IDAsIHN0ZXBWYWwpO1xuICAgIH07XG5cbiAgICBhdHRyLiRvYnNlcnZlKCdzdGVwJywgZnVuY3Rpb24odmFsKSB7XG4gICAgICBzdGVwVmFsID0gcGFyc2VOdW1iZXJBdHRyVmFsKHZhbCk7XG4gICAgICAvLyBUT0RPKG1hdHNrbyk6IGltcGxlbWVudCB2YWxpZGF0ZUxhdGVyIHRvIHJlZHVjZSBudW1iZXIgb2YgdmFsaWRhdGlvbnNcbiAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmFuZ2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICdyYW5nZScpO1xuICBudW1iZXJGb3JtYXR0ZXJQYXJzZXIoY3RybCk7XG4gIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG5cbiAgdmFyIHN1cHBvcnRzUmFuZ2UgPSBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycyAmJiBlbGVtZW50WzBdLnR5cGUgPT09ICdyYW5nZScsXG4gICAgICBtaW5WYWwgPSBzdXBwb3J0c1JhbmdlID8gMCA6IHVuZGVmaW5lZCxcbiAgICAgIG1heFZhbCA9IHN1cHBvcnRzUmFuZ2UgPyAxMDAgOiB1bmRlZmluZWQsXG4gICAgICBzdGVwVmFsID0gc3VwcG9ydHNSYW5nZSA/IDEgOiB1bmRlZmluZWQsXG4gICAgICB2YWxpZGl0eSA9IGVsZW1lbnRbMF0udmFsaWRpdHksXG4gICAgICBoYXNNaW5BdHRyID0gaXNEZWZpbmVkKGF0dHIubWluKSxcbiAgICAgIGhhc01heEF0dHIgPSBpc0RlZmluZWQoYXR0ci5tYXgpLFxuICAgICAgaGFzU3RlcEF0dHIgPSBpc0RlZmluZWQoYXR0ci5zdGVwKTtcblxuICB2YXIgb3JpZ2luYWxSZW5kZXIgPSBjdHJsLiRyZW5kZXI7XG5cbiAgY3RybC4kcmVuZGVyID0gc3VwcG9ydHNSYW5nZSAmJiBpc0RlZmluZWQodmFsaWRpdHkucmFuZ2VVbmRlcmZsb3cpICYmIGlzRGVmaW5lZCh2YWxpZGl0eS5yYW5nZU92ZXJmbG93KSA/XG4gICAgLy9Ccm93c2VycyB0aGF0IGltcGxlbWVudCByYW5nZSB3aWxsIHNldCB0aGVzZSB2YWx1ZXMgYXV0b21hdGljYWxseSwgYnV0IHJlYWRpbmcgdGhlIGFkanVzdGVkIHZhbHVlcyBhZnRlclxuICAgIC8vJHJlbmRlciB3b3VsZCBjYXVzZSB0aGUgbWluIC8gbWF4IHZhbGlkYXRvcnMgdG8gYmUgYXBwbGllZCB3aXRoIHRoZSB3cm9uZyB2YWx1ZVxuICAgIGZ1bmN0aW9uIHJhbmdlUmVuZGVyKCkge1xuICAgICAgb3JpZ2luYWxSZW5kZXIoKTtcbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZShlbGVtZW50LnZhbCgpKTtcbiAgICB9IDpcbiAgICBvcmlnaW5hbFJlbmRlcjtcblxuICBpZiAoaGFzTWluQXR0cikge1xuICAgIGN0cmwuJHZhbGlkYXRvcnMubWluID0gc3VwcG9ydHNSYW5nZSA/XG4gICAgICAvLyBTaW5jZSBhbGwgYnJvd3NlcnMgc2V0IHRoZSBpbnB1dCB0byBhIHZhbGlkIHZhbHVlLCB3ZSBkb24ndCBuZWVkIHRvIGNoZWNrIHZhbGlkaXR5XG4gICAgICBmdW5jdGlvbiBub29wTWluVmFsaWRhdG9yKCkgeyByZXR1cm4gdHJ1ZTsgfSA6XG4gICAgICAvLyBub24tc3VwcG9ydCBicm93c2VycyB2YWxpZGF0ZSB0aGUgbWluIHZhbFxuICAgICAgZnVuY3Rpb24gbWluVmFsaWRhdG9yKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2aWV3VmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1pblZhbCkgfHwgdmlld1ZhbHVlID49IG1pblZhbDtcbiAgICAgIH07XG5cbiAgICBzZXRJbml0aWFsVmFsdWVBbmRPYnNlcnZlcignbWluJywgbWluQ2hhbmdlKTtcbiAgfVxuXG4gIGlmIChoYXNNYXhBdHRyKSB7XG4gICAgY3RybC4kdmFsaWRhdG9ycy5tYXggPSBzdXBwb3J0c1JhbmdlID9cbiAgICAgIC8vIFNpbmNlIGFsbCBicm93c2VycyBzZXQgdGhlIGlucHV0IHRvIGEgdmFsaWQgdmFsdWUsIHdlIGRvbid0IG5lZWQgdG8gY2hlY2sgdmFsaWRpdHlcbiAgICAgIGZ1bmN0aW9uIG5vb3BNYXhWYWxpZGF0b3IoKSB7IHJldHVybiB0cnVlOyB9IDpcbiAgICAgIC8vIG5vbi1zdXBwb3J0IGJyb3dzZXJzIHZhbGlkYXRlIHRoZSBtYXggdmFsXG4gICAgICBmdW5jdGlvbiBtYXhWYWxpZGF0b3IobW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgaXNVbmRlZmluZWQobWF4VmFsKSB8fCB2aWV3VmFsdWUgPD0gbWF4VmFsO1xuICAgICAgfTtcblxuICAgIHNldEluaXRpYWxWYWx1ZUFuZE9ic2VydmVyKCdtYXgnLCBtYXhDaGFuZ2UpO1xuICB9XG5cbiAgaWYgKGhhc1N0ZXBBdHRyKSB7XG4gICAgY3RybC4kdmFsaWRhdG9ycy5zdGVwID0gc3VwcG9ydHNSYW5nZSA/XG4gICAgICBmdW5jdGlvbiBuYXRpdmVTdGVwVmFsaWRhdG9yKCkge1xuICAgICAgICAvLyBDdXJyZW50bHksIG9ubHkgRkYgaW1wbGVtZW50cyB0aGUgc3BlYyBvbiBzdGVwIGNoYW5nZSBjb3JyZWN0bHkgKGkuZS4gYWRqdXN0aW5nIHRoZVxuICAgICAgICAvLyBpbnB1dCBlbGVtZW50IHZhbHVlIHRvIGEgdmFsaWQgdmFsdWUpLiBJdCdzIHBvc3NpYmxlIHRoYXQgb3RoZXIgYnJvd3NlcnMgc2V0IHRoZSBzdGVwTWlzbWF0Y2hcbiAgICAgICAgLy8gdmFsaWRpdHkgZXJyb3IgaW5zdGVhZCwgc28gd2UgY2FuIGF0IGxlYXN0IHJlcG9ydCBhbiBlcnJvciBpbiB0aGF0IGNhc2UuXG4gICAgICAgIHJldHVybiAhdmFsaWRpdHkuc3RlcE1pc21hdGNoO1xuICAgICAgfSA6XG4gICAgICAvLyBuZ1N0ZXAgZG9lc24ndCBzZXQgdGhlIHNldHAgYXR0ciwgc28gdGhlIGJyb3dzZXIgZG9lc24ndCBhZGp1c3QgdGhlIGlucHV0IHZhbHVlIGFzIHNldHRpbmcgc3RlcCB3b3VsZFxuICAgICAgZnVuY3Rpb24gc3RlcFZhbGlkYXRvcihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmlld1ZhbHVlKSB8fCBpc1VuZGVmaW5lZChzdGVwVmFsKSB8fFxuICAgICAgICAgICAgICAgaXNWYWxpZEZvclN0ZXAodmlld1ZhbHVlLCBtaW5WYWwgfHwgMCwgc3RlcFZhbCk7XG4gICAgICB9O1xuXG4gICAgc2V0SW5pdGlhbFZhbHVlQW5kT2JzZXJ2ZXIoJ3N0ZXAnLCBzdGVwQ2hhbmdlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEluaXRpYWxWYWx1ZUFuZE9ic2VydmVyKGh0bWxBdHRyTmFtZSwgY2hhbmdlRm4pIHtcbiAgICAvLyBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlcyBzZXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBvbmx5IGFmdGVyIGEgZGlnZXN0LCBidXQgd2UgbmVlZCB0aGVcbiAgICAvLyBhdHRyaWJ1dGUgdmFsdWUgd2hlbiB0aGUgaW5wdXQgaXMgZmlyc3QgcmVuZGVyZWQsIHNvIHRoYXQgdGhlIGJyb3dzZXIgY2FuIGFkanVzdCB0aGVcbiAgICAvLyBpbnB1dCB2YWx1ZSBiYXNlZCBvbiB0aGUgbWluL21heCB2YWx1ZVxuICAgIGVsZW1lbnQuYXR0cihodG1sQXR0ck5hbWUsIGF0dHJbaHRtbEF0dHJOYW1lXSk7XG4gICAgYXR0ci4kb2JzZXJ2ZShodG1sQXR0ck5hbWUsIGNoYW5nZUZuKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1pbkNoYW5nZSh2YWwpIHtcbiAgICBtaW5WYWwgPSBwYXJzZU51bWJlckF0dHJWYWwodmFsKTtcbiAgICAvLyBpZ25vcmUgY2hhbmdlcyBiZWZvcmUgbW9kZWwgaXMgaW5pdGlhbGl6ZWRcbiAgICBpZiAoaXNOdW1iZXJOYU4oY3RybC4kbW9kZWxWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydHNSYW5nZSkge1xuICAgICAgdmFyIGVsVmFsID0gZWxlbWVudC52YWwoKTtcbiAgICAgIC8vIElFMTEgZG9lc24ndCBzZXQgdGhlIGVsIHZhbCBjb3JyZWN0bHkgaWYgdGhlIG1pblZhbCBpcyBncmVhdGVyIHRoYW4gdGhlIGVsZW1lbnQgdmFsdWVcbiAgICAgIGlmIChtaW5WYWwgPiBlbFZhbCkge1xuICAgICAgICBlbFZhbCA9IG1pblZhbDtcbiAgICAgICAgZWxlbWVudC52YWwoZWxWYWwpO1xuICAgICAgfVxuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKGVsVmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXG4gICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1heENoYW5nZSh2YWwpIHtcbiAgICBtYXhWYWwgPSBwYXJzZU51bWJlckF0dHJWYWwodmFsKTtcbiAgICAvLyBpZ25vcmUgY2hhbmdlcyBiZWZvcmUgbW9kZWwgaXMgaW5pdGlhbGl6ZWRcbiAgICBpZiAoaXNOdW1iZXJOYU4oY3RybC4kbW9kZWxWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydHNSYW5nZSkge1xuICAgICAgdmFyIGVsVmFsID0gZWxlbWVudC52YWwoKTtcbiAgICAgIC8vIElFMTEgZG9lc24ndCBzZXQgdGhlIGVsIHZhbCBjb3JyZWN0bHkgaWYgdGhlIG1heFZhbCBpcyBsZXNzIHRoYW4gdGhlIGVsZW1lbnQgdmFsdWVcbiAgICAgIGlmIChtYXhWYWwgPCBlbFZhbCkge1xuICAgICAgICBlbGVtZW50LnZhbChtYXhWYWwpO1xuICAgICAgICAvLyBJRTExIGFuZCBDaHJvbWUgZG9uJ3Qgc2V0IHRoZSB2YWx1ZSB0byB0aGUgbWluVmFsIHdoZW4gbWF4IDwgbWluXG4gICAgICAgIGVsVmFsID0gbWF4VmFsIDwgbWluVmFsID8gbWluVmFsIDogbWF4VmFsO1xuICAgICAgfVxuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKGVsVmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXG4gICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0ZXBDaGFuZ2UodmFsKSB7XG4gICAgc3RlcFZhbCA9IHBhcnNlTnVtYmVyQXR0clZhbCh2YWwpO1xuICAgIC8vIGlnbm9yZSBjaGFuZ2VzIGJlZm9yZSBtb2RlbCBpcyBpbml0aWFsaXplZFxuICAgIGlmIChpc051bWJlck5hTihjdHJsLiRtb2RlbFZhbHVlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNvbWUgYnJvd3NlcnMgZG9uJ3QgYWRqdXN0IHRoZSBpbnB1dCB2YWx1ZSBjb3JyZWN0bHksIGJ1dCBzZXQgdGhlIHN0ZXBNaXNtYXRjaCBlcnJvclxuICAgIGlmIChzdXBwb3J0c1JhbmdlICYmIGN0cmwuJHZpZXdWYWx1ZSAhPT0gZWxlbWVudC52YWwoKSkge1xuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKGVsZW1lbnQudmFsKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUT0RPKG1hdHNrbyk6IGltcGxlbWVudCB2YWxpZGF0ZUxhdGVyIHRvIHJlZHVjZSBudW1iZXIgb2YgdmFsaWRhdGlvbnNcbiAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHVybElucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKSB7XG4gIC8vIE5vdGU6IG5vIGJhZElucHV0Q2hlY2tlciBoZXJlIGJ5IHB1cnBvc2UgYXMgYHVybGAgaXMgb25seSBhIHZhbGlkYXRpb25cbiAgLy8gaW4gYnJvd3NlcnMsIGkuZS4gd2UgY2FuIGFsd2F5cyByZWFkIG91dCBpbnB1dC52YWx1ZSBldmVuIGlmIGl0IGlzIG5vdCB2YWxpZCFcbiAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcbiAgc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCk7XG5cbiAgY3RybC4kdmFsaWRhdG9ycy51cmwgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgVVJMX1JFR0VYUC50ZXN0KHZhbHVlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZW1haWxJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICAvLyBOb3RlOiBubyBiYWRJbnB1dENoZWNrZXIgaGVyZSBieSBwdXJwb3NlIGFzIGB1cmxgIGlzIG9ubHkgYSB2YWxpZGF0aW9uXG4gIC8vIGluIGJyb3dzZXJzLCBpLmUuIHdlIGNhbiBhbHdheXMgcmVhZCBvdXQgaW5wdXQudmFsdWUgZXZlbiBpZiBpdCBpcyBub3QgdmFsaWQhXG4gIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG4gIHN0cmluZ0Jhc2VkSW5wdXRUeXBlKGN0cmwpO1xuXG4gIGN0cmwuJHZhbGlkYXRvcnMuZW1haWwgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgRU1BSUxfUkVHRVhQLnRlc3QodmFsdWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiByYWRpb0lucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xuICB2YXIgZG9UcmltID0gIWF0dHIubmdUcmltIHx8IHRyaW0oYXR0ci5uZ1RyaW0pICE9PSAnZmFsc2UnO1xuICAvLyBtYWtlIHRoZSBuYW1lIHVuaXF1ZSwgaWYgbm90IGRlZmluZWRcbiAgaWYgKGlzVW5kZWZpbmVkKGF0dHIubmFtZSkpIHtcbiAgICBlbGVtZW50LmF0dHIoJ25hbWUnLCBuZXh0VWlkKCkpO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICB2YXIgdmFsdWU7XG4gICAgaWYgKGVsZW1lbnRbMF0uY2hlY2tlZCkge1xuICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgICAgaWYgKGRvVHJpbSkge1xuICAgICAgICB2YWx1ZSA9IHRyaW0odmFsdWUpO1xuICAgICAgfVxuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlLCBldiAmJiBldi50eXBlKTtcbiAgICB9XG4gIH07XG5cbiAgZWxlbWVudC5vbignY2hhbmdlJywgbGlzdGVuZXIpO1xuXG4gIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgaWYgKGRvVHJpbSkge1xuICAgICAgdmFsdWUgPSB0cmltKHZhbHVlKTtcbiAgICB9XG4gICAgZWxlbWVudFswXS5jaGVja2VkID0gKHZhbHVlID09PSBjdHJsLiR2aWV3VmFsdWUpO1xuICB9O1xuXG4gIGF0dHIuJG9ic2VydmUoJ3ZhbHVlJywgY3RybC4kcmVuZGVyKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDb25zdGFudEV4cHIoJHBhcnNlLCBjb250ZXh0LCBuYW1lLCBleHByZXNzaW9uLCBmYWxsYmFjaykge1xuICB2YXIgcGFyc2VGbjtcbiAgaWYgKGlzRGVmaW5lZChleHByZXNzaW9uKSkge1xuICAgIHBhcnNlRm4gPSAkcGFyc2UoZXhwcmVzc2lvbik7XG4gICAgaWYgKCFwYXJzZUZuLmNvbnN0YW50KSB7XG4gICAgICB0aHJvdyBuZ01vZGVsTWluRXJyKCdjb25zdGV4cHInLCAnRXhwZWN0ZWQgY29uc3RhbnQgZXhwcmVzc2lvbiBmb3IgYHswfWAsIGJ1dCBzYXcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdgezF9YC4nLCBuYW1lLCBleHByZXNzaW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlRm4oY29udGV4dCk7XG4gIH1cbiAgcmV0dXJuIGZhbGxiYWNrO1xufVxuXG5mdW5jdGlvbiBjaGVja2JveElucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyLCAkZmlsdGVyLCAkcGFyc2UpIHtcbiAgdmFyIHRydWVWYWx1ZSA9IHBhcnNlQ29uc3RhbnRFeHByKCRwYXJzZSwgc2NvcGUsICduZ1RydWVWYWx1ZScsIGF0dHIubmdUcnVlVmFsdWUsIHRydWUpO1xuICB2YXIgZmFsc2VWYWx1ZSA9IHBhcnNlQ29uc3RhbnRFeHByKCRwYXJzZSwgc2NvcGUsICduZ0ZhbHNlVmFsdWUnLCBhdHRyLm5nRmFsc2VWYWx1ZSwgZmFsc2UpO1xuXG4gIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgY3RybC4kc2V0Vmlld1ZhbHVlKGVsZW1lbnRbMF0uY2hlY2tlZCwgZXYgJiYgZXYudHlwZSk7XG4gIH07XG5cbiAgZWxlbWVudC5vbignY2hhbmdlJywgbGlzdGVuZXIpO1xuXG4gIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIGVsZW1lbnRbMF0uY2hlY2tlZCA9IGN0cmwuJHZpZXdWYWx1ZTtcbiAgfTtcblxuICAvLyBPdmVycmlkZSB0aGUgc3RhbmRhcmQgYCRpc0VtcHR5YCBiZWNhdXNlIHRoZSAkdmlld1ZhbHVlIG9mIGFuIGVtcHR5IGNoZWNrYm94IGlzIGFsd2F5cyBzZXQgdG8gYGZhbHNlYFxuICAvLyBUaGlzIGlzIGJlY2F1c2Ugb2YgdGhlIHBhcnNlciBiZWxvdywgd2hpY2ggY29tcGFyZXMgdGhlIGAkbW9kZWxWYWx1ZWAgd2l0aCBgdHJ1ZVZhbHVlYCB0byBjb252ZXJ0XG4gIC8vIGl0IHRvIGEgYm9vbGVhbi5cbiAgY3RybC4kaXNFbXB0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBmYWxzZTtcbiAgfTtcblxuICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZXF1YWxzKHZhbHVlLCB0cnVlVmFsdWUpO1xuICB9KTtcblxuICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPyB0cnVlVmFsdWUgOiBmYWxzZVZhbHVlO1xuICB9KTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHRleHRhcmVhXG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSFRNTCB0ZXh0YXJlYSBlbGVtZW50IGNvbnRyb2wgd2l0aCBBbmd1bGFySlMgZGF0YS1iaW5kaW5nLiBUaGUgZGF0YS1iaW5kaW5nIGFuZCB2YWxpZGF0aW9uXG4gKiBwcm9wZXJ0aWVzIG9mIHRoaXMgZWxlbWVudCBhcmUgZXhhY3RseSB0aGUgc2FtZSBhcyB0aG9zZSBvZiB0aGVcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXQgZWxlbWVudH0uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXG4gKiAgICBtaW5sZW5ndGguXG4gKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gKiAgICBtYXhsZW5ndGguIFNldHRpbmcgdGhlIGF0dHJpYnV0ZSB0byBhIG5lZ2F0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCBhbGxvd3MgdmlldyB2YWx1ZXMgb2YgYW55XG4gKiAgICBsZW5ndGguXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgbmdNb2RlbCB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlICR2aWV3VmFsdWV9XG4gKiAgICBkb2VzIG5vdCBtYXRjaCBhIFJlZ0V4cCBmb3VuZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFySlMgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZW4gaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBSZWdFeHBcbiAqICAgIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvXG4gKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gKiAgICAqKk5vdGU6KiogQXZvaWQgdXNpbmcgdGhlIGBnYCBmbGFnIG9uIHRoZSBSZWdFeHAsIGFzIGl0IHdpbGwgY2F1c2UgZWFjaCBzdWNjZXNzaXZlIHNlYXJjaCB0b1xuICogICAgc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAqICAgIGFjY291bnQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IFtuZ1RyaW09dHJ1ZV0gSWYgc2V0IHRvIGZhbHNlIEFuZ3VsYXJKUyB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHRyaW0gdGhlIGlucHV0LlxuICpcbiAqIEBrbm93bklzc3VlXG4gKlxuICogV2hlbiBzcGVjaWZ5aW5nIHRoZSBgcGxhY2Vob2xkZXJgIGF0dHJpYnV0ZSBvZiBgPHRleHRhcmVhPmAsIEludGVybmV0IEV4cGxvcmVyIHdpbGwgdGVtcG9yYXJpbHlcbiAqIGluc2VydCB0aGUgcGxhY2Vob2xkZXIgdmFsdWUgYXMgdGhlIHRleHRhcmVhJ3MgY29udGVudC4gSWYgdGhlIHBsYWNlaG9sZGVyIHZhbHVlIGNvbnRhaW5zXG4gKiBpbnRlcnBvbGF0aW9uIChge3sgLi4uIH19YCksIGFuIGVycm9yIHdpbGwgYmUgbG9nZ2VkIGluIHRoZSBjb25zb2xlIHdoZW4gQW5ndWxhckpTIHRyaWVzIHRvIHVwZGF0ZVxuICogdGhlIHZhbHVlIG9mIHRoZSBieS10aGVuLXJlbW92ZWQgdGV4dCBub2RlLiBUaGlzIGRvZXNuJ3QgYWZmZWN0IHRoZSBmdW5jdGlvbmFsaXR5IG9mIHRoZVxuICogdGV4dGFyZWEsIGJ1dCBjYW4gYmUgdW5kZXNpcmFibGUuXG4gKlxuICogWW91IGNhbiB3b3JrIGFyb3VuZCB0aGlzIEludGVybmV0IEV4cGxvcmVyIGlzc3VlIGJ5IHVzaW5nIGBuZy1hdHRyLXBsYWNlaG9sZGVyYCBpbnN0ZWFkIG9mXG4gKiBgcGxhY2Vob2xkZXJgIG9uIHRleHRhcmVhcywgd2hlbmV2ZXIgeW91IG5lZWQgaW50ZXJwb2xhdGlvbiBpbiB0aGUgcGxhY2Vob2xkZXIgdmFsdWUuIFlvdSBjYW5cbiAqIGZpbmQgbW9yZSBkZXRhaWxzIG9uIGBuZ0F0dHJgIGluIHRoZVxuICogW0ludGVycG9sYXRpb25dKGd1aWRlL2ludGVycG9sYXRpb24jLW5nYXR0ci1mb3ItYmluZGluZy10by1hcmJpdHJhcnktYXR0cmlidXRlcykgc2VjdGlvbiBvZiB0aGVcbiAqIERldmVsb3BlciBHdWlkZS5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgaW5wdXRcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIVE1MIGlucHV0IGVsZW1lbnQgY29udHJvbC4gV2hlbiB1c2VkIHRvZ2V0aGVyIHdpdGgge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfSwgaXQgcHJvdmlkZXMgZGF0YS1iaW5kaW5nLFxuICogaW5wdXQgc3RhdGUgY29udHJvbCwgYW5kIHZhbGlkYXRpb24uXG4gKiBJbnB1dCBjb250cm9sIGZvbGxvd3MgSFRNTDUgaW5wdXQgdHlwZXMgYW5kIHBvbHlmaWxscyB0aGUgSFRNTDUgdmFsaWRhdGlvbiBiZWhhdmlvciBmb3Igb2xkZXIgYnJvd3NlcnMuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBOb3QgZXZlcnkgZmVhdHVyZSBvZmZlcmVkIGlzIGF2YWlsYWJsZSBmb3IgYWxsIGlucHV0IHR5cGVzLlxuICogU3BlY2lmaWNhbGx5LCBkYXRhIGJpbmRpbmcgYW5kIGV2ZW50IGhhbmRsaW5nIHZpYSBgbmctbW9kZWxgIGlzIHVuc3VwcG9ydGVkIGZvciBgaW5wdXRbZmlsZV1gLlxuICogPC9kaXY+XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBuZ1JlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgaWYgc2V0IHRvIHRydWVcbiAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXG4gKiAgICBtaW5sZW5ndGguXG4gKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gKiAgICBtYXhsZW5ndGguIFNldHRpbmcgdGhlIGF0dHJpYnV0ZSB0byBhIG5lZ2F0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCBhbGxvd3MgdmlldyB2YWx1ZXMgb2YgYW55XG4gKiAgICBsZW5ndGguXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgbmdNb2RlbCB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlICR2aWV3VmFsdWV9XG4gKiAgICB2YWx1ZSBkb2VzIG5vdCBtYXRjaCBhIFJlZ0V4cCBmb3VuZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFySlMgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZW4gaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBSZWdFeHBcbiAqICAgIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvXG4gKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gKiAgICAqKk5vdGU6KiogQXZvaWQgdXNpbmcgdGhlIGBnYCBmbGFnIG9uIHRoZSBSZWdFeHAsIGFzIGl0IHdpbGwgY2F1c2UgZWFjaCBzdWNjZXNzaXZlIHNlYXJjaCB0b1xuICogICAgc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAqICAgIGFjY291bnQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IFtuZ1RyaW09dHJ1ZV0gSWYgc2V0IHRvIGZhbHNlIEFuZ3VsYXJKUyB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHRyaW0gdGhlIGlucHV0LlxuICogICAgVGhpcyBwYXJhbWV0ZXIgaXMgaWdub3JlZCBmb3IgaW5wdXRbdHlwZT1wYXNzd29yZF0gY29udHJvbHMsIHdoaWNoIHdpbGwgbmV2ZXIgdHJpbSB0aGVcbiAqICAgIGlucHV0LlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cImlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImlucHV0RXhhbXBsZVwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdpbnB1dEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICRzY29wZS51c2VyID0ge25hbWU6ICdndWVzdCcsIGxhc3Q6ICd2aXNpdG9yJ307XG4gICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICBVc2VyIG5hbWU6XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiIG5nLW1vZGVsPVwidXNlci5uYW1lXCIgcmVxdWlyZWQ+XG4gICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0udXNlck5hbWUuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgTGFzdCBuYW1lOlxuICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwibGFzdE5hbWVcIiBuZy1tb2RlbD1cInVzZXIubGFzdFwiXG4gICAgICAgICAgICAgIG5nLW1pbmxlbmd0aD1cIjNcIiBuZy1tYXhsZW5ndGg9XCIxMFwiPlxuICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmxhc3ROYW1lLiRlcnJvci5taW5sZW5ndGhcIj5cbiAgICAgICAgICAgICAgIFRvbyBzaG9ydCE8L3NwYW4+XG4gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0ubGFzdE5hbWUuJGVycm9yLm1heGxlbmd0aFwiPlxuICAgICAgICAgICAgICAgVG9vIGxvbmchPC9zcGFuPlxuICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgIDxocj5cbiAgICAgICAgIDx0dD51c2VyID0ge3t1c2VyfX08L3R0Pjxici8+XG4gICAgICAgICA8dHQ+bXlGb3JtLnVzZXJOYW1lLiR2YWxpZCA9IHt7bXlGb3JtLnVzZXJOYW1lLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgPHR0Pm15Rm9ybS51c2VyTmFtZS4kZXJyb3IgPSB7e215Rm9ybS51c2VyTmFtZS4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgIDx0dD5teUZvcm0ubGFzdE5hbWUuJHZhbGlkID0ge3tteUZvcm0ubGFzdE5hbWUuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICA8dHQ+bXlGb3JtLmxhc3ROYW1lLiRlcnJvciA9IHt7bXlGb3JtLmxhc3ROYW1lLiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLm1pbmxlbmd0aCA9IHt7ISFteUZvcm0uJGVycm9yLm1pbmxlbmd0aH19PC90dD48YnIvPlxuICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IubWF4bGVuZ3RoID0ge3shIW15Rm9ybS4kZXJyb3IubWF4bGVuZ3RofX08L3R0Pjxici8+XG4gICAgICAgPC9kaXY+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIHZhciB1c2VyID0gZWxlbWVudChieS5leGFjdEJpbmRpbmcoJ3VzZXInKSk7XG4gICAgICAgIHZhciB1c2VyTmFtZVZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0udXNlck5hbWUuJHZhbGlkJykpO1xuICAgICAgICB2YXIgbGFzdE5hbWVWYWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmxhc3ROYW1lLiR2YWxpZCcpKTtcbiAgICAgICAgdmFyIGxhc3ROYW1lRXJyb3IgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5sYXN0TmFtZS4kZXJyb3InKSk7XG4gICAgICAgIHZhciBmb3JtVmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS4kdmFsaWQnKSk7XG4gICAgICAgIHZhciB1c2VyTmFtZUlucHV0ID0gZWxlbWVudChieS5tb2RlbCgndXNlci5uYW1lJykpO1xuICAgICAgICB2YXIgdXNlckxhc3RJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIubGFzdCcpKTtcblxuICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibmFtZVwiOlwiZ3Vlc3RcIixcImxhc3RcIjpcInZpc2l0b3JcIn0nKTtcbiAgICAgICAgICBleHBlY3QodXNlck5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5IHdoZW4gcmVxdWlyZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB1c2VyTmFtZUlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgdXNlck5hbWVJbnB1dC5zZW5kS2V5cygnJyk7XG5cbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibGFzdFwiOlwidmlzaXRvclwifScpO1xuICAgICAgICAgIGV4cGVjdCh1c2VyTmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgdmFsaWQgaWYgZW1wdHkgd2hlbiBtaW4gbGVuZ3RoIGlzIHNldCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICB1c2VyTGFzdElucHV0LnNlbmRLZXlzKCcnKTtcblxuICAgICAgICAgIGV4cGVjdCh1c2VyLmdldFRleHQoKSkudG9Db250YWluKCd7XCJuYW1lXCI6XCJndWVzdFwiLFwibGFzdFwiOlwiXCJ9Jyk7XG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICBleHBlY3QoZm9ybVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBsZXNzIHRoYW4gcmVxdWlyZWQgbWluIGxlbmd0aCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICB1c2VyTGFzdElucHV0LnNlbmRLZXlzKCd4eCcpO1xuXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcIm5hbWVcIjpcImd1ZXN0XCJ9Jyk7XG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lRXJyb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ21pbmxlbmd0aCcpO1xuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBsb25nZXIgdGhhbiBtYXggbGVuZ3RoJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdXNlckxhc3RJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuc2VuZEtleXMoJ3NvbWUgcmlkaWN1bG91c2x5IGxvbmcgbmFtZScpO1xuXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcIm5hbWVcIjpcImd1ZXN0XCJ9Jyk7XG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgZXhwZWN0KGxhc3ROYW1lRXJyb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ21heGxlbmd0aCcpO1xuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIGlucHV0RGlyZWN0aXZlID0gWyckYnJvd3NlcicsICckc25pZmZlcicsICckZmlsdGVyJywgJyRwYXJzZScsXG4gICAgZnVuY3Rpb24oJGJyb3dzZXIsICRzbmlmZmVyLCAkZmlsdGVyLCAkcGFyc2UpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcXVpcmU6IFsnP25nTW9kZWwnXSxcbiAgICBsaW5rOiB7XG4gICAgICBwcmU6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgICAgICBpZiAoY3RybHNbMF0pIHtcbiAgICAgICAgICAoaW5wdXRUeXBlW2xvd2VyY2FzZShhdHRyLnR5cGUpXSB8fCBpbnB1dFR5cGUudGV4dCkoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzWzBdLCAkc25pZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGJyb3dzZXIsICRmaWx0ZXIsICRwYXJzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XTtcblxuXG5cbnZhciBDT05TVEFOVF9WQUxVRV9SRUdFWFAgPSAvXih0cnVlfGZhbHNlfFxcZCspJC87XG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nVmFsdWVcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBCaW5kcyB0aGUgZ2l2ZW4gZXhwcmVzc2lvbiB0byB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQuXG4gKlxuICogSXQgaXMgbWFpbmx5IHVzZWQgb24ge0BsaW5rIGlucHV0W3JhZGlvXSBgaW5wdXRbcmFkaW9dYH0gYW5kIG9wdGlvbiBlbGVtZW50cyxcbiAqIHNvIHRoYXQgd2hlbiB0aGUgZWxlbWVudCBpcyBzZWxlY3RlZCwgdGhlIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0gb2YgdGhhdCBlbGVtZW50IChvciBpdHNcbiAqIHtAbGluayBzZWxlY3QgYHNlbGVjdGB9IHBhcmVudCBlbGVtZW50KSBpcyBzZXQgdG8gdGhlIGJvdW5kIHZhbHVlLiBJdCBpcyBlc3BlY2lhbGx5IHVzZWZ1bFxuICogZm9yIGR5bmFtaWNhbGx5IGdlbmVyYXRlZCBsaXN0cyB1c2luZyB7QGxpbmsgbmdSZXBlYXQgYG5nUmVwZWF0YH0sIGFzIHNob3duIGJlbG93LlxuICpcbiAqIEl0IGNhbiBhbHNvIGJlIHVzZWQgdG8gYWNoaWV2ZSBvbmUtd2F5IGJpbmRpbmcgb2YgYSBnaXZlbiBleHByZXNzaW9uIHRvIGFuIGlucHV0IGVsZW1lbnRcbiAqIHN1Y2ggYXMgYW4gYGlucHV0W3RleHRdYCBvciBhIGB0ZXh0YXJlYWAsIHdoZW4gdGhhdCBlbGVtZW50IGRvZXMgbm90IHVzZSBuZ01vZGVsLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ1ZhbHVlIEFuZ3VsYXJKUyBleHByZXNzaW9uLCB3aG9zZSB2YWx1ZSB3aWxsIGJlIGJvdW5kIHRvIHRoZSBgdmFsdWVgIGF0dHJpYnV0ZVxuICogYW5kIGB2YWx1ZWAgcHJvcGVydHkgb2YgdGhlIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBuYW1lPVwibmdWYWx1ZS1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ2YWx1ZUV4YW1wbGVcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgndmFsdWVFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAkc2NvcGUubmFtZXMgPSBbJ3BpenphJywgJ3VuaWNvcm5zJywgJ3JvYm90cyddO1xuICAgICAgICAgICAgICAkc2NvcGUubXkgPSB7IGZhdm9yaXRlOiAndW5pY29ybnMnIH07XG4gICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgIDxmb3JtIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgIDxoMj5XaGljaCBpcyB5b3VyIGZhdm9yaXRlPzwvaDI+XG4gICAgICAgICAgICA8bGFiZWwgbmctcmVwZWF0PVwibmFtZSBpbiBuYW1lc1wiIGZvcj1cInt7bmFtZX19XCI+XG4gICAgICAgICAgICAgIHt7bmFtZX19XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJteS5mYXZvcml0ZVwiXG4gICAgICAgICAgICAgICAgICAgICBuZy12YWx1ZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgaWQ9XCJ7e25hbWV9fVwiXG4gICAgICAgICAgICAgICAgICAgICBuYW1lPVwiZmF2b3JpdGVcIj5cbiAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPGRpdj5Zb3UgY2hvc2Uge3tteS5mYXZvcml0ZX19PC9kaXY+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgdmFyIGZhdm9yaXRlID0gZWxlbWVudChieS5iaW5kaW5nKCdteS5mYXZvcml0ZScpKTtcblxuICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBleHBlY3QoZmF2b3JpdGUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3VuaWNvcm5zJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdCgnc2hvdWxkIGJpbmQgdGhlIHZhbHVlcyB0byB0aGUgaW5wdXRzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudC5hbGwoYnkubW9kZWwoJ215LmZhdm9yaXRlJykpLmdldCgwKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChmYXZvcml0ZS5nZXRUZXh0KCkpLnRvQ29udGFpbigncGl6emEnKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdWYWx1ZURpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICAvKipcbiAgICogIGlucHV0cyB1c2UgdGhlIHZhbHVlIGF0dHJpYnV0ZSBhcyB0aGVpciBkZWZhdWx0IHZhbHVlIGlmIHRoZSB2YWx1ZSBwcm9wZXJ0eSBpcyBub3Qgc2V0LlxuICAgKiAgT25jZSB0aGUgdmFsdWUgcHJvcGVydHkgaGFzIGJlZW4gc2V0IChieSBhZGRpbmcgaW5wdXQpLCBpdCB3aWxsIG5vdCByZWFjdCB0byBjaGFuZ2VzIHRvXG4gICAqICB0aGUgdmFsdWUgYXR0cmlidXRlIGFueW1vcmUuIFNldHRpbmcgYm90aCBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5IGZpeGVzIHRoaXMgYmVoYXZpb3IsIGFuZFxuICAgKiAgbWFrZXMgaXQgcG9zc2libGUgdG8gdXNlIG5nVmFsdWUgYXMgYSBzb3J0IG9mIG9uZS13YXkgYmluZC5cbiAgICovXG4gIGZ1bmN0aW9uIHVwZGF0ZUVsZW1lbnRWYWx1ZShlbGVtZW50LCBhdHRyLCB2YWx1ZSkge1xuICAgIC8vIFN1cHBvcnQ6IElFOSBvbmx5XG4gICAgLy8gSW4gSUU5IHZhbHVlcyBhcmUgY29udmVydGVkIHRvIHN0cmluZyAoZS5nLiBgaW5wdXQudmFsdWUgPSBudWxsYCByZXN1bHRzIGluIGBpbnB1dC52YWx1ZSA9PT0gJ251bGwnYCkuXG4gICAgdmFyIHByb3BWYWx1ZSA9IGlzRGVmaW5lZCh2YWx1ZSkgPyB2YWx1ZSA6IChtc2llID09PSA5KSA/ICcnIDogbnVsbDtcbiAgICBlbGVtZW50LnByb3AoJ3ZhbHVlJywgcHJvcFZhbHVlKTtcbiAgICBhdHRyLiRzZXQoJ3ZhbHVlJywgdmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHByaW9yaXR5OiAxMDAsXG4gICAgY29tcGlsZTogZnVuY3Rpb24odHBsLCB0cGxBdHRyKSB7XG4gICAgICBpZiAoQ09OU1RBTlRfVkFMVUVfUkVHRVhQLnRlc3QodHBsQXR0ci5uZ1ZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdWYWx1ZUNvbnN0YW50TGluayhzY29wZSwgZWxtLCBhdHRyKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gc2NvcGUuJGV2YWwoYXR0ci5uZ1ZhbHVlKTtcbiAgICAgICAgICB1cGRhdGVFbGVtZW50VmFsdWUoZWxtLCBhdHRyLCB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdWYWx1ZUxpbmsoc2NvcGUsIGVsbSwgYXR0cikge1xuICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nVmFsdWUsIGZ1bmN0aW9uIHZhbHVlV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHVwZGF0ZUVsZW1lbnRWYWx1ZShlbG0sIGF0dHIsIHZhbHVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQmluZFxuICogQHJlc3RyaWN0IEFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nQmluZGAgYXR0cmlidXRlIHRlbGxzIEFuZ3VsYXJKUyB0byByZXBsYWNlIHRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIHNwZWNpZmllZCBIVE1MIGVsZW1lbnRcbiAqIHdpdGggdGhlIHZhbHVlIG9mIGEgZ2l2ZW4gZXhwcmVzc2lvbiwgYW5kIHRvIHVwZGF0ZSB0aGUgdGV4dCBjb250ZW50IHdoZW4gdGhlIHZhbHVlIG9mIHRoYXRcbiAqIGV4cHJlc3Npb24gY2hhbmdlcy5cbiAqXG4gKiBUeXBpY2FsbHksIHlvdSBkb24ndCB1c2UgYG5nQmluZGAgZGlyZWN0bHksIGJ1dCBpbnN0ZWFkIHlvdSB1c2UgdGhlIGRvdWJsZSBjdXJseSBtYXJrdXAgbGlrZVxuICogYHt7IGV4cHJlc3Npb24gfX1gIHdoaWNoIGlzIHNpbWlsYXIgYnV0IGxlc3MgdmVyYm9zZS5cbiAqXG4gKiBJdCBpcyBwcmVmZXJhYmxlIHRvIHVzZSBgbmdCaW5kYCBpbnN0ZWFkIG9mIGB7eyBleHByZXNzaW9uIH19YCBpZiBhIHRlbXBsYXRlIGlzIG1vbWVudGFyaWx5XG4gKiBkaXNwbGF5ZWQgYnkgdGhlIGJyb3dzZXIgaW4gaXRzIHJhdyBzdGF0ZSBiZWZvcmUgQW5ndWxhckpTIGNvbXBpbGVzIGl0LiBTaW5jZSBgbmdCaW5kYCBpcyBhblxuICogZWxlbWVudCBhdHRyaWJ1dGUsIGl0IG1ha2VzIHRoZSBiaW5kaW5ncyBpbnZpc2libGUgdG8gdGhlIHVzZXIgd2hpbGUgdGhlIHBhZ2UgaXMgbG9hZGluZy5cbiAqXG4gKiBBbiBhbHRlcm5hdGl2ZSBzb2x1dGlvbiB0byB0aGlzIHByb2JsZW0gd291bGQgYmUgdXNpbmcgdGhlXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xvYWsgbmdDbG9ha30gZGlyZWN0aXZlLlxuICpcbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdCaW5kIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBFbnRlciBhIG5hbWUgaW4gdGhlIExpdmUgUHJldmlldyB0ZXh0IGJveDsgdGhlIGdyZWV0aW5nIGJlbG93IHRoZSB0ZXh0IGJveCBjaGFuZ2VzIGluc3RhbnRseS5cbiAgIDxleGFtcGxlIG1vZHVsZT1cImJpbmRFeGFtcGxlXCIgbmFtZT1cIm5nLWJpbmRcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2JpbmRFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSAnV2hpcmxlZCc7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGxhYmVsPkVudGVyIG5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiPjwvbGFiZWw+PGJyPlxuICAgICAgICAgSGVsbG8gPHNwYW4gbmctYmluZD1cIm5hbWVcIj48L3NwYW4+IVxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWJpbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBuYW1lSW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCduYW1lJykpO1xuXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCduYW1lJykpLmdldFRleHQoKSkudG9CZSgnV2hpcmxlZCcpO1xuICAgICAgICAgbmFtZUlucHV0LmNsZWFyKCk7XG4gICAgICAgICBuYW1lSW5wdXQuc2VuZEtleXMoJ3dvcmxkJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCduYW1lJykpLmdldFRleHQoKSkudG9CZSgnd29ybGQnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdCaW5kRGlyZWN0aXZlID0gWyckY29tcGlsZScsIGZ1bmN0aW9uKCRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBQycsXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdCaW5kQ29tcGlsZSh0ZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHRlbXBsYXRlRWxlbWVudCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbmdCaW5kTGluayhzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICAkY29tcGlsZS4kJGFkZEJpbmRpbmdJbmZvKGVsZW1lbnQsIGF0dHIubmdCaW5kKTtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRbMF07XG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nQmluZCwgZnVuY3Rpb24gbmdCaW5kV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdCaW5kVGVtcGxhdGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdCaW5kVGVtcGxhdGVgIGRpcmVjdGl2ZSBzcGVjaWZpZXMgdGhhdCB0aGUgZWxlbWVudFxuICogdGV4dCBjb250ZW50IHNob3VsZCBiZSByZXBsYWNlZCB3aXRoIHRoZSBpbnRlcnBvbGF0aW9uIG9mIHRoZSB0ZW1wbGF0ZVxuICogaW4gdGhlIGBuZ0JpbmRUZW1wbGF0ZWAgYXR0cmlidXRlLlxuICogVW5saWtlIGBuZ0JpbmRgLCB0aGUgYG5nQmluZFRlbXBsYXRlYCBjYW4gY29udGFpbiBtdWx0aXBsZSBge3tgIGB9fWBcbiAqIGV4cHJlc3Npb25zLiBUaGlzIGRpcmVjdGl2ZSBpcyBuZWVkZWQgc2luY2Ugc29tZSBIVE1MIGVsZW1lbnRzXG4gKiAoc3VjaCBhcyBUSVRMRSBhbmQgT1BUSU9OKSBjYW5ub3QgY29udGFpbiBTUEFOIGVsZW1lbnRzLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtzdHJpbmd9IG5nQmluZFRlbXBsYXRlIHRlbXBsYXRlIG9mIGZvcm1cbiAqICAgPHR0Pnt7PC90dD4gPHR0PmV4cHJlc3Npb248L3R0PiA8dHQ+fX08L3R0PiB0byBldmFsLlxuICpcbiAqIEBleGFtcGxlXG4gKiBUcnkgaXQgaGVyZTogZW50ZXIgdGV4dCBpbiB0ZXh0IGJveCBhbmQgd2F0Y2ggdGhlIGdyZWV0aW5nIGNoYW5nZS5cbiAgIDxleGFtcGxlIG1vZHVsZT1cImJpbmRFeGFtcGxlXCIgbmFtZT1cIm5nLWJpbmQtdGVtcGxhdGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2JpbmRFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLnNhbHV0YXRpb24gPSAnSGVsbG8nO1xuICAgICAgICAgICAgICRzY29wZS5uYW1lID0gJ1dvcmxkJztcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgIDxsYWJlbD5TYWx1dGF0aW9uOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInNhbHV0YXRpb25cIj48L2xhYmVsPjxicj5cbiAgICAgICAgPGxhYmVsPk5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiPjwvbGFiZWw+PGJyPlxuICAgICAgICA8cHJlIG5nLWJpbmQtdGVtcGxhdGU9XCJ7e3NhbHV0YXRpb259fSB7e25hbWV9fSFcIj48L3ByZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1iaW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgc2FsdXRhdGlvbkVsZW0gPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3NhbHV0YXRpb24nKSk7XG4gICAgICAgICB2YXIgc2FsdXRhdGlvbklucHV0ID0gZWxlbWVudChieS5tb2RlbCgnc2FsdXRhdGlvbicpKTtcbiAgICAgICAgIHZhciBuYW1lSW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCduYW1lJykpO1xuXG4gICAgICAgICBleHBlY3Qoc2FsdXRhdGlvbkVsZW0uZ2V0VGV4dCgpKS50b0JlKCdIZWxsbyBXb3JsZCEnKTtcblxuICAgICAgICAgc2FsdXRhdGlvbklucHV0LmNsZWFyKCk7XG4gICAgICAgICBzYWx1dGF0aW9uSW5wdXQuc2VuZEtleXMoJ0dyZWV0aW5ncycpO1xuICAgICAgICAgbmFtZUlucHV0LmNsZWFyKCk7XG4gICAgICAgICBuYW1lSW5wdXQuc2VuZEtleXMoJ3VzZXInKTtcblxuICAgICAgICAgZXhwZWN0KHNhbHV0YXRpb25FbGVtLmdldFRleHQoKSkudG9CZSgnR3JlZXRpbmdzIHVzZXIhJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlID0gWyckaW50ZXJwb2xhdGUnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkaW50ZXJwb2xhdGUsICRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdCaW5kVGVtcGxhdGVDb21waWxlKHRlbXBsYXRlRWxlbWVudCkge1xuICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModGVtcGxhdGVFbGVtZW50KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ0JpbmRUZW1wbGF0ZUxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgdmFyIGludGVycG9sYXRlRm4gPSAkaW50ZXJwb2xhdGUoZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBpbnRlcnBvbGF0ZUZuLmV4cHJlc3Npb25zKTtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRbMF07XG4gICAgICAgIGF0dHIuJG9ic2VydmUoJ25nQmluZFRlbXBsYXRlJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gaXNVbmRlZmluZWQodmFsdWUpID8gJycgOiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdCaW5kSHRtbFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRXZhbHVhdGVzIHRoZSBleHByZXNzaW9uIGFuZCBpbnNlcnRzIHRoZSByZXN1bHRpbmcgSFRNTCBpbnRvIHRoZSBlbGVtZW50IGluIGEgc2VjdXJlIHdheS4gQnkgZGVmYXVsdCxcbiAqIHRoZSByZXN1bHRpbmcgSFRNTCBjb250ZW50IHdpbGwgYmUgc2FuaXRpemVkIHVzaW5nIHRoZSB7QGxpbmsgbmdTYW5pdGl6ZS4kc2FuaXRpemUgJHNhbml0aXplfSBzZXJ2aWNlLlxuICogVG8gdXRpbGl6ZSB0aGlzIGZ1bmN0aW9uYWxpdHksIGVuc3VyZSB0aGF0IGAkc2FuaXRpemVgIGlzIGF2YWlsYWJsZSwgZm9yIGV4YW1wbGUsIGJ5IGluY2x1ZGluZyB7QGxpbmtcbiAqIG5nU2FuaXRpemV9IGluIHlvdXIgbW9kdWxlJ3MgZGVwZW5kZW5jaWVzIChub3QgaW4gY29yZSBBbmd1bGFySlMpLiBJbiBvcmRlciB0byB1c2Uge0BsaW5rIG5nU2FuaXRpemV9XG4gKiBpbiB5b3VyIG1vZHVsZSdzIGRlcGVuZGVuY2llcywgeW91IG5lZWQgdG8gaW5jbHVkZSBcImFuZ3VsYXItc2FuaXRpemUuanNcIiBpbiB5b3VyIGFwcGxpY2F0aW9uLlxuICpcbiAqIFlvdSBtYXkgYWxzbyBieXBhc3Mgc2FuaXRpemF0aW9uIGZvciB2YWx1ZXMgeW91IGtub3cgYXJlIHNhZmUuIFRvIGRvIHNvLCBiaW5kIHRvXG4gKiBhbiBleHBsaWNpdGx5IHRydXN0ZWQgdmFsdWUgdmlhIHtAbGluayBuZy4kc2NlI3RydXN0QXNIdG1sICRzY2UudHJ1c3RBc0h0bWx9LiAgU2VlIHRoZSBleGFtcGxlXG4gKiB1bmRlciB7QGxpbmsgbmcuJHNjZSNzaG93LW1lLWFuLWV4YW1wbGUtdXNpbmctc2NlLSBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKX0uXG4gKlxuICogTm90ZTogSWYgYSBgJHNhbml0aXplYCBzZXJ2aWNlIGlzIHVuYXZhaWxhYmxlIGFuZCB0aGUgYm91bmQgdmFsdWUgaXNuJ3QgZXhwbGljaXRseSB0cnVzdGVkLCB5b3VcbiAqIHdpbGwgaGF2ZSBhbiBleGNlcHRpb24gKGluc3RlYWQgb2YgYW4gZXhwbG9pdC4pXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQmluZEh0bWwge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUuXG4gKlxuICogQGV4YW1wbGVcblxuICAgPGV4YW1wbGUgbW9kdWxlPVwiYmluZEh0bWxFeGFtcGxlXCIgZGVwcz1cImFuZ3VsYXItc2FuaXRpemUuanNcIiBuYW1lPVwibmctYmluZC1odG1sXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgPHAgbmctYmluZC1odG1sPVwibXlIVE1MXCI+PC9wPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdiaW5kSHRtbEV4YW1wbGUnLCBbJ25nU2FuaXRpemUnXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICRzY29wZS5teUhUTUwgPVxuICAgICAgICAgICAgICAnSSBhbSBhbiA8Y29kZT5IVE1MPC9jb2RlPnN0cmluZyB3aXRoICcgK1xuICAgICAgICAgICAgICAnPGEgaHJlZj1cIiNcIj5saW5rcyE8L2E+IGFuZCBvdGhlciA8ZW0+c3R1ZmY8L2VtPic7XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cblxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1iaW5kLWh0bWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ215SFRNTCcpKS5nZXRUZXh0KCkpLnRvQmUoXG4gICAgICAgICAgICAgJ0kgYW0gYW4gSFRNTHN0cmluZyB3aXRoIGxpbmtzISBhbmQgb3RoZXIgc3R1ZmYnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdCaW5kSHRtbERpcmVjdGl2ZSA9IFsnJHNjZScsICckcGFyc2UnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkc2NlLCAkcGFyc2UsICRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBjb21waWxlOiBmdW5jdGlvbiBuZ0JpbmRIdG1sQ29tcGlsZSh0RWxlbWVudCwgdEF0dHJzKSB7XG4gICAgICB2YXIgbmdCaW5kSHRtbEdldHRlciA9ICRwYXJzZSh0QXR0cnMubmdCaW5kSHRtbCk7XG4gICAgICB2YXIgbmdCaW5kSHRtbFdhdGNoID0gJHBhcnNlKHRBdHRycy5uZ0JpbmRIdG1sLCBmdW5jdGlvbiBzY2VWYWx1ZU9mKHZhbCkge1xuICAgICAgICAvLyBVbndyYXAgdGhlIHZhbHVlIHRvIGNvbXBhcmUgdGhlIGFjdHVhbCBpbm5lciBzYWZlIHZhbHVlLCBub3QgdGhlIHdyYXBwZXIgb2JqZWN0LlxuICAgICAgICByZXR1cm4gJHNjZS52YWx1ZU9mKHZhbCk7XG4gICAgICB9KTtcbiAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHRFbGVtZW50KTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQmluZEh0bWxMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0luZm8oZWxlbWVudCwgYXR0ci5uZ0JpbmRIdG1sKTtcblxuICAgICAgICBzY29wZS4kd2F0Y2gobmdCaW5kSHRtbFdhdGNoLCBmdW5jdGlvbiBuZ0JpbmRIdG1sV2F0Y2hBY3Rpb24oKSB7XG4gICAgICAgICAgLy8gVGhlIHdhdGNoZWQgdmFsdWUgaXMgdGhlIHVud3JhcHBlZCB2YWx1ZS4gVG8gYXZvaWQgcmUtZXNjYXBpbmcsIHVzZSB0aGUgZGlyZWN0IGdldHRlci5cbiAgICAgICAgICB2YXIgdmFsdWUgPSBuZ0JpbmRIdG1sR2V0dGVyKHNjb3BlKTtcbiAgICAgICAgICBlbGVtZW50Lmh0bWwoJHNjZS5nZXRUcnVzdGVkSHRtbCh2YWx1ZSkgfHwgJycpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDaGFuZ2VcbiAqIEByZXN0cmljdCBBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBFdmFsdWF0ZSB0aGUgZ2l2ZW4gZXhwcmVzc2lvbiB3aGVuIHRoZSB1c2VyIGNoYW5nZXMgdGhlIGlucHV0LlxuICogVGhlIGV4cHJlc3Npb24gaXMgZXZhbHVhdGVkIGltbWVkaWF0ZWx5LCB1bmxpa2UgdGhlIEphdmFTY3JpcHQgb25jaGFuZ2UgZXZlbnRcbiAqIHdoaWNoIG9ubHkgdHJpZ2dlcnMgYXQgdGhlIGVuZCBvZiBhIGNoYW5nZSAodXN1YWxseSwgd2hlbiB0aGUgdXNlciBsZWF2ZXMgdGhlXG4gKiBmb3JtIGVsZW1lbnQgb3IgcHJlc3NlcyB0aGUgcmV0dXJuIGtleSkuXG4gKlxuICogVGhlIGBuZ0NoYW5nZWAgZXhwcmVzc2lvbiBpcyBvbmx5IGV2YWx1YXRlZCB3aGVuIGEgY2hhbmdlIGluIHRoZSBpbnB1dCB2YWx1ZSBjYXVzZXNcbiAqIGEgbmV3IHZhbHVlIHRvIGJlIGNvbW1pdHRlZCB0byB0aGUgbW9kZWwuXG4gKlxuICogSXQgd2lsbCBub3QgYmUgZXZhbHVhdGVkOlxuICogKiBpZiB0aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgYCRwYXJzZXJzYCB0cmFuc2Zvcm1hdGlvbiBwaXBlbGluZSBoYXMgbm90IGNoYW5nZWRcbiAqICogaWYgdGhlIGlucHV0IGhhcyBjb250aW51ZWQgdG8gYmUgaW52YWxpZCBzaW5jZSB0aGUgbW9kZWwgd2lsbCBzdGF5IGBudWxsYFxuICogKiBpZiB0aGUgbW9kZWwgaXMgY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5IGFuZCBub3QgYnkgYSBjaGFuZ2UgdG8gdGhlIGlucHV0IHZhbHVlXG4gKlxuICpcbiAqIE5vdGUsIHRoaXMgZGlyZWN0aXZlIHJlcXVpcmVzIGBuZ01vZGVsYCB0byBiZSBwcmVzZW50LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NoYW5nZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uIGNoYW5nZVxuICogaW4gaW5wdXQgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0NoYW5nZS1kaXJlY3RpdmVcIiBtb2R1bGU9XCJjaGFuZ2VFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjaGFuZ2VFeGFtcGxlJywgW10pXG4gKiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICAgJHNjb3BlLmNvdW50ZXIgPSAwO1xuICogICAgICAgICAgICRzY29wZS5jaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICAgICAgICRzY29wZS5jb3VudGVyKys7XG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjb25maXJtZWRcIiBuZy1jaGFuZ2U9XCJjaGFuZ2UoKVwiIGlkPVwibmctY2hhbmdlLWV4YW1wbGUxXCIgLz5cbiAqICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNvbmZpcm1lZFwiIGlkPVwibmctY2hhbmdlLWV4YW1wbGUyXCIgLz5cbiAqICAgICAgIDxsYWJlbCBmb3I9XCJuZy1jaGFuZ2UtZXhhbXBsZTJcIj5Db25maXJtZWQ8L2xhYmVsPjxiciAvPlxuICogICAgICAgPHR0PmRlYnVnID0ge3tjb25maXJtZWR9fTwvdHQ+PGJyLz5cbiAqICAgICAgIDx0dD5jb3VudGVyID0ge3tjb3VudGVyfX08L3R0Pjxici8+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogICAgIHZhciBjb3VudGVyID0gZWxlbWVudChieS5iaW5kaW5nKCdjb3VudGVyJykpO1xuICogICAgIHZhciBkZWJ1ZyA9IGVsZW1lbnQoYnkuYmluZGluZygnY29uZmlybWVkJykpO1xuICpcbiAqICAgICBpdCgnc2hvdWxkIGV2YWx1YXRlIHRoZSBleHByZXNzaW9uIGlmIGNoYW5naW5nIGZyb20gdmlldycsIGZ1bmN0aW9uKCkge1xuICogICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzAnKTtcbiAqXG4gKiAgICAgICBlbGVtZW50KGJ5LmlkKCduZy1jaGFuZ2UtZXhhbXBsZTEnKSkuY2xpY2soKTtcbiAqXG4gKiAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvQ29udGFpbignMScpO1xuICogICAgICAgZXhwZWN0KGRlYnVnLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gKiAgICAgfSk7XG4gKlxuICogICAgIGl0KCdzaG91bGQgbm90IGV2YWx1YXRlIHRoZSBleHByZXNzaW9uIGlmIGNoYW5naW5nIGZyb20gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGVsZW1lbnQoYnkuaWQoJ25nLWNoYW5nZS1leGFtcGxlMicpKS5jbGljaygpO1xuXG4gKiAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvQ29udGFpbignMCcpO1xuICogICAgICAgZXhwZWN0KGRlYnVnLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gKiAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQ2hhbmdlRGlyZWN0aXZlID0gdmFsdWVGbih7XG4gIHJlc3RyaWN0OiAnQScsXG4gIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcbiAgICBjdHJsLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKSB7XG4gICAgICBzY29wZS4kZXZhbChhdHRyLm5nQ2hhbmdlKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qIGV4cG9ydGVkXG4gIG5nQ2xhc3NEaXJlY3RpdmUsXG4gIG5nQ2xhc3NFdmVuRGlyZWN0aXZlLFxuICBuZ0NsYXNzT2RkRGlyZWN0aXZlXG4qL1xuXG5mdW5jdGlvbiBjbGFzc0RpcmVjdGl2ZShuYW1lLCBzZWxlY3Rvcikge1xuICBuYW1lID0gJ25nQ2xhc3MnICsgbmFtZTtcbiAgdmFyIGluZGV4V2F0Y2hFeHByZXNzaW9uO1xuXG4gIHJldHVybiBbJyRwYXJzZScsIGZ1bmN0aW9uKCRwYXJzZSkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0FDJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIHZhciBjbGFzc0NvdW50cyA9IGVsZW1lbnQuZGF0YSgnJGNsYXNzQ291bnRzJyk7XG4gICAgICAgIHZhciBvbGRNb2R1bG8gPSB0cnVlO1xuICAgICAgICB2YXIgb2xkQ2xhc3NTdHJpbmc7XG5cbiAgICAgICAgaWYgKCFjbGFzc0NvdW50cykge1xuICAgICAgICAgIC8vIFVzZSBjcmVhdGVNYXAoKSB0byBwcmV2ZW50IGNsYXNzIGFzc3VtcHRpb25zIGludm9sdmluZyBwcm9wZXJ0eVxuICAgICAgICAgIC8vIG5hbWVzIGluIE9iamVjdC5wcm90b3R5cGVcbiAgICAgICAgICBjbGFzc0NvdW50cyA9IGNyZWF0ZU1hcCgpO1xuICAgICAgICAgIGVsZW1lbnQuZGF0YSgnJGNsYXNzQ291bnRzJywgY2xhc3NDb3VudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5hbWUgIT09ICduZ0NsYXNzJykge1xuICAgICAgICAgIGlmICghaW5kZXhXYXRjaEV4cHJlc3Npb24pIHtcbiAgICAgICAgICAgIGluZGV4V2F0Y2hFeHByZXNzaW9uID0gJHBhcnNlKCckaW5kZXgnLCBmdW5jdGlvbiBtb2R1bG9Ud28oJGluZGV4KSB7XG4gICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgICAgICAgICAgIHJldHVybiAkaW5kZXggJiAxO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2NvcGUuJHdhdGNoKGluZGV4V2F0Y2hFeHByZXNzaW9uLCBuZ0NsYXNzSW5kZXhXYXRjaEFjdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS4kd2F0Y2goJHBhcnNlKGF0dHJbbmFtZV0sIHRvQ2xhc3NTdHJpbmcpLCBuZ0NsYXNzV2F0Y2hBY3Rpb24pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZENsYXNzZXMoY2xhc3NTdHJpbmcpIHtcbiAgICAgICAgICBjbGFzc1N0cmluZyA9IGRpZ2VzdENsYXNzQ291bnRzKHNwbGl0KGNsYXNzU3RyaW5nKSwgMSk7XG4gICAgICAgICAgYXR0ci4kYWRkQ2xhc3MoY2xhc3NTdHJpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3NlcyhjbGFzc1N0cmluZykge1xuICAgICAgICAgIGNsYXNzU3RyaW5nID0gZGlnZXN0Q2xhc3NDb3VudHMoc3BsaXQoY2xhc3NTdHJpbmcpLCAtMSk7XG4gICAgICAgICAgYXR0ci4kcmVtb3ZlQ2xhc3MoY2xhc3NTdHJpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhvbGRDbGFzc1N0cmluZywgbmV3Q2xhc3NTdHJpbmcpIHtcbiAgICAgICAgICB2YXIgb2xkQ2xhc3NBcnJheSA9IHNwbGl0KG9sZENsYXNzU3RyaW5nKTtcbiAgICAgICAgICB2YXIgbmV3Q2xhc3NBcnJheSA9IHNwbGl0KG5ld0NsYXNzU3RyaW5nKTtcblxuICAgICAgICAgIHZhciB0b1JlbW92ZUFycmF5ID0gYXJyYXlEaWZmZXJlbmNlKG9sZENsYXNzQXJyYXksIG5ld0NsYXNzQXJyYXkpO1xuICAgICAgICAgIHZhciB0b0FkZEFycmF5ID0gYXJyYXlEaWZmZXJlbmNlKG5ld0NsYXNzQXJyYXksIG9sZENsYXNzQXJyYXkpO1xuXG4gICAgICAgICAgdmFyIHRvUmVtb3ZlU3RyaW5nID0gZGlnZXN0Q2xhc3NDb3VudHModG9SZW1vdmVBcnJheSwgLTEpO1xuICAgICAgICAgIHZhciB0b0FkZFN0cmluZyA9IGRpZ2VzdENsYXNzQ291bnRzKHRvQWRkQXJyYXksIDEpO1xuXG4gICAgICAgICAgYXR0ci4kYWRkQ2xhc3ModG9BZGRTdHJpbmcpO1xuICAgICAgICAgIGF0dHIuJHJlbW92ZUNsYXNzKHRvUmVtb3ZlU3RyaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRpZ2VzdENsYXNzQ291bnRzKGNsYXNzQXJyYXksIGNvdW50KSB7XG4gICAgICAgICAgdmFyIGNsYXNzZXNUb1VwZGF0ZSA9IFtdO1xuXG4gICAgICAgICAgZm9yRWFjaChjbGFzc0FycmF5LCBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGlmIChjb3VudCA+IDAgfHwgY2xhc3NDb3VudHNbY2xhc3NOYW1lXSkge1xuICAgICAgICAgICAgICBjbGFzc0NvdW50c1tjbGFzc05hbWVdID0gKGNsYXNzQ291bnRzW2NsYXNzTmFtZV0gfHwgMCkgKyBjb3VudDtcbiAgICAgICAgICAgICAgaWYgKGNsYXNzQ291bnRzW2NsYXNzTmFtZV0gPT09ICsoY291bnQgPiAwKSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXNUb1VwZGF0ZS5wdXNoKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBjbGFzc2VzVG9VcGRhdGUuam9pbignICcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbmdDbGFzc0luZGV4V2F0Y2hBY3Rpb24obmV3TW9kdWxvKSB7XG4gICAgICAgICAgLy8gVGhpcyB3YXRjaC1hY3Rpb24gc2hvdWxkIHJ1biBiZWZvcmUgdGhlIGBuZ0NsYXNzV2F0Y2hBY3Rpb24oKWAsIHRodXMgaXRcbiAgICAgICAgICAvLyBhZGRzL3JlbW92ZXMgYG9sZENsYXNzU3RyaW5nYC4gSWYgdGhlIGBuZ0NsYXNzYCBleHByZXNzaW9uIGhhcyBjaGFuZ2VkIGFzIHdlbGwsIHRoZVxuICAgICAgICAgIC8vIGBuZ0NsYXNzV2F0Y2hBY3Rpb24oKWAgd2lsbCB1cGRhdGUgdGhlIGNsYXNzZXMuXG4gICAgICAgICAgaWYgKG5ld01vZHVsbyA9PT0gc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGFkZENsYXNzZXMob2xkQ2xhc3NTdHJpbmcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW1vdmVDbGFzc2VzKG9sZENsYXNzU3RyaW5nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvbGRNb2R1bG8gPSBuZXdNb2R1bG87XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBuZ0NsYXNzV2F0Y2hBY3Rpb24obmV3Q2xhc3NTdHJpbmcpIHtcbiAgICAgICAgICBpZiAob2xkTW9kdWxvID09PSBzZWxlY3Rvcikge1xuICAgICAgICAgICAgdXBkYXRlQ2xhc3NlcyhvbGRDbGFzc1N0cmluZywgbmV3Q2xhc3NTdHJpbmcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG9sZENsYXNzU3RyaW5nID0gbmV3Q2xhc3NTdHJpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XTtcblxuICAvLyBIZWxwZXJzXG4gIGZ1bmN0aW9uIGFycmF5RGlmZmVyZW5jZSh0b2tlbnMxLCB0b2tlbnMyKSB7XG4gICAgaWYgKCF0b2tlbnMxIHx8ICF0b2tlbnMxLmxlbmd0aCkgcmV0dXJuIFtdO1xuICAgIGlmICghdG9rZW5zMiB8fCAhdG9rZW5zMi5sZW5ndGgpIHJldHVybiB0b2tlbnMxO1xuXG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gICAgb3V0ZXI6XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMxLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdG9rZW4gPSB0b2tlbnMxW2ldO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0b2tlbnMyLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gdG9rZW5zMltqXSkgY29udGludWUgb3V0ZXI7XG4gICAgICB9XG4gICAgICB2YWx1ZXMucHVzaCh0b2tlbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNwbGl0KGNsYXNzU3RyaW5nKSB7XG4gICAgcmV0dXJuIGNsYXNzU3RyaW5nICYmIGNsYXNzU3RyaW5nLnNwbGl0KCcgJyk7XG4gIH1cblxuICBmdW5jdGlvbiB0b0NsYXNzU3RyaW5nKGNsYXNzVmFsdWUpIHtcbiAgICB2YXIgY2xhc3NTdHJpbmcgPSBjbGFzc1ZhbHVlO1xuXG4gICAgaWYgKGlzQXJyYXkoY2xhc3NWYWx1ZSkpIHtcbiAgICAgIGNsYXNzU3RyaW5nID0gY2xhc3NWYWx1ZS5tYXAodG9DbGFzc1N0cmluZykuam9pbignICcpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoY2xhc3NWYWx1ZSkpIHtcbiAgICAgIGNsYXNzU3RyaW5nID0gT2JqZWN0LmtleXMoY2xhc3NWYWx1ZSkuXG4gICAgICAgIGZpbHRlcihmdW5jdGlvbihrZXkpIHsgcmV0dXJuIGNsYXNzVmFsdWVba2V5XTsgfSkuXG4gICAgICAgIGpvaW4oJyAnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3NTdHJpbmc7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NsYXNzXG4gKiBAcmVzdHJpY3QgQUNcbiAqIEBlbGVtZW50IEFOWVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0NsYXNzYCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBkeW5hbWljYWxseSBzZXQgQ1NTIGNsYXNzZXMgb24gYW4gSFRNTCBlbGVtZW50IGJ5IGRhdGFiaW5kaW5nXG4gKiBhbiBleHByZXNzaW9uIHRoYXQgcmVwcmVzZW50cyBhbGwgY2xhc3NlcyB0byBiZSBhZGRlZC5cbiAqXG4gKiBUaGUgZGlyZWN0aXZlIG9wZXJhdGVzIGluIHRocmVlIGRpZmZlcmVudCB3YXlzLCBkZXBlbmRpbmcgb24gd2hpY2ggb2YgdGhyZWUgdHlwZXMgdGhlIGV4cHJlc3Npb25cbiAqIGV2YWx1YXRlcyB0bzpcbiAqXG4gKiAxLiBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZSBzdHJpbmcgc2hvdWxkIGJlIG9uZSBvciBtb3JlIHNwYWNlLWRlbGltaXRlZCBjbGFzc1xuICogbmFtZXMuXG4gKlxuICogMi4gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGFuIG9iamVjdCwgdGhlbiBmb3IgZWFjaCBrZXktdmFsdWUgcGFpciBvZiB0aGVcbiAqIG9iamVjdCB3aXRoIGEgdHJ1dGh5IHZhbHVlIHRoZSBjb3JyZXNwb25kaW5nIGtleSBpcyB1c2VkIGFzIGEgY2xhc3MgbmFtZS5cbiAqXG4gKiAzLiBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYW4gYXJyYXksIGVhY2ggZWxlbWVudCBvZiB0aGUgYXJyYXkgc2hvdWxkIGVpdGhlciBiZSBhIHN0cmluZyBhcyBpblxuICogdHlwZSAxIG9yIGFuIG9iamVjdCBhcyBpbiB0eXBlIDIuIFRoaXMgbWVhbnMgdGhhdCB5b3UgY2FuIG1peCBzdHJpbmdzIGFuZCBvYmplY3RzIHRvZ2V0aGVyIGluIGFuIGFycmF5XG4gKiB0byBnaXZlIHlvdSBtb3JlIGNvbnRyb2wgb3ZlciB3aGF0IENTUyBjbGFzc2VzIGFwcGVhci4gU2VlIHRoZSBjb2RlIGJlbG93IGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICpcbiAqIFRoZSBkaXJlY3RpdmUgd29uJ3QgYWRkIGR1cGxpY2F0ZSBjbGFzc2VzIGlmIGEgcGFydGljdWxhciBjbGFzcyB3YXMgYWxyZWFkeSBzZXQuXG4gKlxuICogV2hlbiB0aGUgZXhwcmVzc2lvbiBjaGFuZ2VzLCB0aGUgcHJldmlvdXNseSBhZGRlZCBjbGFzc2VzIGFyZSByZW1vdmVkIGFuZCBvbmx5IHRoZW4gYXJlIHRoZVxuICogbmV3IGNsYXNzZXMgYWRkZWQuXG4gKlxuICogQGtub3duSXNzdWVcbiAqIFlvdSBzaG91bGQgbm90IHVzZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9ufSBpbiB0aGUgdmFsdWUgb2YgdGhlIGBjbGFzc2BcbiAqIGF0dHJpYnV0ZSwgd2hlbiB1c2luZyB0aGUgYG5nQ2xhc3NgIGRpcmVjdGl2ZSBvbiB0aGUgc2FtZSBlbGVtZW50LlxuICogU2VlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uI2tub3duLWlzc3VlcyBoZXJlfSBmb3IgbW9yZSBpbmZvLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2FkZENsYXNzIGFkZENsYXNzfSAgICAgICB8IGp1c3QgYmVmb3JlIHRoZSBjbGFzcyBpcyBhcHBsaWVkIHRvIHRoZSBlbGVtZW50ICAgfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgcmVtb3ZlQ2xhc3N9IHwganVzdCBiZWZvcmUgdGhlIGNsYXNzIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCB8XG4gKlxuICogIyMjIG5nQ2xhc3MgYW5kIHByZS1leGlzdGluZyBDU1MzIFRyYW5zaXRpb25zL0FuaW1hdGlvbnNcbiAgIFRoZSBuZ0NsYXNzIGRpcmVjdGl2ZSBzdGlsbCBzdXBwb3J0cyBDU1MzIFRyYW5zaXRpb25zL0FuaW1hdGlvbnMgZXZlbiBpZiB0aGV5IGRvIG5vdCBmb2xsb3cgdGhlIG5nQW5pbWF0ZSBDU1MgbmFtaW5nIHN0cnVjdHVyZS5cbiAgIFVwb24gYW5pbWF0aW9uIG5nQW5pbWF0ZSB3aWxsIGFwcGx5IHN1cHBsZW1lbnRhcnkgQ1NTIGNsYXNzZXMgdG8gdHJhY2sgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgYW4gYW5pbWF0aW9uLCBidXQgdGhpcyB3aWxsIG5vdCBoaW5kZXJcbiAgIGFueSBwcmUtZXhpc3RpbmcgQ1NTIHRyYW5zaXRpb25zIGFscmVhZHkgb24gdGhlIGVsZW1lbnQuIFRvIGdldCBhbiBpZGVhIG9mIHdoYXQgaGFwcGVucyBkdXJpbmcgYSBjbGFzcy1iYXNlZCBhbmltYXRpb24sIGJlIHN1cmVcbiAgIHRvIHZpZXcgdGhlIHN0ZXAgYnkgc3RlcCBkZXRhaWxzIG9mIHtAbGluayAkYW5pbWF0ZSNhZGRDbGFzcyAkYW5pbWF0ZS5hZGRDbGFzc30gYW5kXG4gICB7QGxpbmsgJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgJGFuaW1hdGUucmVtb3ZlQ2xhc3N9LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGFzcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLiBUaGUgcmVzdWx0XG4gKiAgIG9mIHRoZSBldmFsdWF0aW9uIGNhbiBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgc3BhY2UgZGVsaW1pdGVkIGNsYXNzXG4gKiAgIG5hbWVzLCBhbiBhcnJheSwgb3IgYSBtYXAgb2YgY2xhc3MgbmFtZXMgdG8gYm9vbGVhbiB2YWx1ZXMuIEluIHRoZSBjYXNlIG9mIGEgbWFwLCB0aGVcbiAqICAgbmFtZXMgb2YgdGhlIHByb3BlcnRpZXMgd2hvc2UgdmFsdWVzIGFyZSB0cnV0aHkgd2lsbCBiZSBhZGRlZCBhcyBjc3MgY2xhc3NlcyB0byB0aGVcbiAqICAgZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJhc2ljXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctY2xhc3NcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8cCBuZy1jbGFzcz1cIntzdHJpa2U6IGRlbGV0ZWQsIGJvbGQ6IGltcG9ydGFudCwgJ2hhcy1lcnJvcic6IGVycm9yfVwiPk1hcCBTeW50YXggRXhhbXBsZTwvcD5cbiAgICAgICA8bGFiZWw+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiZGVsZXRlZFwiPlxuICAgICAgICAgIGRlbGV0ZWQgKGFwcGx5IFwic3RyaWtlXCIgY2xhc3MpXG4gICAgICAgPC9sYWJlbD48YnI+XG4gICAgICAgPGxhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImltcG9ydGFudFwiPlxuICAgICAgICAgIGltcG9ydGFudCAoYXBwbHkgXCJib2xkXCIgY2xhc3MpXG4gICAgICAgPC9sYWJlbD48YnI+XG4gICAgICAgPGxhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImVycm9yXCI+XG4gICAgICAgICAgZXJyb3IgKGFwcGx5IFwiaGFzLWVycm9yXCIgY2xhc3MpXG4gICAgICAgPC9sYWJlbD5cbiAgICAgICA8aHI+XG4gICAgICAgPHAgbmctY2xhc3M9XCJzdHlsZVwiPlVzaW5nIFN0cmluZyBTeW50YXg8L3A+XG4gICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJzdHlsZVwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCBzdHJpa2UgcmVkXCIgYXJpYS1sYWJlbD1cIlR5cGU6IGJvbGQgc3RyaWtlIHJlZFwiPlxuICAgICAgIDxocj5cbiAgICAgICA8cCBuZy1jbGFzcz1cIltzdHlsZTEsIHN0eWxlMiwgc3R5bGUzXVwiPlVzaW5nIEFycmF5IFN5bnRheDwvcD5cbiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJzdHlsZTFcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIiBhcmlhLWxhYmVsPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiPjxicj5cbiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJzdHlsZTJcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIiBhcmlhLWxhYmVsPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZCAyXCI+PGJyPlxuICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInN0eWxlM1wiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZFwiIGFyaWEtbGFiZWw9XCJUeXBlOiBib2xkLCBzdHJpa2Ugb3IgcmVkIDNcIj48YnI+XG4gICAgICAgPGhyPlxuICAgICAgIDxwIG5nLWNsYXNzPVwiW3N0eWxlNCwge29yYW5nZTogd2FybmluZ31dXCI+VXNpbmcgQXJyYXkgYW5kIE1hcCBTeW50YXg8L3A+XG4gICAgICAgPGlucHV0IG5nLW1vZGVsPVwic3R5bGU0XCIgcGxhY2Vob2xkZXI9XCJUeXBlOiBib2xkLCBzdHJpa2VcIiBhcmlhLWxhYmVsPVwiVHlwZTogYm9sZCwgc3RyaWtlXCI+PGJyPlxuICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJ3YXJuaW5nXCI+IHdhcm5pbmcgKGFwcGx5IFwib3JhbmdlXCIgY2xhc3MpPC9sYWJlbD5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLnN0cmlrZSB7XG4gICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO1xuICAgICAgIH1cbiAgICAgICAuYm9sZCB7XG4gICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgIH1cbiAgICAgICAucmVkIHtcbiAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICB9XG4gICAgICAgLmhhcy1lcnJvciB7XG4gICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHllbGxvdztcbiAgICAgICB9XG4gICAgICAgLm9yYW5nZSB7XG4gICAgICAgICAgIGNvbG9yOiBvcmFuZ2U7XG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICB2YXIgcHMgPSBlbGVtZW50LmFsbChieS5jc3MoJ3AnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIGxldCB5b3UgdG9nZ2xlIHRoZSBjbGFzcycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9ib2xkLyk7XG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9oYXMtZXJyb3IvKTtcblxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnaW1wb3J0YW50JykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvTWF0Y2goL2JvbGQvKTtcblxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnZXJyb3InKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChwcy5maXJzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9NYXRjaCgvaGFzLWVycm9yLyk7XG4gICAgICAgfSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIGxldCB5b3UgdG9nZ2xlIHN0cmluZyBleGFtcGxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocHMuZ2V0KDEpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZScpKS5jbGVhcigpO1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGUnKSkuc2VuZEtleXMoJ3JlZCcpO1xuICAgICAgICAgZXhwZWN0KHBzLmdldCgxKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJ3JlZCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ2FycmF5IGV4YW1wbGUgc2hvdWxkIGhhdmUgMyBjbGFzc2VzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocHMuZ2V0KDIpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTEnKSkuc2VuZEtleXMoJ2JvbGQnKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3N0eWxlMicpKS5zZW5kS2V5cygnc3RyaWtlJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTMnKSkuc2VuZEtleXMoJ3JlZCcpO1xuICAgICAgICAgZXhwZWN0KHBzLmdldCgyKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJ2JvbGQgc3RyaWtlIHJlZCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ2FycmF5IHdpdGggbWFwIGV4YW1wbGUgc2hvdWxkIGhhdmUgMiBjbGFzc2VzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocHMubGFzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTQnKSkuc2VuZEtleXMoJ2JvbGQnKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3dhcm5pbmcnKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChwcy5sYXN0KCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b0JlKCdib2xkIG9yYW5nZScpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG5cbiAgIEBleGFtcGxlXG4gICAjIyMgQW5pbWF0aW9uc1xuXG4gICBUaGUgZXhhbXBsZSBiZWxvdyBkZW1vbnN0cmF0ZXMgaG93IHRvIHBlcmZvcm0gYW5pbWF0aW9ucyB1c2luZyBuZ0NsYXNzLlxuXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBuYW1lPVwibmctY2xhc3NcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxpbnB1dCBpZD1cInNldGJ0blwiIHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cInNldFwiIG5nLWNsaWNrPVwibXlWYXI9J215LWNsYXNzJ1wiPlxuICAgICAgPGlucHV0IGlkPVwiY2xlYXJidG5cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJjbGVhclwiIG5nLWNsaWNrPVwibXlWYXI9JydcIj5cbiAgICAgIDxicj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiYmFzZS1jbGFzc1wiIG5nLWNsYXNzPVwibXlWYXJcIj5TYW1wbGUgVGV4dDwvc3Bhbj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLmJhc2UtY2xhc3Mge1xuICAgICAgICAgdHJhbnNpdGlvbjphbGwgY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSAwLjVzO1xuICAgICAgIH1cblxuICAgICAgIC5iYXNlLWNsYXNzLm15LWNsYXNzIHtcbiAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgICBmb250LXNpemU6M2VtO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1jbGFzcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcblxuICAgICAgICAgZWxlbWVudChieS5pZCgnc2V0YnRuJykpLmNsaWNrKCk7XG5cbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLmJhc2UtY2xhc3MnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcblxuICAgICAgICAgZWxlbWVudChieS5pZCgnY2xlYXJidG4nKSkuY2xpY2soKTtcblxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcuYmFzZS1jbGFzcycpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC5cbiAgICAgICAgICAgdG9NYXRjaCgvbXktY2xhc3MvKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdDbGFzc0RpcmVjdGl2ZSA9IGNsYXNzRGlyZWN0aXZlKCcnLCB0cnVlKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NsYXNzT2RkXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdDbGFzc09kZGAgYW5kIGBuZ0NsYXNzRXZlbmAgZGlyZWN0aXZlcyB3b3JrIGV4YWN0bHkgYXNcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyBuZ0NsYXNzfSwgZXhjZXB0IHRoZXkgd29yayBpblxuICogY29uanVuY3Rpb24gd2l0aCBgbmdSZXBlYXRgIGFuZCB0YWtlIGVmZmVjdCBvbmx5IG9uIG9kZCAoZXZlbikgcm93cy5cbiAqXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCBvbmx5IHdpdGhpbiB0aGUgc2NvcGUgb2YgYW5cbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9LlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2FkZENsYXNzIGFkZENsYXNzfSAgICAgICB8IGp1c3QgYmVmb3JlIHRoZSBjbGFzcyBpcyBhcHBsaWVkIHRvIHRoZSBlbGVtZW50ICAgfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgcmVtb3ZlQ2xhc3N9IHwganVzdCBiZWZvcmUgdGhlIGNsYXNzIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCB8XG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3NPZGQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC4gVGhlIHJlc3VsdFxuICogICBvZiB0aGUgZXZhbHVhdGlvbiBjYW4gYmUgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHNwYWNlIGRlbGltaXRlZCBjbGFzcyBuYW1lcyBvciBhbiBhcnJheS5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNsYXNzLW9kZFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8b2wgbmctaW5pdD1cIm5hbWVzPVsnSm9obicsICdNYXJ5JywgJ0NhdGUnLCAnU3V6J11cIj5cbiAgICAgICAgICA8bGkgbmctcmVwZWF0PVwibmFtZSBpbiBuYW1lc1wiPlxuICAgICAgICAgICA8c3BhbiBuZy1jbGFzcy1vZGQ9XCInb2RkJ1wiIG5nLWNsYXNzLWV2ZW49XCInZXZlbidcIj5cbiAgICAgICAgICAgICB7e25hbWV9fVxuICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC9vbD5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLm9kZCB7XG4gICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgIH1cbiAgICAgICAuZXZlbiB7XG4gICAgICAgICBjb2xvcjogYmx1ZTtcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xhc3Mtb2RkIGFuZCBuZy1jbGFzcy1ldmVuJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5yZXBlYXRlcignbmFtZSBpbiBuYW1lcycpLnJvdygwKS5jb2x1bW4oJ25hbWUnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cbiAgICAgICAgICAgdG9NYXRjaCgvb2RkLyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5yZXBlYXRlcignbmFtZSBpbiBuYW1lcycpLnJvdygxKS5jb2x1bW4oJ25hbWUnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5cbiAgICAgICAgICAgdG9NYXRjaCgvZXZlbi8pO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKlxuICogPGhyIC8+XG4gKiBAZXhhbXBsZVxuICogQW4gZXhhbXBsZSBvbiBob3cgdG8gaW1wbGVtZW50IGFuaW1hdGlvbnMgdXNpbmcgYG5nQ2xhc3NPZGRgOlxuICpcbiAgIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1jbGFzcy1vZGQtYW5pbWF0ZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctaW5pdD1cIml0ZW1zPVsnSXRlbSAzJywgJ0l0ZW0gMicsICdJdGVtIDEnLCAnSXRlbSAwJ11cIj5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJpdGVtcy51bnNoaWZ0KCdJdGVtICcgKyBpdGVtcy5sZW5ndGgpXCI+QWRkIGl0ZW08L2J1dHRvbj5cbiAgICAgICAgIDxociAvPlxuICAgICAgICAgPHRhYmxlPlxuICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiaXRlbSBpbiBpdGVtc1wiIG5nLWNsYXNzLW9kZD1cIidvZGQnXCI+XG4gICAgICAgICAgICAgPHRkPnt7IGl0ZW0gfX08L3RkPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgPC90YWJsZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLm9kZCB7XG4gICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAwLCAwLjI1KTtcbiAgICAgICB9XG5cbiAgICAgICAub2RkLWFkZCwgLm9kZC1yZW1vdmUge1xuICAgICAgICAgdHJhbnNpdGlvbjogMS41cztcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgYWRkIG5ldyBlbnRyaWVzIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpc3QnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBidXR0b24gPSBlbGVtZW50KGJ5LmJ1dHRvblRleHQoJ0FkZCBpdGVtJykpO1xuICAgICAgICAgdmFyIHJvd3MgPSBlbGVtZW50LmFsbChieS5yZXBlYXRlcignaXRlbSBpbiBpdGVtcycpKTtcblxuICAgICAgICAgZXhwZWN0KHJvd3MuY291bnQoKSkudG9CZSg0KTtcbiAgICAgICAgIGV4cGVjdChyb3dzLmdldCgwKS5nZXRUZXh0KCkpLnRvQmUoJ0l0ZW0gMycpO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDEpLmdldFRleHQoKSkudG9CZSgnSXRlbSAyJyk7XG5cbiAgICAgICAgIGJ1dHRvbi5jbGljaygpO1xuXG4gICAgICAgICBleHBlY3Qocm93cy5jb3VudCgpKS50b0JlKDUpO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnSXRlbSA0Jyk7XG4gICAgICAgICBleHBlY3Qocm93cy5nZXQoMSkuZ2V0VGV4dCgpKS50b0JlKCdJdGVtIDMnKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgYWRkIG9kZCBjbGFzcyB0byBvZGQgZW50cmllcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIGJ1dHRvbiA9IGVsZW1lbnQoYnkuYnV0dG9uVGV4dCgnQWRkIGl0ZW0nKSk7XG4gICAgICAgICB2YXIgcm93cyA9IGVsZW1lbnQuYWxsKGJ5LnJlcGVhdGVyKCdpdGVtIGluIGl0ZW1zJykpO1xuXG4gICAgICAgICBleHBlY3Qocm93cy5nZXQoMCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b01hdGNoKC9vZGQvKTtcbiAgICAgICAgIGV4cGVjdChyb3dzLmdldCgxKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9vZGQvKTtcblxuICAgICAgICAgYnV0dG9uLmNsaWNrKCk7XG5cbiAgICAgICAgIGV4cGVjdChyb3dzLmdldCgwKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvTWF0Y2goL29kZC8pO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDEpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkubm90LnRvTWF0Y2goL29kZC8pO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ0NsYXNzT2RkRGlyZWN0aXZlID0gY2xhc3NEaXJlY3RpdmUoJ09kZCcsIDApO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ2xhc3NFdmVuXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdDbGFzc09kZGAgYW5kIGBuZ0NsYXNzRXZlbmAgZGlyZWN0aXZlcyB3b3JrIGV4YWN0bHkgYXNcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGFzcyBuZ0NsYXNzfSwgZXhjZXB0IHRoZXkgd29yayBpblxuICogY29uanVuY3Rpb24gd2l0aCBgbmdSZXBlYXRgIGFuZCB0YWtlIGVmZmVjdCBvbmx5IG9uIG9kZCAoZXZlbikgcm93cy5cbiAqXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYXBwbGllZCBvbmx5IHdpdGhpbiB0aGUgc2NvcGUgb2YgYW5cbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9LlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2FkZENsYXNzIGFkZENsYXNzfSAgICAgICB8IGp1c3QgYmVmb3JlIHRoZSBjbGFzcyBpcyBhcHBsaWVkIHRvIHRoZSBlbGVtZW50ICAgfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgcmVtb3ZlQ2xhc3N9IHwganVzdCBiZWZvcmUgdGhlIGNsYXNzIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCB8XG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3NFdmVuIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWwuIFRoZVxuICogICByZXN1bHQgb2YgdGhlIGV2YWx1YXRpb24gY2FuIGJlIGEgc3RyaW5nIHJlcHJlc2VudGluZyBzcGFjZSBkZWxpbWl0ZWQgY2xhc3MgbmFtZXMgb3IgYW4gYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1jbGFzcy1ldmVuXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxvbCBuZy1pbml0PVwibmFtZXM9WydKb2huJywgJ01hcnknLCAnQ2F0ZScsICdTdXonXVwiPlxuICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJuYW1lIGluIG5hbWVzXCI+XG4gICAgICAgICAgIDxzcGFuIG5nLWNsYXNzLW9kZD1cIidvZGQnXCIgbmctY2xhc3MtZXZlbj1cIidldmVuJ1wiPlxuICAgICAgICAgICAgIHt7bmFtZX19ICZuYnNwOyAmbmJzcDsgJm5ic3A7XG4gICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L29sPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAub2RkIHtcbiAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgfVxuICAgICAgIC5ldmVuIHtcbiAgICAgICAgIGNvbG9yOiBibHVlO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1jbGFzcy1vZGQgYW5kIG5nLWNsYXNzLWV2ZW4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDApLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxuICAgICAgICAgICB0b01hdGNoKC9vZGQvKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDEpLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxuICAgICAgICAgICB0b01hdGNoKC9ldmVuLyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqXG4gKiA8aHIgLz5cbiAqIEBleGFtcGxlXG4gKiBBbiBleGFtcGxlIG9uIGhvdyB0byBpbXBsZW1lbnQgYW5pbWF0aW9ucyB1c2luZyBgbmdDbGFzc0V2ZW5gOlxuICpcbiAgIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1jbGFzcy1ldmVuLWFuaW1hdGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWluaXQ9XCJpdGVtcz1bJ0l0ZW0gMycsICdJdGVtIDInLCAnSXRlbSAxJywgJ0l0ZW0gMCddXCI+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiaXRlbXMudW5zaGlmdCgnSXRlbSAnICsgaXRlbXMubGVuZ3RoKVwiPkFkZCBpdGVtPC9idXR0b24+XG4gICAgICAgICA8aHIgLz5cbiAgICAgICAgIDx0YWJsZT5cbiAgICAgICAgICAgPHRyIG5nLXJlcGVhdD1cIml0ZW0gaW4gaXRlbXNcIiBuZy1jbGFzcy1ldmVuPVwiJ2V2ZW4nXCI+XG4gICAgICAgICAgICAgPHRkPnt7IGl0ZW0gfX08L3RkPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgPC90YWJsZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLmV2ZW4ge1xuICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMCwgMC4yNSk7XG4gICAgICAgfVxuXG4gICAgICAgLmV2ZW4tYWRkLCAuZXZlbi1yZW1vdmUge1xuICAgICAgICAgdHJhbnNpdGlvbjogMS41cztcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgYWRkIG5ldyBlbnRyaWVzIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpc3QnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBidXR0b24gPSBlbGVtZW50KGJ5LmJ1dHRvblRleHQoJ0FkZCBpdGVtJykpO1xuICAgICAgICAgdmFyIHJvd3MgPSBlbGVtZW50LmFsbChieS5yZXBlYXRlcignaXRlbSBpbiBpdGVtcycpKTtcblxuICAgICAgICAgZXhwZWN0KHJvd3MuY291bnQoKSkudG9CZSg0KTtcbiAgICAgICAgIGV4cGVjdChyb3dzLmdldCgwKS5nZXRUZXh0KCkpLnRvQmUoJ0l0ZW0gMycpO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDEpLmdldFRleHQoKSkudG9CZSgnSXRlbSAyJyk7XG5cbiAgICAgICAgIGJ1dHRvbi5jbGljaygpO1xuXG4gICAgICAgICBleHBlY3Qocm93cy5jb3VudCgpKS50b0JlKDUpO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnSXRlbSA0Jyk7XG4gICAgICAgICBleHBlY3Qocm93cy5nZXQoMSkuZ2V0VGV4dCgpKS50b0JlKCdJdGVtIDMnKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgYWRkIGV2ZW4gY2xhc3MgdG8gZXZlbiBlbnRyaWVzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgYnV0dG9uID0gZWxlbWVudChieS5idXR0b25UZXh0KCdBZGQgaXRlbScpKTtcbiAgICAgICAgIHZhciByb3dzID0gZWxlbWVudC5hbGwoYnkucmVwZWF0ZXIoJ2l0ZW0gaW4gaXRlbXMnKSk7XG5cbiAgICAgICAgIGV4cGVjdChyb3dzLmdldCgwKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLm5vdC50b01hdGNoKC9ldmVuLyk7XG4gICAgICAgICBleHBlY3Qocm93cy5nZXQoMSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b01hdGNoKC9ldmVuLyk7XG5cbiAgICAgICAgIGJ1dHRvbi5jbGljaygpO1xuXG4gICAgICAgICBleHBlY3Qocm93cy5nZXQoMCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5ub3QudG9NYXRjaCgvZXZlbi8pO1xuICAgICAgICAgZXhwZWN0KHJvd3MuZ2V0KDEpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9NYXRjaCgvZXZlbi8pO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ0NsYXNzRXZlbkRpcmVjdGl2ZSA9IGNsYXNzRGlyZWN0aXZlKCdFdmVuJywgMSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDbG9ha1xuICogQHJlc3RyaWN0IEFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nQ2xvYWtgIGRpcmVjdGl2ZSBpcyB1c2VkIHRvIHByZXZlbnQgdGhlIEFuZ3VsYXJKUyBodG1sIHRlbXBsYXRlIGZyb20gYmVpbmcgYnJpZWZseVxuICogZGlzcGxheWVkIGJ5IHRoZSBicm93c2VyIGluIGl0cyByYXcgKHVuY29tcGlsZWQpIGZvcm0gd2hpbGUgeW91ciBhcHBsaWNhdGlvbiBpcyBsb2FkaW5nLiBVc2UgdGhpc1xuICogZGlyZWN0aXZlIHRvIGF2b2lkIHRoZSB1bmRlc2lyYWJsZSBmbGlja2VyIGVmZmVjdCBjYXVzZWQgYnkgdGhlIGh0bWwgdGVtcGxhdGUgZGlzcGxheS5cbiAqXG4gKiBUaGUgZGlyZWN0aXZlIGNhbiBiZSBhcHBsaWVkIHRvIHRoZSBgPGJvZHk+YCBlbGVtZW50LCBidXQgdGhlIHByZWZlcnJlZCB1c2FnZSBpcyB0byBhcHBseVxuICogbXVsdGlwbGUgYG5nQ2xvYWtgIGRpcmVjdGl2ZXMgdG8gc21hbGwgcG9ydGlvbnMgb2YgdGhlIHBhZ2UgdG8gcGVybWl0IHByb2dyZXNzaXZlIHJlbmRlcmluZ1xuICogb2YgdGhlIGJyb3dzZXIgdmlldy5cbiAqXG4gKiBgbmdDbG9ha2Agd29ya3MgaW4gY29vcGVyYXRpb24gd2l0aCB0aGUgZm9sbG93aW5nIGNzcyBydWxlIGVtYmVkZGVkIHdpdGhpbiBgYW5ndWxhci5qc2AgYW5kXG4gKiBgYW5ndWxhci5taW4uanNgLlxuICogRm9yIENTUCBtb2RlIHBsZWFzZSBhZGQgYGFuZ3VsYXItY3NwLmNzc2AgdG8geW91ciBodG1sIGZpbGUgKHNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ3NwIG5nQ3NwfSkuXG4gKlxuICogYGBgY3NzXG4gKiBbbmdcXDpjbG9ha10sIFtuZy1jbG9ha10sIFtkYXRhLW5nLWNsb2FrXSwgW3gtbmctY2xvYWtdLCAubmctY2xvYWssIC54LW5nLWNsb2FrIHtcbiAqICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICogfVxuICogYGBgXG4gKlxuICogV2hlbiB0aGlzIGNzcyBydWxlIGlzIGxvYWRlZCBieSB0aGUgYnJvd3NlciwgYWxsIGh0bWwgZWxlbWVudHMgKGluY2x1ZGluZyB0aGVpciBjaGlsZHJlbikgdGhhdFxuICogYXJlIHRhZ2dlZCB3aXRoIHRoZSBgbmdDbG9ha2AgZGlyZWN0aXZlIGFyZSBoaWRkZW4uIFdoZW4gQW5ndWxhckpTIGVuY291bnRlcnMgdGhpcyBkaXJlY3RpdmVcbiAqIGR1cmluZyB0aGUgY29tcGlsYXRpb24gb2YgdGhlIHRlbXBsYXRlIGl0IGRlbGV0ZXMgdGhlIGBuZ0Nsb2FrYCBlbGVtZW50IGF0dHJpYnV0ZSwgbWFraW5nXG4gKiB0aGUgY29tcGlsZWQgZWxlbWVudCB2aXNpYmxlLlxuICpcbiAqIEZvciB0aGUgYmVzdCByZXN1bHQsIHRoZSBgYW5ndWxhci5qc2Agc2NyaXB0IG11c3QgYmUgbG9hZGVkIGluIHRoZSBoZWFkIHNlY3Rpb24gb2YgdGhlIGh0bWxcbiAqIGRvY3VtZW50OyBhbHRlcm5hdGl2ZWx5LCB0aGUgY3NzIHJ1bGUgYWJvdmUgbXVzdCBiZSBpbmNsdWRlZCBpbiB0aGUgZXh0ZXJuYWwgc3R5bGVzaGVldCBvZiB0aGVcbiAqIGFwcGxpY2F0aW9uLlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctY2xvYWtcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPGRpdiBpZD1cInRlbXBsYXRlMVwiIG5nLWNsb2FrPnt7ICdoZWxsbycgfX08L2Rpdj5cbiAgICAgICAgPGRpdiBpZD1cInRlbXBsYXRlMlwiIGNsYXNzPVwibmctY2xvYWtcIj57eyAnd29ybGQnIH19PC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgcmVtb3ZlIHRoZSB0ZW1wbGF0ZSBkaXJlY3RpdmUgYW5kIGNzcyBjbGFzcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KCQoJyN0ZW1wbGF0ZTEnKS5nZXRBdHRyaWJ1dGUoJ25nLWNsb2FrJykpLlxuICAgICAgICAgICB0b0JlTnVsbCgpO1xuICAgICAgICAgZXhwZWN0KCQoJyN0ZW1wbGF0ZTInKS5nZXRBdHRyaWJ1dGUoJ25nLWNsb2FrJykpLlxuICAgICAgICAgICB0b0JlTnVsbCgpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKlxuICovXG52YXIgbmdDbG9ha0RpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHtcbiAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xuICAgIGF0dHIuJHNldCgnbmdDbG9haycsIHVuZGVmaW5lZCk7XG4gICAgZWxlbWVudC5yZW1vdmVDbGFzcygnbmctY2xvYWsnKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDb250cm9sbGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nQ29udHJvbGxlcmAgZGlyZWN0aXZlIGF0dGFjaGVzIGEgY29udHJvbGxlciBjbGFzcyB0byB0aGUgdmlldy4gVGhpcyBpcyBhIGtleSBhc3BlY3Qgb2YgaG93IGFuZ3VsYXJcbiAqIHN1cHBvcnRzIHRoZSBwcmluY2lwbGVzIGJlaGluZCB0aGUgTW9kZWwtVmlldy1Db250cm9sbGVyIGRlc2lnbiBwYXR0ZXJuLlxuICpcbiAqIE1WQyBjb21wb25lbnRzIGluIGFuZ3VsYXI6XG4gKlxuICogKiBNb2RlbCDigJQgTW9kZWxzIGFyZSB0aGUgcHJvcGVydGllcyBvZiBhIHNjb3BlOyBzY29wZXMgYXJlIGF0dGFjaGVkIHRvIHRoZSBET00gd2hlcmUgc2NvcGUgcHJvcGVydGllc1xuICogICBhcmUgYWNjZXNzZWQgdGhyb3VnaCBiaW5kaW5ncy5cbiAqICogVmlldyDigJQgVGhlIHRlbXBsYXRlIChIVE1MIHdpdGggZGF0YSBiaW5kaW5ncykgdGhhdCBpcyByZW5kZXJlZCBpbnRvIHRoZSBWaWV3LlxuICogKiBDb250cm9sbGVyIOKAlCBUaGUgYG5nQ29udHJvbGxlcmAgZGlyZWN0aXZlIHNwZWNpZmllcyBhIENvbnRyb2xsZXIgY2xhc3M7IHRoZSBjbGFzcyBjb250YWlucyBidXNpbmVzc1xuICogICBsb2dpYyBiZWhpbmQgdGhlIGFwcGxpY2F0aW9uIHRvIGRlY29yYXRlIHRoZSBzY29wZSB3aXRoIGZ1bmN0aW9ucyBhbmQgdmFsdWVzXG4gKlxuICogTm90ZSB0aGF0IHlvdSBjYW4gYWxzbyBhdHRhY2ggY29udHJvbGxlcnMgdG8gdGhlIERPTSBieSBkZWNsYXJpbmcgaXQgaW4gYSByb3V0ZSBkZWZpbml0aW9uXG4gKiB2aWEgdGhlIHtAbGluayBuZ1JvdXRlLiRyb3V0ZSAkcm91dGV9IHNlcnZpY2UuIEEgY29tbW9uIG1pc3Rha2UgaXMgdG8gZGVjbGFyZSB0aGUgY29udHJvbGxlclxuICogYWdhaW4gdXNpbmcgYG5nLWNvbnRyb2xsZXJgIGluIHRoZSB0ZW1wbGF0ZSBpdHNlbGYuICBUaGlzIHdpbGwgY2F1c2UgdGhlIGNvbnRyb2xsZXIgdG8gYmUgYXR0YWNoZWRcbiAqIGFuZCBleGVjdXRlZCB0d2ljZS5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBzY29wZVxuICogQHByaW9yaXR5IDUwMFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0NvbnRyb2xsZXIgTmFtZSBvZiBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHJlZ2lzdGVyZWQgd2l0aCB0aGUgY3VycmVudFxuICoge0BsaW5rIG5nLiRjb250cm9sbGVyUHJvdmlkZXIgJGNvbnRyb2xsZXJQcm92aWRlcn0gb3IgYW4ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn1cbiAqIHRoYXQgb24gdGhlIGN1cnJlbnQgc2NvcGUgZXZhbHVhdGVzIHRvIGEgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKlxuICogVGhlIGNvbnRyb2xsZXIgaW5zdGFuY2UgY2FuIGJlIHB1Ymxpc2hlZCBpbnRvIGEgc2NvcGUgcHJvcGVydHkgYnkgc3BlY2lmeWluZ1xuICogYG5nLWNvbnRyb2xsZXI9XCJhcyBwcm9wZXJ0eU5hbWVcImAuXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgaXMgYSBzaW1wbGUgZm9ybSBmb3IgZWRpdGluZyB1c2VyIGNvbnRhY3QgaW5mb3JtYXRpb24uIEFkZGluZywgcmVtb3ZpbmcsIGNsZWFyaW5nLCBhbmRcbiAqIGdyZWV0aW5nIGFyZSBtZXRob2RzIGRlY2xhcmVkIG9uIHRoZSBjb250cm9sbGVyIChzZWUgc291cmNlIHRhYikuIFRoZXNlIG1ldGhvZHMgY2FuXG4gKiBlYXNpbHkgYmUgY2FsbGVkIGZyb20gdGhlIEFuZ3VsYXJKUyBtYXJrdXAuIEFueSBjaGFuZ2VzIHRvIHRoZSBkYXRhIGFyZSBhdXRvbWF0aWNhbGx5IHJlZmxlY3RlZFxuICogaW4gdGhlIFZpZXcgd2l0aG91dCB0aGUgbmVlZCBmb3IgYSBtYW51YWwgdXBkYXRlLlxuICpcbiAqIFR3byBkaWZmZXJlbnQgZGVjbGFyYXRpb24gc3R5bGVzIGFyZSBpbmNsdWRlZCBiZWxvdzpcbiAqXG4gKiAqIG9uZSBiaW5kcyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGRpcmVjdGx5IG9udG8gdGhlIGNvbnRyb2xsZXIgdXNpbmcgYHRoaXNgOlxuICogYG5nLWNvbnRyb2xsZXI9XCJTZXR0aW5nc0NvbnRyb2xsZXIxIGFzIHNldHRpbmdzXCJgXG4gKiAqIG9uZSBpbmplY3RzIGAkc2NvcGVgIGludG8gdGhlIGNvbnRyb2xsZXI6XG4gKiBgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjJcImBcbiAqXG4gKiBUaGUgc2Vjb25kIG9wdGlvbiBpcyBtb3JlIGNvbW1vbiBpbiB0aGUgQW5ndWxhckpTIGNvbW11bml0eSwgYW5kIGlzIGdlbmVyYWxseSB1c2VkIGluIGJvaWxlcnBsYXRlc1xuICogYW5kIGluIHRoaXMgZ3VpZGUuIEhvd2V2ZXIsIHRoZXJlIGFyZSBhZHZhbnRhZ2VzIHRvIGJpbmRpbmcgcHJvcGVydGllcyBkaXJlY3RseSB0byB0aGUgY29udHJvbGxlclxuICogYW5kIGF2b2lkaW5nIHNjb3BlLlxuICpcbiAqICogVXNpbmcgYGNvbnRyb2xsZXIgYXNgIG1ha2VzIGl0IG9idmlvdXMgd2hpY2ggY29udHJvbGxlciB5b3UgYXJlIGFjY2Vzc2luZyBpbiB0aGUgdGVtcGxhdGUgd2hlblxuICogbXVsdGlwbGUgY29udHJvbGxlcnMgYXBwbHkgdG8gYW4gZWxlbWVudC5cbiAqICogSWYgeW91IGFyZSB3cml0aW5nIHlvdXIgY29udHJvbGxlcnMgYXMgY2xhc3NlcyB5b3UgaGF2ZSBlYXNpZXIgYWNjZXNzIHRvIHRoZSBwcm9wZXJ0aWVzIGFuZFxuICogbWV0aG9kcywgd2hpY2ggd2lsbCBhcHBlYXIgb24gdGhlIHNjb3BlLCBmcm9tIGluc2lkZSB0aGUgY29udHJvbGxlciBjb2RlLlxuICogKiBTaW5jZSB0aGVyZSBpcyBhbHdheXMgYSBgLmAgaW4gdGhlIGJpbmRpbmdzLCB5b3UgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBwcm90b3R5cGFsXG4gKiBpbmhlcml0YW5jZSBtYXNraW5nIHByaW1pdGl2ZXMuXG4gKlxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyB0aGUgYGNvbnRyb2xsZXIgYXNgIHN5bnRheC5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdDb250cm9sbGVyQXNcIiBtb2R1bGU9XCJjb250cm9sbGVyQXNFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICA8ZGl2IGlkPVwiY3RybC1hcy1leG1wbFwiIG5nLWNvbnRyb2xsZXI9XCJTZXR0aW5nc0NvbnRyb2xsZXIxIGFzIHNldHRpbmdzXCI+XG4gKiAgICAgIDxsYWJlbD5OYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInNldHRpbmdzLm5hbWVcIi8+PC9sYWJlbD5cbiAqICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNldHRpbmdzLmdyZWV0KClcIj5ncmVldDwvYnV0dG9uPjxici8+XG4gKiAgICAgIENvbnRhY3Q6XG4gKiAgICAgIDx1bD5cbiAqICAgICAgICA8bGkgbmctcmVwZWF0PVwiY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0c1wiPlxuICogICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cImNvbnRhY3QudHlwZVwiIGFyaWEtbGFiZWw9XCJDb250YWN0IG1ldGhvZFwiIGlkPVwic2VsZWN0X3t7JGluZGV4fX1cIj5cbiAqICAgICAgICAgICAgIDxvcHRpb24+cGhvbmU8L29wdGlvbj5cbiAqICAgICAgICAgICAgIDxvcHRpb24+ZW1haWw8L29wdGlvbj5cbiAqICAgICAgICAgIDwvc2VsZWN0PlxuICogICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJjb250YWN0LnZhbHVlXCIgYXJpYS1sYWJlbGxlZGJ5PVwic2VsZWN0X3t7JGluZGV4fX1cIiAvPlxuICogICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNldHRpbmdzLmNsZWFyQ29udGFjdChjb250YWN0KVwiPmNsZWFyPC9idXR0b24+XG4gKiAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic2V0dGluZ3MucmVtb3ZlQ29udGFjdChjb250YWN0KVwiIGFyaWEtbGFiZWw9XCJSZW1vdmVcIj5YPC9idXR0b24+XG4gKiAgICAgICAgPC9saT5cbiAqICAgICAgICA8bGk+PGJ1dHRvbiBuZy1jbGljaz1cInNldHRpbmdzLmFkZENvbnRhY3QoKVwiPmFkZDwvYnV0dG9uPjwvbGk+XG4gKiAgICAgPC91bD5cbiAqICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICAgIGFuZ3VsYXIubW9kdWxlKCdjb250cm9sbGVyQXNFeGFtcGxlJywgW10pXG4gKiAgICAgIC5jb250cm9sbGVyKCdTZXR0aW5nc0NvbnRyb2xsZXIxJywgU2V0dGluZ3NDb250cm9sbGVyMSk7XG4gKlxuICogICAgZnVuY3Rpb24gU2V0dGluZ3NDb250cm9sbGVyMSgpIHtcbiAqICAgICAgdGhpcy5uYW1lID0gJ0pvaG4gU21pdGgnO1xuICogICAgICB0aGlzLmNvbnRhY3RzID0gW1xuICogICAgICAgIHt0eXBlOiAncGhvbmUnLCB2YWx1ZTogJzQwOCA1NTUgMTIxMid9LFxuICogICAgICAgIHt0eXBlOiAnZW1haWwnLCB2YWx1ZTogJ2pvaG4uc21pdGhAZXhhbXBsZS5vcmcnfVxuICogICAgICBdO1xuICogICAgfVxuICpcbiAqICAgIFNldHRpbmdzQ29udHJvbGxlcjEucHJvdG90eXBlLmdyZWV0ID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgIGFsZXJ0KHRoaXMubmFtZSk7XG4gKiAgICB9O1xuICpcbiAqICAgIFNldHRpbmdzQ29udHJvbGxlcjEucHJvdG90eXBlLmFkZENvbnRhY3QgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgdGhpcy5jb250YWN0cy5wdXNoKHt0eXBlOiAnZW1haWwnLCB2YWx1ZTogJ3lvdXJuYW1lQGV4YW1wbGUub3JnJ30pO1xuICogICAgfTtcbiAqXG4gKiAgICBTZXR0aW5nc0NvbnRyb2xsZXIxLnByb3RvdHlwZS5yZW1vdmVDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdFRvUmVtb3ZlKSB7XG4gKiAgICAgdmFyIGluZGV4ID0gdGhpcy5jb250YWN0cy5pbmRleE9mKGNvbnRhY3RUb1JlbW92ZSk7XG4gKiAgICAgIHRoaXMuY29udGFjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAqICAgIH07XG4gKlxuICogICAgU2V0dGluZ3NDb250cm9sbGVyMS5wcm90b3R5cGUuY2xlYXJDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdCkge1xuICogICAgICBjb250YWN0LnR5cGUgPSAncGhvbmUnO1xuICogICAgICBjb250YWN0LnZhbHVlID0gJyc7XG4gKiAgICB9O1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICBpdCgnc2hvdWxkIGNoZWNrIGNvbnRyb2xsZXIgYXMnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50KGJ5LmlkKCdjdHJsLWFzLWV4bXBsJykpO1xuICogICAgICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkubW9kZWwoJ3NldHRpbmdzLm5hbWUnKSlcbiAqICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCdKb2huIFNtaXRoJyk7XG4gKlxuICogICAgICAgdmFyIGZpcnN0UmVwZWF0ID1cbiAqICAgICAgICAgICBjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0cycpLnJvdygwKSk7XG4gKiAgICAgICB2YXIgc2Vjb25kUmVwZWF0ID1cbiAqICAgICAgICAgICBjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0cycpLnJvdygxKSk7XG4gKlxuICogICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgIC50b0JlKCc0MDggNTU1IDEyMTInKTtcbiAqXG4gKiAgICAgICBleHBlY3Qoc2Vjb25kUmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgIC50b0JlKCdqb2huLnNtaXRoQGV4YW1wbGUub3JnJyk7XG4gKlxuICogICAgICAgZmlyc3RSZXBlYXQuZWxlbWVudChieS5idXR0b25UZXh0KCdjbGVhcicpKS5jbGljaygpO1xuICpcbiAqICAgICAgIGV4cGVjdChmaXJzdFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgICAudG9CZSgnJyk7XG4gKlxuICogICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkuYnV0dG9uVGV4dCgnYWRkJykpLmNsaWNrKCk7XG4gKlxuICogICAgICAgZXhwZWN0KGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIHNldHRpbmdzLmNvbnRhY3RzJykucm93KDIpKVxuICogICAgICAgICAgIC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpXG4gKiAgICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgICAudG9CZSgneW91cm5hbWVAZXhhbXBsZS5vcmcnKTtcbiAqICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqIFRoaXMgZXhhbXBsZSBkZW1vbnN0cmF0ZXMgdGhlIFwiYXR0YWNoIHRvIGAkc2NvcGVgXCIgc3R5bGUgb2YgY29udHJvbGxlci5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdDb250cm9sbGVyXCIgbW9kdWxlPVwiY29udHJvbGxlckV4YW1wbGVcIj5cbiAqICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICA8ZGl2IGlkPVwiY3RybC1leG1wbFwiIG5nLWNvbnRyb2xsZXI9XCJTZXR0aW5nc0NvbnRyb2xsZXIyXCI+XG4gKiAgICAgPGxhYmVsPk5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibmFtZVwiLz48L2xhYmVsPlxuICogICAgIDxidXR0b24gbmctY2xpY2s9XCJncmVldCgpXCI+Z3JlZXQ8L2J1dHRvbj48YnIvPlxuICogICAgIENvbnRhY3Q6XG4gKiAgICAgPHVsPlxuICogICAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAqICAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cImNvbnRhY3QudHlwZVwiIGlkPVwic2VsZWN0X3t7JGluZGV4fX1cIj5cbiAqICAgICAgICAgICAgPG9wdGlvbj5waG9uZTwvb3B0aW9uPlxuICogICAgICAgICAgICA8b3B0aW9uPmVtYWlsPC9vcHRpb24+XG4gKiAgICAgICAgIDwvc2VsZWN0PlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImNvbnRhY3QudmFsdWVcIiBhcmlhLWxhYmVsbGVkYnk9XCJzZWxlY3Rfe3skaW5kZXh9fVwiIC8+XG4gKiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJjbGVhckNvbnRhY3QoY29udGFjdClcIj5jbGVhcjwvYnV0dG9uPlxuICogICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwicmVtb3ZlQ29udGFjdChjb250YWN0KVwiPlg8L2J1dHRvbj5cbiAqICAgICAgIDwvbGk+XG4gKiAgICAgICA8bGk+WyA8YnV0dG9uIG5nLWNsaWNrPVwiYWRkQ29udGFjdCgpXCI+YWRkPC9idXR0b24+IF08L2xpPlxuICogICAgPC91bD5cbiAqICAgPC9kaXY+XG4gKiAgPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICAgYW5ndWxhci5tb2R1bGUoJ2NvbnRyb2xsZXJFeGFtcGxlJywgW10pXG4gKiAgICAgLmNvbnRyb2xsZXIoJ1NldHRpbmdzQ29udHJvbGxlcjInLCBbJyRzY29wZScsIFNldHRpbmdzQ29udHJvbGxlcjJdKTtcbiAqXG4gKiAgIGZ1bmN0aW9uIFNldHRpbmdzQ29udHJvbGxlcjIoJHNjb3BlKSB7XG4gKiAgICAgJHNjb3BlLm5hbWUgPSAnSm9obiBTbWl0aCc7XG4gKiAgICAgJHNjb3BlLmNvbnRhY3RzID0gW1xuICogICAgICAge3R5cGU6J3Bob25lJywgdmFsdWU6JzQwOCA1NTUgMTIxMid9LFxuICogICAgICAge3R5cGU6J2VtYWlsJywgdmFsdWU6J2pvaG4uc21pdGhAZXhhbXBsZS5vcmcnfVxuICogICAgIF07XG4gKlxuICogICAgICRzY29wZS5ncmVldCA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgYWxlcnQoJHNjb3BlLm5hbWUpO1xuICogICAgIH07XG4gKlxuICogICAgICRzY29wZS5hZGRDb250YWN0ID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAkc2NvcGUuY29udGFjdHMucHVzaCh7dHlwZTonZW1haWwnLCB2YWx1ZToneW91cm5hbWVAZXhhbXBsZS5vcmcnfSk7XG4gKiAgICAgfTtcbiAqXG4gKiAgICAgJHNjb3BlLnJlbW92ZUNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0VG9SZW1vdmUpIHtcbiAqICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5jb250YWN0cy5pbmRleE9mKGNvbnRhY3RUb1JlbW92ZSk7XG4gKiAgICAgICAkc2NvcGUuY29udGFjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAqICAgICB9O1xuICpcbiAqICAgICAkc2NvcGUuY2xlYXJDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdCkge1xuICogICAgICAgY29udGFjdC50eXBlID0gJ3Bob25lJztcbiAqICAgICAgIGNvbnRhY3QudmFsdWUgPSAnJztcbiAqICAgICB9O1xuICogICB9XG4gKiAgPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgIGl0KCdzaG91bGQgY2hlY2sgY29udHJvbGxlcicsIGZ1bmN0aW9uKCkge1xuICogICAgICB2YXIgY29udGFpbmVyID0gZWxlbWVudChieS5pZCgnY3RybC1leG1wbCcpKTtcbiAqXG4gKiAgICAgIGV4cGVjdChjb250YWluZXIuZWxlbWVudChieS5tb2RlbCgnbmFtZScpKVxuICogICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnSm9obiBTbWl0aCcpO1xuICpcbiAqICAgICAgdmFyIGZpcnN0UmVwZWF0ID1cbiAqICAgICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIGNvbnRhY3RzJykucm93KDApKTtcbiAqICAgICAgdmFyIHNlY29uZFJlcGVhdCA9XG4gKiAgICAgICAgICBjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBjb250YWN0cycpLnJvdygxKSk7XG4gKlxuICogICAgICBleHBlY3QoZmlyc3RSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAudG9CZSgnNDA4IDU1NSAxMjEyJyk7XG4gKiAgICAgIGV4cGVjdChzZWNvbmRSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAudG9CZSgnam9obi5zbWl0aEBleGFtcGxlLm9yZycpO1xuICpcbiAqICAgICAgZmlyc3RSZXBlYXQuZWxlbWVudChieS5idXR0b25UZXh0KCdjbGVhcicpKS5jbGljaygpO1xuICpcbiAqICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgLnRvQmUoJycpO1xuICpcbiAqICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkuYnV0dG9uVGV4dCgnYWRkJykpLmNsaWNrKCk7XG4gKlxuICogICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gY29udGFjdHMnKS5yb3coMikpXG4gKiAgICAgICAgICAuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKVxuICogICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgIC50b0JlKCd5b3VybmFtZUBleGFtcGxlLm9yZycpO1xuICogICAgfSk7XG4gKiAgPC9maWxlPlxuICo8L2V4YW1wbGU+XG5cbiAqL1xudmFyIG5nQ29udHJvbGxlckRpcmVjdGl2ZSA9IFtmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHNjb3BlOiB0cnVlLFxuICAgIGNvbnRyb2xsZXI6ICdAJyxcbiAgICBwcmlvcml0eTogNTAwXG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NzcFxuICpcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIEFuZ3VsYXJKUyBoYXMgc29tZSBmZWF0dXJlcyB0aGF0IGNhbiBjb25mbGljdCB3aXRoIGNlcnRhaW4gcmVzdHJpY3Rpb25zIHRoYXQgYXJlIGFwcGxpZWQgd2hlbiB1c2luZ1xuICogW0NTUCAoQ29udGVudCBTZWN1cml0eSBQb2xpY3kpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9TZWN1cml0eS9DU1ApIHJ1bGVzLlxuICpcbiAqIElmIHlvdSBpbnRlbmQgdG8gaW1wbGVtZW50IENTUCB3aXRoIHRoZXNlIHJ1bGVzIHRoZW4geW91IG11c3QgdGVsbCBBbmd1bGFySlMgbm90IHRvIHVzZSB0aGVzZVxuICogZmVhdHVyZXMuXG4gKlxuICogVGhpcyBpcyBuZWNlc3Nhcnkgd2hlbiBkZXZlbG9waW5nIHRoaW5ncyBsaWtlIEdvb2dsZSBDaHJvbWUgRXh0ZW5zaW9ucyBvciBVbml2ZXJzYWwgV2luZG93cyBBcHBzLlxuICpcbiAqXG4gKiBUaGUgZm9sbG93aW5nIGRlZmF1bHQgcnVsZXMgaW4gQ1NQIGFmZmVjdCBBbmd1bGFySlM6XG4gKlxuICogKiBUaGUgdXNlIG9mIGBldmFsKClgLCBgRnVuY3Rpb24oc3RyaW5nKWAgYW5kIHNpbWlsYXIgZnVuY3Rpb25zIHRvIGR5bmFtaWNhbGx5IGNyZWF0ZSBhbmQgZXhlY3V0ZVxuICogY29kZSBmcm9tIHN0cmluZ3MgaXMgZm9yYmlkZGVuLiBBbmd1bGFySlMgbWFrZXMgdXNlIG9mIHRoaXMgaW4gdGhlIHtAbGluayAkcGFyc2V9IHNlcnZpY2UgdG9cbiAqIHByb3ZpZGUgYSAzMCUgaW5jcmVhc2UgaW4gdGhlIHNwZWVkIG9mIGV2YWx1YXRpbmcgQW5ndWxhckpTIGV4cHJlc3Npb25zLiAoVGhpcyBDU1AgcnVsZSBjYW4gYmVcbiAqIGRpc2FibGVkIHdpdGggdGhlIENTUCBrZXl3b3JkIGB1bnNhZmUtZXZhbGAsIGJ1dCBpdCBpcyBnZW5lcmFsbHkgbm90IHJlY29tbWVuZGVkIGFzIGl0IHdvdWxkXG4gKiB3ZWFrZW4gdGhlIHByb3RlY3Rpb25zIG9mZmVyZWQgYnkgQ1NQLilcbiAqXG4gKiAqIFRoZSB1c2Ugb2YgaW5saW5lIHJlc291cmNlcywgc3VjaCBhcyBpbmxpbmUgYDxzY3JpcHQ+YCBhbmQgYDxzdHlsZT5gIGVsZW1lbnRzLCBhcmUgZm9yYmlkZGVuLlxuICogVGhpcyBwcmV2ZW50cyBhcHBzIGZyb20gaW5qZWN0aW5nIGN1c3RvbSBzdHlsZXMgZGlyZWN0bHkgaW50byB0aGUgZG9jdW1lbnQuIEFuZ3VsYXJKUyBtYWtlcyB1c2Ugb2ZcbiAqIHRoaXMgdG8gaW5jbHVkZSBzb21lIENTUyBydWxlcyAoZS5nLiB7QGxpbmsgbmdDbG9ha30gYW5kIHtAbGluayBuZ0hpZGV9KS4gVG8gbWFrZSB0aGVzZVxuICogZGlyZWN0aXZlcyB3b3JrIHdoZW4gYSBDU1AgcnVsZSBpcyBibG9ja2luZyBpbmxpbmUgc3R5bGVzLCB5b3UgbXVzdCBsaW5rIHRvIHRoZSBgYW5ndWxhci1jc3AuY3NzYFxuICogaW4geW91ciBIVE1MIG1hbnVhbGx5LiAoVGhpcyBDU1AgcnVsZSBjYW4gYmUgZGlzYWJsZWQgd2l0aCB0aGUgQ1NQIGtleXdvcmQgYHVuc2FmZS1pbmxpbmVgLCBidXRcbiAqIGl0IGlzIGdlbmVyYWxseSBub3QgcmVjb21tZW5kZWQgYXMgaXQgd291bGQgd2Vha2VuIHRoZSBwcm90ZWN0aW9ucyBvZmZlcmVkIGJ5IENTUC4pXG4gKlxuICogSWYgeW91IGRvIG5vdCBwcm92aWRlIGBuZ0NzcGAgdGhlbiBBbmd1bGFySlMgdHJpZXMgdG8gYXV0b2RldGVjdCBpZiBDU1AgaXMgYmxvY2tpbmcgZHluYW1pYyBjb2RlXG4gKiBjcmVhdGlvbiBmcm9tIHN0cmluZ3MgKGUuZy4sIGB1bnNhZmUtZXZhbGAgbm90IHNwZWNpZmllZCBpbiBDU1AgaGVhZGVyKSBhbmQgYXV0b21hdGljYWxseVxuICogZGVhY3RpdmF0ZXMgdGhpcyBmZWF0dXJlIGluIHRoZSB7QGxpbmsgJHBhcnNlfSBzZXJ2aWNlLiBUaGlzIGF1dG9kZXRlY3Rpb24sIGhvd2V2ZXIsIHRyaWdnZXJzIGFcbiAqIENTUCBlcnJvciB0byBiZSBsb2dnZWQgaW4gdGhlIGNvbnNvbGU6XG4gKlxuICogYGBgXG4gKiBSZWZ1c2VkIHRvIGV2YWx1YXRlIGEgc3RyaW5nIGFzIEphdmFTY3JpcHQgYmVjYXVzZSAndW5zYWZlLWV2YWwnIGlzIG5vdCBhbiBhbGxvd2VkIHNvdXJjZSBvZlxuICogc2NyaXB0IGluIHRoZSBmb2xsb3dpbmcgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZGlyZWN0aXZlOiBcImRlZmF1bHQtc3JjICdzZWxmJ1wiLiBOb3RlIHRoYXRcbiAqICdzY3JpcHQtc3JjJyB3YXMgbm90IGV4cGxpY2l0bHkgc2V0LCBzbyAnZGVmYXVsdC1zcmMnIGlzIHVzZWQgYXMgYSBmYWxsYmFjay5cbiAqIGBgYFxuICpcbiAqIFRoaXMgZXJyb3IgaXMgaGFybWxlc3MgYnV0IGFubm95aW5nLiBUbyBwcmV2ZW50IHRoZSBlcnJvciBmcm9tIHNob3dpbmcgdXAsIHB1dCB0aGUgYG5nQ3NwYFxuICogZGlyZWN0aXZlIG9uIGFuIGVsZW1lbnQgb2YgdGhlIEhUTUwgZG9jdW1lbnQgdGhhdCBhcHBlYXJzIGJlZm9yZSB0aGUgYDxzY3JpcHQ+YCB0YWcgdGhhdCBsb2Fkc1xuICogdGhlIGBhbmd1bGFyLmpzYCBmaWxlLlxuICpcbiAqICpOb3RlOiBUaGlzIGRpcmVjdGl2ZSBpcyBvbmx5IGF2YWlsYWJsZSBpbiB0aGUgYG5nLWNzcGAgYW5kIGBkYXRhLW5nLWNzcGAgYXR0cmlidXRlIGZvcm0uKlxuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSB3aGljaCBvZiB0aGUgQ1NQIHJlbGF0ZWQgQW5ndWxhckpTIGZlYXR1cmVzIHNob3VsZCBiZSBkZWFjdGl2YXRlZCBieSBwcm92aWRpbmdcbiAqIGEgdmFsdWUgZm9yIHRoZSBgbmctY3NwYCBhdHRyaWJ1dGUuIFRoZSBvcHRpb25zIGFyZSBhcyBmb2xsb3dzOlxuICpcbiAqICogbm8taW5saW5lLXN0eWxlOiB0aGlzIHN0b3BzIEFuZ3VsYXJKUyBmcm9tIGluamVjdGluZyBDU1Mgc3R5bGVzIGludG8gdGhlIERPTVxuICpcbiAqICogbm8tdW5zYWZlLWV2YWw6IHRoaXMgc3RvcHMgQW5ndWxhckpTIGZyb20gb3B0aW1pemluZyAkcGFyc2Ugd2l0aCB1bnNhZmUgZXZhbCBvZiBzdHJpbmdzXG4gKlxuICogWW91IGNhbiB1c2UgdGhlc2UgdmFsdWVzIGluIHRoZSBmb2xsb3dpbmcgY29tYmluYXRpb25zOlxuICpcbiAqXG4gKiAqIE5vIGRlY2xhcmF0aW9uIG1lYW5zIHRoYXQgQW5ndWxhckpTIHdpbGwgYXNzdW1lIHRoYXQgeW91IGNhbiBkbyBpbmxpbmUgc3R5bGVzLCBidXQgaXQgd2lsbCBkb1xuICogYSBydW50aW1lIGNoZWNrIGZvciB1bnNhZmUtZXZhbC4gRS5nLiBgPGJvZHk+YC4gVGhpcyBpcyBiYWNrd2FyZGx5IGNvbXBhdGlibGUgd2l0aCBwcmV2aW91c1xuICogdmVyc2lvbnMgb2YgQW5ndWxhckpTLlxuICpcbiAqICogQSBzaW1wbGUgYG5nLWNzcGAgKG9yIGBkYXRhLW5nLWNzcGApIGF0dHJpYnV0ZSB3aWxsIHRlbGwgQW5ndWxhckpTIHRvIGRlYWN0aXZhdGUgYm90aCBpbmxpbmVcbiAqIHN0eWxlcyBhbmQgdW5zYWZlIGV2YWwuIEUuZy4gYDxib2R5IG5nLWNzcD5gLiBUaGlzIGlzIGJhY2t3YXJkbHkgY29tcGF0aWJsZSB3aXRoIHByZXZpb3VzXG4gKiB2ZXJzaW9ucyBvZiBBbmd1bGFySlMuXG4gKlxuICogKiBTcGVjaWZ5aW5nIG9ubHkgYG5vLXVuc2FmZS1ldmFsYCB0ZWxscyBBbmd1bGFySlMgdGhhdCB3ZSBtdXN0IG5vdCB1c2UgZXZhbCwgYnV0IHRoYXQgd2UgY2FuXG4gKiBpbmplY3QgaW5saW5lIHN0eWxlcy4gRS5nLiBgPGJvZHkgbmctY3NwPVwibm8tdW5zYWZlLWV2YWxcIj5gLlxuICpcbiAqICogU3BlY2lmeWluZyBvbmx5IGBuby1pbmxpbmUtc3R5bGVgIHRlbGxzIEFuZ3VsYXJKUyB0aGF0IHdlIG11c3Qgbm90IGluamVjdCBzdHlsZXMsIGJ1dCB0aGF0IHdlIGNhblxuICogcnVuIGV2YWwgLSBubyBhdXRvbWF0aWMgY2hlY2sgZm9yIHVuc2FmZSBldmFsIHdpbGwgb2NjdXIuIEUuZy4gYDxib2R5IG5nLWNzcD1cIm5vLWlubGluZS1zdHlsZVwiPmBcbiAqXG4gKiAqIFNwZWNpZnlpbmcgYm90aCBgbm8tdW5zYWZlLWV2YWxgIGFuZCBgbm8taW5saW5lLXN0eWxlYCB0ZWxscyBBbmd1bGFySlMgdGhhdCB3ZSBtdXN0IG5vdCBpbmplY3RcbiAqIHN0eWxlcyBub3IgdXNlIGV2YWwsIHdoaWNoIGlzIHRoZSBzYW1lIGFzIGFuIGVtcHR5OiBuZy1jc3AuXG4gKiBFLmcuYDxib2R5IG5nLWNzcD1cIm5vLWlubGluZS1zdHlsZTtuby11bnNhZmUtZXZhbFwiPmBcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgdG8gYXBwbHkgdGhlIGBuZ0NzcGAgZGlyZWN0aXZlIHRvIHRoZSBgaHRtbGAgdGFnLlxuICAgYGBgaHRtbFxuICAgICA8IWRvY3R5cGUgaHRtbD5cbiAgICAgPGh0bWwgbmctYXBwIG5nLWNzcD5cbiAgICAgLi4uXG4gICAgIC4uLlxuICAgICA8L2h0bWw+XG4gICBgYGBcblxuICA8IS0tIE5vdGU6IHRoZSBgLmNzcGAgc3VmZml4IGluIHRoZSBleGFtcGxlIG5hbWUgdHJpZ2dlcnMgQ1NQIG1vZGUgaW4gb3VyIGh0dHAgc2VydmVyISAtLT5cbiAgPGV4YW1wbGUgbmFtZT1cImV4YW1wbGUuY3NwXCIgbW9kdWxlPVwiY3NwRXhhbXBsZVwiIG5nLWNzcD1cInRydWVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiTWFpbkNvbnRyb2xsZXIgYXMgY3RybFwiPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJjdHJsLmluYygpXCIgaWQ9XCJpbmNcIj5JbmNyZW1lbnQ8L2J1dHRvbj5cbiAgICAgICAgICA8c3BhbiBpZD1cImNvdW50ZXJcIj5cbiAgICAgICAgICAgIHt7Y3RybC5jb3VudGVyfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImN0cmwuZXZpbCgpXCIgaWQ9XCJldmlsXCI+RXZpbDwvYnV0dG9uPlxuICAgICAgICAgIDxzcGFuIGlkPVwiZXZpbEVycm9yXCI+XG4gICAgICAgICAgICB7e2N0cmwuZXZpbEVycm9yfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnY3NwRXhhbXBsZScsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXIgPSAwO1xuICAgICAgICAgICAgdGhpcy5pbmMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb3VudGVyKys7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5ldmlsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZXZhbCgnMSsyJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZXZhbFxuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmlsRXJyb3IgPSBlLm1lc3NhZ2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB1dGlsLCB3ZWJkcml2ZXI7XG5cbiAgICAgIHZhciBpbmNCdG4gPSBlbGVtZW50KGJ5LmlkKCdpbmMnKSk7XG4gICAgICB2YXIgY291bnRlciA9IGVsZW1lbnQoYnkuaWQoJ2NvdW50ZXInKSk7XG4gICAgICB2YXIgZXZpbEJ0biA9IGVsZW1lbnQoYnkuaWQoJ2V2aWwnKSk7XG4gICAgICB2YXIgZXZpbEVycm9yID0gZWxlbWVudChieS5pZCgnZXZpbEVycm9yJykpO1xuXG4gICAgICBmdW5jdGlvbiBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIGJyb3dzZXIubWFuYWdlKCkubG9ncygpLmdldCgnYnJvd3NlcicpLnRoZW4oZnVuY3Rpb24oYnJvd3NlckxvZykge1xuICAgICAgICAgIHJldHVybiBicm93c2VyTG9nLmZpbHRlcihmdW5jdGlvbihsb2dFbnRyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvZ0VudHJ5LmxldmVsLnZhbHVlID4gd2ViZHJpdmVyLmxvZ2dpbmcuTGV2ZWwuV0FSTklORy52YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNsZWFyRXJyb3JzKCkge1xuICAgICAgICBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBleHBlY3ROb0Vycm9ycygpIHtcbiAgICAgICAgZ2V0QW5kQ2xlYXJTZXZlcmVFcnJvcnMoKS50aGVuKGZ1bmN0aW9uKGZpbHRlcmVkTG9nKSB7XG4gICAgICAgICAgZXhwZWN0KGZpbHRlcmVkTG9nLmxlbmd0aCkudG9FcXVhbCgwKTtcbiAgICAgICAgICBpZiAoZmlsdGVyZWRMb2cubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYnJvd3NlciBjb25zb2xlIGVycm9yczogJyArIHV0aWwuaW5zcGVjdChmaWx0ZXJlZExvZykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGV4cGVjdEVycm9yKHJlZ2V4KSB7XG4gICAgICAgIGdldEFuZENsZWFyU2V2ZXJlRXJyb3JzKCkudGhlbihmdW5jdGlvbihmaWx0ZXJlZExvZykge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgIGZpbHRlcmVkTG9nLmZvckVhY2goZnVuY3Rpb24obG9nKSB7XG4gICAgICAgICAgICBpZiAobG9nLm1lc3NhZ2UubWF0Y2gocmVnZXgpKSB7XG4gICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2V4cGVjdGVkIGFuIGVycm9yIHRoYXQgbWF0Y2hlcyAnICsgcmVnZXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG4gICAgICAgIHdlYmRyaXZlciA9IHJlcXVpcmUoJ3NlbGVuaXVtLXdlYmRyaXZlcicpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEZvciBub3csIHdlIG9ubHkgdGVzdCBvbiBDaHJvbWUsXG4gICAgICAvLyBhcyBTYWZhcmkgZG9lcyBub3QgbG9hZCB0aGUgcGFnZSB3aXRoIFByb3RyYWN0b3IncyBpbmplY3RlZCBzY3JpcHRzLFxuICAgICAgLy8gYW5kIEZpcmVmb3ggd2ViZHJpdmVyIGFsd2F5cyBkaXNhYmxlcyBjb250ZW50IHNlY3VyaXR5IHBvbGljeSAoIzYzNTgpXG4gICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciAhPT0gJ2Nocm9tZScpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpdCgnc2hvdWxkIG5vdCByZXBvcnQgZXJyb3JzIHdoZW4gdGhlIHBhZ2UgaXMgbG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGNsZWFyIGVycm9ycyBzbyB3ZSBhcmUgbm90IGRlcGVuZGVudCBvbiBwcmV2aW91cyB0ZXN0c1xuICAgICAgICBjbGVhckVycm9ycygpO1xuICAgICAgICAvLyBOZWVkIHRvIHJlbG9hZCB0aGUgcGFnZSBhcyB0aGUgcGFnZSBpcyBhbHJlYWR5IGxvYWRlZCB3aGVuXG4gICAgICAgIC8vIHdlIGNvbWUgaGVyZVxuICAgICAgICBicm93c2VyLmRyaXZlci5nZXRDdXJyZW50VXJsKCkudGhlbihmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICBicm93c2VyLmdldCh1cmwpO1xuICAgICAgICB9KTtcbiAgICAgICAgZXhwZWN0Tm9FcnJvcnMoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGV2YWx1YXRlIGV4cHJlc3Npb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdChjb3VudGVyLmdldFRleHQoKSkudG9FcXVhbCgnMCcpO1xuICAgICAgICBpbmNCdG4uY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCcxJyk7XG4gICAgICAgIGV4cGVjdE5vRXJyb3JzKCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBhbmQgcmVwb3J0IGFuIGVycm9yIHdoZW4gdXNpbmcgXCJldmFsXCInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXZpbEJ0bi5jbGljaygpO1xuICAgICAgICBleHBlY3QoZXZpbEVycm9yLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBTZWN1cml0eSBQb2xpY3kvKTtcbiAgICAgICAgZXhwZWN0RXJyb3IoL0NvbnRlbnQgU2VjdXJpdHkgUG9saWN5Lyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAgKi9cblxuLy8gYG5nQ3NwYCBpcyBub3QgaW1wbGVtZW50ZWQgYXMgYSBwcm9wZXIgZGlyZWN0aXZlIGFueSBtb3JlLCBiZWNhdXNlIHdlIG5lZWQgaXQgYmUgcHJvY2Vzc2VkIHdoaWxlXG4vLyB3ZSBib290c3RyYXAgdGhlIGFwcCAoYmVmb3JlIGAkcGFyc2VgIGlzIGluc3RhbnRpYXRlZCkuIEZvciB0aGlzIHJlYXNvbiwgd2UganVzdCBoYXZlIHRoZSBgY3NwKClgXG4vLyBmbiB0aGF0IGxvb2tzIGZvciB0aGUgYG5nLWNzcGAgYXR0cmlidXRlIGFueXdoZXJlIGluIHRoZSBjdXJyZW50IGRvYy5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NsaWNrXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIG5nQ2xpY2sgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igd2hlblxuICogYW4gZWxlbWVudCBpcyBjbGlja2VkLlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGljayB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBjbGljay4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1jbGlja1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50XG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxzcGFuPlxuICAgICAgICBjb3VudDoge3tjb3VudH19XG4gICAgICA8L3NwYW4+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvdW50JykpLmdldFRleHQoKSkudG9NYXRjaCgnMCcpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJ2J1dHRvbicpKS5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnY291bnQnKSkuZ2V0VGV4dCgpKS50b01hdGNoKCcxJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuLypcbiAqIEEgY29sbGVjdGlvbiBvZiBkaXJlY3RpdmVzIHRoYXQgYWxsb3dzIGNyZWF0aW9uIG9mIGN1c3RvbSBldmVudCBoYW5kbGVycyB0aGF0IGFyZSBkZWZpbmVkIGFzXG4gKiBBbmd1bGFySlMgZXhwcmVzc2lvbnMgYW5kIGFyZSBjb21waWxlZCBhbmQgZXhlY3V0ZWQgd2l0aGluIHRoZSBjdXJyZW50IHNjb3BlLlxuICovXG52YXIgbmdFdmVudERpcmVjdGl2ZXMgPSB7fTtcblxuLy8gRm9yIGV2ZW50cyB0aGF0IG1pZ2h0IGZpcmUgc3luY2hyb25vdXNseSBkdXJpbmcgRE9NIG1hbmlwdWxhdGlvblxuLy8gd2UgbmVlZCB0byBleGVjdXRlIHRoZWlyIGV2ZW50IGhhbmRsZXJzIGFzeW5jaHJvbm91c2x5IHVzaW5nICRldmFsQXN5bmMsXG4vLyBzbyB0aGF0IHRoZXkgYXJlIG5vdCBleGVjdXRlZCBpbiBhbiBpbmNvbnNpc3RlbnQgc3RhdGUuXG52YXIgZm9yY2VBc3luY0V2ZW50cyA9IHtcbiAgJ2JsdXInOiB0cnVlLFxuICAnZm9jdXMnOiB0cnVlXG59O1xuZm9yRWFjaChcbiAgJ2NsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZW1vdmUgbW91c2VlbnRlciBtb3VzZWxlYXZlIGtleWRvd24ga2V5dXAga2V5cHJlc3Mgc3VibWl0IGZvY3VzIGJsdXIgY29weSBjdXQgcGFzdGUnLnNwbGl0KCcgJyksXG4gIGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xuICAgIHZhciBkaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKCduZy0nICsgZXZlbnROYW1lKTtcbiAgICBuZ0V2ZW50RGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXSA9IFsnJHBhcnNlJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbigkcGFyc2UsICRyb290U2NvcGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uKCRlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgICAgLy8gTk9URTpcbiAgICAgICAgICAvLyBXZSBleHBvc2UgdGhlIHBvd2VyZnVsIGAkZXZlbnRgIG9iamVjdCBvbiB0aGUgc2NvcGUgdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gdGhlIFdpbmRvdyxcbiAgICAgICAgICAvLyBldGMuIFRoaXMgaXMgT0ssIGJlY2F1c2UgZXhwcmVzc2lvbnMgYXJlIG5vdCBzYW5kYm94ZWQgYW55IG1vcmUgKGFuZCB0aGUgZXhwcmVzc2lvblxuICAgICAgICAgIC8vIHNhbmRib3ggd2FzIG5ldmVyIG1lYW50IHRvIGJlIGEgc2VjdXJpdHkgZmVhdHVyZSBhbnl3YXkpLlxuICAgICAgICAgIHZhciBmbiA9ICRwYXJzZShhdHRyW2RpcmVjdGl2ZU5hbWVdKTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmdFdmVudEhhbmRsZXIoc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQub24oZXZlbnROYW1lLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBmbihzY29wZSwgeyRldmVudDogZXZlbnR9KTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgaWYgKGZvcmNlQXN5bmNFdmVudHNbZXZlbnROYW1lXSAmJiAkcm9vdFNjb3BlLiQkcGhhc2UpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kZXZhbEFzeW5jKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoY2FsbGJhY2spO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1dO1xuICB9XG4pO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nRGJsY2xpY2tcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nRGJsY2xpY2tgIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIHNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGEgZGJsY2xpY2sgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0RibGNsaWNrIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGEgZGJsY2xpY2suIChUaGUgRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YClcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWRibGNsaWNrXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLWRibGNsaWNrPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKG9uIGRvdWJsZSBjbGljaylcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW91c2Vkb3duXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIG5nTW91c2Vkb3duIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIHNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlZG93biBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2Vkb3duIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIG1vdXNlZG93bi4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1tb3VzZWRvd25cIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2Vkb3duPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKG9uIG1vdXNlIGRvd24pXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01vdXNldXBcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZXVwIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZXVwIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIG1vdXNldXAuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctbW91c2V1cFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZXVwPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKG9uIG1vdXNlIHVwKVxuICAgICAgPC9idXR0b24+XG4gICAgICBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW91c2VvdmVyXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2VvdmVyIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZW92ZXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogbW91c2VvdmVyLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLW1vdXNlb3ZlclwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZW92ZXI9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XG4gICAgICAgIEluY3JlbWVudCAod2hlbiBtb3VzZSBpcyBvdmVyKVxuICAgICAgPC9idXR0b24+XG4gICAgICBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb3VzZWVudGVyXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2VlbnRlciBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2VlbnRlciB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBtb3VzZWVudGVyLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLW1vdXNlZW50ZXJcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2VlbnRlcj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIGVudGVycylcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW91c2VsZWF2ZVxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlbGVhdmUgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vdXNlbGVhdmUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogbW91c2VsZWF2ZS4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1tb3VzZWxlYXZlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLW1vdXNlbGVhdmU9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XG4gICAgICAgIEluY3JlbWVudCAod2hlbiBtb3VzZSBsZWF2ZXMpXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01vdXNlbW92ZVxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlbW92ZSBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2Vtb3ZlIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIG1vdXNlbW92ZS4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1tb3VzZW1vdmVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2Vtb3ZlPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKHdoZW4gbW91c2UgbW92ZXMpXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0tleWRvd25cbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBrZXlkb3duIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdLZXlkb3duIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGtleWRvd24uIChFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgIGFuZCBjYW4gYmUgaW50ZXJyb2dhdGVkIGZvciBrZXlDb2RlLCBhbHRLZXksIGV0Yy4pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1rZXlkb3duXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8aW5wdXQgbmcta2V5ZG93bj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgIGtleSBkb3duIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0tleXVwXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24ga2V5dXAgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0tleXVwIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGtleXVwLiAoRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YCBhbmQgY2FuIGJlIGludGVycm9nYXRlZCBmb3Iga2V5Q29kZSwgYWx0S2V5LCBldGMuKVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmcta2V5dXBcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8cD5UeXBpbmcgaW4gdGhlIGlucHV0IGJveCBiZWxvdyB1cGRhdGVzIHRoZSBrZXkgY291bnQ8L3A+XG4gICAgICAgPGlucHV0IG5nLWtleXVwPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPiBrZXkgdXAgY291bnQ6IHt7Y291bnR9fVxuXG4gICAgICAgPHA+VHlwaW5nIGluIHRoZSBpbnB1dCBib3ggYmVsb3cgdXBkYXRlcyB0aGUga2V5Y29kZTwvcD5cbiAgICAgICA8aW5wdXQgbmcta2V5dXA9XCJldmVudD0kZXZlbnRcIj5cbiAgICAgICA8cD5ldmVudCBrZXlDb2RlOiB7eyBldmVudC5rZXlDb2RlIH19PC9wPlxuICAgICAgIDxwPmV2ZW50IGFsdEtleToge3sgZXZlbnQuYWx0S2V5IH19PC9wPlxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nS2V5cHJlc3NcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGtleXByZXNzIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdLZXlwcmVzcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBrZXlwcmVzcy4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH1cbiAqIGFuZCBjYW4gYmUgaW50ZXJyb2dhdGVkIGZvciBrZXlDb2RlLCBhbHRLZXksIGV0Yy4pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1rZXlwcmVzc1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGlucHV0IG5nLWtleXByZXNzPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAga2V5IHByZXNzIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1N1Ym1pdFxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IGZvcm1cbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBFbmFibGVzIGJpbmRpbmcgQW5ndWxhckpTIGV4cHJlc3Npb25zIHRvIG9uc3VibWl0IGV2ZW50cy5cbiAqXG4gKiBBZGRpdGlvbmFsbHkgaXQgcHJldmVudHMgdGhlIGRlZmF1bHQgYWN0aW9uICh3aGljaCBmb3IgZm9ybSBtZWFucyBzZW5kaW5nIHRoZSByZXF1ZXN0IHRvIHRoZVxuICogc2VydmVyIGFuZCByZWxvYWRpbmcgdGhlIGN1cnJlbnQgcGFnZSksIGJ1dCBvbmx5IGlmIHRoZSBmb3JtIGRvZXMgbm90IGNvbnRhaW4gYGFjdGlvbmAsXG4gKiBgZGF0YS1hY3Rpb25gLCBvciBgeC1hY3Rpb25gIGF0dHJpYnV0ZXMuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqV2FybmluZzoqKiBCZSBjYXJlZnVsIG5vdCB0byBjYXVzZSBcImRvdWJsZS1zdWJtaXNzaW9uXCIgYnkgdXNpbmcgYm90aCB0aGUgYG5nQ2xpY2tgIGFuZFxuICogYG5nU3VibWl0YCBoYW5kbGVycyB0b2dldGhlci4gU2VlIHRoZVxuICoge0BsaW5rIGZvcm0jc3VibWl0dGluZy1hLWZvcm0tYW5kLXByZXZlbnRpbmctdGhlLWRlZmF1bHQtYWN0aW9uIGBmb3JtYCBkaXJlY3RpdmUgZG9jdW1lbnRhdGlvbn1cbiAqIGZvciBhIGRldGFpbGVkIGRpc2N1c3Npb24gb2Ygd2hlbiBgbmdTdWJtaXRgIG1heSBiZSB0cmlnZ2VyZWQuXG4gKiA8L2Rpdj5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nU3VibWl0IHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWwuXG4gKiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwic3VibWl0RXhhbXBsZVwiIG5hbWU9XCJuZy1zdWJtaXRcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxzY3JpcHQ+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdzdWJtaXRFeGFtcGxlJywgW10pXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICRzY29wZS5saXN0ID0gW107XG4gICAgICAgICAgICAkc2NvcGUudGV4dCA9ICdoZWxsbyc7XG4gICAgICAgICAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICgkc2NvcGUudGV4dCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5saXN0LnB1c2godGhpcy50ZXh0KTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9ICcnO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1dKTtcbiAgICAgIDwvc2NyaXB0PlxuICAgICAgPGZvcm0gbmctc3VibWl0PVwic3VibWl0KClcIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgRW50ZXIgdGV4dCBhbmQgaGl0IGVudGVyOlxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInRleHRcIiBuYW1lPVwidGV4dFwiIC8+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwic3VibWl0XCIgaWQ9XCJzdWJtaXRcIiB2YWx1ZT1cIlN1Ym1pdFwiIC8+XG4gICAgICAgIDxwcmU+bGlzdD17e2xpc3R9fTwvcHJlPlxuICAgICAgPC9mb3JtPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLXN1Ym1pdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbGlzdCcpKS5nZXRUZXh0KCkpLnRvQmUoJ2xpc3Q9W10nKTtcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjc3VibWl0JykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9Db250YWluKCdoZWxsbycpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3RleHQnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKS50b0JlKCcnKTtcbiAgICAgICB9KTtcbiAgICAgICBpdCgnc2hvdWxkIGlnbm9yZSBlbXB0eSBzdHJpbmdzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9CZSgnbGlzdD1bXScpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJyNzdWJtaXQnKSkuY2xpY2soKTtcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCcjc3VibWl0JykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9Db250YWluKCdoZWxsbycpO1xuICAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdGb2N1c1xuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBmb2N1cyBldmVudC5cbiAqXG4gKiBOb3RlOiBBcyB0aGUgYGZvY3VzYCBldmVudCBpcyBleGVjdXRlZCBzeW5jaHJvbm91c2x5IHdoZW4gY2FsbGluZyBgaW5wdXQuZm9jdXMoKWBcbiAqIEFuZ3VsYXJKUyBleGVjdXRlcyB0aGUgZXhwcmVzc2lvbiB1c2luZyBgc2NvcGUuJGV2YWxBc3luY2AgaWYgdGhlIGV2ZW50IGlzIGZpcmVkXG4gKiBkdXJpbmcgYW4gYCRhcHBseWAgdG8gZW5zdXJlIGEgY29uc2lzdGVudCBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nRm9jdXMge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogZm9jdXMuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gKiBTZWUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsaWNrIG5nQ2xpY2t9XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0JsdXJcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCB3aW5kb3csIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gYmx1ciBldmVudC5cbiAqXG4gKiBBIFtibHVyIGV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9FdmVudHMvYmx1cikgZmlyZXMgd2hlblxuICogYW4gZWxlbWVudCBoYXMgbG9zdCBmb2N1cy5cbiAqXG4gKiBOb3RlOiBBcyB0aGUgYGJsdXJgIGV2ZW50IGlzIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgYWxzbyBkdXJpbmcgRE9NIG1hbmlwdWxhdGlvbnNcbiAqIChlLmcuIHJlbW92aW5nIGEgZm9jdXNzZWQgaW5wdXQpLFxuICogQW5ndWxhckpTIGV4ZWN1dGVzIHRoZSBleHByZXNzaW9uIHVzaW5nIGBzY29wZS4kZXZhbEFzeW5jYCBpZiB0aGUgZXZlbnQgaXMgZmlyZWRcbiAqIGR1cmluZyBhbiBgJGFwcGx5YCB0byBlbnN1cmUgYSBjb25zaXN0ZW50IHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdCbHVyIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGJsdXIuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gKiBTZWUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsaWNrIG5nQ2xpY2t9XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NvcHlcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCB3aW5kb3csIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gY29weSBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ29weSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBjb3B5LiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNvcHlcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxpbnB1dCBuZy1jb3B5PVwiY29waWVkPXRydWVcIiBuZy1pbml0PVwiY29waWVkPWZhbHNlOyB2YWx1ZT0nY29weSBtZSdcIiBuZy1tb2RlbD1cInZhbHVlXCI+XG4gICAgICBjb3BpZWQ6IHt7Y29waWVkfX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDdXRcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCB3aW5kb3csIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gY3V0IGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDdXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogY3V0LiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWN1dFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGlucHV0IG5nLWN1dD1cImN1dD10cnVlXCIgbmctaW5pdD1cImN1dD1mYWxzZTsgdmFsdWU9J2N1dCBtZSdcIiBuZy1tb2RlbD1cInZhbHVlXCI+XG4gICAgICBjdXQ6IHt7Y3V0fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdQYXN0ZVxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBwYXN0ZSBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nUGFzdGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogcGFzdGUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctcGFzdGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxpbnB1dCBuZy1wYXN0ZT1cInBhc3RlPXRydWVcIiBuZy1pbml0PVwicGFzdGU9ZmFsc2VcIiBwbGFjZWhvbGRlcj0ncGFzdGUgaGVyZSc+XG4gICAgICBwYXN0ZWQ6IHt7cGFzdGV9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0lmXG4gKiBAcmVzdHJpY3QgQVxuICogQG11bHRpRWxlbWVudFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0lmYCBkaXJlY3RpdmUgcmVtb3ZlcyBvciByZWNyZWF0ZXMgYSBwb3J0aW9uIG9mIHRoZSBET00gdHJlZSBiYXNlZCBvbiBhblxuICoge2V4cHJlc3Npb259LiBJZiB0aGUgZXhwcmVzc2lvbiBhc3NpZ25lZCB0byBgbmdJZmAgZXZhbHVhdGVzIHRvIGEgZmFsc2VcbiAqIHZhbHVlIHRoZW4gdGhlIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00sIG90aGVyd2lzZSBhIGNsb25lIG9mIHRoZVxuICogZWxlbWVudCBpcyByZWluc2VydGVkIGludG8gdGhlIERPTS5cbiAqXG4gKiBgbmdJZmAgZGlmZmVycyBmcm9tIGBuZ1Nob3dgIGFuZCBgbmdIaWRlYCBpbiB0aGF0IGBuZ0lmYCBjb21wbGV0ZWx5IHJlbW92ZXMgYW5kIHJlY3JlYXRlcyB0aGVcbiAqIGVsZW1lbnQgaW4gdGhlIERPTSByYXRoZXIgdGhhbiBjaGFuZ2luZyBpdHMgdmlzaWJpbGl0eSB2aWEgdGhlIGBkaXNwbGF5YCBjc3MgcHJvcGVydHkuICBBIGNvbW1vblxuICogY2FzZSB3aGVuIHRoaXMgZGlmZmVyZW5jZSBpcyBzaWduaWZpY2FudCBpcyB3aGVuIHVzaW5nIGNzcyBzZWxlY3RvcnMgdGhhdCByZWx5IG9uIGFuIGVsZW1lbnQnc1xuICogcG9zaXRpb24gd2l0aGluIHRoZSBET00sIHN1Y2ggYXMgdGhlIGA6Zmlyc3QtY2hpbGRgIG9yIGA6bGFzdC1jaGlsZGAgcHNldWRvLWNsYXNzZXMuXG4gKlxuICogTm90ZSB0aGF0IHdoZW4gYW4gZWxlbWVudCBpcyByZW1vdmVkIHVzaW5nIGBuZ0lmYCBpdHMgc2NvcGUgaXMgZGVzdHJveWVkIGFuZCBhIG5ldyBzY29wZVxuICogaXMgY3JlYXRlZCB3aGVuIHRoZSBlbGVtZW50IGlzIHJlc3RvcmVkLiAgVGhlIHNjb3BlIGNyZWF0ZWQgd2l0aGluIGBuZ0lmYCBpbmhlcml0cyBmcm9tXG4gKiBpdHMgcGFyZW50IHNjb3BlIHVzaW5nXG4gKiBbcHJvdG90eXBhbCBpbmhlcml0YW5jZV0oaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy93aWtpL1VuZGVyc3RhbmRpbmctU2NvcGVzI2phdmFzY3JpcHQtcHJvdG90eXBhbC1pbmhlcml0YW5jZSkuXG4gKiBBbiBpbXBvcnRhbnQgaW1wbGljYXRpb24gb2YgdGhpcyBpcyBpZiBgbmdNb2RlbGAgaXMgdXNlZCB3aXRoaW4gYG5nSWZgIHRvIGJpbmQgdG9cbiAqIGEgamF2YXNjcmlwdCBwcmltaXRpdmUgZGVmaW5lZCBpbiB0aGUgcGFyZW50IHNjb3BlLiBJbiB0aGlzIGNhc2UgYW55IG1vZGlmaWNhdGlvbnMgbWFkZSB0byB0aGVcbiAqIHZhcmlhYmxlIHdpdGhpbiB0aGUgY2hpbGQgc2NvcGUgd2lsbCBvdmVycmlkZSAoaGlkZSkgdGhlIHZhbHVlIGluIHRoZSBwYXJlbnQgc2NvcGUuXG4gKlxuICogQWxzbywgYG5nSWZgIHJlY3JlYXRlcyBlbGVtZW50cyB1c2luZyB0aGVpciBjb21waWxlZCBzdGF0ZS4gQW4gZXhhbXBsZSBvZiB0aGlzIGJlaGF2aW9yXG4gKiBpcyBpZiBhbiBlbGVtZW50J3MgY2xhc3MgYXR0cmlidXRlIGlzIGRpcmVjdGx5IG1vZGlmaWVkIGFmdGVyIGl0J3MgY29tcGlsZWQsIHVzaW5nIHNvbWV0aGluZyBsaWtlXG4gKiBqUXVlcnkncyBgLmFkZENsYXNzKClgIG1ldGhvZCwgYW5kIHRoZSBlbGVtZW50IGlzIGxhdGVyIHJlbW92ZWQuIFdoZW4gYG5nSWZgIHJlY3JlYXRlcyB0aGUgZWxlbWVudFxuICogdGhlIGFkZGVkIGNsYXNzIHdpbGwgYmUgbG9zdCBiZWNhdXNlIHRoZSBvcmlnaW5hbCBjb21waWxlZCBzdGF0ZSBpcyB1c2VkIHRvIHJlZ2VuZXJhdGUgdGhlIGVsZW1lbnQuXG4gKlxuICogQWRkaXRpb25hbGx5LCB5b3UgY2FuIHByb3ZpZGUgYW5pbWF0aW9ucyB2aWEgdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSB0byBhbmltYXRlIHRoZSBgZW50ZXJgXG4gKiBhbmQgYGxlYXZlYCBlZmZlY3RzLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNlbnRlciBlbnRlcn0gIHwganVzdCBhZnRlciB0aGUgYG5nSWZgIGNvbnRlbnRzIGNoYW5nZSBhbmQgYSBuZXcgRE9NIGVsZW1lbnQgaXMgY3JlYXRlZCBhbmQgaW5qZWN0ZWQgaW50byB0aGUgYG5nSWZgIGNvbnRhaW5lciB8XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNsZWF2ZSBsZWF2ZX0gIHwganVzdCBiZWZvcmUgdGhlIGBuZ0lmYCBjb250ZW50cyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBET00gfFxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHNjb3BlXG4gKiBAcHJpb3JpdHkgNjAwXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSWYgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIGZhbHN5IHRoZW5cbiAqICAgICB0aGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTSB0cmVlLiBJZiBpdCBpcyB0cnV0aHkgYSBjb3B5IG9mIHRoZSBjb21waWxlZFxuICogICAgIGVsZW1lbnQgaXMgYWRkZWQgdG8gdGhlIERPTSB0cmVlLlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1pZlwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8bGFiZWw+Q2xpY2sgbWU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIiBuZy1pbml0PVwiY2hlY2tlZD10cnVlXCIgLz48L2xhYmVsPjxici8+XG4gICAgICBTaG93IHdoZW4gY2hlY2tlZDpcbiAgICAgIDxzcGFuIG5nLWlmPVwiY2hlY2tlZFwiIGNsYXNzPVwiYW5pbWF0ZS1pZlwiPlxuICAgICAgICBUaGlzIGlzIHJlbW92ZWQgd2hlbiB0aGUgY2hlY2tib3ggaXMgdW5jaGVja2VkLlxuICAgICAgPC9zcGFuPlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5hbmltYXRlLWlmIHtcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcbiAgICAgICAgcGFkZGluZzoxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1lbnRlciwgLmFuaW1hdGUtaWYubmctbGVhdmUge1xuICAgICAgICB0cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLWlmLm5nLWVudGVyLFxuICAgICAgLmFuaW1hdGUtaWYubmctbGVhdmUubmctbGVhdmUtYWN0aXZlIHtcbiAgICAgICAgb3BhY2l0eTowO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1sZWF2ZSxcbiAgICAgIC5hbmltYXRlLWlmLm5nLWVudGVyLm5nLWVudGVyLWFjdGl2ZSB7XG4gICAgICAgIG9wYWNpdHk6MTtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nSWZEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgJyRjb21waWxlJywgZnVuY3Rpb24oJGFuaW1hdGUsICRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICBwcmlvcml0eTogNjAwLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgJCR0bGI6IHRydWUsXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIsIGN0cmwsICR0cmFuc2NsdWRlKSB7XG4gICAgICAgIHZhciBibG9jaywgY2hpbGRTY29wZSwgcHJldmlvdXNFbGVtZW50cztcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgkYXR0ci5uZ0lmLCBmdW5jdGlvbiBuZ0lmV2F0Y2hBY3Rpb24odmFsdWUpIHtcblxuICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFjaGlsZFNjb3BlKSB7XG4gICAgICAgICAgICAgICR0cmFuc2NsdWRlKGZ1bmN0aW9uKGNsb25lLCBuZXdTY29wZSkge1xuICAgICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBuZXdTY29wZTtcbiAgICAgICAgICAgICAgICBjbG9uZVtjbG9uZS5sZW5ndGgrK10gPSAkY29tcGlsZS4kJGNyZWF0ZUNvbW1lbnQoJ2VuZCBuZ0lmJywgJGF0dHIubmdJZik7XG4gICAgICAgICAgICAgICAgLy8gTm90ZTogV2Ugb25seSBuZWVkIHRoZSBmaXJzdC9sYXN0IG5vZGUgb2YgdGhlIGNsb25lZCBub2Rlcy5cbiAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCB3ZSBuZWVkIHRvIGtlZXAgdGhlIHJlZmVyZW5jZSB0byB0aGUganFsaXRlIHdyYXBwZXIgYXMgaXQgbWlnaHQgYmUgY2hhbmdlZCBsYXRlclxuICAgICAgICAgICAgICAgIC8vIGJ5IGEgZGlyZWN0aXZlIHdpdGggdGVtcGxhdGVVcmwgd2hlbiBpdHMgdGVtcGxhdGUgYXJyaXZlcy5cbiAgICAgICAgICAgICAgICBibG9jayA9IHtcbiAgICAgICAgICAgICAgICAgIGNsb25lOiBjbG9uZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2xvbmUsICRlbGVtZW50LnBhcmVudCgpLCAkZWxlbWVudCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAocHJldmlvdXNFbGVtZW50cykge1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnRzLnJlbW92ZSgpO1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnRzID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGlsZFNjb3BlKSB7XG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUuJGRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgY2hpbGRTY29wZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmxvY2spIHtcbiAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50cyA9IGdldEJsb2NrTm9kZXMoYmxvY2suY2xvbmUpO1xuICAgICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShwcmV2aW91c0VsZW1lbnRzKS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9PSBmYWxzZSkgcHJldmlvdXNFbGVtZW50cyA9IG51bGw7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBibG9jayA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0luY2x1ZGVcbiAqIEByZXN0cmljdCBFQ0FcbiAqIEBzY29wZVxuICogQHByaW9yaXR5IC00MDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZldGNoZXMsIGNvbXBpbGVzIGFuZCBpbmNsdWRlcyBhbiBleHRlcm5hbCBIVE1MIGZyYWdtZW50LlxuICpcbiAqIEJ5IGRlZmF1bHQsIHRoZSB0ZW1wbGF0ZSBVUkwgaXMgcmVzdHJpY3RlZCB0byB0aGUgc2FtZSBkb21haW4gYW5kIHByb3RvY29sIGFzIHRoZVxuICogYXBwbGljYXRpb24gZG9jdW1lbnQuIFRoaXMgaXMgZG9uZSBieSBjYWxsaW5nIHtAbGluayAkc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybFxuICogJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmx9IG9uIGl0LiBUbyBsb2FkIHRlbXBsYXRlcyBmcm9tIG90aGVyIGRvbWFpbnMgb3IgcHJvdG9jb2xzXG4gKiB5b3UgbWF5IGVpdGhlciB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxXaGl0ZWxpc3Qgd2hpdGVsaXN0IHRoZW19IG9yXG4gKiB7QGxpbmsgJHNjZSN0cnVzdEFzUmVzb3VyY2VVcmwgd3JhcCB0aGVtfSBhcyB0cnVzdGVkIHZhbHVlcy4gUmVmZXIgdG8gQW5ndWxhckpTJ3Mge0BsaW5rXG4gKiBuZy4kc2NlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nfS5cbiAqXG4gKiBJbiBhZGRpdGlvbiwgdGhlIGJyb3dzZXInc1xuICogW1NhbWUgT3JpZ2luIFBvbGljeV0oaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9icm93c2Vyc2VjL3dpa2kvUGFydDIjU2FtZS1vcmlnaW5fcG9saWN5X2Zvcl9YTUxIdHRwUmVxdWVzdClcbiAqIGFuZCBbQ3Jvc3MtT3JpZ2luIFJlc291cmNlIFNoYXJpbmcgKENPUlMpXShodHRwOi8vd3d3LnczLm9yZy9UUi9jb3JzLylcbiAqIHBvbGljeSBtYXkgZnVydGhlciByZXN0cmljdCB3aGV0aGVyIHRoZSB0ZW1wbGF0ZSBpcyBzdWNjZXNzZnVsbHkgbG9hZGVkLlxuICogRm9yIGV4YW1wbGUsIGBuZ0luY2x1ZGVgIHdvbid0IHdvcmsgZm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cyBvbiBhbGwgYnJvd3NlcnMgYW5kIGZvciBgZmlsZTovL2BcbiAqIGFjY2VzcyBvbiBzb21lIGJyb3dzZXJzLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2VudGVyIGVudGVyfSAgfCB3aGVuIHRoZSBleHByZXNzaW9uIGNoYW5nZXMsIG9uIHRoZSBuZXcgaW5jbHVkZSB8XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNsZWF2ZSBsZWF2ZX0gIHwgd2hlbiB0aGUgZXhwcmVzc2lvbiBjaGFuZ2VzLCBvbiB0aGUgb2xkIGluY2x1ZGUgfFxuICpcbiAqIFRoZSBlbnRlciBhbmQgbGVhdmUgYW5pbWF0aW9uIG9jY3VyIGNvbmN1cnJlbnRseS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdJbmNsdWRlfHNyYyBBbmd1bGFySlMgZXhwcmVzc2lvbiBldmFsdWF0aW5nIHRvIFVSTC4gSWYgdGhlIHNvdXJjZSBpcyBhIHN0cmluZyBjb25zdGFudCxcbiAqICAgICAgICAgICAgICAgICBtYWtlIHN1cmUgeW91IHdyYXAgaXQgaW4gKipzaW5nbGUqKiBxdW90ZXMsIGUuZy4gYHNyYz1cIidteVBhcnRpYWxUZW1wbGF0ZS5odG1sJ1wiYC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gb25sb2FkIEV4cHJlc3Npb24gdG8gZXZhbHVhdGUgd2hlbiBhIG5ldyBwYXJ0aWFsIGlzIGxvYWRlZC5cbiAqICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICAgICAgICAgICAgICAgICAgKipOb3RlOioqIFdoZW4gdXNpbmcgb25sb2FkIG9uIFNWRyBlbGVtZW50cyBpbiBJRTExLCB0aGUgYnJvd3NlciB3aWxsIHRyeSB0byBjYWxsXG4gKiAgICAgICAgICAgICAgICAgIGEgZnVuY3Rpb24gd2l0aCB0aGUgbmFtZSBvbiB0aGUgd2luZG93IGVsZW1lbnQsIHdoaWNoIHdpbGwgdXN1YWxseSB0aHJvdyBhXG4gKiAgICAgICAgICAgICAgICAgIFwiZnVuY3Rpb24gaXMgdW5kZWZpbmVkXCIgZXJyb3IuIFRvIGZpeCB0aGlzLCB5b3UgY2FuIGluc3RlYWQgdXNlIGBkYXRhLW9ubG9hZGAgb3IgYVxuICogICAgICAgICAgICAgICAgICBkaWZmZXJlbnQgZm9ybSB0aGF0IHtAbGluayBndWlkZS9kaXJlY3RpdmUjbm9ybWFsaXphdGlvbiBtYXRjaGVzfSBgb25sb2FkYC5cbiAqICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAqXG4gKiBAcGFyYW0ge3N0cmluZz19IGF1dG9zY3JvbGwgV2hldGhlciBgbmdJbmNsdWRlYCBzaG91bGQgY2FsbCB7QGxpbmsgbmcuJGFuY2hvclNjcm9sbFxuICogICAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsfSB0byBzY3JvbGwgdGhlIHZpZXdwb3J0IGFmdGVyIHRoZSBjb250ZW50IGlzIGxvYWRlZC5cbiAqXG4gKiAgICAgICAgICAgICAgICAgIC0gSWYgdGhlIGF0dHJpYnV0ZSBpcyBub3Qgc2V0LCBkaXNhYmxlIHNjcm9sbGluZy5cbiAqICAgICAgICAgICAgICAgICAgLSBJZiB0aGUgYXR0cmlidXRlIGlzIHNldCB3aXRob3V0IHZhbHVlLCBlbmFibGUgc2Nyb2xsaW5nLlxuICogICAgICAgICAgICAgICAgICAtIE90aGVyd2lzZSBlbmFibGUgc2Nyb2xsaW5nIG9ubHkgaWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydXRoeSB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICA8ZXhhbXBsZSBtb2R1bGU9XCJpbmNsdWRlRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1pbmNsdWRlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwidGVtcGxhdGVcIiBuZy1vcHRpb25zPVwidC5uYW1lIGZvciB0IGluIHRlbXBsYXRlc1wiPlxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+KGJsYW5rKTwvb3B0aW9uPlxuICAgICAgIDwvc2VsZWN0PlxuICAgICAgIHVybCBvZiB0aGUgdGVtcGxhdGU6IDxjb2RlPnt7dGVtcGxhdGUudXJsfX08L2NvZGU+XG4gICAgICAgPGhyLz5cbiAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGUtYW5pbWF0ZS1jb250YWluZXJcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZS1hbmltYXRlXCIgbmctaW5jbHVkZT1cInRlbXBsYXRlLnVybFwiPjwvZGl2PlxuICAgICAgIDwvZGl2PlxuICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2luY2x1ZGVFeGFtcGxlJywgWyduZ0FuaW1hdGUnXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGVzID1cbiAgICAgICAgICAgIFt7IG5hbWU6ICd0ZW1wbGF0ZTEuaHRtbCcsIHVybDogJ3RlbXBsYXRlMS5odG1sJ30sXG4gICAgICAgICAgICAgeyBuYW1lOiAndGVtcGxhdGUyLmh0bWwnLCB1cmw6ICd0ZW1wbGF0ZTIuaHRtbCd9XTtcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGUgPSAkc2NvcGUudGVtcGxhdGVzWzBdO1xuICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwidGVtcGxhdGUxLmh0bWxcIj5cbiAgICAgIENvbnRlbnQgb2YgdGVtcGxhdGUxLmh0bWxcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInRlbXBsYXRlMi5odG1sXCI+XG4gICAgICBDb250ZW50IG9mIHRlbXBsYXRlMi5odG1sXG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLnNsaWRlLWFuaW1hdGUtY29udGFpbmVyIHtcbiAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XG4gICAgICAgIGhlaWdodDo0MHB4O1xuICAgICAgICBvdmVyZmxvdzpoaWRkZW47XG4gICAgICB9XG5cbiAgICAgIC5zbGlkZS1hbmltYXRlIHtcbiAgICAgICAgcGFkZGluZzoxMHB4O1xuICAgICAgfVxuXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1lbnRlciwgLnNsaWRlLWFuaW1hdGUubmctbGVhdmUge1xuICAgICAgICB0cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XG5cbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgIHRvcDowO1xuICAgICAgICBsZWZ0OjA7XG4gICAgICAgIHJpZ2h0OjA7XG4gICAgICAgIGJvdHRvbTowO1xuICAgICAgICBkaXNwbGF5OmJsb2NrO1xuICAgICAgICBwYWRkaW5nOjEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWVudGVyIHtcbiAgICAgICAgdG9wOi01MHB4O1xuICAgICAgfVxuICAgICAgLnNsaWRlLWFuaW1hdGUubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgdG9wOjA7XG4gICAgICB9XG5cbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWxlYXZlIHtcbiAgICAgICAgdG9wOjA7XG4gICAgICB9XG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUge1xuICAgICAgICB0b3A6NTBweDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgdmFyIHRlbXBsYXRlU2VsZWN0ID0gZWxlbWVudChieS5tb2RlbCgndGVtcGxhdGUnKSk7XG4gICAgICB2YXIgaW5jbHVkZUVsZW0gPSBlbGVtZW50KGJ5LmNzcygnW25nLWluY2x1ZGVdJykpO1xuXG4gICAgICBpdCgnc2hvdWxkIGxvYWQgdGVtcGxhdGUxLmh0bWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KGluY2x1ZGVFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBvZiB0ZW1wbGF0ZTEuaHRtbC8pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbG9hZCB0ZW1wbGF0ZTIuaHRtbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnKSB7XG4gICAgICAgICAgLy8gRmlyZWZveCBjYW4ndCBoYW5kbGUgdXNpbmcgc2VsZWN0c1xuICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy80ODBcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuY2xpY2soKTtcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgyKS5jbGljaygpO1xuICAgICAgICBleHBlY3QoaW5jbHVkZUVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9Db250ZW50IG9mIHRlbXBsYXRlMi5odG1sLyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2UgdG8gYmxhbmsnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT09ICdmaXJlZm94Jykge1xuICAgICAgICAgIC8vIEZpcmVmb3ggY2FuJ3QgaGFuZGxlIHVzaW5nIHNlbGVjdHNcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuY2xpY2soKTtcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgwKS5jbGljaygpO1xuICAgICAgICBleHBlY3QoaW5jbHVkZUVsZW0uaXNQcmVzZW50KCkpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBldmVudFxuICogQG5hbWUgbmdJbmNsdWRlIyRpbmNsdWRlQ29udGVudFJlcXVlc3RlZFxuICogQGV2ZW50VHlwZSBlbWl0IG9uIHRoZSBzY29wZSBuZ0luY2x1ZGUgd2FzIGRlY2xhcmVkIGluXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVtaXR0ZWQgZXZlcnkgdGltZSB0aGUgbmdJbmNsdWRlIGNvbnRlbnQgaXMgcmVxdWVzdGVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBzcmMgVVJMIG9mIGNvbnRlbnQgdG8gbG9hZC5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGV2ZW50XG4gKiBAbmFtZSBuZ0luY2x1ZGUjJGluY2x1ZGVDb250ZW50TG9hZGVkXG4gKiBAZXZlbnRUeXBlIGVtaXQgb24gdGhlIGN1cnJlbnQgbmdJbmNsdWRlIHNjb3BlXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVtaXR0ZWQgZXZlcnkgdGltZSB0aGUgbmdJbmNsdWRlIGNvbnRlbnQgaXMgcmVsb2FkZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICogQHBhcmFtIHtTdHJpbmd9IHNyYyBVUkwgb2YgY29udGVudCB0byBsb2FkLlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZXZlbnRcbiAqIEBuYW1lIG5nSW5jbHVkZSMkaW5jbHVkZUNvbnRlbnRFcnJvclxuICogQGV2ZW50VHlwZSBlbWl0IG9uIHRoZSBzY29wZSBuZ0luY2x1ZGUgd2FzIGRlY2xhcmVkIGluXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVtaXR0ZWQgd2hlbiBhIHRlbXBsYXRlIEhUVFAgcmVxdWVzdCB5aWVsZHMgYW4gZXJyb25lb3VzIHJlc3BvbnNlIChzdGF0dXMgPCAyMDAgfHwgc3RhdHVzID4gMjk5KVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBzcmMgVVJMIG9mIGNvbnRlbnQgdG8gbG9hZC5cbiAqL1xudmFyIG5nSW5jbHVkZURpcmVjdGl2ZSA9IFsnJHRlbXBsYXRlUmVxdWVzdCcsICckYW5jaG9yU2Nyb2xsJywgJyRhbmltYXRlJyxcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCR0ZW1wbGF0ZVJlcXVlc3QsICAgJGFuY2hvclNjcm9sbCwgICAkYW5pbWF0ZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICBwcmlvcml0eTogNDAwLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICBjb250cm9sbGVyOiBhbmd1bGFyLm5vb3AsXG4gICAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xuICAgICAgdmFyIHNyY0V4cCA9IGF0dHIubmdJbmNsdWRlIHx8IGF0dHIuc3JjLFxuICAgICAgICAgIG9ubG9hZEV4cCA9IGF0dHIub25sb2FkIHx8ICcnLFxuICAgICAgICAgIGF1dG9TY3JvbGxFeHAgPSBhdHRyLmF1dG9zY3JvbGw7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xuICAgICAgICB2YXIgY2hhbmdlQ291bnRlciA9IDAsXG4gICAgICAgICAgICBjdXJyZW50U2NvcGUsXG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQsXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudDtcblxuICAgICAgICB2YXIgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChwcmV2aW91c0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShjdXJyZW50RWxlbWVudCkuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgIT09IGZhbHNlKSBwcmV2aW91c0VsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQgPSBjdXJyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2NvcGUuJHdhdGNoKHNyY0V4cCwgZnVuY3Rpb24gbmdJbmNsdWRlV2F0Y2hBY3Rpb24oc3JjKSB7XG4gICAgICAgICAgdmFyIGFmdGVyQW5pbWF0aW9uID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPT0gZmFsc2UgJiYgaXNEZWZpbmVkKGF1dG9TY3JvbGxFeHApICYmXG4gICAgICAgICAgICAgICghYXV0b1Njcm9sbEV4cCB8fCBzY29wZS4kZXZhbChhdXRvU2Nyb2xsRXhwKSkpIHtcbiAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICB2YXIgdGhpc0NoYW5nZUlkID0gKytjaGFuZ2VDb3VudGVyO1xuXG4gICAgICAgICAgaWYgKHNyYykge1xuICAgICAgICAgICAgLy9zZXQgdGhlIDJuZCBwYXJhbSB0byB0cnVlIHRvIGlnbm9yZSB0aGUgdGVtcGxhdGUgcmVxdWVzdCBlcnJvciBzbyB0aGF0IHRoZSBpbm5lclxuICAgICAgICAgICAgLy9jb250ZW50cyBhbmQgc2NvcGUgY2FuIGJlIGNsZWFuZWQgdXAuXG4gICAgICAgICAgICAkdGVtcGxhdGVSZXF1ZXN0KHNyYywgdHJ1ZSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICBpZiAoc2NvcGUuJCRkZXN0cm95ZWQpIHJldHVybjtcblxuICAgICAgICAgICAgICBpZiAodGhpc0NoYW5nZUlkICE9PSBjaGFuZ2VDb3VudGVyKSByZXR1cm47XG4gICAgICAgICAgICAgIHZhciBuZXdTY29wZSA9IHNjb3BlLiRuZXcoKTtcbiAgICAgICAgICAgICAgY3RybC50ZW1wbGF0ZSA9IHJlc3BvbnNlO1xuXG4gICAgICAgICAgICAgIC8vIE5vdGU6IFRoaXMgd2lsbCBhbHNvIGxpbmsgYWxsIGNoaWxkcmVuIG9mIG5nLWluY2x1ZGUgdGhhdCB3ZXJlIGNvbnRhaW5lZCBpbiB0aGUgb3JpZ2luYWxcbiAgICAgICAgICAgICAgLy8gaHRtbC4gSWYgdGhhdCBjb250ZW50IGNvbnRhaW5zIGNvbnRyb2xsZXJzLCAuLi4gdGhleSBjb3VsZCBwb2xsdXRlL2NoYW5nZSB0aGUgc2NvcGUuXG4gICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHVzaW5nIG5nLWluY2x1ZGUgb24gYW4gZWxlbWVudCB3aXRoIGFkZGl0aW9uYWwgY29udGVudCBkb2VzIG5vdCBtYWtlIHNlbnNlLi4uXG4gICAgICAgICAgICAgIC8vIE5vdGU6IFdlIGNhbid0IHJlbW92ZSB0aGVtIGluIHRoZSBjbG9uZUF0dGNoRm4gb2YgJHRyYW5zY2x1ZGUgYXMgdGhhdFxuICAgICAgICAgICAgICAvLyBmdW5jdGlvbiBpcyBjYWxsZWQgYmVmb3JlIGxpbmtpbmcgdGhlIGNvbnRlbnQsIHdoaWNoIHdvdWxkIGFwcGx5IGNoaWxkXG4gICAgICAgICAgICAgIC8vIGRpcmVjdGl2ZXMgdG8gbm9uIGV4aXN0aW5nIGVsZW1lbnRzLlxuICAgICAgICAgICAgICB2YXIgY2xvbmUgPSAkdHJhbnNjbHVkZShuZXdTY29wZSwgZnVuY3Rpb24oY2xvbmUpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2xvbmUsIG51bGwsICRlbGVtZW50KS5kb25lKGFmdGVyQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbmV3U2NvcGU7XG4gICAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY2xvbmU7XG5cbiAgICAgICAgICAgICAgY3VycmVudFNjb3BlLiRlbWl0KCckaW5jbHVkZUNvbnRlbnRMb2FkZWQnLCBzcmMpO1xuICAgICAgICAgICAgICBzY29wZS4kZXZhbChvbmxvYWRFeHApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmIChzY29wZS4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIGlmICh0aGlzQ2hhbmdlSWQgPT09IGNoYW5nZUNvdW50ZXIpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJyRpbmNsdWRlQ29udGVudEVycm9yJywgc3JjKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkJywgc3JjKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCgpO1xuICAgICAgICAgICAgY3RybC50ZW1wbGF0ZSA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbi8vIFRoaXMgZGlyZWN0aXZlIGlzIGNhbGxlZCBkdXJpbmcgdGhlICR0cmFuc2NsdWRlIGNhbGwgb2YgdGhlIGZpcnN0IGBuZ0luY2x1ZGVgIGRpcmVjdGl2ZS5cbi8vIEl0IHdpbGwgcmVwbGFjZSBhbmQgY29tcGlsZSB0aGUgY29udGVudCBvZiB0aGUgZWxlbWVudCB3aXRoIHRoZSBsb2FkZWQgdGVtcGxhdGUuXG4vLyBXZSBuZWVkIHRoaXMgZGlyZWN0aXZlIHNvIHRoYXQgdGhlIGVsZW1lbnQgY29udGVudCBpcyBhbHJlYWR5IGZpbGxlZCB3aGVuXG4vLyB0aGUgbGluayBmdW5jdGlvbiBvZiBhbm90aGVyIGRpcmVjdGl2ZSBvbiB0aGUgc2FtZSBlbGVtZW50IGFzIG5nSW5jbHVkZVxuLy8gaXMgY2FsbGVkLlxudmFyIG5nSW5jbHVkZUZpbGxDb250ZW50RGlyZWN0aXZlID0gWyckY29tcGlsZScsXG4gIGZ1bmN0aW9uKCRjb21waWxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICAgIHByaW9yaXR5OiAtNDAwLFxuICAgICAgcmVxdWlyZTogJ25nSW5jbHVkZScsXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsKSB7XG4gICAgICAgIGlmICh0b1N0cmluZy5jYWxsKCRlbGVtZW50WzBdKS5tYXRjaCgvU1ZHLykpIHtcbiAgICAgICAgICAvLyBXZWJLaXQ6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzU2OTggLS0tIFNWRyBlbGVtZW50cyBkbyBub3RcbiAgICAgICAgICAvLyBzdXBwb3J0IGlubmVySFRNTCwgc28gZGV0ZWN0IHRoaXMgaGVyZSBhbmQgdHJ5IHRvIGdlbmVyYXRlIHRoZSBjb250ZW50c1xuICAgICAgICAgIC8vIHNwZWNpYWxseS5cbiAgICAgICAgICAkZWxlbWVudC5lbXB0eSgpO1xuICAgICAgICAgICRjb21waWxlKGpxTGl0ZUJ1aWxkRnJhZ21lbnQoY3RybC50ZW1wbGF0ZSwgd2luZG93LmRvY3VtZW50KS5jaGlsZE5vZGVzKShzY29wZSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gbmFtZXNwYWNlQWRhcHRlZENsb25lKGNsb25lKSB7XG4gICAgICAgICAgICAkZWxlbWVudC5hcHBlbmQoY2xvbmUpO1xuICAgICAgICAgIH0sIHtmdXR1cmVQYXJlbnRFbGVtZW50OiAkZWxlbWVudH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICRlbGVtZW50Lmh0bWwoY3RybC50ZW1wbGF0ZSk7XG4gICAgICAgICRjb21waWxlKCRlbGVtZW50LmNvbnRlbnRzKCkpKHNjb3BlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0luaXRcbiAqIEByZXN0cmljdCBBQ1xuICogQHByaW9yaXR5IDQ1MFxuICogQGVsZW1lbnQgQU5ZXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0luaXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdJbml0YCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBldmFsdWF0ZSBhbiBleHByZXNzaW9uIGluIHRoZVxuICogY3VycmVudCBzY29wZS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYWJ1c2VkIHRvIGFkZCB1bm5lY2Vzc2FyeSBhbW91bnRzIG9mIGxvZ2ljIGludG8geW91ciB0ZW1wbGF0ZXMuXG4gKiBUaGVyZSBhcmUgb25seSBhIGZldyBhcHByb3ByaWF0ZSB1c2VzIG9mIGBuZ0luaXRgOlxuICogPHVsPlxuICogICA8bGk+YWxpYXNpbmcgc3BlY2lhbCBwcm9wZXJ0aWVzIG9mIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgYG5nUmVwZWF0YH0sXG4gKiAgICAgYXMgc2VlbiBpbiB0aGUgZGVtbyBiZWxvdy48L2xpPlxuICogICA8bGk+aW5pdGlhbGl6aW5nIGRhdGEgZHVyaW5nIGRldmVsb3BtZW50LCBvciBmb3IgZXhhbXBsZXMsIGFzIHNlZW4gdGhyb3VnaG91dCB0aGVzZSBkb2NzLjwvbGk+XG4gKiAgIDxsaT5pbmplY3RpbmcgZGF0YSB2aWEgc2VydmVyIHNpZGUgc2NyaXB0aW5nLjwvbGk+XG4gKiA8L3VsPlxuICpcbiAqIEJlc2lkZXMgdGhlc2UgZmV3IGNhc2VzLCB5b3Ugc2hvdWxkIHVzZSB7QGxpbmsgZ3VpZGUvY29tcG9uZW50IENvbXBvbmVudHN9IG9yXG4gKiB7QGxpbmsgZ3VpZGUvY29udHJvbGxlciBDb250cm9sbGVyc30gcmF0aGVyIHRoYW4gYG5nSW5pdGAgdG8gaW5pdGlhbGl6ZSB2YWx1ZXMgb24gYSBzY29wZS5cbiAqIDwvZGl2PlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGUqKjogSWYgeW91IGhhdmUgYXNzaWdubWVudCBpbiBgbmdJbml0YCBhbG9uZyB3aXRoIGEge0BsaW5rIG5nLiRmaWx0ZXIgYGZpbHRlcmB9LCBtYWtlXG4gKiBzdXJlIHlvdSBoYXZlIHBhcmVudGhlc2VzIHRvIGVuc3VyZSBjb3JyZWN0IG9wZXJhdG9yIHByZWNlZGVuY2U6XG4gKiA8cHJlIGNsYXNzPVwicHJldHR5cHJpbnRcIj5cbiAqIGA8ZGl2IG5nLWluaXQ9XCJ0ZXN0MSA9ICgkaW5kZXggfCB0b1N0cmluZylcIj48L2Rpdj5gXG4gKiA8L3ByZT5cbiAqIDwvZGl2PlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJpbml0RXhhbXBsZVwiIG5hbWU9XCJuZy1pbml0XCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICA8c2NyaXB0PlxuICAgICBhbmd1bGFyLm1vZHVsZSgnaW5pdEV4YW1wbGUnLCBbXSlcbiAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgJHNjb3BlLmxpc3QgPSBbWydhJywgJ2InXSwgWydjJywgJ2QnXV07XG4gICAgICAgfV0pO1xuICAgPC9zY3JpcHQ+XG4gICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICA8ZGl2IG5nLXJlcGVhdD1cImlubmVyTGlzdCBpbiBsaXN0XCIgbmctaW5pdD1cIm91dGVySW5kZXggPSAkaW5kZXhcIj5cbiAgICAgICA8ZGl2IG5nLXJlcGVhdD1cInZhbHVlIGluIGlubmVyTGlzdFwiIG5nLWluaXQ9XCJpbm5lckluZGV4ID0gJGluZGV4XCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJleGFtcGxlLWluaXRcIj5saXN0WyB7e291dGVySW5kZXh9fSBdWyB7e2lubmVySW5kZXh9fSBdID0ge3t2YWx1ZX19Ozwvc3Bhbj5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBhbGlhcyBpbmRleCBwb3NpdGlvbnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBlbGVtZW50cyA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnLmV4YW1wbGUtaW5pdCcpKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMCkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAwIF1bIDAgXSA9IGE7Jyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudHMuZ2V0KDEpLmdldFRleHQoKSkudG9CZSgnbGlzdFsgMCBdWyAxIF0gPSBiOycpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnRzLmdldCgyKS5nZXRUZXh0KCkpLnRvQmUoJ2xpc3RbIDEgXVsgMCBdID0gYzsnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMykuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAxIF1bIDEgXSA9IGQ7Jyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nSW5pdERpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHtcbiAgcHJpb3JpdHk6IDQ1MCxcbiAgY29tcGlsZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByZTogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIHNjb3BlLiRldmFsKGF0dHJzLm5nSW5pdCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdMaXN0XG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwMFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdMaXN0IG9wdGlvbmFsIGRlbGltaXRlciB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHNwbGl0IHRoZSB2YWx1ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRleHQgaW5wdXQgdGhhdCBjb252ZXJ0cyBiZXR3ZWVuIGEgZGVsaW1pdGVkIHN0cmluZyBhbmQgYW4gYXJyYXkgb2Ygc3RyaW5ncy4gVGhlIGRlZmF1bHRcbiAqIGRlbGltaXRlciBpcyBhIGNvbW1hIGZvbGxvd2VkIGJ5IGEgc3BhY2UgLSBlcXVpdmFsZW50IHRvIGBuZy1saXN0PVwiLCBcImAuIFlvdSBjYW4gc3BlY2lmeSBhIGN1c3RvbVxuICogZGVsaW1pdGVyIGFzIHRoZSB2YWx1ZSBvZiB0aGUgYG5nTGlzdGAgYXR0cmlidXRlIC0gZm9yIGV4YW1wbGUsIGBuZy1saXN0PVwiIHwgXCJgLlxuICpcbiAqIFRoZSBiZWhhdmlvdXIgb2YgdGhlIGRpcmVjdGl2ZSBpcyBhZmZlY3RlZCBieSB0aGUgdXNlIG9mIHRoZSBgbmdUcmltYCBhdHRyaWJ1dGUuXG4gKiAqIElmIGBuZ1RyaW1gIGlzIHNldCB0byBgXCJmYWxzZVwiYCB0aGVuIHdoaXRlc3BhY2UgYXJvdW5kIGJvdGggdGhlIHNlcGFyYXRvciBhbmQgZWFjaFxuICogICBsaXN0IGl0ZW0gaXMgcmVzcGVjdGVkLiBUaGlzIGltcGxpZXMgdGhhdCB0aGUgdXNlciBvZiB0aGUgZGlyZWN0aXZlIGlzIHJlc3BvbnNpYmxlIGZvclxuICogICBkZWFsaW5nIHdpdGggd2hpdGVzcGFjZSBidXQgYWxzbyBhbGxvd3MgeW91IHRvIHVzZSB3aGl0ZXNwYWNlIGFzIGEgZGVsaW1pdGVyLCBzdWNoIGFzIGFcbiAqICAgdGFiIG9yIG5ld2xpbmUgY2hhcmFjdGVyLlxuICogKiBPdGhlcndpc2Ugd2hpdGVzcGFjZSBhcm91bmQgdGhlIGRlbGltaXRlciBpcyBpZ25vcmVkIHdoZW4gc3BsaXR0aW5nIChhbHRob3VnaCBpdCBpcyByZXNwZWN0ZWRcbiAqICAgd2hlbiBqb2luaW5nIHRoZSBsaXN0IGl0ZW1zIGJhY2sgdG9nZXRoZXIpIGFuZCB3aGl0ZXNwYWNlIGFyb3VuZCBlYWNoIGxpc3QgaXRlbSBpcyBzdHJpcHBlZFxuICogICBiZWZvcmUgaXQgaXMgYWRkZWQgdG8gdGhlIG1vZGVsLlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgVmFsaWRhdGlvblxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0xpc3QtZGlyZWN0aXZlXCIgbW9kdWxlPVwibGlzdEV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgICBhbmd1bGFyLm1vZHVsZSgnbGlzdEV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICAgJHNjb3BlLm5hbWVzID0gWydtb3JwaGV1cycsICduZW8nLCAndHJpbml0eSddO1xuICogICAgICAgIH1dKTtcbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICA8bGFiZWw+TGlzdDogPGlucHV0IG5hbWU9XCJuYW1lc0lucHV0XCIgbmctbW9kZWw9XCJuYW1lc1wiIG5nLWxpc3QgcmVxdWlyZWQ+PC9sYWJlbD5cbiAqICAgICAgPHNwYW4gcm9sZT1cImFsZXJ0XCI+XG4gKiAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0ubmFtZXNJbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAqICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gKiAgICAgIDwvc3Bhbj5cbiAqICAgICAgPGJyPlxuICogICAgICA8dHQ+bmFtZXMgPSB7e25hbWVzfX08L3R0Pjxici8+XG4gKiAgICAgIDx0dD5teUZvcm0ubmFtZXNJbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICogICAgICA8dHQ+bXlGb3JtLm5hbWVzSW5wdXQuJGVycm9yID0ge3tteUZvcm0ubmFtZXNJbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAqICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAqICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICogICAgIDwvZm9ybT5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgdmFyIGxpc3RJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ25hbWVzJykpO1xuICogICAgIHZhciBuYW1lcyA9IGVsZW1lbnQoYnkuZXhhY3RCaW5kaW5nKCduYW1lcycpKTtcbiAqICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZCcpKTtcbiAqICAgICB2YXIgZXJyb3IgPSBlbGVtZW50KGJ5LmNzcygnc3Bhbi5lcnJvcicpKTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBleHBlY3QobmFtZXMuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1tcIm1vcnBoZXVzXCIsXCJuZW9cIixcInRyaW5pdHlcIl0nKTtcbiAqICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICogICAgICAgZXhwZWN0KGVycm9yLmdldENzc1ZhbHVlKCdkaXNwbGF5JykpLnRvQmUoJ25vbmUnKTtcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBsaXN0SW5wdXQuY2xlYXIoKTtcbiAqICAgICAgIGxpc3RJbnB1dC5zZW5kS2V5cygnJyk7XG4gKlxuICogICAgICAgZXhwZWN0KG5hbWVzLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcbiAqICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAqICAgICAgIGV4cGVjdChlcnJvci5nZXRDc3NWYWx1ZSgnZGlzcGxheScpKS5ub3QudG9CZSgnbm9uZScpO1xuICogICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBTcGxpdHRpbmcgb24gbmV3bGluZVxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0xpc3QtZGlyZWN0aXZlLW5ld2xpbmVzXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJsaXN0XCIgbmctbGlzdD1cIiYjMTA7XCIgbmctdHJpbT1cImZhbHNlXCI+PC90ZXh0YXJlYT5cbiAqICAgIDxwcmU+e3sgbGlzdCB8IGpzb24gfX08L3ByZT5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgaXQoXCJzaG91bGQgc3BsaXQgdGhlIHRleHQgYnkgbmV3bGluZXNcIiwgZnVuY3Rpb24oKSB7XG4gKiAgICAgICB2YXIgbGlzdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbGlzdCcpKTtcbiAqICAgICAgIHZhciBvdXRwdXQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QgfCBqc29uJykpO1xuICogICAgICAgbGlzdElucHV0LnNlbmRLZXlzKCdhYmNcXG5kZWZcXG5naGknKTtcbiAqICAgICAgIGV4cGVjdChvdXRwdXQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1tcXG4gIFwiYWJjXCIsXFxuICBcImRlZlwiLFxcbiAgXCJnaGlcIlxcbl0nKTtcbiAqICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqL1xudmFyIG5nTGlzdERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcHJpb3JpdHk6IDEwMCxcbiAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcbiAgICAgIHZhciBuZ0xpc3QgPSBhdHRyLm5nTGlzdCB8fCAnLCAnO1xuICAgICAgdmFyIHRyaW1WYWx1ZXMgPSBhdHRyLm5nVHJpbSAhPT0gJ2ZhbHNlJztcbiAgICAgIHZhciBzZXBhcmF0b3IgPSB0cmltVmFsdWVzID8gdHJpbShuZ0xpc3QpIDogbmdMaXN0O1xuXG4gICAgICB2YXIgcGFyc2UgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHZpZXdWYWx1ZSBpcyBpbnZhbGlkIChzYXkgcmVxdWlyZWQgYnV0IGVtcHR5KSBpdCB3aWxsIGJlIGB1bmRlZmluZWRgXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh2aWV3VmFsdWUpKSByZXR1cm47XG5cbiAgICAgICAgdmFyIGxpc3QgPSBbXTtcblxuICAgICAgICBpZiAodmlld1ZhbHVlKSB7XG4gICAgICAgICAgZm9yRWFjaCh2aWV3VmFsdWUuc3BsaXQoc2VwYXJhdG9yKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgbGlzdC5wdXNoKHRyaW1WYWx1ZXMgPyB0cmltKHZhbHVlKSA6IHZhbHVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgfTtcblxuICAgICAgY3RybC4kcGFyc2Vycy5wdXNoKHBhcnNlKTtcbiAgICAgIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUuam9pbihuZ0xpc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPdmVycmlkZSB0aGUgc3RhbmRhcmQgJGlzRW1wdHkgYmVjYXVzZSBhbiBlbXB0eSBhcnJheSBtZWFucyB0aGUgaW5wdXQgaXMgZW1wdHkuXG4gICAgICBjdHJsLiRpc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICF2YWx1ZSB8fCAhdmFsdWUubGVuZ3RoO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgVkFMSURfQ0xBU1M6IHRydWUsXG4gIElOVkFMSURfQ0xBU1M6IHRydWUsXG4gIFBSSVNUSU5FX0NMQVNTOiB0cnVlLFxuICBESVJUWV9DTEFTUzogdHJ1ZSxcbiAgVU5UT1VDSEVEX0NMQVNTOiB0cnVlLFxuICBUT1VDSEVEX0NMQVNTOiB0cnVlLFxuICBQRU5ESU5HX0NMQVNTOiB0cnVlLFxuICBhZGRTZXRWYWxpZGl0eU1ldGhvZDogdHJ1ZSxcbiAgc2V0dXBWYWxpZGl0eTogdHJ1ZSxcbiAgZGVmYXVsdE1vZGVsT3B0aW9uczogZmFsc2VcbiovXG5cblxudmFyIFZBTElEX0NMQVNTID0gJ25nLXZhbGlkJyxcbiAgICBJTlZBTElEX0NMQVNTID0gJ25nLWludmFsaWQnLFxuICAgIFBSSVNUSU5FX0NMQVNTID0gJ25nLXByaXN0aW5lJyxcbiAgICBESVJUWV9DTEFTUyA9ICduZy1kaXJ0eScsXG4gICAgVU5UT1VDSEVEX0NMQVNTID0gJ25nLXVudG91Y2hlZCcsXG4gICAgVE9VQ0hFRF9DTEFTUyA9ICduZy10b3VjaGVkJyxcbiAgICBFTVBUWV9DTEFTUyA9ICduZy1lbXB0eScsXG4gICAgTk9UX0VNUFRZX0NMQVNTID0gJ25nLW5vdC1lbXB0eSc7XG5cbnZhciBuZ01vZGVsTWluRXJyID0gbWluRXJyKCduZ01vZGVsJyk7XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXJcbiAqIEBwcm9wZXJ0eSB7Kn0gJHZpZXdWYWx1ZSBUaGUgYWN0dWFsIHZhbHVlIGZyb20gdGhlIGNvbnRyb2wncyB2aWV3LiBGb3IgYGlucHV0YCBlbGVtZW50cywgdGhpcyBpcyBhXG4gKiBTdHJpbmcuIFNlZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0Vmlld1ZhbHVlfSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgd2hlbiB0aGUgJHZpZXdWYWx1ZVxuICogaXMgc2V0LlxuICpcbiAqIEBwcm9wZXJ0eSB7Kn0gJG1vZGVsVmFsdWUgVGhlIHZhbHVlIGluIHRoZSBtb2RlbCB0aGF0IHRoZSBjb250cm9sIGlzIGJvdW5kIHRvLlxuICpcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZ1bmN0aW9uPn0gJHBhcnNlcnMgQXJyYXkgb2YgZnVuY3Rpb25zIHRvIGV4ZWN1dGUsIGFzIGEgcGlwZWxpbmUsIHdoZW5ldmVyXG4gKiAgdGhlIGNvbnRyb2wgdXBkYXRlcyB0aGUgbmdNb2RlbENvbnRyb2xsZXIgd2l0aCBhIG5ldyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlXG4gICAgYCR2aWV3VmFsdWVgfSBmcm9tIHRoZSBET00sIHVzdWFsbHkgdmlhIHVzZXIgaW5wdXQuXG4gICAgU2VlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRWaWV3VmFsdWUgYCRzZXRWaWV3VmFsdWUoKWB9IGZvciBhIGRldGFpbGVkIGxpZmVjeWNsZSBleHBsYW5hdGlvbi5cbiAgICBOb3RlIHRoYXQgdGhlIGAkcGFyc2Vyc2AgYXJlIG5vdCBjYWxsZWQgd2hlbiB0aGUgYm91bmQgbmdNb2RlbCBleHByZXNzaW9uIGNoYW5nZXMgcHJvZ3JhbW1hdGljYWxseS5cblxuICBUaGUgZnVuY3Rpb25zIGFyZSBjYWxsZWQgaW4gYXJyYXkgb3JkZXIsIGVhY2ggcGFzc2luZ1xuICAgIGl0cyByZXR1cm4gdmFsdWUgdGhyb3VnaCB0byB0aGUgbmV4dC4gVGhlIGxhc3QgcmV0dXJuIHZhbHVlIGlzIGZvcndhcmRlZCB0byB0aGVcbiAgICB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyBgJHZhbGlkYXRvcnNgfSBjb2xsZWN0aW9uLlxuXG4gIFBhcnNlcnMgYXJlIHVzZWQgdG8gc2FuaXRpemUgLyBjb252ZXJ0IHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlXG4gICAgYCR2aWV3VmFsdWVgfS5cblxuICBSZXR1cm5pbmcgYHVuZGVmaW5lZGAgZnJvbSBhIHBhcnNlciBtZWFucyBhIHBhcnNlIGVycm9yIG9jY3VycmVkLiBJbiB0aGF0IGNhc2UsXG4gICAgbm8ge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgYCR2YWxpZGF0b3JzYH0gd2lsbCBydW4gYW5kIHRoZSBgbmdNb2RlbGBcbiAgICB3aWxsIGJlIHNldCB0byBgdW5kZWZpbmVkYCB1bmxlc3Mge0BsaW5rIG5nTW9kZWxPcHRpb25zIGBuZ01vZGVsT3B0aW9ucy5hbGxvd0ludmFsaWRgfVxuICAgIGlzIHNldCB0byBgdHJ1ZWAuIFRoZSBwYXJzZSBlcnJvciBpcyBzdG9yZWQgaW4gYG5nTW9kZWwuJGVycm9yLnBhcnNlYC5cblxuICBUaGlzIHNpbXBsZSBleGFtcGxlIHNob3dzIGEgcGFyc2VyIHRoYXQgd291bGQgY29udmVydCB0ZXh0IGlucHV0IHZhbHVlIHRvIGxvd2VyY2FzZTpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBwYXJzZSh2YWx1ZSkge1xuICogICBpZiAodmFsdWUpIHtcbiAqICAgICByZXR1cm4gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAqICAgfVxuICogfVxuICogbmdNb2RlbENvbnRyb2xsZXIuJHBhcnNlcnMucHVzaChwYXJzZSk7XG4gKiBgYGBcblxuICpcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZ1bmN0aW9uPn0gJGZvcm1hdHRlcnMgQXJyYXkgb2YgZnVuY3Rpb25zIHRvIGV4ZWN1dGUsIGFzIGEgcGlwZWxpbmUsIHdoZW5ldmVyXG4gICAgdGhlIGJvdW5kIG5nTW9kZWwgZXhwcmVzc2lvbiBjaGFuZ2VzIHByb2dyYW1tYXRpY2FsbHkuIFRoZSBgJGZvcm1hdHRlcnNgIGFyZSBub3QgY2FsbGVkIHdoZW4gdGhlXG4gICAgdmFsdWUgb2YgdGhlIGNvbnRyb2wgaXMgY2hhbmdlZCBieSB1c2VyIGludGVyYWN0aW9uLlxuXG4gIEZvcm1hdHRlcnMgYXJlIHVzZWQgdG8gZm9ybWF0IC8gY29udmVydCB0aGUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJG1vZGVsVmFsdWVcbiAgICBgJG1vZGVsVmFsdWVgfSBmb3IgZGlzcGxheSBpbiB0aGUgY29udHJvbC5cblxuICBUaGUgZnVuY3Rpb25zIGFyZSBjYWxsZWQgaW4gcmV2ZXJzZSBhcnJheSBvcmRlciwgZWFjaCBwYXNzaW5nIHRoZSB2YWx1ZSB0aHJvdWdoIHRvIHRoZVxuICAgIG5leHQuIFRoZSBsYXN0IHJldHVybiB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBhY3R1YWwgRE9NIHZhbHVlLlxuXG4gIFRoaXMgc2ltcGxlIGV4YW1wbGUgc2hvd3MgYSBmb3JtYXR0ZXIgdGhhdCB3b3VsZCBjb252ZXJ0IHRoZSBtb2RlbCB2YWx1ZSB0byB1cHBlcmNhc2U6XG5cbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBmb3JtYXQodmFsdWUpIHtcbiAqICAgaWYgKHZhbHVlKSB7XG4gKiAgICAgcmV0dXJuIHZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gKiAgIH1cbiAqIH1cbiAqIG5nTW9kZWwuJGZvcm1hdHRlcnMucHVzaChmb3JtYXQpO1xuICogYGBgXG4gKlxuICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+fSAkdmFsaWRhdG9ycyBBIGNvbGxlY3Rpb24gb2YgdmFsaWRhdG9ycyB0aGF0IGFyZSBhcHBsaWVkXG4gKiAgICAgIHdoZW5ldmVyIHRoZSBtb2RlbCB2YWx1ZSBjaGFuZ2VzLiBUaGUga2V5IHZhbHVlIHdpdGhpbiB0aGUgb2JqZWN0IHJlZmVycyB0byB0aGUgbmFtZSBvZiB0aGVcbiAqICAgICAgdmFsaWRhdG9yIHdoaWxlIHRoZSBmdW5jdGlvbiByZWZlcnMgdG8gdGhlIHZhbGlkYXRpb24gb3BlcmF0aW9uLiBUaGUgdmFsaWRhdGlvbiBvcGVyYXRpb24gaXNcbiAqICAgICAgcHJvdmlkZWQgd2l0aCB0aGUgbW9kZWwgdmFsdWUgYXMgYW4gYXJndW1lbnQgYW5kIG11c3QgcmV0dXJuIGEgdHJ1ZSBvciBmYWxzZSB2YWx1ZSBkZXBlbmRpbmdcbiAqICAgICAgb24gdGhlIHJlc3BvbnNlIG9mIHRoYXQgdmFsaWRhdGlvbi5cbiAqXG4gKiBgYGBqc1xuICogbmdNb2RlbC4kdmFsaWRhdG9ycy52YWxpZENoYXJhY3RlcnMgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAqICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XG4gKiAgIHJldHVybiAvWzAtOV0rLy50ZXN0KHZhbHVlKSAmJlxuICogICAgICAgICAgL1thLXpdKy8udGVzdCh2YWx1ZSkgJiZcbiAqICAgICAgICAgIC9bQS1aXSsvLnRlc3QodmFsdWUpICYmXG4gKiAgICAgICAgICAvXFxXKy8udGVzdCh2YWx1ZSk7XG4gKiB9O1xuICogYGBgXG4gKlxuICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+fSAkYXN5bmNWYWxpZGF0b3JzIEEgY29sbGVjdGlvbiBvZiB2YWxpZGF0aW9ucyB0aGF0IGFyZSBleHBlY3RlZCB0b1xuICogICAgICBwZXJmb3JtIGFuIGFzeW5jaHJvbm91cyB2YWxpZGF0aW9uIChlLmcuIGEgSFRUUCByZXF1ZXN0KS4gVGhlIHZhbGlkYXRpb24gZnVuY3Rpb24gdGhhdCBpcyBwcm92aWRlZFxuICogICAgICBpcyBleHBlY3RlZCB0byByZXR1cm4gYSBwcm9taXNlIHdoZW4gaXQgaXMgcnVuIGR1cmluZyB0aGUgbW9kZWwgdmFsaWRhdGlvbiBwcm9jZXNzLiBPbmNlIHRoZSBwcm9taXNlXG4gKiAgICAgIGlzIGRlbGl2ZXJlZCB0aGVuIHRoZSB2YWxpZGF0aW9uIHN0YXR1cyB3aWxsIGJlIHNldCB0byB0cnVlIHdoZW4gZnVsZmlsbGVkIGFuZCBmYWxzZSB3aGVuIHJlamVjdGVkLlxuICogICAgICBXaGVuIHRoZSBhc3luY2hyb25vdXMgdmFsaWRhdG9ycyBhcmUgdHJpZ2dlcmVkLCBlYWNoIG9mIHRoZSB2YWxpZGF0b3JzIHdpbGwgcnVuIGluIHBhcmFsbGVsIGFuZCB0aGUgbW9kZWxcbiAqICAgICAgdmFsdWUgd2lsbCBvbmx5IGJlIHVwZGF0ZWQgb25jZSBhbGwgdmFsaWRhdG9ycyBoYXZlIGJlZW4gZnVsZmlsbGVkLiBBcyBsb25nIGFzIGFuIGFzeW5jaHJvbm91cyB2YWxpZGF0b3JcbiAqICAgICAgaXMgdW5mdWxmaWxsZWQsIGl0cyBrZXkgd2lsbCBiZSBhZGRlZCB0byB0aGUgY29udHJvbGxlcnMgYCRwZW5kaW5nYCBwcm9wZXJ0eS4gQWxzbywgYWxsIGFzeW5jaHJvbm91cyB2YWxpZGF0b3JzXG4gKiAgICAgIHdpbGwgb25seSBydW4gb25jZSBhbGwgc3luY2hyb25vdXMgdmFsaWRhdG9ycyBoYXZlIHBhc3NlZC5cbiAqXG4gKiBQbGVhc2Ugbm90ZSB0aGF0IGlmICRodHRwIGlzIHVzZWQgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdGhhdCB0aGUgc2VydmVyIHJldHVybnMgYSBzdWNjZXNzIEhUVFAgcmVzcG9uc2UgY29kZVxuICogaW4gb3JkZXIgdG8gZnVsZmlsbCB0aGUgdmFsaWRhdGlvbiBhbmQgYSBzdGF0dXMgbGV2ZWwgb2YgYDR4eGAgaW4gb3JkZXIgdG8gcmVqZWN0IHRoZSB2YWxpZGF0aW9uLlxuICpcbiAqIGBgYGpzXG4gKiBuZ01vZGVsLiRhc3luY1ZhbGlkYXRvcnMudW5pcXVlVXNlcm5hbWUgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAqICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XG4gKlxuICogICAvLyBMb29rdXAgdXNlciBieSB1c2VybmFtZVxuICogICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzLycgKyB2YWx1ZSkuXG4gKiAgICAgIHRoZW4oZnVuY3Rpb24gcmVzb2x2ZWQoKSB7XG4gKiAgICAgICAgLy91c2VybmFtZSBleGlzdHMsIHRoaXMgbWVhbnMgdmFsaWRhdGlvbiBmYWlsc1xuICogICAgICAgIHJldHVybiAkcS5yZWplY3QoJ2V4aXN0cycpO1xuICogICAgICB9LCBmdW5jdGlvbiByZWplY3RlZCgpIHtcbiAqICAgICAgICAvL3VzZXJuYW1lIGRvZXMgbm90IGV4aXN0LCB0aGVyZWZvcmUgdGhpcyB2YWxpZGF0aW9uIHBhc3Nlc1xuICogICAgICAgIHJldHVybiB0cnVlO1xuICogICAgICB9KTtcbiAqIH07XG4gKiBgYGBcbiAqXG4gKiBAcHJvcGVydHkge0FycmF5LjxGdW5jdGlvbj59ICR2aWV3Q2hhbmdlTGlzdGVuZXJzIEFycmF5IG9mIGZ1bmN0aW9ucyB0byBleGVjdXRlIHdoZW5ldmVyXG4gKiAgICAgYSBjaGFuZ2UgdG8ge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSBgJHZpZXdWYWx1ZWB9IGhhcyBjYXVzZWQgYSBjaGFuZ2VcbiAqICAgICB0byB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkbW9kZWxWYWx1ZSBgJG1vZGVsVmFsdWVgfS5cbiAqICAgICBJdCBpcyBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIGFuZCBpdHMgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXG4gKiAgICAgVGhpcyBjYW4gYmUgdXNlZCBpbiBwbGFjZSBvZiBhZGRpdGlvbmFsICR3YXRjaGVzIGFnYWluc3QgdGhlIG1vZGVsIHZhbHVlLlxuICpcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkZXJyb3IgQW4gb2JqZWN0IGhhc2ggd2l0aCBhbGwgZmFpbGluZyB2YWxpZGF0b3IgaWRzIGFzIGtleXMuXG4gKiBAcHJvcGVydHkge09iamVjdH0gJHBlbmRpbmcgQW4gb2JqZWN0IGhhc2ggd2l0aCBhbGwgcGVuZGluZyB2YWxpZGF0b3IgaWRzIGFzIGtleXMuXG4gKlxuICogQHByb3BlcnR5IHtib29sZWFufSAkdW50b3VjaGVkIFRydWUgaWYgY29udHJvbCBoYXMgbm90IGxvc3QgZm9jdXMgeWV0LlxuICogQHByb3BlcnR5IHtib29sZWFufSAkdG91Y2hlZCBUcnVlIGlmIGNvbnRyb2wgaGFzIGxvc3QgZm9jdXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRwcmlzdGluZSBUcnVlIGlmIHVzZXIgaGFzIG5vdCBpbnRlcmFjdGVkIHdpdGggdGhlIGNvbnRyb2wgeWV0LlxuICogQHByb3BlcnR5IHtib29sZWFufSAkZGlydHkgVHJ1ZSBpZiB1c2VyIGhhcyBhbHJlYWR5IGludGVyYWN0ZWQgd2l0aCB0aGUgY29udHJvbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHZhbGlkIFRydWUgaWYgdGhlcmUgaXMgbm8gZXJyb3IuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRpbnZhbGlkIFRydWUgaWYgYXQgbGVhc3Qgb25lIGVycm9yIG9uIHRoZSBjb250cm9sLlxuICogQHByb3BlcnR5IHtzdHJpbmd9ICRuYW1lIFRoZSBuYW1lIGF0dHJpYnV0ZSBvZiB0aGUgY29udHJvbC5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBgTmdNb2RlbENvbnRyb2xsZXJgIHByb3ZpZGVzIEFQSSBmb3IgdGhlIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0gZGlyZWN0aXZlLlxuICogVGhlIGNvbnRyb2xsZXIgY29udGFpbnMgc2VydmljZXMgZm9yIGRhdGEtYmluZGluZywgdmFsaWRhdGlvbiwgQ1NTIHVwZGF0ZXMsIGFuZCB2YWx1ZSBmb3JtYXR0aW5nXG4gKiBhbmQgcGFyc2luZy4gSXQgcHVycG9zZWZ1bGx5IGRvZXMgbm90IGNvbnRhaW4gYW55IGxvZ2ljIHdoaWNoIGRlYWxzIHdpdGggRE9NIHJlbmRlcmluZyBvclxuICogbGlzdGVuaW5nIHRvIERPTSBldmVudHMuXG4gKiBTdWNoIERPTSByZWxhdGVkIGxvZ2ljIHNob3VsZCBiZSBwcm92aWRlZCBieSBvdGhlciBkaXJlY3RpdmVzIHdoaWNoIG1ha2UgdXNlIG9mXG4gKiBgTmdNb2RlbENvbnRyb2xsZXJgIGZvciBkYXRhLWJpbmRpbmcgdG8gY29udHJvbCBlbGVtZW50cy5cbiAqIEFuZ3VsYXJKUyBwcm92aWRlcyB0aGlzIERPTSBsb2dpYyBmb3IgbW9zdCB7QGxpbmsgaW5wdXQgYGlucHV0YH0gZWxlbWVudHMuXG4gKiBBdCB0aGUgZW5kIG9mIHRoaXMgcGFnZSB5b3UgY2FuIGZpbmQgYSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciNjdXN0b20tY29udHJvbC1leGFtcGxlXG4gKiBjdXN0b20gY29udHJvbCBleGFtcGxlfSB0aGF0IHVzZXMgYG5nTW9kZWxDb250cm9sbGVyYCB0byBiaW5kIHRvIGBjb250ZW50ZWRpdGFibGVgIGVsZW1lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQ3VzdG9tIENvbnRyb2wgRXhhbXBsZVxuICogVGhpcyBleGFtcGxlIHNob3dzIGhvdyB0byB1c2UgYE5nTW9kZWxDb250cm9sbGVyYCB3aXRoIGEgY3VzdG9tIGNvbnRyb2wgdG8gYWNoaWV2ZVxuICogZGF0YS1iaW5kaW5nLiBOb3RpY2UgaG93IGRpZmZlcmVudCBkaXJlY3RpdmVzIChgY29udGVudGVkaXRhYmxlYCwgYG5nLW1vZGVsYCwgYW5kIGByZXF1aXJlZGApXG4gKiBjb2xsYWJvcmF0ZSB0b2dldGhlciB0byBhY2hpZXZlIHRoZSBkZXNpcmVkIHJlc3VsdC5cbiAqXG4gKiBgY29udGVudGVkaXRhYmxlYCBpcyBhbiBIVE1MNSBhdHRyaWJ1dGUsIHdoaWNoIHRlbGxzIHRoZSBicm93c2VyIHRvIGxldCB0aGUgZWxlbWVudFxuICogY29udGVudHMgYmUgZWRpdGVkIGluIHBsYWNlIGJ5IHRoZSB1c2VyLlxuICpcbiAqIFdlIGFyZSB1c2luZyB0aGUge0BsaW5rIG5nLnNlcnZpY2U6JHNjZSAkc2NlfSBzZXJ2aWNlIGhlcmUgYW5kIGluY2x1ZGUgdGhlIHtAbGluayBuZ1Nhbml0aXplICRzYW5pdGl6ZX1cbiAqIG1vZHVsZSB0byBhdXRvbWF0aWNhbGx5IHJlbW92ZSBcImJhZFwiIGNvbnRlbnQgbGlrZSBpbmxpbmUgZXZlbnQgbGlzdGVuZXIgKGUuZy4gYDxzcGFuIG9uY2xpY2s9XCIuLi5cIj5gKS5cbiAqIEhvd2V2ZXIsIGFzIHdlIGFyZSB1c2luZyBgJHNjZWAgdGhlIG1vZGVsIGNhbiBzdGlsbCBkZWNpZGUgdG8gcHJvdmlkZSB1bnNhZmUgY29udGVudCBpZiBpdCBtYXJrc1xuICogdGhhdCBjb250ZW50IHVzaW5nIHRoZSBgJHNjZWAgc2VydmljZS5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwiTmdNb2RlbENvbnRyb2xsZXJcIiBtb2R1bGU9XCJjdXN0b21Db250cm9sXCIgZGVwcz1cImFuZ3VsYXItc2FuaXRpemUuanNcIj5cbiAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICBbY29udGVudGVkaXRhYmxlXSB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgbWluLWhlaWdodDogMjBweDtcbiAgICAgIH1cblxuICAgICAgLm5nLWludmFsaWQge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZWQ7XG4gICAgICB9XG5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbUNvbnRyb2wnLCBbJ25nU2FuaXRpemUnXSkuXG4gICAgICAgIGRpcmVjdGl2ZSgnY29udGVudGVkaXRhYmxlJywgWyckc2NlJywgZnVuY3Rpb24oJHNjZSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLCAvLyBvbmx5IGFjdGl2YXRlIG9uIGVsZW1lbnQgYXR0cmlidXRlXG4gICAgICAgICAgICByZXF1aXJlOiAnP25nTW9kZWwnLCAvLyBnZXQgYSBob2xkIG9mIE5nTW9kZWxDb250cm9sbGVyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAgICAgICAgICAgICAgaWYgKCFuZ01vZGVsKSByZXR1cm47IC8vIGRvIG5vdGhpbmcgaWYgbm8gbmctbW9kZWxcblxuICAgICAgICAgICAgICAvLyBTcGVjaWZ5IGhvdyBVSSBzaG91bGQgYmUgdXBkYXRlZFxuICAgICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50Lmh0bWwoJHNjZS5nZXRUcnVzdGVkSHRtbChuZ01vZGVsLiR2aWV3VmFsdWUgfHwgJycpKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGNoYW5nZSBldmVudHMgdG8gZW5hYmxlIGJpbmRpbmdcbiAgICAgICAgICAgICAgZWxlbWVudC5vbignYmx1ciBrZXl1cCBjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kZXZhbEFzeW5jKHJlYWQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmVhZCgpOyAvLyBpbml0aWFsaXplXG5cbiAgICAgICAgICAgICAgLy8gV3JpdGUgZGF0YSB0byB0aGUgbW9kZWxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gcmVhZCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IGVsZW1lbnQuaHRtbCgpO1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gd2UgY2xlYXIgdGhlIGNvbnRlbnQgZWRpdGFibGUgdGhlIGJyb3dzZXIgbGVhdmVzIGEgPGJyPiBiZWhpbmRcbiAgICAgICAgICAgICAgICAvLyBJZiBzdHJpcC1iciBhdHRyaWJ1dGUgaXMgcHJvdmlkZWQgdGhlbiB3ZSBzdHJpcCB0aGlzIG91dFxuICAgICAgICAgICAgICAgIGlmIChhdHRycy5zdHJpcEJyICYmIGh0bWwgPT09ICc8YnI+Jykge1xuICAgICAgICAgICAgICAgICAgaHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUoaHRtbCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gICAgICAgPGRpdiBjb250ZW50ZWRpdGFibGVcbiAgICAgICAgICAgIG5hbWU9XCJteVdpZGdldFwiIG5nLW1vZGVsPVwidXNlckNvbnRlbnRcIlxuICAgICAgICAgICAgc3RyaXAtYnI9XCJ0cnVlXCJcbiAgICAgICAgICAgIHJlcXVpcmVkPkNoYW5nZSBtZSE8L2Rpdj5cbiAgICAgICAgPHNwYW4gbmctc2hvdz1cIm15Rm9ybS5teVdpZGdldC4kZXJyb3IucmVxdWlyZWRcIj5SZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgPGhyPlxuICAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cInVzZXJDb250ZW50XCIgYXJpYS1sYWJlbD1cIkR5bmFtaWMgdGV4dGFyZWFcIj48L3RleHRhcmVhPlxuICAgICAgPC9mb3JtPlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgaXQoJ3Nob3VsZCBkYXRhLWJpbmQgYW5kIGJlY29tZSBpbnZhbGlkJywgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ3NhZmFyaScgfHwgYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnKSB7XG4gICAgICAgIC8vIFNhZmFyaURyaXZlciBjYW4ndCBoYW5kbGUgY29udGVudGVkaXRhYmxlXG4gICAgICAgIC8vIGFuZCBGaXJlZm94IGRyaXZlciBjYW4ndCBjbGVhciBjb250ZW50ZWRpdGFibGVzIHZlcnkgd2VsbFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgY29udGVudEVkaXRhYmxlID0gZWxlbWVudChieS5jc3MoJ1tjb250ZW50ZWRpdGFibGVdJykpO1xuICAgICAgdmFyIGNvbnRlbnQgPSAnQ2hhbmdlIG1lISc7XG5cbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0VGV4dCgpKS50b0VxdWFsKGNvbnRlbnQpO1xuXG4gICAgICBjb250ZW50RWRpdGFibGUuY2xlYXIoKTtcbiAgICAgIGNvbnRlbnRFZGl0YWJsZS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5CQUNLX1NQQUNFKTtcbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0VGV4dCgpKS50b0VxdWFsKCcnKTtcbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b01hdGNoKC9uZy1pbnZhbGlkLXJlcXVpcmVkLyk7XG4gICAgfSk7XG4gICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqXG4gKi9cbk5nTW9kZWxDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckZXhjZXB0aW9uSGFuZGxlcicsICckYXR0cnMnLCAnJGVsZW1lbnQnLCAnJHBhcnNlJywgJyRhbmltYXRlJywgJyR0aW1lb3V0JywgJyRxJywgJyRpbnRlcnBvbGF0ZSddO1xuZnVuY3Rpb24gTmdNb2RlbENvbnRyb2xsZXIoJHNjb3BlLCAkZXhjZXB0aW9uSGFuZGxlciwgJGF0dHIsICRlbGVtZW50LCAkcGFyc2UsICRhbmltYXRlLCAkdGltZW91dCwgJHEsICRpbnRlcnBvbGF0ZSkge1xuICB0aGlzLiR2aWV3VmFsdWUgPSBOdW1iZXIuTmFOO1xuICB0aGlzLiRtb2RlbFZhbHVlID0gTnVtYmVyLk5hTjtcbiAgdGhpcy4kJHJhd01vZGVsVmFsdWUgPSB1bmRlZmluZWQ7IC8vIHN0b3JlcyB0aGUgcGFyc2VkIG1vZGVsVmFsdWUgLyBtb2RlbCBzZXQgZnJvbSBzY29wZSByZWdhcmRsZXNzIG9mIHZhbGlkaXR5LlxuICB0aGlzLiR2YWxpZGF0b3JzID0ge307XG4gIHRoaXMuJGFzeW5jVmFsaWRhdG9ycyA9IHt9O1xuICB0aGlzLiRwYXJzZXJzID0gW107XG4gIHRoaXMuJGZvcm1hdHRlcnMgPSBbXTtcbiAgdGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycyA9IFtdO1xuICB0aGlzLiR1bnRvdWNoZWQgPSB0cnVlO1xuICB0aGlzLiR0b3VjaGVkID0gZmFsc2U7XG4gIHRoaXMuJHByaXN0aW5lID0gdHJ1ZTtcbiAgdGhpcy4kZGlydHkgPSBmYWxzZTtcbiAgdGhpcy4kdmFsaWQgPSB0cnVlO1xuICB0aGlzLiRpbnZhbGlkID0gZmFsc2U7XG4gIHRoaXMuJGVycm9yID0ge307IC8vIGtlZXAgaW52YWxpZCBrZXlzIGhlcmVcbiAgdGhpcy4kJHN1Y2Nlc3MgPSB7fTsgLy8ga2VlcCB2YWxpZCBrZXlzIGhlcmVcbiAgdGhpcy4kcGVuZGluZyA9IHVuZGVmaW5lZDsgLy8ga2VlcCBwZW5kaW5nIGtleXMgaGVyZVxuICB0aGlzLiRuYW1lID0gJGludGVycG9sYXRlKCRhdHRyLm5hbWUgfHwgJycsIGZhbHNlKSgkc2NvcGUpO1xuICB0aGlzLiQkcGFyZW50Rm9ybSA9IG51bGxGb3JtQ3RybDtcbiAgdGhpcy4kb3B0aW9ucyA9IGRlZmF1bHRNb2RlbE9wdGlvbnM7XG4gIHRoaXMuJCR1cGRhdGVFdmVudHMgPSAnJztcbiAgLy8gQXR0YWNoIHRoZSBjb3JyZWN0IGNvbnRleHQgdG8gdGhlIGV2ZW50IGhhbmRsZXIgZnVuY3Rpb24gZm9yIHVwZGF0ZU9uXG4gIHRoaXMuJCR1cGRhdGVFdmVudEhhbmRsZXIgPSB0aGlzLiQkdXBkYXRlRXZlbnRIYW5kbGVyLmJpbmQodGhpcyk7XG5cbiAgdGhpcy4kJHBhcnNlZE5nTW9kZWwgPSAkcGFyc2UoJGF0dHIubmdNb2RlbCk7XG4gIHRoaXMuJCRwYXJzZWROZ01vZGVsQXNzaWduID0gdGhpcy4kJHBhcnNlZE5nTW9kZWwuYXNzaWduO1xuICB0aGlzLiQkbmdNb2RlbEdldCA9IHRoaXMuJCRwYXJzZWROZ01vZGVsO1xuICB0aGlzLiQkbmdNb2RlbFNldCA9IHRoaXMuJCRwYXJzZWROZ01vZGVsQXNzaWduO1xuICB0aGlzLiQkcGVuZGluZ0RlYm91bmNlID0gbnVsbDtcbiAgdGhpcy4kJHBhcnNlclZhbGlkID0gdW5kZWZpbmVkO1xuICB0aGlzLiQkcGFyc2VyTmFtZSA9ICdwYXJzZSc7XG5cbiAgdGhpcy4kJGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQgPSAwO1xuXG4gIHRoaXMuJCRzY29wZSA9ICRzY29wZTtcbiAgdGhpcy4kJGF0dHIgPSAkYXR0cjtcbiAgdGhpcy4kJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgdGhpcy4kJGFuaW1hdGUgPSAkYW5pbWF0ZTtcbiAgdGhpcy4kJHRpbWVvdXQgPSAkdGltZW91dDtcbiAgdGhpcy4kJHBhcnNlID0gJHBhcnNlO1xuICB0aGlzLiQkcSA9ICRxO1xuICB0aGlzLiQkZXhjZXB0aW9uSGFuZGxlciA9ICRleGNlcHRpb25IYW5kbGVyO1xuXG4gIHNldHVwVmFsaWRpdHkodGhpcyk7XG4gIHNldHVwTW9kZWxXYXRjaGVyKHRoaXMpO1xufVxuXG5OZ01vZGVsQ29udHJvbGxlci5wcm90b3R5cGUgPSB7XG4gICQkaW5pdEdldHRlclNldHRlcnM6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLiRvcHRpb25zLmdldE9wdGlvbignZ2V0dGVyU2V0dGVyJykpIHtcbiAgICAgIHZhciBpbnZva2VNb2RlbEdldHRlciA9IHRoaXMuJCRwYXJzZSh0aGlzLiQkYXR0ci5uZ01vZGVsICsgJygpJyksXG4gICAgICAgICAgaW52b2tlTW9kZWxTZXR0ZXIgPSB0aGlzLiQkcGFyc2UodGhpcy4kJGF0dHIubmdNb2RlbCArICcoJCQkcCknKTtcblxuICAgICAgdGhpcy4kJG5nTW9kZWxHZXQgPSBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgdmFyIG1vZGVsVmFsdWUgPSB0aGlzLiQkcGFyc2VkTmdNb2RlbCgkc2NvcGUpO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihtb2RlbFZhbHVlKSkge1xuICAgICAgICAgIG1vZGVsVmFsdWUgPSBpbnZva2VNb2RlbEdldHRlcigkc2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb2RlbFZhbHVlO1xuICAgICAgfTtcbiAgICAgIHRoaXMuJCRuZ01vZGVsU2V0ID0gZnVuY3Rpb24oJHNjb3BlLCBuZXdWYWx1ZSkge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLiQkcGFyc2VkTmdNb2RlbCgkc2NvcGUpKSkge1xuICAgICAgICAgIGludm9rZU1vZGVsU2V0dGVyKCRzY29wZSwgeyQkJHA6IG5ld1ZhbHVlfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kJHBhcnNlZE5nTW9kZWxBc3NpZ24oJHNjb3BlLCBuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICghdGhpcy4kJHBhcnNlZE5nTW9kZWwuYXNzaWduKSB7XG4gICAgICB0aHJvdyBuZ01vZGVsTWluRXJyKCdub25hc3NpZ24nLCAnRXhwcmVzc2lvbiBcXCd7MH1cXCcgaXMgbm9uLWFzc2lnbmFibGUuIEVsZW1lbnQ6IHsxfScsXG4gICAgICAgICAgdGhpcy4kJGF0dHIubmdNb2RlbCwgc3RhcnRpbmdUYWcodGhpcy4kJGVsZW1lbnQpKTtcbiAgICB9XG4gIH0sXG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRyZW5kZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENhbGxlZCB3aGVuIHRoZSB2aWV3IG5lZWRzIHRvIGJlIHVwZGF0ZWQuIEl0IGlzIGV4cGVjdGVkIHRoYXQgdGhlIHVzZXIgb2YgdGhlIG5nLW1vZGVsXG4gICAqIGRpcmVjdGl2ZSB3aWxsIGltcGxlbWVudCB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogVGhlIGAkcmVuZGVyKClgIG1ldGhvZCBpcyBpbnZva2VkIGluIHRoZSBmb2xsb3dpbmcgc2l0dWF0aW9uczpcbiAgICpcbiAgICogKiBgJHJvbGxiYWNrVmlld1ZhbHVlKClgIGlzIGNhbGxlZC4gIElmIHdlIGFyZSByb2xsaW5nIGJhY2sgdGhlIHZpZXcgdmFsdWUgdG8gdGhlIGxhc3RcbiAgICogICBjb21taXR0ZWQgdmFsdWUgdGhlbiBgJHJlbmRlcigpYCBpcyBjYWxsZWQgdG8gdXBkYXRlIHRoZSBpbnB1dCBjb250cm9sLlxuICAgKiAqIFRoZSB2YWx1ZSByZWZlcmVuY2VkIGJ5IGBuZy1tb2RlbGAgaXMgY2hhbmdlZCBwcm9ncmFtbWF0aWNhbGx5IGFuZCBib3RoIHRoZSBgJG1vZGVsVmFsdWVgIGFuZFxuICAgKiAgIHRoZSBgJHZpZXdWYWx1ZWAgYXJlIGRpZmZlcmVudCBmcm9tIGxhc3QgdGltZS5cbiAgICpcbiAgICogU2luY2UgYG5nLW1vZGVsYCBkb2VzIG5vdCBkbyBhIGRlZXAgd2F0Y2gsIGAkcmVuZGVyKClgIGlzIG9ubHkgaW52b2tlZCBpZiB0aGUgdmFsdWVzIG9mXG4gICAqIGAkbW9kZWxWYWx1ZWAgYW5kIGAkdmlld1ZhbHVlYCBhcmUgYWN0dWFsbHkgZGlmZmVyZW50IGZyb20gdGhlaXIgcHJldmlvdXMgdmFsdWVzLiBJZiBgJG1vZGVsVmFsdWVgXG4gICAqIG9yIGAkdmlld1ZhbHVlYCBhcmUgb2JqZWN0cyAocmF0aGVyIHRoYW4gYSBzdHJpbmcgb3IgbnVtYmVyKSB0aGVuIGAkcmVuZGVyKClgIHdpbGwgbm90IGJlXG4gICAqIGludm9rZWQgaWYgeW91IG9ubHkgY2hhbmdlIGEgcHJvcGVydHkgb24gdGhlIG9iamVjdHMuXG4gICAqL1xuICAkcmVuZGVyOiBub29wLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJGlzRW1wdHlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgaXMgY2FsbGVkIHdoZW4gd2UgbmVlZCB0byBkZXRlcm1pbmUgaWYgdGhlIHZhbHVlIG9mIGFuIGlucHV0IGlzIGVtcHR5LlxuICAgKlxuICAgKiBGb3IgaW5zdGFuY2UsIHRoZSByZXF1aXJlZCBkaXJlY3RpdmUgZG9lcyB0aGlzIHRvIHdvcmsgb3V0IGlmIHRoZSBpbnB1dCBoYXMgZGF0YSBvciBub3QuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IGAkaXNFbXB0eWAgZnVuY3Rpb24gY2hlY2tzIHdoZXRoZXIgdGhlIHZhbHVlIGlzIGB1bmRlZmluZWRgLCBgJydgLCBgbnVsbGAgb3IgYE5hTmAuXG4gICAqXG4gICAqIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBmb3IgaW5wdXQgZGlyZWN0aXZlcyB3aG9zZSBjb25jZXB0IG9mIGJlaW5nIGVtcHR5IGlzIGRpZmZlcmVudCBmcm9tIHRoZVxuICAgKiBkZWZhdWx0LiBUaGUgYGNoZWNrYm94SW5wdXRUeXBlYCBkaXJlY3RpdmUgZG9lcyB0aGlzIGJlY2F1c2UgaW4gaXRzIGNhc2UgYSB2YWx1ZSBvZiBgZmFsc2VgXG4gICAqIGltcGxpZXMgZW1wdHkuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBpbnB1dCB0byBjaGVjayBmb3IgZW1wdGluZXNzLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIFwiZW1wdHlcIi5cbiAgICovXG4gICRpc0VtcHR5OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICByZXR1cm4gaXNVbmRlZmluZWQodmFsdWUpIHx8IHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWU7XG4gIH0sXG5cbiAgJCR1cGRhdGVFbXB0eUNsYXNzZXM6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuJGlzRW1wdHkodmFsdWUpKSB7XG4gICAgICB0aGlzLiQkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCwgTk9UX0VNUFRZX0NMQVNTKTtcbiAgICAgIHRoaXMuJCRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LCBFTVBUWV9DTEFTUyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJCRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCBFTVBUWV9DTEFTUyk7XG4gICAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgTk9UX0VNUFRZX0NMQVNTKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0UHJpc3RpbmVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGNvbnRyb2wgdG8gaXRzIHByaXN0aW5lIHN0YXRlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgYG5nLWRpcnR5YCBjbGFzcyBhbmQgc2V0IHRoZSBjb250cm9sIHRvIGl0cyBwcmlzdGluZVxuICAgKiBzdGF0ZSAoYG5nLXByaXN0aW5lYCBjbGFzcykuIEEgbW9kZWwgaXMgY29uc2lkZXJlZCB0byBiZSBwcmlzdGluZSB3aGVuIHRoZSBjb250cm9sXG4gICAqIGhhcyBub3QgYmVlbiBjaGFuZ2VkIGZyb20gd2hlbiBmaXJzdCBjb21waWxlZC5cbiAgICovXG4gICRzZXRQcmlzdGluZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLiRwcmlzdGluZSA9IHRydWU7XG4gICAgdGhpcy4kJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIERJUlRZX0NMQVNTKTtcbiAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldERpcnR5XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBjb250cm9sIHRvIGl0cyBkaXJ0eSBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGBuZy1wcmlzdGluZWAgY2xhc3MgYW5kIHNldCB0aGUgY29udHJvbCB0byBpdHMgZGlydHlcbiAgICogc3RhdGUgKGBuZy1kaXJ0eWAgY2xhc3MpLiBBIG1vZGVsIGlzIGNvbnNpZGVyZWQgdG8gYmUgZGlydHkgd2hlbiB0aGUgY29udHJvbCBoYXMgYmVlbiBjaGFuZ2VkXG4gICAqIGZyb20gd2hlbiBmaXJzdCBjb21waWxlZC5cbiAgICovXG4gICRzZXREaXJ0eTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZGlydHkgPSB0cnVlO1xuICAgIHRoaXMuJHByaXN0aW5lID0gZmFsc2U7XG4gICAgdGhpcy4kJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTKTtcbiAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgRElSVFlfQ0xBU1MpO1xuICAgIHRoaXMuJCRwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFVudG91Y2hlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgdW50b3VjaGVkIHN0YXRlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgYG5nLXRvdWNoZWRgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzXG4gICAqIHVudG91Y2hlZCBzdGF0ZSAoYG5nLXVudG91Y2hlZGAgY2xhc3MpLiBVcG9uIGNvbXBpbGF0aW9uLCBhIG1vZGVsIGlzIHNldCBhcyB1bnRvdWNoZWRcbiAgICogYnkgZGVmYXVsdCwgaG93ZXZlciB0aGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIHJlc3RvcmUgdGhhdCBzdGF0ZSBpZiB0aGUgbW9kZWwgaGFzXG4gICAqIGFscmVhZHkgYmVlbiB0b3VjaGVkIGJ5IHRoZSB1c2VyLlxuICAgKi9cbiAgJHNldFVudG91Y2hlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kdG91Y2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuJHVudG91Y2hlZCA9IHRydWU7XG4gICAgdGhpcy4kJGFuaW1hdGUuc2V0Q2xhc3ModGhpcy4kJGVsZW1lbnQsIFVOVE9VQ0hFRF9DTEFTUywgVE9VQ0hFRF9DTEFTUyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0VG91Y2hlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgdG91Y2hlZCBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGBuZy11bnRvdWNoZWRgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzXG4gICAqIHRvdWNoZWQgc3RhdGUgKGBuZy10b3VjaGVkYCBjbGFzcykuIEEgbW9kZWwgaXMgY29uc2lkZXJlZCB0byBiZSB0b3VjaGVkIHdoZW4gdGhlIHVzZXIgaGFzXG4gICAqIGZpcnN0IGZvY3VzZWQgdGhlIGNvbnRyb2wgZWxlbWVudCBhbmQgdGhlbiBzaGlmdGVkIGZvY3VzIGF3YXkgZnJvbSB0aGUgY29udHJvbCAoYmx1ciBldmVudCkuXG4gICAqL1xuICAkc2V0VG91Y2hlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kdG91Y2hlZCA9IHRydWU7XG4gICAgdGhpcy4kdW50b3VjaGVkID0gZmFsc2U7XG4gICAgdGhpcy4kJGFuaW1hdGUuc2V0Q2xhc3ModGhpcy4kJGVsZW1lbnQsIFRPVUNIRURfQ0xBU1MsIFVOVE9VQ0hFRF9DTEFTUyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcm9sbGJhY2tWaWV3VmFsdWVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENhbmNlbCBhbiB1cGRhdGUgYW5kIHJlc2V0IHRoZSBpbnB1dCBlbGVtZW50J3MgdmFsdWUgdG8gcHJldmVudCBhbiB1cGRhdGUgdG8gdGhlIGAkbW9kZWxWYWx1ZWAsXG4gICAqIHdoaWNoIG1heSBiZSBjYXVzZWQgYnkgYSBwZW5kaW5nIGRlYm91bmNlZCBldmVudCBvciBiZWNhdXNlIHRoZSBpbnB1dCBpcyB3YWl0aW5nIGZvciBzb21lXG4gICAqIGZ1dHVyZSBldmVudC5cbiAgICpcbiAgICogSWYgeW91IGhhdmUgYW4gaW5wdXQgdGhhdCB1c2VzIGBuZy1tb2RlbC1vcHRpb25zYCB0byBzZXQgdXAgZGVib3VuY2VkIHVwZGF0ZXMgb3IgdXBkYXRlcyB0aGF0XG4gICAqIGRlcGVuZCBvbiBzcGVjaWFsIGV2ZW50cyBzdWNoIGFzIGBibHVyYCwgdGhlcmUgY2FuIGJlIGEgcGVyaW9kIHdoZW4gdGhlIGAkdmlld1ZhbHVlYCBpcyBvdXQgb2ZcbiAgICogc3luYyB3aXRoIHRoZSBuZ01vZGVsJ3MgYCRtb2RlbFZhbHVlYC5cbiAgICpcbiAgICogSW4gdGhpcyBjYXNlLCB5b3UgY2FuIHVzZSBgJHJvbGxiYWNrVmlld1ZhbHVlKClgIHRvIG1hbnVhbGx5IGNhbmNlbCB0aGUgZGVib3VuY2VkIC8gZnV0dXJlIHVwZGF0ZVxuICAgKiBhbmQgcmVzZXQgdGhlIGlucHV0IHRvIHRoZSBsYXN0IGNvbW1pdHRlZCB2aWV3IHZhbHVlLlxuICAgKlxuICAgKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRoYXQgeW91IHJ1biBpbnRvIGRpZmZpY3VsdGllcyBpZiB5b3UgdHJ5IHRvIHVwZGF0ZSB0aGUgbmdNb2RlbCdzIGAkbW9kZWxWYWx1ZWBcbiAgICogcHJvZ3JhbW1hdGljYWxseSBiZWZvcmUgdGhlc2UgZGVib3VuY2VkL2Z1dHVyZSBldmVudHMgaGF2ZSByZXNvbHZlZC9vY2N1cnJlZCwgYmVjYXVzZSBBbmd1bGFySlMnc1xuICAgKiBkaXJ0eSBjaGVja2luZyBtZWNoYW5pc20gaXMgbm90IGFibGUgdG8gdGVsbCB3aGV0aGVyIHRoZSBtb2RlbCBoYXMgYWN0dWFsbHkgY2hhbmdlZCBvciBub3QuXG4gICAqXG4gICAqIFRoZSBgJHJvbGxiYWNrVmlld1ZhbHVlKClgIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIGJlZm9yZSBwcm9ncmFtbWF0aWNhbGx5IGNoYW5naW5nIHRoZSBtb2RlbCBvZiBhblxuICAgKiBpbnB1dCB3aGljaCBtYXkgaGF2ZSBzdWNoIGV2ZW50cyBwZW5kaW5nLiBUaGlzIGlzIGltcG9ydGFudCBpbiBvcmRlciB0byBtYWtlIHN1cmUgdGhhdCB0aGVcbiAgICogaW5wdXQgZmllbGQgd2lsbCBiZSB1cGRhdGVkIHdpdGggdGhlIG5ldyBtb2RlbCB2YWx1ZSBhbmQgYW55IHBlbmRpbmcgb3BlcmF0aW9ucyBhcmUgY2FuY2VsbGVkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiA8ZXhhbXBsZSBuYW1lPVwibmctbW9kZWwtY2FuY2VsLXVwZGF0ZVwiIG1vZHVsZT1cImNhbmNlbC11cGRhdGUtZXhhbXBsZVwiPlxuICAgKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAgICogICAgIGFuZ3VsYXIubW9kdWxlKCdjYW5jZWwtdXBkYXRlLWV4YW1wbGUnLCBbXSlcbiAgICpcbiAgICogICAgIC5jb250cm9sbGVyKCdDYW5jZWxVcGRhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICogICAgICAgJHNjb3BlLm1vZGVsID0ge3ZhbHVlMTogJycsIHZhbHVlMjogJyd9O1xuICAgKlxuICAgKiAgICAgICAkc2NvcGUuc2V0RW1wdHkgPSBmdW5jdGlvbihlLCB2YWx1ZSwgcm9sbGJhY2spIHtcbiAgICogICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykge1xuICAgKiAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgKiAgICAgICAgICAgaWYgKHJvbGxiYWNrKSB7XG4gICAqICAgICAgICAgICAgICRzY29wZS5teUZvcm1bdmFsdWVdLiRyb2xsYmFja1ZpZXdWYWx1ZSgpO1xuICAgKiAgICAgICAgICAgfVxuICAgKiAgICAgICAgICAgJHNjb3BlLm1vZGVsW3ZhbHVlXSA9ICcnO1xuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfTtcbiAgICogICAgIH1dKTtcbiAgICogICA8L2ZpbGU+XG4gICAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkNhbmNlbFVwZGF0ZUNvbnRyb2xsZXJcIj5cbiAgICogICAgICAgPHA+Qm90aCBvZiB0aGVzZSBpbnB1dHMgYXJlIG9ubHkgdXBkYXRlZCBpZiB0aGV5IGFyZSBibHVycmVkLiBIaXR0aW5nIGVzY2FwZSBzaG91bGRcbiAgICogICAgICAgZW1wdHkgdGhlbS4gRm9sbG93IHRoZXNlIHN0ZXBzIGFuZCBvYnNlcnZlIHRoZSBkaWZmZXJlbmNlOjwvcD5cbiAgICogICAgICAgPG9sPlxuICAgKiAgICAgICAgIDxsaT5UeXBlIHNvbWV0aGluZyBpbiB0aGUgaW5wdXQuIFlvdSB3aWxsIHNlZSB0aGF0IHRoZSBtb2RlbCBpcyBub3QgeWV0IHVwZGF0ZWQ8L2xpPlxuICAgKiAgICAgICAgIDxsaT5QcmVzcyB0aGUgRXNjYXBlIGtleS5cbiAgICogICAgICAgICAgIDxvbD5cbiAgICogICAgICAgICAgICAgPGxpPiBJbiB0aGUgZmlyc3QgZXhhbXBsZSwgbm90aGluZyBoYXBwZW5zLCBiZWNhdXNlIHRoZSBtb2RlbCBpcyBhbHJlYWR5ICcnLCBhbmQgbm9cbiAgICogICAgICAgICAgICAgdXBkYXRlIGlzIGRldGVjdGVkLiBJZiB5b3UgYmx1ciB0aGUgaW5wdXQsIHRoZSBtb2RlbCB3aWxsIGJlIHNldCB0byB0aGUgY3VycmVudCB2aWV3LlxuICAgKiAgICAgICAgICAgICA8L2xpPlxuICAgKiAgICAgICAgICAgICA8bGk+IEluIHRoZSBzZWNvbmQgZXhhbXBsZSwgdGhlIHBlbmRpbmcgdXBkYXRlIGlzIGNhbmNlbGxlZCwgYW5kIHRoZSBpbnB1dCBpcyBzZXQgYmFja1xuICAgKiAgICAgICAgICAgICB0byB0aGUgbGFzdCBjb21taXR0ZWQgdmlldyB2YWx1ZSAoJycpLiBCbHVycmluZyB0aGUgaW5wdXQgZG9lcyBub3RoaW5nLlxuICAgKiAgICAgICAgICAgICA8L2xpPlxuICAgKiAgICAgICAgICAgPC9vbD5cbiAgICogICAgICAgICA8L2xpPlxuICAgKiAgICAgICA8L29sPlxuICAgKlxuICAgKiAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdibHVyJyB9XCI+XG4gICAqICAgICAgICAgPGRpdj5cbiAgICogICAgICAgICAgIDxwIGlkPVwiaW5wdXREZXNjcmlwdGlvbjFcIj5XaXRob3V0ICRyb2xsYmFja1ZpZXdWYWx1ZSgpOjwvcD5cbiAgICogICAgICAgICAgIDxpbnB1dCBuYW1lPVwidmFsdWUxXCIgYXJpYS1kZXNjcmliZWRieT1cImlucHV0RGVzY3JpcHRpb24xXCIgbmctbW9kZWw9XCJtb2RlbC52YWx1ZTFcIlxuICAgKiAgICAgICAgICAgICAgICAgIG5nLWtleWRvd249XCJzZXRFbXB0eSgkZXZlbnQsICd2YWx1ZTEnKVwiPlxuICAgKiAgICAgICAgICAgdmFsdWUxOiBcInt7IG1vZGVsLnZhbHVlMSB9fVwiXG4gICAqICAgICAgICAgPC9kaXY+XG4gICAqXG4gICAqICAgICAgICAgPGRpdj5cbiAgICogICAgICAgICAgIDxwIGlkPVwiaW5wdXREZXNjcmlwdGlvbjJcIj5XaXRoICRyb2xsYmFja1ZpZXdWYWx1ZSgpOjwvcD5cbiAgICogICAgICAgICAgIDxpbnB1dCBuYW1lPVwidmFsdWUyXCIgYXJpYS1kZXNjcmliZWRieT1cImlucHV0RGVzY3JpcHRpb24yXCIgbmctbW9kZWw9XCJtb2RlbC52YWx1ZTJcIlxuICAgKiAgICAgICAgICAgICAgICAgIG5nLWtleWRvd249XCJzZXRFbXB0eSgkZXZlbnQsICd2YWx1ZTInLCB0cnVlKVwiPlxuICAgKiAgICAgICAgICAgdmFsdWUyOiBcInt7IG1vZGVsLnZhbHVlMiB9fVwiXG4gICAqICAgICAgICAgPC9kaXY+XG4gICAqICAgICAgIDwvZm9ybT5cbiAgICogICAgIDwvZGl2PlxuICAgKiAgIDwvZmlsZT5cbiAgICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgICAgZGl2IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRpdjpudGgtY2hpbGQoMSkge1xuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogMzBweDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgPC9maWxlPlxuICAgKiA8L2V4YW1wbGU+XG4gICAqL1xuICAkcm9sbGJhY2tWaWV3VmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJCR0aW1lb3V0LmNhbmNlbCh0aGlzLiQkcGVuZGluZ0RlYm91bmNlKTtcbiAgICB0aGlzLiR2aWV3VmFsdWUgPSB0aGlzLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTtcbiAgICB0aGlzLiRyZW5kZXIoKTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUnVucyBlYWNoIG9mIHRoZSByZWdpc3RlcmVkIHZhbGlkYXRvcnMgKGZpcnN0IHN5bmNocm9ub3VzIHZhbGlkYXRvcnMgYW5kIHRoZW5cbiAgICogYXN5bmNocm9ub3VzIHZhbGlkYXRvcnMpLlxuICAgKiBJZiB0aGUgdmFsaWRpdHkgY2hhbmdlcyB0byBpbnZhbGlkLCB0aGUgbW9kZWwgd2lsbCBiZSBzZXQgdG8gYHVuZGVmaW5lZGAsXG4gICAqIHVubGVzcyB7QGxpbmsgbmdNb2RlbE9wdGlvbnMgYG5nTW9kZWxPcHRpb25zLmFsbG93SW52YWxpZGB9IGlzIGB0cnVlYC5cbiAgICogSWYgdGhlIHZhbGlkaXR5IGNoYW5nZXMgdG8gdmFsaWQsIGl0IHdpbGwgc2V0IHRoZSBtb2RlbCB0byB0aGUgbGFzdCBhdmFpbGFibGUgdmFsaWRcbiAgICogYCRtb2RlbFZhbHVlYCwgaS5lLiBlaXRoZXIgdGhlIGxhc3QgcGFyc2VkIHZhbHVlIG9yIHRoZSBsYXN0IHZhbHVlIHNldCBmcm9tIHRoZSBzY29wZS5cbiAgICovXG4gICR2YWxpZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gaWdub3JlICR2YWxpZGF0ZSBiZWZvcmUgbW9kZWwgaXMgaW5pdGlhbGl6ZWRcbiAgICBpZiAoaXNOdW1iZXJOYU4odGhpcy4kbW9kZWxWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdmlld1ZhbHVlID0gdGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7XG4gICAgLy8gTm90ZTogd2UgdXNlIHRoZSAkJHJhd01vZGVsVmFsdWUgYXMgJG1vZGVsVmFsdWUgbWlnaHQgaGF2ZSBiZWVuXG4gICAgLy8gc2V0IHRvIHVuZGVmaW5lZCBkdXJpbmcgYSB2aWV3IC0+IG1vZGVsIHVwZGF0ZSB0aGF0IGZvdW5kIHZhbGlkYXRpb25cbiAgICAvLyBlcnJvcnMuIFdlIGNhbid0IHBhcnNlIHRoZSB2aWV3IGhlcmUsIHNpbmNlIHRoYXQgY291bGQgY2hhbmdlXG4gICAgLy8gdGhlIG1vZGVsIGFsdGhvdWdoIG5laXRoZXIgdmlld1ZhbHVlIG5vciB0aGUgbW9kZWwgb24gdGhlIHNjb3BlIGNoYW5nZWRcbiAgICB2YXIgbW9kZWxWYWx1ZSA9IHRoaXMuJCRyYXdNb2RlbFZhbHVlO1xuXG4gICAgdmFyIHByZXZWYWxpZCA9IHRoaXMuJHZhbGlkO1xuICAgIHZhciBwcmV2TW9kZWxWYWx1ZSA9IHRoaXMuJG1vZGVsVmFsdWU7XG5cbiAgICB2YXIgYWxsb3dJbnZhbGlkID0gdGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ2FsbG93SW52YWxpZCcpO1xuXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHRoaXMuJCRydW5WYWxpZGF0b3JzKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSwgZnVuY3Rpb24oYWxsVmFsaWQpIHtcbiAgICAgIC8vIElmIHRoZXJlIHdhcyBubyBjaGFuZ2UgaW4gdmFsaWRpdHksIGRvbid0IHVwZGF0ZSB0aGUgbW9kZWxcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgY2hhbmdpbmcgYW4gaW52YWxpZCBtb2RlbFZhbHVlIHRvIHVuZGVmaW5lZFxuICAgICAgaWYgKCFhbGxvd0ludmFsaWQgJiYgcHJldlZhbGlkICE9PSBhbGxWYWxpZCkge1xuICAgICAgICAvLyBOb3RlOiBEb24ndCBjaGVjayB0aGlzLiR2YWxpZCBoZXJlLCBhcyB3ZSBjb3VsZCBoYXZlXG4gICAgICAgIC8vIGV4dGVybmFsIHZhbGlkYXRvcnMgKGUuZy4gY2FsY3VsYXRlZCBvbiB0aGUgc2VydmVyKSxcbiAgICAgICAgLy8gdGhhdCBqdXN0IGNhbGwgJHNldFZhbGlkaXR5IGFuZCBuZWVkIHRoZSBtb2RlbCB2YWx1ZVxuICAgICAgICAvLyB0byBjYWxjdWxhdGUgdGhlaXIgdmFsaWRpdHkuXG4gICAgICAgIHRoYXQuJG1vZGVsVmFsdWUgPSBhbGxWYWxpZCA/IG1vZGVsVmFsdWUgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoYXQuJG1vZGVsVmFsdWUgIT09IHByZXZNb2RlbFZhbHVlKSB7XG4gICAgICAgICAgdGhhdC4kJHdyaXRlTW9kZWxUb1Njb3BlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICAkJHJ1blZhbGlkYXRvcnM6IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSwgZG9uZUNhbGxiYWNrKSB7XG4gICAgdGhpcy4kJGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQrKztcbiAgICB2YXIgbG9jYWxWYWxpZGF0aW9uUnVuSWQgPSB0aGlzLiQkY3VycmVudFZhbGlkYXRpb25SdW5JZDtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAvLyBjaGVjayBwYXJzZXIgZXJyb3JcbiAgICBpZiAoIXByb2Nlc3NQYXJzZUVycm9ycygpKSB7XG4gICAgICB2YWxpZGF0aW9uRG9uZShmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghcHJvY2Vzc1N5bmNWYWxpZGF0b3JzKCkpIHtcbiAgICAgIHZhbGlkYXRpb25Eb25lKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcHJvY2Vzc0FzeW5jVmFsaWRhdG9ycygpO1xuXG4gICAgZnVuY3Rpb24gcHJvY2Vzc1BhcnNlRXJyb3JzKCkge1xuICAgICAgdmFyIGVycm9yS2V5ID0gdGhhdC4kJHBhcnNlck5hbWU7XG5cbiAgICAgIGlmIChpc1VuZGVmaW5lZCh0aGF0LiQkcGFyc2VyVmFsaWQpKSB7XG4gICAgICAgIHNldFZhbGlkaXR5KGVycm9yS2V5LCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhhdC4kJHBhcnNlclZhbGlkKSB7XG4gICAgICAgICAgZm9yRWFjaCh0aGF0LiR2YWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XG4gICAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmb3JFYWNoKHRoYXQuJGFzeW5jVmFsaWRhdG9ycywgZnVuY3Rpb24odiwgbmFtZSkge1xuICAgICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgbnVsbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIHBhcnNlIGVycm9yIGxhc3QsIHRvIHByZXZlbnQgdW5zZXR0aW5nIGl0LCBzaG91bGQgYSAkdmFsaWRhdG9ycyBrZXkgPT0gcGFyc2VyTmFtZVxuICAgICAgICBzZXRWYWxpZGl0eShlcnJvcktleSwgdGhhdC4kJHBhcnNlclZhbGlkKTtcbiAgICAgICAgcmV0dXJuIHRoYXQuJCRwYXJzZXJWYWxpZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByb2Nlc3NTeW5jVmFsaWRhdG9ycygpIHtcbiAgICAgIHZhciBzeW5jVmFsaWRhdG9yc1ZhbGlkID0gdHJ1ZTtcbiAgICAgIGZvckVhY2godGhhdC4kdmFsaWRhdG9ycywgZnVuY3Rpb24odmFsaWRhdG9yLCBuYW1lKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBCb29sZWFuKHZhbGlkYXRvcihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpKTtcbiAgICAgICAgc3luY1ZhbGlkYXRvcnNWYWxpZCA9IHN5bmNWYWxpZGF0b3JzVmFsaWQgJiYgcmVzdWx0O1xuICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCByZXN1bHQpO1xuICAgICAgfSk7XG4gICAgICBpZiAoIXN5bmNWYWxpZGF0b3JzVmFsaWQpIHtcbiAgICAgICAgZm9yRWFjaCh0aGF0LiRhc3luY1ZhbGlkYXRvcnMsIGZ1bmN0aW9uKHYsIG5hbWUpIHtcbiAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByb2Nlc3NBc3luY1ZhbGlkYXRvcnMoKSB7XG4gICAgICB2YXIgdmFsaWRhdG9yUHJvbWlzZXMgPSBbXTtcbiAgICAgIHZhciBhbGxWYWxpZCA9IHRydWU7XG4gICAgICBmb3JFYWNoKHRoYXQuJGFzeW5jVmFsaWRhdG9ycywgZnVuY3Rpb24odmFsaWRhdG9yLCBuYW1lKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gdmFsaWRhdG9yKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSk7XG4gICAgICAgIGlmICghaXNQcm9taXNlTGlrZShwcm9taXNlKSkge1xuICAgICAgICAgIHRocm93IG5nTW9kZWxNaW5FcnIoJ25vcHJvbWlzZScsXG4gICAgICAgICAgICAnRXhwZWN0ZWQgYXN5bmNocm9ub3VzIHZhbGlkYXRvciB0byByZXR1cm4gYSBwcm9taXNlIGJ1dCBnb3QgXFwnezB9XFwnIGluc3RlYWQuJywgcHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgdmFsaWRhdG9yUHJvbWlzZXMucHVzaChwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgdHJ1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFsbFZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgZmFsc2UpO1xuICAgICAgICB9KSk7XG4gICAgICB9KTtcbiAgICAgIGlmICghdmFsaWRhdG9yUHJvbWlzZXMubGVuZ3RoKSB7XG4gICAgICAgIHZhbGlkYXRpb25Eb25lKHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhhdC4kJHEuYWxsKHZhbGlkYXRvclByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhbGlkYXRpb25Eb25lKGFsbFZhbGlkKTtcbiAgICAgICAgfSwgbm9vcCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VmFsaWRpdHkobmFtZSwgaXNWYWxpZCkge1xuICAgICAgaWYgKGxvY2FsVmFsaWRhdGlvblJ1bklkID09PSB0aGF0LiQkY3VycmVudFZhbGlkYXRpb25SdW5JZCkge1xuICAgICAgICB0aGF0LiRzZXRWYWxpZGl0eShuYW1lLCBpc1ZhbGlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2YWxpZGF0aW9uRG9uZShhbGxWYWxpZCkge1xuICAgICAgaWYgKGxvY2FsVmFsaWRhdGlvblJ1bklkID09PSB0aGF0LiQkY3VycmVudFZhbGlkYXRpb25SdW5JZCkge1xuXG4gICAgICAgIGRvbmVDYWxsYmFjayhhbGxWYWxpZCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJGNvbW1pdFZpZXdWYWx1ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ29tbWl0IGEgcGVuZGluZyB1cGRhdGUgdG8gdGhlIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxuICAgKiBldmVudCBkZWZpbmVkIGluIGBuZy1tb2RlbC1vcHRpb25zYC4gdGhpcyBtZXRob2QgaXMgcmFyZWx5IG5lZWRlZCBhcyBgTmdNb2RlbENvbnRyb2xsZXJgXG4gICAqIHVzdWFsbHkgaGFuZGxlcyBjYWxsaW5nIHRoaXMgaW4gcmVzcG9uc2UgdG8gaW5wdXQgZXZlbnRzLlxuICAgKi9cbiAgJGNvbW1pdFZpZXdWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZpZXdWYWx1ZSA9IHRoaXMuJHZpZXdWYWx1ZTtcblxuICAgIHRoaXMuJCR0aW1lb3V0LmNhbmNlbCh0aGlzLiQkcGVuZGluZ0RlYm91bmNlKTtcblxuICAgIC8vIElmIHRoZSB2aWV3IHZhbHVlIGhhcyBub3QgY2hhbmdlZCB0aGVuIHdlIHNob3VsZCBqdXN0IGV4aXQsIGV4Y2VwdCBpbiB0aGUgY2FzZSB3aGVyZSB0aGVyZSBpc1xuICAgIC8vIGEgbmF0aXZlIHZhbGlkYXRvciBvbiB0aGUgZWxlbWVudC4gSW4gdGhpcyBjYXNlIHRoZSB2YWxpZGF0aW9uIHN0YXRlIG1heSBoYXZlIGNoYW5nZWQgZXZlbiB0aG91Z2hcbiAgICAvLyB0aGUgdmlld1ZhbHVlIGhhcyBzdGF5ZWQgZW1wdHkuXG4gICAgaWYgKHRoaXMuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlID09PSB2aWV3VmFsdWUgJiYgKHZpZXdWYWx1ZSAhPT0gJycgfHwgIXRoaXMuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiQkdXBkYXRlRW1wdHlDbGFzc2VzKHZpZXdWYWx1ZSk7XG4gICAgdGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgPSB2aWV3VmFsdWU7XG5cbiAgICAvLyBjaGFuZ2UgdG8gZGlydHlcbiAgICBpZiAodGhpcy4kcHJpc3RpbmUpIHtcbiAgICAgIHRoaXMuJHNldERpcnR5KCk7XG4gICAgfVxuICAgIHRoaXMuJCRwYXJzZUFuZFZhbGlkYXRlKCk7XG4gIH0sXG5cbiAgJCRwYXJzZUFuZFZhbGlkYXRlOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmlld1ZhbHVlID0gdGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7XG4gICAgdmFyIG1vZGVsVmFsdWUgPSB2aWV3VmFsdWU7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgdGhpcy4kJHBhcnNlclZhbGlkID0gaXNVbmRlZmluZWQobW9kZWxWYWx1ZSkgPyB1bmRlZmluZWQgOiB0cnVlO1xuXG4gICAgLy8gUmVzZXQgYW55IHByZXZpb3VzIHBhcnNlIGVycm9yXG4gICAgdGhpcy4kc2V0VmFsaWRpdHkodGhpcy4kJHBhcnNlck5hbWUsIG51bGwpO1xuICAgIHRoaXMuJCRwYXJzZXJOYW1lID0gJ3BhcnNlJztcblxuICAgIGlmICh0aGlzLiQkcGFyc2VyVmFsaWQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kcGFyc2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtb2RlbFZhbHVlID0gdGhpcy4kcGFyc2Vyc1tpXShtb2RlbFZhbHVlKTtcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKG1vZGVsVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy4kJHBhcnNlclZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzTnVtYmVyTmFOKHRoaXMuJG1vZGVsVmFsdWUpKSB7XG4gICAgICAvLyB0aGlzLiRtb2RlbFZhbHVlIGhhcyBub3QgYmVlbiB0b3VjaGVkIHlldC4uLlxuICAgICAgdGhpcy4kbW9kZWxWYWx1ZSA9IHRoaXMuJCRuZ01vZGVsR2V0KHRoaXMuJCRzY29wZSk7XG4gICAgfVxuICAgIHZhciBwcmV2TW9kZWxWYWx1ZSA9IHRoaXMuJG1vZGVsVmFsdWU7XG4gICAgdmFyIGFsbG93SW52YWxpZCA9IHRoaXMuJG9wdGlvbnMuZ2V0T3B0aW9uKCdhbGxvd0ludmFsaWQnKTtcbiAgICB0aGlzLiQkcmF3TW9kZWxWYWx1ZSA9IG1vZGVsVmFsdWU7XG5cbiAgICBpZiAoYWxsb3dJbnZhbGlkKSB7XG4gICAgICB0aGlzLiRtb2RlbFZhbHVlID0gbW9kZWxWYWx1ZTtcbiAgICAgIHdyaXRlVG9Nb2RlbElmTmVlZGVkKCk7XG4gICAgfVxuXG4gICAgLy8gUGFzcyB0aGUgJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlIGhlcmUsIGJlY2F1c2UgdGhlIGNhY2hlZCB2aWV3VmFsdWUgbWlnaHQgYmUgb3V0IG9mIGRhdGUuXG4gICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIGUuZy4gJHNldFZpZXdWYWx1ZSBpcyBjYWxsZWQgZnJvbSBpbnNpZGUgYSBwYXJzZXJcbiAgICB0aGlzLiQkcnVuVmFsaWRhdG9ycyhtb2RlbFZhbHVlLCB0aGlzLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSwgZnVuY3Rpb24oYWxsVmFsaWQpIHtcbiAgICAgIGlmICghYWxsb3dJbnZhbGlkKSB7XG4gICAgICAgIC8vIE5vdGU6IERvbid0IGNoZWNrIHRoaXMuJHZhbGlkIGhlcmUsIGFzIHdlIGNvdWxkIGhhdmVcbiAgICAgICAgLy8gZXh0ZXJuYWwgdmFsaWRhdG9ycyAoZS5nLiBjYWxjdWxhdGVkIG9uIHRoZSBzZXJ2ZXIpLFxuICAgICAgICAvLyB0aGF0IGp1c3QgY2FsbCAkc2V0VmFsaWRpdHkgYW5kIG5lZWQgdGhlIG1vZGVsIHZhbHVlXG4gICAgICAgIC8vIHRvIGNhbGN1bGF0ZSB0aGVpciB2YWxpZGl0eS5cbiAgICAgICAgdGhhdC4kbW9kZWxWYWx1ZSA9IGFsbFZhbGlkID8gbW9kZWxWYWx1ZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgd3JpdGVUb01vZGVsSWZOZWVkZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHdyaXRlVG9Nb2RlbElmTmVlZGVkKCkge1xuICAgICAgaWYgKHRoYXQuJG1vZGVsVmFsdWUgIT09IHByZXZNb2RlbFZhbHVlKSB7XG4gICAgICAgIHRoYXQuJCR3cml0ZU1vZGVsVG9TY29wZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAkJHdyaXRlTW9kZWxUb1Njb3BlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiQkbmdNb2RlbFNldCh0aGlzLiQkc2NvcGUsIHRoaXMuJG1vZGVsVmFsdWUpO1xuICAgIGZvckVhY2godGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycywgZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnZhbGlkLXRoaXNcbiAgICAgICAgdGhpcy4kJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0Vmlld1ZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBVcGRhdGUgdGhlIHZpZXcgdmFsdWUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhIGNvbnRyb2wgd2FudHMgdG8gY2hhbmdlIHRoZSB2aWV3IHZhbHVlOyB0eXBpY2FsbHksXG4gICAqIHRoaXMgaXMgZG9uZSBmcm9tIHdpdGhpbiBhIERPTSBldmVudCBoYW5kbGVyLiBGb3IgZXhhbXBsZSwgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXR9XG4gICAqIGRpcmVjdGl2ZSBjYWxscyBpdCB3aGVuIHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgY2hhbmdlcyBhbmQge0BsaW5rIG5nLmRpcmVjdGl2ZTpzZWxlY3Qgc2VsZWN0fVxuICAgKiBjYWxscyBpdCB3aGVuIGFuIG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAgICpcbiAgICogV2hlbiBgJHNldFZpZXdWYWx1ZWAgaXMgY2FsbGVkLCB0aGUgbmV3IGB2YWx1ZWAgd2lsbCBiZSBzdGFnZWQgZm9yIGNvbW1pdHRpbmcgdGhyb3VnaCB0aGUgYCRwYXJzZXJzYFxuICAgKiBhbmQgYCR2YWxpZGF0b3JzYCBwaXBlbGluZXMuIElmIHRoZXJlIGFyZSBubyBzcGVjaWFsIHtAbGluayBuZ01vZGVsT3B0aW9uc30gc3BlY2lmaWVkIHRoZW4gdGhlIHN0YWdlZFxuICAgKiB2YWx1ZSBpcyBzZW50IGRpcmVjdGx5IGZvciBwcm9jZXNzaW5nIHRocm91Z2ggdGhlIGAkcGFyc2Vyc2AgcGlwZWxpbmUuIEFmdGVyIHRoaXMsIHRoZSBgJHZhbGlkYXRvcnNgIGFuZFxuICAgKiBgJGFzeW5jVmFsaWRhdG9yc2AgYXJlIGNhbGxlZCBhbmQgdGhlIHZhbHVlIGlzIGFwcGxpZWQgdG8gYCRtb2RlbFZhbHVlYC5cbiAgICogRmluYWxseSwgdGhlIHZhbHVlIGlzIHNldCB0byB0aGUgKipleHByZXNzaW9uKiogc3BlY2lmaWVkIGluIHRoZSBgbmctbW9kZWxgIGF0dHJpYnV0ZSBhbmRcbiAgICogYWxsIHRoZSByZWdpc3RlcmVkIGNoYW5nZSBsaXN0ZW5lcnMsIGluIHRoZSBgJHZpZXdDaGFuZ2VMaXN0ZW5lcnNgIGxpc3QgYXJlIGNhbGxlZC5cbiAgICpcbiAgICogSW4gY2FzZSB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBuZ01vZGVsT3B0aW9uc30gZGlyZWN0aXZlIGlzIHVzZWQgd2l0aCBgdXBkYXRlT25gXG4gICAqIGFuZCB0aGUgYGRlZmF1bHRgIHRyaWdnZXIgaXMgbm90IGxpc3RlZCwgYWxsIHRob3NlIGFjdGlvbnMgd2lsbCByZW1haW4gcGVuZGluZyB1bnRpbCBvbmUgb2YgdGhlXG4gICAqIGB1cGRhdGVPbmAgZXZlbnRzIGlzIHRyaWdnZXJlZCBvbiB0aGUgRE9NIGVsZW1lbnQuXG4gICAqIEFsbCB0aGVzZSBhY3Rpb25zIHdpbGwgYmUgZGVib3VuY2VkIGlmIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfVxuICAgKiBkaXJlY3RpdmUgaXMgdXNlZCB3aXRoIGEgY3VzdG9tIGRlYm91bmNlIGZvciB0aGlzIHBhcnRpY3VsYXIgZXZlbnQuXG4gICAqIE5vdGUgdGhhdCBhIGAkZGlnZXN0YCBpcyBvbmx5IHRyaWdnZXJlZCBvbmNlIHRoZSBgdXBkYXRlT25gIGV2ZW50cyBhcmUgZmlyZWQsIG9yIGlmIGBkZWJvdW5jZWBcbiAgICogaXMgc3BlY2lmaWVkLCBvbmNlIHRoZSB0aW1lciBydW5zIG91dC5cbiAgICpcbiAgICogV2hlbiB1c2VkIHdpdGggc3RhbmRhcmQgaW5wdXRzLCB0aGUgdmlldyB2YWx1ZSB3aWxsIGFsd2F5cyBiZSBhIHN0cmluZyAod2hpY2ggaXMgaW4gc29tZSBjYXNlc1xuICAgKiBwYXJzZWQgaW50byBhbm90aGVyIHR5cGUsIHN1Y2ggYXMgYSBgRGF0ZWAgb2JqZWN0IGZvciBgaW5wdXRbZGF0ZV1gLilcbiAgICogSG93ZXZlciwgY3VzdG9tIGNvbnRyb2xzIG1pZ2h0IGFsc28gcGFzcyBvYmplY3RzIHRvIHRoaXMgbWV0aG9kLiBJbiB0aGlzIGNhc2UsIHdlIHNob3VsZCBtYWtlXG4gICAqIGEgY29weSBvZiB0aGUgb2JqZWN0IGJlZm9yZSBwYXNzaW5nIGl0IHRvIGAkc2V0Vmlld1ZhbHVlYC4gVGhpcyBpcyBiZWNhdXNlIGBuZ01vZGVsYCBkb2VzIG5vdFxuICAgKiBwZXJmb3JtIGEgZGVlcCB3YXRjaCBvZiBvYmplY3RzLCBpdCBvbmx5IGxvb2tzIGZvciBhIGNoYW5nZSBvZiBpZGVudGl0eS4gSWYgeW91IG9ubHkgY2hhbmdlXG4gICAqIHRoZSBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0IHRoZW4gbmdNb2RlbCB3aWxsIG5vdCByZWFsaXplIHRoYXQgdGhlIG9iamVjdCBoYXMgY2hhbmdlZCBhbmRcbiAgICogd2lsbCBub3QgaW52b2tlIHRoZSBgJHBhcnNlcnNgIGFuZCBgJHZhbGlkYXRvcnNgIHBpcGVsaW5lcy4gRm9yIHRoaXMgcmVhc29uLCB5b3Ugc2hvdWxkXG4gICAqIG5vdCBjaGFuZ2UgcHJvcGVydGllcyBvZiB0aGUgY29weSBvbmNlIGl0IGhhcyBiZWVuIHBhc3NlZCB0byBgJHNldFZpZXdWYWx1ZWAuXG4gICAqIE90aGVyd2lzZSB5b3UgbWF5IGNhdXNlIHRoZSBtb2RlbCB2YWx1ZSBvbiB0aGUgc2NvcGUgdG8gY2hhbmdlIGluY29ycmVjdGx5LlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICAgKiBJbiBhbnkgY2FzZSwgdGhlIHZhbHVlIHBhc3NlZCB0byB0aGUgbWV0aG9kIHNob3VsZCBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCB2YWx1ZVxuICAgKiBvZiB0aGUgY29udHJvbC4gRm9yIGV4YW1wbGUsIGlmIHlvdSBhcmUgY2FsbGluZyBgJHNldFZpZXdWYWx1ZWAgZm9yIGFuIGlucHV0IGVsZW1lbnQsXG4gICAqIHlvdSBzaG91bGQgcGFzcyB0aGUgaW5wdXQgRE9NIHZhbHVlLiBPdGhlcndpc2UsIHRoZSBjb250cm9sIGFuZCB0aGUgc2NvcGUgbW9kZWwgYmVjb21lXG4gICAqIG91dCBvZiBzeW5jLiBJdCdzIGFsc28gaW1wb3J0YW50IHRvIG5vdGUgdGhhdCBgJHNldFZpZXdWYWx1ZWAgZG9lcyBub3QgY2FsbCBgJHJlbmRlcmAgb3IgY2hhbmdlXG4gICAqIHRoZSBjb250cm9sJ3MgRE9NIHZhbHVlIGluIGFueSB3YXkuIElmIHdlIHdhbnQgdG8gY2hhbmdlIHRoZSBjb250cm9sJ3MgRE9NIHZhbHVlXG4gICAqIHByb2dyYW1tYXRpY2FsbHksIHdlIHNob3VsZCB1cGRhdGUgdGhlIGBuZ01vZGVsYCBzY29wZSBleHByZXNzaW9uLiBJdHMgbmV3IHZhbHVlIHdpbGwgYmVcbiAgICogcGlja2VkIHVwIGJ5IHRoZSBtb2RlbCBjb250cm9sbGVyLCB3aGljaCB3aWxsIHJ1biBpdCB0aHJvdWdoIHRoZSBgJGZvcm1hdHRlcnNgLCBgJHJlbmRlcmAgaXRcbiAgICogdG8gdXBkYXRlIHRoZSBET00sIGFuZCBmaW5hbGx5IGNhbGwgYCR2YWxpZGF0ZWAgb24gaXQuXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIHZhbHVlIGZyb20gdGhlIHZpZXcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0cmlnZ2VyIEV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoZSB1cGRhdGUuXG4gICAqL1xuICAkc2V0Vmlld1ZhbHVlOiBmdW5jdGlvbih2YWx1ZSwgdHJpZ2dlcikge1xuICAgIHRoaXMuJHZpZXdWYWx1ZSA9IHZhbHVlO1xuICAgIGlmICh0aGlzLiRvcHRpb25zLmdldE9wdGlvbigndXBkYXRlT25EZWZhdWx0JykpIHtcbiAgICAgIHRoaXMuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdCh0cmlnZ2VyKTtcbiAgICB9XG4gIH0sXG5cbiAgJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdDogZnVuY3Rpb24odHJpZ2dlcikge1xuICAgIHZhciBkZWJvdW5jZURlbGF5ID0gdGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ2RlYm91bmNlJyk7XG5cbiAgICBpZiAoaXNOdW1iZXIoZGVib3VuY2VEZWxheVt0cmlnZ2VyXSkpIHtcbiAgICAgIGRlYm91bmNlRGVsYXkgPSBkZWJvdW5jZURlbGF5W3RyaWdnZXJdO1xuICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIoZGVib3VuY2VEZWxheVsnZGVmYXVsdCddKSAmJlxuICAgICAgdGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ3VwZGF0ZU9uJykuaW5kZXhPZih0cmlnZ2VyKSA9PT0gLTFcbiAgICApIHtcbiAgICAgIGRlYm91bmNlRGVsYXkgPSBkZWJvdW5jZURlbGF5WydkZWZhdWx0J107XG4gICAgfSBlbHNlIGlmIChpc051bWJlcihkZWJvdW5jZURlbGF5WycqJ10pKSB7XG4gICAgICBkZWJvdW5jZURlbGF5ID0gZGVib3VuY2VEZWxheVsnKiddO1xuICAgIH1cblxuICAgIHRoaXMuJCR0aW1lb3V0LmNhbmNlbCh0aGlzLiQkcGVuZGluZ0RlYm91bmNlKTtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgaWYgKGRlYm91bmNlRGVsYXkgPiAwKSB7IC8vIHRoaXMgZmFpbHMgaWYgZGVib3VuY2VEZWxheSBpcyBhbiBvYmplY3RcbiAgICAgIHRoaXMuJCRwZW5kaW5nRGVib3VuY2UgPSB0aGlzLiQkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICB9LCBkZWJvdW5jZURlbGF5KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuJCRzY29wZS4kcm9vdC4kJHBoYXNlKSB7XG4gICAgICB0aGlzLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICpcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkb3ZlcnJpZGVNb2RlbE9wdGlvbnNcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIE92ZXJyaWRlIHRoZSBjdXJyZW50IG1vZGVsIG9wdGlvbnMgc2V0dGluZ3MgcHJvZ3JhbW1hdGljYWxseS5cbiAgICpcbiAgICogVGhlIHByZXZpb3VzIGBNb2RlbE9wdGlvbnNgIHZhbHVlIHdpbGwgbm90IGJlIG1vZGlmaWVkLiBJbnN0ZWFkLCBhXG4gICAqIG5ldyBgTW9kZWxPcHRpb25zYCBvYmplY3Qgd2lsbCBpbmhlcml0IGZyb20gdGhlIHByZXZpb3VzIG9uZSBvdmVycmlkaW5nXG4gICAqIG9yIGluaGVyaXRpbmcgc2V0dGluZ3MgdGhhdCBhcmUgZGVmaW5lZCBpbiB0aGUgZ2l2ZW4gcGFyYW1ldGVyLlxuICAgKlxuICAgKiBTZWUge0BsaW5rIG5nTW9kZWxPcHRpb25zfSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBvcHRpb25zIGNhbiBiZSBzcGVjaWZpZWRcbiAgICogYW5kIGhvdyBtb2RlbCBvcHRpb24gaW5oZXJpdGFuY2Ugd29ya3MuXG4gICAqXG4gICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAqICoqTm90ZToqKiB0aGlzIGZ1bmN0aW9uIG9ubHkgYWZmZWN0cyB0aGUgb3B0aW9ucyBzZXQgb24gdGhlIGBuZ01vZGVsQ29udHJvbGxlcmAsXG4gICAqIGFuZCBub3QgdGhlIG9wdGlvbnMgb24gdGhlIHtAbGluayBuZ01vZGVsT3B0aW9uc30gZGlyZWN0aXZlIGZyb20gd2hpY2ggdGhleSBtaWdodCBoYXZlIGJlZW5cbiAgICogb2J0YWluZWQgaW5pdGlhbGx5LlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiPlxuICAgKiAqKk5vdGU6KiogaXQgaXMgbm90IHBvc3NpYmxlIHRvIG92ZXJyaWRlIHRoZSBgZ2V0dGVyU2V0dGVyYCBvcHRpb24uXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBhIGhhc2ggb2Ygc2V0dGluZ3MgdG8gb3ZlcnJpZGUgdGhlIHByZXZpb3VzIG9wdGlvbnNcbiAgICpcbiAgICovXG4gICRvdmVycmlkZU1vZGVsT3B0aW9uczogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHRoaXMuJG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zLmNyZWF0ZUNoaWxkKG9wdGlvbnMpO1xuICAgIHRoaXMuJCRzZXRVcGRhdGVPbkV2ZW50cygpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqXG4gICAqIEBuYW1lICBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRwcm9jZXNzTW9kZWxWYWx1ZVxuXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBSdW5zIHRoZSBtb2RlbCAtPiB2aWV3IHBpcGVsaW5lIG9uIHRoZSBjdXJyZW50XG4gICAqIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRtb2RlbFZhbHVlICRtb2RlbFZhbHVlfS5cbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgYnkgdGhpcyBtZXRob2Q6XG4gICAqXG4gICAqIC0gdGhlIGAkbW9kZWxWYWx1ZWAgaXMgcnVuIHRocm91Z2ggdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRmb3JtYXR0ZXJzICRmb3JtYXR0ZXJzfVxuICAgKiBhbmQgdGhlIHJlc3VsdCBpcyBzZXQgdG8gdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgJHZpZXdWYWx1ZX1cbiAgICogLSB0aGUgYG5nLWVtcHR5YCBvciBgbmctbm90LWVtcHR5YCBjbGFzcyBpcyBzZXQgb24gdGhlIGVsZW1lbnRcbiAgICogLSBpZiB0aGUgYCR2aWV3VmFsdWVgIGhhcyBjaGFuZ2VkOlxuICAgKiAgIC0ge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHJlbmRlciAkcmVuZGVyfSBpcyBjYWxsZWQgb24gdGhlIGNvbnRyb2xcbiAgICogICAtIHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyAkdmFsaWRhdG9yc30gYXJlIHJ1biBhbmRcbiAgICogICB0aGUgdmFsaWRhdGlvbiBzdGF0dXMgaXMgc2V0LlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgbmdNb2RlbCBpbnRlcm5hbGx5IHdoZW4gdGhlIGJvdW5kIHNjb3BlIHZhbHVlIGNoYW5nZXMuXG4gICAqIEFwcGxpY2F0aW9uIGRldmVsb3BlcnMgdXN1YWxseSBkbyBub3QgaGF2ZSB0byBjYWxsIHRoaXMgZnVuY3Rpb24gdGhlbXNlbHZlcy5cbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB3aGVuIHRoZSBgJHZpZXdWYWx1ZWAgb3IgdGhlIHJlbmRlcmVkIERPTSB2YWx1ZSBhcmUgbm90IGNvcnJlY3RseVxuICAgKiBmb3JtYXR0ZWQgYW5kIHRoZSBgJG1vZGVsVmFsdWVgIG11c3QgYmUgcnVuIHRocm91Z2ggdGhlIGAkZm9ybWF0dGVyc2AgYWdhaW4uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIENvbnNpZGVyIGEgdGV4dCBpbnB1dCB3aXRoIGFuIGF1dG9jb21wbGV0ZSBsaXN0IChmb3IgZnJ1aXQpLCB3aGVyZSB0aGUgaXRlbXMgYXJlXG4gICAqIG9iamVjdHMgd2l0aCBhIG5hbWUgYW5kIGFuIGlkLlxuICAgKiBBIHVzZXIgZW50ZXJzIGBhcGAgYW5kIHRoZW4gc2VsZWN0cyBgQXByaWNvdGAgZnJvbSB0aGUgbGlzdC5cbiAgICogQmFzZWQgb24gdGhpcywgdGhlIGF1dG9jb21wbGV0ZSB3aWRnZXQgd2lsbCBjYWxsIGAkc2V0Vmlld1ZhbHVlKHtuYW1lOiAnQXByaWNvdCcsIGlkOiA0NDN9KWAsXG4gICAqIGJ1dCB0aGUgcmVuZGVyZWQgdmFsdWUgd2lsbCBzdGlsbCBiZSBgYXBgLlxuICAgKiBUaGUgd2lkZ2V0IGNhbiB0aGVuIGNhbGwgYGN0cmwuJHByb2Nlc3NNb2RlbFZhbHVlKClgIHRvIHJ1biB0aGUgbW9kZWwgLT4gdmlld1xuICAgKiBwaXBlbGluZSBhZ2Fpbiwgd2hpY2ggZm9ybWF0cyB0aGUgb2JqZWN0IHRvIHRoZSBzdHJpbmcgYEFwcmljb3RgLFxuICAgKiB0aGVuIHVwZGF0ZXMgdGhlIGAkdmlld1ZhbHVlYCwgYW5kIGZpbmFsbHkgcmVuZGVycyBpdCBpbiB0aGUgRE9NLlxuICAgKlxuICAgKiA8ZXhhbXBsZSBtb2R1bGU9XCJpbnB1dEV4YW1wbGVcIiBuYW1lPVwibmctbW9kZWwtcHJvY2Vzc1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiaW5wdXRDb250cm9sbGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBmbGV4O1wiPlxuICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLXJpZ2h0OiAzMHB4O1wiPlxuICAgICAgICAgIFNlYXJjaCBGcnVpdDpcbiAgICAgICAgICA8YmFzaWMtYXV0b2NvbXBsZXRlIGl0ZW1zPVwiaXRlbXNcIiBvbi1zZWxlY3Q9XCJzZWxlY3RlZEZydWl0ID0gaXRlbVwiPjwvYmFzaWMtYXV0b2NvbXBsZXRlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICBNb2RlbDo8YnI+XG4gICAgICAgICAgPHByZT57e3NlbGVjdGVkRnJ1aXQgfCBqc29ufX08L3ByZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnaW5wdXRFeGFtcGxlJywgW10pXG4gICAgICAgIC5jb250cm9sbGVyKCdpbnB1dENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUuaXRlbXMgPSBbXG4gICAgICAgICAgICB7bmFtZTogJ0Fwcmljb3QnLCBpZDogNDQzfSxcbiAgICAgICAgICAgIHtuYW1lOiAnQ2xlbWVudGluZScsIGlkOiA5NzJ9LFxuICAgICAgICAgICAge25hbWU6ICdEdXJpYW4nLCBpZDogMTY5fSxcbiAgICAgICAgICAgIHtuYW1lOiAnSmFja2ZydWl0JywgaWQ6IDk4Mn0sXG4gICAgICAgICAgICB7bmFtZTogJ1N0cmF3YmVycnknLCBpZDogODYzfVxuICAgICAgICAgIF07XG4gICAgICAgIH0pXG4gICAgICAgIC5jb21wb25lbnQoJ2Jhc2ljQXV0b2NvbXBsZXRlJywge1xuICAgICAgICAgIGJpbmRpbmdzOiB7XG4gICAgICAgICAgICBpdGVtczogJzwnLFxuICAgICAgICAgICAgb25TZWxlY3Q6ICcmJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRvY29tcGxldGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJGVsZW1lbnQsICRzY29wZSkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIG5nTW9kZWw7XG5cbiAgICAgICAgICAgIHRoYXQuJHBvc3RMaW5rID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIG5nTW9kZWwgPSAkZWxlbWVudC5maW5kKCdpbnB1dCcpLmNvbnRyb2xsZXIoJ25nTW9kZWwnKTtcblxuICAgICAgICAgICAgICBuZ01vZGVsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlICYmIHZhbHVlLm5hbWUpIHx8IHZhbHVlO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBuZ01vZGVsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoYXQuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgIGlmICh0aGF0Lml0ZW1zW2ldLm5hbWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoID0gdGhhdC5pdGVtc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoYXQuc2VsZWN0SXRlbSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKGl0ZW0pO1xuICAgICAgICAgICAgICBuZ01vZGVsLiRwcm9jZXNzTW9kZWxWYWx1ZSgpO1xuICAgICAgICAgICAgICB0aGF0Lm9uU2VsZWN0KHtpdGVtOiBpdGVtfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cImF1dG9jb21wbGV0ZS5odG1sXCI+XG4gICAgICAgPGRpdj5cbiAgICAgICAgIDxpbnB1dCB0eXBlPVwic2VhcmNoXCIgbmctbW9kZWw9XCIkY3RybC5zZWFyY2hUZXJtXCIgLz5cbiAgICAgICAgIDx1bD5cbiAgICAgICAgICAgPGxpIG5nLXJlcGVhdD1cIml0ZW0gaW4gJGN0cmwuaXRlbXMgfCBmaWx0ZXI6JGN0cmwuc2VhcmNoVGVybVwiPlxuICAgICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkY3RybC5zZWxlY3RJdGVtKGl0ZW0pXCI+e3sgaXRlbS5uYW1lIH19PC9idXR0b24+XG4gICAgICAgICAgIDwvbGk+XG4gICAgICAgICA8L3VsPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAqIDwvZXhhbXBsZT5cbiAgICpcbiAgICovXG4gICRwcm9jZXNzTW9kZWxWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZpZXdWYWx1ZSA9IHRoaXMuJCRmb3JtYXQoKTtcblxuICAgIGlmICh0aGlzLiR2aWV3VmFsdWUgIT09IHZpZXdWYWx1ZSkge1xuICAgICAgdGhpcy4kJHVwZGF0ZUVtcHR5Q2xhc3Nlcyh2aWV3VmFsdWUpO1xuICAgICAgdGhpcy4kdmlld1ZhbHVlID0gdGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgPSB2aWV3VmFsdWU7XG4gICAgICB0aGlzLiRyZW5kZXIoKTtcbiAgICAgIC8vIEl0IGlzIHBvc3NpYmxlIHRoYXQgbW9kZWwgYW5kIHZpZXcgdmFsdWUgaGF2ZSBiZWVuIHVwZGF0ZWQgZHVyaW5nIHJlbmRlclxuICAgICAgdGhpcy4kJHJ1blZhbGlkYXRvcnModGhpcy4kbW9kZWxWYWx1ZSwgdGhpcy4kdmlld1ZhbHVlLCBub29wKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBpbnRlcm5hbGx5IHRvIHJ1biB0aGUgJGZvcm1hdHRlcnMgb24gdGhlICRtb2RlbFZhbHVlXG4gICAqL1xuICAkJGZvcm1hdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZvcm1hdHRlcnMgPSB0aGlzLiRmb3JtYXR0ZXJzLFxuICAgICAgICBpZHggPSBmb3JtYXR0ZXJzLmxlbmd0aDtcblxuICAgIHZhciB2aWV3VmFsdWUgPSB0aGlzLiRtb2RlbFZhbHVlO1xuICAgIHdoaWxlIChpZHgtLSkge1xuICAgICAgdmlld1ZhbHVlID0gZm9ybWF0dGVyc1tpZHhdKHZpZXdWYWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZpZXdWYWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGludGVybmFsbHkgd2hlbiB0aGUgYm91bmQgc2NvcGUgdmFsdWUgY2hhbmdlcy5cbiAgICovXG4gICQkc2V0TW9kZWxWYWx1ZTogZnVuY3Rpb24obW9kZWxWYWx1ZSkge1xuICAgIHRoaXMuJG1vZGVsVmFsdWUgPSB0aGlzLiQkcmF3TW9kZWxWYWx1ZSA9IG1vZGVsVmFsdWU7XG4gICAgdGhpcy4kJHBhcnNlclZhbGlkID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuJHByb2Nlc3NNb2RlbFZhbHVlKCk7XG4gIH0sXG5cbiAgJCRzZXRVcGRhdGVPbkV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuJCR1cGRhdGVFdmVudHMpIHtcbiAgICAgIHRoaXMuJCRlbGVtZW50Lm9mZih0aGlzLiQkdXBkYXRlRXZlbnRzLCB0aGlzLiQkdXBkYXRlRXZlbnRIYW5kbGVyKTtcbiAgICB9XG5cbiAgICB0aGlzLiQkdXBkYXRlRXZlbnRzID0gdGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ3VwZGF0ZU9uJyk7XG4gICAgaWYgKHRoaXMuJCR1cGRhdGVFdmVudHMpIHtcbiAgICAgIHRoaXMuJCRlbGVtZW50Lm9uKHRoaXMuJCR1cGRhdGVFdmVudHMsIHRoaXMuJCR1cGRhdGVFdmVudEhhbmRsZXIpO1xuICAgIH1cbiAgfSxcblxuICAkJHVwZGF0ZUV2ZW50SGFuZGxlcjogZnVuY3Rpb24oZXYpIHtcbiAgICB0aGlzLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQoZXYgJiYgZXYudHlwZSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHNldHVwTW9kZWxXYXRjaGVyKGN0cmwpIHtcbiAgLy8gbW9kZWwgLT4gdmFsdWVcbiAgLy8gTm90ZTogd2UgY2Fubm90IHVzZSBhIG5vcm1hbCBzY29wZS4kd2F0Y2ggYXMgd2Ugd2FudCB0byBkZXRlY3QgdGhlIGZvbGxvd2luZzpcbiAgLy8gMS4gc2NvcGUgdmFsdWUgaXMgJ2EnXG4gIC8vIDIuIHVzZXIgZW50ZXJzICdiJ1xuICAvLyAzLiBuZy1jaGFuZ2Uga2lja3MgaW4gYW5kIHJldmVydHMgc2NvcGUgdmFsdWUgdG8gJ2EnXG4gIC8vICAgIC0+IHNjb3BlIHZhbHVlIGRpZCBub3QgY2hhbmdlIHNpbmNlIHRoZSBsYXN0IGRpZ2VzdCBhc1xuICAvLyAgICAgICBuZy1jaGFuZ2UgZXhlY3V0ZXMgaW4gYXBwbHkgcGhhc2VcbiAgLy8gNC4gdmlldyBzaG91bGQgYmUgY2hhbmdlZCBiYWNrIHRvICdhJ1xuICBjdHJsLiQkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIG5nTW9kZWxXYXRjaChzY29wZSkge1xuICAgIHZhciBtb2RlbFZhbHVlID0gY3RybC4kJG5nTW9kZWxHZXQoc2NvcGUpO1xuXG4gICAgLy8gaWYgc2NvcGUgbW9kZWwgdmFsdWUgYW5kIG5nTW9kZWwgdmFsdWUgYXJlIG91dCBvZiBzeW5jXG4gICAgLy8gVGhpcyBjYW5ub3QgYmUgbW92ZWQgdG8gdGhlIGFjdGlvbiBmdW5jdGlvbiwgYmVjYXVzZSBpdCB3b3VsZCBub3QgY2F0Y2ggdGhlXG4gICAgLy8gY2FzZSB3aGVyZSB0aGUgbW9kZWwgaXMgY2hhbmdlZCBpbiB0aGUgbmdDaGFuZ2UgZnVuY3Rpb24gb3IgdGhlIG1vZGVsIHNldHRlclxuICAgIGlmIChtb2RlbFZhbHVlICE9PSBjdHJsLiRtb2RlbFZhbHVlICYmXG4gICAgICAvLyBjaGVja3MgZm9yIE5hTiBpcyBuZWVkZWQgdG8gYWxsb3cgc2V0dGluZyB0aGUgbW9kZWwgdG8gTmFOIHdoZW4gdGhlcmUncyBhbiBhc3luY1ZhbGlkYXRvclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgKGN0cmwuJG1vZGVsVmFsdWUgPT09IGN0cmwuJG1vZGVsVmFsdWUgfHwgbW9kZWxWYWx1ZSA9PT0gbW9kZWxWYWx1ZSlcbiAgICApIHtcbiAgICAgIGN0cmwuJCRzZXRNb2RlbFZhbHVlKG1vZGVsVmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBtb2RlbFZhbHVlO1xuICB9KTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRWYWxpZGl0eVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ2hhbmdlIHRoZSB2YWxpZGl0eSBzdGF0ZSwgYW5kIG5vdGlmeSB0aGUgZm9ybS5cbiAqXG4gKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHdpdGhpbiAkcGFyc2Vycy8kZm9ybWF0dGVycyBvciBhIGN1c3RvbSB2YWxpZGF0aW9uIGltcGxlbWVudGF0aW9uLlxuICogSG93ZXZlciwgaW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgc3VmZmljaWVudCB0byB1c2UgdGhlIGBuZ01vZGVsLiR2YWxpZGF0b3JzYCBhbmRcbiAqIGBuZ01vZGVsLiRhc3luY1ZhbGlkYXRvcnNgIGNvbGxlY3Rpb25zIHdoaWNoIHdpbGwgY2FsbCBgJHNldFZhbGlkaXR5YCBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWxpZGF0aW9uRXJyb3JLZXkgTmFtZSBvZiB0aGUgdmFsaWRhdG9yLiBUaGUgYHZhbGlkYXRpb25FcnJvcktleWAgd2lsbCBiZSBhc3NpZ25lZFxuICogICAgICAgIHRvIGVpdGhlciBgJGVycm9yW3ZhbGlkYXRpb25FcnJvcktleV1gIG9yIGAkcGVuZGluZ1t2YWxpZGF0aW9uRXJyb3JLZXldYFxuICogICAgICAgIChmb3IgdW5mdWxmaWxsZWQgYCRhc3luY1ZhbGlkYXRvcnNgKSwgc28gdGhhdCBpdCBpcyBhdmFpbGFibGUgZm9yIGRhdGEtYmluZGluZy5cbiAqICAgICAgICBUaGUgYHZhbGlkYXRpb25FcnJvcktleWAgc2hvdWxkIGJlIGluIGNhbWVsQ2FzZSBhbmQgd2lsbCBnZXQgY29udmVydGVkIGludG8gZGFzaC1jYXNlXG4gKiAgICAgICAgZm9yIGNsYXNzIG5hbWUuIEV4YW1wbGU6IGBteUVycm9yYCB3aWxsIHJlc3VsdCBpbiBgbmctdmFsaWQtbXktZXJyb3JgIGFuZCBgbmctaW52YWxpZC1teS1lcnJvcmBcbiAqICAgICAgICBjbGFzc2VzIGFuZCBjYW4gYmUgYm91bmQgdG8gYXMgYHt7IHNvbWVGb3JtLnNvbWVDb250cm9sLiRlcnJvci5teUVycm9yIH19YC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNWYWxpZCBXaGV0aGVyIHRoZSBjdXJyZW50IHN0YXRlIGlzIHZhbGlkICh0cnVlKSwgaW52YWxpZCAoZmFsc2UpLCBwZW5kaW5nICh1bmRlZmluZWQpLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgIG9yIHNraXBwZWQgKG51bGwpLiBQZW5kaW5nIGlzIHVzZWQgZm9yIHVuZnVsZmlsbGVkIGAkYXN5bmNWYWxpZGF0b3JzYC5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBTa2lwcGVkIGlzIHVzZWQgYnkgQW5ndWxhckpTIHdoZW4gdmFsaWRhdG9ycyBkbyBub3QgcnVuIGJlY2F1c2Ugb2YgcGFyc2UgZXJyb3JzIGFuZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHdoZW4gYCRhc3luY1ZhbGlkYXRvcnNgIGRvIG5vdCBydW4gYmVjYXVzZSBhbnkgb2YgdGhlIGAkdmFsaWRhdG9yc2AgZmFpbGVkLlxuICovXG5hZGRTZXRWYWxpZGl0eU1ldGhvZCh7XG4gIGNsYXp6OiBOZ01vZGVsQ29udHJvbGxlcixcbiAgc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7XG4gICAgb2JqZWN0W3Byb3BlcnR5XSA9IHRydWU7XG4gIH0sXG4gIHVuc2V0OiBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7XG4gICAgZGVsZXRlIG9iamVjdFtwcm9wZXJ0eV07XG4gIH1cbn0pO1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb2RlbFxuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSAxXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW9kZWwgYXNzaWduYWJsZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBiaW5kIHRvLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ01vZGVsYCBkaXJlY3RpdmUgYmluZHMgYW4gYGlucHV0YCxgc2VsZWN0YCwgYHRleHRhcmVhYCAob3IgY3VzdG9tIGZvcm0gY29udHJvbCkgdG8gYVxuICogcHJvcGVydHkgb24gdGhlIHNjb3BlIHVzaW5nIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIE5nTW9kZWxDb250cm9sbGVyfSxcbiAqIHdoaWNoIGlzIGNyZWF0ZWQgYW5kIGV4cG9zZWQgYnkgdGhpcyBkaXJlY3RpdmUuXG4gKlxuICogYG5nTW9kZWxgIGlzIHJlc3BvbnNpYmxlIGZvcjpcbiAqXG4gKiAtIEJpbmRpbmcgdGhlIHZpZXcgaW50byB0aGUgbW9kZWwsIHdoaWNoIG90aGVyIGRpcmVjdGl2ZXMgc3VjaCBhcyBgaW5wdXRgLCBgdGV4dGFyZWFgIG9yIGBzZWxlY3RgXG4gKiAgIHJlcXVpcmUuXG4gKiAtIFByb3ZpZGluZyB2YWxpZGF0aW9uIGJlaGF2aW9yIChpLmUuIHJlcXVpcmVkLCBudW1iZXIsIGVtYWlsLCB1cmwpLlxuICogLSBLZWVwaW5nIHRoZSBzdGF0ZSBvZiB0aGUgY29udHJvbCAodmFsaWQvaW52YWxpZCwgZGlydHkvcHJpc3RpbmUsIHRvdWNoZWQvdW50b3VjaGVkLCB2YWxpZGF0aW9uIGVycm9ycykuXG4gKiAtIFNldHRpbmcgcmVsYXRlZCBjc3MgY2xhc3NlcyBvbiB0aGUgZWxlbWVudCAoYG5nLXZhbGlkYCwgYG5nLWludmFsaWRgLCBgbmctZGlydHlgLCBgbmctcHJpc3RpbmVgLCBgbmctdG91Y2hlZGAsXG4gKiAgIGBuZy11bnRvdWNoZWRgLCBgbmctZW1wdHlgLCBgbmctbm90LWVtcHR5YCkgaW5jbHVkaW5nIGFuaW1hdGlvbnMuXG4gKiAtIFJlZ2lzdGVyaW5nIHRoZSBjb250cm9sIHdpdGggaXRzIHBhcmVudCB7QGxpbmsgbmcuZGlyZWN0aXZlOmZvcm0gZm9ybX0uXG4gKlxuICogTm90ZTogYG5nTW9kZWxgIHdpbGwgdHJ5IHRvIGJpbmQgdG8gdGhlIHByb3BlcnR5IGdpdmVuIGJ5IGV2YWx1YXRpbmcgdGhlIGV4cHJlc3Npb24gb24gdGhlXG4gKiBjdXJyZW50IHNjb3BlLiBJZiB0aGUgcHJvcGVydHkgZG9lc24ndCBhbHJlYWR5IGV4aXN0IG9uIHRoaXMgc2NvcGUsIGl0IHdpbGwgYmUgY3JlYXRlZFxuICogaW1wbGljaXRseSBhbmQgYWRkZWQgdG8gdGhlIHNjb3BlLlxuICpcbiAqIEZvciBiZXN0IHByYWN0aWNlcyBvbiB1c2luZyBgbmdNb2RlbGAsIHNlZTpcbiAqXG4gKiAgLSBbVW5kZXJzdGFuZGluZyBTY29wZXNdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvd2lraS9VbmRlcnN0YW5kaW5nLVNjb3BlcylcbiAqXG4gKiBGb3IgYmFzaWMgZXhhbXBsZXMsIGhvdyB0byB1c2UgYG5nTW9kZWxgLCBzZWU6XG4gKlxuICogIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTppbnB1dCBpbnB1dH1cbiAqICAgIC0ge0BsaW5rIGlucHV0W3RleHRdIHRleHR9XG4gKiAgICAtIHtAbGluayBpbnB1dFtjaGVja2JveF0gY2hlY2tib3h9XG4gKiAgICAtIHtAbGluayBpbnB1dFtyYWRpb10gcmFkaW99XG4gKiAgICAtIHtAbGluayBpbnB1dFtudW1iZXJdIG51bWJlcn1cbiAqICAgIC0ge0BsaW5rIGlucHV0W2VtYWlsXSBlbWFpbH1cbiAqICAgIC0ge0BsaW5rIGlucHV0W3VybF0gdXJsfVxuICogICAgLSB7QGxpbmsgaW5wdXRbZGF0ZV0gZGF0ZX1cbiAqICAgIC0ge0BsaW5rIGlucHV0W2RhdGV0aW1lLWxvY2FsXSBkYXRldGltZS1sb2NhbH1cbiAqICAgIC0ge0BsaW5rIGlucHV0W3RpbWVdIHRpbWV9XG4gKiAgICAtIHtAbGluayBpbnB1dFttb250aF0gbW9udGh9XG4gKiAgICAtIHtAbGluayBpbnB1dFt3ZWVrXSB3ZWVrfVxuICogIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTpzZWxlY3Qgc2VsZWN0fVxuICogIC0ge0BsaW5rIG5nLmRpcmVjdGl2ZTp0ZXh0YXJlYSB0ZXh0YXJlYX1cbiAqXG4gKiAjIyBDb21wbGV4IE1vZGVscyAob2JqZWN0cyBvciBjb2xsZWN0aW9ucylcbiAqXG4gKiBCeSBkZWZhdWx0LCBgbmdNb2RlbGAgd2F0Y2hlcyB0aGUgbW9kZWwgYnkgcmVmZXJlbmNlLCBub3QgdmFsdWUuIFRoaXMgaXMgaW1wb3J0YW50IHRvIGtub3cgd2hlblxuICogYmluZGluZyBpbnB1dHMgdG8gbW9kZWxzIHRoYXQgYXJlIG9iamVjdHMgKGUuZy4gYERhdGVgKSBvciBjb2xsZWN0aW9ucyAoZS5nLiBhcnJheXMpLiBJZiBvbmx5IHByb3BlcnRpZXMgb2YgdGhlXG4gKiBvYmplY3Qgb3IgY29sbGVjdGlvbiBjaGFuZ2UsIGBuZ01vZGVsYCB3aWxsIG5vdCBiZSBub3RpZmllZCBhbmQgc28gdGhlIGlucHV0IHdpbGwgbm90IGJlICByZS1yZW5kZXJlZC5cbiAqXG4gKiBUaGUgbW9kZWwgbXVzdCBiZSBhc3NpZ25lZCBhbiBlbnRpcmVseSBuZXcgb2JqZWN0IG9yIGNvbGxlY3Rpb24gYmVmb3JlIGEgcmUtcmVuZGVyaW5nIHdpbGwgb2NjdXIuXG4gKlxuICogU29tZSBkaXJlY3RpdmVzIGhhdmUgb3B0aW9ucyB0aGF0IHdpbGwgY2F1c2UgdGhlbSB0byB1c2UgYSBjdXN0b20gYCR3YXRjaENvbGxlY3Rpb25gIG9uIHRoZSBtb2RlbCBleHByZXNzaW9uXG4gKiAtIGZvciBleGFtcGxlLCBgbmdPcHRpb25zYCB3aWxsIGRvIHNvIHdoZW4gYSBgdHJhY2sgYnlgIGNsYXVzZSBpcyBpbmNsdWRlZCBpbiB0aGUgY29tcHJlaGVuc2lvbiBleHByZXNzaW9uIG9yXG4gKiBpZiB0aGUgc2VsZWN0IGlzIGdpdmVuIHRoZSBgbXVsdGlwbGVgIGF0dHJpYnV0ZS5cbiAqXG4gKiBUaGUgYCR3YXRjaENvbGxlY3Rpb24oKWAgbWV0aG9kIG9ubHkgZG9lcyBhIHNoYWxsb3cgY29tcGFyaXNvbiwgbWVhbmluZyB0aGF0IGNoYW5naW5nIHByb3BlcnRpZXMgZGVlcGVyIHRoYW4gdGhlXG4gKiBmaXJzdCBsZXZlbCBvZiB0aGUgb2JqZWN0IChvciBvbmx5IGNoYW5naW5nIHRoZSBwcm9wZXJ0aWVzIG9mIGFuIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb24gaWYgaXQncyBhbiBhcnJheSkgd2lsbCBzdGlsbFxuICogbm90IHRyaWdnZXIgYSByZS1yZW5kZXJpbmcgb2YgdGhlIG1vZGVsLlxuICpcbiAqICMjIENTUyBjbGFzc2VzXG4gKiBUaGUgZm9sbG93aW5nIENTUyBjbGFzc2VzIGFyZSBhZGRlZCBhbmQgcmVtb3ZlZCBvbiB0aGUgYXNzb2NpYXRlZCBpbnB1dC9zZWxlY3QvdGV4dGFyZWEgZWxlbWVudFxuICogZGVwZW5kaW5nIG9uIHRoZSB2YWxpZGl0eSBvZiB0aGUgbW9kZWwuXG4gKlxuICogIC0gYG5nLXZhbGlkYDogdGhlIG1vZGVsIGlzIHZhbGlkXG4gKiAgLSBgbmctaW52YWxpZGA6IHRoZSBtb2RlbCBpcyBpbnZhbGlkXG4gKiAgLSBgbmctdmFsaWQtW2tleV1gOiBmb3IgZWFjaCB2YWxpZCBrZXkgYWRkZWQgYnkgYCRzZXRWYWxpZGl0eWBcbiAqICAtIGBuZy1pbnZhbGlkLVtrZXldYDogZm9yIGVhY2ggaW52YWxpZCBrZXkgYWRkZWQgYnkgYCRzZXRWYWxpZGl0eWBcbiAqICAtIGBuZy1wcmlzdGluZWA6IHRoZSBjb250cm9sIGhhc24ndCBiZWVuIGludGVyYWN0ZWQgd2l0aCB5ZXRcbiAqICAtIGBuZy1kaXJ0eWA6IHRoZSBjb250cm9sIGhhcyBiZWVuIGludGVyYWN0ZWQgd2l0aFxuICogIC0gYG5nLXRvdWNoZWRgOiB0aGUgY29udHJvbCBoYXMgYmVlbiBibHVycmVkXG4gKiAgLSBgbmctdW50b3VjaGVkYDogdGhlIGNvbnRyb2wgaGFzbid0IGJlZW4gYmx1cnJlZFxuICogIC0gYG5nLXBlbmRpbmdgOiBhbnkgYCRhc3luY1ZhbGlkYXRvcnNgIGFyZSB1bmZ1bGZpbGxlZFxuICogIC0gYG5nLWVtcHR5YDogdGhlIHZpZXcgZG9lcyBub3QgY29udGFpbiBhIHZhbHVlIG9yIHRoZSB2YWx1ZSBpcyBkZWVtZWQgXCJlbXB0eVwiLCBhcyBkZWZpbmVkXG4gKiAgICAgYnkgdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRpc0VtcHR5fSBtZXRob2RcbiAqICAtIGBuZy1ub3QtZW1wdHlgOiB0aGUgdmlldyBjb250YWlucyBhIG5vbi1lbXB0eSB2YWx1ZVxuICpcbiAqIEtlZXAgaW4gbWluZCB0aGF0IG5nQW5pbWF0ZSBjYW4gZGV0ZWN0IGVhY2ggb2YgdGhlc2UgY2xhc3NlcyB3aGVuIGFkZGVkIGFuZCByZW1vdmVkLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiBBbmltYXRpb25zIHdpdGhpbiBtb2RlbHMgYXJlIHRyaWdnZXJlZCB3aGVuIGFueSBvZiB0aGUgYXNzb2NpYXRlZCBDU1MgY2xhc3NlcyBhcmUgYWRkZWQgYW5kIHJlbW92ZWRcbiAqIG9uIHRoZSBpbnB1dCBlbGVtZW50IHdoaWNoIGlzIGF0dGFjaGVkIHRvIHRoZSBtb2RlbC4gVGhlc2UgY2xhc3NlcyBpbmNsdWRlOiBgLm5nLXByaXN0aW5lYCwgYC5uZy1kaXJ0eWAsXG4gKiBgLm5nLWludmFsaWRgIGFuZCBgLm5nLXZhbGlkYCBhcyB3ZWxsIGFzIGFueSBvdGhlciB2YWxpZGF0aW9ucyB0aGF0IGFyZSBwZXJmb3JtZWQgb24gdGhlIG1vZGVsIGl0c2VsZi5cbiAqIFRoZSBhbmltYXRpb25zIHRoYXQgYXJlIHRyaWdnZXJlZCB3aXRoaW4gbmdNb2RlbCBhcmUgc2ltaWxhciB0byBob3cgdGhleSB3b3JrIGluIG5nQ2xhc3MgYW5kXG4gKiBhbmltYXRpb25zIGNhbiBiZSBob29rZWQgaW50byB1c2luZyBDU1MgdHJhbnNpdGlvbnMsIGtleWZyYW1lcyBhcyB3ZWxsIGFzIEpTIGFuaW1hdGlvbnMuXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGEgc2ltcGxlIHdheSB0byB1dGlsaXplIENTUyB0cmFuc2l0aW9ucyB0byBzdHlsZSBhbiBpbnB1dCBlbGVtZW50XG4gKiB0aGF0IGhhcyBiZWVuIHJlbmRlcmVkIGFzIGludmFsaWQgYWZ0ZXIgaXQgaGFzIGJlZW4gdmFsaWRhdGVkOlxuICpcbiAqIDxwcmU+XG4gKiAvL2JlIHN1cmUgdG8gaW5jbHVkZSBuZ0FuaW1hdGUgYXMgYSBtb2R1bGUgdG8gaG9vayBpbnRvIG1vcmVcbiAqIC8vYWR2YW5jZWQgYW5pbWF0aW9uc1xuICogLm15LWlucHV0IHtcbiAqICAgdHJhbnNpdGlvbjowLjVzIGxpbmVhciBhbGw7XG4gKiAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICogfVxuICogLm15LWlucHV0Lm5nLWludmFsaWQge1xuICogICBiYWNrZ3JvdW5kOiByZWQ7XG4gKiAgIGNvbG9yOndoaXRlO1xuICogfVxuICogPC9wcmU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBCYXNpYyBVc2FnZVxuICogPGV4YW1wbGUgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgZml4QmFzZT1cInRydWVcIiBtb2R1bGU9XCJpbnB1dEV4YW1wbGVcIiBuYW1lPVwibmctbW9kZWxcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnaW5wdXRFeGFtcGxlJywgW10pXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICRzY29wZS52YWwgPSAnMSc7XG4gICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxzdHlsZT5cbiAgICAgICAgIC5teS1pbnB1dCB7XG4gICAgICAgICAgIHRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xuICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgIH1cbiAgICAgICAgIC5teS1pbnB1dC5uZy1pbnZhbGlkIHtcbiAgICAgICAgICAgY29sb3I6d2hpdGU7XG4gICAgICAgICAgIGJhY2tncm91bmQ6IHJlZDtcbiAgICAgICAgIH1cbiAgICAgICA8L3N0eWxlPlxuICAgICAgIDxwIGlkPVwiaW5wdXREZXNjcmlwdGlvblwiPlxuICAgICAgICBVcGRhdGUgaW5wdXQgdG8gc2VlIHRyYW5zaXRpb25zIHdoZW4gdmFsaWQvaW52YWxpZC5cbiAgICAgICAgSW50ZWdlciBpcyBhIHZhbGlkIHZhbHVlLlxuICAgICAgIDwvcD5cbiAgICAgICA8Zm9ybSBuYW1lPVwidGVzdEZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInZhbFwiIG5nLXBhdHRlcm49XCIvXlxcZCskL1wiIG5hbWU9XCJhbmltXCIgY2xhc3M9XCJteS1pbnB1dFwiXG4gICAgICAgICAgICAgICAgYXJpYS1kZXNjcmliZWRieT1cImlucHV0RGVzY3JpcHRpb25cIiAvPlxuICAgICAgIDwvZm9ybT5cbiAgICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQmluZGluZyB0byBhIGdldHRlci9zZXR0ZXJcbiAqXG4gKiBTb21ldGltZXMgaXQncyBoZWxwZnVsIHRvIGJpbmQgYG5nTW9kZWxgIHRvIGEgZ2V0dGVyL3NldHRlciBmdW5jdGlvbi4gIEEgZ2V0dGVyL3NldHRlciBpcyBhXG4gKiBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgbW9kZWwgd2hlbiBjYWxsZWQgd2l0aCB6ZXJvIGFyZ3VtZW50cywgYW5kIHNldHNcbiAqIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhIG1vZGVsIHdoZW4gY2FsbGVkIHdpdGggYW4gYXJndW1lbnQuIEl0J3Mgc29tZXRpbWVzIHVzZWZ1bCB0byB1c2UgdGhpc1xuICogZm9yIG1vZGVscyB0aGF0IGhhdmUgYW4gaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gdGhhdCdzIGRpZmZlcmVudCBmcm9tIHdoYXQgdGhlIG1vZGVsIGV4cG9zZXNcbiAqIHRvIHRoZSB2aWV3LlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1zdWNjZXNzXCI+XG4gKiAqKkJlc3QgUHJhY3RpY2U6KiogSXQncyBiZXN0IHRvIGtlZXAgZ2V0dGVycyBmYXN0IGJlY2F1c2UgQW5ndWxhckpTIGlzIGxpa2VseSB0byBjYWxsIHRoZW0gbW9yZVxuICogZnJlcXVlbnRseSB0aGFuIG90aGVyIHBhcnRzIG9mIHlvdXIgY29kZS5cbiAqIDwvZGl2PlxuICpcbiAqIFlvdSB1c2UgdGhpcyBiZWhhdmlvciBieSBhZGRpbmcgYG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCJgIHRvIGFuIGVsZW1lbnQgdGhhdFxuICogaGFzIGBuZy1tb2RlbGAgYXR0YWNoZWQgdG8gaXQuIFlvdSBjYW4gYWxzbyBhZGQgYG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCJgIHRvXG4gKiBhIGA8Zm9ybT5gLCB3aGljaCB3aWxsIGVuYWJsZSB0aGlzIGJlaGF2aW9yIGZvciBhbGwgYDxpbnB1dD5gcyB3aXRoaW4gaXQuIFNlZVxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ01vZGVsT3B0aW9ucyBgbmdNb2RlbE9wdGlvbnNgfSBmb3IgbW9yZS5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIHVzZSBgbmdNb2RlbGAgd2l0aCBhIGdldHRlci9zZXR0ZXI6XG4gKlxuICogQGV4YW1wbGVcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsLWdldHRlci1zZXR0ZXJcIiBtb2R1bGU9XCJnZXR0ZXJTZXR0ZXJFeGFtcGxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxmb3JtIG5hbWU9XCJ1c2VyRm9ybVwiPlxuICAgICAgICAgICA8bGFiZWw+TmFtZTpcbiAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxuICAgICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cInVzZXIubmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCIgLz5cbiAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgIDxwcmU+dXNlci5uYW1lID0gPHNwYW4gbmctYmluZD1cInVzZXIubmFtZSgpXCI+PC9zcGFuPjwvcHJlPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnZ2V0dGVyU2V0dGVyRXhhbXBsZScsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgdmFyIF9uYW1lID0gJ0JyaWFuJztcbiAgICAgICAgICAgJHNjb3BlLnVzZXIgPSB7XG4gICAgICAgICAgICAgbmFtZTogZnVuY3Rpb24obmV3TmFtZSkge1xuICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgbmV3TmFtZSBjYW4gYmUgdW5kZWZpbmVkIGZvciB0d28gcmVhc29uczpcbiAgICAgICAgICAgICAgLy8gMS4gQmVjYXVzZSBpdCBpcyBjYWxsZWQgYXMgYSBnZXR0ZXIgYW5kIHRodXMgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzXG4gICAgICAgICAgICAgIC8vIDIuIEJlY2F1c2UgdGhlIHByb3BlcnR5IHNob3VsZCBhY3R1YWxseSBiZSBzZXQgdG8gdW5kZWZpbmVkLiBUaGlzIGhhcHBlbnMgZS5nLiBpZiB0aGVcbiAgICAgICAgICAgICAgLy8gICAgaW5wdXQgaXMgaW52YWxpZFxuICAgICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChfbmFtZSA9IG5ld05hbWUpIDogX25hbWU7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICB9O1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ01vZGVsRGlyZWN0aXZlID0gWyckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHJvb3RTY29wZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogWyduZ01vZGVsJywgJ14/Zm9ybScsICdeP25nTW9kZWxPcHRpb25zJ10sXG4gICAgY29udHJvbGxlcjogTmdNb2RlbENvbnRyb2xsZXIsXG4gICAgLy8gUHJlbGluayBuZWVkcyB0byBydW4gYmVmb3JlIGFueSBpbnB1dCBkaXJlY3RpdmVcbiAgICAvLyBzbyB0aGF0IHdlIGNhbiBzZXQgdGhlIE5nTW9kZWxPcHRpb25zIGluIE5nTW9kZWxDb250cm9sbGVyXG4gICAgLy8gYmVmb3JlIGFueW9uZSBlbHNlIHVzZXMgaXQuXG4gICAgcHJpb3JpdHk6IDEsXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdNb2RlbENvbXBpbGUoZWxlbWVudCkge1xuICAgICAgLy8gU2V0dXAgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgY29udHJvbFxuICAgICAgZWxlbWVudC5hZGRDbGFzcyhQUklTVElORV9DTEFTUykuYWRkQ2xhc3MoVU5UT1VDSEVEX0NMQVNTKS5hZGRDbGFzcyhWQUxJRF9DTEFTUyk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHByZTogZnVuY3Rpb24gbmdNb2RlbFByZUxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG4gICAgICAgICAgdmFyIG1vZGVsQ3RybCA9IGN0cmxzWzBdLFxuICAgICAgICAgICAgICBmb3JtQ3RybCA9IGN0cmxzWzFdIHx8IG1vZGVsQ3RybC4kJHBhcmVudEZvcm0sXG4gICAgICAgICAgICAgIG9wdGlvbnNDdHJsID0gY3RybHNbMl07XG5cbiAgICAgICAgICBpZiAob3B0aW9uc0N0cmwpIHtcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kb3B0aW9ucyA9IG9wdGlvbnNDdHJsLiRvcHRpb25zO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1vZGVsQ3RybC4kJGluaXRHZXR0ZXJTZXR0ZXJzKCk7XG5cbiAgICAgICAgICAvLyBub3RpZnkgb3RoZXJzLCBlc3BlY2lhbGx5IHBhcmVudCBmb3Jtc1xuICAgICAgICAgIGZvcm1DdHJsLiRhZGRDb250cm9sKG1vZGVsQ3RybCk7XG5cbiAgICAgICAgICBhdHRyLiRvYnNlcnZlKCduYW1lJywgZnVuY3Rpb24obmV3VmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChtb2RlbEN0cmwuJG5hbWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgIG1vZGVsQ3RybC4kJHBhcmVudEZvcm0uJCRyZW5hbWVDb250cm9sKG1vZGVsQ3RybCwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kZWxDdHJsLiQkcGFyZW50Rm9ybS4kcmVtb3ZlQ29udHJvbChtb2RlbEN0cmwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBwb3N0OiBmdW5jdGlvbiBuZ01vZGVsUG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG4gICAgICAgICAgdmFyIG1vZGVsQ3RybCA9IGN0cmxzWzBdO1xuICAgICAgICAgIG1vZGVsQ3RybC4kJHNldFVwZGF0ZU9uRXZlbnRzKCk7XG5cbiAgICAgICAgICBmdW5jdGlvbiBzZXRUb3VjaGVkKCkge1xuICAgICAgICAgICAgbW9kZWxDdHJsLiRzZXRUb3VjaGVkKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZWxlbWVudC5vbignYmx1cicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKG1vZGVsQ3RybC4kdG91Y2hlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiAoJHJvb3RTY29wZS4kJHBoYXNlKSB7XG4gICAgICAgICAgICAgIHNjb3BlLiRldmFsQXN5bmMoc2V0VG91Y2hlZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoc2V0VG91Y2hlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbi8qIGV4cG9ydGVkIGRlZmF1bHRNb2RlbE9wdGlvbnMgKi9cbnZhciBkZWZhdWx0TW9kZWxPcHRpb25zO1xudmFyIERFRkFVTFRfUkVHRVhQID0gLyhcXHMrfF4pZGVmYXVsdChcXHMrfCQpLztcblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgTW9kZWxPcHRpb25zXG4gKiBAZGVzY3JpcHRpb25cbiAqIEEgY29udGFpbmVyIGZvciB0aGUgb3B0aW9ucyBzZXQgYnkgdGhlIHtAbGluayBuZ01vZGVsT3B0aW9uc30gZGlyZWN0aXZlXG4gKi9cbmZ1bmN0aW9uIE1vZGVsT3B0aW9ucyhvcHRpb25zKSB7XG4gIHRoaXMuJCRvcHRpb25zID0gb3B0aW9ucztcbn1cblxuTW9kZWxPcHRpb25zLnByb3RvdHlwZSA9IHtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBNb2RlbE9wdGlvbnMjZ2V0T3B0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBvcHRpb24gdG8gcmV0cmlldmVcbiAgICogQHJldHVybnMgeyp9IHRoZSB2YWx1ZSBvZiB0aGUgb3B0aW9uXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gb3B0aW9uXG4gICAqL1xuICBnZXRPcHRpb246IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy4kJG9wdGlvbnNbbmFtZV07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgTW9kZWxPcHRpb25zI2NyZWF0ZUNoaWxkXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIGEgaGFzaCBvZiBvcHRpb25zIGZvciB0aGUgbmV3IGNoaWxkIHRoYXQgd2lsbCBvdmVycmlkZSB0aGUgcGFyZW50J3Mgb3B0aW9uc1xuICAgKiBAcmV0dXJuIHtNb2RlbE9wdGlvbnN9IGEgbmV3IGBNb2RlbE9wdGlvbnNgIG9iamVjdCBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuICAgKi9cbiAgY3JlYXRlQ2hpbGQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB2YXIgaW5oZXJpdEFsbCA9IGZhbHNlO1xuXG4gICAgLy8gbWFrZSBhIHNoYWxsb3cgY29weVxuICAgIG9wdGlvbnMgPSBleHRlbmQoe30sIG9wdGlvbnMpO1xuXG4gICAgLy8gSW5oZXJpdCBvcHRpb25zIGZyb20gdGhlIHBhcmVudCBpZiBzcGVjaWZpZWQgYnkgdGhlIHZhbHVlIGBcIiRpbmhlcml0XCJgXG4gICAgZm9yRWFjaChvcHRpb25zLCAvKiBAdGhpcyAqLyBmdW5jdGlvbihvcHRpb24sIGtleSkge1xuICAgICAgaWYgKG9wdGlvbiA9PT0gJyRpbmhlcml0Jykge1xuICAgICAgICBpZiAoa2V5ID09PSAnKicpIHtcbiAgICAgICAgICBpbmhlcml0QWxsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcHRpb25zW2tleV0gPSB0aGlzLiQkb3B0aW9uc1trZXldO1xuICAgICAgICAgIC8vIGB1cGRhdGVPbmAgaXMgc3BlY2lhbCBzbyB3ZSBtdXN0IGFsc28gaW5oZXJpdCB0aGUgYHVwZGF0ZU9uRGVmYXVsdGAgb3B0aW9uXG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3VwZGF0ZU9uJykge1xuICAgICAgICAgICAgb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQgPSB0aGlzLiQkb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoa2V5ID09PSAndXBkYXRlT24nKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGB1cGRhdGVPbmAgcHJvcGVydHkgY29udGFpbnMgdGhlIGBkZWZhdWx0YCBldmVudCB0aGVuIHdlIGhhdmUgdG8gcmVtb3ZlXG4gICAgICAgICAgLy8gaXQgZnJvbSB0aGUgZXZlbnQgbGlzdCBhbmQgc2V0IHRoZSBgdXBkYXRlT25EZWZhdWx0YCBmbGFnLlxuICAgICAgICAgIG9wdGlvbnMudXBkYXRlT25EZWZhdWx0ID0gZmFsc2U7XG4gICAgICAgICAgb3B0aW9uc1trZXldID0gdHJpbShvcHRpb24ucmVwbGFjZShERUZBVUxUX1JFR0VYUCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gJyAnO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuXG4gICAgaWYgKGluaGVyaXRBbGwpIHtcbiAgICAgIC8vIFdlIGhhdmUgYSBwcm9wZXJ0eSBvZiB0aGUgZm9ybTogYFwiKlwiOiBcIiRpbmhlcml0XCJgXG4gICAgICBkZWxldGUgb3B0aW9uc1snKiddO1xuICAgICAgZGVmYXVsdHMob3B0aW9ucywgdGhpcy4kJG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8vIEZpbmFsbHkgYWRkIGluIGFueSBtaXNzaW5nIGRlZmF1bHRzXG4gICAgZGVmYXVsdHMob3B0aW9ucywgZGVmYXVsdE1vZGVsT3B0aW9ucy4kJG9wdGlvbnMpO1xuXG4gICAgcmV0dXJuIG5ldyBNb2RlbE9wdGlvbnMob3B0aW9ucyk7XG4gIH1cbn07XG5cblxuZGVmYXVsdE1vZGVsT3B0aW9ucyA9IG5ldyBNb2RlbE9wdGlvbnMoe1xuICB1cGRhdGVPbjogJycsXG4gIHVwZGF0ZU9uRGVmYXVsdDogdHJ1ZSxcbiAgZGVib3VuY2U6IDAsXG4gIGdldHRlclNldHRlcjogZmFsc2UsXG4gIGFsbG93SW52YWxpZDogZmFsc2UsXG4gIHRpbWV6b25lOiBudWxsXG59KTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW9kZWxPcHRpb25zXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGlzIGRpcmVjdGl2ZSBhbGxvd3MgeW91IHRvIG1vZGlmeSB0aGUgYmVoYXZpb3VyIG9mIHtAbGluayBuZ01vZGVsfSBkaXJlY3RpdmVzIHdpdGhpbiB5b3VyXG4gKiBhcHBsaWNhdGlvbi4gWW91IGNhbiBzcGVjaWZ5IGFuIGBuZ01vZGVsT3B0aW9uc2AgZGlyZWN0aXZlIG9uIGFueSBlbGVtZW50LiBBbGwge0BsaW5rIG5nTW9kZWx9XG4gKiBkaXJlY3RpdmVzIHdpbGwgdXNlIHRoZSBvcHRpb25zIG9mIHRoZWlyIG5lYXJlc3QgYG5nTW9kZWxPcHRpb25zYCBhbmNlc3Rvci5cbiAqXG4gKiBUaGUgYG5nTW9kZWxPcHRpb25zYCBzZXR0aW5ncyBhcmUgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZSBkaXJlY3RpdmUgYXNcbiAqIGFuIEFuZ3VsYXJKUyBleHByZXNzaW9uLiBUaGlzIGV4cHJlc3Npb24gc2hvdWxkIGV2YWx1YXRlIHRvIGFuIG9iamVjdCwgd2hvc2UgcHJvcGVydGllcyBjb250YWluXG4gKiB0aGUgc2V0dGluZ3MuIEZvciBleGFtcGxlOiBgPGRpdiBuZy1tb2RlbC1vcHRpb25zPVwieyBkZWJvdW5jZTogMTAwIH1cImAuXG4gKlxuICogIyMgSW5oZXJpdGluZyBPcHRpb25zXG4gKlxuICogWW91IGNhbiBzcGVjaWZ5IHRoYXQgYW4gYG5nTW9kZWxPcHRpb25zYCBzZXR0aW5nIHNob3VsZCBiZSBpbmhlcml0ZWQgZnJvbSBhIHBhcmVudCBgbmdNb2RlbE9wdGlvbnNgXG4gKiBkaXJlY3RpdmUgYnkgZ2l2aW5nIGl0IHRoZSB2YWx1ZSBvZiBgXCIkaW5oZXJpdFwiYC5cbiAqIFRoZW4gaXQgd2lsbCBpbmhlcml0IHRoYXQgc2V0dGluZyBmcm9tIHRoZSBmaXJzdCBgbmdNb2RlbE9wdGlvbnNgIGRpcmVjdGl2ZSBmb3VuZCBieSB0cmF2ZXJzaW5nIHVwIHRoZVxuICogRE9NIHRyZWUuIElmIHRoZXJlIGlzIG5vIGFuY2VzdG9yIGVsZW1lbnQgY29udGFpbmluZyBhbiBgbmdNb2RlbE9wdGlvbnNgIGRpcmVjdGl2ZSB0aGVuIGRlZmF1bHQgc2V0dGluZ3NcbiAqIHdpbGwgYmUgdXNlZC5cbiAqXG4gKiBGb3IgZXhhbXBsZSBnaXZlbiB0aGUgZm9sbG93aW5nIGZyYWdtZW50IG9mIEhUTUxcbiAqXG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBuZy1tb2RlbC1vcHRpb25zPVwieyBhbGxvd0ludmFsaWQ6IHRydWUsIGRlYm91bmNlOiAyMDAgfVwiPlxuICogICA8Zm9ybSBuZy1tb2RlbC1vcHRpb25zPVwieyB1cGRhdGVPbjogJ2JsdXInLCBhbGxvd0ludmFsaWQ6ICckaW5oZXJpdCcgfVwiPlxuICogICAgIDxpbnB1dCBuZy1tb2RlbC1vcHRpb25zPVwieyB1cGRhdGVPbjogJ2RlZmF1bHQnLCBhbGxvd0ludmFsaWQ6ICckaW5oZXJpdCcgfVwiIC8+XG4gKiAgIDwvZm9ybT5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogdGhlIGBpbnB1dGAgZWxlbWVudCB3aWxsIGhhdmUgdGhlIGZvbGxvd2luZyBzZXR0aW5nc1xuICpcbiAqIGBgYGpzXG4gKiB7IGFsbG93SW52YWxpZDogdHJ1ZSwgdXBkYXRlT246ICdkZWZhdWx0JywgZGVib3VuY2U6IDAgfVxuICogYGBgXG4gKlxuICogTm90aWNlIHRoYXQgdGhlIGBkZWJvdW5jZWAgc2V0dGluZyB3YXMgbm90IGluaGVyaXRlZCBhbmQgdXNlZCB0aGUgZGVmYXVsdCB2YWx1ZSBpbnN0ZWFkLlxuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSB0aGF0IGFsbCB1bmRlZmluZWQgc2V0dGluZ3MgYXJlIGF1dG9tYXRpY2FsbHkgaW5oZXJpdGVkIGZyb20gYW4gYW5jZXN0b3IgYnlcbiAqIGluY2x1ZGluZyBhIHByb3BlcnR5IHdpdGgga2V5IG9mIGBcIipcImAgYW5kIHZhbHVlIG9mIGBcIiRpbmhlcml0XCJgLlxuICpcbiAqIEZvciBleGFtcGxlIGdpdmVuIHRoZSBmb2xsb3dpbmcgZnJhZ21lbnQgb2YgSFRNTFxuICpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGFsbG93SW52YWxpZDogdHJ1ZSwgZGVib3VuY2U6IDIwMCB9XCI+XG4gKiAgIDxmb3JtIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IHVwZGF0ZU9uOiAnYmx1cicsIFwiKlwiOiAnJGluaGVyaXQnIH1cIj5cbiAqICAgICA8aW5wdXQgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdkZWZhdWx0JywgXCIqXCI6ICckaW5oZXJpdCcgfVwiIC8+XG4gKiAgIDwvZm9ybT5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogdGhlIGBpbnB1dGAgZWxlbWVudCB3aWxsIGhhdmUgdGhlIGZvbGxvd2luZyBzZXR0aW5nc1xuICpcbiAqIGBgYGpzXG4gKiB7IGFsbG93SW52YWxpZDogdHJ1ZSwgdXBkYXRlT246ICdkZWZhdWx0JywgZGVib3VuY2U6IDIwMCB9XG4gKiBgYGBcbiAqXG4gKiBOb3RpY2UgdGhhdCB0aGUgYGRlYm91bmNlYCBzZXR0aW5nIG5vdyBpbmhlcml0cyB0aGUgdmFsdWUgZnJvbSB0aGUgb3V0ZXIgYDxkaXY+YCBlbGVtZW50LlxuICpcbiAqIElmIHlvdSBhcmUgY3JlYXRpbmcgYSByZXVzYWJsZSBjb21wb25lbnQgdGhlbiB5b3Ugc2hvdWxkIGJlIGNhcmVmdWwgd2hlbiB1c2luZyBgXCIqXCI6IFwiJGluaGVyaXRcImBcbiAqIHNpbmNlIHlvdSBtYXkgaW5hZHZlcnRlbnRseSBpbmhlcml0IGEgc2V0dGluZyBpbiB0aGUgZnV0dXJlIHRoYXQgY2hhbmdlcyB0aGUgYmVoYXZpb3Igb2YgeW91ciBjb21wb25lbnQuXG4gKlxuICpcbiAqICMjIFRyaWdnZXJpbmcgYW5kIGRlYm91bmNpbmcgbW9kZWwgdXBkYXRlc1xuICpcbiAqIFRoZSBgdXBkYXRlT25gIGFuZCBgZGVib3VuY2VgIHByb3BlcnRpZXMgYWxsb3cgeW91IHRvIHNwZWNpZnkgYSBjdXN0b20gbGlzdCBvZiBldmVudHMgdGhhdCB3aWxsXG4gKiB0cmlnZ2VyIGEgbW9kZWwgdXBkYXRlIGFuZC9vciBhIGRlYm91bmNpbmcgZGVsYXkgc28gdGhhdCB0aGUgYWN0dWFsIHVwZGF0ZSBvbmx5IHRha2VzIHBsYWNlIHdoZW5cbiAqIGEgdGltZXIgZXhwaXJlczsgdGhpcyB0aW1lciB3aWxsIGJlIHJlc2V0IGFmdGVyIGFub3RoZXIgY2hhbmdlIHRha2VzIHBsYWNlLlxuICpcbiAqIEdpdmVuIHRoZSBuYXR1cmUgb2YgYG5nTW9kZWxPcHRpb25zYCwgdGhlIHZhbHVlIGRpc3BsYXllZCBpbnNpZGUgaW5wdXQgZmllbGRzIGluIHRoZSB2aWV3IG1pZ2h0XG4gKiBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgdmFsdWUgaW4gdGhlIGFjdHVhbCBtb2RlbC4gVGhpcyBtZWFucyB0aGF0IGlmIHlvdSB1cGRhdGUgdGhlIG1vZGVsIHlvdVxuICogc2hvdWxkIGFsc28gaW52b2tlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRyb2xsYmFja1ZpZXdWYWx1ZX0gb24gdGhlIHJlbGV2YW50IGlucHV0IGZpZWxkIGluXG4gKiBvcmRlciB0byBtYWtlIHN1cmUgaXQgaXMgc3luY2hyb25pemVkIHdpdGggdGhlIG1vZGVsIGFuZCB0aGF0IGFueSBkZWJvdW5jZWQgYWN0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIFRoZSBlYXNpZXN0IHdheSB0byByZWZlcmVuY2UgdGhlIGNvbnRyb2wncyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcm9sbGJhY2tWaWV3VmFsdWV9XG4gKiBtZXRob2QgaXMgYnkgbWFraW5nIHN1cmUgdGhlIGlucHV0IGlzIHBsYWNlZCBpbnNpZGUgYSBmb3JtIHRoYXQgaGFzIGEgYG5hbWVgIGF0dHJpYnV0ZS4gVGhpcyBpc1xuICogaW1wb3J0YW50IGJlY2F1c2UgYGZvcm1gIGNvbnRyb2xsZXJzIGFyZSBwdWJsaXNoZWQgdG8gdGhlIHJlbGF0ZWQgc2NvcGUgdW5kZXIgdGhlIG5hbWUgaW4gdGhlaXJcbiAqIGBuYW1lYCBhdHRyaWJ1dGUuXG4gKlxuICogQW55IHBlbmRpbmcgY2hhbmdlcyB3aWxsIHRha2UgcGxhY2UgaW1tZWRpYXRlbHkgd2hlbiBhbiBlbmNsb3NpbmcgZm9ybSBpcyBzdWJtaXR0ZWQgdmlhIHRoZVxuICogYHN1Ym1pdGAgZXZlbnQuIE5vdGUgdGhhdCBgbmdDbGlja2AgZXZlbnRzIHdpbGwgb2NjdXIgYmVmb3JlIHRoZSBtb2RlbCBpcyB1cGRhdGVkLiBVc2UgYG5nU3VibWl0YFxuICogdG8gaGF2ZSBhY2Nlc3MgdG8gdGhlIHVwZGF0ZWQgbW9kZWwuXG4gKlxuICogIyMjIE92ZXJyaWRpbmcgaW1tZWRpYXRlIHVwZGF0ZXNcbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIG92ZXJyaWRlIGltbWVkaWF0ZSB1cGRhdGVzLiBDaGFuZ2VzIG9uIHRoZSBpbnB1dHMgd2l0aGluIHRoZVxuICogZm9ybSB3aWxsIHVwZGF0ZSB0aGUgbW9kZWwgb25seSB3aGVuIHRoZSBjb250cm9sIGxvc2VzIGZvY3VzIChibHVyIGV2ZW50KS4gSWYgYGVzY2FwZWAga2V5IGlzXG4gKiBwcmVzc2VkIHdoaWxlIHRoZSBpbnB1dCBmaWVsZCBpcyBmb2N1c2VkLCB0aGUgdmFsdWUgaXMgcmVzZXQgdG8gdGhlIHZhbHVlIGluIHRoZSBjdXJyZW50IG1vZGVsLlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtYmx1clwiIG1vZHVsZT1cIm9wdGlvbnNFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgICAgIDxmb3JtIG5hbWU9XCJ1c2VyRm9ybVwiPlxuICogICAgICAgICA8bGFiZWw+XG4gKiAgICAgICAgICAgTmFtZTpcbiAqICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxuICogICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cInVzZXIubmFtZVwiXG4gKiAgICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IHVwZGF0ZU9uOiAnYmx1cicgfVwiXG4gKiAgICAgICAgICAgICAgICAgIG5nLWtleXVwPVwiY2FuY2VsKCRldmVudClcIiAvPlxuICogICAgICAgICA8L2xhYmVsPjxiciAvPlxuICogICAgICAgICA8bGFiZWw+XG4gKiAgICAgICAgICAgT3RoZXIgZGF0YTpcbiAqICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVzZXIuZGF0YVwiIC8+XG4gKiAgICAgICAgIDwvbGFiZWw+PGJyIC8+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWVcIj48L3NwYW4+PC9wcmU+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgIGFuZ3VsYXIubW9kdWxlKCdvcHRpb25zRXhhbXBsZScsIFtdKVxuICogICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgJHNjb3BlLnVzZXIgPSB7IG5hbWU6ICdzYXknLCBkYXRhOiAnJyB9O1xuICpcbiAqICAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKGUpIHtcbiAqICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykge1xuICogICAgICAgICAgICAgJHNjb3BlLnVzZXJGb3JtLnVzZXJOYW1lLiRyb2xsYmFja1ZpZXdWYWx1ZSgpO1xuICogICAgICAgICAgIH1cbiAqICAgICAgICAgfTtcbiAqICAgICAgIH1dKTtcbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgdmFyIG1vZGVsID0gZWxlbWVudChieS5iaW5kaW5nKCd1c2VyLm5hbWUnKSk7XG4gKiAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgndXNlci5uYW1lJykpO1xuICogICAgIHZhciBvdGhlciA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIuZGF0YScpKTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBhbGxvdyBjdXN0b20gZXZlbnRzJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBpbnB1dC5zZW5kS2V5cygnIGhlbGxvJyk7XG4gKiAgICAgICBpbnB1dC5jbGljaygpO1xuICogICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9FcXVhbCgnc2F5Jyk7XG4gKiAgICAgICBvdGhlci5jbGljaygpO1xuICogICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9FcXVhbCgnc2F5IGhlbGxvJyk7XG4gKiAgICAgfSk7XG4gKlxuICogICAgIGl0KCdzaG91bGQgJHJvbGxiYWNrVmlld1ZhbHVlIHdoZW4gbW9kZWwgY2hhbmdlcycsIGZ1bmN0aW9uKCkge1xuICogICAgICAgaW5wdXQuc2VuZEtleXMoJyBoZWxsbycpO1xuICogICAgICAgZXhwZWN0KGlucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnc2F5IGhlbGxvJyk7XG4gKiAgICAgICBpbnB1dC5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5FU0NBUEUpO1xuICogICAgICAgZXhwZWN0KGlucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnc2F5Jyk7XG4gKiAgICAgICBvdGhlci5jbGljaygpO1xuICogICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9FcXVhbCgnc2F5Jyk7XG4gKiAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiAjIyMgRGVib3VuY2luZyB1cGRhdGVzXG4gKlxuICogVGhlIG5leHQgZXhhbXBsZSBzaG93cyBob3cgdG8gZGVib3VuY2UgbW9kZWwgY2hhbmdlcy4gTW9kZWwgd2lsbCBiZSB1cGRhdGVkIG9ubHkgMSBzZWMgYWZ0ZXIgbGFzdCBjaGFuZ2UuXG4gKiBJZiB0aGUgYENsZWFyYCBidXR0b24gaXMgcHJlc3NlZCwgYW55IGRlYm91bmNlZCBhY3Rpb24gaXMgY2FuY2VsZWQgYW5kIHRoZSB2YWx1ZSBiZWNvbWVzIGVtcHR5LlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtZGVib3VuY2VcIiBtb2R1bGU9XCJvcHRpb25zRXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cbiAqICAgICAgICAgTmFtZTpcbiAqICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVzZXJOYW1lXCJcbiAqICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcbiAqICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGRlYm91bmNlOiAxMDAwIH1cIiAvPlxuICogICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwidXNlckZvcm0udXNlck5hbWUuJHJvbGxiYWNrVmlld1ZhbHVlKCk7IHVzZXIubmFtZT0nJ1wiPkNsZWFyPC9idXR0b24+PGJyIC8+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWVcIj48L3NwYW4+PC9wcmU+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgIGFuZ3VsYXIubW9kdWxlKCdvcHRpb25zRXhhbXBsZScsIFtdKVxuICogICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgJHNjb3BlLnVzZXIgPSB7IG5hbWU6ICdzYXknIH07XG4gKiAgICAgICB9XSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiAjIyMgRGVmYXVsdCBldmVudHMsIGV4dHJhIHRyaWdnZXJzLCBhbmQgY2F0Y2gtYWxsIGRlYm91bmNlIHZhbHVlc1xuICpcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gXCJkZWZhdWx0XCIgdXBkYXRlIGV2ZW50cyBhbmRcbiAqIGFkZGl0aW9uYWwgYHVwZGF0ZU9uYCB0cmlnZ2Vycy5cbiAqXG4gKiBgZGVmYXVsdGAgZXZlbnRzIGFyZSB0aG9zZSB0aGF0IGFyZSBib3VuZCB0byB0aGUgY29udHJvbCwgYW5kIHdoZW4gZmlyZWQsIHVwZGF0ZSB0aGUgYCR2aWV3VmFsdWVgXG4gKiB2aWEge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFZpZXdWYWx1ZSAkc2V0Vmlld1ZhbHVlfS4gRXZlcnkgZXZlbnQgdGhhdCBpcyBub3QgbGlzdGVkXG4gKiBpbiBgdXBkYXRlT25gIGlzIGNvbnNpZGVyZWQgYSBcImRlZmF1bHRcIiBldmVudCwgc2luY2UgZGlmZmVyZW50IGNvbnRyb2wgdHlwZXMgaGF2ZSBkaWZmZXJlbnRcbiAqIGRlZmF1bHQgZXZlbnRzLlxuICpcbiAqIFRoZSBjb250cm9sIGluIHRoaXMgZXhhbXBsZSB1cGRhdGVzIGJ5IFwiZGVmYXVsdFwiLCBcImNsaWNrXCIsIGFuZCBcImJsdXJcIiwgd2l0aCBkaWZmZXJlbnQgYGRlYm91bmNlYFxuICogdmFsdWVzLiBZb3UgY2FuIHNlZSB0aGF0IFwiY2xpY2tcIiBkb2Vzbid0IGhhdmUgYW4gaW5kaXZpZHVhbCBgZGVib3VuY2VgIHZhbHVlIC1cbiAqIHRoZXJlZm9yZSBpdCB1c2VzIHRoZSBgKmAgZGVib3VuY2UgdmFsdWUuXG4gKlxuICogVGhlcmUgaXMgYWxzbyBhIGJ1dHRvbiB0aGF0IGNhbGxzIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRWaWV3VmFsdWUgJHNldFZpZXdWYWx1ZX1cbiAqIGRpcmVjdGx5IHdpdGggYSBcImN1c3RvbVwiIGV2ZW50LiBTaW5jZSBcImN1c3RvbVwiIGlzIG5vdCBkZWZpbmVkIGluIHRoZSBgdXBkYXRlT25gIGxpc3QsXG4gKiBpdCBpcyBjb25zaWRlcmVkIGEgXCJkZWZhdWx0XCIgZXZlbnQgYW5kIHdpbGwgdXBkYXRlIHRoZVxuICogY29udHJvbCBpZiBcImRlZmF1bHRcIiBpcyBkZWZpbmVkIGluIGB1cGRhdGVPbmAsIGFuZCB3aWxsIHJlY2VpdmUgdGhlIFwiZGVmYXVsdFwiIGRlYm91bmNlIHZhbHVlLlxuICogTm90ZSB0aGF0IHRoaXMgaXMganVzdCB0byBpbGx1c3RyYXRlIGhvdyBjdXN0b20gY29udHJvbHMgd291bGQgcG9zc2libHkgY2FsbCBgJHNldFZpZXdWYWx1ZWAuXG4gKlxuICogWW91IGNhbiBjaGFuZ2UgdGhlIGB1cGRhdGVPbmAgYW5kIGBkZWJvdW5jZWAgY29uZmlndXJhdGlvbiB0byB0ZXN0IGRpZmZlcmVudCBzY2VuYXJpb3MuIFRoaXNcbiAqIGlzIGRvbmUgd2l0aCB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkb3ZlcnJpZGVNb2RlbE9wdGlvbnMgJG92ZXJyaWRlTW9kZWxPcHRpb25zfS5cbiAqXG4gIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1hZHZhbmNlZFwiIG1vZHVsZT1cIm9wdGlvbnNFeGFtcGxlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8bW9kZWwtdXBkYXRlLWRlbW8+PC9tb2RlbC11cGRhdGUtZGVtbz5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ29wdGlvbnNFeGFtcGxlJywgW10pXG4gICAgICAgIC5jb21wb25lbnQoJ21vZGVsVXBkYXRlRGVtbycsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gJ0NoaW51YSc7XG5cbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgdXBkYXRlT246ICdkZWZhdWx0IGJsdXIgY2xpY2snLFxuICAgICAgICAgICAgICBkZWJvdW5jZToge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDIwMDAsXG4gICAgICAgICAgICAgICAgYmx1cjogMCxcbiAgICAgICAgICAgICAgICAnKic6IDEwMDBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIGV2ZW50TGlzdCA9IHRoaXMub3B0aW9ucy51cGRhdGVPbi5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICBldmVudExpc3QucHVzaCgnKicpO1xuICAgICAgICAgICAgICB2YXIgZXZlbnRzID0ge307XG5cbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBldmVudHNbZXZlbnRMaXN0W2ldXSA9IHRoaXMub3B0aW9ucy5kZWJvdW5jZVtldmVudExpc3RbaV1dO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5ldmVudHMgPSBldmVudHM7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh0aGlzLm9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVPbjogT2JqZWN0LmtleXModGhpcy5ldmVudHMpLmpvaW4oJyAnKS5yZXBsYWNlKCcqJywgJycpLFxuICAgICAgICAgICAgICAgIGRlYm91bmNlOiB0aGlzLmV2ZW50c1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICB0aGlzLmZvcm0uaW5wdXQuJG92ZXJyaWRlTW9kZWxPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgZXZlbnQgZm9ybVxuICAgICAgICAgICAgdGhpcy51cGRhdGVFdmVudHMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwidGVtcGxhdGUuaHRtbFwiPlxuICAgICAgPGZvcm0gbmFtZT1cIiRjdHJsLmZvcm1cIj5cbiAgICAgICAgSW5wdXQ6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiJGN0cmwubmFtZVwiIG5nLW1vZGVsLW9wdGlvbnM9XCIkY3RybC5vcHRpb25zXCIgLz5cbiAgICAgIDwvZm9ybT5cbiAgICAgIE1vZGVsOiA8dHQ+e3skY3RybC5uYW1lfX08L3R0PlxuICAgICAgPGhyPlxuICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIiRjdHJsLmZvcm0uaW5wdXQuJHNldFZpZXdWYWx1ZSgnc29tZSB2YWx1ZScsICdjdXN0b20nKVwiPlRyaWdnZXIgc2V0Vmlld1ZhbHVlIHdpdGggJ3NvbWUgdmFsdWUnIGFuZCAnY3VzdG9tJyBldmVudDwvYnV0dG9uPlxuXG4gICAgICA8aHI+XG4gICAgICA8Zm9ybSBuZy1zdWJtaXQ9XCIkY3RybC51cGRhdGVPcHRpb25zKClcIj5cbiAgICAgICAgPGI+dXBkYXRlT248L2I+PGJyPlxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIiRjdHJsLm9wdGlvbnMudXBkYXRlT25cIiBuZy1jaGFuZ2U9XCIkY3RybC51cGRhdGVFdmVudHMoKVwiIG5nLW1vZGVsLW9wdGlvbnM9XCJ7ZGVib3VuY2U6IDUwMH1cIj5cblxuICAgICAgICA8dGFibGU+XG4gICAgICAgICAgPHRyPlxuICAgICAgICAgICAgPHRoPk9wdGlvbjwvdGg+XG4gICAgICAgICAgICA8dGg+RGVib3VuY2UgdmFsdWU8L3RoPlxuICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgPHRyIG5nLXJlcGVhdD1cIihrZXksIHZhbHVlKSBpbiAkY3RybC5ldmVudHNcIj5cbiAgICAgICAgICAgIDx0ZD57e2tleX19PC90ZD5cbiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwiJGN0cmwuZXZlbnRzW2tleV1cIiAvPjwvdGQ+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgPC90YWJsZT5cblxuICAgICAgICA8YnI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJVcGRhdGUgb3B0aW9uc1wiPlxuICAgICAgPC9mb3JtPlxuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICpcbiAqXG4gKiAjIyBNb2RlbCB1cGRhdGVzIGFuZCB2YWxpZGF0aW9uXG4gKlxuICogVGhlIGRlZmF1bHQgYmVoYXZpb3VyIGluIGBuZ01vZGVsYCBpcyB0aGF0IHRoZSBtb2RlbCB2YWx1ZSBpcyBzZXQgdG8gYHVuZGVmaW5lZGAgd2hlbiB0aGVcbiAqIHZhbGlkYXRpb24gZGV0ZXJtaW5lcyB0aGF0IHRoZSB2YWx1ZSBpcyBpbnZhbGlkLiBCeSBzZXR0aW5nIHRoZSBgYWxsb3dJbnZhbGlkYCBwcm9wZXJ0eSB0byB0cnVlLFxuICogdGhlIG1vZGVsIHdpbGwgc3RpbGwgYmUgdXBkYXRlZCBldmVuIGlmIHRoZSB2YWx1ZSBpcyBpbnZhbGlkLlxuICpcbiAqXG4gKiAjIyBDb25uZWN0aW5nIHRvIHRoZSBzY29wZVxuICpcbiAqIEJ5IHNldHRpbmcgdGhlIGBnZXR0ZXJTZXR0ZXJgIHByb3BlcnR5IHRvIHRydWUgeW91IGFyZSB0ZWxsaW5nIG5nTW9kZWwgdGhhdCB0aGUgYG5nTW9kZWxgIGV4cHJlc3Npb25cbiAqIG9uIHRoZSBzY29wZSByZWZlcnMgdG8gYSBcImdldHRlci9zZXR0ZXJcIiBmdW5jdGlvbiByYXRoZXIgdGhhbiB0aGUgdmFsdWUgaXRzZWxmLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gYmluZCB0byBnZXR0ZXIvc2V0dGVyczpcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdNb2RlbE9wdGlvbnMtZGlyZWN0aXZlLWdldHRlci1zZXR0ZXJcIiBtb2R1bGU9XCJnZXR0ZXJTZXR0ZXJFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgICAgIDxmb3JtIG5hbWU9XCJ1c2VyRm9ybVwiPlxuICogICAgICAgICA8bGFiZWw+XG4gKiAgICAgICAgICAgTmFtZTpcbiAqICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxuICogICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cInVzZXIubmFtZVwiXG4gKiAgICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGdldHRlclNldHRlcjogdHJ1ZSB9XCIgLz5cbiAqICAgICAgICAgPC9sYWJlbD5cbiAqICAgICAgIDwvZm9ybT5cbiAqICAgICAgIDxwcmU+dXNlci5uYW1lID0gPHNwYW4gbmctYmluZD1cInVzZXIubmFtZSgpXCI+PC9zcGFuPjwvcHJlPlxuICogICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICAgICBhbmd1bGFyLm1vZHVsZSgnZ2V0dGVyU2V0dGVyRXhhbXBsZScsIFtdKVxuICogICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgdmFyIF9uYW1lID0gJ0JyaWFuJztcbiAqICAgICAgICAgJHNjb3BlLnVzZXIgPSB7XG4gKiAgICAgICAgICAgbmFtZTogZnVuY3Rpb24obmV3TmFtZSkge1xuICogICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKG5ld05hbWUpID8gKF9uYW1lID0gbmV3TmFtZSkgOiBfbmFtZTtcbiAqICAgICAgICAgICB9XG4gKiAgICAgICAgIH07XG4gKiAgICAgICB9XSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKlxuICogIyMgU3BlY2lmeWluZyB0aW1lem9uZXNcbiAqXG4gKiBZb3UgY2FuIHNwZWNpZnkgdGhlIHRpbWV6b25lIHRoYXQgZGF0ZS90aW1lIGlucHV0IGRpcmVjdGl2ZXMgZXhwZWN0IGJ5IHByb3ZpZGluZyBpdHMgbmFtZSBpbiB0aGVcbiAqIGB0aW1lem9uZWAgcHJvcGVydHkuXG4gKlxuICpcbiAqICMjIFByb2dyYW1tYXRpY2FsbHkgY2hhbmdpbmcgb3B0aW9uc1xuICpcbiAqIFRoZSBgbmdNb2RlbE9wdGlvbnNgIGV4cHJlc3Npb24gaXMgb25seSBldmFsdWF0ZWQgb25jZSB3aGVuIHRoZSBkaXJlY3RpdmUgaXMgbGlua2VkOyBpdCBpcyBub3RcbiAqIHdhdGNoZWQgZm9yIGNoYW5nZXMuIEhvd2V2ZXIsIGl0IGlzIHBvc3NpYmxlIHRvIG92ZXJyaWRlIHRoZSBvcHRpb25zIG9uIGEgc2luZ2xlXG4gKiB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlcn0gaW5zdGFuY2Ugd2l0aFxuICoge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJG92ZXJyaWRlTW9kZWxPcHRpb25zIGBOZ01vZGVsQ29udHJvbGxlciMkb3ZlcnJpZGVNb2RlbE9wdGlvbnMoKWB9LlxuICogU2VlIGFsc28gdGhlIGV4YW1wbGUgZm9yXG4gKiB7QGxpbmsgbmdNb2RlbE9wdGlvbnMjZGVmYXVsdC1ldmVudHMtZXh0cmEtdHJpZ2dlcnMtYW5kLWNhdGNoLWFsbC1kZWJvdW5jZS12YWx1ZXNcbiAqIERlZmF1bHQgZXZlbnRzLCBleHRyYSB0cmlnZ2VycywgYW5kIGNhdGNoLWFsbCBkZWJvdW5jZSB2YWx1ZXN9LlxuICpcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbmdNb2RlbE9wdGlvbnMgb3B0aW9ucyB0byBhcHBseSB0byB7QGxpbmsgbmdNb2RlbH0gZGlyZWN0aXZlcyBvbiB0aGlzIGVsZW1lbnQgYW5kXG4gKiAgIGFuZCBpdHMgZGVzY2VuZGVudHMuIFZhbGlkIGtleXMgYXJlOlxuICogICAtIGB1cGRhdGVPbmA6IHN0cmluZyBzcGVjaWZ5aW5nIHdoaWNoIGV2ZW50IHNob3VsZCB0aGUgaW5wdXQgYmUgYm91bmQgdG8uIFlvdSBjYW4gc2V0IHNldmVyYWxcbiAqICAgICBldmVudHMgdXNpbmcgYW4gc3BhY2UgZGVsaW1pdGVkIGxpc3QuIFRoZXJlIGlzIGEgc3BlY2lhbCBldmVudCBjYWxsZWQgYGRlZmF1bHRgIHRoYXRcbiAqICAgICBtYXRjaGVzIHRoZSBkZWZhdWx0IGV2ZW50cyBiZWxvbmdpbmcgdG8gdGhlIGNvbnRyb2wuIFRoZXNlIGFyZSB0aGUgZXZlbnRzIHRoYXQgYXJlIGJvdW5kIHRvXG4gKiAgICAgdGhlIGNvbnRyb2wsIGFuZCB3aGVuIGZpcmVkLCB1cGRhdGUgdGhlIGAkdmlld1ZhbHVlYCB2aWEgYCRzZXRWaWV3VmFsdWVgLlxuICpcbiAqICAgICBgbmdNb2RlbE9wdGlvbnNgIGNvbnNpZGVycyBldmVyeSBldmVudCB0aGF0IGlzIG5vdCBsaXN0ZWQgaW4gYHVwZGF0ZU9uYCBhIFwiZGVmYXVsdFwiIGV2ZW50LFxuICogICAgIHNpbmNlIGRpZmZlcmVudCBjb250cm9sIHR5cGVzIHVzZSBkaWZmZXJlbnQgZGVmYXVsdCBldmVudHMuXG4gKlxuICogICAgIFNlZSBhbHNvIHRoZSBzZWN0aW9uIHtAbGluayBuZ01vZGVsT3B0aW9ucyN0cmlnZ2VyaW5nLWFuZC1kZWJvdW5jaW5nLW1vZGVsLXVwZGF0ZXNcbiAqICAgICBUcmlnZ2VyaW5nIGFuZCBkZWJvdW5jaW5nIG1vZGVsIHVwZGF0ZXN9LlxuICpcbiAqICAgLSBgZGVib3VuY2VgOiBpbnRlZ2VyIHZhbHVlIHdoaWNoIGNvbnRhaW5zIHRoZSBkZWJvdW5jZSBtb2RlbCB1cGRhdGUgdmFsdWUgaW4gbWlsbGlzZWNvbmRzLiBBXG4gKiAgICAgdmFsdWUgb2YgMCB0cmlnZ2VycyBhbiBpbW1lZGlhdGUgdXBkYXRlLiBJZiBhbiBvYmplY3QgaXMgc3VwcGxpZWQgaW5zdGVhZCwgeW91IGNhbiBzcGVjaWZ5IGFcbiAqICAgICBjdXN0b20gdmFsdWUgZm9yIGVhY2ggZXZlbnQuIEZvciBleGFtcGxlOlxuICogICAgIGBgYFxuICogICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7XG4gKiAgICAgICB1cGRhdGVPbjogJ2RlZmF1bHQgYmx1cicsXG4gKiAgICAgICBkZWJvdW5jZTogeyAnZGVmYXVsdCc6IDUwMCwgJ2JsdXInOiAwIH1cbiAqICAgICB9XCJcbiAqICAgICBgYGBcbiAqICAgICBZb3UgY2FuIHVzZSB0aGUgYCpgIGtleSB0byBzcGVjaWZ5IGEgZGVib3VuY2UgdmFsdWUgdGhhdCBhcHBsaWVzIHRvIGFsbCBldmVudHMgdGhhdCBhcmUgbm90XG4gKiAgICAgc3BlY2lmaWNhbGx5IGxpc3RlZC4gSW4gdGhlIGZvbGxvd2luZyBleGFtcGxlLCBgbW91c2V1cGAgd291bGQgaGF2ZSBhIGRlYm91bmNlIGRlbGF5IG9mIDEwMDA6XG4gKiAgICAgYGBgXG4gKiAgICAgbmctbW9kZWwtb3B0aW9ucz1cIntcbiAqICAgICAgIHVwZGF0ZU9uOiAnZGVmYXVsdCBibHVyIG1vdXNldXAnLFxuICogICAgICAgZGVib3VuY2U6IHsgJ2RlZmF1bHQnOiA1MDAsICdibHVyJzogMCwgJyonOiAxMDAwIH1cbiAqICAgICB9XCJcbiAqICAgICBgYGBcbiAqICAgLSBgYWxsb3dJbnZhbGlkYDogYm9vbGVhbiB2YWx1ZSB3aGljaCBpbmRpY2F0ZXMgdGhhdCB0aGUgbW9kZWwgY2FuIGJlIHNldCB3aXRoIHZhbHVlcyB0aGF0IGRpZFxuICogICAgIG5vdCB2YWxpZGF0ZSBjb3JyZWN0bHkgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiBzZXR0aW5nIHRoZSBtb2RlbCB0byB1bmRlZmluZWQuXG4gKiAgIC0gYGdldHRlclNldHRlcmA6IGJvb2xlYW4gdmFsdWUgd2hpY2ggZGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCB0byB0cmVhdCBmdW5jdGlvbnMgYm91bmQgdG9cbiAqICAgICBgbmdNb2RlbGAgYXMgZ2V0dGVycy9zZXR0ZXJzLlxuICogICAtIGB0aW1lem9uZWA6IERlZmluZXMgdGhlIHRpbWV6b25lIHRvIGJlIHVzZWQgdG8gcmVhZC93cml0ZSB0aGUgYERhdGVgIGluc3RhbmNlIGluIHRoZSBtb2RlbCBmb3JcbiAqICAgICBgPGlucHV0IHR5cGU9XCJkYXRlXCIgLz5gLCBgPGlucHV0IHR5cGU9XCJ0aW1lXCIgLz5gLCAuLi4gLiBJdCB1bmRlcnN0YW5kcyBVVEMvR01UIGFuZCB0aGVcbiAqICAgICBjb250aW5lbnRhbCBVUyB0aW1lIHpvbmUgYWJicmV2aWF0aW9ucywgYnV0IGZvciBnZW5lcmFsIHVzZSwgdXNlIGEgdGltZSB6b25lIG9mZnNldCwgZm9yXG4gKiAgICAgZXhhbXBsZSwgYCcrMDQzMCdgICg0IGhvdXJzLCAzMCBtaW51dGVzIGVhc3Qgb2YgdGhlIEdyZWVud2ljaCBtZXJpZGlhbilcbiAqICAgICBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIgd2lsbCBiZSB1c2VkLlxuICogICAgIE5vdGUgdGhhdCBjaGFuZ2luZyB0aGUgdGltZXpvbmUgd2lsbCBoYXZlIG5vIGVmZmVjdCBvbiB0aGUgY3VycmVudCBkYXRlLCBhbmQgaXMgb25seSBhcHBsaWVkIGFmdGVyXG4gKiAgICAgdGhlIG5leHQgaW5wdXQgLyBtb2RlbCBjaGFuZ2UuXG4gKlxuICovXG52YXIgbmdNb2RlbE9wdGlvbnNEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgTmdNb2RlbE9wdGlvbnNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRhdHRycycsICckc2NvcGUnXTtcbiAgZnVuY3Rpb24gTmdNb2RlbE9wdGlvbnNDb250cm9sbGVyKCRhdHRycywgJHNjb3BlKSB7XG4gICAgdGhpcy4kJGF0dHJzID0gJGF0dHJzO1xuICAgIHRoaXMuJCRzY29wZSA9ICRzY29wZTtcbiAgfVxuICBOZ01vZGVsT3B0aW9uc0NvbnRyb2xsZXIucHJvdG90eXBlID0ge1xuICAgICRvbkluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmVudE9wdGlvbnMgPSB0aGlzLnBhcmVudEN0cmwgPyB0aGlzLnBhcmVudEN0cmwuJG9wdGlvbnMgOiBkZWZhdWx0TW9kZWxPcHRpb25zO1xuICAgICAgdmFyIG1vZGVsT3B0aW9uc0RlZmluaXRpb24gPSB0aGlzLiQkc2NvcGUuJGV2YWwodGhpcy4kJGF0dHJzLm5nTW9kZWxPcHRpb25zKTtcblxuICAgICAgdGhpcy4kb3B0aW9ucyA9IHBhcmVudE9wdGlvbnMuY3JlYXRlQ2hpbGQobW9kZWxPcHRpb25zRGVmaW5pdGlvbik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAvLyBuZ01vZGVsT3B0aW9ucyBuZWVkcyB0byBydW4gYmVmb3JlIG5nTW9kZWwgYW5kIGlucHV0IGRpcmVjdGl2ZXNcbiAgICBwcmlvcml0eTogMTAsXG4gICAgcmVxdWlyZToge3BhcmVudEN0cmw6ICc/Xl5uZ01vZGVsT3B0aW9ucyd9LFxuICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgY29udHJvbGxlcjogTmdNb2RlbE9wdGlvbnNDb250cm9sbGVyXG4gIH07XG59O1xuXG5cbi8vIHNoYWxsb3cgY29weSBvdmVyIHZhbHVlcyBmcm9tIGBzcmNgIHRoYXQgYXJlIG5vdCBhbHJlYWR5IHNwZWNpZmllZCBvbiBgZHN0YFxuZnVuY3Rpb24gZGVmYXVsdHMoZHN0LCBzcmMpIHtcbiAgZm9yRWFjaChzcmMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoIWlzRGVmaW5lZChkc3Rba2V5XSkpIHtcbiAgICAgIGRzdFtrZXldID0gdmFsdWU7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ05vbkJpbmRhYmxlXG4gKiBAcmVzdHJpY3QgQUNcbiAqIEBwcmlvcml0eSAxMDAwXG4gKiBAZWxlbWVudCBBTllcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdOb25CaW5kYWJsZWAgZGlyZWN0aXZlIHRlbGxzIEFuZ3VsYXJKUyBub3QgdG8gY29tcGlsZSBvciBiaW5kIHRoZSBjb250ZW50cyBvZiB0aGUgY3VycmVudFxuICogRE9NIGVsZW1lbnQsIGluY2x1ZGluZyBkaXJlY3RpdmVzIG9uIHRoZSBlbGVtZW50IGl0c2VsZiB0aGF0IGhhdmUgYSBsb3dlciBwcmlvcml0eSB0aGFuXG4gKiBgbmdOb25CaW5kYWJsZWAuIFRoaXMgaXMgdXNlZnVsIGlmIHRoZSBlbGVtZW50IGNvbnRhaW5zIHdoYXQgYXBwZWFycyB0byBiZSBBbmd1bGFySlMgZGlyZWN0aXZlc1xuICogYW5kIGJpbmRpbmdzIGJ1dCB3aGljaCBzaG91bGQgYmUgaWdub3JlZCBieSBBbmd1bGFySlMuIFRoaXMgY291bGQgYmUgdGhlIGNhc2UgaWYgeW91IGhhdmUgYSBzaXRlXG4gKiB0aGF0IGRpc3BsYXlzIHNuaXBwZXRzIG9mIGNvZGUsIGZvciBpbnN0YW5jZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogSW4gdGhpcyBleGFtcGxlIHRoZXJlIGFyZSB0d28gbG9jYXRpb25zIHdoZXJlIGEgc2ltcGxlIGludGVycG9sYXRpb24gYmluZGluZyAoYHt7fX1gKSBpcyBwcmVzZW50LFxuICogYnV0IHRoZSBvbmUgd3JhcHBlZCBpbiBgbmdOb25CaW5kYWJsZWAgaXMgbGVmdCBhbG9uZS5cbiAqXG4gIDxleGFtcGxlIG5hbWU9XCJuZy1ub24tYmluZGFibGVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdj5Ob3JtYWw6IHt7MSArIDJ9fTwvZGl2PlxuICAgICAgPGRpdiBuZy1ub24tYmluZGFibGU+SWdub3JlZDoge3sxICsgMn19PC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1ub24tYmluZGFibGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCcxICsgMicpKS5nZXRUZXh0KCkpLnRvQ29udGFpbignMycpO1xuICAgICAgIGV4cGVjdChlbGVtZW50LmFsbChieS5jc3MoJ2RpdicpKS5sYXN0KCkuZ2V0VGV4dCgpKS50b01hdGNoKC8xIFxcKyAyLyk7XG4gICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG52YXIgbmdOb25CaW5kYWJsZURpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHsgdGVybWluYWw6IHRydWUsIHByaW9yaXR5OiAxMDAwIH0pO1xuXG4vKiBleHBvcnRlZCBuZ09wdGlvbnNEaXJlY3RpdmUgKi9cblxuLyogZ2xvYmFsIGpxTGl0ZVJlbW92ZSAqL1xuXG52YXIgbmdPcHRpb25zTWluRXJyID0gbWluRXJyKCduZ09wdGlvbnMnKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ09wdGlvbnNcbiAqIEByZXN0cmljdCBBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVGhlIGBuZ09wdGlvbnNgIGF0dHJpYnV0ZSBjYW4gYmUgdXNlZCB0byBkeW5hbWljYWxseSBnZW5lcmF0ZSBhIGxpc3Qgb2YgYDxvcHRpb24+YFxuICogZWxlbWVudHMgZm9yIHRoZSBgPHNlbGVjdD5gIGVsZW1lbnQgdXNpbmcgdGhlIGFycmF5IG9yIG9iamVjdCBvYnRhaW5lZCBieSBldmFsdWF0aW5nIHRoZVxuICogYG5nT3B0aW9uc2AgY29tcHJlaGVuc2lvbiBleHByZXNzaW9uLlxuICpcbiAqIEluIG1hbnkgY2FzZXMsIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9IGNhbiBiZSB1c2VkIG9uIGA8b3B0aW9uPmAgZWxlbWVudHMgaW5zdGVhZCBvZlxuICogYG5nT3B0aW9uc2AgdG8gYWNoaWV2ZSBhIHNpbWlsYXIgcmVzdWx0LiBIb3dldmVyLCBgbmdPcHRpb25zYCBwcm92aWRlcyBzb21lIGJlbmVmaXRzOlxuICogLSBtb3JlIGZsZXhpYmlsaXR5IGluIGhvdyB0aGUgYDxzZWxlY3Q+YCdzIG1vZGVsIGlzIGFzc2lnbmVkIHZpYSB0aGUgYHNlbGVjdGAgKipgYXNgKiogcGFydCBvZiB0aGVcbiAqIGNvbXByZWhlbnNpb24gZXhwcmVzc2lvblxuICogLSByZWR1Y2VkIG1lbW9yeSBjb25zdW1wdGlvbiBieSBub3QgY3JlYXRpbmcgYSBuZXcgc2NvcGUgZm9yIGVhY2ggcmVwZWF0ZWQgaW5zdGFuY2VcbiAqIC0gaW5jcmVhc2VkIHJlbmRlciBzcGVlZCBieSBjcmVhdGluZyB0aGUgb3B0aW9ucyBpbiBhIGRvY3VtZW50RnJhZ21lbnQgaW5zdGVhZCBvZiBpbmRpdmlkdWFsbHlcbiAqXG4gKiBXaGVuIGFuIGl0ZW0gaW4gdGhlIGA8c2VsZWN0PmAgbWVudSBpcyBzZWxlY3RlZCwgdGhlIGFycmF5IGVsZW1lbnQgb3Igb2JqZWN0IHByb3BlcnR5XG4gKiByZXByZXNlbnRlZCBieSB0aGUgc2VsZWN0ZWQgb3B0aW9uIHdpbGwgYmUgYm91bmQgdG8gdGhlIG1vZGVsIGlkZW50aWZpZWQgYnkgdGhlIGBuZ01vZGVsYFxuICogZGlyZWN0aXZlLlxuICpcbiAqIE9wdGlvbmFsbHksIGEgc2luZ2xlIGhhcmQtY29kZWQgYDxvcHRpb24+YCBlbGVtZW50LCB3aXRoIHRoZSB2YWx1ZSBzZXQgdG8gYW4gZW1wdHkgc3RyaW5nLCBjYW5cbiAqIGJlIG5lc3RlZCBpbnRvIHRoZSBgPHNlbGVjdD5gIGVsZW1lbnQuIFRoaXMgZWxlbWVudCB3aWxsIHRoZW4gcmVwcmVzZW50IHRoZSBgbnVsbGAgb3IgXCJub3Qgc2VsZWN0ZWRcIlxuICogb3B0aW9uLiBTZWUgZXhhbXBsZSBiZWxvdyBmb3IgZGVtb25zdHJhdGlvbi5cbiAqXG4gKiAjIyBDb21wbGV4IE1vZGVscyAob2JqZWN0cyBvciBjb2xsZWN0aW9ucylcbiAqXG4gKiBCeSBkZWZhdWx0LCBgbmdNb2RlbGAgd2F0Y2hlcyB0aGUgbW9kZWwgYnkgcmVmZXJlbmNlLCBub3QgdmFsdWUuIFRoaXMgaXMgaW1wb3J0YW50IHRvIGtub3cgd2hlblxuICogYmluZGluZyB0aGUgc2VsZWN0IHRvIGEgbW9kZWwgdGhhdCBpcyBhbiBvYmplY3Qgb3IgYSBjb2xsZWN0aW9uLlxuICpcbiAqIE9uZSBpc3N1ZSBvY2N1cnMgaWYgeW91IHdhbnQgdG8gcHJlc2VsZWN0IGFuIG9wdGlvbi4gRm9yIGV4YW1wbGUsIGlmIHlvdSBzZXRcbiAqIHRoZSBtb2RlbCB0byBhbiBvYmplY3QgdGhhdCBpcyBlcXVhbCB0byBhbiBvYmplY3QgaW4geW91ciBjb2xsZWN0aW9uLCBgbmdPcHRpb25zYCB3b24ndCBiZSBhYmxlIHRvIHNldCB0aGUgc2VsZWN0aW9uLFxuICogYmVjYXVzZSB0aGUgb2JqZWN0cyBhcmUgbm90IGlkZW50aWNhbC4gU28gYnkgZGVmYXVsdCwgeW91IHNob3VsZCBhbHdheXMgcmVmZXJlbmNlIHRoZSBpdGVtIGluIHlvdXIgY29sbGVjdGlvblxuICogZm9yIHByZXNlbGVjdGlvbnMsIGUuZy46IGAkc2NvcGUuc2VsZWN0ZWQgPSAkc2NvcGUuY29sbGVjdGlvblszXWAuXG4gKlxuICogQW5vdGhlciBzb2x1dGlvbiBpcyB0byB1c2UgYSBgdHJhY2sgYnlgIGNsYXVzZSwgYmVjYXVzZSB0aGVuIGBuZ09wdGlvbnNgIHdpbGwgdHJhY2sgdGhlIGlkZW50aXR5XG4gKiBvZiB0aGUgaXRlbSBub3QgYnkgcmVmZXJlbmNlLCBidXQgYnkgdGhlIHJlc3VsdCBvZiB0aGUgYHRyYWNrIGJ5YCBleHByZXNzaW9uLiBGb3IgZXhhbXBsZSwgaWYgeW91clxuICogY29sbGVjdGlvbiBpdGVtcyBoYXZlIGFuIGlkIHByb3BlcnR5LCB5b3Ugd291bGQgYHRyYWNrIGJ5IGl0ZW0uaWRgLlxuICpcbiAqIEEgZGlmZmVyZW50IGlzc3VlIHdpdGggb2JqZWN0cyBvciBjb2xsZWN0aW9ucyBpcyB0aGF0IG5nTW9kZWwgd29uJ3QgZGV0ZWN0IGlmIGFuIG9iamVjdCBwcm9wZXJ0eSBvclxuICogYSBjb2xsZWN0aW9uIGl0ZW0gY2hhbmdlcy4gRm9yIHRoYXQgcmVhc29uLCBgbmdPcHRpb25zYCBhZGRpdGlvbmFsbHkgd2F0Y2hlcyB0aGUgbW9kZWwgdXNpbmdcbiAqIGAkd2F0Y2hDb2xsZWN0aW9uYCwgd2hlbiB0aGUgZXhwcmVzc2lvbiBjb250YWlucyBhIGB0cmFjayBieWAgY2xhdXNlIG9yIHRoZSB0aGUgc2VsZWN0IGhhcyB0aGUgYG11bHRpcGxlYCBhdHRyaWJ1dGUuXG4gKiBUaGlzIGFsbG93cyBuZ09wdGlvbnMgdG8gdHJpZ2dlciBhIHJlLXJlbmRlcmluZyBvZiB0aGUgb3B0aW9ucyBldmVuIGlmIHRoZSBhY3R1YWwgb2JqZWN0L2NvbGxlY3Rpb25cbiAqIGhhcyBub3QgY2hhbmdlZCBpZGVudGl0eSwgYnV0IG9ubHkgYSBwcm9wZXJ0eSBvbiB0aGUgb2JqZWN0IG9yIGFuIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb24gY2hhbmdlcy5cbiAqXG4gKiBOb3RlIHRoYXQgYCR3YXRjaENvbGxlY3Rpb25gIGRvZXMgYSBzaGFsbG93IGNvbXBhcmlzb24gb2YgdGhlIHByb3BlcnRpZXMgb2YgdGhlIG9iamVjdCAob3IgdGhlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uXG4gKiBpZiB0aGUgbW9kZWwgaXMgYW4gYXJyYXkpLiBUaGlzIG1lYW5zIHRoYXQgY2hhbmdpbmcgYSBwcm9wZXJ0eSBkZWVwZXIgdGhhbiB0aGUgZmlyc3QgbGV2ZWwgaW5zaWRlIHRoZVxuICogb2JqZWN0L2NvbGxlY3Rpb24gd2lsbCBub3QgdHJpZ2dlciBhIHJlLXJlbmRlcmluZy5cbiAqXG4gKiAjIyBgc2VsZWN0YCAqKmBhc2AqKlxuICpcbiAqIFVzaW5nIGBzZWxlY3RgICoqYGFzYCoqIHdpbGwgYmluZCB0aGUgcmVzdWx0IG9mIHRoZSBgc2VsZWN0YCBleHByZXNzaW9uIHRvIHRoZSBtb2RlbCwgYnV0XG4gKiB0aGUgdmFsdWUgb2YgdGhlIGA8c2VsZWN0PmAgYW5kIGA8b3B0aW9uPmAgaHRtbCBlbGVtZW50cyB3aWxsIGJlIGVpdGhlciB0aGUgaW5kZXggKGZvciBhcnJheSBkYXRhIHNvdXJjZXMpXG4gKiBvciBwcm9wZXJ0eSBuYW1lIChmb3Igb2JqZWN0IGRhdGEgc291cmNlcykgb2YgdGhlIHZhbHVlIHdpdGhpbiB0aGUgY29sbGVjdGlvbi4gSWYgYSAqKmB0cmFjayBieWAqKiBleHByZXNzaW9uXG4gKiBpcyB1c2VkLCB0aGUgcmVzdWx0IG9mIHRoYXQgZXhwcmVzc2lvbiB3aWxsIGJlIHNldCBhcyB0aGUgdmFsdWUgb2YgdGhlIGBvcHRpb25gIGFuZCBgc2VsZWN0YCBlbGVtZW50cy5cbiAqXG4gKlxuICogIyMjIGBzZWxlY3RgICoqYGFzYCoqIGFuZCAqKmB0cmFjayBieWAqKlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiBCZSBjYXJlZnVsIHdoZW4gdXNpbmcgYHNlbGVjdGAgKipgYXNgKiogYW5kICoqYHRyYWNrIGJ5YCoqIGluIHRoZSBzYW1lIGV4cHJlc3Npb24uXG4gKiA8L2Rpdj5cbiAqXG4gKiBHaXZlbiB0aGlzIGFycmF5IG9mIGl0ZW1zIG9uIHRoZSAkc2NvcGU6XG4gKlxuICogYGBganNcbiAqICRzY29wZS5pdGVtcyA9IFt7XG4gKiAgIGlkOiAxLFxuICogICBsYWJlbDogJ2FMYWJlbCcsXG4gKiAgIHN1Ykl0ZW06IHsgbmFtZTogJ2FTdWJJdGVtJyB9XG4gKiB9LCB7XG4gKiAgIGlkOiAyLFxuICogICBsYWJlbDogJ2JMYWJlbCcsXG4gKiAgIHN1Ykl0ZW06IHsgbmFtZTogJ2JTdWJJdGVtJyB9XG4gKiB9XTtcbiAqIGBgYFxuICpcbiAqIFRoaXMgd2lsbCB3b3JrOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxzZWxlY3Qgbmctb3B0aW9ucz1cIml0ZW0gYXMgaXRlbS5sYWJlbCBmb3IgaXRlbSBpbiBpdGVtcyB0cmFjayBieSBpdGVtLmlkXCIgbmctbW9kZWw9XCJzZWxlY3RlZFwiPjwvc2VsZWN0PlxuICogYGBgXG4gKiBgYGBqc1xuICogJHNjb3BlLnNlbGVjdGVkID0gJHNjb3BlLml0ZW1zWzBdO1xuICogYGBgXG4gKlxuICogYnV0IHRoaXMgd2lsbCBub3Qgd29yazpcbiAqXG4gKiBgYGBodG1sXG4gKiA8c2VsZWN0IG5nLW9wdGlvbnM9XCJpdGVtLnN1Ykl0ZW0gYXMgaXRlbS5sYWJlbCBmb3IgaXRlbSBpbiBpdGVtcyB0cmFjayBieSBpdGVtLmlkXCIgbmctbW9kZWw9XCJzZWxlY3RlZFwiPjwvc2VsZWN0PlxuICogYGBgXG4gKiBgYGBqc1xuICogJHNjb3BlLnNlbGVjdGVkID0gJHNjb3BlLml0ZW1zWzBdLnN1Ykl0ZW07XG4gKiBgYGBcbiAqXG4gKiBJbiBib3RoIGV4YW1wbGVzLCB0aGUgKipgdHJhY2sgYnlgKiogZXhwcmVzc2lvbiBpcyBhcHBsaWVkIHN1Y2Nlc3NmdWxseSB0byBlYWNoIGBpdGVtYCBpbiB0aGVcbiAqIGBpdGVtc2AgYXJyYXkuIEJlY2F1c2UgdGhlIHNlbGVjdGVkIG9wdGlvbiBoYXMgYmVlbiBzZXQgcHJvZ3JhbW1hdGljYWxseSBpbiB0aGUgY29udHJvbGxlciwgdGhlXG4gKiAqKmB0cmFjayBieWAqKiBleHByZXNzaW9uIGlzIGFsc28gYXBwbGllZCB0byB0aGUgYG5nTW9kZWxgIHZhbHVlLiBJbiB0aGUgZmlyc3QgZXhhbXBsZSwgdGhlXG4gKiBgbmdNb2RlbGAgdmFsdWUgaXMgYGl0ZW1zWzBdYCBhbmQgdGhlICoqYHRyYWNrIGJ5YCoqIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGBpdGVtc1swXS5pZGAgd2l0aFxuICogbm8gaXNzdWUuIEluIHRoZSBzZWNvbmQgZXhhbXBsZSwgdGhlIGBuZ01vZGVsYCB2YWx1ZSBpcyBgaXRlbXNbMF0uc3ViSXRlbWAgYW5kIHRoZSAqKmB0cmFjayBieWAqKlxuICogZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYGl0ZW1zWzBdLnN1Ykl0ZW0uaWRgICh3aGljaCBpcyB1bmRlZmluZWQpLiBBcyBhIHJlc3VsdCwgdGhlIG1vZGVsIHZhbHVlXG4gKiBpcyBub3QgbWF0Y2hlZCBhZ2FpbnN0IGFueSBgPG9wdGlvbj5gIGFuZCB0aGUgYDxzZWxlY3Q+YCBhcHBlYXJzIGFzIGhhdmluZyBubyBzZWxlY3RlZCB2YWx1ZS5cbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gKiBAcGFyYW0ge2NvbXByZWhlbnNpb25fZXhwcmVzc2lvbn0gbmdPcHRpb25zIGluIG9uZSBvZiB0aGUgZm9sbG93aW5nIGZvcm1zOlxuICpcbiAqICAgKiBmb3IgYXJyYXkgZGF0YSBzb3VyY2VzOlxuICogICAgICogYGxhYmVsYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgXG4gKiAgICAgKiBgc2VsZWN0YCAqKmBhc2AqKiBgbGFiZWxgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWBcbiAqICAgICAqIGBsYWJlbGAgKipgZ3JvdXAgYnlgKiogYGdyb3VwYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgXG4gKiAgICAgKiBgbGFiZWxgICoqYGRpc2FibGUgd2hlbmAqKiBgZGlzYWJsZWAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YFxuICogICAgICogYGxhYmVsYCAqKmBncm91cCBieWAqKiBgZ3JvdXBgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWAgKipgdHJhY2sgYnlgKiogYHRyYWNrZXhwcmBcbiAqICAgICAqIGBsYWJlbGAgKipgZGlzYWJsZSB3aGVuYCoqIGBkaXNhYmxlYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgICoqYHRyYWNrIGJ5YCoqIGB0cmFja2V4cHJgXG4gKiAgICAgKiBgbGFiZWxgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWAgfCBvcmRlckJ5OmBvcmRlcmV4cHJgICoqYHRyYWNrIGJ5YCoqIGB0cmFja2V4cHJgXG4gKiAgICAgICAgKGZvciBpbmNsdWRpbmcgYSBmaWx0ZXIgd2l0aCBgdHJhY2sgYnlgKVxuICogICAqIGZvciBvYmplY3QgZGF0YSBzb3VyY2VzOlxuICogICAgICogYGxhYmVsYCAqKmBmb3IgKGAqKmBrZXlgICoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcbiAqICAgICAqIGBzZWxlY3RgICoqYGFzYCoqIGBsYWJlbGAgKipgZm9yIChgKipga2V5YCAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXG4gKiAgICAgKiBgbGFiZWxgICoqYGdyb3VwIGJ5YCoqIGBncm91cGAgKipgZm9yIChgKipga2V5YCoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcbiAqICAgICAqIGBsYWJlbGAgKipgZGlzYWJsZSB3aGVuYCoqIGBkaXNhYmxlYCAqKmBmb3IgKGAqKmBrZXlgKipgLGAqKiBgdmFsdWVgKipgKSBpbmAqKiBgb2JqZWN0YFxuICogICAgICogYHNlbGVjdGAgKipgYXNgKiogYGxhYmVsYCAqKmBncm91cCBieWAqKiBgZ3JvdXBgXG4gKiAgICAgICAgICoqYGZvcmAgYChgKipga2V5YCoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcbiAqICAgICAqIGBzZWxlY3RgICoqYGFzYCoqIGBsYWJlbGAgKipgZGlzYWJsZSB3aGVuYCoqIGBkaXNhYmxlYFxuICogICAgICAgICAqKmBmb3JgIGAoYCoqYGtleWAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXG4gKlxuICogV2hlcmU6XG4gKlxuICogICAqIGBhcnJheWAgLyBgb2JqZWN0YDogYW4gZXhwcmVzc2lvbiB3aGljaCBldmFsdWF0ZXMgdG8gYW4gYXJyYXkgLyBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogICAqIGB2YWx1ZWA6IGxvY2FsIHZhcmlhYmxlIHdoaWNoIHdpbGwgcmVmZXIgdG8gZWFjaCBpdGVtIGluIHRoZSBgYXJyYXlgIG9yIGVhY2ggcHJvcGVydHkgdmFsdWVcbiAqICAgICAgb2YgYG9iamVjdGAgZHVyaW5nIGl0ZXJhdGlvbi5cbiAqICAgKiBga2V5YDogbG9jYWwgdmFyaWFibGUgd2hpY2ggd2lsbCByZWZlciB0byBhIHByb3BlcnR5IG5hbWUgaW4gYG9iamVjdGAgZHVyaW5nIGl0ZXJhdGlvbi5cbiAqICAgKiBgbGFiZWxgOiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlIHRoZSBsYWJlbCBmb3IgYDxvcHRpb24+YCBlbGVtZW50LiBUaGVcbiAqICAgICBgZXhwcmVzc2lvbmAgd2lsbCBtb3N0IGxpa2VseSByZWZlciB0byB0aGUgYHZhbHVlYCB2YXJpYWJsZSAoZS5nLiBgdmFsdWUucHJvcGVydHlOYW1lYCkuXG4gKiAgICogYHNlbGVjdGA6IFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIHdpbGwgYmUgYm91bmQgdG8gdGhlIG1vZGVsIG9mIHRoZSBwYXJlbnQgYDxzZWxlY3Q+YFxuICogICAgICBlbGVtZW50LiBJZiBub3Qgc3BlY2lmaWVkLCBgc2VsZWN0YCBleHByZXNzaW9uIHdpbGwgZGVmYXVsdCB0byBgdmFsdWVgLlxuICogICAqIGBncm91cGA6IFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIHdpbGwgYmUgdXNlZCB0byBncm91cCBvcHRpb25zIHVzaW5nIHRoZSBgPG9wdGdyb3VwPmBcbiAqICAgICAgRE9NIGVsZW1lbnQuXG4gKiAgICogYGRpc2FibGVgOiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlIHVzZWQgdG8gZGlzYWJsZSB0aGUgcmVuZGVyZWQgYDxvcHRpb24+YFxuICogICAgICBlbGVtZW50LiBSZXR1cm4gYHRydWVgIHRvIGRpc2FibGUuXG4gKiAgICogYHRyYWNrZXhwcmA6IFVzZWQgd2hlbiB3b3JraW5nIHdpdGggYW4gYXJyYXkgb2Ygb2JqZWN0cy4gVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZVxuICogICAgICB1c2VkIHRvIGlkZW50aWZ5IHRoZSBvYmplY3RzIGluIHRoZSBhcnJheS4gVGhlIGB0cmFja2V4cHJgIHdpbGwgbW9zdCBsaWtlbHkgcmVmZXIgdG8gdGhlXG4gKiAgICAgYHZhbHVlYCB2YXJpYWJsZSAoZS5nLiBgdmFsdWUucHJvcGVydHlOYW1lYCkuIFdpdGggdGhpcyB0aGUgc2VsZWN0aW9uIGlzIHByZXNlcnZlZFxuICogICAgICBldmVuIHdoZW4gdGhlIG9wdGlvbnMgYXJlIHJlY3JlYXRlZCAoZS5nLiByZWxvYWRlZCBmcm9tIHRoZSBzZXJ2ZXIpLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBUaGUgY29udHJvbCBpcyBjb25zaWRlcmVkIHZhbGlkIG9ubHkgaWYgdmFsdWUgaXMgZW50ZXJlZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcbiAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0F0dHJTaXplIHNldHMgdGhlIHNpemUgb2YgdGhlIHNlbGVjdCBlbGVtZW50IGR5bmFtaWNhbGx5LiBVc2VzIHRoZVxuICoge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24jLW5nYXR0ci1mb3ItYmluZGluZy10by1hcmJpdHJhcnktYXR0cmlidXRlcyBuZ0F0dHJ9IGRpcmVjdGl2ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG1vZHVsZT1cInNlbGVjdEV4YW1wbGVcIiBuYW1lPVwic2VsZWN0XCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8c2NyaXB0PlxuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnc2VsZWN0RXhhbXBsZScsIFtdKVxuICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY29sb3JzID0gW1xuICAgICAgICAgICAgICB7bmFtZTonYmxhY2snLCBzaGFkZTonZGFyayd9LFxuICAgICAgICAgICAgICB7bmFtZTond2hpdGUnLCBzaGFkZTonbGlnaHQnLCBub3RBbk9wdGlvbjogdHJ1ZX0sXG4gICAgICAgICAgICAgIHtuYW1lOidyZWQnLCBzaGFkZTonZGFyayd9LFxuICAgICAgICAgICAgICB7bmFtZTonYmx1ZScsIHNoYWRlOidkYXJrJywgbm90QW5PcHRpb246IHRydWV9LFxuICAgICAgICAgICAgICB7bmFtZToneWVsbG93Jywgc2hhZGU6J2xpZ2h0Jywgbm90QW5PcHRpb246IGZhbHNlfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICRzY29wZS5teUNvbG9yID0gJHNjb3BlLmNvbG9yc1syXTsgLy8gcmVkXG4gICAgICAgICAgfV0pO1xuICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgICA8dWw+XG4gICAgICAgICAgICA8bGkgbmctcmVwZWF0PVwiY29sb3IgaW4gY29sb3JzXCI+XG4gICAgICAgICAgICAgIDxsYWJlbD5OYW1lOiA8aW5wdXQgbmctbW9kZWw9XCJjb2xvci5uYW1lXCI+PC9sYWJlbD5cbiAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNvbG9yLm5vdEFuT3B0aW9uXCI+IERpc2FibGVkPzwvbGFiZWw+XG4gICAgICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJjb2xvcnMuc3BsaWNlKCRpbmRleCwgMSlcIiBhcmlhLWxhYmVsPVwiUmVtb3ZlXCI+WDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImNvbG9ycy5wdXNoKHt9KVwiPmFkZDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICA8L3VsPlxuICAgICAgICAgIDxoci8+XG4gICAgICAgICAgPGxhYmVsPkNvbG9yIChudWxsIG5vdCBhbGxvd2VkKTpcbiAgICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJteUNvbG9yXCIgbmctb3B0aW9ucz1cImNvbG9yLm5hbWUgZm9yIGNvbG9yIGluIGNvbG9yc1wiPjwvc2VsZWN0PlxuICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICA8bGFiZWw+Q29sb3IgKG51bGwgYWxsb3dlZCk6XG4gICAgICAgICAgPHNwYW4gIGNsYXNzPVwibnVsbGFibGVcIj5cbiAgICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJteUNvbG9yXCIgbmctb3B0aW9ucz1cImNvbG9yLm5hbWUgZm9yIGNvbG9yIGluIGNvbG9yc1wiPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+LS0gY2hvb3NlIGNvbG9yIC0tPC9vcHRpb24+XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICA8L3NwYW4+PC9sYWJlbD48YnIvPlxuXG4gICAgICAgICAgPGxhYmVsPkNvbG9yIGdyb3VwZWQgYnkgc2hhZGU6XG4gICAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiIG5nLW9wdGlvbnM9XCJjb2xvci5uYW1lIGdyb3VwIGJ5IGNvbG9yLnNoYWRlIGZvciBjb2xvciBpbiBjb2xvcnNcIj5cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgIDwvbGFiZWw+PGJyLz5cblxuICAgICAgICAgIDxsYWJlbD5Db2xvciBncm91cGVkIGJ5IHNoYWRlLCB3aXRoIHNvbWUgZGlzYWJsZWQ6XG4gICAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiXG4gICAgICAgICAgICAgICAgICBuZy1vcHRpb25zPVwiY29sb3IubmFtZSBncm91cCBieSBjb2xvci5zaGFkZSBkaXNhYmxlIHdoZW4gY29sb3Iubm90QW5PcHRpb24gZm9yIGNvbG9yIGluIGNvbG9yc1wiPlxuICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgPC9sYWJlbD48YnIvPlxuXG5cblxuICAgICAgICAgIFNlbGVjdCA8YnV0dG9uIG5nLWNsaWNrPVwibXlDb2xvciA9IHsgbmFtZTonbm90IGluIGxpc3QnLCBzaGFkZTogJ290aGVyJyB9XCI+Ym9ndXM8L2J1dHRvbj4uXG4gICAgICAgICAgPGJyLz5cbiAgICAgICAgICA8aHIvPlxuICAgICAgICAgIEN1cnJlbnRseSBzZWxlY3RlZDoge3sge3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9IH19XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJvcmRlcjpzb2xpZCAxcHggYmxhY2s7IGhlaWdodDoyMHB4XCJcbiAgICAgICAgICAgICAgIG5nLXN0eWxlPVwieydiYWNrZ3JvdW5kLWNvbG9yJzpteUNvbG9yLm5hbWV9XCI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1vcHRpb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3tzZWxlY3RlZF9jb2xvcjpteUNvbG9yfScpKS5nZXRUZXh0KCkpLnRvTWF0Y2goJ3JlZCcpO1xuICAgICAgICAgICBlbGVtZW50LmFsbChieS5tb2RlbCgnbXlDb2xvcicpKS5maXJzdCgpLmNsaWNrKCk7XG4gICAgICAgICAgIGVsZW1lbnQuYWxsKGJ5LmNzcygnc2VsZWN0W25nLW1vZGVsPVwibXlDb2xvclwiXSBvcHRpb24nKSkuZmlyc3QoKS5jbGljaygpO1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd7c2VsZWN0ZWRfY29sb3I6bXlDb2xvcn0nKSkuZ2V0VGV4dCgpKS50b01hdGNoKCdibGFjaycpO1xuICAgICAgICAgICBlbGVtZW50KGJ5LmNzcygnLm51bGxhYmxlIHNlbGVjdFtuZy1tb2RlbD1cIm15Q29sb3JcIl0nKSkuY2xpY2soKTtcbiAgICAgICAgICAgZWxlbWVudC5hbGwoYnkuY3NzKCcubnVsbGFibGUgc2VsZWN0W25nLW1vZGVsPVwibXlDb2xvclwiXSBvcHRpb24nKSkuZmlyc3QoKS5jbGljaygpO1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd7c2VsZWN0ZWRfY29sb3I6bXlDb2xvcn0nKSkuZ2V0VGV4dCgpKS50b01hdGNoKCdudWxsJyk7XG4gICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKi9cblxuLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuLy8gICAgICAgICAgICAgICAgICAgICAvLzAwMDAxMTExMTExMTExMDAwMDAwMDAwMDAyMjIyMjIyMjIyMDAwMDAwMDAwMDAwMDAwMDAwMDAwMzMzMzMzMzMzMzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA0NDQ0NDQ0NDQ0NDAwMDAwMDAwMDAwMDA1NTU1NTU1NTU1NTU1MDAwMDAwMDAwNjY2NjY2NjY2NjY2NjAwMDAwMDA3Nzc3Nzc3Nzc3Nzc3MDAwMDAwMDAwMDAwMDAwODg4ODg4ODg4ODAwMDAwMDAwMDAwMDAwMDAwMDA5OTk5OTk5OTk5XG52YXIgTkdfT1BUSU9OU19SRUdFWFAgPSAvXlxccyooW1xcc1xcU10rPykoPzpcXHMrYXNcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrZ3JvdXBcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrZGlzYWJsZVxccyt3aGVuXFxzKyhbXFxzXFxTXSs/KSk/XFxzK2ZvclxccysoPzooWyRcXHddWyRcXHddKil8KD86XFwoXFxzKihbJFxcd11bJFxcd10qKVxccyosXFxzKihbJFxcd11bJFxcd10qKVxccypcXCkpKVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT8kLztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDE6IHZhbHVlIGV4cHJlc3Npb24gKHZhbHVlRm4pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyOiBsYWJlbCBleHByZXNzaW9uIChkaXNwbGF5Rm4pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAzOiBncm91cCBieSBleHByZXNzaW9uIChncm91cEJ5Rm4pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA0OiBkaXNhYmxlIHdoZW4gZXhwcmVzc2lvbiAoZGlzYWJsZVdoZW5GbilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDU6IGFycmF5IGl0ZW0gdmFyaWFibGUgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gNjogb2JqZWN0IGl0ZW0ga2V5IHZhcmlhYmxlIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDc6IG9iamVjdCBpdGVtIHZhbHVlIHZhcmlhYmxlIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDg6IGNvbGxlY3Rpb24gZXhwcmVzc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gOTogdHJhY2sgYnkgZXhwcmVzc2lvblxuLyogZXNsaW50LWVuYWJsZSAqL1xuXG5cbnZhciBuZ09wdGlvbnNEaXJlY3RpdmUgPSBbJyRjb21waWxlJywgJyRkb2N1bWVudCcsICckcGFyc2UnLCBmdW5jdGlvbigkY29tcGlsZSwgJGRvY3VtZW50LCAkcGFyc2UpIHtcblxuICBmdW5jdGlvbiBwYXJzZU9wdGlvbnNFeHByZXNzaW9uKG9wdGlvbnNFeHAsIHNlbGVjdEVsZW1lbnQsIHNjb3BlKSB7XG5cbiAgICB2YXIgbWF0Y2ggPSBvcHRpb25zRXhwLm1hdGNoKE5HX09QVElPTlNfUkVHRVhQKTtcbiAgICBpZiAoIShtYXRjaCkpIHtcbiAgICAgIHRocm93IG5nT3B0aW9uc01pbkVycignaWV4cCcsXG4gICAgICAgICdFeHBlY3RlZCBleHByZXNzaW9uIGluIGZvcm0gb2YgJyArXG4gICAgICAgICdcXCdfc2VsZWN0XyAoYXMgX2xhYmVsXyk/IGZvciAoX2tleV8sKT9fdmFsdWVfIGluIF9jb2xsZWN0aW9uX1xcJycgK1xuICAgICAgICAnIGJ1dCBnb3QgXFwnezB9XFwnLiBFbGVtZW50OiB7MX0nLFxuICAgICAgICBvcHRpb25zRXhwLCBzdGFydGluZ1RhZyhzZWxlY3RFbGVtZW50KSk7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCB0aGUgcGFydHMgZnJvbSB0aGUgbmdPcHRpb25zIGV4cHJlc3Npb25cblxuICAgIC8vIFRoZSB2YXJpYWJsZSBuYW1lIGZvciB0aGUgdmFsdWUgb2YgdGhlIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb25cbiAgICB2YXIgdmFsdWVOYW1lID0gbWF0Y2hbNV0gfHwgbWF0Y2hbN107XG4gICAgLy8gVGhlIHZhcmlhYmxlIG5hbWUgZm9yIHRoZSBrZXkgb2YgdGhlIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb25cbiAgICB2YXIga2V5TmFtZSA9IG1hdGNoWzZdO1xuXG4gICAgLy8gQW4gZXhwcmVzc2lvbiB0aGF0IGdlbmVyYXRlcyB0aGUgdmlld1ZhbHVlIGZvciBhbiBvcHRpb24gaWYgdGhlcmUgaXMgYSBsYWJlbCBleHByZXNzaW9uXG4gICAgdmFyIHNlbGVjdEFzID0gLyBhcyAvLnRlc3QobWF0Y2hbMF0pICYmIG1hdGNoWzFdO1xuICAgIC8vIEFuIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIHRvIHRyYWNrIHRoZSBpZCBvZiBlYWNoIG9iamVjdCBpbiB0aGUgb3B0aW9ucyBjb2xsZWN0aW9uXG4gICAgdmFyIHRyYWNrQnkgPSBtYXRjaFs5XTtcbiAgICAvLyBBbiBleHByZXNzaW9uIHRoYXQgZ2VuZXJhdGVzIHRoZSB2aWV3VmFsdWUgZm9yIGFuIG9wdGlvbiBpZiB0aGVyZSBpcyBubyBsYWJlbCBleHByZXNzaW9uXG4gICAgdmFyIHZhbHVlRm4gPSAkcGFyc2UobWF0Y2hbMl0gPyBtYXRjaFsxXSA6IHZhbHVlTmFtZSk7XG4gICAgdmFyIHNlbGVjdEFzRm4gPSBzZWxlY3RBcyAmJiAkcGFyc2Uoc2VsZWN0QXMpO1xuICAgIHZhciB2aWV3VmFsdWVGbiA9IHNlbGVjdEFzRm4gfHwgdmFsdWVGbjtcbiAgICB2YXIgdHJhY2tCeUZuID0gdHJhY2tCeSAmJiAkcGFyc2UodHJhY2tCeSk7XG5cbiAgICAvLyBHZXQgdGhlIHZhbHVlIGJ5IHdoaWNoIHdlIGFyZSBnb2luZyB0byB0cmFjayB0aGUgb3B0aW9uXG4gICAgLy8gaWYgd2UgaGF2ZSBhIHRyYWNrRm4gdGhlbiB1c2UgdGhhdCAocGFzc2luZyBzY29wZSBhbmQgbG9jYWxzKVxuICAgIC8vIG90aGVyd2lzZSBqdXN0IGhhc2ggdGhlIGdpdmVuIHZpZXdWYWx1ZVxuICAgIHZhciBnZXRUcmFja0J5VmFsdWVGbiA9IHRyYWNrQnkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odmFsdWUsIGxvY2FscykgeyByZXR1cm4gdHJhY2tCeUZuKHNjb3BlLCBsb2NhbHMpOyB9IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEhhc2hPZlZhbHVlKHZhbHVlKSB7IHJldHVybiBoYXNoS2V5KHZhbHVlKTsgfTtcbiAgICB2YXIgZ2V0VHJhY2tCeVZhbHVlID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgcmV0dXJuIGdldFRyYWNrQnlWYWx1ZUZuKHZhbHVlLCBnZXRMb2NhbHModmFsdWUsIGtleSkpO1xuICAgIH07XG5cbiAgICB2YXIgZGlzcGxheUZuID0gJHBhcnNlKG1hdGNoWzJdIHx8IG1hdGNoWzFdKTtcbiAgICB2YXIgZ3JvdXBCeUZuID0gJHBhcnNlKG1hdGNoWzNdIHx8ICcnKTtcbiAgICB2YXIgZGlzYWJsZVdoZW5GbiA9ICRwYXJzZShtYXRjaFs0XSB8fCAnJyk7XG4gICAgdmFyIHZhbHVlc0ZuID0gJHBhcnNlKG1hdGNoWzhdKTtcblxuICAgIHZhciBsb2NhbHMgPSB7fTtcbiAgICB2YXIgZ2V0TG9jYWxzID0ga2V5TmFtZSA/IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgIGxvY2Fsc1trZXlOYW1lXSA9IGtleTtcbiAgICAgIGxvY2Fsc1t2YWx1ZU5hbWVdID0gdmFsdWU7XG4gICAgICByZXR1cm4gbG9jYWxzO1xuICAgIH0gOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgbG9jYWxzW3ZhbHVlTmFtZV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiBsb2NhbHM7XG4gICAgfTtcblxuXG4gICAgZnVuY3Rpb24gT3B0aW9uKHNlbGVjdFZhbHVlLCB2aWV3VmFsdWUsIGxhYmVsLCBncm91cCwgZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuc2VsZWN0VmFsdWUgPSBzZWxlY3RWYWx1ZTtcbiAgICAgIHRoaXMudmlld1ZhbHVlID0gdmlld1ZhbHVlO1xuICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsO1xuICAgICAgdGhpcy5ncm91cCA9IGdyb3VwO1xuICAgICAgdGhpcy5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE9wdGlvblZhbHVlc0tleXMob3B0aW9uVmFsdWVzKSB7XG4gICAgICB2YXIgb3B0aW9uVmFsdWVzS2V5cztcblxuICAgICAgaWYgKCFrZXlOYW1lICYmIGlzQXJyYXlMaWtlKG9wdGlvblZhbHVlcykpIHtcbiAgICAgICAgb3B0aW9uVmFsdWVzS2V5cyA9IG9wdGlvblZhbHVlcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlmIG9iamVjdCwgZXh0cmFjdCBrZXlzLCBpbiBlbnVtZXJhdGlvbiBvcmRlciwgdW5zb3J0ZWRcbiAgICAgICAgb3B0aW9uVmFsdWVzS2V5cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpdGVtS2V5IGluIG9wdGlvblZhbHVlcykge1xuICAgICAgICAgIGlmIChvcHRpb25WYWx1ZXMuaGFzT3duUHJvcGVydHkoaXRlbUtleSkgJiYgaXRlbUtleS5jaGFyQXQoMCkgIT09ICckJykge1xuICAgICAgICAgICAgb3B0aW9uVmFsdWVzS2V5cy5wdXNoKGl0ZW1LZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9wdGlvblZhbHVlc0tleXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRyYWNrQnk6IHRyYWNrQnksXG4gICAgICBnZXRUcmFja0J5VmFsdWU6IGdldFRyYWNrQnlWYWx1ZSxcbiAgICAgIGdldFdhdGNoYWJsZXM6ICRwYXJzZSh2YWx1ZXNGbiwgZnVuY3Rpb24ob3B0aW9uVmFsdWVzKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIGNvbGxlY3Rpb24gb2YgdGhpbmdzIHRoYXQgd2Ugd291bGQgbGlrZSB0byB3YXRjaCAod2F0Y2hlZEFycmF5KVxuICAgICAgICAvLyBzbyB0aGF0IHRoZXkgY2FuIGFsbCBiZSB3YXRjaGVkIHVzaW5nIGEgc2luZ2xlICR3YXRjaENvbGxlY3Rpb25cbiAgICAgICAgLy8gdGhhdCBvbmx5IHJ1bnMgdGhlIGhhbmRsZXIgb25jZSBpZiBhbnl0aGluZyBjaGFuZ2VzXG4gICAgICAgIHZhciB3YXRjaGVkQXJyYXkgPSBbXTtcbiAgICAgICAgb3B0aW9uVmFsdWVzID0gb3B0aW9uVmFsdWVzIHx8IFtdO1xuXG4gICAgICAgIHZhciBvcHRpb25WYWx1ZXNLZXlzID0gZ2V0T3B0aW9uVmFsdWVzS2V5cyhvcHRpb25WYWx1ZXMpO1xuICAgICAgICB2YXIgb3B0aW9uVmFsdWVzTGVuZ3RoID0gb3B0aW9uVmFsdWVzS2V5cy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBvcHRpb25WYWx1ZXNMZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICB2YXIga2V5ID0gKG9wdGlvblZhbHVlcyA9PT0gb3B0aW9uVmFsdWVzS2V5cykgPyBpbmRleCA6IG9wdGlvblZhbHVlc0tleXNbaW5kZXhdO1xuICAgICAgICAgIHZhciB2YWx1ZSA9IG9wdGlvblZhbHVlc1trZXldO1xuXG4gICAgICAgICAgdmFyIGxvY2FscyA9IGdldExvY2Fscyh2YWx1ZSwga2V5KTtcbiAgICAgICAgICB2YXIgc2VsZWN0VmFsdWUgPSBnZXRUcmFja0J5VmFsdWVGbih2YWx1ZSwgbG9jYWxzKTtcbiAgICAgICAgICB3YXRjaGVkQXJyYXkucHVzaChzZWxlY3RWYWx1ZSk7XG5cbiAgICAgICAgICAvLyBPbmx5IG5lZWQgdG8gd2F0Y2ggdGhlIGRpc3BsYXlGbiBpZiB0aGVyZSBpcyBhIHNwZWNpZmljIGxhYmVsIGV4cHJlc3Npb25cbiAgICAgICAgICBpZiAobWF0Y2hbMl0gfHwgbWF0Y2hbMV0pIHtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IGRpc3BsYXlGbihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgICAgIHdhdGNoZWRBcnJheS5wdXNoKGxhYmVsKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBPbmx5IG5lZWQgdG8gd2F0Y2ggdGhlIGRpc2FibGVXaGVuRm4gaWYgdGhlcmUgaXMgYSBzcGVjaWZpYyBkaXNhYmxlIGV4cHJlc3Npb25cbiAgICAgICAgICBpZiAobWF0Y2hbNF0pIHtcbiAgICAgICAgICAgIHZhciBkaXNhYmxlV2hlbiA9IGRpc2FibGVXaGVuRm4oc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgICB3YXRjaGVkQXJyYXkucHVzaChkaXNhYmxlV2hlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3YXRjaGVkQXJyYXk7XG4gICAgICB9KSxcblxuICAgICAgZ2V0T3B0aW9uczogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIG9wdGlvbkl0ZW1zID0gW107XG4gICAgICAgIHZhciBzZWxlY3RWYWx1ZU1hcCA9IHt9O1xuXG4gICAgICAgIC8vIFRoZSBvcHRpb24gdmFsdWVzIHdlcmUgYWxyZWFkeSBjb21wdXRlZCBpbiB0aGUgYGdldFdhdGNoYWJsZXNgIGZuLFxuICAgICAgICAvLyB3aGljaCBtdXN0IGhhdmUgYmVlbiBjYWxsZWQgdG8gdHJpZ2dlciBgZ2V0T3B0aW9uc2BcbiAgICAgICAgdmFyIG9wdGlvblZhbHVlcyA9IHZhbHVlc0ZuKHNjb3BlKSB8fCBbXTtcbiAgICAgICAgdmFyIG9wdGlvblZhbHVlc0tleXMgPSBnZXRPcHRpb25WYWx1ZXNLZXlzKG9wdGlvblZhbHVlcyk7XG4gICAgICAgIHZhciBvcHRpb25WYWx1ZXNMZW5ndGggPSBvcHRpb25WYWx1ZXNLZXlzLmxlbmd0aDtcblxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgb3B0aW9uVmFsdWVzTGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgdmFyIGtleSA9IChvcHRpb25WYWx1ZXMgPT09IG9wdGlvblZhbHVlc0tleXMpID8gaW5kZXggOiBvcHRpb25WYWx1ZXNLZXlzW2luZGV4XTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBvcHRpb25WYWx1ZXNba2V5XTtcbiAgICAgICAgICB2YXIgbG9jYWxzID0gZ2V0TG9jYWxzKHZhbHVlLCBrZXkpO1xuICAgICAgICAgIHZhciB2aWV3VmFsdWUgPSB2aWV3VmFsdWVGbihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgICB2YXIgc2VsZWN0VmFsdWUgPSBnZXRUcmFja0J5VmFsdWVGbih2aWV3VmFsdWUsIGxvY2Fscyk7XG4gICAgICAgICAgdmFyIGxhYmVsID0gZGlzcGxheUZuKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgIHZhciBncm91cCA9IGdyb3VwQnlGbihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgICB2YXIgZGlzYWJsZWQgPSBkaXNhYmxlV2hlbkZuKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgIHZhciBvcHRpb25JdGVtID0gbmV3IE9wdGlvbihzZWxlY3RWYWx1ZSwgdmlld1ZhbHVlLCBsYWJlbCwgZ3JvdXAsIGRpc2FibGVkKTtcblxuICAgICAgICAgIG9wdGlvbkl0ZW1zLnB1c2gob3B0aW9uSXRlbSk7XG4gICAgICAgICAgc2VsZWN0VmFsdWVNYXBbc2VsZWN0VmFsdWVdID0gb3B0aW9uSXRlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXRlbXM6IG9wdGlvbkl0ZW1zLFxuICAgICAgICAgIHNlbGVjdFZhbHVlTWFwOiBzZWxlY3RWYWx1ZU1hcCxcbiAgICAgICAgICBnZXRPcHRpb25Gcm9tVmlld1ZhbHVlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdFZhbHVlTWFwW2dldFRyYWNrQnlWYWx1ZSh2YWx1ZSldO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbjogZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgdmlld1ZhbHVlIGNvdWxkIGJlIGFuIG9iamVjdCB0aGF0IG1heSBiZSBtdXRhdGVkIGJ5IHRoZSBhcHBsaWNhdGlvbixcbiAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gbWFrZSBhIGNvcHkgYW5kIG5vdCByZXR1cm4gdGhlIHJlZmVyZW5jZSB0byB0aGUgdmFsdWUgb24gdGhlIG9wdGlvbi5cbiAgICAgICAgICAgIHJldHVybiB0cmFja0J5ID8gY29weShvcHRpb24udmlld1ZhbHVlKSA6IG9wdGlvbi52aWV3VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuXG4gIC8vIFN1cHBvcnQ6IElFIDkgb25seVxuICAvLyBXZSBjYW4ndCBqdXN0IGpxTGl0ZSgnPG9wdGlvbj4nKSBzaW5jZSBqcUxpdGUgaXMgbm90IHNtYXJ0IGVub3VnaFxuICAvLyB0byBjcmVhdGUgaXQgaW4gPHNlbGVjdD4gYW5kIElFIGJhcmZzIG90aGVyd2lzZS5cbiAgdmFyIG9wdGlvblRlbXBsYXRlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpLFxuICAgICAgb3B0R3JvdXBUZW1wbGF0ZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRncm91cCcpO1xuXG4gICAgZnVuY3Rpb24gbmdPcHRpb25zUG9zdExpbmsoc2NvcGUsIHNlbGVjdEVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG5cbiAgICAgIHZhciBzZWxlY3RDdHJsID0gY3RybHNbMF07XG4gICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcbiAgICAgIHZhciBtdWx0aXBsZSA9IGF0dHIubXVsdGlwbGU7XG5cbiAgICAgIC8vIFRoZSBlbXB0eU9wdGlvbiBhbGxvd3MgdGhlIGFwcGxpY2F0aW9uIGRldmVsb3BlciB0byBwcm92aWRlIHRoZWlyIG93biBjdXN0b20gXCJlbXB0eVwiXG4gICAgICAvLyBvcHRpb24gd2hlbiB0aGUgdmlld1ZhbHVlIGRvZXMgbm90IG1hdGNoIGFueSBvZiB0aGUgb3B0aW9uIHZhbHVlcy5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBjaGlsZHJlbiA9IHNlbGVjdEVsZW1lbnQuY2hpbGRyZW4oKSwgaWkgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIGlmIChjaGlsZHJlbltpXS52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICBzZWxlY3RDdHJsLmhhc0VtcHR5T3B0aW9uID0gdHJ1ZTtcbiAgICAgICAgICBzZWxlY3RDdHJsLmVtcHR5T3B0aW9uID0gY2hpbGRyZW4uZXEoaSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGVtcHR5IG9wdGlvbiB3aWxsIGJlIGNvbXBpbGVkIGFuZCByZW5kZXJlZCBiZWZvcmUgd2UgZmlyc3QgZ2VuZXJhdGUgdGhlIG9wdGlvbnNcbiAgICAgIHNlbGVjdEVsZW1lbnQuZW1wdHkoKTtcblxuICAgICAgdmFyIHByb3ZpZGVkRW1wdHlPcHRpb24gPSAhIXNlbGVjdEN0cmwuZW1wdHlPcHRpb247XG5cbiAgICAgIHZhciB1bmtub3duT3B0aW9uID0ganFMaXRlKG9wdGlvblRlbXBsYXRlLmNsb25lTm9kZShmYWxzZSkpO1xuICAgICAgdW5rbm93bk9wdGlvbi52YWwoJz8nKTtcblxuICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICB2YXIgbmdPcHRpb25zID0gcGFyc2VPcHRpb25zRXhwcmVzc2lvbihhdHRyLm5nT3B0aW9ucywgc2VsZWN0RWxlbWVudCwgc2NvcGUpO1xuICAgICAgLy8gVGhpcyBzdG9yZXMgdGhlIG5ld2x5IGNyZWF0ZWQgb3B0aW9ucyBiZWZvcmUgdGhleSBhcmUgYXBwZW5kZWQgdG8gdGhlIHNlbGVjdC5cbiAgICAgIC8vIFNpbmNlIHRoZSBjb250ZW50cyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBmcmFnbWVudCB3aGVuIGl0IGlzIGFwcGVuZGVkLFxuICAgICAgLy8gd2Ugb25seSBuZWVkIHRvIGNyZWF0ZSBpdCBvbmNlLlxuICAgICAgdmFyIGxpc3RGcmFnbWVudCA9ICRkb2N1bWVudFswXS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgIC8vIE92ZXJ3cml0ZSB0aGUgaW1wbGVtZW50YXRpb24uIG5nT3B0aW9ucyBkb2Vzbid0IHVzZSBoYXNoZXNcbiAgICAgIHNlbGVjdEN0cmwuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgcmV0dXJuICc/JztcbiAgICAgIH07XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgY29udHJvbGxlciBtZXRob2RzIGZvciBtdWx0aXBsZSBzZWxlY3RhYmxlIG9wdGlvbnNcbiAgICAgIGlmICghbXVsdGlwbGUpIHtcblxuICAgICAgICBzZWxlY3RDdHJsLndyaXRlVmFsdWUgPSBmdW5jdGlvbiB3cml0ZU5nT3B0aW9uc1ZhbHVlKHZhbHVlKSB7XG4gICAgICAgICAgLy8gVGhlIG9wdGlvbnMgbWlnaHQgbm90IGJlIGRlZmluZWQgeWV0IHdoZW4gbmdNb2RlbCB0cmllcyB0byByZW5kZXJcbiAgICAgICAgICBpZiAoIW9wdGlvbnMpIHJldHVybjtcblxuICAgICAgICAgIHZhciBzZWxlY3RlZE9wdGlvbiA9IHNlbGVjdEVsZW1lbnRbMF0ub3B0aW9uc1tzZWxlY3RFbGVtZW50WzBdLnNlbGVjdGVkSW5kZXhdO1xuICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zLmdldE9wdGlvbkZyb21WaWV3VmFsdWUodmFsdWUpO1xuXG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHJlbW92ZSB0aGUgc2VsZWN0ZWQgYXR0cmlidXRlIGZyb20gdGhlIHByZXZpb3VzbHkgc2VsZWN0ZWQgb3B0aW9uXG4gICAgICAgICAgLy8gT3RoZXJ3aXNlLCBzY3JlZW4gcmVhZGVycyBtaWdodCBnZXQgY29uZnVzZWRcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRPcHRpb24pIHNlbGVjdGVkT3B0aW9uLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcblxuICAgICAgICAgIGlmIChvcHRpb24pIHtcbiAgICAgICAgICAgIC8vIERvbid0IHVwZGF0ZSB0aGUgb3B0aW9uIHdoZW4gaXQgaXMgYWxyZWFkeSBzZWxlY3RlZC5cbiAgICAgICAgICAgIC8vIEZvciBleGFtcGxlLCB0aGUgYnJvd3NlciB3aWxsIHNlbGVjdCB0aGUgZmlyc3Qgb3B0aW9uIGJ5IGRlZmF1bHQuIEluIHRoYXQgY2FzZSxcbiAgICAgICAgICAgIC8vIG1vc3QgcHJvcGVydGllcyBhcmUgc2V0IGF1dG9tYXRpY2FsbHkgLSBleGNlcHQgdGhlIGBzZWxlY3RlZGAgYXR0cmlidXRlLCB3aGljaCB3ZVxuICAgICAgICAgICAgLy8gc2V0IGFsd2F5c1xuXG4gICAgICAgICAgICBpZiAoc2VsZWN0RWxlbWVudFswXS52YWx1ZSAhPT0gb3B0aW9uLnNlbGVjdFZhbHVlKSB7XG4gICAgICAgICAgICAgIHNlbGVjdEN0cmwucmVtb3ZlVW5rbm93bk9wdGlvbigpO1xuXG4gICAgICAgICAgICAgIHNlbGVjdEVsZW1lbnRbMF0udmFsdWUgPSBvcHRpb24uc2VsZWN0VmFsdWU7XG4gICAgICAgICAgICAgIG9wdGlvbi5lbGVtZW50LnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3B0aW9uLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxlY3RDdHJsLnNlbGVjdFVua25vd25PckVtcHR5T3B0aW9uKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0Q3RybC5yZWFkVmFsdWUgPSBmdW5jdGlvbiByZWFkTmdPcHRpb25zVmFsdWUoKSB7XG5cbiAgICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25zLnNlbGVjdFZhbHVlTWFwW3NlbGVjdEVsZW1lbnQudmFsKCldO1xuXG4gICAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uICYmICFzZWxlY3RlZE9wdGlvbi5kaXNhYmxlZCkge1xuICAgICAgICAgICAgc2VsZWN0Q3RybC51bnNlbGVjdEVtcHR5T3B0aW9uKCk7XG4gICAgICAgICAgICBzZWxlY3RDdHJsLnJlbW92ZVVua25vd25PcHRpb24oKTtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmdldFZpZXdWYWx1ZUZyb21PcHRpb24oc2VsZWN0ZWRPcHRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJZiB3ZSBhcmUgdXNpbmcgYHRyYWNrIGJ5YCB0aGVuIHdlIG11c3Qgd2F0Y2ggdGhlIHRyYWNrZWQgdmFsdWUgb24gdGhlIG1vZGVsXG4gICAgICAgIC8vIHNpbmNlIG5nTW9kZWwgb25seSB3YXRjaGVzIGZvciBvYmplY3QgaWRlbnRpdHkgY2hhbmdlXG4gICAgICAgIC8vIEZJWE1FOiBXaGVuIGEgdXNlciBzZWxlY3RzIGFuIG9wdGlvbiwgdGhpcyB3YXRjaCB3aWxsIGZpcmUgbmVlZGxlc3NseVxuICAgICAgICBpZiAobmdPcHRpb25zLnRyYWNrQnkpIHtcbiAgICAgICAgICBzY29wZS4kd2F0Y2goXG4gICAgICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIG5nT3B0aW9ucy5nZXRUcmFja0J5VmFsdWUobmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSk7IH0sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHsgbmdNb2RlbEN0cmwuJHJlbmRlcigpOyB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIHNlbGVjdEN0cmwud3JpdGVWYWx1ZSA9IGZ1bmN0aW9uIHdyaXRlTmdPcHRpb25zTXVsdGlwbGUodmFsdWVzKSB7XG4gICAgICAgICAgLy8gVGhlIG9wdGlvbnMgbWlnaHQgbm90IGJlIGRlZmluZWQgeWV0IHdoZW4gbmdNb2RlbCB0cmllcyB0byByZW5kZXJcbiAgICAgICAgICBpZiAoIW9wdGlvbnMpIHJldHVybjtcblxuICAgICAgICAgIC8vIE9ubHkgc2V0IGA8b3B0aW9uPi5zZWxlY3RlZGAgaWYgbmVjZXNzYXJ5LCBpbiBvcmRlciB0byBwcmV2ZW50IHNvbWUgYnJvd3NlcnMgZnJvbVxuICAgICAgICAgIC8vIHNjcm9sbGluZyB0byBgPG9wdGlvbj5gIGVsZW1lbnRzIHRoYXQgYXJlIG91dHNpZGUgdGhlIGA8c2VsZWN0PmAgZWxlbWVudCdzIHZpZXdwb3J0LlxuICAgICAgICAgIHZhciBzZWxlY3RlZE9wdGlvbnMgPSB2YWx1ZXMgJiYgdmFsdWVzLm1hcChnZXRBbmRVcGRhdGVTZWxlY3RlZE9wdGlvbikgfHwgW107XG5cbiAgICAgICAgICBvcHRpb25zLml0ZW1zLmZvckVhY2goZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9uLmVsZW1lbnQuc2VsZWN0ZWQgJiYgIWluY2x1ZGVzKHNlbGVjdGVkT3B0aW9ucywgb3B0aW9uKSkge1xuICAgICAgICAgICAgICBvcHRpb24uZWxlbWVudC5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgc2VsZWN0Q3RybC5yZWFkVmFsdWUgPSBmdW5jdGlvbiByZWFkTmdPcHRpb25zTXVsdGlwbGUoKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkVmFsdWVzID0gc2VsZWN0RWxlbWVudC52YWwoKSB8fCBbXSxcbiAgICAgICAgICAgICAgc2VsZWN0aW9ucyA9IFtdO1xuXG4gICAgICAgICAgZm9yRWFjaChzZWxlY3RlZFZhbHVlcywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zLnNlbGVjdFZhbHVlTWFwW3ZhbHVlXTtcbiAgICAgICAgICAgIGlmIChvcHRpb24gJiYgIW9wdGlvbi5kaXNhYmxlZCkgc2VsZWN0aW9ucy5wdXNoKG9wdGlvbnMuZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbihvcHRpb24pKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBzZWxlY3Rpb25zO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBgdHJhY2sgYnlgIHRoZW4gd2UgbXVzdCB3YXRjaCB0aGVzZSB0cmFja2VkIHZhbHVlcyBvbiB0aGUgbW9kZWxcbiAgICAgICAgLy8gc2luY2UgbmdNb2RlbCBvbmx5IHdhdGNoZXMgZm9yIG9iamVjdCBpZGVudGl0eSBjaGFuZ2VcbiAgICAgICAgaWYgKG5nT3B0aW9ucy50cmFja0J5KSB7XG5cbiAgICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkobmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUubWFwKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5nT3B0aW9ucy5nZXRUcmFja0J5VmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm92aWRlZEVtcHR5T3B0aW9uKSB7XG5cbiAgICAgICAgLy8gY29tcGlsZSB0aGUgZWxlbWVudCBzaW5jZSB0aGVyZSBtaWdodCBiZSBiaW5kaW5ncyBpbiBpdFxuICAgICAgICAkY29tcGlsZShzZWxlY3RDdHJsLmVtcHR5T3B0aW9uKShzY29wZSk7XG5cbiAgICAgICAgc2VsZWN0RWxlbWVudC5wcmVwZW5kKHNlbGVjdEN0cmwuZW1wdHlPcHRpb24pO1xuXG4gICAgICAgIGlmIChzZWxlY3RDdHJsLmVtcHR5T3B0aW9uWzBdLm5vZGVUeXBlID09PSBOT0RFX1RZUEVfQ09NTUVOVCkge1xuICAgICAgICAgIC8vIFRoaXMgbWVhbnMgdGhlIGVtcHR5IG9wdGlvbiBoYXMgY3VycmVudGx5IG5vIGFjdHVhbCBET00gbm9kZSwgcHJvYmFibHkgYmVjYXVzZVxuICAgICAgICAgIC8vIGl0IGhhcyBiZWVuIG1vZGlmaWVkIGJ5IGEgdHJhbnNjbHVzaW9uIGRpcmVjdGl2ZS5cbiAgICAgICAgICBzZWxlY3RDdHJsLmhhc0VtcHR5T3B0aW9uID0gZmFsc2U7XG5cbiAgICAgICAgICAvLyBSZWRlZmluZSB0aGUgcmVnaXN0ZXJPcHRpb24gZnVuY3Rpb24sIHdoaWNoIHdpbGwgY2F0Y2hcbiAgICAgICAgICAvLyBvcHRpb25zIHRoYXQgYXJlIGFkZGVkIGJ5IG5nSWYgZXRjLiAocmVuZGVyaW5nIG9mIHRoZSBub2RlIGlzIGFzeW5jIGJlY2F1c2Ugb2ZcbiAgICAgICAgICAvLyBsYXp5IHRyYW5zY2x1c2lvbilcbiAgICAgICAgICBzZWxlY3RDdHJsLnJlZ2lzdGVyT3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uU2NvcGUsIG9wdGlvbkVsKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9uRWwudmFsKCkgPT09ICcnKSB7XG4gICAgICAgICAgICAgIHNlbGVjdEN0cmwuaGFzRW1wdHlPcHRpb24gPSB0cnVlO1xuICAgICAgICAgICAgICBzZWxlY3RDdHJsLmVtcHR5T3B0aW9uID0gb3B0aW9uRWw7XG4gICAgICAgICAgICAgIHNlbGVjdEN0cmwuZW1wdHlPcHRpb24ucmVtb3ZlQ2xhc3MoJ25nLXNjb3BlJyk7XG4gICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgbmV3IGVtcHR5IG9wdGlvbiBpcyBzZWxlY3RlZCBpZiBwcmV2aW91c2x5IG5vIG9wdGlvbiB3YXMgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuXG4gICAgICAgICAgICAgIG9wdGlvbkVsLm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBuZWVkc1JlcmVuZGVyID0gc2VsZWN0Q3RybC4kaXNFbXB0eU9wdGlvblNlbGVjdGVkKCk7XG5cbiAgICAgICAgICAgICAgICBzZWxlY3RDdHJsLmhhc0VtcHR5T3B0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2VsZWN0Q3RybC5lbXB0eU9wdGlvbiA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICAgIGlmIChuZWVkc1JlcmVuZGVyKSBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyByZW1vdmUgdGhlIGNsYXNzLCB3aGljaCBpcyBhZGRlZCBhdXRvbWF0aWNhbGx5IGJlY2F1c2Ugd2UgcmVjb21waWxlIHRoZSBlbGVtZW50IGFuZCBpdFxuICAgICAgICAgIC8vIGJlY29tZXMgdGhlIGNvbXBpbGF0aW9uIHJvb3RcbiAgICAgICAgICBzZWxlY3RDdHJsLmVtcHR5T3B0aW9uLnJlbW92ZUNsYXNzKCduZy1zY29wZScpO1xuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgLy8gV2Ugd2lsbCByZS1yZW5kZXIgdGhlIG9wdGlvbiBlbGVtZW50cyBpZiB0aGUgb3B0aW9uIHZhbHVlcyBvciBsYWJlbHMgY2hhbmdlXG4gICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKG5nT3B0aW9ucy5nZXRXYXRjaGFibGVzLCB1cGRhdGVPcHRpb25zKTtcblxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgICAgIGZ1bmN0aW9uIGFkZE9wdGlvbkVsZW1lbnQob3B0aW9uLCBwYXJlbnQpIHtcbiAgICAgICAgdmFyIG9wdGlvbkVsZW1lbnQgPSBvcHRpb25UZW1wbGF0ZS5jbG9uZU5vZGUoZmFsc2UpO1xuICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQob3B0aW9uRWxlbWVudCk7XG4gICAgICAgIHVwZGF0ZU9wdGlvbkVsZW1lbnQob3B0aW9uLCBvcHRpb25FbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0QW5kVXBkYXRlU2VsZWN0ZWRPcHRpb24odmlld1ZhbHVlKSB7XG4gICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zLmdldE9wdGlvbkZyb21WaWV3VmFsdWUodmlld1ZhbHVlKTtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBvcHRpb24gJiYgb3B0aW9uLmVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgIWVsZW1lbnQuc2VsZWN0ZWQpIGVsZW1lbnQuc2VsZWN0ZWQgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiBvcHRpb247XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbkVsZW1lbnQob3B0aW9uLCBlbGVtZW50KSB7XG4gICAgICAgIG9wdGlvbi5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgZWxlbWVudC5kaXNhYmxlZCA9IG9wdGlvbi5kaXNhYmxlZDtcbiAgICAgICAgLy8gU3VwcG9ydDogSUUgMTEgb25seSwgRWRnZSAxMi0xMyBvbmx5XG4gICAgICAgIC8vIE5PVEU6IFRoZSBsYWJlbCBtdXN0IGJlIHNldCBiZWZvcmUgdGhlIHZhbHVlLCBvdGhlcndpc2UgSUUgMTEgJiBFZGdlIGNyZWF0ZSB1bnJlc3BvbnNpdmVcbiAgICAgICAgLy8gc2VsZWN0cyBpbiBjZXJ0YWluIGNpcmN1bXN0YW5jZXMgd2hlbiBtdWx0aXBsZSBzZWxlY3RzIGFyZSBuZXh0IHRvIGVhY2ggb3RoZXIgYW5kIGRpc3BsYXlcbiAgICAgICAgLy8gdGhlIG9wdGlvbiBsaXN0IGluIGxpc3Rib3ggc3R5bGUsIGkuZS4gdGhlIHNlbGVjdCBpcyBbbXVsdGlwbGVdLCBvciBzcGVjaWZpZXMgYSBbc2l6ZV0uXG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xMTMxNCBmb3IgbW9yZSBpbmZvLlxuICAgICAgICAvLyBUaGlzIGlzIHVuZm9ydHVuYXRlbHkgdW50ZXN0YWJsZSB3aXRoIHVuaXQgLyBlMmUgdGVzdHNcbiAgICAgICAgaWYgKG9wdGlvbi5sYWJlbCAhPT0gZWxlbWVudC5sYWJlbCkge1xuICAgICAgICAgIGVsZW1lbnQubGFiZWwgPSBvcHRpb24ubGFiZWw7XG4gICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IG9wdGlvbi5sYWJlbDtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50LnZhbHVlID0gb3B0aW9uLnNlbGVjdFZhbHVlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKCkge1xuICAgICAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IG9wdGlvbnMgJiYgc2VsZWN0Q3RybC5yZWFkVmFsdWUoKTtcblxuICAgICAgICAvLyBXZSBtdXN0IHJlbW92ZSBhbGwgY3VycmVudCBvcHRpb25zLCBidXQgY2Fubm90IHNpbXBseSBzZXQgaW5uZXJIVE1MID0gbnVsbFxuICAgICAgICAvLyBzaW5jZSB0aGUgcHJvdmlkZWRFbXB0eU9wdGlvbiBtaWdodCBoYXZlIGFuIG5nSWYgb24gaXQgdGhhdCBpbnNlcnRzIGNvbW1lbnRzIHdoaWNoIHdlXG4gICAgICAgIC8vIG11c3QgcHJlc2VydmUuXG4gICAgICAgIC8vIEluc3RlYWQsIGl0ZXJhdGUgb3ZlciB0aGUgY3VycmVudCBvcHRpb24gZWxlbWVudHMgYW5kIHJlbW92ZSB0aGVtIG9yIHRoZWlyIG9wdGdyb3VwXG4gICAgICAgIC8vIHBhcmVudHNcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSBvcHRpb25zLml0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0gb3B0aW9ucy5pdGVtc1tpXTtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQob3B0aW9uLmdyb3VwKSkge1xuICAgICAgICAgICAgICBqcUxpdGVSZW1vdmUob3B0aW9uLmVsZW1lbnQucGFyZW50Tm9kZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBqcUxpdGVSZW1vdmUob3B0aW9uLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBuZ09wdGlvbnMuZ2V0T3B0aW9ucygpO1xuXG4gICAgICAgIHZhciBncm91cEVsZW1lbnRNYXAgPSB7fTtcblxuICAgICAgICBvcHRpb25zLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gYWRkT3B0aW9uKG9wdGlvbikge1xuICAgICAgICAgIHZhciBncm91cEVsZW1lbnQ7XG5cbiAgICAgICAgICBpZiAoaXNEZWZpbmVkKG9wdGlvbi5ncm91cCkpIHtcblxuICAgICAgICAgICAgLy8gVGhpcyBvcHRpb24gaXMgdG8gbGl2ZSBpbiBhIGdyb3VwXG4gICAgICAgICAgICAvLyBTZWUgaWYgd2UgaGF2ZSBhbHJlYWR5IGNyZWF0ZWQgdGhpcyBncm91cFxuICAgICAgICAgICAgZ3JvdXBFbGVtZW50ID0gZ3JvdXBFbGVtZW50TWFwW29wdGlvbi5ncm91cF07XG5cbiAgICAgICAgICAgIGlmICghZ3JvdXBFbGVtZW50KSB7XG5cbiAgICAgICAgICAgICAgZ3JvdXBFbGVtZW50ID0gb3B0R3JvdXBUZW1wbGF0ZS5jbG9uZU5vZGUoZmFsc2UpO1xuICAgICAgICAgICAgICBsaXN0RnJhZ21lbnQuYXBwZW5kQ2hpbGQoZ3JvdXBFbGVtZW50KTtcblxuICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGxhYmVsIG9uIHRoZSBncm91cCBlbGVtZW50XG4gICAgICAgICAgICAgIC8vIFwibnVsbFwiIGlzIHNwZWNpYWwgY2FzZWQgYmVjYXVzZSBvZiBTYWZhcmlcbiAgICAgICAgICAgICAgZ3JvdXBFbGVtZW50LmxhYmVsID0gb3B0aW9uLmdyb3VwID09PSBudWxsID8gJ251bGwnIDogb3B0aW9uLmdyb3VwO1xuXG4gICAgICAgICAgICAgIC8vIFN0b3JlIGl0IGZvciB1c2UgbGF0ZXJcbiAgICAgICAgICAgICAgZ3JvdXBFbGVtZW50TWFwW29wdGlvbi5ncm91cF0gPSBncm91cEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFkZE9wdGlvbkVsZW1lbnQob3B0aW9uLCBncm91cEVsZW1lbnQpO1xuXG4gICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgLy8gVGhpcyBvcHRpb24gaXMgbm90IGluIGEgZ3JvdXBcbiAgICAgICAgICAgIGFkZE9wdGlvbkVsZW1lbnQob3B0aW9uLCBsaXN0RnJhZ21lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2VsZWN0RWxlbWVudFswXS5hcHBlbmRDaGlsZChsaXN0RnJhZ21lbnQpO1xuXG4gICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcblxuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGR1ZSB0byB0aGUgdXBkYXRlIHRvIHRoZSBvcHRpb25zXG4gICAgICAgIGlmICghbmdNb2RlbEN0cmwuJGlzRW1wdHkocHJldmlvdXNWYWx1ZSkpIHtcbiAgICAgICAgICB2YXIgbmV4dFZhbHVlID0gc2VsZWN0Q3RybC5yZWFkVmFsdWUoKTtcbiAgICAgICAgICB2YXIgaXNOb3RQcmltaXRpdmUgPSBuZ09wdGlvbnMudHJhY2tCeSB8fCBtdWx0aXBsZTtcbiAgICAgICAgICBpZiAoaXNOb3RQcmltaXRpdmUgPyAhZXF1YWxzKHByZXZpb3VzVmFsdWUsIG5leHRWYWx1ZSkgOiBwcmV2aW91c1ZhbHVlICE9PSBuZXh0VmFsdWUpIHtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUobmV4dFZhbHVlKTtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICByZXF1aXJlOiBbJ3NlbGVjdCcsICduZ01vZGVsJ10sXG4gICAgbGluazoge1xuICAgICAgcHJlOiBmdW5jdGlvbiBuZ09wdGlvbnNQcmVMaW5rKHNjb3BlLCBzZWxlY3RFbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgICAgICAvLyBEZWFjdGl2YXRlIHRoZSBTZWxlY3RDb250cm9sbGVyLnJlZ2lzdGVyIG1ldGhvZCB0byBwcmV2ZW50XG4gICAgICAgIC8vIG9wdGlvbiBkaXJlY3RpdmVzIGZyb20gYWNjaWRlbnRhbGx5IHJlZ2lzdGVyaW5nIHRoZW1zZWx2ZXNcbiAgICAgICAgLy8gKGFuZCB1bndhbnRlZCAkZGVzdHJveSBoYW5kbGVycyBldGMuKVxuICAgICAgICBjdHJsc1swXS5yZWdpc3Rlck9wdGlvbiA9IG5vb3A7XG4gICAgICB9LFxuICAgICAgcG9zdDogbmdPcHRpb25zUG9zdExpbmtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1BsdXJhbGl6ZVxuICogQHJlc3RyaWN0IEVBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgbmdQbHVyYWxpemVgIGlzIGEgZGlyZWN0aXZlIHRoYXQgZGlzcGxheXMgbWVzc2FnZXMgYWNjb3JkaW5nIHRvIGVuLVVTIGxvY2FsaXphdGlvbiBydWxlcy5cbiAqIFRoZXNlIHJ1bGVzIGFyZSBidW5kbGVkIHdpdGggYW5ndWxhci5qcywgYnV0IGNhbiBiZSBvdmVycmlkZGVuXG4gKiAoc2VlIHtAbGluayBndWlkZS9pMThuIEFuZ3VsYXJKUyBpMThufSBkZXYgZ3VpZGUpLiBZb3UgY29uZmlndXJlIG5nUGx1cmFsaXplIGRpcmVjdGl2ZVxuICogYnkgc3BlY2lmeWluZyB0aGUgbWFwcGluZ3MgYmV0d2VlblxuICogW3BsdXJhbCBjYXRlZ29yaWVzXShodHRwOi8vdW5pY29kZS5vcmcvcmVwb3MvY2xkci10bXAvdHJ1bmsvZGlmZi9zdXBwbGVtZW50YWwvbGFuZ3VhZ2VfcGx1cmFsX3J1bGVzLmh0bWwpXG4gKiBhbmQgdGhlIHN0cmluZ3MgdG8gYmUgZGlzcGxheWVkLlxuICpcbiAqICMjIFBsdXJhbCBjYXRlZ29yaWVzIGFuZCBleHBsaWNpdCBudW1iZXIgcnVsZXNcbiAqIFRoZXJlIGFyZSB0d29cbiAqIFtwbHVyYWwgY2F0ZWdvcmllc10oaHR0cDovL3VuaWNvZGUub3JnL3JlcG9zL2NsZHItdG1wL3RydW5rL2RpZmYvc3VwcGxlbWVudGFsL2xhbmd1YWdlX3BsdXJhbF9ydWxlcy5odG1sKVxuICogaW4gQW5ndWxhckpTJ3MgZGVmYXVsdCBlbi1VUyBsb2NhbGU6IFwib25lXCIgYW5kIFwib3RoZXJcIi5cbiAqXG4gKiBXaGlsZSBhIHBsdXJhbCBjYXRlZ29yeSBtYXkgbWF0Y2ggbWFueSBudW1iZXJzIChmb3IgZXhhbXBsZSwgaW4gZW4tVVMgbG9jYWxlLCBcIm90aGVyXCIgY2FuIG1hdGNoXG4gKiBhbnkgbnVtYmVyIHRoYXQgaXMgbm90IDEpLCBhbiBleHBsaWNpdCBudW1iZXIgcnVsZSBjYW4gb25seSBtYXRjaCBvbmUgbnVtYmVyLiBGb3IgZXhhbXBsZSwgdGhlXG4gKiBleHBsaWNpdCBudW1iZXIgcnVsZSBmb3IgXCIzXCIgbWF0Y2hlcyB0aGUgbnVtYmVyIDMuIFRoZXJlIGFyZSBleGFtcGxlcyBvZiBwbHVyYWwgY2F0ZWdvcmllc1xuICogYW5kIGV4cGxpY2l0IG51bWJlciBydWxlcyB0aHJvdWdob3V0IHRoZSByZXN0IG9mIHRoaXMgZG9jdW1lbnRhdGlvbi5cbiAqXG4gKiAjIyBDb25maWd1cmluZyBuZ1BsdXJhbGl6ZVxuICogWW91IGNvbmZpZ3VyZSBuZ1BsdXJhbGl6ZSBieSBwcm92aWRpbmcgMiBhdHRyaWJ1dGVzOiBgY291bnRgIGFuZCBgd2hlbmAuXG4gKiBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbiBvcHRpb25hbCBhdHRyaWJ1dGUsIGBvZmZzZXRgLlxuICpcbiAqIFRoZSB2YWx1ZSBvZiB0aGUgYGNvdW50YCBhdHRyaWJ1dGUgY2FuIGJlIGVpdGhlciBhIHN0cmluZyBvciBhbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvblxuICogQW5ndWxhckpTIGV4cHJlc3Npb259OyB0aGVzZSBhcmUgZXZhbHVhdGVkIG9uIHRoZSBjdXJyZW50IHNjb3BlIGZvciBpdHMgYm91bmQgdmFsdWUuXG4gKlxuICogVGhlIGB3aGVuYCBhdHRyaWJ1dGUgc3BlY2lmaWVzIHRoZSBtYXBwaW5ncyBiZXR3ZWVuIHBsdXJhbCBjYXRlZ29yaWVzIGFuZCB0aGUgYWN0dWFsXG4gKiBzdHJpbmcgdG8gYmUgZGlzcGxheWVkLiBUaGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZSBzaG91bGQgYmUgYSBKU09OIG9iamVjdC5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIGNvbmZpZ3VyZSBuZ1BsdXJhbGl6ZTpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIlxuICAgICAgICAgICAgICAgICB3aGVuPVwieycwJzogJ05vYm9keSBpcyB2aWV3aW5nLicsXG4gKiAgICAgICAgICAgICAgICAgICAgICAnb25lJzogJzEgcGVyc29uIGlzIHZpZXdpbmcuJyxcbiAqICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7fSBwZW9wbGUgYXJlIHZpZXdpbmcuJ31cIj5cbiAqIDwvbmctcGx1cmFsaXplPlxuICpgYGBcbiAqXG4gKiBJbiB0aGUgZXhhbXBsZSwgYFwiMDogTm9ib2R5IGlzIHZpZXdpbmcuXCJgIGlzIGFuIGV4cGxpY2l0IG51bWJlciBydWxlLiBJZiB5b3UgZGlkIG5vdFxuICogc3BlY2lmeSB0aGlzIHJ1bGUsIDAgd291bGQgYmUgbWF0Y2hlZCB0byB0aGUgXCJvdGhlclwiIGNhdGVnb3J5IGFuZCBcIjAgcGVvcGxlIGFyZSB2aWV3aW5nXCJcbiAqIHdvdWxkIGJlIHNob3duIGluc3RlYWQgb2YgXCJOb2JvZHkgaXMgdmlld2luZ1wiLiBZb3UgY2FuIHNwZWNpZnkgYW4gZXhwbGljaXQgbnVtYmVyIHJ1bGUgZm9yXG4gKiBvdGhlciBudW1iZXJzLCBmb3IgZXhhbXBsZSAxMiwgc28gdGhhdCBpbnN0ZWFkIG9mIHNob3dpbmcgXCIxMiBwZW9wbGUgYXJlIHZpZXdpbmdcIiwgeW91IGNhblxuICogc2hvdyBcImEgZG96ZW4gcGVvcGxlIGFyZSB2aWV3aW5nXCIuXG4gKlxuICogWW91IGNhbiB1c2UgYSBzZXQgb2YgY2xvc2VkIGJyYWNlcyAoYHt9YCkgYXMgYSBwbGFjZWhvbGRlciBmb3IgdGhlIG51bWJlciB0aGF0IHlvdSB3YW50IHN1YnN0aXR1dGVkXG4gKiBpbnRvIHBsdXJhbGl6ZWQgc3RyaW5ncy4gSW4gdGhlIHByZXZpb3VzIGV4YW1wbGUsIEFuZ3VsYXJKUyB3aWxsIHJlcGxhY2UgYHt9YCB3aXRoXG4gKiA8c3BhbiBuZy1ub24tYmluZGFibGU+YHt7cGVyc29uQ291bnR9fWA8L3NwYW4+LiBUaGUgY2xvc2VkIGJyYWNlcyBge31gIGlzIGEgcGxhY2Vob2xkZXJcbiAqIGZvciA8c3BhbiBuZy1ub24tYmluZGFibGU+e3tudW1iZXJFeHByZXNzaW9ufX08L3NwYW4+LlxuICpcbiAqIElmIG5vIHJ1bGUgaXMgZGVmaW5lZCBmb3IgYSBjYXRlZ29yeSwgdGhlbiBhbiBlbXB0eSBzdHJpbmcgaXMgZGlzcGxheWVkIGFuZCBhIHdhcm5pbmcgaXMgZ2VuZXJhdGVkLlxuICogTm90ZSB0aGF0IHNvbWUgbG9jYWxlcyBkZWZpbmUgbW9yZSBjYXRlZ29yaWVzIHRoYW4gYG9uZWAgYW5kIGBvdGhlcmAuIEZvciBleGFtcGxlLCBmci1mciBkZWZpbmVzIGBmZXdgIGFuZCBgbWFueWAuXG4gKlxuICogIyMgQ29uZmlndXJpbmcgbmdQbHVyYWxpemUgd2l0aCBvZmZzZXRcbiAqIFRoZSBgb2Zmc2V0YCBhdHRyaWJ1dGUgYWxsb3dzIGZ1cnRoZXIgY3VzdG9taXphdGlvbiBvZiBwbHVyYWxpemVkIHRleHQsIHdoaWNoIGNhbiByZXN1bHQgaW5cbiAqIGEgYmV0dGVyIHVzZXIgZXhwZXJpZW5jZS4gRm9yIGV4YW1wbGUsIGluc3RlYWQgb2YgdGhlIG1lc3NhZ2UgXCI0IHBlb3BsZSBhcmUgdmlld2luZyB0aGlzIGRvY3VtZW50XCIsXG4gKiB5b3UgbWlnaHQgZGlzcGxheSBcIkpvaG4sIEthdGUgYW5kIDIgb3RoZXJzIGFyZSB2aWV3aW5nIHRoaXMgZG9jdW1lbnRcIi5cbiAqIFRoZSBvZmZzZXQgYXR0cmlidXRlIGFsbG93cyB5b3UgdG8gb2Zmc2V0IGEgbnVtYmVyIGJ5IGFueSBkZXNpcmVkIHZhbHVlLlxuICogTGV0J3MgdGFrZSBhIGxvb2sgYXQgYW4gZXhhbXBsZTpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIiBvZmZzZXQ9MlxuICogICAgICAgICAgICAgICB3aGVuPVwieycwJzogJ05vYm9keSBpcyB2aWV3aW5nLicsXG4gKiAgICAgICAgICAgICAgICAgICAgICAnMSc6ICd7e3BlcnNvbjF9fSBpcyB2aWV3aW5nLicsXG4gKiAgICAgICAgICAgICAgICAgICAgICAnMic6ICd7e3BlcnNvbjF9fSBhbmQge3twZXJzb24yfX0gYXJlIHZpZXdpbmcuJyxcbiAqICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAne3twZXJzb24xfX0sIHt7cGVyc29uMn19IGFuZCBvbmUgb3RoZXIgcGVyc29uIGFyZSB2aWV3aW5nLicsXG4gKiAgICAgICAgICAgICAgICAgICAgICAnb3RoZXInOiAne3twZXJzb24xfX0sIHt7cGVyc29uMn19IGFuZCB7fSBvdGhlciBwZW9wbGUgYXJlIHZpZXdpbmcuJ31cIj5cbiAqIDwvbmctcGx1cmFsaXplPlxuICogYGBgXG4gKlxuICogTm90aWNlIHRoYXQgd2UgYXJlIHN0aWxsIHVzaW5nIHR3byBwbHVyYWwgY2F0ZWdvcmllcyhvbmUsIG90aGVyKSwgYnV0IHdlIGFkZGVkXG4gKiB0aHJlZSBleHBsaWNpdCBudW1iZXIgcnVsZXMgMCwgMSBhbmQgMi5cbiAqIFdoZW4gb25lIHBlcnNvbiwgcGVyaGFwcyBKb2huLCB2aWV3cyB0aGUgZG9jdW1lbnQsIFwiSm9obiBpcyB2aWV3aW5nXCIgd2lsbCBiZSBzaG93bi5cbiAqIFdoZW4gdGhyZWUgcGVvcGxlIHZpZXcgdGhlIGRvY3VtZW50LCBubyBleHBsaWNpdCBudW1iZXIgcnVsZSBpcyBmb3VuZCwgc29cbiAqIGFuIG9mZnNldCBvZiAyIGlzIHRha2VuIG9mZiAzLCBhbmQgQW5ndWxhckpTIHVzZXMgMSB0byBkZWNpZGUgdGhlIHBsdXJhbCBjYXRlZ29yeS5cbiAqIEluIHRoaXMgY2FzZSwgcGx1cmFsIGNhdGVnb3J5ICdvbmUnIGlzIG1hdGNoZWQgYW5kIFwiSm9obiwgTWFyeSBhbmQgb25lIG90aGVyIHBlcnNvbiBhcmUgdmlld2luZ1wiXG4gKiBpcyBzaG93bi5cbiAqXG4gKiBOb3RlIHRoYXQgd2hlbiB5b3Ugc3BlY2lmeSBvZmZzZXRzLCB5b3UgbXVzdCBwcm92aWRlIGV4cGxpY2l0IG51bWJlciBydWxlcyBmb3JcbiAqIG51bWJlcnMgZnJvbSAwIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhlIG9mZnNldC4gSWYgeW91IHVzZSBhbiBvZmZzZXQgb2YgMywgZm9yIGV4YW1wbGUsXG4gKiB5b3UgbXVzdCBwcm92aWRlIGV4cGxpY2l0IG51bWJlciBydWxlcyBmb3IgMCwgMSwgMiBhbmQgMy4gWW91IG11c3QgYWxzbyBwcm92aWRlIHBsdXJhbCBzdHJpbmdzIGZvclxuICogcGx1cmFsIGNhdGVnb3JpZXMgXCJvbmVcIiBhbmQgXCJvdGhlclwiLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfGV4cHJlc3Npb259IGNvdW50IFRoZSB2YXJpYWJsZSB0byBiZSBib3VuZCB0by5cbiAqIEBwYXJhbSB7c3RyaW5nfSB3aGVuIFRoZSBtYXBwaW5nIGJldHdlZW4gcGx1cmFsIGNhdGVnb3J5IHRvIGl0cyBjb3JyZXNwb25kaW5nIHN0cmluZ3MuXG4gKiBAcGFyYW0ge251bWJlcj19IG9mZnNldCBPZmZzZXQgdG8gZGVkdWN0IGZyb20gdGhlIHRvdGFsIG51bWJlci5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG1vZHVsZT1cInBsdXJhbGl6ZUV4YW1wbGVcIiBuYW1lPVwibmctcGx1cmFsaXplXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8c2NyaXB0PlxuICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdwbHVyYWxpemVFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAkc2NvcGUucGVyc29uMSA9ICdJZ29yJztcbiAgICAgICAgICAgICAgJHNjb3BlLnBlcnNvbjIgPSAnTWlza28nO1xuICAgICAgICAgICAgICAkc2NvcGUucGVyc29uQ291bnQgPSAxO1xuICAgICAgICAgICAgfV0pO1xuICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgICA8bGFiZWw+UGVyc29uIDE6PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJwZXJzb24xXCIgdmFsdWU9XCJJZ29yXCIgLz48L2xhYmVsPjxici8+XG4gICAgICAgICAgPGxhYmVsPlBlcnNvbiAyOjxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwicGVyc29uMlwiIHZhbHVlPVwiTWlza29cIiAvPjwvbGFiZWw+PGJyLz5cbiAgICAgICAgICA8bGFiZWw+TnVtYmVyIG9mIFBlb3BsZTo8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInBlcnNvbkNvdW50XCIgdmFsdWU9XCIxXCIgLz48L2xhYmVsPjxici8+XG5cbiAgICAgICAgICA8IS0tLSBFeGFtcGxlIHdpdGggc2ltcGxlIHBsdXJhbGl6YXRpb24gcnVsZXMgZm9yIGVuIGxvY2FsZSAtLS0+XG4gICAgICAgICAgV2l0aG91dCBPZmZzZXQ6XG4gICAgICAgICAgPG5nLXBsdXJhbGl6ZSBjb3VudD1cInBlcnNvbkNvdW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW49XCJ7JzAnOiAnTm9ib2R5IGlzIHZpZXdpbmcuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb25lJzogJzEgcGVyc29uIGlzIHZpZXdpbmcuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3RoZXInOiAne30gcGVvcGxlIGFyZSB2aWV3aW5nLid9XCI+XG4gICAgICAgICAgPC9uZy1wbHVyYWxpemU+PGJyPlxuXG4gICAgICAgICAgPCEtLS0gRXhhbXBsZSB3aXRoIG9mZnNldCAtLS0+XG4gICAgICAgICAgV2l0aCBPZmZzZXQoMik6XG4gICAgICAgICAgPG5nLXBsdXJhbGl6ZSBjb3VudD1cInBlcnNvbkNvdW50XCIgb2Zmc2V0PTJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZW49XCJ7JzAnOiAnTm9ib2R5IGlzIHZpZXdpbmcuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMSc6ICd7e3BlcnNvbjF9fSBpcyB2aWV3aW5nLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzInOiAne3twZXJzb24xfX0gYW5kIHt7cGVyc29uMn19IGFyZSB2aWV3aW5nLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29uZSc6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIG9uZSBvdGhlciBwZXJzb24gYXJlIHZpZXdpbmcuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3RoZXInOiAne3twZXJzb24xfX0sIHt7cGVyc29uMn19IGFuZCB7fSBvdGhlciBwZW9wbGUgYXJlIHZpZXdpbmcuJ31cIj5cbiAgICAgICAgICA8L25nLXBsdXJhbGl6ZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgc2hvdyBjb3JyZWN0IHBsdXJhbGl6ZWQgc3RyaW5nJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHdpdGhvdXRPZmZzZXQgPSBlbGVtZW50LmFsbChieS5jc3MoJ25nLXBsdXJhbGl6ZScpKS5nZXQoMCk7XG4gICAgICAgICAgdmFyIHdpdGhPZmZzZXQgPSBlbGVtZW50LmFsbChieS5jc3MoJ25nLXBsdXJhbGl6ZScpKS5nZXQoMSk7XG4gICAgICAgICAgdmFyIGNvdW50SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdwZXJzb25Db3VudCcpKTtcblxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnMSBwZXJzb24gaXMgdmlld2luZy4nKTtcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0lnb3IgaXMgdmlld2luZy4nKTtcblxuICAgICAgICAgIGNvdW50SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICBjb3VudElucHV0LnNlbmRLZXlzKCcwJyk7XG5cbiAgICAgICAgICBleHBlY3Qod2l0aG91dE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ05vYm9keSBpcyB2aWV3aW5nLicpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnTm9ib2R5IGlzIHZpZXdpbmcuJyk7XG5cbiAgICAgICAgICBjb3VudElucHV0LmNsZWFyKCk7XG4gICAgICAgICAgY291bnRJbnB1dC5zZW5kS2V5cygnMicpO1xuXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCcyIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0lnb3IgYW5kIE1pc2tvIGFyZSB2aWV3aW5nLicpO1xuXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIGNvdW50SW5wdXQuc2VuZEtleXMoJzMnKTtcblxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnMyBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdJZ29yLCBNaXNrbyBhbmQgb25lIG90aGVyIHBlcnNvbiBhcmUgdmlld2luZy4nKTtcblxuICAgICAgICAgIGNvdW50SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICBjb3VudElucHV0LnNlbmRLZXlzKCc0Jyk7XG5cbiAgICAgICAgICBleHBlY3Qod2l0aG91dE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJzQgcGVvcGxlIGFyZSB2aWV3aW5nLicpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnSWdvciwgTWlza28gYW5kIDIgb3RoZXIgcGVvcGxlIGFyZSB2aWV3aW5nLicpO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoJ3Nob3VsZCBzaG93IGRhdGEtYm91bmQgbmFtZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgd2l0aE9mZnNldCA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnbmctcGx1cmFsaXplJykpLmdldCgxKTtcbiAgICAgICAgICB2YXIgcGVyc29uQ291bnQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdwZXJzb25Db3VudCcpKTtcbiAgICAgICAgICB2YXIgcGVyc29uMSA9IGVsZW1lbnQoYnkubW9kZWwoJ3BlcnNvbjEnKSk7XG4gICAgICAgICAgdmFyIHBlcnNvbjIgPSBlbGVtZW50KGJ5Lm1vZGVsKCdwZXJzb24yJykpO1xuICAgICAgICAgIHBlcnNvbkNvdW50LmNsZWFyKCk7XG4gICAgICAgICAgcGVyc29uQ291bnQuc2VuZEtleXMoJzQnKTtcbiAgICAgICAgICBwZXJzb24xLmNsZWFyKCk7XG4gICAgICAgICAgcGVyc29uMS5zZW5kS2V5cygnRGknKTtcbiAgICAgICAgICBwZXJzb24yLmNsZWFyKCk7XG4gICAgICAgICAgcGVyc29uMi5zZW5kS2V5cygnVm9qdGEnKTtcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0RpLCBWb2p0YSBhbmQgMiBvdGhlciBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nUGx1cmFsaXplRGlyZWN0aXZlID0gWyckbG9jYWxlJywgJyRpbnRlcnBvbGF0ZScsICckbG9nJywgZnVuY3Rpb24oJGxvY2FsZSwgJGludGVycG9sYXRlLCAkbG9nKSB7XG4gIHZhciBCUkFDRSA9IC97fS9nLFxuICAgICAgSVNfV0hFTiA9IC9ed2hlbihNaW51cyk/KC4rKSQvO1xuXG4gIHJldHVybiB7XG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIHZhciBudW1iZXJFeHAgPSBhdHRyLmNvdW50LFxuICAgICAgICAgIHdoZW5FeHAgPSBhdHRyLiRhdHRyLndoZW4gJiYgZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIud2hlbiksIC8vIHdlIGhhdmUge3t9fSBpbiBhdHRyc1xuICAgICAgICAgIG9mZnNldCA9IGF0dHIub2Zmc2V0IHx8IDAsXG4gICAgICAgICAgd2hlbnMgPSBzY29wZS4kZXZhbCh3aGVuRXhwKSB8fCB7fSxcbiAgICAgICAgICB3aGVuc0V4cEZucyA9IHt9LFxuICAgICAgICAgIHN0YXJ0U3ltYm9sID0gJGludGVycG9sYXRlLnN0YXJ0U3ltYm9sKCksXG4gICAgICAgICAgZW5kU3ltYm9sID0gJGludGVycG9sYXRlLmVuZFN5bWJvbCgpLFxuICAgICAgICAgIGJyYWNlUmVwbGFjZW1lbnQgPSBzdGFydFN5bWJvbCArIG51bWJlckV4cCArICctJyArIG9mZnNldCArIGVuZFN5bWJvbCxcbiAgICAgICAgICB3YXRjaFJlbW92ZXIgPSBhbmd1bGFyLm5vb3AsXG4gICAgICAgICAgbGFzdENvdW50O1xuXG4gICAgICBmb3JFYWNoKGF0dHIsIGZ1bmN0aW9uKGV4cHJlc3Npb24sIGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgdmFyIHRtcE1hdGNoID0gSVNfV0hFTi5leGVjKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICBpZiAodG1wTWF0Y2gpIHtcbiAgICAgICAgICB2YXIgd2hlbktleSA9ICh0bXBNYXRjaFsxXSA/ICctJyA6ICcnKSArIGxvd2VyY2FzZSh0bXBNYXRjaFsyXSk7XG4gICAgICAgICAgd2hlbnNbd2hlbktleV0gPSBlbGVtZW50LmF0dHIoYXR0ci4kYXR0clthdHRyaWJ1dGVOYW1lXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZm9yRWFjaCh3aGVucywgZnVuY3Rpb24oZXhwcmVzc2lvbiwga2V5KSB7XG4gICAgICAgIHdoZW5zRXhwRm5zW2tleV0gPSAkaW50ZXJwb2xhdGUoZXhwcmVzc2lvbi5yZXBsYWNlKEJSQUNFLCBicmFjZVJlcGxhY2VtZW50KSk7XG5cbiAgICAgIH0pO1xuXG4gICAgICBzY29wZS4kd2F0Y2gobnVtYmVyRXhwLCBmdW5jdGlvbiBuZ1BsdXJhbGl6ZVdhdGNoQWN0aW9uKG5ld1ZhbCkge1xuICAgICAgICB2YXIgY291bnQgPSBwYXJzZUZsb2F0KG5ld1ZhbCk7XG4gICAgICAgIHZhciBjb3VudElzTmFOID0gaXNOdW1iZXJOYU4oY291bnQpO1xuXG4gICAgICAgIGlmICghY291bnRJc05hTiAmJiAhKGNvdW50IGluIHdoZW5zKSkge1xuICAgICAgICAgIC8vIElmIGFuIGV4cGxpY2l0IG51bWJlciBydWxlIHN1Y2ggYXMgMSwgMiwgMy4uLiBpcyBkZWZpbmVkLCBqdXN0IHVzZSBpdC5cbiAgICAgICAgICAvLyBPdGhlcndpc2UsIGNoZWNrIGl0IGFnYWluc3QgcGx1cmFsaXphdGlvbiBydWxlcyBpbiAkbG9jYWxlIHNlcnZpY2UuXG4gICAgICAgICAgY291bnQgPSAkbG9jYWxlLnBsdXJhbENhdChjb3VudCAtIG9mZnNldCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBib3RoIGBjb3VudGAgYW5kIGBsYXN0Q291bnRgIGFyZSBOYU4sIHdlIGRvbid0IG5lZWQgdG8gcmUtcmVnaXN0ZXIgYSB3YXRjaC5cbiAgICAgICAgLy8gSW4gSlMgYE5hTiAhPT0gTmFOYCwgc28gd2UgaGF2ZSB0byBleHBsaWNpdGx5IGNoZWNrLlxuICAgICAgICBpZiAoKGNvdW50ICE9PSBsYXN0Q291bnQpICYmICEoY291bnRJc05hTiAmJiBpc051bWJlck5hTihsYXN0Q291bnQpKSkge1xuICAgICAgICAgIHdhdGNoUmVtb3ZlcigpO1xuICAgICAgICAgIHZhciB3aGVuRXhwRm4gPSB3aGVuc0V4cEZuc1tjb3VudF07XG4gICAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHdoZW5FeHBGbikpIHtcbiAgICAgICAgICAgIGlmIChuZXdWYWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAkbG9nLmRlYnVnKCduZ1BsdXJhbGl6ZTogbm8gcnVsZSBkZWZpbmVkIGZvciBcXCcnICsgY291bnQgKyAnXFwnIGluICcgKyB3aGVuRXhwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdhdGNoUmVtb3ZlciA9IG5vb3A7XG4gICAgICAgICAgICB1cGRhdGVFbGVtZW50VGV4dCgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3YXRjaFJlbW92ZXIgPSBzY29wZS4kd2F0Y2god2hlbkV4cEZuLCB1cGRhdGVFbGVtZW50VGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxhc3RDb3VudCA9IGNvdW50O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gdXBkYXRlRWxlbWVudFRleHQobmV3VGV4dCkge1xuICAgICAgICBlbGVtZW50LnRleHQobmV3VGV4dCB8fCAnJyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufV07XG5cbi8qIGV4cG9ydGVkIG5nUmVwZWF0RGlyZWN0aXZlICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdSZXBlYXRcbiAqIEBtdWx0aUVsZW1lbnRcbiAqIEByZXN0cmljdCBBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nUmVwZWF0YCBkaXJlY3RpdmUgaW5zdGFudGlhdGVzIGEgdGVtcGxhdGUgb25jZSBwZXIgaXRlbSBmcm9tIGEgY29sbGVjdGlvbi4gRWFjaCB0ZW1wbGF0ZVxuICogaW5zdGFuY2UgZ2V0cyBpdHMgb3duIHNjb3BlLCB3aGVyZSB0aGUgZ2l2ZW4gbG9vcCB2YXJpYWJsZSBpcyBzZXQgdG8gdGhlIGN1cnJlbnQgY29sbGVjdGlvbiBpdGVtLFxuICogYW5kIGAkaW5kZXhgIGlzIHNldCB0byB0aGUgaXRlbSBpbmRleCBvciBrZXkuXG4gKlxuICogU3BlY2lhbCBwcm9wZXJ0aWVzIGFyZSBleHBvc2VkIG9uIHRoZSBsb2NhbCBzY29wZSBvZiBlYWNoIHRlbXBsYXRlIGluc3RhbmNlLCBpbmNsdWRpbmc6XG4gKlxuICogfCBWYXJpYWJsZSAgfCBUeXBlICAgICAgICAgICAgfCBEZXRhaWxzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCBgJGluZGV4YCAgfCB7QHR5cGUgbnVtYmVyfSAgfCBpdGVyYXRvciBvZmZzZXQgb2YgdGhlIHJlcGVhdGVkIGVsZW1lbnQgKDAuLmxlbmd0aC0xKSAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBgJGZpcnN0YCAgfCB7QHR5cGUgYm9vbGVhbn0gfCB0cnVlIGlmIHRoZSByZXBlYXRlZCBlbGVtZW50IGlzIGZpcnN0IGluIHRoZSBpdGVyYXRvci4gICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBgJG1pZGRsZWAgfCB7QHR5cGUgYm9vbGVhbn0gfCB0cnVlIGlmIHRoZSByZXBlYXRlZCBlbGVtZW50IGlzIGJldHdlZW4gdGhlIGZpcnN0IGFuZCBsYXN0IGluIHRoZSBpdGVyYXRvci4gfFxuICogfCBgJGxhc3RgICAgfCB7QHR5cGUgYm9vbGVhbn0gfCB0cnVlIGlmIHRoZSByZXBlYXRlZCBlbGVtZW50IGlzIGxhc3QgaW4gdGhlIGl0ZXJhdG9yLiAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBgJGV2ZW5gICAgfCB7QHR5cGUgYm9vbGVhbn0gfCB0cnVlIGlmIHRoZSBpdGVyYXRvciBwb3NpdGlvbiBgJGluZGV4YCBpcyBldmVuIChvdGhlcndpc2UgZmFsc2UpLiAgICAgICAgICAgfFxuICogfCBgJG9kZGAgICAgfCB7QHR5cGUgYm9vbGVhbn0gfCB0cnVlIGlmIHRoZSBpdGVyYXRvciBwb3NpdGlvbiBgJGluZGV4YCBpcyBvZGQgKG90aGVyd2lzZSBmYWxzZSkuICAgICAgICAgICAgfFxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAgIENyZWF0aW5nIGFsaWFzZXMgZm9yIHRoZXNlIHByb3BlcnRpZXMgaXMgcG9zc2libGUgd2l0aCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5pdCBgbmdJbml0YH0uXG4gKiAgIFRoaXMgbWF5IGJlIHVzZWZ1bCB3aGVuLCBmb3IgaW5zdGFuY2UsIG5lc3RpbmcgbmdSZXBlYXRzLlxuICogPC9kaXY+XG4gKlxuICpcbiAqICMjIEl0ZXJhdGluZyBvdmVyIG9iamVjdCBwcm9wZXJ0aWVzXG4gKlxuICogSXQgaXMgcG9zc2libGUgdG8gZ2V0IGBuZ1JlcGVhdGAgdG8gaXRlcmF0ZSBvdmVyIHRoZSBwcm9wZXJ0aWVzIG9mIGFuIG9iamVjdCB1c2luZyB0aGUgZm9sbG93aW5nXG4gKiBzeW50YXg6XG4gKlxuICogYGBganNcbiAqIDxkaXYgbmctcmVwZWF0PVwiKGtleSwgdmFsdWUpIGluIG15T2JqXCI+IC4uLiA8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEhvd2V2ZXIsIHRoZXJlIGFyZSBhIGZldyBsaW1pdGF0aW9ucyBjb21wYXJlZCB0byBhcnJheSBpdGVyYXRpb246XG4gKlxuICogLSBUaGUgSmF2YVNjcmlwdCBzcGVjaWZpY2F0aW9uIGRvZXMgbm90IGRlZmluZSB0aGUgb3JkZXIgb2Yga2V5c1xuICogICByZXR1cm5lZCBmb3IgYW4gb2JqZWN0LCBzbyBBbmd1bGFySlMgcmVsaWVzIG9uIHRoZSBvcmRlciByZXR1cm5lZCBieSB0aGUgYnJvd3NlclxuICogICB3aGVuIHJ1bm5pbmcgYGZvciBrZXkgaW4gbXlPYmpgLiBCcm93c2VycyBnZW5lcmFsbHkgZm9sbG93IHRoZSBzdHJhdGVneSBvZiBwcm92aWRpbmdcbiAqICAga2V5cyBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSB3ZXJlIGRlZmluZWQsIGFsdGhvdWdoIHRoZXJlIGFyZSBleGNlcHRpb25zIHdoZW4ga2V5cyBhcmUgZGVsZXRlZFxuICogICBhbmQgcmVpbnN0YXRlZC4gU2VlIHRoZVxuICogICBbTUROIHBhZ2Ugb24gYGRlbGV0ZWAgZm9yIG1vcmUgaW5mb10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL2RlbGV0ZSNDcm9zcy1icm93c2VyX25vdGVzKS5cbiAqXG4gKiAtIGBuZ1JlcGVhdGAgd2lsbCBzaWxlbnRseSAqaWdub3JlKiBvYmplY3Qga2V5cyBzdGFydGluZyB3aXRoIGAkYCwgYmVjYXVzZVxuICogICBpdCdzIGEgcHJlZml4IHVzZWQgYnkgQW5ndWxhckpTIGZvciBwdWJsaWMgKGAkYCkgYW5kIHByaXZhdGUgKGAkJGApIHByb3BlcnRpZXMuXG4gKlxuICogLSBUaGUgYnVpbHQtaW4gZmlsdGVycyB7QGxpbmsgbmcub3JkZXJCeSBvcmRlckJ5fSBhbmQge0BsaW5rIG5nLmZpbHRlciBmaWx0ZXJ9IGRvIG5vdCB3b3JrIHdpdGhcbiAqICAgb2JqZWN0cywgYW5kIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdXNlZCB3aXRoIG9uZS5cbiAqXG4gKiBJZiB5b3UgYXJlIGhpdHRpbmcgYW55IG9mIHRoZXNlIGxpbWl0YXRpb25zLCB0aGUgcmVjb21tZW5kZWQgd29ya2Fyb3VuZCBpcyB0byBjb252ZXJ0IHlvdXIgb2JqZWN0IGludG8gYW4gYXJyYXlcbiAqIHRoYXQgaXMgc29ydGVkIGludG8gdGhlIG9yZGVyIHRoYXQgeW91IHByZWZlciBiZWZvcmUgcHJvdmlkaW5nIGl0IHRvIGBuZ1JlcGVhdGAuIFlvdSBjb3VsZFxuICogZG8gdGhpcyB3aXRoIGEgZmlsdGVyIHN1Y2ggYXMgW3RvQXJyYXlGaWx0ZXJdKGh0dHA6Ly9uZ21vZHVsZXMub3JnL21vZHVsZXMvYW5ndWxhci10b0FycmF5RmlsdGVyKVxuICogb3IgaW1wbGVtZW50IGEgYCR3YXRjaGAgb24gdGhlIG9iamVjdCB5b3Vyc2VsZi5cbiAqXG4gKlxuICogIyMgVHJhY2tpbmcgYW5kIER1cGxpY2F0ZXNcbiAqXG4gKiBgbmdSZXBlYXRgIHVzZXMge0BsaW5rICRyb290U2NvcGUuU2NvcGUjJHdhdGNoQ29sbGVjdGlvbiAkd2F0Y2hDb2xsZWN0aW9ufSB0byBkZXRlY3QgY2hhbmdlcyBpblxuICogdGhlIGNvbGxlY3Rpb24uIFdoZW4gYSBjaGFuZ2UgaGFwcGVucywgYG5nUmVwZWF0YCB0aGVuIG1ha2VzIHRoZSBjb3JyZXNwb25kaW5nIGNoYW5nZXMgdG8gdGhlIERPTTpcbiAqXG4gKiAqIFdoZW4gYW4gaXRlbSBpcyBhZGRlZCwgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIHRlbXBsYXRlIGlzIGFkZGVkIHRvIHRoZSBET00uXG4gKiAqIFdoZW4gYW4gaXRlbSBpcyByZW1vdmVkLCBpdHMgdGVtcGxhdGUgaW5zdGFuY2UgaXMgcmVtb3ZlZCBmcm9tIHRoZSBET00uXG4gKiAqIFdoZW4gaXRlbXMgYXJlIHJlb3JkZXJlZCwgdGhlaXIgcmVzcGVjdGl2ZSB0ZW1wbGF0ZXMgYXJlIHJlb3JkZXJlZCBpbiB0aGUgRE9NLlxuICpcbiAqIFRvIG1pbmltaXplIGNyZWF0aW9uIG9mIERPTSBlbGVtZW50cywgYG5nUmVwZWF0YCB1c2VzIGEgZnVuY3Rpb25cbiAqIHRvIFwia2VlcCB0cmFja1wiIG9mIGFsbCBpdGVtcyBpbiB0aGUgY29sbGVjdGlvbiBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBET00gZWxlbWVudHMuXG4gKiBGb3IgZXhhbXBsZSwgaWYgYW4gaXRlbSBpcyBhZGRlZCB0byB0aGUgY29sbGVjdGlvbiwgYG5nUmVwZWF0YCB3aWxsIGtub3cgdGhhdCBhbGwgb3RoZXIgaXRlbXNcbiAqIGFscmVhZHkgaGF2ZSBET00gZWxlbWVudHMsIGFuZCB3aWxsIG5vdCByZS1yZW5kZXIgdGhlbS5cbiAqXG4gKiBBbGwgZGlmZmVyZW50IHR5cGVzIG9mIHRyYWNraW5nIGZ1bmN0aW9ucywgdGhlaXIgc3ludGF4LCBhbmQgYW5kIHRoZWlyIHN1cHBvcnQgZm9yIGR1cGxpY2F0ZVxuICogaXRlbXMgaW4gY29sbGVjdGlvbnMgY2FuIGJlIGZvdW5kIGluIHRoZVxuICoge0BsaW5rIG5nUmVwZWF0I25nUmVwZWF0LWFyZ3VtZW50cyBuZ1JlcGVhdCBleHByZXNzaW9uIGRlc2NyaXB0aW9ufS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxuICogKipCZXN0IFByYWN0aWNlOioqIElmIHlvdSBhcmUgd29ya2luZyB3aXRoIG9iamVjdHMgdGhhdCBoYXZlIGEgdW5pcXVlIGlkZW50aWZpZXIgcHJvcGVydHksIHlvdVxuICogc2hvdWxkIHRyYWNrIGJ5IHRoaXMgaWRlbnRpZmllciBpbnN0ZWFkIG9mIHRoZSBvYmplY3QgaW5zdGFuY2UsXG4gKiBlLmcuIGBpdGVtIGluIGl0ZW1zIHRyYWNrIGJ5IGl0ZW0uaWRgLlxuICogU2hvdWxkIHlvdSByZWxvYWQgeW91ciBkYXRhIGxhdGVyLCBgbmdSZXBlYXRgIHdpbGwgbm90IGhhdmUgdG8gcmVidWlsZCB0aGUgRE9NIGVsZW1lbnRzIGZvciBpdGVtc1xuICogaXQgaGFzIGFscmVhZHkgcmVuZGVyZWQsIGV2ZW4gaWYgdGhlIEphdmFTY3JpcHQgb2JqZWN0cyBpbiB0aGUgY29sbGVjdGlvbiBoYXZlIGJlZW4gc3Vic3RpdHV0ZWRcbiAqIGZvciBuZXcgb25lcy4gRm9yIGxhcmdlIGNvbGxlY3Rpb25zLCB0aGlzIHNpZ25pZmljYW50bHkgaW1wcm92ZXMgcmVuZGVyaW5nIHBlcmZvcm1hbmNlLlxuICogPC9kaXY+XG4gKlxuICogIyMjIEVmZmVjdHMgb2YgRE9NIEVsZW1lbnQgcmUtdXNlXG4gKlxuICogV2hlbiBET00gZWxlbWVudHMgYXJlIHJlLXVzZWQsIG5nUmVwZWF0IHVwZGF0ZXMgdGhlIHNjb3BlIGZvciB0aGUgZWxlbWVudCwgd2hpY2ggd2lsbFxuICogYXV0b21hdGljYWxseSB1cGRhdGUgYW55IGFjdGl2ZSBiaW5kaW5ncyBvbiB0aGUgdGVtcGxhdGUuIEhvd2V2ZXIsIG90aGVyXG4gKiBmdW5jdGlvbmFsaXR5IHdpbGwgbm90IGJlIHVwZGF0ZWQsIGJlY2F1c2UgdGhlIGVsZW1lbnQgaXMgbm90IHJlLWNyZWF0ZWQ6XG4gKlxuICogLSBEaXJlY3RpdmVzIGFyZSBub3QgcmUtY29tcGlsZWRcbiAqIC0ge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jb25lLXRpbWUtYmluZGluZyBvbmUtdGltZSBleHByZXNzaW9uc30gb24gdGhlIHJlcGVhdGVkIHRlbXBsYXRlIGFyZSBub3RcbiAqIHVwZGF0ZWQgaWYgdGhleSBoYXZlIHN0YWJpbGl6ZWQuXG4gKlxuICogVGhlIGFib3ZlIGFmZmVjdHMgYWxsIGtpbmRzIG9mIGVsZW1lbnQgcmUtdXNlIGR1ZSB0byB0cmFja2luZywgYnV0IG1heSBiZSBlc3BlY2lhbGx5IHZpc2libGVcbiAqIHdoZW4gdHJhY2tpbmcgYnkgYCRpbmRleGAgZHVlIHRvIHRoZSB3YXkgbmdSZXBlYXQgcmUtdXNlcyBlbGVtZW50cy5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgdGhlIGVmZmVjdHMgb2YgZGlmZmVyZW50IGFjdGlvbnMgd2l0aCB0cmFja2luZzpcblxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ1JlcGVhdFwiIG5hbWU9XCJuZ1JlcGVhdC10cmFja2luZ1wiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ1JlcGVhdCcsIFsnbmdBbmltYXRlJ10pLmNvbnRyb2xsZXIoJ3JlcGVhdENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgdmFyIGZyaWVuZHMgPSBbXG4gICAgICAgICAge25hbWU6J0pvaG4nLCBhZ2U6MjV9LFxuICAgICAgICAgIHtuYW1lOidNYXJ5JywgYWdlOjQwfSxcbiAgICAgICAgICB7bmFtZTonUGV0ZXInLCBhZ2U6ODV9XG4gICAgICAgIF07XG5cbiAgICAgICAgJHNjb3BlLnJlbW92ZUZpcnN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmZyaWVuZHMuc2hpZnQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUudXBkYXRlQWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmZyaWVuZHMuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgZWwuYWdlID0gZWwuYWdlICsgNTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuY29weSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5mcmllbmRzID0gYW5ndWxhci5jb3B5KCRzY29wZS5mcmllbmRzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IGFuZ3VsYXIuY29weShmcmllbmRzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUucmVzZXQoKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwicmVwZWF0Q29udHJvbGxlclwiPlxuICAgICAgICA8b2w+XG4gICAgICAgICAgPGxpPldoZW4geW91IGNsaWNrIFwiVXBkYXRlIEFnZVwiLCBvbmx5IHRoZSBmaXJzdCBsaXN0IHVwZGF0ZXMgdGhlIGFnZSwgYmVjYXVzZSBhbGwgb3RoZXJzIGhhdmVcbiAgICAgICAgICBhIG9uZS10aW1lIGJpbmRpbmcgb24gdGhlIGFnZSBwcm9wZXJ0eS4gSWYgeW91IHRoZW4gY2xpY2sgXCJDb3B5XCIsIHRoZSBjdXJyZW50IGZyaWVuZCBsaXN0XG4gICAgICAgICAgaXMgY29waWVkLCBhbmQgbm93IHRoZSBzZWNvbmQgbGlzdCB1cGRhdGVzIHRoZSBhZ2UsIGJlY2F1c2UgdGhlIGlkZW50aXR5IG9mIHRoZSBjb2xsZWN0aW9uIGl0ZW1zXG4gICAgICAgICAgaGFzIGNoYW5nZWQgYW5kIHRoZSBsaXN0IG11c3QgYmUgcmUtcmVuZGVyZWQuIFRoZSAzcmQgYW5kIDR0aCBsaXN0IHN0YXkgdGhlIHNhbWUsIGJlY2F1c2UgYWxsIHRoZVxuICAgICAgICAgIGl0ZW1zIGFyZSBhbHJlYWR5IGtub3duIGFjY29yZGluZyB0byB0aGVpciB0cmFja2luZyBmdW5jdGlvbnMuXG4gICAgICAgICAgPC9saT5cbiAgICAgICAgICA8bGk+V2hlbiB5b3UgY2xpY2sgXCJSZW1vdmUgRmlyc3RcIiwgdGhlIDR0aCBsaXN0IGhhcyB0aGUgd3JvbmcgYWdlIG9uIGJvdGggcmVtYWluaW5nIGl0ZW1zLiBUaGlzIGlzXG4gICAgICAgICAgZHVlIHRvIHRyYWNraW5nIGJ5ICRpbmRleDogd2hlbiB0aGUgZmlyc3QgY29sbGVjdGlvbiBpdGVtIGlzIHJlbW92ZWQsIG5nUmVwZWF0IHJldXNlcyB0aGUgZmlyc3RcbiAgICAgICAgICBET00gZWxlbWVudCBmb3IgdGhlIG5ldyBmaXJzdCBjb2xsZWN0aW9uIGl0ZW0sIGFuZCBzbyBvbi4gU2luY2UgdGhlIGFnZSBwcm9wZXJ0eSBpcyBvbmUtdGltZVxuICAgICAgICAgIGJvdW5kLCB0aGUgdmFsdWUgcmVtYWlucyBmcm9tIHRoZSBjb2xsZWN0aW9uIGl0ZW0gd2hpY2ggd2FzIHByZXZpb3VzbHkgYXQgdGhpcyBpbmRleC5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L29sPlxuXG4gICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJyZW1vdmVGaXJzdCgpXCI+UmVtb3ZlIEZpcnN0PC9idXR0b24+XG4gICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJ1cGRhdGVBZ2UoKVwiPlVwZGF0ZSBBZ2U8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImNvcHkoKVwiPkNvcHk8L2J1dHRvbj5cbiAgICAgICAgPGJyPjxidXR0b24gbmctY2xpY2s9XCJyZXNldCgpXCI+UmVzZXQgTGlzdDwvYnV0dG9uPlxuICAgICAgICA8YnI+XG4gICAgICAgIDxjb2RlPnRyYWNrIGJ5ICRpZChmcmllbmQpPC9jb2RlPiAoZGVmYXVsdCk6XG4gICAgICAgIDx1bCBjbGFzcz1cImV4YW1wbGUtYW5pbWF0ZS1jb250YWluZXJcIj5cbiAgICAgICAgICA8bGkgY2xhc3M9XCJhbmltYXRlLXJlcGVhdFwiIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzXCI+XG4gICAgICAgICAgICB7e2ZyaWVuZC5uYW1lfX0gaXMge3tmcmllbmQuYWdlfX0geWVhcnMgb2xkLlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICAgIDxjb2RlPnRyYWNrIGJ5ICRpZChmcmllbmQpPC9jb2RlPiAoZGVmYXVsdCksIHdpdGggYWdlIG9uZS10aW1lIGJpbmRpbmc6XG4gICAgICAgIDx1bCBjbGFzcz1cImV4YW1wbGUtYW5pbWF0ZS1jb250YWluZXJcIj5cbiAgICAgICAgICA8bGkgY2xhc3M9XCJhbmltYXRlLXJlcGVhdFwiIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzXCI+XG4gICAgICAgICAgICB7e2ZyaWVuZC5uYW1lfX0gaXMge3s6OmZyaWVuZC5hZ2V9fSB5ZWFycyBvbGQuXG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgICAgPGNvZGU+dHJhY2sgYnkgZnJpZW5kLm5hbWU8L2NvZGU+LCB3aXRoIGFnZSBvbmUtdGltZSBiaW5kaW5nOlxuICAgICAgICA8dWwgY2xhc3M9XCJleGFtcGxlLWFuaW1hdGUtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGxpIGNsYXNzPVwiYW5pbWF0ZS1yZXBlYXRcIiBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB0cmFjayBieSBmcmllbmQubmFtZVwiPlxuICAgICAgICAgICAge3tmcmllbmQubmFtZX19ICBpcyB7ezo6ZnJpZW5kLmFnZX19IHllYXJzIG9sZC5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgICA8Y29kZT50cmFjayBieSAkaW5kZXg8L2NvZGU+LCB3aXRoIGFnZSBvbmUtdGltZSBiaW5kaW5nOlxuICAgICAgICA8dWwgY2xhc3M9XCJleGFtcGxlLWFuaW1hdGUtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGxpIGNsYXNzPVwiYW5pbWF0ZS1yZXBlYXRcIiBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB0cmFjayBieSAkaW5kZXhcIj5cbiAgICAgICAgICAgIHt7ZnJpZW5kLm5hbWV9fSBpcyB7ezo6ZnJpZW5kLmFnZX19IHllYXJzIG9sZC5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLmV4YW1wbGUtYW5pbWF0ZS1jb250YWluZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOndoaXRlO1xuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBsaXN0LXN0eWxlOm5vbmU7XG4gICAgICAgIG1hcmdpbjowO1xuICAgICAgICBwYWRkaW5nOjAgMTBweDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtcmVwZWF0IHtcbiAgICAgICAgbGluZS1oZWlnaHQ6MzBweDtcbiAgICAgICAgbGlzdC1zdHlsZTpub25lO1xuICAgICAgICBib3gtc2l6aW5nOmJvcmRlci1ib3g7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1tb3ZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWVudGVyLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWxlYXZlIHtcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbW92ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1lbnRlciB7XG4gICAgICAgIG9wYWNpdHk6MDtcbiAgICAgICAgbWF4LWhlaWdodDowO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbGVhdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbW92ZS5uZy1tb3ZlLWFjdGl2ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xuICAgICAgICBvcGFjaXR5OjE7XG4gICAgICAgIG1heC1oZWlnaHQ6MzBweDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cblxuICpcbiAqICMjIFNwZWNpYWwgcmVwZWF0IHN0YXJ0IGFuZCBlbmQgcG9pbnRzXG4gKiBUbyByZXBlYXQgYSBzZXJpZXMgb2YgZWxlbWVudHMgaW5zdGVhZCBvZiBqdXN0IG9uZSBwYXJlbnQgZWxlbWVudCwgbmdSZXBlYXQgKGFzIHdlbGwgYXMgb3RoZXIgbmcgZGlyZWN0aXZlcykgc3VwcG9ydHMgZXh0ZW5kaW5nXG4gKiB0aGUgcmFuZ2Ugb2YgdGhlIHJlcGVhdGVyIGJ5IGRlZmluaW5nIGV4cGxpY2l0IHN0YXJ0IGFuZCBlbmQgcG9pbnRzIGJ5IHVzaW5nICoqbmctcmVwZWF0LXN0YXJ0KiogYW5kICoqbmctcmVwZWF0LWVuZCoqIHJlc3BlY3RpdmVseS5cbiAqIFRoZSAqKm5nLXJlcGVhdC1zdGFydCoqIGRpcmVjdGl2ZSB3b3JrcyB0aGUgc2FtZSBhcyAqKm5nLXJlcGVhdCoqLCBidXQgd2lsbCByZXBlYXQgYWxsIHRoZSBIVE1MIGNvZGUgKGluY2x1ZGluZyB0aGUgdGFnIGl0J3MgZGVmaW5lZCBvbilcbiAqIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhlIGVuZGluZyBIVE1MIHRhZyB3aGVyZSAqKm5nLXJlcGVhdC1lbmQqKiBpcyBwbGFjZWQuXG4gKlxuICogVGhlIGV4YW1wbGUgYmVsb3cgbWFrZXMgdXNlIG9mIHRoaXMgZmVhdHVyZTpcbiAqIGBgYGh0bWxcbiAqICAgPGhlYWRlciBuZy1yZXBlYXQtc3RhcnQ9XCJpdGVtIGluIGl0ZW1zXCI+XG4gKiAgICAgSGVhZGVyIHt7IGl0ZW0gfX1cbiAqICAgPC9oZWFkZXI+XG4gKiAgIDxkaXYgY2xhc3M9XCJib2R5XCI+XG4gKiAgICAgQm9keSB7eyBpdGVtIH19XG4gKiAgIDwvZGl2PlxuICogICA8Zm9vdGVyIG5nLXJlcGVhdC1lbmQ+XG4gKiAgICAgRm9vdGVyIHt7IGl0ZW0gfX1cbiAqICAgPC9mb290ZXI+XG4gKiBgYGBcbiAqXG4gKiBBbmQgd2l0aCBhbiBpbnB1dCBvZiB7QHR5cGUgWydBJywnQiddfSBmb3IgdGhlIGl0ZW1zIHZhcmlhYmxlIGluIHRoZSBleGFtcGxlIGFib3ZlLCB0aGUgb3V0cHV0IHdpbGwgZXZhbHVhdGUgdG86XG4gKiBgYGBodG1sXG4gKiAgIDxoZWFkZXI+XG4gKiAgICAgSGVhZGVyIEFcbiAqICAgPC9oZWFkZXI+XG4gKiAgIDxkaXYgY2xhc3M9XCJib2R5XCI+XG4gKiAgICAgQm9keSBBXG4gKiAgIDwvZGl2PlxuICogICA8Zm9vdGVyPlxuICogICAgIEZvb3RlciBBXG4gKiAgIDwvZm9vdGVyPlxuICogICA8aGVhZGVyPlxuICogICAgIEhlYWRlciBCXG4gKiAgIDwvaGVhZGVyPlxuICogICA8ZGl2IGNsYXNzPVwiYm9keVwiPlxuICogICAgIEJvZHkgQlxuICogICA8L2Rpdj5cbiAqICAgPGZvb3Rlcj5cbiAqICAgICBGb290ZXIgQlxuICogICA8L2Zvb3Rlcj5cbiAqIGBgYFxuICpcbiAqIFRoZSBjdXN0b20gc3RhcnQgYW5kIGVuZCBwb2ludHMgZm9yIG5nUmVwZWF0IGFsc28gc3VwcG9ydCBhbGwgb3RoZXIgSFRNTCBkaXJlY3RpdmUgc3ludGF4IGZsYXZvcnMgcHJvdmlkZWQgaW4gQW5ndWxhckpTIChzdWNoXG4gKiBhcyAqKmRhdGEtbmctcmVwZWF0LXN0YXJ0KiosICoqeC1uZy1yZXBlYXQtc3RhcnQqKiBhbmQgKipuZzpyZXBlYXQtc3RhcnQqKikuXG4gKlxuICogQGFuaW1hdGlvbnNcbiAqIHwgQW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgfCBPY2N1cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjZW50ZXIgZW50ZXJ9IHwgd2hlbiBhIG5ldyBpdGVtIGlzIGFkZGVkIHRvIHRoZSBsaXN0IG9yIHdoZW4gYW4gaXRlbSBpcyByZXZlYWxlZCBhZnRlciBhIGZpbHRlciB8XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNsZWF2ZSBsZWF2ZX0gfCB3aGVuIGFuIGl0ZW0gaXMgcmVtb3ZlZCBmcm9tIHRoZSBsaXN0IG9yIHdoZW4gYW4gaXRlbSBpcyBmaWx0ZXJlZCBvdXQgfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjbW92ZSBtb3ZlIH0gfCB3aGVuIGFuIGFkamFjZW50IGl0ZW0gaXMgZmlsdGVyZWQgb3V0IGNhdXNpbmcgYSByZW9yZGVyIG9yIHdoZW4gdGhlIGl0ZW0gY29udGVudHMgYXJlIHJlb3JkZXJlZCB8XG4gKlxuICogU2VlIHRoZSBleGFtcGxlIGJlbG93IGZvciBkZWZpbmluZyBDU1MgYW5pbWF0aW9ucyB3aXRoIG5nUmVwZWF0LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHNjb3BlXG4gKiBAcHJpb3JpdHkgMTAwMFxuICogQHBhcmFtIHtyZXBlYXRfZXhwcmVzc2lvbn0gbmdSZXBlYXQgVGhlIGV4cHJlc3Npb24gaW5kaWNhdGluZyBob3cgdG8gZW51bWVyYXRlIGEgY29sbGVjdGlvbi4gVGhlc2VcbiAqICAgZm9ybWF0cyBhcmUgY3VycmVudGx5IHN1cHBvcnRlZDpcbiAqXG4gKiAgICogYHZhcmlhYmxlIGluIGV4cHJlc3Npb25gIOKAkyB3aGVyZSB2YXJpYWJsZSBpcyB0aGUgdXNlciBkZWZpbmVkIGxvb3AgdmFyaWFibGUgYW5kIGBleHByZXNzaW9uYFxuICogICAgIGlzIGEgc2NvcGUgZXhwcmVzc2lvbiBnaXZpbmcgdGhlIGNvbGxlY3Rpb24gdG8gZW51bWVyYXRlLlxuICpcbiAqICAgICBGb3IgZXhhbXBsZTogYGFsYnVtIGluIGFydGlzdC5hbGJ1bXNgLlxuICpcbiAqICAgKiBgKGtleSwgdmFsdWUpIGluIGV4cHJlc3Npb25gIOKAkyB3aGVyZSBga2V5YCBhbmQgYHZhbHVlYCBjYW4gYmUgYW55IHVzZXIgZGVmaW5lZCBpZGVudGlmaWVycyxcbiAqICAgICBhbmQgYGV4cHJlc3Npb25gIGlzIHRoZSBzY29wZSBleHByZXNzaW9uIGdpdmluZyB0aGUgY29sbGVjdGlvbiB0byBlbnVtZXJhdGUuXG4gKlxuICogICAgIEZvciBleGFtcGxlOiBgKG5hbWUsIGFnZSkgaW4geydhZGFtJzoxMCwgJ2FtYWxpZSc6MTJ9YC5cbiAqXG4gKiAgICogYHZhcmlhYmxlIGluIGV4cHJlc3Npb24gdHJhY2sgYnkgdHJhY2tpbmdfZXhwcmVzc2lvbmAg4oCTIFlvdSBjYW4gYWxzbyBwcm92aWRlIGFuIG9wdGlvbmFsIHRyYWNraW5nIGV4cHJlc3Npb25cbiAqICAgICB3aGljaCBjYW4gYmUgdXNlZCB0byBhc3NvY2lhdGUgdGhlIG9iamVjdHMgaW4gdGhlIGNvbGxlY3Rpb24gd2l0aCB0aGUgRE9NIGVsZW1lbnRzLiBJZiBubyB0cmFja2luZyBleHByZXNzaW9uXG4gKiAgICAgaXMgc3BlY2lmaWVkLCBuZy1yZXBlYXQgYXNzb2NpYXRlcyBlbGVtZW50cyBieSBpZGVudGl0eS4gSXQgaXMgYW4gZXJyb3IgdG8gaGF2ZVxuICogICAgIG1vcmUgdGhhbiBvbmUgdHJhY2tpbmcgZXhwcmVzc2lvbiB2YWx1ZSByZXNvbHZlIHRvIHRoZSBzYW1lIGtleS4gKFRoaXMgd291bGQgbWVhbiB0aGF0IHR3byBkaXN0aW5jdCBvYmplY3RzIGFyZVxuICogICAgIG1hcHBlZCB0byB0aGUgc2FtZSBET00gZWxlbWVudCwgd2hpY2ggaXMgbm90IHBvc3NpYmxlLilcbiAqXG4gKiAgICAgKkRlZmF1bHQgdHJhY2tpbmc6ICRpZCgpKjogYGl0ZW0gaW4gaXRlbXNgIGlzIGVxdWl2YWxlbnQgdG8gYGl0ZW0gaW4gaXRlbXMgdHJhY2sgYnkgJGlkKGl0ZW0pYC5cbiAqICAgICBUaGlzIGltcGxpZXMgdGhhdCB0aGUgRE9NIGVsZW1lbnRzIHdpbGwgYmUgYXNzb2NpYXRlZCBieSBpdGVtIGlkZW50aXR5IGluIHRoZSBjb2xsZWN0aW9uLlxuICpcbiAqICAgICBUaGUgYnVpbHQtaW4gYCRpZCgpYCBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBhc3NpZ24gYSB1bmlxdWVcbiAqICAgICBgJCRoYXNoS2V5YCBwcm9wZXJ0eSB0byBlYWNoIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb24uIFRoaXMgcHJvcGVydHkgaXMgdGhlbiB1c2VkIGFzIGEga2V5IHRvIGFzc29jaWF0ZWQgRE9NIGVsZW1lbnRzXG4gKiAgICAgd2l0aCB0aGUgY29ycmVzcG9uZGluZyBpdGVtIGluIHRoZSBjb2xsZWN0aW9uIGJ5IGlkZW50aXR5LiBNb3ZpbmcgdGhlIHNhbWUgb2JqZWN0IHdvdWxkIG1vdmVcbiAqICAgICB0aGUgRE9NIGVsZW1lbnQgaW4gdGhlIHNhbWUgd2F5IGluIHRoZSBET00uXG4gKiAgICAgTm90ZSB0aGF0IHRoZSBkZWZhdWx0IGlkIGZ1bmN0aW9uIGRvZXMgbm90IHN1cHBvcnQgZHVwbGljYXRlIHByaW1pdGl2ZSB2YWx1ZXMgKGBudW1iZXJgLCBgc3RyaW5nYCksXG4gKiAgICAgYnV0IHN1cHBvcnRzIGR1cGxpY3RhZSBub24tcHJpbWl0aXZlIHZhbHVlcyAoYG9iamVjdGApIHRoYXQgYXJlICplcXVhbCogaW4gc2hhcGUuXG4gKlxuICogICAgICpDdXN0b20gRXhwcmVzc2lvbio6IEl0IGlzIHBvc3NpYmxlIHRvIHVzZSBhbnkgQW5ndWxhckpTIGV4cHJlc3Npb24gdG8gY29tcHV0ZSB0aGUgdHJhY2tpbmdcbiAqICAgICBpZCwgZm9yIGV4YW1wbGUgd2l0aCBhIGZ1bmN0aW9uLCBvciB1c2luZyBhIHByb3BlcnR5IG9uIHRoZSBjb2xsZWN0aW9uIGl0ZW1zLlxuICogICAgIGBpdGVtIGluIGl0ZW1zIHRyYWNrIGJ5IGl0ZW0uaWRgIGlzIGEgdHlwaWNhbCBwYXR0ZXJuIHdoZW4gdGhlIGl0ZW1zIGhhdmUgYSB1bmlxdWUgaWRlbnRpZmllcixcbiAqICAgICBlLmcuIGRhdGFiYXNlIGlkLiBJbiB0aGlzIGNhc2UgdGhlIG9iamVjdCBpZGVudGl0eSBkb2VzIG5vdCBtYXR0ZXIuIFR3byBvYmplY3RzIGFyZSBjb25zaWRlcmVkXG4gKiAgICAgZXF1aXZhbGVudCBhcyBsb25nIGFzIHRoZWlyIGBpZGAgcHJvcGVydHkgaXMgc2FtZS5cbiAqICAgICBUcmFja2luZyBieSB1bmlxdWUgaWRlbnRpZmllciBpcyB0aGUgbW9zdCBwZXJmb3JtYW50IHdheSBhbmQgc2hvdWxkIGJlIHVzZWQgd2hlbmV2ZXIgcG9zc2libGUuXG4gKlxuICogICAgICokaW5kZXgqOiBUaGlzIHNwZWNpYWwgcHJvcGVydHkgdHJhY2tzIHRoZSBjb2xsZWN0aW9uIGl0ZW1zIGJ5IHRoZWlyIGluZGV4LCBhbmRcbiAqICAgICByZS11c2VzIHRoZSBET00gZWxlbWVudHMgdGhhdCBtYXRjaCB0aGF0IGluZGV4LCBlLmcuIGBpdGVtIGluIGl0ZW1zIHRyYWNrIGJ5ICRpbmRleGAuIFRoaXMgY2FuXG4gKiAgICAgYmUgdXNlZCBmb3IgYSBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudCBpZiBubyB1bmlxdWUgaWRlbnRmaWVyIGlzIGF2YWlsYWJsZSBhbmQgdGhlIGlkZW50aXR5IG9mXG4gKiAgICAgdGhlIGNvbGxlY3Rpb24gaXRlbXMgY2Fubm90IGJlIGVhc2lseSBjb21wdXRlZC4gSXQgYWxzbyBhbGxvd3MgZHVwbGljYXRlcy5cbiAqXG4gKiAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICAgICAgIDxzdHJvbmc+Tm90ZTo8L3N0cm9uZz4gUmUtdXNpbmcgRE9NIGVsZW1lbnRzIGNhbiBoYXZlIHVuZm9yZXNlZW4gZWZmZWN0cy4gUmVhZCB0aGVcbiAqICAgICAgIHtAbGluayBuZ1JlcGVhdCN0cmFja2luZy1hbmQtZHVwbGljYXRlcyBzZWN0aW9uIG9uIHRyYWNraW5nIGFuZCBkdXBsaWNhdGVzfSBmb3JcbiAqICAgICAgIG1vcmUgaW5mby5cbiAqICAgICA8L2Rpdj5cbiAqXG4gKiAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICAgICAgIDxzdHJvbmc+Tm90ZTo8L3N0cm9uZz4gdGhlIGB0cmFjayBieWAgZXhwcmVzc2lvbiBtdXN0IGNvbWUgbGFzdCAtIGFmdGVyIGFueSBmaWx0ZXJzLCBhbmQgdGhlIGFsaWFzIGV4cHJlc3Npb246XG4gKiAgICAgICBgaXRlbSBpbiBpdGVtcyB8IGZpbHRlcjpzZWFyY2hUZXh0IGFzIHJlc3VsdHMgIHRyYWNrIGJ5IGl0ZW0uaWRgXG4gKiAgICAgPC9kaXY+XG4gKlxuICogICAqIGB2YXJpYWJsZSBpbiBleHByZXNzaW9uIGFzIGFsaWFzX2V4cHJlc3Npb25gIOKAkyBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbiBvcHRpb25hbCBhbGlhcyBleHByZXNzaW9uIHdoaWNoIHdpbGwgdGhlbiBzdG9yZSB0aGVcbiAqICAgICBpbnRlcm1lZGlhdGUgcmVzdWx0cyBvZiB0aGUgcmVwZWF0ZXIgYWZ0ZXIgdGhlIGZpbHRlcnMgaGF2ZSBiZWVuIGFwcGxpZWQuIFR5cGljYWxseSB0aGlzIGlzIHVzZWQgdG8gcmVuZGVyIGEgc3BlY2lhbCBtZXNzYWdlXG4gKiAgICAgd2hlbiBhIGZpbHRlciBpcyBhY3RpdmUgb24gdGhlIHJlcGVhdGVyLCBidXQgdGhlIGZpbHRlcmVkIHJlc3VsdCBzZXQgaXMgZW1wdHkuXG4gKlxuICogICAgIEZvciBleGFtcGxlOiBgaXRlbSBpbiBpdGVtcyB8IGZpbHRlcjp4IGFzIHJlc3VsdHNgIHdpbGwgc3RvcmUgdGhlIGZyYWdtZW50IG9mIHRoZSByZXBlYXRlZCBpdGVtcyBhcyBgcmVzdWx0c2AsIGJ1dCBvbmx5IGFmdGVyXG4gKiAgICAgdGhlIGl0ZW1zIGhhdmUgYmVlbiBwcm9jZXNzZWQgdGhyb3VnaCB0aGUgZmlsdGVyLlxuICpcbiAqICAgICBQbGVhc2Ugbm90ZSB0aGF0IGBhcyBbdmFyaWFibGUgbmFtZV0gaXMgbm90IGFuIG9wZXJhdG9yIGJ1dCByYXRoZXIgYSBwYXJ0IG9mIG5nUmVwZWF0XG4gKiAgICAgbWljcm8tc3ludGF4IHNvIGl0IGNhbiBiZSB1c2VkIG9ubHkgYWZ0ZXIgYWxsIGZpbHRlcnMgKGFuZCBub3QgYXMgb3BlcmF0b3IsIGluc2lkZSBhbiBleHByZXNzaW9uKS5cbiAqXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBpdGVtIGluIGl0ZW1zIHwgZmlsdGVyIDogeCB8IG9yZGVyQnkgOiBvcmRlciB8IGxpbWl0VG8gOiBsaW1pdCBhcyByZXN1bHRzIHRyYWNrIGJ5IGl0ZW0uaWRgIC5cbiAqXG4gKiBAZXhhbXBsZVxuICogVGhpcyBleGFtcGxlIHVzZXMgYG5nUmVwZWF0YCB0byBkaXNwbGF5IGEgbGlzdCBvZiBwZW9wbGUuIEEgZmlsdGVyIGlzIHVzZWQgdG8gcmVzdHJpY3QgdGhlIGRpc3BsYXllZFxuICogcmVzdWx0cyBieSBuYW1lIG9yIGJ5IGFnZS4gTmV3IChlbnRlcmluZykgYW5kIHJlbW92ZWQgKGxlYXZpbmcpIGl0ZW1zIGFyZSBhbmltYXRlZC5cbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdSZXBlYXRcIiBuYW1lPVwibmdSZXBlYXRcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwicmVwZWF0Q29udHJvbGxlclwiPlxuICAgICAgICBJIGhhdmUge3tmcmllbmRzLmxlbmd0aH19IGZyaWVuZHMuIFRoZXkgYXJlOlxuICAgICAgICA8aW5wdXQgdHlwZT1cInNlYXJjaFwiIG5nLW1vZGVsPVwicVwiIHBsYWNlaG9sZGVyPVwiZmlsdGVyIGZyaWVuZHMuLi5cIiBhcmlhLWxhYmVsPVwiZmlsdGVyIGZyaWVuZHNcIiAvPlxuICAgICAgICA8dWwgY2xhc3M9XCJleGFtcGxlLWFuaW1hdGUtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGxpIGNsYXNzPVwiYW5pbWF0ZS1yZXBlYXRcIiBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB8IGZpbHRlcjpxIGFzIHJlc3VsdHMgdHJhY2sgYnkgZnJpZW5kLm5hbWVcIj5cbiAgICAgICAgICAgIFt7eyRpbmRleCArIDF9fV0ge3tmcmllbmQubmFtZX19IHdobyBpcyB7e2ZyaWVuZC5hZ2V9fSB5ZWFycyBvbGQuXG4gICAgICAgICAgPC9saT5cbiAgICAgICAgICA8bGkgY2xhc3M9XCJhbmltYXRlLXJlcGVhdFwiIG5nLWlmPVwicmVzdWx0cy5sZW5ndGggPT09IDBcIj5cbiAgICAgICAgICAgIDxzdHJvbmc+Tm8gcmVzdWx0cyBmb3VuZC4uLjwvc3Ryb25nPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ25nUmVwZWF0JywgWyduZ0FuaW1hdGUnXSkuY29udHJvbGxlcigncmVwZWF0Q29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IFtcbiAgICAgICAgICB7bmFtZTonSm9obicsIGFnZToyNSwgZ2VuZGVyOidib3knfSxcbiAgICAgICAgICB7bmFtZTonSmVzc2llJywgYWdlOjMwLCBnZW5kZXI6J2dpcmwnfSxcbiAgICAgICAgICB7bmFtZTonSm9oYW5uYScsIGFnZToyOCwgZ2VuZGVyOidnaXJsJ30sXG4gICAgICAgICAge25hbWU6J0pveScsIGFnZToxNSwgZ2VuZGVyOidnaXJsJ30sXG4gICAgICAgICAge25hbWU6J01hcnknLCBhZ2U6MjgsIGdlbmRlcjonZ2lybCd9LFxuICAgICAgICAgIHtuYW1lOidQZXRlcicsIGFnZTo5NSwgZ2VuZGVyOidib3knfSxcbiAgICAgICAgICB7bmFtZTonU2ViYXN0aWFuJywgYWdlOjUwLCBnZW5kZXI6J2JveSd9LFxuICAgICAgICAgIHtuYW1lOidFcmlrYScsIGFnZToyNywgZ2VuZGVyOidnaXJsJ30sXG4gICAgICAgICAge25hbWU6J1BhdHJpY2snLCBhZ2U6NDAsIGdlbmRlcjonYm95J30sXG4gICAgICAgICAge25hbWU6J1NhbWFudGhhJywgYWdlOjYwLCBnZW5kZXI6J2dpcmwnfVxuICAgICAgICBdO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLmV4YW1wbGUtYW5pbWF0ZS1jb250YWluZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOndoaXRlO1xuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBsaXN0LXN0eWxlOm5vbmU7XG4gICAgICAgIG1hcmdpbjowO1xuICAgICAgICBwYWRkaW5nOjAgMTBweDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtcmVwZWF0IHtcbiAgICAgICAgbGluZS1oZWlnaHQ6MzBweDtcbiAgICAgICAgbGlzdC1zdHlsZTpub25lO1xuICAgICAgICBib3gtc2l6aW5nOmJvcmRlci1ib3g7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1tb3ZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWVudGVyLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWxlYXZlIHtcbiAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbW92ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1lbnRlciB7XG4gICAgICAgIG9wYWNpdHk6MDtcbiAgICAgICAgbWF4LWhlaWdodDowO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbGVhdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbW92ZS5uZy1tb3ZlLWFjdGl2ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1lbnRlci5uZy1lbnRlci1hY3RpdmUge1xuICAgICAgICBvcGFjaXR5OjE7XG4gICAgICAgIG1heC1oZWlnaHQ6MzBweDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgdmFyIGZyaWVuZHMgPSBlbGVtZW50LmFsbChieS5yZXBlYXRlcignZnJpZW5kIGluIGZyaWVuZHMnKSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmVuZGVyIGluaXRpYWwgZGF0YSBzZXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KGZyaWVuZHMuY291bnQoKSkudG9CZSgxMCk7XG4gICAgICAgIGV4cGVjdChmcmllbmRzLmdldCgwKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1sxXSBKb2huIHdobyBpcyAyNSB5ZWFycyBvbGQuJyk7XG4gICAgICAgIGV4cGVjdChmcmllbmRzLmdldCgxKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1syXSBKZXNzaWUgd2hvIGlzIDMwIHllYXJzIG9sZC4nKTtcbiAgICAgICAgZXhwZWN0KGZyaWVuZHMubGFzdCgpLmdldFRleHQoKSkudG9FcXVhbCgnWzEwXSBTYW1hbnRoYSB3aG8gaXMgNjAgeWVhcnMgb2xkLicpO1xuICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdmcmllbmRzLmxlbmd0aCcpKS5nZXRUZXh0KCkpXG4gICAgICAgICAgICAudG9NYXRjaChcIkkgaGF2ZSAxMCBmcmllbmRzLiBUaGV5IGFyZTpcIik7XG4gICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgdXBkYXRlIHJlcGVhdGVyIHdoZW4gZmlsdGVyIHByZWRpY2F0ZSBjaGFuZ2VzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZnJpZW5kcy5jb3VudCgpKS50b0JlKDEwKTtcblxuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgncScpKS5zZW5kS2V5cygnbWEnKTtcblxuICAgICAgICAgZXhwZWN0KGZyaWVuZHMuY291bnQoKSkudG9CZSgyKTtcbiAgICAgICAgIGV4cGVjdChmcmllbmRzLmdldCgwKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1sxXSBNYXJ5IHdobyBpcyAyOCB5ZWFycyBvbGQuJyk7XG4gICAgICAgICBleHBlY3QoZnJpZW5kcy5sYXN0KCkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMl0gU2FtYW50aGEgd2hvIGlzIDYwIHllYXJzIG9sZC4nKTtcbiAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1JlcGVhdERpcmVjdGl2ZSA9IFsnJHBhcnNlJywgJyRhbmltYXRlJywgJyRjb21waWxlJywgZnVuY3Rpb24oJHBhcnNlLCAkYW5pbWF0ZSwgJGNvbXBpbGUpIHtcbiAgdmFyIE5HX1JFTU9WRUQgPSAnJCROR19SRU1PVkVEJztcbiAgdmFyIG5nUmVwZWF0TWluRXJyID0gbWluRXJyKCduZ1JlcGVhdCcpO1xuXG4gIHZhciB1cGRhdGVTY29wZSA9IGZ1bmN0aW9uKHNjb3BlLCBpbmRleCwgdmFsdWVJZGVudGlmaWVyLCB2YWx1ZSwga2V5SWRlbnRpZmllciwga2V5LCBhcnJheUxlbmd0aCkge1xuICAgIC8vIFRPRE8ocGVyZik6IGdlbmVyYXRlIHNldHRlcnMgdG8gc2hhdmUgb2ZmIH40MG1zIG9yIDEtMS41JVxuICAgIHNjb3BlW3ZhbHVlSWRlbnRpZmllcl0gPSB2YWx1ZTtcbiAgICBpZiAoa2V5SWRlbnRpZmllcikgc2NvcGVba2V5SWRlbnRpZmllcl0gPSBrZXk7XG4gICAgc2NvcGUuJGluZGV4ID0gaW5kZXg7XG4gICAgc2NvcGUuJGZpcnN0ID0gKGluZGV4ID09PSAwKTtcbiAgICBzY29wZS4kbGFzdCA9IChpbmRleCA9PT0gKGFycmF5TGVuZ3RoIC0gMSkpO1xuICAgIHNjb3BlLiRtaWRkbGUgPSAhKHNjb3BlLiRmaXJzdCB8fCBzY29wZS4kbGFzdCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgICBzY29wZS4kb2RkID0gIShzY29wZS4kZXZlbiA9IChpbmRleCAmIDEpID09PSAwKTtcbiAgfTtcblxuICB2YXIgZ2V0QmxvY2tTdGFydCA9IGZ1bmN0aW9uKGJsb2NrKSB7XG4gICAgcmV0dXJuIGJsb2NrLmNsb25lWzBdO1xuICB9O1xuXG4gIHZhciBnZXRCbG9ja0VuZCA9IGZ1bmN0aW9uKGJsb2NrKSB7XG4gICAgcmV0dXJuIGJsb2NrLmNsb25lW2Jsb2NrLmNsb25lLmxlbmd0aCAtIDFdO1xuICB9O1xuXG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIG11bHRpRWxlbWVudDogdHJ1ZSxcbiAgICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gICAgcHJpb3JpdHk6IDEwMDAsXG4gICAgdGVybWluYWw6IHRydWUsXG4gICAgJCR0bGI6IHRydWUsXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdSZXBlYXRDb21waWxlKCRlbGVtZW50LCAkYXR0cikge1xuICAgICAgdmFyIGV4cHJlc3Npb24gPSAkYXR0ci5uZ1JlcGVhdDtcbiAgICAgIHZhciBuZ1JlcGVhdEVuZENvbW1lbnQgPSAkY29tcGlsZS4kJGNyZWF0ZUNvbW1lbnQoJ2VuZCBuZ1JlcGVhdCcsIGV4cHJlc3Npb24pO1xuXG4gICAgICB2YXIgbWF0Y2ggPSBleHByZXNzaW9uLm1hdGNoKC9eXFxzKihbXFxzXFxTXSs/KVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrYXNcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT9cXHMqJC8pO1xuXG4gICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHRocm93IG5nUmVwZWF0TWluRXJyKCdpZXhwJywgJ0V4cGVjdGVkIGV4cHJlc3Npb24gaW4gZm9ybSBvZiBcXCdfaXRlbV8gaW4gX2NvbGxlY3Rpb25fWyB0cmFjayBieSBfaWRfXVxcJyBidXQgZ290IFxcJ3swfVxcJy4nLFxuICAgICAgICAgICAgZXhwcmVzc2lvbik7XG4gICAgICB9XG5cbiAgICAgIHZhciBsaHMgPSBtYXRjaFsxXTtcbiAgICAgIHZhciByaHMgPSBtYXRjaFsyXTtcbiAgICAgIHZhciBhbGlhc0FzID0gbWF0Y2hbM107XG4gICAgICB2YXIgdHJhY2tCeUV4cCA9IG1hdGNoWzRdO1xuXG4gICAgICBtYXRjaCA9IGxocy5tYXRjaCgvXig/OihcXHMqWyRcXHddKyl8XFwoXFxzKihbJFxcd10rKVxccyosXFxzKihbJFxcd10rKVxccypcXCkpJC8pO1xuXG4gICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHRocm93IG5nUmVwZWF0TWluRXJyKCdpaWRleHAnLCAnXFwnX2l0ZW1fXFwnIGluIFxcJ19pdGVtXyBpbiBfY29sbGVjdGlvbl9cXCcgc2hvdWxkIGJlIGFuIGlkZW50aWZpZXIgb3IgXFwnKF9rZXlfLCBfdmFsdWVfKVxcJyBleHByZXNzaW9uLCBidXQgZ290IFxcJ3swfVxcJy4nLFxuICAgICAgICAgICAgbGhzKTtcbiAgICAgIH1cbiAgICAgIHZhciB2YWx1ZUlkZW50aWZpZXIgPSBtYXRjaFszXSB8fCBtYXRjaFsxXTtcbiAgICAgIHZhciBrZXlJZGVudGlmaWVyID0gbWF0Y2hbMl07XG5cbiAgICAgIGlmIChhbGlhc0FzICYmICghL15bJGEtekEtWl9dWyRhLXpBLVowLTlfXSokLy50ZXN0KGFsaWFzQXMpIHx8XG4gICAgICAgICAgL14obnVsbHx1bmRlZmluZWR8dGhpc3xcXCRpbmRleHxcXCRmaXJzdHxcXCRtaWRkbGV8XFwkbGFzdHxcXCRldmVufFxcJG9kZHxcXCRwYXJlbnR8XFwkcm9vdHxcXCRpZCkkLy50ZXN0KGFsaWFzQXMpKSkge1xuICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignYmFkaWRlbnQnLCAnYWxpYXMgXFwnezB9XFwnIGlzIGludmFsaWQgLS0tIG11c3QgYmUgYSB2YWxpZCBKUyBpZGVudGlmaWVyIHdoaWNoIGlzIG5vdCBhIHJlc2VydmVkIG5hbWUuJyxcbiAgICAgICAgICBhbGlhc0FzKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRyYWNrQnlFeHBHZXR0ZXIsIHRyYWNrQnlJZEV4cEZuLCB0cmFja0J5SWRBcnJheUZuLCB0cmFja0J5SWRPYmpGbjtcbiAgICAgIHZhciBoYXNoRm5Mb2NhbHMgPSB7JGlkOiBoYXNoS2V5fTtcblxuICAgICAgaWYgKHRyYWNrQnlFeHApIHtcbiAgICAgICAgdHJhY2tCeUV4cEdldHRlciA9ICRwYXJzZSh0cmFja0J5RXhwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyYWNrQnlJZEFycmF5Rm4gPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGhhc2hLZXkodmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICB0cmFja0J5SWRPYmpGbiA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ1JlcGVhdExpbmsoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIsIGN0cmwsICR0cmFuc2NsdWRlKSB7XG5cbiAgICAgICAgaWYgKHRyYWNrQnlFeHBHZXR0ZXIpIHtcbiAgICAgICAgICB0cmFja0J5SWRFeHBGbiA9IGZ1bmN0aW9uKGtleSwgdmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICAvLyBhc3NpZ24ga2V5LCB2YWx1ZSwgYW5kICRpbmRleCB0byB0aGUgbG9jYWxzIHNvIHRoYXQgdGhleSBjYW4gYmUgdXNlZCBpbiBoYXNoIGZ1bmN0aW9uc1xuICAgICAgICAgICAgaWYgKGtleUlkZW50aWZpZXIpIGhhc2hGbkxvY2Fsc1trZXlJZGVudGlmaWVyXSA9IGtleTtcbiAgICAgICAgICAgIGhhc2hGbkxvY2Fsc1t2YWx1ZUlkZW50aWZpZXJdID0gdmFsdWU7XG4gICAgICAgICAgICBoYXNoRm5Mb2NhbHMuJGluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICByZXR1cm4gdHJhY2tCeUV4cEdldHRlcigkc2NvcGUsIGhhc2hGbkxvY2Fscyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0b3JlIGEgbGlzdCBvZiBlbGVtZW50cyBmcm9tIHByZXZpb3VzIHJ1bi4gVGhpcyBpcyBhIGhhc2ggd2hlcmUga2V5IGlzIHRoZSBpdGVtIGZyb20gdGhlXG4gICAgICAgIC8vIGl0ZXJhdG9yLCBhbmQgdGhlIHZhbHVlIGlzIG9iamVjdHMgd2l0aCBmb2xsb3dpbmcgcHJvcGVydGllcy5cbiAgICAgICAgLy8gICAtIHNjb3BlOiBib3VuZCBzY29wZVxuICAgICAgICAvLyAgIC0gY2xvbmU6IHByZXZpb3VzIGVsZW1lbnQuXG4gICAgICAgIC8vICAgLSBpbmRleDogcG9zaXRpb25cbiAgICAgICAgLy9cbiAgICAgICAgLy8gV2UgYXJlIHVzaW5nIG5vLXByb3RvIG9iamVjdCBzbyB0aGF0IHdlIGRvbid0IG5lZWQgdG8gZ3VhcmQgYWdhaW5zdCBpbmhlcml0ZWQgcHJvcHMgdmlhXG4gICAgICAgIC8vIGhhc093blByb3BlcnR5LlxuICAgICAgICB2YXIgbGFzdEJsb2NrTWFwID0gY3JlYXRlTWFwKCk7XG5cbiAgICAgICAgLy93YXRjaCBwcm9wc1xuICAgICAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihyaHMsIGZ1bmN0aW9uIG5nUmVwZWF0QWN0aW9uKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICB2YXIgaW5kZXgsIGxlbmd0aCxcbiAgICAgICAgICAgICAgcHJldmlvdXNOb2RlID0gJGVsZW1lbnRbMF0sICAgICAvLyBub2RlIHRoYXQgY2xvbmVkIG5vZGVzIHNob3VsZCBiZSBpbnNlcnRlZCBhZnRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemVkIHRvIHRoZSBjb21tZW50IG5vZGUgYW5jaG9yXG4gICAgICAgICAgICAgIG5leHROb2RlLFxuICAgICAgICAgICAgICAvLyBTYW1lIGFzIGxhc3RCbG9ja01hcCBidXQgaXQgaGFzIHRoZSBjdXJyZW50IHN0YXRlLiBJdCB3aWxsIGJlY29tZSB0aGVcbiAgICAgICAgICAgICAgLy8gbGFzdEJsb2NrTWFwIG9uIHRoZSBuZXh0IGl0ZXJhdGlvbi5cbiAgICAgICAgICAgICAgbmV4dEJsb2NrTWFwID0gY3JlYXRlTWFwKCksXG4gICAgICAgICAgICAgIGNvbGxlY3Rpb25MZW5ndGgsXG4gICAgICAgICAgICAgIGtleSwgdmFsdWUsIC8vIGtleS92YWx1ZSBvZiBpdGVyYXRpb25cbiAgICAgICAgICAgICAgdHJhY2tCeUlkLFxuICAgICAgICAgICAgICB0cmFja0J5SWRGbixcbiAgICAgICAgICAgICAgY29sbGVjdGlvbktleXMsXG4gICAgICAgICAgICAgIGJsb2NrLCAgICAgICAvLyBsYXN0IG9iamVjdCBpbmZvcm1hdGlvbiB7c2NvcGUsIGVsZW1lbnQsIGlkfVxuICAgICAgICAgICAgICBuZXh0QmxvY2tPcmRlcixcbiAgICAgICAgICAgICAgZWxlbWVudHNUb1JlbW92ZTtcblxuICAgICAgICAgIGlmIChhbGlhc0FzKSB7XG4gICAgICAgICAgICAkc2NvcGVbYWxpYXNBc10gPSBjb2xsZWN0aW9uO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc0FycmF5TGlrZShjb2xsZWN0aW9uKSkge1xuICAgICAgICAgICAgY29sbGVjdGlvbktleXMgPSBjb2xsZWN0aW9uO1xuICAgICAgICAgICAgdHJhY2tCeUlkRm4gPSB0cmFja0J5SWRFeHBGbiB8fCB0cmFja0J5SWRBcnJheUZuO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cmFja0J5SWRGbiA9IHRyYWNrQnlJZEV4cEZuIHx8IHRyYWNrQnlJZE9iakZuO1xuICAgICAgICAgICAgLy8gaWYgb2JqZWN0LCBleHRyYWN0IGtleXMsIGluIGVudW1lcmF0aW9uIG9yZGVyLCB1bnNvcnRlZFxuICAgICAgICAgICAgY29sbGVjdGlvbktleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW1LZXkgaW4gY29sbGVjdGlvbikge1xuICAgICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb2xsZWN0aW9uLCBpdGVtS2V5KSAmJiBpdGVtS2V5LmNoYXJBdCgwKSAhPT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbktleXMucHVzaChpdGVtS2V5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbGxlY3Rpb25MZW5ndGggPSBjb2xsZWN0aW9uS2V5cy5sZW5ndGg7XG4gICAgICAgICAgbmV4dEJsb2NrT3JkZXIgPSBuZXcgQXJyYXkoY29sbGVjdGlvbkxlbmd0aCk7XG5cbiAgICAgICAgICAvLyBsb2NhdGUgZXhpc3RpbmcgaXRlbXNcbiAgICAgICAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBjb2xsZWN0aW9uTGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBrZXkgPSAoY29sbGVjdGlvbiA9PT0gY29sbGVjdGlvbktleXMpID8gaW5kZXggOiBjb2xsZWN0aW9uS2V5c1tpbmRleF07XG4gICAgICAgICAgICB2YWx1ZSA9IGNvbGxlY3Rpb25ba2V5XTtcbiAgICAgICAgICAgIHRyYWNrQnlJZCA9IHRyYWNrQnlJZEZuKGtleSwgdmFsdWUsIGluZGV4KTtcbiAgICAgICAgICAgIGlmIChsYXN0QmxvY2tNYXBbdHJhY2tCeUlkXSkge1xuICAgICAgICAgICAgICAvLyBmb3VuZCBwcmV2aW91c2x5IHNlZW4gYmxvY2tcbiAgICAgICAgICAgICAgYmxvY2sgPSBsYXN0QmxvY2tNYXBbdHJhY2tCeUlkXTtcbiAgICAgICAgICAgICAgZGVsZXRlIGxhc3RCbG9ja01hcFt0cmFja0J5SWRdO1xuICAgICAgICAgICAgICBuZXh0QmxvY2tNYXBbdHJhY2tCeUlkXSA9IGJsb2NrO1xuICAgICAgICAgICAgICBuZXh0QmxvY2tPcmRlcltpbmRleF0gPSBibG9jaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmV4dEJsb2NrTWFwW3RyYWNrQnlJZF0pIHtcbiAgICAgICAgICAgICAgLy8gaWYgY29sbGlzaW9uIGRldGVjdGVkLiByZXN0b3JlIGxhc3RCbG9ja01hcCBhbmQgdGhyb3cgYW4gZXJyb3JcbiAgICAgICAgICAgICAgZm9yRWFjaChuZXh0QmxvY2tPcmRlciwgZnVuY3Rpb24oYmxvY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2sgJiYgYmxvY2suc2NvcGUpIGxhc3RCbG9ja01hcFtibG9jay5pZF0gPSBibG9jaztcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHRocm93IG5nUmVwZWF0TWluRXJyKCdkdXBlcycsXG4gICAgICAgICAgICAgICAgICAnRHVwbGljYXRlcyBpbiBhIHJlcGVhdGVyIGFyZSBub3QgYWxsb3dlZC4gVXNlIFxcJ3RyYWNrIGJ5XFwnIGV4cHJlc3Npb24gdG8gc3BlY2lmeSB1bmlxdWUga2V5cy4gUmVwZWF0ZXI6IHswfSwgRHVwbGljYXRlIGtleTogezF9LCBEdXBsaWNhdGUgdmFsdWU6IHsyfScsXG4gICAgICAgICAgICAgICAgICBleHByZXNzaW9uLCB0cmFja0J5SWQsIHZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIG5ldyBuZXZlciBiZWZvcmUgc2VlbiBibG9ja1xuICAgICAgICAgICAgICBuZXh0QmxvY2tPcmRlcltpbmRleF0gPSB7aWQ6IHRyYWNrQnlJZCwgc2NvcGU6IHVuZGVmaW5lZCwgY2xvbmU6IHVuZGVmaW5lZH07XG4gICAgICAgICAgICAgIG5leHRCbG9ja01hcFt0cmFja0J5SWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyByZW1vdmUgbGVmdG92ZXIgaXRlbXNcbiAgICAgICAgICBmb3IgKHZhciBibG9ja0tleSBpbiBsYXN0QmxvY2tNYXApIHtcbiAgICAgICAgICAgIGJsb2NrID0gbGFzdEJsb2NrTWFwW2Jsb2NrS2V5XTtcbiAgICAgICAgICAgIGVsZW1lbnRzVG9SZW1vdmUgPSBnZXRCbG9ja05vZGVzKGJsb2NrLmNsb25lKTtcbiAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKGVsZW1lbnRzVG9SZW1vdmUpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRzVG9SZW1vdmVbMF0ucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAvLyBpZiB0aGUgZWxlbWVudCB3YXMgbm90IHJlbW92ZWQgeWV0IGJlY2F1c2Ugb2YgcGVuZGluZyBhbmltYXRpb24sIG1hcmsgaXQgYXMgZGVsZXRlZFxuICAgICAgICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiBpZ25vcmUgaXQgbGF0ZXJcbiAgICAgICAgICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzVG9SZW1vdmVbaW5kZXhdW05HX1JFTU9WRURdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxvY2suc2NvcGUuJGRlc3Ryb3koKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB3ZSBhcmUgbm90IHVzaW5nIGZvckVhY2ggZm9yIHBlcmYgcmVhc29ucyAodHJ5aW5nIHRvIGF2b2lkICNjYWxsKVxuICAgICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGNvbGxlY3Rpb25MZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGtleSA9IChjb2xsZWN0aW9uID09PSBjb2xsZWN0aW9uS2V5cykgPyBpbmRleCA6IGNvbGxlY3Rpb25LZXlzW2luZGV4XTtcbiAgICAgICAgICAgIHZhbHVlID0gY29sbGVjdGlvbltrZXldO1xuICAgICAgICAgICAgYmxvY2sgPSBuZXh0QmxvY2tPcmRlcltpbmRleF07XG5cbiAgICAgICAgICAgIGlmIChibG9jay5zY29wZSkge1xuICAgICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGFscmVhZHkgc2VlbiB0aGlzIG9iamVjdCwgdGhlbiB3ZSBuZWVkIHRvIHJldXNlIHRoZVxuICAgICAgICAgICAgICAvLyBhc3NvY2lhdGVkIHNjb3BlL2VsZW1lbnRcblxuICAgICAgICAgICAgICBuZXh0Tm9kZSA9IHByZXZpb3VzTm9kZTtcblxuICAgICAgICAgICAgICAvLyBza2lwIG5vZGVzIHRoYXQgYXJlIGFscmVhZHkgcGVuZGluZyByZW1vdmFsIHZpYSBsZWF2ZSBhbmltYXRpb25cbiAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dE5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgIH0gd2hpbGUgKG5leHROb2RlICYmIG5leHROb2RlW05HX1JFTU9WRURdKTtcblxuICAgICAgICAgICAgICBpZiAoZ2V0QmxvY2tTdGFydChibG9jaykgIT09IG5leHROb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgaXRlbSB3aGljaCBnb3QgbW92ZWRcbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5tb3ZlKGdldEJsb2NrTm9kZXMoYmxvY2suY2xvbmUpLCBudWxsLCBwcmV2aW91c05vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHByZXZpb3VzTm9kZSA9IGdldEJsb2NrRW5kKGJsb2NrKTtcbiAgICAgICAgICAgICAgdXBkYXRlU2NvcGUoYmxvY2suc2NvcGUsIGluZGV4LCB2YWx1ZUlkZW50aWZpZXIsIHZhbHVlLCBrZXlJZGVudGlmaWVyLCBrZXksIGNvbGxlY3Rpb25MZW5ndGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gbmV3IGl0ZW0gd2hpY2ggd2UgZG9uJ3Qga25vdyBhYm91dFxuICAgICAgICAgICAgICAkdHJhbnNjbHVkZShmdW5jdGlvbiBuZ1JlcGVhdFRyYW5zY2x1ZGUoY2xvbmUsIHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgYmxvY2suc2NvcGUgPSBzY29wZTtcbiAgICAgICAgICAgICAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9uZS12cy1jcmVhdGVjb21tZW50XG4gICAgICAgICAgICAgICAgdmFyIGVuZE5vZGUgPSBuZ1JlcGVhdEVuZENvbW1lbnQuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjbG9uZVtjbG9uZS5sZW5ndGgrK10gPSBlbmROb2RlO1xuXG4gICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2xvbmUsIG51bGwsIHByZXZpb3VzTm9kZSk7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNOb2RlID0gZW5kTm9kZTtcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBvbmx5IG5lZWQgdGhlIGZpcnN0L2xhc3Qgbm9kZSBvZiB0aGUgY2xvbmVkIG5vZGVzLlxuICAgICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHdlIG5lZWQgdG8ga2VlcCB0aGUgcmVmZXJlbmNlIHRvIHRoZSBqcWxpdGUgd3JhcHBlciBhcyBpdCBtaWdodCBiZSBjaGFuZ2VkIGxhdGVyXG4gICAgICAgICAgICAgICAgLy8gYnkgYSBkaXJlY3RpdmUgd2l0aCB0ZW1wbGF0ZVVybCB3aGVuIGl0cyB0ZW1wbGF0ZSBhcnJpdmVzLlxuICAgICAgICAgICAgICAgIGJsb2NrLmNsb25lID0gY2xvbmU7XG4gICAgICAgICAgICAgICAgbmV4dEJsb2NrTWFwW2Jsb2NrLmlkXSA9IGJsb2NrO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVNjb3BlKGJsb2NrLnNjb3BlLCBpbmRleCwgdmFsdWVJZGVudGlmaWVyLCB2YWx1ZSwga2V5SWRlbnRpZmllciwga2V5LCBjb2xsZWN0aW9uTGVuZ3RoKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxhc3RCbG9ja01hcCA9IG5leHRCbG9ja01hcDtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG52YXIgTkdfSElERV9DTEFTUyA9ICduZy1oaWRlJztcbnZhciBOR19ISURFX0lOX1BST0dSRVNTX0NMQVNTID0gJ25nLWhpZGUtYW5pbWF0ZSc7XG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU2hvd1xuICogQG11bHRpRWxlbWVudFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ1Nob3dgIGRpcmVjdGl2ZSBzaG93cyBvciBoaWRlcyB0aGUgZ2l2ZW4gSFRNTCBlbGVtZW50IGJhc2VkIG9uIHRoZSBleHByZXNzaW9uIHByb3ZpZGVkIHRvXG4gKiB0aGUgYG5nU2hvd2AgYXR0cmlidXRlLlxuICpcbiAqIFRoZSBlbGVtZW50IGlzIHNob3duIG9yIGhpZGRlbiBieSByZW1vdmluZyBvciBhZGRpbmcgdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIG9udG8gdGhlIGVsZW1lbnQuXG4gKiBUaGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcHJlZGVmaW5lZCBpbiBBbmd1bGFySlMgYW5kIHNldHMgdGhlIGRpc3BsYXkgc3R5bGUgdG8gbm9uZSAodXNpbmcgYW5cbiAqIGAhaW1wb3J0YW50YCBmbGFnKS4gRm9yIENTUCBtb2RlIHBsZWFzZSBhZGQgYGFuZ3VsYXItY3NwLmNzc2AgdG8geW91ciBIVE1MIGZpbGUgKHNlZVxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NzcCBuZ0NzcH0pLlxuICpcbiAqIGBgYGh0bWxcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyB0cnV0aHkgKGVsZW1lbnQgaXMgdmlzaWJsZSkgLS0+XG4gKiA8ZGl2IG5nLXNob3c9XCJteVZhbHVlXCI+PC9kaXY+XG4gKlxuICogPCEtLSB3aGVuICRzY29wZS5teVZhbHVlIGlzIGZhbHN5IChlbGVtZW50IGlzIGhpZGRlbikgLS0+XG4gKiA8ZGl2IG5nLXNob3c9XCJteVZhbHVlXCIgY2xhc3M9XCJuZy1oaWRlXCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBXaGVuIHRoZSBgbmdTaG93YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIGZhbHN5IHZhbHVlIHRoZW4gdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIGlzIGFkZGVkXG4gKiB0byB0aGUgY2xhc3MgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50IGNhdXNpbmcgaXQgdG8gYmVjb21lIGhpZGRlbi4gV2hlbiB0cnV0aHksIHRoZSBgLm5nLWhpZGVgXG4gKiBDU1MgY2xhc3MgaXMgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50IGNhdXNpbmcgdGhlIGVsZW1lbnQgbm90IHRvIGFwcGVhciBoaWRkZW4uXG4gKlxuICogIyMgV2h5IGlzIGAhaW1wb3J0YW50YCB1c2VkP1xuICpcbiAqIFlvdSBtYXkgYmUgd29uZGVyaW5nIHdoeSBgIWltcG9ydGFudGAgaXMgdXNlZCBmb3IgdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzLiBUaGlzIGlzIGJlY2F1c2UgdGhlXG4gKiBgLm5nLWhpZGVgIHNlbGVjdG9yIGNhbiBiZSBlYXNpbHkgb3ZlcnJpZGRlbiBieSBoZWF2aWVyIHNlbGVjdG9ycy4gRm9yIGV4YW1wbGUsIHNvbWV0aGluZyBhc1xuICogc2ltcGxlIGFzIGNoYW5naW5nIHRoZSBkaXNwbGF5IHN0eWxlIG9uIGEgSFRNTCBsaXN0IGl0ZW0gd291bGQgbWFrZSBoaWRkZW4gZWxlbWVudHMgYXBwZWFyXG4gKiB2aXNpYmxlLiBUaGlzIGFsc28gYmVjb21lcyBhIGJpZ2dlciBpc3N1ZSB3aGVuIGRlYWxpbmcgd2l0aCBDU1MgZnJhbWV3b3Jrcy5cbiAqXG4gKiBCeSB1c2luZyBgIWltcG9ydGFudGAsIHRoZSBzaG93IGFuZCBoaWRlIGJlaGF2aW9yIHdpbGwgd29yayBhcyBleHBlY3RlZCBkZXNwaXRlIGFueSBjbGFzaCBiZXR3ZWVuXG4gKiBDU1Mgc2VsZWN0b3Igc3BlY2lmaWNpdHkgKHdoZW4gYCFpbXBvcnRhbnRgIGlzbid0IHVzZWQgd2l0aCBhbnkgY29uZmxpY3Rpbmcgc3R5bGVzKS4gSWYgYVxuICogZGV2ZWxvcGVyIGNob29zZXMgdG8gb3ZlcnJpZGUgdGhlIHN0eWxpbmcgdG8gY2hhbmdlIGhvdyB0byBoaWRlIGFuIGVsZW1lbnQgdGhlbiBpdCBpcyBqdXN0IGFcbiAqIG1hdHRlciBvZiB1c2luZyBgIWltcG9ydGFudGAgaW4gdGhlaXIgb3duIENTUyBjb2RlLlxuICpcbiAqICMjIyBPdmVycmlkaW5nIGAubmctaGlkZWBcbiAqXG4gKiBCeSBkZWZhdWx0LCB0aGUgYC5uZy1oaWRlYCBjbGFzcyB3aWxsIHN0eWxlIHRoZSBlbGVtZW50IHdpdGggYGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudGAuIElmIHlvdVxuICogd2lzaCB0byBjaGFuZ2UgdGhlIGhpZGUgYmVoYXZpb3Igd2l0aCBgbmdTaG93YC9gbmdIaWRlYCwgeW91IGNhbiBzaW1wbHkgb3ZlcndyaXRlIHRoZSBzdHlsZXMgZm9yXG4gKiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MuIE5vdGUgdGhhdCB0aGUgc2VsZWN0b3IgdGhhdCBuZWVkcyB0byBiZSB1c2VkIGlzIGFjdHVhbGx5XG4gKiBgLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpYCB0byBjb3BlIHdpdGggZXh0cmEgYW5pbWF0aW9uIGNsYXNzZXMgdGhhdCBjYW4gYmUgYWRkZWQuXG4gKlxuICogYGBgY3NzXG4gKiAubmctaGlkZTpub3QoLm5nLWhpZGUtYW5pbWF0ZSkge1xuICogICAvJiM0MjsgVGhlc2UgYXJlIGp1c3QgYWx0ZXJuYXRpdmUgd2F5cyBvZiBoaWRpbmcgYW4gZWxlbWVudCAmIzQyOy9cbiAqICAgZGlzcGxheTogYmxvY2shaW1wb3J0YW50O1xuICogICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gKiAgIHRvcDogLTk5OTlweDtcbiAqICAgbGVmdDogLTk5OTlweDtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEJ5IGRlZmF1bHQgeW91IGRvbid0IG5lZWQgdG8gb3ZlcnJpZGUgYW55dGhpbmcgaW4gQ1NTIGFuZCB0aGUgYW5pbWF0aW9ucyB3aWxsIHdvcmsgYXJvdW5kIHRoZVxuICogZGlzcGxheSBzdHlsZS5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogfCBBbmltYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBPY2N1cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IHtAbGluayAkYW5pbWF0ZSNhZGRDbGFzcyBhZGRDbGFzc30gYC5uZy1oaWRlYCAgICAgICB8IEFmdGVyIHRoZSBgbmdTaG93YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIG5vbiB0cnV0aHkgdmFsdWUgYW5kIGp1c3QgYmVmb3JlIHRoZSBjb250ZW50cyBhcmUgc2V0IHRvIGhpZGRlbi4gfFxuICogfCB7QGxpbmsgJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgcmVtb3ZlQ2xhc3N9IGAubmctaGlkZWAgfCBBZnRlciB0aGUgYG5nU2hvd2AgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSB0cnV0aHkgdmFsdWUgYW5kIGp1c3QgYmVmb3JlIGNvbnRlbnRzIGFyZSBzZXQgdG8gdmlzaWJsZS4gICAgICAgIHxcbiAqXG4gKiBBbmltYXRpb25zIGluIGBuZ1Nob3dgL2BuZ0hpZGVgIHdvcmsgd2l0aCB0aGUgc2hvdyBhbmQgaGlkZSBldmVudHMgdGhhdCBhcmUgdHJpZ2dlcmVkIHdoZW4gdGhlXG4gKiBkaXJlY3RpdmUgZXhwcmVzc2lvbiBpcyB0cnVlIGFuZCBmYWxzZS4gVGhpcyBzeXN0ZW0gd29ya3MgbGlrZSB0aGUgYW5pbWF0aW9uIHN5c3RlbSBwcmVzZW50IHdpdGhcbiAqIGBuZ0NsYXNzYCBleGNlcHQgdGhhdCB5b3UgbXVzdCBhbHNvIGluY2x1ZGUgdGhlIGAhaW1wb3J0YW50YCBmbGFnIHRvIG92ZXJyaWRlIHRoZSBkaXNwbGF5XG4gKiBwcm9wZXJ0eSBzbyB0aGF0IHRoZSBlbGVtZW50cyBhcmUgbm90IGFjdHVhbGx5IGhpZGRlbiBkdXJpbmcgdGhlIGFuaW1hdGlvbi5cbiAqXG4gKiBgYGBjc3NcbiAqIC8mIzQyOyBBIHdvcmtpbmcgZXhhbXBsZSBjYW4gYmUgZm91bmQgYXQgdGhlIGJvdHRvbSBvZiB0aGlzIHBhZ2UuICYjNDI7L1xuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQsIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlIHtcbiAqICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgbGluZWFyO1xuICogfVxuICpcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkIHsgLi4uIH1cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkLm5nLWhpZGUtYWRkLWFjdGl2ZSB7IC4uLiB9XG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZSB7IC4uLiB9XG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZS5uZy1oaWRlLXJlbW92ZS1hY3RpdmUgeyAuLi4gfVxuICogYGBgXG4gKlxuICogS2VlcCBpbiBtaW5kIHRoYXQsIGFzIG9mIEFuZ3VsYXJKUyB2ZXJzaW9uIDEuMywgdGhlcmUgaXMgbm8gbmVlZCB0byBjaGFuZ2UgdGhlIGRpc3BsYXkgcHJvcGVydHlcbiAqIHRvIGJsb2NrIGR1cmluZyBhbmltYXRpb24gc3RhdGVzIC0gbmdBbmltYXRlIHdpbGwgYXV0b21hdGljYWxseSBoYW5kbGUgdGhlIHN0eWxlIHRvZ2dsaW5nIGZvciB5b3UuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nU2hvdyBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5L2ZhbHN5IHRoZW4gdGhlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50IGlzIHNob3duL2hpZGRlbiByZXNwZWN0aXZlbHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIEEgc2ltcGxlIGV4YW1wbGUsIGFuaW1hdGluZyB0aGUgZWxlbWVudCdzIG9wYWNpdHk6XG4gKlxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBuYW1lPVwibmctc2hvdy1zaW1wbGVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgU2hvdzogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiIGFyaWEtbGFiZWw9XCJUb2dnbGUgbmdTaG93XCI+PGJyIC8+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBhbmltYXRlLXNob3ctaGlkZVwiIG5nLXNob3c9XCJjaGVja2VkXCI+XG4gICAgICAgIEkgc2hvdyB1cCB3aGVuIHlvdXIgY2hlY2tib3ggaXMgY2hlY2tlZC5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5hbmltYXRlLXNob3ctaGlkZS5uZy1oaWRlIHtcbiAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtc2hvdy1oaWRlLm5nLWhpZGUtYWRkLFxuICAgICAgLmFuaW1hdGUtc2hvdy1oaWRlLm5nLWhpZGUtcmVtb3ZlIHtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIGxpbmVhciAwLjVzO1xuICAgICAgfVxuXG4gICAgICAuY2hlY2stZWxlbWVudCB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nU2hvdycsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hlY2tib3ggPSBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2VkJykpO1xuICAgICAgICB2YXIgY2hlY2tFbGVtID0gZWxlbWVudChieS5jc3MoJy5jaGVjay1lbGVtZW50JykpO1xuXG4gICAgICAgIGV4cGVjdChjaGVja0VsZW0uaXNEaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICAgIGNoZWNrYm94LmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChjaGVja0VsZW0uaXNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICpcbiAqIDxociAvPlxuICogQGV4YW1wbGVcbiAqIEEgbW9yZSBjb21wbGV4IGV4YW1wbGUsIGZlYXR1cmluZyBkaWZmZXJlbnQgc2hvdy9oaWRlIGFuaW1hdGlvbnM6XG4gKlxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBuYW1lPVwibmctc2hvdy1jb21wbGV4XCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIFNob3c6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIiBhcmlhLWxhYmVsPVwiVG9nZ2xlIG5nU2hvd1wiPjxiciAvPlxuICAgICAgPGRpdiBjbGFzcz1cImNoZWNrLWVsZW1lbnQgZnVua3ktc2hvdy1oaWRlXCIgbmctc2hvdz1cImNoZWNrZWRcIj5cbiAgICAgICAgSSBzaG93IHVwIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgYm9keSB7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHBlcnNwZWN0aXZlOiAxMDAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5mdW5reS1zaG93LWhpZGUubmctaGlkZS1hZGQge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVooMCk7XG4gICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlLWluLW91dDtcbiAgICAgIH1cblxuICAgICAgLmZ1bmt5LXNob3ctaGlkZS5uZy1oaWRlLWFkZC5uZy1oaWRlLWFkZC1hY3RpdmUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVooLTEzNWRlZyk7XG4gICAgICB9XG5cbiAgICAgIC5mdW5reS1zaG93LWhpZGUubmctaGlkZS1yZW1vdmUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVkoOTBkZWcpO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlO1xuICAgICAgfVxuXG4gICAgICAuZnVua3ktc2hvdy1oaWRlLm5nLWhpZGUtcmVtb3ZlLm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlWSgwKTtcbiAgICAgIH1cblxuICAgICAgLmNoZWNrLWVsZW1lbnQge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZ1Nob3cnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNoZWNrYm94ID0gZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKTtcbiAgICAgICAgdmFyIGNoZWNrRWxlbSA9IGVsZW1lbnQoYnkuY3NzKCcuY2hlY2stZWxlbWVudCcpKTtcblxuICAgICAgICBleHBlY3QoY2hlY2tFbGVtLmlzRGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICBjaGVja2JveC5jbGljaygpO1xuICAgICAgICBleHBlY3QoY2hlY2tFbGVtLmlzRGlzcGxheWVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqXG4gKiBAa25vd25Jc3N1ZVxuICpcbiAqICMjIyBGbGlja2VyaW5nIHdoZW4gdXNpbmcgbmdTaG93IHRvIHRvZ2dsZSBiZXR3ZWVuIGVsZW1lbnRzXG4gKlxuICogV2hlbiB1c2luZyB7QGxpbmsgbmdTaG93fSBhbmQgLyBvciB7QGxpbmsgbmdIaWRlfSB0byB0b2dnbGUgYmV0d2VlbiBlbGVtZW50cywgaXQgY2FuXG4gKiBoYXBwZW4gdGhhdCBib3RoIHRoZSBlbGVtZW50IHRvIHNob3cgYW5kIHRoZSBlbGVtZW50IHRvIGhpZGUgYXJlIHZpc2libGUgZm9yIGEgdmVyeSBzaG9ydCB0aW1lLlxuICpcbiAqIFRoaXMgdXN1YWxseSBoYXBwZW5zIHdoZW4gdGhlIHtAbGluayBuZ0FuaW1hdGUgbmdBbmltYXRlIG1vZHVsZX0gaXMgaW5jbHVkZWQsIGJ1dCBubyBhY3R1YWwgYW5pbWF0aW9uc1xuICogYXJlIGRlZmluZWQgZm9yIHtAbGluayBuZ1Nob3d9IC8ge0BsaW5rIG5nSGlkZX0uIEludGVybmV0IEV4cGxvcmVyIGlzIGFmZmVjdGVkIG1vcmUgb2Z0ZW4gdGhhblxuICogb3RoZXIgYnJvd3NlcnMuXG4gKlxuICogVGhlcmUgYXJlIHNldmVyYWwgd2F5IHRvIG1pdGlnYXRlIHRoaXMgcHJvYmxlbTpcbiAqXG4gKiAtIHtAbGluayBndWlkZS9hbmltYXRpb25zI2hvdy10by1zZWxlY3RpdmVseS1lbmFibGUtZGlzYWJsZS1hbmQtc2tpcC1hbmltYXRpb25zIERpc2FibGUgYW5pbWF0aW9ucyBvbiB0aGUgYWZmZWN0ZWQgZWxlbWVudHN9LlxuICogLSBVc2Uge0BsaW5rIG5nSWZ9IG9yIHtAbGluayBuZ1N3aXRjaH0gaW5zdGVhZCBvZiB7QGxpbmsgbmdTaG93fSAvIHtAbGluayBuZ0hpZGV9LlxuICogLSBVc2UgdGhlIHNwZWNpYWwgQ1NTIHNlbGVjdG9yIGBuZy1oaWRlLm5nLWhpZGUtYW5pbWF0ZWAgdG8gc2V0IGB7ZGlzcGxheTogbm9uZX1gIG9yIHNpbWlsYXIgb24gdGhlIGFmZmVjdGVkIGVsZW1lbnRzLlxuICogLSBVc2UgYG5nLWNsYXNzPVwieyduZy1oaWRlJzogZXhwcmVzc2lvbn1gIGluc3RlYWQgb2YgaW5zdGVhZCBvZiB7QGxpbmsgbmdTaG93fSAvIHtAbGluayBuZ0hpZGV9LlxuICogLSBEZWZpbmUgYW4gYW5pbWF0aW9uIG9uIHRoZSBhZmZlY3RlZCBlbGVtZW50cy5cbiAqL1xudmFyIG5nU2hvd0RpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCBmdW5jdGlvbigkYW5pbWF0ZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ1Nob3csIGZ1bmN0aW9uIG5nU2hvd1dhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIHdlJ3JlIGFkZGluZyBhIHRlbXBvcmFyeSwgYW5pbWF0aW9uLXNwZWNpZmljIGNsYXNzIGZvciBuZy1oaWRlIHNpbmNlIHRoaXMgd2F5XG4gICAgICAgIC8vIHdlIGNhbiBjb250cm9sIHdoZW4gdGhlIGVsZW1lbnQgaXMgYWN0dWFsbHkgZGlzcGxheWVkIG9uIHNjcmVlbiB3aXRob3V0IGhhdmluZ1xuICAgICAgICAvLyB0byBoYXZlIGEgZ2xvYmFsL2dyZWVkeSBDU1Mgc2VsZWN0b3IgdGhhdCBicmVha3Mgd2hlbiBvdGhlciBhbmltYXRpb25zIGFyZSBydW4uXG4gICAgICAgIC8vIFJlYWQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzkxMDMjaXNzdWVjb21tZW50LTU4MzM1ODQ1XG4gICAgICAgICRhbmltYXRlW3ZhbHVlID8gJ3JlbW92ZUNsYXNzJyA6ICdhZGRDbGFzcyddKGVsZW1lbnQsIE5HX0hJREVfQ0xBU1MsIHtcbiAgICAgICAgICB0ZW1wQ2xhc3NlczogTkdfSElERV9JTl9QUk9HUkVTU19DTEFTU1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dO1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdIaWRlXG4gKiBAbXVsdGlFbGVtZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nSGlkZWAgZGlyZWN0aXZlIHNob3dzIG9yIGhpZGVzIHRoZSBnaXZlbiBIVE1MIGVsZW1lbnQgYmFzZWQgb24gdGhlIGV4cHJlc3Npb24gcHJvdmlkZWQgdG9cbiAqIHRoZSBgbmdIaWRlYCBhdHRyaWJ1dGUuXG4gKlxuICogVGhlIGVsZW1lbnQgaXMgc2hvd24gb3IgaGlkZGVuIGJ5IHJlbW92aW5nIG9yIGFkZGluZyB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3Mgb250byB0aGUgZWxlbWVudC5cbiAqIFRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBpcyBwcmVkZWZpbmVkIGluIEFuZ3VsYXJKUyBhbmQgc2V0cyB0aGUgZGlzcGxheSBzdHlsZSB0byBub25lICh1c2luZyBhblxuICogYCFpbXBvcnRhbnRgIGZsYWcpLiBGb3IgQ1NQIG1vZGUgcGxlYXNlIGFkZCBgYW5ndWxhci1jc3AuY3NzYCB0byB5b3VyIEhUTUwgZmlsZSAoc2VlXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ3NwIG5nQ3NwfSkuXG4gKlxuICogYGBgaHRtbFxuICogPCEtLSB3aGVuICRzY29wZS5teVZhbHVlIGlzIHRydXRoeSAoZWxlbWVudCBpcyBoaWRkZW4pIC0tPlxuICogPGRpdiBuZy1oaWRlPVwibXlWYWx1ZVwiIGNsYXNzPVwibmctaGlkZVwiPjwvZGl2PlxuICpcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyBmYWxzeSAoZWxlbWVudCBpcyB2aXNpYmxlKSAtLT5cbiAqIDxkaXYgbmctaGlkZT1cIm15VmFsdWVcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIFdoZW4gdGhlIGBuZ0hpZGVgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgdHJ1dGh5IHZhbHVlIHRoZW4gdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIGlzIGFkZGVkXG4gKiB0byB0aGUgY2xhc3MgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50IGNhdXNpbmcgaXQgdG8gYmVjb21lIGhpZGRlbi4gV2hlbiBmYWxzeSwgdGhlIGAubmctaGlkZWBcbiAqIENTUyBjbGFzcyBpcyByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQgY2F1c2luZyB0aGUgZWxlbWVudCBub3QgdG8gYXBwZWFyIGhpZGRlbi5cbiAqXG4gKiAjIyBXaHkgaXMgYCFpbXBvcnRhbnRgIHVzZWQ/XG4gKlxuICogWW91IG1heSBiZSB3b25kZXJpbmcgd2h5IGAhaW1wb3J0YW50YCBpcyB1c2VkIGZvciB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MuIFRoaXMgaXMgYmVjYXVzZSB0aGVcbiAqIGAubmctaGlkZWAgc2VsZWN0b3IgY2FuIGJlIGVhc2lseSBvdmVycmlkZGVuIGJ5IGhlYXZpZXIgc2VsZWN0b3JzLiBGb3IgZXhhbXBsZSwgc29tZXRoaW5nIGFzXG4gKiBzaW1wbGUgYXMgY2hhbmdpbmcgdGhlIGRpc3BsYXkgc3R5bGUgb24gYSBIVE1MIGxpc3QgaXRlbSB3b3VsZCBtYWtlIGhpZGRlbiBlbGVtZW50cyBhcHBlYXJcbiAqIHZpc2libGUuIFRoaXMgYWxzbyBiZWNvbWVzIGEgYmlnZ2VyIGlzc3VlIHdoZW4gZGVhbGluZyB3aXRoIENTUyBmcmFtZXdvcmtzLlxuICpcbiAqIEJ5IHVzaW5nIGAhaW1wb3J0YW50YCwgdGhlIHNob3cgYW5kIGhpZGUgYmVoYXZpb3Igd2lsbCB3b3JrIGFzIGV4cGVjdGVkIGRlc3BpdGUgYW55IGNsYXNoIGJldHdlZW5cbiAqIENTUyBzZWxlY3RvciBzcGVjaWZpY2l0eSAod2hlbiBgIWltcG9ydGFudGAgaXNuJ3QgdXNlZCB3aXRoIGFueSBjb25mbGljdGluZyBzdHlsZXMpLiBJZiBhXG4gKiBkZXZlbG9wZXIgY2hvb3NlcyB0byBvdmVycmlkZSB0aGUgc3R5bGluZyB0byBjaGFuZ2UgaG93IHRvIGhpZGUgYW4gZWxlbWVudCB0aGVuIGl0IGlzIGp1c3QgYVxuICogbWF0dGVyIG9mIHVzaW5nIGAhaW1wb3J0YW50YCBpbiB0aGVpciBvd24gQ1NTIGNvZGUuXG4gKlxuICogIyMjIE92ZXJyaWRpbmcgYC5uZy1oaWRlYFxuICpcbiAqIEJ5IGRlZmF1bHQsIHRoZSBgLm5nLWhpZGVgIGNsYXNzIHdpbGwgc3R5bGUgdGhlIGVsZW1lbnQgd2l0aCBgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50YC4gSWYgeW91XG4gKiB3aXNoIHRvIGNoYW5nZSB0aGUgaGlkZSBiZWhhdmlvciB3aXRoIGBuZ1Nob3dgL2BuZ0hpZGVgLCB5b3UgY2FuIHNpbXBseSBvdmVyd3JpdGUgdGhlIHN0eWxlcyBmb3JcbiAqIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcy4gTm90ZSB0aGF0IHRoZSBzZWxlY3RvciB0aGF0IG5lZWRzIHRvIGJlIHVzZWQgaXMgYWN0dWFsbHlcbiAqIGAubmctaGlkZTpub3QoLm5nLWhpZGUtYW5pbWF0ZSlgIHRvIGNvcGUgd2l0aCBleHRyYSBhbmltYXRpb24gY2xhc3NlcyB0aGF0IGNhbiBiZSBhZGRlZC5cbiAqXG4gKiBgYGBjc3NcbiAqIC5uZy1oaWRlOm5vdCgubmctaGlkZS1hbmltYXRlKSB7XG4gKiAgIC8mIzQyOyBUaGVzZSBhcmUganVzdCBhbHRlcm5hdGl2ZSB3YXlzIG9mIGhpZGluZyBhbiBlbGVtZW50ICYjNDI7L1xuICogICBkaXNwbGF5OiBibG9jayFpbXBvcnRhbnQ7XG4gKiAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAqICAgdG9wOiAtOTk5OXB4O1xuICogICBsZWZ0OiAtOTk5OXB4O1xuICogfVxuICogYGBgXG4gKlxuICogQnkgZGVmYXVsdCB5b3UgZG9uJ3QgbmVlZCB0byBvdmVycmlkZSBpbiBDU1MgYW55dGhpbmcgYW5kIHRoZSBhbmltYXRpb25zIHdpbGwgd29yayBhcm91bmQgdGhlXG4gKiBkaXNwbGF5IHN0eWxlLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE9jY3VycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rICRhbmltYXRlI2FkZENsYXNzIGFkZENsYXNzfSBgLm5nLWhpZGVgICAgICAgIHwgQWZ0ZXIgdGhlIGBuZ0hpZGVgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgdHJ1dGh5IHZhbHVlIGFuZCBqdXN0IGJlZm9yZSB0aGUgY29udGVudHMgYXJlIHNldCB0byBoaWRkZW4uICB8XG4gKiB8IHtAbGluayAkYW5pbWF0ZSNyZW1vdmVDbGFzcyByZW1vdmVDbGFzc30gYC5uZy1oaWRlYCB8IEFmdGVyIHRoZSBgbmdIaWRlYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIG5vbiB0cnV0aHkgdmFsdWUgYW5kIGp1c3QgYmVmb3JlIGNvbnRlbnRzIGFyZSBzZXQgdG8gdmlzaWJsZS4gfFxuICpcbiAqIEFuaW1hdGlvbnMgaW4gYG5nU2hvd2AvYG5nSGlkZWAgd29yayB3aXRoIHRoZSBzaG93IGFuZCBoaWRlIGV2ZW50cyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2hlbiB0aGVcbiAqIGRpcmVjdGl2ZSBleHByZXNzaW9uIGlzIHRydWUgYW5kIGZhbHNlLiBUaGlzIHN5c3RlbSB3b3JrcyBsaWtlIHRoZSBhbmltYXRpb24gc3lzdGVtIHByZXNlbnQgd2l0aFxuICogYG5nQ2xhc3NgIGV4Y2VwdCB0aGF0IHlvdSBtdXN0IGFsc28gaW5jbHVkZSB0aGUgYCFpbXBvcnRhbnRgIGZsYWcgdG8gb3ZlcnJpZGUgdGhlIGRpc3BsYXlcbiAqIHByb3BlcnR5IHNvIHRoYXQgdGhlIGVsZW1lbnRzIGFyZSBub3QgYWN0dWFsbHkgaGlkZGVuIGR1cmluZyB0aGUgYW5pbWF0aW9uLlxuICpcbiAqIGBgYGNzc1xuICogLyYjNDI7IEEgd29ya2luZyBleGFtcGxlIGNhbiBiZSBmb3VuZCBhdCB0aGUgYm90dG9tIG9mIHRoaXMgcGFnZS4gJiM0MjsvXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZCwgLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUge1xuICogICB0cmFuc2l0aW9uOiBhbGwgMC41cyBsaW5lYXI7XG4gKiB9XG4gKlxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQgeyAuLi4gfVxuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQubmctaGlkZS1hZGQtYWN0aXZlIHsgLi4uIH1cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlIHsgLi4uIH1cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlLm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7IC4uLiB9XG4gKiBgYGBcbiAqXG4gKiBLZWVwIGluIG1pbmQgdGhhdCwgYXMgb2YgQW5ndWxhckpTIHZlcnNpb24gMS4zLCB0aGVyZSBpcyBubyBuZWVkIHRvIGNoYW5nZSB0aGUgZGlzcGxheSBwcm9wZXJ0eVxuICogdG8gYmxvY2sgZHVyaW5nIGFuaW1hdGlvbiBzdGF0ZXMgLSBuZ0FuaW1hdGUgd2lsbCBhdXRvbWF0aWNhbGx5IGhhbmRsZSB0aGUgc3R5bGUgdG9nZ2xpbmcgZm9yIHlvdS5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdIaWRlIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHkvZmFsc3kgdGhlbiB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgaXMgaGlkZGVuL3Nob3duIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBAZXhhbXBsZVxuICogQSBzaW1wbGUgZXhhbXBsZSwgYW5pbWF0aW5nIHRoZSBlbGVtZW50J3Mgb3BhY2l0eTpcbiAqXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1oaWRlLXNpbXBsZVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICBIaWRlOiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCIgYXJpYS1sYWJlbD1cIlRvZ2dsZSBuZ0hpZGVcIj48YnIgLz5cbiAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1lbGVtZW50IGFuaW1hdGUtc2hvdy1oaWRlXCIgbmctaGlkZT1cImNoZWNrZWRcIj5cbiAgICAgICAgSSBoaWRlIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLmFuaW1hdGUtc2hvdy1oaWRlLm5nLWhpZGUge1xuICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1zaG93LWhpZGUubmctaGlkZS1hZGQsXG4gICAgICAuYW5pbWF0ZS1zaG93LWhpZGUubmctaGlkZS1yZW1vdmUge1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgbGluZWFyIDAuNXM7XG4gICAgICB9XG5cbiAgICAgIC5jaGVjay1lbGVtZW50IHtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmdIaWRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGVja2JveCA9IGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSk7XG4gICAgICAgIHZhciBjaGVja0VsZW0gPSBlbGVtZW50KGJ5LmNzcygnLmNoZWNrLWVsZW1lbnQnKSk7XG5cbiAgICAgICAgZXhwZWN0KGNoZWNrRWxlbS5pc0Rpc3BsYXllZCgpKS50b0JlKHRydWUpO1xuICAgICAgICBjaGVja2JveC5jbGljaygpO1xuICAgICAgICBleHBlY3QoY2hlY2tFbGVtLmlzRGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKlxuICogPGhyIC8+XG4gKiBAZXhhbXBsZVxuICogQSBtb3JlIGNvbXBsZXggZXhhbXBsZSwgZmVhdHVyaW5nIGRpZmZlcmVudCBzaG93L2hpZGUgYW5pbWF0aW9uczpcbiAqXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nQW5pbWF0ZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1oaWRlLWNvbXBsZXhcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgSGlkZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiIGFyaWEtbGFiZWw9XCJUb2dnbGUgbmdIaWRlXCI+PGJyIC8+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBmdW5reS1zaG93LWhpZGVcIiBuZy1oaWRlPVwiY2hlY2tlZFwiPlxuICAgICAgICBJIGhpZGUgd2hlbiB5b3VyIGNoZWNrYm94IGlzIGNoZWNrZWQuXG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XG4gICAgICBib2R5IHtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgcGVyc3BlY3RpdmU6IDEwMDBweDtcbiAgICAgIH1cblxuICAgICAgLmZ1bmt5LXNob3ctaGlkZS5uZy1oaWRlLWFkZCB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlWigwKTtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQ7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjVzIGVhc2UtaW4tb3V0O1xuICAgICAgfVxuXG4gICAgICAuZnVua3ktc2hvdy1oaWRlLm5nLWhpZGUtYWRkLm5nLWhpZGUtYWRkLWFjdGl2ZSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlWigtMTM1ZGVnKTtcbiAgICAgIH1cblxuICAgICAgLmZ1bmt5LXNob3ctaGlkZS5uZy1oaWRlLXJlbW92ZSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlWSg5MGRlZyk7XG4gICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGxlZnQ7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjVzIGVhc2U7XG4gICAgICB9XG5cbiAgICAgIC5mdW5reS1zaG93LWhpZGUubmctaGlkZS1yZW1vdmUubmctaGlkZS1yZW1vdmUtYWN0aXZlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVZKDApO1xuICAgICAgfVxuXG4gICAgICAuY2hlY2stZWxlbWVudCB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nSGlkZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hlY2tib3ggPSBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2VkJykpO1xuICAgICAgICB2YXIgY2hlY2tFbGVtID0gZWxlbWVudChieS5jc3MoJy5jaGVjay1lbGVtZW50JykpO1xuXG4gICAgICAgIGV4cGVjdChjaGVja0VsZW0uaXNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgY2hlY2tib3guY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KGNoZWNrRWxlbS5pc0Rpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICpcbiAqIEBrbm93bklzc3VlXG4gKlxuICogIyMjIEZsaWNrZXJpbmcgd2hlbiB1c2luZyBuZ0hpZGUgdG8gdG9nZ2xlIGJldHdlZW4gZWxlbWVudHNcbiAqXG4gKiBXaGVuIHVzaW5nIHtAbGluayBuZ1Nob3d9IGFuZCAvIG9yIHtAbGluayBuZ0hpZGV9IHRvIHRvZ2dsZSBiZXR3ZWVuIGVsZW1lbnRzLCBpdCBjYW5cbiAqIGhhcHBlbiB0aGF0IGJvdGggdGhlIGVsZW1lbnQgdG8gc2hvdyBhbmQgdGhlIGVsZW1lbnQgdG8gaGlkZSBhcmUgdmlzaWJsZSBmb3IgYSB2ZXJ5IHNob3J0IHRpbWUuXG4gKlxuICogVGhpcyB1c3VhbGx5IGhhcHBlbnMgd2hlbiB0aGUge0BsaW5rIG5nQW5pbWF0ZSBuZ0FuaW1hdGUgbW9kdWxlfSBpcyBpbmNsdWRlZCwgYnV0IG5vIGFjdHVhbCBhbmltYXRpb25zXG4gKiBhcmUgZGVmaW5lZCBmb3Ige0BsaW5rIG5nU2hvd30gLyB7QGxpbmsgbmdIaWRlfS4gSW50ZXJuZXQgRXhwbG9yZXIgaXMgYWZmZWN0ZWQgbW9yZSBvZnRlbiB0aGFuXG4gKiBvdGhlciBicm93c2Vycy5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCB3YXkgdG8gbWl0aWdhdGUgdGhpcyBwcm9ibGVtOlxuICpcbiAqIC0ge0BsaW5rIGd1aWRlL2FuaW1hdGlvbnMjaG93LXRvLXNlbGVjdGl2ZWx5LWVuYWJsZS1kaXNhYmxlLWFuZC1za2lwLWFuaW1hdGlvbnMgRGlzYWJsZSBhbmltYXRpb25zIG9uIHRoZSBhZmZlY3RlZCBlbGVtZW50c30uXG4gKiAtIFVzZSB7QGxpbmsgbmdJZn0gb3Ige0BsaW5rIG5nU3dpdGNofSBpbnN0ZWFkIG9mIHtAbGluayBuZ1Nob3d9IC8ge0BsaW5rIG5nSGlkZX0uXG4gKiAtIFVzZSB0aGUgc3BlY2lhbCBDU1Mgc2VsZWN0b3IgYG5nLWhpZGUubmctaGlkZS1hbmltYXRlYCB0byBzZXQgYHtkaXNwbGF5OiBub25lfWAgb3Igc2ltaWxhciBvbiB0aGUgYWZmZWN0ZWQgZWxlbWVudHMuXG4gKiAtIFVzZSBgbmctY2xhc3M9XCJ7J25nLWhpZGUnOiBleHByZXNzaW9ufWAgaW5zdGVhZCBvZiBpbnN0ZWFkIG9mIHtAbGluayBuZ1Nob3d9IC8ge0BsaW5rIG5nSGlkZX0uXG4gKiAtIERlZmluZSBhbiBhbmltYXRpb24gb24gdGhlIGFmZmVjdGVkIGVsZW1lbnRzLlxuICovXG52YXIgbmdIaWRlRGlyZWN0aXZlID0gWyckYW5pbWF0ZScsIGZ1bmN0aW9uKCRhbmltYXRlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBtdWx0aUVsZW1lbnQ6IHRydWUsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5nSGlkZSwgZnVuY3Rpb24gbmdIaWRlV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgLy8gVGhlIGNvbW1lbnQgaW5zaWRlIG9mIHRoZSBuZ1Nob3dEaXJlY3RpdmUgZXhwbGFpbnMgd2h5IHdlIGFkZCBhbmRcbiAgICAgICAgLy8gcmVtb3ZlIGEgdGVtcG9yYXJ5IGNsYXNzIGZvciB0aGUgc2hvdy9oaWRlIGFuaW1hdGlvblxuICAgICAgICAkYW5pbWF0ZVt2YWx1ZSA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXShlbGVtZW50LE5HX0hJREVfQ0xBU1MsIHtcbiAgICAgICAgICB0ZW1wQ2xhc3NlczogTkdfSElERV9JTl9QUk9HUkVTU19DTEFTU1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU3R5bGVcbiAqIEByZXN0cmljdCBBQ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ1N0eWxlYCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBzZXQgQ1NTIHN0eWxlIG9uIGFuIEhUTUwgZWxlbWVudCBjb25kaXRpb25hbGx5LlxuICpcbiAqIEBrbm93bklzc3VlXG4gKiBZb3Ugc2hvdWxkIG5vdCB1c2Uge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24gaW50ZXJwb2xhdGlvbn0gaW4gdGhlIHZhbHVlIG9mIHRoZSBgc3R5bGVgXG4gKiBhdHRyaWJ1dGUsIHdoZW4gdXNpbmcgdGhlIGBuZ1N0eWxlYCBkaXJlY3RpdmUgb24gdGhlIHNhbWUgZWxlbWVudC5cbiAqIFNlZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiNrbm93bi1pc3N1ZXMgaGVyZX0gZm9yIG1vcmUgaW5mby5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTdHlsZVxuICpcbiAqIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHdoaWNoIGV2YWxzIHRvIGFuXG4gKiBvYmplY3Qgd2hvc2Uga2V5cyBhcmUgQ1NTIHN0eWxlIG5hbWVzIGFuZCB2YWx1ZXMgYXJlIGNvcnJlc3BvbmRpbmcgdmFsdWVzIGZvciB0aG9zZSBDU1NcbiAqIGtleXMuXG4gKlxuICogU2luY2Ugc29tZSBDU1Mgc3R5bGUgbmFtZXMgYXJlIG5vdCB2YWxpZCBrZXlzIGZvciBhbiBvYmplY3QsIHRoZXkgbXVzdCBiZSBxdW90ZWQuXG4gKiBTZWUgdGhlICdiYWNrZ3JvdW5kLWNvbG9yJyBzdHlsZSBpbiB0aGUgZXhhbXBsZSBiZWxvdy5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLXN0eWxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJzZXQgY29sb3JcIiBuZy1jbGljaz1cIm15U3R5bGU9e2NvbG9yOidyZWQnfVwiPlxuICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwic2V0IGJhY2tncm91bmRcIiBuZy1jbGljaz1cIm15U3R5bGU9eydiYWNrZ3JvdW5kLWNvbG9yJzonYmx1ZSd9XCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJjbGVhclwiIG5nLWNsaWNrPVwibXlTdHlsZT17fVwiPlxuICAgICAgICA8YnIvPlxuICAgICAgICA8c3BhbiBuZy1zdHlsZT1cIm15U3R5bGVcIj5TYW1wbGUgVGV4dDwvc3Bhbj5cbiAgICAgICAgPHByZT5teVN0eWxlPXt7bXlTdHlsZX19PC9wcmU+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgIHNwYW4ge1xuICAgICAgICAgY29sb3I6IGJsYWNrO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIGNvbG9yU3BhbiA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuJykpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1zdHlsZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGNvbG9yU3Bhbi5nZXRDc3NWYWx1ZSgnY29sb3InKSkudG9CZSgncmdiYSgwLCAwLCAwLCAxKScpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJ2lucHV0W3ZhbHVlPVxcJ3NldCBjb2xvclxcJ10nKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChjb2xvclNwYW4uZ2V0Q3NzVmFsdWUoJ2NvbG9yJykpLnRvQmUoJ3JnYmEoMjU1LCAwLCAwLCAxKScpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJ2lucHV0W3ZhbHVlPWNsZWFyXScpKS5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGNvbG9yU3Bhbi5nZXRDc3NWYWx1ZSgnY29sb3InKSkudG9CZSgncmdiYSgwLCAwLCAwLCAxKScpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1N0eWxlRGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihhdHRyLm5nU3R5bGUsIGZ1bmN0aW9uIG5nU3R5bGVXYXRjaEFjdGlvbihuZXdTdHlsZXMsIG9sZFN0eWxlcykge1xuICAgIGlmIChvbGRTdHlsZXMgJiYgKG5ld1N0eWxlcyAhPT0gb2xkU3R5bGVzKSkge1xuICAgICAgZm9yRWFjaChvbGRTdHlsZXMsIGZ1bmN0aW9uKHZhbCwgc3R5bGUpIHsgZWxlbWVudC5jc3Moc3R5bGUsICcnKTt9KTtcbiAgICB9XG4gICAgaWYgKG5ld1N0eWxlcykgZWxlbWVudC5jc3MobmV3U3R5bGVzKTtcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1N3aXRjaFxuICogQHJlc3RyaWN0IEVBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nU3dpdGNoYCBkaXJlY3RpdmUgaXMgdXNlZCB0byBjb25kaXRpb25hbGx5IHN3YXAgRE9NIHN0cnVjdHVyZSBvbiB5b3VyIHRlbXBsYXRlIGJhc2VkIG9uIGEgc2NvcGUgZXhwcmVzc2lvbi5cbiAqIEVsZW1lbnRzIHdpdGhpbiBgbmdTd2l0Y2hgIGJ1dCB3aXRob3V0IGBuZ1N3aXRjaFdoZW5gIG9yIGBuZ1N3aXRjaERlZmF1bHRgIGRpcmVjdGl2ZXMgd2lsbCBiZSBwcmVzZXJ2ZWQgYXQgdGhlIGxvY2F0aW9uXG4gKiBhcyBzcGVjaWZpZWQgaW4gdGhlIHRlbXBsYXRlLlxuICpcbiAqIFRoZSBkaXJlY3RpdmUgaXRzZWxmIHdvcmtzIHNpbWlsYXIgdG8gbmdJbmNsdWRlLCBob3dldmVyLCBpbnN0ZWFkIG9mIGRvd25sb2FkaW5nIHRlbXBsYXRlIGNvZGUgKG9yIGxvYWRpbmcgaXRcbiAqIGZyb20gdGhlIHRlbXBsYXRlIGNhY2hlKSwgYG5nU3dpdGNoYCBzaW1wbHkgY2hvb3NlcyBvbmUgb2YgdGhlIG5lc3RlZCBlbGVtZW50cyBhbmQgbWFrZXMgaXQgdmlzaWJsZSBiYXNlZCBvbiB3aGljaCBlbGVtZW50XG4gKiBtYXRjaGVzIHRoZSB2YWx1ZSBvYnRhaW5lZCBmcm9tIHRoZSBldmFsdWF0ZWQgZXhwcmVzc2lvbi4gSW4gb3RoZXIgd29yZHMsIHlvdSBkZWZpbmUgYSBjb250YWluZXIgZWxlbWVudFxuICogKHdoZXJlIHlvdSBwbGFjZSB0aGUgZGlyZWN0aXZlKSwgcGxhY2UgYW4gZXhwcmVzc2lvbiBvbiB0aGUgKipgb249XCIuLi5cImAgYXR0cmlidXRlKipcbiAqIChvciB0aGUgKipgbmctc3dpdGNoPVwiLi4uXCJgIGF0dHJpYnV0ZSoqKSwgZGVmaW5lIGFueSBpbm5lciBlbGVtZW50cyBpbnNpZGUgb2YgdGhlIGRpcmVjdGl2ZSBhbmQgcGxhY2VcbiAqIGEgd2hlbiBhdHRyaWJ1dGUgcGVyIGVsZW1lbnQuIFRoZSB3aGVuIGF0dHJpYnV0ZSBpcyB1c2VkIHRvIGluZm9ybSBuZ1N3aXRjaCB3aGljaCBlbGVtZW50IHRvIGRpc3BsYXkgd2hlbiB0aGUgb25cbiAqIGV4cHJlc3Npb24gaXMgZXZhbHVhdGVkLiBJZiBhIG1hdGNoaW5nIGV4cHJlc3Npb24gaXMgbm90IGZvdW5kIHZpYSBhIHdoZW4gYXR0cmlidXRlIHRoZW4gYW4gZWxlbWVudCB3aXRoIHRoZSBkZWZhdWx0XG4gKiBhdHRyaWJ1dGUgaXMgZGlzcGxheWVkLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiBCZSBhd2FyZSB0aGF0IHRoZSBhdHRyaWJ1dGUgdmFsdWVzIHRvIG1hdGNoIGFnYWluc3QgY2Fubm90IGJlIGV4cHJlc3Npb25zLiBUaGV5IGFyZSBpbnRlcnByZXRlZFxuICogYXMgbGl0ZXJhbCBzdHJpbmcgdmFsdWVzIHRvIG1hdGNoIGFnYWluc3QuXG4gKiBGb3IgZXhhbXBsZSwgKipgbmctc3dpdGNoLXdoZW49XCJzb21lVmFsXCJgKiogd2lsbCBtYXRjaCBhZ2FpbnN0IHRoZSBzdHJpbmcgYFwic29tZVZhbFwiYCBub3QgYWdhaW5zdCB0aGVcbiAqIHZhbHVlIG9mIHRoZSBleHByZXNzaW9uIGAkc2NvcGUuc29tZVZhbGAuXG4gKiA8L2Rpdj5cblxuICogQGFuaW1hdGlvbnNcbiAqIHwgQW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgfCBPY2N1cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjZW50ZXIgZW50ZXJ9ICB8IGFmdGVyIHRoZSBuZ1N3aXRjaCBjb250ZW50cyBjaGFuZ2UgYW5kIHRoZSBtYXRjaGVkIGNoaWxkIGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSB0aGUgY29udGFpbmVyIHxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2xlYXZlIGxlYXZlfSAgfCBhZnRlciB0aGUgbmdTd2l0Y2ggY29udGVudHMgY2hhbmdlIGFuZCBqdXN0IGJlZm9yZSB0aGUgZm9ybWVyIGNvbnRlbnRzIGFyZSByZW1vdmVkIGZyb20gdGhlIERPTSB8XG4gKlxuICogQHVzYWdlXG4gKlxuICogYGBgXG4gKiA8QU5ZIG5nLXN3aXRjaD1cImV4cHJlc3Npb25cIj5cbiAqICAgPEFOWSBuZy1zd2l0Y2gtd2hlbj1cIm1hdGNoVmFsdWUxXCI+Li4uPC9BTlk+XG4gKiAgIDxBTlkgbmctc3dpdGNoLXdoZW49XCJtYXRjaFZhbHVlMlwiPi4uLjwvQU5ZPlxuICogICA8QU5ZIG5nLXN3aXRjaC1kZWZhdWx0Pi4uLjwvQU5ZPlxuICogPC9BTlk+XG4gKiBgYGBcbiAqXG4gKlxuICogQHNjb3BlXG4gKiBAcHJpb3JpdHkgMTIwMFxuICogQHBhcmFtIHsqfSBuZ1N3aXRjaHxvbiBleHByZXNzaW9uIHRvIG1hdGNoIGFnYWluc3QgPGNvZGU+bmctc3dpdGNoLXdoZW48L2NvZGU+LlxuICogT24gY2hpbGQgZWxlbWVudHMgYWRkOlxuICpcbiAqICogYG5nU3dpdGNoV2hlbmA6IHRoZSBjYXNlIHN0YXRlbWVudCB0byBtYXRjaCBhZ2FpbnN0LiBJZiBtYXRjaCB0aGVuIHRoaXNcbiAqICAgY2FzZSB3aWxsIGJlIGRpc3BsYXllZC4gSWYgdGhlIHNhbWUgbWF0Y2ggYXBwZWFycyBtdWx0aXBsZSB0aW1lcywgYWxsIHRoZVxuICogICBlbGVtZW50cyB3aWxsIGJlIGRpc3BsYXllZC4gSXQgaXMgcG9zc2libGUgdG8gYXNzb2NpYXRlIG11bHRpcGxlIHZhbHVlcyB0b1xuICogICB0aGUgc2FtZSBgbmdTd2l0Y2hXaGVuYCBieSBkZWZpbmluZyB0aGUgb3B0aW9uYWwgYXR0cmlidXRlXG4gKiAgIGBuZ1N3aXRjaFdoZW5TZXBhcmF0b3JgLiBUaGUgc2VwYXJhdG9yIHdpbGwgYmUgdXNlZCB0byBzcGxpdCB0aGUgdmFsdWUgb2ZcbiAqICAgdGhlIGBuZ1N3aXRjaFdoZW5gIGF0dHJpYnV0ZSBpbnRvIG11bHRpcGxlIHRva2VucywgYW5kIHRoZSBlbGVtZW50IHdpbGwgc2hvd1xuICogICBpZiBhbnkgb2YgdGhlIGBuZ1N3aXRjaGAgZXZhbHVhdGVzIHRvIGFueSBvZiB0aGVzZSB0b2tlbnMuXG4gKiAqIGBuZ1N3aXRjaERlZmF1bHRgOiB0aGUgZGVmYXVsdCBjYXNlIHdoZW4gbm8gb3RoZXIgY2FzZSBtYXRjaC4gSWYgdGhlcmVcbiAqICAgYXJlIG11bHRpcGxlIGRlZmF1bHQgY2FzZXMsIGFsbCBvZiB0aGVtIHdpbGwgYmUgZGlzcGxheWVkIHdoZW4gbm8gb3RoZXJcbiAqICAgY2FzZSBtYXRjaC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAgPGV4YW1wbGUgbW9kdWxlPVwic3dpdGNoRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1zd2l0Y2hcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cInNlbGVjdGlvblwiIG5nLW9wdGlvbnM9XCJpdGVtIGZvciBpdGVtIGluIGl0ZW1zXCI+XG4gICAgICAgIDwvc2VsZWN0PlxuICAgICAgICA8Y29kZT5zZWxlY3Rpb249e3tzZWxlY3Rpb259fTwvY29kZT5cbiAgICAgICAgPGhyLz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoLWNvbnRhaW5lclwiXG4gICAgICAgICAgbmctc3dpdGNoIG9uPVwic2VsZWN0aW9uXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zd2l0Y2hcIiBuZy1zd2l0Y2gtd2hlbj1cInNldHRpbmdzfG9wdGlvbnNcIiBuZy1zd2l0Y2gtd2hlbi1zZXBhcmF0b3I9XCJ8XCI+U2V0dGluZ3MgRGl2PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zd2l0Y2hcIiBuZy1zd2l0Y2gtd2hlbj1cImhvbWVcIj5Ib21lIFNwYW48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbmltYXRlLXN3aXRjaFwiIG5nLXN3aXRjaC1kZWZhdWx0PmRlZmF1bHQ8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ3N3aXRjaEV4YW1wbGUnLCBbJ25nQW5pbWF0ZSddKVxuICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS5pdGVtcyA9IFsnc2V0dGluZ3MnLCAnaG9tZScsICdvcHRpb25zJywgJ290aGVyJ107XG4gICAgICAgICAgJHNjb3BlLnNlbGVjdGlvbiA9ICRzY29wZS5pdGVtc1swXTtcbiAgICAgICAgfV0pO1xuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5hbmltYXRlLXN3aXRjaC1jb250YWluZXIge1xuICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcbiAgICAgICAgaGVpZ2h0OjQwcHg7XG4gICAgICAgIG92ZXJmbG93OmhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtc3dpdGNoIHtcbiAgICAgICAgcGFkZGluZzoxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctYW5pbWF0ZSB7XG4gICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcblxuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICAgICAgdG9wOjA7XG4gICAgICAgIGxlZnQ6MDtcbiAgICAgICAgcmlnaHQ6MDtcbiAgICAgICAgYm90dG9tOjA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUsXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctZW50ZXIge1xuICAgICAgICB0b3A6LTUwcHg7XG4gICAgICB9XG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctbGVhdmUsXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgdG9wOjA7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciBzd2l0Y2hFbGVtID0gZWxlbWVudChieS5jc3MoJ1tuZy1zd2l0Y2hdJykpO1xuICAgICAgdmFyIHNlbGVjdCA9IGVsZW1lbnQoYnkubW9kZWwoJ3NlbGVjdGlvbicpKTtcblxuICAgICAgaXQoJ3Nob3VsZCBzdGFydCBpbiBzZXR0aW5ncycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3Qoc3dpdGNoRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL1NldHRpbmdzIERpdi8pO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIGNoYW5nZSB0byBob21lJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDEpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvSG9tZSBTcGFuLyk7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHRvIHNldHRpbmdzIHZpYSBcIm9wdGlvbnNcIicsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgyKS5jbGljaygpO1xuICAgICAgICBleHBlY3Qoc3dpdGNoRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL1NldHRpbmdzIERpdi8pO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIHNlbGVjdCBkZWZhdWx0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDMpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvZGVmYXVsdC8pO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1N3aXRjaERpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkYW5pbWF0ZSwgJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlOiAnbmdTd2l0Y2gnLFxuXG4gICAgLy8gYXNrcyBmb3IgJHNjb3BlIHRvIGZvb2wgdGhlIEJDIGNvbnRyb2xsZXIgbW9kdWxlXG4gICAgY29udHJvbGxlcjogWyckc2NvcGUnLCBmdW5jdGlvbiBOZ1N3aXRjaENvbnRyb2xsZXIoKSB7XG4gICAgIHRoaXMuY2FzZXMgPSB7fTtcbiAgICB9XSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgbmdTd2l0Y2hDb250cm9sbGVyKSB7XG4gICAgICB2YXIgd2F0Y2hFeHByID0gYXR0ci5uZ1N3aXRjaCB8fCBhdHRyLm9uLFxuICAgICAgICAgIHNlbGVjdGVkVHJhbnNjbHVkZXMgPSBbXSxcbiAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRzID0gW10sXG4gICAgICAgICAgcHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMgPSBbXSxcbiAgICAgICAgICBzZWxlY3RlZFNjb3BlcyA9IFtdO1xuXG4gICAgICB2YXIgc3BsaWNlRmFjdG9yeSA9IGZ1bmN0aW9uKGFycmF5LCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9PSBmYWxzZSkgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgc2NvcGUuJHdhdGNoKHdhdGNoRXhwciwgZnVuY3Rpb24gbmdTd2l0Y2hXYXRjaEFjdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgaSwgaWk7XG5cbiAgICAgICAgLy8gU3RhcnQgd2l0aCB0aGUgbGFzdCwgaW4gY2FzZSB0aGUgYXJyYXkgaXMgbW9kaWZpZWQgZHVyaW5nIHRoZSBsb29wXG4gICAgICAgIHdoaWxlIChwcmV2aW91c0xlYXZlQW5pbWF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAkYW5pbWF0ZS5jYW5jZWwocHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMucG9wKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBzZWxlY3RlZFNjb3Blcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkID0gZ2V0QmxvY2tOb2RlcyhzZWxlY3RlZEVsZW1lbnRzW2ldLmNsb25lKTtcbiAgICAgICAgICBzZWxlY3RlZFNjb3Blc1tpXS4kZGVzdHJveSgpO1xuICAgICAgICAgIHZhciBydW5uZXIgPSBwcmV2aW91c0xlYXZlQW5pbWF0aW9uc1tpXSA9ICRhbmltYXRlLmxlYXZlKHNlbGVjdGVkKTtcbiAgICAgICAgICBydW5uZXIuZG9uZShzcGxpY2VGYWN0b3J5KHByZXZpb3VzTGVhdmVBbmltYXRpb25zLCBpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIHNlbGVjdGVkU2NvcGVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgaWYgKChzZWxlY3RlZFRyYW5zY2x1ZGVzID0gbmdTd2l0Y2hDb250cm9sbGVyLmNhc2VzWychJyArIHZhbHVlXSB8fCBuZ1N3aXRjaENvbnRyb2xsZXIuY2FzZXNbJz8nXSkpIHtcbiAgICAgICAgICBmb3JFYWNoKHNlbGVjdGVkVHJhbnNjbHVkZXMsIGZ1bmN0aW9uKHNlbGVjdGVkVHJhbnNjbHVkZSkge1xuICAgICAgICAgICAgc2VsZWN0ZWRUcmFuc2NsdWRlLnRyYW5zY2x1ZGUoZnVuY3Rpb24oY2FzZUVsZW1lbnQsIHNlbGVjdGVkU2NvcGUpIHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRTY29wZXMucHVzaChzZWxlY3RlZFNjb3BlKTtcbiAgICAgICAgICAgICAgdmFyIGFuY2hvciA9IHNlbGVjdGVkVHJhbnNjbHVkZS5lbGVtZW50O1xuICAgICAgICAgICAgICBjYXNlRWxlbWVudFtjYXNlRWxlbWVudC5sZW5ndGgrK10gPSAkY29tcGlsZS4kJGNyZWF0ZUNvbW1lbnQoJ2VuZCBuZ1N3aXRjaFdoZW4nKTtcbiAgICAgICAgICAgICAgdmFyIGJsb2NrID0geyBjbG9uZTogY2FzZUVsZW1lbnQgfTtcblxuICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRzLnB1c2goYmxvY2spO1xuICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjYXNlRWxlbWVudCwgYW5jaG9yLnBhcmVudCgpLCBhbmNob3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dO1xuXG52YXIgbmdTd2l0Y2hXaGVuRGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xuICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gIHByaW9yaXR5OiAxMjAwLFxuICByZXF1aXJlOiAnXm5nU3dpdGNoJyxcbiAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwsICR0cmFuc2NsdWRlKSB7XG5cbiAgICB2YXIgY2FzZXMgPSBhdHRycy5uZ1N3aXRjaFdoZW4uc3BsaXQoYXR0cnMubmdTd2l0Y2hXaGVuU2VwYXJhdG9yKS5zb3J0KCkuZmlsdGVyKFxuICAgICAgLy8gRmlsdGVyIGR1cGxpY2F0ZSBjYXNlc1xuICAgICAgZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7IHJldHVybiBhcnJheVtpbmRleCAtIDFdICE9PSBlbGVtZW50OyB9XG4gICAgKTtcblxuICAgIGZvckVhY2goY2FzZXMsIGZ1bmN0aW9uKHdoZW5DYXNlKSB7XG4gICAgICBjdHJsLmNhc2VzWychJyArIHdoZW5DYXNlXSA9IChjdHJsLmNhc2VzWychJyArIHdoZW5DYXNlXSB8fCBbXSk7XG4gICAgICBjdHJsLmNhc2VzWychJyArIHdoZW5DYXNlXS5wdXNoKHsgdHJhbnNjbHVkZTogJHRyYW5zY2x1ZGUsIGVsZW1lbnQ6IGVsZW1lbnQgfSk7XG4gICAgfSk7XG4gIH1cbn0pO1xuXG52YXIgbmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xuICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gIHByaW9yaXR5OiAxMjAwLFxuICByZXF1aXJlOiAnXm5nU3dpdGNoJyxcbiAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcbiAgICBjdHJsLmNhc2VzWyc/J10gPSAoY3RybC5jYXNlc1snPyddIHx8IFtdKTtcbiAgICBjdHJsLmNhc2VzWyc/J10ucHVzaCh7IHRyYW5zY2x1ZGU6ICR0cmFuc2NsdWRlLCBlbGVtZW50OiBlbGVtZW50IH0pO1xuICAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdUcmFuc2NsdWRlXG4gKiBAcmVzdHJpY3QgRUFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEaXJlY3RpdmUgdGhhdCBtYXJrcyB0aGUgaW5zZXJ0aW9uIHBvaW50IGZvciB0aGUgdHJhbnNjbHVkZWQgRE9NIG9mIHRoZSBuZWFyZXN0IHBhcmVudCBkaXJlY3RpdmUgdGhhdCB1c2VzIHRyYW5zY2x1c2lvbi5cbiAqXG4gKiBZb3UgY2FuIHNwZWNpZnkgdGhhdCB5b3Ugd2FudCB0byBpbnNlcnQgYSBuYW1lZCB0cmFuc2NsdXNpb24gc2xvdCwgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBzbG90LCBieSBwcm92aWRpbmcgdGhlIHNsb3QgbmFtZVxuICogYXMgdGhlIHZhbHVlIG9mIHRoZSBgbmctdHJhbnNjbHVkZWAgb3IgYG5nLXRyYW5zY2x1ZGUtc2xvdGAgYXR0cmlidXRlLlxuICpcbiAqIElmIHRoZSB0cmFuc2NsdWRlZCBjb250ZW50IGlzIG5vdCBlbXB0eSAoaS5lLiBjb250YWlucyBvbmUgb3IgbW9yZSBET00gbm9kZXMsIGluY2x1ZGluZyB3aGl0ZXNwYWNlIHRleHQgbm9kZXMpLCBhbnkgZXhpc3RpbmdcbiAqIGNvbnRlbnQgb2YgdGhpcyBlbGVtZW50IHdpbGwgYmUgcmVtb3ZlZCBiZWZvcmUgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaXMgaW5zZXJ0ZWQuXG4gKiBJZiB0aGUgdHJhbnNjbHVkZWQgY29udGVudCBpcyBlbXB0eSAob3Igb25seSB3aGl0ZXNwYWNlKSwgdGhlIGV4aXN0aW5nIGNvbnRlbnQgaXMgbGVmdCBpbnRhY3QuIFRoaXMgbGV0cyB5b3UgcHJvdmlkZSBmYWxsYmFja1xuICogY29udGVudCBpbiB0aGUgY2FzZSB0aGF0IG5vIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaXMgcHJvdmlkZWQuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nVHJhbnNjbHVkZXxuZ1RyYW5zY2x1ZGVTbG90IHRoZSBuYW1lIG9mIHRoZSBzbG90IHRvIGluc2VydCBhdCB0aGlzIHBvaW50LiBJZiB0aGlzIGlzIG5vdCBwcm92aWRlZCwgaXMgZW1wdHlcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBpdHMgdmFsdWUgaXMgdGhlIHNhbWUgYXMgdGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB0aGVuIHRoZSBkZWZhdWx0IHNsb3QgaXMgdXNlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJhc2ljIHRyYW5zY2x1c2lvblxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyBiYXNpYyB0cmFuc2NsdXNpb24gb2YgY29udGVudCBpbnRvIGEgY29tcG9uZW50IGRpcmVjdGl2ZS5cbiAqIDxleGFtcGxlIG5hbWU9XCJzaW1wbGVUcmFuc2NsdWRlRXhhbXBsZVwiIG1vZHVsZT1cInRyYW5zY2x1ZGVFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCd0cmFuc2NsdWRlRXhhbXBsZScsIFtdKVxuICogICAgICAgIC5kaXJlY3RpdmUoJ3BhbmUnLCBmdW5jdGlvbigpe1xuICogICAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICogICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAqICAgICAgICAgICAgIHNjb3BlOiB7IHRpdGxlOidAJyB9LFxuICogICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XCI+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IGdyYXlcIj57e3RpdGxlfX08L2Rpdj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICc8bmctdHJhbnNjbHVkZT48L25nLXRyYW5zY2x1ZGU+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PidcbiAqICAgICAgICAgICB9O1xuICogICAgICAgfSlcbiAqICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICRzY29wZS50aXRsZSA9ICdMb3JlbSBJcHN1bSc7XG4gKiAgICAgICAgICRzY29wZS50ZXh0ID0gJ05lcXVlIHBvcnJvIHF1aXNxdWFtIGVzdCBxdWkgZG9sb3JlbSBpcHN1bSBxdWlhIGRvbG9yLi4uJztcbiAqICAgICAgIH1dKTtcbiAqICAgICA8L3NjcmlwdD5cbiAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICAgPGlucHV0IG5nLW1vZGVsPVwidGl0bGVcIiBhcmlhLWxhYmVsPVwidGl0bGVcIj4gPGJyLz5cbiAqICAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cInRleHRcIiBhcmlhLWxhYmVsPVwidGV4dFwiPjwvdGV4dGFyZWE+IDxici8+XG4gKiAgICAgICA8cGFuZSB0aXRsZT1cInt7dGl0bGV9fVwiPjxzcGFuPnt7dGV4dH19PC9zcGFuPjwvcGFuZT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgIGl0KCdzaG91bGQgaGF2ZSB0cmFuc2NsdWRlZCcsIGZ1bmN0aW9uKCkge1xuICogICAgICAgIHZhciB0aXRsZUVsZW1lbnQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0aXRsZScpKTtcbiAqICAgICAgICB0aXRsZUVsZW1lbnQuY2xlYXIoKTtcbiAqICAgICAgICB0aXRsZUVsZW1lbnQuc2VuZEtleXMoJ1RJVExFJyk7XG4gKiAgICAgICAgdmFyIHRleHRFbGVtZW50ID0gZWxlbWVudChieS5tb2RlbCgndGV4dCcpKTtcbiAqICAgICAgICB0ZXh0RWxlbWVudC5jbGVhcigpO1xuICogICAgICAgIHRleHRFbGVtZW50LnNlbmRLZXlzKCdURVhUJyk7XG4gKiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndGl0bGUnKSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdUSVRMRScpO1xuICogICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3RleHQnKSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdURVhUJyk7XG4gKiAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBUcmFuc2NsdWRlIGZhbGxiYWNrIGNvbnRlbnRcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgdG8gdXNlIGBOZ1RyYW5zY2x1ZGVgIHdpdGggZmFsbGJhY2sgY29udGVudCwgdGhhdFxuICogaXMgZGlzcGxheWVkIGlmIG5vIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaXMgcHJvdmlkZWQuXG4gKlxuICogPGV4YW1wbGUgbW9kdWxlPVwidHJhbnNjbHVkZUZhbGxiYWNrQ29udGVudEV4YW1wbGVcIiBuYW1lPVwibmctdHJhbnNjbHVkZVwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxzY3JpcHQ+XG4gKiBhbmd1bGFyLm1vZHVsZSgndHJhbnNjbHVkZUZhbGxiYWNrQ29udGVudEV4YW1wbGUnLCBbXSlcbiAqIC5kaXJlY3RpdmUoJ215QnV0dG9uJywgZnVuY3Rpb24oKXtcbiAqICAgICAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gKiAgICAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gKiAgICAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxuICogICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxidXR0b24gc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7XCI+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICc8bmctdHJhbnNjbHVkZT4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGIgc3R5bGU9XCJjb2xvcjogcmVkO1wiPkJ1dHRvbjE8L2I+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L25nLXRyYW5zY2x1ZGU+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAnPC9idXR0b24+J1xuICogICAgICAgICAgICAgfTtcbiAqICAgICAgICAgfSk7XG4gKiA8L3NjcmlwdD5cbiAqIDwhLS0gZmFsbGJhY2sgYnV0dG9uIGNvbnRlbnQgLS0+XG4gKiA8bXktYnV0dG9uIGlkPVwiZmFsbGJhY2tcIj48L215LWJ1dHRvbj5cbiAqIDwhLS0gbW9kaWZpZWQgYnV0dG9uIGNvbnRlbnQgLS0+XG4gKiA8bXktYnV0dG9uIGlkPVwibW9kaWZpZWRcIj5cbiAqICAgPGkgc3R5bGU9XCJjb2xvcjogZ3JlZW47XCI+QnV0dG9uMjwvaT5cbiAqIDwvbXktYnV0dG9uPlxuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogaXQoJ3Nob3VsZCBoYXZlIGRpZmZlcmVudCB0cmFuc2NsdWRlIGVsZW1lbnQgY29udGVudCcsIGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2ZhbGxiYWNrJykpLmdldFRleHQoKSkudG9CZSgnQnV0dG9uMScpO1xuICogICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ21vZGlmaWVkJykpLmdldFRleHQoKSkudG9CZSgnQnV0dG9uMicpO1xuICogICAgICAgIH0pO1xuICogPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgTXVsdGktc2xvdCB0cmFuc2NsdXNpb25cbiAqIFRoaXMgZXhhbXBsZSBkZW1vbnN0cmF0ZXMgdXNpbmcgbXVsdGktc2xvdCB0cmFuc2NsdXNpb24gaW4gYSBjb21wb25lbnQgZGlyZWN0aXZlLlxuICogPGV4YW1wbGUgbmFtZT1cIm11bHRpU2xvdFRyYW5zY2x1ZGVFeGFtcGxlXCIgbW9kdWxlPVwibXVsdGlTbG90VHJhbnNjbHVkZUV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgIDxzdHlsZT5cbiAqICAgICAgLnRpdGxlLCAuZm9vdGVyIHtcbiAqICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBncmF5XG4gKiAgICAgIH1cbiAqICAgIDwvc3R5bGU+XG4gKiAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICA8aW5wdXQgbmctbW9kZWw9XCJ0aXRsZVwiIGFyaWEtbGFiZWw9XCJ0aXRsZVwiPiA8YnIvPlxuICogICAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJ0ZXh0XCIgYXJpYS1sYWJlbD1cInRleHRcIj48L3RleHRhcmVhPiA8YnIvPlxuICogICAgICA8cGFuZT5cbiAqICAgICAgICA8cGFuZS10aXRsZT48YSBuZy1ocmVmPVwie3tsaW5rfX1cIj57e3RpdGxlfX08L2E+PC9wYW5lLXRpdGxlPlxuICogICAgICAgIDxwYW5lLWJvZHk+PHA+e3t0ZXh0fX08L3A+PC9wYW5lLWJvZHk+XG4gKiAgICAgIDwvcGFuZT5cbiAqICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICAgIGFuZ3VsYXIubW9kdWxlKCdtdWx0aVNsb3RUcmFuc2NsdWRlRXhhbXBsZScsIFtdKVxuICogICAgIC5kaXJlY3RpdmUoJ3BhbmUnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAqICAgICAgICAgIHRyYW5zY2x1ZGU6IHtcbiAqICAgICAgICAgICAgJ3RpdGxlJzogJz9wYW5lVGl0bGUnLFxuICogICAgICAgICAgICAnYm9keSc6ICdwYW5lQm9keScsXG4gKiAgICAgICAgICAgICdmb290ZXInOiAnP3BhbmVGb290ZXInXG4gKiAgICAgICAgICB9LFxuICogICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XCI+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInRpdGxlXCIgbmctdHJhbnNjbHVkZT1cInRpdGxlXCI+RmFsbGJhY2sgVGl0bGU8L2Rpdj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IG5nLXRyYW5zY2x1ZGU9XCJib2R5XCI+PC9kaXY+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvb3RlclwiIG5nLXRyYW5zY2x1ZGU9XCJmb290ZXJcIj5GYWxsYmFjayBGb290ZXI8L2Rpdj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAnPC9kaXY+J1xuICogICAgICAgIH07XG4gKiAgICB9KVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLnRpdGxlID0gJ0xvcmVtIElwc3VtJztcbiAqICAgICAgJHNjb3BlLmxpbmsgPSAnaHR0cHM6Ly9nb29nbGUuY29tJztcbiAqICAgICAgJHNjb3BlLnRleHQgPSAnTmVxdWUgcG9ycm8gcXVpc3F1YW0gZXN0IHF1aSBkb2xvcmVtIGlwc3VtIHF1aWEgZG9sb3IuLi4nO1xuICogICAgfV0pO1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICAgaXQoJ3Nob3VsZCBoYXZlIHRyYW5zY2x1ZGVkIHRoZSB0aXRsZSBhbmQgdGhlIGJvZHknLCBmdW5jdGlvbigpIHtcbiAqICAgICAgICB2YXIgdGl0bGVFbGVtZW50ID0gZWxlbWVudChieS5tb2RlbCgndGl0bGUnKSk7XG4gKiAgICAgICAgdGl0bGVFbGVtZW50LmNsZWFyKCk7XG4gKiAgICAgICAgdGl0bGVFbGVtZW50LnNlbmRLZXlzKCdUSVRMRScpO1xuICogICAgICAgIHZhciB0ZXh0RWxlbWVudCA9IGVsZW1lbnQoYnkubW9kZWwoJ3RleHQnKSk7XG4gKiAgICAgICAgdGV4dEVsZW1lbnQuY2xlYXIoKTtcbiAqICAgICAgICB0ZXh0RWxlbWVudC5zZW5kS2V5cygnVEVYVCcpO1xuICogICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLnRpdGxlJykpLmdldFRleHQoKSkudG9FcXVhbCgnVElUTEUnKTtcbiAqICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd0ZXh0JykpLmdldFRleHQoKSkudG9FcXVhbCgnVEVYVCcpO1xuICogICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLmZvb3RlcicpKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ0ZhbGxiYWNrIEZvb3RlcicpO1xuICogICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICovXG52YXIgbmdUcmFuc2NsdWRlTWluRXJyID0gbWluRXJyKCduZ1RyYW5zY2x1ZGUnKTtcbnZhciBuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUgPSBbJyRjb21waWxlJywgZnVuY3Rpb24oJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBQycsXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdUcmFuc2NsdWRlQ29tcGlsZSh0RWxlbWVudCkge1xuXG4gICAgICAvLyBSZW1vdmUgYW5kIGNhY2hlIGFueSBvcmlnaW5hbCBjb250ZW50IHRvIGFjdCBhcyBhIGZhbGxiYWNrXG4gICAgICB2YXIgZmFsbGJhY2tMaW5rRm4gPSAkY29tcGlsZSh0RWxlbWVudC5jb250ZW50cygpKTtcbiAgICAgIHRFbGVtZW50LmVtcHR5KCk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ1RyYW5zY2x1ZGVQb3N0TGluaygkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsIGNvbnRyb2xsZXIsICR0cmFuc2NsdWRlKSB7XG5cbiAgICAgICAgaWYgKCEkdHJhbnNjbHVkZSkge1xuICAgICAgICAgIHRocm93IG5nVHJhbnNjbHVkZU1pbkVycignb3JwaGFuJyxcbiAgICAgICAgICAnSWxsZWdhbCB1c2Ugb2YgbmdUcmFuc2NsdWRlIGRpcmVjdGl2ZSBpbiB0aGUgdGVtcGxhdGUhICcgK1xuICAgICAgICAgICdObyBwYXJlbnQgZGlyZWN0aXZlIHRoYXQgcmVxdWlyZXMgYSB0cmFuc2NsdXNpb24gZm91bmQuICcgK1xuICAgICAgICAgICdFbGVtZW50OiB7MH0nLFxuICAgICAgICAgIHN0YXJ0aW5nVGFnKCRlbGVtZW50KSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIElmIHRoZSBhdHRyaWJ1dGUgaXMgb2YgdGhlIGZvcm06IGBuZy10cmFuc2NsdWRlPVwibmctdHJhbnNjbHVkZVwiYCB0aGVuIHRyZWF0IGl0IGxpa2UgdGhlIGRlZmF1bHRcbiAgICAgICAgaWYgKCRhdHRycy5uZ1RyYW5zY2x1ZGUgPT09ICRhdHRycy4kYXR0ci5uZ1RyYW5zY2x1ZGUpIHtcbiAgICAgICAgICAkYXR0cnMubmdUcmFuc2NsdWRlID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNsb3ROYW1lID0gJGF0dHJzLm5nVHJhbnNjbHVkZSB8fCAkYXR0cnMubmdUcmFuc2NsdWRlU2xvdDtcblxuICAgICAgICAvLyBJZiB0aGUgc2xvdCBpcyByZXF1aXJlZCBhbmQgbm8gdHJhbnNjbHVzaW9uIGNvbnRlbnQgaXMgcHJvdmlkZWQgdGhlbiB0aGlzIGNhbGwgd2lsbCB0aHJvdyBhbiBlcnJvclxuICAgICAgICAkdHJhbnNjbHVkZShuZ1RyYW5zY2x1ZGVDbG9uZUF0dGFjaEZuLCBudWxsLCBzbG90TmFtZSk7XG5cbiAgICAgICAgLy8gSWYgdGhlIHNsb3QgaXMgb3B0aW9uYWwgYW5kIG5vIHRyYW5zY2x1c2lvbiBjb250ZW50IGlzIHByb3ZpZGVkIHRoZW4gdXNlIHRoZSBmYWxsYmFjayBjb250ZW50XG4gICAgICAgIGlmIChzbG90TmFtZSAmJiAhJHRyYW5zY2x1ZGUuaXNTbG90RmlsbGVkKHNsb3ROYW1lKSkge1xuICAgICAgICAgIHVzZUZhbGxiYWNrQ29udGVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbmdUcmFuc2NsdWRlQ2xvbmVBdHRhY2hGbihjbG9uZSwgdHJhbnNjbHVkZWRTY29wZSkge1xuICAgICAgICAgIGlmIChjbG9uZS5sZW5ndGggJiYgbm90V2hpdGVzcGFjZShjbG9uZSkpIHtcbiAgICAgICAgICAgICRlbGVtZW50LmFwcGVuZChjbG9uZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVzZUZhbGxiYWNrQ29udGVudCgpO1xuICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm90aGluZyBsaW5rZWQgYWdhaW5zdCB0aGUgdHJhbnNjbHVkZWQgc2NvcGUgc2luY2Ugbm8gY29udGVudCB3YXMgYXZhaWxhYmxlLFxuICAgICAgICAgICAgLy8gc28gaXQgc2hvdWxkIGJlIHNhZmUgdG8gY2xlYW4gdXAgdGhlIGdlbmVyYXRlZCBzY29wZS5cbiAgICAgICAgICAgIHRyYW5zY2x1ZGVkU2NvcGUuJGRlc3Ryb3koKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1c2VGYWxsYmFja0NvbnRlbnQoKSB7XG4gICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyB0aGUgZmFsbGJhY2sgY29udGVudCByYXRoZXIgdGhhbiB0aGUgdHJhbnNjbHVkZWQgY29udGVudCxcbiAgICAgICAgICAvLyB3ZSBsaW5rIGFnYWluc3QgdGhlIHNjb3BlIG9mIHRoaXMgZGlyZWN0aXZlIHJhdGhlciB0aGFuIHRoZSB0cmFuc2NsdWRlZCBzY29wZVxuICAgICAgICAgIGZhbGxiYWNrTGlua0ZuKCRzY29wZSwgZnVuY3Rpb24oY2xvbmUpIHtcbiAgICAgICAgICAgICRlbGVtZW50LmFwcGVuZChjbG9uZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBub3RXaGl0ZXNwYWNlKG5vZGVzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbm9kZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfVEVYVCB8fCBub2RlLm5vZGVWYWx1ZS50cmltKCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHNjcmlwdFxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIExvYWQgdGhlIGNvbnRlbnQgb2YgYSBgPHNjcmlwdD5gIGVsZW1lbnQgaW50byB7QGxpbmsgbmcuJHRlbXBsYXRlQ2FjaGUgYCR0ZW1wbGF0ZUNhY2hlYH0sIHNvIHRoYXQgdGhlXG4gKiB0ZW1wbGF0ZSBjYW4gYmUgdXNlZCBieSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSBgbmdJbmNsdWRlYH0sXG4gKiB7QGxpbmsgbmdSb3V0ZS5kaXJlY3RpdmU6bmdWaWV3IGBuZ1ZpZXdgfSwgb3Ige0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmVzfS4gVGhlIHR5cGUgb2YgdGhlXG4gKiBgPHNjcmlwdD5gIGVsZW1lbnQgbXVzdCBiZSBzcGVjaWZpZWQgYXMgYHRleHQvbmctdGVtcGxhdGVgLCBhbmQgYSBjYWNoZSBuYW1lIGZvciB0aGUgdGVtcGxhdGUgbXVzdCBiZVxuICogYXNzaWduZWQgdGhyb3VnaCB0aGUgZWxlbWVudCdzIGBpZGAsIHdoaWNoIGNhbiB0aGVuIGJlIHVzZWQgYXMgYSBkaXJlY3RpdmUncyBgdGVtcGxhdGVVcmxgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIE11c3QgYmUgc2V0IHRvIGAndGV4dC9uZy10ZW1wbGF0ZSdgLlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIENhY2hlIG5hbWUgb2YgdGhlIHRlbXBsYXRlLlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlICBuYW1lPVwic2NyaXB0LXRhZ1wiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L25nLXRlbXBsYXRlXCIgaWQ9XCIvdHBsLmh0bWxcIj5cbiAgICAgICAgQ29udGVudCBvZiB0aGUgdGVtcGxhdGUuXG4gICAgICA8L3NjcmlwdD5cblxuICAgICAgPGEgbmctY2xpY2s9XCJjdXJyZW50VHBsPScvdHBsLmh0bWwnXCIgaWQ9XCJ0cGwtbGlua1wiPkxvYWQgaW5saW5lZCB0ZW1wbGF0ZTwvYT5cbiAgICAgIDxkaXYgaWQ9XCJ0cGwtY29udGVudFwiIG5nLWluY2x1ZGUgc3JjPVwiY3VycmVudFRwbFwiPjwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICBpdCgnc2hvdWxkIGxvYWQgdGVtcGxhdGUgZGVmaW5lZCBpbnNpZGUgc2NyaXB0IHRhZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBlbGVtZW50KGJ5LmNzcygnI3RwbC1saW5rJykpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI3RwbC1jb250ZW50JykpLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBvZiB0aGUgdGVtcGxhdGUvKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG52YXIgc2NyaXB0RGlyZWN0aXZlID0gWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XG4gICAgICBpZiAoYXR0ci50eXBlID09PSAndGV4dC9uZy10ZW1wbGF0ZScpIHtcbiAgICAgICAgdmFyIHRlbXBsYXRlVXJsID0gYXR0ci5pZCxcbiAgICAgICAgICAgIHRleHQgPSBlbGVtZW50WzBdLnRleHQ7XG5cbiAgICAgICAgJHRlbXBsYXRlQ2FjaGUucHV0KHRlbXBsYXRlVXJsLCB0ZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XTtcblxuLyogZXhwb3J0ZWQgc2VsZWN0RGlyZWN0aXZlLCBvcHRpb25EaXJlY3RpdmUgKi9cblxudmFyIG5vb3BOZ01vZGVsQ29udHJvbGxlciA9IHsgJHNldFZpZXdWYWx1ZTogbm9vcCwgJHJlbmRlcjogbm9vcCB9O1xuXG5mdW5jdGlvbiBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhvcHRpb25FbCwgdmFsdWUpIHtcbiAgb3B0aW9uRWwucHJvcCgnc2VsZWN0ZWQnLCB2YWx1ZSk7XG4gIC8qKlxuICAgKiBXaGVuIHVuc2VsZWN0aW5nIGFuIG9wdGlvbiwgc2V0dGluZyB0aGUgcHJvcGVydHkgdG8gbnVsbCAvIGZhbHNlIHNob3VsZCBiZSBlbm91Z2hcbiAgICogSG93ZXZlciwgc2NyZWVucmVhZGVycyBtaWdodCByZWFjdCB0byB0aGUgc2VsZWN0ZWQgYXR0cmlidXRlIGluc3RlYWQsIHNlZVxuICAgKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xNDQxOVxuICAgKiBOb3RlOiBcInNlbGVjdGVkXCIgaXMgYSBib29sZWFuIGF0dHIgYW5kIHdpbGwgYmUgcmVtb3ZlZCB3aGVuIHRoZSBcInZhbHVlXCIgYXJnIGluIGF0dHIoKSBpcyBmYWxzZVxuICAgKiBvciBudWxsXG4gICAqL1xuICBvcHRpb25FbC5hdHRyKCdzZWxlY3RlZCcsIHZhbHVlKTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgIHNlbGVjdC5TZWxlY3RDb250cm9sbGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgY29udHJvbGxlciBmb3IgdGhlIHtAbGluayBuZy5zZWxlY3Qgc2VsZWN0fSBkaXJlY3RpdmUuIFRoZSBjb250cm9sbGVyIGV4cG9zZXNcbiAqIGEgZmV3IHV0aWxpdHkgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIHRvIGF1Z21lbnQgdGhlIGJlaGF2aW9yIG9mIGEgcmVndWxhciBvciBhblxuICoge0BsaW5rIG5nLm5nT3B0aW9ucyBuZ09wdGlvbnN9IHNlbGVjdCBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgU2V0IGEgY3VzdG9tIGVycm9yIHdoZW4gdGhlIHVua25vd24gb3B0aW9uIGlzIHNlbGVjdGVkXG4gKlxuICogVGhpcyBleGFtcGxlIHNldHMgYSBjdXN0b20gZXJyb3IgXCJ1bmtub3duVmFsdWVcIiBvbiB0aGUgbmdNb2RlbENvbnRyb2xsZXJcbiAqIHdoZW4gdGhlIHNlbGVjdCBlbGVtZW50J3MgdW5rbm93biBvcHRpb24gaXMgc2VsZWN0ZWQsIGkuZS4gd2hlbiB0aGUgbW9kZWwgaXMgc2V0IHRvIGEgdmFsdWVcbiAqIHRoYXQgaXMgbm90IG1hdGNoZWQgYnkgYW55IG9wdGlvbi5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXVua25vd24tdmFsdWUtZXJyb3JcIiBtb2R1bGU9XCJzdGF0aWNTZWxlY3RcIj5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgICAgPGxhYmVsIGZvcj1cInRlc3RTZWxlY3RcIj4gU2luZ2xlIHNlbGVjdDogPC9sYWJlbD48YnI+XG4gKiAgICAgPHNlbGVjdCBuYW1lPVwidGVzdFNlbGVjdFwiIG5nLW1vZGVsPVwic2VsZWN0ZWRcIiB1bmtub3duLXZhbHVlLWVycm9yPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0xXCI+T3B0aW9uIDE8L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tMlwiPk9wdGlvbiAyPC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+PGJyPlxuICogICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1pZj1cIm15Rm9ybS50ZXN0U2VsZWN0LiRlcnJvci51bmtub3duVmFsdWVcIj5cbiAqICAgICAgIEVycm9yOiBUaGUgY3VycmVudCBtb2RlbCBkb2Vzbid0IG1hdGNoIGFueSBvcHRpb248L3NwYW4+PGJyPlxuICpcbiAqICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiZm9yY2VVbmtub3duT3B0aW9uKClcIj5Gb3JjZSB1bmtub3duIG9wdGlvbjwvYnV0dG9uPjxicj5cbiAqICAgPC9mb3JtPlxuICogPC9kaXY+XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgYW5ndWxhci5tb2R1bGUoJ3N0YXRpY1NlbGVjdCcsIFtdKVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLnNlbGVjdGVkID0gbnVsbDtcbiAqXG4gKiAgICAgICRzY29wZS5mb3JjZVVua25vd25PcHRpb24gPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICAkc2NvcGUuc2VsZWN0ZWQgPSAnbm9uc2Vuc2UnO1xuICogICAgICB9O1xuICogICB9XSlcbiAqICAgLmRpcmVjdGl2ZSgndW5rbm93blZhbHVlRXJyb3InLCBmdW5jdGlvbigpIHtcbiAqICAgICByZXR1cm4ge1xuICogICAgICAgcmVxdWlyZTogWyduZ01vZGVsJywgJ3NlbGVjdCddLFxuICogICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xuICogICAgICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1swXTtcbiAqICAgICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1sxXTtcbiAqXG4gKiAgICAgICAgIG5nTW9kZWxDdHJsLiR2YWxpZGF0b3JzLnVua25vd25WYWx1ZSA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICogICAgICAgICAgIGlmIChzZWxlY3RDdHJsLiRpc1Vua25vd25PcHRpb25TZWxlY3RlZCgpKSB7XG4gKiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gKiAgICAgICAgICAgfVxuICpcbiAqICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAqICAgICAgICAgfTtcbiAqICAgICAgIH1cbiAqXG4gKiAgICAgfTtcbiAqICAgfSk7XG4gKiA8L2ZpbGU+XG4gKjwvZXhhbXBsZT5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBTZXQgdGhlIFwicmVxdWlyZWRcIiBlcnJvciB3aGVuIHRoZSB1bmtub3duIG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAqXG4gKiBCeSBkZWZhdWx0LCB0aGUgXCJyZXF1aXJlZFwiIGVycm9yIG9uIHRoZSBuZ01vZGVsQ29udHJvbGxlciBpcyBvbmx5IHNldCBvbiBhIHJlcXVpcmVkIHNlbGVjdFxuICogd2hlbiB0aGUgZW1wdHkgb3B0aW9uIGlzIHNlbGVjdGVkLiBUaGlzIGV4YW1wbGUgYWRkcyBhIGN1c3RvbSBkaXJlY3RpdmUgdGhhdCBhbHNvIHNldHMgdGhlXG4gKiBlcnJvciB3aGVuIHRoZSB1bmtub3duIG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXVua25vd24tdmFsdWUtcmVxdWlyZWRcIiBtb2R1bGU9XCJzdGF0aWNTZWxlY3RcIj5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgICAgPGxhYmVsIGZvcj1cInRlc3RTZWxlY3RcIj4gU2VsZWN0OiA8L2xhYmVsPjxicj5cbiAqICAgICA8c2VsZWN0IG5hbWU9XCJ0ZXN0U2VsZWN0XCIgbmctbW9kZWw9XCJzZWxlY3RlZFwiIHJlcXVpcmVkIHVua25vd24tdmFsdWUtcmVxdWlyZWQ+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTFcIj5PcHRpb24gMTwvb3B0aW9uPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0yXCI+T3B0aW9uIDI8L29wdGlvbj5cbiAqICAgICA8L3NlbGVjdD48YnI+XG4gKiAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLWlmPVwibXlGb3JtLnRlc3RTZWxlY3QuJGVycm9yLnJlcXVpcmVkXCI+RXJyb3I6IFBsZWFzZSBzZWxlY3QgYSB2YWx1ZTwvc3Bhbj48YnI+XG4gKlxuICogICAgIDxidXR0b24gbmctY2xpY2s9XCJmb3JjZVVua25vd25PcHRpb24oKVwiPkZvcmNlIHVua25vd24gb3B0aW9uPC9idXR0b24+PGJyPlxuICogICA8L2Zvcm0+XG4gKiA8L2Rpdj5cbiAqIDwvZmlsZT5cbiAqIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICBhbmd1bGFyLm1vZHVsZSgnc3RhdGljU2VsZWN0JywgW10pXG4gKiAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAkc2NvcGUuc2VsZWN0ZWQgPSBudWxsO1xuICpcbiAqICAgICAgJHNjb3BlLmZvcmNlVW5rbm93bk9wdGlvbiA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICRzY29wZS5zZWxlY3RlZCA9ICdub25zZW5zZSc7XG4gKiAgICAgIH07XG4gKiAgIH1dKVxuICogICAuZGlyZWN0aXZlKCd1bmtub3duVmFsdWVSZXF1aXJlZCcsIGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiB7XG4gKiAgICAgICBwcmlvcml0eTogMSwgLy8gVGhpcyBkaXJlY3RpdmUgbXVzdCBydW4gYWZ0ZXIgdGhlIHJlcXVpcmVkIGRpcmVjdGl2ZSBoYXMgYWRkZWQgaXRzIHZhbGlkYXRvclxuICogICAgICAgcmVxdWlyZTogWyduZ01vZGVsJywgJ3NlbGVjdCddLFxuICogICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xuICogICAgICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1swXTtcbiAqICAgICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1sxXTtcbiAqXG4gKiAgICAgICAgIHZhciBvcmlnaW5hbFJlcXVpcmVkVmFsaWRhdG9yID0gbmdNb2RlbEN0cmwuJHZhbGlkYXRvcnMucmVxdWlyZWQ7XG4gKlxuICogICAgICAgICBuZ01vZGVsQ3RybC4kdmFsaWRhdG9ycy5yZXF1aXJlZCA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgIGlmIChhdHRycy5yZXF1aXJlZCAmJiBzZWxlY3RDdHJsLiRpc1Vua25vd25PcHRpb25TZWxlY3RlZCgpKSB7XG4gKiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gKiAgICAgICAgICAgfVxuICpcbiAqICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxSZXF1aXJlZFZhbGlkYXRvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICogICAgICAgICB9O1xuICogICAgICAgfVxuICogICAgIH07XG4gKiAgIH0pO1xuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogIGl0KCdzaG91bGQgc2hvdyB0aGUgZXJyb3IgbWVzc2FnZSB3aGVuIHRoZSB1bmtub3duIG9wdGlvbiBpcyBzZWxlY3RlZCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgICB2YXIgZXJyb3IgPSBlbGVtZW50KGJ5LmNsYXNzTmFtZSgnZXJyb3InKSk7XG5cbiAgICAgIGV4cGVjdChlcnJvci5nZXRUZXh0KCkpLnRvQmUoJ0Vycm9yOiBQbGVhc2Ugc2VsZWN0IGEgdmFsdWUnKTtcblxuICAgICAgZWxlbWVudChieS5jc3NDb250YWluaW5nVGV4dCgnb3B0aW9uJywgJ09wdGlvbiAxJykpLmNsaWNrKCk7XG5cbiAgICAgIGV4cGVjdChlcnJvci5pc1ByZXNlbnQoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgIGVsZW1lbnQoYnkudGFnTmFtZSgnYnV0dG9uJykpLmNsaWNrKCk7XG5cbiAgICAgIGV4cGVjdChlcnJvci5nZXRUZXh0KCkpLnRvQmUoJ0Vycm9yOiBQbGVhc2Ugc2VsZWN0IGEgdmFsdWUnKTtcbiAgICB9KTtcbiAqIDwvZmlsZT5cbiAqPC9leGFtcGxlPlxuICpcbiAqXG4gKi9cbnZhciBTZWxlY3RDb250cm9sbGVyID1cbiAgICAgICAgWyckZWxlbWVudCcsICckc2NvcGUnLCAvKiogQHRoaXMgKi8gZnVuY3Rpb24oJGVsZW1lbnQsICRzY29wZSkge1xuXG4gIHZhciBzZWxmID0gdGhpcyxcbiAgICAgIG9wdGlvbnNNYXAgPSBuZXcgTmdNYXAoKTtcblxuICBzZWxmLnNlbGVjdFZhbHVlTWFwID0ge307IC8vIEtleXMgYXJlIHRoZSBoYXNoZWQgdmFsdWVzLCB2YWx1ZXMgdGhlIG9yaWdpbmFsIHZhbHVlc1xuXG4gIC8vIElmIHRoZSBuZ01vZGVsIGRvZXNuJ3QgZ2V0IHByb3ZpZGVkIHRoZW4gcHJvdmlkZSBhIGR1bW15IG5vb3AgdmVyc2lvbiB0byBwcmV2ZW50IGVycm9yc1xuICBzZWxmLm5nTW9kZWxDdHJsID0gbm9vcE5nTW9kZWxDb250cm9sbGVyO1xuICBzZWxmLm11bHRpcGxlID0gZmFsc2U7XG5cbiAgLy8gVGhlIFwidW5rbm93blwiIG9wdGlvbiBpcyBvbmUgdGhhdCBpcyBwcmVwZW5kZWQgdG8gdGhlIGxpc3QgaWYgdGhlIHZpZXdWYWx1ZVxuICAvLyBkb2VzIG5vdCBtYXRjaCBhbnkgb2YgdGhlIG9wdGlvbnMuIFdoZW4gaXQgaXMgcmVuZGVyZWQgdGhlIHZhbHVlIG9mIHRoZSB1bmtub3duXG4gIC8vIG9wdGlvbiBpcyAnPyBYWFggPycgd2hlcmUgWFhYIGlzIHRoZSBoYXNoS2V5IG9mIHRoZSB2YWx1ZSB0aGF0IGlzIG5vdCBrbm93bi5cbiAgLy9cbiAgLy8gU3VwcG9ydDogSUUgOSBvbmx5XG4gIC8vIFdlIGNhbid0IGp1c3QganFMaXRlKCc8b3B0aW9uPicpIHNpbmNlIGpxTGl0ZSBpcyBub3Qgc21hcnQgZW5vdWdoXG4gIC8vIHRvIGNyZWF0ZSBpdCBpbiA8c2VsZWN0PiBhbmQgSUUgYmFyZnMgb3RoZXJ3aXNlLlxuICBzZWxmLnVua25vd25PcHRpb24gPSBqcUxpdGUod2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpKTtcblxuICAvLyBUaGUgZW1wdHkgb3B0aW9uIGlzIGFuIG9wdGlvbiB3aXRoIHRoZSB2YWx1ZSAnJyB0aGF0IHRoZSBhcHBsaWNhdGlvbiBkZXZlbG9wZXIgY2FuXG4gIC8vIHByb3ZpZGUgaW5zaWRlIHRoZSBzZWxlY3QuIEl0IGlzIGFsd2F5cyBzZWxlY3RhYmxlIGFuZCBpbmRpY2F0ZXMgdGhhdCBhIFwibnVsbFwiIHNlbGVjdGlvbiBoYXNcbiAgLy8gYmVlbiBtYWRlIGJ5IHRoZSB1c2VyLlxuICAvLyBJZiB0aGUgc2VsZWN0IGhhcyBhbiBlbXB0eSBvcHRpb24sIGFuZCB0aGUgbW9kZWwgb2YgdGhlIHNlbGVjdCBpcyBzZXQgdG8gXCJ1bmRlZmluZWRcIiBvciBcIm51bGxcIixcbiAgLy8gdGhlIGVtcHR5IG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAgLy8gSWYgdGhlIG1vZGVsIGlzIHNldCB0byBhIGRpZmZlcmVudCB1bm1hdGNoZWQgdmFsdWUsIHRoZSB1bmtub3duIG9wdGlvbiBpcyByZW5kZXJlZCBhbmRcbiAgLy8gc2VsZWN0ZWQsIGkuZSBib3RoIGFyZSBwcmVzZW50LCBiZWNhdXNlIGEgXCJudWxsXCIgc2VsZWN0aW9uIGFuZCBhbiB1bmtub3duIHZhbHVlIGFyZSBkaWZmZXJlbnQuXG4gIHNlbGYuaGFzRW1wdHlPcHRpb24gPSBmYWxzZTtcbiAgc2VsZi5lbXB0eU9wdGlvbiA9IHVuZGVmaW5lZDtcblxuICBzZWxmLnJlbmRlclVua25vd25PcHRpb24gPSBmdW5jdGlvbih2YWwpIHtcbiAgICB2YXIgdW5rbm93blZhbCA9IHNlbGYuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUodmFsKTtcbiAgICBzZWxmLnVua25vd25PcHRpb24udmFsKHVua25vd25WYWwpO1xuICAgICRlbGVtZW50LnByZXBlbmQoc2VsZi51bmtub3duT3B0aW9uKTtcbiAgICBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhzZWxmLnVua25vd25PcHRpb24sIHRydWUpO1xuICAgICRlbGVtZW50LnZhbCh1bmtub3duVmFsKTtcbiAgfTtcblxuICBzZWxmLnVwZGF0ZVVua25vd25PcHRpb24gPSBmdW5jdGlvbih2YWwpIHtcbiAgICB2YXIgdW5rbm93blZhbCA9IHNlbGYuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUodmFsKTtcbiAgICBzZWxmLnVua25vd25PcHRpb24udmFsKHVua25vd25WYWwpO1xuICAgIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKHNlbGYudW5rbm93bk9wdGlvbiwgdHJ1ZSk7XG4gICAgJGVsZW1lbnQudmFsKHVua25vd25WYWwpO1xuICB9O1xuXG4gIHNlbGYuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICByZXR1cm4gJz8gJyArIGhhc2hLZXkodmFsKSArICcgPyc7XG4gIH07XG5cbiAgc2VsZi5yZW1vdmVVbmtub3duT3B0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNlbGYudW5rbm93bk9wdGlvbi5wYXJlbnQoKSkgc2VsZi51bmtub3duT3B0aW9uLnJlbW92ZSgpO1xuICB9O1xuXG4gIHNlbGYuc2VsZWN0RW1wdHlPcHRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc2VsZi5lbXB0eU9wdGlvbikge1xuICAgICAgJGVsZW1lbnQudmFsKCcnKTtcbiAgICAgIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKHNlbGYuZW1wdHlPcHRpb24sIHRydWUpO1xuICAgIH1cbiAgfTtcblxuICBzZWxmLnVuc2VsZWN0RW1wdHlPcHRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc2VsZi5oYXNFbXB0eU9wdGlvbikge1xuICAgICAgc2V0T3B0aW9uU2VsZWN0ZWRTdGF0dXMoc2VsZi5lbXB0eU9wdGlvbiwgZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgIC8vIGRpc2FibGUgdW5rbm93biBvcHRpb24gc28gdGhhdCB3ZSBkb24ndCBkbyB3b3JrIHdoZW4gdGhlIHdob2xlIHNlbGVjdCBpcyBiZWluZyBkZXN0cm95ZWRcbiAgICBzZWxmLnJlbmRlclVua25vd25PcHRpb24gPSBub29wO1xuICB9KTtcblxuICAvLyBSZWFkIHRoZSB2YWx1ZSBvZiB0aGUgc2VsZWN0IGNvbnRyb2wsIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIGNoYW5nZXMgZGVwZW5kaW5nXG4gIC8vIHVwb24gd2hldGhlciB0aGUgc2VsZWN0IGNhbiBoYXZlIG11bHRpcGxlIHZhbHVlcyBhbmQgd2hldGhlciBuZ09wdGlvbnMgaXMgYXQgd29yay5cbiAgc2VsZi5yZWFkVmFsdWUgPSBmdW5jdGlvbiByZWFkU2luZ2xlVmFsdWUoKSB7XG4gICAgdmFyIHZhbCA9ICRlbGVtZW50LnZhbCgpO1xuICAgIC8vIG5nVmFsdWUgYWRkZWQgb3B0aW9uIHZhbHVlcyBhcmUgc3RvcmVkIGluIHRoZSBzZWxlY3RWYWx1ZU1hcCwgbm9ybWFsIGludGVycG9sYXRpb25zIGFyZSBub3RcbiAgICB2YXIgcmVhbFZhbCA9IHZhbCBpbiBzZWxmLnNlbGVjdFZhbHVlTWFwID8gc2VsZi5zZWxlY3RWYWx1ZU1hcFt2YWxdIDogdmFsO1xuXG4gICAgaWYgKHNlbGYuaGFzT3B0aW9uKHJlYWxWYWwpKSB7XG4gICAgICByZXR1cm4gcmVhbFZhbDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuXG4gIC8vIFdyaXRlIHRoZSB2YWx1ZSB0byB0aGUgc2VsZWN0IGNvbnRyb2wsIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIGNoYW5nZXMgZGVwZW5kaW5nXG4gIC8vIHVwb24gd2hldGhlciB0aGUgc2VsZWN0IGNhbiBoYXZlIG11bHRpcGxlIHZhbHVlcyBhbmQgd2hldGhlciBuZ09wdGlvbnMgaXMgYXQgd29yay5cbiAgc2VsZi53cml0ZVZhbHVlID0gZnVuY3Rpb24gd3JpdGVTaW5nbGVWYWx1ZSh2YWx1ZSkge1xuICAgIC8vIE1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIHNlbGVjdGVkIGF0dHJpYnV0ZSBmcm9tIHRoZSBwcmV2aW91c2x5IHNlbGVjdGVkIG9wdGlvblxuICAgIC8vIE90aGVyd2lzZSwgc2NyZWVuIHJlYWRlcnMgbWlnaHQgZ2V0IGNvbmZ1c2VkXG4gICAgdmFyIGN1cnJlbnRseVNlbGVjdGVkT3B0aW9uID0gJGVsZW1lbnRbMF0ub3B0aW9uc1skZWxlbWVudFswXS5zZWxlY3RlZEluZGV4XTtcbiAgICBpZiAoY3VycmVudGx5U2VsZWN0ZWRPcHRpb24pIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKGpxTGl0ZShjdXJyZW50bHlTZWxlY3RlZE9wdGlvbiksIGZhbHNlKTtcblxuICAgIGlmIChzZWxmLmhhc09wdGlvbih2YWx1ZSkpIHtcbiAgICAgIHNlbGYucmVtb3ZlVW5rbm93bk9wdGlvbigpO1xuXG4gICAgICB2YXIgaGFzaGVkVmFsID0gaGFzaEtleSh2YWx1ZSk7XG4gICAgICAkZWxlbWVudC52YWwoaGFzaGVkVmFsIGluIHNlbGYuc2VsZWN0VmFsdWVNYXAgPyBoYXNoZWRWYWwgOiB2YWx1ZSk7XG5cbiAgICAgIC8vIFNldCBzZWxlY3RlZCBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5IG9uIHNlbGVjdGVkIG9wdGlvbiBmb3Igc2NyZWVuIHJlYWRlcnNcbiAgICAgIHZhciBzZWxlY3RlZE9wdGlvbiA9ICRlbGVtZW50WzBdLm9wdGlvbnNbJGVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleF07XG4gICAgICBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhqcUxpdGUoc2VsZWN0ZWRPcHRpb24pLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5zZWxlY3RVbmtub3duT3JFbXB0eU9wdGlvbih2YWx1ZSk7XG4gICAgfVxuICB9O1xuXG5cbiAgLy8gVGVsbCB0aGUgc2VsZWN0IGNvbnRyb2wgdGhhdCBhbiBvcHRpb24sIHdpdGggdGhlIGdpdmVuIHZhbHVlLCBoYXMgYmVlbiBhZGRlZFxuICBzZWxmLmFkZE9wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgLy8gU2tpcCBjb21tZW50IG5vZGVzLCBhcyB0aGV5IG9ubHkgcG9sbHV0ZSB0aGUgYG9wdGlvbnNNYXBgXG4gICAgaWYgKGVsZW1lbnRbMF0ubm9kZVR5cGUgPT09IE5PREVfVFlQRV9DT01NRU5UKSByZXR1cm47XG5cbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgJ1wib3B0aW9uIHZhbHVlXCInKTtcbiAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICBzZWxmLmhhc0VtcHR5T3B0aW9uID0gdHJ1ZTtcbiAgICAgIHNlbGYuZW1wdHlPcHRpb24gPSBlbGVtZW50O1xuICAgIH1cbiAgICB2YXIgY291bnQgPSBvcHRpb25zTWFwLmdldCh2YWx1ZSkgfHwgMDtcbiAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgY291bnQgKyAxKTtcbiAgICAvLyBPbmx5IHJlbmRlciBhdCB0aGUgZW5kIG9mIGEgZGlnZXN0LiBUaGlzIGltcHJvdmVzIHJlbmRlciBwZXJmb3JtYW5jZSB3aGVuIG1hbnkgb3B0aW9uc1xuICAgIC8vIGFyZSBhZGRlZCBkdXJpbmcgYSBkaWdlc3QgYW5kIGVuc3VyZXMgYWxsIHJlbGV2YW50IG9wdGlvbnMgYXJlIGNvcnJlY3RseSBtYXJrZWQgYXMgc2VsZWN0ZWRcbiAgICBzY2hlZHVsZVJlbmRlcigpO1xuICB9O1xuXG4gIC8vIFRlbGwgdGhlIHNlbGVjdCBjb250cm9sIHRoYXQgYW4gb3B0aW9uLCB3aXRoIHRoZSBnaXZlbiB2YWx1ZSwgaGFzIGJlZW4gcmVtb3ZlZFxuICBzZWxmLnJlbW92ZU9wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIGNvdW50ID0gb3B0aW9uc01hcC5nZXQodmFsdWUpO1xuICAgIGlmIChjb3VudCkge1xuICAgICAgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgICAgIG9wdGlvbnNNYXAuZGVsZXRlKHZhbHVlKTtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgIHNlbGYuaGFzRW1wdHlPcHRpb24gPSBmYWxzZTtcbiAgICAgICAgICBzZWxmLmVtcHR5T3B0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgY291bnQgLSAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gQ2hlY2sgd2hldGhlciB0aGUgc2VsZWN0IGNvbnRyb2wgaGFzIGFuIG9wdGlvbiBtYXRjaGluZyB0aGUgZ2l2ZW4gdmFsdWVcbiAgc2VsZi5oYXNPcHRpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiAhIW9wdGlvbnNNYXAuZ2V0KHZhbHVlKTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBzZWxlY3QuU2VsZWN0Q29udHJvbGxlciMkaGFzRW1wdHlPcHRpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzZWxlY3QgZWxlbWVudCBjdXJyZW50bHkgaGFzIGFuIGVtcHR5IG9wdGlvblxuICAgKiBlbGVtZW50LCBpLmUuIGFuIG9wdGlvbiB0aGF0IHNpZ25pZmllcyB0aGF0IHRoZSBzZWxlY3QgaXMgZW1wdHkgLyB0aGUgc2VsZWN0aW9uIGlzIG51bGwuXG4gICAqXG4gICAqL1xuICBzZWxmLiRoYXNFbXB0eU9wdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmhhc0VtcHR5T3B0aW9uO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIHNlbGVjdC5TZWxlY3RDb250cm9sbGVyIyRpc1Vua25vd25PcHRpb25TZWxlY3RlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHNlbGVjdCBlbGVtZW50J3MgdW5rbm93biBvcHRpb24gaXMgc2VsZWN0ZWQuIFRoZSB1bmtub3duIG9wdGlvbiBpcyBhZGRlZFxuICAgKiBhbmQgYXV0b21hdGljYWxseSBzZWxlY3RlZCB3aGVuZXZlciB0aGUgc2VsZWN0IG1vZGVsIGRvZXNuJ3QgbWF0Y2ggYW55IG9wdGlvbi5cbiAgICpcbiAgICovXG4gIHNlbGYuJGlzVW5rbm93bk9wdGlvblNlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gUHJlc2VuY2Ugb2YgdGhlIHVua25vd24gb3B0aW9uIG1lYW5zIGl0IGlzIHNlbGVjdGVkXG4gICAgcmV0dXJuICRlbGVtZW50WzBdLm9wdGlvbnNbMF0gPT09IHNlbGYudW5rbm93bk9wdGlvblswXTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBzZWxlY3QuU2VsZWN0Q29udHJvbGxlciMkaXNFbXB0eU9wdGlvblNlbGVjdGVkXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc2VsZWN0IGVsZW1lbnQgaGFzIGFuIGVtcHR5IG9wdGlvbiBhbmQgdGhpcyBlbXB0eSBvcHRpb24gaXMgY3VycmVudGx5XG4gICAqIHNlbGVjdGVkLiBSZXR1cm5zIGBmYWxzZWAgaWYgdGhlIHNlbGVjdCBlbGVtZW50IGhhcyBubyBlbXB0eSBvcHRpb24gb3IgaXQgaXMgbm90IHNlbGVjdGVkLlxuICAgKlxuICAgKi9cbiAgc2VsZi4kaXNFbXB0eU9wdGlvblNlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuaGFzRW1wdHlPcHRpb24gJiYgJGVsZW1lbnRbMF0ub3B0aW9uc1skZWxlbWVudFswXS5zZWxlY3RlZEluZGV4XSA9PT0gc2VsZi5lbXB0eU9wdGlvblswXTtcbiAgfTtcblxuICBzZWxmLnNlbGVjdFVua25vd25PckVtcHR5T3B0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCAmJiBzZWxmLmVtcHR5T3B0aW9uKSB7XG4gICAgICBzZWxmLnJlbW92ZVVua25vd25PcHRpb24oKTtcbiAgICAgIHNlbGYuc2VsZWN0RW1wdHlPcHRpb24oKTtcbiAgICB9IGVsc2UgaWYgKHNlbGYudW5rbm93bk9wdGlvbi5wYXJlbnQoKS5sZW5ndGgpIHtcbiAgICAgIHNlbGYudXBkYXRlVW5rbm93bk9wdGlvbih2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYucmVuZGVyVW5rbm93bk9wdGlvbih2YWx1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciByZW5kZXJTY2hlZHVsZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gc2NoZWR1bGVSZW5kZXIoKSB7XG4gICAgaWYgKHJlbmRlclNjaGVkdWxlZCkgcmV0dXJuO1xuICAgIHJlbmRlclNjaGVkdWxlZCA9IHRydWU7XG4gICAgJHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcbiAgICAgIHJlbmRlclNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5uZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgdXBkYXRlU2NoZWR1bGVkID0gZmFsc2U7XG4gIGZ1bmN0aW9uIHNjaGVkdWxlVmlld1ZhbHVlVXBkYXRlKHJlbmRlckFmdGVyKSB7XG4gICAgaWYgKHVwZGF0ZVNjaGVkdWxlZCkgcmV0dXJuO1xuXG4gICAgdXBkYXRlU2NoZWR1bGVkID0gdHJ1ZTtcblxuICAgICRzY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoJHNjb3BlLiQkZGVzdHJveWVkKSByZXR1cm47XG5cbiAgICAgIHVwZGF0ZVNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5uZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKHNlbGYucmVhZFZhbHVlKCkpO1xuICAgICAgaWYgKHJlbmRlckFmdGVyKSBzZWxmLm5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgc2VsZi5yZWdpc3Rlck9wdGlvbiA9IGZ1bmN0aW9uKG9wdGlvblNjb3BlLCBvcHRpb25FbGVtZW50LCBvcHRpb25BdHRycywgaW50ZXJwb2xhdGVWYWx1ZUZuLCBpbnRlcnBvbGF0ZVRleHRGbikge1xuXG4gICAgaWYgKG9wdGlvbkF0dHJzLiRhdHRyLm5nVmFsdWUpIHtcbiAgICAgIC8vIFRoZSB2YWx1ZSBhdHRyaWJ1dGUgaXMgc2V0IGJ5IG5nVmFsdWVcbiAgICAgIHZhciBvbGRWYWwsIGhhc2hlZFZhbCA9IE5hTjtcbiAgICAgIG9wdGlvbkF0dHJzLiRvYnNlcnZlKCd2YWx1ZScsIGZ1bmN0aW9uIHZhbHVlQXR0cmlidXRlT2JzZXJ2ZUFjdGlvbihuZXdWYWwpIHtcblxuICAgICAgICB2YXIgcmVtb3ZhbDtcbiAgICAgICAgdmFyIHByZXZpb3VzbHlTZWxlY3RlZCA9IG9wdGlvbkVsZW1lbnQucHJvcCgnc2VsZWN0ZWQnKTtcblxuICAgICAgICBpZiAoaXNEZWZpbmVkKGhhc2hlZFZhbCkpIHtcbiAgICAgICAgICBzZWxmLnJlbW92ZU9wdGlvbihvbGRWYWwpO1xuICAgICAgICAgIGRlbGV0ZSBzZWxmLnNlbGVjdFZhbHVlTWFwW2hhc2hlZFZhbF07XG4gICAgICAgICAgcmVtb3ZhbCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBoYXNoZWRWYWwgPSBoYXNoS2V5KG5ld1ZhbCk7XG4gICAgICAgIG9sZFZhbCA9IG5ld1ZhbDtcbiAgICAgICAgc2VsZi5zZWxlY3RWYWx1ZU1hcFtoYXNoZWRWYWxdID0gbmV3VmFsO1xuICAgICAgICBzZWxmLmFkZE9wdGlvbihuZXdWYWwsIG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAvLyBTZXQgdGhlIGF0dHJpYnV0ZSBkaXJlY3RseSBpbnN0ZWFkIG9mIHVzaW5nIG9wdGlvbkF0dHJzLiRzZXQgLSB0aGlzIHN0b3BzIHRoZSBvYnNlcnZlclxuICAgICAgICAvLyBmcm9tIGZpcmluZyBhIHNlY29uZCB0aW1lLiBPdGhlciAkb2JzZXJ2ZXJzIG9uIHZhbHVlIHdpbGwgYWxzbyBnZXQgdGhlIHJlc3VsdCBvZiB0aGVcbiAgICAgICAgLy8gbmdWYWx1ZSBleHByZXNzaW9uLCBub3QgdGhlIGhhc2hlZCB2YWx1ZVxuICAgICAgICBvcHRpb25FbGVtZW50LmF0dHIoJ3ZhbHVlJywgaGFzaGVkVmFsKTtcblxuICAgICAgICBpZiAocmVtb3ZhbCAmJiBwcmV2aW91c2x5U2VsZWN0ZWQpIHtcbiAgICAgICAgICBzY2hlZHVsZVZpZXdWYWx1ZVVwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoaW50ZXJwb2xhdGVWYWx1ZUZuKSB7XG4gICAgICAvLyBUaGUgdmFsdWUgYXR0cmlidXRlIGlzIGludGVycG9sYXRlZFxuICAgICAgb3B0aW9uQXR0cnMuJG9ic2VydmUoJ3ZhbHVlJywgZnVuY3Rpb24gdmFsdWVBdHRyaWJ1dGVPYnNlcnZlQWN0aW9uKG5ld1ZhbCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCBpcyBvdmVyd3JpdHRlbiBpbiBuZ09wdGlvbnMgYW5kIGhhcyBzaWRlLWVmZmVjdHMhXG4gICAgICAgIHNlbGYucmVhZFZhbHVlKCk7XG5cbiAgICAgICAgdmFyIHJlbW92YWw7XG4gICAgICAgIHZhciBwcmV2aW91c2x5U2VsZWN0ZWQgPSBvcHRpb25FbGVtZW50LnByb3AoJ3NlbGVjdGVkJyk7XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChvbGRWYWwpKSB7XG4gICAgICAgICAgc2VsZi5yZW1vdmVPcHRpb24ob2xkVmFsKTtcbiAgICAgICAgICByZW1vdmFsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvbGRWYWwgPSBuZXdWYWw7XG4gICAgICAgIHNlbGYuYWRkT3B0aW9uKG5ld1ZhbCwgb3B0aW9uRWxlbWVudCk7XG5cbiAgICAgICAgaWYgKHJlbW92YWwgJiYgcHJldmlvdXNseVNlbGVjdGVkKSB7XG4gICAgICAgICAgc2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpbnRlcnBvbGF0ZVRleHRGbikge1xuICAgICAgLy8gVGhlIHRleHQgY29udGVudCBpcyBpbnRlcnBvbGF0ZWRcbiAgICAgIG9wdGlvblNjb3BlLiR3YXRjaChpbnRlcnBvbGF0ZVRleHRGbiwgZnVuY3Rpb24gaW50ZXJwb2xhdGVXYXRjaEFjdGlvbihuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICBvcHRpb25BdHRycy4kc2V0KCd2YWx1ZScsIG5ld1ZhbCk7XG4gICAgICAgIHZhciBwcmV2aW91c2x5U2VsZWN0ZWQgPSBvcHRpb25FbGVtZW50LnByb3AoJ3NlbGVjdGVkJyk7XG4gICAgICAgIGlmIChvbGRWYWwgIT09IG5ld1ZhbCkge1xuICAgICAgICAgIHNlbGYucmVtb3ZlT3B0aW9uKG9sZFZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5hZGRPcHRpb24obmV3VmFsLCBvcHRpb25FbGVtZW50KTtcblxuICAgICAgICBpZiAob2xkVmFsICYmIHByZXZpb3VzbHlTZWxlY3RlZCkge1xuICAgICAgICAgIHNjaGVkdWxlVmlld1ZhbHVlVXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgdmFsdWUgYXR0cmlidXRlIGlzIHN0YXRpY1xuICAgICAgc2VsZi5hZGRPcHRpb24ob3B0aW9uQXR0cnMudmFsdWUsIG9wdGlvbkVsZW1lbnQpO1xuICAgIH1cblxuXG4gICAgb3B0aW9uQXR0cnMuJG9ic2VydmUoJ2Rpc2FibGVkJywgZnVuY3Rpb24obmV3VmFsKSB7XG5cbiAgICAgIC8vIFNpbmNlIG1vZGVsIHVwZGF0ZXMgd2lsbCBhbHNvIHNlbGVjdCBkaXNhYmxlZCBvcHRpb25zIChsaWtlIG5nT3B0aW9ucyksXG4gICAgICAvLyB3ZSBvbmx5IGhhdmUgdG8gaGFuZGxlIG9wdGlvbnMgYmVjb21pbmcgZGlzYWJsZWQsIG5vdCBlbmFibGVkXG5cbiAgICAgIGlmIChuZXdWYWwgPT09ICd0cnVlJyB8fCBuZXdWYWwgJiYgb3B0aW9uRWxlbWVudC5wcm9wKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgIGlmIChzZWxmLm11bHRpcGxlKSB7XG4gICAgICAgICAgc2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5uZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKG51bGwpO1xuICAgICAgICAgIHNlbGYubmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBvcHRpb25FbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IHNlbGYucmVhZFZhbHVlKCk7XG4gICAgICB2YXIgcmVtb3ZlVmFsdWUgPSBvcHRpb25BdHRycy52YWx1ZTtcblxuICAgICAgc2VsZi5yZW1vdmVPcHRpb24ocmVtb3ZlVmFsdWUpO1xuICAgICAgc2NoZWR1bGVSZW5kZXIoKTtcblxuICAgICAgaWYgKHNlbGYubXVsdGlwbGUgJiYgY3VycmVudFZhbHVlICYmIGN1cnJlbnRWYWx1ZS5pbmRleE9mKHJlbW92ZVZhbHVlKSAhPT0gLTEgfHxcbiAgICAgICAgICBjdXJyZW50VmFsdWUgPT09IHJlbW92ZVZhbHVlXG4gICAgICApIHtcbiAgICAgICAgLy8gV2hlbiBtdWx0aXBsZSAoc2VsZWN0ZWQpIG9wdGlvbnMgYXJlIGRlc3Ryb3llZCBhdCB0aGUgc2FtZSB0aW1lLCB3ZSBkb24ndCB3YW50XG4gICAgICAgIC8vIHRvIHJ1biBhIG1vZGVsIHVwZGF0ZSBmb3IgZWFjaCBvZiB0aGVtLiBJbnN0ZWFkLCBydW4gYSBzaW5nbGUgdXBkYXRlIGluIHRoZSAkJHBvc3REaWdlc3RcbiAgICAgICAgc2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBzZWxlY3RcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIVE1MIGBzZWxlY3RgIGVsZW1lbnQgd2l0aCBBbmd1bGFySlMgZGF0YS1iaW5kaW5nLlxuICpcbiAqIFRoZSBgc2VsZWN0YCBkaXJlY3RpdmUgaXMgdXNlZCB0b2dldGhlciB3aXRoIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0gdG8gcHJvdmlkZSBkYXRhLWJpbmRpbmdcbiAqIGJldHdlZW4gdGhlIHNjb3BlIGFuZCB0aGUgYDxzZWxlY3Q+YCBjb250cm9sIChpbmNsdWRpbmcgc2V0dGluZyBkZWZhdWx0IHZhbHVlcykuXG4gKiBJdCBhbHNvIGhhbmRsZXMgZHluYW1pYyBgPG9wdGlvbj5gIGVsZW1lbnRzLCB3aGljaCBjYW4gYmUgYWRkZWQgdXNpbmcgdGhlIHtAbGluayBuZ1JlcGVhdCBgbmdSZXBlYXR9YCBvclxuICoge0BsaW5rIG5nT3B0aW9ucyBgbmdPcHRpb25zYH0gZGlyZWN0aXZlcy5cbiAqXG4gKiBXaGVuIGFuIGl0ZW0gaW4gdGhlIGA8c2VsZWN0PmAgbWVudSBpcyBzZWxlY3RlZCwgdGhlIHZhbHVlIG9mIHRoZSBzZWxlY3RlZCBvcHRpb24gd2lsbCBiZSBib3VuZFxuICogdG8gdGhlIG1vZGVsIGlkZW50aWZpZWQgYnkgdGhlIGBuZ01vZGVsYCBkaXJlY3RpdmUuIFdpdGggc3RhdGljIG9yIHJlcGVhdGVkIG9wdGlvbnMsIHRoaXMgaXNcbiAqIHRoZSBjb250ZW50IG9mIHRoZSBgdmFsdWVgIGF0dHJpYnV0ZSBvciB0aGUgdGV4dENvbnRlbnQgb2YgdGhlIGA8b3B0aW9uPmAsIGlmIHRoZSB2YWx1ZSBhdHRyaWJ1dGUgaXMgbWlzc2luZy5cbiAqIFZhbHVlIGFuZCB0ZXh0Q29udGVudCBjYW4gYmUgaW50ZXJwb2xhdGVkLlxuICpcbiAqIFRoZSB7QGxpbmsgc2VsZWN0LlNlbGVjdENvbnRyb2xsZXIgc2VsZWN0IGNvbnRyb2xsZXJ9IGV4cG9zZXMgdXRpbGl0eSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZFxuICogdG8gbWFuaXB1bGF0ZSB0aGUgc2VsZWN0J3MgYmVoYXZpb3IuXG4gKlxuICogIyMgTWF0Y2hpbmcgbW9kZWwgYW5kIG9wdGlvbiB2YWx1ZXNcbiAqXG4gKiBJbiBnZW5lcmFsLCB0aGUgbWF0Y2ggYmV0d2VlbiB0aGUgbW9kZWwgYW5kIGFuIG9wdGlvbiBpcyBldmFsdWF0ZWQgYnkgc3RyaWN0bHkgY29tcGFyaW5nIHRoZSBtb2RlbFxuICogdmFsdWUgYWdhaW5zdCB0aGUgdmFsdWUgb2YgdGhlIGF2YWlsYWJsZSBvcHRpb25zLlxuICpcbiAqIElmIHlvdSBhcmUgc2V0dGluZyB0aGUgb3B0aW9uIHZhbHVlIHdpdGggdGhlIG9wdGlvbidzIGB2YWx1ZWAgYXR0cmlidXRlLCBvciB0ZXh0Q29udGVudCwgdGhlXG4gKiB2YWx1ZSB3aWxsIGFsd2F5cyBiZSBhIGBzdHJpbmdgIHdoaWNoIG1lYW5zIHRoYXQgdGhlIG1vZGVsIHZhbHVlIG11c3QgYWxzbyBiZSBhIHN0cmluZy5cbiAqIE90aGVyd2lzZSB0aGUgYHNlbGVjdGAgZGlyZWN0aXZlIGNhbm5vdCBtYXRjaCB0aGVtIGNvcnJlY3RseS5cbiAqXG4gKiBUbyBiaW5kIHRoZSBtb2RlbCB0byBhIG5vbi1zdHJpbmcgdmFsdWUsIHlvdSBjYW4gdXNlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHN0cmF0ZWdpZXM6XG4gKiAtIHRoZSB7QGxpbmsgbmcubmdPcHRpb25zIGBuZ09wdGlvbnNgfSBkaXJlY3RpdmVcbiAqICAgKHtAbGluayBuZy5zZWxlY3QjdXNpbmctc2VsZWN0LXdpdGgtbmdvcHRpb25zLWFuZC1zZXR0aW5nLWEtZGVmYXVsdC12YWx1ZX0pXG4gKiAtIHRoZSB7QGxpbmsgbmcubmdWYWx1ZSBgbmdWYWx1ZWB9IGRpcmVjdGl2ZSwgd2hpY2ggYWxsb3dzIGFyYml0cmFyeSBleHByZXNzaW9ucyB0byBiZVxuICogICBvcHRpb24gdmFsdWVzICh7QGxpbmsgbmcuc2VsZWN0I3VzaW5nLW5ndmFsdWUtdG8tYmluZC10aGUtbW9kZWwtdG8tYW4tYXJyYXktb2Ytb2JqZWN0cyBFeGFtcGxlfSlcbiAqIC0gbW9kZWwgJHBhcnNlcnMgLyAkZm9ybWF0dGVycyB0byBjb252ZXJ0IHRoZSBzdHJpbmcgdmFsdWVcbiAqICAgKHtAbGluayBuZy5zZWxlY3QjYmluZGluZy1zZWxlY3QtdG8tYS1ub24tc3RyaW5nLXZhbHVlLXZpYS1uZ21vZGVsLXBhcnNpbmctZm9ybWF0dGluZyBFeGFtcGxlfSlcbiAqXG4gKiBJZiB0aGUgdmlld1ZhbHVlIG9mIGBuZ01vZGVsYCBkb2VzIG5vdCBtYXRjaCBhbnkgb2YgdGhlIG9wdGlvbnMsIHRoZW4gdGhlIGNvbnRyb2xcbiAqIHdpbGwgYXV0b21hdGljYWxseSBhZGQgYW4gXCJ1bmtub3duXCIgb3B0aW9uLCB3aGljaCBpdCB0aGVuIHJlbW92ZXMgd2hlbiB0aGUgbWlzbWF0Y2ggaXMgcmVzb2x2ZWQuXG4gKlxuICogT3B0aW9uYWxseSwgYSBzaW5nbGUgaGFyZC1jb2RlZCBgPG9wdGlvbj5gIGVsZW1lbnQsIHdpdGggdGhlIHZhbHVlIHNldCB0byBhbiBlbXB0eSBzdHJpbmcsIGNhblxuICogYmUgbmVzdGVkIGludG8gdGhlIGA8c2VsZWN0PmAgZWxlbWVudC4gVGhpcyBlbGVtZW50IHdpbGwgdGhlbiByZXByZXNlbnQgdGhlIGBudWxsYCBvciBcIm5vdCBzZWxlY3RlZFwiXG4gKiBvcHRpb24uIFNlZSBleGFtcGxlIGJlbG93IGZvciBkZW1vbnN0cmF0aW9uLlxuICpcbiAqICMjIENob29zaW5nIGJldHdlZW4gYG5nUmVwZWF0YCBhbmQgYG5nT3B0aW9uc2BcbiAqXG4gKiBJbiBtYW55IGNhc2VzLCBgbmdSZXBlYXRgIGNhbiBiZSB1c2VkIG9uIGA8b3B0aW9uPmAgZWxlbWVudHMgaW5zdGVhZCBvZiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nT3B0aW9uc1xuICogbmdPcHRpb25zfSB0byBhY2hpZXZlIGEgc2ltaWxhciByZXN1bHQuIEhvd2V2ZXIsIGBuZ09wdGlvbnNgIHByb3ZpZGVzIHNvbWUgYmVuZWZpdHM6XG4gKiAtIG1vcmUgZmxleGliaWxpdHkgaW4gaG93IHRoZSBgPHNlbGVjdD5gJ3MgbW9kZWwgaXMgYXNzaWduZWQgdmlhIHRoZSBgc2VsZWN0YCAqKmBhc2AqKiBwYXJ0IG9mIHRoZVxuICogY29tcHJlaGVuc2lvbiBleHByZXNzaW9uXG4gKiAtIHJlZHVjZWQgbWVtb3J5IGNvbnN1bXB0aW9uIGJ5IG5vdCBjcmVhdGluZyBhIG5ldyBzY29wZSBmb3IgZWFjaCByZXBlYXRlZCBpbnN0YW5jZVxuICogLSBpbmNyZWFzZWQgcmVuZGVyIHNwZWVkIGJ5IGNyZWF0aW5nIHRoZSBvcHRpb25zIGluIGEgZG9jdW1lbnRGcmFnbWVudCBpbnN0ZWFkIG9mIGluZGl2aWR1YWxseVxuICpcbiAqIFNwZWNpZmljYWxseSwgc2VsZWN0IHdpdGggcmVwZWF0ZWQgb3B0aW9ucyBzbG93cyBkb3duIHNpZ25pZmljYW50bHkgc3RhcnRpbmcgYXQgMjAwMCBvcHRpb25zIGluXG4gKiBDaHJvbWUgYW5kIEludGVybmV0IEV4cGxvcmVyIC8gRWRnZS5cbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG11bHRpcGxlIEFsbG93cyBtdWx0aXBsZSBvcHRpb25zIHRvIGJlIHNlbGVjdGVkLiBUaGUgc2VsZWN0ZWQgdmFsdWVzIHdpbGwgYmVcbiAqICAgICBib3VuZCB0byB0aGUgbW9kZWwgYXMgYW4gYXJyYXkuXG4gKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyByZXF1aXJlZCBhdHRyaWJ1dGUgYW5kIHJlcXVpcmVkIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICogdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgbmdSZXF1aXJlZCBpbnN0ZWFkIG9mIHJlcXVpcmVkXG4gKiB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgcmVxdWlyZWQgYXR0cmlidXRlLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIHNlbGVjdGVkIG9wdGlvbihzKSBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBzZWxlY3QgZWxlbWVudC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdPcHRpb25zIHNldHMgdGhlIG9wdGlvbnMgdGhhdCB0aGUgc2VsZWN0IGlzIHBvcHVsYXRlZCB3aXRoIGFuZCBkZWZpbmVzIHdoYXQgaXNcbiAqIHNldCBvbiB0aGUgbW9kZWwgb24gc2VsZWN0aW9uLiBTZWUge0BsaW5rIG5nT3B0aW9ucyBgbmdPcHRpb25zYH0uXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQXR0clNpemUgc2V0cyB0aGUgc2l6ZSBvZiB0aGUgc2VsZWN0IGVsZW1lbnQgZHluYW1pY2FsbHkuIFVzZXMgdGhlXG4gKiB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiMtbmdhdHRyLWZvci1iaW5kaW5nLXRvLWFyYml0cmFyeS1hdHRyaWJ1dGVzIG5nQXR0cn0gZGlyZWN0aXZlLlxuICpcbiAqXG4gKiBAa25vd25Jc3N1ZVxuICpcbiAqIEluIEZpcmVmb3gsIHRoZSBzZWxlY3QgbW9kZWwgaXMgb25seSB1cGRhdGVkIHdoZW4gdGhlIHNlbGVjdCBlbGVtZW50IGlzIGJsdXJyZWQuIEZvciBleGFtcGxlLFxuICogd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiBvcHRpb25zIHdpdGggdGhlIGtleWJvYXJkLCB0aGUgc2VsZWN0IG1vZGVsIGlzIG9ubHkgc2V0IHRvIHRoZVxuICogY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbiB3aGVuIHRoZSBzZWxlY3QgaXMgYmx1cnJlZCwgZS5nIHZpYSB0YWIga2V5IG9yIGNsaWNraW5nIHRoZSBtb3VzZVxuICogb3V0c2lkZSB0aGUgc2VsZWN0LlxuICpcbiAqIFRoaXMgaXMgZHVlIHRvIGFuIGFtYmlndWl0eSBpbiB0aGUgc2VsZWN0IGVsZW1lbnQgc3BlY2lmaWNhdGlvbi4gU2VlIHRoZVxuICogW2lzc3VlIG9uIHRoZSBGaXJlZm94IGJ1ZyB0cmFja2VyXShodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMjYzNzkpXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiwgYW5kIHRoaXNcbiAqIFtHaXRodWIgY29tbWVudCBmb3IgYSB3b3JrYXJvdW5kXShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy85MTM0I2lzc3VlY29tbWVudC0xMzA4MDA0ODgpXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBTaW1wbGUgYHNlbGVjdGAgZWxlbWVudHMgd2l0aCBzdGF0aWMgb3B0aW9uc1xuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJzdGF0aWMtc2VsZWN0XCIgbW9kdWxlPVwic3RhdGljU2VsZWN0XCI+XG4gKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiPlxuICogICAgIDxsYWJlbCBmb3I9XCJzaW5nbGVTZWxlY3RcIj4gU2luZ2xlIHNlbGVjdDogPC9sYWJlbD48YnI+XG4gKiAgICAgPHNlbGVjdCBuYW1lPVwic2luZ2xlU2VsZWN0XCIgbmctbW9kZWw9XCJkYXRhLnNpbmdsZVNlbGVjdFwiPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0xXCI+T3B0aW9uIDE8L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tMlwiPk9wdGlvbiAyPC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+PGJyPlxuICpcbiAqICAgICA8bGFiZWwgZm9yPVwic2luZ2xlU2VsZWN0XCI+IFNpbmdsZSBzZWxlY3Qgd2l0aCBcIm5vdCBzZWxlY3RlZFwiIG9wdGlvbiBhbmQgZHluYW1pYyBvcHRpb24gdmFsdWVzOiA8L2xhYmVsPjxicj5cbiAqICAgICA8c2VsZWN0IG5hbWU9XCJzaW5nbGVTZWxlY3RcIiBpZD1cInNpbmdsZVNlbGVjdFwiIG5nLW1vZGVsPVwiZGF0YS5zaW5nbGVTZWxlY3RcIj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj4tLS1QbGVhc2Ugc2VsZWN0LS0tPC9vcHRpb24+IDwhLS0gbm90IHNlbGVjdGVkIC8gYmxhbmsgb3B0aW9uIC0tPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cInt7ZGF0YS5vcHRpb24xfX1cIj5PcHRpb24gMTwvb3B0aW9uPiA8IS0tIGludGVycG9sYXRpb24gLS0+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTJcIj5PcHRpb24gMjwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0Pjxicj5cbiAqICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiZm9yY2VVbmtub3duT3B0aW9uKClcIj5Gb3JjZSB1bmtub3duIG9wdGlvbjwvYnV0dG9uPjxicj5cbiAqICAgICA8dHQ+c2luZ2xlU2VsZWN0ID0ge3tkYXRhLnNpbmdsZVNlbGVjdH19PC90dD5cbiAqXG4gKiAgICAgPGhyPlxuICogICAgIDxsYWJlbCBmb3I9XCJtdWx0aXBsZVNlbGVjdFwiPiBNdWx0aXBsZSBzZWxlY3Q6IDwvbGFiZWw+PGJyPlxuICogICAgIDxzZWxlY3QgbmFtZT1cIm11bHRpcGxlU2VsZWN0XCIgaWQ9XCJtdWx0aXBsZVNlbGVjdFwiIG5nLW1vZGVsPVwiZGF0YS5tdWx0aXBsZVNlbGVjdFwiIG11bHRpcGxlPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0xXCI+T3B0aW9uIDE8L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tMlwiPk9wdGlvbiAyPC9vcHRpb24+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTNcIj5PcHRpb24gMzwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0Pjxicj5cbiAqICAgICA8dHQ+bXVsdGlwbGVTZWxlY3QgPSB7e2RhdGEubXVsdGlwbGVTZWxlY3R9fTwvdHQ+PGJyLz5cbiAqICAgPC9mb3JtPlxuICogPC9kaXY+XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgYW5ndWxhci5tb2R1bGUoJ3N0YXRpY1NlbGVjdCcsIFtdKVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLmRhdGEgPSB7XG4gKiAgICAgICBzaW5nbGVTZWxlY3Q6IG51bGwsXG4gKiAgICAgICBtdWx0aXBsZVNlbGVjdDogW10sXG4gKiAgICAgICBvcHRpb24xOiAnb3B0aW9uLTEnXG4gKiAgICAgIH07XG4gKlxuICogICAgICAkc2NvcGUuZm9yY2VVbmtub3duT3B0aW9uID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgJHNjb3BlLmRhdGEuc2luZ2xlU2VsZWN0ID0gJ25vbnNlbnNlJztcbiAqICAgICAgfTtcbiAqICAgfV0pO1xuICogPC9maWxlPlxuICo8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgbmdSZXBlYXRgIHRvIGdlbmVyYXRlIGBzZWxlY3RgIG9wdGlvbnNcbiAqIDxleGFtcGxlIG5hbWU9XCJzZWxlY3QtbmdyZXBlYXRcIiBtb2R1bGU9XCJuZ3JlcGVhdFNlbGVjdFwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAqICAgICA8bGFiZWwgZm9yPVwicmVwZWF0U2VsZWN0XCI+IFJlcGVhdCBzZWxlY3Q6IDwvbGFiZWw+XG4gKiAgICAgPHNlbGVjdCBuYW1lPVwicmVwZWF0U2VsZWN0XCIgaWQ9XCJyZXBlYXRTZWxlY3RcIiBuZy1tb2RlbD1cImRhdGEubW9kZWxcIj5cbiAqICAgICAgIDxvcHRpb24gbmctcmVwZWF0PVwib3B0aW9uIGluIGRhdGEuYXZhaWxhYmxlT3B0aW9uc1wiIHZhbHVlPVwie3tvcHRpb24uaWR9fVwiPnt7b3B0aW9uLm5hbWV9fTwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0PlxuICogICA8L2Zvcm0+XG4gKiAgIDxocj5cbiAqICAgPHR0Pm1vZGVsID0ge3tkYXRhLm1vZGVsfX08L3R0Pjxici8+XG4gKiA8L2Rpdj5cbiAqIDwvZmlsZT5cbiAqIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICBhbmd1bGFyLm1vZHVsZSgnbmdyZXBlYXRTZWxlY3QnLCBbXSlcbiAqICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICRzY29wZS5kYXRhID0ge1xuICogICAgICAgbW9kZWw6IG51bGwsXG4gKiAgICAgICBhdmFpbGFibGVPcHRpb25zOiBbXG4gKiAgICAgICAgIHtpZDogJzEnLCBuYW1lOiAnT3B0aW9uIEEnfSxcbiAqICAgICAgICAge2lkOiAnMicsIG5hbWU6ICdPcHRpb24gQid9LFxuICogICAgICAgICB7aWQ6ICczJywgbmFtZTogJ09wdGlvbiBDJ31cbiAqICAgICAgIF1cbiAqICAgICAgfTtcbiAqICAgfV0pO1xuICogPC9maWxlPlxuICo8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgbmdWYWx1ZWAgdG8gYmluZCB0aGUgbW9kZWwgdG8gYW4gYXJyYXkgb2Ygb2JqZWN0c1xuICogPGV4YW1wbGUgbmFtZT1cInNlbGVjdC1uZ3ZhbHVlXCIgbW9kdWxlPVwibmd2YWx1ZVNlbGVjdFwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAqICAgICA8bGFiZWwgZm9yPVwibmd2YWx1ZXNlbGVjdFwiPiBuZ3ZhbHVlIHNlbGVjdDogPC9sYWJlbD5cbiAqICAgICA8c2VsZWN0IHNpemU9XCI2XCIgbmFtZT1cIm5ndmFsdWVzZWxlY3RcIiBuZy1tb2RlbD1cImRhdGEubW9kZWxcIiBtdWx0aXBsZT5cbiAqICAgICAgIDxvcHRpb24gbmctcmVwZWF0PVwib3B0aW9uIGluIGRhdGEuYXZhaWxhYmxlT3B0aW9uc1wiIG5nLXZhbHVlPVwib3B0aW9uLnZhbHVlXCI+e3tvcHRpb24ubmFtZX19PC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+XG4gKiAgIDwvZm9ybT5cbiAqICAgPGhyPlxuICogICA8cHJlPm1vZGVsID0ge3tkYXRhLm1vZGVsIHwganNvbn19PC9wcmU+PGJyLz5cbiAqIDwvZGl2PlxuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogIGFuZ3VsYXIubW9kdWxlKCduZ3ZhbHVlU2VsZWN0JywgW10pXG4gKiAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAkc2NvcGUuZGF0YSA9IHtcbiAqICAgICAgIG1vZGVsOiBudWxsLFxuICogICAgICAgYXZhaWxhYmxlT3B0aW9uczogW1xuICAgICAgICAgICB7dmFsdWU6ICdteVN0cmluZycsIG5hbWU6ICdzdHJpbmcnfSxcbiAgICAgICAgICAge3ZhbHVlOiAxLCBuYW1lOiAnaW50ZWdlcid9LFxuICAgICAgICAgICB7dmFsdWU6IHRydWUsIG5hbWU6ICdib29sZWFuJ30sXG4gICAgICAgICAgIHt2YWx1ZTogbnVsbCwgbmFtZTogJ251bGwnfSxcbiAgICAgICAgICAge3ZhbHVlOiB7cHJvcDogJ3ZhbHVlJ30sIG5hbWU6ICdvYmplY3QnfSxcbiAgICAgICAgICAge3ZhbHVlOiBbJ2EnXSwgbmFtZTogJ2FycmF5J31cbiAqICAgICAgIF1cbiAqICAgICAgfTtcbiAqICAgfV0pO1xuICogPC9maWxlPlxuICo8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgc2VsZWN0YCB3aXRoIGBuZ09wdGlvbnNgIGFuZCBzZXR0aW5nIGEgZGVmYXVsdCB2YWx1ZVxuICogU2VlIHRoZSB7QGxpbmsgbmdPcHRpb25zIG5nT3B0aW9ucyBkb2N1bWVudGF0aW9ufSBmb3IgbW9yZSBgbmdPcHRpb25zYCB1c2FnZSBleGFtcGxlcy5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXdpdGgtZGVmYXVsdC12YWx1ZXNcIiBtb2R1bGU9XCJkZWZhdWx0VmFsdWVTZWxlY3RcIj5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgICAgPGxhYmVsIGZvcj1cIm15U2VsZWN0XCI+TWFrZSBhIGNob2ljZTo8L2xhYmVsPlxuICogICAgIDxzZWxlY3QgbmFtZT1cIm15U2VsZWN0XCIgaWQ9XCJteVNlbGVjdFwiXG4gKiAgICAgICBuZy1vcHRpb25zPVwib3B0aW9uLm5hbWUgZm9yIG9wdGlvbiBpbiBkYXRhLmF2YWlsYWJsZU9wdGlvbnMgdHJhY2sgYnkgb3B0aW9uLmlkXCJcbiAqICAgICAgIG5nLW1vZGVsPVwiZGF0YS5zZWxlY3RlZE9wdGlvblwiPjwvc2VsZWN0PlxuICogICA8L2Zvcm0+XG4gKiAgIDxocj5cbiAqICAgPHR0Pm9wdGlvbiA9IHt7ZGF0YS5zZWxlY3RlZE9wdGlvbn19PC90dD48YnIvPlxuICogPC9kaXY+XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgYW5ndWxhci5tb2R1bGUoJ2RlZmF1bHRWYWx1ZVNlbGVjdCcsIFtdKVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLmRhdGEgPSB7XG4gKiAgICAgICBhdmFpbGFibGVPcHRpb25zOiBbXG4gKiAgICAgICAgIHtpZDogJzEnLCBuYW1lOiAnT3B0aW9uIEEnfSxcbiAqICAgICAgICAge2lkOiAnMicsIG5hbWU6ICdPcHRpb24gQid9LFxuICogICAgICAgICB7aWQ6ICczJywgbmFtZTogJ09wdGlvbiBDJ31cbiAqICAgICAgIF0sXG4gKiAgICAgICBzZWxlY3RlZE9wdGlvbjoge2lkOiAnMycsIG5hbWU6ICdPcHRpb24gQyd9IC8vVGhpcyBzZXRzIHRoZSBkZWZhdWx0IHZhbHVlIG9mIHRoZSBzZWxlY3QgaW4gdGhlIHVpXG4gKiAgICAgICB9O1xuICogICB9XSk7XG4gKiA8L2ZpbGU+XG4gKjwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJpbmRpbmcgYHNlbGVjdGAgdG8gYSBub24tc3RyaW5nIHZhbHVlIHZpYSBgbmdNb2RlbGAgcGFyc2luZyAvIGZvcm1hdHRpbmdcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXdpdGgtbm9uLXN0cmluZy1vcHRpb25zXCIgbW9kdWxlPVwibm9uU3RyaW5nU2VsZWN0XCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNlbGVjdCBuZy1tb2RlbD1cIm1vZGVsLmlkXCIgY29udmVydC10by1udW1iZXI+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwiMFwiPlplcm88L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCIxXCI+T25lPC9vcHRpb24+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwiMlwiPlR3bzwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0PlxuICogICAgIHt7IG1vZGVsIH19XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgIGFuZ3VsYXIubW9kdWxlKCdub25TdHJpbmdTZWxlY3QnLCBbXSlcbiAqICAgICAgIC5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSkge1xuICogICAgICAgICAkcm9vdFNjb3BlLm1vZGVsID0geyBpZDogMiB9O1xuICogICAgICAgfSlcbiAqICAgICAgIC5kaXJlY3RpdmUoJ2NvbnZlcnRUb051bWJlcicsIGZ1bmN0aW9uKCkge1xuICogICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAqICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAqICAgICAgICAgICAgIG5nTW9kZWwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWwpIHtcbiAqICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbCwgMTApO1xuICogICAgICAgICAgICAgfSk7XG4gKiAgICAgICAgICAgICBuZ01vZGVsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsKSB7XG4gKiAgICAgICAgICAgICAgIHJldHVybiAnJyArIHZhbDtcbiAqICAgICAgICAgICAgIH0pO1xuICogICAgICAgICAgIH1cbiAqICAgICAgICAgfTtcbiAqICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCdtb2RlbC5pZCcpKS4kKCdvcHRpb246Y2hlY2tlZCcpLmdldFRleHQoKSkudG9FcXVhbCgnVHdvJyk7XG4gKiAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKi9cbnZhciBzZWxlY3REaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogWydzZWxlY3QnLCAnP25nTW9kZWwnXSxcbiAgICBjb250cm9sbGVyOiBTZWxlY3RDb250cm9sbGVyLFxuICAgIHByaW9yaXR5OiAxLFxuICAgIGxpbms6IHtcbiAgICAgIHByZTogc2VsZWN0UHJlTGluayxcbiAgICAgIHBvc3Q6IHNlbGVjdFBvc3RMaW5rXG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHNlbGVjdFByZUxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG5cbiAgICAgIHZhciBzZWxlY3RDdHJsID0gY3RybHNbMF07XG4gICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcblxuICAgICAgLy8gaWYgbmdNb2RlbCBpcyBub3QgZGVmaW5lZCwgd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZyBidXQgc2V0IHRoZSByZWdpc3Rlck9wdGlvblxuICAgICAgLy8gZnVuY3Rpb24gdG8gbm9vcCwgc28gb3B0aW9ucyBkb24ndCBnZXQgYWRkZWQgaW50ZXJuYWxseVxuICAgICAgaWYgKCFuZ01vZGVsQ3RybCkge1xuICAgICAgICBzZWxlY3RDdHJsLnJlZ2lzdGVyT3B0aW9uID0gbm9vcDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG5cbiAgICAgIHNlbGVjdEN0cmwubmdNb2RlbEN0cmwgPSBuZ01vZGVsQ3RybDtcblxuICAgICAgLy8gV2hlbiB0aGUgc2VsZWN0ZWQgaXRlbShzKSBjaGFuZ2VzIHdlIGRlbGVnYXRlIGdldHRpbmcgdGhlIHZhbHVlIG9mIHRoZSBzZWxlY3QgY29udHJvbFxuICAgICAgLy8gdG8gdGhlIGByZWFkVmFsdWVgIG1ldGhvZCwgd2hpY2ggY2FuIGJlIGNoYW5nZWQgaWYgdGhlIHNlbGVjdCBjYW4gaGF2ZSBtdWx0aXBsZVxuICAgICAgLy8gc2VsZWN0ZWQgdmFsdWVzIG9yIGlmIHRoZSBvcHRpb25zIGFyZSBiZWluZyBnZW5lcmF0ZWQgYnkgYG5nT3B0aW9uc2BcbiAgICAgIGVsZW1lbnQub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxlY3RDdHJsLnJlbW92ZVVua25vd25PcHRpb24oKTtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoc2VsZWN0Q3RybC5yZWFkVmFsdWUoKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIElmIHRoZSBzZWxlY3QgYWxsb3dzIG11bHRpcGxlIHZhbHVlcyB0aGVuIHdlIG5lZWQgdG8gbW9kaWZ5IGhvdyB3ZSByZWFkIGFuZCB3cml0ZVxuICAgICAgLy8gdmFsdWVzIGZyb20gYW5kIHRvIHRoZSBjb250cm9sOyBhbHNvIHdoYXQgaXQgbWVhbnMgZm9yIHRoZSB2YWx1ZSB0byBiZSBlbXB0eSBhbmRcbiAgICAgIC8vIHdlIGhhdmUgdG8gYWRkIGFuIGV4dHJhIHdhdGNoIHNpbmNlIG5nTW9kZWwgZG9lc24ndCB3b3JrIHdlbGwgd2l0aCBhcnJheXMgLSBpdFxuICAgICAgLy8gZG9lc24ndCB0cmlnZ2VyIHJlbmRlcmluZyBpZiBvbmx5IGFuIGl0ZW0gaW4gdGhlIGFycmF5IGNoYW5nZXMuXG4gICAgICBpZiAoYXR0ci5tdWx0aXBsZSkge1xuICAgICAgICBzZWxlY3RDdHJsLm11bHRpcGxlID0gdHJ1ZTtcblxuICAgICAgICAvLyBSZWFkIHZhbHVlIG5vdyBuZWVkcyB0byBjaGVjayBlYWNoIG9wdGlvbiB0byBzZWUgaWYgaXQgaXMgc2VsZWN0ZWRcbiAgICAgICAgc2VsZWN0Q3RybC5yZWFkVmFsdWUgPSBmdW5jdGlvbiByZWFkTXVsdGlwbGVWYWx1ZSgpIHtcbiAgICAgICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgICAgICBmb3JFYWNoKGVsZW1lbnQuZmluZCgnb3B0aW9uJyksIGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCAmJiAhb3B0aW9uLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgIHZhciB2YWwgPSBvcHRpb24udmFsdWU7XG4gICAgICAgICAgICAgIGFycmF5LnB1c2godmFsIGluIHNlbGVjdEN0cmwuc2VsZWN0VmFsdWVNYXAgPyBzZWxlY3RDdHJsLnNlbGVjdFZhbHVlTWFwW3ZhbF0gOiB2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBhcnJheTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBXcml0ZSB2YWx1ZSBub3cgbmVlZHMgdG8gc2V0IHRoZSBzZWxlY3RlZCBwcm9wZXJ0eSBvZiBlYWNoIG1hdGNoaW5nIG9wdGlvblxuICAgICAgICBzZWxlY3RDdHJsLndyaXRlVmFsdWUgPSBmdW5jdGlvbiB3cml0ZU11bHRpcGxlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgICBmb3JFYWNoKGVsZW1lbnQuZmluZCgnb3B0aW9uJyksIGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAgICAgICAgdmFyIHNob3VsZEJlU2VsZWN0ZWQgPSAhIXZhbHVlICYmIChpbmNsdWRlcyh2YWx1ZSwgb3B0aW9uLnZhbHVlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlcyh2YWx1ZSwgc2VsZWN0Q3RybC5zZWxlY3RWYWx1ZU1hcFtvcHRpb24udmFsdWVdKSk7XG4gICAgICAgICAgICB2YXIgY3VycmVudGx5U2VsZWN0ZWQgPSBvcHRpb24uc2VsZWN0ZWQ7XG5cbiAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFIDktMTEgb25seSwgRWRnZSAxMi0xNStcbiAgICAgICAgICAgIC8vIEluIElFIGFuZCBFZGdlIGFkZGluZyBvcHRpb25zIHRvIHRoZSBzZWxlY3Rpb24gdmlhIHNoaWZ0K2NsaWNrL1VQL0RPV05cbiAgICAgICAgICAgIC8vIHdpbGwgZGUtc2VsZWN0IGFscmVhZHkgc2VsZWN0ZWQgb3B0aW9ucyBpZiBcInNlbGVjdGVkXCIgb24gdGhvc2Ugb3B0aW9ucyB3YXMgc2V0XG4gICAgICAgICAgICAvLyBtb3JlIHRoYW4gb25jZSAoaS5lLiB3aGVuIHRoZSBvcHRpb25zIHdlcmUgYWxyZWFkeSBzZWxlY3RlZClcbiAgICAgICAgICAgIC8vIFNvIHdlIG9ubHkgbW9kaWZ5IHRoZSBzZWxlY3RlZCBwcm9wZXJ0eSBpZiBuZWNlc3NhcnkuXG4gICAgICAgICAgICAvLyBOb3RlOiB0aGlzIGJlaGF2aW9yIGNhbm5vdCBiZSByZXBsaWNhdGVkIHZpYSB1bml0IHRlc3RzIGJlY2F1c2UgaXQgb25seSBzaG93cyBpbiB0aGVcbiAgICAgICAgICAgIC8vIGFjdHVhbCB1c2VyIGludGVyZmFjZS5cbiAgICAgICAgICAgIGlmIChzaG91bGRCZVNlbGVjdGVkICE9PSBjdXJyZW50bHlTZWxlY3RlZCkge1xuICAgICAgICAgICAgICBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhqcUxpdGUob3B0aW9uKSwgc2hvdWxkQmVTZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyB3ZSBoYXZlIHRvIGRvIGl0IG9uIGVhY2ggd2F0Y2ggc2luY2UgbmdNb2RlbCB3YXRjaGVzIHJlZmVyZW5jZSwgYnV0XG4gICAgICAgIC8vIHdlIG5lZWQgdG8gd29yayBvZiBhbiBhcnJheSwgc28gd2UgbmVlZCB0byBzZWUgaWYgYW55dGhpbmcgd2FzIGluc2VydGVkL3JlbW92ZWRcbiAgICAgICAgdmFyIGxhc3RWaWV3LCBsYXN0Vmlld1JlZiA9IE5hTjtcbiAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIHNlbGVjdE11bHRpcGxlV2F0Y2goKSB7XG4gICAgICAgICAgaWYgKGxhc3RWaWV3UmVmID09PSBuZ01vZGVsQ3RybC4kdmlld1ZhbHVlICYmICFlcXVhbHMobGFzdFZpZXcsIG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpKSB7XG4gICAgICAgICAgICBsYXN0VmlldyA9IHNoYWxsb3dDb3B5KG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpO1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsYXN0Vmlld1JlZiA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIElmIHdlIGFyZSBhIG11bHRpcGxlIHNlbGVjdCB0aGVuIHZhbHVlIGlzIG5vdyBhIGNvbGxlY3Rpb25cbiAgICAgICAgLy8gc28gdGhlIG1lYW5pbmcgb2YgJGlzRW1wdHkgY2hhbmdlc1xuICAgICAgICBuZ01vZGVsQ3RybC4kaXNFbXB0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuICF2YWx1ZSB8fCB2YWx1ZS5sZW5ndGggPT09IDA7XG4gICAgICAgIH07XG5cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxlY3RQb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XG4gICAgICAvLyBpZiBuZ01vZGVsIGlzIG5vdCBkZWZpbmVkLCB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nXG4gICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcbiAgICAgIGlmICghbmdNb2RlbEN0cmwpIHJldHVybjtcblxuICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1swXTtcblxuICAgICAgLy8gV2UgZGVsZWdhdGUgcmVuZGVyaW5nIHRvIHRoZSBgd3JpdGVWYWx1ZWAgbWV0aG9kLCB3aGljaCBjYW4gYmUgY2hhbmdlZFxuICAgICAgLy8gaWYgdGhlIHNlbGVjdCBjYW4gaGF2ZSBtdWx0aXBsZSBzZWxlY3RlZCB2YWx1ZXMgb3IgaWYgdGhlIG9wdGlvbnMgYXJlIGJlaW5nXG4gICAgICAvLyBnZW5lcmF0ZWQgYnkgYG5nT3B0aW9uc2AuXG4gICAgICAvLyBUaGlzIG11c3QgYmUgZG9uZSBpbiB0aGUgcG9zdExpbmsgZm4gdG8gcHJldmVudCAkcmVuZGVyIHRvIGJlIGNhbGxlZCBiZWZvcmVcbiAgICAgIC8vIGFsbCBub2RlcyBoYXZlIGJlZW4gbGlua2VkIGNvcnJlY3RseS5cbiAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZWN0Q3RybC53cml0ZVZhbHVlKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpO1xuICAgICAgfTtcbiAgICB9XG59O1xuXG5cbi8vIFRoZSBvcHRpb24gZGlyZWN0aXZlIGlzIHB1cmVseSBkZXNpZ25lZCB0byBjb21tdW5pY2F0ZSB0aGUgZXhpc3RlbmNlIChvciBsYWNrIG9mKVxuLy8gb2YgZHluYW1pY2FsbHkgY3JlYXRlZCAoYW5kIGRlc3Ryb3llZCkgb3B0aW9uIGVsZW1lbnRzIHRvIHRoZWlyIGNvbnRhaW5pbmcgc2VsZWN0XG4vLyBkaXJlY3RpdmUgdmlhIGl0cyBjb250cm9sbGVyLlxudmFyIG9wdGlvbkRpcmVjdGl2ZSA9IFsnJGludGVycG9sYXRlJywgZnVuY3Rpb24oJGludGVycG9sYXRlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICBwcmlvcml0eTogMTAwLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIHZhciBpbnRlcnBvbGF0ZVZhbHVlRm4sIGludGVycG9sYXRlVGV4dEZuO1xuXG4gICAgICBpZiAoaXNEZWZpbmVkKGF0dHIubmdWYWx1ZSkpIHtcbiAgICAgICAgLy8gV2lsbCBiZSBoYW5kbGVkIGJ5IHJlZ2lzdGVyT3B0aW9uXG4gICAgICB9IGVsc2UgaWYgKGlzRGVmaW5lZChhdHRyLnZhbHVlKSkge1xuICAgICAgICAvLyBJZiB0aGUgdmFsdWUgYXR0cmlidXRlIGlzIGRlZmluZWQsIGNoZWNrIGlmIGl0IGNvbnRhaW5zIGFuIGludGVycG9sYXRpb25cbiAgICAgICAgaW50ZXJwb2xhdGVWYWx1ZUZuID0gJGludGVycG9sYXRlKGF0dHIudmFsdWUsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgdGhlIHZhbHVlIGF0dHJpYnV0ZSBpcyBub3QgZGVmaW5lZCB0aGVuIHdlIGZhbGwgYmFjayB0byB0aGVcbiAgICAgICAgLy8gdGV4dCBjb250ZW50IG9mIHRoZSBvcHRpb24gZWxlbWVudCwgd2hpY2ggbWF5IGJlIGludGVycG9sYXRlZFxuICAgICAgICBpbnRlcnBvbGF0ZVRleHRGbiA9ICRpbnRlcnBvbGF0ZShlbGVtZW50LnRleHQoKSwgdHJ1ZSk7XG4gICAgICAgIGlmICghaW50ZXJwb2xhdGVUZXh0Rm4pIHtcbiAgICAgICAgICBhdHRyLiRzZXQoJ3ZhbHVlJywgZWxlbWVudC50ZXh0KCkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICAvLyBUaGlzIGlzIGFuIG9wdGltaXphdGlvbiBvdmVyIHVzaW5nIF5eIHNpbmNlIHdlIGRvbid0IHdhbnQgdG8gaGF2ZSB0byBzZWFyY2hcbiAgICAgICAgLy8gYWxsIHRoZSB3YXkgdG8gdGhlIHJvb3Qgb2YgdGhlIERPTSBmb3IgZXZlcnkgc2luZ2xlIG9wdGlvbiBlbGVtZW50XG4gICAgICAgIHZhciBzZWxlY3RDdHJsTmFtZSA9ICckc2VsZWN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICBwYXJlbnQgPSBlbGVtZW50LnBhcmVudCgpLFxuICAgICAgICAgICAgc2VsZWN0Q3RybCA9IHBhcmVudC5kYXRhKHNlbGVjdEN0cmxOYW1lKSB8fFxuICAgICAgICAgICAgICBwYXJlbnQucGFyZW50KCkuZGF0YShzZWxlY3RDdHJsTmFtZSk7IC8vIGluIGNhc2Ugd2UgYXJlIGluIG9wdGdyb3VwXG5cbiAgICAgICAgaWYgKHNlbGVjdEN0cmwpIHtcbiAgICAgICAgICBzZWxlY3RDdHJsLnJlZ2lzdGVyT3B0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBpbnRlcnBvbGF0ZVZhbHVlRm4sIGludGVycG9sYXRlVGV4dEZuKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1JlcXVpcmVkXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdSZXF1aXJlZCBBbmd1bGFySlMgZXhwcmVzc2lvbi4gSWYgaXQgZXZhbHVhdGVzIHRvIGB0cnVlYCwgaXQgc2V0cyB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgcmVxdWlyZWRgIGF0dHJpYnV0ZSB0byB0aGUgZWxlbWVudCBhbmQgYWRkcyB0aGUgYHJlcXVpcmVkYFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGB2YWxpZGF0b3JgfS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBuZ1JlcXVpcmVkIGFkZHMgdGhlIHJlcXVpcmVkIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGB2YWxpZGF0b3JgfSB0byB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9LlxuICogSXQgaXMgbW9zdCBvZnRlbiB1c2VkIGZvciB7QGxpbmsgaW5wdXQgYGlucHV0YH0gYW5kIHtAbGluayBzZWxlY3QgYHNlbGVjdGB9IGNvbnRyb2xzLCBidXQgY2FuIGFsc28gYmVcbiAqIGFwcGxpZWQgdG8gY3VzdG9tIGNvbnRyb2xzLlxuICpcbiAqIFRoZSBkaXJlY3RpdmUgc2V0cyB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQgaWYgdGhlIEFuZ3VsYXJKUyBleHByZXNzaW9uIGluc2lkZVxuICogYG5nUmVxdWlyZWRgIGV2YWx1YXRlcyB0byB0cnVlLiBBIHNwZWNpYWwgZGlyZWN0aXZlIGZvciBzZXR0aW5nIGByZXF1aXJlZGAgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2VcbiAqIGNhbm5vdCB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgYHJlcXVpcmVkYC4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiBpbnRlcnBvbGF0aW9uIGd1aWRlfVxuICogZm9yIG1vcmUgaW5mby5cbiAqXG4gKiBUaGUgdmFsaWRhdG9yIHdpbGwgc2V0IHRoZSBgcmVxdWlyZWRgIGVycm9yIGtleSB0byB0cnVlIGlmIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBpcyBzZXQgYW5kXG4gKiBjYWxsaW5nIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRpc0VtcHR5IGBOZ01vZGVsQ29udHJvbGxlci4kaXNFbXB0eWB9IHdpdGggdGhlXG4gKiB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlIGBuZ01vZGVsLiR2aWV3VmFsdWVgfSByZXR1cm5zIGB0cnVlYC4gRm9yIGV4YW1wbGUsIHRoZVxuICogYCRpc0VtcHR5KClgIGltcGxlbWVudGF0aW9uIGZvciBgaW5wdXRbdGV4dF1gIGNoZWNrcyB0aGUgbGVuZ3RoIG9mIHRoZSBgJHZpZXdWYWx1ZWAuIFdoZW4gZGV2ZWxvcGluZ1xuICogY3VzdG9tIGNvbnRyb2xzLCBgJGlzRW1wdHkoKWAgY2FuIGJlIG92ZXJ3cml0dGVuIHRvIGFjY291bnQgZm9yIGEgJHZpZXdWYWx1ZSB0aGF0IGlzIG5vdCBzdHJpbmctYmFzZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ1JlcXVpcmVkRGlyZWN0aXZlXCIgbW9kdWxlPVwibmdSZXF1aXJlZEV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8c2NyaXB0PlxuICogICAgICAgYW5ndWxhci5tb2R1bGUoJ25nUmVxdWlyZWRFeGFtcGxlJywgW10pXG4gKiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICAgJHNjb3BlLnJlcXVpcmVkID0gdHJ1ZTtcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwiZm9ybVwiPlxuICogICAgICAgICA8bGFiZWwgZm9yPVwicmVxdWlyZWRcIj5Ub2dnbGUgcmVxdWlyZWQ6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInJlcXVpcmVkXCIgaWQ9XCJyZXF1aXJlZFwiIC8+XG4gKiAgICAgICAgIDxicj5cbiAqICAgICAgICAgPGxhYmVsIGZvcj1cImlucHV0XCI+VGhpcyBpbnB1dCBtdXN0IGJlIGZpbGxlZCBpZiBgcmVxdWlyZWRgIGlzIHRydWU6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibW9kZWxcIiBpZD1cImlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctcmVxdWlyZWQ9XCJyZXF1aXJlZFwiIC8+PGJyPlxuICogICAgICAgICA8aHI+XG4gKiAgICAgICAgIHJlcXVpcmVkIGVycm9yIHNldD8gPSA8Y29kZT57e2Zvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkfX08L2NvZGU+PGJyPlxuICogICAgICAgICBtb2RlbCA9IDxjb2RlPnt7bW9kZWx9fTwvY29kZT5cbiAqICAgICAgIDwvZm9ybT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIHJlcXVpcmVkID0gZWxlbWVudChieS5iaW5kaW5nKCdmb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZCcpKTtcbiAgICAgICB2YXIgbW9kZWwgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ21vZGVsJykpO1xuICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkuaWQoJ2lucHV0JykpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzZXQgdGhlIHJlcXVpcmVkIGVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QocmVxdWlyZWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcblxuICAgICAgICAgaW5wdXQuc2VuZEtleXMoJzEyMycpO1xuICAgICAgICAgZXhwZWN0KHJlcXVpcmVkLmdldFRleHQoKSkubm90LnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9Db250YWluKCcxMjMnKTtcbiAgICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICovXG52YXIgcmVxdWlyZWREaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0ciwgY3RybCkge1xuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XG4gICAgICBhdHRyLnJlcXVpcmVkID0gdHJ1ZTsgLy8gZm9yY2UgdHJ1dGh5IGluIGNhc2Ugd2UgYXJlIG9uIG5vbiBpbnB1dCBlbGVtZW50XG5cbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMucmVxdWlyZWQgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICFhdHRyLnJlcXVpcmVkIHx8ICFjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSk7XG4gICAgICB9O1xuXG4gICAgICBhdHRyLiRvYnNlcnZlKCdyZXF1aXJlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1BhdHRlcm5cbiAqIEByZXN0cmljdCBBXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufFJlZ0V4cH0gbmdQYXR0ZXJuIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRoYXQgbXVzdCBldmFsdWF0ZSB0byBhIGBSZWdFeHBgIG9yIGEgYFN0cmluZ2BcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzYWJsZSBpbnRvIGEgYFJlZ0V4cGAsIG9yIGEgYFJlZ0V4cGAgbGl0ZXJhbC4gU2VlIGFib3ZlIGZvclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBuZ1BhdHRlcm4gYWRkcyB0aGUgcGF0dGVybiB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyBgdmFsaWRhdG9yYH0gdG8ge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfS5cbiAqIEl0IGlzIG1vc3Qgb2Z0ZW4gdXNlZCBmb3IgdGV4dC1iYXNlZCB7QGxpbmsgaW5wdXQgYGlucHV0YH0gY29udHJvbHMsIGJ1dCBjYW4gYWxzbyBiZSBhcHBsaWVkIHRvIGN1c3RvbSB0ZXh0LWJhc2VkIGNvbnRyb2xzLlxuICpcbiAqIFRoZSB2YWxpZGF0b3Igc2V0cyB0aGUgYHBhdHRlcm5gIGVycm9yIGtleSBpZiB0aGUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSBgbmdNb2RlbC4kdmlld1ZhbHVlYH1cbiAqIGRvZXMgbm90IG1hdGNoIGEgUmVnRXhwIHdoaWNoIGlzIG9idGFpbmVkIGZyb20gdGhlIGBuZ1BhdHRlcm5gIGF0dHJpYnV0ZSB2YWx1ZTpcbiAqIC0gdGhlIHZhbHVlIGlzIGFuIEFuZ3VsYXJKUyBleHByZXNzaW9uOlxuICogICAtIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIFJlZ0V4cCBvYmplY3QsIHRoZW4gdGhpcyBpcyB1c2VkIGRpcmVjdGx5LlxuICogICAtIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHN0cmluZywgdGhlbiBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIFJlZ0V4cCBhZnRlciB3cmFwcGluZyBpdFxuICogICAgIGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvIGBuZXcgUmVnRXhwKCdeYWJjJCcpYC5cbiAqIC0gSWYgdGhlIHZhbHVlIGlzIGEgUmVnRXhwIGxpdGVyYWwsIGUuZy4gYG5nUGF0dGVybj1cIi9eXFxkKyQvXCJgLCBpdCBpcyB1c2VkIGRpcmVjdGx5LlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAqKk5vdGU6KiogQXZvaWQgdXNpbmcgdGhlIGBnYCBmbGFnIG9uIHRoZSBSZWdFeHAsIGFzIGl0IHdpbGwgY2F1c2UgZWFjaCBzdWNjZXNzaXZlIHNlYXJjaCB0b1xuICogc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAqIGFjY291bnQuXG4gKiA8L2Rpdj5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipOb3RlOioqIFRoaXMgZGlyZWN0aXZlIGlzIGFsc28gYWRkZWQgd2hlbiB0aGUgcGxhaW4gYHBhdHRlcm5gIGF0dHJpYnV0ZSBpcyB1c2VkLCB3aXRoIHR3b1xuICogZGlmZmVyZW5jZXM6XG4gKiA8b2w+XG4gKiAgIDxsaT5cbiAqICAgICBgbmdQYXR0ZXJuYCBkb2VzIG5vdCBzZXQgdGhlIGBwYXR0ZXJuYCBhdHRyaWJ1dGUgYW5kIHRoZXJlZm9yZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24gaXNcbiAqICAgICBub3QgYXZhaWxhYmxlLlxuICogICA8L2xpPlxuICogICA8bGk+XG4gKiAgICAgVGhlIGBuZ1BhdHRlcm5gIGF0dHJpYnV0ZSBtdXN0IGJlIGFuIGV4cHJlc3Npb24sIHdoaWxlIHRoZSBgcGF0dGVybmAgdmFsdWUgbXVzdCBiZVxuICogICAgIGludGVycG9sYXRlZC5cbiAqICAgPC9saT5cbiAqIDwvb2w+XG4gKiA8L2Rpdj5cbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cIm5nUGF0dGVybkRpcmVjdGl2ZVwiIG1vZHVsZT1cIm5nUGF0dGVybkV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8c2NyaXB0PlxuICogICAgICAgYW5ndWxhci5tb2R1bGUoJ25nUGF0dGVybkV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgICAkc2NvcGUucmVnZXggPSAnXFxcXGQrJztcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwiZm9ybVwiPlxuICogICAgICAgICA8bGFiZWwgZm9yPVwicmVnZXhcIj5TZXQgYSBwYXR0ZXJuIChyZWdleCBzdHJpbmcpOiA8L2xhYmVsPlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInJlZ2V4XCIgaWQ9XCJyZWdleFwiIC8+XG4gKiAgICAgICAgIDxicj5cbiAqICAgICAgICAgPGxhYmVsIGZvcj1cImlucHV0XCI+VGhpcyBpbnB1dCBpcyByZXN0cmljdGVkIGJ5IHRoZSBjdXJyZW50IHBhdHRlcm46IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibW9kZWxcIiBpZD1cImlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctcGF0dGVybj1cInJlZ2V4XCIgLz48YnI+XG4gKiAgICAgICAgIDxocj5cbiAqICAgICAgICAgaW5wdXQgdmFsaWQ/ID0gPGNvZGU+e3tmb3JtLmlucHV0LiR2YWxpZH19PC9jb2RlPjxicj5cbiAqICAgICAgICAgbW9kZWwgPSA8Y29kZT57e21vZGVsfX08L2NvZGU+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBtb2RlbCA9IGVsZW1lbnQoYnkuYmluZGluZygnbW9kZWwnKSk7XG4gICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5pZCgnaW5wdXQnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHRoZSBpbnB1dCB3aXRoIHRoZSBkZWZhdWx0IHBhdHRlcm4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGlucHV0LnNlbmRLZXlzKCdhYWEnKTtcbiAgICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLm5vdC50b0NvbnRhaW4oJ2FhYScpO1xuXG4gICAgICAgICBpbnB1dC5jbGVhcigpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcxMjMnKTtcbiAgICAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9Db250YWluKCcxMjMnKTtcbiAgICAgICAgIH0pO1xuICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbnZhciBwYXR0ZXJuRGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHIsIGN0cmwpIHtcbiAgICAgIGlmICghY3RybCkgcmV0dXJuO1xuXG4gICAgICB2YXIgcmVnZXhwLCBwYXR0ZXJuRXhwID0gYXR0ci5uZ1BhdHRlcm4gfHwgYXR0ci5wYXR0ZXJuO1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgncGF0dGVybicsIGZ1bmN0aW9uKHJlZ2V4KSB7XG4gICAgICAgIGlmIChpc1N0cmluZyhyZWdleCkgJiYgcmVnZXgubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnXicgKyByZWdleCArICckJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVnZXggJiYgIXJlZ2V4LnRlc3QpIHtcbiAgICAgICAgICB0aHJvdyBtaW5FcnIoJ25nUGF0dGVybicpKCdub3JlZ2V4cCcsXG4gICAgICAgICAgICAnRXhwZWN0ZWQgezB9IHRvIGJlIGEgUmVnRXhwIGJ1dCB3YXMgezF9LiBFbGVtZW50OiB7Mn0nLCBwYXR0ZXJuRXhwLFxuICAgICAgICAgICAgcmVnZXgsIHN0YXJ0aW5nVGFnKGVsbSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnZXhwID0gcmVnZXggfHwgdW5kZWZpbmVkO1xuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMucGF0dGVybiA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgICAvLyBIVE1MNSBwYXR0ZXJuIGNvbnN0cmFpbnQgdmFsaWRhdGVzIHRoZSBpbnB1dCB2YWx1ZSwgc28gd2UgdmFsaWRhdGUgdGhlIHZpZXdWYWx1ZVxuICAgICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2aWV3VmFsdWUpIHx8IGlzVW5kZWZpbmVkKHJlZ2V4cCkgfHwgcmVnZXhwLnRlc3Qodmlld1ZhbHVlKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01heGxlbmd0aFxuICogQHJlc3RyaWN0IEFcbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTWF4bGVuZ3RoIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRoYXQgbXVzdCBldmFsdWF0ZSB0byBhIGBOdW1iZXJgIG9yIGBTdHJpbmdgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNhYmxlIGludG8gYSBgTnVtYmVyYC4gVXNlZCBhcyB2YWx1ZSBmb3IgdGhlIGBtYXhsZW5ndGhgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIHZhbGlkYXRvcn0uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogbmdNYXhsZW5ndGggYWRkcyB0aGUgbWF4bGVuZ3RoIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGB2YWxpZGF0b3JgfSB0byB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9LlxuICogSXQgaXMgbW9zdCBvZnRlbiB1c2VkIGZvciB0ZXh0LWJhc2VkIHtAbGluayBpbnB1dCBgaW5wdXRgfSBjb250cm9scywgYnV0IGNhbiBhbHNvIGJlIGFwcGxpZWQgdG8gY3VzdG9tIHRleHQtYmFzZWQgY29udHJvbHMuXG4gKlxuICogVGhlIHZhbGlkYXRvciBzZXRzIHRoZSBgbWF4bGVuZ3RoYCBlcnJvciBrZXkgaWYgdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgYG5nTW9kZWwuJHZpZXdWYWx1ZWB9XG4gKiBpcyBsb25nZXIgdGhhbiB0aGUgaW50ZWdlciBvYnRhaW5lZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFySlMgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGVcbiAqIGBuZ01heGxlbmd0aGAgYXR0cmlidXRlIHZhbHVlLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAqKk5vdGU6KiogVGhpcyBkaXJlY3RpdmUgaXMgYWxzbyBhZGRlZCB3aGVuIHRoZSBwbGFpbiBgbWF4bGVuZ3RoYCBhdHRyaWJ1dGUgaXMgdXNlZCwgd2l0aCB0d29cbiAqIGRpZmZlcmVuY2VzOlxuICogPG9sPlxuICogICA8bGk+XG4gKiAgICAgYG5nTWF4bGVuZ3RoYCBkb2VzIG5vdCBzZXQgdGhlIGBtYXhsZW5ndGhgIGF0dHJpYnV0ZSBhbmQgdGhlcmVmb3JlIEhUTUw1IGNvbnN0cmFpbnRcbiAqICAgICB2YWxpZGF0aW9uIGlzIG5vdCBhdmFpbGFibGUuXG4gKiAgIDwvbGk+XG4gKiAgIDxsaT5cbiAqICAgICBUaGUgYG5nTWF4bGVuZ3RoYCBhdHRyaWJ1dGUgbXVzdCBiZSBhbiBleHByZXNzaW9uLCB3aGlsZSB0aGUgYG1heGxlbmd0aGAgdmFsdWUgbXVzdCBiZVxuICogICAgIGludGVycG9sYXRlZC5cbiAqICAgPC9saT5cbiAqIDwvb2w+XG4gKiA8L2Rpdj5cbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cIm5nTWF4bGVuZ3RoRGlyZWN0aXZlXCIgbW9kdWxlPVwibmdNYXhsZW5ndGhFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ01heGxlbmd0aEV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgICAkc2NvcGUubWF4bGVuZ3RoID0gNTtcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwiZm9ybVwiPlxuICogICAgICAgICA8bGFiZWwgZm9yPVwibWF4bGVuZ3RoXCI+U2V0IGEgbWF4bGVuZ3RoOiA8L2xhYmVsPlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwibWF4bGVuZ3RoXCIgaWQ9XCJtYXhsZW5ndGhcIiAvPlxuICogICAgICAgICA8YnI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJpbnB1dFwiPlRoaXMgaW5wdXQgaXMgcmVzdHJpY3RlZCBieSB0aGUgY3VycmVudCBtYXhsZW5ndGg6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibW9kZWxcIiBpZD1cImlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctbWF4bGVuZ3RoPVwibWF4bGVuZ3RoXCIgLz48YnI+XG4gKiAgICAgICAgIDxocj5cbiAqICAgICAgICAgaW5wdXQgdmFsaWQ/ID0gPGNvZGU+e3tmb3JtLmlucHV0LiR2YWxpZH19PC9jb2RlPjxicj5cbiAqICAgICAgICAgbW9kZWwgPSA8Y29kZT57e21vZGVsfX08L2NvZGU+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBtb2RlbCA9IGVsZW1lbnQoYnkuYmluZGluZygnbW9kZWwnKSk7XG4gICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5pZCgnaW5wdXQnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHRoZSBpbnB1dCB3aXRoIHRoZSBkZWZhdWx0IG1heGxlbmd0aCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2FiY2RlZicpO1xuICAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkubm90LnRvQ29udGFpbignYWJjZGVmJyk7XG5cbiAgICAgICAgIGlucHV0LmNsZWFyKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2FiY2RlJyk7XG4gICAgICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvQ29udGFpbignYWJjZGUnKTtcbiAgICAgICAgIH0pO1xuICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbnZhciBtYXhsZW5ndGhEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0ciwgY3RybCkge1xuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XG5cbiAgICAgIHZhciBtYXhsZW5ndGggPSAtMTtcbiAgICAgIGF0dHIuJG9ic2VydmUoJ21heGxlbmd0aCcsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhciBpbnRWYWwgPSB0b0ludCh2YWx1ZSk7XG4gICAgICAgIG1heGxlbmd0aCA9IGlzTnVtYmVyTmFOKGludFZhbCkgPyAtMSA6IGludFZhbDtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuICAgICAgY3RybC4kdmFsaWRhdG9ycy5tYXhsZW5ndGggPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIChtYXhsZW5ndGggPCAwKSB8fCBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgKHZpZXdWYWx1ZS5sZW5ndGggPD0gbWF4bGVuZ3RoKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01pbmxlbmd0aFxuICogQHJlc3RyaWN0IEFcbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTWlubGVuZ3RoIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRoYXQgbXVzdCBldmFsdWF0ZSB0byBhIGBOdW1iZXJgIG9yIGBTdHJpbmdgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNhYmxlIGludG8gYSBgTnVtYmVyYC4gVXNlZCBhcyB2YWx1ZSBmb3IgdGhlIGBtaW5sZW5ndGhgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIHZhbGlkYXRvcn0uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogbmdNaW5sZW5ndGggYWRkcyB0aGUgbWlubGVuZ3RoIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGB2YWxpZGF0b3JgfSB0byB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9LlxuICogSXQgaXMgbW9zdCBvZnRlbiB1c2VkIGZvciB0ZXh0LWJhc2VkIHtAbGluayBpbnB1dCBgaW5wdXRgfSBjb250cm9scywgYnV0IGNhbiBhbHNvIGJlIGFwcGxpZWQgdG8gY3VzdG9tIHRleHQtYmFzZWQgY29udHJvbHMuXG4gKlxuICogVGhlIHZhbGlkYXRvciBzZXRzIHRoZSBgbWlubGVuZ3RoYCBlcnJvciBrZXkgaWYgdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgYG5nTW9kZWwuJHZpZXdWYWx1ZWB9XG4gKiBpcyBzaG9ydGVyIHRoYW4gdGhlIGludGVnZXIgb2J0YWluZWQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhckpTIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlXG4gKiBgbmdNaW5sZW5ndGhgIGF0dHJpYnV0ZSB2YWx1ZS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipOb3RlOioqIFRoaXMgZGlyZWN0aXZlIGlzIGFsc28gYWRkZWQgd2hlbiB0aGUgcGxhaW4gYG1pbmxlbmd0aGAgYXR0cmlidXRlIGlzIHVzZWQsIHdpdGggdHdvXG4gKiBkaWZmZXJlbmNlczpcbiAqIDxvbD5cbiAqICAgPGxpPlxuICogICAgIGBuZ01pbmxlbmd0aGAgZG9lcyBub3Qgc2V0IHRoZSBgbWlubGVuZ3RoYCBhdHRyaWJ1dGUgYW5kIHRoZXJlZm9yZSBIVE1MNSBjb25zdHJhaW50XG4gKiAgICAgdmFsaWRhdGlvbiBpcyBub3QgYXZhaWxhYmxlLlxuICogICA8L2xpPlxuICogICA8bGk+XG4gKiAgICAgVGhlIGBuZ01pbmxlbmd0aGAgdmFsdWUgbXVzdCBiZSBhbiBleHByZXNzaW9uLCB3aGlsZSB0aGUgYG1pbmxlbmd0aGAgdmFsdWUgbXVzdCBiZVxuICogICAgIGludGVycG9sYXRlZC5cbiAqICAgPC9saT5cbiAqIDwvb2w+XG4gKiA8L2Rpdj5cbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cIm5nTWlubGVuZ3RoRGlyZWN0aXZlXCIgbW9kdWxlPVwibmdNaW5sZW5ndGhFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ01pbmxlbmd0aEV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgICAkc2NvcGUubWlubGVuZ3RoID0gMztcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwiZm9ybVwiPlxuICogICAgICAgICA8bGFiZWwgZm9yPVwibWlubGVuZ3RoXCI+U2V0IGEgbWlubGVuZ3RoOiA8L2xhYmVsPlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwibWlubGVuZ3RoXCIgaWQ9XCJtaW5sZW5ndGhcIiAvPlxuICogICAgICAgICA8YnI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJpbnB1dFwiPlRoaXMgaW5wdXQgaXMgcmVzdHJpY3RlZCBieSB0aGUgY3VycmVudCBtaW5sZW5ndGg6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibW9kZWxcIiBpZD1cImlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctbWlubGVuZ3RoPVwibWlubGVuZ3RoXCIgLz48YnI+XG4gKiAgICAgICAgIDxocj5cbiAqICAgICAgICAgaW5wdXQgdmFsaWQ/ID0gPGNvZGU+e3tmb3JtLmlucHV0LiR2YWxpZH19PC9jb2RlPjxicj5cbiAqICAgICAgICAgbW9kZWwgPSA8Y29kZT57e21vZGVsfX08L2NvZGU+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBtb2RlbCA9IGVsZW1lbnQoYnkuYmluZGluZygnbW9kZWwnKSk7XG4gICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5pZCgnaW5wdXQnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHRoZSBpbnB1dCB3aXRoIHRoZSBkZWZhdWx0IG1pbmxlbmd0aCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2FiJyk7XG4gICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS5ub3QudG9Db250YWluKCdhYicpO1xuXG4gICAgICAgICBpbnB1dC5zZW5kS2V5cygnYWJjJyk7XG4gICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2FiYycpO1xuICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbnZhciBtaW5sZW5ndGhEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0ciwgY3RybCkge1xuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XG5cbiAgICAgIHZhciBtaW5sZW5ndGggPSAwO1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWlubGVuZ3RoJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgbWlubGVuZ3RoID0gdG9JbnQodmFsdWUpIHx8IDA7XG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgICB9KTtcbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMubWlubGVuZ3RoID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgdmlld1ZhbHVlLmxlbmd0aCA+PSBtaW5sZW5ndGg7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn07XG5cbmlmICh3aW5kb3cuYW5ndWxhci5ib290c3RyYXApIHtcbiAgLy8gQW5ndWxhckpTIGlzIGFscmVhZHkgbG9hZGVkLCBzbyB3ZSBjYW4gcmV0dXJuIGhlcmUuLi5cbiAgaWYgKHdpbmRvdy5jb25zb2xlKSB7XG4gICAgY29uc29sZS5sb2coJ1dBUk5JTkc6IFRyaWVkIHRvIGxvYWQgQW5ndWxhckpTIG1vcmUgdGhhbiBvbmNlLicpO1xuICB9XG4gIHJldHVybjtcbn1cblxuLy8gdHJ5IHRvIGJpbmQgdG8ganF1ZXJ5IG5vdyBzbyB0aGF0IG9uZSBjYW4gd3JpdGUganFMaXRlKGZuKVxuLy8gYnV0IHdlIHdpbGwgcmViaW5kIG9uIGJvb3RzdHJhcCBhZ2Fpbi5cbmJpbmRKUXVlcnkoKTtcblxucHVibGlzaEV4dGVybmFsQVBJKGFuZ3VsYXIpO1xuXG5hbmd1bGFyLm1vZHVsZShcIm5nTG9jYWxlXCIsIFtdLCBbXCIkcHJvdmlkZVwiLCBmdW5jdGlvbigkcHJvdmlkZSkge1xudmFyIFBMVVJBTF9DQVRFR09SWSA9IHtaRVJPOiBcInplcm9cIiwgT05FOiBcIm9uZVwiLCBUV086IFwidHdvXCIsIEZFVzogXCJmZXdcIiwgTUFOWTogXCJtYW55XCIsIE9USEVSOiBcIm90aGVyXCJ9O1xuZnVuY3Rpb24gZ2V0RGVjaW1hbHMobikge1xuICBuID0gbiArICcnO1xuICB2YXIgaSA9IG4uaW5kZXhPZignLicpO1xuICByZXR1cm4gKGkgPT0gLTEpID8gMCA6IG4ubGVuZ3RoIC0gaSAtIDE7XG59XG5cbmZ1bmN0aW9uIGdldFZGKG4sIG9wdF9wcmVjaXNpb24pIHtcbiAgdmFyIHYgPSBvcHRfcHJlY2lzaW9uO1xuXG4gIGlmICh1bmRlZmluZWQgPT09IHYpIHtcbiAgICB2ID0gTWF0aC5taW4oZ2V0RGVjaW1hbHMobiksIDMpO1xuICB9XG5cbiAgdmFyIGJhc2UgPSBNYXRoLnBvdygxMCwgdik7XG4gIHZhciBmID0gKChuICogYmFzZSkgfCAwKSAlIGJhc2U7XG4gIHJldHVybiB7djogdiwgZjogZn07XG59XG5cbiRwcm92aWRlLnZhbHVlKFwiJGxvY2FsZVwiLCB7XG4gIFwiREFURVRJTUVfRk9STUFUU1wiOiB7XG4gICAgXCJBTVBNU1wiOiBbXG4gICAgICBcIkFNXCIsXG4gICAgICBcIlBNXCJcbiAgICBdLFxuICAgIFwiREFZXCI6IFtcbiAgICAgIFwiU3VuZGF5XCIsXG4gICAgICBcIk1vbmRheVwiLFxuICAgICAgXCJUdWVzZGF5XCIsXG4gICAgICBcIldlZG5lc2RheVwiLFxuICAgICAgXCJUaHVyc2RheVwiLFxuICAgICAgXCJGcmlkYXlcIixcbiAgICAgIFwiU2F0dXJkYXlcIlxuICAgIF0sXG4gICAgXCJFUkFOQU1FU1wiOiBbXG4gICAgICBcIkJlZm9yZSBDaHJpc3RcIixcbiAgICAgIFwiQW5ubyBEb21pbmlcIlxuICAgIF0sXG4gICAgXCJFUkFTXCI6IFtcbiAgICAgIFwiQkNcIixcbiAgICAgIFwiQURcIlxuICAgIF0sXG4gICAgXCJGSVJTVERBWU9GV0VFS1wiOiA2LFxuICAgIFwiTU9OVEhcIjogW1xuICAgICAgXCJKYW51YXJ5XCIsXG4gICAgICBcIkZlYnJ1YXJ5XCIsXG4gICAgICBcIk1hcmNoXCIsXG4gICAgICBcIkFwcmlsXCIsXG4gICAgICBcIk1heVwiLFxuICAgICAgXCJKdW5lXCIsXG4gICAgICBcIkp1bHlcIixcbiAgICAgIFwiQXVndXN0XCIsXG4gICAgICBcIlNlcHRlbWJlclwiLFxuICAgICAgXCJPY3RvYmVyXCIsXG4gICAgICBcIk5vdmVtYmVyXCIsXG4gICAgICBcIkRlY2VtYmVyXCJcbiAgICBdLFxuICAgIFwiU0hPUlREQVlcIjogW1xuICAgICAgXCJTdW5cIixcbiAgICAgIFwiTW9uXCIsXG4gICAgICBcIlR1ZVwiLFxuICAgICAgXCJXZWRcIixcbiAgICAgIFwiVGh1XCIsXG4gICAgICBcIkZyaVwiLFxuICAgICAgXCJTYXRcIlxuICAgIF0sXG4gICAgXCJTSE9SVE1PTlRIXCI6IFtcbiAgICAgIFwiSmFuXCIsXG4gICAgICBcIkZlYlwiLFxuICAgICAgXCJNYXJcIixcbiAgICAgIFwiQXByXCIsXG4gICAgICBcIk1heVwiLFxuICAgICAgXCJKdW5cIixcbiAgICAgIFwiSnVsXCIsXG4gICAgICBcIkF1Z1wiLFxuICAgICAgXCJTZXBcIixcbiAgICAgIFwiT2N0XCIsXG4gICAgICBcIk5vdlwiLFxuICAgICAgXCJEZWNcIlxuICAgIF0sXG4gICAgXCJTVEFOREFMT05FTU9OVEhcIjogW1xuICAgICAgXCJKYW51YXJ5XCIsXG4gICAgICBcIkZlYnJ1YXJ5XCIsXG4gICAgICBcIk1hcmNoXCIsXG4gICAgICBcIkFwcmlsXCIsXG4gICAgICBcIk1heVwiLFxuICAgICAgXCJKdW5lXCIsXG4gICAgICBcIkp1bHlcIixcbiAgICAgIFwiQXVndXN0XCIsXG4gICAgICBcIlNlcHRlbWJlclwiLFxuICAgICAgXCJPY3RvYmVyXCIsXG4gICAgICBcIk5vdmVtYmVyXCIsXG4gICAgICBcIkRlY2VtYmVyXCJcbiAgICBdLFxuICAgIFwiV0VFS0VORFJBTkdFXCI6IFtcbiAgICAgIDUsXG4gICAgICA2XG4gICAgXSxcbiAgICBcImZ1bGxEYXRlXCI6IFwiRUVFRSwgTU1NTSBkLCB5XCIsXG4gICAgXCJsb25nRGF0ZVwiOiBcIk1NTU0gZCwgeVwiLFxuICAgIFwibWVkaXVtXCI6IFwiTU1NIGQsIHkgaDptbTpzcyBhXCIsXG4gICAgXCJtZWRpdW1EYXRlXCI6IFwiTU1NIGQsIHlcIixcbiAgICBcIm1lZGl1bVRpbWVcIjogXCJoOm1tOnNzIGFcIixcbiAgICBcInNob3J0XCI6IFwiTS9kL3l5IGg6bW0gYVwiLFxuICAgIFwic2hvcnREYXRlXCI6IFwiTS9kL3l5XCIsXG4gICAgXCJzaG9ydFRpbWVcIjogXCJoOm1tIGFcIlxuICB9LFxuICBcIk5VTUJFUl9GT1JNQVRTXCI6IHtcbiAgICBcIkNVUlJFTkNZX1NZTVwiOiBcIiRcIixcbiAgICBcIkRFQ0lNQUxfU0VQXCI6IFwiLlwiLFxuICAgIFwiR1JPVVBfU0VQXCI6IFwiLFwiLFxuICAgIFwiUEFUVEVSTlNcIjogW1xuICAgICAge1xuICAgICAgICBcImdTaXplXCI6IDMsXG4gICAgICAgIFwibGdTaXplXCI6IDMsXG4gICAgICAgIFwibWF4RnJhY1wiOiAzLFxuICAgICAgICBcIm1pbkZyYWNcIjogMCxcbiAgICAgICAgXCJtaW5JbnRcIjogMSxcbiAgICAgICAgXCJuZWdQcmVcIjogXCItXCIsXG4gICAgICAgIFwibmVnU3VmXCI6IFwiXCIsXG4gICAgICAgIFwicG9zUHJlXCI6IFwiXCIsXG4gICAgICAgIFwicG9zU3VmXCI6IFwiXCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwiZ1NpemVcIjogMyxcbiAgICAgICAgXCJsZ1NpemVcIjogMyxcbiAgICAgICAgXCJtYXhGcmFjXCI6IDIsXG4gICAgICAgIFwibWluRnJhY1wiOiAyLFxuICAgICAgICBcIm1pbkludFwiOiAxLFxuICAgICAgICBcIm5lZ1ByZVwiOiBcIi1cXHUwMGE0XCIsXG4gICAgICAgIFwibmVnU3VmXCI6IFwiXCIsXG4gICAgICAgIFwicG9zUHJlXCI6IFwiXFx1MDBhNFwiLFxuICAgICAgICBcInBvc1N1ZlwiOiBcIlwiXG4gICAgICB9XG4gICAgXVxuICB9LFxuICBcImlkXCI6IFwiZW4tdXNcIixcbiAgXCJsb2NhbGVJRFwiOiBcImVuX1VTXCIsXG4gIFwicGx1cmFsQ2F0XCI6IGZ1bmN0aW9uKG4sIG9wdF9wcmVjaXNpb24pIHsgIHZhciBpID0gbiB8IDA7ICB2YXIgdmYgPSBnZXRWRihuLCBvcHRfcHJlY2lzaW9uKTsgIGlmIChpID09IDEgJiYgdmYudiA9PSAwKSB7ICAgIHJldHVybiBQTFVSQUxfQ0FURUdPUlkuT05FOyAgfSAgcmV0dXJuIFBMVVJBTF9DQVRFR09SWS5PVEhFUjt9XG59KTtcbn1dKTtcblxuICBqcUxpdGUoZnVuY3Rpb24oKSB7XG4gICAgYW5ndWxhckluaXQod2luZG93LmRvY3VtZW50LCBib290c3RyYXApO1xuICB9KTtcblxufSkod2luZG93KTtcblxuIXdpbmRvdy5hbmd1bGFyLiQkY3NwKCkubm9JbmxpbmVTdHlsZSAmJiB3aW5kb3cuYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmhlYWQpLnByZXBlbmQoJzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5AY2hhcnNldCBcIlVURi04XCI7W25nXFxcXDpjbG9ha10sW25nLWNsb2FrXSxbZGF0YS1uZy1jbG9ha10sW3gtbmctY2xvYWtdLC5uZy1jbG9haywueC1uZy1jbG9haywubmctaGlkZTpub3QoLm5nLWhpZGUtYW5pbWF0ZSl7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fW5nXFxcXDpmb3Jte2Rpc3BsYXk6YmxvY2s7fS5uZy1hbmltYXRlLXNoaW17dmlzaWJpbGl0eTpoaWRkZW47fS5uZy1hbmNob3J7cG9zaXRpb246YWJzb2x1dGU7fTwvc3R5bGU+Jyk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYW5ndWxhci9hbmd1bGFyLmpzXG4vLyBtb2R1bGUgaWQgPSA1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS43LjBcbiAqIChjKSAyMDEwLTIwMTggR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgYW5ndWxhcikge1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQG5nZG9jIG9iamVjdFxuICogQG5hbWUgYW5ndWxhci5tb2NrXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBOYW1lc3BhY2UgZnJvbSAnYW5ndWxhci1tb2Nrcy5qcycgd2hpY2ggY29udGFpbnMgdGVzdGluZyByZWxhdGVkIGNvZGUuXG4gKlxuICovXG5hbmd1bGFyLm1vY2sgPSB7fTtcblxuLyoqXG4gKiAhIFRoaXMgaXMgYSBwcml2YXRlIHVuZG9jdW1lbnRlZCBzZXJ2aWNlICFcbiAqXG4gKiBAbmFtZSAkYnJvd3NlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBzZXJ2aWNlIGlzIGEgbW9jayBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgbmcuJGJyb3dzZXJ9LiBJdCBwcm92aWRlcyBmYWtlXG4gKiBpbXBsZW1lbnRhdGlvbiBmb3IgY29tbW9ubHkgdXNlZCBicm93c2VyIGFwaXMgdGhhdCBhcmUgaGFyZCB0byB0ZXN0LCBlLmcuIHNldFRpbWVvdXQsIHhocixcbiAqIGNvb2tpZXMsIGV0Yy5cbiAqXG4gKiBUaGUgYXBpIG9mIHRoaXMgc2VydmljZSBpcyB0aGUgc2FtZSBhcyB0aGF0IG9mIHRoZSByZWFsIHtAbGluayBuZy4kYnJvd3NlciAkYnJvd3Nlcn0sIGV4Y2VwdFxuICogdGhhdCB0aGVyZSBhcmUgc2V2ZXJhbCBoZWxwZXIgbWV0aG9kcyBhdmFpbGFibGUgd2hpY2ggY2FuIGJlIHVzZWQgaW4gdGVzdHMuXG4gKi9cbmFuZ3VsYXIubW9jay4kQnJvd3NlclByb3ZpZGVyID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgYW5ndWxhci5tb2NrLiRCcm93c2VyKCk7XG4gIH07XG59O1xuXG5hbmd1bGFyLm1vY2suJEJyb3dzZXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHRoaXMuaXNNb2NrID0gdHJ1ZTtcbiAgc2VsZi4kJHVybCA9ICdodHRwOi8vc2VydmVyLyc7XG4gIHNlbGYuJCRsYXN0VXJsID0gc2VsZi4kJHVybDsgLy8gdXNlZCBieSB1cmwgcG9sbGluZyBmblxuICBzZWxmLnBvbGxGbnMgPSBbXTtcblxuICAvLyBUZXN0YWJpbGl0eSBBUElcblxuICB2YXIgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPSAwO1xuICB2YXIgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzID0gW107XG4gIHNlbGYuJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCA9IGZ1bmN0aW9uKCkgeyBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCsrOyB9O1xuICBzZWxmLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QgPSBmdW5jdGlvbihmbikge1xuICAgIHRyeSB7XG4gICAgICBmbigpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudC0tO1xuICAgICAgaWYgKCFvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCkge1xuICAgICAgICB3aGlsZSAob3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzLmxlbmd0aCkge1xuICAgICAgICAgIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5wb3AoKSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBzZWxmLm5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGlmIChvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCkge1xuICAgICAgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH1cbiAgfTtcblxuICAvLyByZWdpc3RlciB1cmwgcG9sbGluZyBmblxuXG4gIHNlbGYub25VcmxDaGFuZ2UgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIHNlbGYucG9sbEZucy5wdXNoKFxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChzZWxmLiQkbGFzdFVybCAhPT0gc2VsZi4kJHVybCB8fCBzZWxmLiQkc3RhdGUgIT09IHNlbGYuJCRsYXN0U3RhdGUpIHtcbiAgICAgICAgICBzZWxmLiQkbGFzdFVybCA9IHNlbGYuJCR1cmw7XG4gICAgICAgICAgc2VsZi4kJGxhc3RTdGF0ZSA9IHNlbGYuJCRzdGF0ZTtcbiAgICAgICAgICBsaXN0ZW5lcihzZWxmLiQkdXJsLCBzZWxmLiQkc3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcblxuICAgIHJldHVybiBsaXN0ZW5lcjtcbiAgfTtcblxuICBzZWxmLiQkYXBwbGljYXRpb25EZXN0cm95ZWQgPSBhbmd1bGFyLm5vb3A7XG4gIHNlbGYuJCRjaGVja1VybENoYW5nZSA9IGFuZ3VsYXIubm9vcDtcblxuICBzZWxmLmRlZmVycmVkRm5zID0gW107XG4gIHNlbGYuZGVmZXJyZWROZXh0SWQgPSAwO1xuXG4gIHNlbGYuZGVmZXIgPSBmdW5jdGlvbihmbiwgZGVsYXkpIHtcbiAgICAvLyBOb3RlIHRoYXQgd2UgZG8gbm90IHVzZSBgJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudGAgb3IgYCQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3RgXG4gICAgLy8gaW4gdGhpcyBtb2NrIGltcGxlbWVudGF0aW9uLlxuICAgIGRlbGF5ID0gZGVsYXkgfHwgMDtcbiAgICBzZWxmLmRlZmVycmVkRm5zLnB1c2goe3RpbWU6KHNlbGYuZGVmZXIubm93ICsgZGVsYXkpLCBmbjpmbiwgaWQ6IHNlbGYuZGVmZXJyZWROZXh0SWR9KTtcbiAgICBzZWxmLmRlZmVycmVkRm5zLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYS50aW1lIC0gYi50aW1lO30pO1xuICAgIHJldHVybiBzZWxmLmRlZmVycmVkTmV4dElkKys7XG4gIH07XG5cblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjZGVmZXIubm93XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDdXJyZW50IG1pbGxpc2Vjb25kcyBtb2NrIHRpbWUuXG4gICAqL1xuICBzZWxmLmRlZmVyLm5vdyA9IDA7XG5cblxuICBzZWxmLmRlZmVyLmNhbmNlbCA9IGZ1bmN0aW9uKGRlZmVySWQpIHtcbiAgICB2YXIgZm5JbmRleDtcblxuICAgIGFuZ3VsYXIuZm9yRWFjaChzZWxmLmRlZmVycmVkRm5zLCBmdW5jdGlvbihmbiwgaW5kZXgpIHtcbiAgICAgIGlmIChmbi5pZCA9PT0gZGVmZXJJZCkgZm5JbmRleCA9IGluZGV4O1xuICAgIH0pO1xuXG4gICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGZuSW5kZXgpKSB7XG4gICAgICBzZWxmLmRlZmVycmVkRm5zLnNwbGljZShmbkluZGV4LCAxKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNkZWZlci5mbHVzaFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRmx1c2hlcyBhbGwgcGVuZGluZyByZXF1ZXN0cyBhbmQgZXhlY3V0ZXMgdGhlIGRlZmVyIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXI9fSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGZsdXNoLiBTZWUge0BsaW5rICNkZWZlci5ub3d9XG4gICAqL1xuICBzZWxmLmRlZmVyLmZsdXNoID0gZnVuY3Rpb24oZGVsYXkpIHtcbiAgICB2YXIgbmV4dFRpbWU7XG5cbiAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoZGVsYXkpKSB7XG4gICAgICAvLyBBIGRlbGF5IHdhcyBwYXNzZWQgc28gY29tcHV0ZSB0aGUgbmV4dCB0aW1lXG4gICAgICBuZXh0VGltZSA9IHNlbGYuZGVmZXIubm93ICsgZGVsYXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzZWxmLmRlZmVycmVkRm5zLmxlbmd0aCkge1xuICAgICAgICAvLyBObyBkZWxheSB3YXMgcGFzc2VkIHNvIHNldCB0aGUgbmV4dCB0aW1lIHNvIHRoYXQgaXQgY2xlYXJzIHRoZSBkZWZlcnJlZCBxdWV1ZVxuICAgICAgICBuZXh0VGltZSA9IHNlbGYuZGVmZXJyZWRGbnNbc2VsZi5kZWZlcnJlZEZucy5sZW5ndGggLSAxXS50aW1lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm8gZGVsYXkgcGFzc2VkLCBidXQgdGhlcmUgYXJlIG5vIGRlZmVycmVkIHRhc2tzIHNvIGZsdXNoIC0gaW5kaWNhdGVzIGFuIGVycm9yIVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGRlZmVycmVkIHRhc2tzIHRvIGJlIGZsdXNoZWQnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3aGlsZSAoc2VsZi5kZWZlcnJlZEZucy5sZW5ndGggJiYgc2VsZi5kZWZlcnJlZEZuc1swXS50aW1lIDw9IG5leHRUaW1lKSB7XG4gICAgICAvLyBJbmNyZW1lbnQgdGhlIHRpbWUgYW5kIGNhbGwgdGhlIG5leHQgZGVmZXJyZWQgZnVuY3Rpb25cbiAgICAgIHNlbGYuZGVmZXIubm93ID0gc2VsZi5kZWZlcnJlZEZuc1swXS50aW1lO1xuICAgICAgc2VsZi5kZWZlcnJlZEZucy5zaGlmdCgpLmZuKCk7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIGN1cnJlbnQgdGltZSBpcyBjb3JyZWN0XG4gICAgc2VsZi5kZWZlci5ub3cgPSBuZXh0VGltZTtcbiAgfTtcblxuICBzZWxmLiQkYmFzZUhyZWYgPSAnLyc7XG4gIHNlbGYuYmFzZUhyZWYgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy4kJGJhc2VIcmVmO1xuICB9O1xufTtcbmFuZ3VsYXIubW9jay4kQnJvd3Nlci5wcm90b3R5cGUgPSB7XG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI3BvbGxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIHJ1biBhbGwgZm5zIGluIHBvbGxGbnNcbiAgICovXG4gIHBvbGw6IGZ1bmN0aW9uIHBvbGwoKSB7XG4gICAgYW5ndWxhci5mb3JFYWNoKHRoaXMucG9sbEZucywgZnVuY3Rpb24ocG9sbEZuKSB7XG4gICAgICBwb2xsRm4oKTtcbiAgICB9KTtcbiAgfSxcblxuICB1cmw6IGZ1bmN0aW9uKHVybCwgcmVwbGFjZSwgc3RhdGUpIHtcbiAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZChzdGF0ZSkpIHtcbiAgICAgIHN0YXRlID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHVybCkge1xuICAgICAgdGhpcy4kJHVybCA9IHVybDtcbiAgICAgIC8vIE5hdGl2ZSBwdXNoU3RhdGUgc2VyaWFsaXplcyAmIGNvcGllcyB0aGUgb2JqZWN0OyBzaW11bGF0ZSBpdC5cbiAgICAgIHRoaXMuJCRzdGF0ZSA9IGFuZ3VsYXIuY29weShzdGF0ZSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy4kJHVybDtcbiAgfSxcblxuICBzdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuJCRzdGF0ZTtcbiAgfVxufTtcblxuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29uZmlndXJlcyB0aGUgbW9jayBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXJ9IHRvIHJldGhyb3cgb3IgdG8gbG9nIGVycm9yc1xuICogcGFzc2VkIHRvIHRoZSBgJGV4Y2VwdGlvbkhhbmRsZXJgLlxuICovXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRleGNlcHRpb25IYW5kbGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBNb2NrIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlcn0gdGhhdCByZXRocm93cyBvciBsb2dzIGVycm9ycyBwYXNzZWRcbiAqIHRvIGl0LiBTZWUge0BsaW5rIG5nTW9jay4kZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyICRleGNlcHRpb25IYW5kbGVyUHJvdmlkZXJ9IGZvciBjb25maWd1cmF0aW9uXG4gKiBpbmZvcm1hdGlvbi5cbiAqXG4gKlxuICogYGBganNcbiAqICAgZGVzY3JpYmUoJyRleGNlcHRpb25IYW5kbGVyUHJvdmlkZXInLCBmdW5jdGlvbigpIHtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBjYXB0dXJlIGxvZyBtZXNzYWdlcyBhbmQgZXhjZXB0aW9ucycsIGZ1bmN0aW9uKCkge1xuICpcbiAqICAgICAgIG1vZHVsZShmdW5jdGlvbigkZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyKSB7XG4gKiAgICAgICAgICRleGNlcHRpb25IYW5kbGVyUHJvdmlkZXIubW9kZSgnbG9nJyk7XG4gKiAgICAgICB9KTtcbiAqXG4gKiAgICAgICBpbmplY3QoZnVuY3Rpb24oJGxvZywgJGV4Y2VwdGlvbkhhbmRsZXIsICR0aW1lb3V0KSB7XG4gKiAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyAkbG9nLmxvZygxKTsgfSk7XG4gKiAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyAkbG9nLmxvZygyKTsgdGhyb3cgJ2JhbmFuYSBwZWVsJzsgfSk7XG4gKiAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyAkbG9nLmxvZygzKTsgfSk7XG4gKiAgICAgICAgIGV4cGVjdCgkZXhjZXB0aW9uSGFuZGxlci5lcnJvcnMpLnRvRXF1YWwoW10pO1xuICogICAgICAgICBleHBlY3QoJGxvZy5hc3NlcnRFbXB0eSgpKTtcbiAqICAgICAgICAgJHRpbWVvdXQuZmx1c2goKTtcbiAqICAgICAgICAgZXhwZWN0KCRleGNlcHRpb25IYW5kbGVyLmVycm9ycykudG9FcXVhbChbJ2JhbmFuYSBwZWVsJ10pO1xuICogICAgICAgICBleHBlY3QoJGxvZy5sb2cubG9ncykudG9FcXVhbChbWzFdLCBbMl0sIFszXV0pO1xuICogICAgICAgfSk7XG4gKiAgICAgfSk7XG4gKiAgIH0pO1xuICogYGBgXG4gKi9cblxuYW5ndWxhci5tb2NrLiRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGhhbmRsZXI7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlciNtb2RlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBsb2dnaW5nIG1vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlIE1vZGUgb2Ygb3BlcmF0aW9uLCBkZWZhdWx0cyB0byBgcmV0aHJvd2AuXG4gICAqXG4gICAqICAgLSBgbG9nYDogU29tZXRpbWVzIGl0IGlzIGRlc2lyYWJsZSB0byB0ZXN0IHRoYXQgYW4gZXJyb3IgaXMgdGhyb3duLCBmb3IgdGhpcyBjYXNlIHRoZSBgbG9nYFxuICAgKiAgICAgbW9kZSBzdG9yZXMgYW4gYXJyYXkgb2YgZXJyb3JzIGluIGAkZXhjZXB0aW9uSGFuZGxlci5lcnJvcnNgLCB0byBhbGxvdyBsYXRlciBhc3NlcnRpb24gb2ZcbiAgICogICAgIHRoZW0uIFNlZSB7QGxpbmsgbmdNb2NrLiRsb2cjYXNzZXJ0RW1wdHkgYXNzZXJ0RW1wdHkoKX0gYW5kXG4gICAqICAgICB7QGxpbmsgbmdNb2NrLiRsb2cjcmVzZXQgcmVzZXQoKX0uXG4gICAqICAgLSBgcmV0aHJvd2A6IElmIGFueSBlcnJvcnMgYXJlIHBhc3NlZCB0byB0aGUgaGFuZGxlciBpbiB0ZXN0cywgaXQgdHlwaWNhbGx5IG1lYW5zIHRoYXQgdGhlcmVcbiAgICogICAgIGlzIGEgYnVnIGluIHRoZSBhcHBsaWNhdGlvbiBvciB0ZXN0LCBzbyB0aGlzIG1vY2sgd2lsbCBtYWtlIHRoZXNlIHRlc3RzIGZhaWwuIEZvciBhbnlcbiAgICogICAgIGltcGxlbWVudGF0aW9ucyB0aGF0IGV4cGVjdCBleGNlcHRpb25zIHRvIGJlIHRocm93biwgdGhlIGByZXRocm93YCBtb2RlIHdpbGwgYWxzbyBtYWludGFpblxuICAgKiAgICAgYSBsb2cgb2YgdGhyb3duIGVycm9ycyBpbiBgJGV4Y2VwdGlvbkhhbmRsZXIuZXJyb3JzYC5cbiAgICovXG4gIHRoaXMubW9kZSA9IGZ1bmN0aW9uKG1vZGUpIHtcblxuICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgY2FzZSAnbG9nJzpcbiAgICAgIGNhc2UgJ3JldGhyb3cnOlxuICAgICAgICB2YXIgZXJyb3JzID0gW107XG4gICAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobW9kZSA9PT0gJ3JldGhyb3cnKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaGFuZGxlci5lcnJvcnMgPSBlcnJvcnM7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIG1vZGUgXFwnJyArIG1vZGUgKyAnXFwnLCBvbmx5IFxcJ2xvZ1xcJy9cXCdyZXRocm93XFwnIG1vZGVzIGFyZSBhbGxvd2VkIScpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaGFuZGxlcjtcbiAgfTtcblxuICB0aGlzLm1vZGUoJ3JldGhyb3cnKTtcbn07XG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGxvZ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTW9jayBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgbmcuJGxvZ30gdGhhdCBnYXRoZXJzIGFsbCBsb2dnZWQgbWVzc2FnZXMgaW4gYXJyYXlzXG4gKiAob25lIGFycmF5IHBlciBsb2dnaW5nIGxldmVsKS4gVGhlc2UgYXJyYXlzIGFyZSBleHBvc2VkIGFzIGBsb2dzYCBwcm9wZXJ0eSBvZiBlYWNoIG9mIHRoZVxuICogbGV2ZWwtc3BlY2lmaWMgbG9nIGZ1bmN0aW9uLCBlLmcuIGZvciBsZXZlbCBgZXJyb3JgIHRoZSBhcnJheSBpcyBleHBvc2VkIGFzIGAkbG9nLmVycm9yLmxvZ3NgLlxuICpcbiAqL1xuYW5ndWxhci5tb2NrLiRMb2dQcm92aWRlciA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZGVidWcgPSB0cnVlO1xuXG4gIGZ1bmN0aW9uIGNvbmNhdChhcnJheTEsIGFycmF5MiwgaW5kZXgpIHtcbiAgICByZXR1cm4gYXJyYXkxLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnJheTIsIGluZGV4KSk7XG4gIH1cblxuICB0aGlzLmRlYnVnRW5hYmxlZCA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoZmxhZykpIHtcbiAgICAgIGRlYnVnID0gZmxhZztcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciAkbG9nID0ge1xuICAgICAgbG9nOiBmdW5jdGlvbigpIHsgJGxvZy5sb2cubG9ncy5wdXNoKGNvbmNhdChbXSwgYXJndW1lbnRzLCAwKSk7IH0sXG4gICAgICB3YXJuOiBmdW5jdGlvbigpIHsgJGxvZy53YXJuLmxvZ3MucHVzaChjb25jYXQoW10sIGFyZ3VtZW50cywgMCkpOyB9LFxuICAgICAgaW5mbzogZnVuY3Rpb24oKSB7ICRsb2cuaW5mby5sb2dzLnB1c2goY29uY2F0KFtdLCBhcmd1bWVudHMsIDApKTsgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbigpIHsgJGxvZy5lcnJvci5sb2dzLnB1c2goY29uY2F0KFtdLCBhcmd1bWVudHMsIDApKTsgfSxcbiAgICAgIGRlYnVnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgICAgJGxvZy5kZWJ1Zy5sb2dzLnB1c2goY29uY2F0KFtdLCBhcmd1bWVudHMsIDApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGxvZyNyZXNldFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogUmVzZXQgYWxsIG9mIHRoZSBsb2dnaW5nIGFycmF5cyB0byBlbXB0eS5cbiAgICAgKi9cbiAgICAkbG9nLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgICogQG5hbWUgJGxvZyNsb2cubG9nc1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQXJyYXkgb2YgbWVzc2FnZXMgbG9nZ2VkIHVzaW5nIHtAbGluayBuZy4kbG9nI2xvZyBgbG9nKClgfS5cbiAgICAgICAqXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICogYGBganNcbiAgICAgICAqICRsb2cubG9nKCdTb21lIExvZycpO1xuICAgICAgICogdmFyIGZpcnN0ID0gJGxvZy5sb2cubG9ncy51bnNoaWZ0KCk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqL1xuICAgICAgJGxvZy5sb2cubG9ncyA9IFtdO1xuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAqIEBuYW1lICRsb2cjaW5mby5sb2dzXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBBcnJheSBvZiBtZXNzYWdlcyBsb2dnZWQgdXNpbmcge0BsaW5rIG5nLiRsb2cjaW5mbyBgaW5mbygpYH0uXG4gICAgICAgKlxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAkbG9nLmluZm8oJ1NvbWUgSW5mbycpO1xuICAgICAgICogdmFyIGZpcnN0ID0gJGxvZy5pbmZvLmxvZ3MudW5zaGlmdCgpO1xuICAgICAgICogYGBgXG4gICAgICAgKi9cbiAgICAgICRsb2cuaW5mby5sb2dzID0gW107XG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgICogQG5hbWUgJGxvZyN3YXJuLmxvZ3NcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEFycmF5IG9mIG1lc3NhZ2VzIGxvZ2dlZCB1c2luZyB7QGxpbmsgbmcuJGxvZyN3YXJuIGB3YXJuKClgfS5cbiAgICAgICAqXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICogYGBganNcbiAgICAgICAqICRsb2cud2FybignU29tZSBXYXJuaW5nJyk7XG4gICAgICAgKiB2YXIgZmlyc3QgPSAkbG9nLndhcm4ubG9ncy51bnNoaWZ0KCk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqL1xuICAgICAgJGxvZy53YXJuLmxvZ3MgPSBbXTtcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAgKiBAbmFtZSAkbG9nI2Vycm9yLmxvZ3NcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEFycmF5IG9mIG1lc3NhZ2VzIGxvZ2dlZCB1c2luZyB7QGxpbmsgbmcuJGxvZyNlcnJvciBgZXJyb3IoKWB9LlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogJGxvZy5lcnJvcignU29tZSBFcnJvcicpO1xuICAgICAgICogdmFyIGZpcnN0ID0gJGxvZy5lcnJvci5sb2dzLnVuc2hpZnQoKTtcbiAgICAgICAqIGBgYFxuICAgICAgICovXG4gICAgICAkbG9nLmVycm9yLmxvZ3MgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAqIEBuYW1lICRsb2cjZGVidWcubG9nc1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQXJyYXkgb2YgbWVzc2FnZXMgbG9nZ2VkIHVzaW5nIHtAbGluayBuZy4kbG9nI2RlYnVnIGBkZWJ1ZygpYH0uXG4gICAgICAgKlxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAkbG9nLmRlYnVnKCdTb21lIEVycm9yJyk7XG4gICAgICAgKiB2YXIgZmlyc3QgPSAkbG9nLmRlYnVnLmxvZ3MudW5zaGlmdCgpO1xuICAgICAgICogYGBgXG4gICAgICAgKi9cbiAgICAgICRsb2cuZGVidWcubG9ncyA9IFtdO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGxvZyNhc3NlcnRFbXB0eVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQXNzZXJ0IHRoYXQgYWxsIG9mIHRoZSBsb2dnaW5nIG1ldGhvZHMgaGF2ZSBubyBsb2dnZWQgbWVzc2FnZXMuIElmIGFueSBtZXNzYWdlcyBhcmUgcHJlc2VudCxcbiAgICAgKiBhbiBleGNlcHRpb24gaXMgdGhyb3duLlxuICAgICAqL1xuICAgICRsb2cuYXNzZXJ0RW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlcnJvcnMgPSBbXTtcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ2Vycm9yJywgJ3dhcm4nLCAnaW5mbycsICdsb2cnLCAnZGVidWcnXSwgZnVuY3Rpb24obG9nTGV2ZWwpIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRsb2dbbG9nTGV2ZWxdLmxvZ3MsIGZ1bmN0aW9uKGxvZykge1xuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChsb2csIGZ1bmN0aW9uKGxvZ0l0ZW0pIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdNT0NLICRsb2cgKCcgKyBsb2dMZXZlbCArICcpOiAnICsgU3RyaW5nKGxvZ0l0ZW0pICsgJ1xcbicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKGxvZ0l0ZW0uc3RhY2sgfHwgJycpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIGVycm9ycy51bnNoaWZ0KCdFeHBlY3RlZCAkbG9nIHRvIGJlIGVtcHR5ISBFaXRoZXIgYSBtZXNzYWdlIHdhcyBsb2dnZWQgdW5leHBlY3RlZGx5LCBvciAnICtcbiAgICAgICAgICAnYW4gZXhwZWN0ZWQgbG9nIG1lc3NhZ2Ugd2FzIG5vdCBjaGVja2VkIGFuZCByZW1vdmVkOicpO1xuICAgICAgICBlcnJvcnMucHVzaCgnJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcnMuam9pbignXFxuLS0tLS0tLS0tXFxuJykpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkbG9nLnJlc2V0KCk7XG4gICAgcmV0dXJuICRsb2c7XG4gIH07XG59O1xuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRpbnRlcnZhbFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTW9jayBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgJGludGVydmFsIHNlcnZpY2UuXG4gKlxuICogVXNlIHtAbGluayBuZ01vY2suJGludGVydmFsI2ZsdXNoIGAkaW50ZXJ2YWwuZmx1c2gobWlsbGlzKWB9IHRvXG4gKiBtb3ZlIGZvcndhcmQgYnkgYG1pbGxpc2AgbWlsbGlzZWNvbmRzIGFuZCB0cmlnZ2VyIGFueSBmdW5jdGlvbnMgc2NoZWR1bGVkIHRvIHJ1biBpbiB0aGF0XG4gKiB0aW1lLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgcmVwZWF0ZWRseS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gZWFjaCBmdW5jdGlvbiBjYWxsLlxuICogQHBhcmFtIHtudW1iZXI9fSBbY291bnQ9MF0gTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdC4gSWYgbm90IHNldCwgb3IgMCwgd2lsbCByZXBlYXRcbiAqICAgaW5kZWZpbml0ZWx5LlxuICogQHBhcmFtIHtib29sZWFuPX0gW2ludm9rZUFwcGx5PXRydWVdIElmIHNldCB0byBgZmFsc2VgIHNraXBzIG1vZGVsIGRpcnR5IGNoZWNraW5nLCBvdGhlcndpc2VcbiAqICAgd2lsbCBpbnZva2UgYGZuYCB3aXRoaW4gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHl9IGJsb2NrLlxuICogQHBhcmFtIHsuLi4qPX0gUGFzcyBhZGRpdGlvbmFsIHBhcmFtZXRlcnMgdG8gdGhlIGV4ZWN1dGVkIGZ1bmN0aW9uLlxuICogQHJldHVybnMge3Byb21pc2V9IEEgcHJvbWlzZSB3aGljaCB3aWxsIGJlIG5vdGlmaWVkIG9uIGVhY2ggaXRlcmF0aW9uLlxuICovXG5hbmd1bGFyLm1vY2suJEludGVydmFsUHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckYnJvd3NlcicsICckcm9vdFNjb3BlJywgJyRxJywgJyQkcScsXG4gICAgICAgZnVuY3Rpb24oJGJyb3dzZXIsICAgJHJvb3RTY29wZSwgICAkcSwgICAkJHEpIHtcbiAgICB2YXIgcmVwZWF0Rm5zID0gW10sXG4gICAgICAgIG5leHRSZXBlYXRJZCA9IDAsXG4gICAgICAgIG5vdyA9IDA7XG5cbiAgICB2YXIgJGludGVydmFsID0gZnVuY3Rpb24oZm4sIGRlbGF5LCBjb3VudCwgaW52b2tlQXBwbHkpIHtcbiAgICAgIHZhciBoYXNQYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCxcbiAgICAgICAgICBhcmdzID0gaGFzUGFyYW1zID8gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCA0KSA6IFtdLFxuICAgICAgICAgIGl0ZXJhdGlvbiA9IDAsXG4gICAgICAgICAgc2tpcEFwcGx5ID0gKGFuZ3VsYXIuaXNEZWZpbmVkKGludm9rZUFwcGx5KSAmJiAhaW52b2tlQXBwbHkpLFxuICAgICAgICAgIGRlZmVycmVkID0gKHNraXBBcHBseSA/ICQkcSA6ICRxKS5kZWZlcigpLFxuICAgICAgICAgIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICBjb3VudCA9IChhbmd1bGFyLmlzRGVmaW5lZChjb3VudCkpID8gY291bnQgOiAwO1xuICAgICAgcHJvbWlzZS50aGVuKG51bGwsIGZ1bmN0aW9uKCkge30sICghaGFzUGFyYW1zKSA/IGZuIDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgfSk7XG5cbiAgICAgIHByb21pc2UuJCRpbnRlcnZhbElkID0gbmV4dFJlcGVhdElkO1xuXG4gICAgICBmdW5jdGlvbiB0aWNrKCkge1xuICAgICAgICBkZWZlcnJlZC5ub3RpZnkoaXRlcmF0aW9uKyspO1xuXG4gICAgICAgIGlmIChjb3VudCA+IDAgJiYgaXRlcmF0aW9uID49IGNvdW50KSB7XG4gICAgICAgICAgdmFyIGZuSW5kZXg7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpdGVyYXRpb24pO1xuXG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlcGVhdEZucywgZnVuY3Rpb24oZm4sIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZm4uaWQgPT09IHByb21pc2UuJCRpbnRlcnZhbElkKSBmbkluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoZm5JbmRleCkpIHtcbiAgICAgICAgICAgIHJlcGVhdEZucy5zcGxpY2UoZm5JbmRleCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNraXBBcHBseSkge1xuICAgICAgICAgICRicm93c2VyLmRlZmVyLmZsdXNoKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXBlYXRGbnMucHVzaCh7XG4gICAgICAgIG5leHRUaW1lOiAobm93ICsgKGRlbGF5IHx8IDApKSxcbiAgICAgICAgZGVsYXk6IGRlbGF5IHx8IDEsXG4gICAgICAgIGZuOiB0aWNrLFxuICAgICAgICBpZDogbmV4dFJlcGVhdElkLFxuICAgICAgICBkZWZlcnJlZDogZGVmZXJyZWRcbiAgICAgIH0pO1xuICAgICAgcmVwZWF0Rm5zLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYS5uZXh0VGltZSAtIGIubmV4dFRpbWU7fSk7XG5cbiAgICAgIG5leHRSZXBlYXRJZCsrO1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGludGVydmFsI2NhbmNlbFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQ2FuY2VscyBhIHRhc2sgYXNzb2NpYXRlZCB3aXRoIHRoZSBgcHJvbWlzZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3Byb21pc2V9IHByb21pc2UgQSBwcm9taXNlIGZyb20gY2FsbGluZyB0aGUgYCRpbnRlcnZhbGAgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB0YXNrIHdhcyBzdWNjZXNzZnVsbHkgY2FuY2VsbGVkLlxuICAgICAqL1xuICAgICRpbnRlcnZhbC5jYW5jZWwgPSBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICBpZiAoIXByb21pc2UpIHJldHVybiBmYWxzZTtcbiAgICAgIHZhciBmbkluZGV4O1xuXG4gICAgICBhbmd1bGFyLmZvckVhY2gocmVwZWF0Rm5zLCBmdW5jdGlvbihmbiwgaW5kZXgpIHtcbiAgICAgICAgaWYgKGZuLmlkID09PSBwcm9taXNlLiQkaW50ZXJ2YWxJZCkgZm5JbmRleCA9IGluZGV4O1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChmbkluZGV4KSkge1xuICAgICAgICByZXBlYXRGbnNbZm5JbmRleF0uZGVmZXJyZWQucHJvbWlzZS50aGVuKHVuZGVmaW5lZCwgZnVuY3Rpb24oKSB7fSk7XG4gICAgICAgIHJlcGVhdEZuc1tmbkluZGV4XS5kZWZlcnJlZC5yZWplY3QoJ2NhbmNlbGVkJyk7XG4gICAgICAgIHJlcGVhdEZucy5zcGxpY2UoZm5JbmRleCwgMSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaW50ZXJ2YWwjZmx1c2hcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIFJ1bnMgaW50ZXJ2YWwgdGFza3Mgc2NoZWR1bGVkIHRvIGJlIHJ1biBpbiB0aGUgbmV4dCBgbWlsbGlzYCBtaWxsaXNlY29uZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG1pbGxpcyBtYXhpbXVtIHRpbWVvdXQgYW1vdW50IHRvIGZsdXNoIHVwIHVudGlsLlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgYW1vdW50IG9mIHRpbWUgbW92ZWQgZm9yd2FyZC5cbiAgICAgKi9cbiAgICAkaW50ZXJ2YWwuZmx1c2ggPSBmdW5jdGlvbihtaWxsaXMpIHtcbiAgICAgIHZhciBiZWZvcmUgPSBub3c7XG4gICAgICBub3cgKz0gbWlsbGlzO1xuICAgICAgd2hpbGUgKHJlcGVhdEZucy5sZW5ndGggJiYgcmVwZWF0Rm5zWzBdLm5leHRUaW1lIDw9IG5vdykge1xuICAgICAgICB2YXIgdGFzayA9IHJlcGVhdEZuc1swXTtcbiAgICAgICAgdGFzay5mbigpO1xuICAgICAgICBpZiAodGFzay5uZXh0VGltZSA9PT0gYmVmb3JlKSB7XG4gICAgICAgICAgLy8gdGhpcyBjYW4gb25seSBoYXBwZW4gdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgICAvLyBhIHplcm8tZGVsYXkgaW50ZXJ2YWwgZ2V0cyB0cmlnZ2VyZWRcbiAgICAgICAgICB0YXNrLm5leHRUaW1lKys7XG4gICAgICAgIH1cbiAgICAgICAgdGFzay5uZXh0VGltZSArPSB0YXNrLmRlbGF5O1xuICAgICAgICByZXBlYXRGbnMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhLm5leHRUaW1lIC0gYi5uZXh0VGltZTt9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtaWxsaXM7XG4gICAgfTtcblxuICAgIHJldHVybiAkaW50ZXJ2YWw7XG4gIH1dO1xufTtcblxuXG5mdW5jdGlvbiBqc29uU3RyaW5nVG9EYXRlKHN0cmluZykge1xuICAvLyBUaGUgUl9JU084MDYxX1NUUiByZWdleCBpcyBuZXZlciBnb2luZyB0byBmaXQgaW50byB0aGUgMTAwIGNoYXIgbGltaXQhXG4gIC8vIGVzbGl0LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgdmFyIFJfSVNPODA2MV9TVFIgPSAvXigtP1xcZHs0fSktPyhcXGRcXGQpLT8oXFxkXFxkKSg/OlQoXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86XFwuKFxcZHszfSkpPyk/KT8oWnwoWystXSkoXFxkXFxkKTo/KFxcZFxcZCkpKT8kLztcblxuICB2YXIgbWF0Y2g7XG4gIGlmICgobWF0Y2ggPSBzdHJpbmcubWF0Y2goUl9JU084MDYxX1NUUikpKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKSxcbiAgICAgICAgdHpIb3VyID0gMCxcbiAgICAgICAgdHpNaW4gID0gMDtcbiAgICBpZiAobWF0Y2hbOV0pIHtcbiAgICAgIHR6SG91ciA9IHRvSW50KG1hdGNoWzldICsgbWF0Y2hbMTBdKTtcbiAgICAgIHR6TWluID0gdG9JbnQobWF0Y2hbOV0gKyBtYXRjaFsxMV0pO1xuICAgIH1cbiAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHRvSW50KG1hdGNoWzFdKSwgdG9JbnQobWF0Y2hbMl0pIC0gMSwgdG9JbnQobWF0Y2hbM10pKTtcbiAgICBkYXRlLnNldFVUQ0hvdXJzKHRvSW50KG1hdGNoWzRdIHx8IDApIC0gdHpIb3VyLFxuICAgICAgICAgICAgICAgICAgICAgdG9JbnQobWF0Y2hbNV0gfHwgMCkgLSB0ek1pbixcbiAgICAgICAgICAgICAgICAgICAgIHRvSW50KG1hdGNoWzZdIHx8IDApLFxuICAgICAgICAgICAgICAgICAgICAgdG9JbnQobWF0Y2hbN10gfHwgMCkpO1xuICAgIHJldHVybiBkYXRlO1xuICB9XG4gIHJldHVybiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIHRvSW50KHN0cikge1xuICByZXR1cm4gcGFyc2VJbnQoc3RyLCAxMCk7XG59XG5cbmZ1bmN0aW9uIHBhZE51bWJlckluTW9jayhudW0sIGRpZ2l0cywgdHJpbSkge1xuICB2YXIgbmVnID0gJyc7XG4gIGlmIChudW0gPCAwKSB7XG4gICAgbmVnID0gICctJztcbiAgICBudW0gPSAtbnVtO1xuICB9XG4gIG51bSA9ICcnICsgbnVtO1xuICB3aGlsZSAobnVtLmxlbmd0aCA8IGRpZ2l0cykgbnVtID0gJzAnICsgbnVtO1xuICBpZiAodHJpbSkge1xuICAgIG51bSA9IG51bS5zdWJzdHIobnVtLmxlbmd0aCAtIGRpZ2l0cyk7XG4gIH1cbiAgcmV0dXJuIG5lZyArIG51bTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyB0eXBlXG4gKiBAbmFtZSBhbmd1bGFyLm1vY2suVHpEYXRlXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiAqTk9URSo6IHRoaXMgaXMgbm90IGFuIGluamVjdGFibGUgaW5zdGFuY2UsIGp1c3QgYSBnbG9iYWxseSBhdmFpbGFibGUgbW9jayBjbGFzcyBvZiBgRGF0ZWAuXG4gKlxuICogTW9jayBvZiB0aGUgRGF0ZSB0eXBlIHdoaWNoIGhhcyBpdHMgdGltZXpvbmUgc3BlY2lmaWVkIHZpYSBjb25zdHJ1Y3RvciBhcmcuXG4gKlxuICogVGhlIG1haW4gcHVycG9zZSBpcyB0byBjcmVhdGUgRGF0ZS1saWtlIGluc3RhbmNlcyB3aXRoIHRpbWV6b25lIGZpeGVkIHRvIHRoZSBzcGVjaWZpZWQgdGltZXpvbmVcbiAqIG9mZnNldCwgc28gdGhhdCB3ZSBjYW4gdGVzdCBjb2RlIHRoYXQgZGVwZW5kcyBvbiBsb2NhbCB0aW1lem9uZSBzZXR0aW5ncyB3aXRob3V0IGRlcGVuZGVuY3kgb25cbiAqIHRoZSB0aW1lIHpvbmUgc2V0dGluZ3Mgb2YgdGhlIG1hY2hpbmUgd2hlcmUgdGhlIGNvZGUgaXMgcnVubmluZy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgKmRlc2lyZWQqIHRpbWV6b25lIGluIGhvdXJzIChmcmFjdGlvbnMgd2lsbCBiZSBob25vcmVkKVxuICogQHBhcmFtIHsobnVtYmVyfHN0cmluZyl9IHRpbWVzdGFtcCBUaW1lc3RhbXAgcmVwcmVzZW50aW5nIHRoZSBkZXNpcmVkIHRpbWUgaW4gKlVUQypcbiAqXG4gKiBAZXhhbXBsZVxuICogISEhISBXQVJOSU5HICEhISEhXG4gKiBUaGlzIGlzIG5vdCBhIGNvbXBsZXRlIERhdGUgb2JqZWN0IHNvIG9ubHkgbWV0aG9kcyB0aGF0IHdlcmUgaW1wbGVtZW50ZWQgY2FuIGJlIGNhbGxlZCBzYWZlbHkuXG4gKiBUbyBtYWtlIG1hdHRlcnMgd29yc2UsIFR6RGF0ZSBpbnN0YW5jZXMgaW5oZXJpdCBzdHVmZiBmcm9tIERhdGUgdmlhIGEgcHJvdG90eXBlLlxuICpcbiAqIFdlIGRvIG91ciBiZXN0IHRvIGludGVyY2VwdCBjYWxscyB0byBcInVuaW1wbGVtZW50ZWRcIiBtZXRob2RzLCBidXQgc2luY2UgdGhlIGxpc3Qgb2YgbWV0aG9kcyBpc1xuICogaW5jb21wbGV0ZSB3ZSBtaWdodCBiZSBtaXNzaW5nIHNvbWUgbm9uLXN0YW5kYXJkIG1ldGhvZHMuIFRoaXMgY2FuIHJlc3VsdCBpbiBlcnJvcnMgbGlrZTpcbiAqIFwiRGF0ZS5wcm90b3R5cGUuZm9vIGNhbGxlZCBvbiBpbmNvbXBhdGlibGUgT2JqZWN0XCIuXG4gKlxuICogYGBganNcbiAqIHZhciBuZXdZZWFySW5CcmF0aXNsYXZhID0gbmV3IFR6RGF0ZSgtMSwgJzIwMDktMTItMzFUMjM6MDA6MDBaJyk7XG4gKiBuZXdZZWFySW5CcmF0aXNsYXZhLmdldFRpbWV6b25lT2Zmc2V0KCkgPT4gLTYwO1xuICogbmV3WWVhckluQnJhdGlzbGF2YS5nZXRGdWxsWWVhcigpID0+IDIwMTA7XG4gKiBuZXdZZWFySW5CcmF0aXNsYXZhLmdldE1vbnRoKCkgPT4gMDtcbiAqIG5ld1llYXJJbkJyYXRpc2xhdmEuZ2V0RGF0ZSgpID0+IDE7XG4gKiBuZXdZZWFySW5CcmF0aXNsYXZhLmdldEhvdXJzKCkgPT4gMDtcbiAqIG5ld1llYXJJbkJyYXRpc2xhdmEuZ2V0TWludXRlcygpID0+IDA7XG4gKiBuZXdZZWFySW5CcmF0aXNsYXZhLmdldFNlY29uZHMoKSA9PiAwO1xuICogYGBgXG4gKlxuICovXG5hbmd1bGFyLm1vY2suVHpEYXRlID0gZnVuY3Rpb24ob2Zmc2V0LCB0aW1lc3RhbXApIHtcbiAgdmFyIHNlbGYgPSBuZXcgRGF0ZSgwKTtcbiAgaWYgKGFuZ3VsYXIuaXNTdHJpbmcodGltZXN0YW1wKSkge1xuICAgIHZhciB0c1N0ciA9IHRpbWVzdGFtcDtcblxuICAgIHNlbGYub3JpZ0RhdGUgPSBqc29uU3RyaW5nVG9EYXRlKHRpbWVzdGFtcCk7XG5cbiAgICB0aW1lc3RhbXAgPSBzZWxmLm9yaWdEYXRlLmdldFRpbWUoKTtcbiAgICBpZiAoaXNOYU4odGltZXN0YW1wKSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXRocm93LWxpdGVyYWxcbiAgICAgIHRocm93IHtcbiAgICAgICAgbmFtZTogJ0lsbGVnYWwgQXJndW1lbnQnLFxuICAgICAgICBtZXNzYWdlOiAnQXJnIFxcJycgKyB0c1N0ciArICdcXCcgcGFzc2VkIGludG8gVHpEYXRlIGNvbnN0cnVjdG9yIGlzIG5vdCBhIHZhbGlkIGRhdGUgc3RyaW5nJ1xuICAgICAgfTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc2VsZi5vcmlnRGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCk7XG4gIH1cblxuICB2YXIgbG9jYWxPZmZzZXQgPSBuZXcgRGF0ZSh0aW1lc3RhbXApLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gIHNlbGYub2Zmc2V0RGlmZiA9IGxvY2FsT2Zmc2V0ICogNjAgKiAxMDAwIC0gb2Zmc2V0ICogMTAwMCAqIDYwICogNjA7XG4gIHNlbGYuZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCArIHNlbGYub2Zmc2V0RGlmZik7XG5cbiAgc2VsZi5nZXRUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuZGF0ZS5nZXRUaW1lKCkgLSBzZWxmLm9mZnNldERpZmY7XG4gIH07XG5cbiAgc2VsZi50b0xvY2FsZURhdGVTdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5kYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICB9O1xuXG4gIHNlbGYuZ2V0RnVsbFllYXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5kYXRlLmdldEZ1bGxZZWFyKCk7XG4gIH07XG5cbiAgc2VsZi5nZXRNb250aCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmRhdGUuZ2V0TW9udGgoKTtcbiAgfTtcblxuICBzZWxmLmdldERhdGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5kYXRlLmdldERhdGUoKTtcbiAgfTtcblxuICBzZWxmLmdldEhvdXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuZGF0ZS5nZXRIb3VycygpO1xuICB9O1xuXG4gIHNlbGYuZ2V0TWludXRlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmRhdGUuZ2V0TWludXRlcygpO1xuICB9O1xuXG4gIHNlbGYuZ2V0U2Vjb25kcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmRhdGUuZ2V0U2Vjb25kcygpO1xuICB9O1xuXG4gIHNlbGYuZ2V0TWlsbGlzZWNvbmRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuZGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcbiAgfTtcblxuICBzZWxmLmdldFRpbWV6b25lT2Zmc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG9mZnNldCAqIDYwO1xuICB9O1xuXG4gIHNlbGYuZ2V0VVRDRnVsbFllYXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5vcmlnRGF0ZS5nZXRVVENGdWxsWWVhcigpO1xuICB9O1xuXG4gIHNlbGYuZ2V0VVRDTW9udGggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5vcmlnRGF0ZS5nZXRVVENNb250aCgpO1xuICB9O1xuXG4gIHNlbGYuZ2V0VVRDRGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLm9yaWdEYXRlLmdldFVUQ0RhdGUoKTtcbiAgfTtcblxuICBzZWxmLmdldFVUQ0hvdXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYub3JpZ0RhdGUuZ2V0VVRDSG91cnMoKTtcbiAgfTtcblxuICBzZWxmLmdldFVUQ01pbnV0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5vcmlnRGF0ZS5nZXRVVENNaW51dGVzKCk7XG4gIH07XG5cbiAgc2VsZi5nZXRVVENTZWNvbmRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYub3JpZ0RhdGUuZ2V0VVRDU2Vjb25kcygpO1xuICB9O1xuXG4gIHNlbGYuZ2V0VVRDTWlsbGlzZWNvbmRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYub3JpZ0RhdGUuZ2V0VVRDTWlsbGlzZWNvbmRzKCk7XG4gIH07XG5cbiAgc2VsZi5nZXREYXkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5kYXRlLmdldERheSgpO1xuICB9O1xuXG4gIC8vIHByb3ZpZGUgdGhpcyBtZXRob2Qgb25seSBvbiBicm93c2VycyB0aGF0IGFscmVhZHkgaGF2ZSBpdFxuICBpZiAoc2VsZi50b0lTT1N0cmluZykge1xuICAgIHNlbGYudG9JU09TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBwYWROdW1iZXJJbk1vY2soc2VsZi5vcmlnRGF0ZS5nZXRVVENGdWxsWWVhcigpLCA0KSArICctJyArXG4gICAgICAgICAgICBwYWROdW1iZXJJbk1vY2soc2VsZi5vcmlnRGF0ZS5nZXRVVENNb250aCgpICsgMSwgMikgKyAnLScgK1xuICAgICAgICAgICAgcGFkTnVtYmVySW5Nb2NrKHNlbGYub3JpZ0RhdGUuZ2V0VVRDRGF0ZSgpLCAyKSArICdUJyArXG4gICAgICAgICAgICBwYWROdW1iZXJJbk1vY2soc2VsZi5vcmlnRGF0ZS5nZXRVVENIb3VycygpLCAyKSArICc6JyArXG4gICAgICAgICAgICBwYWROdW1iZXJJbk1vY2soc2VsZi5vcmlnRGF0ZS5nZXRVVENNaW51dGVzKCksIDIpICsgJzonICtcbiAgICAgICAgICAgIHBhZE51bWJlckluTW9jayhzZWxmLm9yaWdEYXRlLmdldFVUQ1NlY29uZHMoKSwgMikgKyAnLicgK1xuICAgICAgICAgICAgcGFkTnVtYmVySW5Nb2NrKHNlbGYub3JpZ0RhdGUuZ2V0VVRDTWlsbGlzZWNvbmRzKCksIDMpICsgJ1onO1xuICAgIH07XG4gIH1cblxuICAvL2hpZGUgYWxsIG1ldGhvZHMgbm90IGltcGxlbWVudGVkIGluIHRoaXMgbW9jayB0aGF0IHRoZSBEYXRlIHByb3RvdHlwZSBleHBvc2VzXG4gIHZhciB1bmltcGxlbWVudGVkTWV0aG9kcyA9IFsnZ2V0VVRDRGF5JyxcbiAgICAgICdnZXRZZWFyJywgJ3NldERhdGUnLCAnc2V0RnVsbFllYXInLCAnc2V0SG91cnMnLCAnc2V0TWlsbGlzZWNvbmRzJyxcbiAgICAgICdzZXRNaW51dGVzJywgJ3NldE1vbnRoJywgJ3NldFNlY29uZHMnLCAnc2V0VGltZScsICdzZXRVVENEYXRlJywgJ3NldFVUQ0Z1bGxZZWFyJyxcbiAgICAgICdzZXRVVENIb3VycycsICdzZXRVVENNaWxsaXNlY29uZHMnLCAnc2V0VVRDTWludXRlcycsICdzZXRVVENNb250aCcsICdzZXRVVENTZWNvbmRzJyxcbiAgICAgICdzZXRZZWFyJywgJ3RvRGF0ZVN0cmluZycsICd0b0dNVFN0cmluZycsICd0b0pTT04nLCAndG9Mb2NhbGVGb3JtYXQnLCAndG9Mb2NhbGVTdHJpbmcnLFxuICAgICAgJ3RvTG9jYWxlVGltZVN0cmluZycsICd0b1NvdXJjZScsICd0b1N0cmluZycsICd0b1RpbWVTdHJpbmcnLCAndG9VVENTdHJpbmcnLCAndmFsdWVPZiddO1xuXG4gIGFuZ3VsYXIuZm9yRWFjaCh1bmltcGxlbWVudGVkTWV0aG9kcywgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgIHNlbGZbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIFxcJycgKyBtZXRob2ROYW1lICsgJ1xcJyBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhlIFR6RGF0ZSBtb2NrJyk7XG4gICAgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIHNlbGY7XG59O1xuXG4vL21ha2UgXCJ0ekRhdGVJbnN0YW5jZSBpbnN0YW5jZW9mIERhdGVcIiByZXR1cm4gdHJ1ZVxuYW5ndWxhci5tb2NrLlR6RGF0ZS5wcm90b3R5cGUgPSBEYXRlLnByb3RvdHlwZTtcblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkYW5pbWF0ZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTW9jayBpbXBsZW1lbnRhdGlvbiBvZiB0aGUge0BsaW5rIG5nLiRhbmltYXRlIGAkYW5pbWF0ZWB9IHNlcnZpY2UuIEV4cG9zZXMgdHdvIGFkZGl0aW9uYWwgbWV0aG9kc1xuICogZm9yIHRlc3RpbmcgYW5pbWF0aW9ucy5cbiAqXG4gKiBZb3UgbmVlZCB0byByZXF1aXJlIHRoZSBgbmdBbmltYXRlTW9ja2AgbW9kdWxlIGluIHlvdXIgdGVzdCBzdWl0ZSBmb3IgaW5zdGFuY2UgYGJlZm9yZUVhY2gobW9kdWxlKCduZ0FuaW1hdGVNb2NrJykpYFxuICovXG5hbmd1bGFyLm1vY2suYW5pbWF0ZSA9IGFuZ3VsYXIubW9kdWxlKCduZ0FuaW1hdGVNb2NrJywgWyduZyddKVxuICAuaW5mbyh7IGFuZ3VsYXJWZXJzaW9uOiAnMS43LjAnIH0pXG5cbiAgLmNvbmZpZyhbJyRwcm92aWRlJywgZnVuY3Rpb24oJHByb3ZpZGUpIHtcblxuICAgICRwcm92aWRlLmZhY3RvcnkoJyQkZm9yY2VSZWZsb3cnLCBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIHJlZmxvd0ZuKCkge1xuICAgICAgICByZWZsb3dGbi50b3RhbFJlZmxvd3MrKztcbiAgICAgIH1cbiAgICAgIHJlZmxvd0ZuLnRvdGFsUmVmbG93cyA9IDA7XG4gICAgICByZXR1cm4gcmVmbG93Rm47XG4gICAgfSk7XG5cbiAgICAkcHJvdmlkZS5mYWN0b3J5KCckJGFuaW1hdGVBc3luY1J1bicsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHF1ZXVlID0gW107XG4gICAgICB2YXIgcXVldWVGbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICBxdWV1ZS5wdXNoKGZuKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICBxdWV1ZUZuLmZsdXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgcXVldWVbaV0oKTtcbiAgICAgICAgfVxuICAgICAgICBxdWV1ZSA9IFtdO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBxdWV1ZUZuO1xuICAgIH0pO1xuXG4gICAgJHByb3ZpZGUuZGVjb3JhdG9yKCckJGFuaW1hdGVKcycsIFsnJGRlbGVnYXRlJywgZnVuY3Rpb24oJGRlbGVnYXRlKSB7XG4gICAgICB2YXIgcnVubmVycyA9IFtdO1xuXG4gICAgICB2YXIgYW5pbWF0ZUpzQ29uc3RydWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFuaW1hdG9yID0gJGRlbGVnYXRlLmFwcGx5KCRkZWxlZ2F0ZSwgYXJndW1lbnRzKTtcbiAgICAgICAgLy8gSWYgbm8gamF2YXNjcmlwdCBhbmltYXRpb24gaXMgZm91bmQsIGFuaW1hdG9yIGlzIHVuZGVmaW5lZFxuICAgICAgICBpZiAoYW5pbWF0b3IpIHtcbiAgICAgICAgICBydW5uZXJzLnB1c2goYW5pbWF0b3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbmltYXRvcjtcbiAgICAgIH07XG5cbiAgICAgIGFuaW1hdGVKc0NvbnN0cnVjdG9yLiRjbG9zZUFuZEZsdXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJ1bm5lcnMuZm9yRWFjaChmdW5jdGlvbihydW5uZXIpIHtcbiAgICAgICAgICBydW5uZXIuZW5kKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBydW5uZXJzID0gW107XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gYW5pbWF0ZUpzQ29uc3RydWN0b3I7XG4gICAgfV0pO1xuXG4gICAgJHByb3ZpZGUuZGVjb3JhdG9yKCckYW5pbWF0ZUNzcycsIFsnJGRlbGVnYXRlJywgZnVuY3Rpb24oJGRlbGVnYXRlKSB7XG4gICAgICB2YXIgcnVubmVycyA9IFtdO1xuXG4gICAgICB2YXIgYW5pbWF0ZUNzc0NvbnN0cnVjdG9yID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgYW5pbWF0b3IgPSAkZGVsZWdhdGUoZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICAgIHJ1bm5lcnMucHVzaChhbmltYXRvcik7XG4gICAgICAgIHJldHVybiBhbmltYXRvcjtcbiAgICAgIH07XG5cbiAgICAgIGFuaW1hdGVDc3NDb25zdHJ1Y3Rvci4kY2xvc2VBbmRGbHVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBydW5uZXJzLmZvckVhY2goZnVuY3Rpb24ocnVubmVyKSB7XG4gICAgICAgICAgcnVubmVyLmVuZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcnVubmVycyA9IFtdO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGFuaW1hdGVDc3NDb25zdHJ1Y3RvcjtcbiAgICB9XSk7XG5cbiAgICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRhbmltYXRlJywgWyckZGVsZWdhdGUnLCAnJHRpbWVvdXQnLCAnJGJyb3dzZXInLCAnJCRyQUYnLCAnJGFuaW1hdGVDc3MnLCAnJCRhbmltYXRlSnMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQkZm9yY2VSZWZsb3cnLCAnJCRhbmltYXRlQXN5bmNSdW4nLCAnJHJvb3RTY29wZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oJGRlbGVnYXRlLCAgICR0aW1lb3V0LCAgICRicm93c2VyLCAgICQkckFGLCAgICRhbmltYXRlQ3NzLCAgICQkYW5pbWF0ZUpzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQkZm9yY2VSZWZsb3csICAgJCRhbmltYXRlQXN5bmNSdW4sICAkcm9vdFNjb3BlKSB7XG4gICAgICB2YXIgYW5pbWF0ZSA9IHtcbiAgICAgICAgcXVldWU6IFtdLFxuICAgICAgICBjYW5jZWw6ICRkZWxlZ2F0ZS5jYW5jZWwsXG4gICAgICAgIG9uOiAkZGVsZWdhdGUub24sXG4gICAgICAgIG9mZjogJGRlbGVnYXRlLm9mZixcbiAgICAgICAgcGluOiAkZGVsZWdhdGUucGluLFxuICAgICAgICBnZXQgcmVmbG93cygpIHtcbiAgICAgICAgICByZXR1cm4gJCRmb3JjZVJlZmxvdy50b3RhbFJlZmxvd3M7XG4gICAgICAgIH0sXG4gICAgICAgIGVuYWJsZWQ6ICRkZWxlZ2F0ZS5lbmFibGVkLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNjbG9zZUFuZEZsdXNoXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIGNsb3NlIGFsbCBwZW5kaW5nIGFuaW1hdGlvbnMgKGJvdGgge0BsaW5rIG5nQW5pbWF0ZSNqYXZhc2NyaXB0LWJhc2VkLWFuaW1hdGlvbnMgSmF2YXNjcmlwdH1cbiAgICAgICAgICogYW5kIHtAbGluayBuZ0FuaW1hdGUuJGFuaW1hdGVDc3MgQ1NTfSkgYW5kIGl0IHdpbGwgYWxzbyBmbHVzaCBhbnkgcmVtYWluaW5nIGFuaW1hdGlvbiBmcmFtZXMgYW5kL29yIGNhbGxiYWNrcy5cbiAgICAgICAgICovXG4gICAgICAgIGNsb3NlQW5kRmx1c2g6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIHdlIGFsbG93IHRoZSBmbHVzaCBjb21tYW5kIHRvIHN3YWxsb3cgdGhlIGVycm9yc1xuICAgICAgICAgIC8vIGJlY2F1c2UgZGVwZW5kaW5nIG9uIHdoZXRoZXIgQ1NTIG9yIEpTIGFuaW1hdGlvbnMgYXJlXG4gICAgICAgICAgLy8gdXNlZCwgdGhlcmUgbWF5IG5vdCBiZSBhIFJBRiBmbHVzaC4gVGhlIHByaW1hcnkgZmx1c2hcbiAgICAgICAgICAvLyBhdCB0aGUgZW5kIG9mIHRoaXMgZnVuY3Rpb24gbXVzdCB0aHJvdyBhbiBleGNlcHRpb25cbiAgICAgICAgICAvLyBiZWNhdXNlIGl0IHdpbGwgdHJhY2sgaWYgdGhlcmUgd2VyZSBwZW5kaW5nIGFuaW1hdGlvbnNcbiAgICAgICAgICB0aGlzLmZsdXNoKHRydWUpO1xuICAgICAgICAgICRhbmltYXRlQ3NzLiRjbG9zZUFuZEZsdXNoKCk7XG4gICAgICAgICAgJCRhbmltYXRlSnMuJGNsb3NlQW5kRmx1c2goKTtcbiAgICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAqIEBuYW1lICRhbmltYXRlI2ZsdXNoXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGZsdXNoIHRoZSBwZW5kaW5nIGNhbGxiYWNrcyBhbmQgYW5pbWF0aW9uIGZyYW1lcyB0byBlaXRoZXIgc3RhcnRcbiAgICAgICAgICogYW4gYW5pbWF0aW9uIG9yIGNvbmNsdWRlIGFuIGFuaW1hdGlvbi4gTm90ZSB0aGF0IHRoaXMgd2lsbCBub3QgYWN0dWFsbHkgY2xvc2UgYW5cbiAgICAgICAgICogYWN0aXZlbHkgcnVubmluZyBhbmltYXRpb24gKHNlZSB7QGxpbmsgbmdNb2NrLiRhbmltYXRlI2Nsb3NlQW5kRmx1c2ggYGNsb3NlQW5kRmx1c2goKWB9IGZvciB0aGF0KS5cbiAgICAgICAgICovXG4gICAgICAgIGZsdXNoOiBmdW5jdGlvbihoaWRlRXJyb3JzKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG5cbiAgICAgICAgICB2YXIgZG9OZXh0UnVuLCBzb21ldGhpbmdGbHVzaGVkID0gZmFsc2U7XG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgZG9OZXh0UnVuID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmICgkJHJBRi5xdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgJCRyQUYuZmx1c2goKTtcbiAgICAgICAgICAgICAgZG9OZXh0UnVuID0gc29tZXRoaW5nRmx1c2hlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkJGFuaW1hdGVBc3luY1J1bi5mbHVzaCgpKSB7XG4gICAgICAgICAgICAgIGRvTmV4dFJ1biA9IHNvbWV0aGluZ0ZsdXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gd2hpbGUgKGRvTmV4dFJ1bik7XG5cbiAgICAgICAgICBpZiAoIXNvbWV0aGluZ0ZsdXNoZWQgJiYgIWhpZGVFcnJvcnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcGVuZGluZyBhbmltYXRpb25zIHJlYWR5IHRvIGJlIGNsb3NlZCBvciBmbHVzaGVkJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChcbiAgICAgICAgWydhbmltYXRlJywnZW50ZXInLCdsZWF2ZScsJ21vdmUnLCdhZGRDbGFzcycsJ3JlbW92ZUNsYXNzJywnc2V0Q2xhc3MnXSwgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgIGFuaW1hdGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFuaW1hdGUucXVldWUucHVzaCh7XG4gICAgICAgICAgICBldmVudDogbWV0aG9kLFxuICAgICAgICAgICAgZWxlbWVudDogYXJndW1lbnRzWzBdLFxuICAgICAgICAgICAgb3B0aW9uczogYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIGFyZ3M6IGFyZ3VtZW50c1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiAkZGVsZWdhdGVbbWV0aG9kXS5hcHBseSgkZGVsZWdhdGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGFuaW1hdGU7XG4gICAgfV0pO1xuXG4gIH1dKTtcblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5tb2NrLmR1bXBcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqICpOT1RFKjogVGhpcyBpcyBub3QgYW4gaW5qZWN0YWJsZSBpbnN0YW5jZSwganVzdCBhIGdsb2JhbGx5IGF2YWlsYWJsZSBmdW5jdGlvbi5cbiAqXG4gKiBNZXRob2QgZm9yIHNlcmlhbGl6aW5nIGNvbW1vbiBBbmd1bGFySlMgb2JqZWN0cyAoc2NvcGUsIGVsZW1lbnRzLCBldGMuLikgaW50byBzdHJpbmdzLlxuICogSXQgaXMgdXNlZnVsIGZvciBsb2dnaW5nIG9iamVjdHMgdG8gdGhlIGNvbnNvbGUgd2hlbiBkZWJ1Z2dpbmcuXG4gKlxuICogQHBhcmFtIHsqfSBvYmplY3QgLSBhbnkgb2JqZWN0IHRvIHR1cm4gaW50byBzdHJpbmcuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IGEgc2VyaWFsaXplZCBzdHJpbmcgb2YgdGhlIGFyZ3VtZW50XG4gKi9cbmFuZ3VsYXIubW9jay5kdW1wID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gIHJldHVybiBzZXJpYWxpemUob2JqZWN0KTtcblxuICBmdW5jdGlvbiBzZXJpYWxpemUob2JqZWN0KSB7XG4gICAgdmFyIG91dDtcblxuICAgIGlmIChhbmd1bGFyLmlzRWxlbWVudChvYmplY3QpKSB7XG4gICAgICBvYmplY3QgPSBhbmd1bGFyLmVsZW1lbnQob2JqZWN0KTtcbiAgICAgIG91dCA9IGFuZ3VsYXIuZWxlbWVudCgnPGRpdj48L2Rpdj4nKTtcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChvYmplY3QsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgb3V0LmFwcGVuZChhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkuY2xvbmUoKSk7XG4gICAgICB9KTtcbiAgICAgIG91dCA9IG91dC5odG1sKCk7XG4gICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzQXJyYXkob2JqZWN0KSkge1xuICAgICAgb3V0ID0gW107XG4gICAgICBhbmd1bGFyLmZvckVhY2gob2JqZWN0LCBmdW5jdGlvbihvKSB7XG4gICAgICAgIG91dC5wdXNoKHNlcmlhbGl6ZShvKSk7XG4gICAgICB9KTtcbiAgICAgIG91dCA9ICdbICcgKyBvdXQuam9pbignLCAnKSArICcgXSc7XG4gICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24ob2JqZWN0LiRldmFsKSAmJiBhbmd1bGFyLmlzRnVuY3Rpb24ob2JqZWN0LiRhcHBseSkpIHtcbiAgICAgICAgb3V0ID0gc2VyaWFsaXplU2NvcGUob2JqZWN0KTtcbiAgICAgIH0gZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgb3V0ID0gb2JqZWN0LnN0YWNrIHx8ICgnJyArIG9iamVjdC5uYW1lICsgJzogJyArIG9iamVjdC5tZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRPRE8oaSk6IHRoaXMgcHJldmVudHMgbWV0aG9kcyBiZWluZyBsb2dnZWQsXG4gICAgICAgIC8vIHdlIHNob3VsZCBoYXZlIGEgYmV0dGVyIHdheSB0byBzZXJpYWxpemUgb2JqZWN0c1xuICAgICAgICBvdXQgPSBhbmd1bGFyLnRvSnNvbihvYmplY3QsIHRydWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvdXQgPSBTdHJpbmcob2JqZWN0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2VyaWFsaXplU2NvcGUoc2NvcGUsIG9mZnNldCkge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAgJyAgJztcbiAgICB2YXIgbG9nID0gW29mZnNldCArICdTY29wZSgnICsgc2NvcGUuJGlkICsgJyk6IHsnXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gc2NvcGUpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2NvcGUsIGtleSkgJiYgIWtleS5tYXRjaCgvXihcXCR8dGhpcykvKSkge1xuICAgICAgICBsb2cucHVzaCgnICAnICsga2V5ICsgJzogJyArIGFuZ3VsYXIudG9Kc29uKHNjb3BlW2tleV0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNoaWxkID0gc2NvcGUuJCRjaGlsZEhlYWQ7XG4gICAgd2hpbGUgKGNoaWxkKSB7XG4gICAgICBsb2cucHVzaChzZXJpYWxpemVTY29wZShjaGlsZCwgb2Zmc2V0ICsgJyAgJykpO1xuICAgICAgY2hpbGQgPSBjaGlsZC4kJG5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBsb2cucHVzaCgnfScpO1xuICAgIHJldHVybiBsb2cuam9pbignXFxuJyArIG9mZnNldCk7XG4gIH1cbn07XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRodHRwQmFja2VuZFxuICogQGRlc2NyaXB0aW9uXG4gKiBGYWtlIEhUVFAgYmFja2VuZCBpbXBsZW1lbnRhdGlvbiBzdWl0YWJsZSBmb3IgdW5pdCB0ZXN0aW5nIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSB0aGVcbiAqIHtAbGluayBuZy4kaHR0cCAkaHR0cCBzZXJ2aWNlfS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipOb3RlKio6IEZvciBmYWtlIEhUVFAgYmFja2VuZCBpbXBsZW1lbnRhdGlvbiBzdWl0YWJsZSBmb3IgZW5kLXRvLWVuZCB0ZXN0aW5nIG9yIGJhY2tlbmQtbGVzc1xuICogZGV2ZWxvcG1lbnQgcGxlYXNlIHNlZSB7QGxpbmsgbmdNb2NrRTJFLiRodHRwQmFja2VuZCBlMmUgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICogPC9kaXY+XG4gKlxuICogRHVyaW5nIHVuaXQgdGVzdGluZywgd2Ugd2FudCBvdXIgdW5pdCB0ZXN0cyB0byBydW4gcXVpY2tseSBhbmQgaGF2ZSBubyBleHRlcm5hbCBkZXBlbmRlbmNpZXMgc29cbiAqIHdlIGRvbuKAmXQgd2FudCB0byBzZW5kIFtYSFJdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL3htbGh0dHByZXF1ZXN0KSBvclxuICogW0pTT05QXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0pTT05QKSByZXF1ZXN0cyB0byBhIHJlYWwgc2VydmVyLiBBbGwgd2UgcmVhbGx5IG5lZWQgaXNcbiAqIHRvIHZlcmlmeSB3aGV0aGVyIGEgY2VydGFpbiByZXF1ZXN0IGhhcyBiZWVuIHNlbnQgb3Igbm90LCBvciBhbHRlcm5hdGl2ZWx5IGp1c3QgbGV0IHRoZVxuICogYXBwbGljYXRpb24gbWFrZSByZXF1ZXN0cywgcmVzcG9uZCB3aXRoIHByZS10cmFpbmVkIHJlc3BvbnNlcyBhbmQgYXNzZXJ0IHRoYXQgdGhlIGVuZCByZXN1bHQgaXNcbiAqIHdoYXQgd2UgZXhwZWN0IGl0IHRvIGJlLlxuICpcbiAqIFRoaXMgbW9jayBpbXBsZW1lbnRhdGlvbiBjYW4gYmUgdXNlZCB0byByZXNwb25kIHdpdGggc3RhdGljIG9yIGR5bmFtaWMgcmVzcG9uc2VzIHZpYSB0aGVcbiAqIGBleHBlY3RgIGFuZCBgd2hlbmAgYXBpcyBhbmQgdGhlaXIgc2hvcnRjdXRzIChgZXhwZWN0R0VUYCwgYHdoZW5QT1NUYCwgZXRjKS5cbiAqXG4gKiBXaGVuIGFuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiBuZWVkcyBzb21lIGRhdGEgZnJvbSBhIHNlcnZlciwgaXQgY2FsbHMgdGhlICRodHRwIHNlcnZpY2UsIHdoaWNoXG4gKiBzZW5kcyB0aGUgcmVxdWVzdCB0byBhIHJlYWwgc2VydmVyIHVzaW5nICRodHRwQmFja2VuZCBzZXJ2aWNlLiBXaXRoIGRlcGVuZGVuY3kgaW5qZWN0aW9uLCBpdCBpc1xuICogZWFzeSB0byBpbmplY3QgJGh0dHBCYWNrZW5kIG1vY2sgKHdoaWNoIGhhcyB0aGUgc2FtZSBBUEkgYXMgJGh0dHBCYWNrZW5kKSBhbmQgdXNlIGl0IHRvIHZlcmlmeVxuICogdGhlIHJlcXVlc3RzIGFuZCByZXNwb25kIHdpdGggc29tZSB0ZXN0aW5nIGRhdGEgd2l0aG91dCBzZW5kaW5nIGEgcmVxdWVzdCB0byBhIHJlYWwgc2VydmVyLlxuICpcbiAqIFRoZXJlIGFyZSB0d28gd2F5cyB0byBzcGVjaWZ5IHdoYXQgdGVzdCBkYXRhIHNob3VsZCBiZSByZXR1cm5lZCBhcyBodHRwIHJlc3BvbnNlcyBieSB0aGUgbW9ja1xuICogYmFja2VuZCB3aGVuIHRoZSBjb2RlIHVuZGVyIHRlc3QgbWFrZXMgaHR0cCByZXF1ZXN0czpcbiAqXG4gKiAtIGAkaHR0cEJhY2tlbmQuZXhwZWN0YCAtIHNwZWNpZmllcyBhIHJlcXVlc3QgZXhwZWN0YXRpb25cbiAqIC0gYCRodHRwQmFja2VuZC53aGVuYCAtIHNwZWNpZmllcyBhIGJhY2tlbmQgZGVmaW5pdGlvblxuICpcbiAqXG4gKiAjIyBSZXF1ZXN0IEV4cGVjdGF0aW9ucyB2cyBCYWNrZW5kIERlZmluaXRpb25zXG4gKlxuICogUmVxdWVzdCBleHBlY3RhdGlvbnMgcHJvdmlkZSBhIHdheSB0byBtYWtlIGFzc2VydGlvbnMgYWJvdXQgcmVxdWVzdHMgbWFkZSBieSB0aGUgYXBwbGljYXRpb24gYW5kXG4gKiB0byBkZWZpbmUgcmVzcG9uc2VzIGZvciB0aG9zZSByZXF1ZXN0cy4gVGhlIHRlc3Qgd2lsbCBmYWlsIGlmIHRoZSBleHBlY3RlZCByZXF1ZXN0cyBhcmUgbm90IG1hZGVcbiAqIG9yIHRoZXkgYXJlIG1hZGUgaW4gdGhlIHdyb25nIG9yZGVyLlxuICpcbiAqIEJhY2tlbmQgZGVmaW5pdGlvbnMgYWxsb3cgeW91IHRvIGRlZmluZSBhIGZha2UgYmFja2VuZCBmb3IgeW91ciBhcHBsaWNhdGlvbiB3aGljaCBkb2Vzbid0IGFzc2VydFxuICogaWYgYSBwYXJ0aWN1bGFyIHJlcXVlc3Qgd2FzIG1hZGUgb3Igbm90LCBpdCBqdXN0IHJldHVybnMgYSB0cmFpbmVkIHJlc3BvbnNlIGlmIGEgcmVxdWVzdCBpcyBtYWRlLlxuICogVGhlIHRlc3Qgd2lsbCBwYXNzIHdoZXRoZXIgb3Igbm90IHRoZSByZXF1ZXN0IGdldHMgbWFkZSBkdXJpbmcgdGVzdGluZy5cbiAqXG4gKlxuICogPHRhYmxlIGNsYXNzPVwidGFibGVcIj5cbiAqICAgPHRyPjx0aCB3aWR0aD1cIjIyMHB4XCI+PC90aD48dGg+UmVxdWVzdCBleHBlY3RhdGlvbnM8L3RoPjx0aD5CYWNrZW5kIGRlZmluaXRpb25zPC90aD48L3RyPlxuICogICA8dHI+XG4gKiAgICAgPHRoPlN5bnRheDwvdGg+XG4gKiAgICAgPHRkPi5leHBlY3QoLi4uKS5yZXNwb25kKC4uLik8L3RkPlxuICogICAgIDx0ZD4ud2hlbiguLi4pLnJlc3BvbmQoLi4uKTwvdGQ+XG4gKiAgIDwvdHI+XG4gKiAgIDx0cj5cbiAqICAgICA8dGg+VHlwaWNhbCB1c2FnZTwvdGg+XG4gKiAgICAgPHRkPnN0cmljdCB1bml0IHRlc3RzPC90ZD5cbiAqICAgICA8dGQ+bG9vc2UgKGJsYWNrLWJveCkgdW5pdCB0ZXN0aW5nPC90ZD5cbiAqICAgPC90cj5cbiAqICAgPHRyPlxuICogICAgIDx0aD5GdWxmaWxscyBtdWx0aXBsZSByZXF1ZXN0czwvdGg+XG4gKiAgICAgPHRkPk5PPC90ZD5cbiAqICAgICA8dGQ+WUVTPC90ZD5cbiAqICAgPC90cj5cbiAqICAgPHRyPlxuICogICAgIDx0aD5PcmRlciBvZiByZXF1ZXN0cyBtYXR0ZXJzPC90aD5cbiAqICAgICA8dGQ+WUVTPC90ZD5cbiAqICAgICA8dGQ+Tk88L3RkPlxuICogICA8L3RyPlxuICogICA8dHI+XG4gKiAgICAgPHRoPlJlcXVlc3QgcmVxdWlyZWQ8L3RoPlxuICogICAgIDx0ZD5ZRVM8L3RkPlxuICogICAgIDx0ZD5OTzwvdGQ+XG4gKiAgIDwvdHI+XG4gKiAgIDx0cj5cbiAqICAgICA8dGg+UmVzcG9uc2UgcmVxdWlyZWQ8L3RoPlxuICogICAgIDx0ZD5vcHRpb25hbCAoc2VlIGJlbG93KTwvdGQ+XG4gKiAgICAgPHRkPllFUzwvdGQ+XG4gKiAgIDwvdHI+XG4gKiA8L3RhYmxlPlxuICpcbiAqIEluIGNhc2VzIHdoZXJlIGJvdGggYmFja2VuZCBkZWZpbml0aW9ucyBhbmQgcmVxdWVzdCBleHBlY3RhdGlvbnMgYXJlIHNwZWNpZmllZCBkdXJpbmcgdW5pdFxuICogdGVzdGluZywgdGhlIHJlcXVlc3QgZXhwZWN0YXRpb25zIGFyZSBldmFsdWF0ZWQgZmlyc3QuXG4gKlxuICogSWYgYSByZXF1ZXN0IGV4cGVjdGF0aW9uIGhhcyBubyByZXNwb25zZSBzcGVjaWZpZWQsIHRoZSBhbGdvcml0aG0gd2lsbCBzZWFyY2ggeW91ciBiYWNrZW5kXG4gKiBkZWZpbml0aW9ucyBmb3IgYW4gYXBwcm9wcmlhdGUgcmVzcG9uc2UuXG4gKlxuICogSWYgYSByZXF1ZXN0IGRpZG4ndCBtYXRjaCBhbnkgZXhwZWN0YXRpb24gb3IgaWYgdGhlIGV4cGVjdGF0aW9uIGRvZXNuJ3QgaGF2ZSB0aGUgcmVzcG9uc2VcbiAqIGRlZmluZWQsIHRoZSBiYWNrZW5kIGRlZmluaXRpb25zIGFyZSBldmFsdWF0ZWQgaW4gc2VxdWVudGlhbCBvcmRlciB0byBzZWUgaWYgYW55IG9mIHRoZW0gbWF0Y2hcbiAqIHRoZSByZXF1ZXN0LiBUaGUgcmVzcG9uc2UgZnJvbSB0aGUgZmlyc3QgbWF0Y2hlZCBkZWZpbml0aW9uIGlzIHJldHVybmVkLlxuICpcbiAqXG4gKiAjIyBGbHVzaGluZyBIVFRQIHJlcXVlc3RzXG4gKlxuICogVGhlICRodHRwQmFja2VuZCB1c2VkIGluIHByb2R1Y3Rpb24gYWx3YXlzIHJlc3BvbmRzIHRvIHJlcXVlc3RzIGFzeW5jaHJvbm91c2x5LiBJZiB3ZSBwcmVzZXJ2ZWRcbiAqIHRoaXMgYmVoYXZpb3IgaW4gdW5pdCB0ZXN0aW5nLCB3ZSdkIGhhdmUgdG8gY3JlYXRlIGFzeW5jIHVuaXQgdGVzdHMsIHdoaWNoIGFyZSBoYXJkIHRvIHdyaXRlLFxuICogdG8gZm9sbG93IGFuZCB0byBtYWludGFpbi4gQnV0IG5laXRoZXIgY2FuIHRoZSB0ZXN0aW5nIG1vY2sgcmVzcG9uZCBzeW5jaHJvbm91c2x5OyB0aGF0IHdvdWxkXG4gKiBjaGFuZ2UgdGhlIGV4ZWN1dGlvbiBvZiB0aGUgY29kZSB1bmRlciB0ZXN0LiBGb3IgdGhpcyByZWFzb24sIHRoZSBtb2NrICRodHRwQmFja2VuZCBoYXMgYVxuICogYGZsdXNoKClgIG1ldGhvZCwgd2hpY2ggYWxsb3dzIHRoZSB0ZXN0IHRvIGV4cGxpY2l0bHkgZmx1c2ggcGVuZGluZyByZXF1ZXN0cy4gVGhpcyBwcmVzZXJ2ZXNcbiAqIHRoZSBhc3luYyBhcGkgb2YgdGhlIGJhY2tlbmQsIHdoaWxlIGFsbG93aW5nIHRoZSB0ZXN0IHRvIGV4ZWN1dGUgc3luY2hyb25vdXNseS5cbiAqXG4gKlxuICogIyMgVW5pdCB0ZXN0aW5nIHdpdGggbW9jayAkaHR0cEJhY2tlbmRcbiAqIFRoZSBmb2xsb3dpbmcgY29kZSBzaG93cyBob3cgdG8gc2V0dXAgYW5kIHVzZSB0aGUgbW9jayBiYWNrZW5kIHdoZW4gdW5pdCB0ZXN0aW5nIGEgY29udHJvbGxlci5cbiAqIEZpcnN0IHdlIGNyZWF0ZSB0aGUgY29udHJvbGxlciB1bmRlciB0ZXN0OlxuICpcbiAgYGBganNcbiAgLy8gVGhlIG1vZHVsZSBjb2RlXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdNeUFwcCcsIFtdKVxuICAgIC5jb250cm9sbGVyKCdNeUNvbnRyb2xsZXInLCBNeUNvbnRyb2xsZXIpO1xuXG4gIC8vIFRoZSBjb250cm9sbGVyIGNvZGVcbiAgZnVuY3Rpb24gTXlDb250cm9sbGVyKCRzY29wZSwgJGh0dHApIHtcbiAgICB2YXIgYXV0aFRva2VuO1xuXG4gICAgJGh0dHAuZ2V0KCcvYXV0aC5weScpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGF1dGhUb2tlbiA9IHJlc3BvbnNlLmhlYWRlcnMoJ0EtVG9rZW4nKTtcbiAgICAgICRzY29wZS51c2VyID0gcmVzcG9uc2UuZGF0YTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS5zdGF0dXMgPSAnRmFpbGVkLi4uJztcbiAgICB9KTtcblxuICAgICRzY29wZS5zYXZlTWVzc2FnZSA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgIHZhciBoZWFkZXJzID0geyAnQXV0aG9yaXphdGlvbic6IGF1dGhUb2tlbiB9O1xuICAgICAgJHNjb3BlLnN0YXR1cyA9ICdTYXZpbmcuLi4nO1xuXG4gICAgICAkaHR0cC5wb3N0KCcvYWRkLW1zZy5weScsIG1lc3NhZ2UsIHsgaGVhZGVyczogaGVhZGVycyB9ICkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAkc2NvcGUuc3RhdHVzID0gJyc7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnN0YXR1cyA9ICdGYWlsZWQuLi4nO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuICBgYGBcbiAqXG4gKiBOb3cgd2Ugc2V0dXAgdGhlIG1vY2sgYmFja2VuZCBhbmQgY3JlYXRlIHRoZSB0ZXN0IHNwZWNzOlxuICpcbiAgYGBganNcbiAgICAvLyB0ZXN0aW5nIGNvbnRyb2xsZXJcbiAgICBkZXNjcmliZSgnTXlDb250cm9sbGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgdmFyICRodHRwQmFja2VuZCwgJHJvb3RTY29wZSwgY3JlYXRlQ29udHJvbGxlciwgYXV0aFJlcXVlc3RIYW5kbGVyO1xuXG4gICAgICAgLy8gU2V0IHVwIHRoZSBtb2R1bGVcbiAgICAgICBiZWZvcmVFYWNoKG1vZHVsZSgnTXlBcHAnKSk7XG5cbiAgICAgICBiZWZvcmVFYWNoKGluamVjdChmdW5jdGlvbigkaW5qZWN0b3IpIHtcbiAgICAgICAgIC8vIFNldCB1cCB0aGUgbW9jayBodHRwIHNlcnZpY2UgcmVzcG9uc2VzXG4gICAgICAgICAkaHR0cEJhY2tlbmQgPSAkaW5qZWN0b3IuZ2V0KCckaHR0cEJhY2tlbmQnKTtcbiAgICAgICAgIC8vIGJhY2tlbmQgZGVmaW5pdGlvbiBjb21tb24gZm9yIGFsbCB0ZXN0c1xuICAgICAgICAgYXV0aFJlcXVlc3RIYW5kbGVyID0gJGh0dHBCYWNrZW5kLndoZW4oJ0dFVCcsICcvYXV0aC5weScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXNwb25kKHt1c2VySWQ6ICd1c2VyWCd9LCB7J0EtVG9rZW4nOiAneHh4J30pO1xuXG4gICAgICAgICAvLyBHZXQgaG9sZCBvZiBhIHNjb3BlIChpLmUuIHRoZSByb290IHNjb3BlKVxuICAgICAgICAgJHJvb3RTY29wZSA9ICRpbmplY3Rvci5nZXQoJyRyb290U2NvcGUnKTtcbiAgICAgICAgIC8vIFRoZSAkY29udHJvbGxlciBzZXJ2aWNlIGlzIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBjb250cm9sbGVyc1xuICAgICAgICAgdmFyICRjb250cm9sbGVyID0gJGluamVjdG9yLmdldCgnJGNvbnRyb2xsZXInKTtcblxuICAgICAgICAgY3JlYXRlQ29udHJvbGxlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICByZXR1cm4gJGNvbnRyb2xsZXIoJ015Q29udHJvbGxlcicsIHsnJHNjb3BlJyA6ICRyb290U2NvcGUgfSk7XG4gICAgICAgICB9O1xuICAgICAgIH0pKTtcblxuXG4gICAgICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgJGh0dHBCYWNrZW5kLnZlcmlmeU5vT3V0c3RhbmRpbmdFeHBlY3RhdGlvbigpO1xuICAgICAgICAgJGh0dHBCYWNrZW5kLnZlcmlmeU5vT3V0c3RhbmRpbmdSZXF1ZXN0KCk7XG4gICAgICAgfSk7XG5cblxuICAgICAgIGl0KCdzaG91bGQgZmV0Y2ggYXV0aGVudGljYXRpb24gdG9rZW4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICRodHRwQmFja2VuZC5leHBlY3RHRVQoJy9hdXRoLnB5Jyk7XG4gICAgICAgICB2YXIgY29udHJvbGxlciA9IGNyZWF0ZUNvbnRyb2xsZXIoKTtcbiAgICAgICAgICRodHRwQmFja2VuZC5mbHVzaCgpO1xuICAgICAgIH0pO1xuXG5cbiAgICAgICBpdCgnc2hvdWxkIGZhaWwgYXV0aGVudGljYXRpb24nLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgLy8gTm90aWNlIGhvdyB5b3UgY2FuIGNoYW5nZSB0aGUgcmVzcG9uc2UgZXZlbiBhZnRlciBpdCB3YXMgc2V0XG4gICAgICAgICBhdXRoUmVxdWVzdEhhbmRsZXIucmVzcG9uZCg0MDEsICcnKTtcblxuICAgICAgICAgJGh0dHBCYWNrZW5kLmV4cGVjdEdFVCgnL2F1dGgucHknKTtcbiAgICAgICAgIHZhciBjb250cm9sbGVyID0gY3JlYXRlQ29udHJvbGxlcigpO1xuICAgICAgICAgJGh0dHBCYWNrZW5kLmZsdXNoKCk7XG4gICAgICAgICBleHBlY3QoJHJvb3RTY29wZS5zdGF0dXMpLnRvQmUoJ0ZhaWxlZC4uLicpO1xuICAgICAgIH0pO1xuXG5cbiAgICAgICBpdCgnc2hvdWxkIHNlbmQgbXNnIHRvIHNlcnZlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBjcmVhdGVDb250cm9sbGVyKCk7XG4gICAgICAgICAkaHR0cEJhY2tlbmQuZmx1c2goKTtcblxuICAgICAgICAgLy8gbm93IHlvdSBkb27igJl0IGNhcmUgYWJvdXQgdGhlIGF1dGhlbnRpY2F0aW9uLCBidXRcbiAgICAgICAgIC8vIHRoZSBjb250cm9sbGVyIHdpbGwgc3RpbGwgc2VuZCB0aGUgcmVxdWVzdCBhbmRcbiAgICAgICAgIC8vICRodHRwQmFja2VuZCB3aWxsIHJlc3BvbmQgd2l0aG91dCB5b3UgaGF2aW5nIHRvXG4gICAgICAgICAvLyBzcGVjaWZ5IHRoZSBleHBlY3RhdGlvbiBhbmQgcmVzcG9uc2UgZm9yIHRoaXMgcmVxdWVzdFxuXG4gICAgICAgICAkaHR0cEJhY2tlbmQuZXhwZWN0UE9TVCgnL2FkZC1tc2cucHknLCAnbWVzc2FnZSBjb250ZW50JykucmVzcG9uZCgyMDEsICcnKTtcbiAgICAgICAgICRyb290U2NvcGUuc2F2ZU1lc3NhZ2UoJ21lc3NhZ2UgY29udGVudCcpO1xuICAgICAgICAgZXhwZWN0KCRyb290U2NvcGUuc3RhdHVzKS50b0JlKCdTYXZpbmcuLi4nKTtcbiAgICAgICAgICRodHRwQmFja2VuZC5mbHVzaCgpO1xuICAgICAgICAgZXhwZWN0KCRyb290U2NvcGUuc3RhdHVzKS50b0JlKCcnKTtcbiAgICAgICB9KTtcblxuXG4gICAgICAgaXQoJ3Nob3VsZCBzZW5kIGF1dGggaGVhZGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgY29udHJvbGxlciA9IGNyZWF0ZUNvbnRyb2xsZXIoKTtcbiAgICAgICAgICRodHRwQmFja2VuZC5mbHVzaCgpO1xuXG4gICAgICAgICAkaHR0cEJhY2tlbmQuZXhwZWN0UE9TVCgnL2FkZC1tc2cucHknLCB1bmRlZmluZWQsIGZ1bmN0aW9uKGhlYWRlcnMpIHtcbiAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGhlYWRlciB3YXMgc2VudCwgaWYgaXQgd2Fzbid0IHRoZSBleHBlY3RhdGlvbiB3b24ndFxuICAgICAgICAgICAvLyBtYXRjaCB0aGUgcmVxdWVzdCBhbmQgdGhlIHRlc3Qgd2lsbCBmYWlsXG4gICAgICAgICAgIHJldHVybiBoZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPT09ICd4eHgnO1xuICAgICAgICAgfSkucmVzcG9uZCgyMDEsICcnKTtcblxuICAgICAgICAgJHJvb3RTY29wZS5zYXZlTWVzc2FnZSgnd2hhdGV2ZXInKTtcbiAgICAgICAgICRodHRwQmFja2VuZC5mbHVzaCgpO1xuICAgICAgIH0pO1xuICAgIH0pO1xuICBgYGBcbiAqXG4gKiAjIyBEeW5hbWljIHJlc3BvbnNlc1xuICpcbiAqIFlvdSBkZWZpbmUgYSByZXNwb25zZSB0byBhIHJlcXVlc3QgYnkgY2hhaW5pbmcgYSBjYWxsIHRvIGByZXNwb25kKClgIG9udG8gYSBkZWZpbml0aW9uIG9yIGV4cGVjdGF0aW9uLlxuICogSWYgeW91IHByb3ZpZGUgYSAqKmNhbGxiYWNrKiogYXMgdGhlIGZpcnN0IHBhcmFtZXRlciB0byBgcmVzcG9uZChjYWxsYmFjaylgIHRoZW4geW91IGNhbiBkeW5hbWljYWxseSBnZW5lcmF0ZVxuICogYSByZXNwb25zZSBiYXNlZCBvbiB0aGUgcHJvcGVydGllcyBvZiB0aGUgcmVxdWVzdC5cbiAqXG4gKiBUaGUgYGNhbGxiYWNrYCBmdW5jdGlvbiBzaG91bGQgYmUgb2YgdGhlIGZvcm0gYGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCBwYXJhbXMpYC5cbiAqXG4gKiAjIyMgUXVlcnkgcGFyYW1ldGVyc1xuICpcbiAqIEJ5IGRlZmF1bHQsIHF1ZXJ5IHBhcmFtZXRlcnMgb24gcmVxdWVzdCBVUkxzIGFyZSBwYXJzZWQgaW50byB0aGUgYHBhcmFtc2Agb2JqZWN0LiBTbyBhIHJlcXVlc3QgVVJMXG4gKiBvZiBgL2xpc3Q/cT1zZWFyY2hzdHImb3JkZXJieT0tbmFtZWAgd291bGQgc2V0IGBwYXJhbXNgIHRvIGJlIGB7cTogJ3NlYXJjaHN0cicsIG9yZGVyYnk6ICctbmFtZSd9YC5cbiAqXG4gKiAjIyMgUmVnZXggcGFyYW1ldGVyIG1hdGNoaW5nXG4gKlxuICogSWYgYW4gZXhwZWN0YXRpb24gb3IgZGVmaW5pdGlvbiB1c2VzIGEgKipyZWdleCoqIHRvIG1hdGNoIHRoZSBVUkwsIHlvdSBjYW4gcHJvdmlkZSBhbiBhcnJheSBvZiAqKmtleXMqKiB2aWEgYVxuICogYHBhcmFtc2AgYXJndW1lbnQuIFRoZSBpbmRleCBvZiBlYWNoICoqa2V5KiogaW4gdGhlIGFycmF5IHdpbGwgbWF0Y2ggdGhlIGluZGV4IG9mIGEgKipncm91cCoqIGluIHRoZVxuICogKipyZWdleCoqLlxuICpcbiAqIFRoZSBgcGFyYW1zYCBvYmplY3QgaW4gdGhlICoqY2FsbGJhY2sqKiB3aWxsIG5vdyBoYXZlIHByb3BlcnRpZXMgd2l0aCB0aGVzZSBrZXlzLCB3aGljaCBob2xkIHRoZSB2YWx1ZSBvZiB0aGVcbiAqIGNvcnJlc3BvbmRpbmcgKipncm91cCoqIGluIHRoZSAqKnJlZ2V4KiouXG4gKlxuICogVGhpcyBhbHNvIGFwcGxpZXMgdG8gdGhlIGB3aGVuYCBhbmQgYGV4cGVjdGAgc2hvcnRjdXQgbWV0aG9kcy5cbiAqXG4gKlxuICogYGBganNcbiAqICAgJGh0dHBCYWNrZW5kLmV4cGVjdCgnR0VUJywgL1xcL3VzZXJcXC8oLispLywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIFsnaWQnXSlcbiAqICAgICAucmVzcG9uZChmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcGFyYW1zKSB7XG4gKiAgICAgICAvLyBmb3IgcmVxdWVzdGVkIHVybCBvZiAnL3VzZXIvMTIzNCcgcGFyYW1zIGlzIHtpZDogJzEyMzQnfVxuICogICAgIH0pO1xuICpcbiAqICAgJGh0dHBCYWNrZW5kLndoZW5QQVRDSCgvXFwvdXNlclxcLyguKylcXC9hcnRpY2xlXFwvKC4rKS8sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBbJ3VzZXInLCAnYXJ0aWNsZSddKVxuICogICAgIC5yZXNwb25kKGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCBwYXJhbXMpIHtcbiAqICAgICAgIC8vIGZvciB1cmwgb2YgJy91c2VyLzEyMzQvYXJ0aWNsZS81NjcnIHBhcmFtcyBpcyB7dXNlcjogJzEyMzQnLCBhcnRpY2xlOiAnNTY3J31cbiAqICAgICB9KTtcbiAqIGBgYFxuICpcbiAqICMjIE1hdGNoaW5nIHJvdXRlIHJlcXVlc3RzXG4gKlxuICogRm9yIGV4dHJhIGNvbnZlbmllbmNlLCBgd2hlblJvdXRlYCBhbmQgYGV4cGVjdFJvdXRlYCBzaG9ydGN1dHMgYXJlIGF2YWlsYWJsZS4gVGhlc2UgbWV0aG9kcyBvZmZlciBjb2xvblxuICogZGVsaW1pdGVkIG1hdGNoaW5nIG9mIHRoZSB1cmwgcGF0aCwgaWdub3JpbmcgdGhlIHF1ZXJ5IHN0cmluZy4gVGhpcyBhbGxvd3MgZGVjbGFyYXRpb25zXG4gKiBzaW1pbGFyIHRvIGhvdyBhcHBsaWNhdGlvbiByb3V0ZXMgYXJlIGNvbmZpZ3VyZWQgd2l0aCBgJHJvdXRlUHJvdmlkZXJgLiBCZWNhdXNlIHRoZXNlIG1ldGhvZHMgY29udmVydFxuICogdGhlIGRlZmluaXRpb24gdXJsIHRvIHJlZ2V4LCBkZWNsYXJhdGlvbiBvcmRlciBpcyBpbXBvcnRhbnQuIENvbWJpbmVkIHdpdGggcXVlcnkgcGFyYW1ldGVyIHBhcnNpbmcsXG4gKiB0aGUgZm9sbG93aW5nIGlzIHBvc3NpYmxlOlxuICpcbiAgYGBganNcbiAgICAkaHR0cEJhY2tlbmQud2hlblJvdXRlKCdHRVQnLCAnL3VzZXJzLzppZCcpXG4gICAgICAucmVzcG9uZChmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBbMjAwLCBNb2NrVXNlckxpc3RbTnVtYmVyKHBhcmFtcy5pZCldXTtcbiAgICAgIH0pO1xuXG4gICAgJGh0dHBCYWNrZW5kLndoZW5Sb3V0ZSgnR0VUJywgJy91c2VycycpXG4gICAgICAucmVzcG9uZChmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcGFyYW1zKSB7XG4gICAgICAgIHZhciB1c2VyTGlzdCA9IGFuZ3VsYXIuY29weShNb2NrVXNlckxpc3QpLFxuICAgICAgICAgIGRlZmF1bHRTb3J0ID0gJ2xhc3ROYW1lJyxcbiAgICAgICAgICBjb3VudCwgcGFnZXMsIGlzUHJldmlvdXMsIGlzTmV4dDtcblxuICAgICAgICAvLyBwYWdlZCBhcGkgcmVzcG9uc2UgJy92MS91c2Vycz9wYWdlPTInXG4gICAgICAgIHBhcmFtcy5wYWdlID0gTnVtYmVyKHBhcmFtcy5wYWdlKSB8fCAxO1xuXG4gICAgICAgIC8vIHF1ZXJ5IGZvciBsYXN0IG5hbWVzICcvdjEvdXNlcnM/cT1BcmNoZXInXG4gICAgICAgIGlmIChwYXJhbXMucSkge1xuICAgICAgICAgIHVzZXJMaXN0ID0gJGZpbHRlcignZmlsdGVyJykoe2xhc3ROYW1lOiBwYXJhbXMucX0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFnZXMgPSBNYXRoLmNlaWwodXNlckxpc3QubGVuZ3RoIC8gcGFnaW5nTGVuZ3RoKTtcbiAgICAgICAgaXNQcmV2aW91cyA9IHBhcmFtcy5wYWdlID4gMTtcbiAgICAgICAgaXNOZXh0ID0gcGFyYW1zLnBhZ2UgPCBwYWdlcztcblxuICAgICAgICByZXR1cm4gWzIwMCwge1xuICAgICAgICAgIGNvdW50OiAgICB1c2VyTGlzdC5sZW5ndGgsXG4gICAgICAgICAgcHJldmlvdXM6IGlzUHJldmlvdXMsXG4gICAgICAgICAgbmV4dDogICAgIGlzTmV4dCxcbiAgICAgICAgICAvLyBzb3J0IGZpZWxkIC0+ICcvdjEvdXNlcnM/c29ydEJ5PWZpcnN0TmFtZSdcbiAgICAgICAgICByZXN1bHRzOiAgJGZpbHRlcignb3JkZXJCeScpKHVzZXJMaXN0LCBwYXJhbXMuc29ydEJ5IHx8IGRlZmF1bHRTb3J0KVxuICAgICAgICAgICAgICAgICAgICAgIC5zcGxpY2UoKHBhcmFtcy5wYWdlIC0gMSkgKiBwYWdpbmdMZW5ndGgsIHBhZ2luZ0xlbmd0aClcbiAgICAgICAgfV07XG4gICAgICB9KTtcbiAgYGBgXG4gKi9cbmFuZ3VsYXIubW9jay4kaHR0cEJhY2tlbmREZWNvcmF0b3IgPVxuICBbJyRyb290U2NvcGUnLCAnJHRpbWVvdXQnLCAnJGRlbGVnYXRlJywgY3JlYXRlSHR0cEJhY2tlbmRNb2NrXTtcblxuLyoqXG4gKiBHZW5lcmFsIGZhY3RvcnkgZnVuY3Rpb24gZm9yICRodHRwQmFja2VuZCBtb2NrLlxuICogUmV0dXJucyBpbnN0YW5jZSBmb3IgdW5pdCB0ZXN0aW5nICh3aGVuIG5vIGFyZ3VtZW50cyBzcGVjaWZpZWQpOlxuICogICAtIHBhc3NpbmcgdGhyb3VnaCBpcyBkaXNhYmxlZFxuICogICAtIGF1dG8gZmx1c2hpbmcgaXMgZGlzYWJsZWRcbiAqXG4gKiBSZXR1cm5zIGluc3RhbmNlIGZvciBlMmUgdGVzdGluZyAod2hlbiBgJGRlbGVnYXRlYCBhbmQgYCRicm93c2VyYCBzcGVjaWZpZWQpOlxuICogICAtIHBhc3NpbmcgdGhyb3VnaCAoZGVsZWdhdGluZyByZXF1ZXN0IHRvIHJlYWwgYmFja2VuZCkgaXMgZW5hYmxlZFxuICogICAtIGF1dG8gZmx1c2hpbmcgaXMgZW5hYmxlZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0PX0gJGRlbGVnYXRlIFJlYWwgJGh0dHBCYWNrZW5kIGluc3RhbmNlIChhbGxvdyBwYXNzaW5nIHRocm91Z2ggaWYgc3BlY2lmaWVkKVxuICogQHBhcmFtIHtPYmplY3Q9fSAkYnJvd3NlciBBdXRvLWZsdXNoaW5nIGVuYWJsZWQgaWYgc3BlY2lmaWVkXG4gKiBAcmV0dXJuIHtPYmplY3R9IEluc3RhbmNlIG9mICRodHRwQmFja2VuZCBtb2NrXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUh0dHBCYWNrZW5kTW9jaygkcm9vdFNjb3BlLCAkdGltZW91dCwgJGRlbGVnYXRlLCAkYnJvd3Nlcikge1xuICB2YXIgZGVmaW5pdGlvbnMgPSBbXSxcbiAgICAgIGV4cGVjdGF0aW9ucyA9IFtdLFxuICAgICAgcmVzcG9uc2VzID0gW10sXG4gICAgICByZXNwb25zZXNQdXNoID0gYW5ndWxhci5iaW5kKHJlc3BvbnNlcywgcmVzcG9uc2VzLnB1c2gpLFxuICAgICAgY29weSA9IGFuZ3VsYXIuY29weSxcbiAgICAgIC8vIFdlIGNhY2hlIHRoZSBvcmlnaW5hbCBiYWNrZW5kIHNvIHRoYXQgaWYgYm90aCBuZ01vY2sgYW5kIG5nTW9ja0UyRSBvdmVycmlkZSB0aGVcbiAgICAgIC8vIHNlcnZpY2UgdGhlIG5nTW9ja0UyRSB2ZXJzaW9uIGNhbiBwYXNzIHRocm91Z2ggdG8gdGhlIHJlYWwgYmFja2VuZFxuICAgICAgb3JpZ2luYWxIdHRwQmFja2VuZCA9ICRkZWxlZ2F0ZS4kJG9yaWdpbmFsSHR0cEJhY2tlbmQgfHwgJGRlbGVnYXRlO1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlKHN0YXR1cywgZGF0YSwgaGVhZGVycywgc3RhdHVzVGV4dCkge1xuICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24oc3RhdHVzKSkgcmV0dXJuIHN0YXR1cztcblxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBhbmd1bGFyLmlzTnVtYmVyKHN0YXR1cylcbiAgICAgICAgICA/IFtzdGF0dXMsIGRhdGEsIGhlYWRlcnMsIHN0YXR1c1RleHQsICdjb21wbGV0ZSddXG4gICAgICAgICAgOiBbMjAwLCBzdGF0dXMsIGRhdGEsIGhlYWRlcnMsICdjb21wbGV0ZSddO1xuICAgIH07XG4gIH1cblxuICAvLyBUT0RPKHZvanRhKTogY2hhbmdlIHBhcmFtcyB0bzogbWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIGNhbGxiYWNrXG4gIGZ1bmN0aW9uICRodHRwQmFja2VuZChtZXRob2QsIHVybCwgZGF0YSwgY2FsbGJhY2ssIGhlYWRlcnMsIHRpbWVvdXQsIHdpdGhDcmVkZW50aWFscywgcmVzcG9uc2VUeXBlLCBldmVudEhhbmRsZXJzLCB1cGxvYWRFdmVudEhhbmRsZXJzKSB7XG5cbiAgICB2YXIgeGhyID0gbmV3IE1vY2tYaHIoKSxcbiAgICAgICAgZXhwZWN0YXRpb24gPSBleHBlY3RhdGlvbnNbMF0sXG4gICAgICAgIHdhc0V4cGVjdGVkID0gZmFsc2U7XG5cbiAgICB4aHIuJCRldmVudHMgPSBldmVudEhhbmRsZXJzO1xuICAgIHhoci51cGxvYWQuJCRldmVudHMgPSB1cGxvYWRFdmVudEhhbmRsZXJzO1xuXG4gICAgZnVuY3Rpb24gcHJldHR5UHJpbnQoZGF0YSkge1xuICAgICAgcmV0dXJuIChhbmd1bGFyLmlzU3RyaW5nKGRhdGEpIHx8IGFuZ3VsYXIuaXNGdW5jdGlvbihkYXRhKSB8fCBkYXRhIGluc3RhbmNlb2YgUmVnRXhwKVxuICAgICAgICAgID8gZGF0YVxuICAgICAgICAgIDogYW5ndWxhci50b0pzb24oZGF0YSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd3JhcFJlc3BvbnNlKHdyYXBwZWQpIHtcbiAgICAgIGlmICghJGJyb3dzZXIgJiYgdGltZW91dCkge1xuICAgICAgICBpZiAodGltZW91dC50aGVuKSB7XG4gICAgICAgICAgdGltZW91dC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaGFuZGxlUHJlbWF0dXJlRW5kKGFuZ3VsYXIuaXNEZWZpbmVkKHRpbWVvdXQuJCR0aW1lb3V0SWQpID8gJ3RpbWVvdXQnIDogJ2Fib3J0Jyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBoYW5kbGVQcmVtYXR1cmVFbmQoJ3RpbWVvdXQnKTtcbiAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBoYW5kbGVSZXNwb25zZS5kZXNjcmlwdGlvbiA9IG1ldGhvZCArICcgJyArIHVybDtcbiAgICAgIHJldHVybiBoYW5kbGVSZXNwb25zZTtcblxuICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UoKSB7XG4gICAgICAgIHZhciByZXNwb25zZSA9IHdyYXBwZWQucmVzcG9uc2UobWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIHdyYXBwZWQucGFyYW1zKHVybCkpO1xuICAgICAgICB4aHIuJCRyZXNwSGVhZGVycyA9IHJlc3BvbnNlWzJdO1xuICAgICAgICBjYWxsYmFjayhjb3B5KHJlc3BvbnNlWzBdKSwgY29weShyZXNwb25zZVsxXSksIHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxcbiAgICAgICAgICAgICAgICAgY29weShyZXNwb25zZVszXSB8fCAnJyksIGNvcHkocmVzcG9uc2VbNF0pKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaGFuZGxlUHJlbWF0dXJlRW5kKHJlYXNvbikge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSByZXNwb25zZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGlmIChyZXNwb25zZXNbaV0gPT09IGhhbmRsZVJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXNwb25zZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgY2FsbGJhY2soLTEsIHVuZGVmaW5lZCwgJycsIHVuZGVmaW5lZCwgcmVhc29uKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChleHBlY3RhdGlvbiAmJiBleHBlY3RhdGlvbi5tYXRjaChtZXRob2QsIHVybCkpIHtcbiAgICAgIGlmICghZXhwZWN0YXRpb24ubWF0Y2hEYXRhKGRhdGEpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgJyArIGV4cGVjdGF0aW9uICsgJyB3aXRoIGRpZmZlcmVudCBkYXRhXFxuJyArXG4gICAgICAgICAgICAnRVhQRUNURUQ6ICcgKyBwcmV0dHlQcmludChleHBlY3RhdGlvbi5kYXRhKSArICdcXG5HT1Q6ICAgICAgJyArIGRhdGEpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWV4cGVjdGF0aW9uLm1hdGNoSGVhZGVycyhoZWFkZXJzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkICcgKyBleHBlY3RhdGlvbiArICcgd2l0aCBkaWZmZXJlbnQgaGVhZGVyc1xcbicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0VYUEVDVEVEOiAnICsgcHJldHR5UHJpbnQoZXhwZWN0YXRpb24uaGVhZGVycykgKyAnXFxuR09UOiAgICAgICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldHR5UHJpbnQoaGVhZGVycykpO1xuICAgICAgfVxuXG4gICAgICBleHBlY3RhdGlvbnMuc2hpZnQoKTtcblxuICAgICAgaWYgKGV4cGVjdGF0aW9uLnJlc3BvbnNlKSB7XG4gICAgICAgIHJlc3BvbnNlcy5wdXNoKHdyYXBSZXNwb25zZShleHBlY3RhdGlvbikpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB3YXNFeHBlY3RlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGkgPSAtMSwgZGVmaW5pdGlvbjtcbiAgICB3aGlsZSAoKGRlZmluaXRpb24gPSBkZWZpbml0aW9uc1srK2ldKSkge1xuICAgICAgaWYgKGRlZmluaXRpb24ubWF0Y2gobWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMgfHwge30pKSB7XG4gICAgICAgIGlmIChkZWZpbml0aW9uLnJlc3BvbnNlKSB7XG4gICAgICAgICAgLy8gaWYgJGJyb3dzZXIgc3BlY2lmaWVkLCB3ZSBkbyBhdXRvIGZsdXNoIGFsbCByZXF1ZXN0c1xuICAgICAgICAgICgkYnJvd3NlciA/ICRicm93c2VyLmRlZmVyIDogcmVzcG9uc2VzUHVzaCkod3JhcFJlc3BvbnNlKGRlZmluaXRpb24pKTtcbiAgICAgICAgfSBlbHNlIGlmIChkZWZpbml0aW9uLnBhc3NUaHJvdWdoKSB7XG4gICAgICAgICAgb3JpZ2luYWxIdHRwQmFja2VuZChtZXRob2QsIHVybCwgZGF0YSwgY2FsbGJhY2ssIGhlYWRlcnMsIHRpbWVvdXQsIHdpdGhDcmVkZW50aWFscywgcmVzcG9uc2VUeXBlLCBldmVudEhhbmRsZXJzLCB1cGxvYWRFdmVudEhhbmRsZXJzKTtcbiAgICAgICAgfSBlbHNlIHRocm93IG5ldyBFcnJvcignTm8gcmVzcG9uc2UgZGVmaW5lZCAhJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGVycm9yID0gd2FzRXhwZWN0ZWQgP1xuICAgICAgICBuZXcgRXJyb3IoJ05vIHJlc3BvbnNlIGRlZmluZWQgIScpIDpcbiAgICAgICAgbmV3IEVycm9yKCdVbmV4cGVjdGVkIHJlcXVlc3Q6ICcgKyBtZXRob2QgKyAnICcgKyB1cmwgKyAnXFxuJyArXG4gICAgICAgICAgICAgICAgICAoZXhwZWN0YXRpb24gPyAnRXhwZWN0ZWQgJyArIGV4cGVjdGF0aW9uIDogJ05vIG1vcmUgcmVxdWVzdCBleHBlY3RlZCcpKTtcblxuICAgIC8vIEluIGFkZGl0aW9uIHRvIGJlIGJlaW5nIGNvbnZlcnRlZCB0byBhIHJlamVjdGlvbiwgdGhpcyBlcnJvciBhbHNvIG5lZWRzIHRvIGJlIHBhc3NlZCB0b1xuICAgIC8vIHRoZSAkZXhjZXB0aW9uSGFuZGxlciBhbmQgYmUgcmV0aHJvd24gKHNvIHRoYXQgdGhlIHRlc3QgZmFpbHMpLlxuICAgIGVycm9yLiQkcGFzc1RvRXhjZXB0aW9uSGFuZGxlciA9IHRydWU7XG5cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZCBIVFRQIG1ldGhvZC5cbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKSk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXNcbiAgICogICBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLlxuICAgKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycyBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGh0dHAgaGVhZGVyXG4gICAqICAgb2JqZWN0IGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGhlYWRlcnMgbWF0Y2ggdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqICAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICpcbiAgICogIC0gcmVzcG9uZCDigJNcbiAgICogICAgICBgYGBqc1xuICAgKiAgICAgIHtmdW5jdGlvbihbc3RhdHVzLF0gZGF0YVssIGhlYWRlcnMsIHN0YXR1c1RleHRdKVxuICAgKiAgICAgIHwgZnVuY3Rpb24oZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIHBhcmFtcyl9XG4gICAqICAgICAgYGBgXG4gICAqICAgIOKAkyBUaGUgcmVzcG9uZCBtZXRob2QgdGFrZXMgYSBzZXQgb2Ygc3RhdGljIGRhdGEgdG8gYmUgcmV0dXJuZWQgb3IgYSBmdW5jdGlvbiB0aGF0IGNhblxuICAgKiAgICByZXR1cm4gYW4gYXJyYXkgY29udGFpbmluZyByZXNwb25zZSBzdGF0dXMgKG51bWJlciksIHJlc3BvbnNlIGRhdGEgKEFycmF5fE9iamVjdHxzdHJpbmcpLFxuICAgKiAgICByZXNwb25zZSBoZWFkZXJzIChPYmplY3QpLCBhbmQgdGhlIHRleHQgZm9yIHRoZSBzdGF0dXMgKHN0cmluZykuIFRoZSByZXNwb25kIG1ldGhvZCByZXR1cm5zXG4gICAqICAgIHRoZSBgcmVxdWVzdEhhbmRsZXJgIG9iamVjdCBmb3IgcG9zc2libGUgb3ZlcnJpZGVzLlxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLndoZW4gPSBmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywga2V5cykge1xuXG4gICAgYXNzZXJ0QXJnRGVmaW5lZChhcmd1bWVudHMsIDEsICd1cmwnKTtcblxuICAgIHZhciBkZWZpbml0aW9uID0gbmV3IE1vY2tIdHRwRXhwZWN0YXRpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIGtleXMpLFxuICAgICAgICBjaGFpbiA9IHtcbiAgICAgICAgICByZXNwb25kOiBmdW5jdGlvbihzdGF0dXMsIGRhdGEsIGhlYWRlcnMsIHN0YXR1c1RleHQpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24ucGFzc1Rocm91Z2ggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBkZWZpbml0aW9uLnJlc3BvbnNlID0gY3JlYXRlUmVzcG9uc2Uoc3RhdHVzLCBkYXRhLCBoZWFkZXJzLCBzdGF0dXNUZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBjaGFpbjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICBpZiAoJGJyb3dzZXIpIHtcbiAgICAgIGNoYWluLnBhc3NUaHJvdWdoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGRlZmluaXRpb24ucmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIGRlZmluaXRpb24ucGFzc1Rocm91Z2ggPSB0cnVlO1xuICAgICAgICByZXR1cm4gY2hhaW47XG4gICAgICB9O1xuICAgIH1cblxuICAgIGRlZmluaXRpb25zLnB1c2goZGVmaW5pdGlvbik7XG4gICAgcmV0dXJuIGNoYWluO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuR0VUXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgR0VUIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbihPYmplY3QpKT19IGhlYWRlcnMgSFRUUCBoZWFkZXJzLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuSEVBRFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gZm9yIEhFQUQgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5ERUxFVEVcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBERUxFVEUgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5QT1NUXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgUE9TVCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYHdoZW4oKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpPX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAgICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZykpPX0gZGF0YSBIVFRQIHJlcXVlc3QgYm9keSBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzXG4gICAqICAgZGF0YSBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgZGF0YSBpcyBhcyBleHBlY3RlZC5cbiAgICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5QVVRcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBQVVQgcmVxdWVzdHMuICBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKSk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXNcbiAgICogICBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLlxuICAgKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlbkpTT05QXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgSlNPTlAgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cbiAgY3JlYXRlU2hvcnRNZXRob2RzKCd3aGVuJyk7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5Sb3V0ZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gdGhhdCBjb21wYXJlcyBvbmx5IHdpdGggdGhlIHJlcXVlc3RlZCByb3V0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZCBIVFRQIG1ldGhvZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBIVFRQIHVybCBzdHJpbmcgdGhhdCBzdXBwb3J0cyBjb2xvbiBwYXJhbSBtYXRjaGluZy5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLiBTZWUgI3doZW4gZm9yIG1vcmUgaW5mby5cbiAgICovXG4gICRodHRwQmFja2VuZC53aGVuUm91dGUgPSBmdW5jdGlvbihtZXRob2QsIHVybCkge1xuICAgIHZhciBwYXRoT2JqID0gcGFyc2VSb3V0ZSh1cmwpO1xuICAgIHJldHVybiAkaHR0cEJhY2tlbmQud2hlbihtZXRob2QsIHBhdGhPYmoucmVnZXhwLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcGF0aE9iai5rZXlzKTtcbiAgfTtcblxuICBmdW5jdGlvbiBwYXJzZVJvdXRlKHVybCkge1xuICAgIHZhciByZXQgPSB7XG4gICAgICByZWdleHA6IHVybFxuICAgIH0sXG4gICAga2V5cyA9IHJldC5rZXlzID0gW107XG5cbiAgICBpZiAoIXVybCB8fCAhYW5ndWxhci5pc1N0cmluZyh1cmwpKSByZXR1cm4gcmV0O1xuXG4gICAgdXJsID0gdXJsXG4gICAgICAucmVwbGFjZSgvKFsoKS5dKS9nLCAnXFxcXCQxJylcbiAgICAgIC5yZXBsYWNlKC8oXFwvKT86KFxcdyspKFs/Kl0pPy9nLCBmdW5jdGlvbihfLCBzbGFzaCwga2V5LCBvcHRpb24pIHtcbiAgICAgICAgdmFyIG9wdGlvbmFsID0gb3B0aW9uID09PSAnPycgPyBvcHRpb24gOiBudWxsO1xuICAgICAgICB2YXIgc3RhciA9IG9wdGlvbiA9PT0gJyonID8gb3B0aW9uIDogbnVsbDtcbiAgICAgICAga2V5cy5wdXNoKHsgbmFtZToga2V5LCBvcHRpb25hbDogISFvcHRpb25hbCB9KTtcbiAgICAgICAgc2xhc2ggPSBzbGFzaCB8fCAnJztcbiAgICAgICAgcmV0dXJuICcnXG4gICAgICAgICAgKyAob3B0aW9uYWwgPyAnJyA6IHNsYXNoKVxuICAgICAgICAgICsgJyg/OidcbiAgICAgICAgICArIChvcHRpb25hbCA/IHNsYXNoIDogJycpXG4gICAgICAgICAgKyAoc3RhciAmJiAnKC4rPyknIHx8ICcoW14vXSspJylcbiAgICAgICAgICArIChvcHRpb25hbCB8fCAnJylcbiAgICAgICAgICArICcpJ1xuICAgICAgICAgICsgKG9wdGlvbmFsIHx8ICcnKTtcbiAgICAgIH0pXG4gICAgICAucmVwbGFjZSgvKFsvJCpdKS9nLCAnXFxcXCQxJyk7XG5cbiAgICByZXQucmVnZXhwID0gbmV3IFJlZ0V4cCgnXicgKyB1cmwsICdpJyk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCNleHBlY3RcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgcmVxdWVzdCBleHBlY3RhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZCBIVFRQIG1ldGhvZC5cbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKXxPYmplY3QpPX0gZGF0YSBIVFRQIHJlcXVlc3QgYm9keSBvciBmdW5jdGlvbiB0aGF0XG4gICAqICByZWNlaXZlcyBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLCBvciBPYmplY3QgaWYgcmVxdWVzdCBib2R5XG4gICAqICBpcyBpbiBKU09OIGZvcm1hdC5cbiAgICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBodHRwIGhlYWRlclxuICAgKiAgIG9iamVjdCBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBoZWFkZXJzIG1hdGNoIHRoZSBjdXJyZW50IGV4cGVjdGF0aW9uLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICpcbiAgICogIC0gcmVzcG9uZCDigJNcbiAgICogICAgYGBgXG4gICAqICAgIHsgZnVuY3Rpb24oW3N0YXR1cyxdIGRhdGFbLCBoZWFkZXJzLCBzdGF0dXNUZXh0XSlcbiAgICogICAgfCBmdW5jdGlvbihmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcGFyYW1zKX1cbiAgICogICAgYGBgXG4gICAqICAgIOKAkyBUaGUgcmVzcG9uZCBtZXRob2QgdGFrZXMgYSBzZXQgb2Ygc3RhdGljIGRhdGEgdG8gYmUgcmV0dXJuZWQgb3IgYSBmdW5jdGlvbiB0aGF0IGNhblxuICAgKiAgICByZXR1cm4gYW4gYXJyYXkgY29udGFpbmluZyByZXNwb25zZSBzdGF0dXMgKG51bWJlciksIHJlc3BvbnNlIGRhdGEgKEFycmF5fE9iamVjdHxzdHJpbmcpLFxuICAgKiAgICByZXNwb25zZSBoZWFkZXJzIChPYmplY3QpLCBhbmQgdGhlIHRleHQgZm9yIHRoZSBzdGF0dXMgKHN0cmluZykuIFRoZSByZXNwb25kIG1ldGhvZCByZXR1cm5zXG4gICAqICAgIHRoZSBgcmVxdWVzdEhhbmRsZXJgIG9iamVjdCBmb3IgcG9zc2libGUgb3ZlcnJpZGVzLlxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLmV4cGVjdCA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCBrZXlzKSB7XG5cbiAgICBhc3NlcnRBcmdEZWZpbmVkKGFyZ3VtZW50cywgMSwgJ3VybCcpO1xuXG4gICAgdmFyIGV4cGVjdGF0aW9uID0gbmV3IE1vY2tIdHRwRXhwZWN0YXRpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIGtleXMpLFxuICAgICAgICBjaGFpbiA9IHtcbiAgICAgICAgICByZXNwb25kOiBmdW5jdGlvbihzdGF0dXMsIGRhdGEsIGhlYWRlcnMsIHN0YXR1c1RleHQpIHtcbiAgICAgICAgICAgIGV4cGVjdGF0aW9uLnJlc3BvbnNlID0gY3JlYXRlUmVzcG9uc2Uoc3RhdHVzLCBkYXRhLCBoZWFkZXJzLCBzdGF0dXNUZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBjaGFpbjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICBleHBlY3RhdGlvbnMucHVzaChleHBlY3RhdGlvbik7XG4gICAgcmV0dXJuIGNoYWluO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCNleHBlY3RHRVRcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgcmVxdWVzdCBleHBlY3RhdGlvbiBmb3IgR0VUIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgZXhwZWN0KClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3Q9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLiBTZWUgI2V4cGVjdCBmb3IgbW9yZSBpbmZvLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0SEVBRFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyByZXF1ZXN0IGV4cGVjdGF0aW9uIGZvciBIRUFEIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgZXhwZWN0KClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3Q9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqICAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2V4cGVjdERFTEVURVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyByZXF1ZXN0IGV4cGVjdGF0aW9uIGZvciBERUxFVEUgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGBleHBlY3QoKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpPX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAgICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdD19IGhlYWRlcnMgSFRUUCBoZWFkZXJzLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogICByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqICAgb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0UE9TVFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyByZXF1ZXN0IGV4cGVjdGF0aW9uIGZvciBQT1NUIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgZXhwZWN0KClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfE9iamVjdCk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXRcbiAgICogIHJlY2VpdmVzIGRhdGEgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGRhdGEgaXMgYXMgZXhwZWN0ZWQsIG9yIE9iamVjdCBpZiByZXF1ZXN0IGJvZHlcbiAgICogIGlzIGluIEpTT04gZm9ybWF0LlxuICAgKiBAcGFyYW0ge09iamVjdD19IGhlYWRlcnMgSFRUUCBoZWFkZXJzLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogICByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqICAgb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0UFVUXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IHJlcXVlc3QgZXhwZWN0YXRpb24gZm9yIFBVVCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYGV4cGVjdCgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKXxPYmplY3QpPX0gZGF0YSBIVFRQIHJlcXVlc3QgYm9keSBvciBmdW5jdGlvbiB0aGF0XG4gICAqICByZWNlaXZlcyBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLCBvciBPYmplY3QgaWYgcmVxdWVzdCBib2R5XG4gICAqICBpcyBpbiBKU09OIGZvcm1hdC5cbiAgICogQHBhcmFtIHtPYmplY3Q9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqICAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2V4cGVjdFBBVENIXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IHJlcXVlc3QgZXhwZWN0YXRpb24gZm9yIFBBVENIIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgZXhwZWN0KClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfE9iamVjdCk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXRcbiAgICogIHJlY2VpdmVzIGRhdGEgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGRhdGEgaXMgYXMgZXhwZWN0ZWQsIG9yIE9iamVjdCBpZiByZXF1ZXN0IGJvZHlcbiAgICogIGlzIGluIEpTT04gZm9ybWF0LlxuICAgKiBAcGFyYW0ge09iamVjdD19IGhlYWRlcnMgSFRUUCBoZWFkZXJzLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogICByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqICAgb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0SlNPTlBcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgcmVxdWVzdCBleHBlY3RhdGlvbiBmb3IgSlNPTlAgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGBleHBlY3QoKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpPX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYW4gdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqICAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG4gIGNyZWF0ZVNob3J0TWV0aG9kcygnZXhwZWN0Jyk7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2V4cGVjdFJvdXRlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IHJlcXVlc3QgZXhwZWN0YXRpb24gdGhhdCBjb21wYXJlcyBvbmx5IHdpdGggdGhlIHJlcXVlc3RlZCByb3V0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZCBIVFRQIG1ldGhvZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBIVFRQIHVybCBzdHJpbmcgdGhhdCBzdXBwb3J0cyBjb2xvbiBwYXJhbSBtYXRjaGluZy5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLiBTZWUgI2V4cGVjdCBmb3IgbW9yZSBpbmZvLlxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLmV4cGVjdFJvdXRlID0gZnVuY3Rpb24obWV0aG9kLCB1cmwpIHtcbiAgICB2YXIgcGF0aE9iaiA9IHBhcnNlUm91dGUodXJsKTtcbiAgICByZXR1cm4gJGh0dHBCYWNrZW5kLmV4cGVjdChtZXRob2QsIHBhdGhPYmoucmVnZXhwLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcGF0aE9iai5rZXlzKTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCNmbHVzaFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRmx1c2hlcyBwZW5kaW5nIHJlcXVlc3RzIHVzaW5nIHRoZSB0cmFpbmVkIHJlc3BvbnNlcy4gUmVxdWVzdHMgYXJlIGZsdXNoZWQgaW4gdGhlIG9yZGVyIHRoZXlcbiAgICogd2VyZSBtYWRlLCBidXQgaXQgaXMgYWxzbyBwb3NzaWJsZSB0byBza2lwIG9uZSBvciBtb3JlIHJlcXVlc3RzIChmb3IgZXhhbXBsZSB0byBoYXZlIHRoZW1cbiAgICogZmx1c2hlZCBsYXRlcikuIFRoaXMgaXMgdXNlZnVsIGZvciBzaW11bGF0aW5nIHNjZW5hcmlvcyB3aGVyZSByZXNwb25zZXMgYXJyaXZlIGZyb20gdGhlIHNlcnZlclxuICAgKiBpbiBhbnkgb3JkZXIuXG4gICAqXG4gICAqIElmIHRoZXJlIGFyZSBubyBwZW5kaW5nIHJlcXVlc3RzIHRvIGZsdXNoIHdoZW4gdGhlIG1ldGhvZCBpcyBjYWxsZWQsIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gKGFzXG4gICAqIHRoaXMgaXMgdHlwaWNhbGx5IGEgc2lnbiBvZiBwcm9ncmFtbWluZyBlcnJvcikuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gY291bnQgLSBOdW1iZXIgb2YgcmVzcG9uc2VzIHRvIGZsdXNoLiBJZiB1bmRlZmluZWQvbnVsbCwgYWxsIHBlbmRpbmcgcmVxdWVzdHNcbiAgICogICAgIChzdGFydGluZyBhZnRlciBgc2tpcGApIHdpbGwgYmUgZmx1c2hlZC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBbc2tpcD0wXSAtIE51bWJlciBvZiBwZW5kaW5nIHJlcXVlc3RzIHRvIHNraXAuIEZvciBleGFtcGxlLCBhIHZhbHVlIG9mIGA1YFxuICAgKiAgICAgd291bGQgc2tpcCB0aGUgZmlyc3QgNSBwZW5kaW5nIHJlcXVlc3RzIGFuZCBzdGFydCBmbHVzaGluZyBmcm9tIHRoZSA2dGggb253YXJkcy5cbiAgICovXG4gICRodHRwQmFja2VuZC5mbHVzaCA9IGZ1bmN0aW9uKGNvdW50LCBza2lwLCBkaWdlc3QpIHtcbiAgICBpZiAoZGlnZXN0ICE9PSBmYWxzZSkgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG5cbiAgICBza2lwID0gc2tpcCB8fCAwO1xuICAgIGlmIChza2lwID49IHJlc3BvbnNlcy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignTm8gcGVuZGluZyByZXF1ZXN0IHRvIGZsdXNoICEnKTtcblxuICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChjb3VudCkgJiYgY291bnQgIT09IG51bGwpIHtcbiAgICAgIHdoaWxlIChjb3VudC0tKSB7XG4gICAgICAgIHZhciBwYXJ0ID0gcmVzcG9uc2VzLnNwbGljZShza2lwLCAxKTtcbiAgICAgICAgaWYgKCFwYXJ0Lmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdObyBtb3JlIHBlbmRpbmcgcmVxdWVzdCB0byBmbHVzaCAhJyk7XG4gICAgICAgIHBhcnRbMF0oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgd2hpbGUgKHJlc3BvbnNlcy5sZW5ndGggPiBza2lwKSB7XG4gICAgICAgIHJlc3BvbnNlcy5zcGxpY2Uoc2tpcCwgMSlbMF0oKTtcbiAgICAgIH1cbiAgICB9XG4gICAgJGh0dHBCYWNrZW5kLnZlcmlmeU5vT3V0c3RhbmRpbmdFeHBlY3RhdGlvbihkaWdlc3QpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3ZlcmlmeU5vT3V0c3RhbmRpbmdFeHBlY3RhdGlvblxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVmVyaWZpZXMgdGhhdCBhbGwgb2YgdGhlIHJlcXVlc3RzIGRlZmluZWQgdmlhIHRoZSBgZXhwZWN0YCBhcGkgd2VyZSBtYWRlLiBJZiBhbnkgb2YgdGhlXG4gICAqIHJlcXVlc3RzIHdlcmUgbm90IG1hZGUsIHZlcmlmeU5vT3V0c3RhbmRpbmdFeHBlY3RhdGlvbiB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgKlxuICAgKiBUeXBpY2FsbHksIHlvdSB3b3VsZCBjYWxsIHRoaXMgbWV0aG9kIGZvbGxvd2luZyBlYWNoIHRlc3QgY2FzZSB0aGF0IGFzc2VydHMgcmVxdWVzdHMgdXNpbmcgYW5cbiAgICogXCJhZnRlckVhY2hcIiBjbGF1c2UuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqICAgYWZ0ZXJFYWNoKCRodHRwQmFja2VuZC52ZXJpZnlOb091dHN0YW5kaW5nRXhwZWN0YXRpb24pO1xuICAgKiBgYGBcbiAgICovXG4gICRodHRwQmFja2VuZC52ZXJpZnlOb091dHN0YW5kaW5nRXhwZWN0YXRpb24gPSBmdW5jdGlvbihkaWdlc3QpIHtcbiAgICBpZiAoZGlnZXN0ICE9PSBmYWxzZSkgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgaWYgKGV4cGVjdGF0aW9ucy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5zYXRpc2ZpZWQgcmVxdWVzdHM6ICcgKyBleHBlY3RhdGlvbnMuam9pbignLCAnKSk7XG4gICAgfVxuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3ZlcmlmeU5vT3V0c3RhbmRpbmdSZXF1ZXN0XG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBWZXJpZmllcyB0aGF0IHRoZXJlIGFyZSBubyBvdXRzdGFuZGluZyByZXF1ZXN0cyB0aGF0IG5lZWQgdG8gYmUgZmx1c2hlZC5cbiAgICpcbiAgICogVHlwaWNhbGx5LCB5b3Ugd291bGQgY2FsbCB0aGlzIG1ldGhvZCBmb2xsb3dpbmcgZWFjaCB0ZXN0IGNhc2UgdGhhdCBhc3NlcnRzIHJlcXVlc3RzIHVzaW5nIGFuXG4gICAqIFwiYWZ0ZXJFYWNoXCIgY2xhdXNlLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAgIGFmdGVyRWFjaCgkaHR0cEJhY2tlbmQudmVyaWZ5Tm9PdXRzdGFuZGluZ1JlcXVlc3QpO1xuICAgKiBgYGBcbiAgICovXG4gICRodHRwQmFja2VuZC52ZXJpZnlOb091dHN0YW5kaW5nUmVxdWVzdCA9IGZ1bmN0aW9uKGRpZ2VzdCkge1xuICAgIGlmIChkaWdlc3QgIT09IGZhbHNlKSAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAgICBpZiAocmVzcG9uc2VzLmxlbmd0aCkge1xuICAgICAgdmFyIHVuZmx1c2hlZERlc2NyaXB0aW9ucyA9IHJlc3BvbnNlcy5tYXAoZnVuY3Rpb24ocmVzKSB7IHJldHVybiByZXMuZGVzY3JpcHRpb247IH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmZsdXNoZWQgcmVxdWVzdHM6ICcgKyByZXNwb25zZXMubGVuZ3RoICsgJ1xcbiAgJyArXG4gICAgICAgICAgICAgICAgICAgICAgdW5mbHVzaGVkRGVzY3JpcHRpb25zLmpvaW4oJ1xcbiAgJykpO1xuICAgIH1cbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCNyZXNldEV4cGVjdGF0aW9uc1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVzZXRzIGFsbCByZXF1ZXN0IGV4cGVjdGF0aW9ucywgYnV0IHByZXNlcnZlcyBhbGwgYmFja2VuZCBkZWZpbml0aW9ucy4gVHlwaWNhbGx5LCB5b3Ugd291bGRcbiAgICogY2FsbCByZXNldEV4cGVjdGF0aW9ucyBkdXJpbmcgYSBtdWx0aXBsZS1waGFzZSB0ZXN0IHdoZW4geW91IHdhbnQgdG8gcmV1c2UgdGhlIHNhbWUgaW5zdGFuY2Ugb2ZcbiAgICogJGh0dHBCYWNrZW5kIG1vY2suXG4gICAqL1xuICAkaHR0cEJhY2tlbmQucmVzZXRFeHBlY3RhdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICBleHBlY3RhdGlvbnMubGVuZ3RoID0gMDtcbiAgICByZXNwb25zZXMubGVuZ3RoID0gMDtcbiAgfTtcblxuICAkaHR0cEJhY2tlbmQuJCRvcmlnaW5hbEh0dHBCYWNrZW5kID0gb3JpZ2luYWxIdHRwQmFja2VuZDtcblxuICByZXR1cm4gJGh0dHBCYWNrZW5kO1xuXG5cbiAgZnVuY3Rpb24gY3JlYXRlU2hvcnRNZXRob2RzKHByZWZpeCkge1xuICAgIGFuZ3VsYXIuZm9yRWFjaChbJ0dFVCcsICdERUxFVEUnLCAnSlNPTlAnLCAnSEVBRCddLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgJGh0dHBCYWNrZW5kW3ByZWZpeCArIG1ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGhlYWRlcnMsIGtleXMpIHtcbiAgICAgICAgYXNzZXJ0QXJnRGVmaW5lZChhcmd1bWVudHMsIDAsICd1cmwnKTtcblxuICAgICAgICAvLyBDaGFuZ2UgdXJsIHRvIGBudWxsYCBpZiBgdW5kZWZpbmVkYCB0byBzdG9wIGl0IHRocm93aW5nIGFuIGV4Y2VwdGlvbiBmdXJ0aGVyIGRvd25cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQodXJsKSkgdXJsID0gbnVsbDtcblxuICAgICAgIHJldHVybiAkaHR0cEJhY2tlbmRbcHJlZml4XShtZXRob2QsIHVybCwgdW5kZWZpbmVkLCBoZWFkZXJzLCBrZXlzKTtcbiAgICAgfTtcbiAgICB9KTtcblxuICAgIGFuZ3VsYXIuZm9yRWFjaChbJ1BVVCcsICdQT1NUJywgJ1BBVENIJ10sIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgJGh0dHBCYWNrZW5kW3ByZWZpeCArIG1ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGRhdGEsIGhlYWRlcnMsIGtleXMpIHtcbiAgICAgICAgYXNzZXJ0QXJnRGVmaW5lZChhcmd1bWVudHMsIDAsICd1cmwnKTtcblxuICAgICAgICAvLyBDaGFuZ2UgdXJsIHRvIGBudWxsYCBpZiBgdW5kZWZpbmVkYCB0byBzdG9wIGl0IHRocm93aW5nIGFuIGV4Y2VwdGlvbiBmdXJ0aGVyIGRvd25cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQodXJsKSkgdXJsID0gbnVsbDtcblxuICAgICAgICByZXR1cm4gJGh0dHBCYWNrZW5kW3ByZWZpeF0obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIGtleXMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRBcmdEZWZpbmVkKGFyZ3MsIGluZGV4LCBuYW1lKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA+IGluZGV4ICYmIGFuZ3VsYXIuaXNVbmRlZmluZWQoYXJnc1tpbmRleF0pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmRlZmluZWQgYXJndW1lbnQgYCcgKyBuYW1lICsgJ2A7IHRoZSBhcmd1bWVudCBpcyBwcm92aWRlZCBidXQgbm90IGRlZmluZWQnKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIE1vY2tIdHRwRXhwZWN0YXRpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIGtleXMpIHtcblxuICBmdW5jdGlvbiBnZXRVcmxQYXJhbXModSkge1xuICAgIHZhciBwYXJhbXMgPSB1LnNsaWNlKHUuaW5kZXhPZignPycpICsgMSkuc3BsaXQoJyYnKTtcbiAgICByZXR1cm4gcGFyYW1zLnNvcnQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXBhcmVVcmwodSkge1xuICAgIHJldHVybiAodXJsLnNsaWNlKDAsIHVybC5pbmRleE9mKCc/JykpID09PSB1LnNsaWNlKDAsIHUuaW5kZXhPZignPycpKSAmJlxuICAgICAgZ2V0VXJsUGFyYW1zKHVybCkuam9pbigpID09PSBnZXRVcmxQYXJhbXModSkuam9pbigpKTtcbiAgfVxuXG4gIHRoaXMuZGF0YSA9IGRhdGE7XG4gIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG5cbiAgdGhpcy5tYXRjaCA9IGZ1bmN0aW9uKG0sIHUsIGQsIGgpIHtcbiAgICBpZiAobWV0aG9kICE9PSBtKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCF0aGlzLm1hdGNoVXJsKHUpKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGQpICYmICF0aGlzLm1hdGNoRGF0YShkKSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChoKSAmJiAhdGhpcy5tYXRjaEhlYWRlcnMoaCkpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICB0aGlzLm1hdGNoVXJsID0gZnVuY3Rpb24odSkge1xuICAgIGlmICghdXJsKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKHVybC50ZXN0KSkgcmV0dXJuIHVybC50ZXN0KHUpO1xuICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24odXJsKSkgcmV0dXJuIHVybCh1KTtcbiAgICByZXR1cm4gKHVybCA9PT0gdSB8fCBjb21wYXJlVXJsKHUpKTtcbiAgfTtcblxuICB0aGlzLm1hdGNoSGVhZGVycyA9IGZ1bmN0aW9uKGgpIHtcbiAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZChoZWFkZXJzKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbihoZWFkZXJzKSkgcmV0dXJuIGhlYWRlcnMoaCk7XG4gICAgcmV0dXJuIGFuZ3VsYXIuZXF1YWxzKGhlYWRlcnMsIGgpO1xuICB9O1xuXG4gIHRoaXMubWF0Y2hEYXRhID0gZnVuY3Rpb24oZCkge1xuICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKGRhdGEpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoZGF0YSAmJiBhbmd1bGFyLmlzRnVuY3Rpb24oZGF0YS50ZXN0KSkgcmV0dXJuIGRhdGEudGVzdChkKTtcbiAgICBpZiAoZGF0YSAmJiBhbmd1bGFyLmlzRnVuY3Rpb24oZGF0YSkpIHJldHVybiBkYXRhKGQpO1xuICAgIGlmIChkYXRhICYmICFhbmd1bGFyLmlzU3RyaW5nKGRhdGEpKSB7XG4gICAgICByZXR1cm4gYW5ndWxhci5lcXVhbHMoYW5ndWxhci5mcm9tSnNvbihhbmd1bGFyLnRvSnNvbihkYXRhKSksIGFuZ3VsYXIuZnJvbUpzb24oZCkpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXFlcWVxXG4gICAgcmV0dXJuIGRhdGEgPT0gZDtcbiAgfTtcblxuICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG1ldGhvZCArICcgJyArIHVybDtcbiAgfTtcblxuICB0aGlzLnBhcmFtcyA9IGZ1bmN0aW9uKHUpIHtcbiAgICByZXR1cm4gYW5ndWxhci5leHRlbmQocGFyc2VRdWVyeSgpLCBwYXRoUGFyYW1zKCkpO1xuXG4gICAgZnVuY3Rpb24gcGF0aFBhcmFtcygpIHtcbiAgICAgIHZhciBrZXlPYmogPSB7fTtcbiAgICAgIGlmICghdXJsIHx8ICFhbmd1bGFyLmlzRnVuY3Rpb24odXJsLnRlc3QpIHx8ICFrZXlzIHx8IGtleXMubGVuZ3RoID09PSAwKSByZXR1cm4ga2V5T2JqO1xuXG4gICAgICB2YXIgbSA9IHVybC5leGVjKHUpO1xuICAgICAgaWYgKCFtKSByZXR1cm4ga2V5T2JqO1xuICAgICAgZm9yICh2YXIgaSA9IDEsIGxlbiA9IG0ubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaSAtIDFdO1xuICAgICAgICB2YXIgdmFsID0gbVtpXTtcbiAgICAgICAgaWYgKGtleSAmJiB2YWwpIHtcbiAgICAgICAgICBrZXlPYmpba2V5Lm5hbWUgfHwga2V5XSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ga2V5T2JqO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlUXVlcnkoKSB7XG4gICAgICB2YXIgb2JqID0ge30sIGtleV92YWx1ZSwga2V5LFxuICAgICAgICAgIHF1ZXJ5U3RyID0gdS5pbmRleE9mKCc/JykgPiAtMVxuICAgICAgICAgID8gdS5zdWJzdHJpbmcodS5pbmRleE9mKCc/JykgKyAxKVxuICAgICAgICAgIDogJyc7XG5cbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChxdWVyeVN0ci5zcGxpdCgnJicpLCBmdW5jdGlvbihrZXlWYWx1ZSkge1xuICAgICAgICBpZiAoa2V5VmFsdWUpIHtcbiAgICAgICAgICBrZXlfdmFsdWUgPSBrZXlWYWx1ZS5yZXBsYWNlKC9cXCsvZywnJTIwJykuc3BsaXQoJz0nKTtcbiAgICAgICAgICBrZXkgPSB0cnlEZWNvZGVVUklDb21wb25lbnQoa2V5X3ZhbHVlWzBdKTtcbiAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoa2V5KSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IGFuZ3VsYXIuaXNEZWZpbmVkKGtleV92YWx1ZVsxXSkgPyB0cnlEZWNvZGVVUklDb21wb25lbnQoa2V5X3ZhbHVlWzFdKSA6IHRydWU7XG4gICAgICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgICAgIG9ialtrZXldID0gdmFsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzQXJyYXkob2JqW2tleV0pKSB7XG4gICAgICAgICAgICAgIG9ialtrZXldLnB1c2godmFsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9ialtrZXldID0gW29ialtrZXldLHZhbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRyeURlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElnbm9yZSBhbnkgaW52YWxpZCB1cmkgY29tcG9uZW50XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVNb2NrWGhyKCkge1xuICByZXR1cm4gbmV3IE1vY2tYaHIoKTtcbn1cblxuZnVuY3Rpb24gTW9ja1hocigpIHtcblxuICAvLyBoYWNrIGZvciB0ZXN0aW5nICRodHRwLCAkaHR0cEJhY2tlbmRcbiAgTW9ja1hoci4kJGxhc3RJbnN0YW5jZSA9IHRoaXM7XG5cbiAgdGhpcy5vcGVuID0gZnVuY3Rpb24obWV0aG9kLCB1cmwsIGFzeW5jKSB7XG4gICAgdGhpcy4kJG1ldGhvZCA9IG1ldGhvZDtcbiAgICB0aGlzLiQkdXJsID0gdXJsO1xuICAgIHRoaXMuJCRhc3luYyA9IGFzeW5jO1xuICAgIHRoaXMuJCRyZXFIZWFkZXJzID0ge307XG4gICAgdGhpcy4kJHJlc3BIZWFkZXJzID0ge307XG4gIH07XG5cbiAgdGhpcy5zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHRoaXMuJCRkYXRhID0gZGF0YTtcbiAgfTtcblxuICB0aGlzLnNldFJlcXVlc3RIZWFkZXIgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgdGhpcy4kJHJlcUhlYWRlcnNba2V5XSA9IHZhbHVlO1xuICB9O1xuXG4gIHRoaXMuZ2V0UmVzcG9uc2VIZWFkZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgLy8gdGhlIGxvb2t1cCBtdXN0IGJlIGNhc2UgaW5zZW5zaXRpdmUsXG4gICAgLy8gdGhhdCdzIHdoeSB3ZSB0cnkgdHdvIHF1aWNrIGxvb2t1cHMgZmlyc3QgYW5kIGZ1bGwgc2NhbiBsYXN0XG4gICAgdmFyIGhlYWRlciA9IHRoaXMuJCRyZXNwSGVhZGVyc1tuYW1lXTtcbiAgICBpZiAoaGVhZGVyKSByZXR1cm4gaGVhZGVyO1xuXG4gICAgbmFtZSA9IGFuZ3VsYXIuJCRsb3dlcmNhc2UobmFtZSk7XG4gICAgaGVhZGVyID0gdGhpcy4kJHJlc3BIZWFkZXJzW25hbWVdO1xuICAgIGlmIChoZWFkZXIpIHJldHVybiBoZWFkZXI7XG5cbiAgICBoZWFkZXIgPSB1bmRlZmluZWQ7XG4gICAgYW5ndWxhci5mb3JFYWNoKHRoaXMuJCRyZXNwSGVhZGVycywgZnVuY3Rpb24oaGVhZGVyVmFsLCBoZWFkZXJOYW1lKSB7XG4gICAgICBpZiAoIWhlYWRlciAmJiBhbmd1bGFyLiQkbG93ZXJjYXNlKGhlYWRlck5hbWUpID09PSBuYW1lKSBoZWFkZXIgPSBoZWFkZXJWYWw7XG4gICAgfSk7XG4gICAgcmV0dXJuIGhlYWRlcjtcbiAgfTtcblxuICB0aGlzLmdldEFsbFJlc3BvbnNlSGVhZGVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsaW5lcyA9IFtdO1xuXG4gICAgYW5ndWxhci5mb3JFYWNoKHRoaXMuJCRyZXNwSGVhZGVycywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgbGluZXMucHVzaChrZXkgKyAnOiAnICsgdmFsdWUpO1xuICAgIH0pO1xuICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbiAgfTtcblxuICB0aGlzLmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24odGhpcy5vbmFib3J0KSkge1xuICAgICAgdGhpcy5vbmFib3J0KCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFRoaXMgc2VjdGlvbiBzaW11bGF0ZXMgdGhlIGV2ZW50cyBvbiBhIHJlYWwgWEhSIG9iamVjdCAoYW5kIHRoZSB1cGxvYWQgb2JqZWN0KVxuICAvLyBXaGVuIHdlIGFyZSB0ZXN0aW5nICRodHRwQmFja2VuZCAoaW5zaWRlIHRoZSBBbmd1bGFySlMgcHJvamVjdCkgd2UgbWFrZSBwYXJ0aWFsIHVzZSBvZiB0aGlzXG4gIC8vIGJ1dCBzdG9yZSB0aGUgZXZlbnRzIGRpcmVjdGx5IG91cnNlbHZlcyBvbiBgJCRldmVudHNgLCBpbnN0ZWFkIG9mIGdvaW5nIHRocm91Z2ggdGhlIGBhZGRFdmVudExpc3RlbmVyYFxuICB0aGlzLiQkZXZlbnRzID0ge307XG4gIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKG5hbWUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQodGhpcy4kJGV2ZW50c1tuYW1lXSkpIHRoaXMuJCRldmVudHNbbmFtZV0gPSBbXTtcbiAgICB0aGlzLiQkZXZlbnRzW25hbWVdLnB1c2gobGlzdGVuZXIpO1xuICB9O1xuXG4gIHRoaXMudXBsb2FkID0ge1xuICAgICQkZXZlbnRzOiB7fSxcbiAgICBhZGRFdmVudExpc3RlbmVyOiB0aGlzLmFkZEV2ZW50TGlzdGVuZXJcbiAgfTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkdGltZW91dFxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVGhpcyBzZXJ2aWNlIGlzIGp1c3QgYSBzaW1wbGUgZGVjb3JhdG9yIGZvciB7QGxpbmsgbmcuJHRpbWVvdXQgJHRpbWVvdXR9IHNlcnZpY2VcbiAqIHRoYXQgYWRkcyBhIFwiZmx1c2hcIiBhbmQgXCJ2ZXJpZnlOb1BlbmRpbmdUYXNrc1wiIG1ldGhvZHMuXG4gKi9cblxuYW5ndWxhci5tb2NrLiRUaW1lb3V0RGVjb3JhdG9yID0gWyckZGVsZWdhdGUnLCAnJGJyb3dzZXInLCBmdW5jdGlvbigkZGVsZWdhdGUsICRicm93c2VyKSB7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHRpbWVvdXQjZmx1c2hcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEZsdXNoZXMgdGhlIHF1ZXVlIG9mIHBlbmRpbmcgdGFza3MuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gZGVsYXkgbWF4aW11bSB0aW1lb3V0IGFtb3VudCB0byBmbHVzaCB1cCB1bnRpbFxuICAgKi9cbiAgJGRlbGVnYXRlLmZsdXNoID0gZnVuY3Rpb24oZGVsYXkpIHtcbiAgICAkYnJvd3Nlci5kZWZlci5mbHVzaChkZWxheSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHRpbWVvdXQjdmVyaWZ5Tm9QZW5kaW5nVGFza3NcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFZlcmlmaWVzIHRoYXQgdGhlcmUgYXJlIG5vIHBlbmRpbmcgdGFza3MgdGhhdCBuZWVkIHRvIGJlIGZsdXNoZWQuXG4gICAqL1xuICAkZGVsZWdhdGUudmVyaWZ5Tm9QZW5kaW5nVGFza3MgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoJGJyb3dzZXIuZGVmZXJyZWRGbnMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RlZmVycmVkIHRhc2tzIHRvIGZsdXNoICgnICsgJGJyb3dzZXIuZGVmZXJyZWRGbnMubGVuZ3RoICsgJyk6ICcgK1xuICAgICAgICAgIGZvcm1hdFBlbmRpbmdUYXNrc0FzU3RyaW5nKCRicm93c2VyLmRlZmVycmVkRm5zKSk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGZvcm1hdFBlbmRpbmdUYXNrc0FzU3RyaW5nKHRhc2tzKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIGFuZ3VsYXIuZm9yRWFjaCh0YXNrcywgZnVuY3Rpb24odGFzaykge1xuICAgICAgcmVzdWx0LnB1c2goJ3tpZDogJyArIHRhc2suaWQgKyAnLCB0aW1lOiAnICsgdGFzay50aW1lICsgJ30nKTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQuam9pbignLCAnKTtcbiAgfVxuXG4gIHJldHVybiAkZGVsZWdhdGU7XG59XTtcblxuYW5ndWxhci5tb2NrLiRSQUZEZWNvcmF0b3IgPSBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSkge1xuICB2YXIgcmFmRm4gPSBmdW5jdGlvbihmbikge1xuICAgIHZhciBpbmRleCA9IHJhZkZuLnF1ZXVlLmxlbmd0aDtcbiAgICByYWZGbi5xdWV1ZS5wdXNoKGZuKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByYWZGbi5xdWV1ZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH07XG4gIH07XG5cbiAgcmFmRm4ucXVldWUgPSBbXTtcbiAgcmFmRm4uc3VwcG9ydGVkID0gJGRlbGVnYXRlLnN1cHBvcnRlZDtcblxuICByYWZGbi5mbHVzaCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChyYWZGbi5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gckFGIGNhbGxiYWNrcyBwcmVzZW50Jyk7XG4gICAgfVxuXG4gICAgdmFyIGxlbmd0aCA9IHJhZkZuLnF1ZXVlLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByYWZGbi5xdWV1ZVtpXSgpO1xuICAgIH1cblxuICAgIHJhZkZuLnF1ZXVlID0gcmFmRm4ucXVldWUuc2xpY2UoaSk7XG4gIH07XG5cbiAgcmV0dXJuIHJhZkZuO1xufV07XG5cbi8qKlxuICpcbiAqL1xudmFyIG9yaWdpbmFsUm9vdEVsZW1lbnQ7XG5hbmd1bGFyLm1vY2suJFJvb3RFbGVtZW50UHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcbiAgICBvcmlnaW5hbFJvb3RFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KCc8ZGl2IG5nLWFwcD48L2Rpdj4nKS5kYXRhKCckaW5qZWN0b3InLCAkaW5qZWN0b3IpO1xuICAgIHJldHVybiBvcmlnaW5hbFJvb3RFbGVtZW50O1xuICB9XTtcbn07XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRjb250cm9sbGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqIEEgZGVjb3JhdG9yIGZvciB7QGxpbmsgbmcuJGNvbnRyb2xsZXJ9IHdpdGggYWRkaXRpb25hbCBgYmluZGluZ3NgIHBhcmFtZXRlciwgdXNlZnVsIHdoZW4gdGVzdGluZ1xuICogY29udHJvbGxlcnMgb2YgZGlyZWN0aXZlcyB0aGF0IHVzZSB7QGxpbmsgJGNvbXBpbGUjLWJpbmR0b2NvbnRyb2xsZXItIGBiaW5kVG9Db250cm9sbGVyYH0uXG4gKlxuICogIyMgRXhhbXBsZVxuICpcbiAqIGBgYGpzXG4gKlxuICogLy8gRGlyZWN0aXZlIGRlZmluaXRpb24gLi4uXG4gKlxuICogbXlNb2QuZGlyZWN0aXZlKCdteURpcmVjdGl2ZScsIHtcbiAqICAgY29udHJvbGxlcjogJ015RGlyZWN0aXZlQ29udHJvbGxlcicsXG4gKiAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAqICAgICBuYW1lOiAnQCdcbiAqICAgfVxuICogfSk7XG4gKlxuICpcbiAqIC8vIENvbnRyb2xsZXIgZGVmaW5pdGlvbiAuLi5cbiAqXG4gKiBteU1vZC5jb250cm9sbGVyKCdNeURpcmVjdGl2ZUNvbnRyb2xsZXInLCBbJyRsb2cnLCBmdW5jdGlvbigkbG9nKSB7XG4gKiAgIHRoaXMubG9nID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgJGxvZy5pbmZvKHRoaXMubmFtZSk7XG4gKiAgIH07XG4gKiB9XSk7XG4gKlxuICpcbiAqIC8vIEluIGEgdGVzdCAuLi5cbiAqXG4gKiBkZXNjcmliZSgnbXlEaXJlY3RpdmVDb250cm9sbGVyJywgZnVuY3Rpb24oKSB7XG4gKiAgIGRlc2NyaWJlKCdsb2coKScsIGZ1bmN0aW9uKCkge1xuICogICAgIGl0KCdzaG91bGQgd3JpdGUgdGhlIGJvdW5kIG5hbWUgdG8gdGhlIGxvZycsIGluamVjdChmdW5jdGlvbigkY29udHJvbGxlciwgJGxvZykge1xuICogICAgICAgdmFyIGN0cmwgPSAkY29udHJvbGxlcignTXlEaXJlY3RpdmVDb250cm9sbGVyJywgeyAvKiBubyBsb2NhbHMgJiM0MjsvIH0sIHsgbmFtZTogJ0NsYXJrIEtlbnQnIH0pO1xuICogICAgICAgY3RybC5sb2coKTtcbiAqXG4gKiAgICAgICBleHBlY3QoY3RybC5uYW1lKS50b0VxdWFsKCdDbGFyayBLZW50Jyk7XG4gKiAgICAgICBleHBlY3QoJGxvZy5pbmZvLmxvZ3MpLnRvRXF1YWwoWydDbGFyayBLZW50J10pO1xuICogICAgIH0pKTtcbiAqICAgfSk7XG4gKiB9KTtcbiAqXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gY29uc3RydWN0b3IgSWYgY2FsbGVkIHdpdGggYSBmdW5jdGlvbiB0aGVuIGl0J3MgY29uc2lkZXJlZCB0byBiZSB0aGVcbiAqICAgIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgZnVuY3Rpb24uIE90aGVyd2lzZSBpdCdzIGNvbnNpZGVyZWQgdG8gYmUgYSBzdHJpbmcgd2hpY2ggaXMgdXNlZFxuICogICAgdG8gcmV0cmlldmUgdGhlIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgdXNpbmcgdGhlIGZvbGxvd2luZyBzdGVwczpcbiAqXG4gKiAgICAqIGNoZWNrIGlmIGEgY29udHJvbGxlciB3aXRoIGdpdmVuIG5hbWUgaXMgcmVnaXN0ZXJlZCB2aWEgYCRjb250cm9sbGVyUHJvdmlkZXJgXG4gKiAgICAqIGNoZWNrIGlmIGV2YWx1YXRpbmcgdGhlIHN0cmluZyBvbiB0aGUgY3VycmVudCBzY29wZSByZXR1cm5zIGEgY29uc3RydWN0b3JcbiAqXG4gKiAgICBUaGUgc3RyaW5nIGNhbiB1c2UgdGhlIGBjb250cm9sbGVyIGFzIHByb3BlcnR5YCBzeW50YXgsIHdoZXJlIHRoZSBjb250cm9sbGVyIGluc3RhbmNlIGlzIHB1Ymxpc2hlZFxuICogICAgYXMgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBvbiB0aGUgYHNjb3BlYDsgdGhlIGBzY29wZWAgbXVzdCBiZSBpbmplY3RlZCBpbnRvIGBsb2NhbHNgIHBhcmFtIGZvciB0aGlzXG4gKiAgICB0byB3b3JrIGNvcnJlY3RseS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbG9jYWxzIEluamVjdGlvbiBsb2NhbHMgZm9yIENvbnRyb2xsZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IGJpbmRpbmdzIFByb3BlcnRpZXMgdG8gYWRkIHRvIHRoZSBjb250cm9sbGVyIGluc3RhbmNlLiBUaGlzIGlzIHVzZWQgdG8gc2ltdWxhdGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGBiaW5kVG9Db250cm9sbGVyYCBmZWF0dXJlIGFuZCBzaW1wbGlmeSBjZXJ0YWluIGtpbmRzIG9mIHRlc3RzLlxuICogQHJldHVybiB7T2JqZWN0fSBJbnN0YW5jZSBvZiBnaXZlbiBjb250cm9sbGVyLlxuICovXG5mdW5jdGlvbiBjcmVhdGVDb250cm9sbGVyRGVjb3JhdG9yKCkge1xuICBhbmd1bGFyLm1vY2suJENvbnRyb2xsZXJEZWNvcmF0b3IgPSBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihleHByZXNzaW9uLCBsb2NhbHMsIGxhdGVyLCBpZGVudCkge1xuICAgICAgaWYgKGxhdGVyICYmIHR5cGVvZiBsYXRlciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgdmFyIGluc3RhbnRpYXRlID0gJGRlbGVnYXRlKGV4cHJlc3Npb24sIGxvY2FscywgdHJ1ZSwgaWRlbnQpO1xuICAgICAgICB2YXIgaW5zdGFuY2UgPSBpbnN0YW50aWF0ZSgpO1xuICAgICAgICBhbmd1bGFyLmV4dGVuZChpbnN0YW5jZSwgbGF0ZXIpO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gJGRlbGVnYXRlKGV4cHJlc3Npb24sIGxvY2FscywgbGF0ZXIsIGlkZW50KTtcbiAgICB9O1xuICB9XTtcblxuICByZXR1cm4gYW5ndWxhci5tb2NrLiRDb250cm9sbGVyRGVjb3JhdG9yO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkY29tcG9uZW50Q29udHJvbGxlclxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHNlcnZpY2UgdGhhdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgaW5zdGFuY2VzIG9mIGNvbXBvbmVudCBjb250cm9sbGVycy4gVXNlZnVsIGZvciB1bml0LXRlc3RpbmcuXG4gKlxuICogQmUgYXdhcmUgdGhhdCB0aGUgY29udHJvbGxlciB3aWxsIGJlIGluc3RhbnRpYXRlZCBhbmQgYXR0YWNoZWQgdG8gdGhlIHNjb3BlIGFzIHNwZWNpZmllZCBpblxuICogdGhlIGNvbXBvbmVudCBkZWZpbml0aW9uIG9iamVjdC4gSWYgeW91IGRvIG5vdCBwcm92aWRlIGEgYCRzY29wZWAgb2JqZWN0IGluIHRoZSBgbG9jYWxzYCBwYXJhbVxuICogdGhlbiB0aGUgaGVscGVyIHdpbGwgY3JlYXRlIGEgbmV3IGlzb2xhdGVkIHNjb3BlIGFzIGEgY2hpbGQgb2YgYCRyb290U2NvcGVgLlxuICpcbiAqIElmIHlvdSBhcmUgdXNpbmcgYCRlbGVtZW50YCBvciBgJGF0dHJzYCBpbiB0aGUgY29udHJvbGxlciwgbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlbSBhcyBgbG9jYWxzYC5cbiAqIFRoZSBgJGVsZW1lbnRgIG11c3QgYmUgYSBqcUxpdGUtd3JhcHBlZCBET00gZWxlbWVudCwgYW5kIGAkYXR0cnNgIHNob3VsZCBiZSBhbiBvYmplY3QgdGhhdFxuICogaGFzIGFsbCBwcm9wZXJ0aWVzIC8gZnVuY3Rpb25zIHRoYXQgeW91IGFyZSB1c2luZyBpbiB0aGUgY29udHJvbGxlci4gSWYgdGhpcyBpcyBnZXR0aW5nIHRvbyBjb21wbGV4LFxuICogeW91IHNob3VsZCBjb21waWxlIHRoZSBjb21wb25lbnQgaW5zdGVhZCBhbmQgYWNjZXNzIHRoZSBjb21wb25lbnQncyBjb250cm9sbGVyIHZpYSB0aGVcbiAqIHtAbGluayBhbmd1bGFyLmVsZW1lbnQjbWV0aG9kcyBgY29udHJvbGxlcmB9IGZ1bmN0aW9uLlxuICpcbiAqIFNlZSBhbHNvIHRoZSBzZWN0aW9uIG9uIHtAbGluayBndWlkZS9jb21wb25lbnQjdW5pdC10ZXN0aW5nLWNvbXBvbmVudC1jb250cm9sbGVycyB1bml0LXRlc3RpbmcgY29tcG9uZW50IGNvbnRyb2xsZXJzfVxuICogaW4gdGhlIGd1aWRlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnROYW1lIHRoZSBuYW1lIG9mIHRoZSBjb21wb25lbnQgd2hvc2UgY29udHJvbGxlciB3ZSB3YW50IHRvIGluc3RhbnRpYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbG9jYWxzIEluamVjdGlvbiBsb2NhbHMgZm9yIENvbnRyb2xsZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IGJpbmRpbmdzIFByb3BlcnRpZXMgdG8gYWRkIHRvIHRoZSBjb250cm9sbGVyIGJlZm9yZSBpbnZva2luZyB0aGUgY29uc3RydWN0b3IuIFRoaXMgaXMgdXNlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICB0byBzaW11bGF0ZSB0aGUgYGJpbmRUb0NvbnRyb2xsZXJgIGZlYXR1cmUgYW5kIHNpbXBsaWZ5IGNlcnRhaW4ga2luZHMgb2YgdGVzdHMuXG4gKiBAcGFyYW0ge3N0cmluZz19IGlkZW50IE92ZXJyaWRlIHRoZSBwcm9wZXJ0eSBuYW1lIHRvIHVzZSB3aGVuIGF0dGFjaGluZyB0aGUgY29udHJvbGxlciB0byB0aGUgc2NvcGUuXG4gKiBAcmV0dXJuIHtPYmplY3R9IEluc3RhbmNlIG9mIHJlcXVlc3RlZCBjb250cm9sbGVyLlxuICovXG5hbmd1bGFyLm1vY2suJENvbXBvbmVudENvbnRyb2xsZXJQcm92aWRlciA9IFsnJGNvbXBpbGVQcm92aWRlcicsXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50Q29udHJvbGxlclByb3ZpZGVyKCRjb21waWxlUHJvdmlkZXIpIHtcbiAgdGhpcy4kZ2V0ID0gWyckY29udHJvbGxlcicsJyRpbmplY3RvcicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJGNvbnRyb2xsZXIsICRpbmplY3RvciwgJHJvb3RTY29wZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAkY29tcG9uZW50Q29udHJvbGxlcihjb21wb25lbnROYW1lLCBsb2NhbHMsIGJpbmRpbmdzLCBpZGVudCkge1xuICAgICAgLy8gZ2V0IGFsbCBkaXJlY3RpdmVzIGFzc29jaWF0ZWQgdG8gdGhlIGNvbXBvbmVudCBuYW1lXG4gICAgICB2YXIgZGlyZWN0aXZlcyA9ICRpbmplY3Rvci5nZXQoY29tcG9uZW50TmFtZSArICdEaXJlY3RpdmUnKTtcbiAgICAgIC8vIGxvb2sgZm9yIHRob3NlIGRpcmVjdGl2ZXMgdGhhdCBhcmUgY29tcG9uZW50c1xuICAgICAgdmFyIGNhbmRpZGF0ZURpcmVjdGl2ZXMgPSBkaXJlY3RpdmVzLmZpbHRlcihmdW5jdGlvbihkaXJlY3RpdmVJbmZvKSB7XG4gICAgICAgIC8vIGNvbXBvbmVudHMgaGF2ZSBjb250cm9sbGVyLCBjb250cm9sbGVyQXMgYW5kIHJlc3RyaWN0OidFJ1xuICAgICAgICByZXR1cm4gZGlyZWN0aXZlSW5mby5jb250cm9sbGVyICYmIGRpcmVjdGl2ZUluZm8uY29udHJvbGxlckFzICYmIGRpcmVjdGl2ZUluZm8ucmVzdHJpY3QgPT09ICdFJztcbiAgICAgIH0pO1xuICAgICAgLy8gY2hlY2sgaWYgdmFsaWQgZGlyZWN0aXZlcyBmb3VuZFxuICAgICAgaWYgKGNhbmRpZGF0ZURpcmVjdGl2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29tcG9uZW50IGZvdW5kJyk7XG4gICAgICB9XG4gICAgICBpZiAoY2FuZGlkYXRlRGlyZWN0aXZlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vIG1hbnkgY29tcG9uZW50cyBmb3VuZCcpO1xuICAgICAgfVxuICAgICAgLy8gZ2V0IHRoZSBpbmZvIG9mIHRoZSBjb21wb25lbnRcbiAgICAgIHZhciBkaXJlY3RpdmVJbmZvID0gY2FuZGlkYXRlRGlyZWN0aXZlc1swXTtcbiAgICAgIC8vIGNyZWF0ZSBhIHNjb3BlIGlmIG5lZWRlZFxuICAgICAgbG9jYWxzID0gbG9jYWxzIHx8IHt9O1xuICAgICAgbG9jYWxzLiRzY29wZSA9IGxvY2Fscy4kc2NvcGUgfHwgJHJvb3RTY29wZS4kbmV3KHRydWUpO1xuICAgICAgcmV0dXJuICRjb250cm9sbGVyKGRpcmVjdGl2ZUluZm8uY29udHJvbGxlciwgbG9jYWxzLCBiaW5kaW5ncywgaWRlbnQgfHwgZGlyZWN0aXZlSW5mby5jb250cm9sbGVyQXMpO1xuICAgIH07XG4gIH1dO1xufV07XG5cblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBuZ01vY2tcbiAqIEBwYWNrYWdlTmFtZSBhbmd1bGFyLW1vY2tzXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgYG5nTW9ja2AgbW9kdWxlIHByb3ZpZGVzIHN1cHBvcnQgdG8gaW5qZWN0IGFuZCBtb2NrIEFuZ3VsYXJKUyBzZXJ2aWNlcyBpbnRvIHVuaXQgdGVzdHMuXG4gKiBJbiBhZGRpdGlvbiwgbmdNb2NrIGFsc28gZXh0ZW5kcyB2YXJpb3VzIGNvcmUgQW5ndWxhckpTIHNlcnZpY2VzIHN1Y2ggdGhhdCB0aGV5IGNhbiBiZVxuICogaW5zcGVjdGVkIGFuZCBjb250cm9sbGVkIGluIGEgc3luY2hyb25vdXMgbWFubmVyIHdpdGhpbiB0ZXN0IGNvZGUuXG4gKlxuICogQGluc3RhbGxhdGlvblxuICpcbiAqICBGaXJzdCwgZG93bmxvYWQgdGhlIGZpbGU6XG4gKiAgKiBbR29vZ2xlIENETl0oaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vc3BlZWQvbGlicmFyaWVzL2Rldmd1aWRlI2FuZ3VsYXJqcykgZS5nLlxuICogICAgYFwiLy9hamF4Lmdvb2dsZWFwaXMuY29tL2FqYXgvbGlicy9hbmd1bGFyanMvWC5ZLlovYW5ndWxhci1tb2Nrcy5qc1wiYFxuICogICogW05QTV0oaHR0cHM6Ly93d3cubnBtanMuY29tLykgZS5nLiBgbnBtIGluc3RhbGwgYW5ndWxhci1tb2Nrc0BYLlkuWmBcbiAqICAqIFtZYXJuXShodHRwczovL3lhcm5wa2cuY29tKSBlLmcuIGB5YXJuIGFkZCBhbmd1bGFyLW1vY2tzQFguWS5aYFxuICogICogW0Jvd2VyXShodHRwOi8vYm93ZXIuaW8pIGUuZy4gYGJvd2VyIGluc3RhbGwgYW5ndWxhci1tb2NrcyNYLlkuWmBcbiAqICAqIFtjb2RlLmFuZ3VsYXJqcy5vcmddKGh0dHBzOi8vY29kZS5hbmd1bGFyanMub3JnLykgKGRpc2NvdXJhZ2VkIGZvciBwcm9kdWN0aW9uIHVzZSkgIGUuZy5cbiAqICAgIGBcIi8vY29kZS5hbmd1bGFyanMub3JnL1guWS5aL2FuZ3VsYXItbW9ja3MuanNcImBcbiAqXG4gKiB3aGVyZSBYLlkuWiBpcyB0aGUgQW5ndWxhckpTIHZlcnNpb24geW91IGFyZSBydW5uaW5nLlxuICpcbiAqIFRoZW4sIGNvbmZpZ3VyZSB5b3VyIHRlc3QgcnVubmVyIHRvIGxvYWQgYGFuZ3VsYXItbW9ja3MuanNgIGFmdGVyIGBhbmd1bGFyLmpzYC5cbiAqIFRoaXMgZXhhbXBsZSB1c2VzIDxhIGhyZWY9XCJodHRwOi8va2FybWEtcnVubmVyLmdpdGh1Yi5pby9cIj5LYXJtYTwvYT46XG4gKlxuICogYGBgXG4gKiBjb25maWcuc2V0KHtcbiAqICAgZmlsZXM6IFtcbiAqICAgICAnYnVpbGQvYW5ndWxhci5qcycsIC8vIGFuZCBvdGhlciBtb2R1bGUgZmlsZXMgeW91IG5lZWRcbiAqICAgICAnYnVpbGQvYW5ndWxhci1tb2Nrcy5qcycsXG4gKiAgICAgJzxwYXRoL3RvL2FwcGxpY2F0aW9uL2ZpbGVzPicsXG4gKiAgICAgJzxwYXRoL3RvL3NwZWMvZmlsZXM+J1xuICogICBdXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEluY2x1ZGluZyB0aGUgYGFuZ3VsYXItbW9ja3MuanNgIGZpbGUgYXV0b21hdGljYWxseSBhZGRzIHRoZSBgbmdNb2NrYCBtb2R1bGUsIHNvIHlvdXIgdGVzdHNcbiAqICBhcmUgcmVhZHkgdG8gZ28hXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCduZ01vY2snLCBbJ25nJ10pLnByb3ZpZGVyKHtcbiAgJGJyb3dzZXI6IGFuZ3VsYXIubW9jay4kQnJvd3NlclByb3ZpZGVyLFxuICAkZXhjZXB0aW9uSGFuZGxlcjogYW5ndWxhci5tb2NrLiRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIsXG4gICRsb2c6IGFuZ3VsYXIubW9jay4kTG9nUHJvdmlkZXIsXG4gICRpbnRlcnZhbDogYW5ndWxhci5tb2NrLiRJbnRlcnZhbFByb3ZpZGVyLFxuICAkcm9vdEVsZW1lbnQ6IGFuZ3VsYXIubW9jay4kUm9vdEVsZW1lbnRQcm92aWRlcixcbiAgJGNvbXBvbmVudENvbnRyb2xsZXI6IGFuZ3VsYXIubW9jay4kQ29tcG9uZW50Q29udHJvbGxlclByb3ZpZGVyXG59KS5jb25maWcoWyckcHJvdmlkZScsICckY29tcGlsZVByb3ZpZGVyJywgZnVuY3Rpb24oJHByb3ZpZGUsICRjb21waWxlUHJvdmlkZXIpIHtcbiAgJHByb3ZpZGUuZGVjb3JhdG9yKCckdGltZW91dCcsIGFuZ3VsYXIubW9jay4kVGltZW91dERlY29yYXRvcik7XG4gICRwcm92aWRlLmRlY29yYXRvcignJCRyQUYnLCBhbmd1bGFyLm1vY2suJFJBRkRlY29yYXRvcik7XG4gICRwcm92aWRlLmRlY29yYXRvcignJHJvb3RTY29wZScsIGFuZ3VsYXIubW9jay4kUm9vdFNjb3BlRGVjb3JhdG9yKTtcbiAgJHByb3ZpZGUuZGVjb3JhdG9yKCckY29udHJvbGxlcicsIGNyZWF0ZUNvbnRyb2xsZXJEZWNvcmF0b3IoJGNvbXBpbGVQcm92aWRlcikpO1xuICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRodHRwQmFja2VuZCcsIGFuZ3VsYXIubW9jay4kaHR0cEJhY2tlbmREZWNvcmF0b3IpO1xufV0pLmluZm8oeyBhbmd1bGFyVmVyc2lvbjogJzEuNy4wJyB9KTtcblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBuZ01vY2tFMkVcbiAqIEBtb2R1bGUgbmdNb2NrRTJFXG4gKiBAcGFja2FnZU5hbWUgYW5ndWxhci1tb2Nrc1xuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVGhlIGBuZ01vY2tFMkVgIGlzIGFuIEFuZ3VsYXJKUyBtb2R1bGUgd2hpY2ggY29udGFpbnMgbW9ja3Mgc3VpdGFibGUgZm9yIGVuZC10by1lbmQgdGVzdGluZy5cbiAqIEN1cnJlbnRseSB0aGVyZSBpcyBvbmx5IG9uZSBtb2NrIHByZXNlbnQgaW4gdGhpcyBtb2R1bGUgLVxuICogdGhlIHtAbGluayBuZ01vY2tFMkUuJGh0dHBCYWNrZW5kIGUyZSAkaHR0cEJhY2tlbmR9IG1vY2suXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCduZ01vY2tFMkUnLCBbJ25nJ10pLmNvbmZpZyhbJyRwcm92aWRlJywgZnVuY3Rpb24oJHByb3ZpZGUpIHtcbiAgJHByb3ZpZGUuZGVjb3JhdG9yKCckaHR0cEJhY2tlbmQnLCBhbmd1bGFyLm1vY2suZTJlLiRodHRwQmFja2VuZERlY29yYXRvcik7XG59XSkuaW5mbyh7IGFuZ3VsYXJWZXJzaW9uOiAnMS43LjAnIH0pO1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmRcbiAqIEBtb2R1bGUgbmdNb2NrRTJFXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZha2UgSFRUUCBiYWNrZW5kIGltcGxlbWVudGF0aW9uIHN1aXRhYmxlIGZvciBlbmQtdG8tZW5kIHRlc3Rpbmcgb3IgYmFja2VuZC1sZXNzIGRldmVsb3BtZW50IG9mXG4gKiBhcHBsaWNhdGlvbnMgdGhhdCB1c2UgdGhlIHtAbGluayBuZy4kaHR0cCAkaHR0cCBzZXJ2aWNlfS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipOb3RlKio6IEZvciBmYWtlIGh0dHAgYmFja2VuZCBpbXBsZW1lbnRhdGlvbiBzdWl0YWJsZSBmb3IgdW5pdCB0ZXN0aW5nIHBsZWFzZSBzZWVcbiAqIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kIHVuaXQtdGVzdGluZyAkaHR0cEJhY2tlbmQgbW9ja30uXG4gKiA8L2Rpdj5cbiAqXG4gKiBUaGlzIGltcGxlbWVudGF0aW9uIGNhbiBiZSB1c2VkIHRvIHJlc3BvbmQgd2l0aCBzdGF0aWMgb3IgZHluYW1pYyByZXNwb25zZXMgdmlhIHRoZSBgd2hlbmAgYXBpXG4gKiBhbmQgaXRzIHNob3J0Y3V0cyAoYHdoZW5HRVRgLCBgd2hlblBPU1RgLCBldGMpIGFuZCBvcHRpb25hbGx5IHBhc3MgdGhyb3VnaCByZXF1ZXN0cyB0byB0aGVcbiAqIHJlYWwgJGh0dHBCYWNrZW5kIGZvciBzcGVjaWZpYyByZXF1ZXN0cyAoZS5nLiB0byBpbnRlcmFjdCB3aXRoIGNlcnRhaW4gcmVtb3RlIGFwaXMgb3IgdG8gZmV0Y2hcbiAqIHRlbXBsYXRlcyBmcm9tIGEgd2Vic2VydmVyKS5cbiAqXG4gKiBBcyBvcHBvc2VkIHRvIHVuaXQtdGVzdGluZywgaW4gYW4gZW5kLXRvLWVuZCB0ZXN0aW5nIHNjZW5hcmlvIG9yIGluIHNjZW5hcmlvIHdoZW4gYW4gYXBwbGljYXRpb25cbiAqIGlzIGJlaW5nIGRldmVsb3BlZCB3aXRoIHRoZSByZWFsIGJhY2tlbmQgYXBpIHJlcGxhY2VkIHdpdGggYSBtb2NrLCBpdCBpcyBvZnRlbiBkZXNpcmFibGUgZm9yXG4gKiBjZXJ0YWluIGNhdGVnb3J5IG9mIHJlcXVlc3RzIHRvIGJ5cGFzcyB0aGUgbW9jayBhbmQgaXNzdWUgYSByZWFsIGh0dHAgcmVxdWVzdCAoZS5nLiB0byBmZXRjaFxuICogdGVtcGxhdGVzIG9yIHN0YXRpYyBmaWxlcyBmcm9tIHRoZSB3ZWJzZXJ2ZXIpLiBUbyBjb25maWd1cmUgdGhlIGJhY2tlbmQgd2l0aCB0aGlzIGJlaGF2aW9yXG4gKiB1c2UgdGhlIGBwYXNzVGhyb3VnaGAgcmVxdWVzdCBoYW5kbGVyIG9mIGB3aGVuYCBpbnN0ZWFkIG9mIGByZXNwb25kYC5cbiAqXG4gKiBBZGRpdGlvbmFsbHksIHdlIGRvbid0IHdhbnQgdG8gbWFudWFsbHkgaGF2ZSB0byBmbHVzaCBtb2NrZWQgb3V0IHJlcXVlc3RzIGxpa2Ugd2UgZG8gZHVyaW5nIHVuaXRcbiAqIHRlc3RpbmcuIEZvciB0aGlzIHJlYXNvbiB0aGUgZTJlICRodHRwQmFja2VuZCBmbHVzaGVzIG1vY2tlZCBvdXQgcmVxdWVzdHNcbiAqIGF1dG9tYXRpY2FsbHksIGNsb3NlbHkgc2ltdWxhdGluZyB0aGUgYmVoYXZpb3Igb2YgdGhlIFhNTEh0dHBSZXF1ZXN0IG9iamVjdC5cbiAqXG4gKiBUbyBzZXR1cCB0aGUgYXBwbGljYXRpb24gdG8gcnVuIHdpdGggdGhpcyBodHRwIGJhY2tlbmQsIHlvdSBoYXZlIHRvIGNyZWF0ZSBhIG1vZHVsZSB0aGF0IGRlcGVuZHNcbiAqIG9uIHRoZSBgbmdNb2NrRTJFYCBhbmQgeW91ciBhcHBsaWNhdGlvbiBtb2R1bGVzIGFuZCBkZWZpbmVzIHRoZSBmYWtlIGJhY2tlbmQ6XG4gKlxuICogYGBganNcbiAqICAgdmFyIG15QXBwRGV2ID0gYW5ndWxhci5tb2R1bGUoJ215QXBwRGV2JywgWydteUFwcCcsICduZ01vY2tFMkUnXSk7XG4gKiAgIG15QXBwRGV2LnJ1bihmdW5jdGlvbigkaHR0cEJhY2tlbmQpIHtcbiAqICAgICB2YXIgcGhvbmVzID0gW3tuYW1lOiAncGhvbmUxJ30sIHtuYW1lOiAncGhvbmUyJ31dO1xuICpcbiAqICAgICAvLyByZXR1cm5zIHRoZSBjdXJyZW50IGxpc3Qgb2YgcGhvbmVzXG4gKiAgICAgJGh0dHBCYWNrZW5kLndoZW5HRVQoJy9waG9uZXMnKS5yZXNwb25kKHBob25lcyk7XG4gKlxuICogICAgIC8vIGFkZHMgYSBuZXcgcGhvbmUgdG8gdGhlIHBob25lcyBhcnJheVxuICogICAgICRodHRwQmFja2VuZC53aGVuUE9TVCgnL3Bob25lcycpLnJlc3BvbmQoZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEpIHtcbiAqICAgICAgIHZhciBwaG9uZSA9IGFuZ3VsYXIuZnJvbUpzb24oZGF0YSk7XG4gKiAgICAgICBwaG9uZXMucHVzaChwaG9uZSk7XG4gKiAgICAgICByZXR1cm4gWzIwMCwgcGhvbmUsIHt9XTtcbiAqICAgICB9KTtcbiAqICAgICAkaHR0cEJhY2tlbmQud2hlbkdFVCgvXlxcL3RlbXBsYXRlc1xcLy8pLnBhc3NUaHJvdWdoKCk7IC8vIFJlcXVlc3RzIGZvciB0ZW1wbGF0ZXMgYXJlIGhhbmRsZWQgYnkgdGhlIHJlYWwgc2VydmVyXG4gKiAgICAgLy8uLi5cbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiBBZnRlcndhcmRzLCBib290c3RyYXAgeW91ciBhcHAgd2l0aCB0aGlzIG5ldyBtb2R1bGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIDxleGFtcGxlIG5hbWU9XCJodHRwYmFja2VuZC1lMmUtdGVzdGluZ1wiIG1vZHVsZT1cIm15QXBwRTJFXCIgZGVwcz1cImFuZ3VsYXItbW9ja3MuanNcIj5cbiAqIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICAgdmFyIG15QXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJywgW10pO1xuICpcbiAqICAgbXlBcHAuY29udHJvbGxlcignTWFpbkN0cmwnLCBmdW5jdGlvbiBNYWluQ3RybCgkaHR0cCkge1xuICogICAgIHZhciBjdHJsID0gdGhpcztcbiAqXG4gKiAgICAgY3RybC5waG9uZXMgPSBbXTtcbiAqICAgICBjdHJsLm5ld1Bob25lID0ge1xuICogICAgICAgbmFtZTogJydcbiAqICAgICB9O1xuICpcbiAqICAgICBjdHJsLmdldFBob25lcyA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgJGh0dHAuZ2V0KCcvcGhvbmVzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICogICAgICAgICBjdHJsLnBob25lcyA9IHJlc3BvbnNlLmRhdGE7XG4gKiAgICAgICB9KTtcbiAqICAgICB9O1xuICpcbiAqICAgICBjdHJsLmFkZFBob25lID0gZnVuY3Rpb24ocGhvbmUpIHtcbiAqICAgICAgICRodHRwLnBvc3QoJy9waG9uZXMnLCBwaG9uZSkudGhlbihmdW5jdGlvbigpIHtcbiAqICAgICAgICAgY3RybC5uZXdQaG9uZSA9IHtuYW1lOiAnJ307XG4gKiAgICAgICAgIHJldHVybiBjdHJsLmdldFBob25lcygpO1xuICogICAgICAgfSk7XG4gKiAgICAgfTtcbiAqXG4gKiAgICAgY3RybC5nZXRQaG9uZXMoKTtcbiAqICAgfSk7XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwiZTJlLmpzXCI+XG4gKiAgIHZhciBteUFwcERldiA9IGFuZ3VsYXIubW9kdWxlKCdteUFwcEUyRScsIFsnbXlBcHAnLCAnbmdNb2NrRTJFJ10pO1xuICpcbiAqICAgbXlBcHBEZXYucnVuKGZ1bmN0aW9uKCRodHRwQmFja2VuZCkge1xuICogICAgIHZhciBwaG9uZXMgPSBbe25hbWU6ICdwaG9uZTEnfSwge25hbWU6ICdwaG9uZTInfV07XG4gKlxuICogICAgIC8vIHJldHVybnMgdGhlIGN1cnJlbnQgbGlzdCBvZiBwaG9uZXNcbiAqICAgICAkaHR0cEJhY2tlbmQud2hlbkdFVCgnL3Bob25lcycpLnJlc3BvbmQocGhvbmVzKTtcbiAqXG4gKiAgICAgLy8gYWRkcyBhIG5ldyBwaG9uZSB0byB0aGUgcGhvbmVzIGFycmF5XG4gKiAgICAgJGh0dHBCYWNrZW5kLndoZW5QT1NUKCcvcGhvbmVzJykucmVzcG9uZChmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSkge1xuICogICAgICAgdmFyIHBob25lID0gYW5ndWxhci5mcm9tSnNvbihkYXRhKTtcbiAqICAgICAgIHBob25lcy5wdXNoKHBob25lKTtcbiAqICAgICAgIHJldHVybiBbMjAwLCBwaG9uZSwge31dO1xuICogICAgIH0pO1xuICogICB9KTtcbiAqIDwvZmlsZT5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgIDxkaXYgbmctY29udHJvbGxlcj1cIk1haW5DdHJsIGFzICRjdHJsXCI+XG4gKiAgIDxmb3JtIG5hbWU9XCJuZXdQaG9uZUZvcm1cIiBuZy1zdWJtaXQ9XCIkY3RybC5hZGRQaG9uZSgkY3RybC5uZXdQaG9uZSlcIj5cbiAqICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIiRjdHJsLm5ld1Bob25lLm5hbWVcIj5cbiAqICAgICA8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiQWRkIFBob25lXCI+XG4gKiAgIDwvZm9ybT5cbiAqICAgPGgxPlBob25lczwvaDE+XG4gKiAgIDx1bD5cbiAqICAgICA8bGkgbmctcmVwZWF0PVwicGhvbmUgaW4gJGN0cmwucGhvbmVzXCI+e3twaG9uZS5uYW1lfX08L2xpPlxuICogICA8L3VsPlxuICogICA8L2Rpdj5cbiAqIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5cbiAqIEBtb2R1bGUgbmdNb2NrRTJFXG4gKiBAZGVzY3JpcHRpb25cbiAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgSFRUUCBtZXRob2QuXG4gKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZykpPX0gZGF0YSBIVFRQIHJlcXVlc3QgYm9keSBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzXG4gKiAgIGRhdGEgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGRhdGEgaXMgYXMgZXhwZWN0ZWQuXG4gKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycyBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGh0dHAgaGVhZGVyXG4gKiAgIG9iamVjdCBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBoZWFkZXJzIG1hdGNoIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICpcbiAqICAtIHJlc3BvbmQg4oCTXG4gKiAgICBgYGBcbiAqICAgIHsgZnVuY3Rpb24oW3N0YXR1cyxdIGRhdGFbLCBoZWFkZXJzLCBzdGF0dXNUZXh0XSlcbiAqICAgIHwgZnVuY3Rpb24oZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIHBhcmFtcyl9XG4gKiAgICBgYGBcbiAqICAgIOKAkyBUaGUgcmVzcG9uZCBtZXRob2QgdGFrZXMgYSBzZXQgb2Ygc3RhdGljIGRhdGEgdG8gYmUgcmV0dXJuZWQgb3IgYSBmdW5jdGlvbiB0aGF0IGNhbiByZXR1cm5cbiAqICAgIGFuIGFycmF5IGNvbnRhaW5pbmcgcmVzcG9uc2Ugc3RhdHVzIChudW1iZXIpLCByZXNwb25zZSBkYXRhIChBcnJheXxPYmplY3R8c3RyaW5nKSwgcmVzcG9uc2VcbiAqICAgIGhlYWRlcnMgKE9iamVjdCksIGFuZCB0aGUgdGV4dCBmb3IgdGhlIHN0YXR1cyAoc3RyaW5nKS5cbiAqICAtIHBhc3NUaHJvdWdoIOKAkyBge2Z1bmN0aW9uKCl9YCDigJMgQW55IHJlcXVlc3QgbWF0Y2hpbmcgYSBiYWNrZW5kIGRlZmluaXRpb24gd2l0aFxuICogICAgYHBhc3NUaHJvdWdoYCBoYW5kbGVyIHdpbGwgYmUgcGFzc2VkIHRocm91Z2ggdG8gdGhlIHJlYWwgYmFja2VuZCAoYW4gWEhSIHJlcXVlc3Qgd2lsbCBiZSBtYWRlXG4gKiAgICB0byB0aGUgc2VydmVyLilcbiAqICAtIEJvdGggbWV0aG9kcyByZXR1cm4gdGhlIGByZXF1ZXN0SGFuZGxlcmAgb2JqZWN0IGZvciBwb3NzaWJsZSBvdmVycmlkZXMuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlbkdFVFxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gZm9yIEdFVCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYHdoZW4oKWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5IRUFEXG4gKiBAbW9kdWxlIG5nTW9ja0UyRVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgSEVBRCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYHdoZW4oKWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5ERUxFVEVcbiAqIEBtb2R1bGUgbmdNb2NrRTJFXG4gKiBAZGVzY3JpcHRpb25cbiAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBERUxFVEUgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpPX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbihPYmplY3QpKT19IGhlYWRlcnMgSFRUUCBoZWFkZXJzLlxuICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBvblxuICogICB7QGxpbmsgbmdNb2NrLiRodHRwQmFja2VuZCAkaHR0cEJhY2tlbmQgbW9ja30uXG4gKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIGFuZCBgcGFzc1Rocm91Z2hgIG1ldGhvZHMgdGhhdFxuICogICBjb250cm9sIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlXG4gKiAgIGByZXNwb25kYCBvciBgcGFzc1Rocm91Z2hgIGFnYWluIGluIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuUE9TVFxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gZm9yIFBPU1QgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpPX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKSk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXNcbiAqICAgZGF0YSBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgZGF0YSBpcyBhcyBleHBlY3RlZC5cbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbihPYmplY3QpKT19IGhlYWRlcnMgSFRUUCBoZWFkZXJzLlxuICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBvblxuICogICB7QGxpbmsgbmdNb2NrLiRodHRwQmFja2VuZCAkaHR0cEJhY2tlbmQgbW9ja30uXG4gKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIGFuZCBgcGFzc1Rocm91Z2hgIG1ldGhvZHMgdGhhdFxuICogICBjb250cm9sIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlXG4gKiAgIGByZXNwb25kYCBvciBgcGFzc1Rocm91Z2hgIGFnYWluIGluIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuUFVUXG4gKiBAbW9kdWxlIG5nTW9ja0UyRVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgUFVUIHJlcXVlc3RzLiAgRm9yIG1vcmUgaW5mbyBzZWUgYHdoZW4oKWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpKT19IGRhdGEgSFRUUCByZXF1ZXN0IGJvZHkgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlc1xuICogICBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5QQVRDSFxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gZm9yIFBBVENIIHJlcXVlc3RzLiAgRm9yIG1vcmUgaW5mbyBzZWUgYHdoZW4oKWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpKT19IGRhdGEgSFRUUCByZXF1ZXN0IGJvZHkgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlc1xuICogICBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5KU09OUFxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gZm9yIEpTT05QIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICovXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuUm91dGVcbiAqIEBtb2R1bGUgbmdNb2NrRTJFXG4gKiBAZGVzY3JpcHRpb25cbiAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIHRoYXQgY29tcGFyZXMgb25seSB3aXRoIHRoZSByZXF1ZXN0ZWQgcm91dGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZCBIVFRQIG1ldGhvZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgSFRUUCB1cmwgc3RyaW5nIHRoYXQgc3VwcG9ydHMgY29sb24gcGFyYW0gbWF0Y2hpbmcuXG4gKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIGFuZCBgcGFzc1Rocm91Z2hgIG1ldGhvZHMgdGhhdFxuICogICBjb250cm9sIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlXG4gKiAgIGByZXNwb25kYCBvciBgcGFzc1Rocm91Z2hgIGFnYWluIGluIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAqL1xuYW5ndWxhci5tb2NrLmUyZSA9IHt9O1xuYW5ndWxhci5tb2NrLmUyZS4kaHR0cEJhY2tlbmREZWNvcmF0b3IgPVxuICBbJyRyb290U2NvcGUnLCAnJHRpbWVvdXQnLCAnJGRlbGVnYXRlJywgJyRicm93c2VyJywgY3JlYXRlSHR0cEJhY2tlbmRNb2NrXTtcblxuXG4vKipcbiAqIEBuZ2RvYyB0eXBlXG4gKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlXG4gKiBAbW9kdWxlIG5nTW9ja1xuICogQGRlc2NyaXB0aW9uXG4gKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBTY29wZX0gdHlwZSBkZWNvcmF0ZWQgd2l0aCBoZWxwZXIgbWV0aG9kcyB1c2VmdWwgZm9yIHRlc3RpbmcuIFRoZXNlXG4gKiBtZXRob2RzIGFyZSBhdXRvbWF0aWNhbGx5IGF2YWlsYWJsZSBvbiBhbnkge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgU2NvcGV9IGluc3RhbmNlIHdoZW5cbiAqIGBuZ01vY2tgIG1vZHVsZSBpcyBsb2FkZWQuXG4gKlxuICogSW4gYWRkaXRpb24gdG8gYWxsIHRoZSByZWd1bGFyIGBTY29wZWAgbWV0aG9kcywgdGhlIGZvbGxvd2luZyBoZWxwZXIgbWV0aG9kcyBhcmUgYXZhaWxhYmxlOlxuICovXG5hbmd1bGFyLm1vY2suJFJvb3RTY29wZURlY29yYXRvciA9IFsnJGRlbGVnYXRlJywgZnVuY3Rpb24oJGRlbGVnYXRlKSB7XG5cbiAgdmFyICRyb290U2NvcGVQcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoJGRlbGVnYXRlKTtcblxuICAkcm9vdFNjb3BlUHJvdG90eXBlLiRjb3VudENoaWxkU2NvcGVzID0gY291bnRDaGlsZFNjb3BlcztcbiAgJHJvb3RTY29wZVByb3RvdHlwZS4kY291bnRXYXRjaGVycyA9IGNvdW50V2F0Y2hlcnM7XG5cbiAgcmV0dXJuICRkZWxlZ2F0ZTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRjb3VudENoaWxkU2NvcGVzXG4gICAqIEBtb2R1bGUgbmdNb2NrXG4gICAqIEB0aGlzICRyb290U2NvcGUuU2NvcGVcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENvdW50cyBhbGwgdGhlIGRpcmVjdCBhbmQgaW5kaXJlY3QgY2hpbGQgc2NvcGVzIG9mIHRoZSBjdXJyZW50IHNjb3BlLlxuICAgKlxuICAgKiBUaGUgY3VycmVudCBzY29wZSBpcyBleGNsdWRlZCBmcm9tIHRoZSBjb3VudC4gVGhlIGNvdW50IGluY2x1ZGVzIGFsbCBpc29sYXRlIGNoaWxkIHNjb3Blcy5cbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn0gVG90YWwgbnVtYmVyIG9mIGNoaWxkIHNjb3Blcy5cbiAgICovXG4gIGZ1bmN0aW9uIGNvdW50Q2hpbGRTY29wZXMoKSB7XG4gICAgdmFyIGNvdW50ID0gMDsgLy8gZXhjbHVkZSB0aGUgY3VycmVudCBzY29wZVxuICAgIHZhciBwZW5kaW5nQ2hpbGRIZWFkcyA9IFt0aGlzLiQkY2hpbGRIZWFkXTtcbiAgICB2YXIgY3VycmVudFNjb3BlO1xuXG4gICAgd2hpbGUgKHBlbmRpbmdDaGlsZEhlYWRzLmxlbmd0aCkge1xuICAgICAgY3VycmVudFNjb3BlID0gcGVuZGluZ0NoaWxkSGVhZHMuc2hpZnQoKTtcblxuICAgICAgd2hpbGUgKGN1cnJlbnRTY29wZSkge1xuICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICBwZW5kaW5nQ2hpbGRIZWFkcy5wdXNoKGN1cnJlbnRTY29wZS4kJGNoaWxkSGVhZCk7XG4gICAgICAgIGN1cnJlbnRTY29wZSA9IGN1cnJlbnRTY29wZS4kJG5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb3VudDtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkY291bnRXYXRjaGVyc1xuICAgKiBAdGhpcyAkcm9vdFNjb3BlLlNjb3BlXG4gICAqIEBtb2R1bGUgbmdNb2NrXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDb3VudHMgYWxsIHRoZSB3YXRjaGVycyBvZiBkaXJlY3QgYW5kIGluZGlyZWN0IGNoaWxkIHNjb3BlcyBvZiB0aGUgY3VycmVudCBzY29wZS5cbiAgICpcbiAgICogVGhlIHdhdGNoZXJzIG9mIHRoZSBjdXJyZW50IHNjb3BlIGFyZSBpbmNsdWRlZCBpbiB0aGUgY291bnQgYW5kIHNvIGFyZSBhbGwgdGhlIHdhdGNoZXJzIG9mXG4gICAqIGlzb2xhdGUgY2hpbGQgc2NvcGVzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBUb3RhbCBudW1iZXIgb2Ygd2F0Y2hlcnMuXG4gICAqL1xuICBmdW5jdGlvbiBjb3VudFdhdGNoZXJzKCkge1xuICAgIHZhciBjb3VudCA9IHRoaXMuJCR3YXRjaGVycyA/IHRoaXMuJCR3YXRjaGVycy5sZW5ndGggOiAwOyAvLyBpbmNsdWRlIHRoZSBjdXJyZW50IHNjb3BlXG4gICAgdmFyIHBlbmRpbmdDaGlsZEhlYWRzID0gW3RoaXMuJCRjaGlsZEhlYWRdO1xuICAgIHZhciBjdXJyZW50U2NvcGU7XG5cbiAgICB3aGlsZSAocGVuZGluZ0NoaWxkSGVhZHMubGVuZ3RoKSB7XG4gICAgICBjdXJyZW50U2NvcGUgPSBwZW5kaW5nQ2hpbGRIZWFkcy5zaGlmdCgpO1xuXG4gICAgICB3aGlsZSAoY3VycmVudFNjb3BlKSB7XG4gICAgICAgIGNvdW50ICs9IGN1cnJlbnRTY29wZS4kJHdhdGNoZXJzID8gY3VycmVudFNjb3BlLiQkd2F0Y2hlcnMubGVuZ3RoIDogMDtcbiAgICAgICAgcGVuZGluZ0NoaWxkSGVhZHMucHVzaChjdXJyZW50U2NvcGUuJCRjaGlsZEhlYWQpO1xuICAgICAgICBjdXJyZW50U2NvcGUgPSBjdXJyZW50U2NvcGUuJCRuZXh0U2libGluZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY291bnQ7XG4gIH1cbn1dO1xuXG5cbihmdW5jdGlvbihqYXNtaW5lT3JNb2NoYSkge1xuXG4gIGlmICghamFzbWluZU9yTW9jaGEpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY3VycmVudFNwZWMgPSBudWxsLFxuICAgICAgaW5qZWN0b3JTdGF0ZSA9IG5ldyBJbmplY3RvclN0YXRlKCksXG4gICAgICBhbm5vdGF0ZWRGdW5jdGlvbnMgPSBbXSxcbiAgICAgIHdhc0luamVjdG9yQ3JlYXRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gISFjdXJyZW50U3BlYztcbiAgICAgIH07XG5cbiAgYW5ndWxhci5tb2NrLiQkYW5ub3RhdGUgPSBhbmd1bGFyLmluamVjdG9yLiQkYW5ub3RhdGU7XG4gIGFuZ3VsYXIuaW5qZWN0b3IuJCRhbm5vdGF0ZSA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiAhZm4uJGluamVjdCkge1xuICAgICAgYW5ub3RhdGVkRnVuY3Rpb25zLnB1c2goZm4pO1xuICAgIH1cbiAgICByZXR1cm4gYW5ndWxhci5tb2NrLiQkYW5ub3RhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIGFuZ3VsYXIubW9jay5tb2R1bGVcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqICpOT1RFKjogVGhpcyBmdW5jdGlvbiBpcyBhbHNvIHB1Ymxpc2hlZCBvbiB3aW5kb3cgZm9yIGVhc3kgYWNjZXNzLjxicj5cbiAgICogKk5PVEUqOiBUaGlzIGZ1bmN0aW9uIGlzIGRlY2xhcmVkIE9OTFkgV0hFTiBydW5uaW5nIHRlc3RzIHdpdGggamFzbWluZSBvciBtb2NoYVxuICAgKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHJlZ2lzdGVycyBhIG1vZHVsZSBjb25maWd1cmF0aW9uIGNvZGUuIEl0IGNvbGxlY3RzIHRoZSBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9uXG4gICAqIHdoaWNoIHdpbGwgYmUgdXNlZCB3aGVuIHRoZSBpbmplY3RvciBpcyBjcmVhdGVkIGJ5IHtAbGluayBhbmd1bGFyLm1vY2suaW5qZWN0IGluamVjdH0uXG4gICAqXG4gICAqIFNlZSB7QGxpbmsgYW5ndWxhci5tb2NrLmluamVjdCBpbmplY3R9IGZvciB1c2FnZSBleGFtcGxlXG4gICAqXG4gICAqIEBwYXJhbSB7Li4uKHN0cmluZ3xGdW5jdGlvbnxPYmplY3QpfSBmbnMgYW55IG51bWJlciBvZiBtb2R1bGVzIHdoaWNoIGFyZSByZXByZXNlbnRlZCBhcyBzdHJpbmdcbiAgICogICAgICAgIGFsaWFzZXMgb3IgYXMgYW5vbnltb3VzIG1vZHVsZSBpbml0aWFsaXphdGlvbiBmdW5jdGlvbnMuIFRoZSBtb2R1bGVzIGFyZSB1c2VkIHRvXG4gICAqICAgICAgICBjb25maWd1cmUgdGhlIGluamVjdG9yLiBUaGUgJ25nJyBhbmQgJ25nTW9jaycgbW9kdWxlcyBhcmUgYXV0b21hdGljYWxseSBsb2FkZWQuIElmIGFuXG4gICAqICAgICAgICBvYmplY3QgbGl0ZXJhbCBpcyBwYXNzZWQgZWFjaCBrZXktdmFsdWUgcGFpciB3aWxsIGJlIHJlZ2lzdGVyZWQgb24gdGhlIG1vZHVsZSB2aWFcbiAgICogICAgICAgIHtAbGluayBhdXRvLiRwcm92aWRlICRwcm92aWRlfS52YWx1ZSwgdGhlIGtleSBiZWluZyB0aGUgc3RyaW5nIG5hbWUgKG9yIHRva2VuKSB0byBhc3NvY2lhdGVcbiAgICogICAgICAgIHdpdGggdGhlIHZhbHVlIG9uIHRoZSBpbmplY3Rvci5cbiAgICovXG4gIHZhciBtb2R1bGUgPSB3aW5kb3cubW9kdWxlID0gYW5ndWxhci5tb2NrLm1vZHVsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtb2R1bGVGbnMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgIHJldHVybiB3YXNJbmplY3RvckNyZWF0ZWQoKSA/IHdvcmtGbigpIDogd29ya0ZuO1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGZ1bmN0aW9uIHdvcmtGbigpIHtcbiAgICAgIGlmIChjdXJyZW50U3BlYy4kaW5qZWN0b3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmplY3RvciBhbHJlYWR5IGNyZWF0ZWQsIGNhbiBub3QgcmVnaXN0ZXIgYSBtb2R1bGUhJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZm4sIG1vZHVsZXMgPSBjdXJyZW50U3BlYy4kbW9kdWxlcyB8fCAoY3VycmVudFNwZWMuJG1vZHVsZXMgPSBbXSk7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChtb2R1bGVGbnMsIGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KG1vZHVsZSkgJiYgIWFuZ3VsYXIuaXNBcnJheShtb2R1bGUpKSB7XG4gICAgICAgICAgICBmbiA9IFsnJHByb3ZpZGUnLCBmdW5jdGlvbigkcHJvdmlkZSkge1xuICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobW9kdWxlLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgJHByb3ZpZGUudmFsdWUoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZuID0gbW9kdWxlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY3VycmVudFNwZWMuJHByb3ZpZGVySW5qZWN0b3IpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTcGVjLiRwcm92aWRlckluamVjdG9yLmludm9rZShmbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vZHVsZXMucHVzaChmbik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgbW9kdWxlLiQkYmVmb3JlQWxsSG9vayA9ICh3aW5kb3cuYmVmb3JlIHx8IHdpbmRvdy5iZWZvcmVBbGwpO1xuICBtb2R1bGUuJCRhZnRlckFsbEhvb2sgPSAod2luZG93LmFmdGVyIHx8IHdpbmRvdy5hZnRlckFsbCk7XG5cbiAgLy8gcHVyZWx5IGZvciB0ZXN0aW5nIG5nTW9jayBpdHNlbGZcbiAgbW9kdWxlLiQkY3VycmVudFNwZWMgPSBmdW5jdGlvbih0bykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdG87XG4gICAgY3VycmVudFNwZWMgPSB0bztcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIGFuZ3VsYXIubW9jay5tb2R1bGUuc2hhcmVkSW5qZWN0b3JcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqICpOT1RFKjogVGhpcyBmdW5jdGlvbiBpcyBkZWNsYXJlZCBPTkxZIFdIRU4gcnVubmluZyB0ZXN0cyB3aXRoIGphc21pbmUgb3IgbW9jaGFcbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiBlbnN1cmVzIGEgc2luZ2xlIGluamVjdG9yIHdpbGwgYmUgdXNlZCBmb3IgYWxsIHRlc3RzIGluIGEgZ2l2ZW4gZGVzY3JpYmUgY29udGV4dC5cbiAgICogVGhpcyBjb250cmFzdHMgd2l0aCB0aGUgZGVmYXVsdCBiZWhhdmlvdXIgd2hlcmUgYSBuZXcgaW5qZWN0b3IgaXMgY3JlYXRlZCBwZXIgdGVzdCBjYXNlLlxuICAgKlxuICAgKiBVc2Ugc2hhcmVkSW5qZWN0b3Igd2hlbiB5b3Ugd2FudCB0byB0YWtlIGFkdmFudGFnZSBvZiBKYXNtaW5lJ3MgYGJlZm9yZUFsbCgpYCwgb3IgbW9jaGEnc1xuICAgKiBgYmVmb3JlKClgIG1ldGhvZHMuIENhbGwgYG1vZHVsZS5zaGFyZWRJbmplY3RvcigpYCBiZWZvcmUgeW91IHNldHVwIGFueSBvdGhlciBob29rcyB0aGF0XG4gICAqIHdpbGwgY3JlYXRlIChpLmUgY2FsbCBgbW9kdWxlKClgKSBvciB1c2UgKGkuZSBjYWxsIGBpbmplY3QoKWApIHRoZSBpbmplY3Rvci5cbiAgICpcbiAgICogWW91IGNhbm5vdCBjYWxsIGBzaGFyZWRJbmplY3RvcigpYCBmcm9tIHdpdGhpbiBhIGNvbnRleHQgYWxyZWFkeSB1c2luZyBgc2hhcmVkSW5qZWN0b3IoKWAuXG4gICAqXG4gICAqICMjIEV4YW1wbGVcbiAgICpcbiAgICogVHlwaWNhbGx5IGJlZm9yZUFsbCBpcyB1c2VkIHRvIG1ha2UgbWFueSBhc3NlcnRpb25zIGFib3V0IGEgc2luZ2xlIG9wZXJhdGlvbi4gVGhpcyBjYW5cbiAgICogY3V0IGRvd24gdGVzdCBydW4tdGltZSBhcyB0aGUgdGVzdCBzZXR1cCBkb2Vzbid0IG5lZWQgdG8gYmUgcmUtcnVuLCBhbmQgZW5hYmxpbmcgZm9jdXNzZWRcbiAgICogdGVzdHMgZWFjaCB3aXRoIGEgc2luZ2xlIGFzc2VydGlvbi5cbiAgICpcbiAgICogYGBganNcbiAgICogZGVzY3JpYmUoXCJEZWVwIFRob3VnaHRcIiwgZnVuY3Rpb24oKSB7XG4gICAqXG4gICAqICAgbW9kdWxlLnNoYXJlZEluamVjdG9yKCk7XG4gICAqXG4gICAqICAgYmVmb3JlQWxsKG1vZHVsZShcIlVsdGltYXRlUXVlc3Rpb25cIikpO1xuICAgKlxuICAgKiAgIGJlZm9yZUFsbChpbmplY3QoZnVuY3Rpb24oRGVlcFRob3VnaHQpIHtcbiAgICogICAgIGV4cGVjdChEZWVwVGhvdWdodC5hbnN3ZXIpLnRvQmVVbmRlZmluZWQoKTtcbiAgICogICAgIERlZXBUaG91Z2h0LmdlbmVyYXRlQW5zd2VyKCk7XG4gICAqICAgfSkpO1xuICAgKlxuICAgKiAgIGl0KFwiaGFzIGNhbGN1bGF0ZWQgdGhlIGFuc3dlciBjb3JyZWN0bHlcIiwgaW5qZWN0KGZ1bmN0aW9uKERlZXBUaG91Z2h0KSB7XG4gICAqICAgICAvLyBCZWNhdXNlIG9mIHNoYXJlZEluamVjdG9yLCB3ZSBoYXZlIGFjY2VzcyB0byB0aGUgaW5zdGFuY2Ugb2YgdGhlIERlZXBUaG91Z2h0IHNlcnZpY2VcbiAgICogICAgIC8vIHRoYXQgd2FzIHByb3ZpZGVkIHRvIHRoZSBiZWZvcmVBbGwoKSBob29rLiBUaGVyZWZvcmUgd2UgY2FuIHRlc3QgdGhlIGdlbmVyYXRlZCBhbnN3ZXJcbiAgICogICAgIGV4cGVjdChEZWVwVGhvdWdodC5hbnN3ZXIpLnRvQmUoNDIpO1xuICAgKiAgIH0pKTtcbiAgICpcbiAgICogICBpdChcImhhcyBjYWxjdWxhdGVkIHRoZSBhbnN3ZXIgd2l0aGluIHRoZSBleHBlY3RlZCB0aW1lXCIsIGluamVjdChmdW5jdGlvbihEZWVwVGhvdWdodCkge1xuICAgKiAgICAgZXhwZWN0KERlZXBUaG91Z2h0LnJ1blRpbWVNaWxsZW5uaWEpLnRvQmVMZXNzVGhhbig4MDAwKTtcbiAgICogICB9KSk7XG4gICAqXG4gICAqICAgaXQoXCJoYXMgZG91YmxlIGNoZWNrZWQgdGhlIGFuc3dlclwiLCBpbmplY3QoZnVuY3Rpb24oRGVlcFRob3VnaHQpIHtcbiAgICogICAgIGV4cGVjdChEZWVwVGhvdWdodC5hYnNvbHV0ZWx5U3VyZUl0SXNUaGVSaWdodEFuc3dlcikudG9CZSh0cnVlKTtcbiAgICogICB9KSk7XG4gICAqXG4gICAqIH0pO1xuICAgKlxuICAgKiBgYGBcbiAgICovXG4gIG1vZHVsZS5zaGFyZWRJbmplY3RvciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghKG1vZHVsZS4kJGJlZm9yZUFsbEhvb2sgJiYgbW9kdWxlLiQkYWZ0ZXJBbGxIb29rKSkge1xuICAgICAgdGhyb3cgRXJyb3IoJ3NoYXJlZEluamVjdG9yKCkgY2Fubm90IGJlIHVzZWQgdW5sZXNzIHlvdXIgdGVzdCBydW5uZXIgZGVmaW5lcyBiZWZvcmVBbGwvYWZ0ZXJBbGwnKTtcbiAgICB9XG5cbiAgICB2YXIgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgIG1vZHVsZS4kJGJlZm9yZUFsbEhvb2soLyoqIEB0aGlzICovIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGluamVjdG9yU3RhdGUuc2hhcmVkKSB7XG4gICAgICAgIGluamVjdG9yU3RhdGUuc2hhcmVkRXJyb3IgPSBFcnJvcignc2hhcmVkSW5qZWN0b3IoKSBjYW5ub3QgYmUgY2FsbGVkIGluc2lkZSBhIGNvbnRleHQgdGhhdCBoYXMgYWxyZWFkeSBjYWxsZWQgc2hhcmVkSW5qZWN0b3IoKScpO1xuICAgICAgICB0aHJvdyBpbmplY3RvclN0YXRlLnNoYXJlZEVycm9yO1xuICAgICAgfVxuICAgICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgY3VycmVudFNwZWMgPSB0aGlzO1xuICAgICAgaW5qZWN0b3JTdGF0ZS5zaGFyZWQgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgbW9kdWxlLiQkYWZ0ZXJBbGxIb29rKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGluaXRpYWxpemVkKSB7XG4gICAgICAgIGluamVjdG9yU3RhdGUgPSBuZXcgSW5qZWN0b3JTdGF0ZSgpO1xuICAgICAgICBtb2R1bGUuJCRjbGVhbnVwKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmplY3RvclN0YXRlLnNoYXJlZEVycm9yID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBtb2R1bGUuJCRiZWZvcmVFYWNoID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGluamVjdG9yU3RhdGUuc2hhcmVkICYmIGN1cnJlbnRTcGVjICYmIGN1cnJlbnRTcGVjICE9PSB0aGlzKSB7XG4gICAgICB2YXIgc3RhdGUgPSBjdXJyZW50U3BlYztcbiAgICAgIGN1cnJlbnRTcGVjID0gdGhpcztcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJyRpbmplY3RvcicsJyRtb2R1bGVzJywnJHByb3ZpZGVySW5qZWN0b3InLCAnJGluamVjdG9yU3RyaWN0J10sIGZ1bmN0aW9uKGspIHtcbiAgICAgICAgY3VycmVudFNwZWNba10gPSBzdGF0ZVtrXTtcbiAgICAgICAgc3RhdGVba10gPSBudWxsO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRTcGVjID0gdGhpcztcbiAgICAgIG9yaWdpbmFsUm9vdEVsZW1lbnQgPSBudWxsO1xuICAgICAgYW5ub3RhdGVkRnVuY3Rpb25zID0gW107XG4gICAgfVxuICB9O1xuXG4gIG1vZHVsZS4kJGFmdGVyRWFjaCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChpbmplY3RvclN0YXRlLmNsZWFudXBBZnRlckVhY2goKSkge1xuICAgICAgbW9kdWxlLiQkY2xlYW51cCgpO1xuICAgIH1cbiAgfTtcblxuICBtb2R1bGUuJCRjbGVhbnVwID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGluamVjdG9yID0gY3VycmVudFNwZWMuJGluamVjdG9yO1xuXG4gICAgYW5ub3RhdGVkRnVuY3Rpb25zLmZvckVhY2goZnVuY3Rpb24oZm4pIHtcbiAgICAgIGRlbGV0ZSBmbi4kaW5qZWN0O1xuICAgIH0pO1xuXG4gICAgY3VycmVudFNwZWMuJGluamVjdG9yID0gbnVsbDtcbiAgICBjdXJyZW50U3BlYy4kbW9kdWxlcyA9IG51bGw7XG4gICAgY3VycmVudFNwZWMuJHByb3ZpZGVySW5qZWN0b3IgPSBudWxsO1xuICAgIGN1cnJlbnRTcGVjID0gbnVsbDtcblxuICAgIGlmIChpbmplY3Rvcikge1xuICAgICAgLy8gRW5zdXJlIGAkcm9vdEVsZW1lbnRgIGlzIGluc3RhbnRpYXRlZCwgYmVmb3JlIGNoZWNraW5nIGBvcmlnaW5hbFJvb3RFbGVtZW50YFxuICAgICAgdmFyICRyb290RWxlbWVudCA9IGluamVjdG9yLmdldCgnJHJvb3RFbGVtZW50Jyk7XG4gICAgICB2YXIgcm9vdE5vZGUgPSAkcm9vdEVsZW1lbnQgJiYgJHJvb3RFbGVtZW50WzBdO1xuICAgICAgdmFyIGNsZWFuVXBOb2RlcyA9ICFvcmlnaW5hbFJvb3RFbGVtZW50ID8gW10gOiBbb3JpZ2luYWxSb290RWxlbWVudFswXV07XG4gICAgICBpZiAocm9vdE5vZGUgJiYgKCFvcmlnaW5hbFJvb3RFbGVtZW50IHx8IHJvb3ROb2RlICE9PSBvcmlnaW5hbFJvb3RFbGVtZW50WzBdKSkge1xuICAgICAgICBjbGVhblVwTm9kZXMucHVzaChyb290Tm9kZSk7XG4gICAgICB9XG4gICAgICBhbmd1bGFyLmVsZW1lbnQuY2xlYW5EYXRhKGNsZWFuVXBOb2Rlcyk7XG5cbiAgICAgIC8vIEVuc3VyZSBgJGRlc3Ryb3koKWAgaXMgYXZhaWxhYmxlLCBiZWZvcmUgY2FsbGluZyBpdFxuICAgICAgLy8gKGEgbW9ja2VkIGAkcm9vdFNjb3BlYCBtaWdodCBub3QgaW1wbGVtZW50IGl0IChvciBub3QgZXZlbiBiZSBhbiBvYmplY3QgYXQgYWxsKSlcbiAgICAgIHZhciAkcm9vdFNjb3BlID0gaW5qZWN0b3IuZ2V0KCckcm9vdFNjb3BlJyk7XG4gICAgICBpZiAoJHJvb3RTY29wZSAmJiAkcm9vdFNjb3BlLiRkZXN0cm95KSAkcm9vdFNjb3BlLiRkZXN0cm95KCk7XG4gICAgfVxuXG4gICAgLy8gY2xlYW4gdXAganF1ZXJ5J3MgZnJhZ21lbnQgY2FjaGVcbiAgICBhbmd1bGFyLmZvckVhY2goYW5ndWxhci5lbGVtZW50LmZyYWdtZW50cywgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICAgIGRlbGV0ZSBhbmd1bGFyLmVsZW1lbnQuZnJhZ21lbnRzW2tleV07XG4gICAgfSk7XG5cbiAgICBNb2NrWGhyLiQkbGFzdEluc3RhbmNlID0gbnVsbDtcblxuICAgIGFuZ3VsYXIuZm9yRWFjaChhbmd1bGFyLmNhbGxiYWNrcywgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICAgIGRlbGV0ZSBhbmd1bGFyLmNhbGxiYWNrc1trZXldO1xuICAgIH0pO1xuICAgIGFuZ3VsYXIuY2FsbGJhY2tzLiQkY291bnRlciA9IDA7XG4gIH07XG5cbiAgKHdpbmRvdy5iZWZvcmVFYWNoIHx8IHdpbmRvdy5zZXR1cCkobW9kdWxlLiQkYmVmb3JlRWFjaCk7XG4gICh3aW5kb3cuYWZ0ZXJFYWNoIHx8IHdpbmRvdy50ZWFyZG93bikobW9kdWxlLiQkYWZ0ZXJFYWNoKTtcblxuICAvKipcbiAgICogQG5nZG9jIGZ1bmN0aW9uXG4gICAqIEBuYW1lIGFuZ3VsYXIubW9jay5pbmplY3RcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqICpOT1RFKjogVGhpcyBmdW5jdGlvbiBpcyBhbHNvIHB1Ymxpc2hlZCBvbiB3aW5kb3cgZm9yIGVhc3kgYWNjZXNzLjxicj5cbiAgICogKk5PVEUqOiBUaGlzIGZ1bmN0aW9uIGlzIGRlY2xhcmVkIE9OTFkgV0hFTiBydW5uaW5nIHRlc3RzIHdpdGggamFzbWluZSBvciBtb2NoYVxuICAgKlxuICAgKiBUaGUgaW5qZWN0IGZ1bmN0aW9uIHdyYXBzIGEgZnVuY3Rpb24gaW50byBhbiBpbmplY3RhYmxlIGZ1bmN0aW9uLiBUaGUgaW5qZWN0KCkgY3JlYXRlcyBuZXdcbiAgICogaW5zdGFuY2Ugb2Yge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0gcGVyIHRlc3QsIHdoaWNoIGlzIHRoZW4gdXNlZCBmb3JcbiAgICogcmVzb2x2aW5nIHJlZmVyZW5jZXMuXG4gICAqXG4gICAqXG4gICAqICMjIFJlc29sdmluZyBSZWZlcmVuY2VzIChVbmRlcnNjb3JlIFdyYXBwaW5nKVxuICAgKiBPZnRlbiwgd2Ugd291bGQgbGlrZSB0byBpbmplY3QgYSByZWZlcmVuY2Ugb25jZSwgaW4gYSBgYmVmb3JlRWFjaCgpYCBibG9jayBhbmQgcmV1c2UgdGhpc1xuICAgKiBpbiBtdWx0aXBsZSBgaXQoKWAgY2xhdXNlcy4gVG8gYmUgYWJsZSB0byBkbyB0aGlzIHdlIG11c3QgYXNzaWduIHRoZSByZWZlcmVuY2UgdG8gYSB2YXJpYWJsZVxuICAgKiB0aGF0IGlzIGRlY2xhcmVkIGluIHRoZSBzY29wZSBvZiB0aGUgYGRlc2NyaWJlKClgIGJsb2NrLiBTaW5jZSB3ZSB3b3VsZCwgbW9zdCBsaWtlbHksIHdhbnRcbiAgICogdGhlIHZhcmlhYmxlIHRvIGhhdmUgdGhlIHNhbWUgbmFtZSBvZiB0aGUgcmVmZXJlbmNlIHdlIGhhdmUgYSBwcm9ibGVtLCBzaW5jZSB0aGUgcGFyYW1ldGVyXG4gICAqIHRvIHRoZSBgaW5qZWN0KClgIGZ1bmN0aW9uIHdvdWxkIGhpZGUgdGhlIG91dGVyIHZhcmlhYmxlLlxuICAgKlxuICAgKiBUbyBoZWxwIHdpdGggdGhpcywgdGhlIGluamVjdGVkIHBhcmFtZXRlcnMgY2FuLCBvcHRpb25hbGx5LCBiZSBlbmNsb3NlZCB3aXRoIHVuZGVyc2NvcmVzLlxuICAgKiBUaGVzZSBhcmUgaWdub3JlZCBieSB0aGUgaW5qZWN0b3Igd2hlbiB0aGUgcmVmZXJlbmNlIG5hbWUgaXMgcmVzb2x2ZWQuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCB0aGUgcGFyYW1ldGVyIGBfbXlTZXJ2aWNlX2Agd291bGQgYmUgcmVzb2x2ZWQgYXMgdGhlIHJlZmVyZW5jZSBgbXlTZXJ2aWNlYC5cbiAgICogU2luY2UgaXQgaXMgYXZhaWxhYmxlIGluIHRoZSBmdW5jdGlvbiBib2R5IGFzIGBfbXlTZXJ2aWNlX2AsIHdlIGNhbiB0aGVuIGFzc2lnbiBpdCB0byBhIHZhcmlhYmxlXG4gICAqIGRlZmluZWQgaW4gYW4gb3V0ZXIgc2NvcGUuXG4gICAqXG4gICAqIGBgYFxuICAgKiAvLyBEZWZpbmVkIG91dCByZWZlcmVuY2UgdmFyaWFibGUgb3V0c2lkZVxuICAgKiB2YXIgbXlTZXJ2aWNlO1xuICAgKlxuICAgKiAvLyBXcmFwIHRoZSBwYXJhbWV0ZXIgaW4gdW5kZXJzY29yZXNcbiAgICogYmVmb3JlRWFjaCggaW5qZWN0KCBmdW5jdGlvbihfbXlTZXJ2aWNlXyl7XG4gICAqICAgbXlTZXJ2aWNlID0gX215U2VydmljZV87XG4gICAqIH0pKTtcbiAgICpcbiAgICogLy8gVXNlIG15U2VydmljZSBpbiBhIHNlcmllcyBvZiB0ZXN0cy5cbiAgICogaXQoJ21ha2VzIHVzZSBvZiBteVNlcnZpY2UnLCBmdW5jdGlvbigpIHtcbiAgICogICBteVNlcnZpY2UuZG9TdHVmZigpO1xuICAgKiB9KTtcbiAgICpcbiAgICogYGBgXG4gICAqXG4gICAqIFNlZSBhbHNvIHtAbGluayBhbmd1bGFyLm1vY2subW9kdWxlIGFuZ3VsYXIubW9jay5tb2R1bGV9XG4gICAqXG4gICAqICMjIEV4YW1wbGVcbiAgICogRXhhbXBsZSBvZiB3aGF0IGEgdHlwaWNhbCBqYXNtaW5lIHRlc3RzIGxvb2tzIGxpa2Ugd2l0aCB0aGUgaW5qZWN0IG1ldGhvZC5cbiAgICogYGBganNcbiAgICpcbiAgICogICBhbmd1bGFyLm1vZHVsZSgnbXlBcHBsaWNhdGlvbk1vZHVsZScsIFtdKVxuICAgKiAgICAgICAudmFsdWUoJ21vZGUnLCAnYXBwJylcbiAgICogICAgICAgLnZhbHVlKCd2ZXJzaW9uJywgJ3YxLjAuMScpO1xuICAgKlxuICAgKlxuICAgKiAgIGRlc2NyaWJlKCdNeUFwcCcsIGZ1bmN0aW9uKCkge1xuICAgKlxuICAgKiAgICAgLy8gWW91IG5lZWQgdG8gbG9hZCBtb2R1bGVzIHRoYXQgeW91IHdhbnQgdG8gdGVzdCxcbiAgICogICAgIC8vIGl0IGxvYWRzIG9ubHkgdGhlIFwibmdcIiBtb2R1bGUgYnkgZGVmYXVsdC5cbiAgICogICAgIGJlZm9yZUVhY2gobW9kdWxlKCdteUFwcGxpY2F0aW9uTW9kdWxlJykpO1xuICAgKlxuICAgKlxuICAgKiAgICAgLy8gaW5qZWN0KCkgaXMgdXNlZCB0byBpbmplY3QgYXJndW1lbnRzIG9mIGFsbCBnaXZlbiBmdW5jdGlvbnNcbiAgICogICAgIGl0KCdzaG91bGQgcHJvdmlkZSBhIHZlcnNpb24nLCBpbmplY3QoZnVuY3Rpb24obW9kZSwgdmVyc2lvbikge1xuICAgKiAgICAgICBleHBlY3QodmVyc2lvbikudG9FcXVhbCgndjEuMC4xJyk7XG4gICAqICAgICAgIGV4cGVjdChtb2RlKS50b0VxdWFsKCdhcHAnKTtcbiAgICogICAgIH0pKTtcbiAgICpcbiAgICpcbiAgICogICAgIC8vIFRoZSBpbmplY3QgYW5kIG1vZHVsZSBtZXRob2QgY2FuIGFsc28gYmUgdXNlZCBpbnNpZGUgb2YgdGhlIGl0IG9yIGJlZm9yZUVhY2hcbiAgICogICAgIGl0KCdzaG91bGQgb3ZlcnJpZGUgYSB2ZXJzaW9uIGFuZCB0ZXN0IHRoZSBuZXcgdmVyc2lvbiBpcyBpbmplY3RlZCcsIGZ1bmN0aW9uKCkge1xuICAgKiAgICAgICAvLyBtb2R1bGUoKSB0YWtlcyBmdW5jdGlvbnMgb3Igc3RyaW5ncyAobW9kdWxlIGFsaWFzZXMpXG4gICAqICAgICAgIG1vZHVsZShmdW5jdGlvbigkcHJvdmlkZSkge1xuICAgKiAgICAgICAgICRwcm92aWRlLnZhbHVlKCd2ZXJzaW9uJywgJ292ZXJyaWRkZW4nKTsgLy8gb3ZlcnJpZGUgdmVyc2lvbiBoZXJlXG4gICAqICAgICAgIH0pO1xuICAgKlxuICAgKiAgICAgICBpbmplY3QoZnVuY3Rpb24odmVyc2lvbikge1xuICAgKiAgICAgICAgIGV4cGVjdCh2ZXJzaW9uKS50b0VxdWFsKCdvdmVycmlkZGVuJyk7XG4gICAqICAgICAgIH0pO1xuICAgKiAgICAgfSk7XG4gICAqICAgfSk7XG4gICAqXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBmbnMgYW55IG51bWJlciBvZiBmdW5jdGlvbnMgd2hpY2ggd2lsbCBiZSBpbmplY3RlZCB1c2luZyB0aGUgaW5qZWN0b3IuXG4gICAqL1xuXG5cblxuICB2YXIgRXJyb3JBZGRpbmdEZWNsYXJhdGlvbkxvY2F0aW9uU3RhY2sgPSBmdW5jdGlvbiBFcnJvckFkZGluZ0RlY2xhcmF0aW9uTG9jYXRpb25TdGFjayhlLCBlcnJvckZvclN0YWNrKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gZS5tZXNzYWdlO1xuICAgIHRoaXMubmFtZSA9IGUubmFtZTtcbiAgICBpZiAoZS5saW5lKSB0aGlzLmxpbmUgPSBlLmxpbmU7XG4gICAgaWYgKGUuc291cmNlSWQpIHRoaXMuc291cmNlSWQgPSBlLnNvdXJjZUlkO1xuICAgIGlmIChlLnN0YWNrICYmIGVycm9yRm9yU3RhY2spXG4gICAgICB0aGlzLnN0YWNrID0gZS5zdGFjayArICdcXG4nICsgZXJyb3JGb3JTdGFjay5zdGFjaztcbiAgICBpZiAoZS5zdGFja0FycmF5KSB0aGlzLnN0YWNrQXJyYXkgPSBlLnN0YWNrQXJyYXk7XG4gIH07XG4gIEVycm9yQWRkaW5nRGVjbGFyYXRpb25Mb2NhdGlvblN0YWNrLnByb3RvdHlwZSA9IEVycm9yLnByb3RvdHlwZTtcblxuICB3aW5kb3cuaW5qZWN0ID0gYW5ndWxhci5tb2NrLmluamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBibG9ja0ZucyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgdmFyIGVycm9yRm9yU3RhY2sgPSBuZXcgRXJyb3IoJ0RlY2xhcmF0aW9uIExvY2F0aW9uJyk7XG4gICAgLy8gSUUxMCsgYW5kIFBoYW50aG9tSlMgZG8gbm90IHNldCBzdGFjayB0cmFjZSBpbmZvcm1hdGlvbiwgdW50aWwgdGhlIGVycm9yIGlzIHRocm93blxuICAgIGlmICghZXJyb3JGb3JTdGFjay5zdGFjaykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhyb3cgZXJyb3JGb3JTdGFjaztcbiAgICAgIH0gY2F0Y2ggKGUpIHsgLyogZW1wdHkgKi8gfVxuICAgIH1cbiAgICByZXR1cm4gd2FzSW5qZWN0b3JDcmVhdGVkKCkgPyBXb3JrRm4uY2FsbChjdXJyZW50U3BlYykgOiBXb3JrRm47XG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgZnVuY3Rpb24gV29ya0ZuKCkge1xuICAgICAgdmFyIG1vZHVsZXMgPSBjdXJyZW50U3BlYy4kbW9kdWxlcyB8fCBbXTtcbiAgICAgIHZhciBzdHJpY3REaSA9ICEhY3VycmVudFNwZWMuJGluamVjdG9yU3RyaWN0O1xuICAgICAgbW9kdWxlcy51bnNoaWZ0KFsnJGluamVjdG9yJywgZnVuY3Rpb24oJGluamVjdG9yKSB7XG4gICAgICAgIGN1cnJlbnRTcGVjLiRwcm92aWRlckluamVjdG9yID0gJGluamVjdG9yO1xuICAgICAgfV0pO1xuICAgICAgbW9kdWxlcy51bnNoaWZ0KCduZ01vY2snKTtcbiAgICAgIG1vZHVsZXMudW5zaGlmdCgnbmcnKTtcbiAgICAgIHZhciBpbmplY3RvciA9IGN1cnJlbnRTcGVjLiRpbmplY3RvcjtcbiAgICAgIGlmICghaW5qZWN0b3IpIHtcbiAgICAgICAgaWYgKHN0cmljdERpKSB7XG4gICAgICAgICAgLy8gSWYgc3RyaWN0RGkgaXMgZW5hYmxlZCwgYW5ub3RhdGUgdGhlIHByb3ZpZGVySW5qZWN0b3IgYmxvY2tzXG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG1vZHVsZXMsIGZ1bmN0aW9uKG1vZHVsZUZuKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1vZHVsZUZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIGFuZ3VsYXIuaW5qZWN0b3IuJCRhbm5vdGF0ZShtb2R1bGVGbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5qZWN0b3IgPSBjdXJyZW50U3BlYy4kaW5qZWN0b3IgPSBhbmd1bGFyLmluamVjdG9yKG1vZHVsZXMsIHN0cmljdERpKTtcbiAgICAgICAgY3VycmVudFNwZWMuJGluamVjdG9yU3RyaWN0ID0gc3RyaWN0RGk7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBibG9ja0Zucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIGlmIChjdXJyZW50U3BlYy4kaW5qZWN0b3JTdHJpY3QpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgaW5qZWN0b3IgaXMgc3RyaWN0IC8gc3RyaWN0RGksIGFuZCB0aGUgc3BlYyB3YW50cyB0byBpbmplY3QgdXNpbmcgYXV0b21hdGljXG4gICAgICAgICAgLy8gYW5ub3RhdGlvbiwgdGhlbiBhbm5vdGF0ZSB0aGUgZnVuY3Rpb24gaGVyZS5cbiAgICAgICAgICBpbmplY3Rvci5hbm5vdGF0ZShibG9ja0Zuc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpbmplY3Rvci5pbnZva2UoYmxvY2tGbnNbaV0gfHwgYW5ndWxhci5ub29wLCB0aGlzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGlmIChlLnN0YWNrICYmIGVycm9yRm9yU3RhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvckFkZGluZ0RlY2xhcmF0aW9uTG9jYXRpb25TdGFjayhlLCBlcnJvckZvclN0YWNrKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBlcnJvckZvclN0YWNrID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuXG4gIGFuZ3VsYXIubW9jay5pbmplY3Quc3RyaWN0RGkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA/ICEhdmFsdWUgOiB0cnVlO1xuICAgIHJldHVybiB3YXNJbmplY3RvckNyZWF0ZWQoKSA/IHdvcmtGbigpIDogd29ya0ZuO1xuXG4gICAgZnVuY3Rpb24gd29ya0ZuKCkge1xuICAgICAgaWYgKHZhbHVlICE9PSBjdXJyZW50U3BlYy4kaW5qZWN0b3JTdHJpY3QpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRTcGVjLiRpbmplY3Rvcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5qZWN0b3IgYWxyZWFkeSBjcmVhdGVkLCBjYW4gbm90IG1vZGlmeSBzdHJpY3QgYW5ub3RhdGlvbnMnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50U3BlYy4kaW5qZWN0b3JTdHJpY3QgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBJbmplY3RvclN0YXRlKCkge1xuICAgIHRoaXMuc2hhcmVkID0gZmFsc2U7XG4gICAgdGhpcy5zaGFyZWRFcnJvciA9IG51bGw7XG5cbiAgICB0aGlzLmNsZWFudXBBZnRlckVhY2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5zaGFyZWQgfHwgdGhpcy5zaGFyZWRFcnJvcjtcbiAgICB9O1xuICB9XG59KSh3aW5kb3cuamFzbWluZSB8fCB3aW5kb3cubW9jaGEpO1xuXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbigpIHtcbiAgLyoqXG4gICAqIEBuZ2RvYyBmdW5jdGlvblxuICAgKiBAbmFtZSBicm93c2VyVHJpZ2dlclxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogVGhpcyBpcyBhIGdsb2JhbCAod2luZG93KSBmdW5jdGlvbiB0aGF0IGlzIG9ubHkgYXZhaWxhYmxlIHdoZW4gdGhlIHtAbGluayBuZ01vY2t9IG1vZHVsZSBpc1xuICAgKiBpbmNsdWRlZC5cbiAgICpcbiAgICogSXQgY2FuIGJlIHVzZWQgdG8gdHJpZ2dlciBhIG5hdGl2ZSBicm93c2VyIGV2ZW50IG9uIGFuIGVsZW1lbnQsIHdoaWNoIGlzIHVzZWZ1bCBmb3IgdW5pdCB0ZXN0aW5nLlxuICAgKlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZWxlbWVudCBFaXRoZXIgYSB3cmFwcGVkIGpRdWVyeS9qcUxpdGUgbm9kZSBvciBhIERPTUVsZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBldmVudFR5cGUgT3B0aW9uYWwgZXZlbnQgdHlwZS4gSWYgbm9uZSBpcyBzcGVjaWZpZWQsIHRoZSBmdW5jdGlvbiB0cmllc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byBkZXRlcm1pbmUgdGhlIHJpZ2h0IGV2ZW50IHR5cGUgZm9yIHRoZSBlbGVtZW50LCBlLmcuIGBjaGFuZ2VgIGZvclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgaW5wdXRbdGV4dF1gLlxuICAgKiBAcGFyYW0ge09iamVjdD19IGV2ZW50RGF0YSBBbiBvcHRpb25hbCBvYmplY3Qgd2hpY2ggY29udGFpbnMgYWRkaXRpb25hbCBldmVudCBkYXRhIHRoYXQgaXMgdXNlZFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVuIGNyZWF0aW5nIHRoZSBldmVudDpcbiAgICpcbiAgICogIC0gYGJ1YmJsZXNgOiBbRXZlbnQuYnViYmxlc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0V2ZW50L2J1YmJsZXMpLlxuICAgKiAgICBOb3QgYXBwbGljYWJsZSB0byBhbGwgZXZlbnRzLlxuICAgKlxuICAgKiAgLSBgY2FuY2VsYWJsZWA6IFtFdmVudC5jYW5jZWxhYmxlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvRXZlbnQvY2FuY2VsYWJsZSkuXG4gICAqICAgIE5vdCBhcHBsaWNhYmxlIHRvIGFsbCBldmVudHMuXG4gICAqXG4gICAqICAtIGBjaGFyY29kZWA6IFtjaGFyQ29kZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0tleWJvYXJkRXZlbnQvY2hhcmNvZGUpXG4gICAqICAgIGZvciBrZXlib2FyZCBldmVudHMgKGtleWRvd24sIGtleXByZXNzLCBhbmQga2V5dXApLlxuICAgKlxuICAgKiAgLSBgZWxhcHNlZFRpbWVgOiB0aGUgZWxhcHNlZFRpbWUgZm9yXG4gICAqICAgIFtUcmFuc2l0aW9uRXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9UcmFuc2l0aW9uRXZlbnQpXG4gICAqICAgIGFuZCBbQW5pbWF0aW9uRXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9BbmltYXRpb25FdmVudCkuXG4gICAqXG4gICAqICAtIGBrZXljb2RlYDogW2tleUNvZGVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9LZXlib2FyZEV2ZW50L2tleWNvZGUpXG4gICAqICAgIGZvciBrZXlib2FyZCBldmVudHMgKGtleWRvd24sIGtleXByZXNzLCBhbmQga2V5dXApLlxuICAgKlxuICAgKiAgLSBga2V5c2A6IGFuIGFycmF5IG9mIHBvc3NpYmxlIG1vZGlmaWVyIGtleXMgKGN0cmwsIGFsdCwgc2hpZnQsIG1ldGEpIGZvclxuICAgKiAgICBbTW91c2VFdmVudF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL01vdXNlRXZlbnQpIGFuZFxuICAgKiAgICBrZXlib2FyZCBldmVudHMgKGtleWRvd24sIGtleXByZXNzLCBhbmQga2V5dXApLlxuICAgKlxuICAgKiAgLSBgcmVsYXRlZFRhcmdldGA6IHRoZVxuICAgKiAgICBbcmVsYXRlZFRhcmdldF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL01vdXNlRXZlbnQvcmVsYXRlZFRhcmdldClcbiAgICogICAgZm9yIFtNb3VzZUV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvTW91c2VFdmVudCkuXG4gICAqXG4gICAqICAtIGB3aGljaGA6IFt3aGljaF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0tleWJvYXJkRXZlbnQvd2hpY2gpXG4gICAqICAgIGZvciBrZXlib2FyZCBldmVudHMgKGtleWRvd24sIGtleXByZXNzLCBhbmQga2V5dXApLlxuICAgKlxuICAgKiAgLSBgeGA6IHgtY29vcmRpbmF0ZXMgZm9yIFtNb3VzZUV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvTW91c2VFdmVudClcbiAgICogICAgYW5kIFtUb3VjaEV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvVG91Y2hFdmVudCkuXG4gICAqXG4gICAqICAtIGB5YDogeS1jb29yZGluYXRlcyBmb3IgW01vdXNlRXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9Nb3VzZUV2ZW50KVxuICAgKiAgICBhbmQgW1RvdWNoRXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9Ub3VjaEV2ZW50KS5cbiAgICpcbiAgICovXG4gIHdpbmRvdy5icm93c2VyVHJpZ2dlciA9IGZ1bmN0aW9uIGJyb3dzZXJUcmlnZ2VyKGVsZW1lbnQsIGV2ZW50VHlwZSwgZXZlbnREYXRhKSB7XG4gICAgaWYgKGVsZW1lbnQgJiYgIWVsZW1lbnQubm9kZU5hbWUpIGVsZW1lbnQgPSBlbGVtZW50WzBdO1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xuXG4gICAgZXZlbnREYXRhID0gZXZlbnREYXRhIHx8IHt9O1xuICAgIHZhciByZWxhdGVkVGFyZ2V0ID0gZXZlbnREYXRhLnJlbGF0ZWRUYXJnZXQgfHwgZWxlbWVudDtcbiAgICB2YXIga2V5cyA9IGV2ZW50RGF0YS5rZXlzO1xuICAgIHZhciB4ID0gZXZlbnREYXRhLng7XG4gICAgdmFyIHkgPSBldmVudERhdGEueTtcblxuICAgIHZhciBpbnB1dFR5cGUgPSAoZWxlbWVudC50eXBlKSA/IGVsZW1lbnQudHlwZS50b0xvd2VyQ2FzZSgpIDogbnVsbCxcbiAgICAgICAgbm9kZU5hbWUgPSBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCFldmVudFR5cGUpIHtcbiAgICAgIGV2ZW50VHlwZSA9IHtcbiAgICAgICAgJ3RleHQnOiAgICAgICAgICAgICdjaGFuZ2UnLFxuICAgICAgICAndGV4dGFyZWEnOiAgICAgICAgJ2NoYW5nZScsXG4gICAgICAgICdoaWRkZW4nOiAgICAgICAgICAnY2hhbmdlJyxcbiAgICAgICAgJ3Bhc3N3b3JkJzogICAgICAgICdjaGFuZ2UnLFxuICAgICAgICAnYnV0dG9uJzogICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgJ3N1Ym1pdCc6ICAgICAgICAgICdjbGljaycsXG4gICAgICAgICdyZXNldCc6ICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAnaW1hZ2UnOiAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgJ2NoZWNrYm94JzogICAgICAgICdjbGljaycsXG4gICAgICAgICdyYWRpbyc6ICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAnc2VsZWN0LW9uZSc6ICAgICAgJ2NoYW5nZScsXG4gICAgICAgICdzZWxlY3QtbXVsdGlwbGUnOiAnY2hhbmdlJyxcbiAgICAgICAgJ19kZWZhdWx0Xyc6ICAgICAgICdjbGljaydcbiAgICAgIH1baW5wdXRUeXBlIHx8ICdfZGVmYXVsdF8nXTtcbiAgICB9XG5cbiAgICBpZiAobm9kZU5hbWUgPT09ICdvcHRpb24nKSB7XG4gICAgICBlbGVtZW50LnBhcmVudE5vZGUudmFsdWUgPSBlbGVtZW50LnZhbHVlO1xuICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIGV2ZW50VHlwZSA9ICdjaGFuZ2UnO1xuICAgIH1cblxuICAgIGtleXMgPSBrZXlzIHx8IFtdO1xuICAgIGZ1bmN0aW9uIHByZXNzZWQoa2V5KSB7XG4gICAgICByZXR1cm4ga2V5cy5pbmRleE9mKGtleSkgIT09IC0xO1xuICAgIH1cblxuICAgIHZhciBldm50O1xuICAgIGlmICgvdHJhbnNpdGlvbmVuZC8udGVzdChldmVudFR5cGUpKSB7XG4gICAgICBpZiAod2luZG93LldlYktpdFRyYW5zaXRpb25FdmVudCkge1xuICAgICAgICBldm50ID0gbmV3IHdpbmRvdy5XZWJLaXRUcmFuc2l0aW9uRXZlbnQoZXZlbnRUeXBlLCBldmVudERhdGEpO1xuICAgICAgICBldm50LmluaXRFdmVudChldmVudFR5cGUsIGV2ZW50RGF0YS5idWJibGVzLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZXZudCA9IG5ldyB3aW5kb3cuVHJhbnNpdGlvbkV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGV2bnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ1RyYW5zaXRpb25FdmVudCcpO1xuICAgICAgICAgIGV2bnQuaW5pdFRyYW5zaXRpb25FdmVudChldmVudFR5cGUsIGV2ZW50RGF0YS5idWJibGVzLCBudWxsLCBudWxsLCBldmVudERhdGEuZWxhcHNlZFRpbWUgfHwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKC9hbmltYXRpb25lbmQvLnRlc3QoZXZlbnRUeXBlKSkge1xuICAgICAgaWYgKHdpbmRvdy5XZWJLaXRBbmltYXRpb25FdmVudCkge1xuICAgICAgICBldm50ID0gbmV3IHdpbmRvdy5XZWJLaXRBbmltYXRpb25FdmVudChldmVudFR5cGUsIGV2ZW50RGF0YSk7XG4gICAgICAgIGV2bnQuaW5pdEV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhLmJ1YmJsZXMsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBldm50ID0gbmV3IHdpbmRvdy5BbmltYXRpb25FdmVudChldmVudFR5cGUsIGV2ZW50RGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBldm50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KCdBbmltYXRpb25FdmVudCcpO1xuICAgICAgICAgIGV2bnQuaW5pdEFuaW1hdGlvbkV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhLmJ1YmJsZXMsIG51bGwsIG51bGwsIGV2ZW50RGF0YS5lbGFwc2VkVGltZSB8fCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoL3RvdWNoLy50ZXN0KGV2ZW50VHlwZSkgJiYgc3VwcG9ydHNUb3VjaEV2ZW50cygpKSB7XG4gICAgICBldm50ID0gY3JlYXRlVG91Y2hFdmVudChlbGVtZW50LCBldmVudFR5cGUsIHgsIHkpO1xuICAgIH0gZWxzZSBpZiAoL2tleS8udGVzdChldmVudFR5cGUpKSB7XG4gICAgICBldm50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudHMnKTtcbiAgICAgIGV2bnQuaW5pdEV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhLmJ1YmJsZXMsIGV2ZW50RGF0YS5jYW5jZWxhYmxlKTtcbiAgICAgIGV2bnQudmlldyA9IHdpbmRvdztcbiAgICAgIGV2bnQuY3RybEtleSA9IHByZXNzZWQoJ2N0cmwnKTtcbiAgICAgIGV2bnQuYWx0S2V5ID0gcHJlc3NlZCgnYWx0Jyk7XG4gICAgICBldm50LnNoaWZ0S2V5ID0gcHJlc3NlZCgnc2hpZnQnKTtcbiAgICAgIGV2bnQubWV0YUtleSA9IHByZXNzZWQoJ21ldGEnKTtcbiAgICAgIGV2bnQua2V5Q29kZSA9IGV2ZW50RGF0YS5rZXlDb2RlO1xuICAgICAgZXZudC5jaGFyQ29kZSA9IGV2ZW50RGF0YS5jaGFyQ29kZTtcbiAgICAgIGV2bnQud2hpY2ggPSBldmVudERhdGEud2hpY2g7XG4gICAgfSBlbHNlIGlmICgvY29tcG9zaXRpb24vLnRlc3QoZXZlbnRUeXBlKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZXZudCA9IG5ldyB3aW5kb3cuQ29tcG9zaXRpb25FdmVudChldmVudFR5cGUsIHtcbiAgICAgICAgICBkYXRhOiBldmVudERhdGEuZGF0YVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gU3VwcG9ydDogSUU5K1xuICAgICAgICBldm50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDb21wb3NpdGlvbkV2ZW50Jywge30pO1xuICAgICAgICBldm50LmluaXRDb21wb3NpdGlvbkV2ZW50KFxuICAgICAgICAgIGV2ZW50VHlwZSxcbiAgICAgICAgICBldmVudERhdGEuYnViYmxlcyxcbiAgICAgICAgICBldmVudERhdGEuY2FuY2VsYWJsZSxcbiAgICAgICAgICB3aW5kb3csXG4gICAgICAgICAgZXZlbnREYXRhLmRhdGEsXG4gICAgICAgICAgbnVsbFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGV2bnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7XG4gICAgICB4ID0geCB8fCAwO1xuICAgICAgeSA9IHkgfHwgMDtcbiAgICAgIGV2bnQuaW5pdE1vdXNlRXZlbnQoZXZlbnRUeXBlLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIHgsIHksIHgsIHksIHByZXNzZWQoJ2N0cmwnKSxcbiAgICAgICAgICBwcmVzc2VkKCdhbHQnKSwgcHJlc3NlZCgnc2hpZnQnKSwgcHJlc3NlZCgnbWV0YScpLCAwLCByZWxhdGVkVGFyZ2V0KTtcbiAgICB9XG5cbiAgICAvKiB3ZSdyZSB1bmFibGUgdG8gY2hhbmdlIHRoZSB0aW1lU3RhbXAgdmFsdWUgZGlyZWN0bHkgc28gdGhpc1xuICAgICAqIGlzIG9ubHkgaGVyZSB0byBhbGxvdyBmb3IgdGVzdGluZyB3aGVyZSB0aGUgdGltZVN0YW1wIHZhbHVlIGlzXG4gICAgICogcmVhZCAqL1xuICAgIGV2bnQuJG1hbnVhbFRpbWVTdGFtcCA9IGV2ZW50RGF0YS50aW1lU3RhbXA7XG5cbiAgICBpZiAoIWV2bnQpIHJldHVybjtcblxuICAgIGlmICghZXZlbnREYXRhLmJ1YmJsZXMgfHwgc3VwcG9ydHNFdmVudEJ1YmJsaW5nSW5EZXRhY2hlZFRyZWUoKSB8fCBpc0F0dGFjaGVkVG9Eb2N1bWVudChlbGVtZW50KSkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldm50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJpZ2dlckZvclBhdGgoZWxlbWVudCwgZXZudCk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHN1cHBvcnRzVG91Y2hFdmVudHMoKSB7XG4gICAgaWYgKCdfY2FjaGVkJyBpbiBzdXBwb3J0c1RvdWNoRXZlbnRzKSB7XG4gICAgICByZXR1cm4gc3VwcG9ydHNUb3VjaEV2ZW50cy5fY2FjaGVkO1xuICAgIH1cbiAgICBpZiAoIXdpbmRvdy5kb2N1bWVudC5jcmVhdGVUb3VjaCB8fCAhd2luZG93LmRvY3VtZW50LmNyZWF0ZVRvdWNoTGlzdCkge1xuICAgICAgc3VwcG9ydHNUb3VjaEV2ZW50cy5fY2FjaGVkID0gZmFsc2U7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ1RvdWNoRXZlbnQnKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBzdXBwb3J0c1RvdWNoRXZlbnRzLl9jYWNoZWQgPSBmYWxzZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc3VwcG9ydHNUb3VjaEV2ZW50cy5fY2FjaGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVRvdWNoRXZlbnQoZWxlbWVudCwgZXZlbnRUeXBlLCB4LCB5KSB7XG4gICAgdmFyIGV2bnQgPSBuZXcgd2luZG93LkV2ZW50KGV2ZW50VHlwZSk7XG4gICAgeCA9IHggfHwgMDtcbiAgICB5ID0geSB8fCAwO1xuXG4gICAgdmFyIHRvdWNoID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZVRvdWNoKHdpbmRvdywgZWxlbWVudCwgRGF0ZS5ub3coKSwgeCwgeSwgeCwgeSk7XG4gICAgdmFyIHRvdWNoZXMgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlVG91Y2hMaXN0KHRvdWNoKTtcblxuICAgIGV2bnQudG91Y2hlcyA9IHRvdWNoZXM7XG5cbiAgICByZXR1cm4gZXZudDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN1cHBvcnRzRXZlbnRCdWJibGluZ0luRGV0YWNoZWRUcmVlKCkge1xuICAgIGlmICgnX2NhY2hlZCcgaW4gc3VwcG9ydHNFdmVudEJ1YmJsaW5nSW5EZXRhY2hlZFRyZWUpIHtcbiAgICAgIHJldHVybiBzdXBwb3J0c0V2ZW50QnViYmxpbmdJbkRldGFjaGVkVHJlZS5fY2FjaGVkO1xuICAgIH1cbiAgICBzdXBwb3J0c0V2ZW50QnViYmxpbmdJbkRldGFjaGVkVHJlZS5fY2FjaGVkID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IHdpbmRvdy5kb2N1bWVudDtcbiAgICBpZiAoZG9jKSB7XG4gICAgICB2YXIgcGFyZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgIGNoaWxkID0gcGFyZW50LmNsb25lTm9kZSgpO1xuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgIHBhcmVudC5hZGRFdmVudExpc3RlbmVyKCdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHN1cHBvcnRzRXZlbnRCdWJibGluZ0luRGV0YWNoZWRUcmVlLl9jYWNoZWQgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgICB2YXIgZXZudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnRzJyk7XG4gICAgICBldm50LmluaXRFdmVudCgnZScsIHRydWUsIHRydWUpO1xuICAgICAgY2hpbGQuZGlzcGF0Y2hFdmVudChldm50KTtcbiAgICB9XG4gICAgcmV0dXJuIHN1cHBvcnRzRXZlbnRCdWJibGluZ0luRGV0YWNoZWRUcmVlLl9jYWNoZWQ7XG4gIH1cblxuICBmdW5jdGlvbiB0cmlnZ2VyRm9yUGF0aChlbGVtZW50LCBldm50KSB7XG4gICAgdmFyIHN0b3AgPSBmYWxzZTtcblxuICAgIHZhciBfc3RvcFByb3BhZ2F0aW9uID0gZXZudC5zdG9wUHJvcGFnYXRpb247XG4gICAgZXZudC5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHN0b3AgPSB0cnVlO1xuICAgICAgX3N0b3BQcm9wYWdhdGlvbi5hcHBseShldm50LCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgcGF0Y2hFdmVudFRhcmdldEZvckJ1YmJsaW5nKGV2bnQsIGVsZW1lbnQpO1xuICAgIGRvIHtcbiAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldm50KTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bm1vZGlmaWVkLWxvb3AtY29uZGl0aW9uXG4gICAgfSB3aGlsZSAoIXN0b3AgJiYgKGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdGNoRXZlbnRUYXJnZXRGb3JCdWJibGluZyhldmVudCwgdGFyZ2V0KSB7XG4gICAgZXZlbnQuX3RhcmdldCA9IHRhcmdldDtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXZlbnQsICd0YXJnZXQnLCB7Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3RhcmdldDt9fSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0F0dGFjaGVkVG9Eb2N1bWVudChlbGVtZW50KSB7XG4gICAgd2hpbGUgKChlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKSkge1xuICAgICAgICBpZiAoZWxlbWVudCA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0pKCk7XG5cblxufSkod2luZG93LCB3aW5kb3cuYW5ndWxhcik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9hbmd1bGFyLW1vY2tzL2FuZ3VsYXItbW9ja3MuanNcbi8vIG1vZHVsZSBpZCA9IDU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQGhpZGRlblxuICogQG1vZHVsZSBuZzFcbiAqLyAvKiogKi9cbmRlY2xhcmUgdmFyIGFuZ3VsYXI7XG5pbXBvcnQgKiBhcyBuZ19mcm9tX2ltcG9ydCBmcm9tICdhbmd1bGFyJztcbmNvbnN0IG5nX2Zyb21fZ2xvYmFsID0gYW5ndWxhcjtcblxuZXhwb3J0IGNvbnN0IG5nID0gbmdfZnJvbV9pbXBvcnQgJiYgbmdfZnJvbV9pbXBvcnQubW9kdWxlID8gbmdfZnJvbV9pbXBvcnQgOiBuZ19mcm9tX2dsb2JhbDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9hbmd1bGFyLnRzIiwiLyoqIEBtb2R1bGUgbmcxICovIC8qKiAqL1xuaW1wb3J0IHsgbmcgYXMgYW5ndWxhciB9IGZyb20gJy4uL2FuZ3VsYXInO1xuaW1wb3J0IHtcbiAgU3RhdGVPYmplY3QsXG4gIHBpY2ssXG4gIGZvckVhY2gsXG4gIHRhaWwsXG4gIGV4dGVuZCxcbiAgaXNBcnJheSxcbiAgaXNJbmplY3RhYmxlLFxuICBpc0RlZmluZWQsXG4gIGlzU3RyaW5nLFxuICBzZXJ2aWNlcyxcbiAgdHJhY2UsXG4gIFZpZXdDb25maWcsXG4gIFZpZXdTZXJ2aWNlLFxuICBWaWV3Q29uZmlnRmFjdG9yeSxcbiAgUGF0aE5vZGUsXG4gIFJlc29sdmVDb250ZXh0LFxuICBSZXNvbHZhYmxlLFxuICBJSW5qZWN0YWJsZSxcbn0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuaW1wb3J0IHsgTmcxVmlld0RlY2xhcmF0aW9uIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7IFRlbXBsYXRlRmFjdG9yeSB9IGZyb20gJy4uL3RlbXBsYXRlRmFjdG9yeSc7XG5pbXBvcnQgSUluamVjdG9yU2VydmljZSA9IGFuZ3VsYXIuYXV0by5JSW5qZWN0b3JTZXJ2aWNlO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmcxVmlld0NvbmZpZ0ZhY3RvcnkoKTogVmlld0NvbmZpZ0ZhY3Rvcnkge1xuICBsZXQgdGVtcGxhdGVGYWN0b3J5OiBUZW1wbGF0ZUZhY3RvcnkgPSBudWxsO1xuICByZXR1cm4gKHBhdGgsIHZpZXcpID0+IHtcbiAgICB0ZW1wbGF0ZUZhY3RvcnkgPSB0ZW1wbGF0ZUZhY3RvcnkgfHwgc2VydmljZXMuJGluamVjdG9yLmdldCgnJHRlbXBsYXRlRmFjdG9yeScpO1xuICAgIHJldHVybiBbbmV3IE5nMVZpZXdDb25maWcocGF0aCwgdmlldywgdGVtcGxhdGVGYWN0b3J5KV07XG4gIH07XG59XG5cbmNvbnN0IGhhc0FueUtleSA9IChrZXlzLCBvYmopID0+IGtleXMucmVkdWNlKChhY2MsIGtleSkgPT4gYWNjIHx8IGlzRGVmaW5lZChvYmpba2V5XSksIGZhbHNlKTtcblxuLyoqXG4gKiBUaGlzIGlzIGEgW1tTdGF0ZUJ1aWxkZXIuYnVpbGRlcl1dIGZ1bmN0aW9uIGZvciBhbmd1bGFyMSBgdmlld3NgLlxuICpcbiAqIFdoZW4gdGhlIFtbU3RhdGVCdWlsZGVyXV0gYnVpbGRzIGEgW1tTdGF0ZU9iamVjdF1dIG9iamVjdCBmcm9tIGEgcmF3IFtbU3RhdGVEZWNsYXJhdGlvbl1dLCB0aGlzIGJ1aWxkZXJcbiAqIGhhbmRsZXMgdGhlIGB2aWV3c2AgcHJvcGVydHkgd2l0aCBsb2dpYyBzcGVjaWZpYyB0byBAdWlyb3V0ZXIvYW5ndWxhcmpzIChuZzEpLlxuICpcbiAqIElmIG5vIGB2aWV3czoge31gIHByb3BlcnR5IGV4aXN0cyBvbiB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uXV0sIHRoZW4gaXQgY3JlYXRlcyB0aGUgYHZpZXdzYCBvYmplY3RcbiAqIGFuZCBhcHBsaWVzIHRoZSBzdGF0ZS1sZXZlbCBjb25maWd1cmF0aW9uIHRvIGEgdmlldyBuYW1lZCBgJGRlZmF1bHRgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbmcxVmlld3NCdWlsZGVyKHN0YXRlOiBTdGF0ZU9iamVjdCkge1xuICAvLyBEbyBub3QgcHJvY2VzcyByb290IHN0YXRlXG4gIGlmICghc3RhdGUucGFyZW50KSByZXR1cm4ge307XG5cbiAgY29uc3QgdHBsS2V5cyA9IFsndGVtcGxhdGVQcm92aWRlcicsICd0ZW1wbGF0ZVVybCcsICd0ZW1wbGF0ZScsICdub3RpZnknLCAnYXN5bmMnXSxcbiAgICBjdHJsS2V5cyA9IFsnY29udHJvbGxlcicsICdjb250cm9sbGVyUHJvdmlkZXInLCAnY29udHJvbGxlckFzJywgJ3Jlc29sdmVBcyddLFxuICAgIGNvbXBLZXlzID0gWydjb21wb25lbnQnLCAnYmluZGluZ3MnLCAnY29tcG9uZW50UHJvdmlkZXInXSxcbiAgICBub25Db21wS2V5cyA9IHRwbEtleXMuY29uY2F0KGN0cmxLZXlzKSxcbiAgICBhbGxWaWV3S2V5cyA9IGNvbXBLZXlzLmNvbmNhdChub25Db21wS2V5cyk7XG5cbiAgLy8gRG8gbm90IGFsbG93IGEgc3RhdGUgdG8gaGF2ZSBib3RoIHN0YXRlLWxldmVsIHByb3BzIGFuZCBhbHNvIGEgYHZpZXdzOiB7fWAgcHJvcGVydHkuXG4gIC8vIEEgc3RhdGUgd2l0aG91dCBhIGB2aWV3czoge31gIHByb3BlcnR5IGNhbiBkZWNsYXJlIHByb3BlcnRpZXMgZm9yIHRoZSBgJGRlZmF1bHRgIHZpZXcgYXMgcHJvcGVydGllcyBvZiB0aGUgc3RhdGUuXG4gIC8vIEhvd2V2ZXIsIHRoZSBgJGRlZmF1bHRgIGFwcHJvYWNoIHNob3VsZCBub3QgYmUgbWl4ZWQgd2l0aCBhIHNlcGFyYXRlIGB2aWV3czogYCBibG9jay5cbiAgaWYgKGlzRGVmaW5lZChzdGF0ZS52aWV3cykgJiYgaGFzQW55S2V5KGFsbFZpZXdLZXlzLCBzdGF0ZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgU3RhdGUgJyR7c3RhdGUubmFtZX0nIGhhcyBhICd2aWV3cycgb2JqZWN0LiBgICtcbiAgICAgICAgYEl0IGNhbm5vdCBhbHNvIGhhdmUgXCJ2aWV3IHByb3BlcnRpZXNcIiBhdCB0aGUgc3RhdGUgbGV2ZWwuICBgICtcbiAgICAgICAgYE1vdmUgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIGludG8gYSB2aWV3IChpbiB0aGUgJ3ZpZXdzJyBvYmplY3QpOiBgICtcbiAgICAgICAgYCAke2FsbFZpZXdLZXlzLmZpbHRlcihrZXkgPT4gaXNEZWZpbmVkKHN0YXRlW2tleV0pKS5qb2luKCcsICcpfWAsXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IHZpZXdzOiB7IFtrZXk6IHN0cmluZ106IE5nMVZpZXdEZWNsYXJhdGlvbiB9ID0ge30sXG4gICAgdmlld3NPYmplY3QgPSBzdGF0ZS52aWV3cyB8fCB7ICRkZWZhdWx0OiBwaWNrKHN0YXRlLCBhbGxWaWV3S2V5cykgfTtcblxuICBmb3JFYWNoKHZpZXdzT2JqZWN0LCBmdW5jdGlvbihjb25maWc6IE5nMVZpZXdEZWNsYXJhdGlvbiwgbmFtZTogc3RyaW5nKSB7XG4gICAgLy8gQWNjb3VudCBmb3Igdmlld3M6IHsgXCJcIjogeyB0ZW1wbGF0ZS4uLiB9IH1cbiAgICBuYW1lID0gbmFtZSB8fCAnJGRlZmF1bHQnO1xuICAgIC8vIEFjY291bnQgZm9yIHZpZXdzOiB7IGhlYWRlcjogXCJoZWFkZXJDb21wb25lbnRcIiB9XG4gICAgaWYgKGlzU3RyaW5nKGNvbmZpZykpIGNvbmZpZyA9IHsgY29tcG9uZW50OiA8c3RyaW5nPmNvbmZpZyB9O1xuXG4gICAgLy8gTWFrZSBhIHNoYWxsb3cgY29weSBvZiB0aGUgY29uZmlnIG9iamVjdFxuICAgIGNvbmZpZyA9IGV4dGVuZCh7fSwgY29uZmlnKTtcblxuICAgIC8vIERvIG5vdCBhbGxvdyBhIHZpZXcgdG8gbWl4IHByb3BzIGZvciBjb21wb25lbnQtc3R5bGUgdmlldyB3aXRoIHByb3BzIGZvciB0ZW1wbGF0ZS9jb250cm9sbGVyLXN0eWxlIHZpZXdcbiAgICBpZiAoaGFzQW55S2V5KGNvbXBLZXlzLCBjb25maWcpICYmIGhhc0FueUtleShub25Db21wS2V5cywgY29uZmlnKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGNvbWJpbmU6ICR7Y29tcEtleXMuam9pbignfCcpfSB3aXRoOiAke25vbkNvbXBLZXlzLmpvaW4oJ3wnKX0gaW4gc3RhdGV2aWV3OiAnJHtuYW1lfUAke3N0YXRlLm5hbWV9J2AsXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbmZpZy5yZXNvbHZlQXMgPSBjb25maWcucmVzb2x2ZUFzIHx8ICckcmVzb2x2ZSc7XG4gICAgY29uZmlnLiR0eXBlID0gJ25nMSc7XG4gICAgY29uZmlnLiRjb250ZXh0ID0gc3RhdGU7XG4gICAgY29uZmlnLiRuYW1lID0gbmFtZTtcblxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBWaWV3U2VydmljZS5ub3JtYWxpemVVSVZpZXdUYXJnZXQoY29uZmlnLiRjb250ZXh0LCBjb25maWcuJG5hbWUpO1xuICAgIGNvbmZpZy4kdWlWaWV3TmFtZSA9IG5vcm1hbGl6ZWQudWlWaWV3TmFtZTtcbiAgICBjb25maWcuJHVpVmlld0NvbnRleHRBbmNob3IgPSBub3JtYWxpemVkLnVpVmlld0NvbnRleHRBbmNob3I7XG5cbiAgICB2aWV3c1tuYW1lXSA9IGNvbmZpZztcbiAgfSk7XG4gIHJldHVybiB2aWV3cztcbn1cblxubGV0IGlkID0gMDtcbmV4cG9ydCBjbGFzcyBOZzFWaWV3Q29uZmlnIGltcGxlbWVudHMgVmlld0NvbmZpZyB7XG4gICRpZCA9IGlkKys7XG4gIGxvYWRlZCA9IGZhbHNlO1xuICBjb250cm9sbGVyOiBGdW5jdGlvbjsgLy8gYWN0dWFsbHkgSUluamVjdGFibGV8c3RyaW5nXG4gIHRlbXBsYXRlOiBzdHJpbmc7XG4gIGNvbXBvbmVudDogc3RyaW5nO1xuICBsb2NhbHM6IGFueTsgLy8gVE9ETzogZGVsZXRlIG1lXG5cbiAgY29uc3RydWN0b3IocHVibGljIHBhdGg6IFBhdGhOb2RlW10sIHB1YmxpYyB2aWV3RGVjbDogTmcxVmlld0RlY2xhcmF0aW9uLCBwdWJsaWMgZmFjdG9yeTogVGVtcGxhdGVGYWN0b3J5KSB7fVxuXG4gIGxvYWQoKSB7XG4gICAgY29uc3QgJHEgPSBzZXJ2aWNlcy4kcTtcbiAgICBjb25zdCBjb250ZXh0ID0gbmV3IFJlc29sdmVDb250ZXh0KHRoaXMucGF0aCk7XG4gICAgY29uc3QgcGFyYW1zID0gdGhpcy5wYXRoLnJlZHVjZSgoYWNjLCBub2RlKSA9PiBleHRlbmQoYWNjLCBub2RlLnBhcmFtVmFsdWVzKSwge30pO1xuXG4gICAgY29uc3QgcHJvbWlzZXM6IGFueSA9IHtcbiAgICAgIHRlbXBsYXRlOiAkcS53aGVuKHRoaXMuZmFjdG9yeS5mcm9tQ29uZmlnKHRoaXMudmlld0RlY2wsIHBhcmFtcywgY29udGV4dCkpLFxuICAgICAgY29udHJvbGxlcjogJHEud2hlbih0aGlzLmdldENvbnRyb2xsZXIoY29udGV4dCkpLFxuICAgIH07XG5cbiAgICByZXR1cm4gJHEuYWxsKHByb21pc2VzKS50aGVuKHJlc3VsdHMgPT4ge1xuICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZUV2ZW50KCdMb2FkZWQnLCB0aGlzKTtcbiAgICAgIHRoaXMuY29udHJvbGxlciA9IHJlc3VsdHMuY29udHJvbGxlcjtcbiAgICAgIGV4dGVuZCh0aGlzLCByZXN1bHRzLnRlbXBsYXRlKTsgLy8gRWl0aGVyIHsgdGVtcGxhdGU6IFwidHBsXCIgfSBvciB7IGNvbXBvbmVudDogXCJjbXBOYW1lXCIgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSk7XG4gIH1cblxuICBnZXRUZW1wbGF0ZSA9ICh1aVZpZXcsIGNvbnRleHQ6IFJlc29sdmVDb250ZXh0KSA9PlxuICAgIHRoaXMuY29tcG9uZW50XG4gICAgICA/IHRoaXMuZmFjdG9yeS5tYWtlQ29tcG9uZW50VGVtcGxhdGUodWlWaWV3LCBjb250ZXh0LCB0aGlzLmNvbXBvbmVudCwgdGhpcy52aWV3RGVjbC5iaW5kaW5ncylcbiAgICAgIDogdGhpcy50ZW1wbGF0ZTtcblxuICAvKipcbiAgICogR2V0cyB0aGUgY29udHJvbGxlciBmb3IgYSB2aWV3IGNvbmZpZ3VyYXRpb24uXG4gICAqXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbnxQcm9taXNlLjxGdW5jdGlvbj59IFJldHVybnMgYSBjb250cm9sbGVyLCBvciBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIGNvbnRyb2xsZXIuXG4gICAqL1xuICBnZXRDb250cm9sbGVyKGNvbnRleHQ6IFJlc29sdmVDb250ZXh0KTogSUluamVjdGFibGUgfCBzdHJpbmcgfCBQcm9taXNlPElJbmplY3RhYmxlIHwgc3RyaW5nPiB7XG4gICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnZpZXdEZWNsLmNvbnRyb2xsZXJQcm92aWRlcjtcbiAgICBpZiAoIWlzSW5qZWN0YWJsZShwcm92aWRlcikpIHJldHVybiB0aGlzLnZpZXdEZWNsLmNvbnRyb2xsZXI7XG4gICAgY29uc3QgZGVwcyA9IHNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShwcm92aWRlcik7XG4gICAgY29uc3QgcHJvdmlkZXJGbiA9IGlzQXJyYXkocHJvdmlkZXIpID8gdGFpbCg8YW55PnByb3ZpZGVyKSA6IHByb3ZpZGVyO1xuICAgIGNvbnN0IHJlc29sdmFibGUgPSBuZXcgUmVzb2x2YWJsZSgnJywgPGFueT5wcm92aWRlckZuLCBkZXBzKTtcbiAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXQoY29udGV4dCk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9zdGF0ZWJ1aWxkZXJzL3ZpZXdzLnRzIiwiLyoqIEBtb2R1bGUgdmlldyAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBuZyBhcyBhbmd1bGFyIH0gZnJvbSAnLi9hbmd1bGFyJztcbmltcG9ydCB7IElBdWdtZW50ZWRKUXVlcnkgfSBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7XG4gIGlzQXJyYXksXG4gIGlzRGVmaW5lZCxcbiAgaXNGdW5jdGlvbixcbiAgaXNPYmplY3QsXG4gIHNlcnZpY2VzLFxuICBPYmosXG4gIElJbmplY3RhYmxlLFxuICB0YWlsLFxuICBrZWJvYlN0cmluZyxcbiAgdW5uZXN0UixcbiAgUmVzb2x2ZUNvbnRleHQsXG4gIFJlc29sdmFibGUsXG4gIFJhd1BhcmFtcyxcbn0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuaW1wb3J0IHsgTmcxVmlld0RlY2xhcmF0aW9uLCBUZW1wbGF0ZUZhY3RvcnlQcm92aWRlciB9IGZyb20gJy4vaW50ZXJmYWNlJztcblxuLyoqXG4gKiBTZXJ2aWNlIHdoaWNoIG1hbmFnZXMgbG9hZGluZyBvZiB0ZW1wbGF0ZXMgZnJvbSBhIFZpZXdDb25maWcuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZUZhY3RvcnkgaW1wbGVtZW50cyBUZW1wbGF0ZUZhY3RvcnlQcm92aWRlciB7XG4gIC8qKiBAaGlkZGVuICovIHByaXZhdGUgX3VzZUh0dHAgPSBhbmd1bGFyLnZlcnNpb24ubWlub3IgPCAzO1xuICAvKiogQGhpZGRlbiAqLyBwcml2YXRlICR0ZW1wbGF0ZVJlcXVlc3Q7XG4gIC8qKiBAaGlkZGVuICovIHByaXZhdGUgJHRlbXBsYXRlQ2FjaGU7XG4gIC8qKiBAaGlkZGVuICovIHByaXZhdGUgJGh0dHA7XG5cbiAgLyoqIEBoaWRkZW4gKi8gJGdldCA9IFtcbiAgICAnJGh0dHAnLFxuICAgICckdGVtcGxhdGVDYWNoZScsXG4gICAgJyRpbmplY3RvcicsXG4gICAgKCRodHRwLCAkdGVtcGxhdGVDYWNoZSwgJGluamVjdG9yKSA9PiB7XG4gICAgICB0aGlzLiR0ZW1wbGF0ZVJlcXVlc3QgPSAkaW5qZWN0b3IuaGFzICYmICRpbmplY3Rvci5oYXMoJyR0ZW1wbGF0ZVJlcXVlc3QnKSAmJiAkaW5qZWN0b3IuZ2V0KCckdGVtcGxhdGVSZXF1ZXN0Jyk7XG4gICAgICB0aGlzLiRodHRwID0gJGh0dHA7XG4gICAgICB0aGlzLiR0ZW1wbGF0ZUNhY2hlID0gJHRlbXBsYXRlQ2FjaGU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICBdO1xuXG4gIC8qKiBAaGlkZGVuICovXG4gIHVzZUh0dHBTZXJ2aWNlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fdXNlSHR0cCA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB0ZW1wbGF0ZSBmcm9tIGEgY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSBjb25maWcgQ29uZmlndXJhdGlvbiBvYmplY3QgZm9yIHdoaWNoIHRvIGxvYWQgYSB0ZW1wbGF0ZS5cbiAgICogVGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIGFyZSBzZWFyY2ggaW4gdGhlIHNwZWNpZmllZCBvcmRlciwgYW5kIHRoZSBmaXJzdCBvbmVcbiAgICogdGhhdCBpcyBkZWZpbmVkIGlzIHVzZWQgdG8gY3JlYXRlIHRoZSB0ZW1wbGF0ZTpcbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyAgUGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbi5cbiAgICogQHBhcmFtIGNvbnRleHQgVGhlIHJlc29sdmUgY29udGV4dCBhc3NvY2lhdGVkIHdpdGggdGhlIHRlbXBsYXRlJ3Mgdmlld1xuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd8b2JqZWN0fSAgVGhlIHRlbXBsYXRlIGh0bWwgYXMgYSBzdHJpbmcsIG9yIGEgcHJvbWlzZSBmb3JcbiAgICogdGhhdCBzdHJpbmcsb3IgYG51bGxgIGlmIG5vIHRlbXBsYXRlIGlzIGNvbmZpZ3VyZWQuXG4gICAqL1xuICBmcm9tQ29uZmlnKFxuICAgIGNvbmZpZzogTmcxVmlld0RlY2xhcmF0aW9uLFxuICAgIHBhcmFtczogYW55LFxuICAgIGNvbnRleHQ6IFJlc29sdmVDb250ZXh0LFxuICApOiBQcm9taXNlPHsgdGVtcGxhdGU/OiBzdHJpbmc7IGNvbXBvbmVudD86IHN0cmluZyB9PiB7XG4gICAgY29uc3QgZGVmYXVsdFRlbXBsYXRlID0gJzx1aS12aWV3PjwvdWktdmlldz4nO1xuXG4gICAgY29uc3QgYXNUZW1wbGF0ZSA9IHJlc3VsdCA9PiBzZXJ2aWNlcy4kcS53aGVuKHJlc3VsdCkudGhlbihzdHIgPT4gKHsgdGVtcGxhdGU6IHN0ciB9KSk7XG4gICAgY29uc3QgYXNDb21wb25lbnQgPSByZXN1bHQgPT4gc2VydmljZXMuJHEud2hlbihyZXN1bHQpLnRoZW4oc3RyID0+ICh7IGNvbXBvbmVudDogc3RyIH0pKTtcblxuICAgIHJldHVybiBpc0RlZmluZWQoY29uZmlnLnRlbXBsYXRlKVxuICAgICAgPyBhc1RlbXBsYXRlKHRoaXMuZnJvbVN0cmluZyhjb25maWcudGVtcGxhdGUsIHBhcmFtcykpXG4gICAgICA6IGlzRGVmaW5lZChjb25maWcudGVtcGxhdGVVcmwpXG4gICAgICAgID8gYXNUZW1wbGF0ZSh0aGlzLmZyb21VcmwoY29uZmlnLnRlbXBsYXRlVXJsLCBwYXJhbXMpKVxuICAgICAgICA6IGlzRGVmaW5lZChjb25maWcudGVtcGxhdGVQcm92aWRlcilcbiAgICAgICAgICA/IGFzVGVtcGxhdGUodGhpcy5mcm9tUHJvdmlkZXIoY29uZmlnLnRlbXBsYXRlUHJvdmlkZXIsIHBhcmFtcywgY29udGV4dCkpXG4gICAgICAgICAgOiBpc0RlZmluZWQoY29uZmlnLmNvbXBvbmVudClcbiAgICAgICAgICAgID8gYXNDb21wb25lbnQoY29uZmlnLmNvbXBvbmVudClcbiAgICAgICAgICAgIDogaXNEZWZpbmVkKGNvbmZpZy5jb21wb25lbnRQcm92aWRlcilcbiAgICAgICAgICAgICAgPyBhc0NvbXBvbmVudCh0aGlzLmZyb21Db21wb25lbnRQcm92aWRlcihjb25maWcuY29tcG9uZW50UHJvdmlkZXIsIHBhcmFtcywgY29udGV4dCkpXG4gICAgICAgICAgICAgIDogYXNUZW1wbGF0ZShkZWZhdWx0VGVtcGxhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB0ZW1wbGF0ZSBmcm9tIGEgc3RyaW5nIG9yIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0gdGVtcGxhdGUgaHRtbCB0ZW1wbGF0ZSBhcyBhIHN0cmluZyBvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gaHRtbCB0ZW1wbGF0ZSBhcyBhIHN0cmluZy5cbiAgICogQHBhcmFtIHBhcmFtcyBQYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIHRlbXBsYXRlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd8b2JqZWN0fSBUaGUgdGVtcGxhdGUgaHRtbCBhcyBhIHN0cmluZywgb3IgYSBwcm9taXNlIGZvciB0aGF0XG4gICAqIHN0cmluZy5cbiAgICovXG4gIGZyb21TdHJpbmcodGVtcGxhdGU6IHN0cmluZyB8IEZ1bmN0aW9uLCBwYXJhbXM/OiBSYXdQYXJhbXMpIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbih0ZW1wbGF0ZSkgPyAoPGFueT50ZW1wbGF0ZSkocGFyYW1zKSA6IHRlbXBsYXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWRzIGEgdGVtcGxhdGUgZnJvbSB0aGUgYSBVUkwgdmlhIGAkaHR0cGAgYW5kIGAkdGVtcGxhdGVDYWNoZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfEZ1bmN0aW9ufSB1cmwgdXJsIG9mIHRoZSB0ZW1wbGF0ZSB0byBsb2FkLCBvciBhIGZ1bmN0aW9uXG4gICAqIHRoYXQgcmV0dXJucyBhIHVybC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyBQYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIHVybCBmdW5jdGlvbi5cbiAgICogQHJldHVybiB7c3RyaW5nfFByb21pc2UuPHN0cmluZz59IFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nLCBvciBhIHByb21pc2VcbiAgICogZm9yIHRoYXQgc3RyaW5nLlxuICAgKi9cbiAgZnJvbVVybCh1cmw6IHN0cmluZyB8IEZ1bmN0aW9uLCBwYXJhbXM6IGFueSkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHVybCkpIHVybCA9ICg8YW55PnVybCkocGFyYW1zKTtcbiAgICBpZiAodXJsID09IG51bGwpIHJldHVybiBudWxsO1xuXG4gICAgaWYgKHRoaXMuX3VzZUh0dHApIHtcbiAgICAgIHJldHVybiB0aGlzLiRodHRwXG4gICAgICAgIC5nZXQodXJsLCB7IGNhY2hlOiB0aGlzLiR0ZW1wbGF0ZUNhY2hlLCBoZWFkZXJzOiB7IEFjY2VwdDogJ3RleHQvaHRtbCcgfSB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy4kdGVtcGxhdGVSZXF1ZXN0KHVybCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHRlbXBsYXRlIGJ5IGludm9raW5nIGFuIGluamVjdGFibGUgcHJvdmlkZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBwcm92aWRlciBGdW5jdGlvbiB0byBpbnZva2UgdmlhIGBsb2NhbHNgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGluamVjdEZuIGEgZnVuY3Rpb24gdXNlZCB0byBpbnZva2UgdGhlIHRlbXBsYXRlIHByb3ZpZGVyXG4gICAqIEByZXR1cm4ge3N0cmluZ3xQcm9taXNlLjxzdHJpbmc+fSBUaGUgdGVtcGxhdGUgaHRtbCBhcyBhIHN0cmluZywgb3IgYSBwcm9taXNlXG4gICAqIGZvciB0aGF0IHN0cmluZy5cbiAgICovXG4gIGZyb21Qcm92aWRlcihwcm92aWRlcjogSUluamVjdGFibGUsIHBhcmFtczogYW55LCBjb250ZXh0OiBSZXNvbHZlQ29udGV4dCkge1xuICAgIGNvbnN0IGRlcHMgPSBzZXJ2aWNlcy4kaW5qZWN0b3IuYW5ub3RhdGUocHJvdmlkZXIpO1xuICAgIGNvbnN0IHByb3ZpZGVyRm4gPSBpc0FycmF5KHByb3ZpZGVyKSA/IHRhaWwoPGFueVtdPnByb3ZpZGVyKSA6IHByb3ZpZGVyO1xuICAgIGNvbnN0IHJlc29sdmFibGUgPSBuZXcgUmVzb2x2YWJsZSgnJywgPEZ1bmN0aW9uPnByb3ZpZGVyRm4sIGRlcHMpO1xuICAgIHJldHVybiByZXNvbHZhYmxlLmdldChjb250ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29tcG9uZW50J3MgdGVtcGxhdGUgYnkgaW52b2tpbmcgYW4gaW5qZWN0YWJsZSBwcm92aWRlciBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHByb3ZpZGVyIEZ1bmN0aW9uIHRvIGludm9rZSB2aWEgYGxvY2Fsc2BcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW5qZWN0Rm4gYSBmdW5jdGlvbiB1c2VkIHRvIGludm9rZSB0aGUgdGVtcGxhdGUgcHJvdmlkZXJcbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdGVtcGxhdGUgaHRtbCBhcyBhIHN0cmluZzogXCI8Y29tcG9uZW50LW5hbWUgaW5wdXQxPSc6OiRyZXNvbHZlLmZvbyc+PC9jb21wb25lbnQtbmFtZT5cIi5cbiAgICovXG4gIGZyb21Db21wb25lbnRQcm92aWRlcihwcm92aWRlcjogSUluamVjdGFibGUsIHBhcmFtczogYW55LCBjb250ZXh0OiBSZXNvbHZlQ29udGV4dCkge1xuICAgIGNvbnN0IGRlcHMgPSBzZXJ2aWNlcy4kaW5qZWN0b3IuYW5ub3RhdGUocHJvdmlkZXIpO1xuICAgIGNvbnN0IHByb3ZpZGVyRm4gPSBpc0FycmF5KHByb3ZpZGVyKSA/IHRhaWwoPGFueVtdPnByb3ZpZGVyKSA6IHByb3ZpZGVyO1xuICAgIGNvbnN0IHJlc29sdmFibGUgPSBuZXcgUmVzb2x2YWJsZSgnJywgPEZ1bmN0aW9uPnByb3ZpZGVyRm4sIGRlcHMpO1xuICAgIHJldHVybiByZXNvbHZhYmxlLmdldChjb250ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdGVtcGxhdGUgZnJvbSBhIGNvbXBvbmVudCdzIG5hbWVcbiAgICpcbiAgICogVGhpcyBpbXBsZW1lbnRzIHJvdXRlLXRvLWNvbXBvbmVudC5cbiAgICogSXQgd29ya3MgYnkgcmV0cmlldmluZyB0aGUgY29tcG9uZW50IChkaXJlY3RpdmUpIG1ldGFkYXRhIGZyb20gdGhlIGluamVjdG9yLlxuICAgKiBJdCBhbmFseXNlcyB0aGUgY29tcG9uZW50J3MgYmluZGluZ3MsIHRoZW4gY29uc3RydWN0cyBhIHRlbXBsYXRlIHRoYXQgaW5zdGFudGlhdGVzIHRoZSBjb21wb25lbnQuXG4gICAqIFRoZSB0ZW1wbGF0ZSB3aXJlcyBpbnB1dCBhbmQgb3V0cHV0IGJpbmRpbmdzIHRvIHJlc29sdmVzIG9yIGZyb20gdGhlIHBhcmVudCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB1aVZpZXcge29iamVjdH0gVGhlIHBhcmVudCB1aS12aWV3IChmb3IgYmluZGluZyBvdXRwdXRzIHRvIGNhbGxiYWNrcylcbiAgICogQHBhcmFtIGNvbnRleHQgVGhlIFJlc29sdmVDb250ZXh0IChmb3IgYmluZGluZyBvdXRwdXRzIHRvIGNhbGxiYWNrcyByZXR1cm5lZCBmcm9tIHJlc29sdmVzKVxuICAgKiBAcGFyYW0gY29tcG9uZW50IHtzdHJpbmd9IENvbXBvbmVudCdzIG5hbWUgaW4gY2FtZWwgY2FzZS5cbiAgICogQHBhcmFtIGJpbmRpbmdzIEFuIG9iamVjdCBkZWZpbmluZyB0aGUgY29tcG9uZW50J3MgYmluZGluZ3M6IHtmb286ICc8J31cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdGVtcGxhdGUgYXMgYSBzdHJpbmc6IFwiPGNvbXBvbmVudC1uYW1lIGlucHV0MT0nOjokcmVzb2x2ZS5mb28nPjwvY29tcG9uZW50LW5hbWU+XCIuXG4gICAqL1xuICBtYWtlQ29tcG9uZW50VGVtcGxhdGUodWlWaWV3OiBJQXVnbWVudGVkSlF1ZXJ5LCBjb250ZXh0OiBSZXNvbHZlQ29udGV4dCwgY29tcG9uZW50OiBzdHJpbmcsIGJpbmRpbmdzPzogYW55KSB7XG4gICAgYmluZGluZ3MgPSBiaW5kaW5ncyB8fCB7fTtcblxuICAgIC8vIEJpbmQgb25jZSBwcmVmaXhcbiAgICBjb25zdCBwcmVmaXggPSBhbmd1bGFyLnZlcnNpb24ubWlub3IgPj0gMyA/ICc6OicgOiAnJztcbiAgICAvLyBDb252ZXJ0IHRvIGtlYm9iIG5hbWUuIEFkZCB4LSBwcmVmaXggaWYgdGhlIHN0cmluZyBzdGFydHMgd2l0aCBgeC1gIG9yIGBkYXRhLWBcbiAgICBjb25zdCBrZWJvYiA9IChjYW1lbENhc2U6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3Qga2Vib2JlZCA9IGtlYm9iU3RyaW5nKGNhbWVsQ2FzZSk7XG4gICAgICByZXR1cm4gL14oeHxkYXRhKS0vLmV4ZWMoa2Vib2JlZCkgPyBgeC0ke2tlYm9iZWR9YCA6IGtlYm9iZWQ7XG4gICAgfTtcblxuICAgIGNvbnN0IGF0dHJpYnV0ZVRwbCA9IChpbnB1dDogQmluZGluZ1R1cGxlKSA9PiB7XG4gICAgICBjb25zdCB7IG5hbWUsIHR5cGUgfSA9IGlucHV0O1xuICAgICAgY29uc3QgYXR0ck5hbWUgPSBrZWJvYihuYW1lKTtcbiAgICAgIC8vIElmIHRoZSB1aS12aWV3IGhhcyBhbiBhdHRyaWJ1dGUgd2hpY2ggbWF0Y2hlcyBhIGJpbmRpbmcgb24gdGhlIHJvdXRlZCBjb21wb25lbnRcbiAgICAgIC8vIHRoZW4gcGFzcyB0aGF0IGF0dHJpYnV0ZSB0aHJvdWdoIHRvIHRoZSByb3V0ZWQgY29tcG9uZW50IHRlbXBsYXRlLlxuICAgICAgLy8gUHJlZmVyIHVpLXZpZXcgd2lyZWQgbWFwcGluZ3MgdG8gcmVzb2x2ZSBkYXRhLCB1bmxlc3MgdGhlIHJlc29sdmUgd2FzIGV4cGxpY2l0bHkgYm91bmQgdXNpbmcgYGJpbmRpbmdzOmBcbiAgICAgIGlmICh1aVZpZXcuYXR0cihhdHRyTmFtZSkgJiYgIWJpbmRpbmdzW25hbWVdKSByZXR1cm4gYCR7YXR0ck5hbWV9PScke3VpVmlldy5hdHRyKGF0dHJOYW1lKX0nYDtcblxuICAgICAgY29uc3QgcmVzb2x2ZU5hbWUgPSBiaW5kaW5nc1tuYW1lXSB8fCBuYW1lO1xuICAgICAgLy8gUHJlLWV2YWx1YXRlIHRoZSBleHByZXNzaW9uIGZvciBcIkBcIiBiaW5kaW5ncyBieSBlbmNsb3NpbmcgaW4ge3sgfX1cbiAgICAgIC8vIHNvbWUtYXR0cj1cInt7IDo6JHJlc29sdmUuc29tZVJlc29sdmVOYW1lIH19XCJcbiAgICAgIGlmICh0eXBlID09PSAnQCcpIHJldHVybiBgJHthdHRyTmFtZX09J3t7JHtwcmVmaXh9JHJlc29sdmUuJHtyZXNvbHZlTmFtZX19fSdgO1xuXG4gICAgICAvLyBXaXJlIFwiJlwiIGNhbGxiYWNrcyB0byByZXNvbHZlcyB0aGF0IHJldHVybiBhIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICAvLyBHZXQgdGhlIHJlc3VsdCBvZiB0aGUgcmVzb2x2ZSAoc2hvdWxkIGJlIGEgZnVuY3Rpb24pIGFuZCBhbm5vdGF0ZSBpdCB0byBnZXQgaXRzIGFyZ3VtZW50cy5cbiAgICAgIC8vIHNvbWUtYXR0cj1cIiRyZXNvbHZlLnNvbWVSZXNvbHZlUmVzdWx0TmFtZShmb28sIGJhcilcIlxuICAgICAgaWYgKHR5cGUgPT09ICcmJykge1xuICAgICAgICBjb25zdCByZXMgPSBjb250ZXh0LmdldFJlc29sdmFibGUocmVzb2x2ZU5hbWUpO1xuICAgICAgICBjb25zdCBmbiA9IHJlcyAmJiByZXMuZGF0YTtcbiAgICAgICAgY29uc3QgYXJncyA9IChmbiAmJiBzZXJ2aWNlcy4kaW5qZWN0b3IuYW5ub3RhdGUoZm4pKSB8fCBbXTtcbiAgICAgICAgLy8gYWNjb3VudCBmb3IgYXJyYXkgc3R5bGUgaW5qZWN0aW9uLCBpLmUuLCBbJ2ZvbycsIGZ1bmN0aW9uKGZvbykge31dXG4gICAgICAgIGNvbnN0IGFycmF5SWR4U3RyID0gaXNBcnJheShmbikgPyBgWyR7Zm4ubGVuZ3RoIC0gMX1dYCA6ICcnO1xuICAgICAgICByZXR1cm4gYCR7YXR0ck5hbWV9PSckcmVzb2x2ZS4ke3Jlc29sdmVOYW1lfSR7YXJyYXlJZHhTdHJ9KCR7YXJncy5qb2luKCcsJyl9KSdgO1xuICAgICAgfVxuXG4gICAgICAvLyBzb21lLWF0dHI9XCI6OiRyZXNvbHZlLnNvbWVSZXNvbHZlTmFtZVwiXG4gICAgICByZXR1cm4gYCR7YXR0ck5hbWV9PScke3ByZWZpeH0kcmVzb2x2ZS4ke3Jlc29sdmVOYW1lfSdgO1xuICAgIH07XG5cbiAgICBjb25zdCBhdHRycyA9IGdldENvbXBvbmVudEJpbmRpbmdzKGNvbXBvbmVudClcbiAgICAgIC5tYXAoYXR0cmlidXRlVHBsKVxuICAgICAgLmpvaW4oJyAnKTtcbiAgICBjb25zdCBrZWJvYk5hbWUgPSBrZWJvYihjb21wb25lbnQpO1xuICAgIHJldHVybiBgPCR7a2Vib2JOYW1lfSAke2F0dHJzfT48LyR7a2Vib2JOYW1lfT5gO1xuICB9XG59XG5cbi8vIEdldHMgYWxsIHRoZSBkaXJlY3RpdmUocyknIGlucHV0cyAoJ0AnLCAnPScsIGFuZCAnPCcpIGFuZCBvdXRwdXRzICgnJicpXG5mdW5jdGlvbiBnZXRDb21wb25lbnRCaW5kaW5ncyhuYW1lOiBzdHJpbmcpIHtcbiAgY29uc3QgY21wRGVmcyA9IDxhbnlbXT5zZXJ2aWNlcy4kaW5qZWN0b3IuZ2V0KG5hbWUgKyAnRGlyZWN0aXZlJyk7IC8vIGNvdWxkIGJlIG11bHRpcGxlXG4gIGlmICghY21wRGVmcyB8fCAhY21wRGVmcy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGZpbmQgY29tcG9uZW50IG5hbWVkICcke25hbWV9J2ApO1xuICByZXR1cm4gY21wRGVmcy5tYXAoZ2V0QmluZGluZ3MpLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG59XG5cbi8vIEdpdmVuIGEgZGlyZWN0aXZlIGRlZmluaXRpb24sIGZpbmQgaXRzIG9iamVjdCBpbnB1dCBhdHRyaWJ1dGVzXG4vLyBVc2UgZGlmZmVyZW50IHByb3BlcnRpZXMsIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiBkaXJlY3RpdmUgKGNvbXBvbmVudCwgYmluZFRvQ29udHJvbGxlciwgbm9ybWFsKVxuY29uc3QgZ2V0QmluZGluZ3MgPSAoZGVmOiBhbnkpID0+IHtcbiAgaWYgKGlzT2JqZWN0KGRlZi5iaW5kVG9Db250cm9sbGVyKSkgcmV0dXJuIHNjb3BlQmluZGluZ3MoZGVmLmJpbmRUb0NvbnRyb2xsZXIpO1xuICByZXR1cm4gc2NvcGVCaW5kaW5ncyhkZWYuc2NvcGUpO1xufTtcblxuaW50ZXJmYWNlIEJpbmRpbmdUdXBsZSB7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xufVxuXG4vLyBmb3IgbmcgMS4yIHN0eWxlLCBwcm9jZXNzIHRoZSBzY29wZTogeyBpbnB1dDogXCI9Zm9vXCIgfVxuLy8gZm9yIG5nIDEuMyB0aHJvdWdoIG5nIDEuNSwgcHJvY2VzcyB0aGUgY29tcG9uZW50J3MgYmluZFRvQ29udHJvbGxlcjogeyBpbnB1dDogXCI9Zm9vXCIgfSBvYmplY3RcbmNvbnN0IHNjb3BlQmluZGluZ3MgPSAoYmluZGluZ3NPYmo6IE9iaikgPT5cbiAgT2JqZWN0LmtleXMoYmluZGluZ3NPYmogfHwge30pXG4gICAgLy8gWyAnaW5wdXQnLCBbICc9Zm9vJywgJz0nLCAnZm9vJyBdIF1cbiAgICAubWFwKGtleSA9PiBba2V5LCAvXihbPTxAJl0pWz9dPyguKikvLmV4ZWMoYmluZGluZ3NPYmpba2V5XSldKVxuICAgIC8vIHNraXAgbWFsZm9ybWVkIHZhbHVlc1xuICAgIC5maWx0ZXIodHVwbGUgPT4gaXNEZWZpbmVkKHR1cGxlKSAmJiBpc0FycmF5KHR1cGxlWzFdKSlcbiAgICAvLyB7IG5hbWU6ICgnZm9vJyB8fCAnaW5wdXQnKSwgdHlwZTogJz0nIH1cbiAgICAubWFwKHR1cGxlID0+ICh7IG5hbWU6IHR1cGxlWzFdWzJdIHx8IHR1cGxlWzBdLCB0eXBlOiB0dXBsZVsxXVsxXSB9IGFzIEJpbmRpbmdUdXBsZSkpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9hbmd1bGFyanMvc3JjL3RlbXBsYXRlRmFjdG9yeS50cyIsIi8qKiBAbW9kdWxlIG5nMSAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7XG4gIHZhbCxcbiAgaXNPYmplY3QsXG4gIGNyZWF0ZVByb3h5RnVuY3Rpb25zLFxuICBCdWlsZGVyRnVuY3Rpb24sXG4gIFN0YXRlUmVnaXN0cnksXG4gIFN0YXRlU2VydmljZSxcbiAgT25JbnZhbGlkQ2FsbGJhY2ssXG59IGZyb20gJ0B1aXJvdXRlci9jb3JlJztcbmltcG9ydCB7IE5nMVN0YXRlRGVjbGFyYXRpb24gfSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbi8qKlxuICogVGhlIEFuZ3VsYXIgMSBgU3RhdGVQcm92aWRlcmBcbiAqXG4gKiBUaGUgYCRzdGF0ZVByb3ZpZGVyYCB3b3JrcyBzaW1pbGFyIHRvIEFuZ3VsYXIncyB2MSByb3V0ZXIsIGJ1dCBpdCBmb2N1c2VzIHB1cmVseVxuICogb24gc3RhdGUuXG4gKlxuICogQSBzdGF0ZSBjb3JyZXNwb25kcyB0byBhIFwicGxhY2VcIiBpbiB0aGUgYXBwbGljYXRpb24gaW4gdGVybXMgb2YgdGhlIG92ZXJhbGwgVUkgYW5kXG4gKiBuYXZpZ2F0aW9uLiBBIHN0YXRlIGRlc2NyaWJlcyAodmlhIHRoZSBjb250cm9sbGVyIC8gdGVtcGxhdGUgLyB2aWV3IHByb3BlcnRpZXMpIHdoYXRcbiAqIHRoZSBVSSBsb29rcyBsaWtlIGFuZCBkb2VzIGF0IHRoYXQgcGxhY2UuXG4gKlxuICogU3RhdGVzIG9mdGVuIGhhdmUgdGhpbmdzIGluIGNvbW1vbiwgYW5kIHRoZSBwcmltYXJ5IHdheSBvZiBmYWN0b3Jpbmcgb3V0IHRoZXNlXG4gKiBjb21tb25hbGl0aWVzIGluIHRoaXMgbW9kZWwgaXMgdmlhIHRoZSBzdGF0ZSBoaWVyYXJjaHksIGkuZS4gcGFyZW50L2NoaWxkIHN0YXRlcyBha2FcbiAqIG5lc3RlZCBzdGF0ZXMuXG4gKlxuICogVGhlIGAkc3RhdGVQcm92aWRlcmAgcHJvdmlkZXMgaW50ZXJmYWNlcyB0byBkZWNsYXJlIHRoZXNlIHN0YXRlcyBmb3IgeW91ciBhcHAuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdGF0ZVByb3ZpZGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBzdGF0ZVJlZ2lzdHJ5OiBTdGF0ZVJlZ2lzdHJ5LCBwcml2YXRlIHN0YXRlU2VydmljZTogU3RhdGVTZXJ2aWNlKSB7XG4gICAgY3JlYXRlUHJveHlGdW5jdGlvbnModmFsKFN0YXRlUHJvdmlkZXIucHJvdG90eXBlKSwgdGhpcywgdmFsKHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvcmF0ZXMgc3RhdGVzIHdoZW4gdGhleSBhcmUgcmVnaXN0ZXJlZFxuICAgKlxuICAgKiBBbGxvd3MgeW91IHRvIGV4dGVuZCAoY2FyZWZ1bGx5KSBvciBvdmVycmlkZSAoYXQgeW91ciBvd24gcGVyaWwpIHRoZVxuICAgKiBgc3RhdGVCdWlsZGVyYCBvYmplY3QgdXNlZCBpbnRlcm5hbGx5IGJ5IFtbU3RhdGVSZWdpc3RyeV1dLlxuICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGFkZCBjdXN0b20gZnVuY3Rpb25hbGl0eSB0byB1aS1yb3V0ZXIsXG4gICAqIGZvciBleGFtcGxlIGluZmVycmluZyB0ZW1wbGF0ZVVybCBiYXNlZCBvbiB0aGUgc3RhdGUgbmFtZS5cbiAgICpcbiAgICogV2hlbiBwYXNzaW5nIG9ubHkgYSBuYW1lLCBpdCByZXR1cm5zIHRoZSBjdXJyZW50IChvcmlnaW5hbCBvciBkZWNvcmF0ZWQpIGJ1aWxkZXJcbiAgICogZnVuY3Rpb24gdGhhdCBtYXRjaGVzIGBuYW1lYC5cbiAgICpcbiAgICogVGhlIGJ1aWxkZXIgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIGRlY29yYXRlZCBhcmUgbGlzdGVkIGJlbG93LiBUaG91Z2ggbm90IGFsbFxuICAgKiBuZWNlc3NhcmlseSBoYXZlIGEgZ29vZCB1c2UgY2FzZSBmb3IgZGVjb3JhdGlvbiwgdGhhdCBpcyB1cCB0byB5b3UgdG8gZGVjaWRlLlxuICAgKlxuICAgKiBJbiBhZGRpdGlvbiwgdXNlcnMgY2FuIGF0dGFjaCBjdXN0b20gZGVjb3JhdG9ycywgd2hpY2ggd2lsbCBnZW5lcmF0ZSBuZXdcbiAgICogcHJvcGVydGllcyB3aXRoaW4gdGhlIHN0YXRlJ3MgaW50ZXJuYWwgZGVmaW5pdGlvbi4gVGhlcmUgaXMgY3VycmVudGx5IG5vIGNsZWFyXG4gICAqIHVzZS1jYXNlIGZvciB0aGlzIGJleW9uZCBhY2Nlc3NpbmcgaW50ZXJuYWwgc3RhdGVzIChpLmUuICRzdGF0ZS4kY3VycmVudCksXG4gICAqIGhvd2V2ZXIsIGV4cGVjdCB0aGlzIHRvIGJlY29tZSBpbmNyZWFzaW5nbHkgcmVsZXZhbnQgYXMgd2UgaW50cm9kdWNlIGFkZGl0aW9uYWxcbiAgICogbWV0YS1wcm9ncmFtbWluZyBmZWF0dXJlcy5cbiAgICpcbiAgICogKipXYXJuaW5nKio6IERlY29yYXRvcnMgc2hvdWxkIG5vdCBiZSBpbnRlcmRlcGVuZGVudCBiZWNhdXNlIHRoZSBvcmRlciBvZlxuICAgKiBleGVjdXRpb24gb2YgdGhlIGJ1aWxkZXIgZnVuY3Rpb25zIGluIG5vbi1kZXRlcm1pbmlzdGljLiBCdWlsZGVyIGZ1bmN0aW9uc1xuICAgKiBzaG91bGQgb25seSBiZSBkZXBlbmRlbnQgb24gdGhlIHN0YXRlIGRlZmluaXRpb24gb2JqZWN0IGFuZCBzdXBlciBmdW5jdGlvbi5cbiAgICpcbiAgICpcbiAgICogRXhpc3RpbmcgYnVpbGRlciBmdW5jdGlvbnMgYW5kIGN1cnJlbnQgcmV0dXJuIHZhbHVlczpcbiAgICpcbiAgICogLSAqKnBhcmVudCoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIHRoZSBwYXJlbnQgc3RhdGUgb2JqZWN0LlxuICAgKiAtICoqZGF0YSoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIHN0YXRlIGRhdGEsIGluY2x1ZGluZyBhbnkgaW5oZXJpdGVkIGRhdGEgdGhhdCBpcyBub3RcbiAgICogICBvdmVycmlkZGVuIGJ5IG93biB2YWx1ZXMgKGlmIGFueSkuXG4gICAqIC0gKip1cmwqKiBge29iamVjdH1gIC0gcmV0dXJucyBhIHtAbGluayB1aS5yb3V0ZXIudXRpbC50eXBlOlVybE1hdGNoZXIgVXJsTWF0Y2hlcn1cbiAgICogICBvciBgbnVsbGAuXG4gICAqIC0gKipuYXZpZ2FibGUqKiBge29iamVjdH1gIC0gcmV0dXJucyBjbG9zZXN0IGFuY2VzdG9yIHN0YXRlIHRoYXQgaGFzIGEgVVJMIChha2EgaXNcbiAgICogICBuYXZpZ2FibGUpLlxuICAgKiAtICoqcGFyYW1zKiogYHtvYmplY3R9YCAtIHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGUgcGFyYW1zIHRoYXQgYXJlIGVuc3VyZWQgdG9cbiAgICogICBiZSBhIHN1cGVyLXNldCBvZiBwYXJlbnQncyBwYXJhbXMuXG4gICAqIC0gKip2aWV3cyoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGEgdmlld3Mgb2JqZWN0IHdoZXJlIGVhY2gga2V5IGlzIGFuIGFic29sdXRlIHZpZXdcbiAgICogICBuYW1lIChpLmUuIFwidmlld05hbWVAc3RhdGVOYW1lXCIpIGFuZCBlYWNoIHZhbHVlIGlzIHRoZSBjb25maWcgb2JqZWN0XG4gICAqICAgKHRlbXBsYXRlLCBjb250cm9sbGVyKSBmb3IgdGhlIHZpZXcuIEV2ZW4gd2hlbiB5b3UgZG9uJ3QgdXNlIHRoZSB2aWV3cyBvYmplY3RcbiAgICogICBleHBsaWNpdGx5IG9uIGEgc3RhdGUgY29uZmlnLCBvbmUgaXMgc3RpbGwgY3JlYXRlZCBmb3IgeW91IGludGVybmFsbHkuXG4gICAqICAgU28gYnkgZGVjb3JhdGluZyB0aGlzIGJ1aWxkZXIgZnVuY3Rpb24geW91IGhhdmUgYWNjZXNzIHRvIGRlY29yYXRpbmcgdGVtcGxhdGVcbiAgICogICBhbmQgY29udHJvbGxlciBwcm9wZXJ0aWVzLlxuICAgKiAtICoqb3duUGFyYW1zKiogYHtvYmplY3R9YCAtIHJldHVybnMgYW4gYXJyYXkgb2YgcGFyYW1zIHRoYXQgYmVsb25nIHRvIHRoZSBzdGF0ZSxcbiAgICogICBub3QgaW5jbHVkaW5nIGFueSBwYXJhbXMgZGVmaW5lZCBieSBhbmNlc3RvciBzdGF0ZXMuXG4gICAqIC0gKipwYXRoKiogYHtzdHJpbmd9YCAtIHJldHVybnMgdGhlIGZ1bGwgcGF0aCBmcm9tIHRoZSByb290IGRvd24gdG8gdGhpcyBzdGF0ZS5cbiAgICogICBOZWVkZWQgZm9yIHN0YXRlIGFjdGl2YXRpb24uXG4gICAqIC0gKippbmNsdWRlcyoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGFuIG9iamVjdCB0aGF0IGluY2x1ZGVzIGV2ZXJ5IHN0YXRlIHRoYXRcbiAgICogICB3b3VsZCBwYXNzIGEgYCRzdGF0ZS5pbmNsdWRlcygpYCB0ZXN0LlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIE92ZXJyaWRlIHRoZSBpbnRlcm5hbCAndmlld3MnIGJ1aWxkZXIgd2l0aCBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIHN0YXRlXG4gICAqIGRlZmluaXRpb24sIGFuZCBhIHJlZmVyZW5jZSB0byB0aGUgaW50ZXJuYWwgZnVuY3Rpb24gYmVpbmcgb3ZlcnJpZGRlbjpcbiAgICogYGBganNcbiAgICogJHN0YXRlUHJvdmlkZXIuZGVjb3JhdG9yKCd2aWV3cycsIGZ1bmN0aW9uIChzdGF0ZSwgcGFyZW50KSB7XG4gICAqICAgbGV0IHJlc3VsdCA9IHt9LFxuICAgKiAgICAgICB2aWV3cyA9IHBhcmVudChzdGF0ZSk7XG4gICAqXG4gICAqICAgYW5ndWxhci5mb3JFYWNoKHZpZXdzLCBmdW5jdGlvbiAoY29uZmlnLCBuYW1lKSB7XG4gICAqICAgICBsZXQgYXV0b05hbWUgPSAoc3RhdGUubmFtZSArICcuJyArIG5hbWUpLnJlcGxhY2UoJy4nLCAnLycpO1xuICAgKiAgICAgY29uZmlnLnRlbXBsYXRlVXJsID0gY29uZmlnLnRlbXBsYXRlVXJsIHx8ICcvcGFydGlhbHMvJyArIGF1dG9OYW1lICsgJy5odG1sJztcbiAgICogICAgIHJlc3VsdFtuYW1lXSA9IGNvbmZpZztcbiAgICogICB9KTtcbiAgICogICByZXR1cm4gcmVzdWx0O1xuICAgKiB9KTtcbiAgICpcbiAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2hvbWUnLCB7XG4gICAqICAgdmlld3M6IHtcbiAgICogICAgICdjb250YWN0Lmxpc3QnOiB7IGNvbnRyb2xsZXI6ICdMaXN0Q29udHJvbGxlcicgfSxcbiAgICogICAgICdjb250YWN0Lml0ZW0nOiB7IGNvbnRyb2xsZXI6ICdJdGVtQ29udHJvbGxlcicgfVxuICAgKiAgIH1cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBBdXRvLXBvcHVsYXRlcyBsaXN0IGFuZCBpdGVtIHZpZXdzIHdpdGggL3BhcnRpYWxzL2hvbWUvY29udGFjdC9saXN0Lmh0bWwsXG4gICAqIC8vIGFuZCAvcGFydGlhbHMvaG9tZS9jb250YWN0L2l0ZW0uaHRtbCwgcmVzcGVjdGl2ZWx5LlxuICAgKiAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBidWlsZGVyIGZ1bmN0aW9uIHRvIGRlY29yYXRlLlxuICAgKiBAcGFyYW0ge29iamVjdH0gZnVuYyBBIGZ1bmN0aW9uIHRoYXQgaXMgcmVzcG9uc2libGUgZm9yIGRlY29yYXRpbmcgdGhlIG9yaWdpbmFsXG4gICAqIGJ1aWxkZXIgZnVuY3Rpb24uIFRoZSBmdW5jdGlvbiByZWNlaXZlcyB0d28gcGFyYW1ldGVyczpcbiAgICpcbiAgICogICAtIGB7b2JqZWN0fWAgLSBzdGF0ZSAtIFRoZSBzdGF0ZSBjb25maWcgb2JqZWN0LlxuICAgKiAgIC0gYHtvYmplY3R9YCAtIHN1cGVyIC0gVGhlIG9yaWdpbmFsIGJ1aWxkZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIEByZXR1cm4ge29iamVjdH0gJHN0YXRlUHJvdmlkZXIgLSAkc3RhdGVQcm92aWRlciBpbnN0YW5jZVxuICAgKi9cbiAgZGVjb3JhdG9yKG5hbWU6IHN0cmluZywgZnVuYzogQnVpbGRlckZ1bmN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IobmFtZSwgZnVuYykgfHwgdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBzdGF0ZVxuICAgKlxuICAgKiAjIyMgVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRvIFtbU3RhdGVSZWdpc3RyeS5yZWdpc3Rlcl1dLlxuICAgKlxuICAgKiBSZWdpc3RlcnMgYSBzdGF0ZSBjb25maWd1cmF0aW9uIHVuZGVyIGEgZ2l2ZW4gc3RhdGUgbmFtZS5cbiAgICogVGhlIHN0YXRlQ29uZmlnIG9iamVjdCBoYXMgdGhlIGZvbGxvd2luZyBhY2NlcHRhYmxlIHByb3BlcnRpZXMuXG4gICAqXG4gICAqIDxhIGlkPSd0ZW1wbGF0ZSc+PC9hPlxuICAgKlxuICAgKiAtICoqYHRlbXBsYXRlYCoqIC0ge3N0cmluZ3xmdW5jdGlvbj19IC0gaHRtbCB0ZW1wbGF0ZSBhcyBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJuc1xuICAgKiAgIGFuIGh0bWwgdGVtcGxhdGUgYXMgYSBzdHJpbmcgd2hpY2ggc2hvdWxkIGJlIHVzZWQgYnkgdGhlIHVpVmlldyBkaXJlY3RpdmVzLiBUaGlzIHByb3BlcnR5XG4gICAqICAgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIHRlbXBsYXRlVXJsLlxuICAgKlxuICAgKiAgIElmIGB0ZW1wbGF0ZWAgaXMgYSBmdW5jdGlvbiwgaXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gICAqXG4gICAqICAgLSB7YXJyYXkuJmx0O29iamVjdCZndDt9IC0gc3RhdGUgcGFyYW1ldGVycyBleHRyYWN0ZWQgZnJvbSB0aGUgY3VycmVudCAkbG9jYXRpb24ucGF0aCgpIGJ5XG4gICAqICAgICBhcHBseWluZyB0aGUgY3VycmVudCBzdGF0ZVxuICAgKlxuICAgKiA8YSBpZD0ndGVtcGxhdGVVcmwnPjwvYT5cbiAgICpcbiAgICogLSAqKmB0ZW1wbGF0ZVVybGAqKiAtIHtzdHJpbmd8ZnVuY3Rpb249fSAtIHBhdGggb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcGF0aCB0byBhbiBodG1sXG4gICAqICAgdGVtcGxhdGUgdGhhdCBzaG91bGQgYmUgdXNlZCBieSB1aVZpZXcuXG4gICAqXG4gICAqICAgSWYgYHRlbXBsYXRlVXJsYCBpcyBhIGZ1bmN0aW9uLCBpdCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICpcbiAgICogICAtIHthcnJheS4mbHQ7b2JqZWN0Jmd0O30gLSBzdGF0ZSBwYXJhbWV0ZXJzIGV4dHJhY3RlZCBmcm9tIHRoZSBjdXJyZW50ICRsb2NhdGlvbi5wYXRoKCkgYnlcbiAgICogICAgIGFwcGx5aW5nIHRoZSBjdXJyZW50IHN0YXRlXG4gICAqXG4gICAqIDxhIGlkPSd0ZW1wbGF0ZVByb3ZpZGVyJz48L2E+XG4gICAqXG4gICAqIC0gKipgdGVtcGxhdGVQcm92aWRlcmAqKiAtIHtmdW5jdGlvbj19IC0gUHJvdmlkZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIEhUTUwgY29udGVudFxuICAgKiAgIHN0cmluZy5cbiAgICpcbiAgICogPGEgaWQ9J2NvbnRyb2xsZXInPjwvYT5cbiAgICpcbiAgICogLSAqKmBjb250cm9sbGVyYCoqIC0ge3N0cmluZ3xmdW5jdGlvbj19IC0gIENvbnRyb2xsZXIgZm4gdGhhdCBzaG91bGQgYmUgYXNzb2NpYXRlZCB3aXRoIG5ld2x5XG4gICAqICAgcmVsYXRlZCBzY29wZSBvciB0aGUgbmFtZSBvZiBhIHJlZ2lzdGVyZWQgY29udHJvbGxlciBpZiBwYXNzZWQgYXMgYSBzdHJpbmcuXG4gICAqXG4gICAqIDxhIGlkPSdjb250cm9sbGVyUHJvdmlkZXInPjwvYT5cbiAgICpcbiAgICogLSAqKmBjb250cm9sbGVyUHJvdmlkZXJgKiogLSB7ZnVuY3Rpb249fSAtIEluamVjdGFibGUgcHJvdmlkZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zXG4gICAqICAgdGhlIGFjdHVhbCBjb250cm9sbGVyIG9yIHN0cmluZy5cbiAgICpcbiAgICogPGEgaWQ9J2NvbnRyb2xsZXJBcyc+PC9hPlxuICAgKlxuICAgKiAtICoqYGNvbnRyb2xsZXJBc2AqKiDigJMge3N0cmluZz19IOKAkyBBIGNvbnRyb2xsZXIgYWxpYXMgbmFtZS4gSWYgcHJlc2VudCB0aGUgY29udHJvbGxlciB3aWxsIGJlXG4gICAqICAgcHVibGlzaGVkIHRvIHNjb3BlIHVuZGVyIHRoZSBjb250cm9sbGVyQXMgbmFtZS5cbiAgICpcbiAgICogPGEgaWQ9J3Jlc29sdmUnPjwvYT5cbiAgICpcbiAgICogLSAqKmByZXNvbHZlYCoqIC0ge29iamVjdC4mbHQ7c3RyaW5nLCBmdW5jdGlvbiZndDs9fSAtIEFuIG9wdGlvbmFsIG1hcCBvZiBkZXBlbmRlbmNpZXMgd2hpY2hcbiAgICogICBzaG91bGQgYmUgaW5qZWN0ZWQgaW50byB0aGUgY29udHJvbGxlci4gSWYgYW55IG9mIHRoZXNlIGRlcGVuZGVuY2llcyBhcmUgcHJvbWlzZXMsXG4gICAqICAgdGhlIHJvdXRlciB3aWxsIHdhaXQgZm9yIHRoZW0gYWxsIHRvIGJlIHJlc29sdmVkIG9yIG9uZSB0byBiZSByZWplY3RlZCBiZWZvcmUgdGhlXG4gICAqICAgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQuIElmIGFsbCB0aGUgcHJvbWlzZXMgYXJlIHJlc29sdmVkIHN1Y2Nlc3NmdWxseSwgdGhlIHZhbHVlc1xuICAgKiAgIG9mIHRoZSByZXNvbHZlZCBwcm9taXNlcyBhcmUgaW5qZWN0ZWQgYW5kICRzdGF0ZUNoYW5nZVN1Y2Nlc3MgZXZlbnQgaXMgZmlyZWQuIElmIGFueVxuICAgKiAgIG9mIHRoZSBwcm9taXNlcyBhcmUgcmVqZWN0ZWQgdGhlICRzdGF0ZUNoYW5nZUVycm9yIGV2ZW50IGlzIGZpcmVkLiBUaGUgbWFwIG9iamVjdCBpczpcbiAgICpcbiAgICogICAtIGtleSAtIHtzdHJpbmd9OiBuYW1lIG9mIGRlcGVuZGVuY3kgdG8gYmUgaW5qZWN0ZWQgaW50byBjb250cm9sbGVyXG4gICAqICAgLSBmYWN0b3J5IC0ge3N0cmluZ3xmdW5jdGlvbn06IElmIHN0cmluZyB0aGVuIGl0IGlzIGFsaWFzIGZvciBzZXJ2aWNlLiBPdGhlcndpc2UgaWYgZnVuY3Rpb24sXG4gICAqICAgICBpdCBpcyBpbmplY3RlZCBhbmQgcmV0dXJuIHZhbHVlIGl0IHRyZWF0ZWQgYXMgZGVwZW5kZW5jeS4gSWYgcmVzdWx0IGlzIGEgcHJvbWlzZSwgaXQgaXNcbiAgICogICAgIHJlc29sdmVkIGJlZm9yZSBpdHMgdmFsdWUgaXMgaW5qZWN0ZWQgaW50byBjb250cm9sbGVyLlxuICAgKlxuICAgKiA8YSBpZD0ndXJsJz48L2E+XG4gICAqXG4gICAqIC0gKipgdXJsYCoqIC0ge3N0cmluZz19IC0gQSB1cmwgd2l0aCBvcHRpb25hbCBwYXJhbWV0ZXJzLiBXaGVuIGEgc3RhdGUgaXMgbmF2aWdhdGVkIG9yXG4gICAqICAgdHJhbnNpdGlvbmVkIHRvLCB0aGUgYCRzdGF0ZVBhcmFtc2Agc2VydmljZSB3aWxsIGJlIHBvcHVsYXRlZCB3aXRoIGFueVxuICAgKiAgIHBhcmFtZXRlcnMgdGhhdCB3ZXJlIHBhc3NlZC5cbiAgICpcbiAgICogPGEgaWQ9J3BhcmFtcyc+PC9hPlxuICAgKlxuICAgKiAtICoqYHBhcmFtc2AqKiAtIHtvYmplY3Q9fSAtIEFuIGFycmF5IG9mIHBhcmFtZXRlciBuYW1lcyBvciByZWd1bGFyIGV4cHJlc3Npb25zLiBPbmx5XG4gICAqICAgdXNlIHRoaXMgd2l0aGluIGEgc3RhdGUgaWYgeW91IGFyZSBub3QgdXNpbmcgdXJsLiBPdGhlcndpc2UgeW91IGNhbiBzcGVjaWZ5IHlvdXJcbiAgICogICBwYXJhbWV0ZXJzIHdpdGhpbiB0aGUgdXJsLiBXaGVuIGEgc3RhdGUgaXMgbmF2aWdhdGVkIG9yIHRyYW5zaXRpb25lZCB0bywgdGhlXG4gICAqICAgJHN0YXRlUGFyYW1zIHNlcnZpY2Ugd2lsbCBiZSBwb3B1bGF0ZWQgd2l0aCBhbnkgcGFyYW1ldGVycyB0aGF0IHdlcmUgcGFzc2VkLlxuICAgKlxuICAgKiA8YSBpZD0ndmlld3MnPjwvYT5cbiAgICpcbiAgICogLSAqKmB2aWV3c2AqKiAtIHtvYmplY3Q9fSAtIFVzZSB0aGUgdmlld3MgcHJvcGVydHkgdG8gc2V0IHVwIG11bHRpcGxlIHZpZXdzIG9yIHRvIHRhcmdldCB2aWV3c1xuICAgKiAgIG1hbnVhbGx5L2V4cGxpY2l0bHkuXG4gICAqXG4gICAqIDxhIGlkPSdhYnN0cmFjdCc+PC9hPlxuICAgKlxuICAgKiAtICoqYGFic3RyYWN0YCoqIC0ge2Jvb2xlYW49fSAtIEFuIGFic3RyYWN0IHN0YXRlIHdpbGwgbmV2ZXIgYmUgZGlyZWN0bHkgYWN0aXZhdGVkLFxuICAgKiAgIGJ1dCBjYW4gcHJvdmlkZSBpbmhlcml0ZWQgcHJvcGVydGllcyB0byBpdHMgY29tbW9uIGNoaWxkcmVuIHN0YXRlcy5cbiAgICpcbiAgICogPGEgaWQ9J29uRW50ZXInPjwvYT5cbiAgICpcbiAgICogLSAqKmBvbkVudGVyYCoqIC0ge29iamVjdD19IC0gQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIHdoZW4gYSBzdGF0ZSBpcyBlbnRlcmVkLiBHb29kIHdheVxuICAgKiAgIHRvIHRyaWdnZXIgYW4gYWN0aW9uIG9yIGRpc3BhdGNoIGFuIGV2ZW50LCBzdWNoIGFzIG9wZW5pbmcgYSBkaWFsb2cuXG4gICAqIElmIG1pbmlmeWluZyB5b3VyIHNjcmlwdHMsIG1ha2Ugc3VyZSB0byB1c2UgdGhlIGBbJ2luamVjdGlvbjEnLCAnaW5qZWN0aW9uMicsIGZ1bmN0aW9uKGluamVjdGlvbjEsIGluamVjdGlvbjIpe31dYCBzeW50YXguXG4gICAqXG4gICAqIDxhIGlkPSdvbkV4aXQnPjwvYT5cbiAgICpcbiAgICogLSAqKmBvbkV4aXRgKiogLSB7b2JqZWN0PX0gLSBDYWxsYmFjayBmdW5jdGlvbiBmb3Igd2hlbiBhIHN0YXRlIGlzIGV4aXRlZC4gR29vZCB3YXkgdG9cbiAgICogICB0cmlnZ2VyIGFuIGFjdGlvbiBvciBkaXNwYXRjaCBhbiBldmVudCwgc3VjaCBhcyBvcGVuaW5nIGEgZGlhbG9nLlxuICAgKiBJZiBtaW5pZnlpbmcgeW91ciBzY3JpcHRzLCBtYWtlIHN1cmUgdG8gdXNlIHRoZSBgWydpbmplY3Rpb24xJywgJ2luamVjdGlvbjInLCBmdW5jdGlvbihpbmplY3Rpb24xLCBpbmplY3Rpb24yKXt9XWAgc3ludGF4LlxuICAgKlxuICAgKiA8YSBpZD0ncmVsb2FkT25TZWFyY2gnPjwvYT5cbiAgICpcbiAgICogLSAqKmByZWxvYWRPblNlYXJjaCA9IHRydWVgKiogLSB7Ym9vbGVhbj19IC0gSWYgYGZhbHNlYCwgd2lsbCBub3QgcmV0cmlnZ2VyIHRoZSBzYW1lIHN0YXRlXG4gICAqICAganVzdCBiZWNhdXNlIGEgc2VhcmNoL3F1ZXJ5IHBhcmFtZXRlciBoYXMgY2hhbmdlZCAodmlhICRsb2NhdGlvbi5zZWFyY2goKSBvciAkbG9jYXRpb24uaGFzaCgpKS5cbiAgICogICBVc2VmdWwgZm9yIHdoZW4geW91J2QgbGlrZSB0byBtb2RpZnkgJGxvY2F0aW9uLnNlYXJjaCgpIHdpdGhvdXQgdHJpZ2dlcmluZyBhIHJlbG9hZC5cbiAgICpcbiAgICogPGEgaWQ9J2RhdGEnPjwvYT5cbiAgICpcbiAgICogLSAqKmBkYXRhYCoqIC0ge29iamVjdD19IC0gQXJiaXRyYXJ5IGRhdGEgb2JqZWN0LCB1c2VmdWwgZm9yIGN1c3RvbSBjb25maWd1cmF0aW9uLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIFNvbWUgc3RhdGUgbmFtZSBleGFtcGxlc1xuICAgKiBgYGBqc1xuICAgKiAvLyBzdGF0ZU5hbWUgY2FuIGJlIGEgc2luZ2xlIHRvcC1sZXZlbCBuYW1lIChtdXN0IGJlIHVuaXF1ZSkuXG4gICAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwiaG9tZVwiLCB7fSk7XG4gICAqXG4gICAqIC8vIE9yIGl0IGNhbiBiZSBhIG5lc3RlZCBzdGF0ZSBuYW1lLiBUaGlzIHN0YXRlIGlzIGEgY2hpbGQgb2YgdGhlXG4gICAqIC8vIGFib3ZlIFwiaG9tZVwiIHN0YXRlLlxuICAgKiAkc3RhdGVQcm92aWRlci5zdGF0ZShcImhvbWUubmV3ZXN0XCIsIHt9KTtcbiAgICpcbiAgICogLy8gTmVzdCBzdGF0ZXMgYXMgZGVlcGx5IGFzIG5lZWRlZC5cbiAgICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lLm5ld2VzdC5hYmMueHl6LmluY2VwdGlvblwiLCB7fSk7XG4gICAqXG4gICAqIC8vIHN0YXRlKCkgcmV0dXJucyAkc3RhdGVQcm92aWRlciwgc28geW91IGNhbiBjaGFpbiBzdGF0ZSBkZWNsYXJhdGlvbnMuXG4gICAqICRzdGF0ZVByb3ZpZGVyXG4gICAqICAgLnN0YXRlKFwiaG9tZVwiLCB7fSlcbiAgICogICAuc3RhdGUoXCJhYm91dFwiLCB7fSlcbiAgICogICAuc3RhdGUoXCJjb250YWN0c1wiLCB7fSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBBIHVuaXF1ZSBzdGF0ZSBuYW1lLCBlLmcuIFwiaG9tZVwiLCBcImFib3V0XCIsIFwiY29udGFjdHNcIi5cbiAgICogVG8gY3JlYXRlIGEgcGFyZW50L2NoaWxkIHN0YXRlIHVzZSBhIGRvdCwgZS5nLiBcImFib3V0LnNhbGVzXCIsIFwiaG9tZS5uZXdlc3RcIi5cbiAgICogQHBhcmFtIHtvYmplY3R9IGRlZmluaXRpb24gU3RhdGUgY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAqL1xuICBzdGF0ZShuYW1lOiBzdHJpbmcsIGRlZmluaXRpb246IE5nMVN0YXRlRGVjbGFyYXRpb24pOiBTdGF0ZVByb3ZpZGVyO1xuICBzdGF0ZShkZWZpbml0aW9uOiBOZzFTdGF0ZURlY2xhcmF0aW9uKTogU3RhdGVQcm92aWRlcjtcbiAgc3RhdGUobmFtZTogYW55LCBkZWZpbml0aW9uPzogYW55KSB7XG4gICAgaWYgKGlzT2JqZWN0KG5hbWUpKSB7XG4gICAgICBkZWZpbml0aW9uID0gbmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVmaW5pdGlvbi5uYW1lID0gbmFtZTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZVJlZ2lzdHJ5LnJlZ2lzdGVyKGRlZmluaXRpb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhbiBpbnZhbGlkIHN0YXRlIGhhbmRsZXJcbiAgICpcbiAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRvIFtbU3RhdGVTZXJ2aWNlLm9uSW52YWxpZF1dIGZvciBuZzEuXG4gICAqL1xuXG4gIG9uSW52YWxpZChjYWxsYmFjazogT25JbnZhbGlkQ2FsbGJhY2spOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVTZXJ2aWNlLm9uSW52YWxpZChjYWxsYmFjayk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9zdGF0ZVByb3ZpZGVyLnRzIiwiLyoqIEBtb2R1bGUgbmcxICovIC8qKiAqL1xuaW1wb3J0IHtcbiAgU3RhdGVPYmplY3QsXG4gIFRyYW5zaXRpb25TdGF0ZUhvb2tGbixcbiAgSG9va1Jlc3VsdCxcbiAgVHJhbnNpdGlvbixcbiAgc2VydmljZXMsXG4gIFJlc29sdmVDb250ZXh0LFxuICBleHRlbmQsXG4gIEJ1aWxkZXJGdW5jdGlvbixcbn0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuaW1wb3J0IHsgZ2V0TG9jYWxzIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuaW1wb3J0IHsgTmcxU3RhdGVEZWNsYXJhdGlvbiB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5cbi8qKlxuICogVGhpcyBpcyBhIFtbU3RhdGVCdWlsZGVyLmJ1aWxkZXJdXSBmdW5jdGlvbiBmb3IgYW5ndWxhcjEgYG9uRW50ZXJgLCBgb25FeGl0YCxcbiAqIGBvblJldGFpbmAgY2FsbGJhY2sgaG9va3Mgb24gYSBbW05nMVN0YXRlRGVjbGFyYXRpb25dXS5cbiAqXG4gKiBXaGVuIHRoZSBbW1N0YXRlQnVpbGRlcl1dIGJ1aWxkcyBhIFtbU3RhdGVPYmplY3RdXSBvYmplY3QgZnJvbSBhIHJhdyBbW1N0YXRlRGVjbGFyYXRpb25dXSwgdGhpcyBidWlsZGVyXG4gKiBlbnN1cmVzIHRoYXQgdGhvc2UgaG9va3MgYXJlIGluamVjdGFibGUgZm9yIEB1aXJvdXRlci9hbmd1bGFyanMgKG5nMSkuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTdGF0ZUhvb2tCdWlsZGVyID0gKGhvb2tOYW1lOiAnb25FbnRlcicgfCAnb25FeGl0JyB8ICdvblJldGFpbicpID0+XG4gIGZ1bmN0aW9uIHN0YXRlSG9va0J1aWxkZXIoc3RhdGVPYmplY3Q6IFN0YXRlT2JqZWN0LCBwYXJlbnRGbjogQnVpbGRlckZ1bmN0aW9uKTogVHJhbnNpdGlvblN0YXRlSG9va0ZuIHtcbiAgICBjb25zdCBob29rID0gc3RhdGVPYmplY3RbaG9va05hbWVdO1xuICAgIGNvbnN0IHBhdGhuYW1lID0gaG9va05hbWUgPT09ICdvbkV4aXQnID8gJ2Zyb20nIDogJ3RvJztcblxuICAgIGZ1bmN0aW9uIGRlY29yYXRlZE5nMUhvb2sodHJhbnM6IFRyYW5zaXRpb24sIHN0YXRlOiBOZzFTdGF0ZURlY2xhcmF0aW9uKTogSG9va1Jlc3VsdCB7XG4gICAgICBjb25zdCByZXNvbHZlQ29udGV4dCA9IG5ldyBSZXNvbHZlQ29udGV4dCh0cmFucy50cmVlQ2hhbmdlcyhwYXRobmFtZSkpO1xuICAgICAgY29uc3Qgc3ViQ29udGV4dCA9IHJlc29sdmVDb250ZXh0LnN1YkNvbnRleHQoc3RhdGUuJCRzdGF0ZSgpKTtcbiAgICAgIGNvbnN0IGxvY2FscyA9IGV4dGVuZChnZXRMb2NhbHMoc3ViQ29udGV4dCksIHsgJHN0YXRlJDogc3RhdGUsICR0cmFuc2l0aW9uJDogdHJhbnMgfSk7XG4gICAgICByZXR1cm4gc2VydmljZXMuJGluamVjdG9yLmludm9rZShob29rLCB0aGlzLCBsb2NhbHMpO1xuICAgIH1cblxuICAgIHJldHVybiBob29rID8gZGVjb3JhdGVkTmcxSG9vayA6IHVuZGVmaW5lZDtcbiAgfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9zdGF0ZWJ1aWxkZXJzL29uRW50ZXJFeGl0UmV0YWluLnRzIiwiLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgbmcxXG4gKi8gLyoqICovXG5pbXBvcnQgeyBMb2NhdGlvbkNvbmZpZywgTG9jYXRpb25TZXJ2aWNlcywgVUlSb3V0ZXIsIFBhcmFtVHlwZSwgaXNEZWZpbmVkIH0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuaW1wb3J0IHsgdmFsLCBjcmVhdGVQcm94eUZ1bmN0aW9ucywgcmVtb3ZlRnJvbSwgaXNPYmplY3QgfSBmcm9tICdAdWlyb3V0ZXIvY29yZSc7XG5pbXBvcnQgeyBJTG9jYXRpb25TZXJ2aWNlLCBJTG9jYXRpb25Qcm92aWRlciB9IGZyb20gJ2FuZ3VsYXInO1xuXG4vKipcbiAqIEltcGxlbWVudHMgVUktUm91dGVyIExvY2F0aW9uU2VydmljZXMgYW5kIExvY2F0aW9uQ29uZmlnIHVzaW5nIEFuZ3VsYXIgMSdzICRsb2NhdGlvbiBzZXJ2aWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBOZzFMb2NhdGlvblNlcnZpY2VzIGltcGxlbWVudHMgTG9jYXRpb25Db25maWcsIExvY2F0aW9uU2VydmljZXMge1xuICBwcml2YXRlICRsb2NhdGlvblByb3ZpZGVyOiBJTG9jYXRpb25Qcm92aWRlcjtcbiAgcHJpdmF0ZSAkbG9jYXRpb246IElMb2NhdGlvblNlcnZpY2U7XG4gIHByaXZhdGUgJHNuaWZmZXI7XG5cbiAgcGF0aDtcbiAgc2VhcmNoO1xuICBoYXNoO1xuICBoYXNoUHJlZml4O1xuICBwb3J0O1xuICBwcm90b2NvbDtcbiAgaG9zdDtcbiAgYmFzZUhyZWY7XG5cbiAgLy8gLm9uQ2hhbmdlKCkgcmVnaXN0cnlcbiAgcHJpdmF0ZSBfdXJsTGlzdGVuZXJzOiBGdW5jdGlvbltdID0gW107XG5cbiAgLyoqXG4gICAqIEFwcGx5cyBuZzEtc3BlY2lmaWMgcGF0aCBwYXJhbWV0ZXIgZW5jb2RpbmdcbiAgICpcbiAgICogVGhlIEFuZ3VsYXIgMSBgJGxvY2F0aW9uYCBzZXJ2aWNlIGlzIGEgYml0IHdlaXJkLlxuICAgKiBJdCBkb2Vzbid0IGFsbG93IHNsYXNoZXMgdG8gYmUgZW5jb2RlZC9kZWNvZGVkIGJpLWRpcmVjdGlvbmFsbHkuXG4gICAqXG4gICAqIFNlZSB0aGUgd3JpdGV1cCBhdCBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXIvaXNzdWVzLzI1OThcbiAgICpcbiAgICogVGhpcyBjb2RlIHBhdGNoZXMgdGhlIGBwYXRoYCBwYXJhbWV0ZXIgdHlwZSBzbyBpdCBlbmNvZGVkL2RlY29kZXMgc2xhc2hlcyBhcyB+MkZcbiAgICpcbiAgICogQHBhcmFtIHJvdXRlclxuICAgKi9cbiAgc3RhdGljIG1vbmtleVBhdGNoUGF0aFBhcmFtZXRlclR5cGUocm91dGVyOiBVSVJvdXRlcikge1xuICAgIGNvbnN0IHBhdGhUeXBlOiBQYXJhbVR5cGUgPSByb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkudHlwZSgncGF0aCcpO1xuXG4gICAgcGF0aFR5cGUuZW5jb2RlID0gKHg6IGFueSkgPT5cbiAgICAgIHggIT0gbnVsbCA/IHgudG9TdHJpbmcoKS5yZXBsYWNlKC8ofnxcXC8pL2csIG0gPT4gKHsgJ34nOiAnfn4nLCAnLyc6ICd+MkYnIH1bbV0pKSA6IHg7XG5cbiAgICBwYXRoVHlwZS5kZWNvZGUgPSAoeDogc3RyaW5nKSA9PlxuICAgICAgeCAhPSBudWxsID8geC50b1N0cmluZygpLnJlcGxhY2UoLyh+fnx+MkYpL2csIG0gPT4gKHsgJ35+JzogJ34nLCAnfjJGJzogJy8nIH1bbV0pKSA6IHg7XG4gIH1cblxuICBkaXNwb3NlKCkge31cblxuICBjb25zdHJ1Y3RvcigkbG9jYXRpb25Qcm92aWRlcjogSUxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICB0aGlzLiRsb2NhdGlvblByb3ZpZGVyID0gJGxvY2F0aW9uUHJvdmlkZXI7XG4gICAgY29uc3QgX2xwID0gdmFsKCRsb2NhdGlvblByb3ZpZGVyKTtcbiAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyhfbHAsIHRoaXMsIF9scCwgWydoYXNoUHJlZml4J10pO1xuICB9XG5cbiAgb25DaGFuZ2UoY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5fdXJsTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmVGcm9tKHRoaXMuX3VybExpc3RlbmVycykoY2FsbGJhY2spO1xuICB9XG5cbiAgaHRtbDVNb2RlKCkge1xuICAgIGxldCBodG1sNU1vZGU6IGFueSA9IHRoaXMuJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKCk7XG4gICAgaHRtbDVNb2RlID0gaXNPYmplY3QoaHRtbDVNb2RlKSA/IGh0bWw1TW9kZS5lbmFibGVkIDogaHRtbDVNb2RlO1xuICAgIHJldHVybiBodG1sNU1vZGUgJiYgdGhpcy4kc25pZmZlci5oaXN0b3J5O1xuICB9XG5cbiAgdXJsKG5ld1VybD86IHN0cmluZywgcmVwbGFjZSA9IGZhbHNlLCBzdGF0ZT8pIHtcbiAgICBpZiAoaXNEZWZpbmVkKG5ld1VybCkpIHRoaXMuJGxvY2F0aW9uLnVybChuZXdVcmwpO1xuICAgIGlmIChyZXBsYWNlKSB0aGlzLiRsb2NhdGlvbi5yZXBsYWNlKCk7XG4gICAgaWYgKHN0YXRlKSB0aGlzLiRsb2NhdGlvbi5zdGF0ZShzdGF0ZSk7XG4gICAgcmV0dXJuIHRoaXMuJGxvY2F0aW9uLnVybCgpO1xuICB9XG5cbiAgX3J1bnRpbWVTZXJ2aWNlcygkcm9vdFNjb3BlLCAkbG9jYXRpb246IElMb2NhdGlvblNlcnZpY2UsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICAgIHRoaXMuJGxvY2F0aW9uID0gJGxvY2F0aW9uO1xuICAgIHRoaXMuJHNuaWZmZXIgPSAkc25pZmZlcjtcblxuICAgIC8vIEJpbmQgJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcyB0byB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgaW4gTG9jYXRpb25TZXJ2aWNlLm9uQ2hhbmdlXG4gICAgJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCBldnQgPT4gdGhpcy5fdXJsTGlzdGVuZXJzLmZvckVhY2goZm4gPT4gZm4oZXZ0KSkpO1xuICAgIGNvbnN0IF9sb2MgPSB2YWwoJGxvY2F0aW9uKTtcbiAgICBjb25zdCBfYnJvd3NlciA9IHZhbCgkYnJvd3Nlcik7XG5cbiAgICAvLyBCaW5kIHRoZXNlIExvY2F0aW9uU2VydmljZSBmdW5jdGlvbnMgdG8gJGxvY2F0aW9uXG4gICAgY3JlYXRlUHJveHlGdW5jdGlvbnMoX2xvYywgdGhpcywgX2xvYywgWydyZXBsYWNlJywgJ3BhdGgnLCAnc2VhcmNoJywgJ2hhc2gnXSk7XG4gICAgLy8gQmluZCB0aGVzZSBMb2NhdGlvbkNvbmZpZyBmdW5jdGlvbnMgdG8gJGxvY2F0aW9uXG4gICAgY3JlYXRlUHJveHlGdW5jdGlvbnMoX2xvYywgdGhpcywgX2xvYywgWydwb3J0JywgJ3Byb3RvY29sJywgJ2hvc3QnXSk7XG4gICAgLy8gQmluZCB0aGVzZSBMb2NhdGlvbkNvbmZpZyBmdW5jdGlvbnMgdG8gJGJyb3dzZXJcbiAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyhfYnJvd3NlciwgdGhpcywgX2Jyb3dzZXIsIFsnYmFzZUhyZWYnXSk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9sb2NhdGlvblNlcnZpY2VzLnRzIiwiLyoqIEBtb2R1bGUgdXJsICovIC8qKiAqL1xuaW1wb3J0IHtcbiAgVUlSb3V0ZXIsXG4gIFVybFJvdXRlcixcbiAgTG9jYXRpb25TZXJ2aWNlcyxcbiAgJEluamVjdG9yTGlrZSxcbiAgQmFzZVVybFJ1bGUsXG4gIFVybFJ1bGVIYW5kbGVyRm4sXG4gIFVybE1hdGNoZXIsXG4gIElJbmplY3RhYmxlLFxufSBmcm9tICdAdWlyb3V0ZXIvY29yZSc7XG5pbXBvcnQgeyBzZXJ2aWNlcywgaXNTdHJpbmcsIGlzRnVuY3Rpb24sIGlzQXJyYXksIGlkZW50aXR5IH0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJhd05nMVJ1bGVGdW5jdGlvbiB7XG4gICgkaW5qZWN0b3I6ICRJbmplY3Rvckxpa2UsICRsb2NhdGlvbjogTG9jYXRpb25TZXJ2aWNlcyk6IHN0cmluZyB8IHZvaWQ7XG59XG5cbi8qKlxuICogTWFuYWdlcyBydWxlcyBmb3IgY2xpZW50LXNpZGUgVVJMXG4gKlxuICogIyMjIERlcHJlY2F0aW9uIHdhcm5pbmc6XG4gKiBUaGlzIGNsYXNzIGlzIG5vdyBjb25zaWRlcmVkIHRvIGJlIGFuIGludGVybmFsIEFQSVxuICogVXNlIHRoZSBbW1VybFNlcnZpY2VdXSBpbnN0ZWFkLlxuICogRm9yIGNvbmZpZ3VyaW5nIFVSTCBydWxlcywgdXNlIHRoZSBbW1VybFJ1bGVzQXBpXV0gd2hpY2ggY2FuIGJlIGZvdW5kIGFzIFtbVXJsU2VydmljZS5ydWxlc11dLlxuICpcbiAqIFRoaXMgY2xhc3MgbWFuYWdlcyB0aGUgcm91dGVyIHJ1bGVzIGZvciB3aGF0IHRvIGRvIHdoZW4gdGhlIFVSTCBjaGFuZ2VzLlxuICpcbiAqIFRoaXMgcHJvdmlkZXIgcmVtYWlucyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gKlxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGNsYXNzIFVybFJvdXRlclByb3ZpZGVyIHtcbiAgLyoqIEBoaWRkZW4gKi8gX3JvdXRlcjogVUlSb3V0ZXI7XG4gIC8qKiBAaGlkZGVuICovIF91cmxSb3V0ZXI6IFVybFJvdXRlcjtcblxuICBzdGF0aWMgaW5qZWN0YWJsZUhhbmRsZXIocm91dGVyOiBVSVJvdXRlciwgaGFuZGxlcik6IFVybFJ1bGVIYW5kbGVyRm4ge1xuICAgIHJldHVybiBtYXRjaCA9PiBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKGhhbmRsZXIsIG51bGwsIHsgJG1hdGNoOiBtYXRjaCwgJHN0YXRlUGFyYW1zOiByb3V0ZXIuZ2xvYmFscy5wYXJhbXMgfSk7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICBjb25zdHJ1Y3Rvcihyb3V0ZXI6IFVJUm91dGVyKSB7XG4gICAgdGhpcy5fcm91dGVyID0gcm91dGVyO1xuICAgIHRoaXMuX3VybFJvdXRlciA9IHJvdXRlci51cmxSb3V0ZXI7XG4gIH1cblxuICAvKiogQGhpZGRlbiAqL1xuICAkZ2V0KCkge1xuICAgIGNvbnN0IHVybFJvdXRlciA9IHRoaXMuX3VybFJvdXRlcjtcbiAgICB1cmxSb3V0ZXIudXBkYXRlKHRydWUpO1xuICAgIGlmICghdXJsUm91dGVyLmludGVyY2VwdERlZmVycmVkKSB1cmxSb3V0ZXIubGlzdGVuKCk7XG4gICAgcmV0dXJuIHVybFJvdXRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSB1cmwgaGFuZGxlciBmdW5jdGlvbi5cbiAgICpcbiAgICogUmVnaXN0ZXJzIGEgbG93IGxldmVsIHVybCBoYW5kbGVyIChhIGBydWxlYCkuXG4gICAqIEEgcnVsZSBkZXRlY3RzIHNwZWNpZmljIFVSTCBwYXR0ZXJucyBhbmQgcmV0dXJucyBhIHJlZGlyZWN0LCBvciBwZXJmb3JtcyBzb21lIGFjdGlvbi5cbiAgICpcbiAgICogSWYgYSBydWxlIHJldHVybnMgYSBzdHJpbmcsIHRoZSBVUkwgaXMgcmVwbGFjZWQgd2l0aCB0aGUgc3RyaW5nLCBhbmQgYWxsIHJ1bGVzIGFyZSBmaXJlZCBhZ2Fpbi5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyLnJvdXRlciddKTtcbiAgICpcbiAgICogYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAqICAgLy8gSGVyZSdzIGFuIGV4YW1wbGUgb2YgaG93IHlvdSBtaWdodCBhbGxvdyBjYXNlIGluc2Vuc2l0aXZlIHVybHNcbiAgICogICAkdXJsUm91dGVyUHJvdmlkZXIucnVsZShmdW5jdGlvbiAoJGluamVjdG9yLCAkbG9jYXRpb24pIHtcbiAgICogICAgIHZhciBwYXRoID0gJGxvY2F0aW9uLnBhdGgoKSxcbiAgICogICAgICAgICBub3JtYWxpemVkID0gcGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgKlxuICAgKiAgICAgaWYgKHBhdGggIT09IG5vcm1hbGl6ZWQpIHtcbiAgICogICAgICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG4gICAqICAgICB9XG4gICAqICAgfSk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHJ1bGVGblxuICAgKiBIYW5kbGVyIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYCRpbmplY3RvcmAgYW5kIGAkbG9jYXRpb25gIHNlcnZpY2VzIGFzIGFyZ3VtZW50cy5cbiAgICogWW91IGNhbiB1c2UgdGhlbSB0byBkZXRlY3QgYSB1cmwgYW5kIHJldHVybiBhIGRpZmZlcmVudCB1cmwgYXMgYSBzdHJpbmcuXG4gICAqXG4gICAqIEByZXR1cm4gW1tVcmxSb3V0ZXJQcm92aWRlcl1dIChgdGhpc2ApXG4gICAqL1xuICBydWxlKHJ1bGVGbjogUmF3TmcxUnVsZUZ1bmN0aW9uKTogVXJsUm91dGVyUHJvdmlkZXIge1xuICAgIGlmICghaXNGdW5jdGlvbihydWxlRm4pKSB0aHJvdyBuZXcgRXJyb3IoXCIncnVsZScgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuXG4gICAgY29uc3QgbWF0Y2ggPSAoKSA9PiBydWxlRm4oc2VydmljZXMuJGluamVjdG9yLCB0aGlzLl9yb3V0ZXIubG9jYXRpb25TZXJ2aWNlKTtcblxuICAgIGNvbnN0IHJ1bGUgPSBuZXcgQmFzZVVybFJ1bGUobWF0Y2gsIGlkZW50aXR5KTtcbiAgICB0aGlzLl91cmxSb3V0ZXIucnVsZShydWxlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZpbmVzIHRoZSBwYXRoIG9yIGJlaGF2aW9yIHRvIHVzZSB3aGVuIG5vIHVybCBjYW4gYmUgbWF0Y2hlZC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyLnJvdXRlciddKTtcbiAgICpcbiAgICogYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAqICAgLy8gaWYgdGhlIHBhdGggZG9lc24ndCBtYXRjaCBhbnkgb2YgdGhlIHVybHMgeW91IGNvbmZpZ3VyZWRcbiAgICogICAvLyBvdGhlcndpc2Ugd2lsbCB0YWtlIGNhcmUgb2Ygcm91dGluZyB0aGUgdXNlciB0byB0aGVcbiAgICogICAvLyBzcGVjaWZpZWQgdXJsXG4gICAqICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2luZGV4Jyk7XG4gICAqXG4gICAqICAgLy8gRXhhbXBsZSBvZiB1c2luZyBmdW5jdGlvbiBydWxlIGFzIHBhcmFtXG4gICAqICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShmdW5jdGlvbiAoJGluamVjdG9yLCAkbG9jYXRpb24pIHtcbiAgICogICAgIHJldHVybiAnL2EvdmFsaWQvdXJsJztcbiAgICogICB9KTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcnVsZVxuICAgKiBUaGUgdXJsIHBhdGggeW91IHdhbnQgdG8gcmVkaXJlY3QgdG8gb3IgYSBmdW5jdGlvbiBydWxlIHRoYXQgcmV0dXJucyB0aGUgdXJsIHBhdGggb3IgcGVyZm9ybXMgYSBgJHN0YXRlLmdvKClgLlxuICAgKiBUaGUgZnVuY3Rpb24gdmVyc2lvbiBpcyBwYXNzZWQgdHdvIHBhcmFtczogYCRpbmplY3RvcmAgYW5kIGAkbG9jYXRpb25gIHNlcnZpY2VzLCBhbmQgc2hvdWxkIHJldHVybiBhIHVybCBzdHJpbmcuXG4gICAqXG4gICAqIEByZXR1cm4ge29iamVjdH0gYCR1cmxSb3V0ZXJQcm92aWRlcmAgLSBgJHVybFJvdXRlclByb3ZpZGVyYCBpbnN0YW5jZVxuICAgKi9cbiAgb3RoZXJ3aXNlKHJ1bGU6IHN0cmluZyB8IFJhd05nMVJ1bGVGdW5jdGlvbik6IFVybFJvdXRlclByb3ZpZGVyIHtcbiAgICBjb25zdCB1cmxSb3V0ZXIgPSB0aGlzLl91cmxSb3V0ZXI7XG5cbiAgICBpZiAoaXNTdHJpbmcocnVsZSkpIHtcbiAgICAgIHVybFJvdXRlci5vdGhlcndpc2UocnVsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHJ1bGUpKSB7XG4gICAgICB1cmxSb3V0ZXIub3RoZXJ3aXNlKCgpID0+IHJ1bGUoc2VydmljZXMuJGluamVjdG9yLCB0aGlzLl9yb3V0ZXIubG9jYXRpb25TZXJ2aWNlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIidydWxlJyBtdXN0IGJlIGEgc3RyaW5nIG9yIGZ1bmN0aW9uXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGhhbmRsZXIgZm9yIGEgZ2l2ZW4gdXJsIG1hdGNoaW5nLlxuICAgKlxuICAgKiBJZiB0aGUgaGFuZGxlciBpcyBhIHN0cmluZywgaXQgaXNcbiAgICogdHJlYXRlZCBhcyBhIHJlZGlyZWN0LCBhbmQgaXMgaW50ZXJwb2xhdGVkIGFjY29yZGluZyB0byB0aGUgc3ludGF4IG9mIG1hdGNoXG4gICAqIChpLmUuIGxpa2UgYFN0cmluZy5yZXBsYWNlKClgIGZvciBgUmVnRXhwYCwgb3IgbGlrZSBhIGBVcmxNYXRjaGVyYCBwYXR0ZXJuIG90aGVyd2lzZSkuXG4gICAqXG4gICAqIElmIHRoZSBoYW5kbGVyIGlzIGEgZnVuY3Rpb24sIGl0IGlzIGluamVjdGFibGUuXG4gICAqIEl0IGdldHMgaW52b2tlZCBpZiBgJGxvY2F0aW9uYCBtYXRjaGVzLlxuICAgKiBZb3UgaGF2ZSB0aGUgb3B0aW9uIG9mIGluamVjdCB0aGUgbWF0Y2ggb2JqZWN0IGFzIGAkbWF0Y2hgLlxuICAgKlxuICAgKiBUaGUgaGFuZGxlciBjYW4gcmV0dXJuXG4gICAqXG4gICAqIC0gKipmYWxzeSoqIHRvIGluZGljYXRlIHRoYXQgdGhlIHJ1bGUgZGlkbid0IG1hdGNoIGFmdGVyIGFsbCwgdGhlbiBgJHVybFJvdXRlcmBcbiAgICogICB3aWxsIGNvbnRpbnVlIHRyeWluZyB0byBmaW5kIGFub3RoZXIgb25lIHRoYXQgbWF0Y2hlcy5cbiAgICogLSAqKnN0cmluZyoqIHdoaWNoIGlzIHRyZWF0ZWQgYXMgYSByZWRpcmVjdCBhbmQgcGFzc2VkIHRvIGAkbG9jYXRpb24udXJsKClgXG4gICAqIC0gKip2b2lkKiogb3IgYW55ICoqdHJ1dGh5KiogdmFsdWUgdGVsbHMgYCR1cmxSb3V0ZXJgIHRoYXQgdGhlIHVybCB3YXMgaGFuZGxlZC5cbiAgICpcbiAgICogIyMjIyBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyLnJvdXRlciddKTtcbiAgICpcbiAgICogYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAqICAgJHVybFJvdXRlclByb3ZpZGVyLndoZW4oJHN0YXRlLnVybCwgZnVuY3Rpb24gKCRtYXRjaCwgJHN0YXRlUGFyYW1zKSB7XG4gICAqICAgICBpZiAoJHN0YXRlLiRjdXJyZW50Lm5hdmlnYWJsZSAhPT0gc3RhdGUgfHxcbiAgICogICAgICAgICAhZXF1YWxGb3JLZXlzKCRtYXRjaCwgJHN0YXRlUGFyYW1zKSB7XG4gICAqICAgICAgJHN0YXRlLnRyYW5zaXRpb25UbyhzdGF0ZSwgJG1hdGNoLCBmYWxzZSk7XG4gICAqICAgICB9XG4gICAqICAgfSk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHdoYXQgQSBwYXR0ZXJuIHN0cmluZyB0byBtYXRjaCwgY29tcGlsZWQgYXMgYSBbW1VybE1hdGNoZXJdXS5cbiAgICogQHBhcmFtIGhhbmRsZXIgVGhlIHBhdGggKG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHBhdGgpIHRoYXQgeW91IHdhbnQgdG8gcmVkaXJlY3QgeW91ciB1c2VyIHRvLlxuICAgKiBAcGFyYW0gcnVsZUNhbGxiYWNrIFtvcHRpb25hbF0gQSBjYWxsYmFjayB0aGF0IHJlY2VpdmVzIHRoZSBgcnVsZWAgcmVnaXN0ZXJlZCB3aXRoIFtbVXJsTWF0Y2hlci5ydWxlXV1cbiAgICpcbiAgICogTm90ZTogdGhlIGhhbmRsZXIgbWF5IGFsc28gaW52b2tlIGFyYml0cmFyeSBjb2RlLCBzdWNoIGFzIGAkc3RhdGUuZ28oKWBcbiAgICovXG4gIHdoZW4od2hhdDogUmVnRXhwIHwgVXJsTWF0Y2hlciB8IHN0cmluZywgaGFuZGxlcjogc3RyaW5nIHwgSUluamVjdGFibGUpIHtcbiAgICBpZiAoaXNBcnJheShoYW5kbGVyKSB8fCBpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgICBoYW5kbGVyID0gVXJsUm91dGVyUHJvdmlkZXIuaW5qZWN0YWJsZUhhbmRsZXIodGhpcy5fcm91dGVyLCBoYW5kbGVyKTtcbiAgICB9XG5cbiAgICB0aGlzLl91cmxSb3V0ZXIud2hlbih3aGF0LCBoYW5kbGVyIGFzIGFueSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogRGlzYWJsZXMgbW9uaXRvcmluZyBvZiB0aGUgVVJMLlxuICAgKlxuICAgKiBDYWxsIHRoaXMgbWV0aG9kIGJlZm9yZSBVSS1Sb3V0ZXIgaGFzIGJvb3RzdHJhcHBlZC5cbiAgICogSXQgd2lsbCBzdG9wIFVJLVJvdXRlciBmcm9tIHBlcmZvcm1pbmcgdGhlIGluaXRpYWwgdXJsIHN5bmMuXG4gICAqXG4gICAqIFRoaXMgY2FuIGJlIHVzZWZ1bCB0byBwZXJmb3JtIHNvbWUgYXN5bmNocm9ub3VzIGluaXRpYWxpemF0aW9uIGJlZm9yZSB0aGUgcm91dGVyIHN0YXJ0cy5cbiAgICogT25jZSB0aGUgaW5pdGlhbGl6YXRpb24gaXMgY29tcGxldGUsIGNhbGwgW1tsaXN0ZW5dXSB0byB0ZWxsIFVJLVJvdXRlciB0byBzdGFydCB3YXRjaGluZyBhbmQgc3luY2hyb25pemluZyB0aGUgVVJMLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInXSk7XG4gICAqXG4gICAqIGFwcC5jb25maWcoZnVuY3Rpb24gKCR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgKiAgIC8vIFByZXZlbnQgJHVybFJvdXRlciBmcm9tIGF1dG9tYXRpY2FsbHkgaW50ZXJjZXB0aW5nIFVSTCBjaGFuZ2VzO1xuICAgKiAgICR1cmxSb3V0ZXJQcm92aWRlci5kZWZlckludGVyY2VwdCgpO1xuICAgKiB9KVxuICAgKlxuICAgKiBhcHAucnVuKGZ1bmN0aW9uIChNeVNlcnZpY2UsICR1cmxSb3V0ZXIsICRodHRwKSB7XG4gICAqICAgJGh0dHAuZ2V0KFwiL3N0dWZmXCIpLnRoZW4oZnVuY3Rpb24ocmVzcCkge1xuICAgKiAgICAgTXlTZXJ2aWNlLmRvU3R1ZmYocmVzcC5kYXRhKTtcbiAgICogICAgICR1cmxSb3V0ZXIubGlzdGVuKCk7XG4gICAqICAgICAkdXJsUm91dGVyLnN5bmMoKTtcbiAgICogICB9KTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gZGVmZXIgSW5kaWNhdGVzIHdoZXRoZXIgdG8gZGVmZXIgbG9jYXRpb24gY2hhbmdlIGludGVyY2VwdGlvbi5cbiAgICogICAgICAgIFBhc3Npbmcgbm8gcGFyYW1ldGVyIGlzIGVxdWl2YWxlbnQgdG8gYHRydWVgLlxuICAgKi9cbiAgZGVmZXJJbnRlcmNlcHQoZGVmZXI/OiBib29sZWFuKSB7XG4gICAgdGhpcy5fdXJsUm91dGVyLmRlZmVySW50ZXJjZXB0KGRlZmVyKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9hbmd1bGFyanMvc3JjL3VybFJvdXRlclByb3ZpZGVyLnRzIiwiLyoqXG4gKiAjIEFuZ3VsYXIgMSB0eXBlc1xuICpcbiAqIFVJLVJvdXRlciBjb3JlIHByb3ZpZGVzIHZhcmlvdXMgVHlwZXNjcmlwdCB0eXBlcyB3aGljaCB5b3UgY2FuIHVzZSBmb3IgY29kZSBjb21wbGV0aW9uIGFuZCB2YWxpZGF0aW5nIHBhcmFtZXRlciB2YWx1ZXMsIGV0Yy5cbiAqIFRoZSBjdXN0b21pemF0aW9ucyB0byB0aGUgY29yZSB0eXBlcyBmb3IgQW5ndWxhciBVSS1Sb3V0ZXIgYXJlIGRvY3VtZW50ZWQgaGVyZS5cbiAqXG4gKiBUaGUgb3B0aW9uYWwgW1skcmVzb2x2ZV1dIHNlcnZpY2UgaXMgYWxzbyBkb2N1bWVudGVkIGhlcmUuXG4gKlxuICogQG1vZHVsZSBuZzFcbiAqIEBwcmVmZXJyZWRcbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBuZyBhcyBhbmd1bGFyIH0gZnJvbSAnLi9hbmd1bGFyJztcbmltcG9ydCB7XG4gIElSb290U2NvcGVTZXJ2aWNlLFxuICBJUVNlcnZpY2UsXG4gIElMb2NhdGlvblNlcnZpY2UsXG4gIElMb2NhdGlvblByb3ZpZGVyLFxuICBJSHR0cFNlcnZpY2UsXG4gIElUZW1wbGF0ZUNhY2hlU2VydmljZSxcbn0gZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQge1xuICBzZXJ2aWNlcyxcbiAgYXBwbHlQYWlycyxcbiAgaXNTdHJpbmcsXG4gIHRyYWNlLFxuICBleHRlbmQsXG4gIFVJUm91dGVyLFxuICBTdGF0ZVNlcnZpY2UsXG4gIFVybFJvdXRlcixcbiAgVXJsTWF0Y2hlckZhY3RvcnksXG4gIFJlc29sdmVDb250ZXh0LFxuICB1bm5lc3RSLFxuICBUeXBlZE1hcCxcbn0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuaW1wb3J0IHsgbmcxVmlld3NCdWlsZGVyLCBnZXROZzFWaWV3Q29uZmlnRmFjdG9yeSB9IGZyb20gJy4vc3RhdGVidWlsZGVycy92aWV3cyc7XG5pbXBvcnQgeyBUZW1wbGF0ZUZhY3RvcnkgfSBmcm9tICcuL3RlbXBsYXRlRmFjdG9yeSc7XG5pbXBvcnQgeyBTdGF0ZVByb3ZpZGVyIH0gZnJvbSAnLi9zdGF0ZVByb3ZpZGVyJztcbmltcG9ydCB7IGdldFN0YXRlSG9va0J1aWxkZXIgfSBmcm9tICcuL3N0YXRlYnVpbGRlcnMvb25FbnRlckV4aXRSZXRhaW4nO1xuaW1wb3J0IHsgTmcxTG9jYXRpb25TZXJ2aWNlcyB9IGZyb20gJy4vbG9jYXRpb25TZXJ2aWNlcyc7XG5pbXBvcnQgeyBVcmxSb3V0ZXJQcm92aWRlciB9IGZyb20gJy4vdXJsUm91dGVyUHJvdmlkZXInO1xuaW1wb3J0IElJbmplY3RvclNlcnZpY2UgPSBhbmd1bGFyLmF1dG8uSUluamVjdG9yU2VydmljZTsgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuXG5hbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLmFuZ3VsYXIxJywgW10pO1xuY29uc3QgbW9kX2luaXQgPSBhbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLmluaXQnLCBbXSk7XG5jb25zdCBtb2RfdXRpbCA9IGFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIudXRpbCcsIFsnbmcnLCAndWkucm91dGVyLmluaXQnXSk7XG5jb25zdCBtb2RfcnRyID0gYW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci5yb3V0ZXInLCBbJ3VpLnJvdXRlci51dGlsJ10pO1xuY29uc3QgbW9kX3N0YXRlID0gYW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScsIFsndWkucm91dGVyLnJvdXRlcicsICd1aS5yb3V0ZXIudXRpbCcsICd1aS5yb3V0ZXIuYW5ndWxhcjEnXSk7XG5jb25zdCBtb2RfbWFpbiA9IGFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXInLCBbJ3VpLnJvdXRlci5pbml0JywgJ3VpLnJvdXRlci5zdGF0ZScsICd1aS5yb3V0ZXIuYW5ndWxhcjEnXSk7XG5sZXQgbW9kX2NtcHQgPSBhbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLmNvbXBhdCcsIFsndWkucm91dGVyJ10pOyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lXG5cbmRlY2xhcmUgbW9kdWxlICdAdWlyb3V0ZXIvY29yZS9saWIvcm91dGVyJyB7XG4gIGludGVyZmFjZSBVSVJvdXRlciB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbGluZTpuby1zaGFkb3dlZC12YXJpYWJsZVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgc3RhdGVQcm92aWRlcjogU3RhdGVQcm92aWRlcjtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHVybFJvdXRlclByb3ZpZGVyOiBVcmxSb3V0ZXJQcm92aWRlcjtcbiAgfVxufVxuXG5sZXQgcm91dGVyOiBVSVJvdXRlciA9IG51bGw7XG5cbiR1aVJvdXRlclByb3ZpZGVyLiRpbmplY3QgPSBbJyRsb2NhdGlvblByb3ZpZGVyJ107XG4vKiogVGhpcyBhbmd1bGFyIDEgcHJvdmlkZXIgaW5zdGFudGlhdGVzIGEgUm91dGVyIGFuZCBleHBvc2VzIGl0cyBzZXJ2aWNlcyB2aWEgdGhlIGFuZ3VsYXIgaW5qZWN0b3IgKi9cbmZ1bmN0aW9uICR1aVJvdXRlclByb3ZpZGVyKCRsb2NhdGlvblByb3ZpZGVyOiBJTG9jYXRpb25Qcm92aWRlcikge1xuICAvLyBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJvdXRlciB3aGVuIHRoZSAkdWlSb3V0ZXJQcm92aWRlciBpcyBpbml0aWFsaXplZFxuICByb3V0ZXIgPSB0aGlzLnJvdXRlciA9IG5ldyBVSVJvdXRlcigpO1xuICByb3V0ZXIuc3RhdGVQcm92aWRlciA9IG5ldyBTdGF0ZVByb3ZpZGVyKHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LCByb3V0ZXIuc3RhdGVTZXJ2aWNlKTtcblxuICAvLyBBcHBseSBuZzEgc3BlY2lmaWMgU3RhdGVCdWlsZGVyIGNvZGUgZm9yIGB2aWV3c2AsIGByZXNvbHZlYCwgYW5kIGBvbkV4aXQvUmV0YWluL0VudGVyYCBwcm9wZXJ0aWVzXG4gIHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LmRlY29yYXRvcigndmlld3MnLCBuZzFWaWV3c0J1aWxkZXIpO1xuICByb3V0ZXIuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IoJ29uRXhpdCcsIGdldFN0YXRlSG9va0J1aWxkZXIoJ29uRXhpdCcpKTtcbiAgcm91dGVyLnN0YXRlUmVnaXN0cnkuZGVjb3JhdG9yKCdvblJldGFpbicsIGdldFN0YXRlSG9va0J1aWxkZXIoJ29uUmV0YWluJykpO1xuICByb3V0ZXIuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IoJ29uRW50ZXInLCBnZXRTdGF0ZUhvb2tCdWlsZGVyKCdvbkVudGVyJykpO1xuXG4gIHJvdXRlci52aWV3U2VydmljZS5fcGx1Z2luYXBpLl92aWV3Q29uZmlnRmFjdG9yeSgnbmcxJywgZ2V0TmcxVmlld0NvbmZpZ0ZhY3RvcnkoKSk7XG5cbiAgY29uc3QgbmcxTG9jYXRpb25TZXJ2aWNlID0gKHJvdXRlci5sb2NhdGlvblNlcnZpY2UgPSByb3V0ZXIubG9jYXRpb25Db25maWcgPSBuZXcgTmcxTG9jYXRpb25TZXJ2aWNlcyhcbiAgICAkbG9jYXRpb25Qcm92aWRlcixcbiAgKSk7XG5cbiAgTmcxTG9jYXRpb25TZXJ2aWNlcy5tb25rZXlQYXRjaFBhdGhQYXJhbWV0ZXJUeXBlKHJvdXRlcik7XG5cbiAgLy8gYmFja3dhcmRzIGNvbXBhdDogYWxzbyBleHBvc2Ugcm91dGVyIGluc3RhbmNlIGFzICR1aVJvdXRlclByb3ZpZGVyLnJvdXRlclxuICByb3V0ZXJbJ3JvdXRlciddID0gcm91dGVyO1xuICByb3V0ZXJbJyRnZXQnXSA9ICRnZXQ7XG4gICRnZXQuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJyRicm93c2VyJywgJyRzbmlmZmVyJywgJyRyb290U2NvcGUnLCAnJGh0dHAnLCAnJHRlbXBsYXRlQ2FjaGUnXTtcbiAgZnVuY3Rpb24gJGdldChcbiAgICAkbG9jYXRpb246IElMb2NhdGlvblNlcnZpY2UsXG4gICAgJGJyb3dzZXI6IGFueSxcbiAgICAkc25pZmZlcjogYW55LFxuICAgICRyb290U2NvcGU6IG5nLklTY29wZSxcbiAgICAkaHR0cDogSUh0dHBTZXJ2aWNlLFxuICAgICR0ZW1wbGF0ZUNhY2hlOiBJVGVtcGxhdGVDYWNoZVNlcnZpY2UsXG4gICkge1xuICAgIG5nMUxvY2F0aW9uU2VydmljZS5fcnVudGltZVNlcnZpY2VzKCRyb290U2NvcGUsICRsb2NhdGlvbiwgJHNuaWZmZXIsICRicm93c2VyKTtcbiAgICBkZWxldGUgcm91dGVyWydyb3V0ZXInXTtcbiAgICBkZWxldGUgcm91dGVyWyckZ2V0J107XG4gICAgcmV0dXJuIHJvdXRlcjtcbiAgfVxuICByZXR1cm4gcm91dGVyO1xufVxuXG5jb25zdCBnZXRQcm92aWRlckZvciA9IHNlcnZpY2VOYW1lID0+IFtcbiAgJyR1aVJvdXRlclByb3ZpZGVyJyxcbiAgJHVycCA9PiB7XG4gICAgY29uc3Qgc2VydmljZSA9ICR1cnAucm91dGVyW3NlcnZpY2VOYW1lXTtcbiAgICBzZXJ2aWNlWyckZ2V0J10gPSAoKSA9PiBzZXJ2aWNlO1xuICAgIHJldHVybiBzZXJ2aWNlO1xuICB9LFxuXTtcblxuLy8gVGhpcyBlZmZlY3RpdmVseSBjYWxscyAkZ2V0KCkgb24gYCR1aVJvdXRlclByb3ZpZGVyYCB0byB0cmlnZ2VyIGluaXQgKHdoZW4gbmcgZW50ZXJzIHJ1bnRpbWUpXG5ydW5CbG9jay4kaW5qZWN0ID0gWyckaW5qZWN0b3InLCAnJHEnLCAnJHVpUm91dGVyJ107XG5mdW5jdGlvbiBydW5CbG9jaygkaW5qZWN0b3I6IElJbmplY3RvclNlcnZpY2UsICRxOiBJUVNlcnZpY2UsICR1aVJvdXRlcjogVUlSb3V0ZXIpIHtcbiAgc2VydmljZXMuJGluamVjdG9yID0gJGluamVjdG9yO1xuICBzZXJ2aWNlcy4kcSA9IDxhbnk+JHE7XG5cbiAgLy8gVGhlICRpbmplY3RvciBpcyBub3cgYXZhaWxhYmxlLlxuICAvLyBGaW5kIGFueSByZXNvbHZhYmxlcyB0aGF0IGhhZCBkZXBlbmRlbmN5IGFubm90YXRpb24gZGVmZXJyZWRcbiAgJHVpUm91dGVyLnN0YXRlUmVnaXN0cnlcbiAgICAuZ2V0KClcbiAgICAubWFwKHggPT4geC4kJHN0YXRlKCkucmVzb2x2YWJsZXMpXG4gICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAuZmlsdGVyKHggPT4geC5kZXBzID09PSAnZGVmZXJyZWQnKVxuICAgIC5mb3JFYWNoKHJlc29sdmFibGUgPT4gKHJlc29sdmFibGUuZGVwcyA9ICRpbmplY3Rvci5hbm5vdGF0ZShyZXNvbHZhYmxlLnJlc29sdmVGbiwgJGluamVjdG9yLnN0cmljdERpKSkpO1xufVxuXG4vLyAkdXJsUm91dGVyIHNlcnZpY2UgYW5kICR1cmxSb3V0ZXJQcm92aWRlclxuY29uc3QgZ2V0VXJsUm91dGVyUHJvdmlkZXIgPSAodWlSb3V0ZXI6IFVJUm91dGVyKSA9PiAodWlSb3V0ZXIudXJsUm91dGVyUHJvdmlkZXIgPSBuZXcgVXJsUm91dGVyUHJvdmlkZXIodWlSb3V0ZXIpKTtcblxuLy8gJHN0YXRlIHNlcnZpY2UgYW5kICRzdGF0ZVByb3ZpZGVyXG4vLyAkdXJsUm91dGVyIHNlcnZpY2UgYW5kICR1cmxSb3V0ZXJQcm92aWRlclxuY29uc3QgZ2V0U3RhdGVQcm92aWRlciA9ICgpID0+IGV4dGVuZChyb3V0ZXIuc3RhdGVQcm92aWRlciwgeyAkZ2V0OiAoKSA9PiByb3V0ZXIuc3RhdGVTZXJ2aWNlIH0pO1xuXG53YXRjaERpZ2VzdHMuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xuZXhwb3J0IGZ1bmN0aW9uIHdhdGNoRGlnZXN0cygkcm9vdFNjb3BlOiBJUm9vdFNjb3BlU2VydmljZSkge1xuICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHtcbiAgICB0cmFjZS5hcHByb3hpbWF0ZURpZ2VzdHMrKztcbiAgfSk7XG59XG5cbm1vZF9pbml0LnByb3ZpZGVyKCckdWlSb3V0ZXInLCA8YW55PiR1aVJvdXRlclByb3ZpZGVyKTtcbm1vZF9ydHIucHJvdmlkZXIoJyR1cmxSb3V0ZXInLCBbJyR1aVJvdXRlclByb3ZpZGVyJywgZ2V0VXJsUm91dGVyUHJvdmlkZXJdKTtcbm1vZF91dGlsLnByb3ZpZGVyKCckdXJsU2VydmljZScsIGdldFByb3ZpZGVyRm9yKCd1cmxTZXJ2aWNlJykpO1xubW9kX3V0aWwucHJvdmlkZXIoJyR1cmxNYXRjaGVyRmFjdG9yeScsIFsnJHVpUm91dGVyUHJvdmlkZXInLCAoKSA9PiByb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnldKTtcbm1vZF91dGlsLnByb3ZpZGVyKCckdGVtcGxhdGVGYWN0b3J5JywgKCkgPT4gbmV3IFRlbXBsYXRlRmFjdG9yeSgpKTtcbm1vZF9zdGF0ZS5wcm92aWRlcignJHN0YXRlUmVnaXN0cnknLCBnZXRQcm92aWRlckZvcignc3RhdGVSZWdpc3RyeScpKTtcbm1vZF9zdGF0ZS5wcm92aWRlcignJHVpUm91dGVyR2xvYmFscycsIGdldFByb3ZpZGVyRm9yKCdnbG9iYWxzJykpO1xubW9kX3N0YXRlLnByb3ZpZGVyKCckdHJhbnNpdGlvbnMnLCBnZXRQcm92aWRlckZvcigndHJhbnNpdGlvblNlcnZpY2UnKSk7XG5tb2Rfc3RhdGUucHJvdmlkZXIoJyRzdGF0ZScsIFsnJHVpUm91dGVyUHJvdmlkZXInLCBnZXRTdGF0ZVByb3ZpZGVyXSk7XG5cbm1vZF9zdGF0ZS5mYWN0b3J5KCckc3RhdGVQYXJhbXMnLCBbJyR1aVJvdXRlcicsICgkdWlSb3V0ZXI6IFVJUm91dGVyKSA9PiAkdWlSb3V0ZXIuZ2xvYmFscy5wYXJhbXNdKTtcbm1vZF9tYWluLmZhY3RvcnkoJyR2aWV3JywgKCkgPT4gcm91dGVyLnZpZXdTZXJ2aWNlKTtcbm1vZF9tYWluLnNlcnZpY2UoJyR0cmFjZScsICgpID0+IHRyYWNlKTtcblxubW9kX21haW4ucnVuKHdhdGNoRGlnZXN0cyk7XG5tb2RfdXRpbC5ydW4oWyckdXJsTWF0Y2hlckZhY3RvcnknLCBmdW5jdGlvbigkdXJsTWF0Y2hlckZhY3Rvcnk6IFVybE1hdGNoZXJGYWN0b3J5KSB7fV0pO1xubW9kX3N0YXRlLnJ1bihbJyRzdGF0ZScsIGZ1bmN0aW9uKCRzdGF0ZTogU3RhdGVTZXJ2aWNlKSB7fV0pO1xubW9kX3J0ci5ydW4oWyckdXJsUm91dGVyJywgZnVuY3Rpb24oJHVybFJvdXRlcjogVXJsUm91dGVyKSB7fV0pO1xubW9kX2luaXQucnVuKHJ1bkJsb2NrKTtcblxuLyoqIEBoaWRkZW4gVE9ETzogZmluZCBhIHBsYWNlIHRvIG1vdmUgdGhpcyAqL1xuZXhwb3J0IGNvbnN0IGdldExvY2FscyA9IChjdHg6IFJlc29sdmVDb250ZXh0KTogVHlwZWRNYXA8YW55PiA9PiB7XG4gIGNvbnN0IHRva2VucyA9IGN0eC5nZXRUb2tlbnMoKS5maWx0ZXIoaXNTdHJpbmcpO1xuXG4gIGNvbnN0IHR1cGxlcyA9IHRva2Vucy5tYXAoa2V5ID0+IHtcbiAgICBjb25zdCByZXNvbHZhYmxlID0gY3R4LmdldFJlc29sdmFibGUoa2V5KTtcbiAgICBjb25zdCB3YWl0UG9saWN5ID0gY3R4LmdldFBvbGljeShyZXNvbHZhYmxlKS5hc3luYztcbiAgICByZXR1cm4gW2tleSwgd2FpdFBvbGljeSA9PT0gJ05PV0FJVCcgPyByZXNvbHZhYmxlLnByb21pc2UgOiByZXNvbHZhYmxlLmRhdGFdO1xuICB9KTtcblxuICByZXR1cm4gdHVwbGVzLnJlZHVjZShhcHBseVBhaXJzLCB7fSk7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9hbmd1bGFyanMvc3JjL3NlcnZpY2VzLnRzIiwiLyoqXG4gKiAjIEFuZ3VsYXIgMSBEaXJlY3RpdmVzXG4gKlxuICogVGhlc2UgYXJlIHRoZSBkaXJlY3RpdmVzIGluY2x1ZGVkIGluIFVJLVJvdXRlciBmb3IgQW5ndWxhciAxLlxuICogVGhlc2UgZGlyZWN0aXZlcyBhcmUgdXNlZCBpbiB0ZW1wbGF0ZXMgdG8gY3JlYXRlIHZpZXdwb3J0cyBhbmQgbGluay9uYXZpZ2F0ZSB0byBzdGF0ZXMuXG4gKlxuICogQG5nMWFwaVxuICogQHByZWZlcnJlZFxuICogQG1vZHVsZSBkaXJlY3RpdmVzXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5pbXBvcnQgeyBuZyBhcyBhbmd1bGFyIH0gZnJvbSAnLi4vYW5ndWxhcic7XG5pbXBvcnQgeyBJQXVnbWVudGVkSlF1ZXJ5LCBJVGltZW91dFNlcnZpY2UsIElTY29wZSwgSUludGVycG9sYXRlU2VydmljZSB9IGZyb20gJ2FuZ3VsYXInO1xuXG5pbXBvcnQge1xuICBPYmosXG4gIGV4dGVuZCxcbiAgZm9yRWFjaCxcbiAgdGFpbCxcbiAgaXNTdHJpbmcsXG4gIGlzT2JqZWN0LFxuICBpc0FycmF5LFxuICBwYXJzZSxcbiAgbm9vcCxcbiAgdW5uZXN0UixcbiAgaWRlbnRpdHksXG4gIHVuaXFSLFxuICBpbkFycmF5LFxuICByZW1vdmVGcm9tLFxuICBSYXdQYXJhbXMsXG4gIFBhdGhOb2RlLFxuICBTdGF0ZU9yTmFtZSxcbiAgU3RhdGVTZXJ2aWNlLFxuICBTdGF0ZURlY2xhcmF0aW9uLFxuICBVSVJvdXRlcixcbn0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuaW1wb3J0IHsgVUlWaWV3RGF0YSB9IGZyb20gJy4vdmlld0RpcmVjdGl2ZSc7XG5pbXBvcnQgRXZlbnRIYW5kbGVyID0gSlF1ZXJ5LkV2ZW50SGFuZGxlcjtcblxuLyoqIEBoaWRkZW4gVXNlZCBmb3IgdHlwZWRvYyAqL1xuZXhwb3J0IGludGVyZmFjZSBuZzFfZGlyZWN0aXZlIHt9IC8vIHRzbGludDpkaXNhYmxlLWxpbmU6Y2xhc3MtbmFtZVxuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gcGFyc2VTdGF0ZVJlZihyZWY6IHN0cmluZykge1xuICBsZXQgcGFyc2VkO1xuICBjb25zdCBwYXJhbXNPbmx5ID0gcmVmLm1hdGNoKC9eXFxzKih7W159XSp9KVxccyokLyk7XG4gIGlmIChwYXJhbXNPbmx5KSByZWYgPSAnKCcgKyBwYXJhbXNPbmx5WzFdICsgJyknO1xuXG4gIHBhcnNlZCA9IHJlZi5yZXBsYWNlKC9cXG4vZywgJyAnKS5tYXRjaCgvXlxccyooW14oXSo/KVxccyooXFwoKC4qKVxcKSk/XFxzKiQvKTtcbiAgaWYgKCFwYXJzZWQgfHwgcGFyc2VkLmxlbmd0aCAhPT0gNCkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdGF0ZSByZWYgJ1wiICsgcmVmICsgXCInXCIpO1xuICByZXR1cm4geyBzdGF0ZTogcGFyc2VkWzFdIHx8IG51bGwsIHBhcmFtRXhwcjogcGFyc2VkWzNdIHx8IG51bGwgfTtcbn1cblxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIHN0YXRlQ29udGV4dChlbDogSUF1Z21lbnRlZEpRdWVyeSkge1xuICBjb25zdCAkdWlWaWV3OiBVSVZpZXdEYXRhID0gKGVsLnBhcmVudCgpIGFzIElBdWdtZW50ZWRKUXVlcnkpLmluaGVyaXRlZERhdGEoJyR1aVZpZXcnKTtcbiAgY29uc3QgcGF0aDogUGF0aE5vZGVbXSA9IHBhcnNlKCckY2ZnLnBhdGgnKSgkdWlWaWV3KTtcbiAgcmV0dXJuIHBhdGggPyB0YWlsKHBhdGgpLnN0YXRlLm5hbWUgOiB1bmRlZmluZWQ7XG59XG5cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBwcm9jZXNzZWREZWYoJHN0YXRlOiBTdGF0ZVNlcnZpY2UsICRlbGVtZW50OiBJQXVnbWVudGVkSlF1ZXJ5LCBkZWY6IERlZik6IERlZiB7XG4gIGNvbnN0IHVpU3RhdGUgPSBkZWYudWlTdGF0ZSB8fCAkc3RhdGUuY3VycmVudC5uYW1lO1xuICBjb25zdCB1aVN0YXRlT3B0cyA9IGV4dGVuZChkZWZhdWx0T3B0cygkZWxlbWVudCwgJHN0YXRlKSwgZGVmLnVpU3RhdGVPcHRzIHx8IHt9KTtcbiAgY29uc3QgaHJlZiA9ICRzdGF0ZS5ocmVmKHVpU3RhdGUsIGRlZi51aVN0YXRlUGFyYW1zLCB1aVN0YXRlT3B0cyk7XG4gIHJldHVybiB7IHVpU3RhdGUsIHVpU3RhdGVQYXJhbXM6IGRlZi51aVN0YXRlUGFyYW1zLCB1aVN0YXRlT3B0cywgaHJlZiB9O1xufVxuXG4vKiogQGhpZGRlbiAqL1xuaW50ZXJmYWNlIFR5cGVJbmZvIHtcbiAgYXR0cjogc3RyaW5nO1xuICBpc0FuY2hvcjogYm9vbGVhbjtcbiAgY2xpY2thYmxlOiBib29sZWFuO1xufVxuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gZ2V0VHlwZUluZm8oZWw6IElBdWdtZW50ZWRKUXVlcnkpOiBUeXBlSW5mbyB7XG4gIC8vIFNWR0FFbGVtZW50IGRvZXMgbm90IHVzZSB0aGUgaHJlZiBhdHRyaWJ1dGUsIGJ1dCByYXRoZXIgdGhlICd4bGlua0hyZWYnIGF0dHJpYnV0ZS5cbiAgY29uc3QgaXNTdmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZWwucHJvcCgnaHJlZicpKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJztcbiAgY29uc3QgaXNGb3JtID0gZWxbMF0ubm9kZU5hbWUgPT09ICdGT1JNJztcblxuICByZXR1cm4ge1xuICAgIGF0dHI6IGlzRm9ybSA/ICdhY3Rpb24nIDogaXNTdmcgPyAneGxpbms6aHJlZicgOiAnaHJlZicsXG4gICAgaXNBbmNob3I6IGVsLnByb3AoJ3RhZ05hbWUnKS50b1VwcGVyQ2FzZSgpID09PSAnQScsXG4gICAgY2xpY2thYmxlOiAhaXNGb3JtLFxuICB9O1xufVxuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gY2xpY2tIb29rKFxuICBlbDogSUF1Z21lbnRlZEpRdWVyeSxcbiAgJHN0YXRlOiBTdGF0ZVNlcnZpY2UsXG4gICR0aW1lb3V0OiBJVGltZW91dFNlcnZpY2UsXG4gIHR5cGU6IFR5cGVJbmZvLFxuICBnZXREZWY6ICgpID0+IERlZixcbikge1xuICByZXR1cm4gZnVuY3Rpb24oZTogSlF1ZXJ5TW91c2VFdmVudE9iamVjdCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGUud2hpY2ggfHwgZS5idXR0b24sXG4gICAgICB0YXJnZXQgPSBnZXREZWYoKTtcblxuICAgIGlmICghKGJ1dHRvbiA+IDEgfHwgZS5jdHJsS2V5IHx8IGUubWV0YUtleSB8fCBlLnNoaWZ0S2V5IHx8IGVsLmF0dHIoJ3RhcmdldCcpKSkge1xuICAgICAgLy8gSEFDSzogVGhpcyBpcyB0byBhbGxvdyBuZy1jbGlja3MgdG8gYmUgcHJvY2Vzc2VkIGJlZm9yZSB0aGUgdHJhbnNpdGlvbiBpcyBpbml0aWF0ZWQ6XG4gICAgICBjb25zdCB0cmFuc2l0aW9uID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICRzdGF0ZS5nbyh0YXJnZXQudWlTdGF0ZSwgdGFyZ2V0LnVpU3RhdGVQYXJhbXMsIHRhcmdldC51aVN0YXRlT3B0cyk7XG4gICAgICB9KTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgLy8gaWYgdGhlIHN0YXRlIGhhcyBubyBVUkwsIGlnbm9yZSBvbmUgcHJldmVudERlZmF1bHQgZnJvbSB0aGUgPGE+IGRpcmVjdGl2ZS5cbiAgICAgIGxldCBpZ25vcmVQcmV2ZW50RGVmYXVsdENvdW50ID0gdHlwZS5pc0FuY2hvciAmJiAhdGFyZ2V0LmhyZWYgPyAxIDogMDtcblxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaWdub3JlUHJldmVudERlZmF1bHRDb3VudC0tIDw9IDApICR0aW1lb3V0LmNhbmNlbCh0cmFuc2l0aW9uKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufVxuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gZGVmYXVsdE9wdHMoZWw6IElBdWdtZW50ZWRKUXVlcnksICRzdGF0ZTogU3RhdGVTZXJ2aWNlKSB7XG4gIHJldHVybiB7XG4gICAgcmVsYXRpdmU6IHN0YXRlQ29udGV4dChlbCkgfHwgJHN0YXRlLiRjdXJyZW50LFxuICAgIGluaGVyaXQ6IHRydWUsXG4gICAgc291cmNlOiAnc3JlZicsXG4gIH07XG59XG5cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBiaW5kRXZlbnRzKGVsZW1lbnQ6IElBdWdtZW50ZWRKUXVlcnksIHNjb3BlOiBJU2NvcGUsIGhvb2tGbjogRXZlbnRIYW5kbGVyPGFueT4sIHVpU3RhdGVPcHRzOiBhbnkpOiB2b2lkIHtcbiAgbGV0IGV2ZW50cztcblxuICBpZiAodWlTdGF0ZU9wdHMpIHtcbiAgICBldmVudHMgPSB1aVN0YXRlT3B0cy5ldmVudHM7XG4gIH1cblxuICBpZiAoIWlzQXJyYXkoZXZlbnRzKSkge1xuICAgIGV2ZW50cyA9IFsnY2xpY2snXTtcbiAgfVxuXG4gIGNvbnN0IG9uID0gZWxlbWVudC5vbiA/ICdvbicgOiAnYmluZCc7XG4gIGZvciAoY29uc3QgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgZWxlbWVudFtvbl0oZXZlbnQsIGhvb2tGbik7XG4gIH1cblxuICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgY29uc3Qgb2ZmID0gZWxlbWVudC5vZmYgPyAnb2ZmJyA6ICd1bmJpbmQnO1xuICAgIGZvciAoY29uc3QgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICBlbGVtZW50W29mZl0oZXZlbnQsIGhvb2tGbik7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBgdWktc3JlZmA6IEEgZGlyZWN0aXZlIGZvciBsaW5raW5nIHRvIGEgc3RhdGVcbiAqXG4gKiBBIGRpcmVjdGl2ZSB3aGljaCBsaW5rcyB0byBhIHN0YXRlIChhbmQgb3B0aW9uYWxseSwgcGFyYW1ldGVycykuXG4gKiBXaGVuIGNsaWNrZWQsIHRoaXMgZGlyZWN0aXZlIGFjdGl2YXRlcyB0aGUgbGlua2VkIHN0YXRlIHdpdGggdGhlIHN1cHBsaWVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gKlxuICogIyMjIExpbmtlZCBTdGF0ZVxuICogVGhlIGF0dHJpYnV0ZSB2YWx1ZSBvZiB0aGUgYHVpLXNyZWZgIGlzIHRoZSBuYW1lIG9mIHRoZSBzdGF0ZSB0byBsaW5rIHRvLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIFRoaXMgd2lsbCBhY3RpdmF0ZSB0aGUgYGhvbWVgIHN0YXRlIHdoZW4gdGhlIGxpbmsgaXMgY2xpY2tlZC5cbiAqIGBgYGh0bWxcbiAqIDxhIHVpLXNyZWY9XCJob21lXCI+SG9tZTwvYT5cbiAqIGBgYFxuICpcbiAqICMjIyBSZWxhdGl2ZSBMaW5rc1xuICogWW91IGNhbiBhbHNvIHVzZSByZWxhdGl2ZSBzdGF0ZSBwYXRocyB3aXRoaW4gYHVpLXNyZWZgLCBqdXN0IGxpa2UgYSByZWxhdGl2ZSBwYXRoIHBhc3NlZCB0byBgJHN0YXRlLmdvKClgIChbW1N0YXRlU2VydmljZS5nb11dKS5cbiAqIFlvdSBqdXN0IG5lZWQgdG8gYmUgYXdhcmUgdGhhdCB0aGUgcGF0aCBpcyByZWxhdGl2ZSB0byB0aGUgc3RhdGUgdGhhdCAqY3JlYXRlZCogdGhlIGxpbmsuXG4gKiBUaGlzIGFsbG93cyBhIHN0YXRlIHRvIGNyZWF0ZSBhIHJlbGF0aXZlIGB1aS1zcmVmYCB3aGljaCBhbHdheXMgdGFyZ2V0cyB0aGUgc2FtZSBkZXN0aW5hdGlvbi5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBCb3RoIHRoZXNlIGxpbmtzIGFyZSByZWxhdGl2ZSB0byB0aGUgcGFyZW50IHN0YXRlLCBldmVuIHdoZW4gYSBjaGlsZCBzdGF0ZSBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICogYGBgaHRtbFxuICogPGEgdWktc3JlZj1cIi5jaGlsZDFcIj5jaGlsZCAxIHN0YXRlPC9hPlxuICogPGEgdWktc3JlZj1cIi5jaGlsZDJcIj5jaGlsZCAyIHN0YXRlPC9hPlxuICogYGBgXG4gKlxuICogVGhpcyBsaW5rIGFjdGl2YXRlcyB0aGUgcGFyZW50IHN0YXRlLlxuICogYGBgaHRtbFxuICogPGEgdWktc3JlZj1cIl5cIj5SZXR1cm48L2E+XG4gKiBgYGBcbiAqXG4gKiAjIyMgaHJlZnNcbiAqIElmIHRoZSBsaW5rZWQgc3RhdGUgaGFzIGEgVVJMLCB0aGUgZGlyZWN0aXZlIHdpbGwgYXV0b21hdGljYWxseSBnZW5lcmF0ZSBhbmRcbiAqIHVwZGF0ZSB0aGUgYGhyZWZgIGF0dHJpYnV0ZSAodXNpbmcgdGhlIFtbU3RhdGVTZXJ2aWNlLmhyZWZdXSAgbWV0aG9kKS5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBBc3N1bWluZyB0aGUgYHVzZXJzYCBzdGF0ZSBoYXMgYSB1cmwgb2YgYC91c2Vycy9gXG4gKiBgYGBodG1sXG4gKiA8YSB1aS1zcmVmPVwidXNlcnNcIiBocmVmPVwiL3VzZXJzL1wiPlVzZXJzPC9hPlxuICogYGBgXG4gKlxuICogIyMjIFBhcmFtZXRlciBWYWx1ZXNcbiAqIEluIGFkZGl0aW9uIHRvIHRoZSBzdGF0ZSBuYW1lLCBhIGB1aS1zcmVmYCBjYW4gaW5jbHVkZSBwYXJhbWV0ZXIgdmFsdWVzIHdoaWNoIGFyZSBhcHBsaWVkIHdoZW4gYWN0aXZhdGluZyB0aGUgc3RhdGUuXG4gKiBQYXJhbSB2YWx1ZXMgY2FuIGJlIHByb3ZpZGVkIGluIHRoZSBgdWktc3JlZmAgdmFsdWUgYWZ0ZXIgdGhlIHN0YXRlIG5hbWUsIGVuY2xvc2VkIGJ5IHBhcmVudGhlc2VzLlxuICogVGhlIGNvbnRlbnQgaW5zaWRlIHRoZSBwYXJlbnRoZXNlcyBpcyBhbiBleHByZXNzaW9uLCBldmFsdWF0ZWQgdG8gdGhlIHBhcmFtZXRlciB2YWx1ZXMuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogVGhpcyBleGFtcGxlIHJlbmRlcnMgYSBsaXN0IG9mIGxpbmtzIHRvIHVzZXJzLlxuICogVGhlIHN0YXRlJ3MgYHVzZXJJZGAgcGFyYW1ldGVyIHZhbHVlIGNvbWVzIGZyb20gZWFjaCB1c2VyJ3MgYHVzZXIuaWRgIHByb3BlcnR5LlxuICogYGBgaHRtbFxuICogPGxpIG5nLXJlcGVhdD1cInVzZXIgaW4gdXNlcnNcIj5cbiAqICAgPGEgdWktc3JlZj1cInVzZXJzLmRldGFpbCh7IHVzZXJJZDogdXNlci5pZCB9KVwiPnt7IHVzZXIuZGlzcGxheU5hbWUgfX08L2E+XG4gKiA8L2xpPlxuICogYGBgXG4gKlxuICogTm90ZTpcbiAqIFRoZSBwYXJhbWV0ZXIgdmFsdWVzIGV4cHJlc3Npb24gaXMgYCR3YXRjaGBlZCBmb3IgdXBkYXRlcy5cbiAqXG4gKiAjIyMgVHJhbnNpdGlvbiBPcHRpb25zXG4gKiBZb3UgY2FuIHNwZWNpZnkgW1tUcmFuc2l0aW9uT3B0aW9uc11dIHRvIHBhc3MgdG8gW1tTdGF0ZVNlcnZpY2UuZ29dXSBieSB1c2luZyB0aGUgYHVpLXNyZWYtb3B0c2AgYXR0cmlidXRlLlxuICogT3B0aW9ucyBhcmUgcmVzdHJpY3RlZCB0byBgbG9jYXRpb25gLCBgaW5oZXJpdGAsIGFuZCBgcmVsb2FkYC5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBodG1sXG4gKiA8YSB1aS1zcmVmPVwiaG9tZVwiIHVpLXNyZWYtb3B0cz1cInsgcmVsb2FkOiB0cnVlIH1cIj5Ib21lPC9hPlxuICogYGBgXG4gKlxuICogIyMjIE90aGVyIERPTSBFdmVudHNcbiAqXG4gKiBZb3UgY2FuIGFsc28gY3VzdG9taXplIHdoaWNoIERPTSBldmVudHMgdG8gcmVzcG9uZCB0byAoaW5zdGVhZCBvZiBgY2xpY2tgKSBieVxuICogcHJvdmlkaW5nIGFuIGBldmVudHNgIGFycmF5IGluIHRoZSBgdWktc3JlZi1vcHRzYCBhdHRyaWJ1dGUuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBgaHRtbFxuICogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdWktc3JlZj1cImNvbnRhY3RzXCIgdWktc3JlZi1vcHRzPVwieyBldmVudHM6IFsnY2hhbmdlJywgJ2JsdXInXSB9XCI+XG4gKiBgYGBcbiAqXG4gKiAjIyMgSGlnaGxpZ2h0aW5nIHRoZSBhY3RpdmUgbGlua1xuICogVGhpcyBkaXJlY3RpdmUgY2FuIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBbW3VpU3JlZkFjdGl2ZV1dIHRvIGhpZ2hsaWdodCB0aGUgYWN0aXZlIGxpbmsuXG4gKlxuICogIyMjIEV4YW1wbGVzXG4gKiBJZiB5b3UgaGF2ZSB0aGUgZm9sbG93aW5nIHRlbXBsYXRlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxhIHVpLXNyZWY9XCJob21lXCI+SG9tZTwvYT5cbiAqIDxhIHVpLXNyZWY9XCJhYm91dFwiPkFib3V0PC9hPlxuICogPGEgdWktc3JlZj1cIntwYWdlOiAyfVwiPk5leHQgcGFnZTwvYT5cbiAqXG4gKiA8dWw+XG4gKiAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAqICAgICAgICAgPGEgdWktc3JlZj1cImNvbnRhY3RzLmRldGFpbCh7IGlkOiBjb250YWN0LmlkIH0pXCI+e3sgY29udGFjdC5uYW1lIH19PC9hPlxuICogICAgIDwvbGk+XG4gKiA8L3VsPlxuICogYGBgXG4gKlxuICogVGhlbiAoYXNzdW1pbmcgdGhlIGN1cnJlbnQgc3RhdGUgaXMgYGNvbnRhY3RzYCkgdGhlIHJlbmRlcmVkIGh0bWwgaW5jbHVkaW5nIGhyZWZzIHdvdWxkIGJlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxhIGhyZWY9XCIjL2hvbWVcIiB1aS1zcmVmPVwiaG9tZVwiPkhvbWU8L2E+XG4gKiA8YSBocmVmPVwiIy9hYm91dFwiIHVpLXNyZWY9XCJhYm91dFwiPkFib3V0PC9hPlxuICogPGEgaHJlZj1cIiMvY29udGFjdHM/cGFnZT0yXCIgdWktc3JlZj1cIntwYWdlOiAyfVwiPk5leHQgcGFnZTwvYT5cbiAqXG4gKiA8dWw+XG4gKiAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAqICAgICAgICAgPGEgaHJlZj1cIiMvY29udGFjdHMvMVwiIHVpLXNyZWY9XCJjb250YWN0cy5kZXRhaWwoeyBpZDogY29udGFjdC5pZCB9KVwiPkpvZTwvYT5cbiAqICAgICA8L2xpPlxuICogICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIGNvbnRhY3RzXCI+XG4gKiAgICAgICAgIDxhIGhyZWY9XCIjL2NvbnRhY3RzLzJcIiB1aS1zcmVmPVwiY29udGFjdHMuZGV0YWlsKHsgaWQ6IGNvbnRhY3QuaWQgfSlcIj5BbGljZTwvYT5cbiAqICAgICA8L2xpPlxuICogICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIGNvbnRhY3RzXCI+XG4gKiAgICAgICAgIDxhIGhyZWY9XCIjL2NvbnRhY3RzLzNcIiB1aS1zcmVmPVwiY29udGFjdHMuZGV0YWlsKHsgaWQ6IGNvbnRhY3QuaWQgfSlcIj5Cb2I8L2E+XG4gKiAgICAgPC9saT5cbiAqIDwvdWw+XG4gKlxuICogPGEgaHJlZj1cIiMvaG9tZVwiIHVpLXNyZWY9XCJob21lXCIgdWktc3JlZi1vcHRzPVwie3JlbG9hZDogdHJ1ZX1cIj5Ib21lPC9hPlxuICogYGBgXG4gKlxuICogIyMjIE5vdGVzXG4gKlxuICogLSBZb3UgY2FuIHVzZSBgdWktc3JlZmAgdG8gY2hhbmdlICoqb25seSB0aGUgcGFyYW1ldGVyIHZhbHVlcyoqIGJ5IG9taXR0aW5nIHRoZSBzdGF0ZSBuYW1lIGFuZCBwYXJlbnRoZXNlcy5cbiAqICMjIyMgRXhhbXBsZTpcbiAqIFNldHMgdGhlIGBsYW5nYCBwYXJhbWV0ZXIgdG8gYGVuYCBhbmQgcmVtYWlucyBvbiB0aGUgc2FtZSBzdGF0ZS5cbiAqXG4gKiBgYGBodG1sXG4gKiA8YSB1aS1zcmVmPVwieyBsYW5nOiAnZW4nIH1cIj5FbmdsaXNoPC9hPlxuICogYGBgXG4gKlxuICogLSBBIG1pZGRsZS1jbGljaywgcmlnaHQtY2xpY2ssIG9yIGN0cmwtY2xpY2sgaXMgaGFuZGxlZCAobmF0aXZlbHkpIGJ5IHRoZSBicm93c2VyIHRvIG9wZW4gdGhlIGhyZWYgaW4gYSBuZXcgd2luZG93LCBmb3IgZXhhbXBsZS5cbiAqXG4gKiAtIFVubGlrZSB0aGUgcGFyYW1ldGVyIHZhbHVlcyBleHByZXNzaW9uLCB0aGUgc3RhdGUgbmFtZSBpcyBub3QgYCR3YXRjaGBlZCAoZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMpLlxuICogSWYgeW91IG5lZWQgdG8gZHluYW1pY2FsbHkgdXBkYXRlIHRoZSBzdGF0ZSBiZWluZyBsaW5rZWQgdG8sIHVzZSB0aGUgZnVsbHkgZHluYW1pYyBbW3VpU3RhdGVdXSBkaXJlY3RpdmUuXG4gKi9cbmxldCB1aVNyZWZEaXJlY3RpdmU6IG5nMV9kaXJlY3RpdmU7XG51aVNyZWZEaXJlY3RpdmUgPSBbXG4gICckdWlSb3V0ZXInLFxuICAnJHRpbWVvdXQnLFxuICBmdW5jdGlvbiAkU3RhdGVSZWZEaXJlY3RpdmUoJHVpUm91dGVyOiBVSVJvdXRlciwgJHRpbWVvdXQ6IElUaW1lb3V0U2VydmljZSkge1xuICAgIGNvbnN0ICRzdGF0ZSA9ICR1aVJvdXRlci5zdGF0ZVNlcnZpY2U7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHJlcXVpcmU6IFsnP151aVNyZWZBY3RpdmUnLCAnP151aVNyZWZBY3RpdmVFcSddLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGU6IElTY29wZSwgZWxlbWVudDogSUF1Z21lbnRlZEpRdWVyeSwgYXR0cnM6IGFueSwgdWlTcmVmQWN0aXZlOiBhbnkpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IGdldFR5cGVJbmZvKGVsZW1lbnQpO1xuICAgICAgICBjb25zdCBhY3RpdmUgPSB1aVNyZWZBY3RpdmVbMV0gfHwgdWlTcmVmQWN0aXZlWzBdO1xuICAgICAgICBsZXQgdW5saW5rSW5mb0ZuOiBGdW5jdGlvbiA9IG51bGw7XG4gICAgICAgIGxldCBob29rRm47XG5cbiAgICAgICAgY29uc3QgcmF3RGVmID0ge30gYXMgRGVmO1xuICAgICAgICBjb25zdCBnZXREZWYgPSAoKSA9PiBwcm9jZXNzZWREZWYoJHN0YXRlLCBlbGVtZW50LCByYXdEZWYpO1xuXG4gICAgICAgIGNvbnN0IHJlZiA9IHBhcnNlU3RhdGVSZWYoYXR0cnMudWlTcmVmKTtcbiAgICAgICAgcmF3RGVmLnVpU3RhdGUgPSByZWYuc3RhdGU7XG4gICAgICAgIHJhd0RlZi51aVN0YXRlT3B0cyA9IGF0dHJzLnVpU3JlZk9wdHMgPyBzY29wZS4kZXZhbChhdHRycy51aVNyZWZPcHRzKSA6IHt9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICBjb25zdCBkZWYgPSBnZXREZWYoKTtcbiAgICAgICAgICBpZiAodW5saW5rSW5mb0ZuKSB1bmxpbmtJbmZvRm4oKTtcbiAgICAgICAgICBpZiAoYWN0aXZlKSB1bmxpbmtJbmZvRm4gPSBhY3RpdmUuJCRhZGRTdGF0ZUluZm8oZGVmLnVpU3RhdGUsIGRlZi51aVN0YXRlUGFyYW1zKTtcbiAgICAgICAgICBpZiAoZGVmLmhyZWYgIT0gbnVsbCkgYXR0cnMuJHNldCh0eXBlLmF0dHIsIGRlZi5ocmVmKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZWYucGFyYW1FeHByKSB7XG4gICAgICAgICAgc2NvcGUuJHdhdGNoKFxuICAgICAgICAgICAgcmVmLnBhcmFtRXhwcixcbiAgICAgICAgICAgIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgICByYXdEZWYudWlTdGF0ZVBhcmFtcyA9IGV4dGVuZCh7fSwgdmFsKTtcbiAgICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICApO1xuICAgICAgICAgIHJhd0RlZi51aVN0YXRlUGFyYW1zID0gZXh0ZW5kKHt9LCBzY29wZS4kZXZhbChyZWYucGFyYW1FeHByKSk7XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGUoKTtcblxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgPGFueT4kdWlSb3V0ZXIuc3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQodXBkYXRlKSk7XG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCA8YW55PiR1aVJvdXRlci50cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIHVwZGF0ZSkpO1xuXG4gICAgICAgIGlmICghdHlwZS5jbGlja2FibGUpIHJldHVybjtcbiAgICAgICAgaG9va0ZuID0gY2xpY2tIb29rKGVsZW1lbnQsICRzdGF0ZSwgJHRpbWVvdXQsIHR5cGUsIGdldERlZik7XG4gICAgICAgIGJpbmRFdmVudHMoZWxlbWVudCwgc2NvcGUsIGhvb2tGbiwgcmF3RGVmLnVpU3RhdGVPcHRzKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfSxcbl07XG5cbi8qKlxuICogYHVpLXN0YXRlYDogQSBmdWxseSBkeW5hbWljIGRpcmVjdGl2ZSBmb3IgbGlua2luZyB0byBhIHN0YXRlXG4gKlxuICogQSBkaXJlY3RpdmUgd2hpY2ggbGlua3MgdG8gYSBzdGF0ZSAoYW5kIG9wdGlvbmFsbHksIHBhcmFtZXRlcnMpLlxuICogV2hlbiBjbGlja2VkLCB0aGlzIGRpcmVjdGl2ZSBhY3RpdmF0ZXMgdGhlIGxpbmtlZCBzdGF0ZSB3aXRoIHRoZSBzdXBwbGllZCBwYXJhbWV0ZXIgdmFsdWVzLlxuICpcbiAqICoqVGhpcyBkaXJlY3RpdmUgaXMgdmVyeSBzaW1pbGFyIHRvIFtbdWlTcmVmXV0sIGJ1dCBpdCBgJG9ic2VydmVgcyBhbmQgYCR3YXRjaGBlcy9ldmFsdWF0ZXMgYWxsIGl0cyBpbnB1dHMuKipcbiAqXG4gKiBBIGRpcmVjdGl2ZSB3aGljaCBsaW5rcyB0byBhIHN0YXRlIChhbmQgb3B0aW9uYWxseSwgcGFyYW1ldGVycykuXG4gKiBXaGVuIGNsaWNrZWQsIHRoaXMgZGlyZWN0aXZlIGFjdGl2YXRlcyB0aGUgbGlua2VkIHN0YXRlIHdpdGggdGhlIHN1cHBsaWVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gKlxuICogIyMjIExpbmtlZCBTdGF0ZVxuICogVGhlIGF0dHJpYnV0ZSB2YWx1ZSBvZiBgdWktc3RhdGVgIGlzIGFuIGV4cHJlc3Npb24gd2hpY2ggaXMgYCR3YXRjaGBlZCBhbmQgZXZhbHVhdGVkIGFzIHRoZSBzdGF0ZSB0byBsaW5rIHRvLlxuICogKipUaGlzIGlzIGluIGNvbnRyYXN0IHdpdGggYHVpLXNyZWZgLCB3aGljaCB0YWtlcyBhIHN0YXRlIG5hbWUgYXMgYSBzdHJpbmcgbGl0ZXJhbC4qKlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIENyZWF0ZSBhIGxpc3Qgb2YgbGlua3MuXG4gKiBgYGBodG1sXG4gKiA8bGkgbmctcmVwZWF0PVwibGluayBpbiBuYXZsaW5rc1wiPlxuICogICA8YSB1aS1zdGF0ZT1cImxpbmsuc3RhdGVcIj57eyBsaW5rLmRpc3BsYXlOYW1lIH19PC9hPlxuICogPC9saT5cbiAqIGBgYFxuICpcbiAqICMjIyBSZWxhdGl2ZSBMaW5rc1xuICogSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgcmVsYXRpdmUgcGF0aCwgaXQgaXMgcHJvY2Vzc2VkIGxpa2UgW1t1aVNyZWZdXS5cbiAqIFlvdSBqdXN0IG5lZWQgdG8gYmUgYXdhcmUgdGhhdCB0aGUgcGF0aCBpcyByZWxhdGl2ZSB0byB0aGUgc3RhdGUgdGhhdCAqY3JlYXRlZCogdGhlIGxpbmsuXG4gKiBUaGlzIGFsbG93cyBhIHN0YXRlIHRvIGNyZWF0ZSByZWxhdGl2ZSBgdWktc3RhdGVgIHdoaWNoIGFsd2F5cyB0YXJnZXRzIHRoZSBzYW1lIGRlc3RpbmF0aW9uLlxuICpcbiAqICMjIyBocmVmc1xuICogSWYgdGhlIGxpbmtlZCBzdGF0ZSBoYXMgYSBVUkwsIHRoZSBkaXJlY3RpdmUgd2lsbCBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIGFuZFxuICogdXBkYXRlIHRoZSBgaHJlZmAgYXR0cmlidXRlICh1c2luZyB0aGUgW1tTdGF0ZVNlcnZpY2UuaHJlZl1dICBtZXRob2QpLlxuICpcbiAqICMjIyBQYXJhbWV0ZXIgVmFsdWVzXG4gKiBJbiBhZGRpdGlvbiB0byB0aGUgc3RhdGUgbmFtZSBleHByZXNzaW9uLCBhIGB1aS1zdGF0ZWAgY2FuIGluY2x1ZGUgcGFyYW1ldGVyIHZhbHVlcyB3aGljaCBhcmUgYXBwbGllZCB3aGVuIGFjdGl2YXRpbmcgdGhlIHN0YXRlLlxuICogUGFyYW0gdmFsdWVzIHNob3VsZCBiZSBwcm92aWRlZCB1c2luZyB0aGUgYHVpLXN0YXRlLXBhcmFtc2AgYXR0cmlidXRlLlxuICogVGhlIGB1aS1zdGF0ZS1wYXJhbXNgIGF0dHJpYnV0ZSB2YWx1ZSBpcyBgJHdhdGNoYGVkIGFuZCBldmFsdWF0ZWQgYXMgYW4gZXhwcmVzc2lvbi5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBUaGlzIGV4YW1wbGUgcmVuZGVycyBhIGxpc3Qgb2YgbGlua3Mgd2l0aCBwYXJhbSB2YWx1ZXMuXG4gKiBUaGUgc3RhdGUncyBgdXNlcklkYCBwYXJhbWV0ZXIgdmFsdWUgY29tZXMgZnJvbSBlYWNoIHVzZXIncyBgdXNlci5pZGAgcHJvcGVydHkuXG4gKiBgYGBodG1sXG4gKiA8bGkgbmctcmVwZWF0PVwibGluayBpbiBuYXZsaW5rc1wiPlxuICogICA8YSB1aS1zdGF0ZT1cImxpbmsuc3RhdGVcIiB1aS1zdGF0ZS1wYXJhbXM9XCJsaW5rLnBhcmFtc1wiPnt7IGxpbmsuZGlzcGxheU5hbWUgfX08L2E+XG4gKiA8L2xpPlxuICogYGBgXG4gKlxuICogIyMjIFRyYW5zaXRpb24gT3B0aW9uc1xuICogWW91IGNhbiBzcGVjaWZ5IFtbVHJhbnNpdGlvbk9wdGlvbnNdXSB0byBwYXNzIHRvIFtbU3RhdGVTZXJ2aWNlLmdvXV0gYnkgdXNpbmcgdGhlIGB1aS1zdGF0ZS1vcHRzYCBhdHRyaWJ1dGUuXG4gKiBPcHRpb25zIGFyZSByZXN0cmljdGVkIHRvIGBsb2NhdGlvbmAsIGBpbmhlcml0YCwgYW5kIGByZWxvYWRgLlxuICogVGhlIHZhbHVlIG9mIHRoZSBgdWktc3RhdGUtb3B0c2AgaXMgYCR3YXRjaGBlZCBhbmQgZXZhbHVhdGVkIGFzIGFuIGV4cHJlc3Npb24uXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBgaHRtbFxuICogPGEgdWktc3RhdGU9XCJyZXR1cm50by5zdGF0ZVwiIHVpLXN0YXRlLW9wdHM9XCJ7IHJlbG9hZDogdHJ1ZSB9XCI+SG9tZTwvYT5cbiAqIGBgYFxuICpcbiAqICMjIyBPdGhlciBET00gRXZlbnRzXG4gKlxuICogWW91IGNhbiBhbHNvIGN1c3RvbWl6ZSB3aGljaCBET00gZXZlbnRzIHRvIHJlc3BvbmQgdG8gKGluc3RlYWQgb2YgYGNsaWNrYCkgYnlcbiAqIHByb3ZpZGluZyBhbiBgZXZlbnRzYCBhcnJheSBpbiB0aGUgYHVpLXN0YXRlLW9wdHNgIGF0dHJpYnV0ZS5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBodG1sXG4gKiA8aW5wdXQgdHlwZT1cInRleHRcIiB1aS1zdGF0ZT1cImNvbnRhY3RzXCIgdWktc3RhdGUtb3B0cz1cInsgZXZlbnRzOiBbJ2NoYW5nZScsICdibHVyJ10gfVwiPlxuICogYGBgXG4gKlxuICogIyMjIEhpZ2hsaWdodGluZyB0aGUgYWN0aXZlIGxpbmtcbiAqIFRoaXMgZGlyZWN0aXZlIGNhbiBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggW1t1aVNyZWZBY3RpdmVdXSB0byBoaWdobGlnaHQgdGhlIGFjdGl2ZSBsaW5rLlxuICpcbiAqICMjIyBOb3Rlc1xuICpcbiAqIC0gWW91IGNhbiB1c2UgYHVpLXBhcmFtc2AgdG8gY2hhbmdlICoqb25seSB0aGUgcGFyYW1ldGVyIHZhbHVlcyoqIGJ5IG9taXR0aW5nIHRoZSBzdGF0ZSBuYW1lIGFuZCBzdXBwbHlpbmcgb25seSBgdWktc3RhdGUtcGFyYW1zYC5cbiAqICAgSG93ZXZlciwgaXQgbWlnaHQgYmUgc2ltcGxlciB0byB1c2UgW1t1aVNyZWZdXSBwYXJhbWV0ZXItb25seSBsaW5rcy5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBTZXRzIHRoZSBgbGFuZ2AgcGFyYW1ldGVyIHRvIGBlbmAgYW5kIHJlbWFpbnMgb24gdGhlIHNhbWUgc3RhdGUuXG4gKlxuICogYGBgaHRtbFxuICogPGEgdWktc3RhdGU9XCJcIiB1aS1zdGF0ZS1wYXJhbXM9XCJ7IGxhbmc6ICdlbicgfVwiPkVuZ2xpc2g8L2E+XG4gKiBgYGBcbiAqXG4gKiAtIEEgbWlkZGxlLWNsaWNrLCByaWdodC1jbGljaywgb3IgY3RybC1jbGljayBpcyBoYW5kbGVkIChuYXRpdmVseSkgYnkgdGhlIGJyb3dzZXIgdG8gb3BlbiB0aGUgaHJlZiBpbiBhIG5ldyB3aW5kb3csIGZvciBleGFtcGxlLlxuICogYGBgXG4gKi9cbmxldCB1aVN0YXRlRGlyZWN0aXZlOiBuZzFfZGlyZWN0aXZlO1xudWlTdGF0ZURpcmVjdGl2ZSA9IFtcbiAgJyR1aVJvdXRlcicsXG4gICckdGltZW91dCcsXG4gIGZ1bmN0aW9uICRTdGF0ZVJlZkR5bmFtaWNEaXJlY3RpdmUoJHVpUm91dGVyOiBVSVJvdXRlciwgJHRpbWVvdXQ6IElUaW1lb3V0U2VydmljZSkge1xuICAgIGNvbnN0ICRzdGF0ZSA9ICR1aVJvdXRlci5zdGF0ZVNlcnZpY2U7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHJlcXVpcmU6IFsnP151aVNyZWZBY3RpdmUnLCAnP151aVNyZWZBY3RpdmVFcSddLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGU6IElTY29wZSwgZWxlbWVudDogSUF1Z21lbnRlZEpRdWVyeSwgYXR0cnM6IGFueSwgdWlTcmVmQWN0aXZlOiBhbnkpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IGdldFR5cGVJbmZvKGVsZW1lbnQpO1xuICAgICAgICBjb25zdCBhY3RpdmUgPSB1aVNyZWZBY3RpdmVbMV0gfHwgdWlTcmVmQWN0aXZlWzBdO1xuICAgICAgICBsZXQgdW5saW5rSW5mb0ZuOiBGdW5jdGlvbiA9IG51bGw7XG4gICAgICAgIGxldCBob29rRm47XG5cbiAgICAgICAgY29uc3QgcmF3RGVmID0ge30gYXMgRGVmO1xuICAgICAgICBjb25zdCBnZXREZWYgPSAoKSA9PiBwcm9jZXNzZWREZWYoJHN0YXRlLCBlbGVtZW50LCByYXdEZWYpO1xuXG4gICAgICAgIGNvbnN0IGlucHV0QXR0cnMgPSBbJ3VpU3RhdGUnLCAndWlTdGF0ZVBhcmFtcycsICd1aVN0YXRlT3B0cyddO1xuICAgICAgICBjb25zdCB3YXRjaERlcmVnRm5zID0gaW5wdXRBdHRycy5yZWR1Y2UoKGFjYywgYXR0cikgPT4gKChhY2NbYXR0cl0gPSBub29wKSwgYWNjKSwge30pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICBjb25zdCBkZWYgPSBnZXREZWYoKTtcbiAgICAgICAgICBpZiAodW5saW5rSW5mb0ZuKSB1bmxpbmtJbmZvRm4oKTtcbiAgICAgICAgICBpZiAoYWN0aXZlKSB1bmxpbmtJbmZvRm4gPSBhY3RpdmUuJCRhZGRTdGF0ZUluZm8oZGVmLnVpU3RhdGUsIGRlZi51aVN0YXRlUGFyYW1zKTtcbiAgICAgICAgICBpZiAoZGVmLmhyZWYgIT0gbnVsbCkgYXR0cnMuJHNldCh0eXBlLmF0dHIsIGRlZi5ocmVmKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlucHV0QXR0cnMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgICAgcmF3RGVmW2ZpZWxkXSA9IGF0dHJzW2ZpZWxkXSA/IHNjb3BlLiRldmFsKGF0dHJzW2ZpZWxkXSkgOiBudWxsO1xuXG4gICAgICAgICAgYXR0cnMuJG9ic2VydmUoZmllbGQsIGV4cHIgPT4ge1xuICAgICAgICAgICAgd2F0Y2hEZXJlZ0Zuc1tmaWVsZF0oKTtcbiAgICAgICAgICAgIHdhdGNoRGVyZWdGbnNbZmllbGRdID0gc2NvcGUuJHdhdGNoKFxuICAgICAgICAgICAgICBleHByLFxuICAgICAgICAgICAgICBuZXd2YWwgPT4ge1xuICAgICAgICAgICAgICAgIHJhd0RlZltmaWVsZF0gPSBuZXd2YWw7XG4gICAgICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB1cGRhdGUoKTtcblxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgPGFueT4kdWlSb3V0ZXIuc3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQodXBkYXRlKSk7XG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCA8YW55PiR1aVJvdXRlci50cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIHVwZGF0ZSkpO1xuXG4gICAgICAgIGlmICghdHlwZS5jbGlja2FibGUpIHJldHVybjtcbiAgICAgICAgaG9va0ZuID0gY2xpY2tIb29rKGVsZW1lbnQsICRzdGF0ZSwgJHRpbWVvdXQsIHR5cGUsIGdldERlZik7XG4gICAgICAgIGJpbmRFdmVudHMoZWxlbWVudCwgc2NvcGUsIGhvb2tGbiwgcmF3RGVmLnVpU3RhdGVPcHRzKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfSxcbl07XG5cbi8qKlxuICogYHVpLXNyZWYtYWN0aXZlYCBhbmQgYHVpLXNyZWYtYWN0aXZlLWVxYDogQSBkaXJlY3RpdmUgdGhhdCBhZGRzIGEgQ1NTIGNsYXNzIHdoZW4gYSBgdWktc3JlZmAgaXMgYWN0aXZlXG4gKlxuICogQSBkaXJlY3RpdmUgd29ya2luZyBhbG9uZ3NpZGUgW1t1aVNyZWZdXSBhbmQgW1t1aVN0YXRlXV0gdG8gYWRkIGNsYXNzZXMgdG8gYW4gZWxlbWVudCB3aGVuIHRoZVxuICogcmVsYXRlZCBkaXJlY3RpdmUncyBzdGF0ZSBpcyBhY3RpdmUgKGFuZCByZW1vdmUgdGhlbSB3aGVuIGl0IGlzIGluYWN0aXZlKS5cbiAqXG4gKiBUaGUgcHJpbWFyeSB1c2UtY2FzZSBpcyB0byBoaWdobGlnaHQgdGhlIGFjdGl2ZSBsaW5rIGluIG5hdmlnYXRpb24gbWVudXMsXG4gKiBkaXN0aW5ndWlzaGluZyBpdCBmcm9tIHRoZSBpbmFjdGl2ZSBtZW51IGl0ZW1zLlxuICpcbiAqICMjIyBMaW5raW5nIHRvIGEgYHVpLXNyZWZgIG9yIGB1aS1zdGF0ZWBcbiAqIGB1aS1zcmVmLWFjdGl2ZWAgY2FuIGxpdmUgb24gdGhlIHNhbWUgZWxlbWVudCBhcyBgdWktc3JlZmAvYHVpLXN0YXRlYCwgb3IgaXQgY2FuIGJlIG9uIGEgcGFyZW50IGVsZW1lbnQuXG4gKiBJZiBhIGB1aS1zcmVmLWFjdGl2ZWAgaXMgYSBwYXJlbnQgdG8gbW9yZSB0aGFuIG9uZSBgdWktc3JlZmAvYHVpLXN0YXRlYCwgaXQgd2lsbCBhcHBseSB0aGUgQ1NTIGNsYXNzIHdoZW4gKiphbnkgb2YgdGhlIGxpbmtzIGFyZSBhY3RpdmUqKi5cbiAqXG4gKiAjIyMgTWF0Y2hpbmdcbiAqXG4gKiBUaGUgYHVpLXNyZWYtYWN0aXZlYCBkaXJlY3RpdmUgYXBwbGllcyB0aGUgQ1NTIGNsYXNzIHdoZW4gdGhlIGB1aS1zcmVmYC9gdWktc3RhdGVgJ3MgdGFyZ2V0IHN0YXRlICoqb3IgYW55IGNoaWxkIHN0YXRlIGlzIGFjdGl2ZSoqLlxuICogVGhpcyBpcyBhIFwiZnV6enkgbWF0Y2hcIiB3aGljaCB1c2VzIFtbU3RhdGVTZXJ2aWNlLmluY2x1ZGVzXV0uXG4gKlxuICogVGhlIGB1aS1zcmVmLWFjdGl2ZS1lcWAgZGlyZWN0aXZlIGFwcGxpZXMgdGhlIENTUyBjbGFzcyB3aGVuIHRoZSBgdWktc3JlZmAvYHVpLXN0YXRlYCdzIHRhcmdldCBzdGF0ZSBpcyBkaXJlY3RseSBhY3RpdmUgKG5vdCB3aGVuIGNoaWxkIHN0YXRlcyBhcmUgYWN0aXZlKS5cbiAqIFRoaXMgaXMgYW4gXCJleGFjdCBtYXRjaFwiIHdoaWNoIHVzZXMgW1tTdGF0ZVNlcnZpY2UuaXNdXS5cbiAqXG4gKiAjIyMgUGFyYW1ldGVyIHZhbHVlc1xuICogSWYgdGhlIGB1aS1zcmVmYC9gdWktc3RhdGVgIGluY2x1ZGVzIHBhcmFtZXRlciB2YWx1ZXMsIHRoZSBjdXJyZW50IHBhcmFtZXRlciB2YWx1ZXMgbXVzdCBtYXRjaCB0aGUgbGluaydzIHZhbHVlcyBmb3IgdGhlIGxpbmsgdG8gYmUgaGlnaGxpZ2h0ZWQuXG4gKiBUaGlzIGFsbG93cyBhIGxpc3Qgb2YgbGlua3MgdG8gdGhlIHNhbWUgc3RhdGUgd2l0aCBkaWZmZXJlbnQgcGFyYW1ldGVycyB0byBiZSByZW5kZXJlZCwgYW5kIHRoZSBjb3JyZWN0IG9uZSBoaWdobGlnaHRlZC5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBodG1sXG4gKiA8bGkgbmctcmVwZWF0PVwidXNlciBpbiB1c2Vyc1wiIHVpLXNyZWYtYWN0aXZlPVwiYWN0aXZlXCI+XG4gKiAgIDxhIHVpLXNyZWY9XCJ1c2VyLmRldGFpbHMoeyB1c2VySWQ6IHVzZXIuaWQgfSlcIj57eyB1c2VyLmxhc3ROYW1lIH19PC9hPlxuICogPC9saT5cbiAqIGBgYFxuICpcbiAqICMjIyBFeGFtcGxlc1xuICpcbiAqIEdpdmVuIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGU6XG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBodG1sXG4gKiA8dWw+XG4gKiAgIDxsaSB1aS1zcmVmLWFjdGl2ZT1cImFjdGl2ZVwiIGNsYXNzPVwiaXRlbVwiPlxuICogICAgIDxhIGhyZWYgdWktc3JlZj1cImFwcC51c2VyKHt1c2VyOiAnYmlsYm9iYWdnaW5zJ30pXCI+QGJpbGJvYmFnZ2luczwvYT5cbiAqICAgPC9saT5cbiAqIDwvdWw+XG4gKiBgYGBcbiAqXG4gKiBXaGVuIHRoZSBhcHAgc3RhdGUgaXMgYGFwcC51c2VyYCAob3IgYW55IGNoaWxkIHN0YXRlKSxcbiAqIGFuZCBjb250YWlucyB0aGUgc3RhdGUgcGFyYW1ldGVyIFwidXNlclwiIHdpdGggdmFsdWUgXCJiaWxib2JhZ2dpbnNcIixcbiAqIHRoZSByZXN1bHRpbmcgSFRNTCB3aWxsIGFwcGVhciBhcyAobm90ZSB0aGUgJ2FjdGl2ZScgY2xhc3MpOlxuICpcbiAqIGBgYGh0bWxcbiAqIDx1bD5cbiAqICAgPGxpIHVpLXNyZWYtYWN0aXZlPVwiYWN0aXZlXCIgY2xhc3M9XCJpdGVtIGFjdGl2ZVwiPlxuICogICAgIDxhIHVpLXNyZWY9XCJhcHAudXNlcih7dXNlcjogJ2JpbGJvYmFnZ2lucyd9KVwiIGhyZWY9XCIvdXNlcnMvYmlsYm9iYWdnaW5zXCI+QGJpbGJvYmFnZ2luczwvYT5cbiAqICAgPC9saT5cbiAqIDwvdWw+XG4gKiBgYGBcbiAqXG4gKiAjIyMgR2xvYiBtb2RlXG4gKlxuICogSXQgaXMgcG9zc2libGUgdG8gcGFzcyBgdWktc3JlZi1hY3RpdmVgIGFuIGV4cHJlc3Npb24gdGhhdCBldmFsdWF0ZXMgdG8gYW4gb2JqZWN0LlxuICogVGhlIG9iamVjdHMga2V5cyByZXByZXNlbnQgYWN0aXZlIGNsYXNzIG5hbWVzIGFuZCB2YWx1ZXMgcmVwcmVzZW50IHRoZSByZXNwZWN0aXZlIHN0YXRlIG5hbWVzL2dsb2JzLlxuICogYHVpLXNyZWYtYWN0aXZlYCB3aWxsIG1hdGNoIGlmIHRoZSBjdXJyZW50IGFjdGl2ZSBzdGF0ZSAqKmluY2x1ZGVzKiogYW55IG9mXG4gKiB0aGUgc3BlY2lmaWVkIHN0YXRlIG5hbWVzL2dsb2JzLCBldmVuIHRoZSBhYnN0cmFjdCBvbmVzLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIEdpdmVuIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGUsIHdpdGggXCJhZG1pblwiIGJlaW5nIGFuIGFic3RyYWN0IHN0YXRlOlxuICogYGBgaHRtbFxuICogPGRpdiB1aS1zcmVmLWFjdGl2ZT1cInsnYWN0aXZlJzogJ2FkbWluLioqJ31cIj5cbiAqICAgPGEgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIiB1aS1zcmVmPVwiYWRtaW4ucm9sZXNcIj5Sb2xlczwvYT5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogQXJyYXlzIGFyZSBhbHNvIHN1cHBvcnRlZCBhcyB2YWx1ZXMgaW4gdGhlIGBuZ0NsYXNzYC1saWtlIGludGVyZmFjZS5cbiAqIFRoaXMgYWxsb3dzIG11bHRpcGxlIHN0YXRlcyB0byBhZGQgYGFjdGl2ZWAgY2xhc3MuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogR2l2ZW4gdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZSwgd2l0aCBcImFkbWluLnJvbGVzXCIgYmVpbmcgdGhlIGN1cnJlbnQgc3RhdGUsIHRoZSBjbGFzcyB3aWxsIGJlIGFkZGVkIHRvbzpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgdWktc3JlZi1hY3RpdmU9XCJ7J2FjdGl2ZSc6IFsnb3duZXIuKionLCAnYWRtaW4uKionXX1cIj5cbiAqICAgPGEgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIiB1aS1zcmVmPVwiYWRtaW4ucm9sZXNcIj5Sb2xlczwvYT5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogV2hlbiB0aGUgY3VycmVudCBzdGF0ZSBpcyBcImFkbWluLnJvbGVzXCIgdGhlIFwiYWN0aXZlXCIgY2xhc3Mgd2lsbCBiZSBhcHBsaWVkIHRvIGJvdGggdGhlIGA8ZGl2PmAgYW5kIGA8YT5gIGVsZW1lbnRzLlxuICogSXQgaXMgaW1wb3J0YW50IHRvIG5vdGUgdGhhdCB0aGUgc3RhdGUgbmFtZXMvZ2xvYnMgcGFzc2VkIHRvIGB1aS1zcmVmLWFjdGl2ZWAgb3ZlcnJpZGUgYW55IHN0YXRlIHByb3ZpZGVkIGJ5IGEgbGlua2VkIGB1aS1zcmVmYC5cbiAqXG4gKiAjIyMgTm90ZXM6XG4gKlxuICogLSBUaGUgY2xhc3MgbmFtZSBpcyBpbnRlcnBvbGF0ZWQgKipvbmNlKiogZHVyaW5nIHRoZSBkaXJlY3RpdmVzIGxpbmsgdGltZSAoYW55IGZ1cnRoZXIgY2hhbmdlcyB0byB0aGVcbiAqIGludGVycG9sYXRlZCB2YWx1ZSBhcmUgaWdub3JlZCkuXG4gKlxuICogLSBNdWx0aXBsZSBjbGFzc2VzIG1heSBiZSBzcGVjaWZpZWQgaW4gYSBzcGFjZS1zZXBhcmF0ZWQgZm9ybWF0OiBgdWktc3JlZi1hY3RpdmU9J2NsYXNzMSBjbGFzczIgY2xhc3MzJ2BcbiAqL1xubGV0IHVpU3JlZkFjdGl2ZURpcmVjdGl2ZTogbmcxX2RpcmVjdGl2ZTtcbnVpU3JlZkFjdGl2ZURpcmVjdGl2ZSA9IFtcbiAgJyRzdGF0ZScsXG4gICckc3RhdGVQYXJhbXMnLFxuICAnJGludGVycG9sYXRlJyxcbiAgJyR1aVJvdXRlcicsXG4gIGZ1bmN0aW9uICRTdGF0ZVJlZkFjdGl2ZURpcmVjdGl2ZShcbiAgICAkc3RhdGU6IFN0YXRlU2VydmljZSxcbiAgICAkc3RhdGVQYXJhbXM6IE9iaixcbiAgICAkaW50ZXJwb2xhdGU6IElJbnRlcnBvbGF0ZVNlcnZpY2UsXG4gICAgJHVpUm91dGVyOiBVSVJvdXRlcixcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBjb250cm9sbGVyOiBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJGVsZW1lbnQnLFxuICAgICAgICAnJGF0dHJzJyxcbiAgICAgICAgZnVuY3Rpb24oJHNjb3BlOiBJU2NvcGUsICRlbGVtZW50OiBJQXVnbWVudGVkSlF1ZXJ5LCAkYXR0cnM6IGFueSkge1xuICAgICAgICAgIGxldCBzdGF0ZXM6IFN0YXRlRGF0YVtdID0gW107XG4gICAgICAgICAgbGV0IGFjdGl2ZUVxQ2xhc3M6IHN0cmluZztcbiAgICAgICAgICBsZXQgdWlTcmVmQWN0aXZlOiBhbnk7XG5cbiAgICAgICAgICAvLyBUaGVyZSBwcm9iYWJseSBpc24ndCBtdWNoIHBvaW50IGluICRvYnNlcnZpbmcgdGhpc1xuICAgICAgICAgIC8vIHVpU3JlZkFjdGl2ZSBhbmQgdWlTcmVmQWN0aXZlRXEgc2hhcmUgdGhlIHNhbWUgZGlyZWN0aXZlIG9iamVjdCB3aXRoIHNvbWVcbiAgICAgICAgICAvLyBzbGlnaHQgZGlmZmVyZW5jZSBpbiBsb2dpYyByb3V0aW5nXG4gICAgICAgICAgYWN0aXZlRXFDbGFzcyA9ICRpbnRlcnBvbGF0ZSgkYXR0cnMudWlTcmVmQWN0aXZlRXEgfHwgJycsIGZhbHNlKSgkc2NvcGUpO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHVpU3JlZkFjdGl2ZSA9ICRzY29wZS4kZXZhbCgkYXR0cnMudWlTcmVmQWN0aXZlKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nLiB1aVNyZWZBY3RpdmUgaXMgbm90IGEgdmFsaWQgZXhwcmVzc2lvbi5cbiAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byB1c2luZyAkaW50ZXJwb2xhdGUgYmVsb3dcbiAgICAgICAgICB9XG4gICAgICAgICAgdWlTcmVmQWN0aXZlID0gdWlTcmVmQWN0aXZlIHx8ICRpbnRlcnBvbGF0ZSgkYXR0cnMudWlTcmVmQWN0aXZlIHx8ICcnLCBmYWxzZSkoJHNjb3BlKTtcbiAgICAgICAgICBzZXRTdGF0ZXNGcm9tRGVmaW5pdGlvbk9iamVjdCh1aVNyZWZBY3RpdmUpO1xuXG4gICAgICAgICAgLy8gQWxsb3cgdWlTcmVmIHRvIGNvbW11bmljYXRlIHdpdGggdWlTcmVmQWN0aXZlW0VxdWFsc11cbiAgICAgICAgICB0aGlzLiQkYWRkU3RhdGVJbmZvID0gZnVuY3Rpb24obmV3U3RhdGU6IHN0cmluZywgbmV3UGFyYW1zOiBPYmopIHtcbiAgICAgICAgICAgIC8vIHdlIGFscmVhZHkgZ290IGFuIGV4cGxpY2l0IHN0YXRlIHByb3ZpZGVkIGJ5IHVpLXNyZWYtYWN0aXZlLCBzbyB3ZVxuICAgICAgICAgICAgLy8gc2hhZG93IHRoZSBvbmUgdGhhdCBjb21lcyBmcm9tIHVpLXNyZWZcbiAgICAgICAgICAgIGlmIChpc09iamVjdCh1aVNyZWZBY3RpdmUpICYmIHN0YXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRlcmVnaXN0ZXIgPSBhZGRTdGF0ZShuZXdTdGF0ZSwgbmV3UGFyYW1zLCB1aVNyZWZBY3RpdmUpO1xuICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gZGVyZWdpc3RlcjtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgZnVuY3Rpb24gdXBkYXRlQWZ0ZXJUcmFuc2l0aW9uKHRyYW5zKSB7XG4gICAgICAgICAgICB0cmFucy5wcm9taXNlLnRoZW4odXBkYXRlLCBub29wKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBzZXR1cEV2ZW50TGlzdGVuZXJzKCkpO1xuICAgICAgICAgIGlmICgkdWlSb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uKSB7XG4gICAgICAgICAgICB1cGRhdGVBZnRlclRyYW5zaXRpb24oJHVpUm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gc2V0dXBFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlcmVnaXN0ZXJTdGF0ZXNDaGFuZ2VkTGlzdGVuZXIgPSAkdWlSb3V0ZXIuc3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQoaGFuZGxlU3RhdGVzQ2hhbmdlZCk7XG4gICAgICAgICAgICBjb25zdCBkZXJlZ2lzdGVyT25TdGFydExpc3RlbmVyID0gJHVpUm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoe30sIHVwZGF0ZUFmdGVyVHJhbnNpdGlvbik7XG4gICAgICAgICAgICBjb25zdCBkZXJlZ2lzdGVyU3RhdGVDaGFuZ2VTdWNjZXNzTGlzdGVuZXIgPSAkc2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgdXBkYXRlKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBjbGVhblVwKCkge1xuICAgICAgICAgICAgICBkZXJlZ2lzdGVyU3RhdGVzQ2hhbmdlZExpc3RlbmVyKCk7XG4gICAgICAgICAgICAgIGRlcmVnaXN0ZXJPblN0YXJ0TGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgZGVyZWdpc3RlclN0YXRlQ2hhbmdlU3VjY2Vzc0xpc3RlbmVyKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVN0YXRlc0NoYW5nZWQoKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZXNGcm9tRGVmaW5pdGlvbk9iamVjdCh1aVNyZWZBY3RpdmUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZ1bmN0aW9uIHNldFN0YXRlc0Zyb21EZWZpbml0aW9uT2JqZWN0KHN0YXRlc0RlZmluaXRpb246IG9iamVjdCkge1xuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHN0YXRlc0RlZmluaXRpb24pKSB7XG4gICAgICAgICAgICAgIHN0YXRlcyA9IFtdO1xuICAgICAgICAgICAgICBmb3JFYWNoKHN0YXRlc0RlZmluaXRpb24sIGZ1bmN0aW9uKHN0YXRlT3JOYW1lOiBTdGF0ZU9yTmFtZSB8IEFycmF5PFN0YXRlT3JOYW1lPiwgYWN0aXZlQ2xhc3M6IHN0cmluZykge1xuICAgICAgICAgICAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBhYnN0cmFjdCBhZGRpbmcgc3RhdGUuXG4gICAgICAgICAgICAgICAgY29uc3QgYWRkU3RhdGVGb3JDbGFzcyA9IGZ1bmN0aW9uKHN0YXRlT3JOYW1lOiBzdHJpbmcsIGFjdGl2ZUNsYXNzOiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZiA9IHBhcnNlU3RhdGVSZWYoc3RhdGVPck5hbWUpO1xuICAgICAgICAgICAgICAgICAgYWRkU3RhdGUocmVmLnN0YXRlLCAkc2NvcGUuJGV2YWwocmVmLnBhcmFtRXhwciksIGFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzU3RyaW5nKHN0YXRlT3JOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgc3RhdGUgaXMgc3RyaW5nLCBqdXN0IGFkZCBpdC5cbiAgICAgICAgICAgICAgICAgIGFkZFN0YXRlRm9yQ2xhc3Moc3RhdGVPck5hbWUgYXMgc3RyaW5nLCBhY3RpdmVDbGFzcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KHN0YXRlT3JOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgc3RhdGUgaXMgYW4gYXJyYXksIGl0ZXJhdGUgb3ZlciBpdCBhbmQgYWRkIGVhY2ggYXJyYXkgaXRlbSBpbmRpdmlkdWFsbHkuXG4gICAgICAgICAgICAgICAgICBmb3JFYWNoKHN0YXRlT3JOYW1lLCBmdW5jdGlvbihzdGF0ZU9yTmFtZTogc3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFN0YXRlRm9yQ2xhc3Moc3RhdGVPck5hbWUsIGFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gYWRkU3RhdGUoc3RhdGVOYW1lOiBzdHJpbmcsIHN0YXRlUGFyYW1zOiBPYmosIGFjdGl2ZUNsYXNzOiBzdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gJHN0YXRlLmdldChzdGF0ZU5hbWUsIHN0YXRlQ29udGV4dCgkZWxlbWVudCkpO1xuXG4gICAgICAgICAgICBjb25zdCBzdGF0ZUluZm8gPSB7XG4gICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSB8fCB7IG5hbWU6IHN0YXRlTmFtZSB9LFxuICAgICAgICAgICAgICBwYXJhbXM6IHN0YXRlUGFyYW1zLFxuICAgICAgICAgICAgICBhY3RpdmVDbGFzczogYWN0aXZlQ2xhc3MsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBzdGF0ZXMucHVzaChzdGF0ZUluZm8pO1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlU3RhdGUoKSB7XG4gICAgICAgICAgICAgIHJlbW92ZUZyb20oc3RhdGVzKShzdGF0ZUluZm8pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBVcGRhdGUgcm91dGUgc3RhdGVcbiAgICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgICAgICBjb25zdCBzcGxpdENsYXNzZXMgPSBzdHIgPT4gc3RyLnNwbGl0KC9cXHMvKS5maWx0ZXIoaWRlbnRpdHkpO1xuICAgICAgICAgICAgY29uc3QgZ2V0Q2xhc3NlcyA9IChzdGF0ZUxpc3Q6IFN0YXRlRGF0YVtdKSA9PlxuICAgICAgICAgICAgICBzdGF0ZUxpc3RcbiAgICAgICAgICAgICAgICAubWFwKHggPT4geC5hY3RpdmVDbGFzcylcbiAgICAgICAgICAgICAgICAubWFwKHNwbGl0Q2xhc3NlcylcbiAgICAgICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKTtcblxuICAgICAgICAgICAgY29uc3QgYWxsQ2xhc3NlcyA9IGdldENsYXNzZXMoc3RhdGVzKVxuICAgICAgICAgICAgICAuY29uY2F0KHNwbGl0Q2xhc3NlcyhhY3RpdmVFcUNsYXNzKSlcbiAgICAgICAgICAgICAgLnJlZHVjZSh1bmlxUiwgW10pO1xuICAgICAgICAgICAgY29uc3QgZnV6enlDbGFzc2VzID0gZ2V0Q2xhc3NlcyhzdGF0ZXMuZmlsdGVyKHggPT4gJHN0YXRlLmluY2x1ZGVzKHguc3RhdGUubmFtZSwgeC5wYXJhbXMpKSk7XG4gICAgICAgICAgICBjb25zdCBleGFjdGx5TWF0Y2hlc0FueSA9ICEhc3RhdGVzLmZpbHRlcih4ID0+ICRzdGF0ZS5pcyh4LnN0YXRlLm5hbWUsIHgucGFyYW1zKSkubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgZXhhY3RDbGFzc2VzID0gZXhhY3RseU1hdGNoZXNBbnkgPyBzcGxpdENsYXNzZXMoYWN0aXZlRXFDbGFzcykgOiBbXTtcblxuICAgICAgICAgICAgY29uc3QgYWRkQ2xhc3NlcyA9IGZ1enp5Q2xhc3Nlcy5jb25jYXQoZXhhY3RDbGFzc2VzKS5yZWR1Y2UodW5pcVIsIFtdKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZUNsYXNzZXMgPSBhbGxDbGFzc2VzLmZpbHRlcihjbHMgPT4gIWluQXJyYXkoYWRkQ2xhc3NlcywgY2xzKSk7XG5cbiAgICAgICAgICAgICRzY29wZS4kZXZhbEFzeW5jKCgpID0+IHtcbiAgICAgICAgICAgICAgYWRkQ2xhc3Nlcy5mb3JFYWNoKGNsYXNzTmFtZSA9PiAkZWxlbWVudC5hZGRDbGFzcyhjbGFzc05hbWUpKTtcbiAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3Nlcy5mb3JFYWNoKGNsYXNzTmFtZSA9PiAkZWxlbWVudC5yZW1vdmVDbGFzcyhjbGFzc05hbWUpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuICB9LFxuXTtcblxuLyoqIEBoaWRkZW4gKi9cbmludGVyZmFjZSBEZWYge1xuICB1aVN0YXRlOiBzdHJpbmc7XG4gIGhyZWY6IHN0cmluZztcbiAgdWlTdGF0ZVBhcmFtczogT2JqO1xuICB1aVN0YXRlT3B0czogYW55O1xufVxuLyoqIEBoaWRkZW4gKi9cbmludGVyZmFjZSBTdGF0ZURhdGEge1xuICBzdGF0ZTogU3RhdGVEZWNsYXJhdGlvbjtcbiAgcGFyYW1zOiBSYXdQYXJhbXM7XG4gIGFjdGl2ZUNsYXNzOiBzdHJpbmc7XG59XG5cbmFuZ3VsYXJcbiAgLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJylcbiAgLmRpcmVjdGl2ZSgndWlTcmVmJywgdWlTcmVmRGlyZWN0aXZlKVxuICAuZGlyZWN0aXZlKCd1aVNyZWZBY3RpdmUnLCB1aVNyZWZBY3RpdmVEaXJlY3RpdmUpXG4gIC5kaXJlY3RpdmUoJ3VpU3JlZkFjdGl2ZUVxJywgdWlTcmVmQWN0aXZlRGlyZWN0aXZlKVxuICAuZGlyZWN0aXZlKCd1aVN0YXRlJywgdWlTdGF0ZURpcmVjdGl2ZSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvZGlyZWN0aXZlcy9zdGF0ZURpcmVjdGl2ZXMudHMiLCIvKipcbiAqIEBuZzFhcGlcbiAqIEBtb2R1bGUgZGlyZWN0aXZlc1xuICovXG5cbmltcG9ydCB7XG4gICRRTGlrZSxcbiAgQWN0aXZlVUlWaWV3LFxuICBleHRlbmQsXG4gIGZpbHRlcixcbiAgSG9va1JlZ09wdGlvbnMsXG4gIGlzRGVmaW5lZCxcbiAgaXNGdW5jdGlvbixcbiAgaXNTdHJpbmcsXG4gIGtlYm9iU3RyaW5nLFxuICBub29wLFxuICBPYmosXG4gIFBhcmFtLFxuICBwYXJzZSxcbiAgUGF0aE5vZGUsXG4gIFJlc29sdmVDb250ZXh0LFxuICBTdGF0ZURlY2xhcmF0aW9uLFxuICB0YWlsLFxuICB0cmFjZSxcbiAgVHJhbnNpdGlvbixcbiAgVHJhbnNpdGlvblNlcnZpY2UsXG4gIFR5cGVkTWFwLFxuICB1bm5lc3RSLFxuICBWaWV3U2VydmljZSxcbn0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuaW1wb3J0IHsgSUF1Z21lbnRlZEpRdWVyeSwgSUludGVycG9sYXRlU2VydmljZSwgSVNjb3BlLCBJVGltZW91dFNlcnZpY2UsIElUcmFuc2NsdWRlRnVuY3Rpb24gfSBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IG5nIGFzIGFuZ3VsYXIgfSBmcm9tICcuLi9hbmd1bGFyJztcbmltcG9ydCB7IE5nMUNvbnRyb2xsZXIsIE5nMVN0YXRlRGVjbGFyYXRpb24gfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgZ2V0TG9jYWxzIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuaW1wb3J0IHsgTmcxVmlld0NvbmZpZyB9IGZyb20gJy4uL3N0YXRlYnVpbGRlcnMvdmlld3MnO1xuaW1wb3J0IHsgbmcxX2RpcmVjdGl2ZSB9IGZyb20gJy4vc3RhdGVEaXJlY3RpdmVzJztcblxuLyoqIEBoaWRkZW4gKi9cbmV4cG9ydCB0eXBlIFVJVmlld0RhdGEgPSB7XG4gICRjZmc6IE5nMVZpZXdDb25maWc7XG4gICR1aVZpZXc6IEFjdGl2ZVVJVmlldztcbn07XG5cbi8qKiBAaGlkZGVuICovXG5leHBvcnQgdHlwZSBVSVZpZXdBbmltRGF0YSA9IHtcbiAgJGFuaW1FbnRlcjogUHJvbWlzZTxhbnk+O1xuICAkYW5pbUxlYXZlOiBQcm9taXNlPGFueT47XG4gICQkYW5pbUxlYXZlOiB7IHJlc29sdmU6ICgpID0+IGFueSB9OyAvLyBcImRlZmVycmVkXCJcbn07XG5cbi8qKlxuICogYHVpLXZpZXdgOiBBIHZpZXdwb3J0IGRpcmVjdGl2ZSB3aGljaCBpcyBmaWxsZWQgaW4gYnkgYSB2aWV3IGZyb20gdGhlIGFjdGl2ZSBzdGF0ZS5cbiAqXG4gKiAjIyMgQXR0cmlidXRlc1xuICpcbiAqIC0gYG5hbWVgOiAoT3B0aW9uYWwpIEEgdmlldyBuYW1lLlxuICogICBUaGUgbmFtZSBzaG91bGQgYmUgdW5pcXVlIGFtb25nc3QgdGhlIG90aGVyIHZpZXdzIGluIHRoZSBzYW1lIHN0YXRlLlxuICogICBZb3UgY2FuIGhhdmUgdmlld3Mgb2YgdGhlIHNhbWUgbmFtZSB0aGF0IGxpdmUgaW4gZGlmZmVyZW50IHN0YXRlcy5cbiAqICAgVGhlIHVpLXZpZXcgY2FuIGJlIHRhcmdldGVkIGluIGEgVmlldyB1c2luZyB0aGUgbmFtZSAoW1tOZzFTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV0pLlxuICpcbiAqIC0gYGF1dG9zY3JvbGxgOiBhbiBleHByZXNzaW9uLiBXaGVuIGl0IGV2YWx1YXRlcyB0byB0cnVlLCB0aGUgYHVpLXZpZXdgIHdpbGwgYmUgc2Nyb2xsZWQgaW50byB2aWV3IHdoZW4gaXQgaXMgYWN0aXZhdGVkLlxuICogICBVc2VzIFtbJHVpVmlld1Njcm9sbF1dIHRvIGRvIHRoZSBzY3JvbGxpbmcuXG4gKlxuICogLSBgb25sb2FkYDogRXhwcmVzc2lvbiB0byBldmFsdWF0ZSB3aGVuZXZlciB0aGUgdmlldyB1cGRhdGVzLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIEEgdmlldyBjYW4gYmUgdW5uYW1lZCBvciBuYW1lZC5cbiAqIGBgYGh0bWxcbiAqIDwhLS0gVW5uYW1lZCAtLT5cbiAqIDxkaXYgdWktdmlldz48L2Rpdj5cbiAqXG4gKiA8IS0tIE5hbWVkIC0tPlxuICogPGRpdiB1aS12aWV3PVwidmlld05hbWVcIj48L2Rpdj5cbiAqXG4gKiA8IS0tIE5hbWVkIChkaWZmZXJlbnQgc3R5bGUpIC0tPlxuICogPHVpLXZpZXcgbmFtZT1cInZpZXdOYW1lXCI+PC91aS12aWV3PlxuICogYGBgXG4gKlxuICogWW91IGNhbiBvbmx5IGhhdmUgb25lIHVubmFtZWQgdmlldyB3aXRoaW4gYW55IHRlbXBsYXRlIChvciByb290IGh0bWwpLiBJZiB5b3UgYXJlIG9ubHkgdXNpbmcgYVxuICogc2luZ2xlIHZpZXcgYW5kIGl0IGlzIHVubmFtZWQgdGhlbiB5b3UgY2FuIHBvcHVsYXRlIGl0IGxpa2Ugc286XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiB1aS12aWV3PjwvZGl2PlxuICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcbiAqICAgdGVtcGxhdGU6IFwiPGgxPkhFTExPITwvaDE+XCJcbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBUaGUgYWJvdmUgaXMgYSBjb252ZW5pZW50IHNob3J0Y3V0IGVxdWl2YWxlbnQgdG8gc3BlY2lmeWluZyB5b3VyIHZpZXcgZXhwbGljaXRseSB3aXRoIHRoZVxuICogW1tOZzFTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV0gY29uZmlnIHByb3BlcnR5LCBieSBuYW1lLCBpbiB0aGlzIGNhc2UgYW4gZW1wdHkgbmFtZTpcbiAqXG4gKiBgYGBqc1xuICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcbiAqICAgdmlld3M6IHtcbiAqICAgICBcIlwiOiB7XG4gKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxuICogICAgIH1cbiAqICAgfVxuICogfSlcbiAqIGBgYFxuICpcbiAqIEJ1dCB0eXBpY2FsbHkgeW91J2xsIG9ubHkgdXNlIHRoZSB2aWV3cyBwcm9wZXJ0eSBpZiB5b3UgbmFtZSB5b3VyIHZpZXcgb3IgaGF2ZSBtb3JlIHRoYW4gb25lIHZpZXdcbiAqIGluIHRoZSBzYW1lIHRlbXBsYXRlLiBUaGVyZSdzIG5vdCByZWFsbHkgYSBjb21wZWxsaW5nIHJlYXNvbiB0byBuYW1lIGEgdmlldyBpZiBpdHMgdGhlIG9ubHkgb25lLFxuICogYnV0IHlvdSBjb3VsZCBpZiB5b3Ugd2FudGVkLCBsaWtlIHNvOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgdWktdmlldz1cIm1haW5cIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIGBgYGpzXG4gKiAkc3RhdGVQcm92aWRlci5zdGF0ZShcImhvbWVcIiwge1xuICogICB2aWV3czoge1xuICogICAgIFwibWFpblwiOiB7XG4gKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxuICogICAgIH1cbiAqICAgfVxuICogfSlcbiAqIGBgYFxuICpcbiAqIFJlYWxseSB0aG91Z2gsIHlvdSdsbCB1c2Ugdmlld3MgdG8gc2V0IHVwIG11bHRpcGxlIHZpZXdzOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgdWktdmlldz48L2Rpdj5cbiAqIDxkaXYgdWktdmlldz1cImNoYXJ0XCI+PC9kaXY+XG4gKiA8ZGl2IHVpLXZpZXc9XCJkYXRhXCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBgYGBqc1xuICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcbiAqICAgdmlld3M6IHtcbiAqICAgICBcIlwiOiB7XG4gKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxuICogICAgIH0sXG4gKiAgICAgXCJjaGFydFwiOiB7XG4gKiAgICAgICB0ZW1wbGF0ZTogXCI8Y2hhcnRfdGhpbmcvPlwiXG4gKiAgICAgfSxcbiAqICAgICBcImRhdGFcIjoge1xuICogICAgICAgdGVtcGxhdGU6IFwiPGRhdGFfdGhpbmcvPlwiXG4gKiAgICAgfVxuICogICB9XG4gKiB9KVxuICogYGBgXG4gKlxuICogIyMjIyBFeGFtcGxlcyBmb3IgYGF1dG9zY3JvbGxgOlxuICogYGBgaHRtbFxuICogPCEtLSBJZiBhdXRvc2Nyb2xsIHByZXNlbnQgd2l0aCBubyBleHByZXNzaW9uLFxuICogICAgICB0aGVuIHNjcm9sbCB1aS12aWV3IGludG8gdmlldyAtLT5cbiAqIDx1aS12aWV3IGF1dG9zY3JvbGwvPlxuICpcbiAqIDwhLS0gSWYgYXV0b3Njcm9sbCBwcmVzZW50IHdpdGggdmFsaWQgZXhwcmVzc2lvbixcbiAqICAgICAgdGhlbiBzY3JvbGwgdWktdmlldyBpbnRvIHZpZXcgaWYgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZSAtLT5cbiAqIDx1aS12aWV3IGF1dG9zY3JvbGw9J3RydWUnLz5cbiAqIDx1aS12aWV3IGF1dG9zY3JvbGw9J2ZhbHNlJy8+XG4gKiA8dWktdmlldyBhdXRvc2Nyb2xsPSdzY29wZVZhcmlhYmxlJy8+XG4gKiBgYGBcbiAqXG4gKiBSZXNvbHZlIGRhdGE6XG4gKlxuICogVGhlIHJlc29sdmVkIGRhdGEgZnJvbSB0aGUgc3RhdGUncyBgcmVzb2x2ZWAgYmxvY2sgaXMgcGxhY2VkIG9uIHRoZSBzY29wZSBhcyBgJHJlc29sdmVgICh0aGlzXG4gKiBjYW4gYmUgY3VzdG9taXplZCB1c2luZyBbW05nMVZpZXdEZWNsYXJhdGlvbi5yZXNvbHZlQXNdXSkuICBUaGlzIGNhbiBiZSB0aGVuIGFjY2Vzc2VkIGZyb20gdGhlIHRlbXBsYXRlLlxuICpcbiAqIE5vdGUgdGhhdCB3aGVuIGBjb250cm9sbGVyQXNgIGlzIGJlaW5nIHVzZWQsIGAkcmVzb2x2ZWAgaXMgc2V0IG9uIHRoZSBjb250cm9sbGVyIGluc3RhbmNlICphZnRlciogdGhlXG4gKiBjb250cm9sbGVyIGlzIGluc3RhbnRpYXRlZC4gIFRoZSBgJG9uSW5pdCgpYCBob29rIGNhbiBiZSB1c2VkIHRvIHBlcmZvcm0gaW5pdGlhbGl6YXRpb24gY29kZSB3aGljaFxuICogZGVwZW5kcyBvbiBgJHJlc29sdmVgIGRhdGEuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJywge1xuICogICB0ZW1wbGF0ZTogJzxteS1jb21wb25lbnQgdXNlcj1cIiRyZXNvbHZlLnVzZXJcIj48L215LWNvbXBvbmVudD4nLFxuICogICByZXNvbHZlOiB7XG4gKiAgICAgdXNlcjogZnVuY3Rpb24oVXNlclNlcnZpY2UpIHsgcmV0dXJuIFVzZXJTZXJ2aWNlLmZldGNoVXNlcigpOyB9XG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBsZXQgdWlWaWV3OiBuZzFfZGlyZWN0aXZlO1xudWlWaWV3ID0gW1xuICAnJHZpZXcnLFxuICAnJGFuaW1hdGUnLFxuICAnJHVpVmlld1Njcm9sbCcsXG4gICckaW50ZXJwb2xhdGUnLFxuICAnJHEnLFxuICBmdW5jdGlvbiAkVmlld0RpcmVjdGl2ZShcbiAgICAkdmlldzogVmlld1NlcnZpY2UsXG4gICAgJGFuaW1hdGU6IGFueSxcbiAgICAkdWlWaWV3U2Nyb2xsOiBhbnksXG4gICAgJGludGVycG9sYXRlOiBJSW50ZXJwb2xhdGVTZXJ2aWNlLFxuICAgICRxOiAkUUxpa2UsXG4gICkge1xuICAgIGZ1bmN0aW9uIGdldFJlbmRlcmVyKGF0dHJzOiBPYmosIHNjb3BlOiBJU2NvcGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVudGVyOiBmdW5jdGlvbihlbGVtZW50OiBKUXVlcnksIHRhcmdldDogYW55LCBjYjogRnVuY3Rpb24pIHtcbiAgICAgICAgICBpZiAoYW5ndWxhci52ZXJzaW9uLm1pbm9yID4gMikge1xuICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoZWxlbWVudCwgbnVsbCwgdGFyZ2V0KS50aGVuKGNiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoZWxlbWVudCwgbnVsbCwgdGFyZ2V0LCBjYik7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBsZWF2ZTogZnVuY3Rpb24oZWxlbWVudDogSlF1ZXJ5LCBjYjogRnVuY3Rpb24pIHtcbiAgICAgICAgICBpZiAoYW5ndWxhci52ZXJzaW9uLm1pbm9yID4gMikge1xuICAgICAgICAgICAgJGFuaW1hdGUubGVhdmUoZWxlbWVudCkudGhlbihjYik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKGVsZW1lbnQsIGNiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbmZpZ3NFcXVhbChjb25maWcxOiBOZzFWaWV3Q29uZmlnLCBjb25maWcyOiBOZzFWaWV3Q29uZmlnKSB7XG4gICAgICByZXR1cm4gY29uZmlnMSA9PT0gY29uZmlnMjtcbiAgICB9XG5cbiAgICBjb25zdCByb290RGF0YSA9IHtcbiAgICAgICRjZmc6IHsgdmlld0RlY2w6IHsgJGNvbnRleHQ6ICR2aWV3Ll9wbHVnaW5hcGkuX3Jvb3RWaWV3Q29udGV4dCgpIH0gfSxcbiAgICAgICR1aVZpZXc6IHt9LFxuICAgIH07XG5cbiAgICBjb25zdCBkaXJlY3RpdmUgPSB7XG4gICAgICBjb3VudDogMCxcbiAgICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgICAgcHJpb3JpdHk6IDQwMCxcbiAgICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uKHRFbGVtZW50OiBKUXVlcnksIHRBdHRyczogT2JqLCAkdHJhbnNjbHVkZTogSVRyYW5zY2x1ZGVGdW5jdGlvbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGU6IElTY29wZSwgJGVsZW1lbnQ6IElBdWdtZW50ZWRKUXVlcnksIGF0dHJzOiBPYmopIHtcbiAgICAgICAgICBjb25zdCBvbmxvYWRFeHAgPSBhdHRyc1snb25sb2FkJ10gfHwgJycsXG4gICAgICAgICAgICBhdXRvU2Nyb2xsRXhwID0gYXR0cnNbJ2F1dG9zY3JvbGwnXSxcbiAgICAgICAgICAgIHJlbmRlcmVyID0gZ2V0UmVuZGVyZXIoYXR0cnMsIHNjb3BlKSxcbiAgICAgICAgICAgIGluaGVyaXRlZCA9ICRlbGVtZW50LmluaGVyaXRlZERhdGEoJyR1aVZpZXcnKSB8fCByb290RGF0YSxcbiAgICAgICAgICAgIG5hbWUgPSAkaW50ZXJwb2xhdGUoYXR0cnNbJ3VpVmlldyddIHx8IGF0dHJzWyduYW1lJ10gfHwgJycpKHNjb3BlKSB8fCAnJGRlZmF1bHQnO1xuXG4gICAgICAgICAgbGV0IHByZXZpb3VzRWw6IEpRdWVyeSxcbiAgICAgICAgICAgIGN1cnJlbnRFbDogSlF1ZXJ5LFxuICAgICAgICAgICAgY3VycmVudFNjb3BlOiBJU2NvcGUsXG4gICAgICAgICAgICB2aWV3Q29uZmlnOiBOZzFWaWV3Q29uZmlnLFxuICAgICAgICAgICAgdW5yZWdpc3RlcjogRnVuY3Rpb247XG5cbiAgICAgICAgICBjb25zdCBhY3RpdmVVSVZpZXc6IEFjdGl2ZVVJVmlldyA9IHtcbiAgICAgICAgICAgICR0eXBlOiAnbmcxJyxcbiAgICAgICAgICAgIGlkOiBkaXJlY3RpdmUuY291bnQrKywgLy8gR2xvYmFsIHNlcXVlbnRpYWwgSUQgZm9yIHVpLXZpZXcgdGFncyBhZGRlZCB0byBET01cbiAgICAgICAgICAgIG5hbWU6IG5hbWUsIC8vIHVpLXZpZXcgbmFtZSAoPGRpdiB1aS12aWV3PVwibmFtZVwiPjwvZGl2PlxuICAgICAgICAgICAgZnFuOiBpbmhlcml0ZWQuJHVpVmlldy5mcW4gPyBpbmhlcml0ZWQuJHVpVmlldy5mcW4gKyAnLicgKyBuYW1lIDogbmFtZSwgLy8gZnVsbHkgcXVhbGlmaWVkIG5hbWUsIGRlc2NyaWJlcyBsb2NhdGlvbiBpbiBET01cbiAgICAgICAgICAgIGNvbmZpZzogbnVsbCwgLy8gVGhlIFZpZXdDb25maWcgbG9hZGVkIChmcm9tIGEgc3RhdGUudmlld3MgZGVmaW5pdGlvbilcbiAgICAgICAgICAgIGNvbmZpZ1VwZGF0ZWQ6IGNvbmZpZ1VwZGF0ZWRDYWxsYmFjaywgLy8gQ2FsbGVkIHdoZW4gdGhlIG1hdGNoaW5nIFZpZXdDb25maWcgY2hhbmdlc1xuICAgICAgICAgICAgZ2V0IGNyZWF0aW9uQ29udGV4dCgpIHtcbiAgICAgICAgICAgICAgLy8gVGhlIGNvbnRleHQgaW4gd2hpY2ggdGhpcyB1aS12aWV3IFwidGFnXCIgd2FzIGNyZWF0ZWRcbiAgICAgICAgICAgICAgY29uc3QgZnJvbVBhcmVudFRhZ0NvbmZpZyA9IHBhcnNlKCckY2ZnLnZpZXdEZWNsLiRjb250ZXh0JykoaW5oZXJpdGVkKTtcbiAgICAgICAgICAgICAgLy8gQWxsb3cgPHVpLXZpZXcgbmFtZT1cImZvb1wiPjx1aS12aWV3IG5hbWU9XCJiYXJcIj48L3VpLXZpZXc+PC91aS12aWV3PlxuICAgICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXItdWkvdWktcm91dGVyL2lzc3Vlcy8zMzU1XG4gICAgICAgICAgICAgIGNvbnN0IGZyb21QYXJlbnRUYWcgPSBwYXJzZSgnJHVpVmlldy5jcmVhdGlvbkNvbnRleHQnKShpbmhlcml0ZWQpO1xuICAgICAgICAgICAgICByZXR1cm4gZnJvbVBhcmVudFRhZ0NvbmZpZyB8fCBmcm9tUGFyZW50VGFnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdHJhY2UudHJhY2VVSVZpZXdFdmVudCgnTGlua2luZycsIGFjdGl2ZVVJVmlldyk7XG5cbiAgICAgICAgICBmdW5jdGlvbiBjb25maWdVcGRhdGVkQ2FsbGJhY2soY29uZmlnPzogTmcxVmlld0NvbmZpZykge1xuICAgICAgICAgICAgaWYgKGNvbmZpZyAmJiAhKGNvbmZpZyBpbnN0YW5jZW9mIE5nMVZpZXdDb25maWcpKSByZXR1cm47XG4gICAgICAgICAgICBpZiAoY29uZmlnc0VxdWFsKHZpZXdDb25maWcsIGNvbmZpZykpIHJldHVybjtcbiAgICAgICAgICAgIHRyYWNlLnRyYWNlVUlWaWV3Q29uZmlnVXBkYXRlZChhY3RpdmVVSVZpZXcsIGNvbmZpZyAmJiBjb25maWcudmlld0RlY2wgJiYgY29uZmlnLnZpZXdEZWNsLiRjb250ZXh0KTtcblxuICAgICAgICAgICAgdmlld0NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgICAgIHVwZGF0ZVZpZXcoY29uZmlnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkZWxlbWVudC5kYXRhKCckdWlWaWV3JywgeyAkdWlWaWV3OiBhY3RpdmVVSVZpZXcgfSk7XG5cbiAgICAgICAgICB1cGRhdGVWaWV3KCk7XG5cbiAgICAgICAgICB1bnJlZ2lzdGVyID0gJHZpZXcucmVnaXN0ZXJVSVZpZXcoYWN0aXZlVUlWaWV3KTtcbiAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0cmFjZS50cmFjZVVJVmlld0V2ZW50KCdEZXN0cm95aW5nL1VucmVnaXN0ZXJpbmcnLCBhY3RpdmVVSVZpZXcpO1xuICAgICAgICAgICAgdW5yZWdpc3RlcigpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgZnVuY3Rpb24gY2xlYW51cExhc3RWaWV3KCkge1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzRWwpIHtcbiAgICAgICAgICAgICAgdHJhY2UudHJhY2VVSVZpZXdFdmVudCgnUmVtb3ZpbmcgKHByZXZpb3VzKSBlbCcsIHByZXZpb3VzRWwuZGF0YSgnJHVpVmlldycpKTtcbiAgICAgICAgICAgICAgcHJldmlvdXNFbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgcHJldmlvdXNFbCA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUpIHtcbiAgICAgICAgICAgICAgdHJhY2UudHJhY2VVSVZpZXdFdmVudCgnRGVzdHJveWluZyBzY29wZScsIGFjdGl2ZVVJVmlldyk7XG4gICAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsKSB7XG4gICAgICAgICAgICAgIGNvbnN0IF92aWV3RGF0YSA9IGN1cnJlbnRFbC5kYXRhKCckdWlWaWV3QW5pbScpO1xuICAgICAgICAgICAgICB0cmFjZS50cmFjZVVJVmlld0V2ZW50KCdBbmltYXRlIG91dCcsIF92aWV3RGF0YSk7XG4gICAgICAgICAgICAgIHJlbmRlcmVyLmxlYXZlKGN1cnJlbnRFbCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX3ZpZXdEYXRhLiQkYW5pbUxlYXZlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0VsID0gbnVsbDtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgcHJldmlvdXNFbCA9IGN1cnJlbnRFbDtcbiAgICAgICAgICAgICAgY3VycmVudEVsID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVWaWV3KGNvbmZpZz86IE5nMVZpZXdDb25maWcpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Njb3BlID0gc2NvcGUuJG5ldygpO1xuICAgICAgICAgICAgY29uc3QgYW5pbUVudGVyID0gJHEuZGVmZXIoKSxcbiAgICAgICAgICAgICAgYW5pbUxlYXZlID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgY29uc3QgJHVpVmlld0RhdGE6IFVJVmlld0RhdGEgPSB7XG4gICAgICAgICAgICAgICRjZmc6IGNvbmZpZyxcbiAgICAgICAgICAgICAgJHVpVmlldzogYWN0aXZlVUlWaWV3LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgJHVpVmlld0FuaW06IFVJVmlld0FuaW1EYXRhID0ge1xuICAgICAgICAgICAgICAkYW5pbUVudGVyOiBhbmltRW50ZXIucHJvbWlzZSxcbiAgICAgICAgICAgICAgJGFuaW1MZWF2ZTogYW5pbUxlYXZlLnByb21pc2UsXG4gICAgICAgICAgICAgICQkYW5pbUxlYXZlOiBhbmltTGVhdmUsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBuZ2RvYyBldmVudFxuICAgICAgICAgICAgICogQG5hbWUgdWkucm91dGVyLnN0YXRlLmRpcmVjdGl2ZTp1aS12aWV3IyR2aWV3Q29udGVudExvYWRpbmdcbiAgICAgICAgICAgICAqIEBldmVudE9mIHVpLnJvdXRlci5zdGF0ZS5kaXJlY3RpdmU6dWktdmlld1xuICAgICAgICAgICAgICogQGV2ZW50VHlwZSBlbWl0cyBvbiB1aS12aWV3IGRpcmVjdGl2ZSBzY29wZVxuICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogRmlyZWQgb25jZSB0aGUgdmlldyAqKmJlZ2lucyBsb2FkaW5nKiosICpiZWZvcmUqIHRoZSBET00gaXMgcmVuZGVyZWQuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IEV2ZW50IG9iamVjdC5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2aWV3TmFtZSBOYW1lIG9mIHRoZSB2aWV3LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBuZXdTY29wZS4kZW1pdCgnJHZpZXdDb250ZW50TG9hZGluZycsIG5hbWUpO1xuXG4gICAgICAgICAgICBjb25zdCBjbG9uZWQgPSAkdHJhbnNjbHVkZShuZXdTY29wZSwgZnVuY3Rpb24oY2xvbmUpIHtcbiAgICAgICAgICAgICAgY2xvbmUuZGF0YSgnJHVpVmlld0FuaW0nLCAkdWlWaWV3QW5pbSk7XG4gICAgICAgICAgICAgIGNsb25lLmRhdGEoJyR1aVZpZXcnLCAkdWlWaWV3RGF0YSk7XG4gICAgICAgICAgICAgIHJlbmRlcmVyLmVudGVyKGNsb25lLCAkZWxlbWVudCwgZnVuY3Rpb24gb25VSVZpZXdFbnRlcigpIHtcbiAgICAgICAgICAgICAgICBhbmltRW50ZXIucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUpIGN1cnJlbnRTY29wZS4kZW1pdCgnJHZpZXdDb250ZW50QW5pbWF0aW9uRW5kZWQnKTtcblxuICAgICAgICAgICAgICAgIGlmICgoaXNEZWZpbmVkKGF1dG9TY3JvbGxFeHApICYmICFhdXRvU2Nyb2xsRXhwKSB8fCBzY29wZS4kZXZhbChhdXRvU2Nyb2xsRXhwKSkge1xuICAgICAgICAgICAgICAgICAgJHVpVmlld1Njcm9sbChjbG9uZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjbGVhbnVwTGFzdFZpZXcoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjdXJyZW50RWwgPSBjbG9uZWQ7XG4gICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBuZXdTY29wZTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQG5nZG9jIGV2ZW50XG4gICAgICAgICAgICAgKiBAbmFtZSB1aS5yb3V0ZXIuc3RhdGUuZGlyZWN0aXZlOnVpLXZpZXcjJHZpZXdDb250ZW50TG9hZGVkXG4gICAgICAgICAgICAgKiBAZXZlbnRPZiB1aS5yb3V0ZXIuc3RhdGUuZGlyZWN0aXZlOnVpLXZpZXdcbiAgICAgICAgICAgICAqIEBldmVudFR5cGUgZW1pdHMgb24gdWktdmlldyBkaXJlY3RpdmUgc2NvcGVcbiAgICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiAgICAgICAgICAgKlxuICAgICAgICAgICAgICogRmlyZWQgb25jZSB0aGUgdmlldyBpcyAqKmxvYWRlZCoqLCAqYWZ0ZXIqIHRoZSBET00gaXMgcmVuZGVyZWQuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IEV2ZW50IG9iamVjdC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY3VycmVudFNjb3BlLiRlbWl0KCckdmlld0NvbnRlbnRMb2FkZWQnLCBjb25maWcgfHwgdmlld0NvbmZpZyk7XG4gICAgICAgICAgICBjdXJyZW50U2NvcGUuJGV2YWwob25sb2FkRXhwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH07XG5cbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuICB9LFxuXTtcblxuJFZpZXdEaXJlY3RpdmVGaWxsLiRpbmplY3QgPSBbJyRjb21waWxlJywgJyRjb250cm9sbGVyJywgJyR0cmFuc2l0aW9ucycsICckdmlldycsICckcScsICckdGltZW91dCddO1xuXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gJFZpZXdEaXJlY3RpdmVGaWxsKFxuICAkY29tcGlsZTogYW5ndWxhci5JQ29tcGlsZVNlcnZpY2UsXG4gICRjb250cm9sbGVyOiBhbmd1bGFyLklDb250cm9sbGVyU2VydmljZSxcbiAgJHRyYW5zaXRpb25zOiBUcmFuc2l0aW9uU2VydmljZSxcbiAgJHZpZXc6IFZpZXdTZXJ2aWNlLFxuICAkcTogYW5ndWxhci5JUVNlcnZpY2UsXG4gICR0aW1lb3V0OiBJVGltZW91dFNlcnZpY2UsXG4pIHtcbiAgY29uc3QgZ2V0Q29udHJvbGxlckFzID0gcGFyc2UoJ3ZpZXdEZWNsLmNvbnRyb2xsZXJBcycpO1xuICBjb25zdCBnZXRSZXNvbHZlQXMgPSBwYXJzZSgndmlld0RlY2wucmVzb2x2ZUFzJyk7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VDQScsXG4gICAgcHJpb3JpdHk6IC00MDAsXG4gICAgY29tcGlsZTogZnVuY3Rpb24odEVsZW1lbnQ6IEpRdWVyeSkge1xuICAgICAgY29uc3QgaW5pdGlhbCA9IHRFbGVtZW50Lmh0bWwoKTtcbiAgICAgIHRFbGVtZW50LmVtcHR5KCk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZTogSVNjb3BlLCAkZWxlbWVudDogSlF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IGRhdGE6IFVJVmlld0RhdGEgPSAkZWxlbWVudC5kYXRhKCckdWlWaWV3Jyk7XG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICRlbGVtZW50Lmh0bWwoaW5pdGlhbCk7XG4gICAgICAgICAgJGNvbXBpbGUoJGVsZW1lbnQuY29udGVudHMoKSBhcyBhbnkpKHNjb3BlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjZmc6IE5nMVZpZXdDb25maWcgPSBkYXRhLiRjZmcgfHwgPGFueT57IHZpZXdEZWNsOiB7fSwgZ2V0VGVtcGxhdGU6IG5vb3AgfTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZUN0eDogUmVzb2x2ZUNvbnRleHQgPSBjZmcucGF0aCAmJiBuZXcgUmVzb2x2ZUNvbnRleHQoY2ZnLnBhdGgpO1xuICAgICAgICAkZWxlbWVudC5odG1sKGNmZy5nZXRUZW1wbGF0ZSgkZWxlbWVudCwgcmVzb2x2ZUN0eCkgfHwgaW5pdGlhbCk7XG4gICAgICAgIHRyYWNlLnRyYWNlVUlWaWV3RmlsbChkYXRhLiR1aVZpZXcsICRlbGVtZW50Lmh0bWwoKSk7XG5cbiAgICAgICAgY29uc3QgbGluayA9ICRjb21waWxlKCRlbGVtZW50LmNvbnRlbnRzKCkgYXMgYW55KTtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IGNmZy5jb250cm9sbGVyO1xuICAgICAgICBjb25zdCBjb250cm9sbGVyQXM6IHN0cmluZyA9IGdldENvbnRyb2xsZXJBcyhjZmcpO1xuICAgICAgICBjb25zdCByZXNvbHZlQXM6IHN0cmluZyA9IGdldFJlc29sdmVBcyhjZmcpO1xuICAgICAgICBjb25zdCBsb2NhbHMgPSByZXNvbHZlQ3R4ICYmIGdldExvY2FscyhyZXNvbHZlQ3R4KTtcblxuICAgICAgICBzY29wZVtyZXNvbHZlQXNdID0gbG9jYWxzO1xuXG4gICAgICAgIGlmIChjb250cm9sbGVyKSB7XG4gICAgICAgICAgY29uc3QgY29udHJvbGxlckluc3RhbmNlID0gPE5nMUNvbnRyb2xsZXI+JGNvbnRyb2xsZXIoXG4gICAgICAgICAgICBjb250cm9sbGVyLFxuICAgICAgICAgICAgZXh0ZW5kKHt9LCBsb2NhbHMsIHsgJHNjb3BlOiBzY29wZSwgJGVsZW1lbnQ6ICRlbGVtZW50IH0pLFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGNvbnRyb2xsZXJBcykge1xuICAgICAgICAgICAgc2NvcGVbY29udHJvbGxlckFzXSA9IGNvbnRyb2xsZXJJbnN0YW5jZTtcbiAgICAgICAgICAgIHNjb3BlW2NvbnRyb2xsZXJBc11bcmVzb2x2ZUFzXSA9IGxvY2FscztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBUT0RPOiBVc2UgJHZpZXcgc2VydmljZSBhcyBhIGNlbnRyYWwgcG9pbnQgZm9yIHJlZ2lzdGVyaW5nIGNvbXBvbmVudC1sZXZlbCBob29rc1xuICAgICAgICAgIC8vIFRoZW4sIHdoZW4gYSBjb21wb25lbnQgaXMgY3JlYXRlZCwgdGVsbCB0aGUgJHZpZXcgc2VydmljZSwgc28gaXQgY2FuIGludm9rZSBob29rc1xuICAgICAgICAgIC8vICR2aWV3LmNvbXBvbmVudExvYWRlZChjb250cm9sbGVySW5zdGFuY2UsIHsgJHNjb3BlOiBzY29wZSwgJGVsZW1lbnQ6ICRlbGVtZW50IH0pO1xuICAgICAgICAgIC8vIHNjb3BlLiRvbignJGRlc3Ryb3knLCAoKSA9PiAkdmlldy5jb21wb25lbnRVbmxvYWRlZChjb250cm9sbGVySW5zdGFuY2UsIHsgJHNjb3BlOiBzY29wZSwgJGVsZW1lbnQ6ICRlbGVtZW50IH0pKTtcblxuICAgICAgICAgICRlbGVtZW50LmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJywgY29udHJvbGxlckluc3RhbmNlKTtcbiAgICAgICAgICAkZWxlbWVudC5jaGlsZHJlbigpLmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJywgY29udHJvbGxlckluc3RhbmNlKTtcblxuICAgICAgICAgIHJlZ2lzdGVyQ29udHJvbGxlckNhbGxiYWNrcygkcSwgJHRyYW5zaXRpb25zLCBjb250cm9sbGVySW5zdGFuY2UsIHNjb3BlLCBjZmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2FpdCBmb3IgdGhlIGNvbXBvbmVudCB0byBhcHBlYXIgaW4gdGhlIERPTVxuICAgICAgICBpZiAoaXNTdHJpbmcoY2ZnLnZpZXdEZWNsLmNvbXBvbmVudCkpIHtcbiAgICAgICAgICBjb25zdCBjbXAgPSBjZmcudmlld0RlY2wuY29tcG9uZW50O1xuICAgICAgICAgIGNvbnN0IGtlYm9iTmFtZSA9IGtlYm9iU3RyaW5nKGNtcCk7XG4gICAgICAgICAgY29uc3QgdGFnUmVnZXhwID0gbmV3IFJlZ0V4cChgXih4LXxkYXRhLSk/JHtrZWJvYk5hbWV9JGAsICdpJyk7XG5cbiAgICAgICAgICBjb25zdCBnZXRDb21wb25lbnRDb250cm9sbGVyID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlRWwgPSBbXS5zbGljZVxuICAgICAgICAgICAgICAuY2FsbCgkZWxlbWVudFswXS5jaGlsZHJlbilcbiAgICAgICAgICAgICAgLmZpbHRlcigoZWw6IEVsZW1lbnQpID0+IGVsICYmIGVsLnRhZ05hbWUgJiYgdGFnUmVnZXhwLmV4ZWMoZWwudGFnTmFtZSkpO1xuXG4gICAgICAgICAgICByZXR1cm4gZGlyZWN0aXZlRWwgJiYgYW5ndWxhci5lbGVtZW50KGRpcmVjdGl2ZUVsKS5kYXRhKGAkJHtjbXB9Q29udHJvbGxlcmApO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBkZXJlZ2lzdGVyV2F0Y2ggPSBzY29wZS4kd2F0Y2goZ2V0Q29tcG9uZW50Q29udHJvbGxlciwgZnVuY3Rpb24oY3RybEluc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAoIWN0cmxJbnN0YW5jZSkgcmV0dXJuO1xuICAgICAgICAgICAgcmVnaXN0ZXJDb250cm9sbGVyQ2FsbGJhY2tzKCRxLCAkdHJhbnNpdGlvbnMsIGN0cmxJbnN0YW5jZSwgc2NvcGUsIGNmZyk7XG4gICAgICAgICAgICBkZXJlZ2lzdGVyV2F0Y2goKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxpbmsoc2NvcGUpO1xuICAgICAgfTtcbiAgICB9LFxuICB9O1xufVxuXG4vKiogQGhpZGRlbiAqL1xuY29uc3QgaGFzQ29tcG9uZW50SW1wbCA9IHR5cGVvZiAoYW5ndWxhciBhcyBhbnkpLm1vZHVsZSgndWkucm91dGVyJylbJ2NvbXBvbmVudCddID09PSAnZnVuY3Rpb24nO1xuLyoqIEBoaWRkZW4gaW5jcmVtZW50aW5nIGlkICovXG5sZXQgX3VpQ2FuRXhpdElkID0gMDtcblxuLyoqIEBoaWRkZW4gVE9ETzogbW92ZSB0aGVzZSBjYWxsYmFja3MgdG8gJHZpZXcgYW5kL29yIGAvaG9va3MvY29tcG9uZW50cy50c2Agb3Igc29tZXRoaW5nICovXG5mdW5jdGlvbiByZWdpc3RlckNvbnRyb2xsZXJDYWxsYmFja3MoXG4gICRxOiBhbmd1bGFyLklRU2VydmljZSxcbiAgJHRyYW5zaXRpb25zOiBUcmFuc2l0aW9uU2VydmljZSxcbiAgY29udHJvbGxlckluc3RhbmNlOiBOZzFDb250cm9sbGVyLFxuICAkc2NvcGU6IElTY29wZSxcbiAgY2ZnOiBOZzFWaWV3Q29uZmlnLFxuKSB7XG4gIC8vIENhbGwgJG9uSW5pdCgpIEFTQVBcbiAgaWYgKGlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLiRvbkluaXQpICYmICEoY2ZnLnZpZXdEZWNsLmNvbXBvbmVudCAmJiBoYXNDb21wb25lbnRJbXBsKSkge1xuICAgIGNvbnRyb2xsZXJJbnN0YW5jZS4kb25Jbml0KCk7XG4gIH1cblxuICBjb25zdCB2aWV3U3RhdGU6IE5nMVN0YXRlRGVjbGFyYXRpb24gPSB0YWlsKGNmZy5wYXRoKS5zdGF0ZS5zZWxmO1xuXG4gIGNvbnN0IGhvb2tPcHRpb25zOiBIb29rUmVnT3B0aW9ucyA9IHsgYmluZDogY29udHJvbGxlckluc3RhbmNlIH07XG4gIC8vIEFkZCBjb21wb25lbnQtbGV2ZWwgaG9vayBmb3Igb25VaVBhcmFtc0NoYW5nZWRcbiAgaWYgKGlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLnVpT25QYXJhbXNDaGFuZ2VkKSkge1xuICAgIGNvbnN0IHJlc29sdmVDb250ZXh0OiBSZXNvbHZlQ29udGV4dCA9IG5ldyBSZXNvbHZlQ29udGV4dChjZmcucGF0aCk7XG4gICAgY29uc3Qgdmlld0NyZWF0aW9uVHJhbnMgPSByZXNvbHZlQ29udGV4dC5nZXRSZXNvbHZhYmxlKCckdHJhbnNpdGlvbiQnKS5kYXRhO1xuXG4gICAgLy8gRmlyZSBjYWxsYmFjayBvbiBhbnkgc3VjY2Vzc2Z1bCB0cmFuc2l0aW9uXG4gICAgY29uc3QgcGFyYW1zVXBkYXRlZCA9ICgkdHJhbnNpdGlvbiQ6IFRyYW5zaXRpb24pID0+IHtcbiAgICAgIC8vIEV4aXQgZWFybHkgaWYgdGhlICR0cmFuc2l0aW9uJCBpcyB0aGUgc2FtZSBhcyB0aGUgdmlldyB3YXMgY3JlYXRlZCB3aXRoaW4uXG4gICAgICAvLyBFeGl0IGVhcmx5IGlmIHRoZSAkdHJhbnNpdGlvbiQgd2lsbCBleGl0IHRoZSBzdGF0ZSB0aGUgdmlldyBpcyBmb3IuXG4gICAgICBpZiAoJHRyYW5zaXRpb24kID09PSB2aWV3Q3JlYXRpb25UcmFucyB8fCAkdHJhbnNpdGlvbiQuZXhpdGluZygpLmluZGV4T2Yodmlld1N0YXRlIGFzIFN0YXRlRGVjbGFyYXRpb24pICE9PSAtMSlcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgICBjb25zdCB0b1BhcmFtcyA9ICR0cmFuc2l0aW9uJC5wYXJhbXMoJ3RvJykgYXMgVHlwZWRNYXA8YW55PjtcbiAgICAgIGNvbnN0IGZyb21QYXJhbXMgPSAkdHJhbnNpdGlvbiQucGFyYW1zPFR5cGVkTWFwPGFueT4+KCdmcm9tJykgYXMgVHlwZWRNYXA8YW55PjtcbiAgICAgIGNvbnN0IGdldE5vZGVTY2hlbWEgPSAobm9kZTogUGF0aE5vZGUpID0+IG5vZGUucGFyYW1TY2hlbWE7XG4gICAgICBjb25zdCB0b1NjaGVtYTogUGFyYW1bXSA9ICR0cmFuc2l0aW9uJFxuICAgICAgICAudHJlZUNoYW5nZXMoJ3RvJylcbiAgICAgICAgLm1hcChnZXROb2RlU2NoZW1hKVxuICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKTtcbiAgICAgIGNvbnN0IGZyb21TY2hlbWE6IFBhcmFtW10gPSAkdHJhbnNpdGlvbiRcbiAgICAgICAgLnRyZWVDaGFuZ2VzKCdmcm9tJylcbiAgICAgICAgLm1hcChnZXROb2RlU2NoZW1hKVxuICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKTtcblxuICAgICAgLy8gRmluZCB0aGUgdG8gcGFyYW1zIHRoYXQgaGF2ZSBkaWZmZXJlbnQgdmFsdWVzIHRoYW4gdGhlIGZyb20gcGFyYW1zXG4gICAgICBjb25zdCBjaGFuZ2VkVG9QYXJhbXMgPSB0b1NjaGVtYS5maWx0ZXIoKHBhcmFtOiBQYXJhbSkgPT4ge1xuICAgICAgICBjb25zdCBpZHggPSBmcm9tU2NoZW1hLmluZGV4T2YocGFyYW0pO1xuICAgICAgICByZXR1cm4gaWR4ID09PSAtMSB8fCAhZnJvbVNjaGVtYVtpZHhdLnR5cGUuZXF1YWxzKHRvUGFyYW1zW3BhcmFtLmlkXSwgZnJvbVBhcmFtc1twYXJhbS5pZF0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIE9ubHkgdHJpZ2dlciBjYWxsYmFjayBpZiBhIHRvIHBhcmFtIGhhcyBjaGFuZ2VkIG9yIGlzIG5ld1xuICAgICAgaWYgKGNoYW5nZWRUb1BhcmFtcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgY2hhbmdlZEtleXM6IHN0cmluZ1tdID0gY2hhbmdlZFRvUGFyYW1zLm1hcCh4ID0+IHguaWQpO1xuICAgICAgICAvLyBGaWx0ZXIgdGhlIHBhcmFtcyB0byBvbmx5IGNoYW5nZWQvbmV3IHRvIHBhcmFtcy4gIGAkdHJhbnNpdGlvbiQucGFyYW1zKClgIG1heSBiZSB1c2VkIHRvIGdldCBhbGwgcGFyYW1zLlxuICAgICAgICBjb25zdCBuZXdWYWx1ZXMgPSBmaWx0ZXIodG9QYXJhbXMsICh2YWwsIGtleSkgPT4gY2hhbmdlZEtleXMuaW5kZXhPZihrZXkpICE9PSAtMSk7XG4gICAgICAgIGNvbnRyb2xsZXJJbnN0YW5jZS51aU9uUGFyYW1zQ2hhbmdlZChuZXdWYWx1ZXMsICR0cmFuc2l0aW9uJCk7XG4gICAgICB9XG4gICAgfTtcbiAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIDxhbnk+JHRyYW5zaXRpb25zLm9uU3VjY2Vzcyh7fSwgcGFyYW1zVXBkYXRlZCwgaG9va09wdGlvbnMpKTtcbiAgfVxuXG4gIC8vIEFkZCBjb21wb25lbnQtbGV2ZWwgaG9vayBmb3IgdWlDYW5FeGl0XG4gIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS51aUNhbkV4aXQpKSB7XG4gICAgY29uc3QgaWQgPSBfdWlDYW5FeGl0SWQrKztcbiAgICBjb25zdCBjYWNoZVByb3AgPSAnX3VpQ2FuRXhpdElkcyc7XG5cbiAgICAvLyBSZXR1cm5zIHRydWUgaWYgYSByZWRpcmVjdCB0cmFuc2l0aW9uIGFscmVhZHkgYW5zd2VyZWQgdHJ1dGh5XG4gICAgY29uc3QgcHJldlRydXRoeUFuc3dlciA9ICh0cmFuczogVHJhbnNpdGlvbikgPT5cbiAgICAgICEhdHJhbnMgJiYgKCh0cmFuc1tjYWNoZVByb3BdICYmIHRyYW5zW2NhY2hlUHJvcF1baWRdID09PSB0cnVlKSB8fCBwcmV2VHJ1dGh5QW5zd2VyKHRyYW5zLnJlZGlyZWN0ZWRGcm9tKCkpKTtcblxuICAgIC8vIElmIGEgdXNlciBhbnN3ZXJlZCB5ZXMsIGJ1dCB0aGUgdHJhbnNpdGlvbiB3YXMgbGF0ZXIgcmVkaXJlY3RlZCwgZG9uJ3QgYWxzbyBhc2sgZm9yIHRoZSBuZXcgcmVkaXJlY3QgdHJhbnNpdGlvblxuICAgIGNvbnN0IHdyYXBwZWRIb29rID0gKHRyYW5zOiBUcmFuc2l0aW9uKSA9PiB7XG4gICAgICBsZXQgcHJvbWlzZTtcbiAgICAgIGNvbnN0IGlkcyA9ICh0cmFuc1tjYWNoZVByb3BdID0gdHJhbnNbY2FjaGVQcm9wXSB8fCB7fSk7XG5cbiAgICAgIGlmICghcHJldlRydXRoeUFuc3dlcih0cmFucykpIHtcbiAgICAgICAgcHJvbWlzZSA9ICRxLndoZW4oY29udHJvbGxlckluc3RhbmNlLnVpQ2FuRXhpdCh0cmFucykpO1xuICAgICAgICBwcm9taXNlLnRoZW4odmFsID0+IChpZHNbaWRdID0gdmFsICE9PSBmYWxzZSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIGNvbnN0IGNyaXRlcmlhID0geyBleGl0aW5nOiB2aWV3U3RhdGUubmFtZSB9O1xuICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgPGFueT4kdHJhbnNpdGlvbnMub25CZWZvcmUoY3JpdGVyaWEsIHdyYXBwZWRIb29rLCBob29rT3B0aW9ucykpO1xuICB9XG59XG5cbmFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnKS5kaXJlY3RpdmUoJ3VpVmlldycsIDxhbnk+dWlWaWV3KTtcbmFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnKS5kaXJlY3RpdmUoJ3VpVmlldycsIDxhbnk+JFZpZXdEaXJlY3RpdmVGaWxsKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvYW5ndWxhcmpzL3NyYy9kaXJlY3RpdmVzL3ZpZXdEaXJlY3RpdmUudHMiLCIvKiogQG1vZHVsZSBuZzEgKi8gLyoqIGZvciB0eXBlZG9jICovXG5cbmltcG9ydCB7IG5nIGFzIGFuZ3VsYXIgfSBmcm9tICcuL2FuZ3VsYXInO1xuaW1wb3J0IHsgT2JqLCBTdGF0ZVNlcnZpY2UsIFN0YXRlT3JOYW1lIH0gZnJvbSAnQHVpcm91dGVyL2NvcmUnO1xuXG4vKipcbiAqIGBpc1N0YXRlYCBGaWx0ZXI6IHRydXRoeSBpZiB0aGUgY3VycmVudCBzdGF0ZSBpcyB0aGUgcGFyYW1ldGVyXG4gKlxuICogVHJhbnNsYXRlcyB0byBbW1N0YXRlU2VydmljZS5pc11dIGAkc3RhdGUuaXMoXCJzdGF0ZU5hbWVcIilgLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgbmctaWY9XCInc3RhdGVOYW1lJyB8IGlzU3RhdGVcIj5zaG93IGlmIHN0YXRlIGlzICdzdGF0ZU5hbWUnPC9kaXY+XG4gKiBgYGBcbiAqL1xuJElzU3RhdGVGaWx0ZXIuJGluamVjdCA9IFsnJHN0YXRlJ107XG5leHBvcnQgZnVuY3Rpb24gJElzU3RhdGVGaWx0ZXIoJHN0YXRlOiBTdGF0ZVNlcnZpY2UpIHtcbiAgY29uc3QgaXNGaWx0ZXI6IGFueSA9IGZ1bmN0aW9uKHN0YXRlOiBTdGF0ZU9yTmFtZSwgcGFyYW1zOiBPYmosIG9wdGlvbnM/OiB7IHJlbGF0aXZlPzogU3RhdGVPck5hbWUgfSkge1xuICAgIHJldHVybiAkc3RhdGUuaXMoc3RhdGUsIHBhcmFtcywgb3B0aW9ucyk7XG4gIH07XG4gIGlzRmlsdGVyLiRzdGF0ZWZ1bCA9IHRydWU7XG4gIHJldHVybiBpc0ZpbHRlcjtcbn1cblxuLyoqXG4gKiBgaW5jbHVkZWRCeVN0YXRlYCBGaWx0ZXI6IHRydXRoeSBpZiB0aGUgY3VycmVudCBzdGF0ZSBpbmNsdWRlcyB0aGUgcGFyYW1ldGVyXG4gKlxuICogVHJhbnNsYXRlcyB0byBbW1N0YXRlU2VydmljZS5pbmNsdWRlc11dYCAkc3RhdGUuaXMoXCJmdWxsT3JQYXJ0aWFsU3RhdGVOYW1lXCIpYC5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBodG1sXG4gKiA8ZGl2IG5nLWlmPVwiJ2Z1bGxPclBhcnRpYWxTdGF0ZU5hbWUnIHwgaW5jbHVkZWRCeVN0YXRlXCI+c2hvdyBpZiBzdGF0ZSBpbmNsdWRlcyAnZnVsbE9yUGFydGlhbFN0YXRlTmFtZSc8L2Rpdj5cbiAqIGBgYFxuICovXG4kSW5jbHVkZWRCeVN0YXRlRmlsdGVyLiRpbmplY3QgPSBbJyRzdGF0ZSddO1xuZXhwb3J0IGZ1bmN0aW9uICRJbmNsdWRlZEJ5U3RhdGVGaWx0ZXIoJHN0YXRlOiBTdGF0ZVNlcnZpY2UpIHtcbiAgY29uc3QgaW5jbHVkZXNGaWx0ZXI6IGFueSA9IGZ1bmN0aW9uKHN0YXRlOiBTdGF0ZU9yTmFtZSwgcGFyYW1zOiBPYmosIG9wdGlvbnM6IHsgcmVsYXRpdmU/OiBTdGF0ZU9yTmFtZSB9KSB7XG4gICAgcmV0dXJuICRzdGF0ZS5pbmNsdWRlcyhzdGF0ZSwgcGFyYW1zLCBvcHRpb25zKTtcbiAgfTtcbiAgaW5jbHVkZXNGaWx0ZXIuJHN0YXRlZnVsID0gdHJ1ZTtcbiAgcmV0dXJuIGluY2x1ZGVzRmlsdGVyO1xufVxuXG5hbmd1bGFyXG4gIC5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScpXG4gIC5maWx0ZXIoJ2lzU3RhdGUnLCAkSXNTdGF0ZUZpbHRlcilcbiAgLmZpbHRlcignaW5jbHVkZWRCeVN0YXRlJywgJEluY2x1ZGVkQnlTdGF0ZUZpbHRlcik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvc3RhdGVGaWx0ZXJzLnRzIiwiLyoqIEBtb2R1bGUgbmcxICovIC8qKiAqL1xuaW1wb3J0IHsgbmcgYXMgYW5ndWxhciB9IGZyb20gJy4vYW5ndWxhcic7XG5pbXBvcnQgeyBJU2VydmljZVByb3ZpZGVyRmFjdG9yeSB9IGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IElBbmNob3JTY3JvbGxTZXJ2aWNlID0gYW5ndWxhci5JQW5jaG9yU2Nyb2xsU2VydmljZTtcbmltcG9ydCBJVGltZW91dFNlcnZpY2UgPSBhbmd1bGFyLklUaW1lb3V0U2VydmljZTtcblxuZXhwb3J0IGludGVyZmFjZSBVSVZpZXdTY3JvbGxQcm92aWRlciB7XG4gIC8qKlxuICAgKiBVc2VzIHN0YW5kYXJkIGFuY2hvclNjcm9sbCBiZWhhdmlvclxuICAgKlxuICAgKiBSZXZlcnRzIFtbJHVpVmlld1Njcm9sbF1dIGJhY2sgdG8gdXNpbmcgdGhlIGNvcmUgW2AkYW5jaG9yU2Nyb2xsYF0oaHR0cDovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmcuJGFuY2hvclNjcm9sbClcbiAgICogc2VydmljZSBmb3Igc2Nyb2xsaW5nIGJhc2VkIG9uIHRoZSB1cmwgYW5jaG9yLlxuICAgKi9cbiAgdXNlQW5jaG9yU2Nyb2xsKCk6IHZvaWQ7XG59XG5cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiAkVmlld1Njcm9sbFByb3ZpZGVyKCkge1xuICBsZXQgdXNlQW5jaG9yU2Nyb2xsID0gZmFsc2U7XG5cbiAgdGhpcy51c2VBbmNob3JTY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICB1c2VBbmNob3JTY3JvbGwgPSB0cnVlO1xuICB9O1xuXG4gIHRoaXMuJGdldCA9IFtcbiAgICAnJGFuY2hvclNjcm9sbCcsXG4gICAgJyR0aW1lb3V0JyxcbiAgICBmdW5jdGlvbigkYW5jaG9yU2Nyb2xsOiBJQW5jaG9yU2Nyb2xsU2VydmljZSwgJHRpbWVvdXQ6IElUaW1lb3V0U2VydmljZSk6IEZ1bmN0aW9uIHtcbiAgICAgIGlmICh1c2VBbmNob3JTY3JvbGwpIHtcbiAgICAgICAgcmV0dXJuICRhbmNob3JTY3JvbGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbigkZWxlbWVudDogSlF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiAkdGltZW91dChcbiAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRlbGVtZW50WzBdLnNjcm9sbEludG9WaWV3KCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAwLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICApO1xuICAgICAgfTtcbiAgICB9LFxuICBdO1xufVxuXG5hbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykucHJvdmlkZXIoJyR1aVZpZXdTY3JvbGwnLCA8SVNlcnZpY2VQcm92aWRlckZhY3Rvcnk+JFZpZXdTY3JvbGxQcm92aWRlcik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvdmlld1Njcm9sbC50cyIsIi8qKlxuICogTWFpbiBlbnRyeSBwb2ludCBmb3IgYW5ndWxhciAxLnggYnVpbGRcbiAqIEBtb2R1bGUgbmcxXG4gKi8gLyoqICovXG5cbmV4cG9ydCAqIGZyb20gJy4vaW50ZXJmYWNlJztcbmV4cG9ydCAqIGZyb20gJy4vc2VydmljZXMnO1xuZXhwb3J0ICogZnJvbSAnLi9zdGF0ZWJ1aWxkZXJzL3ZpZXdzJztcbmV4cG9ydCAqIGZyb20gJy4vc3RhdGVQcm92aWRlcic7XG5leHBvcnQgKiBmcm9tICcuL3VybFJvdXRlclByb3ZpZGVyJztcblxuaW1wb3J0ICcuL2luamVjdGFibGVzJztcbmltcG9ydCAnLi9kaXJlY3RpdmVzL3N0YXRlRGlyZWN0aXZlcyc7XG5pbXBvcnQgJy4vc3RhdGVGaWx0ZXJzJztcbmltcG9ydCAnLi9kaXJlY3RpdmVzL3ZpZXdEaXJlY3RpdmUnO1xuaW1wb3J0ICcuL3ZpZXdTY3JvbGwnO1xuXG5leHBvcnQgZGVmYXVsdCAndWkucm91dGVyJztcblxuaW1wb3J0ICogYXMgY29yZSBmcm9tICdAdWlyb3V0ZXIvY29yZSc7XG5leHBvcnQgeyBjb3JlIH07XG5leHBvcnQgKiBmcm9tICdAdWlyb3V0ZXIvY29yZSc7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2FuZ3VsYXJqcy9zcmMvaW5kZXgudHMiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIGNvbW1vblxuICovIC8qKiAqL1xuXG5leHBvcnQgKiBmcm9tICcuL2NvbW1vbi9pbmRleCc7XG5leHBvcnQgKiBmcm9tICcuL3BhcmFtcy9pbmRleCc7XG5leHBvcnQgKiBmcm9tICcuL3BhdGgvaW5kZXgnO1xuZXhwb3J0ICogZnJvbSAnLi9yZXNvbHZlL2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vc3RhdGUvaW5kZXgnO1xuZXhwb3J0ICogZnJvbSAnLi90cmFuc2l0aW9uL2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vdXJsL2luZGV4JztcbmV4cG9ydCAqIGZyb20gJy4vdmlldy9pbmRleCc7XG5leHBvcnQgKiBmcm9tICcuL2dsb2JhbHMnO1xuXG5leHBvcnQgKiBmcm9tICcuL3JvdXRlcic7XG5leHBvcnQgKiBmcm9tICcuL3ZhbmlsbGEnO1xuZXhwb3J0ICogZnJvbSAnLi9pbnRlcmZhY2UnO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL2luZGV4LnRzIiwidmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcblx0XHRnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzXG4vLyBtb2R1bGUgaWQgPSA2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIFRoaXMgbW9kdWxlIGNvbnRhaW5zIGNvZGUgZm9yIFN0YXRlIFBhcmFtZXRlcnMuXG4gKlxuICogU2VlIFtbUGFyYW1EZWNsYXJhdGlvbl1dXG4gKlxuICogQGNvcmVhcGlcbiAqIEBwcmVmZXJyZWRcbiAqIEBtb2R1bGUgcGFyYW1zXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5leHBvcnQgKiBmcm9tICcuL2ludGVyZmFjZSc7XG5leHBvcnQgKiBmcm9tICcuL3BhcmFtJztcbmV4cG9ydCAqIGZyb20gJy4vcGFyYW1UeXBlcyc7XG5leHBvcnQgKiBmcm9tICcuL3N0YXRlUGFyYW1zJztcbmV4cG9ydCAqIGZyb20gJy4vcGFyYW1UeXBlJztcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9wYXJhbXMvaW5kZXgudHMiLCIvKiogQG1vZHVsZSBwYXRoICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuZXhwb3J0ICogZnJvbSAnLi9wYXRoTm9kZSc7XG5leHBvcnQgKiBmcm9tICcuL3BhdGhVdGlscyc7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvcGF0aC9pbmRleC50cyIsIi8qKlxuICogIyBUaGUgc3RhdGUgc3Vic3lzdGVtXG4gKlxuICogVGhpcyBzdWJzeXN0ZW0gaW1wbGVtZW50cyB0aGUgdWktcm91dGVyIHN0YXRlIHRyZWVcbiAqXG4gKiAtIFRoZSBbW1N0YXRlU2VydmljZV1dIGhhcyBzdGF0ZS1yZWxhdGVkIHNlcnZpY2UgbWV0aG9kcyBzdWNoIGFzOlxuICogICAtIFtbU3RhdGVTZXJ2aWNlLmdldF1dOiBHZXQgYSByZWdpc3RlcmVkIFtbU3RhdGVEZWNsYXJhdGlvbl1dIG9iamVjdFxuICogICAtIFtbU3RhdGVTZXJ2aWNlLmdvXV06IFRyYW5zaXRpb24gZnJvbSB0aGUgY3VycmVudCBzdGF0ZSB0byBhIG5ldyBzdGF0ZVxuICogICAtIFtbU3RhdGVTZXJ2aWNlLnJlbG9hZF1dOiBSZWxvYWQgdGhlIGN1cnJlbnQgc3RhdGVcbiAqICAgLSBbW1N0YXRlU2VydmljZS50YXJnZXRdXTogR2V0IGEgW1tUYXJnZXRTdGF0ZV1dICh1c2VmdWwgd2hlbiByZWRpcmVjdGluZyBmcm9tIGEgVHJhbnNpdGlvbiBIb29rKVxuICogICAtIFtbU3RhdGVTZXJ2aWNlLm9uSW52YWxpZF1dOiBSZWdpc3RlciBhIGNhbGxiYWNrIGZvciB3aGVuIGEgdHJhbnNpdGlvbiB0byBhbiBpbnZhbGlkIHN0YXRlIGlzIHN0YXJ0ZWRcbiAqICAgLSBbW1N0YXRlU2VydmljZS5kZWZhdWx0RXJyb3JIYW5kbGVyXV06IFJlZ2lzdGVyIGEgZ2xvYmFsIGNhbGxiYWNrIGZvciB3aGVuIGEgdHJhbnNpdGlvbiBlcnJvcnNcbiAqIC0gVGhlIFtbU3RhdGVEZWNsYXJhdGlvbl1dIGludGVyZmFjZSBkZWZpbmVzIHRoZSBzaGFwZSBvZiBhIHN0YXRlIGRlY2xhcmF0aW9uXG4gKiAtIFRoZSBbW1N0YXRlUmVnaXN0cnldXSBjb250YWlucyBhbGwgdGhlIHJlZ2lzdGVyZWQgc3RhdGVzXG4gKiAgIC0gU3RhdGVzIGNhbiBiZSBhZGRlZC9yZW1vdmVkIHVzaW5nIHRoZSBbW1N0YXRlUmVnaXN0cnkucmVnaXN0ZXJdXSBhbmQgW1tTdGF0ZVJlZ2lzdHJ5LmRlcmVnaXN0ZXJdXVxuICogICAgIC0gTm90ZTogQm9vdHN0cmFwIHN0YXRlIHJlZ2lzdHJhdGlvbiBkaWZmZXJzIGJ5IGZyb250LWVuZCBmcmFtZXdvcmsuXG4gKiAgIC0gR2V0IG5vdGlmaWVkIG9mIHN0YXRlIHJlZ2lzdHJhdGlvbi9kZXJlZ2lzdHJhdGlvbiB1c2luZyBbW1N0YXRlUmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkXV0uXG4gKlxuICogQGNvcmVhcGlcbiAqIEBwcmVmZXJyZWRcbiAqIEBtb2R1bGUgc3RhdGVcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmV4cG9ydCAqIGZyb20gJy4vaW50ZXJmYWNlJztcbmV4cG9ydCAqIGZyb20gJy4vc3RhdGVCdWlsZGVyJztcbmV4cG9ydCAqIGZyb20gJy4vc3RhdGVPYmplY3QnO1xuZXhwb3J0ICogZnJvbSAnLi9zdGF0ZU1hdGNoZXInO1xuZXhwb3J0ICogZnJvbSAnLi9zdGF0ZVF1ZXVlTWFuYWdlcic7XG5leHBvcnQgKiBmcm9tICcuL3N0YXRlUmVnaXN0cnknO1xuZXhwb3J0ICogZnJvbSAnLi9zdGF0ZVNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi90YXJnZXRTdGF0ZSc7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvc3RhdGUvaW5kZXgudHMiLCIvKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgVUlSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuaW1wb3J0IHsgVHJhbnNpdGlvblNlcnZpY2UgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFJlc29sdmFibGUgfSBmcm9tICcuLi9yZXNvbHZlJztcbmltcG9ydCB7IGV4dGVuZCwgaW5BcnJheSwgbWFwLCBtYXBPYmosIHVuaXFSLCB1bm5lc3RSLCB2YWx1ZXMgfSBmcm9tICcuLi9jb21tb24nO1xuaW1wb3J0IHsgUGF0aE5vZGUgfSBmcm9tICcuLi9wYXRoJztcbmltcG9ydCB7IFRyZWVDaGFuZ2VzIH0gZnJvbSAnLi4vdHJhbnNpdGlvbic7XG5cbmZ1bmN0aW9uIGFkZENvcmVSZXNvbHZhYmxlcyh0cmFuczogVHJhbnNpdGlvbikge1xuICB0cmFucy5hZGRSZXNvbHZhYmxlKFJlc29sdmFibGUuZnJvbURhdGEoVUlSb3V0ZXIsIHRyYW5zLnJvdXRlciksICcnKTtcbiAgdHJhbnMuYWRkUmVzb2x2YWJsZShSZXNvbHZhYmxlLmZyb21EYXRhKFRyYW5zaXRpb24sIHRyYW5zKSwgJycpO1xuICB0cmFucy5hZGRSZXNvbHZhYmxlKFJlc29sdmFibGUuZnJvbURhdGEoJyR0cmFuc2l0aW9uJCcsIHRyYW5zKSwgJycpO1xuICB0cmFucy5hZGRSZXNvbHZhYmxlKFJlc29sdmFibGUuZnJvbURhdGEoJyRzdGF0ZVBhcmFtcycsIHRyYW5zLnBhcmFtcygpKSwgJycpO1xuXG4gIHRyYW5zLmVudGVyaW5nKCkuZm9yRWFjaChzdGF0ZSA9PiB7XG4gICAgdHJhbnMuYWRkUmVzb2x2YWJsZShSZXNvbHZhYmxlLmZyb21EYXRhKCckc3RhdGUkJywgc3RhdGUpLCBzdGF0ZSk7XG4gIH0pO1xufVxuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJBZGRDb3JlUmVzb2x2YWJsZXMgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vbkNyZWF0ZSh7fSwgYWRkQ29yZVJlc29sdmFibGVzKTtcblxuY29uc3QgVFJBTlNJVElPTl9UT0tFTlMgPSBbJyR0cmFuc2l0aW9uJCcsIFRyYW5zaXRpb25dO1xuY29uc3QgaXNUcmFuc2l0aW9uID0gaW5BcnJheShUUkFOU0lUSU9OX1RPS0VOUyk7XG5cbi8vIFJlZmVyZW5jZXMgdG8gVHJhbnNpdGlvbiBpbiB0aGUgdHJlZUNoYW5nZXMgcGF0aG5vZGVzIG1ha2VzIGFsbFxuLy8gcHJldmlvdXMgVHJhbnNpdGlvbnMgcmVhY2hhYmxlIGluIG1lbW9yeSwgY2F1c2luZyBhIG1lbW9yeSBsZWFrXG4vLyBUaGlzIGZ1bmN0aW9uIHJlbW92ZXMgcmVzb2x2ZXMgZm9yICckdHJhbnNpdGlvbiQnIGFuZCBgVHJhbnNpdGlvbmAgZnJvbSB0aGUgdHJlZUNoYW5nZXMuXG4vLyBEbyBub3QgdXNlIHRoaXMgb24gY3VycmVudCB0cmFuc2l0aW9ucywgb25seSBvbiBvbGQgb25lcy5cbmV4cG9ydCBjb25zdCB0cmVlQ2hhbmdlc0NsZWFudXAgPSAodHJhbnM6IFRyYW5zaXRpb24pID0+IHtcbiAgY29uc3Qgbm9kZXMgPSB2YWx1ZXModHJhbnMudHJlZUNoYW5nZXMoKSlcbiAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgIC5yZWR1Y2UodW5pcVIsIFtdKTtcblxuICAvLyBJZiB0aGUgcmVzb2x2YWJsZSBpcyBhIFRyYW5zaXRpb24sIHJldHVybiBhIG5ldyByZXNvbHZhYmxlIHdpdGggbnVsbCBkYXRhXG4gIGNvbnN0IHJlcGxhY2VUcmFuc2l0aW9uV2l0aE51bGwgPSAocjogUmVzb2x2YWJsZSk6IFJlc29sdmFibGUgPT4ge1xuICAgIHJldHVybiBpc1RyYW5zaXRpb24oci50b2tlbikgPyBSZXNvbHZhYmxlLmZyb21EYXRhKHIudG9rZW4sIG51bGwpIDogcjtcbiAgfTtcblxuICBub2Rlcy5mb3JFYWNoKChub2RlOiBQYXRoTm9kZSkgPT4ge1xuICAgIG5vZGUucmVzb2x2YWJsZXMgPSBub2RlLnJlc29sdmFibGVzLm1hcChyZXBsYWNlVHJhbnNpdGlvbldpdGhOdWxsKTtcbiAgfSk7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL2hvb2tzL2NvcmVSZXNvbHZhYmxlcy50cyIsIi8qKiBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzRnVuY3Rpb24gfSBmcm9tICcuLi9jb21tb24vcHJlZGljYXRlcyc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5pbXBvcnQgeyBUYXJnZXRTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3RhcmdldFN0YXRlJztcbmltcG9ydCB7IFRyYW5zaXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9va0ZuIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi9pbnRlcmZhY2UnO1xuXG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gdGhhdCByZWRpcmVjdHMgdG8gYSBkaWZmZXJlbnQgc3RhdGUgb3IgcGFyYW1zXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7IHRvOiAoc3RhdGUpID0+ICEhc3RhdGUucmVkaXJlY3RUbyB9LCByZWRpcmVjdEhvb2spO2BcbiAqXG4gKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlZGlyZWN0VG9dXVxuICovXG5jb25zdCByZWRpcmVjdFRvSG9vazogVHJhbnNpdGlvbkhvb2tGbiA9ICh0cmFuczogVHJhbnNpdGlvbikgPT4ge1xuICBjb25zdCByZWRpcmVjdCA9IHRyYW5zLnRvKCkucmVkaXJlY3RUbztcbiAgaWYgKCFyZWRpcmVjdCkgcmV0dXJuO1xuXG4gIGNvbnN0ICRzdGF0ZSA9IHRyYW5zLnJvdXRlci5zdGF0ZVNlcnZpY2U7XG5cbiAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0KHJlc3VsdDogYW55KSB7XG4gICAgaWYgKCFyZXN1bHQpIHJldHVybjtcbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgVGFyZ2V0U3RhdGUpIHJldHVybiByZXN1bHQ7XG4gICAgaWYgKGlzU3RyaW5nKHJlc3VsdCkpIHJldHVybiAkc3RhdGUudGFyZ2V0KDxhbnk+cmVzdWx0LCB0cmFucy5wYXJhbXMoKSwgdHJhbnMub3B0aW9ucygpKTtcbiAgICBpZiAocmVzdWx0WydzdGF0ZSddIHx8IHJlc3VsdFsncGFyYW1zJ10pXG4gICAgICByZXR1cm4gJHN0YXRlLnRhcmdldChyZXN1bHRbJ3N0YXRlJ10gfHwgdHJhbnMudG8oKSwgcmVzdWx0WydwYXJhbXMnXSB8fCB0cmFucy5wYXJhbXMoKSwgdHJhbnMub3B0aW9ucygpKTtcbiAgfVxuXG4gIGlmIChpc0Z1bmN0aW9uKHJlZGlyZWN0KSkge1xuICAgIHJldHVybiBzZXJ2aWNlcy4kcS53aGVuKHJlZGlyZWN0KHRyYW5zKSkudGhlbihoYW5kbGVSZXN1bHQpO1xuICB9XG4gIHJldHVybiBoYW5kbGVSZXN1bHQocmVkaXJlY3QpO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyUmVkaXJlY3RUb0hvb2sgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHsgdG86IHN0YXRlID0+ICEhc3RhdGUucmVkaXJlY3RUbyB9LCByZWRpcmVjdFRvSG9vayk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvaG9va3MvcmVkaXJlY3RUby50cyIsIi8qKiBAbW9kdWxlIGhvb2tzICovXG4vKiogZm9yIHR5cGVkb2MgKi9cbmltcG9ydCB7IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vaW50ZXJmYWNlJztcbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgVHJhbnNpdGlvblNlcnZpY2UgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFN0YXRlRGVjbGFyYXRpb24gfSBmcm9tICcuLi9zdGF0ZS9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZU9iamVjdCc7XG5cbi8qKlxuICogQSBmYWN0b3J5IHdoaWNoIGNyZWF0ZXMgYW4gb25FbnRlciwgb25FeGl0IG9yIG9uUmV0YWluIHRyYW5zaXRpb24gaG9vayBmdW5jdGlvblxuICpcbiAqIFRoZSByZXR1cm5lZCBmdW5jdGlvbiBpbnZva2VzIHRoZSAoZm9yIGluc3RhbmNlKSBzdGF0ZS5vbkVudGVyIGhvb2sgd2hlbiB0aGVcbiAqIHN0YXRlIGlzIGJlaW5nIGVudGVyZWQuXG4gKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBtYWtlRW50ZXJFeGl0UmV0YWluSG9vayhob29rTmFtZTogc3RyaW5nKTogVHJhbnNpdGlvblN0YXRlSG9va0ZuIHtcbiAgcmV0dXJuICh0cmFuc2l0aW9uOiBUcmFuc2l0aW9uLCBzdGF0ZTogU3RhdGVEZWNsYXJhdGlvbikgPT4ge1xuICAgIGNvbnN0IF9zdGF0ZTogU3RhdGVPYmplY3QgPSBzdGF0ZS4kJHN0YXRlKCk7XG4gICAgY29uc3QgaG9va0ZuOiBUcmFuc2l0aW9uU3RhdGVIb29rRm4gPSBfc3RhdGVbaG9va05hbWVdO1xuICAgIHJldHVybiBob29rRm4odHJhbnNpdGlvbiwgc3RhdGUpO1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dIGZvciBvbkV4aXRcbiAqXG4gKiBXaGVuIHRoZSBzdGF0ZSBpcyBiZWluZyBleGl0ZWQsIHRoZSBzdGF0ZSdzIC5vbkV4aXQgZnVuY3Rpb24gaXMgaW52b2tlZC5cbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vbkV4aXQoeyBleGl0aW5nOiAoc3RhdGUpID0+ICEhc3RhdGUub25FeGl0IH0sIG9uRXhpdEhvb2spO2BcbiAqXG4gKiBTZWU6IFtbSUhvb2tSZWdpc3RyeS5vbkV4aXRdXVxuICovXG5jb25zdCBvbkV4aXRIb29rOiBUcmFuc2l0aW9uU3RhdGVIb29rRm4gPSBtYWtlRW50ZXJFeGl0UmV0YWluSG9vaygnb25FeGl0Jyk7XG5leHBvcnQgY29uc3QgcmVnaXN0ZXJPbkV4aXRIb29rID0gKHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSkgPT5cbiAgdHJhbnNpdGlvblNlcnZpY2Uub25FeGl0KHsgZXhpdGluZzogc3RhdGUgPT4gISFzdGF0ZS5vbkV4aXQgfSwgb25FeGl0SG9vayk7XG5cbi8qKlxuICogVGhlIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0gZm9yIG9uUmV0YWluXG4gKlxuICogV2hlbiB0aGUgc3RhdGUgd2FzIGFscmVhZHkgZW50ZXJlZCwgYW5kIGlzIG5vdCBiZWluZyBleGl0ZWQgb3IgcmUtZW50ZXJlZCwgdGhlIHN0YXRlJ3MgLm9uUmV0YWluIGZ1bmN0aW9uIGlzIGludm9rZWQuXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25SZXRhaW4oeyByZXRhaW5lZDogKHN0YXRlKSA9PiAhIXN0YXRlLm9uUmV0YWluIH0sIG9uUmV0YWluSG9vayk7YFxuICpcbiAqIFNlZTogW1tJSG9va1JlZ2lzdHJ5Lm9uUmV0YWluXV1cbiAqL1xuY29uc3Qgb25SZXRhaW5Ib29rOiBUcmFuc2l0aW9uU3RhdGVIb29rRm4gPSBtYWtlRW50ZXJFeGl0UmV0YWluSG9vaygnb25SZXRhaW4nKTtcbmV4cG9ydCBjb25zdCByZWdpc3Rlck9uUmV0YWluSG9vayA9ICh0cmFuc2l0aW9uU2VydmljZTogVHJhbnNpdGlvblNlcnZpY2UpID0+XG4gIHRyYW5zaXRpb25TZXJ2aWNlLm9uUmV0YWluKHsgcmV0YWluZWQ6IHN0YXRlID0+ICEhc3RhdGUub25SZXRhaW4gfSwgb25SZXRhaW5Ib29rKTtcblxuLyoqXG4gKiBUaGUgW1tUcmFuc2l0aW9uU3RhdGVIb29rRm5dXSBmb3Igb25FbnRlclxuICpcbiAqIFdoZW4gdGhlIHN0YXRlIGlzIGJlaW5nIGVudGVyZWQsIHRoZSBzdGF0ZSdzIC5vbkVudGVyIGZ1bmN0aW9uIGlzIGludm9rZWQuXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25FbnRlcih7IGVudGVyaW5nOiAoc3RhdGUpID0+ICEhc3RhdGUub25FbnRlciB9LCBvbkVudGVySG9vayk7YFxuICpcbiAqIFNlZTogW1tJSG9va1JlZ2lzdHJ5Lm9uRW50ZXJdXVxuICovXG5jb25zdCBvbkVudGVySG9vazogVHJhbnNpdGlvblN0YXRlSG9va0ZuID0gbWFrZUVudGVyRXhpdFJldGFpbkhvb2soJ29uRW50ZXInKTtcbmV4cG9ydCBjb25zdCByZWdpc3Rlck9uRW50ZXJIb29rID0gKHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSkgPT5cbiAgdHJhbnNpdGlvblNlcnZpY2Uub25FbnRlcih7IGVudGVyaW5nOiBzdGF0ZSA9PiAhIXN0YXRlLm9uRW50ZXIgfSwgb25FbnRlckhvb2spO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL2hvb2tzL29uRW50ZXJFeGl0UmV0YWluLnRzIiwiLyoqIEBtb2R1bGUgaG9va3MgKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBSZXNvbHZlQ29udGV4dCB9IGZyb20gJy4uL3Jlc29sdmUvcmVzb2x2ZUNvbnRleHQnO1xuaW1wb3J0IHsgVHJhbnNpdGlvblN0YXRlSG9va0ZuLCBUcmFuc2l0aW9uSG9va0ZuIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvblNlcnZpY2UgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IHZhbCB9IGZyb20gJy4uL2NvbW1vbi9ob2YnO1xuaW1wb3J0IHsgU3RhdGVEZWNsYXJhdGlvbiB9IGZyb20gJy4uL3N0YXRlL2ludGVyZmFjZSc7XG5cbmV4cG9ydCBjb25zdCBSRVNPTFZFX0hPT0tfUFJJT1JJVFkgPSAxMDAwO1xuXG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gd2hpY2ggcmVzb2x2ZXMgYWxsIEVBR0VSIFJlc29sdmFibGVzIGluIHRoZSBUbyBQYXRoXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7fSwgZWFnZXJSZXNvbHZlUGF0aCwgeyBwcmlvcml0eTogMTAwMCB9KTtgXG4gKlxuICogV2hlbiBhIFRyYW5zaXRpb24gc3RhcnRzLCB0aGlzIGhvb2sgcmVzb2x2ZXMgYWxsIHRoZSBFQUdFUiBSZXNvbHZhYmxlcywgd2hpY2ggdGhlIHRyYW5zaXRpb24gdGhlbiB3YWl0cyBmb3IuXG4gKlxuICogU2VlIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV1cbiAqL1xuY29uc3QgZWFnZXJSZXNvbHZlUGF0aDogVHJhbnNpdGlvbkhvb2tGbiA9ICh0cmFuczogVHJhbnNpdGlvbikgPT5cbiAgbmV3IFJlc29sdmVDb250ZXh0KHRyYW5zLnRyZWVDaGFuZ2VzKCkudG8pLnJlc29sdmVQYXRoKCdFQUdFUicsIHRyYW5zKS50aGVuKG5vb3ApO1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJFYWdlclJlc29sdmVQYXRoID0gKHRyYW5zaXRpb25TZXJ2aWNlOiBUcmFuc2l0aW9uU2VydmljZSkgPT5cbiAgdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7fSwgZWFnZXJSZXNvbHZlUGF0aCwgeyBwcmlvcml0eTogUkVTT0xWRV9IT09LX1BSSU9SSVRZIH0pO1xuXG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gd2hpY2ggcmVzb2x2ZXMgYWxsIExBWlkgUmVzb2x2YWJsZXMgZm9yIHRoZSBzdGF0ZSAoYW5kIGFsbCBpdHMgYW5jZXN0b3JzKSBpbiB0aGUgVG8gUGF0aFxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uRW50ZXIoeyBlbnRlcmluZzogKCkgPT4gdHJ1ZSB9LCBsYXp5UmVzb2x2ZVN0YXRlLCB7IHByaW9yaXR5OiAxMDAwIH0pO2BcbiAqXG4gKiBXaGVuIGEgU3RhdGUgaXMgYmVpbmcgZW50ZXJlZCwgdGhpcyBob29rIHJlc29sdmVzIGFsbCB0aGUgUmVzb2x2YWJsZXMgZm9yIHRoaXMgc3RhdGUsIHdoaWNoIHRoZSB0cmFuc2l0aW9uIHRoZW4gd2FpdHMgZm9yLlxuICpcbiAqIFNlZSBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dXG4gKi9cbmNvbnN0IGxhenlSZXNvbHZlU3RhdGU6IFRyYW5zaXRpb25TdGF0ZUhvb2tGbiA9ICh0cmFuczogVHJhbnNpdGlvbiwgc3RhdGU6IFN0YXRlRGVjbGFyYXRpb24pID0+XG4gIG5ldyBSZXNvbHZlQ29udGV4dCh0cmFucy50cmVlQ2hhbmdlcygpLnRvKVxuICAgIC5zdWJDb250ZXh0KHN0YXRlLiQkc3RhdGUoKSlcbiAgICAucmVzb2x2ZVBhdGgoJ0xBWlknLCB0cmFucylcbiAgICAudGhlbihub29wKTtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyTGF6eVJlc29sdmVTdGF0ZSA9ICh0cmFuc2l0aW9uU2VydmljZTogVHJhbnNpdGlvblNlcnZpY2UpID0+XG4gIHRyYW5zaXRpb25TZXJ2aWNlLm9uRW50ZXIoeyBlbnRlcmluZzogdmFsKHRydWUpIH0sIGxhenlSZXNvbHZlU3RhdGUsIHsgcHJpb3JpdHk6IFJFU09MVkVfSE9PS19QUklPUklUWSB9KTtcblxuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHJlc29sdmVzIGFueSBkeW5hbWljYWxseSBhZGRlZCAoTEFaWSBvciBFQUdFUikgUmVzb2x2YWJsZXMuXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25GaW5pc2goe30sIGVhZ2VyUmVzb2x2ZVBhdGgsIHsgcHJpb3JpdHk6IDEwMDAgfSk7YFxuICpcbiAqIEFmdGVyIGFsbCBlbnRlcmluZyBzdGF0ZXMgaGF2ZSBiZWVuIGVudGVyZWQsIHRoaXMgaG9vayByZXNvbHZlcyBhbnkgcmVtYWluaW5nIFJlc29sdmFibGVzLlxuICogVGhlc2UgYXJlIHR5cGljYWxseSBkeW5hbWljIHJlc29sdmVzIHdoaWNoIHdlcmUgYWRkZWQgYnkgc29tZSBUcmFuc2l0aW9uIEhvb2sgdXNpbmcgW1tUcmFuc2l0aW9uLmFkZFJlc29sdmFibGVdXS5cbiAqXG4gKiBTZWUgW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXVxuICovXG5jb25zdCByZXNvbHZlUmVtYWluaW5nOiBUcmFuc2l0aW9uSG9va0ZuID0gKHRyYW5zOiBUcmFuc2l0aW9uKSA9PlxuICBuZXcgUmVzb2x2ZUNvbnRleHQodHJhbnMudHJlZUNoYW5nZXMoKS50bykucmVzb2x2ZVBhdGgoJ0xBWlknLCB0cmFucykudGhlbihub29wKTtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyUmVzb2x2ZVJlbWFpbmluZyA9ICh0cmFuc2l0aW9uU2VydmljZTogVHJhbnNpdGlvblNlcnZpY2UpID0+XG4gIHRyYW5zaXRpb25TZXJ2aWNlLm9uRmluaXNoKHt9LCByZXNvbHZlUmVtYWluaW5nLCB7IHByaW9yaXR5OiBSRVNPTFZFX0hPT0tfUFJJT1JJVFkgfSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvaG9va3MvcmVzb2x2ZS50cyIsIi8qKiBAbW9kdWxlIGhvb2tzICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24nO1xuaW1wb3J0IHsgc2VydmljZXMgfSBmcm9tICcuLi9jb21tb24vY29yZXNlcnZpY2VzJztcbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuaW1wb3J0IHsgVmlld1NlcnZpY2UgfSBmcm9tICcuLi92aWV3L3ZpZXcnO1xuaW1wb3J0IHsgVmlld0NvbmZpZyB9IGZyb20gJy4uL3ZpZXcvaW50ZXJmYWNlJztcbmltcG9ydCB7IFRyYW5zaXRpb25Ib29rRm4gfSBmcm9tICcuLi90cmFuc2l0aW9uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvblNlcnZpY2UnO1xuXG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gd2hpY2ggd2FpdHMgZm9yIHRoZSB2aWV3cyB0byBsb2FkXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7fSwgbG9hZEVudGVyaW5nVmlld3MpO2BcbiAqXG4gKiBBbGxvd3MgdGhlIHZpZXdzIHRvIGRvIGFzeW5jIHdvcmsgaW4gW1tWaWV3Q29uZmlnLmxvYWRdXSBiZWZvcmUgdGhlIHRyYW5zaXRpb24gY29udGludWVzLlxuICogSW4gYW5ndWxhciAxLCB0aGlzIGluY2x1ZGVzIGxvYWRpbmcgdGhlIHRlbXBsYXRlcy5cbiAqL1xuY29uc3QgbG9hZEVudGVyaW5nVmlld3M6IFRyYW5zaXRpb25Ib29rRm4gPSAodHJhbnNpdGlvbjogVHJhbnNpdGlvbikgPT4ge1xuICBjb25zdCAkcSA9IHNlcnZpY2VzLiRxO1xuICBjb25zdCBlbnRlcmluZ1ZpZXdzID0gdHJhbnNpdGlvbi52aWV3cygnZW50ZXJpbmcnKTtcbiAgaWYgKCFlbnRlcmluZ1ZpZXdzLmxlbmd0aCkgcmV0dXJuO1xuICByZXR1cm4gJHEuYWxsKGVudGVyaW5nVmlld3MubWFwKHZpZXcgPT4gJHEud2hlbih2aWV3LmxvYWQoKSkpKS50aGVuKG5vb3ApO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyTG9hZEVudGVyaW5nVmlld3MgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vbkZpbmlzaCh7fSwgbG9hZEVudGVyaW5nVmlld3MpO1xuXG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gd2hpY2ggYWN0aXZhdGVzIHRoZSBuZXcgdmlld3Mgd2hlbiBhIHRyYW5zaXRpb24gaXMgc3VjY2Vzc2Z1bC5cbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIGFjdGl2YXRlVmlld3MpO2BcbiAqXG4gKiBBZnRlciBhIHRyYW5zaXRpb24gaXMgY29tcGxldGUsIHRoaXMgaG9vayBkZWFjdGl2YXRlcyB0aGUgb2xkIHZpZXdzIGZyb20gdGhlIHByZXZpb3VzIHN0YXRlLFxuICogYW5kIGFjdGl2YXRlcyB0aGUgbmV3IHZpZXdzIGZyb20gdGhlIGRlc3RpbmF0aW9uIHN0YXRlLlxuICpcbiAqIFNlZSBbW1ZpZXdTZXJ2aWNlXV1cbiAqL1xuY29uc3QgYWN0aXZhdGVWaWV3czogVHJhbnNpdGlvbkhvb2tGbiA9ICh0cmFuc2l0aW9uOiBUcmFuc2l0aW9uKSA9PiB7XG4gIGNvbnN0IGVudGVyaW5nVmlld3MgPSB0cmFuc2l0aW9uLnZpZXdzKCdlbnRlcmluZycpO1xuICBjb25zdCBleGl0aW5nVmlld3MgPSB0cmFuc2l0aW9uLnZpZXdzKCdleGl0aW5nJyk7XG4gIGlmICghZW50ZXJpbmdWaWV3cy5sZW5ndGggJiYgIWV4aXRpbmdWaWV3cy5sZW5ndGgpIHJldHVybjtcblxuICBjb25zdCAkdmlldzogVmlld1NlcnZpY2UgPSB0cmFuc2l0aW9uLnJvdXRlci52aWV3U2VydmljZTtcblxuICBleGl0aW5nVmlld3MuZm9yRWFjaCgodmM6IFZpZXdDb25maWcpID0+ICR2aWV3LmRlYWN0aXZhdGVWaWV3Q29uZmlnKHZjKSk7XG4gIGVudGVyaW5nVmlld3MuZm9yRWFjaCgodmM6IFZpZXdDb25maWcpID0+ICR2aWV3LmFjdGl2YXRlVmlld0NvbmZpZyh2YykpO1xuXG4gICR2aWV3LnN5bmMoKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZWdpc3RlckFjdGl2YXRlVmlld3MgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIGFjdGl2YXRlVmlld3MpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL2hvb2tzL3ZpZXdzLnRzIiwiLyoqIEBtb2R1bGUgaG9va3MgKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBjb3B5IH0gZnJvbSAnLi4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uU2VydmljZSB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvblNlcnZpY2UnO1xuXG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gd2hpY2ggdXBkYXRlcyBnbG9iYWwgVUktUm91dGVyIHN0YXRlXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25CZWZvcmUoe30sIHVwZGF0ZUdsb2JhbFN0YXRlKTtgXG4gKlxuICogQmVmb3JlIGEgW1tUcmFuc2l0aW9uXV0gc3RhcnRzLCB1cGRhdGVzIHRoZSBnbG9iYWwgdmFsdWUgb2YgXCJ0aGUgY3VycmVudCB0cmFuc2l0aW9uXCIgKFtbR2xvYmFscy50cmFuc2l0aW9uXV0pLlxuICogQWZ0ZXIgYSBzdWNjZXNzZnVsIFtbVHJhbnNpdGlvbl1dLCB1cGRhdGVzIHRoZSBnbG9iYWwgdmFsdWVzIG9mIFwidGhlIGN1cnJlbnQgc3RhdGVcIlxuICogKFtbR2xvYmFscy5jdXJyZW50XV0gYW5kIFtbR2xvYmFscy4kY3VycmVudF1dKSBhbmQgXCJ0aGUgY3VycmVudCBwYXJhbSB2YWx1ZXNcIiAoW1tHbG9iYWxzLnBhcmFtc11dKS5cbiAqXG4gKiBTZWUgYWxzbyB0aGUgZGVwcmVjYXRlZCBwcm9wZXJ0aWVzOlxuICogW1tTdGF0ZVNlcnZpY2UudHJhbnNpdGlvbl1dLCBbW1N0YXRlU2VydmljZS5jdXJyZW50XV0sIFtbU3RhdGVTZXJ2aWNlLnBhcmFtc11dXG4gKi9cbmNvbnN0IHVwZGF0ZUdsb2JhbFN0YXRlID0gKHRyYW5zOiBUcmFuc2l0aW9uKSA9PiB7XG4gIGNvbnN0IGdsb2JhbHMgPSB0cmFucy5yb3V0ZXIuZ2xvYmFscztcblxuICBjb25zdCB0cmFuc2l0aW9uU3VjY2Vzc2Z1bCA9ICgpID0+IHtcbiAgICBnbG9iYWxzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5lbnF1ZXVlKHRyYW5zKTtcbiAgICBnbG9iYWxzLiRjdXJyZW50ID0gdHJhbnMuJHRvKCk7XG4gICAgZ2xvYmFscy5jdXJyZW50ID0gZ2xvYmFscy4kY3VycmVudC5zZWxmO1xuXG4gICAgY29weSh0cmFucy5wYXJhbXMoKSwgZ2xvYmFscy5wYXJhbXMpO1xuICB9O1xuXG4gIGNvbnN0IGNsZWFyQ3VycmVudFRyYW5zaXRpb24gPSAoKSA9PiB7XG4gICAgLy8gRG8gbm90IGNsZWFyIGdsb2JhbHMudHJhbnNpdGlvbiBpZiBhIGRpZmZlcmVudCB0cmFuc2l0aW9uIGhhcyBzdGFydGVkIGluIHRoZSBtZWFudGltZVxuICAgIGlmIChnbG9iYWxzLnRyYW5zaXRpb24gPT09IHRyYW5zKSBnbG9iYWxzLnRyYW5zaXRpb24gPSBudWxsO1xuICB9O1xuXG4gIHRyYW5zLm9uU3VjY2Vzcyh7fSwgdHJhbnNpdGlvblN1Y2Nlc3NmdWwsIHsgcHJpb3JpdHk6IDEwMDAwIH0pO1xuICB0cmFucy5wcm9taXNlLnRoZW4oY2xlYXJDdXJyZW50VHJhbnNpdGlvbiwgY2xlYXJDdXJyZW50VHJhbnNpdGlvbik7XG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJVcGRhdGVHbG9iYWxTdGF0ZSA9ICh0cmFuc2l0aW9uU2VydmljZTogVHJhbnNpdGlvblNlcnZpY2UpID0+XG4gIHRyYW5zaXRpb25TZXJ2aWNlLm9uQ3JlYXRlKHt9LCB1cGRhdGVHbG9iYWxTdGF0ZSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvaG9va3MvdXBkYXRlR2xvYmFscy50cyIsIi8qKiBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xuaW1wb3J0IHsgVXJsUm91dGVyIH0gZnJvbSAnLi4vdXJsL3VybFJvdXRlcic7XG5pbXBvcnQgeyBTdGF0ZVNlcnZpY2UgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZVNlcnZpY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb24vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBUcmFuc2l0aW9uSG9va0ZuIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVHJhbnNpdGlvblNlcnZpY2UgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcblxuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHVwZGF0ZXMgdGhlIFVSTCBhZnRlciBhIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvblxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uU3VjY2Vzcyh7fSwgdXBkYXRlVXJsKTtgXG4gKi9cbmNvbnN0IHVwZGF0ZVVybDogVHJhbnNpdGlvbkhvb2tGbiA9ICh0cmFuc2l0aW9uOiBUcmFuc2l0aW9uKSA9PiB7XG4gIGNvbnN0IG9wdGlvbnMgPSB0cmFuc2l0aW9uLm9wdGlvbnMoKTtcbiAgY29uc3QgJHN0YXRlOiBTdGF0ZVNlcnZpY2UgPSB0cmFuc2l0aW9uLnJvdXRlci5zdGF0ZVNlcnZpY2U7XG4gIGNvbnN0ICR1cmxSb3V0ZXI6IFVybFJvdXRlciA9IHRyYW5zaXRpb24ucm91dGVyLnVybFJvdXRlcjtcblxuICAvLyBEb250IHVwZGF0ZSB0aGUgdXJsIGluIHRoZXNlIHNpdHVhdGlvbnM6XG4gIC8vIFRoZSB0cmFuc2l0aW9uIHdhcyB0cmlnZ2VyZWQgYnkgYSBVUkwgc3luYyAob3B0aW9ucy5zb3VyY2UgPT09ICd1cmwnKVxuICAvLyBUaGUgdXNlciBkb2Vzbid0IHdhbnQgdGhlIHVybCB0byB1cGRhdGUgKG9wdGlvbnMubG9jYXRpb24gPT09IGZhbHNlKVxuICAvLyBUaGUgZGVzdGluYXRpb24gc3RhdGUsIGFuZCBhbGwgcGFyZW50cyBoYXZlIG5vIG5hdmlnYWJsZSB1cmxcbiAgaWYgKG9wdGlvbnMuc291cmNlICE9PSAndXJsJyAmJiBvcHRpb25zLmxvY2F0aW9uICYmICRzdGF0ZS4kY3VycmVudC5uYXZpZ2FibGUpIHtcbiAgICBjb25zdCB1cmxPcHRpb25zID0geyByZXBsYWNlOiBvcHRpb25zLmxvY2F0aW9uID09PSAncmVwbGFjZScgfTtcbiAgICAkdXJsUm91dGVyLnB1c2goJHN0YXRlLiRjdXJyZW50Lm5hdmlnYWJsZS51cmwsICRzdGF0ZS5wYXJhbXMsIHVybE9wdGlvbnMpO1xuICB9XG5cbiAgJHVybFJvdXRlci51cGRhdGUodHJ1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJVcGRhdGVVcmwgPSAodHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlKSA9PlxuICB0cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIHVwZGF0ZVVybCwgeyBwcmlvcml0eTogOTk5OSB9KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9ob29rcy91cmwudHMiLCIvKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cblxuaW1wb3J0IHsgdHJhY2UgfSBmcm9tICcuLi9jb21tb24vdHJhY2UnO1xuaW1wb3J0IHsgUmVqZWN0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi9yZWplY3RGYWN0b3J5JztcbmltcG9ydCB7IFRyYW5zaXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBUcmFuc2l0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbi90cmFuc2l0aW9uJztcblxuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHRoYXQgc2tpcHMgYSB0cmFuc2l0aW9uIGlmIGl0IHNob3VsZCBiZSBpZ25vcmVkXG4gKlxuICogVGhpcyBob29rIGlzIGludm9rZWQgYXQgdGhlIGVuZCBvZiB0aGUgb25CZWZvcmUgcGhhc2UuXG4gKlxuICogSWYgdGhlIHRyYW5zaXRpb24gc2hvdWxkIGJlIGlnbm9yZWQgKGJlY2F1c2Ugbm8gcGFyYW1ldGVyIG9yIHN0YXRlcyBjaGFuZ2VkKVxuICogdGhlbiB0aGUgdHJhbnNpdGlvbiBpcyBpZ25vcmVkIGFuZCBub3QgcHJvY2Vzc2VkLlxuICovXG5mdW5jdGlvbiBpZ25vcmVkSG9vayh0cmFuczogVHJhbnNpdGlvbikge1xuICBjb25zdCBpZ25vcmVkUmVhc29uID0gdHJhbnMuX2lnbm9yZWRSZWFzb24oKTtcbiAgaWYgKCFpZ25vcmVkUmVhc29uKSByZXR1cm47XG5cbiAgdHJhY2UudHJhY2VUcmFuc2l0aW9uSWdub3JlZCh0cmFucyk7XG5cbiAgY29uc3QgcGVuZGluZyA9IHRyYW5zLnJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb247XG5cbiAgLy8gVGhlIHVzZXIgY2xpY2tlZCBhIGxpbmsgZ29pbmcgYmFjayB0byB0aGUgKmN1cnJlbnQgc3RhdGUqICgnQScpXG4gIC8vIEhvd2V2ZXIsIHRoZXJlIGlzIGFsc28gYSBwZW5kaW5nIHRyYW5zaXRpb24gaW4gZmxpZ2h0ICh0byAnQicpXG4gIC8vIEFib3J0IHRoZSB0cmFuc2l0aW9uIHRvICdCJyBiZWNhdXNlIHRoZSB1c2VyIG5vdyB3YW50cyB0byBiZSBiYWNrIGF0ICdBJy5cbiAgaWYgKGlnbm9yZWRSZWFzb24gPT09ICdTYW1lQXNDdXJyZW50JyAmJiBwZW5kaW5nKSB7XG4gICAgcGVuZGluZy5hYm9ydCgpO1xuICB9XG5cbiAgcmV0dXJuIFJlamVjdGlvbi5pZ25vcmVkKCkudG9Qcm9taXNlKCk7XG59XG5cbmV4cG9ydCBjb25zdCByZWdpc3Rlcklnbm9yZWRUcmFuc2l0aW9uSG9vayA9ICh0cmFuc2l0aW9uU2VydmljZTogVHJhbnNpdGlvblNlcnZpY2UpID0+XG4gIHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHt9LCBpZ25vcmVkSG9vaywgeyBwcmlvcml0eTogLTk5OTkgfSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvaG9va3MvaWdub3JlZFRyYW5zaXRpb24udHMiLCIvKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cblxuaW1wb3J0IHsgVHJhbnNpdGlvblNlcnZpY2UgfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICcuLi90cmFuc2l0aW9uL3RyYW5zaXRpb24nO1xuXG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gdGhhdCByZWplY3RzIHRoZSBUcmFuc2l0aW9uIGlmIGl0IGlzIGludmFsaWRcbiAqXG4gKiBUaGlzIGhvb2sgaXMgaW52b2tlZCBhdCB0aGUgZW5kIG9mIHRoZSBvbkJlZm9yZSBwaGFzZS5cbiAqIElmIHRoZSB0cmFuc2l0aW9uIGlzIGludmFsaWQgKGZvciBleGFtcGxlLCBwYXJhbSB2YWx1ZXMgZG8gbm90IHZhbGlkYXRlKVxuICogdGhlbiB0aGUgdHJhbnNpdGlvbiBpcyByZWplY3RlZC5cbiAqL1xuZnVuY3Rpb24gaW52YWxpZFRyYW5zaXRpb25Ib29rKHRyYW5zOiBUcmFuc2l0aW9uKSB7XG4gIGlmICghdHJhbnMudmFsaWQoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcih0cmFucy5lcnJvcigpLnRvU3RyaW5nKCkpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCByZWdpc3RlckludmFsaWRUcmFuc2l0aW9uSG9vayA9ICh0cmFuc2l0aW9uU2VydmljZTogVHJhbnNpdGlvblNlcnZpY2UpID0+XG4gIHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHt9LCBpbnZhbGlkVHJhbnNpdGlvbkhvb2ssIHsgcHJpb3JpdHk6IC0xMDAwMCB9KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS9ob29rcy9pbnZhbGlkVHJhbnNpdGlvbi50cyIsIi8qKlxuICogIyBUcmFuc2l0aW9uIHN1YnN5c3RlbVxuICpcbiAqIFRoaXMgbW9kdWxlIGNvbnRhaW5zIEFQSXMgcmVsYXRlZCB0byBhIFRyYW5zaXRpb24uXG4gKlxuICogU2VlOlxuICogLSBbW1RyYW5zaXRpb25TZXJ2aWNlXV1cbiAqIC0gW1tUcmFuc2l0aW9uXV1cbiAqIC0gW1tIb29rRm5dXSwgW1tUcmFuc2l0aW9uSG9va0ZuXV0sIFtbVHJhbnNpdGlvblN0YXRlSG9va0ZuXV0sIFtbSG9va01hdGNoQ3JpdGVyaWFdXSwgW1tIb29rUmVzdWx0XV1cbiAqXG4gKiBAY29yZWFwaVxuICogQHByZWZlcnJlZFxuICogQG1vZHVsZSB0cmFuc2l0aW9uXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5leHBvcnQgKiBmcm9tICcuL2ludGVyZmFjZSc7XG5leHBvcnQgKiBmcm9tICcuL2hvb2tCdWlsZGVyJztcbmV4cG9ydCAqIGZyb20gJy4vaG9va1JlZ2lzdHJ5JztcbmV4cG9ydCAqIGZyb20gJy4vcmVqZWN0RmFjdG9yeSc7XG5leHBvcnQgKiBmcm9tICcuL3RyYW5zaXRpb24nO1xuZXhwb3J0ICogZnJvbSAnLi90cmFuc2l0aW9uSG9vayc7XG5leHBvcnQgKiBmcm9tICcuL3RyYW5zaXRpb25FdmVudFR5cGUnO1xuZXhwb3J0ICogZnJvbSAnLi90cmFuc2l0aW9uU2VydmljZSc7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvdHJhbnNpdGlvbi9pbmRleC50cyIsIi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5leHBvcnQgKiBmcm9tICcuL2ludGVyZmFjZSc7XG5leHBvcnQgKiBmcm9tICcuL3VybE1hdGNoZXInO1xuZXhwb3J0ICogZnJvbSAnLi91cmxNYXRjaGVyRmFjdG9yeSc7XG5leHBvcnQgKiBmcm9tICcuL3VybFJvdXRlcic7XG5leHBvcnQgKiBmcm9tICcuL3VybFJ1bGUnO1xuZXhwb3J0ICogZnJvbSAnLi91cmxTZXJ2aWNlJztcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS91cmwvaW5kZXgudHMiLCIvKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHZpZXdcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbmV4cG9ydCAqIGZyb20gJy4vaW50ZXJmYWNlJztcbmV4cG9ydCAqIGZyb20gJy4vdmlldyc7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gQHVpcm91dGVyL2NvcmUvdmlldy9pbmRleC50cyIsIi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5leHBvcnQgKiBmcm9tICcuL3ZhbmlsbGEvaW5kZXgnO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3ZhbmlsbGEudHMiLCIvKipcbiAqIE5haXZlLCBwdXJlIEpTIGltcGxlbWVudGF0aW9uIG9mIGNvcmUgdWktcm91dGVyIHNlcnZpY2VzXG4gKlxuICpcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi9cbi8qKiAqL1xuZXhwb3J0ICogZnJvbSAnLi9pbnRlcmZhY2UnO1xuXG5leHBvcnQgKiBmcm9tICcuL3EnO1xuZXhwb3J0ICogZnJvbSAnLi9pbmplY3Rvcic7XG5cbmV4cG9ydCAqIGZyb20gJy4vYmFzZUxvY2F0aW9uU2VydmljZSc7XG5leHBvcnQgKiBmcm9tICcuL2hhc2hMb2NhdGlvblNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9tZW1vcnlMb2NhdGlvblNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9wdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UnO1xuXG5leHBvcnQgKiBmcm9tICcuL21lbW9yeUxvY2F0aW9uQ29uZmlnJztcbmV4cG9ydCAqIGZyb20gJy4vYnJvd3NlckxvY2F0aW9uQ29uZmlnJztcblxuZXhwb3J0ICogZnJvbSAnLi91dGlscyc7XG5leHBvcnQgKiBmcm9tICcuL3BsdWdpbnMnO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL3ZhbmlsbGEvaW5kZXgudHMiLCIvKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi9cbi8qKiAqL1xuaW1wb3J0IHsgQnJvd3NlckxvY2F0aW9uQ29uZmlnIH0gZnJvbSAnLi9icm93c2VyTG9jYXRpb25Db25maWcnO1xuaW1wb3J0IHsgSGFzaExvY2F0aW9uU2VydmljZSB9IGZyb20gJy4vaGFzaExvY2F0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBsb2NhdGlvblBsdWdpbkZhY3RvcnkgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IExvY2F0aW9uUGx1Z2luLCBTZXJ2aWNlc1BsdWdpbiB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IFVJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmltcG9ydCB7IFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSB9IGZyb20gJy4vcHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IE1lbW9yeUxvY2F0aW9uU2VydmljZSB9IGZyb20gJy4vbWVtb3J5TG9jYXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IE1lbW9yeUxvY2F0aW9uQ29uZmlnIH0gZnJvbSAnLi9tZW1vcnlMb2NhdGlvbkNvbmZpZyc7XG5pbXBvcnQgeyAkaW5qZWN0b3IgfSBmcm9tICcuL2luamVjdG9yJztcbmltcG9ydCB7ICRxIH0gZnJvbSAnLi9xJztcbmltcG9ydCB7IHNlcnZpY2VzIH0gZnJvbSAnLi4vY29tbW9uL2NvcmVzZXJ2aWNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJ2aWNlc1BsdWdpbihyb3V0ZXI6IFVJUm91dGVyKTogU2VydmljZXNQbHVnaW4ge1xuICBzZXJ2aWNlcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG4gIHNlcnZpY2VzLiRxID0gJHE7XG5cbiAgcmV0dXJuIHsgbmFtZTogJ3ZhbmlsbGEuc2VydmljZXMnLCAkcSwgJGluamVjdG9yLCBkaXNwb3NlOiAoKSA9PiBudWxsIH07XG59XG5cbi8qKiBBIGBVSVJvdXRlclBsdWdpbmAgdXNlcyB0aGUgYnJvd3NlciBoYXNoIHRvIGdldC9zZXQgdGhlIGN1cnJlbnQgbG9jYXRpb24gKi9cbmV4cG9ydCBjb25zdCBoYXNoTG9jYXRpb25QbHVnaW46IChyb3V0ZXI6IFVJUm91dGVyKSA9PiBMb2NhdGlvblBsdWdpbiA9IGxvY2F0aW9uUGx1Z2luRmFjdG9yeShcbiAgJ3ZhbmlsbGEuaGFzaEJhbmdMb2NhdGlvbicsXG4gIGZhbHNlLFxuICBIYXNoTG9jYXRpb25TZXJ2aWNlLFxuICBCcm93c2VyTG9jYXRpb25Db25maWcsXG4pO1xuXG4vKiogQSBgVUlSb3V0ZXJQbHVnaW5gIHRoYXQgZ2V0cy9zZXRzIHRoZSBjdXJyZW50IGxvY2F0aW9uIHVzaW5nIHRoZSBicm93c2VyJ3MgYGxvY2F0aW9uYCBhbmQgYGhpc3RvcnlgIGFwaXMgKi9cbmV4cG9ydCBjb25zdCBwdXNoU3RhdGVMb2NhdGlvblBsdWdpbjogKHJvdXRlcjogVUlSb3V0ZXIpID0+IExvY2F0aW9uUGx1Z2luID0gbG9jYXRpb25QbHVnaW5GYWN0b3J5KFxuICAndmFuaWxsYS5wdXNoU3RhdGVMb2NhdGlvbicsXG4gIHRydWUsXG4gIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSxcbiAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLFxuKTtcblxuLyoqIEEgYFVJUm91dGVyUGx1Z2luYCB0aGF0IGdldHMvc2V0cyB0aGUgY3VycmVudCBsb2NhdGlvbiBmcm9tIGFuIGluLW1lbW9yeSBvYmplY3QgKi9cbmV4cG9ydCBjb25zdCBtZW1vcnlMb2NhdGlvblBsdWdpbjogKHJvdXRlcjogVUlSb3V0ZXIpID0+IExvY2F0aW9uUGx1Z2luID0gbG9jYXRpb25QbHVnaW5GYWN0b3J5KFxuICAndmFuaWxsYS5tZW1vcnlMb2NhdGlvbicsXG4gIGZhbHNlLFxuICBNZW1vcnlMb2NhdGlvblNlcnZpY2UsXG4gIE1lbW9yeUxvY2F0aW9uQ29uZmlnLFxuKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBAdWlyb3V0ZXIvY29yZS92YW5pbGxhL3BsdWdpbnMudHMiLCIvKipcbiAqICMgQ29yZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzXG4gKlxuICogVGhlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMgdGhhdCBhcmUgY29yZSB0byB1aS1yb3V0ZXIgYW5kIGRvIG5vdCBiZWxvbmdcbiAqIHRvIGEgbW9yZSBzcGVjaWZpYyBzdWJzeXN0ZW0gKHN1Y2ggYXMgcmVzb2x2ZSkuXG4gKlxuICogQGNvcmVhcGlcbiAqIEBwcmVmZXJyZWRcbiAqIEBtb2R1bGUgY29yZVxuICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuXG4vLyBOZWVkIHRvIGltcG9ydCBvciBleHBvcnQgYXQgbGVhc3Qgb25lIGNvbmNyZXRlIHNvbWV0aGluZ1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4vY29tbW9uL2NvbW1vbic7XG5pbXBvcnQgeyBVSVJvdXRlciB9IGZyb20gJy4vcm91dGVyJztcblxuLyoqXG4gKiBBbiBpbnRlcmZhY2UgZm9yIGdldHRpbmcgdmFsdWVzIGZyb20gZGVwZW5kZW5jeSBpbmplY3Rpb24uXG4gKlxuICogVGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byBnZXQgcmVzb2x2ZSB2YWx1ZXMgZm9yIGEgZ2l2ZW4gdG9rZW4uXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgYFVJSW5qZWN0b3JgIGNhbiBiZSByZXRyaWV2ZWQgZnJvbSB0aGUgY3VycmVudCB0cmFuc2l0aW9uIHVzaW5nIFtbVHJhbnNpdGlvbi5pbmplY3Rvcl1dLlxuICpcbiAqIC0tLVxuICpcbiAqIElmIG5vIHJlc29sdmUgaXMgZm91bmQgZm9yIGEgdG9rZW4sIHRoZW4gaXQgd2lsbCBkZWxlZ2F0ZSB0byB0aGUgbmF0aXZlIGluamVjdG9yLlxuICogVGhlIG5hdGl2ZSBpbmplY3RvciBtYXkgYmUgQW5ndWxhciAxIGAkaW5qZWN0b3JgLCBBbmd1bGFyIDIgYEluamVjdG9yYCwgb3IgYSBzaW1wbGUgcG9seWZpbGwuXG4gKlxuICogSW4gQW5ndWxhciAyLCB0aGUgbmF0aXZlIGluamVjdG9yIG1pZ2h0IGJlIHRoZSByb290IEluamVjdG9yLFxuICogb3IgaXQgbWlnaHQgYmUgYSBsYXp5IGxvYWRlZCBgTmdNb2R1bGVgIGluamVjdG9yIHNjb3BlZCB0byBhIGxhenkgbG9hZCBzdGF0ZSB0cmVlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVJSW5qZWN0b3Ige1xuICAvKipcbiAgICogR2V0cyBhIHZhbHVlIGZyb20gdGhlIGluamVjdG9yLlxuICAgKlxuICAgKiBGb3IgYSBnaXZlbiB0b2tlbiwgcmV0dXJucyB0aGUgdmFsdWUgZnJvbSB0aGUgaW5qZWN0b3IgdGhhdCBtYXRjaGVzIHRoZSB0b2tlbi5cbiAgICogSWYgdGhlIHRva2VuIGlzIGZvciBhIHJlc29sdmUgdGhhdCBoYXMgbm90IHlldCBiZWVuIGZldGNoZWQsIHRoaXMgdGhyb3dzIGFuIGVycm9yLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIHZhciBteVJlc29sdmUgPSBpbmplY3Rvci5nZXQoJ215UmVzb2x2ZScpO1xuICAgKiBgYGBcbiAgICpcbiAgICogIyMjIyBuZzEgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogLy8gRmV0Y2ggU3RhdGVTZXJ2aWNlXG4gICAqIGluamVjdG9yLmdldCgnJHN0YXRlJykuZ28oJ2hvbWUnKTtcbiAgICogYGBgXG4gICAqXG4gICAqICMjIyMgbmcyIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIGltcG9ydCB7U3RhdGVTZXJ2aWNlfSBmcm9tIFwidWktcm91dGVyLW5nMlwiO1xuICAgKiAvLyBGZXRjaCBTdGF0ZVNlcnZpY2VcbiAgICogaW5qZWN0b3IuZ2V0KFN0YXRlU2VydmljZSkuZ28oJ2hvbWUnKTtcbiAgICogYGBgXG4gICAqXG4gICAqICMjIyMgVHlwZXNjcmlwdCBFeGFtcGxlOlxuICAgKiBgYGBqc1xuICAgKiB2YXIgc3RyaW5nQXJyYXkgPSBpbmplY3Rvci5nZXQ8c3RyaW5nW10+KCdteVN0cmluZ0FycmF5Jyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMgYE5PV0FJVGAgcG9saWN5XG4gICAqXG4gICAqIFdoZW4gdXNpbmcgW1tSZXNvbHZlUG9saWN5LmFzeW5jXV0gPT09IGBOT1dBSVRgLCB0aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSBgZ2V0KClgIGlzIGEgcHJvbWlzZSBmb3IgdGhlIHJlc3VsdC5cbiAgICogVGhlIHByb21pc2UgaXMgbm90IGF1dG9tYXRpY2FsbHkgdW53cmFwcGVkLlxuICAgKlxuICAgKiBAcGFyYW0gdG9rZW4gdGhlIGtleSBmb3IgdGhlIHZhbHVlIHRvIGdldC4gIE1heSBiZSBhIHN0cmluZywgYSBjbGFzcywgb3IgYW55IGFyYml0cmFyeSBvYmplY3QuXG4gICAqIEByZXR1cm4gdGhlIERlcGVuZGVuY3kgSW5qZWN0aW9uIHZhbHVlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW5cbiAgICovXG4gIGdldCh0b2tlbjogYW55KTogYW55O1xuICAvKiogR2V0cyBhIHZhbHVlIGFzIHR5cGUgYFRgIChnZW5lcmljcyBwYXJhbWV0ZXIpICovXG4gIGdldDxUPih0b2tlbjogYW55KTogVDtcblxuICAvKipcbiAgICogQXN5bmNocm9ub3VzbHkgZ2V0cyBhIHZhbHVlIGZyb20gdGhlIGluamVjdG9yXG4gICAqXG4gICAqIEZvciBhIGdpdmVuIHRva2VuLCByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHZhbHVlIGZyb20gdGhlIGluamVjdG9yIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW4uXG4gICAqIElmIHRoZSB0b2tlbiBpcyBmb3IgYSByZXNvbHZlIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBmZXRjaGVkLCB0aGlzIHRyaWdnZXJzIHRoZSByZXNvbHZlIHRvIGxvYWQuXG4gICAqXG4gICAqICMjIyMgRXhhbXBsZTpcbiAgICogYGBganNcbiAgICogcmV0dXJuIGluamVjdG9yLmdldEFzeW5jKCdteVJlc29sdmUnKS50aGVuKHZhbHVlID0+IHtcbiAgICogICBpZiAodmFsdWUgPT09ICdkZWNsaW5lZCcpIHJldHVybiBmYWxzZTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdG9rZW4gdGhlIGtleSBmb3IgdGhlIHZhbHVlIHRvIGdldC4gIE1heSBiZSBhIHN0cmluZyBvciBhcmJpdHJhcnkgb2JqZWN0LlxuICAgKiBAcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIERlcGVuZGVuY3kgSW5qZWN0aW9uIHZhbHVlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW5cbiAgICovXG4gIGdldEFzeW5jKHRva2VuOiBhbnkpOiBQcm9taXNlPGFueT47XG4gIC8qKiBBc3luY2hyb25vdXNseSBnZXRzIGEgdmFsdWUgYXMgdHlwZSBgVGAgKGdlbmVyaWNzIHBhcmFtZXRlcikgKi9cbiAgZ2V0QXN5bmM8VD4odG9rZW46IGFueSk6IFByb21pc2U8VD47XG5cbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBmcm9tIHRoZSBuYXRpdmUgaW5qZWN0b3JcbiAgICpcbiAgICogUmV0dXJucyBhIHZhbHVlIGZyb20gdGhlIG5hdGl2ZSBpbmplY3RvciwgYnlwYXNzaW5nIGFueXRoaW5nIGluIHRoZSBbW1Jlc29sdmVDb250ZXh0XV0uXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqIGBgYGpzXG4gICAqIGxldCBzb21lVGhpbmcgPSBpbmplY3Rvci5nZXROYXRpdmUoU29tZVRva2VuKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB0b2tlbiB0aGUga2V5IGZvciB0aGUgdmFsdWUgdG8gZ2V0LiAgTWF5IGJlIGEgc3RyaW5nIG9yIGFyYml0cmFyeSBvYmplY3QuXG4gICAqIEByZXR1cm4gdGhlIERlcGVuZGVuY3kgSW5qZWN0aW9uIHZhbHVlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW5cbiAgICovXG4gIGdldE5hdGl2ZSh0b2tlbjogYW55KTogYW55O1xuICBnZXROYXRpdmU8VD4odG9rZW46IGFueSk6IFQ7XG59XG5cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbmV4cG9ydCBpbnRlcmZhY2UgVUlSb3V0ZXJQbHVnaW4gZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgbmFtZTogc3RyaW5nO1xufVxuXG4vKiogQGludGVybmFsYXBpICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVUlSb3V0ZXJQbHVnaW5CYXNlIGltcGxlbWVudHMgVUlSb3V0ZXJQbHVnaW4sIERpc3Bvc2FibGUge1xuICBhYnN0cmFjdCBuYW1lOiBzdHJpbmc7XG4gIGRpc3Bvc2Uocm91dGVyOiBVSVJvdXRlcikge31cbn1cblxuLyoqIEBpbnRlcm5hbGFwaSAqL1xuZXhwb3J0IGludGVyZmFjZSBEaXNwb3NhYmxlIHtcbiAgLyoqIEluc3RydWN0cyB0aGUgRGlzcG9zYWJsZSB0byBjbGVhbiB1cCBhbnkgcmVzb3VyY2VzICovXG4gIGRpc3Bvc2Uocm91dGVyPzogVUlSb3V0ZXIpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIEB1aXJvdXRlci9jb3JlL2ludGVyZmFjZS50cyJdLCJzb3VyY2VSb290IjoiIn0=